---
layout: post
title: 2024-12-24-微信小程序-----自定义组件
date: 2024-12-24 14:35:30 +0800
categories: ['微信小程序']
tags: ['微信小程序', 'Notepad', '小程序']
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=136302412
  alt: 微信小程序-----自定义组件
artid: 136302412
render_with_liquid: false
---
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序 --- 自定义组件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     自定义组件
    </h3>
    <h4>
     <a id="1__4">
     </a>
     1. 创建-注册-使用组件
    </h4>
    <p>
     <strong>
      组件介绍
     </strong>
    </p>
    <p>
     小程序目前已经支持组件化开发，可以将页面中的功能模块抽取成自定义组件，以便在不同的页面中重复使用；
    </p>
    <p>
     也可以将复杂的页面拆分成多个低耦合的模块，有助于代码维护。
    </p>
    <p>
     开发中常见的组件有两种:
    </p>
    <ol>
     <li>
      公共组件：将页面内的功能模块抽象成自定义组件，以便在不同的页面中重复使用
     </li>
     <li>
      页面组件：将复杂的页面拆分成多个低耦合的模块，有助于代码维护
     </li>
    </ol>
    <p>
     如果是公共组件，建议将其放在小程序的目录下的
     <code>
      components
     </code>
     文件夹中
    </p>
    <p>
     如果是页面组件，建议将其放在小程序对应页面目录下，当然你也可以放到页面的
     <code>
      components
     </code>
     文件夹中
    </p>
    <p>
     同时建议：
     <strong>
      一个组件一个文件夹，文件夹名称和组件名称保持一致
     </strong>
    </p>
    <blockquote>
     <p>
      📌
      <strong>
       注意事项
      </strong>
      ：
     </p>
     <ol>
      <li>
       自定义组件的需要在
       <code>
        json
       </code>
       文件中需要配置
       <code>
        component
       </code>
       字段设为
       <code>
        true
       </code>
      </li>
      <li>
       自定义组件通过
       <code>
        Component
       </code>
       构造器进行构建，在构造器中可以指定组件的属性、数据、方法等
      </li>
     </ol>
    </blockquote>
    <p>
     <strong>
      创建自定义组件：
     </strong>
    </p>
    <p>
     创建组件的步骤很简单，以公共组件为例，创建的步骤如下：
    </p>
    <ol>
     <li>
      <p>
       在小程序的目录下新建
       <code>
        components
       </code>
       文件夹
      </p>
     </li>
     <li>
      <p>
       在
       <code>
        components
       </code>
       文件夹上，点击右键，选择
       <code>
        新建文件夹
       </code>
       ，然后输入文件夹名称，我们建议文件夹的名称和组件的名称保持一致，这样方便后期对组件进行维护。我们这里新的的组件名称叫做：
       <code>
        custom-checkbox
       </code>
      </p>
     </li>
     <li>
      <p>
       在新建的组件文件夹上，点击右键，选择
       <code>
        新建 Component
       </code>
       ，然后输入组件的名称，组件的名称建议和文件夹保持一致
      </p>
     </li>
     <li>
      <p>
       此时就已经创建了一个功能组件
      </p>
     </li>
    </ol>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ae713dbcdc7f3253a92d42dfbbdfdb1f.png">
      <br/>
      <strong>
       使用自定义组件
      </strong>
     </img>
    </p>
    <p>
     开发中常见的组件主要分为 公共组件 和 页面组件 两种，因此注册组件的方式也分为两种：
    </p>
    <ol>
     <li>
      全局注册：在
      <code>
       app.json
      </code>
      文件中配置
      <code>
       usingComponents
      </code>
      节点进行引用声明，注册后可在任意组件使用
     </li>
     <li>
      局部注册：在页面的
      <code>
       json
      </code>
      文件中配置
      <code>
       usingComponents
      </code>
      节点进行引用声明，只可在当前页面使用
     </li>
    </ol>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1cb167196c3eee9b633835adbb33b701.png"/>
    </p>
    <p>
     在配置
     <code>
      usingComponents
     </code>
     节点进行引用声明时，需要提供自定义组件的标签名和对应的自定义组件文件路径，语法如下：
    </p>
    <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"自定义组件的标签名"</span><span class="token operator">:</span> <span class="token string">"自定义组件文件路径"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这样，在页面的
     <code>
      wxml
     </code>
     中就可以像使用基础组件一样使用自定义组件。节点名即自定义组件的标签名，节点属性即传递给组件的属性值。
    </p>
    <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"custom-checkbox"</span><span class="token operator">:</span> <span class="token string">"/components/custom-checkbox/custom-checkbox"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--pages/index/index.wxml--&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 将导入的自定义组件当成标签使用 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
                   <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <h4>
     <a id="2__104">
     </a>
     2. 自定义组件-数据和方法
    </h4>
    <p>
     在组件的 .js 中，需要调用
     <code>
      Component
     </code>
     方法创建自定义组件，
     <code>
      Component
     </code>
     中有以下两个属性：
    </p>
    <p>
     <code>
      data
     </code>
     数据：组件的内部数据
    </p>
    <p>
     <code>
      methods
     </code>
     方法：在组件中事件处理程序需要写到
     <code>
      methods
     </code>
     中才可以
    </p>
    <p>
     <strong>
      落地代码：
     </strong>
    </p>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateChecked<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxss
     </code>
    </p>
    <pre><code class="prism language-css"><span class="token comment">/* components/custom-checkbox/custom-checkbox.wxss */</span>

<span class="token selector">.custom-checkbox-container</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">/**
   * 组件的初始数据：用来定义当前组件内部所需要使用的数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ app.json
     </code>
    </p>
    <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"custom-checkbox"</span><span class="token operator">:</span> <span class="token string">"./components/custom-checkbox/custom-checkbox"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      ➡️ index.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>line<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token punctuation">/&gt;</span></span>

</code></pre>
    <h4>
     <a id="3__206">
     </a>
     3. 自定义组件-属性
    </h4>
    <p>
     属性 Properties 是指组件的对外属性，主要用来接收组件使用者传递给组件内部的数据，和 data 一同用于组件的模板渲染
    </p>
    <blockquote>
     <p>
      📌 注意事项：
     </p>
     <ol>
      <li>
       设置属性类型需要使用 type 属性，属性类型是必填项，value 属性为默认值
      </li>
      <li>
       属性类型可以为 String、Number、Boolean、Object、Array ，也可以为 null 表示不限制类型
      </li>
     </ol>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a29f87811a2720eab196fcb725b29cd2.png"/>
    </p>
    <p>
     <strong>
      落地代码：
     </strong>
    </p>
    <p>
     <code>
      ➡️ index.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- label 文本显示的内容 --&gt;</span>
<span class="token comment">&lt;!-- position 控制文本显示的位置 --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">"</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>line<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>匿名提交<span class="token punctuation">"</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
+   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-box {<!-- -->{ position === 'right' ? 'right' : 'left' }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateChecked<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
+ 
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
+       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxss
     </code>
    </p>
    <pre><code class="prism language-css"><span class="token comment">/* components/custom-checkbox/custom-checkbox.wxss */</span>

<span class="token selector">.custom-checkbox-container</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox-box</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox-box.left</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> row-reverse<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox-box.right</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

<span class="token operator">+</span>   <span class="token comment">/**
+    * 组件的属性列表：组件的对外属性，主要用来接收组件使用者传递给组件内部的属性以及数据
+    */</span>
<span class="token operator">+</span>   properties<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>     <span class="token comment">// 如果需要接收传递的属性，有两种方式：全写、简写</span>
<span class="token operator">+</span>     <span class="token comment">// label: String</span>
<span class="token operator">+</span> 
<span class="token operator">+</span>     label<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>       <span class="token comment">// type 组件使用者传递的数据类型</span>
<span class="token operator">+</span>       <span class="token comment">// 数据类型：String、Number、Boolean、Object、Array</span>
<span class="token operator">+</span>       <span class="token comment">// 也可以设置为 null，表示不限制类型</span>
<span class="token operator">+</span>       type<span class="token operator">:</span> String<span class="token punctuation">,</span>
<span class="token operator">+</span>       value<span class="token operator">:</span> <span class="token string">''</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span> 
<span class="token operator">+</span>     <span class="token comment">// 文字显示位置</span>
<span class="token operator">+</span>     position<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>       type<span class="token operator">:</span> String<span class="token punctuation">,</span>
<span class="token operator">+</span>       value<span class="token operator">:</span> <span class="token string">'right'</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span>
<span class="token operator">+</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的初始数据：用来定义当前组件内部所需要使用的数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">,</span>
<span class="token operator">+</span>        <span class="token comment">// label: '在组件内部也可以修改 properties 中的数据'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">+</span>       <span class="token comment">// 在 JS 中可以访问和获取 properties 中的数据</span>
<span class="token operator">+</span>       <span class="token comment">// 但是一般情况下，不建议修改，因为会造成数据流的混乱</span>
<span class="token operator">+</span>       <span class="token comment">// console.log(this.properties.label)</span>
      <span class="token comment">// console.log(this.data.isChecked)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="4__wxml__slot_359">
     </a>
     4. 组件 wxml 的 slot
    </h4>
    <p>
     在使用基础组件时，可以给组件传递子节点传递内容，从而将内容展示到页面中，自定义组件也可以接收子节点内容
    </p>
    <p>
     只不过在组件模板中需要定义
     <code>
      &lt;slot /&gt;
     </code>
     节点，用于承载组件引用时提供的子节点
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/995d532c55b5de811141ff286240e1e9.png"/>
    </p>
    <p>
     默认情况下，一个组件的 wxml 中只能有一个 slot 。需要使用多 slot 时，可以在组件 js 中声明启用。
    </p>
    <p>
     同时需要给 slot 添加 name 来区分不同的 slot，给子节点内容添加 slot 属性来将节点插入到 对应的 slot 中
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/25963f34f1a8cee32bab952d510ea278.png"/>
    </p>
    <p>
     <strong>
      知识点讲解：
     </strong>
    </p>
    <p>
     <code>
      ➡️ custom01.html
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slot-top<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token comment">&lt;!-- slot 就是用来接收、承载子节点内容 --&gt;</span>
  <span class="token comment">&lt;!-- slot 只是一个占位符，子节点内容会将 slot 进行替换 --&gt;</span>
  <span class="token comment">&lt;!-- 默认插槽 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slot-bottom<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ custom01.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token comment">// components/custom01/custom01.js</span>

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 启用多 slot 支持</span>
    <span class="token literal-property property">multipleSlots</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ cart.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom01</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slot-top<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>我需要显示到顶部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    
  <span class="token comment">&lt;!-- 默认情况下，自定义组件的子节点内容不会进行展示 --&gt;</span>
  <span class="token comment">&lt;!-- 如果想内容进行展示，需要再组件模板中定义 slot 节点 --&gt;</span>
  我是子节点内容
    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slot-bottom<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>我需要显示到低部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom01</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <p>
     <strong>
      完善复选框案例
     </strong>
    </p>
    <p>
     <code>
      ➡️ custom-checkbox.html
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-box {<!-- -->{ position === 'right' ? 'right' : 'left' }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateChecked<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
+       <span class="token comment">&lt;!-- lable 和 子节点内容都进行了展示 --&gt;</span>
+       <span class="token comment">&lt;!-- 要么展示 lable 要么展示 子节点内容 --&gt;</span>
+       <span class="token comment">&lt;!-- 如果用户传递了 lable 属性，就展示 lable --&gt;</span>
+       <span class="token comment">&lt;!-- 如果用户没有传递 lable 属性，就展示 子节点内容 --&gt;</span>
+       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ label !== '' }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
+ 
+       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span> <span class="token punctuation">/&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <p>
     <code>
      ➡️ index.html
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- label 文本显示的内容 --&gt;</span>
<span class="token comment">&lt;!-- position 控制文本显示的位置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">"</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>line<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>匿名提交<span class="token punctuation">"</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  匿名提交 - 222
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <h4>
     <a id="5__488">
     </a>
     5. 组件样式以及注意事项
    </h4>
    <p>
     <strong>
      选择器使用注意事项：
     </strong>
    </p>
    <p>
     类似于页面，自定义组件拥有自己的
     <code>
      wxss
     </code>
     样式，组件对应
     <code>
      wxss
     </code>
     文件的样式，只对组件wxml内的节点生效。
    </p>
    <p>
     编写组件样式时，需要注意以下几点：
    </p>
    <ol>
     <li>
      <p>
       app.wxss 或页面的 wxss 中使用了标签名（view）选择器（或一些其他特殊选择器）来直接指定样式
       <br/>
       这些选择器会影响到页面和全部组件，通常情况下这是不推荐的做法
      </p>
     </li>
     <li>
      <p>
       组件和引用组件的页面不能使用 id 选择器(#a)、属性选择器([a]) 和 标签名选择器，请改用 class 选择器
      </p>
     </li>
     <li>
      <p>
       组件和引用组件的页面中使用后代选择器（.a .b）在一些极端情况下会有非预期的表现，如遇，请避免使用
      </p>
     </li>
     <li>
      <p>
       子元素选择器（.a&gt;.b）只能用于 view 组件与其子节点之间，用于其他组件可能导致非预期的情况。
      </p>
     </li>
     <li>
      <p>
       继承样式，如 font 、 color ，会从组件外继承到组件内。
      </p>
     </li>
     <li>
      <p>
       除继承样式外， 全局中的样式、组件所在页面的的样式对自定义组件无效 (除非更改组件样式隔离选项)
      </p>
     </li>
    </ol>
    <pre><code class="prism language-css"><span class="token selector">#a</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span> <span class="token comment">/* 在组件中不能使用 */</span>
<span class="token selector">[a]</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span> <span class="token comment">/* 在组件中不能使用 */</span>
<span class="token selector">button</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span> <span class="token comment">/* 在组件中不能使用 */</span>
<span class="token selector">.a &gt; .b</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span> <span class="token comment">/* 除非 .a 是 view 组件节点，否则不一定会生效 */</span>
</code></pre>
    <p>
     <strong>
      落地代码：
     </strong>
    </p>
    <p>
     <code>
      ➡️ custom02.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content son<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>给自定义组件设置样式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ custom02.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">/* components/custom02/custom02.wxss */

/* 第一个注意事项：在自定义的 wxss 文件中，不允许使用标签选择器，ID 选择器，属性选择器 */
/* 请改为 class 选择器 */
/* text {
  color: lightseagreen;
} */

/* #content {
  color: lightseagreen;
} */

/* [id=content] {
  color: lightseagreen;
} */

/* .content {
  color: lightseagreen;
} */

/* 第二个注意事项：子选择器，只能用于 view 和 子组件，用于其他组件可能会出现样式失效的问题 */
/* .content &gt; .label {
  color: lightseagreen;
} */

/* 第三个注意事项：继承样式，例如：color\font 都会从组件外继承 */

/* 第四个注意事项：全局样式、组件所在页面的样式文件中的样式都对自定义组件无效 */

/* 第五个注意事项：官方不推荐做法 */
/* 不建议在 全局样式文件 以及 父级页面之间使用标签选择器设置样式 */
/* 如果是在全局样式文件中设置样式，会影响项目中全部的相同组件 */
/* 如果是再页面样式文件中设置样式，会影响当前页面所有的相同组件 */

/* 第六个注意事项： */
/* 组件和组件使用者，如果使用了后代选择器，可能会出现一些非预期情况 */
/* 如果出现，请避免 */

</code></pre>
    <p>
     <code>
      ➡️ cate.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom02</span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>son test<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>我是父级页面中的结构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ cate.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">/* pages/cate/cate.wxss */

/* .custom  {
  color: lightseagreen;
  font-size: 50rpx;
} */

/* .label {
  color: lightseagreen;
} */

/* text {
  color: lightseagreen;
} */

.parent .son.test {
  color: lightsalmon;
}
</code></pre>
    <p>
     <code>
      ➡️ app.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">/* .label {
  color: lightseagreen;
} */

/* text {
  color: lightseagreen;
} */

</code></pre>
    <h4>
     <a id="6__637">
     </a>
     6. 组件样式隔离
    </h4>
    <p>
     默认情况下，自定义组件的样式只受到自定义组件 wxss 的影响。除非以下两种情况：
    </p>
    <ol>
     <li>
      <p>
       <code>
        app.wxss
       </code>
       或页面的
       <code>
        wxss
       </code>
       中使用了标签名（view）选择器（或一些其他特殊选择器）来直接指定样式，这些选择器会影响到页面和全部组件。通常情况下这是不推荐的做法。
      </p>
     </li>
     <li>
      <p>
       指定特殊的样式隔离选项
       <code>
        styleIsolation
       </code>
      </p>
      <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'isolated'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ol>
    <p>
     <code>
      styleIsolation
     </code>
     选项它支持以下取值：
    </p>
    <ul>
     <li>
      <code>
       isolated
      </code>
      表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响（一般情况下的默认值）；
     </li>
     <li>
      <code>
       apply-shared
      </code>
      表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面；
     </li>
     <li>
      <code>
       shared
      </code>
      表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了
      <code>
       apply-shared
      </code>
      或
      <code>
       shared
      </code>
      的自定义组件。
     </li>
    </ul>
    <p>
     <strong>
      落地代码：
     </strong>
    </p>
    <p>
     <code>
      ➡️ custom03.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--components/custom03/custom03.wxml--&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>演示组件样式隔离<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ custom03.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">/* components/custom03/custom03.wxss */

.test {
  color: lightseagreen;
  font-size: 50rpx;
}
</code></pre>
    <p>
     <code>
      ➡️ custom03.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token comment">// components/custom03/custom03.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// styleIsolation：配置组件样式隔离</span>

    <span class="token comment">// isolated：开启样式隔离，默认值</span>
    <span class="token comment">// 在默认情况下，自定义组件和组件使用者如果存在相同的类名，类名不会相互影响</span>

    <span class="token comment">// apply-shared：表示组件使用者、页面的 wxss 样式能够影响到自定义组件</span>
    <span class="token comment">// 但是自定义组件的样式不会影响组件使用者、页面的 wxss 样式</span>
    <span class="token comment">// styleIsolation: "apply-shared"</span>

    <span class="token comment">// shared：表示组件使用者、页面的 wxss 样式能够影响到自定义组件</span>
    <span class="token comment">// 自定义组件的样式会影响组件使用者、页面的 wxss 样式</span>
    <span class="token comment">// 和其他使用了 apply-share 以及 share 属性的自定义组件</span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'shared'</span>

  <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ cate.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom03</span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ cate.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">.label {
  color: lightsalmon;
}
</code></pre>
    <h4>
     <a id="7_checkbox_743">
     </a>
     7. 拓展-小程序修改checkbox样式
    </h4>
    <p>
     <strong>
      知识点：
     </strong>
    </p>
    <p>
     技巧：在官方文档，找到官方提供的案例，审查元素，就能看到对应的类名
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1aaca4efe8afecf77d609fa72ed006e9.png"/>
    </p>
    <blockquote>
     <p>
      📌
      <strong>
       注意事项
      </strong>
     </p>
     <ol>
      <li>
       .custom-checkbox .wx-checkbox-input {}：复选框没有选中时默认的样式
      </li>
      <li>
       .custom-checkbox .wx-checkbox-input-checked {}： 复选框选中时默认的样式
      </li>
      <li>
       .custom-checkbox .wx-checkbox-input.wx-checkbox-input-checked:before {}：复选框选中时 √ 样式
      </li>
     </ol>
     <p>
      这几个类名，在全局样式文件、页面样式文件都可以对修改复选框样式，
     </p>
     <p>
      <strong>
       <code>
        但是在自定义组件内部使用的时候，需要添加 styleIsolation: 'shared' 属性
       </code>
      </strong>
     </p>
    </blockquote>
    <p>
     <strong>
      落地代码：
     </strong>
    </p>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">/* 复选框组件是公共组件 */
/* 以后需要再多个页面或者需要再多个项目中进行使用 */
/* 所以呢，需要先给复选框组件准备、设置一些默认样式 */
/* 如果在其他页面或者其他项目中使用的时候，发现样式不符合产品需求 */
/* 可以进行修改、对默认的样式进行修改 */

/* 1. 需要给复选框设置默认样式 */
/* 需要先找到小程序给复选框提供的类名，通过小程序给提供的类名修改才可以 */
/* 需要先打开小程序开发文档，找到复选框文档，审查元素，进行查找 */

/* 在自定义组件中，不能直接修改复选框样式 */
/* 如果需要进行修改，需要设置 styleIsolation 才可以 */
/* shared：修改其他页面的样式、组件使用者的样式、以及其他使用了 share 以及 apply-share 的组件 */
/* 这时候，不是想要的结果 */
/* 需求是：只想影响当前组件，可以添加命名空间 */

/* 复选框没有选中时默认的样式 */
.custom-checkbox .wx-checkbox-input {
  width: 24rpx !important;
  height: 24rpx !important;
  border-radius: 50% !important;
  border: 1px solid #fda007 !important;
  margin-top: -6rpx;
}

/* 复选框选中时默认的样式 */
.custom-checkbox .wx-checkbox-input-checked {
  background-color: #fda007 !important;
}

/* 复选框选中时 √ 样式 */
.custom-checkbox .wx-checkbox-input.wx-checkbox-input-checked:before {
  font-size: 22rpx;
  color: #fff;
}

/* 2. 组件使用者也能够修改默认的样式 */

</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'shared'</span>
  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ index.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">/* 组件使用者修改复选框的样式 */
.custom .custom-checkbox .wx-checkbox-input {
  border: 1px solid lightseagreen !important;
}

.custom .custom-checkbox .wx-checkbox-input-checked {
  background-color: lightseagreen !important;
}

</code></pre>
    <h4>
     <a id="8__864">
     </a>
     8. 数据监听器
    </h4>
    <p>
     <strong>
      知识点：
     </strong>
    </p>
    <p>
     数据监听器可以用于监听和响应任何属性和数据字段的变化，有时，需要在一些数据字段被 setData 设置时，需要执行一些操作。那么就可以使用
     <code>
      observers
     </code>
     数据监听器来实现。语法如下：
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">obj</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// key 是需要检测数据</span>
    <span class="token comment">// value 是一个函数，函数接收一个形参作为参数，是最新的值</span>
    <span class="token function-variable function">num</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newNum</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newNum<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 数据监听器支持监听属性或内部数据的变化，可以同时监听多个</span>
    <span class="token string-property property">'num, count'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newNum<span class="token punctuation">,</span> newCount</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newNum<span class="token punctuation">,</span> newCount<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 监听器可以监听子数据字段</span>
    <span class="token string-property property">'obj.age'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newAge</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newAge<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 如果需要监听所有子数据字段的变化，可以使用通配符 ** </span>
    <span class="token string-property property">'obj.**'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newAge</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newAge<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
        
    <span class="token string-property property">'arr[0]'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="9__914">
     </a>
     9. 组件间通信与事件
    </h4>
    <h5>
     <a id="91__918">
     </a>
     9.1 父往子传值
    </h5>
    <p>
     <strong>
      知识点：
     </strong>
    </p>
    <p>
     父组件如果需要向子组件传递指定属性的数据，在 WXML 中需要使用数据绑定的方式
    </p>
    <p>
     与普通的 WXML 模板类似，使用数据绑定，这样就可以向子组件的属性传递动态数据。
    </p>
    <p>
     父组件如果需要向子组件传递数据，只需要两个步骤：
    </p>
    <p>
     1.在父组件 WXML 中使用 数据绑定 的方式向子组件传递动态数据
    </p>
    <p>
     2.子组件内部使用 properties 接收父组件传递的数据即可
    </p>
    <p>
     <strong>
      知识点代码：
     </strong>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- 引用组件的页面模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>costom</span> <span class="token attr-name">prop-a</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ name }}<span class="token punctuation">"</span></span> <span class="token attr-name">prop-b</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ age }}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     在组件内部，需要在
     <code>
      Component
     </code>
     构造器中通过
     <code>
      properties
     </code>
     接收传递的数据，接收方式有两种：
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 组件的属性列表 props
   */</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">propA</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// 传递的数据类型</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 默认值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">propB</span><span class="token operator">:</span> Number <span class="token comment">// 简化的定义方式</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// coding...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre>
    <p>
     在子组件中也可以通过
     <code>
      this.setData()
     </code>
     对
     <code>
      properties
     </code>
     中的数据进行修改，但是一般不建议修改
    </p>
    <pre><code class="prism language-js"><span class="token comment">// components/custom01/custom01.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 修改列表中的数据</span>
    <span class="token function">updateProp</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">propB</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>propB <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre>
    <p>
     <strong>
      复选框组件案例：
     </strong>
    </p>
    <p>
     <code>
      ➡️ index.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
  <span class="token comment">// coding...</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ index.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">"</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span>
<span class="token attr-name">+</span>   <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'shared'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">// coding...</span>

    <span class="token comment">// 复选框组件公共组件</span>
    <span class="token comment">// 需要再多个页面、在多个项目中进行使用</span>
    <span class="token comment">// 在使用的时候，有的地方希望默认是选中的效果，有的地方希望默认是没有被选中的效果</span>
    <span class="token comment">// 怎么处理 ？</span>
    <span class="token comment">// 首先让复选框默认还是没有被选中的效果</span>
    <span class="token comment">// 如果希望复选框默认被选中，这时候传递属性(checked=true)到复选框组件</span>
<span class="token operator">+</span>     checked<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>       type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
<span class="token operator">+</span>       value<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的初始数据：用来定义当前组件内部所需要使用的数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token operator">+</span>   observers<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>     <span class="token comment">// 如果需要将 properties 中的数据赋值给 data</span>
<span class="token operator">+</span>     <span class="token comment">// 可以使用 observers 进行处理</span>
<span class="token operator">+</span>     <span class="token function-variable function">checked</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newChecked</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>       <span class="token comment">// console.log(newChecked)</span>
<span class="token operator">+</span>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>         isChecked<span class="token operator">:</span> newChecked
<span class="token operator">+</span>       <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span>
<span class="token operator">+</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
<span class="token operator">+</span>         isChecked<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">,</span>
<span class="token operator">+</span>         <span class="token comment">// checked: !this.properties.checked</span>
        <span class="token comment">// label: '在组件内部也可以修改 properties 中的数据'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 在 JS 中可以访问和获取 properties 中的数据</span>
      <span class="token comment">// 但是一般情况下，不建议修改，因为会造成数据流的混乱</span>
      <span class="token comment">// console.log(this.properties.label)</span>
      <span class="token comment">// console.log(this.data.isChecked)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-box {<!-- -->{ position === 'right' ? 'right' : 'left' }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateChecked<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- lable 和 子节点内容都进行了展示 --&gt;</span>
      <span class="token comment">&lt;!-- 要么展示 lable 要么展示 子节点内容 --&gt;</span>
      <span class="token comment">&lt;!-- 如果用户传递了 lable 属性，就展示 lable --&gt;</span>
      <span class="token comment">&lt;!-- 如果用户没有传递 lable 属性，就展示 子节点内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ label !== '' }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <h5>
     <a id="92__1133">
     </a>
     9.2 子往父传值
    </h5>
    <p>
     子组件如果需要向父组件传递数据，可以通过小程序提供的事件系统实现传递传递，可以传递任意数据。
    </p>
    <p>
     事件系统是组件间通信的主要方式之一，自定义组件可以触发任意的事件，引用组件的页面可以监听这些事件，流程如下：
    </p>
    <ol>
     <li>
      自定义组件触发事件时，需要使用
      <code>
       triggerEvent
      </code>
      方法发射一个自定义的事件
     </li>
     <li>
      自定义组件标签上通过 bind 方法监听发射的事件
     </li>
    </ol>
    <p>
     <strong>
      触发事件：
     </strong>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- 在自定义组件中 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">plain</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sendData<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>传递数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <pre><code class="prism language-js"><span class="token comment">// components/custom05/custom05.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">// 组件的初始数据</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">666</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 组件的方法列表</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 将数据传递给父组件</span>
    <span class="token function">sendData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

      <span class="token comment">// 如果需要将数据传递给父组件</span>
      <span class="token comment">// 需要使用 triggerEvent 发射自定义事件</span>
      <span class="token comment">// 第二个参数，是携带的参数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'myevent'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num<span class="token punctuation">)</span>
      
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      监听事件：
     </strong>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ num }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 需要在自定义组件标签上通过 bind 方法绑定自定义事件，同时绑定事件处理函数 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom05</span> <span class="token attr-name"><span class="token namespace">bind:</span>myevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getData<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
    <pre><code class="prism language-js"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">getData</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 可以通过事件对象.detail 获取子组件传递给父组件的数据</span>
    <span class="token comment">// console.log(event)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> event<span class="token punctuation">.</span>detail
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre>
    <p>
     <strong>
      复选框组件案例：
     </strong>
    </p>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">,</span>
        <span class="token comment">// label: '在组件内部也可以修改 properties 中的数据'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 在 JS 中可以访问和获取 properties 中的数据</span>
      <span class="token comment">// 但是一般情况下，不建议修改，因为会造成数据流的混乱</span>
      <span class="token comment">// console.log(this.properties.label)</span>
      <span class="token comment">// console.log(this.data.isChecked)</span>

<span class="token operator">+</span>       <span class="token comment">// 目前复选框组件的状态是存储在复选框组件内部的、存储在自定义组件内部的</span>
<span class="token operator">+</span>       <span class="token comment">// 但是，在以后实际开发中，组件使用者、父组件有时候也需要获取到复选框内部的状态</span>
<span class="token operator">+</span>       <span class="token comment">// 怎么办 ？</span>
<span class="token operator">+</span>       <span class="token comment">// 这时候，自定义组件内部就需要发射一个自定义事件，</span>
<span class="token operator">+</span>       <span class="token comment">// 如果组件使用者、父组件需要使用数据，绑定自定义事件进行获取即可</span>
<span class="token operator">+</span>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'changechecked'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ index.html
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">"</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span>
  <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getchild<span class="token punctuation">"</span></span>
<span class="token attr-name">+</span>  <span class="token attr-name"><span class="token namespace">bind:</span>changechecked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getData<span class="token punctuation">"</span></span>
<span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ index.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">getData</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'提交'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请同意协议！'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h5>
     <a id="93__1300">
     </a>
     9.3 获取组件实例
    </h5>
    <p>
     如果前面两种方式不足以满足需要。
    </p>
    <p>
     可在父组件里调用
     <code>
      this.selectComponent()
     </code>
     ，获取子组件的实例对象，就可以直接拿到子组件的任意数据和方法。调用时需要传入一个匹配选择器
     <code>
      selector
     </code>
     ，如：
     <code>
      this.selectComponent(".my-component")
     </code>
     。
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- 父组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>costom</span> <span class="token attr-name"><span class="token namespace">bind:</span>myevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getData<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getChildComponent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <pre><code class="prism language-js"><span class="token comment">// 父组件</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getChildComponent</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'.custom'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      复选框组件案例：
     </strong>
    </p>
    <p>
     <code>
      ➡️ index.html
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">"</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span>
  <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span>
<span class="token attr-name">+</span>   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span>
<span class="token attr-name">+</span>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">bind:</span>changechecked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getData<span class="token punctuation">"</span></span>
<span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">plain</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getChild<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>获取子组件实例对象<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <p>
     <code>
      ➡️ index.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">// coding...</span>

  <span class="token comment">// 获取子组件的实例对象</span>
  <span class="token function">getChild</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// this.selectComponent 方法获取子组件实例对象</span>
    <span class="token comment">// 获取到实例对象以后，就能获取子组件所有的数据、也能调用子组件的方法</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'#child'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="10__1377">
     </a>
     10. 组件生命周期
    </h4>
    <p>
     组件的生命周期：指的是组件自身的一些钩子函数，这些函数在特定的时间节点时被自动触发
    </p>
    <p>
     组件的生命周期函数需要在
     <code>
      lifetimes
     </code>
     字段内进行声明
    </p>
    <p>
     最重要的生命周期是
     <code>
      created
     </code>
     <code>
      attached
     </code>
     <code>
      detached
     </code>
     包含一个组件生命周期流程的最主要时间点
    </p>
    <table>
     <thead>
      <tr>
       <th align="left">
        定义段
       </th>
       <th align="left">
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <code>
         created
        </code>
       </td>
       <td align="left">
        在组件实例刚刚被创建时执行，注意此时不能调用
        <code>
         setData
        </code>
        （还没有对模板解析）
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         attached
        </code>
       </td>
       <td align="left">
        在组件实例进入页面节点树时执行 (模板已经解析完毕，并且挂载到页面上)
       </td>
      </tr>
      <tr>
       <td align="left">
        ready
       </td>
       <td align="left">
        在组件布局完成后执行
       </td>
      </tr>
      <tr>
       <td align="left">
        moved
       </td>
       <td align="left">
        在组件实例被移动到节点树另一个位置时执行
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         detached
        </code>
       </td>
       <td align="left">
        在组件实例被从页面节点树移除时执行 (组件被销毁了)
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/859c4716b87c51c7596e69c21da67eed.png"/>
    </p>
    <ol>
     <li>
      <p>
       【组件实例刚刚被创建好时】，
       <code>
        created
       </code>
       生命周期被触发。此时，组件数据
       <code>
        this.data
       </code>
       就是在
       <code>
        Component
       </code>
       构造器中定义的数据
       <code>
        data
       </code>
       。
       <strong>
        此时还不能调用
        <code>
         setData
        </code>
        。
       </strong>
       通常情况下，这个生命周期只应该用于给组件
       <code>
        this
       </code>
       添加一些自定义属性字段。
      </p>
     </li>
     <li>
      <p>
       【在组件完全初始化完毕】、进入页面节点树后，
       <code>
        attached
       </code>
       生命周期被触发。此时，
       <code>
        this.data
       </code>
       已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行。
      </p>
     </li>
     <li>
      <p>
       【在组件离开页面节点树后】，
       <code>
        detached
       </code>
       生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则
       <code>
        detached
       </code>
       会被触发。
      </p>
     </li>
    </ol>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  
  <span class="token literal-property property">lifetimes</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 在组件实例刚刚被创建时执行，注意此时不能调用 setData </span>
      <span class="token comment">// 一般用来为组件添加一些自定义属性字段。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// attached 在组件完全初始化完毕、进入页面节点树后执行</span>
      <span class="token comment">// 模板已经解析完毕，并且挂载到页面上</span>
      <span class="token comment">// 一般都是在这里写对应的交互</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">detached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 在组件实例被从页面节点树移除时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// coding...</span>
  <span class="token punctuation">}</span>
    
  <span class="token comment">// coding...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="11__1444">
     </a>
     11. 组件所在页面的生命周期
    </h4>
    <p>
     组件还有一些特殊的生命周期，这类生命周期和组件没有很强的关联
    </p>
    <p>
     主要用于组件内部监听父组件的展示、隐藏状态，从而方便组件内部执行一些业务逻辑的处理
    </p>
    <p>
     组件所在页面的生命周期有 4 个： show、 hide、 resize、 routeDone，需要在
     <code>
      pageLifetimes
     </code>
     字段内进行声明
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/91a88f0efbb62260bcee9e6e8a1d3af3.png"/>
    </p>
    <pre><code class="prism language-js"><span class="token comment">// components/custom06/custom06.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">// coding...</span>

  <span class="token comment">// 组件所在页面的生命周期</span>
  <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 监听组件所在的页面展示(后台切前台)状态</span>
    <span class="token function">show</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件所在的页面被展示'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 监听组件所在的页面隐藏(前台切后台、点击 tabBar)状态</span>
    <span class="token function">hide</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件所在的页面被隐藏'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre>
    <h4>
     <a id="12__1483">
     </a>
     12. 小程序生命周期总结
    </h4>
    <p>
     小程序冷启动，钩子函数执行的顺序
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/da3e38d9e284cd04c77e20859bb79eac.png"/>
    </p>
    <p>
     保留当前页面(navigate) 以及 关闭当前页面(redirect)
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/34c72d8197698018bb051a8ea71d27ba.png"/>
    </p>
    <p>
     切后台 以及 切前台(热启动)
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/878ec465444a523a1e417c9f7ba81ca3.png"/>
    </p>
    <h4>
     <a id="13__Component__1504">
     </a>
     13. 拓展：使用 Component 构造页面
    </h4>
    <p>
     Component 方法用于创建自定义组件
    </p>
    <p>
     小程序的页面也可以视为自定义组件，因此页面也可以使用 Component 方法进行创建，从而实现复杂的页面逻辑开发
    </p>
    <blockquote>
     <p>
      📌
      <strong>
       注意事项：
      </strong>
     </p>
     <ol>
      <li>
       <p>
        要求对应 json 文件中包含 usingComponents 定义段
       </p>
      </li>
      <li>
       <p>
        页面使用 Component 构造器创建，需要定义与普通组件一样的字段与实例方法
       </p>
      </li>
      <li>
       <p>
        页面 Page 中的一些生命周期方法（如 onLoad() 等以“on”开头的方法），在 Component 中要写在 methods 属性中才能生效
       </p>
      </li>
      <li>
       <p>
        组件的属性 Properties 可以用于接收页面的参数，在 onLoad() 中可以通过 this.data 拿到对应的页面参数
       </p>
      </li>
     </ol>
    </blockquote>
    <p>
     <strong>
      落地代码：
     </strong>
    </p>
    <pre><code class="prism language-js"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">// 为什么需要使用 Component 方法进行构造页面</span>
  <span class="token comment">// Component 方法功能比 Page 方法强大很多</span>
  <span class="token comment">// 如果使用 Component 方法构造页面，可以实现更加复杂的页面逻辑开发</span>

  <span class="token comment">// 小程序页面也可以使用 Component 方法进行构造</span>
  <span class="token comment">// 注意事项：</span>
  <span class="token comment">// 1. 要求 .json 文件中必须包含 usingComponents 字段</span>
  <span class="token comment">// 2. 里面的配置项需要和 Component 中的配置项保持一致</span>
  <span class="token comment">// 3. 页面中 Page 方法有一些钩子函数、事件监听方法，这些钩子函数、事件监听方法必须方法 methods 对象中</span>
  <span class="token comment">// 4. 组件的属性 properties 也可以接受页面的参数，在 onLoad 钩子函数中可以通过 this.data 进行获取</span>

  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// onLoad () {<!-- --></span>
  <span class="token comment">//   console.log('页面加载 - 1')</span>
  <span class="token comment">// },</span>

  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 更新 name</span>
    <span class="token function">updateName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jerry'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// console.log('页面加载 - 2')</span>
      <span class="token comment">// console.log(options)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="14_behaviors_1581">
     </a>
     14. 拓展：behaviors
    </h4>
    <p>
     小程序的 behaviors 方法是一种代码复用的方式，可以将一些通用的逻辑和方法提取出来，然后在多个组件中复用，从而减少代码冗余，提高代码的可维护性。
    </p>
    <p>
     <strong>
      如果需要 behavior 复用代码，需要使用 Behavior() 方法
     </strong>
     ，每个 behavior 可以包含一组属性、数据、生命周期函数和方法
    </p>
    <p>
     组件引用它时，它的属性、数据和方法会被合并到组件中，生命周期函数也会在对应时机被调用。
    </p>
    <p>
     <strong>
      注册 behavior：
     </strong>
    </p>
    <p>
     如果需要注册一个
     <code>
      behavior
     </code>
     ，需要借助
     <code>
      Behavior()
     </code>
     方法，接受一个
     <code>
      Object
     </code>
     类型的参数
    </p>
    <pre><code class="prism language-js"><span class="token comment">// my-behavior.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">myBehaviorProperty</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">myBehaviorData</span><span class="token operator">:</span> <span class="token string">'my-behavior-data'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] created'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] attached'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] ready'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">myBehaviorMethod</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] log by myBehaviorMehtod'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      使用 behavior：
     </strong>
    </p>
    <pre><code class="prism language-js"><span class="token comment">// my-component.js</span>
<span class="token keyword">const</span> myBehavior <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'my-behavior'</span><span class="token punctuation">)</span>

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>myBehavior<span class="token punctuation">]</span>
  
  <span class="token comment">// coding...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      组件和它引用的 behavior 中可以包含同名的字段，对这些字段的处理方法如下：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       如果有同名的属性或方法，采用 “就近原则”，组件会覆盖 behavior 中的同名属性或方法
      </p>
     </li>
     <li>
      <p>
       如果有同名的数据字段且都是对象类型，会进行对象合并，其余情况会 采用 “就近原则” 进行数据覆盖
      </p>
     </li>
     <li>
      <p>
       生命周期函数和 observers 不会相互覆盖，会是在对应触发时机被逐个调用，也就是都会被执行
      </p>
     </li>
    </ol>
    <p>
     详细的规则：
     <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html#%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99" rel="nofollow">
      同名字段的覆盖和组合规则
     </a>
    </p>
    <h4>
     <a id="15__1673">
     </a>
     15. 拓展：外部样式类
    </h4>
    <p>
     默认情况下，组件和组件使用者之间如果存在相同的类名不会相互影响，组件使用者如果想修改组件的样式，需要就解除样式隔离，但是解除样式隔离以后，在极端情况下，会产生样式冲突、CSS 嵌套太深等问题，从而给我们的开发带来一定的麻烦。
    </p>
    <p>
     <strong>
      外部样式类：在使用组件时，组件使用者可以给组件传入 CSS 类名，通过传入的类名修改组件的样式。
     </strong>
    </p>
    <p>
     如果需要使用外部样式类修改组件的样式，
     <strong>
      在 Component 中需要用 externalClasses 定义若干个外部样式类。
     </strong>
    </p>
    <p>
     外部样式类的使用步骤：
    </p>
    <p>
     1.在 Component 中用 externalClasses 定义段定义若干个外部样式类
    </p>
    <p>
     2.自定义组件标签通过 属性绑定 的方式提供一个样式类，属性是 externalClasses 定义的元素，属性值是传递的类名
    </p>
    <p>
     3.将接受到的样式类用于自定义组件内部
    </p>
    <blockquote>
     <p>
      📌
      <strong>
       注意事项：
      </strong>
     </p>
     <p>
      ​ 在同一个节点上使用普通样式类和外部样式类时，两个类的优先级是未定义的
     </p>
     <p>
      ​ 因此需要添加 !important 以保证外部样式类的优先级
     </p>
    </blockquote>
    <p>
     <strong>
      落地代码：
     </strong>
    </p>
    <p>
     <code>
      ➡️ custom09.js
     </code>
    </p>
    <pre><code class="prism language-js"><span class="token comment">// components/custom09/custom09.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">// 组件接受的外部样式类</span>
  <span class="token literal-property property">externalClasses</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'extend-class'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <code>
      ➡️ custom09.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- 在同一个节点上，如果存在外部样式类 和 普通的样式类 --&gt;</span>
<span class="token comment">&lt;!-- 两个类的优先级是未定义的 --&gt;</span>
<span class="token comment">&lt;!-- 建议：在使用外部样式类的时，样式需要通过 !important 添加权重 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>extend-class box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>通过外部样式类修改组件的样式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <p>
     <code>
      ➡️ custom09.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">.box {
  color: lightseagreen;
}
</code></pre>
    <p>
     <code>
      ➡️ profile.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- 属性是在 externalClasses 里面定义的元素 --&gt;</span>
<span class="token comment">&lt;!-- 属性值必须是一个类名 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom09</span> <span class="token attr-name">extend-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-class<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
    <p>
     <code>
      ➡️ profile.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">/* pages/index/index.wxss */

.my-class {
  color: lightsalmon !important;
}
</code></pre>
    <h4>
     <a id="16__1766">
     </a>
     16. 完善复选框案例并总结自定义组件
    </h4>
    <p>
     <strong>
      总结自定义组件：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       组件基本使用：数据、属性、方法、插槽
      </p>
     </li>
     <li>
      <p>
       组件样式使用：组件样式、注意事项、样式隔离、外部样式类
      </p>
     </li>
     <li>
      <p>
       组件通信传值：父往子传值、子往父传值、获取组件实例
      </p>
     </li>
     <li>
      <p>
       组件生命周期：组件的生命周期、组件所在页面的生命周期、总结了小程序全部的生命周期
      </p>
     </li>
     <li>
      <p>
       组件数据监听器：observers
      </p>
     </li>
     <li>
      <p>
       组件拓展：使用 Component 构造页面、组件复用机制 behaviors 等
      </p>
     </li>
    </ol>
    <p>
     <strong>
      完善复选框案例
     </strong>
    </p>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxml
     </code>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox-box {<!-- -->{ position === 'right' ? 'right' : 'left' }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
+    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-label<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ isChecked }}<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateChecked<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- lable 和 子节点内容都进行了展示 --&gt;</span>
        <span class="token comment">&lt;!-- 要么展示 lable 要么展示 子节点内容 --&gt;</span>
        <span class="token comment">&lt;!-- 如果用户传递了 lable 属性，就展示 lable --&gt;</span>
        <span class="token comment">&lt;!-- 如果用户没有传递 lable 属性，就展示 子节点内容 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ label !== '' }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
+    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <p>
     <code>
      ➡️ components/custom-checkbox/custom-checkbox.wxss
     </code>
    </p>
    <pre><code class="prism language-scss">+ .custom-checkbox-box .custom-label {
  display: flex;
  align-items: center;
}

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
</div>


<p class="artid" style="display:none">68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36333335383835392f:61727469636c652f64657461696c732f313336333032343132</p>
