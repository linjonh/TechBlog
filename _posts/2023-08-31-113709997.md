---
layout: post
title: "前端传参了但是到了后端为null_解决前端Restful风格Put传递参数,后端为Null..."
date: 2023-08-31 11:30:26 +0800
description: "出现问题的原因这个问题其实是Tomcat的问题.实际上,Tomcat把请求的数据(实体信息中的数据)"
keywords: "java前端传参\"\"被后端识别为null"
categories: ['']
tags: ['前端传参了但是到了后端为Null']
artid: "113709997"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=113709997
    alt: "前端传参了但是到了后端为null_解决前端Restful风格Put传递参数,后端为Null..."
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端传参了但是到了后端为null_解决前端Restful风格（Put）传递参数，后端为Null...
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div style="font-size:16px;">
     <p>
      出现问题的原因
     </p>
     <p>
      这个问题其实是Tomcat的问题.
     </p>
     <p>
      实际上,Tomcat把请求的数据(实体信息中的数据)封装成一个Map(键值对形式)，request.getParameter(“”)就从map中取值，而SpringMVC会把每个属性的值调用getParameter方法封装，而Tomcat看到是PUT请求则不会封装请求数据到map，只有POST形式的请求才会封装到请求体。
     </p>
     <p>
      为什么会出现这种情况呢?
     </p>
     <p>
      实际上这是因为在设计Tomcat的时候就出现的问题.在Tomcat的源代码的Request.java类中,大约是3111行左右的代码,有这样的一段代码.
     </p>
     <p align="center">
      <img alt="49e18046e2b4" src="https://www.jianshu.com/p/49e18046e2b4"/>
     </p>
     <p>
      image.png
     </p>
     <p>
      有如下代码:
     </p>
     <p align="center">
      <img alt="49e18046e2b4" src="https://www.jianshu.com/p/49e18046e2b4"/>
     </p>
     <p>
      image.png
     </p>
     <p>
      这一段代码的作用是获取连接器,再判断请求的方法是否在规定的方法之中,如果存在,则继续,如果不存在,则直接返回,不进行数据的封装.与我们设置的方法比对的就是代码中的方法,这个方法是POST,所以我们的PUT方法和POST肯定是不一样的,最后只能是返回.于是就出现了上面的情况.
     </p>
     <p>
      1、只能解决PUT
     </p>
     <p>
      方案一
     </p>
     <p>
      配置web.xml文件
     </p>
     <p>
      HiddenHttpMethodFilter
     </p>
     <p>
      org.springframework.web.filter.HiddenHttpMethodFilter
     </p>
     <p>
      HiddenHttpMethodFilter
     </p>
     <p>
      /*
     </p>
     <p>
      在发送Ajax请求的时候,使用如下的格式:
     </p>
     <p>
      $.ajax({
      <!-- -->
     </p>
     <p>
      url: "${pageContext.request.contextPath}/emp/" + id,
     </p>
     <p>
      type: "POST",
     </p>
     <p>
      data: $("#app form").serialize() +"&amp;_method=PUT",
     </p>
     <p>
      success: function (result) {
      <!-- -->
     </p>
     <p>
      alert("操作成功!");
     </p>
     <p>
      }
     </p>
     <p>
      });
     </p>
     <p>
      可以看到不同的地方,首先配置HiddenHttpMethodFilter,这个类可以把POST转换成对应的_method=?的?号中的内容,从而实现请求.当然每次写Ajax请求的时候,都需要协商method字段,便于解析.
     </p>
     <p>
      方案二
     </p>
     <p>
      方案二就比较简单了.只需要一个简单的web.xml的配置.
     </p>
     <p>
      HttpPutFormContentFilter
     </p>
     <p>
      org.springframework.web.filter.HttpPutFormContentFilter
     </p>
     <p>
      HttpPutFormContentFilter
     </p>
     <p>
      /*
     </p>
     <p>
      $.ajax({
      <!-- -->
     </p>
     <p>
      url: "${pageContext.request.contextPath}/emp/" + id,
     </p>
     <p>
      type: "PUT",
     </p>
     <p>
      data: $("#app form").serialize(),
     </p>
     <p>
      success: function (result) {
      <!-- -->
     </p>
     <p>
      alert("操作成功!");
     </p>
     <p>
      }
     </p>
     <p>
      });
     </p>
     <p>
      2、 支持PUT,DELETE请求
     </p>
     <p>
      在web.xml中配置
     </p>
     <p>
      HiddenHttpMethodFilter
     </p>
     <p>
      org.springframework.web.filter.HiddenHttpMethodFilter
     </p>
     <p>
      HiddenHttpMethodFilter
     </p>
     <p>
      /*
     </p>
     <p>
      原理是：在Aajx中发送post请求后，带_method参数，将其修改为PUT，或者DELETE请求
     </p>
     <p>
      例子：JS代码中该为
     </p>
     <p>
      $.ajax({
      <!-- -->
     </p>
     <p>
      url:"${APP_PATH}/RecordController/record",
     </p>
     <p>
      type:"POST",
     </p>
     <p>
      data:{id :id ,
     </p>
     <p>
      _method:"PUT"},
     </p>
     <p>
      success:function(result){
      <!-- -->
     </p>
     <p>
      alert("update success");
     </p>
     <p>
      }
     </p>
     <p>
      });
     </p>
     <p>
      或者在url中加&amp;_method=”PUT”或者&amp;_method=”DELETE”即可
     </p>
    </div>
   </div>
  </div>
  <div id="recommendDown">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33393630353334372f:61727469636c652f64657461696c732f313133373039393937" class_="artid" style="display:none">
 </p>
</div>


