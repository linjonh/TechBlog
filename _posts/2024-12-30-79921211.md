---
layout: post
title: "Spring-Boot入门6前端接受后台传参"
date: 2024-12-30 16:22:37 +0800
description: "利用Spring Boot来制作Web应用，就必定会涉及到前端与后台之间互相传递参数。在Spring"
keywords: "thymeleaf 模板在script标签中获取后台传递的参数"
categories: ['Spring', 'Boot']
tags: ['Javascript', 'Boot']
artid: "79921211"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=79921211
    alt: "Spring-Boot入门6前端接受后台传参"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Spring Boot入门（6）前端接受后台传参
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3 id="基础知识">
     基础知识
    </h3>
    <p>
     利用Spring Boot来制作Web应用，就必定会涉及到前端与后台之间互相传递参数。在Spring Boot的MVC模型中，如果采用Thymeleaf来渲染视图，则前端页面怎么才能获得后台运行传递的参数呢？
     <br/>
     我们介绍两种在Thymeleaf中前端接受后台传参的方法：
    </p>
    <ul>
     <li>
      Thymeleaf自带的方法
     </li>
     <li>
      Thymeleaf提供的JavaScript接受后台参数方法
     </li>
    </ul>
    <p>
     在Thymeleaf中，使用th:text=”${var}”或者th:text=”#{var}”可接受后台参数。如果使用Thymeleaf提供的JavaScript接受后台参数方法， 则需在script标签中加入th:inline=”javascript”， 同时使用变量时应为 [[$var]]。 采用JavaScript可以接受的后台参数类型有：
    </p>
    <ul>
     <li>
      Strings
     </li>
     <li>
      Numbers
     </li>
     <li>
      Booleans
     </li>
     <li>
      Arrays
     </li>
     <li>
      Collections
     </li>
     <li>
      Maps
     </li>
     <li>
      Beans (Java对象实现getter和setter方法)
     </li>
    </ul>
    <h3 id="一个例子">
     一个例子
    </h3>
    <p>
     以上为理论知识介绍部分，读者看了可能不一定会具体使用。因此，一个简单的例子是必须的。在这个例子中，后台使用Map方法向前端传递String和Bean。项目的完整结构如下图：
    </p>
    <p>
    </p>
    <center>
     <br/>
     <img alt="项目的完整结构" src="https://img-blog.csdn.net/20180412215140165?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamNsaWFuOTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title="">
      <br/>
     </img>
    </center>
    <br/>
    我们只需创建红线框内的三个文件。首先是Bean文件，即User类, 代码如下：
    <p>
    </p>
    <pre class="prettyprint"><code class="language-Java hljs cs">package com.hello.paramDemo.Controller;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> User {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;
    <span class="hljs-keyword">private</span> String name;

    User(<span class="hljs-keyword">int</span> age, String name){
        <span class="hljs-keyword">this</span>.age = age;
        <span class="hljs-keyword">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getAge</span>() {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAge</span>(<span class="hljs-keyword">int</span> age) {
        <span class="hljs-keyword">this</span>.age = age;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span>() {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span>(String name) {
        <span class="hljs-keyword">this</span>.name = name;
    }

}</code></pre>
    <p>
     接着是Controller文件，EgController.java的代码如下：
    </p>
    <pre class="prettyprint"><code class="language-Java hljs avrasm">package <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.hello</span><span class="hljs-preprocessor">.paramDemo</span><span class="hljs-preprocessor">.Controller</span><span class="hljs-comment">;</span>

import org<span class="hljs-preprocessor">.springframework</span><span class="hljs-preprocessor">.stereotype</span><span class="hljs-preprocessor">.Controller</span><span class="hljs-comment">;</span>
import org<span class="hljs-preprocessor">.springframework</span><span class="hljs-preprocessor">.web</span><span class="hljs-preprocessor">.bind</span><span class="hljs-preprocessor">.annotation</span>.*<span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Map</span><span class="hljs-comment">;</span>

@Controller
public class EgController {

    @RequestMapping(value=<span class="hljs-string">"/params"</span>, method = RequestMethod<span class="hljs-preprocessor">.GET</span>)
    <span class="hljs-comment">/* 后台用Map方法向前端传递参数
     * 传递的参数为message1: String, message2: String, user: User对象
     */</span>
    public String passParam(Map &lt;String, Object&gt; map){

        map<span class="hljs-preprocessor">.put</span>(<span class="hljs-string">"message1"</span>, <span class="hljs-string">"Hello, Spring Boot!"</span>)<span class="hljs-comment">;</span>

        map<span class="hljs-preprocessor">.put</span>(<span class="hljs-string">"message2"</span>, <span class="hljs-string">"Hello, Spring Boot!"</span>)<span class="hljs-comment">;</span>

        User user = new User(<span class="hljs-number">18</span>, <span class="hljs-string">"Bruce"</span>)<span class="hljs-comment">;</span>

        map<span class="hljs-preprocessor">.put</span>(<span class="hljs-string">"user"</span>, user)<span class="hljs-comment">;</span>

        return <span class="hljs-string">"result"</span><span class="hljs-comment">;</span>

    }
}</code></pre>
    <p>
     最后是视图result.html，其代码如下：
    </p>
    <pre class="prettyprint"><code class="language-HTML hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE HTML&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">html</span> <span class="hljs-attribute">xmlns:th</span>=<span class="hljs-value">"http://www.thymeleaf.org"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Passing Paraments<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"Content-Type"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"text/html; charset=UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">th:inline</span>=<span class="hljs-value">"javascript"</span>&gt;</span><span class="javascript">
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ShowMessage</span><span class="hljs-params">()</span>{<!-- --></span>
            document.getElementById(<span class="hljs-string">"message2"</span>).innerHTML = <span class="hljs-string">"Thymeleaf String by JS: "</span> + [[${message2}]];
            <span class="hljs-keyword">var</span> user = <span class="hljs-comment">/*[[${user}]]*/</span> <span class="hljs-literal">null</span> ;
            document.getElementById(<span class="hljs-string">"user"</span>).innerHTML = <span class="hljs-string">"Thymeleaf Beans by JS: name -&gt;"</span>+ user.name +<span class="hljs-string">", age -&gt; "</span>+ user.age.toString();
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">th:text</span>=<span class="hljs-value">"${message1}"</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"message2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">th:text</span>=<span class="hljs-value">"'name: ' + ${user.name} +', age: ' + ${user.age}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"user"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-value">"ShowMessage()"</span>&gt;</span>Show Message From Java<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
    <p>
     在上述Thymtleaf渲染的HTML页面中，就用到了之前将的两种办法来接受后台传递过来的参数。在JavaScript部分，user变量被赋予后台传递的user类的值，就是JavaScript中的对象。
    </p>
    <h3 id="程序运行">
     程序运行
    </h3>
    <p>
     启动上述Spring Boot项目，在浏览器中输入：
     <a href="http://localhost:8080/params" rel="nofollow">
      http://localhost:8080/params
     </a>
     ， 可以看到页面如下：
    </p>
    <p>
    </p>
    <center>
     <br/>
     <img alt="Thymeleaf自带的方法接受后台参数" src="https://img-blog.csdn.net/20180412220009812?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamNsaWFuOTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title="">
      <br/>
     </img>
    </center>
    <br/>
    这是用Thymeleaf自带的方法接受后台参数， 还未显示JavaScript接受的参数。如想显示JavaScript接受的参数，可以点击“Show Message From Java”按钮，页面如下：
    <p>
    </p>
    <p>
    </p>
    <center>
     <br/>
     <img alt="JavaScript接受的后台参数显示" src="https://img-blog.csdn.net/20180412220244087?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamNsaWFuOTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title="">
      <br/>
     </img>
    </center>
    <br/>
    本次分享到此结束，如有问题，可参考Thymeleaf的官方说明文档网址：
    <a href="https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html" rel="nofollow">
     https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html
    </a>
    . 当然，也欢迎大家交流~~
    <p>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f6a636c69616e3931:2f61727469636c652f64657461696c732f3739393231323131" class_="artid" style="display:none">
 </p>
</div>


