---
layout: post
title: "微信小程序-实现跑马灯文字图片"
date: 2024-12-07 19:20:24 +0800
description: "参考链接：（1）详解微信小程序实现跑马灯效果（附完整代码）https://www.jb51.net/"
keywords: "微信小程序走马灯"
categories: ['前端微信小程序Web开发等']
tags: ['无标签']
artid: "118015855"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=118015855
    alt: "微信小程序-实现跑马灯文字图片"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序 实现跑马灯（文字+图片）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     参考链接：
     <br/>
     （1）
     <a href="https://www.jb51.net/article/160412.htm" rel="nofollow">
      详解微信小程序实现跑马灯效果（附完整代码）
     </a>
     <br/>
     https://www.jb51.net/article/160412.htm
     <br/>
     （2）
     <a href="https://blog.csdn.net/qq_42594368/article/details/88659743">
      初学者微信小程序—实现图片轮播效果
     </a>
     <br/>
     https://blog.csdn.net/qq_42594368/article/details/88659743
     <br/>
     （3）
     <a href="https://blog.csdn.net/vinos_toby/article/details/90669406">
      微信小程序-使用swiper和css实现卡牌左右滑动切换、翻牌效果
     </a>
     <br/>
     https://blog.csdn.net/vinos_toby/article/details/90669406
     <br/>
     （4）微信小程序实现卡片左右滑动效果的示例代码
     <br/>
     https://www.jb51.net/article/160569.htm
    </p>
    <h3>
     <a id="_10">
     </a>
     一、文字跑马灯
    </h3>
    <p>
     在微信小程序里实现跑马灯效果，类似滚动字幕或者滚动广告之类的，使用简单的CSS样式控制，没用到JS，效果如下图：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/03b690e5af3ca460cf31a7ce24d36d97.png">
      <br/>
      wxml文件
     </img>
    </p>
    <pre><code class="prism language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>--跑马灯 Linyufan.com--<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"marquee_container"</span> <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">"--marqueeWidth--:-12em"</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"marquee_text"</span><span class="token operator">&gt;</span>一个人活着就是为了让更多的人更好的活着！<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>--跑马灯--<span class="token operator">&gt;</span>
</code></pre>
    <p>
     wxss文件
    </p>
    <pre><code class="prism language-bash">/*首页跑马灯效果*/
@keyframes around <span class="token punctuation">{<!-- --></span>
 from <span class="token punctuation">{<!-- --></span>
  margin-left: <span class="token number">100</span>%<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 to <span class="token punctuation">{<!-- --></span>
  /* var接受传入的变量 */
  margin-left: var<span class="token punctuation">(</span>--marqueeWidth--<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
.marquee_container<span class="token punctuation">{<!-- --></span>
 background-color: <span class="token comment">#fe4655;</span>
 height: 50rpx<span class="token punctuation">;</span>
 line-height: 44rpx<span class="token punctuation">;</span>
 position: relative<span class="token punctuation">;</span>
 width: <span class="token number">100</span>%<span class="token punctuation">;</span>
 margin-top:0rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
.marquee_container:hover<span class="token punctuation">{<!-- --></span>
 /* 不起作用 */
 animation-play-state: paused<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
.marquee_text<span class="token punctuation">{<!-- --></span>
 color:<span class="token comment">#fff;</span>
 font-size: 28rpx<span class="token punctuation">;</span>
 display: inline-block<span class="token punctuation">;</span>
 white-space: nowrap<span class="token punctuation">;</span>
 animation-name: around<span class="token punctuation">;</span>
 animation-duration: 10s<span class="token punctuation">;</span> /*过渡时间*/
 animation-iteration-count: infinite<span class="token punctuation">;</span>
 animation-timing-function:linear<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
/*首页跑马灯效果*/
</code></pre>
    <h3>
     <a id="_61">
     </a>
     二、图片轮播图/图片跑马灯
    </h3>
    <p>
     <strong>
      效果图
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/13f5758181d620cbfde1fd2db61163ce.png">
      <br/>
      <strong>
       wxml文件
      </strong>
     </img>
    </p>
    <pre><code class="prism language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>--轮播图--<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>swiper <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">'lunbo'</span> indicator-dots<span class="token operator">=</span><span class="token string">'true'</span> <span class="token assign-left variable">autoplay</span><span class="token operator">=</span><span class="token string">'true'</span> <span class="token assign-left variable">interval</span><span class="token operator">=</span><span class="token string">'4000'</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>swiper-item<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>image <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">'../images/a.jpg'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/image<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>/swiper-item<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>swiper-item<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>image <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">'../images/b.jpg'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/image<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/swiper-item<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>swiper-item<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>image <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">'../images/c.jpg'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/image<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>/swiper-item<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>/swiper<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     注：参数详解
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6f01ae419175798020d34b04bc749ee0.png"/>
    </p>
    <p>
     <strong>
      wxss文件
     </strong>
    </p>
    <pre><code class="prism language-bash">.lunbo<span class="token punctuation">{<!-- --></span>
	width:100%
<span class="token punctuation">}</span>
.lunbo image<span class="token punctuation">{<!-- --></span>
	width:100%
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_90">
     </a>
     三、卡片左右滑动切换、翻牌效果
    </h3>
    <p>
     效果图（演示视频效果见
     <a href="https://www.duoguyu.com/smart/27.html" rel="nofollow">
      https://www.duoguyu.com/smart/27.html
     </a>
     ）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2304b0ccb636ab9366216165ffa09382.png">
      <br/>
      滑块功能：使用了微信小程序组件-滑块视图容器 Swiper (查看官方文档)。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/00e465c2996453b515e315a4446cf2d9.png"/>
     </img>
    </p>
    <p>
     翻牌旋转效果：使用了Css3的一些属性：perspective、backface-visibility、transform等（参考链接：《Css3实现翻牌效果》DEMO源码
     <a href="https://www.jq22.com/webqd4252?v=duoguyu.com" rel="nofollow">
      https://www.jq22.com/webqd4252?v=duoguyu.com
     </a>
     ）
    </p>
    <pre><code class="prism language-bash">perspective:3000rpx<span class="token punctuation">;</span>  /*perspective 属性定义 3D 元素距视图的距离，以像素计。该属性允许您改变 3D 元素查看 3D 元素的视图。
当为元素定义 perspective 属性时，其子元素会获得透视效果，而不是元素本身。*/
backface-visibility:hidden<span class="token punctuation">;</span>  /*背对屏幕时隐藏*/
transform-style: preserve-3d<span class="token punctuation">;</span>  /*子元素将保留其3D位置。*/
transform:rotateY<span class="token punctuation">(</span>180deg<span class="token punctuation">)</span><span class="token punctuation">;</span>  /*定义沿着Y轴的3D旋转。*/
</code></pre>
    <p>
     源码Demo下载地址：
     <a href="https://www.duoguyu.com/smart/27.html" rel="nofollow">
      https://www.duoguyu.com/smart/27.html
     </a>
    </p>
    <h3>
     <a id="_108">
     </a>
     四、卡片左右滑动
    </h3>
    <p>
     效果图
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4a2feeaa86c6f13ef6c3adacbcd21160.png"/>
    </p>
    <ul>
     <li>
      思路
      <br/>
      从上面的效果图来看，基本的需求包括：
      <br/>
      左右滑动到一定的距离，就向相应的方向移动一个卡片的位置。
      <br/>
      卡片滑动的时候有一定的加速度。
      <br/>
      如果滑动距离太小，则依旧停留在当前卡片，而且有一个回弹的效果。
      <br/>
      看到这样的需求，不熟悉小程序的同学，可能感觉有点麻烦。首先需要计算卡片的位置，然后再设置滚动条的位置，使其滚动到指定的位置，而且在滚动的过程中，加上一点加速度…
     </li>
    </ul>
    <p>
     然而，当你查看了小程序的开发文档之后，就会发现小程序已经帮我们提前写好了，我们只要做相关的设置就行。
    </p>
    <ul>
     <li>
      实现
      <br/>
      滚动视图：左右滑动，其实就是水平方向上的滚动。小程序给我们提供了scroll-view组件，我们可以通过设置scroll-x属性使其横向滚动。
     </li>
     <li>
      关键属性
      <br/>
      在scroll-view组件属性列表中，我们发现了两个关键的属性：
     </li>
    </ul>
    <table>
     <thead>
      <tr>
       <th>
        属性
       </th>
       <th>
        类型
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        scroll-into-view
       </td>
       <td>
        string
       </td>
       <td>
        值应为某子元素id（id不能以数字开头）。设置哪个方向可滚动，则在哪个方向滚动到该元素
       </td>
      </tr>
      <tr>
       <td>
        scroll-with-animation
       </td>
       <td>
        boolean
       </td>
       <td>
        在设置滚动条位置时使用动画过渡
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     有了以上这两个属性，我们就很好办事了。只要让每个卡片独占一页，同时设置元素的ID，就可以很简单的实现翻页效果了。
    </p>
    <ul>
     <li>
      左滑右滑判断
      <br/>
      这里，我们通过触摸的开始位置和结束位置来决定滑动方向。
      <br/>
      微信小程序给我们提供了touchstart以及touchend事件，我们可以通过判断开始和结束的时候的横坐标来判断方向。
     </li>
    </ul>
    <p>
     wxml文件
    </p>
    <pre><code class="prism language-bash"><span class="token operator">&lt;</span>scroll-view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"scroll-box"</span> scroll-x scroll-with-animation
 scroll-into-view<span class="token operator">=</span><span class="token string">"{<!-- -->{toView}}"</span>
 <span class="token assign-left variable">bindtouchstart</span><span class="token operator">=</span><span class="token string">"touchStart"</span>
 <span class="token assign-left variable">bindtouchend</span><span class="token operator">=</span><span class="token string">"touchEnd"</span><span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>view wx:for<span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span> wx:key<span class="token operator">=</span><span class="token string">"{<!-- -->{item}}"</span> <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"card-box"</span> <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">"card_{<!-- -->{index}}"</span><span class="token operator">&gt;</span>
		  <span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"card"</span><span class="token operator">&gt;</span>
		  <span class="token operator">&lt;</span>text<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/text<span class="token operator">&gt;</span>
		  <span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/scroll-view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     wxss文件
    </p>
    <pre><code class="prism language-bash">page<span class="token punctuation">{<!-- --></span>
 overflow: hidden<span class="token punctuation">;</span>
 background: <span class="token comment">#0D1740;</span>
<span class="token punctuation">}</span>
.scroll-box<span class="token punctuation">{<!-- --></span>
 white-space: nowrap<span class="token punctuation">;</span>
 height: 105vh<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

.card-box<span class="token punctuation">{<!-- --></span>
 display: inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

.card<span class="token punctuation">{<!-- --></span>
 display: flex<span class="token punctuation">;</span>
 justify-content: center<span class="token punctuation">;</span>
 align-items: center<span class="token punctuation">;</span>
 box-sizing: border-box<span class="token punctuation">;</span>
 height: 80vh<span class="token punctuation">;</span>
 width: 80vw<span class="token punctuation">;</span>
 margin: 5vh 10vw<span class="token punctuation">;</span>
 font-size: 40px<span class="token punctuation">;</span>
 background: <span class="token comment">#F8F2DC;</span>
 border-radius: 4px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     js文件
    </p>
    <pre><code class="prism language-bash">const DEFAULT_PAGE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

Page<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
 startPageX: <span class="token number">0</span>,
 currentView: DEFAULT_PAGE,
 data: <span class="token punctuation">{<!-- --></span>
 toView: <span class="token variable"><span class="token variable">`</span>card_$<span class="token punctuation">{<!-- --></span>DEFAULT_PAGE<span class="token punctuation">}</span><span class="token variable">`</span></span>,
 list: <span class="token punctuation">[</span><span class="token string">'Javascript'</span>, <span class="token string">'Typescript'</span>, <span class="token string">'Java'</span>, <span class="token string">'PHP'</span>, <span class="token string">'Go'</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span>,

 touchStart<span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 this.startPageX <span class="token operator">=</span> e.changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.pageX<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>,

 touchEnd<span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 const moveX <span class="token operator">=</span> e.changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.pageX - this.startPageX<span class="token punctuation">;</span>
 const maxPage <span class="token operator">=</span> this.data.list.length - <span class="token number">1</span><span class="token punctuation">;</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>Math.abs<span class="token punctuation">(</span>moveX<span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>moveX <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  this.currentView <span class="token operator">=</span> this.currentView <span class="token operator">!=</span><span class="token operator">=</span> <span class="token number">0</span> ? this.currentView - <span class="token number">1</span> <span class="token builtin class-name">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  this.currentView <span class="token operator">=</span> this.currentView <span class="token operator">!=</span><span class="token operator">=</span> maxPage ? this.currentView + <span class="token number">1</span> <span class="token builtin class-name">:</span> maxPage<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 this.setData<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  toView: <span class="token variable"><span class="token variable">`</span>card_$<span class="token punctuation">{<!-- --></span>this.currentView<span class="token punctuation">}</span><span class="token variable">`</span></span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     json文件
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">{<!-- --></span>
 <span class="token string">"navigationBarTitleText"</span><span class="token builtin class-name">:</span> <span class="token string">"卡片滑动"</span>,
 <span class="token string">"backgroundColor"</span><span class="token builtin class-name">:</span> <span class="token string">"#0D1740"</span>,
 <span class="token string">"navigationBarBackgroundColor"</span><span class="token builtin class-name">:</span> <span class="token string">"#0D1740"</span>,
 <span class="token string">"navigationBarTextStyle"</span><span class="token builtin class-name">:</span> <span class="token string">"white"</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f4a787566654361726f6c2f:61727469636c652f64657461696c732f313138303135383535" class_="artid" style="display:none">
 </p>
</div>


