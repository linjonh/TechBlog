---
layout: post
title: "C后端与前端json数据格式转换"
date: 2023-10-31 15:29:00 +0800
description: "后端处理前端发送的json对象假如前端发起post请求给的一个js"
keywords: "后端返回来的 一串对象类型数据 前端做json 格式转换"
categories: ['Web', 'Api']
tags: ['无标签']
artid: "98623320"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=98623320
    alt: "C后端与前端json数据格式转换"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C#后端与前端json数据格式转换
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr/>
    <h2>
     后端处理前端发送的json对象
    </h2>
    <hr/>
    <p>
     假如前端发起post请求给的一个json对象是这样
    </p>
    <pre class="has"><code>{
    "ID":"01",
    "NAME":"xiaoming"
}</code></pre>
    <p>
     那么后端则需要需要采用单参数post接收参数[FromBody]，参数类型则设置为JObject类型，需要引入using Newtonsoft.Json.Linq;
    </p>
    <pre class="has"><code class="language-cs">using Newtonsoft.Json.Linq;

public void getjson([FromBody])
{
    string ID = json["ID"].ToString();
    string NAME = json["NAME"].ToString();
}</code></pre>
    <p>
     这样就可以把传递过来的json对象中的各个字段提取出来放入变量中暂存
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     后端封装string至json对象传递给前端使用，以及json对象放到数组中
    </h2>
    <hr/>
    <p>
     首先得将字符串修改成像json对象那样的形式
    </p>
    <blockquote>
     <p>
      {"xx":"xx","yy":"yy","zz":"zz"}
     </p>
    </blockquote>
    <p>
     然后使用函数对字符串进行转化，并使用dynamic类型定义一个动态类型的变量来接收转化好的json对象
    </p>
    <blockquote>
     <p>
      dynamic json = Newtonsoft.Json.JsonConvert.DeserializeObject(string);
     </p>
    </blockquote>
    <p>
     这样一个json对象就封装好了，可以直接返回给前端使用，这里的返回值类型也应该写成dynamic
    </p>
    <p>
    </p>
    <p>
     如果要将多个转化好的json变成前端能够遍历的json数组，这里可以使用C#中的集合，List&lt;T&gt;和ArrayList均可
    </p>
    <pre class="has"><code class="language-cs">public ArrayList GetJsonList()
{
    //创建类似于json对象的字符串
    string str = "{" + "\"" + "name" + "\"" + ":" + "\"" + "xiaoming" + "\"" + "}";
    //字符串转json对象
    dynamic json = Newtonsoft.Json.JsonConvert.DeserializeObject(str);
    
    //实例化ArrayList集合，并将json对象添加到集合之中
    ArrayList jsonlist = new ArrayList();
    jsonlist.Add(json);
    
    //返回包装着json对象的集合
    return jsonlist;
}</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f6c31333432363439353732:2f61727469636c652f64657461696c732f3938363233333230" class_="artid" style="display:none">
 </p>
</div>


