---
layout: post
title: "利用DevC和EGE图形库写出一款C语言飞机大战小游戏"
date: 2022-07-25 00:20:53 +0800
description: "文章浏览阅读6.1k次，点赞27次，利用DevC++和EGE图形库写出一款C语言飞机大战小游戏_de"
keywords: "devc++ ege 游戏编写"
categories: ['']
tags: ['开发语言', 'C', 'C']
artid: "125966739"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125966739
    alt: "利用DevC和EGE图形库写出一款C语言飞机大战小游戏"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     利用DevC++和EGE图形库写出一款C语言飞机大战小游戏
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="DevCEGEC_0">
     </a>
     利用DevC++以及EGE图形库写出一款C语言飞机大战小游戏
    </h2>
    <h3>
     <a id="_2">
     </a>
     前言：
    </h3>
    <p>
     上学期期末大作业利用C语言写过一个极其简陋的飞机大战（只有黑洞洞的终端窗口，至于飞机，额，也是一言难尽），暑假闲来无事，准备利用图形库来扩充扩充游戏内容，使其更加具有可玩性和趣味性。效果图如下，也算是有了个看的过去的UI界面吧。当然程序还有些许小小我解决不了的bug困扰，但我个人觉得只是练手的话，完成度也可以了。图片素材来源于网络，侵权删。
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/93ea81cba0a06ec2ef8ac9b98c1ef5c3.png#pic_center">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3e1ed395d6cf9d078a82d873bdc6573b.png#pic_center">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/785b5adc7cb37facd000ab23fdba88e0.png#pic_center"/>
      </img>
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1e6493572ab420c21ac3b63e3116f895.png#pic_center">
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/81208f7597b427a0ba5dd07162e3998b.png#pic_center">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d3c2d1fa1110a7571a3c2e945459a7a7.png#pic_center"/>
      </img>
     </img>
    </p>
    <h3>
     <a id="_14">
     </a>
     正文：
    </h3>
    <h4>
     <a id="_16">
     </a>
     开发环境及工具：
    </h4>
    <p>
     本C语言项目（或许不能称之为纯C语言项目了，后缀名要使用.cpp）所使用的开发工具为DevC++，其实之前一直接触的都是Clion以及vscode，但由于要使用到图形库，这两者图形库的配置也都较为复杂，vs的体量又太大，所以决定尝试使用DevC++（不得不讲DevC++的自动补齐以及提示都有些鸡肋，不建议拿来进行较大项目的创建）。本项目所使用的图形库为EGE，具体下载安装配置教程也可上网自行查阅。可能更主流的是EasyX图形库？但DevC++能查到的更多是EGE图形库的使用。
    </p>
    <p>
     DevC++下载：
     <a href="https://sourceforge.net/projects/orwelldevcpp/" rel="nofollow">
      https://sourceforge.net/projects/orwelldevcpp/
     </a>
    </p>
    <p>
     EGE配置使用：
     <a href="https://blog.csdn.net/cnds123/article/details/109982100">
      https://blog.csdn.net/cnds123/article/details/109982100
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/qq_39151563/article/details/100161986">
      https://blog.csdn.net/qq_39151563/article/details/100161986
     </a>
    </p>
    <p>
     我本人是使用的上面的教程配置的，当然好像又有新版的EGE了，也可以参考下面的，EGE专栏里的代码以及例子也可以看看。
    </p>
    <p>
     使用过程中遇到困难也可参考官方文档：
     <a href="http://xege.org/manual/" rel="nofollow">
      http://xege.org/manual/
     </a>
    </p>
    <h4>
     <a id="_30">
     </a>
     设计思路：
    </h4>
    <p>
     准备工作都已经做完，想必你也可以在你的电脑上使用DevC++和EGE图形库了，接下来就是发挥你编码才能的时刻了。我的思路也很简单，玩家能操作飞机的移动以及子弹的发射，躲避敌机以及敌人的攻击，最终战胜boss即为胜利。有些地方也参考了网上别人的一些实现逻辑。
    </p>
    <h4>
     <a id="_34">
     </a>
     开始界面：
    </h4>
    <p>
     既然都使用到图形库了，不如就顺势加一个开始界面，丰富游戏的功能。如开始时的示意图所示，有三个按键一样的方框，分别是“开始游戏”“游戏说明”“退出游戏”。那么，如何将这些按键真正的实现呢？其实实现起来也远没有想象中那么困难。首先就是要获取按键所处的位置，即按键区域的x、y坐标的范围，也就是左上角以及右下角的x、y坐标，当然EGE已经为我们准备好了该功能。可以参考这里
     <a href="http://xege.org/manual/tutorial/14.htm" rel="nofollow">
      http://xege.org/manual/tutorial/14.htm
     </a>
     我已经获取好了位置信息并将其记下，我们就可以利用这些坐标实现点击跳转啦。当然，在此之前，你得学会如何获取图像，并将图像显示在屏幕上，官方文档会对你有帮助的。
    </p>
    <p>
     但我引入了一个judge变量，因为发现跳转至不同页面后，若不加以判断，原先按键位置仍会发挥作用。以下便是这一部分的代码实现。
    </p>
    <pre><code class="prism language-cpp">		<span class="token keyword">while</span><span class="token punctuation">(</span>judge <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mousemsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">// 一开始的欢迎界面 </span>
			mouse_msg msg <span class="token operator">=</span> <span class="token function">getmouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//			可以开始时调用一下ege自带的鼠标信息相关的函数，获取一些按钮的位置，接下来就可以根据按钮所占位置模拟按钮的效果了 </span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">260</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">157</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">210</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				judge <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 点击按钮，开始游戏 </span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">260</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">241</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">294</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				judge <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 不利用judge的话，原本欢迎界面中存在的按键部位仍会发挥作用 </span>
				<span class="token function">information</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 点击按钮，游戏说明 </span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">260</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">372</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 点击按钮，退出游戏 </span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> 

</code></pre>
    <h4>
     <a id="_59">
     </a>
     游戏实现：
    </h4>
    <p>
     首先是对于道具（如我方战机、敌方战机、子弹、buff)的控制，我们既要不断获得其x、y坐标，也可能要获得其状态，是否活着又或者是否被使用掉。这时，结构体便显得尤为重要了。
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// 利用结构体封装我方飞机各种属性 </span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">plane</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//	x、y是对坐标的描述 </span>
	<span class="token keyword">int</span> x<span class="token punctuation">;</span>
	<span class="token keyword">int</span> y<span class="token punctuation">;</span>
<span class="token comment">//	blood是剩余的血量 </span>
	<span class="token keyword">int</span> blood<span class="token punctuation">;</span>
<span class="token comment">//	飞机的宽度和高度 </span>
	<span class="token keyword">int</span> width<span class="token punctuation">;</span>
	<span class="token keyword">int</span> height<span class="token punctuation">;</span>
<span class="token comment">//	飞机的状态 </span>
	<span class="token keyword">bool</span> is_or_no<span class="token punctuation">;</span>
<span class="token punctuation">}</span> Plane<span class="token punctuation">;</span>
<span class="token comment">//定义一个Plane类型的变量myplane，作为玩家操控的战机 </span>
Plane myplane<span class="token punctuation">;</span>
<span class="token comment">//定义多个Plane类型的变量，作为出现的敌机 </span>
Plane enemyplane<span class="token punctuation">[</span>NUM_ENEMY<span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token comment">//创建一个boss </span>
Plane bossplane<span class="token punctuation">;</span>
<span class="token comment">//buff基本行为与敌机类似，直接套用一个Plane类型 </span>
Plane mybuff<span class="token punctuation">;</span>
<span class="token comment">//再次利用结构体封装子弹属性 </span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">bullet</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//	x、y表示子弹的坐标 </span>
	<span class="token keyword">int</span> x<span class="token punctuation">;</span>
	<span class="token keyword">int</span> y<span class="token punctuation">;</span>
<span class="token comment">//	表示子弹的状态 </span>
	<span class="token keyword">bool</span> is_or_no<span class="token punctuation">;</span>
<span class="token punctuation">}</span> Bullet<span class="token punctuation">;</span>
<span class="token comment">//我方子弹 </span>
Bullet mybullet<span class="token punctuation">[</span>NUM_MY_BUL<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//敌方子弹 </span>
Bullet enemybullet<span class="token punctuation">[</span>NUM_ENEMY_BUL<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre>
    <p>
     毕竟是一个小型的项目，所以必然代码的体量会大一些，就需要封装多种多样的函数了，函数的使用可以使各部分功能清晰明了。以下我将选取几个具有代表性的讲讲。
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">//初始化设计游戏界面 </span>
<span class="token keyword">void</span> <span class="token function">design</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//点击开始游戏，进入真正的游戏界面 </span>
<span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//初始化各战力单位 </span>
<span class="token keyword">void</span> <span class="token function">initPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过键盘操作飞机移动 </span>
<span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//产生子弹 </span>
<span class="token keyword">void</span> <span class="token function">bulletcreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//子弹移动 </span>
<span class="token keyword">void</span> <span class="token function">bulletmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//敌机的产生 </span>
<span class="token keyword">void</span> <span class="token function">enemycreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//敌机的移动 </span>
<span class="token keyword">void</span> <span class="token function">enemymove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//子弹击中敌机 </span>
<span class="token keyword">void</span> <span class="token function">hitenemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//产生boss </span>
<span class="token keyword">void</span> <span class="token function">bosscreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//boss的移动 </span>
<span class="token keyword">void</span> <span class="token function">bossmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//没有对抗有啥意思，boss发射子弹 </span>
<span class="token keyword">void</span> <span class="token function">bossaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//boss子弹移动 </span>
<span class="token keyword">void</span> <span class="token function">bossbulletmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//击中我方飞机 </span>
<span class="token keyword">void</span> <span class="token function">hitme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//游戏buff产生 </span>
<span class="token keyword">void</span> <span class="token function">buffcreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">//游戏buff的移动 </span>
<span class="token keyword">void</span> <span class="token function">buffmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//游戏buff获得以及产生作用 </span>
<span class="token keyword">void</span> <span class="token function">buffget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//游戏失败 </span>
<span class="token keyword">void</span> <span class="token function">losegame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//游戏胜利 </span>
<span class="token keyword">void</span> <span class="token function">wingame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//循环进行 </span>
<span class="token keyword">void</span> <span class="token function">mainloop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//游戏没有声音太无聊？ </span>
<span class="token keyword">void</span> <span class="token function">music_haha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//一些游戏相关的信息 </span>
<span class="token keyword">void</span> <span class="token function">information</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 游戏结束</span>
<span class="token keyword">int</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
    <h6>
     <a id="mainloop_152">
     </a>
     mainloop()
    </h6>
    <p>
     这是我们整个游戏的一个最主要函数，操纵着各个功能的入口，前面也讲了，就是开始界面，就是利用鼠标的按动来操作。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">mainloop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token punctuation">;</span> <span class="token function">is_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">delay_fps</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>judge <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mousemsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">// 一开始的欢迎界面 </span>
			mouse_msg msg <span class="token operator">=</span> <span class="token function">getmouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//			可以开始时调用一下ege自带的鼠标信息相关的函数，获取一些按钮的位置，接下来就可以根据按钮所占位置模拟按钮的效果了 </span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">260</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">157</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">210</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				judge <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 点击按钮，开始游戏 </span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">260</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">241</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">294</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				judge <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 不利用judge的话，原本欢迎界面中存在的按键部位仍会发挥作用 </span>
				<span class="token function">information</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 点击按钮，游戏说明 </span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">260</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">372</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 点击按钮，退出游戏 </span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> 
<span class="token comment">//		游戏信息页面退出功能实现 </span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>judge <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mousemsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			mouse_msg msg <span class="token operator">=</span> <span class="token function">getmouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">24</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">67</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">23</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">cleardevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">putimage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">,</span> img_back<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1422</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				judge <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		过关失败 </span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>judge <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mousemsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			mouse_msg msg <span class="token operator">=</span> <span class="token function">getmouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			img11 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">getimage</span><span class="token punctuation">(</span>img11<span class="token punctuation">,</span> <span class="token string">"./失败.jpeg"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putimage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">,</span> img11<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">cleardevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">putimage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">,</span> img_back<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1422</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				judge <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>	
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		过关成功 </span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>judge <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mousemsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			mouse_msg msg <span class="token operator">=</span> <span class="token function">getmouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			img12 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">getimage</span><span class="token punctuation">(</span>img12<span class="token punctuation">,</span> <span class="token string">"./胜利.jpeg"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putimage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">,</span> img12<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">is_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> msg<span class="token punctuation">.</span><span class="token function">is_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">cleardevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">putimage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">,</span> img_back<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">1422</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				judge <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>	
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>music<span class="token punctuation">.</span><span class="token function">GetPlayStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MUSIC_MODE_STOP<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			music<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <h6>
     <a id="play_215">
     </a>
     play()
    </h6>
    <p>
     重要性仅次于mainloop()，点击“开始游戏”按钮，你就已经进入游戏中了。具体说明可以参见我的注释。这里我最值得一提的就是视觉滚动效果的实现，我的思路是拼接两张一样的图片，当一张图片的底部即将露出时，另一张便填补空缺，利用他们y坐标的变化，带动图片变化，就给人视觉上以图片场景运动的效果。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//	拼接了两张一样的图片，形成一个滚动前进的视觉效果，这里初始化两张图片的y坐标 </span>
	<span class="token keyword">int</span> img2_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> img2_yy <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">711</span><span class="token punctuation">;</span>
	<span class="token function">initPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用初始化函数，初始化游戏的各项参数</span>
<span class="token comment">//	获得所需的图片 </span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img2<span class="token punctuation">,</span> <span class="token string">"./图2.jpeg"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img3<span class="token punctuation">,</span> <span class="token string">"./我的战机.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img4<span class="token punctuation">,</span> <span class="token string">"./我的战机zero.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img5<span class="token punctuation">,</span> <span class="token string">"./敌机.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img6<span class="token punctuation">,</span> <span class="token string">"./敌机boss.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img7<span class="token punctuation">,</span> <span class="token string">"./子弹1.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img8<span class="token punctuation">,</span> <span class="token string">"./子弹2.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img9<span class="token punctuation">,</span> <span class="token string">"./子弹3.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getimage</span><span class="token punctuation">(</span>img10<span class="token punctuation">,</span> <span class="token string">"./buff.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> <span class="token function">is_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">delay_fps</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">cleardevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		背景重复 </span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>img2_y <span class="token operator">==</span> <span class="token number">711</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			img2_y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">711</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>img2_yy <span class="token operator">==</span> <span class="token number">711</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			img2_yy <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">711</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		for(int i = 0; i &lt; NUM_MY_BUL; i++){<!-- --></span>
<span class="token comment">//			if(mybullet[i].y == (-80) * i){<!-- --></span>
<span class="token comment">//				mybullet[i].y = myplane.y;</span>
<span class="token comment">//				mybullet[i].x = myplane.x;</span>
<span class="token comment">//			}		</span>
<span class="token comment">//		}</span>
		<span class="token function">putimage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> img2_y<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">,</span> img2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">putimage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> img2_yy<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">,</span> img2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">711</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		buff加持时间，否则一直加持 </span>
		<span class="token keyword">static</span> DWORD t5<span class="token punctuation">,</span> t6<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>myplane<span class="token punctuation">.</span>is_or_no <span class="token operator">&amp;&amp;</span> t6 <span class="token operator">-</span> t5 <span class="token operator">&gt;</span> <span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			myplane<span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			t5 <span class="token operator">=</span> t6<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		t6 <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		根据我方飞机状态贴相对应的图 </span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>myplane<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img3<span class="token punctuation">,</span> myplane<span class="token punctuation">.</span>x<span class="token punctuation">,</span> myplane<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img4<span class="token punctuation">,</span> myplane<span class="token punctuation">.</span>x<span class="token punctuation">,</span> myplane<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		putimage_withalpha(NULL, img3, myplane.x, myplane.y);</span>
<span class="token comment">//		根据子弹以及我方飞机状态贴对应的图 </span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_MY_BUL<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>myplane<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img7<span class="token punctuation">,</span> mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">&amp;&amp;</span> myplane<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img8<span class="token punctuation">,</span> mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		for(int i = 0; i &lt; NUM_MY_BUL; i++){<!-- --></span>
<span class="token comment">//			mybullet[i].y -= 6;		</span>
<span class="token comment">//		}</span>
<span class="token comment">//		根据普通敌机状态贴图 </span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ENEMY<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img5<span class="token punctuation">,</span> enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		背景滚动，利用y坐标的增加 </span>
		img2_y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		img2_yy <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//		调用move()函数，控制飞机的运动 </span>
		<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		调用函数，子弹的子弹运动 </span>
		<span class="token function">bulletmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		控制敌机产生的速度 </span>
		<span class="token keyword">static</span> DWORD t3<span class="token punctuation">,</span> t4<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>t4 <span class="token operator">-</span> t3 <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">enemycreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			t3 <span class="token operator">=</span> t4<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		t4 <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">enemymove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//敌机的移动</span>
<span class="token comment">//		达到条件，创建boss </span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>score <span class="token operator">&gt;=</span> <span class="token number">400</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>bossplane<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">bosscreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		boss的移动 </span>
		<span class="token function">bossmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">static</span> DWORD t7<span class="token punctuation">,</span> t8<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>t8 <span class="token operator">-</span> t7 <span class="token operator">&gt;</span> <span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">bossaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			t7 <span class="token operator">=</span> t8<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		t8 <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">bossbulletmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		调用函数，创建buff </span>
		<span class="token function">buffcreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		buff图标的移动 </span>
		<span class="token function">buffmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		获取到buff </span>
		<span class="token function">buffget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		贴图，boss和buff </span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>bossplane<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img6<span class="token punctuation">,</span> bossplane<span class="token punctuation">.</span>x<span class="token punctuation">,</span> bossplane<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>mybuff<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img10<span class="token punctuation">,</span> mybuff<span class="token punctuation">.</span>x<span class="token punctuation">,</span> mybuff<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ENEMY_BUL<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>enemybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token function">putimage_withalpha</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> img9<span class="token punctuation">,</span> enemybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> enemybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		调用函数，击中敌机 </span>
		<span class="token function">hitenemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">hitme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setcolor</span><span class="token punctuation">(</span><span class="token function">EGERGB</span><span class="token punctuation">(</span><span class="token number">0x0</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0x0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setfont</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"宋体"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setbkmode</span><span class="token punctuation">(</span>TRANSPARENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">char</span> t<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">char</span> m<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token function">sprintf</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">sprintf</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> myplane<span class="token punctuation">.</span>blood<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">sprintf</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> bossplane<span class="token punctuation">.</span>blood<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">outtextxy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"得分"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token function">outtextxy</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">outtextxy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">"血量"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token function">outtextxy</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">outtextxy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">"boss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">outtextxy</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		if(mybuff.is_or_no){<!-- --></span>
<span class="token comment">//			outtextxy(0, 45, "yes");</span>
<span class="token comment">//		}</span>
<span class="token comment">//		else{<!-- --></span>
<span class="token comment">//			outtextxy(0, 45, "no");</span>
<span class="token comment">//		}</span>
<span class="token comment">//		if(myplane.is_or_no){<!-- --></span>
<span class="token comment">//			outtextxy(0, 60, "yes");</span>
<span class="token comment">//		}</span>
<span class="token comment">//		else{<!-- --></span>
<span class="token comment">//			outtextxy(0, 60, "no");</span>
<span class="token comment">//		}</span>
<span class="token comment">//		调用函数，游戏失败 </span>
		<span class="token function">losegame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		调用函数，游戏成功 </span>
		<span class="token function">wingame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//		保证音乐的循环播放，但是似乎会产生一些延迟 </span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>music<span class="token punctuation">.</span><span class="token function">GetPlayStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MUSIC_MODE_STOP<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			music<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		判断游戏失败或者胜利并跳出游戏循环 </span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>judge <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> judge <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span> 

</code></pre>
    <h6>
     <a id="initPlayer_379">
     </a>
     initPlayer();
    </h6>
    <p>
     每一个游戏，初始化都是不可缺少的。这既能保证每次游戏开始时的一致性，又能避免奇奇怪怪的bug，甚至还会提升代码运行的效率。当然，这一部分视个人想法不同，可以初始化不同的数值。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">initPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//	初始化的各个参数 </span>
	judge <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	dx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
	myplane<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>
	myplane<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">540</span><span class="token punctuation">;</span>
	myplane<span class="token punctuation">.</span>blood <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
	myplane<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
	myplane<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">129</span><span class="token punctuation">;</span>
	myplane<span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_MY_BUL<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">;</span>
		mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">;</span>
		mybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ENEMY<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>blood <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
		enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
		enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">89</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ENEMY_BUL<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		enemybullet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	bossplane<span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	bossplane<span class="token punctuation">.</span>blood <span class="token operator">=</span> <span class="token number">20000</span><span class="token punctuation">;</span>
	bossplane<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">240</span><span class="token punctuation">;</span>
	bossplane<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">199</span><span class="token punctuation">;</span> 
	mybuff<span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	mybuff<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">36</span><span class="token punctuation">;</span>
	mybuff<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span> 
	img2 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img3 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img4 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img5 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img6 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img7 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img8 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img9 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	img10 <span class="token operator">=</span> <span class="token function">newimage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <h6>
     <a id="move_429">
     </a>
     move()
    </h6>
    <p>
     想要使你的飞机受你的控制？那就不可避免得与键盘做交互了，以下代码即可让你随心所欲控制你的飞机啦。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//	键盘交互，利用用户按键控制飞行以及炮弹的发射 </span>
<span class="token comment">//	上移 </span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_UP<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span><span class="token char">'W'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>myplane<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			myplane<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">8</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token comment">//	下移 </span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_DOWN<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span><span class="token char">'S'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>myplane<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">129</span> <span class="token operator">&lt;</span> <span class="token number">711</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			myplane<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">;</span>			
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token comment">//	左移 </span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_LEFT<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>myplane<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			myplane<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">8</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token comment">//	右移 </span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_RIGHT<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span><span class="token char">'D'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>myplane<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">350</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			myplane<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token comment">//	发射子弹 </span>
	<span class="token keyword">static</span> DWORD t1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_SPACE<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t2 <span class="token operator">-</span> t1 <span class="token operator">&gt;</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">bulletcreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		t1 <span class="token operator">=</span> t2<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	t2 <span class="token operator">=</span> <span class="token function">GetTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

</code></pre>
    <h6>
     <a id="enemycreate_471">
     </a>
     enemycreate()
    </h6>
    <p>
     敌机的制造以及boss、buff的产生都几乎遵循一样的逻辑。所以就以敌机为例来演示好了。关键的就是其状态的改变以及产生的位置，我这里是根据我背景的宽度选定了340，这当然不是一个好的编程习惯，你或许可以用一个常量去替换这里的具体数值。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">enemycreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ENEMY<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token punctuation">(</span><span class="token number">340</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

</code></pre>
    <h6>
     <a id="bossmove_489">
     </a>
     bossmove()
    </h6>
    <p>
     普通敌机以及子弹基本为单一坐标的递增或递减，也没什么可谈的，就以boss的移动来举例说明吧。我认为一个独特的地方是他的一个撞壁回弹的运动效果，这样就能保持boss一直在上方左右来回地进行运动。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">bossmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bossplane<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>bossplane<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			bossplane<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		控制其左右运动 </span>
		bossplane<span class="token punctuation">.</span>x <span class="token operator">+=</span> dx<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>bossplane<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			dx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>bossplane<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> <span class="token number">280</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			dx <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <h6>
     <a id="hitenemy_512">
     </a>
     hitenemy()
    </h6>
    <p>
     子弹碰到敌机当然得产生效果。这里一样，通过坐标及状态来进行判断是否造成伤害。自己进行飞机大战项目时也可以根据自己所选择地敌机的大小以及子弹的大小进行合理调控。同样的原理也可以适用于敌方飞机与我方飞机是否碰撞，敌方攻击是否对我造成伤害。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">hitenemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ENEMY<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> NUM_MY_BUL<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">25</span> <span class="token operator">&gt;</span> enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">)</span>
			<span class="token operator">&amp;&amp;</span> mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">&gt;</span> enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">&amp;&amp;</span> mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">&lt;</span> enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>blood <span class="token operator">-=</span> <span class="token number">100</span><span class="token punctuation">;</span> 
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
<span class="token comment">//		敌机被击毁，参数重置以保证产生新的敌机</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>blood <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> 
<span class="token comment">//		每击毁一架敌机分数增长20 </span>
			score <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span>
			enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			enemyplane<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>blood <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> 
<span class="token comment">//	对于boss造成伤害 </span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bossplane<span class="token punctuation">.</span>blood <span class="token operator">&gt;=</span> <span class="token number">0</span>  <span class="token operator">&amp;&amp;</span> bossplane<span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> NUM_MY_BUL<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">25</span> <span class="token operator">&gt;</span> bossplane<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>bossplane<span class="token punctuation">.</span>x <span class="token operator">+</span> bossplane<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">)</span>
			<span class="token operator">&amp;&amp;</span> mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">&gt;</span> bossplane<span class="token punctuation">.</span>y <span class="token operator">&amp;&amp;</span> mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">&lt;</span> bossplane<span class="token punctuation">.</span>y <span class="token operator">+</span> bossplane<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				mybullet<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>is_or_no <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				bossplane<span class="token punctuation">.</span>blood <span class="token operator">-=</span> <span class="token number">100</span><span class="token punctuation">;</span> 
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

</code></pre>
    <h6>
     <a id="end_557">
     </a>
     end()
    </h6>
    <p>
     最后的最后，当然是退出游戏，结束进程。我们不仅要把之前创建的图片销毁掉还要将音乐以及窗口关闭，这样才能保证不会有内存泄漏等情况的出现哦~~
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//	关闭音乐，销毁图片，关闭窗口 </span>
	music<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token function">delimage</span><span class="token punctuation">(</span>img1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delimage</span><span class="token punctuation">(</span>img2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token function">delimage</span><span class="token punctuation">(</span>img3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delimage</span><span class="token punctuation">(</span>img4<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token function">delimage</span><span class="token punctuation">(</span>img5<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delimage</span><span class="token punctuation">(</span>img6<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token function">delimage</span><span class="token punctuation">(</span>img7<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delimage</span><span class="token punctuation">(</span>img8<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delimage</span><span class="token punctuation">(</span>img9<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delimage</span><span class="token punctuation">(</span>img10<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token function">delimage</span><span class="token punctuation">(</span>img11<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delimage</span><span class="token punctuation">(</span>img12<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token function">delimage</span><span class="token punctuation">(</span>img_back<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">closegraph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//	加上这句话后才能结束进程，这个bug可能导致多次编译运行后Makefile.win报错 </span>
<span class="token comment">//	单单return 0不知道为什么应用程序关闭了但进程没有 </span>
	<span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <h3>
     <a id="_587">
     </a>
     总结：
    </h3>
    <p>
     该项目目前还有一点小bug我无从下手解决，但总体的功能也基本实现，效果也算是达到预期吧，当然你也可以在此基础上拓展更多功能，更多关卡。项目名字取得是夏日清凉版飞机大战，子弹是水果、背景是沙滩感觉炎炎夏日也确实很清凉。希望以上内容对你的C语言小项目开发能有所帮助。项目地址：
     <a href="https://github.com/SummCoder/airplane">
      https://github.com/SummCoder/airplane
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36363032363830312f:61727469636c652f64657461696c732f313235393636373339" class_="artid" style="display:none">
 </p>
</div>


