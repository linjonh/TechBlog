---
layout: post
title: "layui-前端分页-后端分页"
date: 2024-12-23 23:40:43 +0800
description: "1，前端分页效果图：代码：\tlayui.use('table', function(){\t\t var"
keywords: "layui前端分页"
categories: ['Layui']
tags: ['无标签']
artid: "109774382"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=109774382
    alt: "layui-前端分页-后端分页"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     layui 前端分页 后端分页
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1_0">
     </a>
     1，前端分页
    </h3>
    <h5>
     <a id="_3">
     </a>
     效果图：
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5f033e6c3abd3798b0f825c1bfe67fac.png#pic_center"/>
    </p>
    <h5>
     <a id="_6">
     </a>
     代码：
    </h5>
    <pre><code class="prism language-javascript">	layui<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		 <span class="token keyword">var</span> table <span class="token operator">=</span> layui<span class="token punctuation">.</span>table<span class="token punctuation">;</span>
		 
		 <span class="token comment">//第一个实例</span>
		 table<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		   elem<span class="token punctuation">:</span> <span class="token string">'#demo'</span>
		   <span class="token punctuation">,</span>height<span class="token punctuation">:</span> <span class="token number">312</span>
		   <span class="token punctuation">,</span>url<span class="token punctuation">:</span> <span class="token string">'/demo/table/user/'</span> <span class="token comment">//数据接口</span>
		   <span class="token punctuation">,</span>page<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">//开启分页</span>
	       <span class="token punctuation">,</span>limit<span class="token punctuation">:</span><span class="token number">2000</span> <span class="token comment">// 当前页数</span>
           <span class="token punctuation">,</span>limits<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">,</span><span class="token number">50000</span><span class="token punctuation">]</span> <span class="token comment">// 页数容量</span>
		   <span class="token punctuation">,</span>cols<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token comment">//表头</span>
		     <span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'ID'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span><span class="token number">80</span><span class="token punctuation">,</span> sort<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fixed<span class="token punctuation">:</span> <span class="token string">'left'</span><span class="token punctuation">}</span>
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'username'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'用户名'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span><span class="token number">80</span><span class="token punctuation">}</span>
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'sex'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'性别'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span><span class="token number">80</span><span class="token punctuation">,</span> sort<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'city'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'城市'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span><span class="token number">80</span><span class="token punctuation">}</span> 
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'sign'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'签名'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">177</span><span class="token punctuation">}</span>
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'experience'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'积分'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">,</span> sort<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'score'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'评分'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">,</span> sort<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'classify'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'职业'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">}</span>
		     <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>field<span class="token punctuation">:</span> <span class="token string">'wealth'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'财富'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">135</span><span class="token punctuation">,</span> sort<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
		   <span class="token punctuation">]</span><span class="token punctuation">]</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
    <h3>
     <a id="2_37">
     </a>
     2，后端分页
    </h3>
    <h5>
     <a id="_40">
     </a>
     效果图：
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5a8c7d6c61b2f10fcea560550435d879.png#pic_center"/>
    </p>
    <h5>
     <a id="_43">
     </a>
     代码：
    </h5>
    <p>
     <strong>
      前端代码：
     </strong>
    </p>
    <pre><code class="prism language-javascript">
	<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fp-table"</span> style<span class="token operator">=</span><span class="token string">"width: 100%"</span><span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span>table id<span class="token operator">=</span><span class="token string">"hstable"</span> lay<span class="token operator">-</span>filter<span class="token operator">=</span><span class="token string">"hstool"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"pageid"</span>  style<span class="token operator">=</span><span class="token string">"text-align: left;border:1px solid rgba(229, 229, 229, 1);border-top: none ;height: 41px"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

</code></pre>
    <p>
     <strong>
      查询功能：
     </strong>
    </p>
    <pre><code class="prism language-javascript">
	<span class="token keyword">function</span> <span class="token function">searchBtn</span><span class="token punctuation">(</span>pageNumberg<span class="token punctuation">,</span>pageSizeg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">hsdata</span><span class="token punctuation">(</span>pageNumberg<span class="token punctuation">,</span>pageSizeg<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
	<span class="token keyword">function</span> <span class="token function">hsdata</span><span class="token punctuation">(</span>pageNumberg<span class="token punctuation">,</span>pageSizeg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> fieldValues <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        fieldValues<span class="token punctuation">.</span>currentPage<span class="token operator">=</span>pageNumberg<span class="token operator">?</span>pageNumberg<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">;</span>
        fieldValues<span class="token punctuation">.</span>pageSize<span class="token operator">=</span>pageSizeg<span class="token operator">?</span>pageSizeg<span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">;</span>
        fieldValues<span class="token punctuation">.</span>searchBtn<span class="token operator">=</span><span class="token string">'searchBtn'</span><span class="token punctuation">;</span>
        
        <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            type<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
            <span class="token keyword">async</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span> fieldValues<span class="token punctuation">,</span><span class="token comment">// 参数</span>
            url<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
            dataType<span class="token punctuation">:</span> <span class="token string">'JSON'</span><span class="token punctuation">,</span>
            success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>dataremote<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">hstable</span><span class="token punctuation">(</span>dataremote<span class="token punctuation">)</span> <span class="token comment">// 响应回来的数据</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
		<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>或者
		
 		dLong<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span>fieldValues<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">hstable</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">hstable</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      数据表格：
     </strong>
    </p>
    <pre><code class="prism language-javascript">
 <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
	<span class="token punctuation">.</span>soul<span class="token operator">-</span>bottom<span class="token operator">-</span>contion <span class="token punctuation">{<!-- --></span>
        height<span class="token punctuation">:</span> <span class="token number">31</span>px<span class="token punctuation">;</span>
        <span class="token comment">/*line-height: 29px;*/</span>
        border<span class="token operator">-</span>top<span class="token punctuation">:</span> solid <span class="token number">1</span>px #e6e6e6<span class="token punctuation">;</span>
        display<span class="token punctuation">:</span>none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>soul<span class="token operator">-</span>bottom<span class="token operator">-</span>contion <span class="token punctuation">.</span>condition<span class="token operator">-</span>items <span class="token punctuation">{<!-- --></span>
        display<span class="token punctuation">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>
        width<span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">100</span>vw <span class="token operator">-</span> <span class="token number">100</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>
        height<span class="token punctuation">:</span> <span class="token number">30</span>px<span class="token punctuation">;</span>
        float<span class="token punctuation">:</span> left<span class="token punctuation">;</span>
        <span class="token comment">/*overflow: hidden;*/</span>
        white<span class="token operator">-</span>space<span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
        display<span class="token punctuation">:</span>none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
 <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
    
	<span class="token keyword">function</span> <span class="token function">hstable</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> table <span class="token operator">=</span> layui<span class="token punctuation">.</span>table<span class="token punctuation">;</span>
        pages<span class="token operator">=</span>data<span class="token operator">?</span>data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>pageSize<span class="token punctuation">:</span><span class="token number">15</span>
        <span class="token keyword">var</span> ins1<span class="token operator">=</span>table<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            elem<span class="token punctuation">:</span> <span class="token string">'#hstable'</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token string">"full-110"</span><span class="token punctuation">,</span>
            <span class="token comment">// width: 7* CLIENTWIDTH / 10,</span>
            size<span class="token punctuation">:</span> <span class="token string">'sm'</span> <span class="token punctuation">,</span>
            filter<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>
                bottom<span class="token punctuation">:</span><span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            page<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// 关闭layui数据表格自带的分页样式</span>
            limit<span class="token punctuation">:</span>data<span class="token operator">?</span>data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>pageSize<span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
            limits<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">,</span><span class="token number">50000</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            where<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">"checkType"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">//自定义参数</span>
                <span class="token string">"page"</span><span class="token punctuation">:</span>data<span class="token operator">?</span>data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>pageIndex<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">//当前页（必传参数，可改变参数名）</span>
                <span class="token string">"size"</span><span class="token punctuation">:</span>data<span class="token operator">?</span>data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>pageSize<span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token comment">//每页条数（必传参数，可改变参数名）</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            cols<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span> data<span class="token operator">?</span> data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>resultlist <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">// data: data? data : [],</span>
            done<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">,</span> curr<span class="token punctuation">,</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                layui<span class="token punctuation">.</span>soulTable<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
                <span class="token function">doneCallback</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// 回调函数</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
</code></pre>
    <p>
     <strong>
      回调函数：
     </strong>
    </p>
    <pre><code class="prism language-javascript">
<span class="token comment">// 分页回调函数，自定义分页渲染</span>
    <span class="token keyword">function</span> <span class="token function">doneCallback</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        layui<span class="token punctuation">.</span>laypage<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            elem<span class="token punctuation">:</span> <span class="token string">'pageid'</span><span class="token punctuation">,</span> <span class="token comment">//注意，这里的 test1 是 ID，不用加 # 号</span>
            count<span class="token punctuation">:</span> data<span class="token operator">?</span>data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>result<span class="token punctuation">.</span>total<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//数据总数，从服务端得到,</span>
            limit<span class="token punctuation">:</span>data<span class="token operator">?</span>data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>pageSize<span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
            curr<span class="token punctuation">:</span>data<span class="token operator">?</span>data<span class="token punctuation">.</span>commonPage<span class="token punctuation">.</span>pageIndex<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>
            limits<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">,</span><span class="token number">50000</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            layout<span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token string">'prev'</span><span class="token punctuation">,</span> <span class="token string">'page'</span><span class="token punctuation">,</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token string">'next'</span><span class="token punctuation">,</span> <span class="token string">'limit'</span><span class="token punctuation">,</span> <span class="token string">'skip'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">// 自定义排版</span>
            page<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档</span>
                layout<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'limit'</span><span class="token punctuation">,</span> <span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token string">'prev'</span><span class="token punctuation">,</span> <span class="token string">'page'</span><span class="token punctuation">,</span> <span class="token string">'next'</span><span class="token punctuation">,</span> <span class="token string">'skip'</span><span class="token punctuation">]</span> <span class="token comment">//自定义分页布局</span>
                <span class="token comment">//,curr: 5 //设定初始在第 5 页</span>
                <span class="token punctuation">,</span>groups<span class="token punctuation">:</span> <span class="token number">6</span> <span class="token comment">// 连续出现的页码个数</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            skip<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否开启跳页</span>
            theme<span class="token punctuation">:</span><span class="token string">"#009688"</span><span class="token punctuation">,</span> <span class="token comment">// 主题样式</span>
            jump<span class="token punctuation">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span>first<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>first<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token function">searchBtn</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>curr<span class="token punctuation">,</span>obj<span class="token punctuation">.</span>limit<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传递参数</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
</code></pre>
    <p>
     <strong>
      后端代码：
     </strong>
    </p>
    <pre><code class="prism language-java">
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/getItemList"</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> <span class="token function">getItemList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span>String<span class="token punctuation">&gt;</span></span> paraMap<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            String sql<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>
            HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> stringObjectHashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>StringUtil<span class="token punctuation">.</span><span class="token function">isEmptyOrLength0</span><span class="token punctuation">(</span>paraMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"search"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                sql<span class="token operator">=</span><span class="token string">" select * from table1 WHERE (ITEMNAME like :search or ITEMCODE like :search) and itemcode not in (select itemcode from table2 where rulecode=:rulecode) "</span><span class="token punctuation">;</span>
                stringObjectHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"search"</span><span class="token punctuation">,</span><span class="token string">"%"</span><span class="token operator">+</span>paraMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"search"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                sql<span class="token operator">=</span><span class="token string">" select * from table1 where itemcode not in (select itemcode from table2 where rulecode=:rulecode)"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            stringObjectHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"rulecode"</span><span class="token punctuation">,</span>paraMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"rulecode"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stringObjectHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>PageUtil<span class="token punctuation">.</span>ORDER_BY<span class="token punctuation">,</span> <span class="token string">"ITEMNAME@desc,ITEMCODE@desc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stringObjectHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>PageUtil<span class="token punctuation">.</span>PAGE_INDEX<span class="token punctuation">,</span> StringUtil<span class="token punctuation">.</span><span class="token function">isEmptyOrLength0</span><span class="token punctuation">(</span>paraMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"currentPage"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span>L <span class="token operator">:</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>paraMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"currentPage"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stringObjectHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>PageUtil<span class="token punctuation">.</span>PAGE_SIZE<span class="token punctuation">,</span> StringUtil<span class="token punctuation">.</span><span class="token function">isEmptyOrLength0</span><span class="token punctuation">(</span>paraMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">15</span>L <span class="token operator">:</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>paraMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            CommonPage commonPage <span class="token operator">=</span>
                    PageUtil<span class="token punctuation">.</span><span class="token function">newPageUtil</span><span class="token punctuation">(</span>stringObjectHashMap<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execSearch</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NamedParameterJdbcTemplate</span><span class="token punctuation">(</span>jdbcTemplate<span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token function">createResult</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"commonPage"</span><span class="token punctuation">,</span>commonPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"系统错误！"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span>  <span class="token function">createResult</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">.</span>FALSE<span class="token punctuation">,</span><span class="token string">"操作失败。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33363633363331322f:61727469636c652f64657461696c732f313039373734333832" class_="artid" style="display:none">
 </p>
</div>


