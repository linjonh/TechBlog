---
layout: post
title: "小程序开发如何接入微信支付功能"
date: 2024-12-30 17:03:29 +0800
description: "随着小程序的推出，微信也开放了小程序的支付功能，requestPayment函数的确"
keywords: "小程序收款如何绑定财付通账号"
categories: ['未分类']
tags: ['微信小程序开发教程', '小程序开发教程']
artid: "80320793"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=80320793
  alt: "小程序开发如何接入微信支付功能"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     小程序开发如何接入微信支付功能
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/9b7fa426ef8508f1ad688d5f20866d89.png"/>
    </p>
    <p>
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     随着小程序的推出，微信也开放了小程序的支付功能，而小程序文档里关于微信支付接口只有一个requestPayment函数的描述。requestPayment函数的确是微信小程序前端唯一需要调用到的函数，但想实现
     <strong>
      小程序接入微信支付功能
     </strong>
     远不止一个函数，对于没有做过
     <a href="http://zixun.jisuapp.cn/xcxkfjc/3066.html" rel="nofollow">
      接入微信支付
     </a>
     的开发者，会觉得无从下手。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     在小程序中接入支付功能首先要申请微信支付，小程序认证以后，可以在小程序后台，微信支付菜单栏，申请微信支付。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     <img alt="小程序开发如何接入微信支付功能" height="273" src="https://i-blog.csdnimg.cn/blog_migrate/e328956c2c8d7d55e36cb7c104364ea8.jpeg" title="小程序开发如何接入微信支付功能" width="600"/>
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     <br/>
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     填写企业信息和对公账户，微信支付会打一笔随机金额到对公账户，输入金额完成验证后，在线签署迁移，即完成了微信支付的申请流程.。
    </p>
    <p style="color:rgb(89,96,123);">
     微信支付申请完，会发送微信支付商户号，商户平台用户名密码等信息到注册者邮箱。配置小程序密钥，小程序后台设置页，点击生成，管理员验证二维码后，会随机生成AppSecret。请妥善保管好Appsecret，不要明文存储于服务器，AppSecret用于和微信服务器交互。比如获取用户的openid接口就需要用到。
    </p>
    <p style="color:rgb(89,96,123);">
     <img alt="小程序开发如何接入微信支付功能" height="286" src="https://i-blog.csdnimg.cn/blog_migrate/cbee955b5e01dfd1ceb2761af16c2ee8.jpeg" title="小程序开发如何接入微信支付功能" width="600"/>
    </p>
    <p style="color:rgb(89,96,123);">
     <br/>
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     <br/>
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     设置密钥和下载证书，用申请微信支付获得的用户名和密码，登录商户平台在账户中心，API安全中下载证书和设置密钥。密钥是32位，设置以后需要妥善保管，因为无法查看密钥，所有微信支付相关的接口都会使用这个密钥加密。配置Https服务器，小程序的前端是使用微信提供的框架开发，但是后台依然是开发者自己的服务器。小程序发起的是https请求，意味着小程序开发者必须配置https服务器。配置https服务器之前，先要获取证书，证书可以向相关机构购买，腾讯云目前可以向用户提供免费的证书。微信支付有多种支付方式，包括刷卡支付，公众号支付，扫码支付，APP支付。小程序是在微信里调起支付的，其实是公众号支付。开发者首先需要大概了解这些接口。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     关于openid
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     上述流程中请求openid，用的是小程序最新api中的接口，开发者可以查看小程序的登录接口。开发者从第三方服务器获得的openid，在统一下单的接口里面需要使用到。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     小程序调起微信支付
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     上述流程中的小程序调起微信支付，用的是小程序微信支付接口wx.requestPayment，该接口的详细描述可以查看小程序的微信支付API。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     这个接口中的package和timeStamp参数是从开发者的第三方服务器返回的，package是第三方服务器从统一下单接口回复中获得。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     接口中其他的参数，appId，noceStr，signType以及paySign则由小程序这边存储或者计算而得，其中paySign是签名。整个公众号支付的主要流程基本都是在第三方服务器上实现，开发者需要熟读公众号支付文档，了解消息交互流程以及每个接口。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     这里并没有描述正常微信支付必不可少的一些功能：异常处理，查询订单，发起退款，下载对账单等等。
    </p>
    <p align="left" style="color:rgb(89,96,123);">
     无论是支付功能还是小程序的诞生，微信都在以它的方式方便着也改变着人们的生活。现在在我们身边随处可见的是，各类小程序在用户微信列表中记录，其中不乏能实现交易的实用工具类小程序。
    </p>
    <p>
     <br/>
    </p>
    <p>
     更多资讯关注
     <a href="http://zixun.jisuapp.cn/xcxkfjc/" rel="nofollow">
      微信小程序开发教程
     </a>
     ，由
     <a href="http://school.jisuapp.cn/" rel="nofollow">
      小程序视频教程培训
     </a>
     提供
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f4a6f796368656e343034:2f61727469636c652f64657461696c732f3830333230373933" class_="artid" style="display:none">
 </p>
</div>
