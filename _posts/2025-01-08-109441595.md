---
layout: post
title: "数据库表的增删改查代码实现"
date: 2025-01-08 20:03:36 +0800
description: "文章目录一、通过代码创建表和添加数据二、删除数据库三、创建数据库的时候设置一些参数四、在数据库中创建"
keywords: "数据库增删改查代码"
categories: ['数据库', 'Sqlserver']
tags: ['数据库', 'Sqlserver', 'Sql']
artid: "109441595"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=109441595
    alt: "数据库表的增删改查代码实现"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     数据库表的增删改查（代码实现）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        一、通过代码创建表和添加数据
       </a>
      </li>
      <li>
       <a href="#_28" rel="nofollow">
        二、删除数据库
       </a>
      </li>
      <li>
       <a href="#_35" rel="nofollow">
        三、创建数据库的时候设置一些参数
       </a>
      </li>
      <li>
       <a href="#_57" rel="nofollow">
        四、在数据库中创建一个表
       </a>
      </li>
      <li>
       <a href="#_69" rel="nofollow">
        五、通过代码删除表
       </a>
      </li>
      <li>
       <a href="#_76" rel="nofollow">
        六、向表中插入一条记录
       </a>
      </li>
      <li>
       <a href="#_113" rel="nofollow">
        七、查询这张表
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     一、通过代码创建表和添加数据
    </h2>
    <p>
     点击新建查询生成2
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e61e425a425572c5a103bd95391218d5.png#pic_center">
      <br/>
      输入命令
     </img>
    </p>
    <pre><code class="prism language-css">create database mydatabasenoe<span class="token punctuation">;</span>
</code></pre>
    <p>
     <mark>
      错误：
     </mark>
     <strong>
      如果出现消息 1807,级别 16,状态 3,第 1 行 无法获得数据库 ‘model’ 上的排他锁。请稍后重试
     </strong>
     <br/>
     ==解决：==输入一下命令，运行之后，再执行刚才那条语句。
    </p>
    <pre><code class="prism language-css">declare @sql <span class="token function">varchar</span><span class="token punctuation">(</span>100<span class="token punctuation">)</span> 
while 1=1 
begin 
select top 1 @sql = <span class="token string">'kill '</span>+<span class="token function">cast</span><span class="token punctuation">(</span>spid as <span class="token function">varchar</span><span class="token punctuation">(</span>3<span class="token punctuation">)</span><span class="token punctuation">)</span> 
from master..sysprocesses 
where spid &gt; 50 and spid &lt;&gt; @@spid 
if @@rowcount = 0 
break 
<span class="token function">exec</span><span class="token punctuation">(</span>@sql<span class="token punctuation">)</span> 
end
</code></pre>
    <p>
     创建数据库成功
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a5e39b1268d75beb8af49935f6c6f94e.png#pic_center"/>
    </p>
    <h2>
     <a id="_28">
     </a>
     二、删除数据库
    </h2>
    <pre><code class="prism language-css">drop database mydatabasenoe<span class="token punctuation">;</span> 
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f34258ea1b276f971c5a2be23c0f2046.png#pic_center"/>
    </p>
    <h2>
     <a id="_35">
     </a>
     三、创建数据库的时候设置一些参数
    </h2>
    <pre><code class="prism language-css">create database mydatabaseone
on primary# 
<span class="token punctuation">(</span>
  -- 配置主数据文件的选项
  name = <span class="token string">'mydatabaseone'</span>, -- 主数据文件的逻辑名称
  filename = <span class="token string">'D:\mydatabaseone.mdf'</span>,-- 主数据文件的实际保存路径
  size = 5MB, -- 初始控件是MB
  maxsize = 150MB, --最大可使用空间是MB
  filegrowth = 20% --每次增长空间为%
<span class="token punctuation">)</span>
log on
<span class="token punctuation">(</span>
   --配置日志文件的选项
   name = <span class="token string">'mydatabaseone_log'</span>, --日志文件的逻辑名称
   filename =<span class="token string">'D:\mydatabaseone1_log.ldf'</span>, -- 日志文件的实际保存路径
   size = 5MB, --日志文件的初始大小
   filegrowth = 5MB  -- 文件增长的大小
<span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="_57">
     </a>
     四、在数据库中创建一个表
    </h2>
    <pre><code class="prism language-css">-- 在数据库中创建一个表
--将代码环境切换到mydatabaseone 下
use mydatabaseone
create table departments
<span class="token punctuation">(</span>
   autoID int <span class="token function">identity</span><span class="token punctuation">(</span>1,1<span class="token punctuation">)</span> primary key,--自动编号，主键
   departmentName <span class="token function">nvarchar</span><span class="token punctuation">(</span>50<span class="token punctuation">)</span> not null
<span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="_69">
     </a>
     五、通过代码删除表
    </h2>
    <pre><code class="prism language-css">--通过代码删除表
use mydatabaseone
drop table departments
</code></pre>
    <h2>
     <a id="_76">
     </a>
     六、向表中插入一条记录
    </h2>
    <pre><code class="prism language-css">-- 向部门表中插入一条记录
-- insert into 表名（列，列，列）values（值，值，值）
--1.自动编号列，默认就会自动增长
--（默认情况下也不能向自动编号列插入值）
insert into <span class="token function">departments</span><span class="token punctuation">(</span>departmentName<span class="token punctuation">)</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token string">'学习部'</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     插入表的时候可以省略列名
    </p>
    <pre><code class="prism language-css">-- 可以省略列名（值的顺序不能改变）
insert into departments
 <span class="token function">values</span><span class="token punctuation">(</span><span class="token string">'资助部'</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5f71d22c7835db788ce15d6a29246e70.png#pic_center">
      <br/>
      向自动编号列插入值
     </img>
    </p>
    <pre><code class="prism language-css">-- 向自动编号列插入值
-- 启动某个表的“自动编号列”手动插入值的功能
set identity_insert departments on -- 可以自动插入
insert into <span class="token function">departments</span><span class="token punctuation">(</span>autoID,departmentName<span class="token punctuation">)</span>
<span class="token function">values</span><span class="token punctuation">(</span>100,<span class="token string">'组织部'</span><span class="token punctuation">)</span>
set identity_insert departments OFF--不可以自动插入
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8d491799cb51eb3ff00ea8de199901b2.png#pic_center"/>
    </p>
    <p>
     在sql 语句中直接写的字符串，如果带中文，前面带上n防止乱码
    </p>
    <pre><code class="prism language-css">insert into departments
 <span class="token function">values</span><span class="token punctuation">(</span>N<span class="token string">'资助部'</span><span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="_113">
     </a>
     七、查询这张表
    </h2>
    <pre><code class="prism language-css">-- 查询这张表
select * from departments
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3f086d1e76f0ef92557c35b6a81938f0.png#pic_center"/>
    </p>
    <p>
     今天6点半起床，感觉 最近真的是很忙，好多好多的事要去做，但是呢，又都是不好做，一步一步来吧，时间是不会停止的，到时候总会有办法的。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f6c656e6779756566656e673231322f:61727469636c652f64657461696c732f313039343431353935" class_="artid" style="display:none">
 </p>
</div>


