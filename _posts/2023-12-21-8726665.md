---
layout: post
title: "Android平台下实现音视频通信的应用开发"
date: 2023-12-21 23:45:00 +0800
description: "现在安卓很是火热，一大堆开发人员在捣鼓安卓平台的开发，相信大家也使用过QQ的语音视频对话功能，但是不"
keywords: "安卓原生视频通讯"
categories: ['音视频即时通讯']
tags: ['聊天', '即时通讯平台', 'Android']
artid: "8726665"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=8726665
    alt: "Android平台下实现音视频通信的应用开发"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Android平台下实现音视频通信的应用开发
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      现在安卓很是火热，一大堆开发人员在捣鼓安卓平台的开发，相信大家也使用过QQ的语音视频对话功能，但是不知道大家有没有试过自己来开发一个基于安卓平台的音视频即时通讯的应用，这个应用必须能够做到跨平台
     </span>
    </p>
    <ul class="Style_Of_Ul" id="describe_pro_Android" style="font-family:����; line-height:25px; list-style-type:none">
     <li>
      <span style="font-size:18px">
       兼容Google、HTC、Moto、Samsung等主流硬件设备
      </span>
     </li>
     <li>
      <span style="font-size:18px">
       支持iOS、Web、PC等设备和Android之间的互联互通
      </span>
     </li>
    </ul>
    <ul class="Style_Of_Ul" id="describe_pro_Android" style="font-family:����; line-height:25px; list-style-type:none">
     <li>
      <span style="font-size:18px">
       视频会话时，默认打开前置摄像头；
      </span>
     </li>
     <li>
      <span style="font-size:18px">
       能够有Java音视频采集、显示驱动，兼容更多Android设备；
      </span>
     </li>
     <li>
      <span style="font-size:18px">
       <span style="color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
        想要在Android平台下实现音视频通信，最快捷的方法是寻找开源项目或调用其他公司封装好的API，
       </span>
       接下来小编介绍一款不错的SDK包给大家，（
       <a href="http://download.csdn.net/detail/bairui_allen/5187261" rel="noopener noreferrer" target="_blank">
        安卓平台的音视频互动开发平台
       </a>
       ）下面是一些关于如何调用相关API接口的方法，大家可以相互交流交流。
      </span>
     </li>
    </ul>
    <p>
    </p>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      Android通信平台相关API方法
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">    // 初始化SDK </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> InitSDK(<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> osver, <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> flags);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 连接服务器 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> Connect(String serverip, <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> port);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 登录系统 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> Login(String username, String password);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 进入房间（房间ID） </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> EnterRoom(<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> roomid, String password);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 进入房间（房间名称） </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> EnterRoomEx(String roomname, String password);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 退出房间 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> LeaveRoom(<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> roomid);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 设置视频显示位置 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> SetVideoPos(<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> userid, Surface surface, <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> lef,  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">            <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> top, <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> right, <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> bottom);  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">/** </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">     * 功能： 设置视频显示位置，或是刷新视频显示 返回值：0表示成功，否则为出错代码  </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">     * 参数：  </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">     * userid  用户ID  </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">     * surface 视频显示界面，android客户端只需提供SurfaceView控件，内核自动将视频显示在控件上 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">     * lef,top,right,bottom视频显示位置信息 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">     */</span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 注销登录 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> Logout();  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 释放资源 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">public</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">native</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">int</span> Release(); </span></li></ol></pre>
    <h2 style="margin:0px; padding:0px; line-height:26px; font-weight:normal; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif">
     <span style="font-size:18px">
      <a name="t0" style="color:rgb(51,102,153)">
      </a>
      一、初始化SDK
     </span>
    </h2>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      初始化SDK是首先要完成的，用于设置SDK的一些行为，包括设置对应的回调函数。代码如下：
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">    //初始化SDK </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">private</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">void</span> InitialSDK() {  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">if</span> (anychat == <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">null</span>) {  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">            anychat = <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">new</span> AnyChatCoreSDK();  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">            <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//设置基本事件回调函数 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">            anychat.SetBaseEvent(<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">this</span>);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">            <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">if</span> (configEntity.useARMv6Lib != <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>)  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                anychat.SetSDKOptionInt(AnyChatDefine.  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                        BRAC_SO_CORESDK_USEARMV6LIB, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>);            <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//使用ARMv6指令集 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">            anychat.InitSDK(android.os.Build.VERSION.SDK_INT, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>);   <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//初始化SDK 的一个参数是android API版本 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">            bNeedRelease = <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">true</span>;  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        }  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    } </span></li></ol></pre>
    <h2 style="margin:0px; padding:0px; line-height:26px; font-weight:normal; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif">
     <span style="font-size:18px">
      <a name="t1" style="color:rgb(51,102,153)">
      </a>
      二、登录系统
     </span>
    </h2>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      当初始化SDK完成之后，便可以实现连接服务器、验证用户身份、用户登录等。
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">        //连接服务器 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        anychat.Connect(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">"211.155.25.90"</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">8906</span>);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">        <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//登录系统 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        anychat.Login(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">"android"</span>,<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">""</span>); </span></li></ol></pre>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      连接服务器和登录系统都是一个异步的过程，调用后会立即返回。在回调函数中根据返回代码判断服务器是否连接成功和登录成功。
     </span>
    </p>
    <h2 style="margin:0px; padding:0px; line-height:26px; font-weight:normal; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif">
     <span style="font-size:18px">
      <a name="t2" style="color:rgb(51,102,153)">
      </a>
      三、进入房间
     </span>
    </h2>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      登录成功后就可进入相应的房间，只有在相同房间的用户才能进行音视频通信。代码如下
     </span>
    </p>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      1、进入房间
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//进入1号房间 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">anychat.EnterRoom(<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>, <span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">""</span>);    </span></li></ol></pre>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      进入房间后系统会将该房间在线用户发送给客户端，只有在同一个房间用户才能进行音视频互交、文字聊天、文件传输等。当新用户进入房间或用户下线，都会触发异步消息通知上层应用更改状态。
     </span>
    </p>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      2、文字聊天
     </span>
    </p>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      成功进入房间后，便可调用API接口向指定用户或房间中所有在线用户发送文字 聊天消息。
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">        //发送文字聊天消息 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        String message = messageEditText.getText().toString();  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">        anychat.SendTextMessage(-<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>,message); </span></li></ol></pre>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      其他用户收到文字聊天消息会触发相应的回调函数并将聊天消息显示在界面上。
     </span>
    </p>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      3、请求其他用户的音视频
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">        // 请求对方的视频流  </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        anychat.UserCameraControl(userID, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>);  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">        <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">// 请求对方的音频流  </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        anychat.UserSpeakControl(userID, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>); </span></li></ol></pre>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      4、音视频的显示与播放
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">       //判断远程用户视频是否已打开 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">if</span> (!bOtherVideoOpened) {  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">            <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">if</span> (anychat.GetCameraState(userID) == <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">2</span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                    &amp;&amp; anychat.GetUserVideoWidth(userID) != <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>) {  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                SurfaceHolder holder = otherView.getHolder();   <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//获得SurfaceView控件 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                holder.setFormat(PixelFormat.RGB_565);          <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//设置显示格式 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                holder.setFixedSize(anychat.GetUserVideoWidth(userID),  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                        anychat.GetUserVideoHeight(userID));    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//设置视频显示宽高 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                Surface s = holder.getSurface();                <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//获得视频画面 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                anychat.SetVideoPos(userID, s, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>);     <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//调用API显示视频画面 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                bOtherVideoOpened = <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">true</span>;  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">            }  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">        }  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//判断本地视频是否已打开 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">if</span> (!bSelfVideoOpened) {  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">            <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">if</span> (anychat.GetCameraState(-<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>) == <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">2</span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                    &amp;&amp; anychat.GetUserVideoWidth(-<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>) != <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>) {  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                SurfaceHolder holder = myView.getHolder();      <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//获得SurfaceView控件 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                holder.setFormat(PixelFormat.RGB_565);          <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//设置显示格式 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                holder.setFixedSize(anychat.GetUserVideoWidth(-<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>),  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                        anychat.GetUserVideoHeight(-<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>));        <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//设置视频显示宽高 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                Surface s = holder.getSurface();                <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//获得视频画面 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">                anychat.SetVideoPos(-<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>, s, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>, <span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">0</span>);         <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//调用API显示视频画面 </span> </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">                bSelfVideoOpened = <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">true</span>;  </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">            }  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">        } </span></li></ol></pre>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      Android程序中，当收到用户的媒体流数据时，Android客户端只需提供一个SurfaceView控件，内核自动将视频媒体流数据显示在该控件上并播放声音。
     </span>
    </p>
    <h2 style="margin:0px; padding:0px; line-height:26px; font-weight:normal; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif">
     <span style="font-size:18px">
      <a name="t3" style="color:rgb(51,102,153)">
      </a>
      四、释放资源
     </span>
    </h2>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      与前面讲的连接服务器、登录系统、进入房间对应的的是离开房间、注销系统、释放资源。代码如下：
     </span>
    </p>
    <pre style="white-space:pre-wrap; word-wrap:break-word; line-height:26px; font-family:'Courier New',monospace; width:712.7833251953125px; overflow:auto; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; color:rgb(85,85,85)"> 
 <ol class="dp-j" style="margin:0px 0px 1px 3em!important; padding:5px 0px; border-style:none none none solid; border-left-width:3px; border-left-color:rgb(20,107,0); list-style-position:initial; color:rgb(92,92,92)"><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">    protected</span> <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">void</span> onDestroy() {  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//离开房间 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    anychat.LeaveRoom(-<span class="number" style="color:rgb(192,0,0); margin:0px; padding:0px; border:none; background-color:inherit">1</span>);  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//注销登录 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    anychat.Logout();  </span></li><li style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; line-height:1.3em"><span style="font-size:18px">    <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//释放资源 关闭SDK 不再返回登录界面 </span> </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">    anychat.Release(); </span></li><li class="alt" style="margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; padding:0px 3px 0px 10px!important; border:none; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em"><span style="font-size:18px">}</span></li></ol></pre>
    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; line-height:28px">
     <span style="font-size:18px">
      离开房间后可再进入房间，但是注销登录和释放资源后，SDK将不再工作。在Activity生命周期结束的时候可以将占用资源释放，程序退出。
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f6261697275695f416c6c65:6e2f61727469636c652f64657461696c732f38373236363635" class_="artid" style="display:none">
 </p>
</div>


