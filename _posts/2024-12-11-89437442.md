---
layout: post
title: "nginx服务器实现上传下载文件"
date: 2024-12-11 17:36:06 +0800
description: "参考Nginx文件服务器使用nginx搭建文件服务器使用nginx作为文件服务器nginx搭文件服务"
keywords: "nginx实现文件上传下载"
categories: ['Web']
tags: ['Upload', 'Nginx', 'Download']
artid: "89437442"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=89437442
    alt: "nginx服务器实现上传下载文件"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     nginx服务器实现上传下载文件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     作者
    </h2>
    <p>
     QQ群：
     <strong>
      852283276
     </strong>
     <br/>
     微信：
     <strong>
      arm80x86
     </strong>
     <br/>
     微信公众号：
     <strong>
      青儿创客基地
     </strong>
     <br/>
     B站：
     <a href="https://space.bilibili.com/208826118" rel="nofollow">
      主页
      <code>
       https://space.bilibili.com/208826118
      </code>
     </a>
    </p>
    <h2>
     <a id="_6">
     </a>
     参考
    </h2>
    <blockquote>
     <p>
      <a href="https://blog.csdn.net/wzw_ice/article/details/89414188">
       Nginx文件服务器
      </a>
      <br/>
      <a href="https://www.zhyd.me/article/62" rel="nofollow">
       使用nginx搭建文件服务器
      </a>
      <br/>
      <a href="https://blog.csdn.net/u013410747/article/details/63262561">
       使用nginx作为文件服务器
      </a>
      <br/>
      <a href="https://blog.csdn.net/datadev_sh/article/details/83819791">
       nginx搭文件服务器
      </a>
      <br/>
      <a href="https://www.jianshu.com/p/95602720e7c8" rel="nofollow">
       利用nginx搭建小型的文件服务器
      </a>
      <br/>
      <a href="https://www.cnblogs.com/zhanchenjin/p/5076466.html" rel="nofollow">
       Nginx文件上传下载实现与文件管理
      </a>
      <br/>
      <a href="https://www.cnblogs.com/lidabo/p/4177145.html" rel="nofollow">
       nginx上传模块nginx_upload_module和nginx_uploadprogress_module模块进度显示，如何传递GET参数等。
      </a>
      <br/>
      <a href="https://www.cnblogs.com/lidabo/p/4180258.html" rel="nofollow">
       nginx上传模块nginx_upload_module使用
      </a>
      <br/>
      <a href="https://www.jianshu.com/p/beead02b71f2" rel="nofollow">
       加上上传模块的nginx编译和配置
      </a>
      <br/>
      <a href="https://blog.csdn.net/blog_liuliang/article/details/78846579">
       nginx upload模块+python 后端处理模仿fastdfs实现文件存取
      </a>
      <br/>
      <a href="https://www.cnblogs.com/rootarvin/p/5654679.html" rel="nofollow">
       实现Nginx Upload 模块 功能上传文件。
      </a>
      <br/>
      <a href="https://www.nginx.com/resources/wiki/modules/upload/" rel="nofollow">
       Upload module官网
      </a>
      <br/>
      <a href="https://github.com/fdintino/nginx-upload-module">
       github Upload module官网
      </a>
      <br/>
      <a href="https://www.nginx.com/resources/wiki/modules/upload_progress/" rel="nofollow">
       NGINX Upload Progress Module
      </a>
      <br/>
      <a href="https://github.com/masterzen/nginx-upload-progress-module">
       github Upload Progress Module
      </a>
      <br/>
      <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=225473" rel="nofollow">
       www/nginx unknown directive “upload_progress” after upgrade 1.12.2_4,2 -&gt; 1.12.2_6,2
      </a>
     </p>
    </blockquote>
    <h2>
     <a id="_24">
     </a>
     下载
    </h2>
    <p>
     更新配制文件，添加如下字段，这里用alias实现把嵌入式开发板的根目录全部映射过去，
    </p>
    <pre><code class="prism language-shell">location /download <span class="token punctuation">{<!-- --></span>
    <span class="token function">alias</span>   /<span class="token punctuation">;</span>
    autoindex on<span class="token punctuation">;</span> 
    autoindex_localtime on<span class="token punctuation">;</span>
    autoindex_exact_size off<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre>
    <p>
     执行，
    </p>
    <pre><code class="prism language-shell">$ ./nginx/sbin/nginx -p ./nginx -s reload
</code></pre>
    <h2>
     <a id="_38">
     </a>
     上传
    </h2>
    <p>
     需要有nginx的源码，重新编译nginx，添加上传模块，上传进度模块，
    </p>
    <pre><code class="prism language-shell">$ ./configure --add-module<span class="token operator">=</span><span class="token variable">$parent_path</span>/nginx-upload-module-2.3.0 --add-module<span class="token operator">=</span><span class="token variable">$parent_path</span>/nginx-upload-progress-module-0.8.4
$ <span class="token function">make</span>
$ <span class="token function">make</span> <span class="token function">install</span>
</code></pre>
    <p>
     注意上传进度模块，到0.9版本有一个不兼容的更改，
    </p>
    <pre><code class="prism language-shell"><span class="token keyword">in</span> version 0.9.0 there is INCOMPATIBLE CHANGE: JSONP is now the default output of the progress probes. If you rely on this module serving the deprecated java output use:

upload_progress_java_output
<span class="token keyword">in</span> the progress probe location.
</code></pre>
    <p>
     添加配置文件，
    </p>
    <pre><code class="prism language-shell">location /upload <span class="token punctuation">{<!-- --></span>  
    upload_pass     /<span class="token punctuation">;</span>  
    <span class="token comment"># upload_cleanup 400 404 499 500-505;  </span>
    upload_store    /boot<span class="token punctuation">;</span>  
    upload_store_access user:rw<span class="token punctuation">;</span>  
    <span class="token comment"># upload_limit_rate 128k;  </span>
    upload_set_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_name"</span> <span class="token variable">$upload_file_name</span><span class="token punctuation">;</span>  
    upload_set_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_content_type"</span> <span class="token variable">$upload_content_type</span><span class="token punctuation">;</span>  
    upload_set_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_path"</span> <span class="token variable">$upload_tmp_path</span><span class="token punctuation">;</span>  
    upload_aggregate_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_md5"</span> <span class="token variable">$upload_file_md5</span><span class="token punctuation">;</span>  
    upload_aggregate_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_size"</span> <span class="token variable">$upload_file_size</span><span class="token punctuation">;</span>  
    upload_pass_form_field <span class="token string">"^.*$"</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <p>
     建立html测试，使用fcgi，
    </p>
    <pre><code class="prism language-c"><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;form method=\"POST\" enctype=\"multipart/form-data\" action=\"uploademmc\"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;p&gt;File Upload:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;input type=\"file\" name=\"file\" value=\"\"&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;p&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;input type=\"submit\" name=\"uploademmc\" value=\"uploademmc\"&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;p&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/form&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     上传，0000000001即为新上传的文件，这里必须用脚本在上传结束后来执行重命名操作，
    </p>
    <pre><code class="prism language-shell">root@zynqmp:~<span class="token comment"># ls -l /boot</span>
total 53172
-rw-------    1 root     root         31428 Jan 26 16:11 0000000001
-rw-r--r--    1 root     root      14283264 Jan 26 12:06 Image
-rwxr-xr-x    1 root     root      19311212 Jan  1  1970 MWM178_V1_U6_V1.bit
-rw-r--r--    1 root     root       1118392 Jan 26 06:47 boot.bin
-rw-r--r--    1 root     root      19634147 Jan 26 00:56 rootfs.ext4.gz.uboot
-rw-r--r--    1 root     root         29091 Jan 26 06:47 system.dtb
</code></pre>
    <p>
     上传使用post方法，后端接收到的字符串为如下格式，可以看到文件名在
     <code>
      file_name
     </code>
     字段中，可利用环境变量
     <code>
      REQUEST_URI
     </code>
     提取出来即可，
    </p>
    <pre><code class="prism language-html">------WebKitFormBoundarygKAThjQRpvOwowzR
Content-Disposition: form-data; name="file_name"

11.PNG
------WebKitFormBoundarygKAThjQRpvOwowzR
Content-Disposition: form-data; name="file_content_type"

image/png
------WebKitFormBoundarygKAThjQRpvOwowzR
Content-Disposition: form-data; name="file_path"

/boot/0023791667
------WebKitFormBoundarygKAThjQRpvOwowzR
Content-Disposition: form-data; name="file_md5"

0276e88e6161ac806d46ee0afb45976e
------WebKitFormBoundarygKAThjQRpvOwowzR
Content-Disposition: form-data; name="file_size"

17734
------WebKitFormBoundarygKAThjQRpvOwowzR
Content-Disposition: form-data; name="uploademmc"

uploademmc
------WebKitFormBoundarygKAThjQRpvOwowzR--

FCGI_ROLE=RESPONDER
SCRIPT_FILENAME=./nginx/html/index.cgi
QUERY_STRING=
REQUEST_METHOD=POST
CONTENT_TYPE=multipart/form-data; boundary=----WebKitFormBoundarygKAThjQRpvOwowzR
CONTENT_LENGTH=706
SCRIPT_NAME=/index.cgi
REQUEST_URI=/uploademmc
</code></pre>
    <p>
     上传进度模块需要前端js协助，配置文件，前面提到的0.9版本有一个不兼容的更改，如果需要和老版本兼容，需要在
     <code>
      location ^~ /progress
     </code>
     中添加
     <code>
      upload_progress_java_output
     </code>
     ，
    </p>
    <pre><code class="prism language-shell">http <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">..</span>.
    upload_progress proxied 5m<span class="token punctuation">;</span>
    
    server <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">..</span>.

        location <span class="token operator">=</span> / <span class="token punctuation">{<!-- --></span>
            fastcgi_pass 127.0.0.1:8088<span class="token punctuation">;</span>
            fastcgi_index index.cgi<span class="token punctuation">;</span>
            include fastcgi.conf<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        location /download <span class="token punctuation">{<!-- --></span>
            <span class="token function">alias</span>   /<span class="token punctuation">;</span>
            autoindex on<span class="token punctuation">;</span> 
            autoindex_localtime on<span class="token punctuation">;</span>
            autoindex_exact_size off<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 

        location /upload <span class="token punctuation">{<!-- --></span>  
            upload_pass     /<span class="token punctuation">;</span>  
            <span class="token comment"># upload_cleanup 400 404 499 500-505;  </span>
            upload_store    /boot<span class="token punctuation">;</span>  
            upload_store_access user:rw<span class="token punctuation">;</span>  
            <span class="token comment"># upload_limit_rate 128k;  </span>
            client_max_body_size 8g<span class="token punctuation">;</span>
            upload_set_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_name"</span> <span class="token variable">$upload_file_name</span><span class="token punctuation">;</span>  
            upload_set_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_content_type"</span> <span class="token variable">$upload_content_type</span><span class="token punctuation">;</span>  
            upload_set_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_path"</span> <span class="token variable">$upload_tmp_path</span><span class="token punctuation">;</span>  
            upload_aggregate_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_md5"</span> <span class="token variable">$upload_file_md5</span><span class="token punctuation">;</span>  
            upload_aggregate_form_field <span class="token string">"<span class="token variable">${upload_field_name}</span>_size"</span> <span class="token variable">$upload_file_size</span><span class="token punctuation">;</span>  
            upload_pass_form_field <span class="token string">"^.*$"</span><span class="token punctuation">;</span>  
            track_uploads proxied 30s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        location ^~ /progress <span class="token punctuation">{<!-- --></span>
            <span class="token comment"># report uploads tracked in the 'proxied' zone</span>
            report_uploads proxied<span class="token punctuation">;</span>
            <span class="token comment"># upload_progress_java_output;</span>
        <span class="token punctuation">}</span>

        location ~ \.js$ <span class="token punctuation">{<!-- --></span>
            root html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre>
    <p>
     设置参数
     <code>
      client_max_body_size 8g
     </code>
     ，否则上传时会报错
     <code>
      413 Request Entity Too Large
     </code>
     ，编写html，
    </p>
    <pre><code class="prism language-c"><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;form id=\"upload\" method=\"POST\" enctype=\"multipart/form-data\" action=\"upload\" οnsubmit=\"openProgressBar(); return true;\"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;p&gt;File Upload:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;input type=\"file\" name=\"file\" value=\"\"&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;p&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;input type=\"submit\" name=\"upload\" value=\"upload\"&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;p&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/form&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;div&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;div id=\"progress\" style=\"width: 400px; border: 1px solid black\"&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;div id=\"progressbar\" style=\"width: 1px; background-color: blue; border: 1px solid white\"&gt;&amp;nbsp;&lt;/div&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/div&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;div id=\"tp\"&gt;(progress)&lt;/div&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/div&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     添加js文件，
    </p>
    <pre><code class="prism language-js">interval <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">openProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 <span class="token comment">/* generate random progress-id */</span>
 uuid <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  uuid <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token comment">/* patch the form-action tag to include the progress-id */</span>
 document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"upload"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>action<span class="token operator">=</span><span class="token string">"/upload?X-Progress-ID="</span> <span class="token operator">+</span> uuid<span class="token punctuation">;</span>

 <span class="token comment">/* call the progress-updater every 1000ms */</span>
 interval <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span>
   <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token function">fetch</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token number">1000</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 req<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"/progress"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 req<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"X-Progress-ID"</span><span class="token punctuation">,</span> uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
 req<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/* poor-man JSON parser */</span>
    <span class="token keyword">var</span> upload <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>

    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> upload<span class="token punctuation">.</span>state<span class="token punctuation">;</span>

    <span class="token comment">/* change the width if the inner progress-bar */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>upload<span class="token punctuation">.</span>state <span class="token operator">==</span> <span class="token string">'done'</span> <span class="token operator">||</span> upload<span class="token punctuation">.</span>state <span class="token operator">==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     bar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'progressbar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     w <span class="token operator">=</span> <span class="token number">400</span> <span class="token operator">*</span> upload<span class="token punctuation">.</span>received <span class="token operator">/</span> upload<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
     bar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> w <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* we are done, stop the interval */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>upload<span class="token punctuation">.</span>state <span class="token operator">==</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     window<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 req<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     测试一下，chrome自己也会统计上传进度，标题栏开始小圆圈刷新，
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/59dc954282e2463ee8246b7cd7ba1f97.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f5a68755f5a68755f32303039:2f61727469636c652f64657461696c732f3839343337343432" class_="artid" style="display:none">
 </p>
</div>


