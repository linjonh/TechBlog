---
layout: post
title: "ONENET平台-TCP透传"
date: 2022-06-23 15:02:13 +0800
description: "mark_onenet tcp透传"
keywords: "onenet平台,TCP透传,设备注册"
categories: ['Onenet']
tags: ['大数据']
artid: "125427399"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125427399
    alt: "ONENET平台-TCP透传"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ONENET平台--TCP透传
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
    </p>
    <p>
    </p>
    <div>
     <h4>
      <a name="t0">
      </a>
      如何使用onenet
      <a class="hl hl-1" href="https://so.csdn.net/so/search?q=%E4%BA%91%E5%B9%B3%E5%8F%B0&amp;spm=1001.2101.3001.7020" title="云平台">
       云平台
      </a>
      -----TCP透传
     </h4>
    </div>
    <p>
    </p>
    <p>
    </p>
    <p>
     手把手教你搭建云平台——TCP透传
     <br/>
     <a href="https://open.iot.10086.cn/doc/book/device-develop/multpro/TCP/introduce.html" rel="nofollow" title="官方对TCP协议介绍">
      官方对TCP协议介绍
     </a>
     <br/>
     <a href="https://open.iot.10086.cn/doc/book/device-develop/multpro/TCP/tcp-manual.html" rel="nofollow" title="官方接入流程">
      官方接入流程
     </a>
    </p>
    <p>
    </p>
    <pre><code>下面我将围绕以下主题展开讲解
    1、登录onenet平台完成账号注册
    2、创建产品，设备
    3、按步骤登陆设备，模拟收发数据
    4、数据流设计
    5、Lua脚本设计（数据流解析）
    6、数据展示层设计、编辑
    7、修改Lua脚本定时下方hello
</code></pre>
    <p>
    </p>
    <p>
     <a href="https://open.iot.10086.cn/" rel="nofollow" title="onenet云平台">
      onenet云平台
     </a>
     <br/>
     完成账号注册之后登录，选择右上角控制台
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a6e3a01178bb975ad8ddf0dd202808b9.png">
      <br/>
      选择切换至
      <strong>
       旧版
      </strong>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bf861c79736af27d8df211b06994d99b.png#pic_center">
       <br/>
       点【全部产品】-&gt;【多协议接入旁星号】-&gt;【多协议】
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/abf8dee3b016df303be7585615710567.png#pic_center">
        <br/>
        点击【TCP透传】
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a06778e3c17109ad4ceb819ededa0172.png#pic_center">
         <br/>
         点击右上角【添加产品】
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/29f25daec6c30c717ca089d444128871.png#pic_center">
          <br/>
          产品名称随意写，建议产品行业和类别选择其他
          <br/>
          <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/47b8fb74246643e34198b2e6d72be78d.png">
           <br/>
           底下技术参数可以按照下图所选，也可以根据自己需求选择
           <br/>
           （wifi其实是pc机与调试助手连接）
           <br/>
           （我完成的是课设所以选的比较简单）
           <br/>
           <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/021456cbf8324886fa72c8bfe3b7feef.png">
            <br/>
            创建好产品之后会生产一下信息，这里建议将产品ID存到桌面的文本文档
            <br/>
            （注：｛产品ID｝是后面使用网络调试助手使设备在线报文所使用的号码）
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d2e9fbf60d914b6bbce74abf62afb647.png#pic_center">
             <br/>
             点击【设备列表】进行添加设备
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0e430f81510c82c2d760af92c1766ac9.png#pic_center"/>
             <br/>
             点击【添加设备】
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a90519bcb3b9f7a0289e0e7e6cd11906.png#pic_center"/>
             <br/>
             将写好的｛鉴权信息｝保存在刚才在桌面保存的文本文档产品ID后面
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5f72caf4175d760379719a37abad966c.png#pic_center"/>
             <br/>
             下面该上传Lua脚本
             <br/>
             <a href="https://open.iot.10086.cn/doc/multiprotocol/book/develop/tcp/device/doc-tool.html" rel="nofollow" title="官网提供的Lua文档">
              官网提供的Lua文档
             </a>
             <br/>
             下载好之后本例程上传sample–str.lua
             <br/>
             解析脚本工具Notepad++
             <br/>
             链接：
             <br/>
             https://pan.baidu.com/s/1GFlxZTC6UPcAI-_GENEPrA
             <br/>
             提取码：vdwq
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c2f97bc65f0abf30e3c280959e3f88e7.png#pic_center"/>
             将定义好的脚本名称还是存到刚才的文档中
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fbc7bbef4c10b72b0690aedba5e7fcc6.png#pic_center"/>
             <br/>
             上传好的界面如下
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b6d02529c2be9bfddf897fba19191711.png#pic_center"/>
             <br/>
             接下来我们下载网络调试助手从而使我们的设备在线
             <br/>
             <a href="https://blog.csdn.net/qq_29350001/article/details/79488771" title="网络调试助手下载">
              网络调试助手下载
             </a>
             <br/>
             (网盘里放了两个版本网络调试助手，大家可以自由选择)
             <br/>
             链接：https://pan.baidu.com/s/1aN5NZYEiWwGA_qdXPnWg4Q
             <br/>
             提取码：jj6u
            </img>
           </img>
          </img>
         </img>
        </img>
       </img>
      </img>
     </img>
    </p>
    <p>
    </p>
    <p>
     建立连接，并发送一个登陆的报文
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9523932f06b6de7192ebe0a5b30610f1.png"/>
     <br/>
     登陆报文格式：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0b89496600c07b5db992b96e84225f81.png"/>
     <br/>
     这是ONENET平台给我们提供的接口
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4c9dfeda083e3f11c2f2657413400640.png"/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4cc8f52258ffbb0a540acd573c89b825.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bd3062ca8b759f868cf1196dc27eac45.png"/>
    </p>
    <p>
    </p>
    <p>
     虽然已经连接ONENET服务器但是设备还是处于离线状态，所以此时我们需要发送一个登录的报文。
     <br/>
     （不勾选十六进制,我们连接onenet之后会收到received）
     <br/>
     将刚才写好的报文进行发送，可以看到设备处于在线状态
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3d0490ffc620c72592c154fa51017d98.png"/>
     <br/>
     点击【数据流】，进入控制面板
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6a1a4dd48f3817f4c32a143d0f134653.png"/>
     <br/>
     此时在网络调试助手发222时云平台端可以进行接收数据222并进行显示
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d411c8161c17cdb04f8b6eeeb5b32709.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/eb1b52e105f395f3c3e7ca8cbd5b7eec.png"/>
     <br/>
     完成到这里就已经成功已经完成基于TCP透传的产品的建立以及数据的上传。
     <br/>
     下面是数据的下发工作
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a443bdba565db49bb50a16ae334ea7ad.png#pic_center"/>
     <br/>
     字符串下发
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0a5db26bbbcddd289f0dc34f6a4d2168.png"/>
     <br/>
     十六进制下发
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/214d9bef16c2c3bbcafa1917c6bb83a3.png"/>
     <br/>
     案例一：实现云平台给PC机定时发送hello
     <br/>
     修改sample—str.lua文件中代码
     <br/>
     function device_timer_init(dev)
     <br/>
     – 添加用户自定义代码 –
     <br/>
     – 例如： –
     <br/>
     dev:timeout(3)
     <br/>
     dev:add(10,“dev1”,“hello”) --每10秒下发一包数据，内容为hello
     <br/>
     end
     <br/>
     <a href="http://www.360doc.com/content/17/0708/16/35884009_669844917.shtml" rel="nofollow" title="网上例程">
      网上例程
     </a>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7e7329a73038121fd85024292f01be35.png#pic_center"/>
    </p>
    <p>
     <br/>
     ---------------------
     <br/>
     作者：BLY326
     <br/>
     来源：CSDN
     <br/>
     原文：https://blog.csdn.net/qq_45045583/article/details/111397854
     <br/>
     版权声明：本文为作者原创文章，转载请附上博文链接！
     <br/>
     内容解析By：
     <a href="https://greasyfork.org/zh-CN/scripts/381053-csdn-cnblog%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E4%B8%80%E9%94%AE%E8%BD%AC%E8%BD%BD%E6%8F%92%E4%BB%B6" rel="nofollow" title="CSDN,CNBLOG博客文章一键转载插件">
      CSDN,CNBLOG博客文章一键转载插件
     </a>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031343432313331332f:61727469636c652f64657461696c732f313235343237333939" class_="artid" style="display:none">
 </p>
</div>


