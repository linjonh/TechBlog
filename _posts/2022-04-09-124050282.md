---
layout: post
title: "秒懂云原生微服务篇-微服务究竟是什么"
date: 2022-04-09 12:01:08 +0800
description: "文章浏览阅读4.2w次，点赞73次，本文深入探讨了微服务架构的发展历程，从单体应用到面向服务架构（S"
keywords: "云原生微服务"
categories: ['']
tags: ['微服务', '云原生']
artid: "124050282"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=124050282
    alt: "秒懂云原生微服务篇-微服务究竟是什么"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【秒懂·云原生】微服务篇 —— 微服务究竟是什么？
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     🔎这里是【秒懂·云原生】，关注我学习云原生不迷路
     <br/>
     👍如果对你有帮助，给博主一个免费的点赞以示鼓励
     <br/>
     欢迎各位🔎点赞👍评论收藏⭐️
    </p>
    <h2>
     <a id="_3">
     </a>
     👀专栏介绍
    </h2>
    <p>
     <strong>
      【秒懂·云原生】
     </strong>
     目前主要更新微服务，一起学习一起进步。
    </p>
    <h2>
     <a id="_6">
     </a>
     👀本期介绍
    </h2>
    <p>
     主要介绍什么是微服务、微服务的发展史、微服务与云原生的关系
     <br/>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#_3" rel="nofollow">
        👀专栏介绍
       </a>
      </li>
      <li>
       <a href="#_6" rel="nofollow">
        👀本期介绍
       </a>
      </li>
      <li>
       <a href="#_9" rel="nofollow">
        👀微服务架构介绍
       </a>
      </li>
      <li>
       <a href="#_12" rel="nofollow">
        👀微服务架构的发展
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_15" rel="nofollow">
          🍖单体应用架构
         </a>
        </li>
        <li>
         <a href="#SOA_22" rel="nofollow">
          🍖SOA（面向服务架构）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#1SOA_23" rel="nofollow">
            🎨1、什么是SOA
           </a>
          </li>
          <li>
           <a href="#2SOA_25" rel="nofollow">
            🎨2、为什么要使用SOA
           </a>
          </li>
          <li>
           <a href="#3SOA_29" rel="nofollow">
            🎨3、SOA的工作原理
           </a>
          </li>
          <li>
           <a href="#4_38" rel="nofollow">
            🎨4、面向服务架构的特点
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_47" rel="nofollow">
          🍖微服务架构
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#1_52" rel="nofollow">
            🎨1、组成
           </a>
          </li>
          <li>
           <a href="#2_67" rel="nofollow">
            🎨2、优点
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_75" rel="nofollow">
        👀微服务架构的流派
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1ZeroC_lceGrid_77" rel="nofollow">
          🍖1、ZeroC lceGrid
         </a>
        </li>
        <li>
         <a href="#2_85" rel="nofollow">
          🍖2、基于消息队列
         </a>
        </li>
        <li>
         <a href="#3Docker_Swarm_87" rel="nofollow">
          🍖3、Docker Swarm
         </a>
        </li>
        <li>
         <a href="#4Spring_Cloud_89" rel="nofollow">
          🍖4、Spring Cloud
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_105" rel="nofollow">
        👀云原生与微服务
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_9">
     </a>
     👀微服务架构介绍
    </h2>
    <blockquote>
     <p>
      近年来，微服务架构一直是互联网技术圈的热点之一，越来越多的互联网应用都采用了微服务架构作为系统构建的基础，很多新技术和理念如Docker、Kubernetes、DevOps、持续交付、Service Mesh等也都在关注、支持和跟随微服务架构的发展。
     </p>
    </blockquote>
    <h2>
     <a id="_12">
     </a>
     👀微服务架构的发展
    </h2>
    <blockquote>
     <p>
      <strong>
       从单体应用架构发展到SOA架构，再到微服务架构，
      </strong>
      应用架构经历了多年的不断演进。微服务架构不是凭空产生的，而是技术发展的必然结果，分布式云平台的应用环境使得微服务代替单体应用成为互联网大型系统的架构选择。目前，虽然微服务架构还没有公认的技术标准和规范草案，但业界已经有了一些很有影响力的开源微服务架构解决方案，在进行微服务化开发或改造时可以进行相应的参考。
     </p>
    </blockquote>
    <h3>
     <a id="_15">
     </a>
     🍖单体应用架构
    </h3>
    <blockquote>
     <p>
      与微服务架构对比的是传统的单体应用。Web应用程序发展的早期，大部分Web工程是将所有的功能模块打包到一起部署和运行，例如Java应用程序打包为一个war包，其他语言（Ruby、Python或者C++)编写的应用程序也有类似的做法。单体应用的实现架构类似于图中的电影售票系统。
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1590c6647a40559b58ee6dd69f6ba67d.png"/>
    </p>
    <blockquote>
     <p>
      这个电影售票系统采用分层架构，按照调用顺序，从上到下为表示层、业务层、数据访问(DAO)层、DB层。表示层负责用户体验;业务层负责业务逻辑，包括电影、订单和用户三个模块;数据访问层负责DB层的数据存取，实现增删改查的功能。业务层定义了应用的业务逻辑，是整个应用的核心。在单体应用中，所有这些模块都集成在一起，这样的系统架构就叫做单体应用架构，或称为巨石型应用架构。单体应用是最早的应用形态，开发和部署都很简单。在中小型项目中使用单体应用架构，能体现出其优势，且单体应用的整体性能主要依赖于硬件资源和逻辑代码实现，应用架构自身不需要特别关注。
     </p>
    </blockquote>
    <h3>
     <a id="SOA_22">
     </a>
     🍖SOA（面向服务架构）
    </h3>
    <h4>
     <a id="1SOA_23">
     </a>
     🎨1、什么是SOA
    </h4>
    <p>
     <strong>
      面向服务的体系结构（Service-Oriented Architecture，SOA）是一个组件模型。
     </strong>
    </p>
    <h4>
     <a id="2SOA_25">
     </a>
     🎨2、为什么要使用SOA
    </h4>
    <blockquote>
     <p>
      SOA旨在将单个应用程序功能彼此分开，以便这些功能可以单独用作单个的应用程序功能或“组件”。这些组件可以用于在企业内部创建各种其他的应用程序，或者如有需要，对外向合作伙伴公开，以便用于合作伙伴的应用
     </p>
    </blockquote>
    <h4>
     <a id="3SOA_29">
     </a>
     🎨3、SOA的工作原理
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/957fd6ab31e7476de03b9e4a12bcf3f6.jpeg#pic_center"/>
    </p>
    <p>
     <strong>
      SOA架构中有三种角色：
     </strong>
    </p>
    <blockquote>
     <p>
      <strong>
       服务提供者：
      </strong>
      发布自己的服务，并且对服务请求进行响应。
      <br/>
      <strong>
       服务注册中心：
      </strong>
      注册已经发布的web service，对其进行分类，并提供搜索服务。
      <br/>
      <strong>
       服务请求者：
      </strong>
      利用服务中心查找所需要的服务，然后使用该服务。
     </p>
    </blockquote>
    <h4>
     <a id="4_38">
     </a>
     🎨4、面向服务架构的特点
    </h4>
    <p>
     1） 多个单体服务
     <br/>
     2）服务间通过ESB间接通讯
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bf0059b8f7066cbdeedbb232b6b4abdf.png#pic_center">
      <br/>
      <strong>
       缺点也显而易见：
      </strong>
     </img>
    </p>
    <p>
     1）仅垂直方向拆分，每个服务还是单体；
    </p>
    <p>
     2）引入了ESB庞然大物；
    </p>
    <h3>
     <a id="_47">
     </a>
     🍖微服务架构
    </h3>
    <blockquote>
     <p>
      微服务最早是由Martin Fowler与James Lewis于2014年共同提出，需要了解细节的读者可以阅览https://martinfowler.com/articles/microservices.html。其实Martin先生并没有给出明确的微服务定义，根据其描述，微服务的定义可以概括如下︰微服务架构是一种使用一系列粒度较小的服务来开发单个应用的方式;每个服务运行在自己的进程中;服务间采用轻量级的方式进行通信（通常是HTTP API)﹔这些服务是基于业务逻辑和范围，通过自动化部署的机制来独立部署的，并且服务的集中管理应该是最低限度的，即每个服务可以采用不同的编程语言编写，使用不同的数据存储技术。
      <br/>
      如今，微服务架构已经不是一个新概念了，很多业界前沿互联网公司的实践表明，微服务是一种渐进式的演进架构，是企业应对业务复杂性，支持大规模持续创新行之有效的架构手段。
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2d6968c8171073971683965668529368.jpeg#pic_center"/>
    </p>
    <h4>
     <a id="1_52">
     </a>
     🎨1、组成
    </h4>
    <p>
     <strong>
      微服务架构是一种比较复杂、内涵丰富的架构模式，它包含很多支撑"微"服务的具体组件和概念，其中一些常用的组件及其概念如下:
     </strong>
    </p>
    <ul>
     <li>
      ·
      <strong>
       服务注册与发现:
      </strong>
      <br/>
      服务提供方将己方调用地址注册到服务注册中心，让服务调用方能够方便地找到自己;服务调用方从服务注册中心找到自己需要调用的服务的地址。
     </li>
     <li>
      ·
      <strong>
       负载均衡:
      </strong>
      <br/>
      服务提供方一般以多实例的形式提供服务，负载均衡功能能够让服务调用方连接到合适的服务节点。并且，服务节点选择的过程对服务调用方来说是透明的。
     </li>
     <li>
      ·
      <strong>
       服务网关:
      </strong>
      服务网关是服务调用的唯一入口，可以在这个组件中实现用户鉴权、动态路由、灰度发布、A/B测试、负载限流等功能。
     </li>
     <li>
      ·
      <strong>
       配置中心:
      </strong>
      <br/>
      将本地化的配置信息(Properties、XML、YAML等形式）注册到配置中心，实现程序包在开发、测试、生产环境中的无差别性，方便程序包的迁移。
     </li>
     <li>
      ·
      <strong>
       集成框架:
      </strong>
      <br/>
      微服务组件都以职责单一的程序包对外提供服务，集成框架以配置的形式将所有微服务组件（特别是管理端组件）集成到统一的界面框架下，让用户能够在统一的界面中使用系统。
     </li>
     <li>
      ·
      <strong>
       调用链监控:
      </strong>
      记录完成一次请求的先后衔接和调用关系，并将这种串行或并行的调用关系展示出来。在系统出错时，可以方便地找到出错点。
     </li>
     <li>
      ·
      <strong>
       支撑平台:
      </strong>
      <br/>
      系统微服务化后，各个业务模块经过拆分变得更加细化，系统的部署、运维、监控等都比单体应用架构更加复杂，这就需要将大部分的工作自动化。现在，Docker等工具可以给微服务架构的部署带来较多的便利，例如持续集成、蓝绿发布、健康检查、性能健康等等。如果没有合适的支撑平台或工具，微服务架构就无法发挥它最大的功效。
     </li>
    </ul>
    <h4>
     <a id="2_67">
     </a>
     🎨2、优点
    </h4>
    <p>
     <strong>
      微服务架构模式有很多优势可以有效解决单体应用扩大之后出现的大部分问题。
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       首先，
      </strong>
      通过将巨大单体式应用分解为多个服务的方法解决了复杂性问题。在功能不变的情况下，应用分解为多个可管理的模块或服务。每个服务都有一个用RPC或者消息驱动API定义清楚的边界。微服务架构模式为采用单体式编码方式很难实现的功能提供了模块化的解决方案。由此，单个服务变得很容易开发、理解和维护。
     </li>
     <li>
      <strong>
       其次，
      </strong>
      微服务架构模式使得团队并行开发得以推进，每个服务都可以由专门开发团队来开发。不同团队的开发者可以自由选择开发技术，提供API服务。这种自由意味着开发者不需要被迫使用之前采用的过时技术，他们可以选择最新的技术。甚至于，因为服务都是相对简单的，即使用新技术重写以前的代码也不是很困难的事情。
     </li>
     <li>
      <strong>
       再次，
      </strong>
      微服务架构模式中每个微服务独立都是部署的。理想情况下，开发者不需要协调其他服务部署对本服务的影响。这种改变可以加快部署速度。UI团队可以采用AB测试，快速地部署变化。微服务架构模式使得持续化部署成为可能。
     </li>
     <li>
      <strong>
       最后，
      </strong>
      微服务架构模式使得每个服务易于独立扩展。
     </li>
    </ul>
    <h2>
     <a id="_75">
     </a>
     👀微服务架构的流派
    </h2>
    <p>
     <strong>
      常见的微服务架构方案有四种，分别是ZeroC lceGrid、基于消息队列、DockerSwarm和Spring Cloud。下面分别介绍这四种方案。
     </strong>
    </p>
    <h3>
     <a id="1ZeroC_lceGrid_77">
     </a>
     🍖1、ZeroC lceGrid
    </h3>
    <ul>
     <li>
      ZeroC lceGrid是基于RPC框架lce发展而来的一种微服务架构，lce不仅仅是一个RPC框架，它还为网络应用程序提供了一些补充服务。lce是一个全面的RPC框架，支持C++、C#、Java、JavaScript、Python等语言。IceGrid具有定位、部署和管理lce服务器的功能，具有良好的性能与分布式能力，下面具体介绍IceGrid的功能。
     </li>
     <li>
      lce的DNS。DNS用于将域名信息映射到具体的IP地址，通过域名得到该域名对应的IP地址的过程叫做域名解析。lceGrid为lce提供了类似的服务∶它允许lce客户端通过简单的名称来查找Ice对象。lce客户端可以通过提供此对象的完整寻址信息来访问服务器中的Ice对象，例如chatRoom1:ssl-h demo.zeroc.com-p10000。这样的硬编码虽然很简单，但缺乏灵活性。因为需要为lce服务器(本例中端口为10000）选择一个固定的端口号，因此将Ice服务器移到不同的主机上需要更新其客户端。
     </li>
     <li>
      lceGrid提供了对这种寻址信息使用符号名称的选项，例如chatRoom1@chatRoomHost。当lce客户端尝试访问chatRoomHost中的对象时，它会要求lceGrid提供与此符号名称关联的实际地址。例如，lceGrid返回-hdemo.zeroc.com-p 65431，客户端就可以直接并透明地连接到服务器。lceGrid架构如图
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f471fbb40f9d8627a8a6d18009b431c7.png"/>
    </p>
    <h3>
     <a id="2_85">
     </a>
     🍖2、基于消息队列
    </h3>
    <p>
     在微服务架构的定义中讲到，各个微服务之间使用“轻量级"的通信机制。所谓轻量级，是指通信协议与语言无关、与平台无关。微服务之间的通信方式有两种:同步和异步。同步方式有RPC，REST等;除了标准的基于同步通信方式的微服务架构外，还有基于消息队列异步方式通信的微服务架构。
    </p>
    <h3>
     <a id="3Docker_Swarm_87">
     </a>
     🍖3、Docker Swarm
    </h3>
    <p>
     Swarm项目是Docker公司发布的三剑客中的一员，用来提供容器集群服务，目的是更好地帮助用户管理多个Docker Engine，方便用户使用。通过把多个Docker Engine聚集在一起，形成一个大的Docker Engine，对外提供容器的集群服务。同时这个集群对外提供Swarm API，用户可以像使用Docker Engine一样使用Docker集群。
    </p>
    <h3>
     <a id="4Spring_Cloud_89">
     </a>
     🍖4、Spring Cloud
    </h3>
    <ul>
     <li>
      Spring Cloud是一个基于SpringBoot实现的云应用开发工具，是一系列框架的集合，当添加这些工具库到应用后会增强应用的行为。SpringBoot秉持约定优于配置的思想，因此可以利用这些组件基本的默认行为来快速入门，并在需要的时候可以配置或扩展，以创建自定义解决方案。
     </li>
     <li>
      Spring Cloud利用Spring Boot的开发便利性，巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以基于Spring Boot组件进行开发，做到一键启动和部署。Spring Cloud并没有重复制造轮子，它只是将目前比较成熟、经得起实际考验、优秀的开源服务框架组合起来，通过Spring Boot进行封装，屏蔽掉复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包。
     </li>
    </ul>
    <p>
     <strong>
      以下为Spring Cloud的核心功能:
     </strong>
    </p>
    <ul>
     <li>
      分布式/版本化配置
     </li>
     <li>
      服务注册和发现
     </li>
     <li>
      服务路由
     </li>
     <li>
      服务和服务之间的调用
     </li>
     <li>
      负载均衡
     </li>
     <li>
      断路器
     </li>
     <li>
      分布式消息传递
     </li>
    </ul>
    <p>
     还有很多基础的功能没有列出，每个功能对应Spring Cloud中的一个组件，包括Spring Cloud Config、Spring Cloud Netflix (Eureka、Hystrix、Zuul、Archaius…) . Spring Cloud Bus等组件。
    </p>
    <h2>
     <a id="_105">
     </a>
     👀云原生与微服务
    </h2>
    <blockquote>
     <p>
      提及云原生，首先需要了解一下CNCF，即云原生计算基金会，2015年由谷歌牵头成立，基金会成员目前已有一百多个企业与机构，包括亚马逊、微软、思科等巨头。目前CNCF所托管的应用已达14个，知名的项目有Kubernetes、Prometheus、Envoy等。
     </p>
    </blockquote>
    <p>
     <strong>
      CNCF宪章中给出了云原生应用的三大特征，概括如下:
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       容器化封装:
      </strong>
      以容器为基础，提高整体开发水平，形成代码和组件重用，简化云原生应用程序的维护。在容器中运行应用程序和进程，并作为应用程序部署的独立单元，实现高水平资源隔离。
     </li>
     <li>
      <strong>
       动态管理:
      </strong>
      通过集中式的编排调度系统来动态管理和调度。
     </li>
     <li>
      <strong>
       面向微服务:
      </strong>
      明确服务间的依赖,互相解耦。
     </li>
    </ul>
    <p>
     云原生包含了一组应用的模式，用于帮助企业快速、持续、可靠、规模化地交付业务软件。如图所示，云原生由微服务架构、DevOps和以容器为代表的敏捷基础架构组成。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/48e5549bd412aca12073f88f24b727ba.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35303834333931382f:61727469636c652f64657461696c732f313234303530323832" class_="artid" style="display:none">
 </p>
</div>


