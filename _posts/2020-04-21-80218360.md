---
layout: post
title: manjaro-安装分区以及配置方案
date: 2020-04-21 21:20:02 +0800
categories: [Manjaro]
tags: [linux]
image:
    path: https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWctYmxvZy5jc2RuLm5ldC8yMDE4MDUwNjIxMDA0NzE0Nj93YXRlcm1hcmsvMi90ZXh0L0x5OWliRzluTG1OelpHNHVibVYwTDJ4cU5EQXlNVFU1T0RBMi9mb250LzVhNkw1TDJUL2ZvbnRzaXplLzQwMC9maWxsL0kwSkJRa0ZDTUE9PS9kaXNzb2x2ZS83MC9ncmF2aXR5L1NvdXRoRWFzdA?x-oss-process=image/resize,m_fixed,h_150
    alt: manjaro-安装分区以及配置方案
artid: 80218360
render_with_liquid: false
---
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     manjaro 安装分区以及配置方案
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     制作启动盘
    </h2>
    <h3>
     <a id="windows_2">
     </a>
     windows下制作启动盘
    </h3>
    <p>
     推荐在windows下使用Rufus工具来制作启动盘
    </p>
    <p>
     <img alt="这里写图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/68160209412875ac545505d80789aeff.jpeg"/>
    </p>
    <p>
     使用iso模式做成启动盘后能直接存储文件，传统bios推荐用这种方式，分区方案选择MBR
     <br/>
     使用dd模式做成启动盘后，需要自己划分分区才能存储文件，uefi推荐用这种方式，分区方案选择GPT
    </p>
    <p>
     <img alt="这里写图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0acaf0c7cf36661b123528e48664d60b.jpeg"/>
    </p>
    <h3>
     <a id="linux_13">
     </a>
     linux下制作启动盘
    </h3>
    <p>
     linux下可以直接使用dd命令，使用该命令做成启动盘后U盘就不能用来存储文件了，具体命令格式可以看wiki
    </p>
    <blockquote>
     <p>
      https://wiki.manjaro.org/index.php?title=Burn_an_ISO_File#Using_the_Terminal
     </p>
    </blockquote>
    <h2>
     <a id="_19">
     </a>
     磁盘分配
    </h2>
    <pre><code>/ - 15-20 GB
</code></pre>
    <p>
     / 分区或叫根分区是最重要而且必需的，需要最先挂载,因为包括 /usr 目录，根据安装的软件数量，会产生非常明显的增长。15-20 GB 对于大多数用户来说是一个比较合适的取值。如果你打算在这里放一个交换文件（swap file）的话，需要适当调大取值
    </p>
    <pre><code>/boot - 512 MB
</code></pre>
    <p>
     /boot 分区包含内核、ramdisk 镜像以及 bootloader 配置文件和 bootloader stage。它也可以存放内核在执行用户态程序之前所使用的其他数据。/boot 在日常系统运行中并不需要，只在启动和内核升级（包括重建initial ramdisk）的时候用到。
    </p>
    <p>
     如果使用软RAID0（条带化）系统的话，必须有一个独立的 /boot 分区。
    </p>
    <p>
     不使用 UEFI 时，/boot 的建议大小时 200 MB，使用 UEFI 时，需要至少 512 MiB 空间。
    </p>
    <pre><code>/var - 8-12 GB
</code></pre>
    <p>
     /var 目录存储变量数据例如 spool 目录和文件，管理和登录数据,它通常被用作缓存或者日志记录，因此读写频繁。将它独立出来可以避免由于大量日志写入造成的磁盘空间耗尽等问题。
    </p>
    <p>
     除了其他数据以外，还包括ABS 树和 pacman 缓存。保留缓存的包提供了包降级的能力，因此非常有用。也正因为这样，/var 的大小会随着时间推移而增长。尤其是 pacman 缓存将会随着新软件的安装、系统的升级而增长。在磁盘空间不足的时候，可以安全的清理这个目录。/var 分配 8-12 GB 对于桌面系统来说是比较合适的取值，具体取值取决于安装的软件数量。
    </p>
    <pre><code>/home - [剩余全部]
</code></pre>
    <p>
     将/home目录独立使得/分区可以单独重新划分，但是请注意你可以在 /home 没有独立分区的情况下你仍然可以在不修改 /home 目录内容的情况下重装 Arch —— 删除其他顶级目录，然后执行pacstrap。
    </p>
    <p>
     不能与使用其他发行版的用户共享同一个home目录，因为不同的发行版可能使用不兼容的软件版本和补丁。可以共享媒体目录，或至少使用 /home 分区下的不同home目录。分区大小跟着存储的内容而定。
    </p>
    <pre><code>swap - 4 GB
</code></pre>
    <p>
     以防万一，预留4G
    </p>
    <h3>
     <a id="_57">
     </a>
     双系统分区
    </h3>
    <p>
     下面图片是uefi下win10加manjaro双系统分区方案，我这里有两个硬盘，1T机械运行win10，240G固态运行manjaro
    </p>
    <p>
     <img alt="这里写图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8d94df603f45b8f44ce5a717b9f9fd27.png"/>
    </p>
    <p>
     win10系统的硬盘内有个efi的分区，需要指定为/boot/efi分区，注意选择保留不要格式化
    </p>
    <p>
     <img alt="这里写图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5226adfe141aa4944c44beef9a133b81.png"/>
    </p>
    <h2>
     <a id="_67">
     </a>
     黑屏问题
    </h2>
    <h3>
     <a id="_69">
     </a>
     双显卡驱动问题
    </h3>
    <blockquote>
     <ol>
      <li>
       ctrl+alt+F3进入tty后登录
      </li>
      <li>
       输入mhwd-tui
      </li>
      <li>
       选4 Use nonfree graphics，使用闭源驱动
      </li>
      <li>
       重启
      </li>
     </ol>
    </blockquote>
    <h3>
     <a id="acpi_76">
     </a>
     acpi问题
    </h3>
    <pre><code class="prism language-shell"><span class="token function">vim</span> /etc/default/grub
</code></pre>
    <pre><code class="prism language-shell"><span class="token assign-left variable">acpi_osi</span><span class="token operator">=</span><span class="token operator">!</span> <span class="token assign-left variable">acpi_osi</span><span class="token operator">=</span><span class="token string">'Windows 2009'</span>
<span class="token comment">#找到GRUB_CMDLINE_LINUX_DEFAULT在quiet后添加上面内容</span>
<span class="token comment">#例:GRUB_CMDLINE_LINUX_DEFAULT="quiet acpi_osi=! acpi_osi='Windows 2009' resume=UUID=3bae182a-94f7-46fd-898e-06bd4bf798f8"</span>

</code></pre>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">update-grub</span>
</code></pre>
    <p>
     很多硬件厂商的BIOS驱动比如DELL都对Linux不友好，无法顺利加载ACPI模块，而导致无法驱动独立显卡,acpi_osi=’Windows 2009’的意思是告诉ACPI模块，我是‘Windows 7’，别闹情绪了，赶紧工作吧。
    </p>
    <p>
     如果已经不能进入系统的话就在grub启动项按e进入编辑界面，然后在quiet后面添加上面acpi的内容
    </p>
    <h2>
     <a id="_97">
     </a>
     <s>
      有线网络不停重连
     </s>
    </h2>
    <pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /etc/modprobe.d
<span class="token function">sudo</span> <span class="token function">mv</span> r8169_blacklist.conf r8168_blacklist.conf
<span class="token function">sudo</span> <span class="token function">vim</span> r8168_blacklist.conf
<span class="token comment">#打开后更改为以下内容</span>
<span class="token comment">#blacklist r8169</span>
blacklist r8168
</code></pre>
    <h2>
     <a id="Authentication_Required_108">
     </a>
     Authentication Required
    </h2>
    <p>
     Authentication Required / Configuring networking requires privileges
     <br/>
     Authentication Required / Setting RfKill State requires privileges
     <br/>
     每次开机后如果有上面提示要求输入密码
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/polkit-1/rules.d/51-blueman.rules
<span class="token comment">#添加如下规则</span>
/* Allow <span class="token function">users</span> <span class="token keyword">in</span> wheel group to use blueman feature requiring root without authentication */
polkit.addRule<span class="token punctuation">(</span>function<span class="token punctuation">(</span>action, subject<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>action.id <span class="token operator">==</span> "org.blueman.network.setup" <span class="token operator">||</span>
         action.id <span class="token operator">==</span> "org.blueman.dhcp.client" <span class="token operator">||</span>
         action.id <span class="token operator">==</span> "org.blueman.rfkill.setstate" <span class="token operator">||</span>
         action.id <span class="token operator">==</span> "org.blueman.pppd.pppconnect"<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        subject.isInGroup<span class="token punctuation">(</span>"wheel"<span class="token punctuation">))</span></span> <span class="token punctuation">{<!-- --></span>
        <span class="token builtin class-name">return</span> polkit.Result.YES<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
    <h3>
     <a id="Linux__Windows__130">
     </a>
     Linux 与 Windows 双系统共享蓝牙鼠标
    </h3>
    <p>
     <a href="https://blog.nanpuyue.com/2018/040.html" rel="nofollow">
      https://blog.nanpuyue.com/2018/040.html
     </a>
    </p>
    <h3>
     <a id="_133">
     </a>
     鼠标插入禁止触摸板
    </h3>
    <pre><code class="prism language-shell"><span class="token comment">#自动禁用触摸板</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.desktop.peripherals.touchpad send-events disabled-on-external-mouse
<span class="token comment">#永久开启触摸板</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.desktop.peripherals.touchpad send-events enabled
</code></pre>
    <h2>
     <a id="_142">
     </a>
     配置源
    </h2>
    <h3>
     <a id="_144">
     </a>
     替换为国内源
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman-mirrors <span class="token parameter variable">--country</span> China <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> pacman <span class="token parameter variable">-Syyu</span>
<span class="token comment">#sudo pacman-mirrors --fasttrack &amp;&amp; sudo pacman -Syyu</span>
</code></pre>
    <h3>
     <a id="archlinuxCN_151">
     </a>
     添加archlinuxCN源
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/pacman.conf
</code></pre>
    <p>
     在末尾添加后保存退出
    </p>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>archlinuxcn<span class="token punctuation">]</span>
Server <span class="token operator">=</span> https://mirrors.ustc.edu.cn/archlinuxcn/<span class="token variable">$arch</span>
</code></pre>
    <p>
     Add PGP Keys
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-Syy</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> archlinuxcn-keyring
</code></pre>
    <p>
     更多镜像站
    </p>
    <pre><code class="prism language-shell">https://github.com/archlinuxcn/mirrorlist-repo
</code></pre>
    <h3>
     <a id="yaybasedevel_175">
     </a>
     安装yay和base-devel
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> base-devel yay
</code></pre>
    <p>
     yay支持彩色
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/pacman.conf
<span class="token comment">#将color的注释放开</span>
Color
</code></pre>
    <p>
     更新软件
    </p>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-Syu</span>
</code></pre>
    <p>
     加快aur软件源码编译速度
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/makepkg.conf
<span class="token comment">#设置编译核心数</span>
<span class="token assign-left variable">MAKEFLAGS</span><span class="token operator">=</span><span class="token string">"-j4"</span>
</code></pre>
    <p>
     加快Compressing package速度
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/makepkg.conf
<span class="token comment">#PKGEXT='.pkg.tar.xz'</span>
<span class="token assign-left variable">PKGEXT</span><span class="token operator">=</span><span class="token string">'.pkg.tar'</span>
</code></pre>
    <h2>
     <a id="_211">
     </a>
     安装软件
    </h2>
    <h3>
     <a id="_213">
     </a>
     中文字体
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> adobe-source-han-sans-cn-fonts
</code></pre>
    <p>
     <a href="https://wiki.archlinux.org/index.php/Localization_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29/Simplified_Chinese_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#%E4%BF%AE%E6%AD%A3%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E4%B8%BA%E5%BC%82%E4%BD%93%EF%BC%88%E6%97%A5%E6%96%87%EF%BC%89%E5%AD%97%E5%BD%A2" rel="nofollow">
      修正简体中文显示为异体（日文）字形
     </a>
    </p>
    <p>
     <a href="https://wiki.archlinux.org/index.php/Font_Configuration_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29/Chinese_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#Android_%E6%98%BE%E7%A4%BA%E6%95%88%E6%9E%9C%E7%9A%84%E5%AD%97%E4%BD%93%E5%8F%82%E8%80%83%E9%85%8D%E7%BD%AE" rel="nofollow">
      Android 显示效果的字体参考配置
      <br/>
     </a>
    </p>
    <h3>
     <a id="vim_223">
     </a>
     vim
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> <span class="token function">vim</span>
</code></pre>
    <h3>
     <a id="chrome_229">
     </a>
     chrome
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> google-chrome
</code></pre>
    <h3>
     <a id="_235">
     </a>
     输入法
    </h3>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> fcitx5 fcitx5-chinese-addons fcitx5-configtool fcitx5-qt fcitx5-gtk
</code></pre>
    <p>
     在
     <code>
      ~/.pam_environment
     </code>
     内添加如下语句
    </p>
    <pre><code class="prism language-shell">INPUT_METHOD  <span class="token assign-left variable">DEFAULT</span><span class="token operator">=</span>fcitx
GTK_IM_MODULE <span class="token assign-left variable">DEFAULT</span><span class="token operator">=</span>fcitx
QT_IM_MODULE  <span class="token assign-left variable">DEFAULT</span><span class="token operator">=</span>fcitx5
<span class="token environment constant">XMODIFIERS</span>    <span class="token assign-left variable">DEFAULT</span><span class="token operator">=</span><span class="token punctuation">\</span>@im<span class="token operator">=</span>fcitx
</code></pre>
    <p>
     保存后重新登录才能使用输入法
    </p>
    <pre><code class="prism language-shell"><span class="token comment">#词库</span>
yay <span class="token parameter variable">-S</span> fcitx5-pinyin-zhwiki
<span class="token comment">#皮肤</span>
yay <span class="token parameter variable">-S</span> fcitx5-material-color
</code></pre>
    <h3>
     <a id="proxychains_259">
     </a>
     proxychains
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> proxychains
</code></pre>
    <pre><code class="prism language-shell"><span class="token comment">#在配置文件内自行更改端口号</span>
<span class="token function">sudo</span> <span class="token function">vim</span> /etc/proxychains.conf
</code></pre>
    <pre><code class="prism language-shell"><span class="token comment">#使用方法</span>
proxychains yay <span class="token parameter variable">-S</span> jmeter
</code></pre>
    <h3>
     <a id="git_275">
     </a>
     git
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> <span class="token function">git</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy <span class="token string">"socks5h://127.0.0.1:1080"</span>
<span class="token comment"># ss的本地端口默认1080</span>
</code></pre>
    <h3>
     <a id="zsh__ohmyzsh_283">
     </a>
     zsh &amp; ohmyzsh
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> <span class="token function">zsh</span>
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> oh-my-zsh-git
<span class="token function">cp</span> /usr/share/oh-my-zsh/zshrc ~/.zshrc <span class="token comment">#ohmyzsh配置文件</span>
chsh <span class="token parameter variable">-s</span> /bin/zsh <span class="token comment">#替换默认shell</span>
</code></pre>
    <p>
     autojump &amp; zsh-fast-syntax-highlighting &amp; zsh-autosuggestions
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> autojump
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> zsh-fast-syntax-highlighting
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> zsh-autosuggestions
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/share/zsh/plugins/fast-syntax-highlighting/ /usr/share/oh-my-zsh/custom/plugins/fast-syntax-highlighting
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/share/zsh/plugins/zsh-autosuggestions/ /usr/share/oh-my-zsh/custom/plugins/zsh-autosuggestions
</code></pre>
    <p>
     在~/.zshrc中添加
    </p>
    <pre><code class="prism language-shell"><span class="token assign-left variable">plugins</span><span class="token operator">=</span><span class="token punctuation">(</span>git autojump fast-syntax-highlighting zsh-autosuggestions<span class="token punctuation">)</span>
</code></pre>
    <p>
     重启或source
    </p>
    <pre><code class="prism language-shell"><span class="token builtin class-name">source</span> ~/.zshrc
</code></pre>
    <h3>
     <a id="vscode_313">
     </a>
     vscode
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> visual-studio-code-bin
</code></pre>
    <h3>
     <a id="wps_319">
     </a>
     wps
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> wps-office ttf-wps-fonts
</code></pre>
    <p>
     wps-office安装后会导致chrome内字体发虚,需要在chrome内指定字体（没问题不需要）
    </p>
    <p>
     <img alt="这里写图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4556ad7a97f208966cdac3eaf497222b.png"/>
    </p>
    <h3>
     <a id="uget__aria2_329">
     </a>
     uget &amp; aria2
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> uget
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> aria2
</code></pre>
    <p>
     uget内点击编辑-&gt;设置-&gt;插件, 在插件匹配顺序内选择aria2
    </p>
    <h3>
     <a id="jdk8_338">
     </a>
     jdk8
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> jdk8
<span class="token function">sudo</span> archlinux-java <span class="token builtin class-name">set</span> java-8-jdk
</code></pre>
    <h3>
     <a id="kotlin_345">
     </a>
     kotlin
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> kotlin
</code></pre>
    <h3>
     <a id="jetbrainstool_351">
     </a>
     jetbrains-tool
    </h3>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> jetbrains-toolbox
</code></pre>
    <h3>
     <a id="intellij_idea_357">
     </a>
     <s>
      intellij idea
     </s>
    </h3>
    <pre><code class="prism language-shell"><span class="token comment">#ide</span>
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> intellij-idea-ultimate-edition
<span class="token comment">#改善字体</span>
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> intellij-idea-ultimate-edition-jre
</code></pre>
    <h3>
     <a id="datagrip_366">
     </a>
     <s>
      datagrip
     </s>
    </h3>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> datagrip
</code></pre>
    <h3>
     <a id="mysqlworkbench_371">
     </a>
     mysql-workbench
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> mysql-workbench
</code></pre>
    <h4>
     <a id="postman_377">
     </a>
     postman
    </h4>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> postman-bin
</code></pre>
    <h4>
     <a id="android_studio_383">
     </a>
     <s>
      android studio
     </s>
    </h4>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> android-studio
</code></pre>
    <p>
     adb 软链接
    </p>
    <pre><code class="prism language-shell"><span class="token comment"># 进入sudo默认PATH：</span>
<span class="token builtin class-name">cd</span> /usr/local/bin/
<span class="token comment"># 建立软链接：</span>
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /home/gavinandre/android-sdk-linux/platform-tools/adb 
</code></pre>
    <p>
     android-studio cmake sync 报错
    </p>
    <blockquote>
     <p>
      error while loading shared libraries: libtinfo.so.5: cannot open shared
      <br/>
      object file: No such file or directory
      <br/>
      ninja: build stopped: subcommand failed.
      <br/>
      CMake will not be able to correctly generate this project.
     </p>
    </blockquote>
    <p>
     报错日志中有上面的错误的话，可以使用如下命令解决
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> ncurses5-compat-libs
</code></pre>
    <p>
     android-studio Inotify Watches Limit
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">bash</span> <span class="token parameter variable">-c</span> <span class="token string">'echo "fs.inotify.max_user_watches = 524288" &gt;&gt; /etc/sysctl.d/99-inotify-max-watches.conf'</span>
<span class="token function">sudo</span> <span class="token function">sysctl</span> <span class="token parameter variable">--system</span>
</code></pre>
    <h3>
     <a id="_418">
     </a>
     坚果云
    </h3>
    <pre><code class="prism language-shell"><span class="token comment">#坚果云主程序</span>
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> nutstore
<span class="token comment">#坚果云文件夹ui</span>
<span class="token function">sudo</span> yay <span class="token parameter variable">-S</span> nautilus-nutstore
</code></pre>
    <h3>
     <a id="_427">
     </a>
     微信
    </h3>
    <p>
     <s>
      星火商店版本
     </s>
    </p>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> com.qq.weixin.spark
</code></pre>
    <p>
     <s>
      字体显示方框就将
      <code>
       $HOME/.deepinwine/Spark-WeChat/user.reg
      </code>
      中的Noto Sans CJK SC Regular全部替换成Noto Sans CJK SC
     </s>
    </p>
    <p>
     deepin wechat版本
    </p>
    <p>
     github地址
    </p>
    <blockquote>
     <p>
      https://github.com/countstarlight/deepin-wine-wechat-arch
     </p>
    </blockquote>
    <p>
     安装微信
    </p>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> deepin-wine-wechat
</code></pre>
    <p>
     安装插件在右上角显示图标(gnome)
    </p>
    <pre><code class="prism language-shell">https://extensions.gnome.org/extension/1674/topiconsfix/
</code></pre>
    <p>
     设置微信全局快捷键
    </p>
    <pre><code class="prism language-shell"><span class="token comment">#在快捷键设置内添加</span>

<span class="token comment">#隐藏/显示</span>
<span class="token comment">#Command</span>
/opt/deepinwine/tools/sendkeys.sh w wechat <span class="token number">4</span>
<span class="token comment">#Shortcut</span>
Ctrl+Alt+W

<span class="token comment">#截图</span>
<span class="token comment">#Command</span>
/opt/deepinwine/tools/sendkeys.sh a wechat <span class="token number">3</span>
<span class="token comment">#Shortcut</span>
Alt+A
</code></pre>
    <p>
     解决关机或重启时会卡住90秒
    </p>
    <p>
     a stop job is running for user manager for uid 1000
    </p>
    <p>
     关机时卡在上面的步骤则更改user.conf配置
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> gedit /etc/systemd/user.conf
<span class="token comment">#找到如下参数</span>
<span class="token comment">#DefaultTimeoutStopSec=90s</span>
<span class="token comment">#去掉注释并更改为5秒超时</span>
<span class="token assign-left variable">DefaultTimeoutStopSec</span><span class="token operator">=</span>5s
</code></pre>
    <p>
     重启生效
    </p>
    <h3>
     <a id="_488">
     </a>
     网易云音乐
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> netease-cloud-music
</code></pre>
    <h3>
     <a id="_494">
     </a>
     有道词典
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> youdao-dict
</code></pre>
    <h3>
     <a id="alacarte_500">
     </a>
     alacarte
    </h3>
    <p>
     桌面图标管理软件
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> alacarte
</code></pre>
    <h3>
     <a id="virtualbox_508">
     </a>
     <s>
      virtualbox
     </s>
    </h3>
    <p>
     virtualbox太卡不推荐使用（Virt-manager流畅度好很多）
    </p>
    <pre><code class="prism language-shell"><span class="token comment">#查看内核版本</span>
<span class="token function">uname</span> <span class="token parameter variable">-r</span>
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> virtualbox
</code></pre>
    <p>
     选择与当前内核匹配的版本, 比如uname 输出4.14.40-1-MANJARO则安装linux414-virtualbox-host-modules
    </p>
    <pre><code class="prism language-shell"><span class="token comment">#安装扩展包你也可以去官网下载扩展包</span>
<span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> virtualbox-ext-oracle 
<span class="token comment">#添加当前用户到vboxusers， $USER替换用户名</span>
<span class="token function">sudo</span> gpasswd <span class="token parameter variable">-a</span> <span class="token environment constant">$USER</span> vboxusers 
<span class="token comment">#此操作不执行USB外设不能使用</span>
</code></pre>
    <p>
     重新启动系统或执行sudo modprobe vboxdrv
    </p>
    <h3>
     <a id="Virtmanager_530">
     </a>
     Virt-manager
    </h3>
    <p>
     安装
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> virt-manager qemu vde2 ebtables dnsmasq bridge-utils openbsd-netcat
</code></pre>
    <p>
     打开和自启服务
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> libvirtd.service
<span class="token function">sudo</span> systemctl start libvirtd.service
</code></pre>
    <p>
     安装教程见
    </p>
    <blockquote>
     <p>
      https://www.youtube.com/watch?v=DiUG_hlLk3c&amp;feature=youtu.be
     </p>
    </blockquote>
    <p>
     如果安装win10虚拟机，推荐用Windows 10 LTSC 2019，只配置双核2G内存也能流程使用
    </p>
    <p>
     磁盘和网络都使用VirtIO驱动
    </p>
    <h3>
     <a id="bleachbit_553">
     </a>
     bleachbit
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> bleachbit
</code></pre>
    <h3>
     <a id="linuxwifihotspot_559">
     </a>
     linux-wifi-hotspot
    </h3>
    <p>
     类似win10的共享WLAN模式的WIFI热点（使用热点共享wifi连接的网络）
    </p>
    <p>
     安装
    </p>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> linux-wifi-hotspot
</code></pre>
    <p>
     使用（目前GUI程序有bug，开启后无法找到热点，只能使用命令打开）
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> create_ap --freq-band <span class="token number">2.4</span> wlp3s0 wlp3s0 MyAccessPoint MyPassPhrase
</code></pre>
    <p>
     更多用法
    </p>
    <blockquote>
     <p>
      https://github.com/lakinduakash/linux-wifi-hotspot/blob/master/src/scripts/README.md
     </p>
    </blockquote>
    <h2>
     <a id="_578">
     </a>
     系统配置
    </h2>
    <h3>
     <a id="_580">
     </a>
     双系统时差
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> timedatectl set-local-rtc <span class="token number">1</span>
</code></pre>
    <h3>
     <a id="_586">
     </a>
     快捷键添加
    </h3>
    <p>
     在快捷键设置内添加
    </p>
    <pre><code class="prism language-shell"><span class="token comment">#Command Shortcut</span>
<span class="token builtin class-name">logout</span> ctrl+alt+insert
gnome-terminal ctrl+alt+T
gnome-system-monitor ctrl+alt+delete
</code></pre>
    <h3>
     <a id="CapsLock_597">
     </a>
     CapsLock键切换输入法
    </h3>
    <p>
     设定CapsLock键为切换输入法，Shfit + CapsLock为切换大小写
    </p>
    <p>
     修改配置文件
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> /usr/share/X11/xkb/symbols/capslock
</code></pre>
    <p>
     找到如下配置
    </p>
    <pre><code class="prism language-bash">xkb_symbols <span class="token string">"escape_shifted_capslock"</span> <span class="token punctuation">{<!-- --></span>
    key <span class="token operator">&lt;</span>CAPS<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">[</span>Group1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"TWO_LEVEL"</span>,
        symbols<span class="token punctuation">[</span>Group1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> Escape, Caps_Lock <span class="token punctuation">]</span>,
        actions<span class="token punctuation">[</span>Group1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> NoAction<span class="token punctuation">(</span><span class="token punctuation">)</span>, LockMods<span class="token punctuation">(</span>modifiers <span class="token operator">=</span> Lock<span class="token punctuation">)</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     将Escape改成你想改的按键，比如Fcitx5中默认的切换输入法键Hangul
    </p>
    <pre><code class="prism language-bash">symbols<span class="token punctuation">[</span>Group1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> Hangul, Caps_Lock <span class="token punctuation">]</span>,
</code></pre>
    <p>
     打开Gnome Tweaks，按如下选择
    </p>
    <pre><code class="prism language-bash">Keyboard <span class="token operator">&amp;</span> Mouse -<span class="token operator">&gt;</span> Additional Layout Options -<span class="token operator">&gt;</span> Cpas Lock behavior -<span class="token operator">&gt;</span> Make Caps Lock an additional Esc, but Shift + Caps Lock is the regular Caps Lock
</code></pre>
    <h3>
     <a id="Home_631">
     </a>
     修改Home下的目录为英文
    </h3>
    <pre><code class="prism language-shell"><span class="token function">vim</span> .config/user-dirs.dirs
</code></pre>
    <p>
     更改为如下
    </p>
    <pre><code class="prism language-shell"><span class="token assign-left variable">XDG_DESKTOP_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Desktop"</span>
<span class="token assign-left variable">XDG_DOWNLOAD_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Downloads"</span>
<span class="token assign-left variable">XDG_TEMPLATES_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Templates"</span>
<span class="token assign-left variable">XDG_PUBLICSHARE_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Public"</span>
<span class="token assign-left variable">XDG_DOCUMENTS_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Documents"</span>
<span class="token assign-left variable">XDG_MUSIC_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Music"</span>
<span class="token assign-left variable">XDG_PICTURES_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Pictures"</span>
<span class="token assign-left variable">XDG_VIDEOS_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Videos"</span>
</code></pre>
    <p>
     手动将目录下的文件夹名也改为英文文件夹名后重启生效
    </p>
    <h3>
     <a id="_652">
     </a>
     主题
    </h3>
    <blockquote>
     <p>
      https://github.com/vinceliuice/vimix-gtk-themes
     </p>
    </blockquote>
    <p>
     或者
    </p>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> vimix-gtk-themes-git
</code></pre>
    <h3>
     <a id="grub_662">
     </a>
     grub美化
    </h3>
    <blockquote>
     <p>
      https://github.com/vinceliuice/grub2-themes
     </p>
    </blockquote>
    <p>
     或者
    </p>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> grub-theme-tela-git
<span class="token comment">#打开grub配置文件</span>
<span class="token function">sudo</span> gedit /etc/default/grub
<span class="token comment">#更改GRUB_THEME路径</span>
<span class="token assign-left variable">GRUB_THEME</span><span class="token operator">=</span><span class="token string">"/usr/share/grub/themes/Tela/theme.txt"</span>
<span class="token comment">#刷新grub</span>
<span class="token function">sudo</span> <span class="token function">update-grub</span>
</code></pre>
    <h3>
     <a id="gnome_678">
     </a>
     gnome登录界面
    </h3>
    <p>
     如果不喜欢manjaro自带的登录背景的话可以还原成gnome默认登录界面背景
    </p>
    <pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /usr/share/gnome-shell
<span class="token function">sudo</span> <span class="token function">mv</span> gnome-shell-theme.gresource gnome-shell-theme.gresource.old.1
<span class="token function">sudo</span> <span class="token function">mv</span> gnome-shell-theme.gresource.old gnome-shell-theme.gresource
</code></pre>
    <p>
     关闭登录界面的night light功能
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> gdm dbus-launch --exit-with-session gsettings <span class="token builtin class-name">set</span> org.gnome.settings-daemon.plugins.color night-light-enabled <span class="token boolean">false</span>
</code></pre>
    <h3>
     <a id="gnome_694">
     </a>
     gnome透明终端
    </h3>
    <pre><code class="prism language-shell">yay <span class="token parameter variable">-S</span> gnome-terminal-transparency
</code></pre>
    <h3>
     <a id="gnome_700">
     </a>
     gnome扩展
    </h3>
    <p>
     <a href="https://extensions.gnome.org/extension/442/drop-down-terminal/" rel="nofollow">
      Drop Down Terminal
     </a>
     <br/>
     全局终端
    </p>
    <p>
     <a href="https://extensions.gnome.org/extension/1031/topicons/" rel="nofollow">
      TopIcons Plus
     </a>
     <br/>
     状态栏显示应用图标，与自带appindicator support配合使用
    </p>
    <p>
     该插件装上后会出现两个输入法图标，解决方法：
    </p>
    <p>
     打开fcitx configuration-&gt;Addon-&gt;Classic-&gt;Use System Tray Icon不选中，重新登录后生效
    </p>
    <p>
     <img alt="这里写图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/64d2dad94e5ef67b6b10ebb80424132d.png"/>
    </p>
    <h2>
     <a id="pacman_714">
     </a>
     pacman用法
    </h2>
    <h3>
     <a id="_716">
     </a>
     忽略升级包
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/pacman.conf
</code></pre>
    <pre><code class="prism language-shell"><span class="token comment">#更改要忽略升级的包</span>
IgnoreGroup <span class="token operator">=</span> package
</code></pre>
    <p>
     如果只打算忽略一次升级，可以使用 --ignore 选项。
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-Syyu</span> <span class="token parameter variable">--ignore</span> package
</code></pre>
    <h3>
     <a id="_733">
     </a>
     覆盖安装
    </h3>
    <p>
     如果碰到如下错误:
    </p>
    <blockquote>
     <p>
      error: could not prepare transaction
      <br/>
      error: failed to commit transaction (conflicting files)
      <br/>
      package: /path/to/file exists in filesystem
      <br/>
      Errors occurred, no packages were upgraded.
     </p>
    </blockquote>
    <p>
     可以使用–overwrite glob命令来强制覆盖安装
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> pacman <span class="token parameter variable">-S</span> <span class="token parameter variable">--overwrite</span> <span class="token string">'*'</span>
</code></pre>
    <h3>
     <a id="pacman_pkg_748">
     </a>
     清理pacman pkg包缓存
    </h3>
    <p>
     删除已安装和已卸载软件包的所有缓存版本,但默认保留最近的3个版本
    </p>
    <pre><code class="prism language-shell">paccache <span class="token parameter variable">-r</span>
</code></pre>
    <p>
     删除所有但保留指定的版本数
    </p>
    <pre><code class="prism language-shell"><span class="token comment">#保留最近的一个版本</span>
paccache <span class="token parameter variable">-rk1</span>
</code></pre>
    <p>
     删除所有已卸载软件包的缓存版本
    </p>
    <pre><code class="prism language-shell">paccache <span class="token parameter variable">-ruk0</span>
</code></pre>
    <p>
     删除pacman安装包目录下大于500M的文件
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">find</span> /var/cache/pacman/pkg/ <span class="token parameter variable">-size</span> +500M <span class="token parameter variable">-exec</span> <span class="token function">rm</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="_775">
     </a>
     清理日志
    </h2>
    <h3>
     <a id="_776">
     </a>
     只保留一周的日志
    </h3>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> journalctl --vacuum-time<span class="token operator">=</span>1w
</code></pre>
    <h2>
     <a id="yay_783">
     </a>
     yay用法
    </h2>
    <p>
     通过仓库和aur查询和安装软件
    </p>
    <pre><code class="prism language-bash">yay foo
</code></pre>
    <p>
     更新包列表并更新所有从仓库和aur安装的软件
    </p>
    <pre><code class="prism language-bash">yay <span class="token parameter variable">-Syu</span>
</code></pre>
    <p>
     更新所有从aur安装的软件
    </p>
    <pre><code class="prism language-bash">yay <span class="token parameter variable">-Sua</span>
</code></pre>
    <p>
     通过仓库或aur安装软件
    </p>
    <pre><code class="prism language-bash">yay <span class="token parameter variable">-S</span> foo
</code></pre>
    <p>
     通过仓库或aur查询软件
    </p>
    <pre><code class="prism language-bash">yay <span class="token parameter variable">-Ss</span> foo
</code></pre>
    <p>
     通过仓库或aur获取软件信息
    </p>
    <pre><code class="prism language-bash">yay <span class="token parameter variable">-Si</span> foo
</code></pre>
    <p>
     编辑PKGBUILDS，关闭查看PKGBUILDS不同点
    </p>
    <pre><code class="prism language-bash">yay <span class="token parameter variable">--editmenu</span> <span class="token parameter variable">--nodiffmenu</span> <span class="token parameter variable">--save</span>
</code></pre>
    <p>
     查询软件的安装路径
    </p>
    <pre><code class="prism language-bash">yay <span class="token parameter variable">-Ql</span> foo
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
</div>


