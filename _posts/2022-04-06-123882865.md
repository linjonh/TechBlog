---
layout: post
title: "微信小程序-云开发数据库基础操作自用"
date: 2022-04-06 08:57:02 +0800
description: "数据库增删查改数据库权限管理这相当于管理员权限，可以改到所有人可读。查询get（）首先在微信小程序上"
keywords: "微信小程序本地数据库操作"
categories: ['微信小程序']
tags: ['微信小程序']
artid: "123882865"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=123882865
    alt: "微信小程序-云开发数据库基础操作自用"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序-云开发数据库基础操作（自用）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#_3" rel="nofollow">
        数据库增删查改
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_4" rel="nofollow">
          数据库权限管理
         </a>
        </li>
        <li>
         <a href="#get_7" rel="nofollow">
          查询get（）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_24" rel="nofollow">
            传统写法
           </a>
          </li>
          <li>
           <a href="#es6_64" rel="nofollow">
            es6的简洁写法
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_where_95" rel="nofollow">
          条件查询 where()
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_96" rel="nofollow">
            查询数据
           </a>
          </li>
          <li>
           <a href="#_120" rel="nofollow">
            查询单条信息
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#add_170" rel="nofollow">
          添加数据add()
         </a>
        </li>
        <li>
         <a href="#update_216" rel="nofollow">
          修改数据update()
         </a>
        </li>
        <li>
         <a href="#remove_245" rel="nofollow">
          删除数据remove()
         </a>
        </li>
        <li>
         <a href="#_271" rel="nofollow">
          增删查改综合案例
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_343" rel="nofollow">
            列表跳详情操作
           </a>
          </li>
          <li>
           <a href="#_418" rel="nofollow">
            获取用户输入的商品名和商品价格
           </a>
          </li>
          <li>
           <a href="#_549" rel="nofollow">
            云开发更新商品价格
           </a>
          </li>
          <li>
           <a href="#_723" rel="nofollow">
            云开发删除商品
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <br/>
    本篇内容为云开发教程视频学习笔记（https://www.bilibili.com/video/BV1x54y1s7pk?spm_id_from=333.788.b_636f6d6d656e74.8）
    <p>
    </p>
    <h2>
     <a id="_3">
     </a>
     数据库增删查改
    </h2>
    <h3>
     <a id="_4">
     </a>
     数据库权限管理
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/20f7d89e930303be9b011affd3703d75.png">
      <br/>
      这相当于管理员权限，可以改到所有人可读。
     </img>
    </p>
    <h3>
     <a id="get_7">
     </a>
     查询get（）
    </h3>
    <p>
     首先在微信小程序上方工具栏点击云开发-数据库-添加集合-增添记录
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5faa44f6362346ff67e0d5348775d3ab.png">
      <br/>
      其次，在app.js中写入以下代码
     </img>
    </p>
    <pre><code class="prism language-javascript"><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">//小程序一启动就会执行</span>
  <span class="token function">onLaunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小程序开始启动啦'</span><span class="token punctuation">)</span>
   wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
     <span class="token literal-property property">env</span><span class="token operator">:</span><span class="token string">'cloud1-0gk6wlxu714dbe3e'</span><span class="token comment">//云开发环境id</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     然后在需要查询数据库的js页面加入以下代码
    </p>
    <h4>
     <a id="_24">
     </a>
     传统写法
    </h4>
    <p>
     在wxml里面展示
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>商品名<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">价格</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     在js里面展示
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">list</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//固定写法</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onload里面的this'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">//指page</span>
        <span class="token keyword">let</span> that<span class="token operator">=</span><span class="token keyword">this</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token punctuation">{<!-- --></span><span class="token comment">//查询操作</span>
            <span class="token comment">//请求成功</span>
            <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sucess里面的that'</span><span class="token punctuation">,</span>that<span class="token punctuation">)</span><span class="token comment">//指page</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sucess里面的this'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">//指sucess</span>
                that<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        		  <span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
        		<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//请求失败</span>
            <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="es6_64">
     </a>
     es6的简洁写法
    </h4>
    <p>
     在wxml里面展示
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>商品名<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">价格</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     在js里面增加数据显示
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">list</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//固定写法</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        	<span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
        	<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第二种方法请求失败'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="_where_95">
     </a>
     条件查询 where()
    </h3>
    <h4>
     <a id="_96">
     </a>
     查询数据
    </h4>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">list</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//固定写法</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//条件查询</span>
        	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'999胃泰'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        	<span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
        	<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第二种方法请求失败'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_120">
     </a>
     查询单条信息
    </h4>
    <p>
     wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>商品名<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">价格</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>doc查询的单条数据商品名<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">价格</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">list</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">good</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//固定写法</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//条件查询</span>
        	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'999胃泰'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        	<span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
        	<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第二种方法请求失败'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//使用doc查询单条数据</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token comment">//写入id值</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span> 
        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'查询单条数据成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
        	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        		<span class="token literal-property property">good</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
        		<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'查询单条数据失败'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="add_170">
     </a>
     添加数据add()
    </h3>
    <p>
     通过add实现对数据的添加
     <br/>
     添加add页面
     <br/>
     add.js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//添加数据</span>
    	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'西瓜霜'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token string">'20'</span>
    	<span class="token punctuation">}</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//添加数据</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//添加数据</span>
    	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'葡萄糖'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token string">'16'</span>
    	<span class="token punctuation">}</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     点击按钮添加数据
     <br/>
     add.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>点击添加数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre>
    <h3>
     <a id="update_216">
     </a>
     修改数据update()
    </h3>
    <p>
     add.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>点击添加数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"update"</span><span class="token operator">&gt;</span>点击修改数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre>
    <p>
     add.js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    
	<span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">'d4107ab162469f7d0394a0aa32fb4d8b'</span><span class="token punctuation">)</span><span class="token comment">//要修改数据的id</span>
    	<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//修改数据</span>
    	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">250</span>
    	<span class="token punctuation">}</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">'修改失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="remove_245">
     </a>
     删除数据remove()
    </h3>
    <p>
     add.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>点击添加数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"update"</span><span class="token operator">&gt;</span>点击修改数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"remove"</span><span class="token operator">&gt;</span>点击删除数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre>
    <p>
     add.js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
   <span class="token comment">//删除单条数据</span>
	<span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">'d4107ab162469f7d0394a0aa32fb4d8b'</span><span class="token punctuation">)</span><span class="token comment">//要修改数据的id</span>
    	<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">'修改失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="_271">
     </a>
     增删查改综合案例
    </h3>
    <p>
     1，能查看商品列表
     <br/>
     2，能动态添加商品
     <br/>
     3，能进入商品详情页
     <br/>
     4，能删除某个商品
     <br/>
     5，能修改某个商品价格
    </p>
    <p>
     demo
     <br/>
     商品列表页面
     <br/>
     demo.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
    商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>价格<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     demo.js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     商品详情页
     <br/>
     js
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// pages/demo1/demo1.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//查询单条数据</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'good'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token comment">//id名</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">good</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>utem<span class="token punctuation">}</span><span class="token punctuation">}</span>，价格<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="_343">
     </a>
     列表跳详情操作
    </h4>
    <p>
     所用的知识点：
     <br/>
     要在wxml里面定义data-要绑定的数据
     <br/>
     要在js里拿到绑定的数据
     <br/>
     demo.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">"goDetail"</span> data<span class="token operator">-</span>id<span class="token operator">=</span><span class="token string">"{<!-- -->{item._id}}"</span><span class="token operator">&gt;</span><span class="token comment">//点击跳转时携带数据</span>
    商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>价格<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     demo.js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//跳转到商品详情页</span>
    <span class="token function">goDetail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击了跳转商品详情'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    	wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'/pages/demo1/demo1?id='</span><span class="token operator">+</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     商品详情页
     <br/>
     js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//约定俗称的参数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'列表携带的值'</span><span class="token punctuation">,</span>options<span class="token punctuation">)</span>
        <span class="token keyword">var</span> id<span class="token operator">=</span>options<span class="token punctuation">.</span>id
        <span class="token comment">//查询单条数据</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token comment">//id名</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">good</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>，价格<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="_418">
     </a>
     获取用户输入的商品名和商品价格
    </h4>
    <p>
     demo.wxml
    </p>
    <pre><code class="prism language-javascript">输入商品名
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getName"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
输入商品价格
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getPrice"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"addGood"</span><span class="token operator">&gt;</span>添加商品<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">"goDetail"</span> data<span class="token operator">-</span>id<span class="token operator">=</span><span class="token string">"{<!-- -->{item._id}}"</span><span class="token operator">&gt;</span><span class="token comment">//点击跳转时携带数据</span>
    商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>价格<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     demo.wxss
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">.</span>input<span class="token punctuation">{<!-- --></span>
<span class="token literal-property property">border</span><span class="token operator">:</span>gray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     demo.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> name<span class="token operator">=</span><span class="token string">''</span>
<span class="token keyword">let</span> price<span class="token operator">=</span><span class="token string">''</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//跳转到商品详情页</span>
    <span class="token function">goDetail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击了跳转商品详情'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    	wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'/pages/demo1/demo1?id='</span><span class="token operator">+</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//获取用户输入名</span>
    	name<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//获取用户输入价格</span>
    	price<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">addGood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品名'</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品价格'</span><span class="token punctuation">,</span>price<span class="token punctuation">)</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品名为空了'</span><span class="token punctuation">)</span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'商品名为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>price<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价格为空了'</span><span class="token punctuation">)</span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'价格为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'可以操作啦'</span><span class="token punctuation">)</span>
    	wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    			<span class="token literal-property property">name</span><span class="token operator">:</span>name<span class="token punctuation">,</span>
				<span class="token literal-property property">price</span><span class="token operator">:</span>price
    		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
		 <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     demo1.js
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//约定俗称的参数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'列表携带的值'</span><span class="token punctuation">,</span>options<span class="token punctuation">)</span>
        <span class="token keyword">var</span> id<span class="token operator">=</span>options<span class="token punctuation">.</span>id
        <span class="token comment">//查询单条数据</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token comment">//id名</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">good</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     demo1.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>，价格<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="_549">
     </a>
     云开发更新商品价格
    </h4>
    <p>
     demo.wxml
    </p>
    <pre><code class="prism language-javascript">输入商品名
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getName"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
输入商品价格
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getPrice"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"addGood"</span><span class="token operator">&gt;</span>添加商品<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">"goDetail"</span> data<span class="token operator">-</span>id<span class="token operator">=</span><span class="token string">"{<!-- -->{item._id}}"</span><span class="token operator">&gt;</span><span class="token comment">//点击跳转时携带数据</span>
    商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>价格<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     demo.wxss
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">.</span>input<span class="token punctuation">{<!-- --></span>
<span class="token literal-property property">border</span><span class="token operator">:</span>gray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     demo.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> name<span class="token operator">=</span><span class="token string">''</span>
<span class="token keyword">let</span> price<span class="token operator">=</span><span class="token string">''</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//跳转到商品详情页</span>
    <span class="token function">goDetail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击了跳转商品详情'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    	wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'/pages/demo1/demo1?id='</span><span class="token operator">+</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//获取用户输入名</span>
    	name<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//获取用户输入价格</span>
    	price<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">addGood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品名'</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品价格'</span><span class="token punctuation">,</span>price<span class="token punctuation">)</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品名为空了'</span><span class="token punctuation">)</span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'商品名为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>price<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价格为空了'</span><span class="token punctuation">)</span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'价格为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'可以操作啦'</span><span class="token punctuation">)</span>
    	wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    			<span class="token literal-property property">name</span><span class="token operator">:</span>name<span class="token punctuation">,</span>
				<span class="token literal-property property">price</span><span class="token operator">:</span>price
    		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
		 <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     demo1.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> price<span class="token operator">=</span><span class="token string">''</span>
<span class="token keyword">var</span> id<span class="token operator">=</span><span class="token string">''</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//约定俗称的参数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'列表携带的值'</span><span class="token punctuation">,</span>options<span class="token punctuation">)</span>
        id<span class="token operator">=</span>options<span class="token punctuation">.</span>id
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//更新商品数据</span>
    <span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//查询单条数据</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token comment">//id名</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">good</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//获取用户输入的新价格</span>
    <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	price<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//修改商品价格</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'新的商品价格'</span><span class="token punctuation">,</span>price<span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>price<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'价格为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'可以操作啦'</span><span class="token punctuation">)</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">price</span><span class="token operator">:</span>price
    		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
		 <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     demo1.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>pages<span class="token operator">/</span>demo1<span class="token operator">/</span>demo1<span class="token punctuation">.</span>wxml<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>，价格<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>

更新商品价格
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getPrice"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button  type<span class="token operator">=</span><span class="token string">"primary"</span> bindtap<span class="token operator">=</span><span class="token string">"update"</span><span class="token operator">&gt;</span>更新商品<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="_723">
     </a>
     云开发删除商品
    </h4>
    <p>
     用户删除数据是一个危险操作，所以操作之前最好给用户一个友好提示
     <br/>
     demo.wxml
    </p>
    <pre><code class="prism language-javascript">输入商品名
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getName"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
输入商品价格
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getPrice"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"addGood"</span><span class="token operator">&gt;</span>添加商品<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"{<!-- -->{list}}"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">"goDetail"</span> data<span class="token operator">-</span>id<span class="token operator">=</span><span class="token string">"{<!-- -->{item._id}}"</span><span class="token operator">&gt;</span><span class="token comment">//点击跳转时携带数据</span>
    商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>价格<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <p>
     demo.wxss
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">.</span>input<span class="token punctuation">{<!-- --></span>
<span class="token literal-property property">border</span><span class="token operator">:</span>gray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     demo.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> name<span class="token operator">=</span><span class="token string">''</span>
<span class="token keyword">let</span> price<span class="token operator">=</span><span class="token string">''</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">list</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品列表请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//跳转到商品详情页</span>
    <span class="token function">goDetail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击了跳转商品详情'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    	wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'/pages/demo1/demo1?id='</span><span class="token operator">+</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//获取用户输入名</span>
    	name<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//获取用户输入价格</span>
    	price<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">addGood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品名'</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品价格'</span><span class="token punctuation">,</span>price<span class="token punctuation">)</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品名为空了'</span><span class="token punctuation">)</span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'商品名为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>price<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价格为空了'</span><span class="token punctuation">)</span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'价格为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'可以操作啦'</span><span class="token punctuation">)</span>
    	wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    			<span class="token literal-property property">name</span><span class="token operator">:</span>name<span class="token punctuation">,</span>
				<span class="token literal-property property">price</span><span class="token operator">:</span>price
    		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
		 <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     demo1.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> price<span class="token operator">=</span><span class="token string">''</span>
<span class="token keyword">var</span> id<span class="token operator">=</span><span class="token string">''</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//约定俗称的参数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'列表携带的值'</span><span class="token punctuation">,</span>options<span class="token punctuation">)</span>
        id<span class="token operator">=</span>options<span class="token punctuation">.</span>id
        <span class="token comment">//查询单条数据</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token comment">//id名</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">good</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'商品详情页请求失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//获取用户输入的新价格</span>
    <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	price<span class="token operator">=</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//修改商品价格</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'新的商品价格'</span><span class="token punctuation">,</span>price<span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>price<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    		wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span><span class="token punctuation">,</span>
    		<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'价格为空了'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'可以操作啦'</span><span class="token punctuation">)</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">price</span><span class="token operator">:</span>price
    		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 	<span class="token comment">//this.getList()</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
		 <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
		 <span class="token punctuation">}</span><span class="token punctuation">)</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">shanchu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点击了删除'</span><span class="token punctuation">)</span>
        <span class="token comment">//弹窗提示</span>
        wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"是否确定删除"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">'您再仔细想一想，是否真的要删除，删除后就找不回来啦'</span><span class="token punctuation">,</span>
        <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小石头'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
        	<span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token operator">==</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//用户点击了确定</span>
        		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户点击了确定'</span><span class="token punctuation">)</span>
        		<span class="token comment">//删除操作</span>
		        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'goods'</span><span class="token punctuation">)</span>
		        <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
		    	<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
				 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
				 	wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
				 		<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'/pages/demo/demo'</span><span class="token punctuation">,</span>
				 	<span class="token punctuation">}</span><span class="token punctuation">)</span>
				 <span class="token punctuation">}</span><span class="token punctuation">)</span>
				 <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
				 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除失败'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
				 <span class="token punctuation">}</span><span class="token punctuation">)</span>
        		
        	<span class="token punctuation">}</span>
        	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>cancel<span class="token operator">==</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//用户点击了取消</span>
        		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户点击了取消'</span><span class="token punctuation">)</span>
        	<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     demo1.wxml
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>pages<span class="token operator">/</span>demo1<span class="token operator">/</span>demo1<span class="token punctuation">.</span>wxml<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>商品名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>，价格<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>good<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>

更新商品价格
<span class="token operator">&lt;</span>input bindinput<span class="token operator">=</span><span class="token string">"getPrice"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button  type<span class="token operator">=</span><span class="token string">"primary"</span> bindtap<span class="token operator">=</span><span class="token string">"update"</span><span class="token operator">&gt;</span>更新商品<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button  bindtap<span class="token operator">=</span><span class="token string">"shanchu"</span><span class="token operator">&gt;</span>删除当前商品<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343534343430362f:61727469636c652f64657461696c732f313233383832383635" class_="artid" style="display:none">
 </p>
</div>


