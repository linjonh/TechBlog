---
layout: post
title: JavaJava后端程序员开发经常使用的方法函数持续更新
date: 2024-07-15 10:42:35 +0800
categories: [SpringBoot]
tags: [数据库,后端,java]
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=139032009
    alt: JavaJava后端程序员开发经常使用的方法函数持续更新
artid: 139032009
render_with_liquid: false
---
<p class="artid" style="display:none">$url</p>
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     [Java]Java后端程序员开发经常使用的方法函数(持续更新)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        简述
       </a>
      </li>
      <li>
       <a href="#MySQL_3" rel="nofollow">
        数据库（MySQL）
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_5" rel="nofollow">
          查询所有字段
         </a>
        </li>
        <li>
         <a href="#idnamecode_17" rel="nofollow">
          查询所有字段并逗号隔开（id,name.code）
         </a>
        </li>
        <li>
         <a href="#_29" rel="nofollow">
          增加或者减少指定的天数
         </a>
        </li>
        <li>
         <a href="#_37" rel="nofollow">
          查询指定年份的数据
         </a>
        </li>
        <li>
         <a href="#_43" rel="nofollow">
          数据库表新增信息
         </a>
        </li>
        <li>
         <a href="#_EXISTS__NOT_EXISTS__IN__NOT_IN_84" rel="nofollow">
          用 EXISTS 或 NOT EXISTS 代替 IN 或 NOT IN
         </a>
        </li>
        <li>
         <a href="#7_94" rel="nofollow">
          7位设备编码补零生成
         </a>
        </li>
        <li>
         <a href="#id_103" rel="nofollow">
          查询相同id下，最新的一条数据
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#Spring_Boot_131" rel="nofollow">
        Spring Boot
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_133" rel="nofollow">
          常用注解
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_135" rel="nofollow">
            数据库事务注解
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_141" rel="nofollow">
          常用实体补充
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#long_158" rel="nofollow">
            long自动转字符串
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_166" rel="nofollow">
          枚举类
         </a>
        </li>
        <li>
         <a href="#_232" rel="nofollow">
          常用函数
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#listmap_248" rel="nofollow">
            **流处理-list转map**
           </a>
          </li>
          <li>
           <a href="#listmap_264" rel="nofollow">
            **list转map**
           </a>
          </li>
          <li>
           <a href="#list_282" rel="nofollow">
            list排序
           </a>
          </li>
          <li>
           <a href="#_312" rel="nofollow">
            时间类型
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_314" rel="nofollow">
              获取当天的开始时间
             </a>
            </li>
            <li>
             <a href="#_320" rel="nofollow">
              获取当天的结束时间
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#_326" rel="nofollow">
            数据校验函数
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_328" rel="nofollow">
              验证手机号码与座机号码
             </a>
            </li>
            <li>
             <a href="#_361" rel="nofollow">
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_363" rel="nofollow">
          实体通用字段
         </a>
        </li>
        <li>
         <a href="#Optional_370" rel="nofollow">
          Optional判空
         </a>
        </li>
        <li>
         <a href="#_384" rel="nofollow">
          测试类
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_386" rel="nofollow">
            普通测试类
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_404" rel="nofollow">
          实体注解
         </a>
        </li>
        <li>
         <a href="#_406" rel="nofollow">
          自定义字段，不作为数据库表字段使用
         </a>
        </li>
        <li>
         <a href="#_412" rel="nofollow">
          雪花算法主键
         </a>
        </li>
        <li>
         <a href="#_419" rel="nofollow">
          时间格式转换实体字段
         </a>
        </li>
        <li>
         <a href="#xml_429" rel="nofollow">
          xml文件特殊符号替换符
         </a>
        </li>
        <li>
         <a href="#_439" rel="nofollow">
          数据提交验证
         </a>
        </li>
        <li>
         <a href="#_474" rel="nofollow">
          递归处理树形结构
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_476" rel="nofollow">
            树形实体
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#MyBatisPlus_523" rel="nofollow">
          MyBatis-Plus
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_525" rel="nofollow">
            查询条件
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_527" rel="nofollow">
              或
             </a>
            </li>
            <li>
             <a href="#_536" rel="nofollow">
              区间
             </a>
            </li>
            <li>
             <a href="#_540" rel="nofollow">
              大于小于
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#xml_553" rel="nofollow">
            xml自定义查询
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#inforeach_555" rel="nofollow">
              in(foreach)
             </a>
            </li>
            <li>
             <a href="#if_573" rel="nofollow">
              if
             </a>
            </li>
            <li>
             <a href="#where_591" rel="nofollow">
              where
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#_605" rel="nofollow">
            自定义查询的分页查询
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#Swagger_625" rel="nofollow">
          Swagger
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_627" rel="nofollow">
            常用注释
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#Hutool__637" rel="nofollow">
          Hutool 工具
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_659" rel="nofollow">
        历史问题
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#Mybatisplus__661" rel="nofollow">
          Mybatis-plus 逻辑删除字段无效
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_663" rel="nofollow">
            问题描述:
           </a>
          </li>
          <li>
           <a href="#_694" rel="nofollow">
            解决方法:
           </a>
          </li>
          <li>
           <a href="#_761" rel="nofollow">
            错误案例
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#Invalid_bound_statement_not_found_777" rel="nofollow">
          Invalid bound statement (not found)
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_779" rel="nofollow">
            问题描述
           </a>
          </li>
          <li>
           <a href="#_783" rel="nofollow">
            解决方法
           </a>
          </li>
          <li>
           <a href="#_797" rel="nofollow">
            错误原因
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     简述
    </h2>
    <p>
     身为一个后端程序员，当然不可能把所有的东西都背诵下来，正所谓好记性不如烂笔头，我都会把自己经常使用的一些方法记录起来，方便在开发过程中使用。
    </p>
    <h2>
     <a id="MySQL_3">
     </a>
     数据库（MySQL）
    </h2>
    <h3>
     <a id="_5">
     </a>
     查询所有字段
    </h3>
    <pre><code class="prism language-javascript"><span class="token constant">SELECT</span>
	<span class="token constant">COLUMN_NAME</span><span class="token punctuation">,</span>
	column_comment 
<span class="token constant">FROM</span>
	<span class="token constant">INFORMATION_SCHEMA</span><span class="token punctuation">.</span><span class="token constant">COLUMNS</span> 
<span class="token constant">WHERE</span>
	table_name <span class="token operator">=</span> <span class="token string">'你的表名'</span>
</code></pre>
    <h3>
     <a id="idnamecode_17">
     </a>
     查询所有字段并逗号隔开（id,name.code）
    </h3>
    <pre><code class="prism language-javascript"><span class="token constant">SELECT</span>
	<span class="token function">group_concat</span><span class="token punctuation">(</span> <span class="token constant">COLUMN_NAME</span> <span class="token constant">SEPARATOR</span> <span class="token string">','</span> <span class="token punctuation">)</span> <span class="token constant">AS</span> t_info 
<span class="token constant">FROM</span>
	information_schema<span class="token punctuation">.</span><span class="token constant">COLUMNS</span> 
<span class="token constant">WHERE</span>
	table_name <span class="token operator">=</span> <span class="token string">'表名称'</span> 
	<span class="token constant">AND</span> table_schema <span class="token operator">=</span> <span class="token string">'数据库名称'</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="_29">
     </a>
     增加或者减少指定的天数
    </h3>
    <pre><code>UPDATE `equipment_monitor_locations`  set create_time = DATE_ADD(`create_time`,INTERVAL 1 DAY)
 
 UPDATE `equipment_monitor_locations`  set create_time = DATE_SUB(`create_time`,INTERVAL 1 DAY)
</code></pre>
    <h3>
     <a id="_37">
     </a>
     查询指定年份的数据
    </h3>
    <pre><code>SELECT id, sensor_code FROM user WHERE YEAR(upload_time) = #{year}
</code></pre>
    <h3>
     <a id="_43">
     </a>
     数据库表新增信息
    </h3>
    <pre><code>增加默认删除状态
 ALTER TABLE `sys_menu`
 ADD `deleted` tinyint(1) DEFAULT '0' COMMENT '删除状态(0:正常 1:删除)';
 台账表格基础操作时间信息
 ALTER TABLE `name`
 ADD create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
 ADD update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间';
 台账表格基础操作人员信息
 ALTER TABLE `name`
 ADD create_person VARCHAR(255) NOT NULL COMMENT '创建人员',
 ADD create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
 ADD update_person VARCHAR(255) NOT NULL COMMENT '更新人员',
 ADD update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间',
 ADD changes_person VARCHAR(255) NOT NULL COMMENT '变更人员',
 ADD changes_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '变更时间',
 ADD delete_person VARCHAR(255) NOT NULL COMMENT '删除人员',
 ADD delete_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '删除时间';
 改变人员
  ALTER TABLE `name`
 ADD change_person VARCHAR(255) NOT NULL COMMENT '更变人员',
 ADD change_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更变时间';
 
 
 ALTER TABLE `name`
 ADD created_person VARCHAR(255) NOT NULL COMMENT '创建人员',
 ADD created_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
 ADD updated_person VARCHAR(255) NOT NULL COMMENT '更新人员',
 ADD updated_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间'
 ADD deleted_person VARCHAR(255) NOT NULL COMMENT '删除人员',
 ADD deleted_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '删除时间';
</code></pre>
    <p>
     case
    </p>
    <pre><code>( CASE WHEN ( pmc.manoeuvre_change_state = 1 ) THEN pmc.id ELSE NULL END ) AS num
</code></pre>
    <h3>
     <a id="_EXISTS__NOT_EXISTS__IN__NOT_IN_84">
     </a>
     用 EXISTS 或 NOT EXISTS 代替 IN 或 NOT IN
    </h3>
    <pre><code>select *  from test1 
   where EXISTS (select * from test2  where id2 = id1 )

select *  FROM test1  
 where NOT EXISTS (select * from test2  where id2 = id1 )
</code></pre>
    <h3>
     <a id="7_94">
     </a>
     7位设备编码补零生成
    </h3>
    <pre><code>        SELECT
        ( CASE WHEN sum.count &lt; 10000000 THEN LPAD( sum.count, 7, '0' ) ELSE sum.count END ) AS sum_code_num
        FROM
        ( SELECT COUNT(id) AS `count` FROM `device_info`) AS sum
</code></pre>
    <h3>
     <a id="id_103">
     </a>
     查询相同id下，最新的一条数据
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span> alarm_dispose a
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
  <span class="token keyword">SELECT</span> alarm_id<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>alarm_time<span class="token punctuation">)</span> <span class="token keyword">as</span> max_alarm_time<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">AS</span> id
  <span class="token keyword">FROM</span> alarm_dispose
  <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> alarm_id
<span class="token punctuation">)</span> b <span class="token keyword">ON</span> a<span class="token punctuation">.</span>alarm_id <span class="token operator">=</span> b<span class="token punctuation">.</span>alarm_id <span class="token operator">AND</span> a<span class="token punctuation">.</span>alarm_time <span class="token operator">=</span> b<span class="token punctuation">.</span>max_alarm_time <span class="token operator">AND</span> a<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

</code></pre>
    <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span> alarm_dispose a
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> alarm_id<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>alarm_time<span class="token punctuation">)</span> <span class="token keyword">as</span> max_alarm_time
    <span class="token keyword">FROM</span> alarm_dispose
    <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> alarm_id
<span class="token punctuation">)</span> b <span class="token keyword">ON</span> a<span class="token punctuation">.</span>alarm_id <span class="token operator">=</span> b<span class="token punctuation">.</span>alarm_id <span class="token operator">AND</span> a<span class="token punctuation">.</span>alarm_time <span class="token operator">=</span> b<span class="token punctuation">.</span>max_alarm_time
<span class="token keyword">WHERE</span> a<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token keyword">FROM</span> alarm_dispose c
    <span class="token keyword">WHERE</span> c<span class="token punctuation">.</span>alarm_id <span class="token operator">=</span> a<span class="token punctuation">.</span>alarm_id <span class="token operator">AND</span> c<span class="token punctuation">.</span>alarm_time <span class="token operator">=</span> a<span class="token punctuation">.</span>alarm_time
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="Spring_Boot_131">
     </a>
     Spring Boot
    </h2>
    <h3>
     <a id="_133">
     </a>
     常用注解
    </h3>
    <h4>
     <a id="_135">
     </a>
     数据库事务注解
    </h4>
    <pre><code>@Transactional(rollbackFor = Exception.class)
</code></pre>
    <h3>
     <a id="_141">
     </a>
     常用实体补充
    </h3>
    <pre><code>    import com.fasterxml.jackson.annotation.JsonFormat;
    import org.springframework.format.annotation.DateTimeFormat;
    
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss",timezone = "GMT+8")
    @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    @ApiModelProperty("创建时间")
    private Date createTime;

    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss",timezone = "GMT+8")
    @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    @ApiModelProperty("更新时间")
    private Date updateTime;
</code></pre>
    <h4>
     <a id="long_158">
     </a>
     long自动转字符串
    </h4>
    <pre><code>import com.fasterxml.jackson.databind.annotation.JsonSerialize;
import com.fasterxml.jackson.databind.ser.std.ToStringSerializer;
@JsonSerialize(using = ToStringSerializer.class)
</code></pre>
    <h3>
     <a id="_166">
     </a>
     枚举类
    </h3>
    <pre><code>
import lombok.AllArgsConstructor;
import lombok.Getter;


/**
 * 预警类别
 *
 * @author dpe
 */
@AllArgsConstructor
@Getter
public enum AlarmGradeEnum {

    /**
     * 一级预警
     */
    ONE(1,"一级预警"),
    /**
     * 二级预警
     */
    TWO(2,"二级预警"),
    /**
     * 三级预警
     */
    THREE(3,"三级预警");


    private final Integer code;
    private final String name;


    public static Integer getCode(String name) {
        for (AlarmGradeEnum record : AlarmGradeEnum.values()) {
            if (record.name.equals(name)) {
                return record.code;
            }
        }
        return null;
    }

    public static String getName(Integer code) {
        for (AlarmGradeEnum record : AlarmGradeEnum.values()) {
            if (record.code.equals(code)) {
                return record.name;
            }
        }
        return null;
    }


    public static AlarmGradeEnum get(Integer code) {
        for (AlarmGradeEnum record : AlarmGradeEnum.values()) {
            if (record.code.equals(code)) {
                return record;
            }
        }
        return null;
    }
}

</code></pre>
    <h3>
     <a id="_232">
     </a>
     常用函数
    </h3>
    <pre><code class="prism language-java">    <span class="token comment">/**
     * 生成随机整数
     *
     * @param min 最小区间
     * @param max 最大区间
     * @return 随机整数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">generatingRandomInt</span><span class="token punctuation">(</span><span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> max<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">double</span> randomValue <span class="token operator">=</span> min <span class="token operator">+</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> randomValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="listmap_248">
     </a>
     <strong>
      流处理-list转map
     </strong>
    </h4>
    <pre><code>    public Map&lt;String, User&gt; convertListToMap(List&lt;User&gt; userList) {
        if (deviceInfoList == null) {
            return new HashMap&lt;&gt;(); // 返回空Map，或者抛出异常，取决于你的需求
        }

        Map&lt;String, User&gt; userMap = userList.stream()
            .filter(user -&gt; user.getCode() != null) // 判空过滤
            .collect(Collectors.toMap(User::getTermigetCodenalNo, user -&gt; user));

        return userMap;
    }
</code></pre>
    <h4>
     <a id="listmap_264">
     </a>
     <strong>
      list转map
     </strong>
    </h4>
    <pre><code>        List&lt;SysMenu&gt; sysMenuList = menuMapper.selectList(null);

        HashMap&lt;Long, List&lt;SysMenu&gt;&gt; map = new HashMap&lt;&gt;();

        for (SysMenu item:sysMenuList){
            Long parentId = item.getParentId();
            List&lt;SysMenu&gt; sysMenuMapList = new ArrayList&lt;&gt;();
            if(map.containsKey(parentId)){
                sysMenuMapList = map.get(parentId);
            }
            sysMenuMapList.add(item);
            map.put(parentId, sysMenuMapList);
        }
</code></pre>
    <h4>
     <a id="list_282">
     </a>
     list排序
    </h4>
    <p>
     自然正序
    </p>
    <pre><code>Comparator.naturalOrder()
</code></pre>
    <p>
     自然倒叙
    </p>
    <pre><code>Comparator.reverseOrder()
</code></pre>
    <pre><code>// 根据list中的一个字段，对集合重新排序(不能处理空值)
List&lt;User&gt; newList = list.stream().sorted(Comparator.comparing(User::getAge)).collect(Collectors.toList());

// 使用 nullsLast() 方法，将空值排在最后：
newList = newList.stream()
    .sorted(Comparator.comparing(User::getAge, Comparator.nullsLast(Comparator.naturalOrder())))
    .collect(Collectors.toList());

// 使用 nullsFirst() 方法，将空值排在最前：
newList = newList.stream()
    .sorted(Comparator.comparing(User::getAge, Comparator.nullsFirst(Comparator.naturalOrder())))
    .collect(Collectors.toList());

</code></pre>
    <h4>
     <a id="_312">
     </a>
     时间类型
    </h4>
    <h5>
     <a id="_314">
     </a>
     获取当天的开始时间
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">DateTime</span> beginOfDay <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">beginOfDay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="_320">
     </a>
     获取当天的结束时间
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">DateTime</span> endOfDay <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">endOfDay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="_326">
     </a>
     数据校验函数
    </h4>
    <h5>
     <a id="_328">
     </a>
     验证手机号码与座机号码
    </h5>
    <pre><code class="prism language-java">    <span class="token comment">/**
     * 验证手机号码与座机号码
     *
     * @param phone 号码
     * @return 正确/错误
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">phoneVerification</span><span class="token punctuation">(</span><span class="token class-name">String</span> phone<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">// 验证手机号码</span>
        <span class="token class-name">String</span> mobilePattern <span class="token operator">=</span> <span class="token string">"^1(3[0-9]|4[5-9]|5[0-35-9]|66|7[0-8]|8[0-9]|9[0-35-9])\\d{8}$"</span><span class="token punctuation">;</span>
        <span class="token class-name">Pattern</span> patternMobile <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>mobilePattern<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcherMobile <span class="token operator">=</span> patternMobile<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> phoneNum <span class="token operator">=</span> matcherMobile<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 验证座机号码</span>
        <span class="token class-name">String</span> telephonePattern <span class="token operator">=</span> <span class="token string">"^(0[1-9]\\d{1,2}-?)?([2-9]\\d{6,7})$"</span><span class="token punctuation">;</span>
        <span class="token class-name">Pattern</span> patternTelephone <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>telephonePattern<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcherTelephone <span class="token operator">=</span> patternTelephone<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> matcher <span class="token operator">=</span> matcherTelephone<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 验证座机号码(不带区号)</span>
        <span class="token class-name">String</span> telephonePatternShort <span class="token operator">=</span> <span class="token string">"^(0[1-9]\\d{1,2}-?)?([2-9]\\d{6,7})|(\\d{7,8})$"</span><span class="token punctuation">;</span>
        <span class="token class-name">Pattern</span> patternTelephoneShort <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>telephonePatternShort<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcherTelephoneShort <span class="token operator">=</span> patternTelephoneShort<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> matcherShort <span class="token operator">=</span> matcherTelephoneShort<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> phoneNum <span class="token operator">||</span> matcher <span class="token operator">||</span> matcherShort<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="_361">
     </a>
    </h5>
    <h3>
     <a id="_363">
     </a>
     实体通用字段
    </h3>
    <pre><code>@ApiModelProperty(value = "删除状态(0:正常 1:删除)")
     private Integer deleted;
</code></pre>
    <h3>
     <a id="Optional_370">
     </a>
     Optional判空
    </h3>
    <pre><code>Optional&lt;SosInfo&gt; sosInfoOptional = sosInfoRepository.findById(id);
SosInfo sosInfo = sosInfoOptional.orElse(null);
</code></pre>
    <pre><code>Optional&lt;DeviceInfo&gt; deviceInfoOptional = deviceInfoRepository.findById(id);
if (deviceInfoOptional.isPresent()) {
    DeviceInfo deviceInfo = deviceInfoOptional.get();
}
</code></pre>
    <h3>
     <a id="_384">
     </a>
     测试类
    </h3>
    <h4>
     <a id="_386">
     </a>
     普通测试类
    </h4>
    <pre><code>import org.junit.Test;

/**
 * @author fir
 */
public class DataServiceTest {


    @Test
    public void a(){
        System.out.println("asdasda");
    }
}
</code></pre>
    <h3>
     <a id="_404">
     </a>
     实体注解
    </h3>
    <h3>
     <a id="_406">
     </a>
     自定义字段，不作为数据库表字段使用
    </h3>
    <pre><code>@TableField(exist = false)
</code></pre>
    <h3>
     <a id="_412">
     </a>
     雪花算法主键
    </h3>
    <pre><code>    @JsonSerialize(using= ToStringSerializer.class)
    @TableId(value = "role_id", type = IdType.ASSIGN_ID)
</code></pre>
    <h3>
     <a id="_419">
     </a>
     时间格式转换实体字段
    </h3>
    <pre><code>import com.fasterxml.jackson.annotation.JsonFormat;
 import org.springframework.format.annotation.DateTimeFormat;    
 
 @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss",timezone = "GMT+8")
 @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
</code></pre>
    <h3>
     <a id="xml_429">
     </a>
     xml文件特殊符号替换符
    </h3>
    <pre><code>  &amp;lt; &lt; 小于号 
  &amp;gt; &gt; 大于号 
  &amp;amp; &amp; 和 
  &amp;apos; ' 单引号 
  &amp;quot; " 双引号
</code></pre>
    <h3>
     <a id="_439">
     </a>
     数据提交验证
    </h3>
    <pre><code>@ApiOperation("添加数据")
 @PostMapping("/insertData")
 public AjaxResult insertData(@Validated Demo demo){
     return AjaxResult.success(iDemoService.insertData(demo));
 }
</code></pre>
    <p>
     实体中
    </p>
    <pre><code>// 字符串类型，表示不能超过5个字符（abcde）
     Length(max = 5,message = "名称 不能超过 5 个字符")
     @ApiModelProperty(value = "名称")
     @ExcelProperty(index = 1)
     private String name;
     
     数值类型，表示不能大于1（&lt;=1）
     @Range(max = 1, message = "状态 不能超过 1 个字符")
     @ApiModelProperty(value = "状态(0:未上报,1:已上报,2:变更中)")
     private Integer state;
</code></pre>
    <p>
     对于
     <br/>
     <code>
      reason
     </code>
     longtext COMMENT ‘内容’
     <br/>
     字段长度应为
    </p>
    <pre><code>@Length(max = 65535, message = "内容 不能超过 65535 个字符")
     @ApiModelProperty(value = "内容")
     private String reason;
</code></pre>
    <h3>
     <a id="_474">
     </a>
     递归处理树形结构
    </h3>
    <h4>
     <a id="_476">
     </a>
     树形实体
    </h4>
    <pre><code>package com.lnsoft.mmbdf.yjglpt.project.dto.mt;
 
 import com.fasterxml.jackson.databind.annotation.JsonSerialize;
 import com.fasterxml.jackson.databind.ser.std.ToStringSerializer;
 import io.swagger.annotations.ApiModelProperty;
 import lombok.AllArgsConstructor;
 import lombok.Builder;
 import lombok.Data;
 import lombok.NoArgsConstructor;
 
 import java.util.List;
 
 
 /**
  * 级联选择器对象
  * @author fir
  */
 @Data
 @Builder
 @AllArgsConstructor
 @NoArgsConstructor
 public class TreeIntegerDTO {
 
     @JsonSerialize(using= ToStringSerializer.class)
     @ApiModelProperty(value = "数值")
     private Long value;
 
     @ApiModelProperty(value = "标签")
     private String label;
 
     @ApiModelProperty(value = "可用数值")
     private Object num;
 
     @ApiModelProperty(value = "状态")
     private Object state;
 
     @ApiModelProperty(value = "是否禁用: 是-true 否-false")
     private Boolean disabled;
 
     @ApiModelProperty(value = "子列表")
     private List&lt;TreeIntegerDTO&gt; children;
 }
</code></pre>
    <h3>
     <a id="MyBatisPlus_523">
     </a>
     MyBatis-Plus
    </h3>
    <h4>
     <a id="_525">
     </a>
     查询条件
    </h4>
    <h5>
     <a id="_527">
     </a>
     或
    </h5>
    <pre><code>lqwList.and((qw) -&gt; qw
         .eq(ManoeuvreVideo::getType, 0)
         .or()
         .eq(ManoeuvreVideo::getType, 1));
</code></pre>
    <h5>
     <a id="_536">
     </a>
     区间
    </h5>
    <pre><code> lqw.between(ManoeuvreVideo::getTime, start, end);
</code></pre>
    <h5>
     <a id="_540">
     </a>
     大于小于
    </h5>
    <pre><code>// 大于
     lqw.gt(ManoeuvreVideo::getTime, time);
     // 大于等于
     lqw.ge(ManoeuvreVideo::getTime, time);
     // 小于
     lqw.lt(ManoeuvreVideo::getTime, time);
     // 小于等于
     lqw.le(ManoeuvreVideo::getTime, time);
</code></pre>
    <h4>
     <a id="xml_553">
     </a>
     xml自定义查询
    </h4>
    <h5>
     <a id="inforeach_555">
     </a>
     in(foreach)
    </h5>
    <pre><code>code
 IN 
     &lt;foreach collection="list" index="index" item="item" open="(" separator="," close=")"&gt;
         #{item}
     &lt;/foreach&gt;
 
 
     /**
      * 装备演练-地市演练次数查看
      *
      * @return 地市演练次数
      */
     List&lt;PjManoeuvreStatisticsOrgManoeuvre&gt; getStatistics(List&lt;String&gt; list);
</code></pre>
    <h5>
     <a id="if_573">
     </a>
     if
    </h5>
    <pre><code>&lt;if test="type != null and type != ''"&gt;
                 t.type = #{type}
&lt;/if&gt;

&lt;if test="state != null and state.size &gt; 0"&gt;
      AND t.state IN
      &lt;foreach item="state" index="index" collection="state" open="(" separator="," close=")"&gt;
        #{state}
      &lt;/foreach&gt;
&lt;/if&gt;

&lt;if test="array != null and array.length &gt;0"&gt;
&lt;if test="list != null and list.size() &gt; 0"&gt;
</code></pre>
    <h5>
     <a id="where_591">
     </a>
     where
    </h5>
    <pre><code>&lt;where&gt;
             &lt;if test="type != null and type != ''"&gt;
                 t.type = #{type}
             &lt;/if&gt;
&lt;/where&gt;
</code></pre>
    <pre><code class="prism language-bash">like concat<span class="token punctuation">(</span><span class="token string">'%'</span>, <span class="token comment">#{menuName}, '%')</span>
</code></pre>
    <h4>
     <a id="_605">
     </a>
     自定义查询的分页查询
    </h4>
    <pre><code>// 逻辑层中
         PageInfo&lt;User&gt; resultInfo;
         Page&lt;User&gt; page = new Page&lt;&gt;(pageNum, pageSize);
         Page&lt;User&gt; userPage = userMapper.getList(page);
         resultInfo = new PageInfo&lt;&gt;(userPage.getTotal(), pageNum, userPage.getRecords());
         
         // deo层中
         Page&lt;User&gt; getList(Page&lt;User&gt; page);
         
         // xml中
         &lt;select id="getList" resultType="com.fir.test.dto.mt.User"&gt;
         SELECT name,
                code
         FROM `user`
         &lt;/select&gt;
</code></pre>
    <h3>
     <a id="Swagger_625">
     </a>
     Swagger
    </h3>
    <h4>
     <a id="_627">
     </a>
     常用注释
    </h4>
    <pre><code>@ApiImplicitParams({
             @ApiImplicitParam(name = "weightJson", value = "指标权重(Json)格式", dataTypeClass = String.class),
             @ApiImplicitParam(name = "pageNum", value = "页码", defaultValue = "1", dataTypeClass = Integer.class, required = true),
             @ApiImplicitParam(name = "pageSize", value = "页数量", defaultValue = "10", dataTypeClass = Integer.class, required = true)
     })
</code></pre>
    <h3>
     <a id="Hutool__637">
     </a>
     Hutool 工具
    </h3>
    <pre><code class="prism language-python">手机号码校验
boolean isMobile <span class="token operator">=</span> Validator<span class="token punctuation">.</span>isMobile<span class="token punctuation">(</span><span class="token string">"18866661234"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1</span>
身份证号校验
boolean isIdCardNumber <span class="token operator">=</span> Validator<span class="token punctuation">.</span>isCitizenId<span class="token punctuation">(</span><span class="token string">"43312220160113802X"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1</span>
邮箱校验
boolean isEmail <span class="token operator">=</span> Validator<span class="token punctuation">.</span>isEmail<span class="token punctuation">(</span><span class="token string">"random@example.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1</span>
统一社会信用代码校验
boolean isCreditCode <span class="token operator">=</span> Validator<span class="token punctuation">.</span>isCreditCode<span class="token punctuation">(</span><span class="token string">"91440300701234567A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1</span>
车牌号码校验
boolean isPlateNumber <span class="token operator">=</span> Validator<span class="token punctuation">.</span>isPlateNumber<span class="token punctuation">(</span><span class="token string">"粤B12345"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1</span>
车架号校验
boolean isCarVin <span class="token operator">=</span> Validator<span class="token punctuation">.</span>isCarVin<span class="token punctuation">(</span><span class="token string">"LFV2A21J9D4112345"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="_659">
     </a>
     历史问题
    </h2>
    <h3>
     <a id="Mybatisplus__661">
     </a>
     Mybatis-plus 逻辑删除字段无效
    </h3>
    <h4>
     <a id="_663">
     </a>
     问题描述:
    </h4>
    <pre><code>&lt;dependency&gt;
             &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
             &lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;
             &lt;version&gt;3.0.6&lt;/version&gt;
         &lt;/dependency&gt;
</code></pre>
    <p>
     增加yml配置后仍然无效
    </p>
    <pre><code>mybatis-plus:
   global-config:
     db-config:
       logic-delete-field: deleted # 此版本无该配置项
       logic-delete-value: 1
       logic-not-delete-value: 0
</code></pre>
    <p>
     实体中一下配置均无效
    </p>
    <pre><code>@TableLogic
 @ApiModelProperty(value = "删除状态(0:正常 1:删除)")
 private Integer deleted;
</code></pre>
    <pre><code>	@TableLogic(value = "0", delval = "1")	@ApiModelProperty(value = "删除状态(0:正常 1:删除)")	private Integer deleted;
</code></pre>
    <h4>
     <a id="_694">
     </a>
     解决方法:
    </h4>
    <p>
     实体
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@TableLogic</span>
<span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"删除状态(0:正常 1:删除)"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span>
</code></pre>
    <p>
     配置类
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">MybatisConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">GlobalConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>injector<span class="token punctuation">.</span></span><span class="token class-name">DefaultSqlInjector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>injector<span class="token punctuation">.</span></span><span class="token class-name">ISqlInjector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>injector<span class="token punctuation">.</span></span><span class="token class-name">LogicSqlInjector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span><span class="token class-name">PaginationInterceptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>spring<span class="token punctuation">.</span></span><span class="token class-name">MybatisSqlSessionFactoryBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">JdbcType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Qualifier</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">PathMatchingResourcePatternResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ResourcePatternResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableTransactionManagement</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>


<span class="token comment">/**
  * @author dpe
  * @date 2022/02/10 16:34
  **/</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusConfig</span> <span class="token punctuation">{<!-- --></span>


    <span class="token comment">/**
      * 分页插件
      * @return bean
      */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">PaginationInterceptor</span> <span class="token function">paginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PaginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
      * 逻辑删除
      *
      * @return 注入器
      */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ISqlInjector</span> <span class="token function">sqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LogicSqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_761">
     </a>
     错误案例
    </h4>
    <p>
     更多的人推荐,但这种配置是无效的
    </p>
    <pre><code>/**
      * 逻辑删除
      *
      * @return 注入器
      */
     @Bean
     public ISqlInjector sqlInjector(){
         return new DefaultSqlInjector();
     }
</code></pre>
    <h3>
     <a id="Invalid_bound_statement_not_found_777">
     </a>
     Invalid bound statement (not found)
    </h3>
    <h4>
     <a id="_779">
     </a>
     问题描述
    </h4>
    <p>
     org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.fir.mybatis.imapper.core.UserMapper.getUser
    </p>
    <h4>
     <a id="_783">
     </a>
     解决方法
    </h4>
    <pre><code>mybatis:
   config-location: classpath:mybatis-config.xml
   mapper-locations: classpath:/mapper/*.xml
 mybatis-plus:
   configuration:
     map-underscore-to-camel-case: true
     auto-mapping-behavior: full
     log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
 #  mapper-locations: classpath*:mapper/*.xml 去掉该条配置
</code></pre>
    <h4>
     <a id="_797">
     </a>
     错误原因
    </h4>
    <p>
     在低版本中配置逻辑删除，有修改配置的方法，但在尝试无效之后，没有及时的清理无用的配置，导致问题出现
     <br/>
     临时记录
    </p>
    <pre><code>"fileName": "20231220测试视频.mp4",
     "staticResourcesId": 158253
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
</div>


