---
layout: post
title: "重学音视频认识-MP4-视频下"
date: 2025-02-26 18:16:23 +0800
description: "接上一篇文章：重学音视频？认识 MP4 视频（上）文章的提到的资料都放在知识星球了，后续的内容更新还"
keywords: "mp4 格式学习"
categories: ['']
tags: ['编程语言', '机器学习', '大数据', 'Python', 'Java']
artid: "124464016"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=124464016
    alt: "重学音视频认识-MP4-视频下"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     重学音视频？认识 MP4 视频（下）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div id="js_content">
     <p>
      接上一篇文章：
     </p>
     <p>
      <a href="" rel="nofollow">
       重学音视频？认识 MP4 视频（上）
      </a>
     </p>
     <p>
      文章的提到的资料都放在知识星球了，后续的内容更新还是以星球为主，也会放出一些干货在公众号的，
      <strong>
       现在加入星球还是优惠价
      </strong>
      ，后面干货越多，涨价的可能性就越大了。
     </p>
     <p>
      <a href="" rel="nofollow">
       一个关于音视频领域专业问答的小圈子！！
      </a>
      <br/>
     </p>
     <p>
      为了方便大家的检索，我把专栏内容放在网页上了，地址如下：
     </p>
     <blockquote>
      <p>
       https://glumes.com/player_book/
      </p>
     </blockquote>
     <p>
      如图所示，就能访问专栏啦。
     </p>
     <img alt="e327cd64a92d4b3e5879c860b6614376.png" src="https://i-blog.csdnimg.cn/blog_migrate/eba2b192f423ec3a5e3d755d25972d96.png">
      <p>
       以下就是专栏的内容：
      </p>
      <p>
       在前文介绍了 MP4 标准的缘由，现在要详细了解一下它的格式。
      </p>
      <p>
       还是回到这张图：
      </p>
      <img alt="5349961dd882d92a740b284f905e6aff.png" src="https://i-blog.csdnimg.cn/blog_migrate/32c16d8f45a3bd8a14f27791ea9fd754.png">
       <p>
        重点看这里：
       </p>
       <blockquote>
        <p>
         第十四部分（ISO/IEC 14496-14）：MPEG-4（即MP4）文件格式：定义基于第十二部分的用于存储MPEG-4内容的视频文档格式。
        </p>
       </blockquote>
       <p>
        也就是说 MP4 文件格式是定义在 MPEG-4 第 12 部分基础之上的，而第 12 部分的内容描述如下：
       </p>
       <blockquote>
        <p>
         第十二部分（ISO/IEC 14496-12）：基于ISO的媒体文件格式：定义一个存储媒体内容的文件格式。
        </p>
       </blockquote>
       <p>
        所以，要学习 MP4 文件格式，要先了解 第 12 部分的内容，关于 MPEG-4 第 12 部分的文档，我也同步放在知识星球里面了，有需要的可以去下载。
       </p>
       <img alt="16637a8130bf91bbf1bda54e6ddee632.png" src="https://i-blog.csdnimg.cn/blog_migrate/e44354f9ccd2520fdf0f9b1b540423fc.png">
        <p>
         <strong>
          网上关于 MP4 文件格式的文章内容，基本都可以在第 12 部分中找到，可以说它才是学习知识的源头，当做教科书来学肯定没问题。
         </strong>
        </p>
        <blockquote>
         <p>
          有官方文档的情况下，会尽量根据文档来学习，而不是盲目的参考网络博客，那样得到的知识体系太零散了。
         </p>
        </blockquote>
        <h3>
         MP4 文件组成
        </h3>
        <p>
         摘录一段官方文档的内容：
        </p>
        <img alt="c954424ea835e039f1653c3769c16fbf.png" src="https://i-blog.csdnimg.cn/blog_migrate/52e8b3bba336dad61189875de749a4cf.png">
         <p>
          关于 MP4 文件格式，参照文档说明：文件是由一系列叫做
          <strong>
           Box
          </strong>
          的对象组成的，所有的数据都存储在
          <strong>
           Box
          </strong>
          中。
         </p>
         <p>
          官方文档中把这些由对象结构组成的文件叫做
          <strong>
           Object-structured File
          </strong>
          ，算是一个比较广义的概念，但我们就当做 MP4 格式好了，狭义地理解一下，并且这种文件格式必须要包含 File Type 类型的 Box 。
         </p>
         <h3>
          MP4 中的 Box
         </h3>
         <p>
          MP4 中的 Box 有很多类型，每个类型中的 Box 代表的含义还不相同，但他们的基础结构还是相同的，继续往下看文档：
         </p>
         <img alt="f4900d9c3734b38cd93fa8322e951bc8.png" src="https://i-blog.csdnimg.cn/blog_migrate/2efa22ee7ea1bc2f10eadd96c6a806c7.png">
          <p>
           <strong>
            每个 Box 是由 Header 和 Data 两部分组成的，Header 中包含了很多标识信息，而 Data 可以是纯数据也可以是其他的子 Box
           </strong>
           。
          </p>
          <p>
           参照文档内容，
           <strong>
            Header 中包含了 Box 的大小 Size 和类型 Type
           </strong>
           。
          </p>
          <p>
           关于 Size 的说明，参考文档：
          </p>
          <img alt="0ed145065d4288c0a850eb8c38f40414.png" src="https://i-blog.csdnimg.cn/blog_migrate/afae0aaa507451761e8910c5fc68bf05.png">
           <p>
            size 字段包含了 Box 和子 Box 的大小，如果 size 为 1 ，说明实际的大小在 largesize 字段中，如果 size 为 0 ，说明这是文件最后一个 Box 了。
           </p>
           <p>
            关于 Type 的说明，参考文档：
           </p>
           <img alt="93cf68f6cadff188cbc4626ebc9016e3.png" src="https://i-blog.csdnimg.cn/blog_migrate/984943524624ba12bde8ca458fa5ef24.png">
            <p>
             type 字段表示该 Box 的类型，标准的 Box 类型都是用四个字母来表示的，如果是用户自定义的类型，就用
             <strong>
              uuid
             </strong>
             来表示。
            </p>
            <p>
             另外，要强调一下 Box 的字节序是网络字节序，也就是大端序，关于 Box 结构的伪代码文档中也给出了：
            </p>
            <img alt="9850fcf7e7982df5be95e135f9124135.png" src="https://i-blog.csdnimg.cn/blog_migrate/e94eb3c0581b30c250cc6d1e5c9f8bfe.png"/>
            <p>
             根据伪代码再看 Box 的结构定义就一目了然了。
            </p>
            <h3>
             MP4 中的 FullBox
            </h3>
            <p>
             Box 可以说是所有 Box 类型的基类，接下来要了解它的第一个子类 FullBox 。
            </p>
            <img alt="80e4b3d118dd9f086776038629f69f72.png" src="https://i-blog.csdnimg.cn/blog_migrate/a6963fe02f491253387a53440979809a.png"/>
            <p>
             FullBox 在 Box 的基础上多了 version 和 flags 字段。
            </p>
            <p>
             其中 version 字段表示 Box 的版本，flags 字段是标志位。
            </p>
            <p>
             如果 Box 遇到了无法识别的 version 或者 type 字段，就应该跳过或者忽略。
            </p>
            <h3>
             MP4 中更多的 Box
            </h3>
            <p>
             MP4 中还有很多类型的 Box ，其实有些 Box 相当重要，甚至面试中还会经常问到，下面从文档中给大家摘录一下所有的 Box 类型。
            </p>
            <img alt="2dad9777bc98519a65f529ea319139ed.png" src="https://i-blog.csdnimg.cn/blog_migrate/aca74cb53b8afe357ac13a3fc24ca045.png"/>
            <img alt="0aad6a44a213c895221cad438579fecb.png" src="https://i-blog.csdnimg.cn/blog_migrate/790769a9f44fae8b9f19a5e1daa4aa14.png"/>
            <p>
             这些内容在文档中都有，自行下载了，网络的一些资料可能还没有文档全面呢。
            </p>
            <p>
             后面我们也会继续讲解这些 Box 类型的，以及使用工具来查看 Box 信息，这节就先到这里啦！！！
            </p>
            <p style="text-align:left;">
             众所周知，开通了知识星球，邀请了一些在头条、快手等知名IT企业从事过音视频研发的朋友们做专业咨询，涉及的范围比较广，包括 Android/iOS 开发、Camera 开发、视频编辑、在线直播、WebRTC、播放器、OpenGL、C++ 等等，基本上涵盖了音视频工程领域的绝大部分内容。
            </p>
            <p style="text-align:left;">
             关于音视频入门如何学习，学习了 FFmpeg 之后又该怎么办，跳槽选择哪个方向比较好，程序员职业软技能等等之类的问题，更是会以行业一线开发人员的角度帮你认真分析，出谋划策。
            </p>
            <p style="text-align:left;">
             力求做到有问必答。在知识范围内，认真地对待每一个提问，不一定所有的问题都能答案，但每一个答案都是详细思考过的。
            </p>
            <p style="text-align:left;">
             更多开发资料、博客源码、文档教程都会在星球内给出，白菜价即可加入，iOS 用户可以加我微信 ezglumes 拉你进去！！！
            </p>
            <p style="text-align:center;">
             <img alt="bb4b7f3c158c8286eaab5713f01082d8.png" src="https://i-blog.csdnimg.cn/blog_migrate/9cff236b47b6421e512fa7ff7a4b17f7.png"/>
            </p>
            <p style="text-align:center;">
             <img alt="1053f89b3311fc3a6387b26699dcaf58.png" src="https://i-blog.csdnimg.cn/blog_migrate/ae5e62e4bb0bcd703089d1e66b06b93a.png"/>
            </p>
            <p style="text-align:center;">
             一个音视频领域专业问答的小圈子！
             <br/>
            </p>
            <p style="text-align:center;">
             加我微信 ezglumes 拉你入技术交流群
            </p>
            <p>
             <strong>
              推荐阅读：
             </strong>
             <br/>
            </p>
            <p>
             <a href="" rel="nofollow">
              音视频开发工作经验分享 || 视频版
             </a>
             <br/>
            </p>
            <p>
             <a href="" rel="nofollow">
              OpenGL ES 学习资源分享
             </a>
            </p>
            <p>
             <a href="" rel="nofollow">
              开通专辑 | 细数那些年写过的技术文章专辑
             </a>
             <br/>
            </p>
            <p>
             <a href="" rel="nofollow">
              Android NDK 免费视频在线学习！！！
             </a>
             <br/>
            </p>
            <p>
             <a href="" rel="nofollow">
              你想要的音视频开发资料库来了
             </a>
             <br/>
            </p>
            <p>
             <a href="" rel="nofollow">
              推荐几个堪称教科书级别的 Android 音视频入门项目
             </a>
            </p>
            <p>
             觉得不错，点个在看呗~
            </p>
            <p>
             <img alt="6c4fd9558daa71aafc1fee04932f6da7.gif" src="https://i-blog.csdnimg.cn/blog_migrate/6d11bea274788e5c3360f476c5b19183.gif"/>
            </p>
           </img>
          </img>
         </img>
        </img>
       </img>
      </img>
     </img>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f7a6879696e673731392f:61727469636c652f64657461696c732f313234343634303136" class_="artid" style="display:none">
 </p>
</div>


