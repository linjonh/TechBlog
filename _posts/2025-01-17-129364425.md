---
layout: post
title: "图片存储解决方案之一使用nginx搭建图片服务器一"
date: 2025-01-17 15:07:24 +0800
description: "文章介绍了三种常见的图片存储方案：使用Nginx搭建图片服务器，包括下载、解压、配置及重启服务的步骤"
keywords: "图片服务器搭建方案"
categories: ['']
tags: ['服务器', 'Nginx']
artid: "129364425"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=129364425
    alt: "图片存储解决方案之一使用nginx搭建图片服务器一"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     图片存储解决方案之一使用nginx搭建图片服务器（一）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     常见的图片存储方案：
    </p>
    <p>
     方案一：使用nginx搭建图片服务器
    </p>
    <p>
     方案二：使用开源的分布式文件存储系统，例如Fastdfs、HDFS等
    </p>
    <p>
     方案三：使用云存储，例如阿里云、七牛云等
    </p>
    <h3>
     一、使用Nginx搭建图片服务器
    </h3>
    <p>
     首先下载Nginx
    </p>
    <p>
     <a class="has-card" href="http://nginx.org/en/download.html?login=from_csdn" rel="nofollow" title="http://nginx.org/en/download.html">
      <span class="link-card-box">
       <span class="link-title">
        http://nginx.org/en/download.html
       </span>
       <span class="link-link">
        <img alt="icon-default.png?t=N176" class="link-link-icon" src="https://i-blog.csdnimg.cn/blog_migrate/b05fae3d85bd860567e87b0bd725661f.png">
         http://nginx.org/en/download.html?login=from_csdn
        </img>
       </span>
      </span>
     </a>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/f1aa5df3b36c20d293ff5d58e70d754c.png"/>
    </p>
    <p>
     然后解压，如下图所示：
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/c7f0ed524d3b7076540fff6da6db1a5d.png"/>
    </p>
    <p>
     双击nginx.exe，然后会有一个黑色的框一闪而过，此时已经启动成功
    </p>
    <p>
     访问
     <a href="http://localhost/?login=from_csdn" rel="nofollow" title="http://localhost:80">
      http://localhost:80
     </a>
     回车，若出现下图，说明启动成功
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/4bf68275a1887a25db8a1cc345cd0768.png">
      然后再电脑上创建用来存放图片的文件夹
     </img>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/447efece49545e26d2724375b929666c.png"/>
    </p>
    <p>
     然后修改conf/nginx.conf
    </p>
    <pre><code class="hljs">location ~ .*\.(gif|jpg|jpeg|png)$ {  
    		expires 24h;  
    		root D:/upload5/;#指定图片存放路径  
    		access_log D:/upload5/log;#图片路径  
    		proxy_store on;  
    		proxy_store_access user:rw group:rw all:rw;  
    		proxy_temp_path         D:/upload5/;#图片路径  
    		proxy_redirect          off;  
    
    		proxy_set_header        Host 127.0.0.1;  
    		proxy_set_header        X-Real-IP $remote_addr;  
    		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;  
    		client_max_body_size    10m;  
    		client_body_buffer_size 1280k;  
    		proxy_connect_timeout   900;  
   		proxy_send_timeout      900;  
    		proxy_read_timeout      900;  
    		proxy_buffer_size       40k;  
   		proxy_buffers           40 320k;  
    		proxy_busy_buffers_size 640k;  
    		proxy_temp_file_write_size 640k;  
	}</code></pre>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/d682b11be053ffe9c0c51c5916ce0b89.png"/>
    </p>
    <p>
     然后重启Nginx服务
    </p>
    <p>
     当我们修改了nginx的配置文件nginx.conf 时，不需要关闭nginx后重新启动nginx，只需要执行命令
     <code>
      nginx -s reload
     </code>
     即可让改动生效
    </p>
    <p>
     首先先进入到nginx的安装目录
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/13123b3dcc539b0b88392e92a87f450d.png">
     </img>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/beab4226a0a558000f95299d40254ed6.png"/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6f9e6e9d3dc19cbcb289a3c7e3ab0a78.png"/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/4fb41fa09ccf306e10f214618e8664f3.png"/>
    </p>
    <p>
     最后就可以访问相应的图片了
    </p>
    <p>
     <img alt="" height="33" src="https://i-blog.csdnimg.cn/blog_migrate/324928b667e44967ef2a423d20173ec1.png" width="504"/>
    </p>
    <p>
     <img alt="" height="406" src="https://i-blog.csdnimg.cn/blog_migrate/fa2d2bc96b3d52d22a62df6030823eec.png" width="802"/>
    </p>
    <p>
     最后关闭Nginx服务：nginx -s stop
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f33373939383337372f:61727469636c652f64657461696c732f313239333634343235" class_="artid" style="display:none">
 </p>
</div>


