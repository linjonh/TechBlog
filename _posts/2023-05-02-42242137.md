---
layout: post
title: "KEIL下创建工程示例及配置简单说明"
date: 2023-05-02 15:53:10 +0800
description: "KEIL是一个窗口化的软件开发平台，它集成了功能强大的编辑器、工程管理器以及各种编译工具（包括C编译"
keywords: "KEIL下创建工程示例及配置简单说明"
categories: ['C']
tags: ['无标签']
artid: "42242137"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=42242137
    alt: "KEIL下创建工程示例及配置简单说明"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     KEIL下创建工程示例及配置简单说明
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p align="left">
     KEIL是一个窗口化的软件开发平台，它集成了功能强大的编辑器、工程管理器以及各种编译工具（包括C编译器、宏汇编器、链接/装载器和十六进制文件转换器）。uVision3 IDE提供了编译和调试两种工作模式。编译模式用于维护工程文件和生成应用程序；调试模式下，既可以用功能强大的CPU和外设仿真器测试程序，也可以使用调试器经Keil ULINK USB-JTAG适配器（或其他AGDI驱动器）连接目标系统来测试程序。ULINK仿真器用于下载应用程序到目标系统的Flash ROM中。µVision3集成的工程管理器使得基于ARM微控制器开发的应用程序更加容易。本文简单介绍KEIL下如何创建一个工程及相关配置。创建应用程序一般需执行以下步骤：
    </p>
    <p align="left">
     选择ARM工具集。
    </p>
    <p align="left">
     创建工程文件并选择CPU器件类型。
    </p>
    <p align="left">
     创建新的源文件并将其添加到工程中
    </p>
    <p align="left">
     配置目标硬件的相关选项
    </p>
    <p align="left">
     创建应用程序代码，编译工程生成目标文件。
    </p>
    <p align="left">
     以下为具体实现步骤：
    </p>
    <p align="left">
     一、选择ARM工具集
    </p>
    <p>
     KEIL3软件打开后，通过
     <strong>
      Project 选项下Manage- Components, Environment, and Books - Folder/Extensions
     </strong>
     打开ARM工具集选择对话框（如下图所示）。配置的工具集对即将创建的新工程有效。
    </p>
    <p>
     <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157207_3152.png">
      <br/>
     </img>
    </p>
    <p>
    </p>
    <ul type="square">
     <li>
      <strong>
       Use RealView Compiler
      </strong>
      选择RealView编译工具，这个选项和ADS开发工具是兼容的。在
      <strong>
       RealView Folder
      </strong>
      中指定开发工具的路径。
     </li>
     <li>
      <strong>
       Use GNU Compiler
      </strong>
      选择GNU GCC编译工具。在
      <strong>
       Cygnus Folder
      </strong>
      中指定GNU安装文件夹的路径，例如
      <strong>
       C:\Cygnus
      </strong>
      。GNU-Tool-Prefix允许用户选择各种GNU的变体。
     </li>
     <li>
      <strong>
       Use Keil CARM Compiler
      </strong>
      选择Keil CARM编译器。
     </li>
    </ul>
    <p>
    </p>
    <p align="left">
     二、创建工程文件并选择CPU器件类型。
    </p>
    <p align="left">
     单击Project – New…- uVision Project…. 菜单项，μVision 3将打开一个标准对话框，输入希望新建工程的名称即可创建一个新的工程，建议对每个新建工程使用独立的文件夹。在标准对话框中单击
     <strong>
      Create New Folder
     </strong>
     图标以创建一个新的空文件夹。选择新创建的文件夹，输入要创建的工程名，例如：
     <strong>
      New
     </strong>
     。µVision3会创建一个名为
     <strong>
      new.UV2
     </strong>
     的工程文件，这个工程文件里包含了缺省的目标和文件组名。在
     <strong>
      Project Workspace – Files
     </strong>
     里可以看到这些目标和文件组名。
    </p>
    创建一个新的工程时,µVision 3会提示为目标工程选择一款CPU。
    <strong>
     Select Device
    </strong>
    对话框显示了µVision3的设备数据库,如图所选择的芯片类型为ATMEL公司的AT91SAM7X256芯片。
    <br/>
    <p>
     <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157252_3053.png">
      <br/>
     </img>
    </p>
    <p>
    </p>
    <p align="left">
     嵌入式程序需要通过CPU的初始化代码来配置目标硬件。这种启动代码会根据用户所选择的工具链的不同而不同。因此这些文件可能需要作适当的修改以匹配目标硬件。对于大部分设备来说，µVision3 会提示复制CPU指定的启动代码到工程中去。启动代码负责配置设备微处理器和初始化编译器运行时系统。因此，建议在提示中选择
     <strong>
      YES
     </strong>
     。后续用户可根据需要对生成的启动文件代码进行相应修改。此外，μVision 3 里大部分启动代码文件都对应有一个配置向导(Configuration Wizard)，它提供了一种菜单驱动方式来配置目标板的启动代码。
    </p>
    <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157308_5809.png">
     <br/>
     <p>
     </p>
     <p>
      开发工具提供缺省的启动代码，对于大部分单芯片应用程序来说是一个很好的起点，但是开发者必须根据目标硬件来调整部分启动代码的配置，否则很可能是无法使用。例如，CPU/PLL 时钟和总线系统往往会根据目标系统的不同而不同，这些内容不能够自动地配置。一些设备还提供了片上部件的使能/禁止可选项。这就需要用户对目标硬件有足够的了解，才能确保启动代码的配置和目标硬件完全匹配。
     </p>
     <p align="left">
      三、创建新的源文件并将其添加到工程中
     </p>
     <p align="left">
      通过选择菜单选项File-New（快捷键ctrl+N）来创建一个新的源文件。选项选中后会创建一个空的编辑窗口，用户可在此窗口中输入源代码。若以扩展名*.c保存文件，则即建立一个C格式文件，若以.asm保存文件，则创建一个汇编格式文件。
     </p>
     源文件创建完毕后，可以在工程里添加此文件。一般可通过单击鼠标右键打开局部菜单，选择添加文件选项，通过选择打开的对话框中的文件实现文件的添加。如图所示。在将文件添加到工程中后，用户即可在文件中编辑相应代码。（当然，也可将代码在文件中编辑完毕后将其添加到工程中）
     <br/>
     <p>
      <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157373_9545.png">
       <br/>
      </img>
     </p>
     <p>
     </p>
     <p align="left">
      四、配置目标硬件的相关选项
     </p>
     <p align="left">
      在μVision 3 中，用户可根据目标硬件的实际情况对工程进行配置。通过点击目标工具栏“魔法棒”图标或单击菜单项
      <strong>
       Project-&gt;Options for Target
      </strong>
      ，在弹出的Target 页面可指定目标硬件和所选择设备片内组件的相关参数，在
      <strong>
       Options – Target
      </strong>
      中包含了创建一个新应用程序所需的所有设置。下图为本示例的相关设置。
     </p>
     <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157425_3197.png">
      <br/>
      <p>
      </p>
      <table border="1" cellpadding="0" cellspacing="0" width="100%">
       <tbody>
        <tr>
         <td style="background:rgb(224,224,224)">
          <p align="left">
           <strong>
            XTAL
           </strong>
          </p>
         </td>
         <td style="background:rgb(224,224,224)">
          <p align="left">
           设备的晶振频率。大部分基于ARM的微控制器使用片内PLL 作为CPU 时钟源。多数情况下CPU 时钟和晶振频率是不一致的，依据硬件设备不同设置其相应的值。
          </p>
         </td>
        </tr>
        <tr>
         <td style="background:rgb(224,224,224)">
          <p align="left">
           <strong>
            Operating System
           </strong>
          </p>
         </td>
         <td style="background:rgb(224,224,224)">
          <p align="left">
           允许为目标工程选择一个实时操作系统。
          </p>
         </td>
        </tr>
        <tr>
         <td style="background:rgb(224,224,224)">
          <p align="left">
           <strong>
            On-Chip
            <br/>
            ROM / RAM
           </strong>
          </p>
         </td>
         <td style="background:rgb(224,224,224)">
          <p align="left">
           定义片内的内存部件的地址空间以供链接器/定位器使用。注意对于一些设备来说需要在启动代码中反映出这些配置。
          </p>
         </td>
        </tr>
       </tbody>
      </table>
      <span style="font-family:宋体; font-size:9pt">
       五、创建应用程序代码，编译工程生成目标文件
      </span>
      <br/>
      <p>
      </p>
      <p>
      </p>
      <p>
      </p>
      <p>
       <span style="font-family:宋体; font-size:9pt">
        <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157498_4927.png">
         <br/>
        </img>
       </span>
      </p>
      <p>
       <span style="font-family:宋体; font-size:9pt">
       </span>
      </p>
      <p>
       <span style="font-size:9pt">
        应用程序代码编写完毕后，接下来的工作是编译链接工程。单击工具栏中
       </span>
       <strong>
        <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
         Build Target
        </span>
       </strong>
       <span style="font-size:9pt">
        图标可编译链接工程文件。如果源程序中存在语法错误，
       </span>
       <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
        μVision
       </span>
       <span style="font-size:9pt">
        则会在
       </span>
       <strong>
        <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
         Output Window-&gt;Build
        </span>
       </strong>
       <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
       </span>
       <span style="font-size:9pt">
        窗口中显示出错误和警告信息。双击提示信息所在行，就会在
       </span>
       <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
        μVision3
       </span>
       <span style="font-size:9pt">
        编辑窗口里打开并显示相应的出错源文件，光标会定位在该文件的出错行上，以便用户快速定位出错位置。
       </span>
       <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
       </span>
      </p>
      <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157535_2859.png">
       <br/>
       <p>
        <span style="font-family:宋体; font-size:9pt">
         <span style="font-family:宋体; font-size:9pt">
          应用程序在调试通过后需要生成
         </span>
         <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
          HEX
         </span>
         <span style="font-family:宋体; font-size:9pt">
          文件，用于下载到
         </span>
         <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
          EPROM
         </span>
         <span style="font-family:宋体; font-size:9pt">
          编程器中或仿真器中。在工程配置界面的
         </span>
         <strong>
          <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
           Options for Target-&gt;Output
          </span>
         </strong>
         <span style="font-family:宋体; font-size:9pt">
          中选择
         </span>
         <strong>
          <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
           Create HEX file
          </span>
         </strong>
         <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
         </span>
         <span style="font-family:宋体; font-size:9pt">
          选项，
         </span>
         <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
          μVision 3
         </span>
         <span style="font-family:宋体; font-size:9pt">
          会在编译过程中同时产生
         </span>
         <span lang="EN-US" style="font-family:Verdana,sans-serif; font-size:9pt">
          HEX
         </span>
         <span style="font-family:宋体; font-size:9pt">
          文件。
         </span>
         <br/>
        </span>
       </p>
       <p>
        <span style="font-family:宋体; font-size:9pt">
         <span style="font-family:宋体; font-size:9pt">
          <img alt="" src="https://img-my.csdn.net/uploads/201301/14/1358157569_3583.png">
           <br/>
          </img>
         </span>
        </span>
       </p>
       <p>
        <span style="font-family:宋体; font-size:9pt">
         <span style="font-family:宋体; font-size:9pt">
         </span>
        </span>
       </p>
       <p align="left">
        至此，若正确的配置加上编译无错误信息后，会在工程目录下生成.hex的目标文件，此可通过仿真器将目标文件下载到目标板上调试或运行。
       </p>
       <p align="left">
       </p>
      </img>
     </img>
    </img>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f7068656e69787966:2f61727469636c652f64657461696c732f3432323432313337" class_="artid" style="display:none">
 </p>
</div>


