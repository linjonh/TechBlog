---
layout: post
title: "Python自然语言处理只需要5行代码"
date: 2024-12-28 18:00:00 +0800
description: "Python自然语言处理只需5行代码一、前言人工智能是Python语言的一大应用热门，而自然语言处理"
keywords: "Python自然语言处理只需要5行代码"
categories: ['Python', 'Python']
tags: ['无标签']
artid: "105057106"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=105057106
    alt: "Python自然语言处理只需要5行代码"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Python自然语言处理只需要5行代码
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="Python5_0">
     </a>
     Python自然语言处理只需要5行代码
    </h2>
    <h3>
     <a id="_2">
     </a>
     一、前言
    </h3>
    <p>
     人工智能是Python语言的一大应用热门，而自然语言处理又是人工智能的一大方向。 自然语言处理（ natural language processing ）简称NLP，是研究人同计算机之间用自然语言通信的一种方法。我们都知道，计算机本质上只认识0和1，但是通过编程语言我们可以使用编程语言同计算机交流。这实际上就是程序员同计算机之间的通信，而我们日常生活中使用的是自然语言，是一种带有情感的语言。那么要怎么使计算机理解这种带有情感的语言呢？这就是自然语言处理研究的内容了。
    </p>
    <p>
     语言的情绪识别是自然语言处理的一种操作，如果要我们从0开始实现情绪识别是比较繁琐的。首先我们需要准备好足够的数据，为了让计算机更好的理解，我们还需要对数据进行预处理，之后需要训练数据，有了训练数据我们才能开始情绪识别。识别的准确率在于数据的相关性和数据量，数据相关性越高，数据量越大，识别的准确率就越高。
    </p>
    <p>
     然而，我们使用paddlehub可以很快的实现情绪识别，我们先看看如何安装。
    </p>
    <h3>
     <a id="paddlehub_10">
     </a>
     二、安装paddlehub
    </h3>
    <p>
     paddlehub是百度飞桨PaddlePaddle中的一个模型库，使用paddlepaddle可以很快的实现多种多样的操作，其中就有我们今天要说到的文字情绪识别，而且代码非常简单。首先我们需要安装paddlepaddle，我们进入官网
     <a href="https://www.paddlepaddle.org.cn/install/quick" rel="nofollow">
      https://www.paddlepaddle.org.cn/install/quick
     </a>
     ，进入官网后可以看到如下界面：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1cf1d169e0ca8879a7aab4e0531f1093.png#pic_center"/>
    </p>
    <p>
     我们可以根据自己Python版本，计算机系统等选择安装方式。关于paddlepaddle支持版本等信息可以在官网中查看，这里就不赘述了。我使用的是Python3.7，这里直接使用pip安装，我们在控制台执行下列语句
    </p>
    <pre><code class="prism language-bash">python -m pip <span class="token function">install</span> paddlepaddle -i https://mirror.baidu.com/pypi/simple
</code></pre>
    <p>
     然后在控制台查看是否安装成功。先输入
     <code>
      Python
     </code>
     ，然后执行
     <code>
      import paddle.fluid
     </code>
     ，再执行
     <code>
      paddle.fluid.install_check.run_check()
     </code>
     如下：
    </p>
    <pre><code class="prism language-bash">C:\Users\zaxwz<span class="token operator">&gt;</span>python
Python 3.7.6 <span class="token punctuation">(</span>tags/v3.7.6:43364a7ae0, Dec 19 2019, 00:42:30<span class="token punctuation">)</span> <span class="token punctuation">[</span>MSC v.1916 64 bit <span class="token punctuation">(</span>AMD64<span class="token punctuation">)</span><span class="token punctuation">]</span> on win32
Type <span class="token string">"help"</span>, <span class="token string">"copyright"</span>, <span class="token string">"credits"</span> or <span class="token string">"license"</span> <span class="token keyword">for</span> <span class="token function">more</span> information.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> paddle.fluid
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> paddle.fluid.install_check.run_check<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     如果显示
     <code>
      Your Paddle is installed successfully! Let's start deep Learning with Paddle now
     </code>
     就表示安装成功了。另外我们还需要安装paddlehub，这里同样是使用pip安装，执行语句如下：
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> -i https://mirror.baidu.com/pypi/simple paddlehub
</code></pre>
    <p>
     把paddlepaddle和paddlehub安装成功后我们就可以开始写代码了。
    </p>
    <h3>
     <a id="_40">
     </a>
     三、情绪识别
    </h3>
    <h4>
     <a id="1_42">
     </a>
     （1）情绪识别
    </h4>
    <p>
     使用paddlehub完成情绪识别的步骤如下：
    </p>
    <ol>
     <li>
      导入模块
     </li>
     <li>
      加载模型
     </li>
     <li>
      准备句子
     </li>
     <li>
      识别情绪
     </li>
    </ol>
    <p>
     而完成上面的步骤只需要四行代码，另外我们需要输出一下识别的结果，一共就是五行代码，下面让我们看看这五行神奇的代码：
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 导入模块</span>
<span class="token keyword">import</span> paddlehub <span class="token keyword">as</span> hub
<span class="token comment"># 加载模型</span>
senta <span class="token operator">=</span> hub<span class="token punctuation">.</span>Module<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'senta_lstm'</span><span class="token punctuation">)</span>
<span class="token comment"># 准备句子</span>
sentence <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'你真美'</span><span class="token punctuation">]</span>
<span class="token comment"># 情绪识别</span>
result <span class="token operator">=</span> senta<span class="token punctuation">.</span>sentiment_classify<span class="token punctuation">(</span>data<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"text"</span><span class="token punctuation">:</span>sentence<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># 输出识别结果</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre>
    <p>
     识别结果如下：
    </p>
    <pre><code class="prism language-python"><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'你真美'</span><span class="token punctuation">,</span> <span class="token string">'sentiment_label'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'sentiment_key'</span><span class="token punctuation">:</span> <span class="token string">'positive'</span><span class="token punctuation">,</span> <span class="token string">'positive_probs'</span><span class="token punctuation">:</span> <span class="token number">0.9602</span><span class="token punctuation">,</span> <span class="token string">'negative_probs'</span><span class="token punctuation">:</span> <span class="token number">0.0398</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre>
    <p>
     我们可以看到准备的句子是列表类型，识别的结果也是列表类型，结果中列表的元素是一个字典。在这个字典列表中，就包含了我们识别的结果。下面我们来分析一下这个字典。
    </p>
    <h4>
     <a id="2_74">
     </a>
     （2）结果分析
    </h4>
    <p>
     结果字典中包含了4个字段，我们以表格的形式展示一下：
    </p>
    <table>
     <thead>
      <tr>
       <th align="center">
        字段名称
       </th>
       <th align="center">
        字段含义
       </th>
       <th align="center">
        解释
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="center">
        text
       </td>
       <td align="center">
        识别的源文本
       </td>
       <td align="center">
        识别的源文本
       </td>
      </tr>
      <tr>
       <td align="center">
        sentiment_label
       </td>
       <td align="center">
        分类标签
       </td>
       <td align="center">
        1为积极，0为消极
       </td>
      </tr>
      <tr>
       <td align="center">
        sentiment_key
       </td>
       <td align="center">
        分类结果
       </td>
       <td align="center">
        positive为积极，negative为消极
       </td>
      </tr>
      <tr>
       <td align="center">
        positive_probs
       </td>
       <td align="center">
        积极率
       </td>
       <td align="center">
        情绪为积极的可能性
       </td>
      </tr>
      <tr>
       <td align="center">
        negative_probs
       </td>
       <td align="center">
        消极率
       </td>
       <td align="center">
        情绪为消极的可能性
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     上面的表格是本人编的，用词不当的地方多见谅。我们对照上述表可以分析一下我们上述程序的结果。其含义就是语句“你真美”中包含了积极的情绪。我们再多看几个例子：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> paddlehub <span class="token keyword">as</span> hub

senta <span class="token operator">=</span> hub<span class="token punctuation">.</span>Module<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'senta_lstm'</span><span class="token punctuation">)</span>

sentence <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'你真美'</span><span class="token punctuation">,</span>
    <span class="token string">'你真丑'</span><span class="token punctuation">,</span>
    <span class="token string">'我好难过'</span><span class="token punctuation">,</span>
    <span class="token string">'我不开心'</span><span class="token punctuation">,</span>
    <span class="token string">'这个游戏好好玩'</span><span class="token punctuation">,</span>
    <span class="token string">'什么垃圾游戏'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

results <span class="token operator">=</span> senta<span class="token punctuation">.</span>sentiment_classify<span class="token punctuation">(</span>data<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"text"</span><span class="token punctuation">:</span>sentence<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> result <span class="token keyword">in</span> results<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre>
    <p>
     识别结果如下：
    </p>
    <pre><code class="prism language-python"><span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'你真美'</span><span class="token punctuation">,</span> <span class="token string">'sentiment_label'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'sentiment_key'</span><span class="token punctuation">:</span> <span class="token string">'positive'</span><span class="token punctuation">,</span> <span class="token string">'positive_probs'</span><span class="token punctuation">:</span> <span class="token number">0.9602</span><span class="token punctuation">,</span> <span class="token string">'negative_probs'</span><span class="token punctuation">:</span> <span class="token number">0.0398</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'你真丑'</span><span class="token punctuation">,</span> <span class="token string">'sentiment_label'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sentiment_key'</span><span class="token punctuation">:</span> <span class="token string">'negative'</span><span class="token punctuation">,</span> <span class="token string">'positive_probs'</span><span class="token punctuation">:</span> <span class="token number">0.0033</span><span class="token punctuation">,</span> <span class="token string">'negative_probs'</span><span class="token punctuation">:</span> <span class="token number">0.9967</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'我好难过'</span><span class="token punctuation">,</span> <span class="token string">'sentiment_label'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'sentiment_key'</span><span class="token punctuation">:</span> <span class="token string">'positive'</span><span class="token punctuation">,</span> <span class="token string">'positive_probs'</span><span class="token punctuation">:</span> <span class="token number">0.5324</span><span class="token punctuation">,</span> <span class="token string">'negative_probs'</span><span class="token punctuation">:</span> <span class="token number">0.4676</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'我不开心'</span><span class="token punctuation">,</span> <span class="token string">'sentiment_label'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sentiment_key'</span><span class="token punctuation">:</span> <span class="token string">'negative'</span><span class="token punctuation">,</span> <span class="token string">'positive_probs'</span><span class="token punctuation">:</span> <span class="token number">0.1936</span><span class="token punctuation">,</span> <span class="token string">'negative_probs'</span><span class="token punctuation">:</span> <span class="token number">0.8064</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'这个游戏好好玩'</span><span class="token punctuation">,</span> <span class="token string">'sentiment_label'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'sentiment_key'</span><span class="token punctuation">:</span> <span class="token string">'positive'</span><span class="token punctuation">,</span> <span class="token string">'positive_probs'</span><span class="token punctuation">:</span> <span class="token number">0.9933</span><span class="token punctuation">,</span> <span class="token string">'negative_probs'</span><span class="token punctuation">:</span> <span class="token number">0.0067</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token string">'什么垃圾游戏'</span><span class="token punctuation">,</span> <span class="token string">'sentiment_label'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sentiment_key'</span><span class="token punctuation">:</span> <span class="token string">'negative'</span><span class="token punctuation">,</span> <span class="token string">'positive_probs'</span><span class="token punctuation">:</span> <span class="token number">0.0108</span><span class="token punctuation">,</span> <span class="token string">'negative_probs'</span><span class="token punctuation">:</span> <span class="token number">0.9892</span><span class="token punctuation">}</span>
</code></pre>
    <p>
     上面有6个句子，大多数都成功识别了情绪，但是
     <code>
      我好难过
     </code>
     识别的结果为积极，很明显是错误的。总体来说，对于简单语句的识别还是比较准的。另外，如果对识别的准确率不满的话，我们还可以训练自己的数据集，详细操作可以参考项目地址
     <a href="https://github.com/PaddlePaddle/models/tree/develop/PaddleNLP/sentiment_classification">
      https://github.com/PaddlePaddle/models/tree/develop/PaddleNLP/sentiment_classification
     </a>
     。
    </p>
    <p>
     另外在这里顺便给大家免费发点福利：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d85011e6ea94ef3a1a15a53819cbedb2.jpeg#pic_center"/>
    </p>
    <p>
     哈哈，你没有听错苦逼的我也有助理了。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f5a61636b536f636b2f:61727469636c652f64657461696c732f313035303537313036" class_="artid" style="display:none">
 </p>
</div>


