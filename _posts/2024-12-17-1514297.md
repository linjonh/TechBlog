---
layout: post
title: "理解-IBM-Lotus-Domino-邮件数据库的限额"
date: 2024-12-17 10:24:51 +0800
description: "理解 IBM Lotus Domino 邮件数据库的限额"
keywords: "your mail file has exceeded"
categories: ['']
tags: ['路由器', '服务器', '数据库', 'Lotus', 'Ibm', 'Database']
artid: "1514297"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=1514297
    alt: "理解-IBM-Lotus-Domino-邮件数据库的限额"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     理解 IBM Lotus Domino 邮件数据库的限额
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
     <tbody>
      <tr>
       <td width="100%">
        <h2>
         理解 IBM Lotus Domino 邮件数据库的限额
        </h2>
        <img alt="" class="display-img" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="1"/>
       </td>
       <td class="no-print" width="192">
       </td>
      </tr>
     </tbody>
    </table>
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
     <tbody>
      <tr>
       <td width="10">
        <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="10"/>
       </td>
       <td width="100%">
        <p>
         级别: 中级
        </p>
        <p>
         <a href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#author" rel="nofollow">
          <font color="#996699">
           Joseph Anderson
          </font>
         </a>
         (
         <a href="mailto:joseph_anderson@us.ibm.com?subject=理解%20IBM%20Lotus%20Domino%20邮件数据库的限额" rel="nofollow">
          <font color="#5c81a7">
           joseph_anderson@us.ibm.com
          </font>
         </a>
         ), IBM 认证咨询 I/T 专家, IBM
         <br/>
        </p>
        <p>
         2007 年 1 月 25 日
        </p>
        <blockquote>
         学习邮件限额的实现如何能显著增强管理团队控制邮件数据库大小的能力 —— 管理 IBM Lotus Domino 环境的一个重要能力。学习实现限额所需的步骤和对用户群的影响。
        </blockquote>
        <p>
         邮件数据库的大小以及它们在服务器上使用的资源是许多公司都非常关注的。邮件数据库越大，管理团队管理备份和维护环境就越困难。另外，由于对处理器、内存、磁盘输入/输出（I/O）和带宽需求的增加，当用户访问数据库时会发现服务器和他们的工作站性能降低了。理解这一点很重要，即简单地维护邮件数据库的大小不能确保最佳的用户和服务器性能。除了大的邮件数据库，视图 —— 尤其是收件箱 —— 中文档的数量太多也能降低性能。
        </p>
        <p>
         由于法律上的原因，公司正面对日益严格的关于保留电子消息的法规，因此，确定适当的控制邮件数据库大小的方案需要的是精确的权衡。本文集中论述使用限额来帮助维持合理的邮件数据库大小。除了简单的限额实现之外，实现正确的邮件日志和存档功能以符合法律的要求也是重要的。
        </p>
        <p>
         IBM Lotus Domino 环境提供许多不同的配置设置以使在限额的实现方面更具有可伸缩性。邮件限额的基本配置是设置一个最大的限制值和一个警告门限，即使用户达到他们的限额后仍允许他们发送、接收和管理消息。但是，不让他们执行能影响邮件数据库大小的操作，例如保存新发送的消息或草稿、把新消息复制过来或者向邮件数据库添加新的设计元素。一种更高级的配置包括一些设置，只要邮件数据库超过它的限额时这些设置就会限制路由器发送和接收新消息的能力。
        </p>
        <p>
         在设置限额之前，邮件数据库的大小必须在预期的限额之下，否则将不应用限额。例如，如果在邮件数据库的大小是 125M 时试图对数据库设置 100M 的限额，那么直到邮件数据库减少至小于 100M 之前，将不会应用限额。会收到错误提示，但仍旧可以增加数据库的大小。
        </p>
        <p>
         <a name="N1004A">
          <span class="atitle">
           理解邮件数据库限额的元素
          </span>
         </a>
        </p>
        <p>
         本节复习数据库限额过程的元素，包括邮件数据库限额的标准配置以及通过使用邮件路由器提高限额的性能。另外，还提供关于邮件数据库大小限制和数据库的元素的信息，例如影响用户体验的软删除和压缩，帮助管理团队知道哪些邮件数据库已经达到警告门限和限额的服务器日志中的消息。
        </p>
        <p>
         <a name="N10054">
          <span class="smalltitle">
           <strong>
            <font size="3">
             邮件数据库限额的标准配置
            </font>
           </strong>
          </span>
         </a>
        </p>
        <p>
         默认情况下，当已经在邮件数据库上放置了限额时，路由器还是继续为用户传递邮件，包括发送/接收消息。这可以确保用户使用邮件数据库查看新传入的消息并相应地回复它们。但是，用户不能保存发送的邮件、保存草稿、添加日历实体或创建新的数据库元素，例如视图。
        </p>
        <p>
         <a name="N1005C">
          <span class="smalltitle">
           <strong>
            <font size="3">
             对邮件路由的增强配置
            </font>
           </strong>
          </span>
         </a>
        </p>
        <p>
         可以使用服务器配置文档来配置 Lotus Domino 环境，以便路由器限制用户向他们的邮件数据库传递消息的能力。用户仍旧可以发送消息，但是不能执行能增加数据库大小的功能，例如保存已发送的消息或草稿。可以定制这些路由器的设置以满足组织的需要。
        </p>
        <p>
         <a name="N10064">
          <span class="smalltitle">
           <strong>
            <font size="3">
             数据库大小的限制
            </font>
           </strong>
          </span>
         </a>
        </p>
        <p>
         对 Lotus Domino 数据库测试的最大大小是 64G，这实际上是由于底层操作系统的限制造成的。这是最大值；实际的大小取决于邮件文件所在的环境。服务器的大小与操作系统、处理器、内存和数据存储等有关，这些因素决定实际的大小。更进一步的信息，包括大收件箱对服务器性能的影响，请参考 developerWorks Lotus 文章 “
         <a href="http://www.ibm.com/developerworks/cn/lotus/notes-mail-files/" rel="nofollow">
          <font color="#5c81a7">
           对于大 Lotus Notes 邮件文件的最佳实践
          </font>
         </a>
         ”。
        </p>
        <p>
         <a name="N10070">
          <span class="smalltitle">
           <strong>
            <font size="3">
             软删除和减少邮件数据库的大小
            </font>
           </strong>
          </span>
         </a>
        </p>
        <p>
         当在邮件数据库中允许软删除时（根据邮件模板版本 7，对于邮件文件默认情况下是允许的），删除消息并不能立即减小邮件数据库的大小。在软删除所设置的一段时间内（默认情况下，消息设置为 48 小时以后过期）邮件仍旧保存在邮件数据库中。为了立即删除消息，必须打开邮件数据库的 Trash 文件夹，选择一条信息并单击 Delete Selected Item 按钮，或者单击 Trash 按钮以删除所有的消息。
        </p>
        <p>
         <a name="N10078">
          <span class="smalltitle">
           <strong>
            <font size="3">
             LOG.NSF 中与限额有关的消息
            </font>
           </strong>
          </span>
         </a>
        </p>
        <p>
         当数据库到达与数据库限额有关的某个门限时，下面的消息被放置在服务器的 LOG.NSF Miscellaneous Events 视图中（打开数据库时也显示它）：
        </p>
        <ul>
         <li>
          <strong>
           “Cannot allocate database object - database would exceed its disk quota.（不能分配数据库对象 —— 数据库将超过它的磁盘限额。）”
          </strong>
          <br/>
          这不会阻止用户访问数据库；如果没有可以使用的空间，它只是阻止用户添加任何能使数据库变大的元素。
         </li>
         <li>
          <strong>
           “Warning, database has exceeded its size warning threshold.（警告，数据库已经超过它的大小警告门限。）”
          </strong>
          <br/>
          仅仅警告用户接近超过限制，并在收到前面的警告前给用户一个减小数据库大小的机会。
         </li>
        </ul>
        <p>
        </p>
        <br/>
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
          <tr>
           <td>
            <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/05ac63f463130bd1876c1af927ae88a3.gif" width="100%">
             <br/>
             <img alt="" border="0" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="8"/>
            </img>
           </td>
          </tr>
         </tbody>
        </table>
        <table align="right" cellpadding="0" cellspacing="0" class="no-print">
         <tbody>
          <tr align="right">
           <td>
            <img alt="" height="4" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%">
             <br/>
             <table border="0" cellpadding="0" cellspacing="0">
              <tbody>
               <tr>
                <td>
                 <img alt="" border="0" height="16" src="https://i-blog.csdnimg.cn/blog_migrate/c34923c5525c03e01818932f9002b251.gif" width="16">
                  <br/>
                 </img>
                </td>
                <td align="right">
                 <a class="fbox" href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#main" rel="nofollow">
                  <strong>
                   <font color="#996699">
                    回页首
                   </font>
                  </strong>
                 </a>
                </td>
               </tr>
              </tbody>
             </table>
            </img>
           </td>
          </tr>
         </tbody>
        </table>
        <br/>
        <br/>
        <p>
         <a name="N10093">
          <span class="atitle">
           在邮件数据库上设置限额
          </span>
         </a>
        </p>
        <p>
         本节论述消息管理团队在配置邮件服务器的限额方面可以使用的不同选项。这些选项包括注册和/或创建邮件数据库后手工操作阶段的杠杆策略。
        </p>
        <p>
         <a name="N1009D">
          <span class="smalltitle">
           <strong>
            <font size="3">
             通过策略在注册时设置限额
            </font>
           </strong>
          </span>
         </a>
        </p>
        <p>
         当在 Lotus Domino 环境中创建用户时，通常利用注册策略来简化注册过程，并在注册策略文档包含一项来管理邮件数据库限额。
        </p>
        <p>
         第一个选项是设置实际数据库限额，这是在限额错误发送给用户之前数据库可以获得的最大空间。第二个设置是邮件数据库的警告门限，它触发发送给用户的警告消息。设置一个合理的警告门限是重要的（通常为限额的 75%-90%），以便在达到限额之前用户有足够的时间去减少他们的邮件数据库的大小。如果警告门限太接近于限额，一条消息就可能同时触发门限警告和超限额动作。更多有关配置注册策略的信息，请参考
         <a href="http://www.lotus.com/ldd/notesua.nsf/find/domino7b2" rel="nofollow">
          <font color="#5c81a7">
           Lotus Domino 7 Administrator Help
          </font>
         </a>
         中的 “Creating a registration policy settings document” 主题。
        </p>
        <p>
         为了查找这些设置，在 Lotus Notes 客户机上打开 Domino Directory。在 Configuration 文件夹的 Policies/Settings 视图中，单击 Add Settings 按钮。从按钮下拉列表中选择 Select Registration。在 Registration Settings 文档中，选择 Mail 附签。在 Advanced Mail Options 部分，启用 Set database quota 和 Set warning threshold 选项，填入适当的值（参见图 1）。单击 Save and Close 来关闭 Registration Settings 文档。
        </p>
        <br/>
        <br/>
        <a name="fig1">
         <strong>
          图 1. 注册设置文档的高级邮件选项
         </strong>
        </a>
        <br/>
        <img alt="注册设置文档的高级邮件选项" src="https://i-blog.csdnimg.cn/blog_migrate/8b99276a500755958b96a4794ecc01a2.png">
         <br/>
         <br/>
         <p>
          <a name="N100C0">
           <span class="smalltitle">
            <strong>
             <font size="3">
              通过 Register Person 过程设置限额
             </font>
            </strong>
           </span>
          </a>
         </p>
         <p>
          当通过 Domino Administrator 客户机注册一个用户时，可以在 Register Personyou 对话框中配置邮件限额和警告门限。如果选择 Advanced 选项，则 Mail 附签会显示在左侧的导航条上；单击它来查看如图 2 所示的对话框。选择 Set database quota 和 Set warning threshold 选项并填入适当的值。在用户注册以后，应用限额。
         </p>
         <br/>
         <br/>
         <a name="fig2">
          <strong>
           图 2. Register Person 对话框
          </strong>
         </a>
         <br/>
         <img alt="Register Person 对话框" src="https://i-blog.csdnimg.cn/blog_migrate/ec5bd0695bed287ae1640939c427f28c.png">
          <br/>
          <br/>
          <p>
           <a name="N100D9">
            <span class="smalltitle">
             <strong>
              <font size="3">
               在创建邮件数据库之后设置和更改限额
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           为了在邮件数据库上设置和更改限额，按以下的步骤进行操作：
          </p>
          <ol>
           <li>
            在 Domino Administrator 客户机上，单击 Files 附签，然后查找邮件目录。
           </li>
           <li>
            选择一个或多个邮件数据库，然后在 Tools 域，单击 Database 并选择 Quotas。
           </li>
           <li>
            在 Set Quotas 对话框中，选择 “Set database quota to” 选项，然后输入限额值。
           </li>
           <li>
            选择 “Set warning threshold to” 选项，然后输入门限值。参见图 3。
            <br/>
            <br/>
            <br/>
            <a name="fig3">
             <strong>
              图 3. Set Quotas 对话框
             </strong>
            </a>
            <br/>
            <img alt="Set Quotas 对话框" src="https://i-blog.csdnimg.cn/blog_migrate/7a2225c1c8aed2916e341ad4f6af005b.png"/>
            <br/>
            <br/>
           </li>
           <li>
            单击 OK 继续；新限额应用到邮件数据库。
           </li>
          </ol>
          <br/>
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
           <tbody>
            <tr>
             <td>
              <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/05ac63f463130bd1876c1af927ae88a3.gif" width="100%"/>
              <br/>
              <img alt="" border="0" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="8"/>
             </td>
            </tr>
           </tbody>
          </table>
          <table align="right" cellpadding="0" cellspacing="0" class="no-print">
           <tbody>
            <tr align="right">
             <td>
              <img alt="" height="4" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%"/>
              <br/>
              <table border="0" cellpadding="0" cellspacing="0">
               <tbody>
                <tr>
                 <td>
                  <img alt="" border="0" height="16" src="https://i-blog.csdnimg.cn/blog_migrate/c34923c5525c03e01818932f9002b251.gif" width="16"/>
                  <br/>
                 </td>
                 <td align="right">
                  <a class="fbox" href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#main" rel="nofollow">
                   <strong>
                    <font color="#996699">
                     回页首
                    </font>
                   </strong>
                  </a>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
          <br/>
          <br/>
          <p>
           <a name="N10106">
            <span class="atitle">
             用户对限额的体验
            </span>
           </a>
          </p>
          <p>
           当用户达到了他们邮件数据库的门限或最大限额时，会看到要求他们采取措施来减少邮件数据库大小的错误对话框。
          </p>
          <p>
           <a name="N10110">
            <span class="smalltitle">
             <strong>
              <font size="3">
               超过限额警告
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           如果邮件数据库设置了警告门限，当用户打开数据库或者试图保存草稿或新的已发送消息时，会显示以下的错误：
          </p>
          <code>
           “Your mail file has exceeded the warning size threshold of 51200 Kb.
           <br/>
           You should delete messages, empty the trash and compact your mail file or contact your Administrator for help.
           <br/>
           （您的邮件文件已经超过了警告大小门限值 51200 Kb。您应该删除消息、清空垃圾并压缩邮件文件，或者和您的管理员联系以获得帮助。）”
          </code>
          <br/>
          <br/>
          <p>
           在 IBM Lotus Domino Web Access 中就少了一些强制性；客户机具有一个标识您的邮件数据库大小的指示器，并用颜色变为红色来表示警告门限（参见图 4）。
          </p>
          <br/>
          <br/>
          <a name="fig4">
           <strong>
            图 4. Lotus Domino Web Access 警告门限指示器
           </strong>
          </a>
          <br/>
          <img alt="Lotus Domino Web Access 警告门限指示器" src="https://i-blog.csdnimg.cn/blog_migrate/8374de247b220d42024d749759182c97.png"/>
          <br/>
          <br/>
          <p>
           <a name="N10138">
            <span class="smalltitle">
             <strong>
              <font size="3">
               超过限额警告
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           当邮件数据库的大小已经超过它们的门限值时，当用户试图发送并选择保存消息时会显示以下的错误：
          </p>
          <code>
           “Unable to write to your mail database which is currently 84492 KB. Saving this message would exceed the disk quota of 76800 KB by 7694 KB.
           <br/>
           You should delete messages, empty the trash and compact your mail file or contact your Administrator for help.
           <br/>
           （不能写入邮件数据库，邮件数据库当前的大小是 84492 KB。保存此消息后将超过 76800 KB 的磁盘限额 7694 KB。您应该删除消息，清空垃圾并压缩邮件文件，或者与管理员联系以获得帮助。）”
          </code>
          <br/>
          <br/>
          <p>
           如果用户试图使用 Lotus Domino Web Access 客户机发送邮件，将显示以下的错误消息：
          </p>
          <code>
           “Domino Web Access Warning
           <br/>
           Problem: - Unable to write to database because database would exceed its disk quota.
           <br/>
           Solution: Click here to close this window and return to the main window.（Domino Web Access 警告
           <br/>
           问题：— 因为数据库将超过它的磁盘限额而不能写入数据库。
           <br/>
           解决方法：单击此处关闭该窗口并返回主窗口。）”
          </code>
          <br/>
          <br/>
          <p>
           用户必须遵循下面描述的压缩步骤来减小邮件数据库，避免接收限额警告。
          </p>
          <br/>
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
           <tbody>
            <tr>
             <td>
              <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/05ac63f463130bd1876c1af927ae88a3.gif" width="100%"/>
              <br/>
              <img alt="" border="0" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="8"/>
             </td>
            </tr>
           </tbody>
          </table>
          <table align="right" cellpadding="0" cellspacing="0" class="no-print">
           <tbody>
            <tr align="right">
             <td>
              <img alt="" height="4" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%"/>
              <br/>
              <table border="0" cellpadding="0" cellspacing="0">
               <tbody>
                <tr>
                 <td>
                  <img alt="" border="0" height="16" src="https://i-blog.csdnimg.cn/blog_migrate/c34923c5525c03e01818932f9002b251.gif" width="16"/>
                  <br/>
                 </td>
                 <td align="right">
                  <a class="fbox" href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#main" rel="nofollow">
                   <strong>
                    <font color="#996699">
                     回页首
                    </font>
                   </strong>
                  </a>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
          <br/>
          <br/>
          <p>
           <a name="N10164">
            <span class="atitle">
             压缩邮件数据库
            </span>
           </a>
          </p>
          <p>
           当用户删除消息或者清空垃圾之后，他们必须压缩服务器上的邮件数据库。通常，压缩任务在服务器空闲时间运行，因此用户必须手动压缩他们的数据库。下面的几节复习进行手动压缩的过程以及基于服务器的压缩任务。
          </p>
          <p>
           <a name="N1016E">
            <span class="smalltitle">
             <strong>
              <font size="3">
               用户对邮件数据库的压缩
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           手动压缩服务器上的邮件数据库能调整它占用空间的大小，使之降低到限额之下。可以通过以下的步骤完成手动压缩：
          </p>
          <ol>
           <li>
            在 Lotus Notes 中，选择 File – Database – Properties 来打开 Database Properties 窗口。
           </li>
           <li>
            选择 Info 附签，然后单击 % used 按钮来查看可以重新获得的空间的数量（参见图 5）。
           </li>
           <li>
            单击 Compact 按钮来减小数据库的大小。
           </li>
          </ol>
          <br/>
          <br/>
          <a name="fig5">
           <strong>
            图 5. Database Properties Information 附签
           </strong>
          </a>
          <br/>
          <img alt="Database Properties Information 附签" src="https://i-blog.csdnimg.cn/blog_migrate/c915d760c9d3ce0e7bfe16f7bf9d360a.png"/>
          <br/>
          <br/>
          <p>
           完成压缩任务之后，就可以使用邮件数据库了（只有通过完整的 Lotus Notes 客户机，Compact 才可以使用）。
          </p>
          <p>
           启用事务日志时，手动压缩操作的运行过程与禁用事务日志时不同。特别地，当通过选择 Server 文档的 Transactional Logging 附签上的 Quota enforcement 域中的 “Check space used in file when adding a note” 选项增强限额时，必须强制服务器忽略数据库中的空白（参见图 6）。
          </p>
          <br/>
          <br/>
          <a name="fig6">
           <strong>
            图 6. Transactional Logging 附签
           </strong>
          </a>
          <br/>
          <img alt="Transactional Logging 附签" src="https://i-blog.csdnimg.cn/blog_migrate/609ae8816eb95c30fae85e04eb43f851.png"/>
          <br/>
          <br/>
          <p>
           <a name="N101A8">
            <span class="smalltitle">
             <strong>
              <font size="3">
               在服务器上设置压缩
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           在服务器上配置压缩任务是管理邮件服务器和避免前面概述的手动操作步骤的最简单的方法。下面的步骤概述了通过 Server Configuration 文档来设置压缩任务的过程：
          </p>
          <ol>
           <li>
            在 Domino Directory 中，打开 Configuration 文件夹的 Servers/Programs 视图，然后单击 Add Program 按钮。
           </li>
           <li>
            用适当的值完成 Program 文档，它的示例如图 7 所示。根据下面的提示来操作：
            <ul>
             <li>
              Command line 域可以包含许多选项；例如参数 -B -S 10，表示当数据库有超过10% 的空白时进行压缩。
             </li>
             <li>
              设置 Run at times 和 Days of week 域以避免其他的管理任务。
             </li>
            </ul>
           </li>
           <li>
            单击 Save &amp; Close 来初始化 Program 文档。
           </li>
          </ol>
          <br/>
          <br/>
          <a name="fig7">
           <strong>
            图 7. Compact Program 文档的示例
           </strong>
          </a>
          <br/>
          <img alt="Compact Program 文档的示例" src="https://i-blog.csdnimg.cn/blog_migrate/8ac4ea5d27e63b638954d62728048e28.png"/>
          <br/>
          <br/>
          <p>
           -B 开关更改 DBIID。如果事务日志用于备份，只在完全备份计划（每周一次）之前使用此开关。运行不带此开关选项（默认设置）的压缩不会更改 DBIID；如果使用事务日志，可以让它每夜都运行，回收空白，但不减少文件的大小。
          </p>
          <p>
           有关实现压缩任务时可以使用的更多开关选项，请参考
           <a href="http://www.lotus.com/ldd/notesua.nsf/find/domino7b2" rel="nofollow">
            <font color="#5c81a7">
             Lotus Domino 7 Administrator Help
            </font>
           </a>
           中的 “Compact options” 小节。
          </p>
          <br/>
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
           <tbody>
            <tr>
             <td>
              <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/05ac63f463130bd1876c1af927ae88a3.gif" width="100%"/>
              <br/>
              <img alt="" border="0" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="8"/>
             </td>
            </tr>
           </tbody>
          </table>
          <table align="right" cellpadding="0" cellspacing="0" class="no-print">
           <tbody>
            <tr align="right">
             <td>
              <img alt="" height="4" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%"/>
              <br/>
              <table border="0" cellpadding="0" cellspacing="0">
               <tbody>
                <tr>
                 <td>
                  <img alt="" border="0" height="16" src="https://i-blog.csdnimg.cn/blog_migrate/c34923c5525c03e01818932f9002b251.gif" width="16"/>
                  <br/>
                 </td>
                 <td align="right">
                  <a class="fbox" href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#main" rel="nofollow">
                   <strong>
                    <font color="#996699">
                     回页首
                    </font>
                   </strong>
                  </a>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
          <br/>
          <br/>
          <p>
           <a name="N101E0">
            <span class="atitle">
             使用路由器增强限额执行
            </span>
           </a>
          </p>
          <p>
           为了限制传递已经超过限额的用户的邮件，可以修改一些与路由器有关的配置设置来确保严格执行限额。
          </p>
          <p>
           <a name="N101EA">
            <span class="smalltitle">
             <strong>
              <font size="3">
               设置路由器参数来执行限额
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           为了从路由器执行限额，按以下步骤操作：
          </p>
          <ol>
           <li>
            在 Domino Directory 中，打开 Configuration 文件夹中的 Servers/Configurations 视图来编辑想要在其上控制限额的邮件服务器的 Configuration 文档。
           </li>
           <li>
            在 Configuration Settings 文档中，选择 Router/SMTP - Restrictions and Controls - Delivery Controls 子附签（参见图 8）。在 Configuration Settings 文档的这一部分有许多选项可以使用。根据需要选择适当的选项，有关内容请参考
            <a href="http://www.lotus.com/ldd/notesua.nsf/find/domino7b2" rel="nofollow">
             <font color="#5c81a7">
              Lotus Domino 7 Administrator Help
             </font>
            </a>
            中的 “Setting quota controls for the Router section”。
            <br/>
            <br/>
            <br/>
            <a name="fig8">
             <strong>
              图 8. 样例 Configuration 文档
             </strong>
            </a>
            <br/>
            <img alt="样例 Configuration 文档" src="https://i-blog.csdnimg.cn/blog_migrate/6d80be47978ac9203e714517d2ee5ff7.png"/>
            <br/>
            <br/>
           </li>
           <li>
            单击 Save &amp; Close。
           </li>
          </ol>
          <p>
           在下次路由器配置更新之后更改才能生效，这可以通过在服务器控制台输入
           <code>
            tell router quit
           </code>
           来执行。在路由器停止以后，输入
           <code>
            load router
           </code>
           。这时路由器利用配置更改来执行限额。
          </p>
          <br/>
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
           <tbody>
            <tr>
             <td>
              <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/05ac63f463130bd1876c1af927ae88a3.gif" width="100%"/>
              <br/>
              <img alt="" border="0" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="8"/>
             </td>
            </tr>
           </tbody>
          </table>
          <table align="right" cellpadding="0" cellspacing="0" class="no-print">
           <tbody>
            <tr align="right">
             <td>
              <img alt="" height="4" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%"/>
              <br/>
              <table border="0" cellpadding="0" cellspacing="0">
               <tbody>
                <tr>
                 <td>
                  <img alt="" border="0" height="16" src="https://i-blog.csdnimg.cn/blog_migrate/c34923c5525c03e01818932f9002b251.gif" width="16"/>
                  <br/>
                 </td>
                 <td align="right">
                  <a class="fbox" href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#main" rel="nofollow">
                   <strong>
                    <font color="#996699">
                     回页首
                    </font>
                   </strong>
                  </a>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
          <br/>
          <br/>
          <p>
           <a name="N10220">
            <span class="atitle">
             路由器执行的限额的用户体验
            </span>
           </a>
          </p>
          <p>
           对于路由器执行的限额，当用户到达他们的邮件数据库的门限或最大限额时，将看到要求他们采取措施来减小邮件数据库大小的错误对话框。用户体验的不同之处是会进一步收到一封通知他们超过限额的电子邮件。
          </p>
          <p>
           <a name="N1022A">
            <span class="smalltitle">
             <strong>
              <font size="3">
               超过门限警告
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           当邮件数据库超过它的警告门限时，用户打开邮件数据库时会收到错误提示，然后会发现如图 9 所示的主题为 Quota Warning Report 的电子邮件。
          </p>
          <br/>
          <br/>
          <a name="fig9">
           <strong>
            图 9. 限额警告报告邮件
           </strong>
          </a>
          <br/>
          <img alt="限额警告报告邮件" src="https://i-blog.csdnimg.cn/blog_migrate/c9a95d31266cc8fc17baf0d46576e924.png"/>
          <br/>
          <br/>
          <p>
           如图 10 所示，消息包含有关他们的邮件数据库的当前状态。
          </p>
          <br/>
          <br/>
          <a name="fig10">
           <strong>
            图 10. 限额警告报告的示例
           </strong>
          </a>
          <br/>
          <img alt="限额警告报告的示例" src="https://i-blog.csdnimg.cn/blog_migrate/1f504f6ff6f2b451d1ea324a615a8ed1.png"/>
          <br/>
          <br/>
          <p>
           <a name="N10255">
            <span class="smalltitle">
             <strong>
              <font size="3">
               超过限额错误
              </font>
             </strong>
            </span>
           </a>
          </p>
          <p>
           同样地，当邮件数据库超过它的设置限额时，用户打开数据库时会收到错误消息。在邮件数据库中，用户能看到如图 11 所示的主题为 Over Quota Error 的消息。
          </p>
          <p>
           消息中包含关于邮件数据库当前状态的信息，图 11 所示是选中 “Deliver Anyway (Don’t obey quotas)” 选项时消息的示例（“What should you do?” 部分指出将继续传递新消息）。
          </p>
          <br/>
          <br/>
          <a name="fig11">
           <strong>
            图 11. 选中 “Deliver Anyway...” 选项时 Quota Error Report 的示例
           </strong>
          </a>
          <br/>
          <img alt="选中 “Deliver Anyway...” 选项时 Quota Error Report 的示例" src="https://i-blog.csdnimg.cn/blog_migrate/1291730ebeb3d4eacb6596719000a4eb.png"/>
          <br/>
          <br/>
          <p>
           如果将 Configuration 文档设置为 “Non deliver to originator”，则不会把消息传递到邮件数据库，但是如图 12 所示的 Quota Error Report 将传递给接收者（“What should you do?” 部分指出将不传递新消息并会把 Non-Delivery Report 传递给发送者）。
          </p>
          <br/>
          <br/>
          <a name="fig12">
           <strong>
            图 12. 选中 “Non deliver to originator” 选项时 Quota Error Report 的示例
           </strong>
          </a>
          <br/>
          <img alt="选中 “Non deliver to originator” 选项时 Quota Error Report 的示例" src="https://i-blog.csdnimg.cn/blog_migrate/97dbffe17f01f06db2a7b0f8e5f7fa95.png"/>
          <br/>
          <br/>
          <p>
           发送者会在他的邮件数据库中收到如图 13 所示的发件人为 Mail Router、主题为 DELIVERY FAILURE 的 Non-Delivery Report。
          </p>
          <br/>
          <br/>
          <a name="fig13">
           <strong>
            图 13. Non-Delivery Report 的示例
           </strong>
          </a>
          <br/>
          <img alt="Non-Delivery Report 的示例" src="https://i-blog.csdnimg.cn/blog_migrate/b8efaa693db4f455db944f944e5b5540.png"/>
          <br/>
          <br/>
          <br/>
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
           <tbody>
            <tr>
             <td>
              <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/05ac63f463130bd1876c1af927ae88a3.gif" width="100%"/>
              <br/>
              <img alt="" border="0" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="8"/>
             </td>
            </tr>
           </tbody>
          </table>
          <table align="right" cellpadding="0" cellspacing="0" class="no-print">
           <tbody>
            <tr align="right">
             <td>
              <img alt="" height="4" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%"/>
              <br/>
              <table border="0" cellpadding="0" cellspacing="0">
               <tbody>
                <tr>
                 <td>
                  <img alt="" border="0" height="16" src="https://i-blog.csdnimg.cn/blog_migrate/c34923c5525c03e01818932f9002b251.gif" width="16"/>
                  <br/>
                 </td>
                 <td align="right">
                  <a class="fbox" href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#main" rel="nofollow">
                   <strong>
                    <font color="#996699">
                     回页首
                    </font>
                   </strong>
                  </a>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
          <br/>
          <br/>
          <p>
           <a name="N10295">
            <span class="atitle">
             实现限额的案例分析
            </span>
           </a>
          </p>
          <p>
           每种环境都有不同的需求，知道这一点很重要，因此很难概括出可以应用到所有公司的一组标准或建议。下面的案例分析是要帮助您做出部署限额的成功的计划。
          </p>
          <p>
           XYZ 公司对邮件数据库的存储需求日益增长。最近，IT 团队与法律部门合作部署一个捕获通过环境传递的所有消息的消息日志系统。团队认为解决方案中不包含自动存档功能，由用户管理邮件数据库是最适合的做法。他们也决定实现基于 Lotus Domino 的限额以使数据库减到最小。
          </p>
          <p>
           IT 团队对公司当前电子邮件的使用模式进行了一次调查，确定通过环境的邮件数据库的平均大小是 234M。他们发现使用的数据库有四组不同的大小：
          </p>
          <ul>
           <li>
            小于 150 MB
           </li>
           <li>
            150-250 MB （有 50% 的人使用）
           </li>
           <li>
            250-400 MB （有 40% 的人使用）
           </li>
           <li>
            400 MB-13 GB（有 10% 的人使用）
           </li>
          </ul>
          <p>
           消息的平均大小相对较小，但是有许多大的图像（平均大小接近 10M）通过环境。
          </p>
          <p>
           IT 团队去业务部门开发一个把用户群的风险减到最小的实现限额的计划。业务部门却认为实现限额来限制通过路由器的消息的流动是不可接受的，会因此引起商业风险。他们认为一一解决那些代表最大风险（超过 500M）的用户是重要的，IT 小组获得了对于业务很重要的用户名单。
          </p>
          <p>
           另外，业务部门同意 IT 团队提出的用户限额和限额 90% 的警告门限，要实现的一种四级方法如下：
          </p>
          <ul>
           <li>
            所有新用户和当前小于 210M 的用户的限额为 250 MB （225 MB 的警告门限），以便限额的实现不会使他们立即达到警告门限。
           </li>
           <li>
            所有邮件数据库的大小在 210-340 MB 之间的用户的限额为 400 MB（360 MB 的警告门限）。
           </li>
           <li>
            所有邮件数据库的大小在 340-600 MB 之间的用户的限额为 600 MB（540 MB 的警告门限）；决定逐一通知此类用户，并且如果超过 540M 的警告门限，他们能收到警告消息。
           </li>
           <li>
            所有邮件数据库的大小超过 600M 的用户的限额为 X+100 MB（X+50 MB 的警告门限）；即，他们的限额设置为他们当前邮件数据库的大小加上 100 MB，警告门限设置为当前邮件数据库的大小加上 50M。
           </li>
          </ul>
          <p>
           业务部门同意任何从低限额到高限额的变化都需要正当的商业理由和管理人员的同意。象征性的退费将应用到限额的变化上。
          </p>
          <p>
           IT 团队建立一个为所有新注册的用户设置 250M 限额（225M 的警告门限）的注册策略。团队把服务器上的所有用户分为前面的四类，并公布推出新限额系统的时间表。在应用新限额并生效六个月之后，IT 团队、业务部门与法律部门再次开会以确定限额适合公司。
          </p>
          <br/>
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
           <tbody>
            <tr>
             <td>
              <img alt="" height="1" src="https://i-blog.csdnimg.cn/blog_migrate/05ac63f463130bd1876c1af927ae88a3.gif" width="100%"/>
              <br/>
              <img alt="" border="0" height="6" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="8"/>
             </td>
            </tr>
           </tbody>
          </table>
          <table align="right" cellpadding="0" cellspacing="0" class="no-print">
           <tbody>
            <tr align="right">
             <td>
              <img alt="" height="4" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%"/>
              <br/>
              <table border="0" cellpadding="0" cellspacing="0">
               <tbody>
                <tr>
                 <td>
                  <img alt="" border="0" height="16" src="https://i-blog.csdnimg.cn/blog_migrate/c34923c5525c03e01818932f9002b251.gif" width="16"/>
                  <br/>
                 </td>
                 <td align="right">
                  <a class="fbox" href="http://www-128.ibm.com/developerworks/cn/lotus/domino-mail-quotas/index.html#main" rel="nofollow">
                   <strong>
                    <font color="#996699">
                     回页首
                    </font>
                   </strong>
                  </a>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
          <br/>
          <br/>
          <p>
           <a name="N102D2">
            <span class="atitle">
             结束语
            </span>
           </a>
          </p>
          <p>
           控制邮件数据库的大小是管理 IBM Lotus Domino 环境的一项重要功能。实现限额能显著增强管理团队控制邮件数据库大小的能力。本文概述了实现限额所需的步骤和对用户群的影响。与任何新实现的策略一样，确保实现以一种有效的、谨慎的方式完成是很重要的。另外，要参考 IBM Lotus Domino Administrator's Help 数据库以确保这里提供的信息适合您的环境。
          </p>
          <br/>
          <br/>
          <p>
           <a name="resources">
            <span class="atitle">
             参考资料
            </span>
           </a>
          </p>
          <strong>
           学习
          </strong>
          <br/>
          <ul>
           <li>
            您可以参阅本文在 developerWorks 全球站点上的
            <a href="http://www.ibm.com/developerworks/lotus/library/domino-mail-quotas/?S_TACT=105AGX52&amp;S_CMP=cn-a-ls" rel="nofollow noopener noreferrer" target="_blank">
             <font color="#5c81a7">
              英文原文
             </font>
            </a>
            。
            <br/>
            <br/>
           </li>
           <li>
            developerWorks Lotus 文章，“
            <a href="http://www.ibm.com/developerworks/cn/lotus/notes-mail-files/" rel="nofollow">
             <font color="#5c81a7">
              对于大 Lotus Notes 邮件文件的最佳实践
             </font>
            </a>
            ”
            <br/>
            <br/>
           </li>
           <li>
            developerWorks Lotus 文章，“
            <a href="http://www.ibm.com/developerworks/cn/lotus/domino-mail-sizing/" rel="nofollow">
             <font color="#5c81a7">
              分级 IBM Lotus Domino 邮件服务器
             </font>
            </a>
            ”
            <br/>
            <br/>
           </li>
           <li>
            <a href="http://www.lotus.com/ldd/notesua.nsf/find/domino7b2" rel="nofollow">
             <font color="#5c81a7">
              Lotus Domino 7 Administrator Help
             </font>
            </a>
            <br/>
            <br/>
           </li>
          </ul>
          <br/>
          <strong>
           获得产品和技术
          </strong>
          <br/>
          <ul>
           <li>
            从 developerWorks 下载试用版
            <a href="http://www.ibm.com/developerworks/downloads/ls/lsds/?S_TACT=105AGX52&amp;S_CMP=cn-a-ls" rel="nofollow">
             <font color="#5c81a7">
              Lotus Domino
             </font>
            </a>
            。
            <br/>
            <br/>
           </li>
           <li>
            从 developerWorks 下载试用版
            <a href="http://www.ibm.com/developerworks/downloads/ls/lsndad/?S_TACT=105AGX52&amp;S_CMP=cn-a-ls" rel="nofollow">
             <font color="#5c81a7">
              Lotus Notes
             </font>
            </a>
            。
            <br/>
            <br/>
           </li>
          </ul>
          <br/>
          <strong>
           讨论
          </strong>
          <br/>
          <ul>
           <li>
            <a href="http://www.lotus.com/ldd/nd6forum.nsf" rel="nofollow">
             <font color="#5c81a7">
              参与论坛讨论
             </font>
            </a>
            。
            <br/>
            <br/>
           </li>
           <li>
            通过参与
            <a href="http://www.ibm.com/developerworks/blogs/?S_TACT=105AGX52&amp;S_CMP=cn-a-ls" rel="nofollow">
             <font color="#5c81a7">
              developerWorksblog
             </font>
            </a>
            加入
            <a href="http://www.ibm.com/developerworks/community?S_TACT=105AGX52&amp;S_CMP=cn-a-ls" rel="nofollow">
             <font color="#5c81a7">
              developerWorks 社区
             </font>
            </a>
            。
           </li>
          </ul>
          <br/>
          <br/>
          <p>
           <a name="author">
            <span class="atitle">
             关于作者
            </span>
           </a>
          </p>
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
           <tbody>
            <tr>
             <td colspan="3">
              <img alt="" height="5" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="100%"/>
             </td>
            </tr>
            <tr align="left">
             <td>
              <p>
              </p>
             </td>
             <td>
              <img alt="" height="5" src="https://i-blog.csdnimg.cn/blog_migrate/c6ccbc96c20bebb0d73e8e6368158ef5.gif" width="4"/>
             </td>
             <td width="100%">
              <p>
               Joseph Anderson 是 IBM 认证的咨询 I/T 专家，是 IBM Software Services Lotus 组的成员。从 20 世纪 90 年代的早期，Joseph 就开始从事 Lotus Notes/Domino、Lotus Sametime 和 Lotus QuickPlace 方面的工作，主要作为顾问。目前他在 Competitive Software 组工作，主要致力于 Domino/Notes 管理、迁移/升级和安全方面的工作。在咨询行业工作以前，Joseph 是法律行业的一名业务主管，发挥了他的丹佛大学法学院法律管理科学硕士学位的优势。可以通过电子邮件 joseph_anderson@us.ibm.com 与他联系。
              </p>
             </td>
            </tr>
           </tbody>
          </table>
         </img>
        </img>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f636773313939:392f61727469636c652f64657461696c732f31353134323937" class_="artid" style="display:none">
 </p>
</div>


