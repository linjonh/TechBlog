---
layout: post
title: "uniapp_内嵌H5"
date: 2024-05-22 18:00:57 +0800
description: "使用uniapp开发微信小程序，实现内嵌H5的功能。_uniapp h5"
keywords: "uniapp h5"
categories: ['Uniapp']
tags: ['Html', 'App']
artid: "139125100"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=139125100
    alt: "uniapp_内嵌H5"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     uniapp_内嵌H5
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     <span style="color:#ff9900;">
      一、介绍
     </span>
    </h4>
    <p>
     在使用uniapp做微信小程序项目时，需要引入H5页面(一个现成的网页)才能实现项目的功能。
    </p>
    <p>
     在做uniapp的微信小程序项目时，引入网页不能使用iframe，需要使用web-view，引入H5页面。
    </p>
    <p>
     web-view引入的链接是有要求的（这个是微信小程序的要求）:
    </p>
    <p>
     <img alt="" height="496" src="https://i-blog.csdnimg.cn/blog_migrate/aa93ddc479507d9d4e9d8bc574e9c5b5.png" width="814"/>
    </p>
    <h4>
     <span style="color:#ff9900;">
      二、配置
     </span>
    </h4>
    <p>
     企业认证的微信小程序想使用web-view嵌入H5这个功能，需要在微信小程序后台添加业务。
    </p>
    <p>
     <a class="link-info has-card" href="https://mp.weixin.qq.com/" rel="nofollow" title="微信后台官网">
      <span class="link-card-box">
       <span class="link-title">
        微信后台官网
       </span>
       <span class="link-link">
        <img alt="icon-default.png?t=N7T8" class="link-link-icon" src="https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png">
         https://mp.weixin.qq.com/
        </img>
       </span>
      </span>
     </a>
    </p>
    <p>
     微信小程序后台-&gt;开发管理-&gt;开发设置-&gt;业务域名：
    </p>
    <p>
     <img alt="" height="307" src="https://i-blog.csdnimg.cn/blog_migrate/0ba3c8875a1c23bc70c27a16a18f6fc2.png" width="1084"/>
    </p>
    <p>
     添加业务域名：
    </p>
    <p>
     <img alt="" height="486" src="https://i-blog.csdnimg.cn/blog_migrate/754efe0da6a50157cde4382e6853f608.png" width="872"/>
    </p>
    <h4>
     <span style="color:#ff9900;">
      三、代码
     </span>
    </h4>
    <h6>
     <span style="color:#956fe7;">
      1.小程序嵌入H5并传参
     </span>
    </h6>
    <p>
     在微信小程序项目中创建一个test.vue文件:
    </p>
    <pre><code class="language-html">&lt;template&gt;

    //把src链接换成你的H5链接，encodeURI(videoData)是传过去的参数
	&lt;web-view :src="'https://www.baidu.com/index.htm?data=' + encodeURI(videoData)"&gt;&lt;/web-view&gt;

&lt;/template&gt;

&lt;script setup&gt;
import { reactive, toRefs, computed, onMounted, ref, watchEffect } from 'vue';

const state = reactive({
	videoData: '祝您天天开心！'
});
const { videoData} = toRefs(state);
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;&lt;/style&gt;</code></pre>
    <p>
     你的项目传给H5的参数，H5中如何接收呢，以一个纯html为例，将这个html文件放到服务器上，然后把test.vue里面的H5链接换成这个html文件的。
    </p>
    <p>
     H5的index.html:
    </p>
    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=""&gt;
	&lt;head&gt;
		&lt;meta charset="utf-8"&gt;
		&lt;meta name="viewport" content="width=device-width,initial-scale=1.0"&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;script type="text/javascript"&gt;

			var fullUrl = window.location.href;

            //获得参数
			let data = String(decodeURIComponent(fullUrl)).split('=')[1];

            //将参数写到页面
            document.write(data);

		&lt;/script&gt;
	&lt;/body&gt;

&lt;/html&gt;</code></pre>
    <p>
     此时即可在微信开发者工具看到内嵌后传给h5的参数了，网页内嵌成功。
    </p>
    <h6>
     <span style="color:#956fe7;">
      2.从H5跳转至微信小程序页面并传参
     </span>
    </h6>
    <p>
     H5的index.html:
    </p>
    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=""&gt;
	&lt;head&gt;
		&lt;meta charset="utf-8"&gt;
		&lt;meta name="viewport" content="width=device-width,initial-scale=1.0"&gt;

        //在需要调用微信小程序 JS 接口的页面引入如下 JS 文件
        &lt;script src="https://res.wx.qq.com/open/js/jweixin-1.3.0.js"&gt;&lt;/script&gt;

        &lt;style&gt;
            #btn{
                width:30px;
                height:30px;
                background-color:#00b498;
            }
        &lt;/style&gt;
	&lt;/head&gt;

	&lt;body&gt;
        &lt;div id="btn" onclick="SendMsg"&gt;返回小程序&lt;/div&gt;

		&lt;script type="text/javascript"&gt;

         function SendMsg(){

                //指定返回哪个页面+携带参数
                wx.miniProgram.navigateBack({
                        url: `/pages/index/index?data=${encodeURIComponent('参数')}`
                 })
         
                // 返回到来时的小程序页面
                //wx.miniProgram.navigateBack({
                  // delta: 1
                // })

          }

		&lt;/script&gt;
	&lt;/body&gt;

&lt;/html&gt;</code></pre>
    <p>
     微信小程序的test.vue：
    </p>
    <pre><code class="language-html">&lt;template&gt;&lt;/template&gt;

&lt;script setup&gt;

import { onLoad } from '@dcloudio/uni-app';

//从小程序接收传过来的参数
 onLoad((options)=&gt;{<!-- -->{
  console.log(options.data)
  }}) 

&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f7a787931393933313036393136312f:61727469636c652f64657461696c732f313339313235313030" class_="artid" style="display:none">
 </p>
</div>


