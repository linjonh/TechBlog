---
layout: post
title: "小程序安全小程序反编译"
date: 2025-01-03 10:08:10 +0800
description: "文章浏览阅读6.3k次，点赞13次，❤️🔥🎉。_微信小程序反编译"
keywords: "微信小程序反编译"
categories: ['网络安全']
tags: ['小程序', '安全']
artid: "143663207"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143663207
    alt: "小程序安全小程序反编译"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【小程序安全】小程序反编译
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div>
     <p style="margin-left:0;">
      <span style="color:rgba(0,0,0,.75);">
       <span style="background-color:#ffffff;">
        <span style="color:#4d4d4d;">
         ❤️
         <span style="color:#ff0000;">
          <strong>
           博客主页
          </strong>
          ：
         </span>
         <a href="https://blog.csdn.net/qinjilll?spm=1011.2421.3001.5343" title="iknow181">
          iknow181
         </a>
         <br/>
         🔥
         <span style="color:#ff7f00;">
          <strong>
           系列专栏
          </strong>
          ：
         </span>
         <a href="https://blog.csdn.net/qinjilll/category_12762762.html" title="网络安全">
          网络安全
         </a>
         、
         <a href="https://blog.csdn.net/qinjilll/category_12471761.html" title="Python">
          Python
         </a>
         、
         <a href="https://blog.csdn.net/qinjilll/category_12469992.html" title="JavaSE">
          JavaSE
         </a>
         、
         <a href="https://blog.csdn.net/qinjilll/category_12470000.html" title="JavaWeb">
          JavaWeb
         </a>
         、
         <a href="https://blog.csdn.net/qinjilll/category_12470008.html" title="CCNP">
          CCNP
         </a>
         <br/>
         🎉
         <span style="color:#cc3299;">
          <strong>
           欢迎大家点赞👍收藏⭐评论✍
          </strong>
         </span>
        </span>
       </span>
      </span>
     </p>
    </div>
    <div>
     <hr/>
    </div>
    <div>
     <p style="margin-left:0;">
      <span style="color:rgba(0,0,0,.75);">
       <span style="background-color:#ffffff;">
        <span style="color:#4d4d4d;">
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a170f2c5a42323a4b35f5febdeae23ff.gif#pic_center"/>
        </span>
       </span>
      </span>
     </p>
     <p style="margin-left:0;">
     </p>
     <h2 id="UUFMn">
      0x01 前期准备
     </h2>
     <h3 id="iMc25">
      知识点准备-小程序结构
     </h3>
     <p id="u500af83b">
      1.主体结构
     </p>
     <p id="u0f8ad1f3">
      小程序包含一个描述整体程序的 app 和多个描述各自页面的 page。
      <br/>
      一个小程序主体部分(即app)由
      <strong>
       三个文件
      </strong>
      组成，必须放在项
      <strong>
       目的根目录
      </strong>
      ，如下：
     </p>
     <table id="S01R5">
      <tbody>
       <tr>
        <td>
         <p id="u77e5ed89">
          <strong>
           文件
          </strong>
         </p>
        </td>
        <td>
         <p id="ua76ed8cc">
          <strong>
           必需
          </strong>
         </p>
        </td>
        <td>
         <p id="ubc6b36ca">
          <strong>
           作用
          </strong>
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="ub9e5e4d7">
          app.js
         </p>
        </td>
        <td>
         <p id="ubb833ba0">
          是
         </p>
        </td>
        <td>
         <p id="u64c4fbb6">
          小程序逻辑
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="ue2d5f5b7">
          app.json
         </p>
        </td>
        <td>
         <p id="u1be15b72">
          是
         </p>
        </td>
        <td>
         <p id="u49587de7">
          小程序公共配置
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="uc9b1d883">
          app.wxss
         </p>
        </td>
        <td>
         <p id="ue32420af">
          否
         </p>
        </td>
        <td>
         <p id="u1b1a4db7">
          小程序公共样式表
         </p>
        </td>
       </tr>
      </tbody>
     </table>
     <p id="u2d801b84">
      2.一个小程序页面由四个文件组成，分别是:
     </p>
     <table id="X2oZa">
      <tbody>
       <tr>
        <td>
         <p id="u60a52c75">
          <strong>
           xxx.js
          </strong>
         </p>
        </td>
        <td>
         <p id="u16329f0b">
          <strong>
           页面逻辑
          </strong>
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="u9da3ec25">
          xxx.json
         </p>
        </td>
        <td>
         <p id="u5cad2607">
          页面配置
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="u03f04ef6">
          xxx.wxml
         </p>
        </td>
        <td>
         <p id="u9ee824d9">
          页面结构
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="u1befdff1">
          xxx.wxss
         </p>
        </td>
        <td>
         <p id="u48917525">
          页面样式
         </p>
        </td>
       </tr>
      </tbody>
     </table>
     <p id="ua9f80251">
      3.项目整体目录结构
     </p>
     <table id="BIXVS">
      <tbody>
       <tr>
        <td>
         <p id="u9c07d474">
          <strong>
           pages
          </strong>
         </p>
        </td>
        <td>
         <p id="u4a66e689">
          <strong>
           页面文件夹
          </strong>
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="u8b107a00">
          index
         </p>
        </td>
        <td>
         <p id="u36a6b214">
          首页
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="ud0604186">
          logs
         </p>
        </td>
        <td>
         <p id="u0f227233">
          日志
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="ub3da6cd6">
          utils util
         </p>
        </td>
        <td>
         <p id="u6e0c169f">
          工具类(mina框架自动生成,你也可以建立一个：api)
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="uca0a9357">
          app.js
         </p>
        </td>
        <td>
         <p id="uf1f04403">
          入口js(类似于java类中的main方法)、全局js
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="uf5e24a1b">
          app.json
         </p>
        </td>
        <td>
         <p id="uf9a5a5fc">
          全局配置文件
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="ua2c15d7b">
          app.wxss
         </p>
        </td>
        <td>
         <p id="u9b152b13">
          全局样式文件
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="uc3de6f79">
          project.config.json
         </p>
        </td>
        <td>
         <p id="uaad25221">
          跟你在详情中勾选的配置一样
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p id="ubb6bd480">
          sitemap.json
         </p>
        </td>
        <td>
         <p id="u06320c00">
          用来配置小程序及其页面是否允许被微信索引
         </p>
        </td>
       </tr>
      </tbody>
     </table>
     <h3 id="WFl9a">
      工具准备
     </h3>
     <p id="ufc8b1b46">
      首先下载小程序助手和微信小程序官方开发工具
     </p>
     <ul>
      <li id="u869f60fa">
       小程序多功能组手
       <br/>
       复杂操作：https://www.cnblogs.com/oodcloud/p/16964878.html
       <br/>
       简单工具：http://xcx.siqingw.top/
      </li>
      <li id="u3436dad8">
       分包-unveilr
       <br/>
       https://github.com/junxiaqiao/unveilr-v2.0.0
      </li>
      <li id="u90a72c82">
       微信官方开发工具
       <br/>
       https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html
      </li>
     </ul>
     <h2 id="lwhjL">
      0x02 定位缓存包
     </h2>
     <p id="u01370b40">
      打开微信小程序包的相关目录
     </p>
     <p id="u6f85d568">
      微信设置→文件管理→即可找到目录
     </p>
     <p id="u1fa2fbb3">
     </p>
     <p class="img-center">
      <img alt="" height="588" id="ud1b85617" src="https://img-blog.csdnimg.cn/img_convert/85abbbb3df718f3e40a1eaa5702165d7.png" width="688"/>
     </p>
     <p id="uc30eb5f6">
      D:\WeChat Files\Applet
     </p>
     <p id="ud888ff22">
      操作前记得先清空wxpack目录（便于后期确认哪个是目标缓存包）
     </p>
     <p id="u07c78e80">
      再次打开小程序，查看目录下出现目标缓存包，点击进入直到找到APP.wxapkg以此尾缀结尾的。
     </p>
     <p id="uf6cd88be">
     </p>
     <p class="img-center">
      <img alt="" height="259" id="u493e6214" src="https://img-blog.csdnimg.cn/img_convert/7b2151ebf743bc2f7c7c533ff95b5456.png" width="814"/>
     </p>
     <h2 id="GJ466">
      0x03 小程序多功能组手
     </h2>
     <h3 id="dqnZn">
      单包教程
     </h3>
     <p id="ub2c32c20">
      1、点击【选择解包文件】，就是第一个直接进入，选择到__APP__.wxapkg为止。
     </p>
     <p id="ued9d9ee3">
     </p>
     <p class="img-center">
      <img alt="" height="578" id="u1848c509" src="https://img-blog.csdnimg.cn/img_convert/88415df1ef898e755236e95dab0de162.png" width="740"/>
     </p>
     <p id="ued9d9ee3">
     </p>
     <p class="img-center">
      <img alt="" height="237" id="u8182123d" src="https://img-blog.csdnimg.cn/img_convert/b7ee9e745452209a6c3f3e4a0f1da49f.png" width="861"/>
     </p>
     <p id="u301b139c">
      2、此时提示解包成功，如果还是执行解这个相同的包，系统会默认当分包处理，关于分包请看后面内容。
     </p>
     <p id="u5c24810e">
     </p>
     <p class="img-center">
      <img alt="" height="719" id="u8df2f749" src="https://img-blog.csdnimg.cn/img_convert/63543ba16bb372cac85a80fe27ab1451.png" width="720"/>
     </p>
     <p id="u1efbfe39">
      3、点击【刷新反编译包】，显示目录刷新成功即可出现刚刚解的包。
     </p>
     <p id="u8788d271">
     </p>
     <p class="img-center">
      <img alt="" height="575" id="uba2e75a6" src="https://img-blog.csdnimg.cn/img_convert/dc813676a97f311a9459067b4a6ff85b.png" width="716"/>
     </p>
     <p id="u370ff9a6">
      4、然后再选择需要反编译的包，点击执行反编译。
     </p>
     <p id="u23123aba">
     </p>
     <p class="img-center">
      <img alt="" height="727" id="u6ecb0396" src="https://img-blog.csdnimg.cn/img_convert/660bef83778b863c341ba5795b5472d5.png" width="713"/>
     </p>
     <p id="u78c1a274">
      一般单包都使用5.0新版反编译
     </p>
     <p id="u825c79a4">
      5、新版反编译成功后，会显示此小程序无分包，无需操作。如果使用5.0新版反编译，该提示无效，有无分包看具体源码，subPackages包含的root下面还定义了分包的文件夹、合并分包只要按照对应的分包路径文件夹合并即可，如果找不到分包可以删除app.json定义的分包。
     </p>
     <p id="ue6045593">
      6、执行成功后【打开wxpack目录】就可以查看源码了，
      <strong>
       如果反编译成功目录无源码文件夹，请查看软件所在目录是否包含中文，如果包含请将中文目录修改成英文后重新反编译
      </strong>
     </p>
     <p id="u2350c48c">
     </p>
     <p class="img-center">
      <img alt="" height="783" id="u6c9cc791" src="https://img-blog.csdnimg.cn/img_convert/85aa829cd4209e3c941b4368267df6bb.png" width="714"/>
     </p>
     <p id="uf618d6c2">
     </p>
     <p class="img-center">
      <img alt="" height="307" id="u58b57652" src="https://img-blog.csdnimg.cn/img_convert/9c64ce8a0835beb97b9e2cbc509c00c3.png" width="953"/>
     </p>
     <p id="ua1531291">
      7、微信开发者工具打开源码
     </p>
     <p id="ua06b27e4">
      如果报app.js错误，把【将JS编译成ESS】那个勾选去掉在试试
     </p>
     <p id="u36e76c14">
      点击详情→本地设置→
      <strong>
       取消勾选将JS编译为ES
      </strong>
     </p>
     <h3 id="Ugb8S">
      多包教程
     </h3>
     <p id="u2968de04">
      1、点击【选择解包文件】
     </p>
     <p id="u2eff6276">
     </p>
     <p class="img-center">
      <img alt="" height="603" id="u3d68842b" src="https://img-blog.csdnimg.cn/img_convert/640e9d05b2d58a41f9fc3fb14ee97857.png" width="720"/>
     </p>
     <p id="uc1a5be1d">
     </p>
     <p class="img-center">
      <img alt="" height="416" id="ubda9e042" src="https://img-blog.csdnimg.cn/img_convert/3b813fb36cce17603ab7b78b292709f2.png" width="538"/>
     </p>
     <p id="u66f324ac">
      <strong>
       2. 注意：此时有多个包，__APP__.wxapkg为主包(选中时必须在第一个)，另一个为分包，此时直接全选【ctrl+A】（__APP__.wxapkg为主包选中时必须在第一个）
      </strong>
     </p>
     <p id="ua577656b">
     </p>
     <p class="img-center">
      <img alt="" height="371" id="ueb0be95a" src="https://img-blog.csdnimg.cn/img_convert/ed95fe9308494bcdb086ff84bd17c10f.png" width="725"/>
     </p>
     <p id="u61455c67">
      3.解包成功后，接着点击【刷新反编译包】，此步比较卡，因为会检测node环境，出现目录刷新成功就可以了
     </p>
     <p id="ua937923f">
      4. 直接选择刚刚解出来的包即可
     </p>
     <p id="ud38ed685">
     </p>
     <p class="img-center">
      <img alt="" height="713" id="u66157641" src="https://img-blog.csdnimg.cn/img_convert/b6995694b59823e18f4d8698bbecb861.png" width="718"/>
     </p>
     <p id="u7c5ebee1">
      最后点击【5.0新版反编译】即可反编译出所有的主分包。【新版反编译】不需要合并分包，但是【新版反编译】可能编译出html文件，无法使用，所以建议使用【5.0新版反编译】，但必须手动合并分包。
     </p>
     <p id="u34496168">
     </p>
     <p class="img-center">
      <img alt="" height="431" id="ud7f76f3d" src="https://img-blog.csdnimg.cn/img_convert/1d8c6d90186b258e8d39761bb75d3358.png" width="834"/>
     </p>
     <p id="ua3e906ea">
      可以查看主包中的app.json文件，了解小程序的都知道查看subPackages包含的root个数，就是分包的个数
     </p>
     <p id="u8f67a3a9">
     </p>
     <p class="img-center">
      <img alt="" height="898" id="u4317822d" src="https://img-blog.csdnimg.cn/img_convert/3cc282fbfd3a52a33d1da67fe11ec26c.png" width="1006"/>
     </p>
     <p id="ue8f566aa">
      5. 手动和并分包
     </p>
     <p id="u6b55c53d">
      每一个非主文件夹下面都有一个分包
     </p>
     <p id="u80fcf378">
     </p>
     <p class="img-center">
      <img alt="" height="87" id="ua4a4700b" src="https://img-blog.csdnimg.cn/img_convert/b45dbacc5902347e1f975a7b0e130d54.png" width="691"/>
     </p>
     <p id="ue4e34f19">
     </p>
     <p class="img-center">
      <img alt="" height="194" id="u8d20c918" src="https://img-blog.csdnimg.cn/img_convert/45332787fc18c52959abc0ef71711078.png" width="770"/>
     </p>
     <p id="u5815ba2c">
      这是主包
     </p>
     <p id="u4863cb9e">
     </p>
     <p class="img-center">
      <img alt="" height="434" id="ud00f1a2e" src="https://img-blog.csdnimg.cn/img_convert/9cb835d99c1439ad240f068773619642.png" width="806"/>
     </p>
     <p id="u7ea31b28">
      将分包复制到主包对应文件夹替换掉
     </p>
     <p id="u361dbf00">
     </p>
     <p class="img-center">
      <img alt="" height="460" id="uab8932bb" src="https://img-blog.csdnimg.cn/img_convert/f940c211d45e35610eb114442b769b9a.png" width="752"/>
     </p>
     <p id="u2fe8dddf">
      <strong>
       注意：subPackages包含的root下面还定义了分包的文件夹、合并分包只要按照对应的分包路径文件夹合并即可，如果找不到分包可以删除app.json定义的分包，有几个root就有几个分包。如果分包不全请把小程序点一遍
      </strong>
     </p>
     <h2 id="fpTQp">
      0x04 unveilr
     </h2>
     <p id="u03c307da">
      存在分包情况时，使用此工具更方便，直接导入目录一键解包，无需手动合并分包
     </p>
     <p id="u117b36e4">
     </p>
     <p id="u1afe2661">
     </p>
     <p class="img-center">
      <img alt="" height="634" id="uc309278e" src="https://img-blog.csdnimg.cn/img_convert/5c20dbede6e5a5d0cae12eddc8c64f2a.png" width="1200"/>
     </p>
     <p id="ucaadb2b2">
      反编译后的源码就在缓存包目录下
     </p>
     <p id="uffb3ba4f">
     </p>
     <p class="img-center">
      <img alt="" height="396" id="u09c6ab69" src="https://img-blog.csdnimg.cn/img_convert/c9a8be1cc5015bf299de17fc59ad3805.png" width="850"/>
     </p>
     <p id="u4a621145">
      导入微信开放者工具，运行
     </p>
    </div>
    <div>
     <p style="margin-left:0;">
      <span style="color:rgba(0,0,0,.75);">
       <span style="background-color:#ffffff;">
        <span style="color:#4d4d4d;">
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/44696b9fc71021ca6d125801eee82179.gif#pic_center"/>
        </span>
       </span>
      </span>
     </p>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f71696e6a696c6c6c2f:61727469636c652f64657461696c732f313433363633323037" class_="artid" style="display:none">
 </p>
</div>


