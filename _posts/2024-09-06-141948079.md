---
layout: post
title: "nginx部署前端项目详细教程"
date: 2024-09-06 03:14:50 +0800
description: "文章浏览阅读5.5k次，点赞48次，_nginx部署前端项目"
keywords: "nginx部署前端项目"
categories: ['运维', '前端']
tags: ['运维', '前端', 'Nginx']
artid: "141948079"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=141948079
    alt: "nginx部署前端项目详细教程"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     nginx部署前端项目详细教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      nginx部署前端项目详细教程
     </h4>
     <ul>
      <li>
       <a href="#1_1" rel="nofollow">
        1.背景
       </a>
      </li>
      <li>
       <a href="#2_4" rel="nofollow">
        2.准备工作
       </a>
      </li>
      <li>
       <a href="#3_6" rel="nofollow">
        3.初始化项目
       </a>
      </li>
      <li>
       <a href="#4Nginx_19" rel="nofollow">
        4.在服务器安装Nginx
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1Nginx_22" rel="nofollow">
          (1)判断服务器是否安装Nginx
         </a>
        </li>
        <li>
         <a href="#2Nginx_31" rel="nofollow">
          (2)安装Nginx
         </a>
        </li>
        <li>
         <a href="#3_38" rel="nofollow">
          (3)判断是否安装成功
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#5Nginx_49" rel="nofollow">
        5.服务器启动Nginx
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1_50" rel="nofollow">
          (1)启动
         </a>
        </li>
        <li>
         <a href="#2_60" rel="nofollow">
          (2)停止
         </a>
        </li>
        <li>
         <a href="#3_64" rel="nofollow">
          (3)重启
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#6Nginx_67" rel="nofollow">
        6.修改Nginx配置
       </a>
      </li>
      <li>
       <a href="#7_104" rel="nofollow">
        7.新建网站文件夹
       </a>
      </li>
      <li>
       <a href="#8_113" rel="nofollow">
        8.打包部署项目
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1_114" rel="nofollow">
          (1)项目打包
         </a>
        </li>
        <li>
         <a href="#2_120" rel="nofollow">
          (2)上传至服务器
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#9404_130" rel="nofollow">
        9.解决刷新路由404问题
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="1_1">
     </a>
     1.背景
    </h2>
    <p>
     在很多年前,那时候还是前后端不分离的时代,没有专门的前端工程师,或者说前端工程师并不太需要自己去部署网站,一般都是把这部分事情交给后端工程师或者运维工程师处理就可以。
     <br/>
     进入前后端分离的时代之后,这一切都变了。前端工程师很有可能需要自己部署前端项目,然而前端工程师一般很少接触到服务器等知识,所以部署网站时总是出现问题。
    </p>
    <h2>
     <a id="2_4">
     </a>
     2.准备工作
    </h2>
    <p>
     一个前端项目+一台服务器。前端项目可以很简单,可以是一个空脚手架,甚至可以只是一个html文件。服务器则可以去阿里/华为/京东等官网去租用(怎么租用或者购买满足自己需求的服务器可以直接百度或者在官网看相关文档,这一块我发现有些朋友不太会,后续我写个教程)。
    </p>
    <h2>
     <a id="3_6">
     </a>
     3.初始化项目
    </h2>
    <p>
     直接用vue脚手架新建一个项目(后续将都以该项目为例)。
    </p>
    <pre><code class="prism language-bash"> vue create first-project
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6c69c5812beb469a8cf00a950a6bcc9d.png">
      <br/>
      按dos提示执行以下命令
     </img>
    </p>
    <pre><code class="prism language-bash"> <span class="token builtin class-name">cd</span> first-project <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> run serve
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4d8457a7f5eb4c379f8b9ff627373b3c.png">
      <br/>
      用浏览器访问http://localhost:8080,如下,说明前端项目已经准备完毕。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e09c56a59eb54565b8d95b8b06dfbd34.png"/>
     </img>
    </p>
    <h2>
     <a id="4Nginx_19">
     </a>
     4.在服务器安装Nginx
    </h2>
    <p>
     Nginx是一款轻量级的Web服务器和反向代理服务器,由于它的内存占用少,启动极快,高并发能力强,在互联网项目中广泛应用,我们的网站经常部署到Nginx服务器上(当然也可以选择其它web服务器)。
     <br/>
     我租的服务器是阿里云Centos系统,所以下面将以Centos为例,其它服务器道理与此类似。
    </p>
    <h3>
     <a id="1Nginx_22">
     </a>
     (1)判断服务器是否安装Nginx
    </h3>
    <p>
     先登录阿里云平台,找到自己租用的服务器界面,进行远程连接,连接成功之后,使用以下命令判断服务器是否安装Nginx:
    </p>
    <pre><code class="prism language-bash"> <span class="token function">whereis</span> nginx
</code></pre>
    <p>
     如果出现如下界面，则代表未安装Nginx:
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3556242224484dcd95138f6510b4aa5c.jpeg"/>
    </p>
    <p>
     由于我的服务器已经安装Nginx,所以出现以下界面(显示Nginx安装路径):
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/048895ef7ecb449395c9a68ffe1b6a46.png"/>
    </p>
    <h3>
     <a id="2Nginx_31">
     </a>
     (2)安装Nginx
    </h3>
    <p>
     命令如下：
    </p>
    <pre><code class="prism language-bash"> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> nginx 
</code></pre>
    <p>
     如果未配置yum源的,可参考网上如何使用yum安装Nginx(后续有空我也出个教程),出现如下界面则代表安装完成。
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e6b3422411ce46d0b367edef494eb2eb.jpeg"/>
    </p>
    <h3>
     <a id="3_38">
     </a>
     (3)判断是否安装成功
    </h3>
    <p>
     可以使用上面提到过的whereis nginx命令
    </p>
    <pre><code class="prism language-bash"> <span class="token function">whereis</span> nginx
</code></pre>
    <p>
     出现Nginx安装路径表示成功
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7f9140fd9ec346b89f35784af0e8eb1d.png">
      也可以查看Nginx版本来判断
     </img>
    </p>
    <pre><code class="prism language-bash"> nginx <span class="token parameter variable">-v</span>
</code></pre>
    <p>
     出现Nginx版本表示成功
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/59883304ff9c49f680530271ee250b86.jpeg"/>
    </p>
    <h2>
     <a id="5Nginx_49">
     </a>
     5.服务器启动Nginx
    </h2>
    <h3>
     <a id="1_50">
     </a>
     (1)启动
    </h3>
    <p>
     直接输入Nginx即可启动服务。
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e96ad6f8bb704cb6a70f05bd1bbcf7df.jpeg">
      <br/>
      打开浏览器,访问服务器地址,出现如下界面则代表启动成功。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a9e4760610df44d2a1e076158361f3f6.png">
       <br/>
       这里访问默认的是80端口,因为Nginx服务就是默认的80端口,如果不能访问,大致有几种原因：
      </img>
     </img>
    </p>
    <ul>
     <li>
      Nginx未启动
     </li>
     <li>
      服务器安全组未加入80端口
      <br/>
      不了解服务器安全组知识的朋友可以去研究研究。
     </li>
     <li>
      Nginx配置错误
     </li>
    </ul>
    <h3>
     <a id="2_60">
     </a>
     (2)停止
    </h3>
    <p>
     终止Nginx
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/835a8a9393ea42ea84d9274bd31dae0d.jpeg"/>
     <br/>
     此时访问浏览器则无法访问：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7b63a388bc3d449b97de697d0f526e1c.png"/>
    </p>
    <h3>
     <a id="3_64">
     </a>
     (3)重启
    </h3>
    <p>
     重启Nginx服务,
     <strong>
      一般用于修改配置文件之后(不然会提示找不到路径)
     </strong>
     ,命令如下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3ec911beeb604b3baa28c87212749403.jpeg"/>
    </p>
    <h2>
     <a id="6Nginx_67">
     </a>
     6.修改Nginx配置
    </h2>
    <p>
     找到Nginx配置文件存放位置,命令如下:
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/00c3a7afe5aa42808c694c50e2beffb7.jpeg"/>
     <br/>
     此时/etc/nginx就是Nginx配置文件存放的位置,进入该文件夹：
    </p>
    <pre><code class="prism language-bash"> <span class="token builtin class-name">cd</span> /etc/nginx
 ll
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e178123a688246e6ad36c03888dc5285.jpeg"/>
     <br/>
     其中nginx.conf就是默认配置文件，编辑该文件：
    </p>
    <pre><code class="prism language-bash"> <span class="token function">vim</span> nginx.conf
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d21218ddfc274571b0c5e6c5ded03113.jpeg"/>
     <br/>
     往下拉可以看到server选项。如下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5b840223d4f44bf1b80f2f4b1dbdfd2d.jpeg"/>
     <br/>
     上面界面我们基本上不用改什么,重要的是server这个对象,可以看到默认监听的是80端口,所以我们直接访问服务器ip即可,接下来我们改为9000端口：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4f94625b25474d88a29905567f0e7735.jpeg"/>
     <br/>
     按下ESC键后输入“
     <strong>
      :wq!
     </strong>
     ”退出保存。
     <br/>
     重启Nginx,命令如下：
    </p>
    <pre><code class="prism language-bash"> nginx <span class="token parameter variable">-s</span> reload
</code></pre>
    <p>
     此时访问时则需要带上端口号(服务器安全组需要开启9000端口,怎么配置安全组我后续会出个教程)。也要记得启动Nginx服务器。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6a4acd76f7bd48e4af9a09d95257efcc.png"/>
     <br/>
     我们再回过头来看nginx.conf文件中server中的root字段。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2c009ef116d64a01b6c7a4e20cd6a0f3.jpeg"/>
     <br/>
     该字段后面跟着的就是网站页面路径,也就是网站存放的路径。假设我们网站的存放路径为:
    </p>
    <pre><code class="prism language-bash"> /home/www/dist
</code></pre>
    <p>
     我们就需要需改该文件:(按i键进入修改模式),修改后按ESC再:wq!退出。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a82433fd01934275b0406803d360cb35.jpeg"/>
     <br/>
     再重启Nginx后,我们的网站无法访问了,因为我们没有这个文件夹。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ad3082a725614cc88ab8f477fd51cd4f.png"/>
    </p>
    <h2>
     <a id="7_104">
     </a>
     7.新建网站文件夹
    </h2>
    <p>
     刚刚我们设置了网站存放的文件夹路径为:/home/www/dist,此时我们需要在服务器上新建www文件夹：
    </p>
    <pre><code class="prism language-bash"> <span class="token builtin class-name">cd</span> /home
 <span class="token function">mkdir</span> www
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4987f61bab4b4a74bd48681d119f1de9.jpeg"/>
     <br/>
     我没有新建dist文件夹,因为后续vue项目打包就会生成dist文件夹。
    </p>
    <h2>
     <a id="8_113">
     </a>
     8.打包部署项目
    </h2>
    <h3>
     <a id="1_114">
     </a>
     (1)项目打包
    </h3>
    <p>
     使用vue打包命令,生成dist文件夹：
    </p>
    <pre><code class="prism language-bash"> <span class="token function">npm</span> run build
</code></pre>
    <h3>
     <a id="2_120">
     </a>
     (2)上传至服务器
    </h3>
    <p>
     我们可以使用ftp工具将dist文件夹上传至/home/www目录下,当然也可以使用命令(我更喜欢用命令行)：
    </p>
    <pre><code class="prism language-bash"> <span class="token function">scp</span> <span class="token parameter variable">-r</span> dist/ root@xxx.xx.xx.216:/home/www
</code></pre>
    <p>
     在我们的项目目录下用git打开命令行,将本地的dist整个文件夹复制到服务器,需要注意的是window不支持scp命令,所以使用了git命令行工具。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/05ce631380a7419893ac0d14cbcb1e55.png"/>
     <br/>
     此时无需重启Nginx,刷新浏览器,可以看到我们的网站已经部署成功了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f469470a4d2443e583f0ce547b8d0fe8.png"/>
    </p>
    <h2>
     <a id="9404_130">
     </a>
     9.解决刷新路由404问题
    </h2>
    <p>
     当我们切换路由后,然后再刷新页面,会出现404的情况。(为什么会出现404问题,我在之前的文章“
     <strong>
      <a href="https://blog.csdn.net/fageaaa/article/details/141897389">
       彻底讲清楚history和hash的区别
      </a>
     </strong>
     ”中已经说明）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5d3350c0d1354be8a0f5fe450c993844.png"/>
     <br/>
     解决问题的办法有两种:一种方案是将路由模式改为hash模式(这种不太美观,有个#);另外一种方案是
     <strong>
      修改Nginx配置
     </strong>
     。我们还是到nginx.conf文件中:
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8b16284d330147ce9255abfd62c93980.jpeg"/>
    </p>
    <pre><code class="prism language-bash"> location / <span class="token punctuation">{<!-- --></span>
   try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span> ---解决页面刷新404问题
 <span class="token punctuation">}</span>　
</code></pre>
    <p>
     如下加这一行代码是为了让页面一直都在index.html页面上,因为vue是单页应用。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8aa9972bc25f45f082389cee79dfd242.jpeg"/>
     <br/>
     按esc键后按“
     <strong>
      :wq!
     </strong>
     ”退出并且保存。重启Nginx。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3fe091e5e8714b07b247181e17c5a6d4.jpeg"/>
     <br/>
     修改之后重启Nginx,这个时候刷新浏览器则不会出现404了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5f57d3267c6d48c7a2440a71138acaf0.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f666167656161612f:61727469636c652f64657461696c732f313431393438303739" class_="artid" style="display:none">
 </p>
</div>


