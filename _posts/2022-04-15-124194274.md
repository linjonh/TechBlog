---
layout: post
title: 前端项目中的CICD实践自动化部署
date: 2022-04-15 14:48:29 +0800
categories: [自动化]
tags: [自动化,前端,jenkins,github]
image:
    path: https://img-blog.csdnimg.cn/img_convert/06457dfce1e40dddc04ec31910574e3c.png?x-oss-process=image/resize,m_fixed,h_150
    alt: 前端项目中的CICD实践自动化部署
artid: 124194274
render_with_liquid: false
---
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端项目中的CI/CD实践（自动化部署）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     前言
    </h3>
    <h4>
     <a id="_2">
     </a>
     前置知识
    </h4>
    <ul>
     <li>
      Linux
     </li>
     <li>
      Docker
     </li>
     <li>
      Nginx
     </li>
     <li>
      Github
     </li>
    </ul>
    <h4>
     <a id="_9">
     </a>
     可以干嘛
    </h4>
    <p>
     作为一套面向开发和运维团队的解决方案，CI/CD 主要解决集成新代码和向用户频繁交付应用的问题。
    </p>
    <p>
     更直接地说，就是可以解放开发人员的双手，将时间和精力专注于代码本身。
    </p>
    <h3>
     <a id="CICD_15">
     </a>
     CI/CD是什么
    </h3>
    <p>
     <strong>
      CI/CD
     </strong>
     （Continuous Intergration/Continuous Delpoy），
     <strong>
      持续集成/持续部署
     </strong>
     ，或者
     <strong>
      持续集成/持续交付
     </strong>
     （Continuous Delivery），是一种在
     <strong>
      开发阶段
     </strong>
     引入
     <strong>
      自动化
     </strong>
     来频繁交付应用的方法。从前端的角度看，CICD的流程中涉及：
    </p>
    <ul>
     <li>
      CI：代码
      <strong>
       push
      </strong>
      到托管平台之后的
      <strong>
       lint测试
      </strong>
      、
      <strong>
       单元测试
      </strong>
     </li>
     <li>
      CD：将
      <strong>
       build
      </strong>
      后的项目丢到远端
      <strong>
       Nginx
      </strong>
      的静态资源目录下
     </li>
    </ul>
    <h4>
     <a id="_24">
     </a>
     构建/部署
    </h4>
    <p>
     前后端分离的开发模式中，前端项目经常会使用框架进行开发，经由
     <strong>
      Webpack
     </strong>
     （或者其他构建工具） 打包后的SPA应用（代码），本质上都是静态资源，只需要把它们都放到
     <strong>
      Nginx
     </strong>
     的静态资源目录下，配好相关的路径，即可完成部署。
    </p>
    <p>
     前端项目的构建、部署、上线流程，从
     <strong>
      简陋疏散
     </strong>
     到
     <strong>
      完善严谨
     </strong>
     ，大致经历了以下几个阶段：
    </p>
    <h4>
     <a id="_30">
     </a>
     手动挡
    </h4>
    <div class="mermaid">
     <svg class="mermaid-svg" height="62" id="mermaid-svg-cydnWmIbVsgkMYbv" viewbox="0 0 549.609375 62" width="549.609375" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-cydnWmIbVsgkMYbv {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-cydnWmIbVsgkMYbv .error-icon{fill:#552222;}#mermaid-svg-cydnWmIbVsgkMYbv .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-cydnWmIbVsgkMYbv .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-cydnWmIbVsgkMYbv .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-cydnWmIbVsgkMYbv .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-cydnWmIbVsgkMYbv .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-cydnWmIbVsgkMYbv .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-cydnWmIbVsgkMYbv .marker{fill:#333333;stroke:#333333;}#mermaid-svg-cydnWmIbVsgkMYbv .marker.cross{stroke:#333333;}#mermaid-svg-cydnWmIbVsgkMYbv svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-cydnWmIbVsgkMYbv .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-cydnWmIbVsgkMYbv .cluster-label text{fill:#333;}#mermaid-svg-cydnWmIbVsgkMYbv .cluster-label span{color:#333;}#mermaid-svg-cydnWmIbVsgkMYbv .label text,#mermaid-svg-cydnWmIbVsgkMYbv span{fill:#333;color:#333;}#mermaid-svg-cydnWmIbVsgkMYbv .node rect,#mermaid-svg-cydnWmIbVsgkMYbv .node circle,#mermaid-svg-cydnWmIbVsgkMYbv .node ellipse,#mermaid-svg-cydnWmIbVsgkMYbv .node polygon,#mermaid-svg-cydnWmIbVsgkMYbv .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-cydnWmIbVsgkMYbv .node .label{text-align:center;}#mermaid-svg-cydnWmIbVsgkMYbv .node.clickable{cursor:pointer;}#mermaid-svg-cydnWmIbVsgkMYbv .arrowheadPath{fill:#333333;}#mermaid-svg-cydnWmIbVsgkMYbv .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-cydnWmIbVsgkMYbv .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-cydnWmIbVsgkMYbv .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-cydnWmIbVsgkMYbv .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-cydnWmIbVsgkMYbv .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-cydnWmIbVsgkMYbv .cluster text{fill:#333;}#mermaid-svg-cydnWmIbVsgkMYbv .cluster span{color:#333;}#mermaid-svg-cydnWmIbVsgkMYbv div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-cydnWmIbVsgkMYbv :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
       <g class="output">
        <g class="clusters">
        </g>
        <g class="edgePaths">
         <g class="edgePath LS-本地build项目 LE-sftp上传远程服务器" id="L-本地build项目-sftp上传远程服务器" style="opacity: 1;">
          <path class="path" d="M127.859375,31L132.02604166666666,31C136.19270833333334,31,144.52604166666666,31,152.859375,31C161.19270833333334,31,169.52604166666666,31,173.69270833333334,31L177.859375,31" marker-end="url(#arrowhead56)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead56" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-sftp上传远程服务器 LE-配置nginx访问路径" id="L-sftp上传远程服务器-配置nginx访问路径" style="opacity: 1;">
          <path class="path" d="M337.515625,31L341.6822916666667,31C345.8489583333333,31,354.1822916666667,31,362.515625,31C370.8489583333333,31,379.1822916666667,31,383.3489583333333,31L387.515625,31" marker-end="url(#arrowhead57)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead57" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
        </g>
        <g class="edgeLabels">
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-本地build项目' L-LE-sftp上传远程服务器" id="L-L-本地build项目-sftp上传远程服务器">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-sftp上传远程服务器' L-LE-配置nginx访问路径" id="L-L-sftp上传远程服务器-配置nginx访问路径">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
        </g>
        <g class="nodes">
         <g class="node default" id="flowchart-本地build项目-21" style="opacity: 1;" transform="translate(67.9296875,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="119.859375" x="-59.9296875" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-49.9296875,-13)">
            <foreignobject height="26" width="99.859375">
             <div style="display: inline-block; white-space: nowrap;">
              本地build项目
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-sftp上传远程服务器-22" style="opacity: 1;" transform="translate(257.6875,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="159.65625" x="-79.828125" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-69.828125,-13)">
            <foreignobject height="26" width="139.65625">
             <div style="display: inline-block; white-space: nowrap;">
              sftp上传远程服务器
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-配置nginx访问路径-23" style="opacity: 1;" transform="translate(464.5625,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="154.09375" x="-77.046875" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-67.046875,-13)">
            <foreignobject height="26" width="134.09375">
             <div style="display: inline-block; white-space: nowrap;">
              配置nginx访问路径
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
        </g>
       </g>
      </g>
     </svg>
    </div>
    <ol>
     <li>
      本地执行
      <code>
       yarn build
      </code>
      构建项目
     </li>
     <li>
      使用
      <strong>
       transmit
      </strong>
      或其他支持
      <strong>
       sftp
      </strong>
      的软件上传打包后的项目（当然也有其他方式）
     </li>
     <li>
      修改 Nginx 的
      <strong>
       nginx.conf
      </strong>
      文件，配置项目的访问路径
     </li>
    </ol>
    <p>
     手动部署操作起来很简单，但缺点也很明显，每次构建完都要人为地进行部署的动作，一方面减少了实际敲代码的时间，另一方面，人工操作免不了会有疏忽出错的时候。
    </p>
    <h4>
     <a id="_43">
     </a>
     自动挡
    </h4>
    <p>
     随着
     <strong>
      工程化
     </strong>
     的发展和
     <strong>
      工具链
     </strong>
     的成熟，项目部署不再像以前简单粗暴。前端代码的
     <strong>
      健壮性
     </strong>
     、
     <strong>
      可靠性
     </strong>
     越来越被重视，项目发布前往往需要
     <strong>
      代码约束
     </strong>
     和
     <strong>
      代码测试
     </strong>
     ，校验通过后服务器拉取最新的代码，进行 build 和 nginx 配置后才算完成整个部署的过程。
    </p>
    <div class="mermaid">
     <svg class="mermaid-svg" height="62" id="mermaid-svg-NTPomO5eNrsiOKot" viewbox="0 0 917.203125 62" width="917.203125" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-NTPomO5eNrsiOKot {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-NTPomO5eNrsiOKot .error-icon{fill:#552222;}#mermaid-svg-NTPomO5eNrsiOKot .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-NTPomO5eNrsiOKot .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-NTPomO5eNrsiOKot .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-NTPomO5eNrsiOKot .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-NTPomO5eNrsiOKot .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-NTPomO5eNrsiOKot .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-NTPomO5eNrsiOKot .marker{fill:#333333;stroke:#333333;}#mermaid-svg-NTPomO5eNrsiOKot .marker.cross{stroke:#333333;}#mermaid-svg-NTPomO5eNrsiOKot svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-NTPomO5eNrsiOKot .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-NTPomO5eNrsiOKot .cluster-label text{fill:#333;}#mermaid-svg-NTPomO5eNrsiOKot .cluster-label span{color:#333;}#mermaid-svg-NTPomO5eNrsiOKot .label text,#mermaid-svg-NTPomO5eNrsiOKot span{fill:#333;color:#333;}#mermaid-svg-NTPomO5eNrsiOKot .node rect,#mermaid-svg-NTPomO5eNrsiOKot .node circle,#mermaid-svg-NTPomO5eNrsiOKot .node ellipse,#mermaid-svg-NTPomO5eNrsiOKot .node polygon,#mermaid-svg-NTPomO5eNrsiOKot .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-NTPomO5eNrsiOKot .node .label{text-align:center;}#mermaid-svg-NTPomO5eNrsiOKot .node.clickable{cursor:pointer;}#mermaid-svg-NTPomO5eNrsiOKot .arrowheadPath{fill:#333333;}#mermaid-svg-NTPomO5eNrsiOKot .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-NTPomO5eNrsiOKot .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-NTPomO5eNrsiOKot .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-NTPomO5eNrsiOKot .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-NTPomO5eNrsiOKot .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-NTPomO5eNrsiOKot .cluster text{fill:#333;}#mermaid-svg-NTPomO5eNrsiOKot .cluster span{color:#333;}#mermaid-svg-NTPomO5eNrsiOKot div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-NTPomO5eNrsiOKot :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
       <g class="output">
        <g class="clusters">
        </g>
        <g class="edgePaths">
         <g class="edgePath LS-lint校验 LE-单元测试" id="L-lint校验-单元测试" style="opacity: 1;">
          <path class="path" d="M84.375,31L88.54166666666667,31C92.70833333333333,31,101.04166666666667,31,109.375,31C117.70833333333333,31,126.04166666666667,31,130.20833333333334,31L134.375,31" marker-end="url(#arrowhead84)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead84" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-单元测试 LE-push远端仓库" id="L-单元测试-push远端仓库" style="opacity: 1;">
          <path class="path" d="M218.375,31L222.54166666666666,31C226.70833333333334,31,235.04166666666666,31,243.375,31C251.70833333333334,31,260.0416666666667,31,264.2083333333333,31L268.375,31" marker-end="url(#arrowhead85)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead85" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-push远端仓库 LE-服务器拉取最新代码" id="L-push远端仓库-服务器拉取最新代码" style="opacity: 1;">
          <path class="path" d="M385.25,31L389.4166666666667,31C393.5833333333333,31,401.9166666666667,31,410.25,31C418.5833333333333,31,426.9166666666667,31,431.0833333333333,31L435.25,31" marker-end="url(#arrowhead86)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead86" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-服务器拉取最新代码 LE-build构建项目" id="L-服务器拉取最新代码-build构建项目" style="opacity: 1;">
          <path class="path" d="M599.25,31L603.4166666666666,31C607.5833333333334,31,615.9166666666666,31,624.25,31C632.5833333333334,31,640.9166666666666,31,645.0833333333334,31L649.25,31" marker-end="url(#arrowhead87)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead87" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-build构建项目 LE-配置nginx" id="L-build构建项目-配置nginx" style="opacity: 1;">
          <path class="path" d="M769.109375,31L773.2760416666666,31C777.4427083333334,31,785.7760416666666,31,794.109375,31C802.4427083333334,31,810.7760416666666,31,814.9427083333334,31L819.109375,31" marker-end="url(#arrowhead88)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead88" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
        </g>
        <g class="edgeLabels">
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-lint校验' L-LE-单元测试" id="L-L-lint校验-单元测试">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-单元测试' L-LE-push远端仓库" id="L-L-单元测试-push远端仓库">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-push远端仓库' L-LE-服务器拉取最新代码" id="L-L-push远端仓库-服务器拉取最新代码">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-服务器拉取最新代码' L-LE-build构建项目" id="L-L-服务器拉取最新代码-build构建项目">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-build构建项目' L-LE-配置nginx" id="L-L-build构建项目-配置nginx">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
        </g>
        <g class="nodes">
         <g class="node default" id="flowchart-lint校验-30" style="opacity: 1;" transform="translate(46.1875,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="76.375" x="-38.1875" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-28.1875,-13)">
            <foreignobject height="26" width="56.375">
             <div style="display: inline-block; white-space: nowrap;">
              lint校验
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-单元测试-31" style="opacity: 1;" transform="translate(176.375,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              单元测试
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-push远端仓库-32" style="opacity: 1;" transform="translate(326.8125,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="116.875" x="-58.4375" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-48.4375,-13)">
            <foreignobject height="26" width="96.875">
             <div style="display: inline-block; white-space: nowrap;">
              push远端仓库
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-服务器拉取最新代码-33" style="opacity: 1;" transform="translate(517.25,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="164" x="-82" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-72,-13)">
            <foreignobject height="26" width="144">
             <div style="display: inline-block; white-space: nowrap;">
              服务器拉取最新代码
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-build构建项目-34" style="opacity: 1;" transform="translate(709.1796875,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="119.859375" x="-59.9296875" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-49.9296875,-13)">
            <foreignobject height="26" width="99.859375">
             <div style="display: inline-block; white-space: nowrap;">
              build构建项目
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-配置nginx-35" style="opacity: 1;" transform="translate(864.15625,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="90.09375" x="-45.046875" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-35.046875,-13)">
            <foreignobject height="26" width="70.09375">
             <div style="display: inline-block; white-space: nowrap;">
              配置nginx
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
        </g>
       </g>
      </g>
     </svg>
    </div>
    <ol>
     <li>
      代码扫描
      <code>
       yarn lint
      </code>
      检查代码是否规范
     </li>
     <li>
      <code>
       yarn unit
      </code>
      进行单元测试
     </li>
     <li>
      <code>
       git push
      </code>
      提交更改到远端仓库
     </li>
     <li>
      登录服务器，
      <code>
       git pull
      </code>
      拉取最新代码
     </li>
     <li>
      <code>
       yarn build
      </code>
      构建项目
     </li>
     <li>
      配置 nginx 访问路径
     </li>
    </ol>
    <p>
     这个阶段，我们借助一些工具，能够减少代码不规范或隐藏bug的问题。但所有的操作还是得一行一行命令去敲，项目真正的部署也还是需要手动去操作服务器。
    </p>
    <blockquote>
     <p>
      其实完全可以将上面的操作细节都集成到一个 shell 脚本里，通知执行 shell 也能减少很多重复的工作。
     </p>
    </blockquote>
    <h4>
     <a id="CICD_64">
     </a>
     CI/CD
    </h4>
    <p>
     上面提到，借助
     <strong>
      shell
     </strong>
     也能使得一部分操作自动化，但无论是代码扫描、单元测试还是项目的构建，都还是在本地的开发机上进行（或者说跟开发强耦合），有没有办法将这些附属的操作抽离出来，放到另外的专有环境下进行呢？
    </p>
    <p>
     现在很流行的
     <strong>
      DevOps
     </strong>
     理念中，
     <strong>
      CI/CD
     </strong>
     的那一环就能很好地实现。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6ef1f524357ea981a4a31d110f4d2496.png"/>
    </p>
    <blockquote>
     <p>
      DevOps是一种思想理念，强调软件开发测试运维的一体化，目标是减少各个部门之间的沟通成本，从而实现软件的快速高质量的发布。CI/CD是一套实践方案，实现软件的构建测试部署的自动化。
     </p>
    </blockquote>
    <h3>
     <a id="CICD___74">
     </a>
     CI/CD实践 —— 前端项目自动化部署
    </h3>
    <h4>
     <a id="_76">
     </a>
     流程架构
    </h4>
    <h5>
     <a id="_78">
     </a>
     想要达到的效果
    </h5>
    <p>
     远程主分支代码发生改变，拉取主分支代码进行构建，完成后通过 ssh 上传到测试/生产服务器。
    </p>
    <h5>
     <a id="Github__Jenkins__82">
     </a>
     Github + Jenkins 的实现链路
    </h5>
    <div class="mermaid">
     <svg class="mermaid-svg" height="681" id="mermaid-svg-PP6mGN0PlZIgOXqg" style="max-width: 1050px;" viewbox="-50 -50 1050 721" width="100%" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-PP6mGN0PlZIgOXqg {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-PP6mGN0PlZIgOXqg .error-icon{fill:#552222;}#mermaid-svg-PP6mGN0PlZIgOXqg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-PP6mGN0PlZIgOXqg .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-PP6mGN0PlZIgOXqg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-PP6mGN0PlZIgOXqg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-PP6mGN0PlZIgOXqg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-PP6mGN0PlZIgOXqg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-PP6mGN0PlZIgOXqg .marker{fill:#333333;stroke:#333333;}#mermaid-svg-PP6mGN0PlZIgOXqg .marker.cross{stroke:#333333;}#mermaid-svg-PP6mGN0PlZIgOXqg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-PP6mGN0PlZIgOXqg .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-PP6mGN0PlZIgOXqg text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-svg-PP6mGN0PlZIgOXqg .actor-line{stroke:grey;}#mermaid-svg-PP6mGN0PlZIgOXqg .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-PP6mGN0PlZIgOXqg .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-PP6mGN0PlZIgOXqg #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-PP6mGN0PlZIgOXqg .sequenceNumber{fill:white;}#mermaid-svg-PP6mGN0PlZIgOXqg #sequencenumber{fill:#333;}#mermaid-svg-PP6mGN0PlZIgOXqg #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-PP6mGN0PlZIgOXqg .messageText{fill:#333;stroke:#333;}#mermaid-svg-PP6mGN0PlZIgOXqg .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-PP6mGN0PlZIgOXqg .labelText,#mermaid-svg-PP6mGN0PlZIgOXqg .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-PP6mGN0PlZIgOXqg .loopText,#mermaid-svg-PP6mGN0PlZIgOXqg .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-PP6mGN0PlZIgOXqg .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-svg-PP6mGN0PlZIgOXqg .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-svg-PP6mGN0PlZIgOXqg .noteText,#mermaid-svg-PP6mGN0PlZIgOXqg .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-PP6mGN0PlZIgOXqg .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-PP6mGN0PlZIgOXqg .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-PP6mGN0PlZIgOXqg .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-PP6mGN0PlZIgOXqg .actorPopupMenu{position:absolute;}#mermaid-svg-PP6mGN0PlZIgOXqg .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-svg-PP6mGN0PlZIgOXqg .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-PP6mGN0PlZIgOXqg .actor-man circle,#mermaid-svg-PP6mGN0PlZIgOXqg line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-svg-PP6mGN0PlZIgOXqg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
      </g>
      <defs>
       <symbol height="24" id="computer" width="24">
        <path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)">
        </path>
       </symbol>
      </defs>
      <defs>
       <symbol fill-rule="evenodd" id="database">
        <path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)">
        </path>
       </symbol>
      </defs>
      <defs>
       <symbol height="24" id="clock" width="24">
        <path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)">
        </path>
       </symbol>
      </defs>
      <g>
       <line class="200" id="actor9" stroke="#999" stroke-width="0.5px" x1="75" x2="75" y1="5" y2="615">
       </line>
       <g id="root-9">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="0" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="75" y="32.5">
         <tspan dy="0" x="75">
          VSCode
         </tspan>
        </text>
       </g>
      </g>
      <g>
       <line class="200" id="actor10" stroke="#999" stroke-width="0.5px" x1="275" x2="275" y1="5" y2="615">
       </line>
       <g id="root-10">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="200" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="275" y="32.5">
         <tspan dy="0" x="275">
          Github
         </tspan>
        </text>
       </g>
      </g>
      <g>
       <line class="200" id="actor11" stroke="#999" stroke-width="0.5px" x1="475" x2="475" y1="5" y2="615">
       </line>
       <g id="root-11">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="400" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="475" y="32.5">
         <tspan dy="0" x="475">
          Jenkins
         </tspan>
        </text>
       </g>
      </g>
      <g>
       <line class="200" id="actor12" stroke="#999" stroke-width="0.5px" x1="675" x2="675" y1="5" y2="615">
       </line>
       <g id="root-12">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="600" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="675" y="32.5">
         <tspan dy="0" x="675">
          服务器
         </tspan>
        </text>
       </g>
      </g>
      <g>
       <line class="200" id="actor13" stroke="#999" stroke-width="0.5px" x1="875" x2="875" y1="5" y2="615">
       </line>
       <g id="root-13">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="800" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="875" y="32.5">
         <tspan dy="0" x="875">
          浏览器
         </tspan>
        </text>
       </g>
      </g>
      <defs>
       <marker id="arrowhead" markerheight="12" markerunits="userSpaceOnUse" markerwidth="12" orient="auto" refx="9" refy="5">
        <path d="M 0 0 L 10 5 L 0 10 z">
        </path>
       </marker>
      </defs>
      <defs>
       <marker id="crosshead" markerheight="8" markerwidth="15" orient="auto" refx="16" refy="4">
        <path d="M 9,2 V 6 L16,4 Z" fill="black" stroke="#000000" stroke-width="1px" style="stroke-dasharray: 0, 0;">
        </path>
        <path d="M 0,1 L 6,7 M 6,1 L 0,7" fill="none" stroke="#000000" stroke-width="1px" style="stroke-dasharray: 0, 0;">
        </path>
       </marker>
      </defs>
      <defs>
       <marker id="filled-head" markerheight="28" markerwidth="20" orient="auto" refx="18" refy="7">
        <path d="M 18,7 L9,13 L14,7 L9,1 Z">
        </path>
       </marker>
      </defs>
      <defs>
       <marker id="sequencenumber" markerheight="40" markerwidth="60" orient="auto" refx="15" refy="15">
        <circle cx="15" cy="15" r="6">
        </circle>
       </marker>
      </defs>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="175" y="80">
       提交代码
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="75" x2="275" y1="113" y2="113">
      </line>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="275" y="128">
       合并到master
      </text>
      <path class="messageLine0" d="M 275,165 C 335,155 335,195 275,185" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;">
      </path>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="375" y="210">
       通知
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="275" x2="475" y1="243" y2="243">
      </line>
      <g>
       <rect class="note" fill="#EDF2AE" height="36" rx="0" ry="0" stroke="#666" width="150" x="400" y="253">
       </rect>
       <text alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 14px; font-weight: 400;' text-anchor="middle" x="475" y="258">
        <tspan x="475">
         执行任务
        </tspan>
       </text>
      </g>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="375" y="304">
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="475" x2="275" y1="299" y2="299">
      </line>
      <g>
       <rect class="note" fill="#EDF2AE" height="36" rx="0" ry="0" stroke="#666" width="250" x="250" y="309">
       </rect>
       <text alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 14px; font-weight: 400;' text-anchor="middle" x="375" y="314">
        <tspan x="375">
         拉取代码
        </tspan>
       </text>
      </g>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="375" y="360">
      </text>
      <line class="messageLine1" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="stroke-dasharray: 3, 3; fill: none;" x1="275" x2="475" y1="355" y2="355">
      </line>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="475" y="370">
       构建项目
      </text>
      <path class="messageLine0" d="M 475,403 C 535,393 535,433 475,423" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;">
      </path>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="575" y="448">
       推送到服务器
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="475" x2="675" y1="481" y2="481">
      </line>
      <g>
       <rect class="note" fill="#EDF2AE" height="36" rx="0" ry="0" stroke="#666" width="150" x="600" y="491">
       </rect>
       <text alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 14px; font-weight: 400;' text-anchor="middle" x="675" y="496">
        <tspan x="675">
         配置nginx访问路径
        </tspan>
       </text>
      </g>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="775" y="542">
       访问项目部署地址
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="875" x2="675" y1="575" y2="575">
      </line>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="0" y="595">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="75" y="627.5">
        <tspan dy="0" x="75">
         VSCode
        </tspan>
       </text>
      </g>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="200" y="595">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="275" y="627.5">
        <tspan dy="0" x="275">
         Github
        </tspan>
       </text>
      </g>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="400" y="595">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="475" y="627.5">
        <tspan dy="0" x="475">
         Jenkins
        </tspan>
       </text>
      </g>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="600" y="595">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="675" y="627.5">
        <tspan dy="0" x="675">
         服务器
        </tspan>
       </text>
      </g>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="800" y="595">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="875" y="627.5">
        <tspan dy="0" x="875">
         浏览器
        </tspan>
       </text>
      </g>
      <text x="375" y="-25">
       前端自动化部署
      </text>
     </svg>
    </div>
    <h5>
     <a id="Github_Actions__106">
     </a>
     Github Actions 的实现链路
    </h5>
    <div class="mermaid">
     <svg class="mermaid-svg" height="567" id="mermaid-svg-0dyrktFWLRqbuPe6" style="max-width: 850px;" viewbox="-50 -50 850 607" width="100%" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-0dyrktFWLRqbuPe6 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-0dyrktFWLRqbuPe6 .error-icon{fill:#552222;}#mermaid-svg-0dyrktFWLRqbuPe6 .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-0dyrktFWLRqbuPe6 .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-0dyrktFWLRqbuPe6 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-0dyrktFWLRqbuPe6 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-0dyrktFWLRqbuPe6 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-0dyrktFWLRqbuPe6 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-0dyrktFWLRqbuPe6 .marker{fill:#333333;stroke:#333333;}#mermaid-svg-0dyrktFWLRqbuPe6 .marker.cross{stroke:#333333;}#mermaid-svg-0dyrktFWLRqbuPe6 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-0dyrktFWLRqbuPe6 .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-0dyrktFWLRqbuPe6 text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-svg-0dyrktFWLRqbuPe6 .actor-line{stroke:grey;}#mermaid-svg-0dyrktFWLRqbuPe6 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-0dyrktFWLRqbuPe6 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-0dyrktFWLRqbuPe6 #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-0dyrktFWLRqbuPe6 .sequenceNumber{fill:white;}#mermaid-svg-0dyrktFWLRqbuPe6 #sequencenumber{fill:#333;}#mermaid-svg-0dyrktFWLRqbuPe6 #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-0dyrktFWLRqbuPe6 .messageText{fill:#333;stroke:#333;}#mermaid-svg-0dyrktFWLRqbuPe6 .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-0dyrktFWLRqbuPe6 .labelText,#mermaid-svg-0dyrktFWLRqbuPe6 .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-0dyrktFWLRqbuPe6 .loopText,#mermaid-svg-0dyrktFWLRqbuPe6 .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-0dyrktFWLRqbuPe6 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-svg-0dyrktFWLRqbuPe6 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-svg-0dyrktFWLRqbuPe6 .noteText,#mermaid-svg-0dyrktFWLRqbuPe6 .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-0dyrktFWLRqbuPe6 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-0dyrktFWLRqbuPe6 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-0dyrktFWLRqbuPe6 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-0dyrktFWLRqbuPe6 .actorPopupMenu{position:absolute;}#mermaid-svg-0dyrktFWLRqbuPe6 .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-svg-0dyrktFWLRqbuPe6 .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-0dyrktFWLRqbuPe6 .actor-man circle,#mermaid-svg-0dyrktFWLRqbuPe6 line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-svg-0dyrktFWLRqbuPe6 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
      </g>
      <defs>
       <symbol height="24" id="computer" width="24">
        <path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)">
        </path>
       </symbol>
      </defs>
      <defs>
       <symbol fill-rule="evenodd" id="database">
        <path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)">
        </path>
       </symbol>
      </defs>
      <defs>
       <symbol height="24" id="clock" width="24">
        <path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)">
        </path>
       </symbol>
      </defs>
      <g>
       <line class="200" id="actor14" stroke="#999" stroke-width="0.5px" x1="75" x2="75" y1="5" y2="501">
       </line>
       <g id="root-14">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="0" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="75" y="32.5">
         <tspan dy="0" x="75">
          VSCode
         </tspan>
        </text>
       </g>
      </g>
      <g>
       <line class="200" id="actor15" stroke="#999" stroke-width="0.5px" x1="275" x2="275" y1="5" y2="501">
       </line>
       <g id="root-15">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="200" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="275" y="32.5">
         <tspan dy="0" x="275">
          Github
         </tspan>
        </text>
       </g>
      </g>
      <g>
       <line class="200" id="actor16" stroke="#999" stroke-width="0.5px" x1="475" x2="475" y1="5" y2="501">
       </line>
       <g id="root-16">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="400" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="475" y="32.5">
         <tspan dy="0" x="475">
          服务器
         </tspan>
        </text>
       </g>
      </g>
      <g>
       <line class="200" id="actor17" stroke="#999" stroke-width="0.5px" x1="675" x2="675" y1="5" y2="501">
       </line>
       <g id="root-17">
        <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="600" y="0">
        </rect>
        <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="675" y="32.5">
         <tspan dy="0" x="675">
          浏览器
         </tspan>
        </text>
       </g>
      </g>
      <defs>
       <marker id="arrowhead" markerheight="12" markerunits="userSpaceOnUse" markerwidth="12" orient="auto" refx="9" refy="5">
        <path d="M 0 0 L 10 5 L 0 10 z">
        </path>
       </marker>
      </defs>
      <defs>
       <marker id="crosshead" markerheight="8" markerwidth="15" orient="auto" refx="16" refy="4">
        <path d="M 9,2 V 6 L16,4 Z" fill="black" stroke="#000000" stroke-width="1px" style="stroke-dasharray: 0, 0;">
        </path>
        <path d="M 0,1 L 6,7 M 6,1 L 0,7" fill="none" stroke="#000000" stroke-width="1px" style="stroke-dasharray: 0, 0;">
        </path>
       </marker>
      </defs>
      <defs>
       <marker id="filled-head" markerheight="28" markerwidth="20" orient="auto" refx="18" refy="7">
        <path d="M 18,7 L9,13 L14,7 L9,1 Z">
        </path>
       </marker>
      </defs>
      <defs>
       <marker id="sequencenumber" markerheight="40" markerwidth="60" orient="auto" refx="15" refy="15">
        <circle cx="15" cy="15" r="6">
        </circle>
       </marker>
      </defs>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="175" y="80">
       提交代码
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="75" x2="275" y1="113" y2="113">
      </line>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="275" y="128">
       合并到master
      </text>
      <path class="messageLine0" d="M 275,165 C 335,155 335,195 275,185" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;">
      </path>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="275" y="210">
       触发钩子
      </text>
      <path class="messageLine0" d="M 275,243 C 335,233 335,273 275,263" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;">
      </path>
      <g>
       <rect class="note" fill="#EDF2AE" height="36" rx="0" ry="0" stroke="#666" width="150" x="200" y="283">
       </rect>
       <text alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 14px; font-weight: 400;' text-anchor="middle" x="275" y="288">
        <tspan x="275">
         执行 build 任务
        </tspan>
       </text>
      </g>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="375" y="334">
       推送到服务器
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="275" x2="475" y1="367" y2="367">
      </line>
      <g>
       <rect class="note" fill="#EDF2AE" height="36" rx="0" ry="0" stroke="#666" width="150" x="400" y="377">
       </rect>
       <text alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 14px; font-weight: 400;' text-anchor="middle" x="475" y="382">
        <tspan x="475">
         配置nginx访问路径
        </tspan>
       </text>
      </g>
      <text alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style='font-family: "trebuchet ms", verdana, arial, sans-serif; font-size: 16px; font-weight: 400;' text-anchor="middle" x="575" y="428">
       访问项目部署地址
      </text>
      <line class="messageLine0" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" style="fill: none;" x1="675" x2="475" y1="461" y2="461">
      </line>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="0" y="481">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="75" y="513.5">
        <tspan dy="0" x="75">
         VSCode
        </tspan>
       </text>
      </g>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="200" y="481">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="275" y="513.5">
        <tspan dy="0" x="275">
         Github
        </tspan>
       </text>
      </g>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="400" y="481">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="475" y="513.5">
        <tspan dy="0" x="475">
         服务器
        </tspan>
       </text>
      </g>
      <g>
       <rect class="actor" fill="#eaeaea" height="65" rx="3" ry="3" stroke="#666" width="150" x="600" y="481">
       </rect>
       <text alignment-baseline="central" class="actor" dominant-baseline="central" style='text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, "sans-serif";' x="675" y="513.5">
        <tspan dy="0" x="675">
         浏览器
        </tspan>
       </text>
      </g>
      <text x="275" y="-25">
       前端自动化部署
      </text>
     </svg>
    </div>
    <h4>
     <a id="_125">
     </a>
     搭建过程
    </h4>
    <h5>
     <a id="Github__Jenkins_127">
     </a>
     Github + Jenkins
    </h5>
    <h6>
     <a id="docker_129">
     </a>
     docker环境的搭建
    </h6>
    <ol>
     <li>
      <p>
       安装 docker
      </p>
      <pre><code class="prism language-shell"><span class="token comment"># 安装 docker 的依赖库，-y 选项表示所有的 Is this OK[y/d/N]，都会自动选择y</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils 

<span class="token comment"># 添加 docker cd 软件源信息</span>
<span class="token function">sudo</span> yum-config-manager --add-repo <span class="token punctuation">\</span> https://download.docker.com/linux/centos/docker-ce.repo

<span class="token comment"># 安装 docker </span>
<span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre>
     </li>
     <li>
      <p>
       启动 docker
      </p>
      <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span> <span class="token comment"># 设置开机自启</span>
<span class="token function">sudo</span> systemctl start <span class="token function">docker</span> /<span class="token comment">#  启动docker</span>
</code></pre>
     </li>
    </ol>
    <blockquote>
     <p>
      <a href="https://docs.docker.com/engine/install/centos/" rel="nofollow">
       docker centos 安装指南
      </a>
     </p>
    </blockquote>
    <h6>
     <a id="dockercompose_153">
     </a>
     安装docker-compose
    </h6>
    <p>
     docker-compose 用于定义和运行多容器 docker 应用程序，使用
     <strong>
      yml
     </strong>
     文件配置应用所需的所有服务。
    </p>
    <ol>
     <li>
      <p>
       安装 docker-compose
      </p>
      <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">"https://github.com/docker/compose/releases/download/1.24.0/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>"</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose
</code></pre>
     </li>
     <li>
      <p>
       提升权限
      </p>
      <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compos
</code></pre>
     </li>
    </ol>
    <blockquote>
     <p>
      <a href="https://docs.docker.com/compose/install/" rel="nofollow">
       docker-compose 安装指南
      </a>
     </p>
    </blockquote>
    <h6>
     <a id="_dockercompose__171">
     </a>
     创建 docker-compose 应用
    </h6>
    <p>
     这里为了方便， nginx 通过容器的方式去启动（不会影响到我目前的 nginx ），jenkins 就还是放在根项目部署的服务器上（方便后续直接通过 shell 复制构建好的项目）
    </p>
    <p>
     （拉取nginx镜像，编写目录数据卷映射）
    </p>
    <ol>
     <li>
      <p>
       拉取
       <strong>
        nginx
       </strong>
       镜像
      </p>
      <pre><code class="prism language-shell"><span class="token function">docker</span> pull nginx

<span class="token function">docker</span> images <span class="token comment"># 查看安装的镜像</span>
</code></pre>
     </li>
     <li>
      <p>
       创建数据卷目录，以便挂载到容器里
      </p>
      <pre><code class="prism language-bash">+ compose <span class="token comment"># docker-compose 配置目录</span>
	- docker-compose.yml 
+ nginx  		
 	+ conf	<span class="token comment"># nginx 配置</span>
 		- nginx.conf
 	+ html	<span class="token comment"># nginx 静态资源</span>
  	- index.html
</code></pre>
     </li>
     <li>
      <p>
       编写
       <strong>
        docker-compose.yml
       </strong>
      </p>
      <pre><code class="prism language-bash">version: <span class="token string">'3'</span>
services:                                            
  cicd_nginx:
    restart: always
    image: nginx
    container_name: nginx
    ports:
      - <span class="token number">3300</span>:80
      - <span class="token number">3301</span>:433
    volumes:
      - <span class="token punctuation">..</span>/nginx/html:/usr/share/nginx/html
      - <span class="token punctuation">..</span>/nginx/conf/nginx.conf:/etc/nginx/nginx.conf
      - <span class="token punctuation">..</span>/nginx/log:/var/log/nginx
      - <span class="token punctuation">..</span>/nginx/localtime:/etc/localtime:ro
</code></pre>
     </li>
     <li>
      <p>
       启动
      </p>
      <pre><code class="prism language-bash"><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
<span class="token function">docker-compose</span> stop //停止nginx和jenkins
</code></pre>
     </li>
     <li>
      <p>
       公网查看 nginx
      </p>
     </li>
    </ol>
    <p>
     <img alt="image-20220122154400721" src="https://i-blog.csdnimg.cn/blog_migrate/3a5439ebce3337a526adea6a52f789f7.png"/>
    </p>
    <p>
     <img alt="image-20220122154557051" src="https://i-blog.csdnimg.cn/blog_migrate/07a9fbd8e2c631bc0cca4e449c1ff09b.png"/>
    </p>
    <h6>
     <a id="Jenkins_229">
     </a>
     Jenkins基本配置
    </h6>
    <ol>
     <li>
      <p>
       前往 jenkins 容器挂载的数据卷中获得初始密码
      </p>
      <pre><code class="prism language-bash"><span class="token function">cat</span> /home/cicd_demo/jenkins/jenkins_home/secrets/initialAdminPassword 
</code></pre>
      <blockquote>
       <p>
        这个密码只会显示一次，之后如果忘记密码需要重置
       </p>
      </blockquote>
     </li>
     <li>
      <p>
       输入密码进入页面之后，选择推荐安装
      </p>
      <p>
       <img alt="image-20220122155307819" src="https://i-blog.csdnimg.cn/blog_migrate/2d9ea2a603f7171c6d63434980038efe.png"/>
      </p>
      <p>
       可以看到，jenkins 会自动帮我们安装很多插件，比如最常用的
       <strong>
        git
       </strong>
      </p>
      <p>
       <img alt="image-20220122155629224" src="https://i-blog.csdnimg.cn/blog_migrate/bb3214f2904b350d911e5a8cdf7594b6.png"/>
      </p>
     </li>
     <li>
      <p>
       新建账户
      </p>
      <p>
       <img alt="image-20220122155900060" src="https://i-blog.csdnimg.cn/blog_migrate/bb956d672502b594b51b86c93aa6f51b.png"/>
      </p>
     </li>
     <li>
      <p>
       进入到主页后，先前往
       <strong>
        Manage Jenkins - Manage Plugins
       </strong>
       安装需要用到的插件，目前就只需要安装
       <strong>
        NodeJS
       </strong>
       <br/>
       <img alt="image-20220122172232223" src="https://i-blog.csdnimg.cn/blog_migrate/1be4d4e7d1d8cc5d4944a9724ee138c5.png"/>
      </p>
     </li>
     <li>
      <p>
       前往全局工具配置，安装需要的不同版本的
       <strong>
        node
       </strong>
       环境
      </p>
      <p>
       <img alt="image-20220122222048344" src="https://i-blog.csdnimg.cn/blog_migrate/2f9b825ded22e33cab80894c613d741a.png"/>
      </p>
     </li>
     <li>
      <p>
       配置 github
      </p>
      <p>
       在配置之前，我们先要到
       <strong>
        GitHub
       </strong>
       生成
       <strong>
        Personal access token
       </strong>
       。
      </p>
      <p>
       <strong>
        头像 - Settings - Developer settings - Personal access tokens - Generate new token
       </strong>
       ，按下图勾选需要的权限
       <br/>
       <img alt="image-20220122222951817" src="https://i-blog.csdnimg.cn/blog_migrate/cc44f91990346bd823beb8372f05f7b6.png"/>
       <br/>
       还记得我们要实现的效果吗？当主分支有新的代码提交，就要通知 jenkins 去拉取代码并进行构建。既然是
       <strong>
        通知
       </strong>
       ，那么肯定就需要用到
       <strong>
        Webhook
       </strong>
       。这里并不需要手动创建
       <strong>
        Webhock
       </strong>
       ，jenkins提供的插件会帮我们创建。
      </p>
      <p>
       接下来继续配置插件，**Manage Jenkisn - Config System - **，找到 Github 配置的部分
      </p>
     </li>
    </ol>
    <p>
     <img alt="image-20220122223754425" src="https://i-blog.csdnimg.cn/blog_migrate/031b2db5eab9980e4a4745d23d21bc76.png"/>
     <br/>
     点击添加凭证，选择
     <strong>
      Jenkins
     </strong>
     ，点击后会弹出一个添加凭据的窗口，
     <strong>
      Type
     </strong>
     选择为
     <strong>
      Secret text
     </strong>
     ，将我们刚才生成的
     <strong>
      Personal access token
     </strong>
     复制到
     <strong>
      Secret
     </strong>
     一栏中，点击添加
     <br/>
     <img alt="image-20220122223948772" src="https://i-blog.csdnimg.cn/blog_migrate/d8da84e548e0c1da2ad29b26fa340d76.png"/>
     <br/>
     添加后在
     <strong>
      Credentials
     </strong>
     一栏选中
     <strong>
      Secret text
     </strong>
     ，勾选
     <strong>
      Manage Hook
     </strong>
     ，点击
     <strong>
      Test connection
     </strong>
     ，如果正确显示了GitHub 用户名，就说明配置成功了。
    </p>
    <p>
     经过上面几步后，就完成了两件事情，Node 环境的配置和 Github Webhock 的添加，下面就可以开始新建任务了。
    </p>
    <h6>
     <a id="Item_275">
     </a>
     新建一个Item
    </h6>
    <ol>
     <li>
      <p>
       回到首页，新建一个自由风格的任务
      </p>
      <p>
       <img alt="image-20220122225529611" src="https://i-blog.csdnimg.cn/blog_migrate/3bf11ae65a371594e805e292ccb14650.png"/>
      </p>
     </li>
     <li>
      <p>
       勾选
       <strong>
        GitHub project
       </strong>
       ，输入项目地址。将下面的
       <strong>
        Source Code Management
       </strong>
       选中为
       <strong>
        Git
       </strong>
       ，将你要构建部署的项目的
       <strong>
        clone
       </strong>
       地址填到
       <strong>
        Repository URL
       </strong>
       一栏中。
      </p>
      <p>
       <img alt="image-20220122225920767" src="https://i-blog.csdnimg.cn/blog_migrate/0b69c210035728bad64771a62301f636.png"/>
      </p>
      <p>
       <img alt="image-20220122230320553" src="https://i-blog.csdnimg.cn/blog_migrate/bb52610598327d50baa1918c34ad4a40.png"/>
      </p>
      <p>
       如果是公开的仓库，
       <strong>
        Credentials
       </strong>
       可以选择无。这里我准备的是一个私有的仓库，还需要添加一个可以访问访问 Github账户 的凭证，添加方法类似上面配置
       <strong>
        Github Webhock
       </strong>
       。这里选择
       <strong>
        ssh private key
       </strong>
       的方式
      </p>
      <p>
       <img alt="image-20220122231214377" src="https://i-blog.csdnimg.cn/blog_migrate/0693e22ff04b8620d680c1aa804b99da.png"/>
      </p>
     </li>
     <li>
      <p>
       设置构建触发器和构建环境
      </p>
      <p>
       <img alt="image-20220122231805390" src="https://i-blog.csdnimg.cn/blog_migrate/9312d41258b9ad0f988f0c64ecd7af1a.png"/>
      </p>
     </li>
     <li>
      <p>
       编写构建shell
      </p>
      <p>
       <img alt="image-20220123000138842" src="https://i-blog.csdnimg.cn/blog_migrate/51bf6f84bfdd23a156987183badc5661.png"/>
      </p>
     </li>
    </ol>
    <p>
     经过上面的步骤，就算完成一个
     <strong>
      Item
     </strong>
     了，当
     <strong>
      Github
     </strong>
     主分支有新的代码提交，就会触发构建：
    </p>
    <p>
     <img alt="image-20220123002304395" src="https://i-blog.csdnimg.cn/blog_migrate/cedd923d3ac68f3beeab9cbf34181f64.png"/>
    </p>
    <h5>
     <a id="Github_Actions_305">
     </a>
     Github Actions
    </h5>
    <p>
     Github Actions 是 Github 提供的持续集成服务，可以使我们的 repo 获得一些自动化的能力。
    </p>
    <p>
     举例来说：
    </p>
    <ul>
     <li>
      <p>
       每次 repo 有新的提交或 pr 就自动执行 build
      </p>
     </li>
     <li>
      <p>
       在 repo 中定时执行自定义的脚本
      </p>
     </li>
     <li>
      <p>
       将代码打成镜像，自动提交到镜像仓库中
      </p>
     </li>
    </ul>
    <h6>
     <a id="_316">
     </a>
     一些概念
    </h6>
    <ul>
     <li>
      <code>
       workflow
      </code>
      ：一次执行过程，每个
      <code>
       workflow
      </code>
      使用一个配置文件维护
     </li>
     <li>
      <code>
       job
      </code>
      ：
      <code>
       workflow
      </code>
      的分解，
      <strong>
       可串行
      </strong>
      存在依赖，也
      <strong>
       可并行
      </strong>
      执行
     </li>
     <li>
      <code>
       step
      </code>
      ：
      <code>
       job
      </code>
      的分解，即具体执行的步骤
     </li>
     <li>
      <code>
       action
      </code>
      ：执行过程的封装，可以自定义，也可以使用 Github 社区定义好的
      <code>
       action
      </code>
     </li>
     <li>
      <code>
       artifact
      </code>
      ：
      <code>
       workflow
      </code>
      运行时产生的中间文件，包括日志、测试结果等
     </li>
     <li>
      <code>
       event
      </code>
      ：触发
      <code>
       workflow
      </code>
      的事件，也可以理解为
      <strong>
       生命周期钩子
      </strong>
     </li>
    </ul>
    <h6>
     <a id="_325">
     </a>
     如何配置
    </h6>
    <p>
     配置 CI/CD 任务的过程本质上是向 runner 描述如下内容：
    </p>
    <ul>
     <li>
      什么时候执行
     </li>
     <li>
      执行什么操作
     </li>
    </ul>
    <p>
     这里的 workflow 配置文件就是用来做这个工作的
    </p>
    <h6>
     <a id="workflow__334">
     </a>
     workflow 的触发
    </h6>
    <p>
     每个 workflow 的配置文件都需要定于
     <code>
      on
     </code>
     字段，用以描述在何种情况下（
     <code>
      event
     </code>
     ）下触发
     <code>
      job
     </code>
     的执行
    </p>
    <p>
     <code>
      event
     </code>
     可以分为 3 类：
    </p>
    <ul>
     <li>
      定时事件：由定时任务触发的事件
     </li>
     <li>
      手动触发事件：在 actions 页面中手动触发的时间
     </li>
     <li>
      Webhook 事件：Github 自身的钩子函数触发的事件，通常伴随着 git 操作
     </li>
    </ul>
    <p>
     在这里，我们只会用到最后一种，来描述
     <strong>
      git 操作
     </strong>
     触发的 CI/CD 行为
    </p>
    <h6>
     <a id="_workflow_346">
     </a>
     自动化部署的 workflow
    </h6>
    <p>
     下面是我在项目中经常使用的部署模板，我给它们加上了详细的注释
    </p>
    <pre><code class="prism language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> build and deploy <span class="token comment"># workflow 名称</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span> 
  <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token comment"># push 事件触发</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> dev <span class="token punctuation">]</span> <span class="token comment"># 只在 dev 分支有新的 push 情况下触发</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span> <span class="token comment"># job 名称</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest <span class="token comment"># 执行 workflow 所需的操作系统环境</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2 <span class="token comment"># 使用切换分支的 action 操作</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn <span class="token important">&amp;&amp;</span> yarn build <span class="token comment"># 构建命令</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> easingthemes/ssh<span class="token punctuation">-</span>deploy@main <span class="token comment"># 使用 ssh 上传文件的 action 操作</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">SSH_PRIVATE_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.SERVER_SSH_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># ssh 密钥对中的私钥</span>
          <span class="token key atrule">ARGS</span><span class="token punctuation">:</span> <span class="token string">"-rltgoDzvO"</span>
          <span class="token key atrule">SOURCE</span><span class="token punctuation">:</span> <span class="token string">"dist"</span> <span class="token comment"># 要进行上传的文件目录</span>
          <span class="token key atrule">REMOTE_HOST</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.REMOTE_HOST  <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># 服务器主机 ip</span>
          <span class="token key atrule">REMOTE_USER</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.REMOTE_USER <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># 服务器用户名</span>
          <span class="token key atrule">TARGET</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.REMOTE_TARGET <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># 要进行部署的生产环境目录</span>


      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> print env
        <span class="token key atrule">run</span><span class="token punctuation">:</span> printenv <span class="token comment"># 打印环境变量</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> build success
        <span class="token key atrule">if</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> success() <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># ${<!-- -->{ }} 可以使用上下文参数,success() 表示当上一步执行成功时返回 true</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> chf007/action<span class="token punctuation">-</span>wechat<span class="token punctuation">-</span>work@master <span class="token comment"># 使用发送企业微信消息的 action</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">WECHAT_WORK_BOT_WEBHOOK</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>secrets.WX_WEBHOOK<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment"># github token，需要自己在 repo 的 settings 中生成</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">msgtype</span><span class="token punctuation">:</span> news
          <span class="token key atrule">articles</span><span class="token punctuation">:</span> <span class="token string">'[{"title":"💯👨‍💻 Success Deploy ! 🎉🎉🎉","description":"click here to visit the test site ~","url":"http://xxxx:8080/","picurl":"https://xxxx.com/xxxx/figure-bed/raw/master/images/202203101823814.jpeg"}]'</span>
          <span class="token key atrule">mentioned_list</span><span class="token punctuation">:</span> <span class="token string">'[@all"]'</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> build failure
        <span class="token key atrule">if</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> failure() <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> chf007/action<span class="token punctuation">-</span>wechat<span class="token punctuation">-</span>work@master
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">WECHAT_WORK_BOT_WEBHOOK</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>secrets.WX_WEBHOOK<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">msgtype</span><span class="token punctuation">:</span> markdown
          <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            # 💤🤷‍♀️ Deploy Failure 🙅‍♂️💣
            &gt; (⋟﹏⋞)  from github action message</span>
          <span class="token key atrule">mentioned_list</span><span class="token punctuation">:</span> <span class="token string">'[@all"]'</span>
</code></pre>
    <blockquote>
     <p>
      注：上面 ssh 部署的方式使用了 rsa 秘钥对中的私钥，不知道怎么生成的话请参考
      <a href="https://git-scm.com/book/zh/v2/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E7%94%9F%E6%88%90-SSH-%E5%85%AC%E9%92%A5" rel="nofollow">
       服务器上的-Git-生成-SSH-公钥
      </a>
     </p>
    </blockquote>
    <h6>
     <a id="pr__workflow_405">
     </a>
     pr 合并消息提醒的 workflow
    </h6>
    <pre><code class="prism language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> pull request

<span class="token key atrule">on</span><span class="token punctuation">:</span>
   <span class="token key atrule">pull_request</span><span class="token punctuation">:</span>
      <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master<span class="token punctuation">,</span> dev <span class="token punctuation">]</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">pr</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2

      <span class="token comment"># 获取 pr 信息，添加到环境变量</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> set pr info
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          echo PR_NUMBER=$(echo $GITHUB_REF | awk 'BEGIN { FS = "/" } ; { print $3 }') &gt;&gt; $GITHUB_ENV
          echo PR_FROM=$(echo $GITHUB_HEAD_REF ) &gt;&gt; $GITHUB_ENV
          echo PR_TO=$(echo $GITHUB_B_REF ) &gt;&gt; $GITHUB_ENV
          echo PR_TITLE=$(jq --raw-output .pull_request.title "$GITHUB_EVENT_PATH") &gt;&gt; $GITHUB_ENV
          echo PR_URL=$(jq --raw-output .pull_request.html_url "$GITHUB_EVENT_PATH") &gt;&gt; $GITHUB_ENV
          echo PR_USER=$(jq --raw-output .pull_request.user.login "$GITHUB_EVENT_PATH") &gt;&gt; $GITHUB_ENV
          echo PR_COMMITS_NUM=$(jq --raw-output .pull_request.commits "$GITHUB_EVENT_PATH") &gt;&gt; $GITHUB_ENV</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> print env
        <span class="token key atrule">run</span><span class="token punctuation">:</span> printenv

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> pull request
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> chf007/action<span class="token punctuation">-</span>wechat<span class="token punctuation">-</span>work@master
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">WECHAT_WORK_BOT_WEBHOOK</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>secrets.WX_WEBHOOK<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">msgtype</span><span class="token punctuation">:</span> markdown
          <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            # 😍 Pull Request 🤤 ！ (＾－＾)V
            &gt; [${<!-- -->{ env.PR_TITLE }} #${<!-- -->{ env.PR_NUMBER }}](${<!-- -->{ env.PR_URL }})
            &gt; ${<!-- -->{ env.PR_USER }} wants to merge ${<!-- -->{ env.PR_COMMITS_NUM }} commits
            &gt; into &lt;font color=#2F8CDB&gt;${<!-- -->{ env.PR_TO }}&lt;/font&gt; from &lt;font color=#008000&gt;${<!-- -->{ env.PR_FROM }}&lt;/font&gt;</span>
</code></pre>
    <h6>
     <a id="_push__pr_workflow_448">
     </a>
     代码 push 并发起 pr，触发 workflow
    </h6>
    <p>
     尝试将本地的代码推送到远端，可以看到确实触发了部署的操作
     <br/>
     <img alt="image-20220415134754666" src="https://i-blog.csdnimg.cn/blog_migrate/eabb76a90172ac823cec157460eefa69.png"/>
     <br/>
     发起一个从开发分支到主分支的合并，同样的，也能触发对应的 workflow
     <br/>
     <img alt="image-20220415144404314" src="https://i-blog.csdnimg.cn/blog_migrate/e38b75a4c54d1e925a39f9ad8d550ba6.png"/>
    </p>
    <h3>
     <a id="_455">
     </a>
    </h3>
    <h3>
     <a id="_456">
     </a>
     总结
    </h3>
    <p>
     经过以上的步骤，也就实现了一个
     <strong>
      最小化自动化部署
     </strong>
     的实践，但这仅仅只是 CI/CD 庞杂管道流程中的一环，很多时候还会结合 docker、k8s、sentry、gitlab等实现
     <strong>
      多平台协同
     </strong>
     。上面用到的 Jenkins、Github Actions ，也只是工具中的两种，类似的还有国人开发的 Gitea、Onedev等各类集成了 CI/CD 的代码自建托管平台；企业中，也很有可能会自建一套完整的系统去满足内部的要求。
    </p>
    <p>
     上面两种方案虽然使用起来很方便，但其内部的实现，想必还是十分复杂的，后面有时间也会继续学习的。
    </p>
    <h3>
     <a id="_462">
     </a>
     参考
    </h3>
    <blockquote>
     <p>
      <a href="https://blog.hszofficial.site/introduce/2020/11/30/%E4%BD%BF%E7%94%A8GithubActions%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81/" rel="nofollow">
       使用GithubActions自动化工作流
      </a>
     </p>
     <p>
      <a href="https://juejin.cn/post/6944878021560139783" rel="nofollow">
       花半天时间，轻松打造前端CI/CD工作流
      </a>
     </p>
     <p>
      <a href="https://juejin.cn/post/6844903669381464071" rel="nofollow">
       从零搭建docker+jenkins+node.js自动化部署环境
      </a>
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
</div>


