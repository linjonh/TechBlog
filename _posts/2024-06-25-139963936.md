---
layout: post
title: 华为仓颉编程语言观感
date: 2024-06-25 17:13:54 +0800
categories: [华为]
tags: [华为,仓颉,HarmonyOS]
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=139963936
    alt: 华为仓颉编程语言观感
artid: 139963936
render_with_liquid: false
---
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     华为仓颉编程语言观感
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-github-gist" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      这里写自定义目录标题
     </h4>
     <ul>
      <li>
       <a href="#Swift_10" rel="nofollow">
        相似点（主要与Swift进行对比）
       </a>
      </li>
      <li>
       <a href="#_451" rel="nofollow">
        不同点
       </a>
      </li>
      <li>
       <a href="#_458" rel="nofollow">
        亮点
       </a>
      </li>
     </ul>
    </div>
    <br/>
    花了半天时间，对华为新出的仓颉编程语言做了简单的了解，整体观感如下：
    <p>
    </p>
    <ul>
     <li>
      仓颉语言看起来是一门大而全的语言，吸纳了现存的很多中编程语言的范式和语法。
     </li>
     <li>
      语法非常像Swift，有些语法又有rust的影子；
     </li>
     <li>
      静态类型语言，但编译为二进制可执行文件，无虚拟机。并发、垃圾回收与内存管理模块与java类似；
     </li>
     <li>
      支持声明式UI语法，类似于现在ArkUI使用的ArkTS语法，估计以后HarmonyOS的开发语言会从ArkTS转化为仓颉。
     </li>
    </ul>
    <p>
     目前仓颉语言只开放了文档，未开放sdk让开发者测试开发。可以申请仓颉的开发者预览版Beta招募，链接
     <a href="https://developer-huawei-com.translate.goog/consumer/cn/activityDetail/cangjie-beta/?_x_tr_sl=en&amp;_x_tr_tl=zh-CN&amp;_x_tr_hl=zh-CN&amp;_x_tr_pto=sc" rel="nofollow">
      Here
     </a>
    </p>
    <h2>
     <a id="Swift_10">
     </a>
     相似点（主要与Swift进行对比）
    </h2>
    <ul>
     <li>
      <p>
       <strong>
        类型扩展
       </strong>
      </p>
      <ol>
       <li>
        <p>
         添加函数 (swift包含)
        </p>
        <pre><code class="prism language-swift">仓颉：
extend <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token keyword">func</span> <span class="token function-definition function">printSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">print</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>size<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token string-literal"><span class="token string">"123"</span></span><span class="token punctuation">.</span><span class="token function">printSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

</code></pre>
        <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
<span class="token keyword">extension</span> <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">func</span> <span class="token function-definition function">printSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token string-literal"><span class="token string">"123"</span></span><span class="token punctuation">.</span><span class="token function">printSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
</code></pre>
       </li>
       <li>
        <p>
         添加属性 (swift不包含)
        </p>
       </li>
       <li>
        <p>
         添加操作符重载 (swift包含)
        </p>
        <pre><code class="prism language-swift">仓颉：
<span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">let</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token punctuation">}</span>

    <span class="token keyword">operator</span> <span class="token keyword">func</span> <span class="token operator">+</span><span class="token punctuation">(</span>rhs<span class="token punctuation">:</span> <span class="token class-name">Point</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>
            this<span class="token punctuation">.</span>x <span class="token operator">+</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
            this<span class="token punctuation">.</span>y <span class="token operator">+</span> rhs<span class="token punctuation">.</span>y
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token operator">...</span>
<span class="token keyword">let</span> b<span class="token punctuation">:</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token operator">...</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b
</code></pre>
        <pre><code class="prism language-swift"><span class="token class-name">Swift</span>：
<span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">let</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x
        <span class="token keyword">self</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token operator">+</span><span class="token punctuation">(</span>lhs<span class="token punctuation">:</span><span class="token class-name">Point</span><span class="token punctuation">,</span> rhs<span class="token punctuation">:</span> <span class="token class-name">Point</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span>
            lhs<span class="token punctuation">.</span>x <span class="token operator">+</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
            y<span class="token punctuation">:</span> lhs<span class="token punctuation">.</span>y <span class="token operator">+</span> rhs<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c<span class="token punctuation">:</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> d<span class="token punctuation">:</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> e <span class="token operator">=</span> c <span class="token operator">+</span> d

</code></pre>
       </li>
       <li>
        <p>
         实现接口 (swift包含)
        </p>
        <pre><code class="prism language-swift">仓颉：
sealed interface <span class="token class-name">Integer</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

extend <span class="token class-name">Int8</span> <span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token class-name">Integer</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
extend <span class="token class-name">Int16</span> <span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token class-name">Integer</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
extend <span class="token class-name">Int32</span> <span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token class-name">Integer</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
extend <span class="token class-name">Int64</span> <span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token class-name">Integer</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token class-name">Integer</span> <span class="token operator">=</span> <span class="token number">123</span> <span class="token comment">// ok</span>
</code></pre>
        <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
<span class="token keyword">protocol</span> <span class="token class-name">Integer</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">extension</span> <span class="token class-name">Int8</span> <span class="token punctuation">:</span> <span class="token class-name">Integer</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token punctuation">:</span><span class="token class-name">Integer</span> <span class="token operator">=</span> <span class="token class-name">Int8</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>

</code></pre>
       </li>
      </ol>
     </li>
     <li>
      <p>
       <strong>
        代数数据类型和模式匹配
       </strong>
      </p>
      <pre><code class="prism language-swift">仓颉中的枚举定义与使用：

<span class="token keyword">enum</span> <span class="token class-name">BinaryTree</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">|</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token keyword">left</span><span class="token punctuation">:</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">,</span> <span class="token keyword">right</span><span class="token punctuation">:</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token class-name">Empty</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function-definition function">sumBinaryTree</span><span class="token punctuation">(</span>bt<span class="token punctuation">:</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">match</span> <span class="token punctuation">(</span>bt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//match关键字实际是rust语言中的模式匹配关键字。</span>
        <span class="token keyword">case</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
            v <span class="token operator">+</span> <span class="token function">sumBinaryTree</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">sumBinaryTree</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token class-name">Empty</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span>中的枚举定义与使用：

<span class="token keyword">indirect</span> <span class="token keyword">enum</span> <span class="token class-name">BinaryTree</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token keyword">left</span><span class="token punctuation">:</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">,</span> <span class="token keyword">right</span><span class="token punctuation">:</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token class-name">Empty</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function-definition function">sumBinaryTree</span><span class="token punctuation">(</span>bt<span class="token punctuation">:</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> bt <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">let</span> value<span class="token punctuation">,</span> <span class="token keyword">let</span> <span class="token keyword">left</span><span class="token punctuation">,</span> <span class="token keyword">let</span> <span class="token keyword">right</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token function">sumBinaryTree</span><span class="token punctuation">(</span>bt<span class="token punctuation">:</span> <span class="token keyword">left</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">sumBinaryTree</span><span class="token punctuation">(</span>bt<span class="token punctuation">:</span> <span class="token keyword">right</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token class-name">Empty</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
     </li>
     <li>
      <p>
       <strong>
        泛型
       </strong>
       <br/>
       泛型函数的声明方式几乎一样，尤其是针对泛型类型T的限制，两者都使用where关键字。
      </p>
      <pre><code class="prism language-swift">仓颉：
<span class="token keyword">func</span> <span class="token function-definition function">lookup</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>element<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span> arr<span class="token punctuation">:</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token class-name">Equatable</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>e <span class="token keyword">in</span> arr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token operator">==</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
<span class="token keyword">func</span> <span class="token function-definition function">lookup</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>element<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span> arr<span class="token punctuation">:</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> e <span class="token keyword">in</span> arr <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token operator">==</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        命名参数&amp;参数默认值
       </strong>
      </p>
      <pre><code class="prism language-swift">仓颉：
<span class="token keyword">func</span> <span class="token function-definition function">dateOf</span><span class="token punctuation">(</span>year<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">,</span> month<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">,</span> dayOfMonth<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">,</span> timeZone<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token class-name">TimeZone</span> <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token class-name">Local</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    
<span class="token punctuation">}</span>

<span class="token function">dateOf</span><span class="token punctuation">(</span>year<span class="token punctuation">:</span> <span class="token number">2024</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> dayOfMonth<span class="token punctuation">:</span> <span class="token number">21</span><span class="token punctuation">)</span> <span class="token comment">// ok</span>
<span class="token function">dateOf</span><span class="token punctuation">(</span>year<span class="token punctuation">:</span> <span class="token number">2024</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> dayOfMonth<span class="token punctuation">:</span> <span class="token number">21</span><span class="token punctuation">,</span> timeZone<span class="token punctuation">:</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">)</span> <span class="token comment">// ok</span>

</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
<span class="token keyword">func</span> <span class="token function-definition function">dateOf</span><span class="token punctuation">(</span>year<span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">,</span> dayOfMonth<span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">,</span> timeZone<span class="token punctuation">:</span> <span class="token class-name">TimeZone</span> <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    
<span class="token punctuation">}</span>

<span class="token function">dateOf</span><span class="token punctuation">(</span>year<span class="token punctuation">:</span> <span class="token number">2024</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> dayOfMonth<span class="token punctuation">:</span> <span class="token number">21</span><span class="token punctuation">)</span> <span class="token comment">// ok</span>
<span class="token function">dateOf</span><span class="token punctuation">(</span>year<span class="token punctuation">:</span> <span class="token number">2024</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> dayOfMonth<span class="token punctuation">:</span> <span class="token number">21</span><span class="token punctuation">,</span> timeZone<span class="token punctuation">:</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span>gmt<span class="token punctuation">)</span> <span class="token comment">// ok</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        尾随lambda（trailing lambda）
       </strong>
      </p>
      <pre><code class="prism language-swift">仓颉：
<span class="token keyword">func</span> <span class="token function-definition function">unless</span><span class="token punctuation">(</span>condition<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token class-name">Unit</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

int a <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token function">unless</span><span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"no greater than 0"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
<span class="token keyword">func</span> <span class="token function-definition function">unless</span><span class="token punctuation">(</span>condition<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">,</span> f<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token operator">!</span>condition <span class="token punctuation">{<!-- --></span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">unless</span><span class="token punctuation">(</span>condition<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"no greater than 0"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre>
     </li>
     <li>
      <p>
       <strong>
        属性
       </strong>
       <br/>
       属性的get/set配置。
      </p>
      <pre><code class="prism language-swift">仓颉：
x和y是只读的，只有<span class="token keyword">get</span>实现，而color则是可变的，用mut prop修饰，同时具有<span class="token keyword">get</span>和<span class="token keyword">set</span>实现。
<span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> _x<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> _y<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> _color<span class="token punctuation">:</span> <span class="token class-name">String</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token punctuation">}</span>

    prop x<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>level<span class="token punctuation">:</span> <span class="token class-name">Debug</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"access x"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> _x
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    prop y<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>level<span class="token punctuation">:</span> <span class="token class-name">Debug</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"access y"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> _y
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    mut prop color<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>level<span class="token punctuation">:</span> <span class="token class-name">Debug</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"access color"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> _color
        <span class="token punctuation">}</span>

        <span class="token keyword">set</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>level<span class="token punctuation">:</span> <span class="token class-name">Debug</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"reset color to ${c}"</span></span><span class="token punctuation">)</span>
            color <span class="token operator">=</span> c
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"red"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> p<span class="token punctuation">.</span>x <span class="token comment">// "access x"</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> p<span class="token punctuation">.</span>y <span class="token comment">// "access y"</span>
    p<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"green"</span></span> <span class="token comment">// "reset color to green"</span>
<span class="token punctuation">}</span>
</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
x和y是只读的，只有<span class="token keyword">get</span>实现，而color则是可变的，同时具有<span class="token keyword">get</span>和<span class="token keyword">set</span>实现。
<span class="token keyword">class</span> <span class="token class-name">Point2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> _x<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> _y<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> _color<span class="token punctuation">:</span> <span class="token class-name">String</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> x<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span><span class="token omit keyword">_</span> color<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>_x <span class="token operator">=</span> x
        <span class="token keyword">self</span><span class="token punctuation">.</span>_y <span class="token operator">=</span> y
        <span class="token keyword">self</span><span class="token punctuation">.</span>_color <span class="token operator">=</span> color
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span>  x<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _x
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _y
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

     <span class="token keyword">var</span> color<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _color
        <span class="token punctuation">}</span>

        <span class="token keyword">set</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            _color <span class="token operator">=</span> c
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token class-name">Point2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"red"</span></span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">//error</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> p<span class="token punctuation">.</span>x <span class="token comment">// "access x"</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> p<span class="token punctuation">.</span>y <span class="token comment">// "access y"</span>
    p<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"green"</span></span> <span class="token comment">// "reset color to green"</span>

</code></pre>
     </li>
     <li>
      <p>
       <strong>
        空引用安全
       </strong>
      </p>
      <p>
       在仓颉中，对于任意类型T，都可以有对应的可选类型Option。具有Option类型的变量要么对应一个实际的具有T类型的值v，因此取值为Some(v)，要么具有空值，取值为None。
      </p>
      <p>
       可选类型（Option）是一种 enum 类型，是一个经典的代数数据类型，表示有值或空值两种状态。
       <br/>
       在Swift，用来表示变量可空的关键字为Optional.
      </p>
      <pre><code class="prism language-swift">仓颉：
<span class="token keyword">var</span> a<span class="token punctuation">:</span> <span class="token operator">?</span><span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token class-name">None</span>
a<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// None</span>
a <span class="token operator">??</span> <span class="token number">123</span> <span class="token comment">// 123</span>
a <span class="token operator">=</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token number">321</span><span class="token punctuation">)</span>
a<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Some("321")</span>
a <span class="token operator">??</span> <span class="token number">123</span> <span class="token comment">// 321</span>
</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
<span class="token keyword">var</span> f<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span>
<span class="token function">print</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token comment">//nil</span>
<span class="token function">print</span><span class="token punctuation">(</span>f <span class="token operator">??</span> <span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>
<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">(</span><span class="token number">321</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span> <span class="token comment">//Optional(321)</span>
<span class="token function">print</span><span class="token punctuation">(</span>g <span class="token operator">??</span> <span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// 321</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        值类型
       </strong>
       <br/>
       仓颉和Swift都使用struct来实现用户自定义的值类型。
      </p>
      <pre><code class="prism language-swift">仓颉：
<span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a
a<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span>
<span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
<span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
        <span class="token keyword">self</span><span class="token punctuation">.</span>x  <span class="token operator">=</span> x
        <span class="token keyword">self</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token class-name">Point3</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> b1 <span class="token operator">=</span> a1
a1<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span>
<span class="token function">print</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        宏
       </strong>
      </p>
      <pre><code class="prism language-swift">仓颉：
定义一个名为 <span class="token class-name">DebugLog</span> 的宏：
<span class="token keyword">public</span> macro <span class="token class-name">DebugLog</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token class-name">Tokens</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>globalConfig<span class="token punctuation">.</span>mode <span class="token operator">==</span> <span class="token class-name">Mode</span><span class="token punctuation">.</span>development<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">quote</span><span class="token punctuation">(</span> <span class="token function">println</span><span class="token punctuation">(</span> $<span class="token punctuation">{<!-- --></span>input<span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">quote</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
使用 <span class="token class-name">DebugLog</span> 宏：
<span class="token attribute atrule">@DebugLog</span><span class="token punctuation">(</span> <span class="token function">expensiveComputation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre>
      <pre><code class="prism language-rust"><span class="token class-name">Rust</span><span class="token punctuation">:</span>
<span class="token keyword">use</span> proc_macro<span class="token punctuation">;</span>

<span class="token attribute attr-name">#[some_attribute]</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">some_name</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token class-name">TokenStream</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">TokenStream</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        Actor
       </strong>
      </p>
      <p>
       使用更简洁的语法来实现异步编程、并发编程中的数据竞争问题。
      </p>
      <pre><code class="prism language-swift">仓颉：
<span class="token keyword">actor</span> <span class="token class-name">Account</span> <span class="token punctuation">{<!-- --></span>
    instance <span class="token keyword">var</span> balance<span class="token punctuation">:</span> <span class="token class-name">Int64</span>
    <span class="token keyword">init</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> this<span class="token punctuation">.</span>balance <span class="token operator">=</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    instance <span class="token keyword">func</span> <span class="token function-definition function">performWithdraw</span><span class="token punctuation">(</span>amount<span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Unit</span> <span class="token punctuation">{<!-- --></span>
        balance <span class="token operator">-=</span> amount
    <span class="token punctuation">}</span>
    receiver <span class="token keyword">func</span> <span class="token function-definition function">withdraw</span><span class="token punctuation">(</span>amount<span class="token punctuation">:</span> <span class="token class-name">Int64</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>balance <span class="token operator">&lt;</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            this<span class="token punctuation">.</span><span class="token function">performWithdraw</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      <pre><code class="prism language-swift"><span class="token class-name">Swift</span><span class="token punctuation">:</span>
注意：这段代码是来自于<span class="token class-name">Swift</span>的官方文档。仓颉的文档示例与swift的文档示例代码基本是一致的，看来仓颉语言应该是参考了<span class="token class-name">Swift</span>语言不少的东西。
<span class="token keyword">actor</span> <span class="token class-name">Account</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> balance<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token comment">// current user balance is 20</span>
	<span class="token comment">// ...</span>
	<span class="token keyword">func</span> <span class="token function-definition function">withdraw</span><span class="token punctuation">(</span>amount<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">guard</span> balance <span class="token operator">&gt;=</span> amount <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">return</span><span class="token punctuation">}</span>
		<span class="token keyword">self</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance <span class="token operator">-</span> amount
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        可变性修饰符
        <br/>
        可变性修饰符：let 与 var，分别对应不可变和可变属性，
       </strong>
      </p>
     </li>
    </ul>
    <h2>
     <a id="_451">
     </a>
     不同点
    </h2>
    <ul>
     <li>
      <p>
       <strong>
        垃圾收集方案
       </strong>
      </p>
      <p>
       仓颉使用追踪式垃圾回收，类似于java中的基于可达性分析的垃圾回收算法；Swift使用引用计数法。（Swift有weak关键字）
      </p>
     </li>
    </ul>
    <h2>
     <a id="_458">
     </a>
     亮点
    </h2>
    <ul>
     <li>
      <p>
       <strong>
        管道（Pipeline）操作符
       </strong>
      </p>
      <pre><code class="prism language-swift"><span class="token keyword">func</span> <span class="token function-definition function">double</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    a <span class="token operator">*</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function-definition function">increment</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    a <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token function">double</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 42</span>

<span class="token number">5</span> <span class="token operator">|&gt;</span> double <span class="token operator">|&gt;</span> double <span class="token operator">|&gt;</span> increment <span class="token operator">|&gt;</span> double <span class="token comment">// 42</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        类型扩展可添加属性
       </strong>
      </p>
     </li>
     <li>
      <p>
       <strong>
        try-with-resources
       </strong>
       <br/>
       该特性应该借鉴自java.
      </p>
      <pre><code class="prism language-swift"><span class="token keyword">try</span> <span class="token punctuation">(</span>input <span class="token operator">=</span> <span class="token class-name">MyResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output <span class="token operator">=</span> <span class="token class-name">MyResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">hasNextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> lineString <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        output<span class="token punctuation">.</span><span class="token function">writeLine</span><span class="token punctuation">(</span>lineString<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        溢出检查
       </strong>
       <br/>
       这个机制使得大多数时候，整数溢出都会及时被感知，避免造成业务隐患。
      </p>
      <pre><code class="prism language-swift"><span class="token attribute atrule">@OverflowWrapping</span>
<span class="token keyword">func</span> <span class="token function-definition function">test</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">Int8</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Int8</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// if x equals to 127 and y equals to 3</span>
    <span class="token keyword">let</span> z <span class="token operator">=</span> x <span class="token operator">+</span> y <span class="token comment">// z equals to -126</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        并发编程
       </strong>
      </p>
      <ol>
       <li>
        <p>
         线程创建简单且占用内存量小。使用Spawn关键字来创建新线程。
        </p>
        <pre><code class="prism language-swift"><span class="token keyword">func</span> <span class="token function-definition function">fetch_data</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token function">http_get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token function">process</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"https://example.com/data1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"https://example.com/data2"</span></span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> futures <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token class-name">Future</span><span class="token operator">&lt;</span><span class="token class-name">Unit</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>url <span class="token keyword">in</span> urls<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> fut <span class="token operator">=</span> spawn <span class="token punctuation">{<!-- --></span> <span class="token function">fetch_data</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">}</span>  <span class="token comment">// 创建仓颉线程进行网络请求</span>
        futures<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>fut<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>fut <span class="token keyword">in</span> futures<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 等待所有仓颉线程完成</span>
        fut<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
       </li>
       <li>
        <p>
         无锁并发对象。
         <br/>
         运行时库提供了一系列的原子操作对象，尽量让开发者少使用互斥量或者锁来实现线程安全。同时提供的这些原子操作对象，针对多线程操作做了优化，其效率比单纯使用互斥量要高得多。
        </p>
       </li>
      </ol>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
</div>


