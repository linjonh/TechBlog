---
layout: post
title: "在微信开发者工具中-实现微信小程序之相机拍照及其相关功能的开发"
date: 2024-08-08 02:05:08 +0800
description: "在微信开发者工具中 实现微信小程序之相机拍照功能的开发包括相机拍照文件相册的打开 镜头的反转等_微信"
keywords: "微信小程序,小程序开发,拍照功能"
categories: ['微信小程序开发']
tags: ['小程序', 'Vue', 'Python', 'Js', 'Java']
artid: "104384845"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=104384845
    alt: "在微信开发者工具中-实现微信小程序之相机拍照及其相关功能的开发"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     在微信开发者工具中 实现微信小程序之相机拍照及其相关功能的开发
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <strong>
      微信小程序 - 相关知识
     </strong>
    </p>
    <p>
     技术扩展 - 微信小程序 - 相机拍照功能
    </p>
    <p>
     微信开发：前端 + 后端
    </p>
    <p>
     小程序开发 - 准备工作：JavaScript + HTML + CSS
    </p>
    <p>
     小程序 - 面向微信框架技术开发
    </p>
    <p>
     帮助将自己开发的小程序发布上线 - 工程应用能力
    </p>
    <p>
     掌握小程序的开发工具使用 - 下载 微信开发者工具
    </p>
    <p>
     如何创建小程序项目
    </p>
    <p>
     理解小程序项目里面每个开发文件作用
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/17697a8cca9d69c6e53a9553a2b5582b.jpeg">
      <br/>
      首先我们要掌握小程序的目录结构
      <br/>
      pages：放置源代码的地方，如: wxml, wxss, js, json；
      <br/>
      utils：封装js代码的地方，公共模块开发的程序都放置到utils里面；
      <br/>
      app.json：全局代码配置文件，如：窗口颜色配置；窗口外观配置；
      <br/>
      wxml：类似 html，完成界面设计；
      <br/>
      wxss：类似 css；
      <br/>
      js：标准的javascript文件 ；
     </img>
    </p>
    <p>
     <strong>
      其次要知道：
     </strong>
     <br/>
     组件：类似 html 里面的标签
     <br/>
     API：开发应用一些接口（拍照；地图；媒体；网络）
     <br/>
     核心语法：数据绑定
    </p>
    <h3>
     <a id="_30">
     </a>
     拍照功能开发
    </h3>
    <p>
     第一步：搭建界面，只需要搭建一个拍照界面，则我们要去创建一个home.wxml；home.wxss；home.js ；
     <br/>
     在app.json文件里面添加一个路径，则就会创建好拍照界面
    </p>
    <pre><code>{ 
 "pages":[    
	 "pages/home/home",    
	 "pages/index/index",    
	 "pages/logs/logs"  
	 ],  
	 "window":{    
	 "backgroundTextStyle":"light",   
	 "navigationBarBackgroundColor": "#fff",    
	 "navigationBarTitleText": "WeChat",    
	 "navigationBarTextStyle":"black" 
	 }
}
</code></pre>
    <p>
     第二步：添加素材 - 拍照 图片，手动先创建目录，添加图片 。
    </p>
    <p>
     第三步：添加具备拍照功能 组件 camera
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>camera style<span class="token operator">=</span><span class="token string">"width:100%; height: {<!-- -->{wh}}px;"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>camera<span class="token operator">&gt;</span></code></pre>
    <pre><code class="prism language-javascript"><span class="token comment">// pages/home/home.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>​  
<span class="token comment">/**   * 页面的初始数据   */</span>  
data<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>    
<span class="token comment">// 获取设备的高度, 用wh来定义设备高度    </span>
wh<span class="token punctuation">:</span> <span class="token number">0</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面加载   */</span>  
onLoad<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
<span class="token comment">// 获取设备的信息, 使用微信的开发文档    </span>
<span class="token keyword">var</span> sysinfo <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>​    

<span class="token comment">// 获取设备的高度    </span>
<span class="token keyword">var</span> windowHeight <span class="token operator">=</span> sysinfo<span class="token punctuation">.</span>screenHeight<span class="token punctuation">;</span> <span class="token comment">// 屏幕高度    </span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>      
wh<span class="token punctuation">:</span> windowHeight    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>​  
<span class="token punctuation">}</span><span class="token punctuation">,</span>​  

<span class="token comment">/**   * 生命周期函数--监听页面初次渲染完成   */</span>  
onReady<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面显示   */</span>  
onShow<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面隐藏   */</span>  
onHide<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面卸载   */</span>  
onUnload<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 页面相关事件处理函数--监听用户下拉动作   */</span>  
onPullDownRefresh<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 页面上拉触底事件的处理函数   */</span>  
onReachBottom<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 用户点击右上角分享   */</span>  
onShareAppMessage<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
    <p>
     第四步：加入拍照功能按钮图标
    </p>
    <pre><code class="prism language-java"><span class="token operator">&lt;</span>camera style<span class="token operator">=</span><span class="token string">"width:100%; height: {<!-- -->{wh}}px;"</span><span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'btns-box'</span><span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/album.png'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/camera.png'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/reverse.png'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>camera<span class="token operator">&gt;</span></code></pre>
    <pre><code class="prism language-javascript"><span class="token punctuation">.</span>btns<span class="token operator">-</span>box 
<span class="token punctuation">{<!-- --></span>  display<span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  justify<span class="token operator">-</span>content<span class="token punctuation">:</span> space<span class="token operator">-</span>around<span class="token punctuation">;</span>  align<span class="token operator">-</span>items<span class="token punctuation">:</span> center<span class="token punctuation">;</span>  position<span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  bottom<span class="token punctuation">:</span> <span class="token number">50</span>rpx<span class="token punctuation">;</span>  width<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>  z<span class="token operator">-</span>index<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
​<span class="token punctuation">.</span>btns<span class="token operator">-</span>box cover<span class="token operator">-</span>image 
<span class="token punctuation">{<!-- --></span>  width<span class="token punctuation">:</span> <span class="token number">150</span>rpx<span class="token punctuation">;</span>  height<span class="token punctuation">:</span> <span class="token number">150</span>rpx<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>
    <p>
     第五步：拍照功能，提示：调用系统拍照程序；获取图片路径
    </p>
    <pre><code class="prism language-c"><span class="token operator">&lt;</span>camera style<span class="token operator">=</span><span class="token string">"width:100%; height: {<!-- -->{wh}}px;"</span> wx<span class="token punctuation">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"{<!-- -->{src === ''}}"</span><span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>view class<span class="token operator">=</span><span class="token string">'btns-box'</span><span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/album.png'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/camera.png'</span> bindtap<span class="token operator">=</span><span class="token string">"takePhotoMySelf"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/reverse.png'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>camera<span class="token operator">&gt;</span>
​
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 加载拍照的图片 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view wx<span class="token punctuation">:</span><span class="token keyword">else</span><span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">'{<!-- -->{src}}'</span> style<span class="token operator">=</span><span class="token string">'height: {<!-- -->{wh}}px; width: 100%; display: block;'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">'warn'</span><span class="token operator">&gt;</span>重拍<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></code></pre>
    <pre><code class="prism language-javascript"><span class="token comment">// pages/home/home.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>​  
<span class="token comment">/**   * 页面的初始数据   */</span>  
data<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>    
<span class="token comment">// 获取设备的高度, 用wh来定义设备高度    </span>
wh<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>​    
<span class="token comment">// 存储拍照的图片地址    </span>
src<span class="token punctuation">:</span> <span class="token string">''</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  

<span class="token comment">// 拍照功能  </span>
takePhotoMySelf<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
<span class="token keyword">var</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCameraContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 获取拍照权限    </span>
<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    
ctx<span class="token punctuation">.</span><span class="token function">takePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>      
quality<span class="token punctuation">:</span> <span class="token string">'high'</span><span class="token punctuation">,</span>     
success<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
<span class="token comment">// 返回拍照执行成功函数        </span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tempImagePath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拍照图片地址        </span>
_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>          
src<span class="token punctuation">:</span> res<span class="token punctuation">.</span>tempImagePath        <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面加载   */</span>  
onLoad<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
<span class="token comment">// 获取设备的信息, 使用微信的开发文档    </span>
<span class="token keyword">var</span> sysinfo <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>​    
<span class="token comment">// 获取设备的高度    </span>
ar windowHeight <span class="token operator">=</span> sysinfo<span class="token punctuation">.</span>screenHeight<span class="token punctuation">;</span> 
<span class="token comment">// 屏幕高度    </span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>      wh<span class="token punctuation">:</span> windowHeight    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面初次渲染完成   */</span>  
onReady<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面显示   */</span>  
onShow<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面隐藏   */</span>  
onHide<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 生命周期函数--监听页面卸载   */</span>  
onUnload<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 页面相关事件处理函数--监听用户下拉动作   */</span>  
onPullDownRefresh<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
<span class="token comment">/**   * 页面上拉触底事件的处理函数   */</span>  
onReachBottom<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​ 
 <span class="token comment">/**   * 用户点击右上角分享   */</span>  
 onShareAppMessage<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
    <p>
     最后一步：查看相册；（核心能够获取图片地址）
    </p>
    <pre><code class="prism language-c"><span class="token operator">&lt;</span>camera style<span class="token operator">=</span><span class="token string">"width:100%; height: {<!-- -->{wh}}px;"</span> wx<span class="token punctuation">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"{<!-- -->{src === ''}}"</span> device<span class="token operator">-</span>position<span class="token operator">=</span><span class="token string">'{<!-- -->{pos}}'</span><span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>view class<span class="token operator">=</span><span class="token string">'btns-box'</span><span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/album.png'</span> bindtap<span class="token operator">=</span><span class="token string">"choosePhoto"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/camera.png'</span> bindtap<span class="token operator">=</span><span class="token string">"takePhotoMySelf"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>cover<span class="token operator">-</span>image src<span class="token operator">=</span><span class="token string">'/images/reverse.png'</span> bindtap<span class="token operator">=</span><span class="token string">"takePhotoFront"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>image<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>cover<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>camera<span class="token operator">&gt;</span>
​
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 加载拍照的图片 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view wx<span class="token punctuation">:</span><span class="token keyword">else</span><span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">'{<!-- -->{src}}'</span> style<span class="token operator">=</span><span class="token string">'height: {<!-- -->{wh}}px; width: 100%; display: block;'</span> mode<span class="token operator">=</span><span class="token string">'aspectFit'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">'warn'</span> bindtap<span class="token operator">=</span><span class="token string">'reChoose'</span><span class="token operator">&gt;</span>重拍<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span></code></pre>
    <pre><code class="prism language-javascript"><span class="token comment">// pages/home/home.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>​  
<span class="token comment">/**   * 页面的初始数据   */</span>  
data<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>    
<span class="token comment">// 获取设备的高度, 用wh来定义设备高度    </span>
wh<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>​    

<span class="token comment">// 存储拍照的图片地址    </span>
src<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>​    

<span class="token comment">// 摄像头朝向    </span>
pos<span class="token punctuation">:</span> <span class="token string">'back'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  

<span class="token comment">// 拍照功能  </span>
takePhotoMySelf<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
<span class="token keyword">var</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCameraContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取拍照权限    </span>
<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    
ctx<span class="token punctuation">.</span><span class="token function">takePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>      
quality<span class="token punctuation">:</span> <span class="token string">'high'</span><span class="token punctuation">,</span>      
success<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 返回拍照执行成功函数        </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tempImagePath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拍照图片地址        </span>
_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>          
src<span class="token punctuation">:</span> res<span class="token punctuation">.</span>tempImagePath        
<span class="token punctuation">}</span><span class="token punctuation">)</span>      
<span class="token punctuation">}</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span>​  

<span class="token comment">// 从相册选择照片  </span>
choosePhoto<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    
wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>      
count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 只选择一张图片      </span>
sizeType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'original'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 原图选择      </span>
sourceType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 本地相册选择照片      </span>
success<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 选择成功后执行代码        </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>        
<span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg <span class="token operator">===</span> <span class="token string">'chooseImage:ok'</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>          
_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>            
src<span class="token punctuation">:</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>          
<span class="token punctuation">}</span><span class="token punctuation">)</span>        
<span class="token punctuation">}</span>      
<span class="token punctuation">}</span><span class="token punctuation">,</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span>​  <span class="token comment">// 重新选择照片  </span>
reChoose<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>      
src<span class="token punctuation">:</span> <span class="token string">''</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  <span class="token comment">// 摄像头朝向  </span>
takePhotoFront<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>   
 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>     
  pos<span class="token punctuation">:</span> <span class="token string">'front'</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>​ 
 <span class="token comment">/**   * 生命周期函数--监听页面加载   */</span>  
 onLoad<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
 <span class="token comment">// 获取设备的信息, 使用微信的开发文档   </span>
  <span class="token keyword">var</span> sysinfo <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>​    
  <span class="token comment">// 获取设备的高度    </span>
  <span class="token keyword">var</span> windowHeight <span class="token operator">=</span> sysinfo<span class="token punctuation">.</span>screenHeight<span class="token punctuation">;</span> 
  <span class="token comment">// 屏幕高度    </span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>      
  wh<span class="token punctuation">:</span> windowHeight    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
  <span class="token comment">/**   * 生命周期函数--监听页面初次渲染完成   */</span>  
  onReady<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
  <span class="token comment">/**   * 生命周期函数--监听页面显示   */</span>  
  onShow<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
  <span class="token comment">/**   * 生命周期函数--监听页面隐藏   */</span>  
  onHide<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
  <span class="token comment">/**   * 生命周期函数--监听页面卸载   */</span>  
  onUnload<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
  <span class="token comment">/**   * 页面相关事件处理函数--监听用户下拉动作   */</span>  
  onPullDownRefresh<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
  <span class="token comment">/**   * 页面上拉触底事件的处理函数   */</span>  
  onReachBottom<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">,</span>​  
  <span class="token comment">/**   * 用户点击右上角分享   */</span>  
  onShareAppMessage<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>​  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  
 </code></pre>
    <p>
     注：（这里在拍照测试时将用到电脑自带摄像头， 相机镜头朝向的测试可通过
     <a href="https://mp.weixin.qq.com/" rel="nofollow">
      微信开发者工具
     </a>
     中的预览 完成测试）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dae46c747682194e237b3df1f03ad1be.jpeg"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f42696e5061726b65722f:61727469636c652f64657461696c732f313034333834383435" class_="artid" style="display:none">
 </p>
</div>


