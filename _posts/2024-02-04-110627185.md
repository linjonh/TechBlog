---
layout: post
title: "python中and和or的惰性求值特点_Python-惰性求值"
date: 2024-02-04 09:26:04 +0800
description: "本文介绍了Python中惰性求值的概念及其应用。惰性求值可以提高函数式编程的效率，通过推迟计算直到真"
keywords: "python中,or是惰性求值嘛"
categories: ['未分类']
tags: ['Python']
artid: "110627185"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=110627185
  alt: "python中and和or的惰性求值特点_Python-惰性求值"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     python中and和or的惰性求值特点_Python 惰性求值
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div style="font-size:16px;">
     <p>
      Python 惰性求值，函数式编程高效，原因之一是将计算推迟到需要的时候进行。惰性(也称“非严格”)求值非常重要，Python内置了对它的支持。
     </p>
     <p>
      Python中，逻辑运算符and、or和if-then-else都是非严格的。有时也称之为“短路”运算符，因为它们不需要计算全部参数就能得到最终结果。
     </p>
     <p>
      以下命令片断展示了and运算符的惰性求值特性。
     </p>
     <p>
      执行上面的代码时，如果and运算符左边的表达式值为False，不会对右边的表达式求值；只有当左边的表达式值为True时，才会对右边的表达式求值。
     </p>
     <p>
      除此之外，Python使用严格求值规则。除了逻辑运算符，表达式都是严格地从左向右求值的。一组语句也是严格按顺序求值的，列表字面量和元组亦然。
     </p>
     <p>
      当创建一个类时，它的各个方法是严格按顺序定义的。在类的定义中，所有方法在创建之后(默认)被放入一个字典，并不会保持之前的顺序。如果在一个类中创建两个名字相同的方法，那么由于严格的求值顺序，只会保留后面的方法，前面定义的方法会被覆盖掉。
     </p>
     <p>
      Python的生成器表达式和生成器函数是惰性的，在求值时，这些表达式不会马上计算出所有的可能结果。如果不把计算过程显式打印出来，很难看到惰性求值的结果。下面的例子演示了通过引入带有副作用的range()函数生成值的过程。
     </p>
     <p>
      每生成一个值，该函数就将其打印出来，以此给出调试提示。如果这个函数是严格求值的，将会打印出所有1024个值，但由于它是惰性的，所以只会按需生成值。
     </p>
     <p>
      Python 2的range()函数是严格求值的，创建后就会生成所有包含的值。Python 3的range()函数是惰性求值的，不会创建大型数据结构。
     </p>
     <p>
      可以用惰性求值的方式使用这个带日志功能的numbers()函数。下面编写一个只求部分值(而非全部)的函数。
     </p>
     <p>
      sum_to()函数的类型提示表明它接收整型值作为参数，并返回整型值。sum变量也使用了Python 3语法：:int，表明它是一个整型值。sum_to()函数不对numbers()函数取所有值，在取了前几个值后，就通过break语句退出了。下面的日志展示了numbers()创建值的方式。
     </p>
     <p>
      后面会讲到，Python生成器函数的一些特点使得它在应用于简单函数时会出现一些小麻烦，例如一个生成器只能用一次，因此在使用Python的惰性生成器表达式时要小心。
     </p>
    </div>
   </div>
  </div>
  <div id="recommendDown">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33393739303736302f:61727469636c652f64657461696c732f313130363237313835" class_="artid" style="display:none">
 </p>
</div>
