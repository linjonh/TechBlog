---
layout: post
title: "svn自动同步到另一台服务器"
date: 2022-10-08 16:52:13 +0800
description: "本文介绍如何通过SVN的hook机制，在Windows服务器上的SVN版本库进行代码提交时，自动触发"
keywords: "svn 数据有变化另一台电脑自动更新"
categories: ['Linux']
tags: ['无标签']
artid: "18002317"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=18002317
    alt: "svn自动同步到另一台服务器"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     svn自动同步到另一台服务器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <span style="font-family:'lucida Grande',Verdana; font-size:14px">
     服务器a：windows                 服务器b：linux
    </span>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     思路：svn服务器（windows）有代码提交时自动向linux发送指令
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     软件：putty带的plink.exe，subversion
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     这里利用的是svn的自带的hook，新建post-commit.bat
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     /*post-commit.bat    content*/
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <div>
      D:
     </div>
     <div>
      cd FlyingWork\hooks   (备注：这是svn版本库)
     </div>
     <div>
      plink.exe -ssh -pw narkii
      <a href="mailto:root@192.168.1.222" rel="nofollow noopener noreferrer" style="outline:none; color:rgb(42,88,111)" target="_blank">
       root@192.168
       <wbr/>
       .1.222
      </a>
      -m a.sh（备注：a.sh用于存放命令的文件，向linux发送命令可写于该文件，该文件存放于windows，svn服务器上 ）
     </div>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     /*post-commit.bat    content*/
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     /*a.sh    content*/
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     cd /usr/local/apache/ (版本控制本地代码)
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     svn up .
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     /*a.sh    content*/
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <br/>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     备注：
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     plink可以采用ssh免密码登陆方式（证书方式，公钥和私钥），这里采用的是直接密码写在文件
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     subversion代码更新有两种方式一种是apache（80端口），另外一种是subversion自带的（3690端口），subversion自带的需向系统添加服务。服务添加方法（windows版）：
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <span style="font-size:18px; word-wrap:normal; word-break:normal; line-height:27px; color:rgb(73,73,73); font-family:simsun; background-color:rgb(246,246,246)">
      sc create svnservice binpath= "C:\Program\Subversion\bin\svnserve.exe --service -r
     </span>
     <span style="color:rgb(73,73,73); font-family:simsun; background-color:rgb(246,246,246)">
     </span>
     <span style="font-size:18px; word-wrap:normal; word-break:normal; line-height:27px; color:rgb(73,73,73); font-family:simsun; background-color:rgb(246,246,246)">
      D:\mysvn" displayname= "SVNService" depend= Tcpip start= auto
     </span>
    </div>
    <div style="font-family:'lucida Grande',Verdana; font-size:14px">
     <span style="font-size:18px; word-wrap:normal; word-break:normal; line-height:27px; color:rgb(73,73,73); font-family:simsun; background-color:rgb(246,246,246)">
      binpath如果路径有空格需用\”，否则机器无法识别
     </span>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f686172626f7231393831:2f61727469636c652f64657461696c732f3138303032333137" class_="artid" style="display:none">
 </p>
</div>


