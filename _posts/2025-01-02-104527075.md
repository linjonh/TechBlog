---
layout: post
title: "和为S的连续正数序列数学技巧,事半功倍"
date: 2025-01-02 15:13:44 +0800
description: "文章浏览阅读1.本文探讨如何快速找到所有和为S的连续正数序列，讲解双指针/通过C++和Python代"
keywords: "和为s的连续正数序列 原理"
categories: ['算法']
tags: ['算法', '数据结构', '数字规律', 'Python', 'C']
artid: "104527075"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=104527075
    alt: "和为S的连续正数序列数学技巧,事半功倍"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     和为S的连续正数序列(数学技巧，事半功倍)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      和为S的连续正数序列
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <ul>
          <li>
           <a href="#_3" rel="nofollow">
            题目描述
           </a>
          </li>
          <li>
           <a href="#_5" rel="nofollow">
            题目分析
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_8" rel="nofollow">
              双指针/滑动窗口法
             </a>
            </li>
            <li>
             <ul>
              <li>
               <a href="#C_22" rel="nofollow">
                C++代码
               </a>
              </li>
              <li>
               <a href="#python_53" rel="nofollow">
                python代码
               </a>
              </li>
             </ul>
            </li>
            <li>
             <a href="#_76" rel="nofollow">
              纯数学技巧法
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <p>
     数学的基础在算法中的用处大概就是对数字的敏感性了，如果能找到数字的规律，在求解数字的时候往往就能根据规律快速求解。而普通的程序思维相比数学思维，一般就略微显得暴力。
    </p>
    <h4>
     <a id="_3">
     </a>
     题目描述
    </h4>
    <p>
     小明很喜欢数学,有一天他在做数学作业时,要求计算出9~16的和,他马上就写出了正确答案是100。但是他并不满足于此,他在想究竟有多少种连续的正数序列的和为100(至少包括两个数)。没多久,他就得到另一组连续正数和为100的序列:18,19,20,21,22。现在把问题交给你,你能不能也很快的找出所有和为S的连续正数序列?
    </p>
    <h4>
     <a id="_5">
     </a>
     题目分析
    </h4>
    <p>
     这个题目也算得上是给你一个数计算机能玩一天的题目，我们仍然从直观的思维开始一步步深入分析。
     <br/>
     要求这个序列，我们可以逐个数字去找从
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.65952em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     开始的序列，显然
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
         &gt; 
        
       
         0 
        
       
      
        i&gt;0
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.69862em; vertical-align: -0.0391em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          &gt;
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.64444em; vertical-align: 0em;">
         </span>
         <span class="mord">
          0
         </span>
        </span>
       </span>
      </span>
     </span>
     ，但是我们也没有必要所有序列都去找，毕竟以
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.65952em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     开始的序列，最多只有一个等于S，如果我们发现以
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.65952em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     开始，以
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        j 
        
       
      
        j
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.85396em; vertical-align: -0.19444em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
        </span>
       </span>
      </span>
     </span>
     结尾的序列和大于等于S了，显然后面就不用找了。此外，序列最少要包括两个数，显然如果
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
         ≥ 
        
        
        
          S 
         
        
          2 
         
        
       
      
        i≥\frac{S}{2}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.79549em; vertical-align: -0.13597em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          ≥
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1.21733em; vertical-align: -0.345em;">
         </span>
         <span class="mord">
          <span class="mopen nulldelimiter">
          </span>
          <span class="mfrac">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.872331em;">
              <span class="" style="top: -2.655em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mtight">
                  2
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.23em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="frac-line" style="border-bottom-width: 0.04em;">
               </span>
              </span>
              <span class="" style="top: -3.394em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathdefault mtight" style="margin-right: 0.05764em;">
                  S
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.345em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose nulldelimiter">
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     ，那么两个数之和肯定大于S了，此时我们也不用找了。我们求和的时候每一次序列多一个数，所以求和的复杂度是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        O 
        
       
         ( 
        
       
         1 
        
       
         ) 
        
       
      
        O(1)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.02778em;">
          O
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     ，但是我们要找多少个序列，这个问题的复杂度就是多少，大致是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        O 
        
       
         ( 
        
       
         S 
        
       
         l 
        
       
         g 
        
       
         S 
        
       
         ) 
        
       
      
        O(SlgS)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.02778em;">
          O
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05764em;">
          S
         </span>
         <span class="mord mathdefault" style="margin-right: 0.01968em;">
          l
         </span>
         <span class="mord mathdefault" style="margin-right: 0.03588em;">
          g
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05764em;">
          S
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     的。
    </p>
    <h5>
     <a id="_8">
     </a>
     双指针/滑动窗口法
    </h5>
    <p>
     我们要表示一个连续序列，我们只需要知道两个数的位置就够了，只需要知道从开始开始，到哪里结束。既然使用双指针的思想，那就可以参考
     <a href="https://blog.csdn.net/m0_38065572/article/details/104129263">
      和为S的两个数字，双指针解法
     </a>
     。我们使用两个指针，一个记录序列的开始，一个记录序列的结束。
     <br/>
     如果两个指针记录的序列和小于S，则说明应该增大和，需要往序列里面添加数字，此时记录结尾的指针就需要后移，纳入更多的数字。如果序列和大于S，那么说明以序列开头的数字不可能存在和为S的序列了。此时需要减少数字，则开头指针后移。如果和等于S，则把这个序列记录，然后开头指针后移。这样的操作不会漏掉满足需求的值原理和引用的文章类似，有兴趣可以回去查看。
     <br/>
     我们来看一个例子，以S=9为例。初始化前指针pBeg=1,后指针pEnd=2。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        pBeg
       </th>
       <th>
        pEnd
       </th>
       <th>
        sum 状态 S
       </th>
       <th>
        下一步操作
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        1
       </td>
       <td>
        2
       </td>
       <td>
        3小于9
       </td>
       <td>
        pEnd++
       </td>
      </tr>
      <tr>
       <td>
        1
       </td>
       <td>
        3
       </td>
       <td>
        6小于9
       </td>
       <td>
        pEnd++
       </td>
      </tr>
      <tr>
       <td>
        1
       </td>
       <td>
        4
       </td>
       <td>
        10大于9
       </td>
       <td>
        pBeg++
       </td>
      </tr>
      <tr>
       <td>
        2
       </td>
       <td>
        4
       </td>
       <td>
        9等于9(保存)
       </td>
       <td>
        pBeg++
       </td>
      </tr>
      <tr>
       <td>
        3
       </td>
       <td>
        4
       </td>
       <td>
        7小于9
       </td>
       <td>
        pEnd++
       </td>
      </tr>
      <tr>
       <td>
        3
       </td>
       <td>
        5
       </td>
       <td>
        12大于9
       </td>
       <td>
        pEnd++
       </td>
      </tr>
      <tr>
       <td>
        4
       </td>
       <td>
        5
       </td>
       <td>
        9等于9(保存)
       </td>
       <td>
        pBeg++，pBeg==5退出
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     熟悉了这个过程，差不多可以写出代码了。
    </p>
    <h6>
     <a id="C_22">
     </a>
     C++代码
    </h6>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span>  <span class="token function">FindContinuousSequence</span><span class="token punctuation">(</span><span class="token keyword">int</span> S<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> res<span class="token punctuation">;</span>
		<span class="token keyword">int</span> pBeg <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> pEnd <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>sum<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>mid<span class="token operator">=</span>S<span class="token operator">&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>pBeg <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>	
			<span class="token keyword">if</span><span class="token punctuation">(</span>sum<span class="token operator">&gt;=</span>S<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">==</span> S<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> tmp<span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> pBeg<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> pEnd<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>tmp<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
					res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				sum <span class="token operator">-</span><span class="token operator">=</span> pBeg<span class="token punctuation">;</span>
				pBeg <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				pEnd <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				sum <span class="token operator">+</span><span class="token operator">=</span> pEnd<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> res<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <h6>
     <a id="python_53">
     </a>
     python代码
    </h6>
    <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">FindContinuousSequence</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> S<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pBeg <span class="token operator">=</span> <span class="token number">1</span>
        pEnd <span class="token operator">=</span> <span class="token number">2</span>
        middle <span class="token operator">=</span> <span class="token punctuation">(</span>S <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">1</span>
        curSum <span class="token operator">=</span> <span class="token number">3</span>
        output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">while</span> pBeg <span class="token operator">&lt;</span> middle<span class="token punctuation">:</span>
            <span class="token keyword">if</span> curSum <span class="token operator">&gt;=</span> S<span class="token punctuation">:</span>
                <span class="token keyword">if</span> curSum <span class="token operator">==</span> S<span class="token punctuation">:</span>
                    output<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>pBeg<span class="token punctuation">,</span> pEnd <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                curSum <span class="token operator">-=</span> pBeg
                pBeg <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                pEnd <span class="token operator">+=</span> <span class="token number">1</span>
                curSum <span class="token operator">+=</span> pEnd
        <span class="token keyword">return</span> output
</code></pre>
    <p>
     这里用的还是双指针或者叫滑动窗口的技巧求解，因为两个指针都是单向前进，没有回溯的过程，所以这个时间复杂度很好分析，就是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        O 
        
       
         ( 
        
       
         S 
        
       
         ) 
        
       
      
        O(S)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.02778em;">
          O
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05764em;">
          S
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     了，这个技巧还是蛮重要的，可以看到相比第一种分析复杂度已经进步了不少，因为这里已经利用了和的比较关系，省去了很多计算。
    </p>
    <h5>
     <a id="_76">
     </a>
     纯数学技巧法
    </h5>
    <p>
     如果我们觉得上面的方法还是在找连续序列的和，这个方法就可以说是直接计算了。我们都知道如果让我们去求连续序列的和，我们肯定会知道一个公式，(首项+尾项)*项数/2。但是这里需要怎么用上这个公式呢。
     <br/>
     我们假设序列的首项是i，尾项是j。我们可以轻易求出
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         u 
        
       
         m 
        
       
         = 
        
       
         ( 
        
       
         i 
        
       
         + 
        
       
         j 
        
       
         ) 
        
       
         ( 
        
       
         j 
        
       
         − 
        
       
         i 
        
       
         + 
        
       
         1 
        
       
         ) 
        
       
         / 
        
       
         2 
        
       
      
        sum=(i+j)(j-i+1)/2
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.43056em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          s
         </span>
         <span class="mord mathdefault">
          u
         </span>
         <span class="mord mathdefault">
          m
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          −
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.74285em; vertical-align: -0.08333em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mord">
          /
         </span>
         <span class="mord">
          2
         </span>
        </span>
       </span>
      </span>
     </span>
     ，我们把2移到等式左边可以得到
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        2 
        
       
         s 
        
       
         u 
        
       
         m 
        
       
         = 
        
       
         ( 
        
       
         i 
        
       
         + 
        
       
         j 
        
       
         ) 
        
       
         ( 
        
       
         j 
        
       
         − 
        
       
         i 
        
       
         + 
        
       
         1 
        
       
         ) 
        
       
      
        2sum=(i+j)(j-i+1)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.64444em; vertical-align: 0em;">
         </span>
         <span class="mord">
          2
         </span>
         <span class="mord mathdefault">
          s
         </span>
         <span class="mord mathdefault">
          u
         </span>
         <span class="mord mathdefault">
          m
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          −
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.74285em; vertical-align: -0.08333em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     ，显然我们有点二年级的数学水平就知道
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        ( 
        
       
         i 
        
       
         + 
        
       
         j 
        
       
         ) 
        
       
         和 
        
       
         ( 
        
       
         j 
        
       
         − 
        
       
         i 
        
       
         + 
        
       
         1 
        
       
         ) 
        
       
      
        (i+j)和(j-i+1)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mord cjk_fallback">
          和
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          −
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.74285em; vertical-align: -0.08333em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     一个是奇数，一个是偶数。那现在就容易多了，我们直接求出sum的所有奇数因子，那么显然所有的奇数因子就构成了一组或两组解。可以通过质因数分解，把所有的质因数任意组合则得到所有的质数因子。
     <br/>
     为什么是一组或者两组，因为可能i解出来是个负数。我们不妨设这个奇数因子是odd，那么显然那个偶数因子就是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         u 
        
       
         m 
        
       
         ∗ 
        
       
         2 
        
       
         / 
        
       
         o 
        
       
         d 
        
       
         d 
        
       
      
        sum*2/odd
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.46528em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          s
         </span>
         <span class="mord mathdefault">
          u
         </span>
         <span class="mord mathdefault">
          m
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          ∗
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          2
         </span>
         <span class="mord">
          /
         </span>
         <span class="mord mathdefault">
          o
         </span>
         <span class="mord mathdefault">
          d
         </span>
         <span class="mord mathdefault">
          d
         </span>
        </span>
       </span>
      </span>
     </span>
     ，这个时候用两个数列两个方程：
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         { 
          
          
           
            
             
              
              
                o 
               
              
                d 
               
              
                d 
               
              
             
            
            
             
              
               
              
                = 
               
              
             
            
            
             
              
              
                i 
               
              
                + 
               
              
                j 
               
              
             
            
           
           
            
             
              
               
               
                 2 
                
               
                 s 
                
               
                 u 
                
               
                 m 
                
               
               
               
                 o 
                
               
                 d 
                
               
                 d 
                
               
              
             
            
            
             
              
               
              
                = 
               
              
             
            
            
             
              
              
                j 
               
              
                − 
               
              
                i 
               
              
                + 
               
              
                1 
               
              
             
            
           
          
          
         
           a 
          
         
           n 
          
         
           d 
          
          
         
         
         
           { 
          
          
           
            
             
              
              
                o 
               
              
                d 
               
              
                d 
               
              
             
            
            
             
              
               
              
                = 
               
              
             
            
            
             
              
              
                i 
               
              
                + 
               
              
                j 
               
              
             
            
           
           
            
             
              
               
               
                 2 
                
               
                 s 
                
               
                 u 
                
               
                 m 
                
               
               
               
                 o 
                
               
                 d 
                
               
                 d 
                
               
              
             
            
            
             
              
               
              
                = 
               
              
             
            
            
             
              
              
                j 
               
              
                − 
               
              
                i 
               
              
                + 
               
              
                1 
               
              
             
            
           
          
         
        
       
         \left \{ \begin{aligned} odd &amp; = &amp; i+j \\ \frac{2sum}{odd} &amp; = &amp; j-i+1 \\ \end{aligned} \qquad and \qquad \right. \left \{ \begin{aligned} odd &amp; = &amp; i+j \\ \frac{2sum}{odd} &amp; = &amp; j-i+1 \\ \end{aligned} \right.
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 3.80744em; vertical-align: -1.65372em;">
          </span>
          <span class="minner">
           <span class="mopen">
            <span class="delimsizing mult">
             <span class="vlist-t vlist-t2">
              <span class="vlist-r">
               <span class="vlist" style="height: 2.05002em;">
                <span class="" style="top: -2.49999em;">
                 <span class="pstrut" style="height: 3.15em;">
                 </span>
                 <span class="delimsizinginner delim-size4">
                  <span class="">
                   ⎩
                  </span>
                 </span>
                </span>
                <span class="" style="top: -3.15001em;">
                 <span class="pstrut" style="height: 3.15em;">
                 </span>
                 <span class="delimsizinginner delim-size4">
                  <span class="">
                   ⎨
                  </span>
                 </span>
                </span>
                <span class="" style="top: -4.30002em;">
                 <span class="pstrut" style="height: 3.15em;">
                 </span>
                 <span class="delimsizinginner delim-size4">
                  <span class="">
                   ⎧
                  </span>
                 </span>
                </span>
               </span>
               <span class="vlist-s">
                ​
               </span>
              </span>
              <span class="vlist-r">
               <span class="vlist" style="height: 1.55002em;">
                <span class="">
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mord">
            <span class="mtable">
             <span class="col-align-r">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 2.15372em;">
                 <span class="" style="top: -4.63516em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord mathdefault">
                    o
                   </span>
                   <span class="mord mathdefault">
                    d
                   </span>
                   <span class="mord mathdefault">
                    d
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.65372em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord">
                    <span class="mopen nulldelimiter">
                    </span>
                    <span class="mfrac">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 1.32144em;">
                        <span class="" style="top: -2.314em;">
                         <span class="pstrut" style="height: 3em;">
                         </span>
                         <span class="mord">
                          <span class="mord mathdefault">
                           o
                          </span>
                          <span class="mord mathdefault">
                           d
                          </span>
                          <span class="mord mathdefault">
                           d
                          </span>
                         </span>
                        </span>
                        <span class="" style="top: -3.23em;">
                         <span class="pstrut" style="height: 3em;">
                         </span>
                         <span class="frac-line" style="border-bottom-width: 0.04em;">
                         </span>
                        </span>
                        <span class="" style="top: -3.677em;">
                         <span class="pstrut" style="height: 3em;">
                         </span>
                         <span class="mord">
                          <span class="mord">
                           2
                          </span>
                          <span class="mord mathdefault">
                           s
                          </span>
                          <span class="mord mathdefault">
                           u
                          </span>
                          <span class="mord mathdefault">
                           m
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.686em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                    <span class="mclose nulldelimiter">
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 1.65372em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="col-align-l">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 2.15372em;">
                 <span class="" style="top: -4.63516em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord">
                   </span>
                   <span class="mspace" style="margin-right: 0.277778em;">
                   </span>
                   <span class="mrel">
                    =
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.65372em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord">
                   </span>
                   <span class="mspace" style="margin-right: 0.277778em;">
                   </span>
                   <span class="mrel">
                    =
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 1.65372em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="arraycolsep" style="width: 1em;">
             </span>
             <span class="col-align-r">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 2.15372em;">
                 <span class="" style="top: -4.63516em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord mathdefault">
                    i
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mbin">
                    +
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mord mathdefault" style="margin-right: 0.05724em;">
                    j
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.65372em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord mathdefault" style="margin-right: 0.05724em;">
                    j
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mbin">
                    −
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mord mathdefault">
                    i
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mbin">
                    +
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mord">
                    1
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 1.65372em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mspace" style="margin-right: 2em;">
           </span>
           <span class="mord mathdefault">
            a
           </span>
           <span class="mord mathdefault">
            n
           </span>
           <span class="mord mathdefault">
            d
           </span>
           <span class="mspace" style="margin-right: 2em;">
           </span>
           <span class="mclose nulldelimiter">
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.166667em;">
          </span>
          <span class="minner">
           <span class="mopen">
            <span class="delimsizing mult">
             <span class="vlist-t vlist-t2">
              <span class="vlist-r">
               <span class="vlist" style="height: 2.05002em;">
                <span class="" style="top: -2.49999em;">
                 <span class="pstrut" style="height: 3.15em;">
                 </span>
                 <span class="delimsizinginner delim-size4">
                  <span class="">
                   ⎩
                  </span>
                 </span>
                </span>
                <span class="" style="top: -3.15001em;">
                 <span class="pstrut" style="height: 3.15em;">
                 </span>
                 <span class="delimsizinginner delim-size4">
                  <span class="">
                   ⎨
                  </span>
                 </span>
                </span>
                <span class="" style="top: -4.30002em;">
                 <span class="pstrut" style="height: 3.15em;">
                 </span>
                 <span class="delimsizinginner delim-size4">
                  <span class="">
                   ⎧
                  </span>
                 </span>
                </span>
               </span>
               <span class="vlist-s">
                ​
               </span>
              </span>
              <span class="vlist-r">
               <span class="vlist" style="height: 1.55002em;">
                <span class="">
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mord">
            <span class="mtable">
             <span class="col-align-r">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 2.15372em;">
                 <span class="" style="top: -4.63516em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord mathdefault">
                    o
                   </span>
                   <span class="mord mathdefault">
                    d
                   </span>
                   <span class="mord mathdefault">
                    d
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.65372em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord">
                    <span class="mopen nulldelimiter">
                    </span>
                    <span class="mfrac">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 1.32144em;">
                        <span class="" style="top: -2.314em;">
                         <span class="pstrut" style="height: 3em;">
                         </span>
                         <span class="mord">
                          <span class="mord mathdefault">
                           o
                          </span>
                          <span class="mord mathdefault">
                           d
                          </span>
                          <span class="mord mathdefault">
                           d
                          </span>
                         </span>
                        </span>
                        <span class="" style="top: -3.23em;">
                         <span class="pstrut" style="height: 3em;">
                         </span>
                         <span class="frac-line" style="border-bottom-width: 0.04em;">
                         </span>
                        </span>
                        <span class="" style="top: -3.677em;">
                         <span class="pstrut" style="height: 3em;">
                         </span>
                         <span class="mord">
                          <span class="mord">
                           2
                          </span>
                          <span class="mord mathdefault">
                           s
                          </span>
                          <span class="mord mathdefault">
                           u
                          </span>
                          <span class="mord mathdefault">
                           m
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.686em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                    <span class="mclose nulldelimiter">
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 1.65372em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="col-align-l">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 2.15372em;">
                 <span class="" style="top: -4.63516em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord">
                   </span>
                   <span class="mspace" style="margin-right: 0.277778em;">
                   </span>
                   <span class="mrel">
                    =
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.65372em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord">
                   </span>
                   <span class="mspace" style="margin-right: 0.277778em;">
                   </span>
                   <span class="mrel">
                    =
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 1.65372em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="arraycolsep" style="width: 1em;">
             </span>
             <span class="col-align-r">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 2.15372em;">
                 <span class="" style="top: -4.63516em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord mathdefault">
                    i
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mbin">
                    +
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mord mathdefault" style="margin-right: 0.05724em;">
                    j
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.65372em;">
                  <span class="pstrut" style="height: 3.32144em;">
                  </span>
                  <span class="mord">
                   <span class="mord mathdefault" style="margin-right: 0.05724em;">
                    j
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mbin">
                    −
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mord mathdefault">
                    i
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mbin">
                    +
                   </span>
                   <span class="mspace" style="margin-right: 0.222222em;">
                   </span>
                   <span class="mord">
                    1
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 1.65372em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mclose nulldelimiter">
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     通过这两个方程求解出
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.65952em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     和
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        j 
        
       
      
        j
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.85396em; vertical-align: -0.19444em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
        </span>
       </span>
      </span>
     </span>
     ，然后舍去不符合条件的数值。如果这是一道选择题，到这里也就结束了。我下面给出一个参考代码。只知道在大数测试上，双指针根本无法等待出结果，这个方法很快就能算出来。因为需要质因数分解，难以评估复杂度，代码中需要保存下来的质数可以用于后续计算，这样计算的次数越多，省下来的时间就越多。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    prim <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
    <span class="token keyword">def</span> <span class="token function">primeFactorization</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> tsum<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>prim<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token builtin">int</span><span class="token punctuation">(</span>tsum<span class="token operator">**</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            flag<span class="token operator">=</span><span class="token boolean">True</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> self<span class="token punctuation">.</span>prim<span class="token punctuation">:</span>
                <span class="token keyword">if</span> i<span class="token operator">%</span>j<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
                    flag<span class="token operator">=</span><span class="token boolean">False</span>
                    <span class="token keyword">break</span>
            <span class="token keyword">if</span> flag<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>prim<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        i<span class="token operator">=</span><span class="token number">0</span>
        fac<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">while</span> i<span class="token operator">&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>prim<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> tsum<span class="token operator">%</span>self<span class="token punctuation">.</span>prim<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                i<span class="token operator">+=</span><span class="token number">1</span>
                <span class="token keyword">continue</span>
            fac<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>prim<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            tsum<span class="token operator">/=</span>self<span class="token punctuation">.</span>prim<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">return</span> fac

    <span class="token keyword">def</span> <span class="token function">FindContinuousSequence</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> tsum<span class="token punctuation">)</span><span class="token punctuation">:</span>
        fac<span class="token operator">=</span>self<span class="token punctuation">.</span>primeFactorization<span class="token punctuation">(</span>tsum<span class="token punctuation">)</span>
        odd<span class="token operator">=</span><span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> fac <span class="token keyword">if</span> i<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">]</span>
        fact<span class="token operator">=</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        res<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        mul<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span>x<span class="token operator">*</span>y
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>odd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            l<span class="token operator">=</span>permutations<span class="token punctuation">(</span>odd<span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> l<span class="token punctuation">:</span>
                a<span class="token operator">=</span><span class="token builtin">reduce</span><span class="token punctuation">(</span>mul<span class="token punctuation">,</span>j<span class="token punctuation">)</span>
                fact<span class="token punctuation">.</span>add<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
                fact<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token punctuation">(</span>tsum<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">//</span>a<span class="token punctuation">)</span>
        fact<span class="token operator">=</span><span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>fact<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> fact<span class="token punctuation">:</span>
            j<span class="token operator">=</span>tsum<span class="token operator">*</span><span class="token number">2</span><span class="token operator">//</span>i
            <span class="token keyword">if</span> i<span class="token operator">&lt;</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span>
                <span class="token keyword">continue</span>
            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">(</span>i<span class="token operator">+</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> res
</code></pre>
    <p>
     这种方法仅供参考，有利于思维方式的提高。总之一句话，数学能力在算法分析中会起到至关重要的作用，之中能力是需要慢慢累积出来的。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f33383036353537322f:61727469636c652f64657461696c732f313034353237303735" class_="artid" style="display:none">
 </p>
</div>


