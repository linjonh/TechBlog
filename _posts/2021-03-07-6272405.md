---
layout: post
title: "java在java中用JDBC-ODBC桥及JDBC驱动程序连接数据库实例"
date: 2021-03-07 22:23:34 +0800
description: "文章浏览阅读6.import java.sql.Connection;import java.sql"
keywords: "分别采用基于jdbc-odbc桥接器和数据库专用驱动程序建立数据库连接,请分别给出完整"
categories: ['Web']
tags: ['数据库', 'Mysql', 'Jdbc', 'Java', 'Import', 'Exception']
artid: "6272405"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=6272405
    alt: "java在java中用JDBC-ODBC桥及JDBC驱动程序连接数据库实例"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【java】在java中用JDBC-ODBC桥及JDBC驱动程序连接数据库实例
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     import java.sql.Connection;
     <br/>
     import java.sql.DriverManager;
     <br/>
     import java.sql.PreparedStatement;
     <br/>
     import java.sql.ResultSet;
     <br/>
     import java.sql.SQLException;
     <br/>
     import java.sql.Statement;
    </p>
    <p>
     /**
     <br/>
     * @author YanChengwei
     <br/>
     *
     <br/>
     */
     <br/>
     public class DBConnect {
     <!-- -->
     <br/>
     /**
     <br/>
     * @param args
     <br/>
     */
     <br/>
     public static void main(String[] args) {
     <!-- -->
     <br/>
     Connection con = null;// 连接
     <br/>
     Statement stmt = null;// 执行语句
     <br/>
     ResultSet rst = null;// 结果集
    </p>
    <p>
     try {
     <!-- -->
     <br/>
     /*********用JDBC-ODBC桥连接oracle type 1***************/
     <br/>
     //   Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
     <br/>
     //   con = DriverManager.getConnection("jdbc:odbc:Oracledsn","myuser2","myuser2");//Oracledsn是dsn(数据源)的名称
    </p>
    <p>
     <br/>
     /********用JDBC驱动程序连接oracle type 2 and type 4***********/
     <br/>
     // 加载驱动程序
     <br/>
     Class.forName("oracle.jdbc.driver.OracleDriver");
     <br/>
     <br/>
     // 创建连接方法 1 用JDBC thin 驱动程序建立连接 type 2
     <br/>
     con = DriverManager.getConnection(
     <br/>
     "jdbc:oracle:thin:@192.168.1.110:1521:ORCL", "MYUSER2","myuser2");//注意：这句中的IP不能换成localhost,否则会出现Network Adepter 异常
     <br/>
     <br/>
     // 创建连接方法 2 用JDBC oci 驱动程序建立连接   type 4
     <br/>
     //    "jdbc:oracle:oci8:@192.168.1.110:1521:ORCL",
     <br/>
     //    "myuser1","myuser1");
    </p>
    <p>
     /** ***************** 创建执行语句方法 1 ******************* */
     <br/>
     stmt = con.createStatement();
    </p>
    <p>
     rst = stmt.executeQuery("select * from mytable2");
    </p>
    <p>
     // 输出结果
     <br/>
     while (rst.next()) {
     <!-- -->
     <br/>
     System.out.print(rst.getString("stuNumber") + " ");
     <br/>
     System.out.print(rst.getString("stuName") + " ");
     <br/>
     System.out.print(rst.getString("stuAddress") + " ");
     <br/>
     System.out.print(rst.getString("stuGender") + " ");
     <br/>
     System.out.println(rst.getString("stuAge") + " ");
     <br/>
     }
    </p>
    <p>
     // 关闭对象
     <br/>
     stmt.close();
     <br/>
     con.close();
     <br/>
     } catch (ClassNotFoundException cnf) {
     <!-- -->
     <br/>
     System.out.println("没找到驱动程序");
     <br/>
     cnf.printStackTrace();
    </p>
    <p>
     } catch (SQLException se) {
     <!-- -->
     <br/>
     se.printStackTrace();
     <br/>
     }
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     <span style="font-family:黑体; font-size:10px; color:#5e4830">
      java通过jdbc-odbc桥与mysql建立连接
     </span>
    </p>
    <p>
     <span style="font-family:黑体; color:#5e4830">
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      一、打开mysql命令行，输入password root
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      在命令行，输入 create database mysqldata
      <span style="font-size:32px">
       <strong>
        ;
       </strong>
      </span>
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      然后，在命令行，输入use mysqldata
      <span style="font-size:32px; color:#ff0000">
       <strong>
        ;
       </strong>
      </span>
     </span>
    </p>
    <p>
     <strong>
      <span style="font-size:10px; color:#ff0000">
       在命令行输入：create table student
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:#ff0000">
       <span style="font-size:10px">
        (id int primary key,
       </span>
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:#ff0000">
       <span style="font-size:10px">
        name varchar(10),
       </span>
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:#ff0000">
       <span style="font-size:10px">
        mark int
       </span>
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:#ff0000">
       <span style="font-size:10px; color:#000000">
        );
       </span>
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="font-size:10px">
       显示Query ok，则创建成功。
      </span>
     </strong>
    </p>
    <p>
     <span style="font-size:10px">
      二、添加数据源
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      打开“控制面板”，到“管理工具”，到“
      <span style="color:#0000cc">
       数据源
      </span>
      “，但在系统DSN上没有MySql Driver。必须要安装MySql的ODBC。先打开
     </span>
     <a href="http://www.mysql.com/" rel="nofollow">
      <span style="font-size:10px; color:#765f47">
       http://www.mysql.com
      </span>
     </a>
     <span style="font-size:10px">
      ，打开download,找到MySql Connector/ODBC 5.1 Downloads，打开windows MSI Installer(x86)，点击Download，即可下载MySql 的 ODBC。
      <br/>
      安装完JDBC-ODBC桥之后，在刚才的
      <span style="color:#000099">
       ”系统数据源
      </span>
      “上，点击添加时，会显示，MsSQl ODBC 5。1 Driver，选中它，在出出的窗口中输入：数据源名字：mysqldata
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      Host/Server Name(or IP) :localhost
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      Database Name:mysaldata
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      Port(3306)
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      点击确定即创建好了。
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      三、在lomboz-eclipse 里面编辑类。
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      在eclipse,项目MyTest上的Java Resources:src上，点右键，创建一个java 类
     </span>
    </p>
    <p>
     <span style="font-size:10px">
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      package chapter10;
      <br/>
      import java.sql.*;
      <br/>
      public class MySqlJdbcOdbc {
      <!-- -->
     </span>
    </p>
    <p>
     <br/>
     <span style="font-size:10px">
      public static void main(String[] args) {
      <!-- -->
      <br/>
      <br/>
      new MySqlJdbcOdbc().launch();
      <br/>
      }
      <br/>
      public void launch(){
      <!-- -->
      <br/>
      String driver="sun.jdbc.odbc.JdbcOdbcDriver";
      <br/>
      String url="jdbc:odbc:mysqldata";
      <br/>
      String query,name;
      <br/>
      int mark;
      <br/>
      Connection conn=null;
      <br/>
      Statement statement=null;
      <br/>
      ResultSet rs=null;
      <br/>
      <br/>
      try{
      <!-- -->
      <br/>
      Class.forName(driver);
      <br/>
      }
      <br/>
      catch(ClassNotFoundException e){
      <!-- -->
      <br/>
      System.out.println("没有找到指定的驱动");
      <br/>
      }
      <br/>
      try{
      <!-- -->
      <br/>
      conn=DriverManager.getConnection(url);
      <br/>
      statement=conn.createStatement();
      <br/>
      query="select * from student";
      <br/>
      rs=statement.executeQuery(query);
      <br/>
      while(rs.next())
      <br/>
      {
      <!-- -->
      <br/>
      name=rs.getString("name");
      <br/>
      mark=rs.getInt("mark");
      <br/>
      System.out.println("姓名： "+name);
      <br/>
      System.out.println(" 成绩： "+mark);
      <br/>
      <br/>
      }
      <br/>
      }
      <br/>
      catch(SQLException e)
      <br/>
      {
      <!-- -->
      <br/>
      e.printStackTrace();
      <br/>
      }
      <br/>
      catch(Exception e)
      <br/>
      {
      <!-- -->
      <br/>
      e.printStackTrace();
      <br/>
      }
      <br/>
      finally{
      <!-- -->
      <br/>
      try{
      <!-- -->
      <br/>
      if(rs!=null) rs.close();
      <br/>
      if(statement!=null) statement.close();
      <br/>
      if(conn!=null) conn.close();
      <br/>
      <br/>
      }
      <br/>
      catch(SQLException e)
      <br/>
      {
      <!-- -->
      <br/>
      e.printStackTrace();
      <br/>
      }
      <br/>
      }
      <br/>
      <br/>
      <br/>
      }
      <br/>
      }
      <br/>
      运行：run as :java application
     </span>
    </p>
    <p>
     <span style="font-size:10px">
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      四、上面的连接方式是JDBC——ODBC桥，下面的连接方式是，直接由MySql提供的JDBC桥进行数据库的连接方法。这里要用到JDBC桥，到
     </span>
     <a href="http://www.mysql.com/" rel="nofollow">
      <span style="font-size:10px; color:#765f47">
       http://www.mysql.com
      </span>
     </a>
     <span style="font-size:10px">
      上下载所需要的驱动，找到downloads,在Drivers and Connectors下面，找到MySql Connector/J-for connecting to MySql from Java下载一个压缩包，注意：压缩包要下载.zip，这是为windows设置的JDBC驱动，而.tar.gz是为linux设置的JDBC驱动包。而解压后，在rec/ort/gjt/mm.mysql有一个Driver类文件，即是我们要导入到eclipse里面用的驱动
     </span>
    </p>
    <p>
     <span style="font-size:32px; color:#ff00ff">
      <em>
       <strong>
        <span style="font-size:10px">
         将下载的压缩包，解包后，如果我们想知道如何使用JDBC连接呢？想到找一下帮助文档。即找到解压开的文件夹，打开docs文件夹，找到其中的HTML文件，打开看，
        </span>
       </strong>
      </em>
     </span>
    </p>
    <pre><span style="font-size:10px">import java.sql.Connection; import java.sql.DriverManager; import java.sql.SQLException; Connection conn = null; ... try { conn = DriverManager.getConnection("jdbc:mysql://localhost/test?" + "user=monty&amp;password=greatsqldb"); // Do something with the Connection ... } catch (SQLException ex) { // handle any errors System.out.println("SQLException: " + ex.getMessage()); System.out.println("SQLState: " + ex.getSQLState()); System.out.println("VendorError: " + ex.getErrorCode());
}</span></pre>
    <pre><span style="font-size:10px"> </span></pre>
    <pre><span style="font-size:10px">将光标下拉，找到这样的话，The name of the class that implements java.sql.Driver in MySql Connector/J is com.mysql.jdbc.Driver.The org.gjt.mm.mysql.Driver class is also usable to remain backward-compatible with MM.MySql. You should use this class name when registering the driver,or when otherwise configuring software in use MySql connector/J.</span></pre>
    <pre><span style="font-size:10px">The JDBC URL format for MySql Connector/J is as follows, with items in square brackets being optional:</span></pre>
    <pre><span style="font-size:10px">jdbc:sql://[host][,failoverhost...][:port]/[database]</span></pre>
    <pre><span style="font-size:10px">[?propertyName][=propertyValue][&amp;propertyName2][=propertyValue2]....</span></pre>
    <pre><span style="font-size:10px">If the hostname is not specified,it defaults to 127.0.0.1.if the port is not specified,it defaults to 3306,the default port number for MySql servers.</span></pre>
    <pre><span style="font-size:10px">找到5。1。1Connectiong to MySql Using the DriverManager Interface</span></pre>
    <pre><span style="font-size:10px">import java.sql.Connection;</span></pre>
    <pre><span style="font-size:10px">import java.sql.DriverManager;</span></pre>
    <pre><span style="font-size:10px">import java.sql.SQLException;</span></pre>
    <pre><span style="font-size:10px">public class LoadDriver{<!-- --></span></pre>
    <pre><span style="font-size:10px; color:#ff0000"><strong>public static void main(String[] args){<!-- --></strong></span></pre>
    <pre><span style="font-size:10px; color:#ff0000"><strong>try{<!-- --></strong></span></pre>
    <pre><span style="font-size:10px; color:#ff0000"><strong>Clss.forName("com.mysql.jdbc.Driver").newInstance();</strong></span></pre>
    <pre><span style="font-size:10px; color:#ff0000"><strong>}</strong></span></pre>
    <pre><span style="font-size:10px; color:#ff0000"><strong>catch(Exception e){<!-- --></strong></span></pre>
    <pre><span style="font-size:10px">//handle the error.</span></pre>
    <pre><span style="font-size:10px"> </span></pre>
    <pre><span style="font-size:10px"> </span></pre>
    <pre><strong><span style="font-size:10px; color:#9900cc">import java.sql.Connection; import java.sql.DriverManager; import java.sql.SQLException; Connection conn = null; ... try { conn = DriverManager.getConnection("jdbc:mysql://localhost/test?" + "user=monty&amp;password=greatsqldb"); // Do something with the Connection ... } catch (SQLException ex) { // handle any errors System.out.println("SQLException: " + ex.getMessage()); System.out.println("SQLState: " + ex.getSQLState()); System.out.println("VendorError: " + ex.getErrorCode()); } </span></strong></pre>
    <pre><span style="font-size:10px"> </span></pre>
    <p>
     <span style="font-size:10px; color:#ff00ff">
      <em>
       <strong>
        java 导入外部jar文件，在工程根目录下，右击property,选择“Java Build Path"，点击“Add external jars“，ok
       </strong>
      </em>
     </span>
    </p>
    <p>
     <strong>
      <em>
       <span style="font-size:10px; color:#ff00ff">
        或者，在工程根目录下，右击，选择“build path"，在properties for MyTest窗口里，找到Libraries标鉴，点击Add External JARs，找到e:/安装软件/mysql安装程序夹/mysql-connector-java-5.1.7/mysql-connector-java-5.1.7-bin.jar,点击打开，Ok。
       </span>
      </em>
     </strong>
    </p>
    <p>
     <strong>
      <em>
       <span style="font-size:10px; color:#ff00ff">
        或者还有一个debug的这个的jar,那是带有调试的信息的，也可以。
       </span>
      </em>
     </strong>
    </p>
    <p>
     <span style="font-size:10px">
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      import java.sql.*;
      <br/>
      public class MySqlJdbc {
      <!-- -->
     </span>
    </p>
    <p>
     <br/>
     <span style="font-size:10px">
      public static void main(String[] args) {
      <!-- -->
      <br/>
      <br/>
      new MySqlJdbc().launch();
      <br/>
      }
      <br/>
      public void launch(){
      <!-- -->
      <br/>
      //String driver="sun.jdbc.odbc.JdbcOdbcDriver";
      <br/>
      //String url="jdbc:odbc:mysqldata";
      <br/>
      String driver="org.gjt.mm.mysql.Driver";
      <br/>
      String url="jdbc:mysql://localhost:3306/mysqldata?user=root;password=root";
      <br/>
      String query,name;
      <br/>
      int mark;
      <br/>
      Connection conn=null;
      <br/>
      Statement statement=null;
      <br/>
      ResultSet rs=null;
      <br/>
      <br/>
      try{
      <!-- -->
      <br/>
      Class.forName(driver);
     </span>
    </p>
    <p>
     <span style="font-size:10px">
      //Class.forName(driver).newInstance();
      <br/>
      }
      <br/>
      catch(ClassNotFoundException e){
      <!-- -->
      <br/>
      System.out.println("没有找到指定的驱动");
      <br/>
      }
      <br/>
      try{
      <!-- -->
      <br/>
      conn=DriverManager.getConnection(url);
      <br/>
      statement=conn.createStatement();
      <br/>
      query="select * from student";
      <br/>
      rs=statement.executeQuery(query);
      <br/>
      //String str="insert into student values('20021213','12','52')";
      <br/>
      //statement.executeUpdate(str);
      <br/>
      while(rs.next())
      <br/>
      {
      <!-- -->
      <br/>
      name=rs.getString("name");
      <br/>
      mark=rs.getInt("mark");
      <br/>
      System.out.println("姓名： "+name);
      <br/>
      System.out.println(" 成绩： "+mark);
      <br/>
      <br/>
      }
      <br/>
      }
      <br/>
      catch(SQLException e)
      <br/>
      {
      <!-- -->
      <br/>
      e.printStackTrace();
      <br/>
      }
      <br/>
      catch(Exception e)
      <br/>
      {
      <!-- -->
      <br/>
      e.printStackTrace();
      <br/>
      }
      <br/>
      finally{
      <!-- -->
      <br/>
      try{
      <!-- -->
      <br/>
      if(rs!=null) rs.close();
      <br/>
      if(statement!=null) statement.close();
      <br/>
      if(conn!=null) conn.close();
      <br/>
      <br/>
      }
      <br/>
      catch(SQLException e)
      <br/>
      {
      <!-- -->
      <br/>
      e.printStackTrace();
      <br/>
      }
      <br/>
      }
      <br/>
      <br/>
      <br/>
      }
      <br/>
      }
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f70616f70616f6d:6d2f61727469636c652f64657461696c732f36323732343035" class_="artid" style="display:none">
 </p>
</div>


