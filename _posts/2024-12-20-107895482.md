---
layout: post
title: 2024-12-20-SJF调度算法操作系统短作业优先和最短剩余时间优先
date: 2024-12-20 23:50:14 +0800
categories: [操作系统]
tags: [算法,操作系统]
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=107895482
  alt: SJF调度算法操作系统短作业优先和最短剩余时间优先
artid: 107895482
render_with_liquid: false
---
</p>
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     SJF调度算法（操作系统）短作业优先和最短剩余时间优先
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="SJF_0">
     </a>
     SJF短作业优先算法
    </h3>
    <p>
     <strong>
      算法思想：
     </strong>
     追求更少的平均时间，最少的平均周转时间，最少的平均平均带权周转时间
     <br/>
     <strong>
      算法规则：
     </strong>
     最短的作业/进程优先得到服务（所谓“最短”，是指要求服务时间最短）
     <br/>
     <strong>
      用于作业/进程调度：
     </strong>
     即可用于作业调度，也可用于进程调度。用于进程调度时称为“短进程优先（SPF，Shortest Process First）算法”
     <br/>
     <strong>
      是否可抢占？：
     </strong>
     SJF和SPF都是
     <mark>
      非抢占式的算法
     </mark>
     。但是也有抢占式的版本----
     <mark>
      最短剩余时间优先算法。（SRTN,Shortest Remaining Time Next）
     </mark>
     <br/>
     <strong>
      优点：
     </strong>
     "最短的"平均等待时间、平均周转时间
     <br/>
     <strong>
      缺点：
     </strong>
     不公平。
     <mark>
      对短作业有利，对长作业不利
     </mark>
     。可能产生==饥饿现象。==另外，进程/作业的运行时间都是由用户提供的，并不一定真实，不一定能做到真正的短作业优先。
     <br/>
     <strong>
      饥饿：
     </strong>
     会导致饥饿
    </p>
    <p>
     <strong>
      例题
     </strong>
     <br/>
     例题：各进程到达就绪队列的时间、需要的运行时间如下所示，使用
     <mark>
      非抢占式的短作业优先
     </mark>
     调度算法，计算各进程的等待时间、平均等待时间、周转时间、平均周转时间、带权周转时间、平均带权周转时间
    </p>
    <table>
     <thead>
      <tr>
       <th>
        进程
       </th>
       <th>
        到达时间
       </th>
       <th>
        运行时间
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        p1
       </td>
       <td>
        0
       </td>
       <td>
        7
       </td>
      </tr>
      <tr>
       <td>
        p2
       </td>
       <td>
        2
       </td>
       <td>
        4
       </td>
      </tr>
      <tr>
       <td>
        p3
       </td>
       <td>
        4
       </td>
       <td>
        1
       </td>
      </tr>
      <tr>
       <td>
        p1
       </td>
       <td>
        5
       </td>
       <td>
        4
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     短作业/进程优先调度算法：每次调度选择
     <mark>
      当前已到达
     </mark>
     且
     <mark>
      运行时间最短
     </mark>
     的作业/进程。
     <br/>
     经过简单的分析之后，可以知道
     <mark>
      调度顺序为
     </mark>
     p1–&gt;p3–&gt;p2–&gt;p4
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/98000aebbf9cfc1ae1b6b61ce298adb4.jpeg#pic_center">
      <br/>
      <strong>
       下面我们来用最短剩余时间来考虑：
      </strong>
     </img>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        进程
       </th>
       <th>
        到达时间
       </th>
       <th>
        运行时间
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        p1
       </td>
       <td>
        0
       </td>
       <td>
        7
       </td>
      </tr>
      <tr>
       <td>
        p2
       </td>
       <td>
        2
       </td>
       <td>
        4
       </td>
      </tr>
      <tr>
       <td>
        p3
       </td>
       <td>
        4
       </td>
       <td>
        1
       </td>
      </tr>
      <tr>
       <td>
        p1
       </td>
       <td>
        5
       </td>
       <td>
        4
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <mark>
      最短剩余时间优先
     </mark>
     算法：每当有进程加入
     <mark>
      就绪队列改变时就需要调度
     </mark>
     ，如果新到达的进程
     <mark>
      剩余时间
     </mark>
     比当前运行的进程剩余时间
     <mark>
      更短
     </mark>
     ，则由新进程
     <mark>
      抢占
     </mark>
     处理机，当前运行进程重新回到就绪队列。另外,当一个
     <mark>
      进程完成时也需要调度。
     </mark>
    </p>
    <p>
     需要注意的是，当有新进程到达时就绪队列就会改变，就要按照上述规则就行检查。以下p
     <sub>
      n
     </sub>
     (m)表示当前p
     <sub>
      n
     </sub>
     进程剩余时间为m。每个时刻的情况如下
     <br/>
     (我们用黄色表示这个时刻剩余时间最短的进程)
    </p>
    <ul>
     <li>
      0时刻（p1到达）：
      <mark>
       p
       <sub>
        1
       </sub>
       (7)
      </mark>
     </li>
     <li>
      2时刻（p2到达）：p
      <sub>
       1
      </sub>
      (5) 、
      <mark>
       p
       <sub>
        2
       </sub>
       (4)
      </mark>
     </li>
     <li>
      4时刻（p3到达）：p
      <sub>
       1
      </sub>
      (5)、p
      <sub>
       2
      </sub>
      （2）、
      <mark>
       p
       <sub>
        3
       </sub>
       (1)
      </mark>
     </li>
     <li>
      5时刻(p3完成且p4刚好到达)：p
      <sub>
       1
      </sub>
      (5)、
      <mark>
       p
       <sub>
        2
       </sub>
       （2）
      </mark>
      、p
      <sub>
       4
      </sub>
      (4)
     </li>
     <li>
      7时刻（p2完成）：p
      <sub>
       1
      </sub>
      (5)、=
      <mark>
       p
       <sub>
        4
       </sub>
       (4)
      </mark>
     </li>
     <li>
      11时刻（p4完成）：p
      <sub>
       1
      </sub>
      (5)
     </li>
     <li>
      16时刻（p1完成）：结束
     </li>
    </ul>
    <p>
     <strong>
      周转时间=完成时间-到达时间
     </strong>
     <br/>
     <strong>
      带权周转时间=周转时间 / 运行时间
     </strong>
     <br/>
     <strong>
      等待时间=周转时间- 运行时间
     </strong>
    </p>
    <table>
     <thead>
      <tr>
       <th>
       </th>
       <th>
       </th>
       <th>
       </th>
       <th>
       </th>
       <th>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        周转时间
       </td>
       <td>
        p1=16-0=16
       </td>
       <td>
        p2=7-2=5
       </td>
       <td>
        p3=5-4=1
       </td>
       <td>
        p4=11-5=6
       </td>
      </tr>
      <tr>
       <td>
        带权周转时间
       </td>
       <td>
        p1=16/7=2.28
       </td>
       <td>
        p2=5/4=1.25
       </td>
       <td>
        p3=1/1=1
       </td>
       <td>
        p4=6/4=1.5
       </td>
      </tr>
      <tr>
       <td>
        等待转时间
       </td>
       <td>
        p1=16-7=9
       </td>
       <td>
        p2=5-4=1
       </td>
       <td>
        p3=1-1=0
       </td>
       <td>
        p4=6-4=2
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     平均周转时间=（16+5+1+6）/4=7
     <br/>
     平均带权周转时间=(2.28+1.25+1+1.5)/4=1.5
     <br/>
     平均等待时间=(9+1+0+2)/4=3
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
</div>


<p class="artid" style="display:none">68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f34373634323337362f:61727469636c652f64657461696c732f313037383935343832
