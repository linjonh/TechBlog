---
layout: post
title: "python操作ipv6_用python开启临时http服务器及其ipv6支持"
date: 2025-01-02 08:00:00 +0800
description: "python可以只用一行代码创建简单的http服务器，用来把linux的vps中文件拖回本地非常方便"
keywords: "python ipv6"
categories: ['未分类']
tags: ['Python']
artid: "112023159"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=112023159
  alt: "python操作ipv6_用python开启临时http服务器及其ipv6支持"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     python操作ipv6_用python开启临时http服务器及其ipv6支持
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div style="font-size:16px;">
     <p>
      python可以只用一行代码创建简单的http服务器，用来把linux的vps中文件拖回本地非常方便
     </p>
     <p>
      高校的同学也可以用这个方法，通过ipv6给同学分享文件
     </p>
     <p>
      pyhton3
     </p>
     <p>
      python -m http.server
     </p>
     <p>
      之后会看到输出Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
     </p>
     <p>
      pyhton2
     </p>
     <p>
      python -m SimpleHTTPServer
     </p>
     <p>
      之后会看到输出Serving HTTP on 0.0.0.0 port 8000 ...
     </p>
     <p>
      之后在浏览器地址栏输入 ip地址:端口 即可访问
     </p>
     <p>
      但是问题来了，无论py2还是py3，默认都不支持ipv6
     </p>
     <p>
      为了解决ipv6支持的问题，2、3的方法还是略有区别
     </p>
     <p>
      python3
     </p>
     <p>
      python3安装目录/lib/http/server.py 的如下位置添加带有加号的两行
     </p>
     <p>
      就是把
     </p>
     <p>
      server_address = (bind, port) HandlerClass.protocol_version = protocol
     </p>
     <p>
      改成
     </p>
     <p>
      server_address = (bind, port) if ':' in bind: ServerClass.address_family = socket.AF_INET6 HandlerClass.protocol_version = protocol
     </p>
     <p>
      然后代码
     </p>
     <p>
      python -m http.server -b [::]
     </p>
     <p>
      之后会看到输出Serving HTTP on :: port 8000 (http://:::8000/) ...
     </p>
     <p>
      python2
     </p>
     <p>
      不用修改文件，直接一行代码
     </p>
     <p>
      python -c "import socket,SocketServer,CGIHTTPServer;SocketServer.TCPServer.address_family=socket.AF_INET6;CGIHTTPServer.test()" 8080
     </p>
     <p>
      之后会看到输出Serving HTTP on :: port 8080 ...
     </p>
     <p>
      实际上py2的这一行代码，是有如下三行的脚本文件生成的，python调用这个脚本，8080为其参数，是端口
     </p>
     <p>
      import socket,SocketServer,CGIHTTPServer
     </p>
     <p>
      SocketServer.TCPServer.address_family=socket.AF_INET6
     </p>
     <p>
      CGIHTTPServer.test()
     </p>
     <p>
      注意
     </p>
     <p>
      1.浏览器访问ipv6地址需要加方括号
     </p>
     <p>
      [ipv6地址]:端口
     </p>
     <p>
      2.文件分享的路径就是命令行当前工作目录
     </p>
     <p>
      3.代码运行在操作系统命令行，不是python命令行，例如win的cmd或者powershell，linux的bash命令行等
     </p>
     <p>
      4.以上方法均来自互联网非本人原创
     </p>
     <p>
      感谢原作者搞出这么方便的东西！
     </p>
    </div>
   </div>
  </div>
  <div id="recommendDown">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33353634373739392f:61727469636c652f64657461696c732f313132303233313539" class_="artid" style="display:none">
 </p>
</div>
