---
layout: post
title: "微信小程序列表的上拉加载和下拉刷新的实现"
date: 2025-01-03 10:33:17 +0800
description: "微信小程序可谓是9月21号之后最火的一个名词了，一经出现真是轰炸了整个开发人员，当然很多App开发人"
keywords: "uniapp微信小程序下拉加载更多样式"
categories: ['微信小程序']
tags: ['微信小程序']
artid: "75579639"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=75579639
    alt: "微信小程序列表的上拉加载和下拉刷新的实现"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序列表的上拉加载和下拉刷新的实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <a class="replace_word" href="http://lib.csdn.net/base/wechat" rel="nofollow">
      微信
     </a>
     小程序可谓是9月21号之后最火的一个名词了，一经出现真是轰炸了整个开发人员，当然很多App开发人员有了一个担心，
     <a class="replace_word" href="http://lib.csdn.net/base/wechat" rel="nofollow">
      微信
     </a>
     小程序的到来会不会让移动端App颠覆，让移动端的程序员失业，身为一个
     <a class="replace_word" href="http://lib.csdn.net/base/android" rel="nofollow">
      Android
     </a>
     开发者我是不相信的，即使有，那也是需要个一两年的过度和打磨才能实现的吧。
    </p>
    <p>
     不管微信小程序是否能颠覆当今的
     <a class="replace_word" href="http://lib.csdn.net/base/wechat" rel="nofollow">
      移动开发
     </a>
     格局，我们都要积极向上的心态去接收，去学习。不排斥新技术，所以，心动不如行动，赶紧先搭建一个微信小程序开发工具。那么接下来就让我们来开始学习列表的上拉加载和下拉刷新的实现吧（通过聚合数据平台获取微信新闻）。
    </p>
    <h3 id="1介绍几个组件" style="margin-left:0px;">
     <a name="t0">
     </a>
     1.介绍几个组件
    </h3>
    <h4 id="11-scroll-view-组件" style="margin-left:0px;">
     <a name="t1">
     </a>
     1.1 scroll-view 组件
    </h4>
    <p>
     <img alt="这里写图片描述" class="has" src="https://img-blog.csdn.net/20161004103844128"/>
    </p>
    <p>
     注意：使用竖向滚动时，需要给一个固定高度，通过 WXSS 设置 height。
    </p>
    <h4 id="12-image组件" style="margin-left:0px;">
     <a name="t2">
     </a>
     1.2 image组件
    </h4>
    <p>
     <img alt="这里写图片描述" class="has" src="https://img-blog.csdn.net/20161004110941566"/>
    </p>
    <p>
     注意：mode有12种模式，其中3种是缩放模式，9种是裁剪模式。
    </p>
    <h4 id="13-icon组件" style="margin-left:0px;">
     <a name="t3">
     </a>
     1.3 Icon组件
    </h4>
    <p>
     <img alt="这里写图片描述" class="has" src="https://img-blog.csdn.net/20161004111410072"/>
    </p>
    <p>
     iconType: [
     <br/>
     ‘success’, ‘info’, ‘warn’, ‘waiting’, ‘safe_success’, ‘safe_warn’,
     <br/>
     ‘success_circle’, ‘success_no_circle’, ‘waiting_circle’, ‘circle’, ‘download’,
     <br/>
     ‘info_circle’, ‘cancel’, ‘search’, ‘clear’
     <br/>
     ]
    </p>
    <h3 id="2列表的上拉加载和下拉刷新的实现" style="margin-left:0px;">
     <a name="t4">
     </a>
     2.列表的上拉加载和下拉刷新的实现
    </h3>
    <h3 id="21先来张效果图" style="margin-left:0px;">
     <a name="t5">
     </a>
     2.1先来张效果图
    </h3>
    <p>
     <img alt="" class="has" height="306" src="https://img-blog.csdn.net/20161004115244341" width="506"/>
    </p>
    <p>
     !
     <a href="http://blog.csdn.net/u010046908/article/details/52733305?utm_source=tuicool&amp;utm_medium=referral">
      这里写图片描述
     </a>
    </p>
    <h3 id="22逻辑很简单直接上代码" style="margin-left:0px;">
     <a name="t6">
     </a>
     2.2逻辑很简单，直接上代码
    </h3>
    <h4 id="221-detailwxml-布局文件" style="margin-left:0px;">
     <a name="t7">
     </a>
     2.2.1 detail.wxml 布局文件
    </h4>
    <pre class="prettyprint"><code><span style="color:#006666;">&lt;<span style="color:#000088;">loading</span> <span style="color:#660066;">hidden</span>=<span style="color:#008800;">"</span></span>{<!-- -->{<!-- --><span style="color:#660066;">hidden</span>}}<span style="color:#006666;"><span style="color:#008800;">"</span> <span style="color:#660066;">bindchange</span>=<span style="color:#008800;">"loadingChange"</span>&gt;</span>
    加载中...
  <span style="color:#006666;">&lt;/<span style="color:#000088;">loading</span>&gt;</span>  
 <span style="color:#006666;">&lt;<span style="color:#000088;">scroll-view</span> <span style="color:#660066;">scroll-y</span>=<span style="color:#008800;">"true"</span> <span style="color:#660066;">style</span>=<span style="color:#008800;">"height: 100%;"</span> <span style="color:#660066;">bindscrolltolower</span>=<span style="color:#008800;">"loadMore"</span> <span style="color:#660066;">bindscrolltoupper</span>=<span style="color:#008800;">"refesh"</span>&gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">wx:if</span>=<span style="color:#008800;">"</span></span>{<!-- -->{<!-- --><span style="color:#660066;">hasRefesh</span>}}<span style="color:#006666;"><span style="color:#008800;">"</span> <span style="color:#660066;">style</span>=<span style="color:#008800;">"display: flex;flex-direction: row;align-items: center;align-self: center;justify-content: center;"</span>&gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">icon</span> <span style="color:#660066;">type</span>=<span style="color:#008800;">"waiting"</span> <span style="color:#660066;">size</span>=<span style="color:#008800;">"45"</span>/&gt;</span><span style="color:#006666;">&lt;<span style="color:#000088;">text</span>&gt;</span>刷新中...<span style="color:#006666;">&lt;/<span style="color:#000088;">text</span>&gt;</span><span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">wx:else</span>  <span style="color:#660066;">style</span>=<span style="color:#008800;">"display:none"</span> &gt;</span><span style="color:#006666;">&lt;<span style="color:#000088;">text</span>&gt;</span><span style="color:#006666;">&lt;/<span style="color:#000088;">text</span>&gt;</span><span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
  <span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">class</span>=<span style="color:#008800;">"lll"</span>  <span style="color:#660066;">wx:for</span>=<span style="color:#008800;">"</span></span>{<!-- -->{<!-- --><span style="color:#660066;">list</span>}}<span style="color:#006666;"><span style="color:#008800;">"</span> <span style="color:#660066;">wx:for-item</span>=<span style="color:#008800;">"item"</span> <span style="color:#660066;">bindtap</span>=<span style="color:#008800;">"bindViewTap"</span> 
         <span style="color:#660066;">data-title</span>=<span style="color:#008800;">"</span></span>{<!-- -->{<!-- --><span style="color:#660066;">item.title</span>}}<span style="color:#006666;"><span style="color:#008800;">"</span> &gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">image</span> <span style="color:#660066;">style</span>=<span style="color:#008800;">" width: 50px;height: 50px;margin: 20rpx;"</span> <span style="color:#660066;">src</span>=<span style="color:#008800;">"</span></span>{<!-- -->{<!-- --><span style="color:#660066;">item.firstImg</span>}}<span style="color:#006666;"><span style="color:#008800;">"</span>   &gt;</span><span style="color:#006666;">&lt;/<span style="color:#000088;">image</span>&gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">view</span>  <span style="color:#660066;">class</span>=<span style="color:#008800;">"eee"</span> &gt;</span> 
       <span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">style</span>=<span style="color:#008800;">"margin:5px;font-size:8px"</span>&gt;</span> 标题:{<!-- -->{<!-- --><span style="color:#660066;">item.title</span>}}<span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
       <span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">style</span>=<span style="color:#008800;">"margin:5px;color:red;font-size:6px"</span>&gt;</span> 来源:{<!-- -->{<!-- --><span style="color:#660066;">item.source</span>}}<span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
       <span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
<span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
<span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">class</span>=<span style="color:#008800;">"tips1"</span>&gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">wx:if</span>=<span style="color:#008800;">"</span></span>{<!-- -->{<!-- --><span style="color:#660066;">hasMore</span>}}<span style="color:#006666;"><span style="color:#008800;">"</span> <span style="color:#660066;">style</span>=<span style="color:#008800;">"display: flex;flex-direction: row;align-items: center;align-self: center;justify-content: center;"</span>&gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">icon</span> <span style="color:#660066;">type</span>=<span style="color:#008800;">"waiting"</span> <span style="color:#660066;">size</span>=<span style="color:#008800;">"45"</span>/&gt;</span><span style="color:#006666;">&lt;<span style="color:#000088;">text</span>&gt;</span>玩命的加载中...<span style="color:#006666;">&lt;/<span style="color:#000088;">text</span>&gt;</span><span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
      <span style="color:#006666;">&lt;<span style="color:#000088;">view</span> <span style="color:#660066;">wx:else</span>&gt;</span><span style="color:#006666;">&lt;<span style="color:#000088;">text</span>&gt;</span>没有更多内容了<span style="color:#006666;">&lt;/<span style="color:#000088;">text</span>&gt;</span><span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
    <span style="color:#006666;">&lt;/<span style="color:#000088;">view</span>&gt;</span>
 <span style="color:#006666;">&lt;/<span style="color:#000088;">scroll-view</span>&gt;</span>
</code></pre>
    <p>
    </p>
    <h4 id="221-detailjs逻辑代码文件" style="margin-left:0px;">
     <a name="t8">
     </a>
     2.2.1 detail.js逻辑代码文件
    </h4>
    <pre class="prettyprint"><code>
<span style="color:#000088;">var</span> network_util = <span style="color:#000088;">require</span>(<span style="color:#008800;">'../../utils/network_util.js'</span>);
<span style="color:#000088;">var</span> json_util = <span style="color:#000088;">require</span>(<span style="color:#008800;">'../../utils/json_util.js'</span>);
Page({
  data:{
    <span style="color:#880000;">// text:"这是一个页面"</span>
    <span style="color:#000088;">list</span>:[],
     dd:<span style="color:#008800;">''</span>,
     hidden:<span style="color:#000088;">false</span>,
     page: <span style="color:#006666;">1</span>,
     size: <span style="color:#006666;">20</span>,
     hasMore:<span style="color:#000088;">true</span>,
     hasRefesh:<span style="color:#000088;">false</span>
  },
  onLoad:<span style="color:#000088;">function</span><span style="color:#660066;">(options)</span>{
    <span style="color:#000088;">var</span> that = this;
    <span style="color:#000088;">var</span> url = <span style="color:#008800;">'http://v.juhe.cn/weixin/query?key=f16af393a63364b729fd81ed9fdd4b7d&amp;pno=1&amp;ps=10'</span>;
    network_util._get(url,
    <span style="color:#000088;">function</span><span style="color:#660066;">(res)</span>{
    that.setData({
       <span style="color:#000088;">list</span>:res.data.result.<span style="color:#000088;">list</span>,
       hidden: <span style="color:#000088;">true</span>,
    });
    },<span style="color:#000088;">function</span><span style="color:#660066;">(res)</span>{
     console.log(res);
 });
  },
  onReady:<span style="color:#000088;">function</span><span style="color:#660066;">()</span>{
    <span style="color:#880000;">// 页面渲染完成</span>
  },
  onShow:<span style="color:#000088;">function</span><span style="color:#660066;">()</span>{
    <span style="color:#880000;">// 页面显示</span>
  },
  onHide:<span style="color:#000088;">function</span><span style="color:#660066;">()</span>{
    <span style="color:#880000;">// 页面隐藏</span>
  },
  onUnload:<span style="color:#000088;">function</span><span style="color:#660066;">()</span>{
    <span style="color:#880000;">// 页面关闭</span>
  },
   <span style="color:#880000;">//点击事件处理</span>
  bindViewTap: <span style="color:#000088;">function</span><span style="color:#660066;">(e)</span> {
    console.log(e.currentTarget.dataset.title);
  },
  <span style="color:#880000;">//加载更多</span>
  loadMore: <span style="color:#000088;">function</span><span style="color:#660066;">(e)</span> {
     <span style="color:#000088;">var</span> that = this;
    that.setData({
    hasRefesh:<span style="color:#000088;">true</span>,});
    <span style="color:#000088;">if</span> (!this.data.hasMore) <span style="color:#000088;">return</span>
    <span style="color:#000088;">var</span> url = <span style="color:#008800;">'http://v.juhe.cn/weixin/query?key=f16af393a63364b729fd81ed9fdd4b7d&amp;pno='</span>+(++that.data.page)+<span style="color:#008800;">'&amp;ps=10'</span>;
    network_util._get(url,
    <span style="color:#000088;">function</span><span style="color:#660066;">(res)</span>{
    that.setData({
       <span style="color:#000088;">list</span>: that.data.<span style="color:#000088;">list</span>.concat(res.data.result.<span style="color:#000088;">list</span>),
       hidden: <span style="color:#000088;">true</span>,
       hasRefesh:<span style="color:#000088;">false</span>,
    });
    },<span style="color:#000088;">function</span><span style="color:#660066;">(res)</span>{
     console.log(res);
  })
},
<span style="color:#880000;">//刷新处理</span>
refesh: <span style="color:#000088;">function</span><span style="color:#660066;">(e)</span> {
 <span style="color:#000088;">var</span> that = this;
 that.setData({
    hasRefesh:<span style="color:#000088;">true</span>,
 });
    <span style="color:#000088;">var</span> url = <span style="color:#008800;">'http://v.juhe.cn/weixin/query?key=f16af393a63364b729fd81ed9fdd4b7d&amp;pno=1&amp;ps=10'</span>;
    network_util._get(url,
    <span style="color:#000088;">function</span><span style="color:#660066;">(res)</span>{
    that.setData({
      <span style="color:#000088;">list</span>:res.data.result.<span style="color:#000088;">list</span>,
       hidden: <span style="color:#000088;">true</span>,
       page:<span style="color:#006666;">1</span>,
       hasRefesh:<span style="color:#000088;">false</span>,
    });
    },<span style="color:#000088;">function</span><span style="color:#660066;">(res)</span>{
     console.log(res);
 })
},
})</code>
</pre>
    <p>
     最后的效果：
     <br/>
     <img alt="这里写图片描述" class="has" src="https://img-blog.csdn.net/20161004121453294"/>
    </p>
    <p>
     关于新闻的详情实现，后面在实现，由于还不知道怎么加载h5页面。谢谢你学习，有问题直接QQ（1561281670）交流。
    </p>
    <p>
     <a href="https://github.com/lidong1665/WeiXinProject">
      代码地址：https://github.com/lidong1665/WeiXinProject
     </a>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6c6c697869616e676a69616e:2f61727469636c652f64657461696c732f3735353739363339" class_="artid" style="display:none">
 </p>
</div>


