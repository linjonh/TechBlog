---
layout: post
title: "Android移动开发-Android屏幕手写签名的实现"
date: 2024-12-09 14:55:38 +0800
description: "Android屏幕手写签名的原理就是把手机屏幕当作画板，把用户手指当作画笔，手指在屏幕上在屏幕上划来"
keywords: "android 手写签名"
categories: ['Android']
tags: ['移动开发', 'Android']
artid: "78470712"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=78470712
    alt: "Android移动开发-Android屏幕手写签名的实现"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Android移动开发-Android屏幕手写签名的实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      Android屏幕手写签名的原理就是把手机屏幕当作画板，把用户手指当作画笔，手指在屏幕上在屏幕上划来划去，屏幕就会显示手指的移动轨迹，就像画笔在画板上写字一样。实现手写签名需要结合绘图的路径工具Path，在有按下动作时调用Path对象的moveTo方法，将路径起始点移动到触摸点；在有移动操作时调用Path对象的quadTo方法，将记录本次触摸点与上次触摸点之间的路径；在有移动操作与提起动作时调用Canvas对象的drawPath方法，将本次触摸绘制在画布上。
     </p>
    </blockquote>
    <ul>
     <li>
      layout/activity_signature.xml界面布局代码如下：
     </li>
    </ul>
    <pre class="prettyprint"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attribute">xmlns:app</span>=<span class="hljs-value">"http://schemas.android.com/apk/res-auto"</span>
    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
    <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"vertical"</span>
    <span class="hljs-attribute">android:padding</span>=<span class="hljs-value">"5dp"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">ScrollView
</span>        <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
        <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>            <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
            <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
            <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"vertical"</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
                <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"horizontal"</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/btn_add_signature"</span>
                    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"0dp"</span>
                    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
                    <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span>
                    <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"开始签名"</span>
                    <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"@color/black"</span>
                    <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"17sp"</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/btn_reset_signature"</span>
                    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"0dp"</span>
                    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                    <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span>
                    <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"重置"</span>
                    <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"@color/black"</span>
                    <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"17sp"</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/btn_revoke_signature"</span>
                    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"0dp"</span>
                    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"match_parent"</span>
                    <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span>
                    <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"回退"</span>
                    <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"@color/black"</span>
                    <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"17sp"</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/btn_end_signature"</span>
                    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"0dp"</span>
                    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
                    <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span>
                    <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"结束签名"</span>
                    <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"@color/black"</span>
                    <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"17sp"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">com.fukaimei.touchevent.widget.SignatureView
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/view_signature"</span>
                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"200dp"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span>
                <span class="hljs-attribute">app:paint_color</span>=<span class="hljs-value">"#0000aa"</span>
                <span class="hljs-attribute">app:stroke_width</span>=<span class="hljs-value">"3"</span> /&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout
</span>                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
                <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"horizontal"</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">Button
</span>                    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/btn_save_signature"</span>
                    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"0dp"</span>
                    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
                    <span class="hljs-attribute">android:layout_weight</span>=<span class="hljs-value">"1"</span>
                    <span class="hljs-attribute">android:text</span>=<span class="hljs-value">"保存图片文件"</span>
                    <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"@color/black"</span>
                    <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"17sp"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">ImageView
</span>                <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/iv_signature_new"</span>
                <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"match_parent"</span>
                <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"200dp"</span>
                <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@color/white"</span>
                <span class="hljs-attribute">android:scaleType</span>=<span class="hljs-value">"fitCenter"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ScrollView</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span></code></pre>
    <ul>
     <li>
      SignatureActivity.java逻辑代码如下：
     </li>
    </ul>
    <pre class="prettyprint"><code class="hljs java"><span class="hljs-keyword">package</span> com.fukaimei.touchevent;

<span class="hljs-keyword">import</span> android.graphics.Bitmap;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.os.Handler;
<span class="hljs-keyword">import</span> android.support.v7.app.AppCompatActivity;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.view.View.OnClickListener;
<span class="hljs-keyword">import</span> android.widget.ImageView;
<span class="hljs-keyword">import</span> android.widget.Toast;

<span class="hljs-keyword">import</span> com.fukaimei.touchevent.filedialog.dialog.FileSaveFragment;
<span class="hljs-keyword">import</span> com.fukaimei.touchevent.util.BitmapUtil;
<span class="hljs-keyword">import</span> com.fukaimei.touchevent.widget.SignatureView;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SignatureActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> <span class="hljs-keyword">implements</span>
        <span class="hljs-title">OnClickListener</span>, <span class="hljs-title">FileSaveFragment</span>.<span class="hljs-title">FileSaveCallbacks</span> {<!-- --></span>
    <span class="hljs-keyword">private</span> SignatureView view_signature;
    <span class="hljs-keyword">private</span> ImageView iv_signature_new;
    <span class="hljs-keyword">private</span> Bitmap mBitmap;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_signature);
        view_signature = (SignatureView) findViewById(R.id.view_signature);
        iv_signature_new = (ImageView) findViewById(R.id.iv_signature_new);
        findViewById(R.id.btn_add_signature).setOnClickListener(<span class="hljs-keyword">this</span>);
        findViewById(R.id.btn_end_signature).setOnClickListener(<span class="hljs-keyword">this</span>);
        findViewById(R.id.btn_reset_signature).setOnClickListener(<span class="hljs-keyword">this</span>);
        findViewById(R.id.btn_revoke_signature).setOnClickListener(<span class="hljs-keyword">this</span>);
        findViewById(R.id.btn_save_signature).setOnClickListener(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span>(View v) {
        <span class="hljs-keyword">if</span> (v.getId() == R.id.btn_save_signature) {
            <span class="hljs-keyword">if</span> (mBitmap == <span class="hljs-keyword">null</span>) {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"请先开始然后结束签名"</span>, Toast.LENGTH_LONG).show();
                <span class="hljs-keyword">return</span>;
            }
            FileSaveFragment.show(<span class="hljs-keyword">this</span>, <span class="hljs-string">"jpg"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v.getId() == R.id.btn_add_signature) {
            view_signature.setDrawingCacheEnabled(<span class="hljs-keyword">true</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v.getId() == R.id.btn_reset_signature) {
            view_signature.clear();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v.getId() == R.id.btn_revoke_signature) {
            view_signature.revoke();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v.getId() == R.id.btn_end_signature) {
            <span class="hljs-keyword">if</span> (view_signature.isDrawingCacheEnabled() != <span class="hljs-keyword">true</span>) {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"请先开始签名"</span>, Toast.LENGTH_LONG).show();
            } <span class="hljs-keyword">else</span> {
                mBitmap = view_signature.getDrawingCache();
                iv_signature_new.setImageBitmap(mBitmap);
                mHandler.postDelayed(mResetCache, <span class="hljs-number">100</span>);
            }
        }
    }

    <span class="hljs-keyword">private</span> Handler mHandler = <span class="hljs-keyword">new</span> Handler();
    <span class="hljs-keyword">private</span> Runnable mResetCache = <span class="hljs-keyword">new</span> Runnable() {
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>() {
            view_signature.setDrawingCacheEnabled(<span class="hljs-keyword">false</span>);
            view_signature.setDrawingCacheEnabled(<span class="hljs-keyword">true</span>);
        }
    };

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onCanSave</span>(String absolutePath, String fileName) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onConfirmSave</span>(String absolutePath, String fileName) {
        String path = String.format(<span class="hljs-string">"%s/%s"</span>, absolutePath, fileName);
        BitmapUtil.saveBitmap(path, mBitmap, <span class="hljs-string">"jpg"</span>, <span class="hljs-number">80</span>);
        Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"成功保存图片文件："</span> + path, Toast.LENGTH_LONG).show();
    }

}</code></pre>
    <ul>
     <li>
      Demo程序运行效果界面截图如下：
     </li>
    </ul>
    <p>
     <img alt="这里写图片描述" src="https://img-blog.csdn.net/20171107181512359?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZnVrYWltZWk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
    </p>
    <hr/>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f66756b61696d6569:2f61727469636c652f64657461696c732f3738343730373132" class_="artid" style="display:none">
 </p>
</div>


