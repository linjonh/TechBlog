---
layout: post
title: "5运维手册"
date: 2024-12-07 09:18:41 +0800
description: "1、服务管理开发者或者运维人员往往需要在服务注册后，通过友好的界面来查看服务的注册情况，包括当前系统"
keywords: "运维手册"
categories: ['Nacos']
tags: ['运维', '系统架构', '微服务', 'Linux', 'Java']
artid: "122762827"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=122762827
    alt: "5运维手册"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     5、运维手册
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     1、服务管理
     <br/>
     开发者或者运维人员往往需要在服务注册后，通过友好的界面来查看服务的注册情况，包括当前系统注册的所有服务和每个服务的详情。并在有权限控制的情况下，进行服务的一些配置的编辑操作。Nacos在这个版本开放的控制台的服务发现部分，主要就是提供用户一个基本的运维页面，能够查看、编辑当前注册的服务
     <br/>
     <br/>
     <br/>
     <br/>
     2、服务列表管理
     <br/>
     服务列表帮助用户以统一的视图管理其所有的微服务以及服务健康状态。整体界面布局是左上角有服务的搜索框和搜索按钮，页面中央是服务列表的展示。服务列表主要展示服务名、集群数目、实例数目、健康实例数目和详情按钮五个栏目。
    </p>
    <p>
     在服务列表页面点击详情，可以看到服务的详情。可以查看服务、集群和实例的基本信息。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c89c323d33318859caddfb9fa55c1461.png#pic_center">
      <br/>
      <br/>
      <br/>
      <br/>
      3、服务流量权重支持及流量保护
      <br/>
      Nacos 为用户提供了流量权重控制的能力，同时开放了服务流量的阈值保护，以帮助用户更好的保护服务服务提供者集群不被意外打垮。如下图所以，可以点击实例的编辑按钮，修改实例的权重。如果想增加实例的流量，可以将权重调大，如果不想实例接收流量，则可以将权重设为0。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1279e5a1301f3038aeb0d35c4f2676d9.png#pic_center">
       <br/>
       <br/>
       <br/>
       <br/>
       4、服务元数据管理
       <br/>
       Nacos提供多个维度的服务元数据的暴露，帮助用户存储自定义的信息。这些信息都是以K-V的数据结构存储，在控制台上，会以k1=v1,k2=v2这样的格式展示。类似的，编辑元数据可以通过相同的格式进行。例如服务的元数据编辑，首先点击服务详情页右上角的“编辑服务”按钮，然后在元数据输入框输入：version=1.0,env=prod。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fe203d15ed0f6357d39b68f0669968c2.png#pic_center">
        <br/>
        <br/>
        点击确认，就可以在服务详情页面，看到服务的元数据已经更新了。
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e9b833a670c131a009aa0e3851f98fa4.png#pic_center">
         <br/>
         <br/>
         <br/>
         <br/>
         5、服务优雅上下线
         <br/>
         Nacos还提供服务实例的上下线操作，在服务详情页面，可以点击实例的“上线”或者“下线”按钮，被下线的实例，将不会包含在健康的实例列表里。
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/eb5d8ed86c9e2494775fec14bd091e02.png#pic_center">
          <br/>
          <br/>
          <br/>
          <br/>
          6、配置管理
          <br/>
          Nacos支持基于Namespace和Group的配置分组管理，以便用户更灵活的根据自己的需要按照环境或者应用、模块等分组管理微服务以及Spring的大量配置，在配置管理中主要提供了配置历史版本、回滚、订阅者查询等核心管理能力。
          <br/>
          <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1a8b2002a2ddb48b164f44ef9881a7c4.png#pic_center">
           <br/>
           <br/>
           <br/>
           <br/>
           7、多配置格式编辑器
           <br/>
           Nacos支持 YAML、Properties、TEXT、JSON、XML、HTML 等常见配置格式在线编辑、语法高亮、格式校验，帮助用户高效编辑的同时大幅降低格式错误带来的风险。
           <br/>
           Nacos支持配置标签的能力，帮助用户更好、更灵活的做到基于标签的配置分类及管理。同时支持用户对配置及其变更进行描述，方面多人或者跨团队协作管理配置。
           <br/>
           <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/85baab211f66b7b39991ebebc477bc26.png#pic_center">
            <br/>
            <br/>
            <br/>
            <br/>
            8、编辑DIFF
            <br/>
            Nacos支持编辑DIFF能力，帮助用户校验修改内容，降低改错带来的风险。
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/acb9626e3627d09f309dd2ae1f936131.png#pic_center">
             <br/>
             <br/>
             <br/>
             <br/>
             9、示例代码
             <br/>
             Nacos提供示例代码能力，能够让新手快速使用客户端编程消费该配置，大幅降低新手使用门槛。
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ea525f6946d160664ff48c9823dce11c.png#pic_center"/>
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/02cf589571d3fcc74283a6753df171cf.png#pic_center"/>
             <br/>
             <br/>
             <br/>
             <br/>
             10、监听者查询
             <br/>
             Nacos提供配置订阅者即监听者查询能力，同时提供客户端当前配置的MD5校验值，以便帮助用户更好的检查配置变更是否推送到 Client 端。
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/92711eba2601b01b3614bffa353851cd.png#pic_center"/>
             <br/>
             <br/>
             <br/>
             <br/>
             11、配置的版本及一键回滚
             <br/>
             Nacos通过提供配置版本管理及其一键回滚能力，帮助用户改错配置的时候能够快速恢复，降低微服务系统在配置管理上的一定会遇到的可用性风险。
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2a690ca041f97dbabdab26d484a8d0b4.png#pic_center"/>
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4c067f411df4dffa686483470aca82c4.png#pic_center"/>
             <br/>
             <br/>
             <br/>
             <br/>
             12、命名空间管理
             <br/>
             Nacos 基于Namespace 帮助用户逻辑隔离多个命名空间，这可以帮助用户更好的管理测试、预发、生产等多环境服务和配置，让每个环境的同一个配置（如数据库数据源）可以定义不同的值。
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/26d88882a4b3ea90772a86889868353c.png#pic_center"/>
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a5749ae738fd4f547c8e04bc8a279f57.png#pic_center"/>
             <br/>
             <br/>
             <br/>
             <br/>
             13、登录管理
             <br/>
             Nacos0.8 版本支持简单登录功能，默认用户名/密码为： nacos/nacos。
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8ad2d2b469bb858652ad27824e5286cf.png#pic_center"/>
             <br/>
             <br/>
             <br/>
             <br/>
             14、修改默认用户名/密码方法
             <br/>
             生成加密密码，在com.alibaba.nacos.console.utils.PasswordEncoderUtil.main函数中，将 nacos 改成你要改成的密码，运行即可得到加密有算法。注意盐值是随机的，所以生成密码每次可能不一样，请不要担心。
             <br/>
             <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dbf1971fe062d7ffdbe8c4b281349654.png#pic_center"/>
             <br/>
             创建用户名或者密码的时候，用指定用户名密码即可。
             <br/>
             INSERT INTO users (username, password, enabled) VALUES (‘nacos’, ‘$2a
             <span class="katex--inline">
              <span class="katex">
               <span class="katex-mathml">
                10 
                                             
                                            
                                           
                                             10
               </span>
               <span class="katex-html">
                <span class="base">
                 <span class="strut" style="height: 0.64444em; vertical-align: 0em;">
                 </span>
                 <span class="mord">
                  1
                 </span>
                 <span class="mord">
                  0
                 </span>
                </span>
               </span>
              </span>
             </span>
             EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu’, TRUE);
             <br/>
             INSERT INTO roles (username, role) VALUES (‘nacos’, ‘ROLE_ADMIN’);
             <br/>
             <br/>
             <br/>
             <br/>
             15、关闭登录功能
             <br/>
             由于部分公司自己开发控制台，不希望被nacos的安全filter拦截。因此nacos支持定制关闭登录功能找到配置文件 ${nacoshome}/conf/application.properties， 替换以下内容即可。
             <br/>
             ##spring security config
             <br/>
             ###turn off security
             <br/>
             spring.security.enabled=false
             <br/>
             management.security=false
             <br/>
             security.basic.enabled=false
             <br/>
             nacos.security.ignore.urls=/**
            </img>
           </img>
          </img>
         </img>
        </img>
       </img>
      </img>
     </img>
    </p>
    <p>
     #nacos.security.ignore.urls=/,/
     <strong>
      /*.css,/
     </strong>
     /
     <em>
      .js,/**/
     </em>
     .html,/
     <strong>
      /*.map,/
     </strong>
     /
     <em>
      .svg,/**/
     </em>
     .png,/
     <strong>
      /*.ico,/console-fe/public/
     </strong>
     ,/v1/auth/login,/v1/console/health,/v1/cs/
     <strong>
      ,/v1/ns/
     </strong>
     ,/v1/cmdb/
     <strong>
      ,/actuator/
     </strong>
     <br/>
     <br/>
     <br/>
     <br/>
     16、会话时间
     <br/>
     默认会话保持时间为30分钟。30分钟后需要重新登录认证。 暂时不支持修改该默认时间。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343739333137322f:61727469636c652f64657461696c732f313232373632383237" class_="artid" style="display:none">
 </p>
</div>


