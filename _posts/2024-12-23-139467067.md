---
layout: post
title: "达梦数据库DMDB基本使用"
date: 2024-12-23 18:18:03 +0800
description: "达梦数据库（DMDB）作为一款高性能的国产关系型数据库管理系统，其丰富的功能和灵活的操作为用户提供了"
keywords: "dmdb"
categories: ["未分类"]
tags: ["数据库"]
artid: "139467067"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=139467067
  alt: "达梦数据库DMDB基本使用"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     达梦数据库（DMDB）基本使用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     达梦数据库（DMDB）作为一款高性能的国产关系型数据库管理系统，其丰富的功能和灵活的操作为用户提供了强大的数据管理支持。以下是对达梦数据库基础操作的详细介绍：
    </p>
    <h4>
     1.
     <strong>
      模式（Schema）管理
     </strong>
    </h4>
    <p>
     在达梦数据库中，模式是一组逻辑对象的集合，如表、视图、索引等。每个模式都有一个唯一的名称，用于标识该模式下的对象。
    </p>
    <ul>
     <li>
      <p>
       <strong>
        创建模式
       </strong>
       ：您可以使用
       <code>
        CREATE SCHEMA
       </code>
       语句创建一个新的模式。例如，要创建一个名为
       <code>
        myschema
       </code>
       的模式，可以使用以下SQL语句：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         CREATE SCHEMA myschema;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        删除模式
       </strong>
       ：当不再需要某个模式时，可以使用
       <code>
        DROP SCHEMA
       </code>
       语句将其删除。但请注意，如果模式中包含其他对象（如表、视图等），则需要使用
       <code>
        CASCADE
       </code>
       选项来同时删除这些对象。例如：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         DROP SCHEMA myschema CASCADE;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     2.
     <strong>
      表操作
     </strong>
    </h4>
    <p>
     表是数据库中最基本的数据存储结构。在达梦数据库中，您可以通过SQL语句来创建、修改和删除表。
    </p>
    <ul>
     <li>
      <p>
       <strong>
        创建表
       </strong>
       ：使用
       <code>
        CREATE TABLE
       </code>
       语句可以创建一个新的表，并指定表的列、数据类型、约束等。例如：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         CREATE TABLE myschema.mytable (
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         id INT PRIMARY KEY,
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         name VARCHAR(50),
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         age INT CHECK (age &gt;= 0 AND age &lt;= 150)
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         );
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        修改表
       </strong>
       ：使用
       <code>
        ALTER TABLE
       </code>
       语句可以修改表的结构，如添加列、删除列、修改列的数据类型等。例如，要向
       <code>
        mytable
       </code>
       表中添加一个
       <code>
        email
       </code>
       列，可以使用以下语句：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         ALTER TABLE myschema.mytable ADD email VARCHAR(100);
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        删除表
       </strong>
       ：使用
       <code>
        DROP TABLE
       </code>
       语句可以删除一个表。但请注意，删除表将同时删除表中的所有数据。例如：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         DROP TABLE myschema.mytable;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     3.
     <strong>
      视图操作
     </strong>
    </h4>
    <p>
     视图是基于SQL语句的结果集的可视化表。在达梦数据库中，您可以通过创建视图来简化复杂的查询操作，提高数据访问的灵活性。
    </p>
    <ul>
     <li>
      <p>
       <strong>
        创建视图
       </strong>
       ：使用
       <code>
        CREATE VIEW
       </code>
       语句可以创建一个新的视图。视图可以基于一个或多个表，并可以使用WHERE子句、GROUP BY子句等进行筛选和分组。例如：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         CREATE VIEW myschema.employee_view AS
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         SELECT name, age, department
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         FROM myschema.employees
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         WHERE age &gt; 25;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        删除视图
       </strong>
       ：使用
       <code>
        DROP VIEW
       </code>
       语句可以删除一个视图。但请注意，删除视图并不会影响原始表中的数据。例如：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         DROP VIEW myschema.employee_view;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     4.
     <strong>
      数据操作
     </strong>
    </h4>
    <p>
     在达梦数据库中，您可以使用SQL语句对表中的数据进行插入、查询、更新和删除操作。
    </p>
    <ul>
     <li>
      <p>
       <strong>
        插入数据
       </strong>
       ：使用
       <code>
        INSERT INTO
       </code>
       语句可以向表中插入新的数据行。例如：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         INSERT INTO myschema.mytable (id, name, age) VALUES (1, 'Alice', 30);
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        查询数据
       </strong>
       ：使用
       <code>
        SELECT
       </code>
       语句可以从表中查询数据。您可以指定要查询的列、表、条件等。例如：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         SELECT * FROM myschema.mytable WHERE age &gt; 20;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        更新数据
       </strong>
       ：使用
       <code>
        UPDATE
       </code>
       语句可以修改表中的数据。例如，要将
       <code>
        mytable
       </code>
       表中
       <code>
        id
       </code>
       为1的记录的
       <code>
        age
       </code>
       字段修改为35，可以使用以下语句：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         UPDATE myschema.mytable SET age = 35 WHERE id = 1;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        删除数据
       </strong>
       ：使用
       <code>
        DELETE
       </code>
       语句可以删除表中的数据行。但请注意，删除数据是永久性的操作，因此请谨慎使用。例如，要删除
       <code>
        mytable
       </code>
       表中
       <code>
        age
       </code>
       小于20的所有记录，可以使用以下语句：
      </p>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         DELETE FROM myschema.mytable WHERE age &lt; 20;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     5. 存储过程
    </h4>
    <p>
     在达梦数据库中，存储过程是一组为了完成特定功能的SQL语句集合，它存储在数据库中，并可以由应用程序调用。存储过程可以提高代码的重用性、减少网络传输量，并且可以封装复杂的业务逻辑。
    </p>
    <p>
     <strong>
      存储过程的创建
     </strong>
    </p>
    <p>
     使用
     <code>
      CREATE PROCEDURE
     </code>
     语句可以创建存储过程。例如：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         CREATE PROCEDURE myschema.my_procedure(IN param1 INT, OUT param2 VARCHAR(20))
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         BEGIN
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         -- 存储过程的SQL逻辑
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         SET param2 = 'Hello from procedure!';
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         END;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      存储过程的调用
     </strong>
    </p>
    <p>
     在达梦数据库中，可以使用
     <code>
      EXECUTE
     </code>
     或
     <code>
      CALL
     </code>
     语句来调用存储过程。例如：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         DECLARE v_out VARCHAR(20);
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         EXECUTE myschema.my_procedure(1, v_out);
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         -- 或者
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         CALL myschema.my_procedure(1, v_out);
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         SELECT v_out FROM DUAL; -- DUAL是达梦数据库中的一个伪表，用于从非表查询中选择数据
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     6. 触发器
    </h4>
    <p>
     触发器是一种特殊的存储过程，它会在指定的数据库事件（如INSERT、UPDATE或DELETE操作）发生时自动执行。触发器可以用于自动检查或修改数据、维护数据的完整性等。
    </p>
    <p>
     <strong>
      触发器的创建
     </strong>
    </p>
    <p>
     使用
     <code>
      CREATE TRIGGER
     </code>
     语句可以创建触发器。例如，创建一个在插入新记录时自动更新另一张表数据的触发器：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         CREATE TRIGGER myschema.my_trigger
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         AFTER INSERT ON myschema.mytable
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         FOR EACH ROW
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         BEGIN
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         -- 触发器的SQL逻辑
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         UPDATE myschema.other_table SET count = count + 1 WHERE id = NEW.id;
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         END;
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      触发器的管理
     </strong>
    </p>
    <p>
     可以使用
     <code>
      ALTER TRIGGER
     </code>
     语句来修改触发器的状态（如启用或禁用），使用
     <code>
      DROP TRIGGER
     </code>
     语句来删除触发器。
    </p>
    <h4>
     7. 索引
    </h4>
    <p>
     索引是数据库管理系统中用于提高查询性能的一种数据结构。通过创建索引，数据库系统可以更快地定位到表中的特定数据。
    </p>
    <p>
     <strong>
      索引的创建
     </strong>
    </p>
    <p>
     使用
     <code>
      CREATE INDEX
     </code>
     语句可以创建索引。达梦数据库支持多种类型的索引，如唯一索引、复合索引、位图索引等。例如，创建一个唯一索引：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
       </td>
       <td>
        <code>
         CREATE UNIQUE INDEX idx_mytable_id ON myschema.mytable(id);
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      索引的使用
     </strong>
    </p>
    <p>
     在查询时，数据库优化器会根据查询条件和索引的选择性来决定是否使用索引。合理地创建和使用索引可以显著提高查询性能，但过多的索引也会增加数据的维护成本。
    </p>
    <p>
     <strong>
      索引的管理
     </strong>
    </p>
    <p>
     可以使用
     <code>
      ALTER INDEX
     </code>
     语句来修改索引的属性（如重建索引），使用
     <code>
      DROP INDEX
     </code>
     语句来删除索引。同时，达梦数据库还提供了相关的系统视图和工具来帮助用户管理索引，如查询索引信息、分析索引使用情况等。
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e63:73646e2e6e65742f7368696e655f313936353736313530332f:61727469636c652f64657461696c732f313339343637303637" class_="artid" style="display:none">
 </p>
</div>
