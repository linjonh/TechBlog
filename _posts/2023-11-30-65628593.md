---
layout: post
title: "appium-键盘搜索"
date: 2023-11-30 16:43:26 +0800
description: "利用adb命令先切换为自己的输入法，按了搜索再切换为appium的输入法查看当前手机的输入法cmd执"
keywords: "appium keyboard search"
categories: ['未分类']
tags: ['无标签']
artid: "65628593"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=65628593
  alt: "appium-键盘搜索"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     appium  键盘搜索
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style='margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     利用adb命令先切换为自己的输入法，按了搜索再切换为appium的输入法
    </p>
    <h5 id="查看当前手机的输入法" style='margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     <a name="t17" style="color:rgb(12,137,207)" target="_blank">
     </a>
     <span style="">
      查看当前手机的输入法
     </span>
    </h5>
    <p style='margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     cmd执行下面的的代码
    </p>
    <blockquote style='margin:0px 0px 1.1em; padding:15px 20px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     <p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:1.25">
      adb shell ime list -s
     </p>
    </blockquote>
    <p style='margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     可以看到类似下面的结果，
    </p>
    <pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px;'><code class="hljs avrasm has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span class="hljs-label" style="box-sizing: border-box;">C:</span>\Users\LITP&gt;adb shell ime list -s
<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">com</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.baidu</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.input</span>_mi/<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.ImeService</span>
<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">com</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.sohu</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.inputmethod</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.sogou</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.xiaomi</span>/<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.SogouIME</span>
io<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.appium</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.android</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.ime</span>/<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.UnicodeIME</span>

<span class="hljs-label" style="box-sizing: border-box;">C:</span>\Users\LITP&gt;</code>

 <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); list-style: none; text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li></ul>
 
 <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); list-style: none; text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li></ul></pre>
    <h5 id="执行adb命令" style='margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     <a name="t18" style="color:rgb(12,137,207)" target="_blank">
     </a>
     <span style="">
      执行adb命令
     </span>
    </h5>
    <p style='margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     先写好一个执行cmd的方法
    </p>
    <pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px;'><code class="hljs java has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>    <span class="hljs-javadoc" style="color: rgb(136, 0, 0); box-sizing: border-box;">/**
     * 执行adb命令
     *<span class="hljs-javadoctag" style="color: rgb(102, 0, 102); box-sizing: border-box;"> @param</span> s 要执行的命令
     */</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">private</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">excuteAdbShell</span>(String s) {
        Runtime runtime=Runtime.getRuntime();
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">try</span>{
            runtime.exec(s);
        }<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">catch</span>(Exception e){
            print(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"执行命令:"</span>+s+<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"出错"</span>);
        }
    }</code>
 
 <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); list-style: none; text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul>
 
 <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); list-style: none; text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul></pre>
    <p style='margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:14px'>
     在需要搜索的时候执行下面的代码，切换的输入法用自己查看列表的输入法内容，我这里是搜狗输入法
    </p>
    <pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px;'><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//使用adb shell 切换输入法-更改为搜狗拼音，这个看你本来用的什么输入法</span>
        <span class="hljs-function" style="box-sizing: border-box;">excuteAdbShell(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"adb shell ime set com.sohu.inputmethod.sogou.xiaomi/.SogouIME"</span>)</span>;</code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>        Thread.sleep(1000);
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//再次点击输入框，调取键盘，软键盘被成功调出</span>
        <span class="hljs-function" style="box-sizing: border-box;">clickView(page.<span class="hljs-function" style="box-sizing: border-box;">getSearch()</span>)</span>;
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//点击右下角的搜索，即ENTER键</span>
        <span class="hljs-function" style="box-sizing: border-box;">pressKeyCode(AndroidKeyCode.ENTER)</span>;
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//再次切回 输入法键盘为Appium unicodeKeyboard</span>
        <span class="hljs-function" style="box-sizing: border-box;">excuteAdbShell(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"adb shell ime set io.appium.android.ime/.UnicodeIME"</span>)</span>;</code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>
</code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>
</code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>有些手机<span class="hljs-function" style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047); box-sizing: border-box;'>pressKeyCode(AndroidKeyCode.ENTER)</span><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>;方法也不管用，可以用</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>String cmdstr="adb shell input keyevent 66";
</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>Runtime.getRuntime().exec(cmdstr).waitFor();
</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>替代<span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>pressKeyCode方法，之前还是要切换成自己的输入法</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>
</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>
</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>
</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'>python 搜索的实现，不需要切换输入法，直接使用就可以实现搜索</span></code><code class="hljs scss has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span style='color: rgb(51, 51, 51); font-family: "Source Code Pro", monospace; font-size: 14px; white-space: pre; background-color: rgba(128, 128, 128, 0.047);'></span></code><pre style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 9pt;"><span style="color:#94558d;">self</span>.driver.keyevent(<span style="color:#0000ff;">66</span>)
<span style="color:#94558d;">self</span>.driver.press_keycode(<span style="color:#0000ff;">66</span>)</pre><br/>
<pre></pre>
</pre>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3139323939303731:2f61727469636c652f64657461696c732f3635363238353933" class_="artid" style="display:none">
 </p>
</div>
