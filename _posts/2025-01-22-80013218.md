---
layout: post
title: "sonar.java.binaries的配置"
date: 2025-01-22 15:49:53 +0800
description: "从sonarQube 4.12开始，sonar将会进行程序的动态检"
keywords: "sonar.java.binaries"
categories: ['Java']
tags: ['无标签']
artid: "80013218"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=80013218
    alt: "sonar.java.binaries的配置"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     sonar.java.binaries的配置
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     从sonarQube 4.12开始，sonar将会进行程序的动态检查，不配置sonar.java.binaries属性将会出错
    </p>
    <blockquote>
     <p>
      From SonarJava version 4.12 binary files are required for java projects with more than one java file. If not provided properly, analysis will fail with the message
      <br/>
      Please provide compiled classes of your project with sonar.java.binaries property
     </p>
    </blockquote>
    <p>
     <a href="https://docs.sonarqube.org/display/PLUG/SonarJava" rel="nofollow">
      (官方文档链接)
     </a>
    </p>
    <hr/>
    <p>
     以一个典型的java项目为例，.java源文件放在src目录下，编译完的class放在bin目录下，项目目录结构如下：
    </p>
    <blockquote>
     <p>
      HelloWorld
     </p>
     <ul>
      <li>
       sonar-project.properties
      </li>
     </ul>
     <blockquote>
      <ul>
       <li>
        src
       </li>
       <li>
        bin
       </li>
      </ul>
     </blockquote>
    </blockquote>
    <p>
     我们在HelloWorld文件夹下配置sonar-project.properties文件如下
    </p>
    <pre><code class="prism language-bash">sonar.projectKey<span class="token operator">=</span>calculator
sonar.projectName<span class="token operator">=</span>calculator
sonar.projectVersion<span class="token operator">=</span>1.0
sonar.sourceEncoding<span class="token operator">=</span>UTF-8
sonar.language<span class="token operator">=</span>java
sonar.modules<span class="token operator">=</span>java-module

java-module.sonar.projectName<span class="token operator">=</span>Java module

<span class="token comment"># 正确的配置</span>
java-module.sonar.sources<span class="token operator">=</span>src
java-module.sonar.projectBaseDir<span class="token operator">=</span>.
sonar.java.binaries<span class="token operator">=</span>bin
<span class="token comment"># 错误的配置</span>
java-module.sonar.sources<span class="token operator">=</span>.
java-module.sonar.projectBaseDir<span class="token operator">=</span>src
sonar.java.binaries<span class="token operator">=</span>bin
<span class="token comment"># 后面的配置会报出无法找到bin文件的错误</span>
</code></pre>
    <hr/>
    <p>
     有评论表示这个方法不太可行，并提供了另外一种解决方案，贴在这里供参考
    </p>
    <blockquote>
     <p>
      埃黎莉莉:照着添加这个配置文件没用，我自己观察发现是因为sonarQube扫描的对象是.class而不是.java文件，所以我直接扫描命令的时候先mvn compile了一下，也就是说直接执行下面的命令，就可以了。
     </p>
     <pre><code class="prism language-bash">mvn compile sonar:sonar -Dsonar.projectKey<span class="token operator">=</span>xxx -Dsonar.host.url<span class="token operator">=</span>xxx -Dsonar.login<span class="token operator">=</span>xxx
</code></pre>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f4d7266697665353535:2f61727469636c652f64657461696c732f3830303133323138" class_="artid" style="display:none">
 </p>
</div>


