---
layout: post
title: "PythonåŒºå—é“¾åº”ç”¨å¼€å‘ä»å…¥é—¨åˆ°ç²¾é€š"
date: 2025-02-05 14:33:59 +0800
description: "æ–‡ç« æµè§ˆé˜…è¯»9.8kæ¬¡ï¼Œç‚¹èµ60æ¬¡ï¼Œé€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ Python ä»åŸºç¡€çš„åŒºå—é“¾ç»“"
keywords: "åŒºå—é“¾å¼€å‘"
categories: ['']
tags: ['å¼€å‘è¯­è¨€', 'åŒºå—é“¾', 'Python']
artid: "145454741"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145454741
    alt: "PythonåŒºå—é“¾åº”ç”¨å¼€å‘ä»å…¥é—¨åˆ°ç²¾é€š"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     PythonåŒºå—é“¾åº”ç”¨å¼€å‘ä»å…¥é—¨åˆ°ç²¾é€š
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <ul>
      <li>
       <strong>
        ğŸ’‚ ä¸ªäººç½‘ç«™:ã€
        <a href="https://haiyong.site/moyu" rel="nofollow">
         æ‘¸é±¼æ¸¸æˆ
        </a>
        ã€‘ã€
        <a href="https://code.haiyong.site" rel="nofollow">
         ç¥çº§ä»£ç èµ„æºç½‘ç«™
        </a>
        ã€‘ã€
        <a href="https://nav.haiyong.site/" rel="nofollow">
         æµ·æ‹¥å¯¼èˆª
        </a>
        ã€‘
       </strong>
      </li>
      <li>
       <strong>
        ğŸ’… æƒ³å¯»æ‰¾å…±åŒå­¦ä¹ äº¤æµï¼Œæ‘¸é±¼åˆ’æ°´çš„å°ä¼™ä¼´ï¼Œè¯·ç‚¹å‡»ã€
        <a href="https://haiyong.site/chat/" rel="nofollow">
         å…¨æ ˆæŠ€æœ¯äº¤æµç¾¤
        </a>
        ã€‘
       </strong>
      </li>
     </ul>
    </blockquote>
    <p>
     åŒºå—é“¾æŠ€æœ¯ä½œä¸ºè¿‘å¹´æ¥æœ€çƒ­é—¨çš„æŠ€æœ¯ä¹‹ä¸€ï¼Œå·²ç»ä¸ä»…ä»…å±€é™äºåŠ å¯†è´§å¸çš„åº”ç”¨ï¼Œå®ƒçš„å»ä¸­å¿ƒåŒ–ã€ä¸å¯ç¯¡æ”¹å’Œé€æ˜æ€§çš„ç‰¹ç‚¹ä½¿å¾—å®ƒåœ¨é‡‘èã€ä¾›åº”é“¾ã€åŒ»ç–—ã€æŠ•ç¥¨ç­‰å„ä¸ªé¢†åŸŸéƒ½å±•ç°å‡ºå·¨å¤§çš„æ½œåŠ›ã€‚åœ¨ä¼—å¤šçš„åŒºå—é“¾å¼€å‘è¯­è¨€ä¸­ï¼ŒPython å› ä¸ºå…¶ç®€æ´æ˜“ç”¨å’Œå¹¿æ³›çš„åº”ç”¨åŸºç¡€ï¼Œæˆä¸ºäº†åŒºå—é“¾åº”ç”¨å¼€å‘çš„çƒ­é—¨é€‰æ‹©ã€‚
    </p>
    <p>
     æœ¬æ–‡å°†å¸¦é¢†å¤§å®¶ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨ Python å¼€å‘åŒºå—é“¾åº”ç”¨ï¼ŒåŒ…æ‹¬åŸºç¡€æ¦‚å¿µã€æ ¸å¿ƒæ¨¡å—çš„å®ç°ä»¥åŠå¦‚ä½•æ„å»ºè‡ªå·±çš„åŒºå—é“¾åº”ç”¨ã€‚
    </p>
    <h3>
     <a id="_8">
     </a>
     ä¸€ã€åŒºå—é“¾åŸºç¡€æ¦‚å¿µ
    </h3>
    <p>
     åœ¨æ·±å…¥åŒºå—é“¾å¼€å‘ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦ç†è§£ä¸€äº›åŒºå—é“¾çš„åŸºæœ¬æ¦‚å¿µï¼š
    </p>
    <h4>
     <a id="1_Block_12">
     </a>
     1. åŒºå—ï¼ˆBlockï¼‰
    </h4>
    <p>
     åŒºå—æ˜¯åŒºå—é“¾çš„åŸºæœ¬å•å…ƒï¼Œæ¯ä¸ªåŒºå—åŒ…å«ä¸€ç»„äº¤æ˜“æ•°æ®ã€‚è¿™äº›äº¤æ˜“æ•°æ®è¢«æ‰“åŒ…åœ¨ä¸€ä¸ªåŒºå—ä¸­ï¼Œå¹¶é€šè¿‡åŠ å¯†ç®—æ³•ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œå€¼ã€‚
    </p>
    <h4>
     <a id="2_Chain_15">
     </a>
     2. é“¾ï¼ˆChainï¼‰
    </h4>
    <p>
     åŒºå—é€šè¿‡æŒ‡å‘å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼å½¢æˆé“¾æ¡ï¼Œè¿™æ ·çš„ç»“æ„ç¡®ä¿äº†åŒºå—é“¾çš„ä¸å¯ç¯¡æ”¹æ€§ã€‚ä»»ä½•ä¿®æ”¹ä¸€ä¸ªåŒºå—å†…å®¹çš„æ“ä½œéƒ½ä¼šæ”¹å˜è¯¥åŒºå—çš„å“ˆå¸Œå€¼ï¼Œä»è€Œå¯¼è‡´æ•´ä¸ªé“¾æ¡çš„æ”¹å˜ï¼Œæå¤§æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚
    </p>
    <h4>
     <a id="3__18">
     </a>
     3. å»ä¸­å¿ƒåŒ–
    </h4>
    <p>
     å»ä¸­å¿ƒåŒ–æ˜¯åŒºå—é“¾çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚åŒºå—é“¾ç½‘ç»œä¸­çš„æ‰€æœ‰å‚ä¸è€…éƒ½å¯ä»¥å¯¹åŒºå—é“¾è¿›è¡ŒéªŒè¯å’Œå­˜å‚¨ï¼Œé¿å…äº†å•ç‚¹æ•…éšœé—®é¢˜ã€‚
    </p>
    <h4>
     <a id="4__21">
     </a>
     4. å…±è¯†æœºåˆ¶
    </h4>
    <p>
     å…±è¯†æœºåˆ¶æ˜¯åŒºå—é“¾ç½‘ç»œä¸­å„ä¸ªèŠ‚ç‚¹å°±åŒºå—æ•°æ®è¾¾æˆä¸€è‡´çš„æœºåˆ¶ã€‚å¸¸è§çš„å…±è¯†æœºåˆ¶åŒ…æ‹¬
     <strong>
      Proof of Workï¼ˆPoWï¼‰
     </strong>
     å’Œ
     <strong>
      Proof of Stakeï¼ˆPoSï¼‰
     </strong>
     ã€‚
    </p>
    <hr/>
    <h3>
     <a id="_26">
     </a>
     äºŒã€ç¯å¢ƒå‡†å¤‡
    </h3>
    <p>
     åœ¨å¼€å§‹ç¼–å†™åŒºå—é“¾åº”ç”¨ä¹‹å‰ï¼Œéœ€è¦ç¡®ä¿å®‰è£…äº† Python åŠç›¸å…³å¼€å‘ç¯å¢ƒã€‚ä½ å¯ä»¥ä½¿ç”¨ Python 3.xï¼Œæ¨èç‰ˆæœ¬ä¸º
     <strong>
      Python 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
     </strong>
     ã€‚
    </p>
    <h4>
     <a id="1__Python_30">
     </a>
     1. å®‰è£… Python
    </h4>
    <p>
     å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… Pythonï¼Œå¯ä»¥ä»å®˜ç½‘ï¼ˆhttps://www.python.org/ï¼‰ä¸‹è½½å¹¶å®‰è£…ã€‚
    </p>
    <h4>
     <a id="2__Flask_API_34">
     </a>
     2. å®‰è£… Flaskï¼ˆç”¨äºå¼€å‘ APIï¼‰
    </h4>
    <p>
     Flask æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Python Web æ¡†æ¶ï¼Œç”¨äºæ„å»º RESTful APIï¼Œæˆ‘ä»¬å°†åœ¨åŒºå—é“¾åº”ç”¨ä¸­ä½¿ç”¨å®ƒæ¥æ­å»ºä¸€ä¸ª Web æœåŠ¡ï¼Œæ¥æ”¶æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚ã€‚
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> Flask
</code></pre>
    <h4>
     <a id="3__42">
     </a>
     3. å®‰è£…å…¶ä»–ä¾èµ–
    </h4>
    <p>
     æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…ä¸€äº›é¢å¤–çš„ä¾èµ–ï¼Œæ¯”å¦‚ç”¨äºåŠ å¯†æ“ä½œçš„åº“ï¼š
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> hashlib requests
</code></pre>
    <hr/>
    <h3>
     <a id="_52">
     </a>
     ä¸‰ã€å®ç°ä¸€ä¸ªç®€å•çš„åŒºå—é“¾
    </h3>
    <p>
     åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„åŒºå—é“¾ã€‚æˆ‘ä»¬çš„åŒºå—é“¾å°†åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š
    </p>
    <ul>
     <li>
      ç”ŸæˆåŒºå—
     </li>
     <li>
      æ·»åŠ äº¤æ˜“åˆ°åŒºå—
     </li>
     <li>
      åˆ›å»ºæ–°åŒºå—
     </li>
     <li>
      æ ¡éªŒåŒºå—é“¾çš„æœ‰æ•ˆæ€§
     </li>
    </ul>
    <h4>
     <a id="1__60">
     </a>
     1. åˆ›å»ºåŒºå—ç±»
    </h4>
    <p>
     æ¯ä¸ªåŒºå—åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š
    </p>
    <ul>
     <li>
      <code>
       index
      </code>
      ï¼šåŒºå—çš„ç´¢å¼•
     </li>
     <li>
      <code>
       timestamp
      </code>
      ï¼šåŒºå—åˆ›å»ºæ—¶é—´
     </li>
     <li>
      <code>
       transactions
      </code>
      ï¼šäº¤æ˜“æ•°æ®
     </li>
     <li>
      <code>
       previous_hash
      </code>
      ï¼šå‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œ
     </li>
     <li>
      <code>
       hash
      </code>
      ï¼šå½“å‰åŒºå—çš„å“ˆå¸Œå€¼
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> json
<span class="token keyword">from</span> time <span class="token keyword">import</span> time

<span class="token keyword">class</span> <span class="token class-name">Block</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> index<span class="token punctuation">,</span> timestamp<span class="token punctuation">,</span> transactions<span class="token punctuation">,</span> previous_hash<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>index <span class="token operator">=</span> index
        self<span class="token punctuation">.</span>timestamp <span class="token operator">=</span> timestamp
        self<span class="token punctuation">.</span>transactions <span class="token operator">=</span> transactions
        self<span class="token punctuation">.</span>previous_hash <span class="token operator">=</span> previous_hash
        self<span class="token punctuation">.</span><span class="token builtin">hash</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>calculate_hash<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">calculate_hash</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        è®¡ç®—åŒºå—çš„å“ˆå¸Œå€¼
        """</span>
        block_string <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__dict__<span class="token punctuation">,</span> sort_keys<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">(</span>block_string<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="2__90">
     </a>
     2. åˆ›å»ºåŒºå—é“¾ç±»
    </h4>
    <p>
     åŒºå—é“¾ç±»è´Ÿè´£åˆ›å»ºåŒºå—é“¾å¹¶æ·»åŠ åŒºå—ã€‚å®ƒè¿˜åŒ…å«ä¸€ä¸ªç®€å•çš„
     <code>
      is_valid
     </code>
     æ–¹æ³•æ¥æ£€æŸ¥åŒºå—é“¾çš„æœ‰æ•ˆæ€§ã€‚
    </p>
    <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Blockchain</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>chain <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>current_transactions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment"># åˆ›å»ºåˆ›ä¸–åŒºå—</span>
        self<span class="token punctuation">.</span>new_block<span class="token punctuation">(</span>previous_hash<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">,</span> proof<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">new_block</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> proof<span class="token punctuation">,</span> previous_hash<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        åˆ›å»ºæ–°åŒºå—å¹¶å°†å…¶æ·»åŠ åˆ°é“¾ä¸­
        :param proof: å·¥ä½œé‡è¯æ˜çš„ç»“æœ
        :param previous_hash: å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œ
        :return: æ–°åŒºå—
        """</span>
        block <span class="token operator">=</span> Block<span class="token punctuation">(</span>
            index<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>chain<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
            timestamp<span class="token operator">=</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            transactions<span class="token operator">=</span>self<span class="token punctuation">.</span>current_transactions<span class="token punctuation">,</span>
            previous_hash<span class="token operator">=</span>previous_hash <span class="token keyword">or</span> self<span class="token punctuation">.</span>chain<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">hash</span>
        <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>current_transactions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>chain<span class="token punctuation">.</span>append<span class="token punctuation">(</span>block<span class="token punctuation">)</span>
        <span class="token keyword">return</span> block
    
    <span class="token keyword">def</span> <span class="token function">new_transaction</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sender<span class="token punctuation">,</span> recipient<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        åˆ›å»ºä¸€ç¬”æ–°çš„äº¤æ˜“
        :param sender: å‘é€è€…
        :param recipient: æ¥æ”¶è€…
        :param amount: äº¤æ˜“é‡‘é¢
        :return: å½“å‰åŒºå—çš„ç´¢å¼•
        """</span>
        self<span class="token punctuation">.</span>current_transactions<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token string">'sender'</span><span class="token punctuation">:</span> sender<span class="token punctuation">,</span>
            <span class="token string">'recipient'</span><span class="token punctuation">:</span> recipient<span class="token punctuation">,</span>
            <span class="token string">'amount'</span><span class="token punctuation">:</span> amount
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>chain<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index <span class="token operator">+</span> <span class="token number">1</span>
    
    <span class="token keyword">def</span> <span class="token function">last_block</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        è¿”å›é“¾ä¸Šçš„æœ€åä¸€ä¸ªåŒºå—
        """</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>chain<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">is_valid</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        æ ¡éªŒåŒºå—é“¾çš„æœ‰æ•ˆæ€§
        """</span>
        last_block <span class="token operator">=</span> self<span class="token punctuation">.</span>chain<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        current_index <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">while</span> current_index <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>chain<span class="token punctuation">)</span><span class="token punctuation">:</span>
            block <span class="token operator">=</span> self<span class="token punctuation">.</span>chain<span class="token punctuation">[</span>current_index<span class="token punctuation">]</span>
            <span class="token keyword">if</span> block<span class="token punctuation">.</span>previous_hash <span class="token operator">!=</span> last_block<span class="token punctuation">.</span><span class="token builtin">hash</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
            <span class="token keyword">if</span> block<span class="token punctuation">.</span><span class="token builtin">hash</span> <span class="token operator">!=</span> block<span class="token punctuation">.</span>calculate_hash<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
            last_block <span class="token operator">=</span> block
            current_index <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
</code></pre>
    <h4>
     <a id="3__157">
     </a>
     3. æµ‹è¯•åŒºå—é“¾
    </h4>
    <p>
     æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„åŒºå—é“¾ï¼Œå¹¶æ·»åŠ ä¸€äº›äº¤æ˜“ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token comment"># åˆ›å»ºä¸€ä¸ªåŒºå—é“¾</span>
blockchain <span class="token operator">=</span> Blockchain<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># æ·»åŠ ä¸€äº›äº¤æ˜“</span>
blockchain<span class="token punctuation">.</span>new_transaction<span class="token punctuation">(</span>sender<span class="token operator">=</span><span class="token string">"Alice"</span><span class="token punctuation">,</span> recipient<span class="token operator">=</span><span class="token string">"Bob"</span><span class="token punctuation">,</span> amount<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
blockchain<span class="token punctuation">.</span>new_transaction<span class="token punctuation">(</span>sender<span class="token operator">=</span><span class="token string">"Bob"</span><span class="token punctuation">,</span> recipient<span class="token operator">=</span><span class="token string">"Charlie"</span><span class="token punctuation">,</span> amount<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>

<span class="token comment"># åˆ›å»ºæ–°åŒºå—</span>
blockchain<span class="token punctuation">.</span>new_block<span class="token punctuation">(</span>proof<span class="token operator">=</span><span class="token number">12345</span><span class="token punctuation">)</span>

<span class="token comment"># æ ¡éªŒåŒºå—é“¾</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"åŒºå—é“¾æœ‰æ•ˆæ€§ï¼š"</span><span class="token punctuation">,</span> blockchain<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># æ‰“å°æ‰€æœ‰åŒºå—</span>
<span class="token keyword">for</span> block <span class="token keyword">in</span> blockchain<span class="token punctuation">.</span>chain<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>block<span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_API_182">
     </a>
     å››ã€å¼€å‘ä¸€ä¸ªåŒºå—é“¾ API
    </h3>
    <p>
     ä¸ºäº†è®©å¤–éƒ¨åº”ç”¨ä¸æˆ‘ä»¬çš„åŒºå—é“¾è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Flask åˆ›å»ºä¸€ä¸ªç®€å•çš„ Web API æ¥æä¾›æ¥å£ã€‚
    </p>
    <h4>
     <a id="1__Flask__186">
     </a>
     1. åˆ›å»º Flask åº”ç”¨
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> jsonify<span class="token punctuation">,</span> request

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºå—é“¾å®ä¾‹</span>
blockchain <span class="token operator">=</span> Blockchain<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/mine'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">mine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    æŒ–æ˜æ–°åŒºå—å¹¶æ·»åŠ åˆ°åŒºå—é“¾ä¸­
    """</span>
    <span class="token comment"># è·å–å·¥ä½œé‡è¯æ˜</span>
    proof <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'proof'</span><span class="token punctuation">)</span>
    previous_hash <span class="token operator">=</span> blockchain<span class="token punctuation">.</span>last_block<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">hash</span>
    block <span class="token operator">=</span> blockchain<span class="token punctuation">.</span>new_block<span class="token punctuation">(</span>proof<span class="token punctuation">,</span> previous_hash<span class="token punctuation">)</span>
    
    response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'æ–°åŒºå—å·²æŒ–æ˜!'</span><span class="token punctuation">,</span>
        <span class="token string">'index'</span><span class="token punctuation">:</span> block<span class="token punctuation">.</span>index<span class="token punctuation">,</span>
        <span class="token string">'transactions'</span><span class="token punctuation">:</span> block<span class="token punctuation">.</span>transactions<span class="token punctuation">,</span>
        <span class="token string">'proof'</span><span class="token punctuation">:</span> block<span class="token punctuation">.</span>proof<span class="token punctuation">,</span>
        <span class="token string">'previous_hash'</span><span class="token punctuation">:</span> block<span class="token punctuation">.</span>previous_hash
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">200</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/transactions/new'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">new_transaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    æ·»åŠ æ–°çš„äº¤æ˜“
    """</span>
    values <span class="token operator">=</span> request<span class="token punctuation">.</span>get_json<span class="token punctuation">(</span><span class="token punctuation">)</span>

    required <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'sender'</span><span class="token punctuation">,</span> <span class="token string">'recipient'</span><span class="token punctuation">,</span> <span class="token string">'amount'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">all</span><span class="token punctuation">(</span>k <span class="token keyword">in</span> values <span class="token keyword">for</span> k <span class="token keyword">in</span> required<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'ç¼ºå°‘å¿…è¦çš„äº¤æ˜“ä¿¡æ¯'</span><span class="token punctuation">,</span> <span class="token number">400</span>

    index <span class="token operator">=</span> blockchain<span class="token punctuation">.</span>new_transaction<span class="token punctuation">(</span>values<span class="token punctuation">[</span><span class="token string">'sender'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> values<span class="token punctuation">[</span><span class="token string">'recipient'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> values<span class="token punctuation">[</span><span class="token string">'amount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f'äº¤æ˜“å°†è¢«æ·»åŠ åˆ°åŒºå— </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>index<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">201</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/chain'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">full_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    è¿”å›å®Œæ•´çš„åŒºå—é“¾
    """</span>
    chain <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> block <span class="token keyword">in</span> blockchain<span class="token punctuation">.</span>chain<span class="token punctuation">:</span>
        chain<span class="token punctuation">.</span>append<span class="token punctuation">(</span>block<span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span>

    response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'chain'</span><span class="token punctuation">:</span> chain<span class="token punctuation">,</span>
        <span class="token string">'length'</span><span class="token punctuation">:</span> <span class="token builtin">len</span><span class="token punctuation">(</span>chain<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">200</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="2__Flask__250">
     </a>
     2. è¿è¡Œ Flask åº”ç”¨
    </h4>
    <p>
     è¿è¡Œä¸Šè¿° Flask åº”ç”¨åï¼Œä½ å¯ä»¥é€šè¿‡
     <code>
      http://127.0.0.1:5000/
     </code>
     è®¿é—® APIã€‚ä¾‹å¦‚ï¼Œè®¿é—®
     <code>
      /chain
     </code>
     è·¯å¾„æŸ¥çœ‹åŒºå—é“¾ï¼Œè®¿é—®
     <code>
      /transactions/new
     </code>
     è·¯å¾„æäº¤æ–°çš„äº¤æ˜“ã€‚
    </p>
    <hr/>
    <h3>
     <a id="_256">
     </a>
     äº”ã€æ€»ç»“
    </h3>
    <p>
     é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ Python å¼€å‘ä¸€ä¸ªç®€å•çš„åŒºå—é“¾åº”ç”¨ã€‚ä»åŸºç¡€çš„åŒºå—é“¾ç»“æ„åˆ° Flask API å¼€å‘ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥åœ°å®ç°äº†ä¸€ä¸ªå¯ç”¨çš„åŒºå—é“¾ã€‚ä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šç»§ç»­æ‰©å±•ï¼Œå¢åŠ æ›´å¤šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ”¹è¿›å…±è¯†ç®—æ³•ã€æ·»åŠ æ™ºèƒ½åˆçº¦ã€æˆ–ä¸å‰ç«¯è¿›è¡Œäº¤äº’ç­‰ã€‚
    </p>
    <p>
     åŒºå—é“¾ä½œä¸ºä¸€ç§é¢ è¦†æ€§æŠ€æœ¯ï¼Œæœªæ¥åœ¨å„ä¸ªè¡Œä¸šä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼ŒæŒæ¡å®ƒçš„å¼€å‘æŠ€èƒ½å°†ä¸ºä½ å¼€è¾Ÿæ–°çš„èŒä¸šæœºä¼šã€‚å¦‚æœä½ å¯¹åŒºå—é“¾æŠ€æœ¯æ„Ÿå…´è¶£ï¼Œç»§ç»­æ·±å…¥å­¦ä¹ å’Œå®è·µï¼Œæœªæ¥å¯èƒ½ä¼šæœ‰æ‰€çªç ´
    </p>
    <h3>
     <a id="__263">
     </a>
     â­ï¸ å¥½ä¹¦æ¨è
    </h3>
    <p>
     <b>
      ã€ŠPythonåŒºå—é“¾åº”ç”¨å¼€å‘ä»å…¥é—¨åˆ°ç²¾é€šã€‹
     </b>
    </p>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/744d5a93870941e4b878f2bed92ea48f.jpeg" width="300"/>
    </p>
    <p>
     ã€å†…å®¹ç®€ä»‹ã€‘
    </p>
    <p>
     æœ¬ä¹¦å…¨é¢ç³»ç»Ÿåœ°ä»‹ç»äº†Pythonè¯­è¨€åŒºå—é“¾åº”ç”¨å·¥ç¨‹å¸ˆæ‰€éœ€çš„åŸºç¡€çŸ¥è¯†å’Œç›¸å…³æŠ€æœ¯ï¼Œä¸»è¦åˆ†ä¸ºPythonåŸºç¡€ç¯‡ã€åŒºå—é“¾æŠ€æœ¯ç¯‡å’ŒåŒºå—é“¾å¼€å‘ç¯‡ä¸‰éƒ¨åˆ†ã€‚
     <br/>
     å…¶ä¸­ç¬¬1-3ç« ä¸ºPythonåŸºç¡€ç¯‡ï¼Œä»‹ç»Pythonè¯­æ³•åŸºç¡€ã€Pythonçš„è¯­æ³•ç‰¹è‰²ã€Pythonä¸æ•°æ®åº“æ“ä½œç­‰å†…å®¹ï¼›ç¬¬4-6ç« ä¸ºåŒºå—é“¾æŠ€æœ¯ç¯‡ï¼Œä»‹ç»åˆå§‹åŒºå—é“¾ã€åŒºå—é“¾çš„æŠ€æœ¯åŸç†ã€åŒºå—é“¾æŠ€æœ¯çš„å‘å±•è¶‹åŠ¿ï¼›ç¬¬7-10ç« ä¸ºåŒºå—é“¾å¼€å‘ç¯‡ï¼Œä»‹ç»Solidityæ™ºèƒ½åˆçº¦å¼€å‘çš„å…¥é—¨å’Œè¿›é˜¶ã€Pythonè¯­è¨€ç¦»çº¿é’±åŒ…å¼€å‘ã€é€šè¿‡Pythonå’ŒSolidityå¼€å‘ä¸€ä¸ªâ€œæ‚¬èµä»»åŠ¡ç³»ç»Ÿâ€ï¼Œé¡¹ç›®ä¸­å°†ä½¿ç”¨FISCO BCOSè”ç›Ÿé“¾ä½œä¸ºåŸºç¡€ï¼Œç»“åˆDjangoæ¡†æ¶ï¼Œå¹¶åº”ç”¨Python-SDKä¸åŒºå—é“¾äº¤äº’å®Œæˆæ•°æ®çš„è¯»å†™æ“ä½œï¼Œå®Œæˆä¸€ä¸ªåŒºå—é“¾çš„Webé¡¹ç›®ã€‚
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34343237333432392f:61727469636c652f64657461696c732f313435343534373431" class_="artid" style="display:none">
 </p>
</div>


