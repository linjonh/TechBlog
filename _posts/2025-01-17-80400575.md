---
layout: post
title: "接口测试指导方案"
date: 2025-01-17 14:28:25 +0800
description: "接口测试指导方案1.         测试的重点是要检查数据的交换，"
keywords: "接口测试方案"
categories: ['接口测试']
tags: ['无标签']
artid: "80400575"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=80400575
    alt: "接口测试指导方案"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     接口测试指导方案
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p align="center">
     <strong>
      接口测试指导方案
     </strong>
    </p>
    <h2>
     1.         接口测试简介
    </h2>
    <p>
     <span style="color:#333333;background:#FFFFFF;">
      接口测试是测试系统组件间接口的一种测试。接口测试主要用于检测外部系统与系统之间以及内部各个子系统之间的交互点。测试的重点是要检查数据的交换，传递和控制管理过程，以及系统间的相互逻辑依赖关系等。
     </span>
    </p>
    <p>
    </p>
    <h2>
     2.        接口测试流程
    </h2>
    <p align="center">
    </p>
    <p>
     接口测试的流程和功能测试流程类似，依据的对象是需求说明书和接口需求，接口测试流程如下：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/14a489facb8e63c911a521e0ab5d5557.png">
      <br/>
     </img>
    </p>
    <p align="center">
    </p>
    <h2>
     3.         接口测试范围
    </h2>
    <p>
     1)     业务功能（包括正常、异常场景是否实现）
    </p>
    <p>
     2)     业务规则（覆盖度是否全面）
    </p>
    <p>
     3)     参数验证（边界、业务规则是否达到要求）
    </p>
    <p>
     4)     异常场景（重复提交、并发提交、事务中断、多机环境、大数据量测试）
    </p>
    <p>
     5)     性能测试（响应时间、吞吐量、并发数、资源要求）
    </p>
    <p>
     6)     安全测试（权限验证、SQL注入等）
    </p>
    <p align="center">
    </p>
    <h2>
     4.         接口测试重点
    </h2>
    <p>
     （1）
     <strong>
      检查接口的功能
     </strong>
     ：检查接口的功能有没有实现，也就是请求会不会成功，如果不成功会不会返回错误代号（或错误信息）
    </p>
    <p>
     （2）
     <strong>
      检查接口返回的数据
     </strong>
     ：检查接口返回的数据、数据格式、数据类型是否与预期一致（正向且传递的参数正常）；
    </p>
    <p>
     （3）
     <strong>
      检查接口的容错性
     </strong>
     ：接口是否可以正常处理（假如传递的参数足够大或者为负、空值时）
    </p>
    <p>
     （4）
     <strong>
      检查接口的性能
     </strong>
     ：http请求接口大多与后端执行的SQL语句性能、算法等比较相关。
    </p>
    <p>
     （5）
     <strong>
      检查接口的安全性
     </strong>
     ：外部调用的接口尤为重要。
    </p>
    <p>
    </p>
    <h2>
     5.         接口测试需求分析
    </h2>
    <p>
     首先根据接口设计的技术架构方案，了解清楚被测接口对应的公共入参、入参、出参及返回数据的Json结构规范，根据测试场景进行测试。
    </p>
    <p>
     1)     理解接口参数，熟悉接口参数的输入要求、输入值范围、必填项等；
    </p>
    <p>
     2)     理解接口输出，熟悉返回json的结构构成、返回值类别、返回值范围、返回data的不同类型等。
    </p>
    <p>
     3)     理解接口的逻辑、接口的业务关联，熟悉技术方案中的接口相互关联、依赖的关系，接口与接口之间的数据传递等。
    </p>
    <p>
     4)     寻找测试点，根据输入(参数名、取值范围)、输出(参数名、返回值范围)、关联关系，进行测试点分析；
    </p>
    <p>
    </p>
    <h2>
     6.         接口测试用例设计
    </h2>
    <p>
     接口测试的主要测试对象是接口，但是随着系统复杂度越来越高，接口越来越多，完全覆盖所有接口是很难的一件事情，并且实际过程中任意内部接口的变动都可能导致我们的测试用例的不可用。
    </p>
    <p>
     <br/>
    </p>
    <h3>
     1）   接口用例设计优先级
    </h3>
    <p>
     n
     <strong>
      优先级--&gt;针对所有接口
     </strong>
    </p>
    <p>
     a)     暴露在外面的接口，因为通常该接口会给第三方调用；
    </p>
    <p>
     b)     供系统内部调用的核心功能接口；
    </p>
    <p>
     c)     供系统内部调用非核心功能接口；
    </p>
    <p>
     n
     <strong>
      优先级--&gt;针对单个接口
     </strong>
    </p>
    <p>
     a)     正向用例优先测试，逆向（异常）用例次之(通常情况，非绝对)；
    </p>
    <p>
     b)     是否满足前提条件 &gt; 是否携带默认参值参数 &gt; 参数是否必填 &gt; 参数之间是否存在关联 &gt; 参数数据类型限制 &gt; 参数数据类型自身的数据范围值限制
    </p>
    <h3>
     2）     接口用例设计方法
    </h3>
    <p>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6b813d5354ccacc7c46b7368aa67be75.png"/>
    </p>
    <p>
     具体可参考《接口测试用例设计》
    </p>
    <p>
    </p>
    <p>
    </p>
    <h3>
     3）   测试用例编写注意事项
    </h3>
    <table border="0" cellpadding="0" cellspacing="0" width="583">
     <tbody>
      <tr>
       <td>
        <p align="left">
         <span style="color:#000000;">
          是否满足前提条件
         </span>
        </p>
       </td>
       <td>
        <p align="left">
         <span style="color:#000000;">
          有些接口需要满足前置条件，才可成功获取数据。常见的，需要登陆Token
         </span>
         。
         <br/>
         逆向用例：针对是否满足前置条件(假设为n个条件)，设计0~n条用例
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         <span style="color:#000000;">
          是否携带默认值参数
         </span>
        </p>
       </td>
       <td>
        <p align="left">
         <span style="color:#000000;">
          正向用例：
          <br/>
         </span>
         带默认值的参数都不填写、不传参，必填参数都填写正确且存在的“常规”值，其它不填写，设计1条用例；
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         <span style="color:#000000;">
          业务规则、功能需求
         </span>
        </p>
       </td>
       <td>
        <p align="left">
         <span style="color:#000000;">
          这里根据实际情况，结合接口参数说明，可能需要设计n
         </span>
         条正向用例和逆向用例
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         <span style="color:#000000;">
          参数是否必填
         </span>
        </p>
       </td>
       <td>
        <p align="left">
         <span style="color:#000000;">
          逆向用例：针对每个必填参数，都设计1
         </span>
         条参数值为空的逆向用例
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         <span style="color:#000000;">
          参数之间是否存在关联
         </span>
        </p>
       </td>
       <td>
        <p align="left">
         <span style="color:#000000;">
          有些参数彼此之间存在相互制约的关系
          <br/>
         </span>
         逆向用例：根据实际情况，可能需要设计0~n条用例
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         <span style="color:#000000;">
          参数数据类型限制
         </span>
        </p>
       </td>
       <td>
        <p align="left">
         <span style="color:#000000;">
          逆向用例：针对每个参数都设计1
         </span>
         条参数值类型不符的逆向用例
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         <span style="color:#000000;">
          参数数据类型自身的数据范围值限制
         </span>
        </p>
       </td>
       <td>
        <p align="left">
         <span style="color:#000000;">
          正向用例：针对所有参数，设计1
         </span>
         条每个参数的参数值在数据范围内为最大值的正向用例
         <br/>
         逆向用例：
         <br/>
         针对每个参数(假设n个)，设计n条每个参数的参数值都超出数据范围最大值的逆向用例
         <br/>
         针对每个参数(假设n个)，设计n条每个参数的参数值都小于数据范围最小值的逆向用例
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p>
     进行测试执行编写时，有如下的原则：
    </p>
    <p>
     1.不同的接口参数覆盖不同的业务场景；
    </p>
    <p>
     2.在后台构造合适的数据来满足接口的测试用例；
    </p>
    <p>
     3.根据接口的返回值，断言其是否返回期望结果，并查看数据库验证；
    </p>
    <p>
     4.测试用例涉及多个步骤的，应对涉及的步骤都验证
    </p>
    <p>
     5.删除测试过程中产生的结果，确保每个用例执行前都是一个清洁的环境
    </p>
    <p>
    </p>
    <h2>
     7.         接口测试用例模板
    </h2>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/7fedad7764ec47b11c0ff864698c3fab.png"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p align="left">
    </p>
    <p>
    </p>
    <h2>
     8.         接口数据准备
    </h2>
    <p align="center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/01a166c5660a2dcdc2075b8e370e43df.png"/>
    </p>
    <h2>
     9.         接口测试工具
    </h2>
    <p>
     1)
     <strong>
      接口测试工具选择
     </strong>
    </p>
    <p>
     n
     <strong>
      接口工具
     </strong>
     ：Postman/Jmeter/SouapUI/python，单个接口测试时使用Postman，多个接口测试时可以使用Jmeter，或者使用python脚本；
    </p>
    <p>
     ü  Jmeter：可以测试各种类型的接口，不支持的也可以通过网上或自己编写的插件进行扩展。
    </p>
    <p>
     ü  postman：功能上更简单，组织方式也更轻量级，它主要针对的就是单个的HTTP请求。
    </p>
    <p align="center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/33ed16288c86be77dadb3c2fdcf8f547.png"/>
    </p>
    <p align="center">
    </p>
    <p>
     n
     <strong>
      抓包工具：fiddler
     </strong>
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <p>
     <strong>
      2)     使用Postman测试单个接口时如下,具体使用请参考《使用Postman测试接口》
     </strong>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/94c3c642eed75cf9a96cdf4eaf50624c.png">
      <strong>
      </strong>
     </img>
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <p>
     <strong>
      3)     使用JMeter测试接口时接口组织形式规范如下，具体使用请参考《使用Jmeter尽测试接口》
     </strong>
    </p>
    <p align="center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/55368b91597022037c4e2fa96e9adb97.png">
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/4293fecb0f5e63643a88b252cf92a958.png">
       <strong>
       </strong>
      </img>
     </img>
    </p>
    <p align="center">
    </p>
    <h2>
     10.     接口测试原则
    </h2>
    <p>
     （1）    基础配置，如域名、环境配置等，单出文件配置，方便不同环境测试、脚本维护
    </p>
    <p>
     （2）    明确接口实现什么样的功能，实际需要什么样的功能，是否一致
    </p>
    <p>
     （3）    接口测试数据太多，用该数据驱动模式更有层次，且易于维护
    </p>
    <p>
     （4）    要在众多测试用例中选出冒烟测试用例及可用于性能测试的用例
    </p>
    <p>
     （5）    先单接口测试，在多接口业务测试
    </p>
    <p>
     （6）    测试完成以后，需要清洗脏数据
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     11.     接口测试执行实例
    </h2>
    <h3>
     11.1  使用Jmeter测试接口实例
    </h3>
    <p>
     n
     <strong>
      接口测试环境准备
     </strong>
    </p>
    <p align="left">
     ü  Jdk1.8或以上：http://www.oracle.com/technetwork/java/javase/downloads/index.html
    </p>
    <p align="left">
     ü  Jmeter下载址址：http://jmeter.apache.org/download_jmeter.cgi
    </p>
    <p align="left">
     ü  插件的下载安装地址：
     <a href="http://www.jmeter-plugins.org/" rel="nofollow">
      http://www.jmeter-plugins.org/
     </a>
    </p>
    <p align="left">
    </p>
    <p>
     n
     <strong>
      接口测试过程
     </strong>
    </p>
    <h4>
     1)     新增一个测试计划
    </h4>
    <p>
     下载好Jmeter后，双击bin目录下的jmeter.bat文件
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/2d75912ecf745f005232d58bbee9d11f.png"/>
     <br/>
    </p>
    <p>
    </p>
    <h4>
     2)     　添加线程组
    </h4>
    <p>
     在“测试计划”上点击鼠标右键--&gt;添加--&gt;threads(Users)--&gt;线程组，添加测试场景设置组件，接口测试中一般设置为1个“线程数”，根据测试数据的个数设定“循环次数”。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/2c18da16eac9a0e3c700b4780303024b.png"/>
    </p>
    <p>
    </p>
    <h4>
     3)     添加“Http请求默认值”
    </h4>
    <p>
     在上步的线程组上右键添加--&gt;配置元件--&gt;HTTP请求默认值。
    </p>
    <p style="background:#FFFFFF;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/cfb834b40853343601115596603de110.png"/>
    </p>
    <p style="background:#FFFFFF;">
     <span style="color:#000000;">
      当所有的接口测试的访问域名和端口都一样时，可以使用该元件，一旦服务器地址变更，只需要修改请求默认值即可。
     </span>
    </p>
    <p style="background:#FFFFFF;">
     <span style="color:#000000;">
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/61546b88b4aa2c2436a0cd3f3e936e12.png"/>
     </span>
    </p>
    <p>
    </p>
    <h4>
     4)     在“线程组”里添加“HTTP 请求”的Sampler
    </h4>
    <p>
     在“线程组”右键--&gt;添加--&gt;samlper--&gt;“HTTP 请求”
    </p>
    <p>
     在HTTP请求设置页面，录入被测接口的详细信息，包括请求路径，对应的请求方法，以及随请求一起发送的参数列表，配置如下：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/5fd2f4133e74b1ded513ce031478ddb0.png"/>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/b470d73c4dd90689d1d62648e7c9bc06.png"/>
    </p>
    <p>
    </p>
    <p>
     注：由于Jmeter请求线程组内的请求时从第一个开始执行，所以我们将需要最先执行的请求放在前面
    </p>
    <p>
    </p>
    <h4>
     5)     添加断言
    </h4>
    <p>
     在被测接口对应的“HTTP 请求”上，添加“响应断言”。右键点击HTTP请求“添加”–&gt;“断言”–&gt;“响应断言”
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/a7822345968a479ac4da92cc1c527695.png"/>
    </p>
    <p>
    </p>
    <p>
     <span style="color:#4F4F4F;background:#EEEEEE;">
      在设置页面上添加对相应结果的正则表达式存在性判断即可：
     </span>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/af4e2a089ec1eddf00e00587e478c947.png"/>
    </p>
    <p>
    </p>
    <p>
     要测试的响应字段：响应文本、Document(text)、URL样本、响应信息、Response Headers、Lgnore Staus等选项。虽然接口返回的是Json格式的数据，但对于Jmeter来说返回数据为文本，所以，这里可以勾选“响应文本”
    </p>
    <p>
    </p>
    <p>
     模式匹配规则：包括、匹配、Equals、Substring。这里只需要验证返回数据中是否包含主要的关键字，所以，这里勾选“包括”。
    </p>
    <p>
    </p>
    <p>
     要测试的模式：其实就是断言的数据。点击“添加”按钮，输入要断言的数据。
    </p>
    <p>
    </p>
    <h4>
     6)     添加监听器（测试报告配置）
    </h4>
    <p>
     在“线程组”右键--&gt;添加--&gt;监听器-&gt;查看结果树、用表格查看结果、聚合报告三种结果的报告展示
    </p>
    <p>
     点击运行后，即可看到运行结果，结果如下：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/e5f91f8e841270ec8a2c8c45742a69f8.png" style="margin-bottom:0px;"/>
    </p>
    <p>
     运行结果查看：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/22c42849878de4660158ba84e63660e9.png"/>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/9944e17e48d6360b3d41f01a3cb87f19.png"/>
    </p>
    <p>
    </p>
    <p>
     使用聚合报告查看：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/b8b409243827d61863a2201b243c4467.png"/>
    </p>
    <p>
    </p>
    <p>
     <span style="color:#00B0F0;background:#FFFFFF;">
      上述步骤完成了一个简单测试案例的创建，复杂测试案例均在此基础上扩展完成。使用
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      Jmeter
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      工具开发的接口测试案例，一个子系统建议放在同一个
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      “
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      测试计划
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      ”
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      中，流程测试可以通过
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      “
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      线程组
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      ”
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      来区分，这样也便于设定不同的测试数据个数。比较独立的接口，可以统一放在一个线程组内，顺序完成测试。
     </span>
    </p>
    <p>
     <span style="color:#00B0F0;background:#FFFFFF;">
      流程性接口的测试：如果要测试的接口可以组成一个流程，只需要顺序添加多个“
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      HTTP
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      请求
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      ”
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      的
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      Sampler
     </span>
     <span style="color:#00B0F0;background:#FFFFFF;">
      ，各请求之间可以提取需要在上下文传递的数据作为参数，以保证流程中数据的一致性。
     </span>
    </p>
    <p>
    </p>
    <h2>
     <span style="background:#FFFF00;">
      12.
     </span>
     <span style="background:#FFFF00;">
      接口测试结果报告（待定）
     </span>
    </h2>
    <p>
    </p>
    <h2>
     13.     接口测试中常见问题
    </h2>
    <p>
     接口测试经常遇到如下的bug和问题：
    </p>
    <p>
     （1）    传入参数处理不当，导致程序crash;
    </p>
    <p>
     （2）    类型溢出，导致数据读出和写入不一致；
    </p>
    <p>
     （3）    因对象权限为进行校验，可以访问其他用户敏感信息；
    </p>
    <p>
     （4）    状态处理不当，导致逻辑出现错乱；
    </p>
    <p>
     （5）    逻辑校验不完善，可利用漏洞获取非正当利益等；
    </p>
    <p>
    </p>
    <p align="left">
    </p>
    <h2>
     14.     接口自动化适用场景及持续集成
    </h2>
    <p>
     接口自动化框架：Jmeter+Jenkins
    </p>
    <p>
     目前设计的自动化接口测试案例有两个运行场景：
    </p>
    <p>
     1) 测试前置、开发自测：一个新的自动化接口测试案例开发完成后，直接发给接口对应的开发，安排在开发本地环境执行，一旦开发确认完成接口开发，就开始执行接口测试案例，基本上可以实时拿到测试结果，方便开发快速做出判断。【开发本地运行的方式就是打开JMeter工具，导入JMX文件，开始执行可。】
    </p>
    <p>
     2) 回归测试：开发本地测试通过后，或整个需求手工测试通过后，把自动化的接口测试案例做分类整理，挑选出需要纳入到回归测试中的案例，在持续集成环境重新准备测试数据，并把案例纳入到持续集成的job中来，这些用于回归的接口测试案例需要配置到持续集成平台自动运行。
    </p>
    <p>
    </p>
    <p>
     对接口测试而言，持续集成自动化是核心内容，通过自动化的手段才能有效降低成本，提高接口测试的价值。如果使用LR、JMeter、SoapUI工具做自动化测试，工具本身支持命令行模式运行，可以接合Jenkins 等自动化平台，实现项目版本更新后的自动化回归测试
    </p>
    <p>
     关于持续自动化回归测试的建议：
    </p>
    <p>
     1、接口脚本开发时要注意参数的取值的可用性，不因为时间或数据状态的变化引起脚本不能正常运行，降低脚本维护成本.
    </p>
    <p>
     2、接口回归功能的覆盖度控制，需要根据脚本的实际功能和重要性判断自动化回归覆盖度，回归内容越多脚本维护成本越高，一般应用接口不建议全功能覆盖（毕竟接口有变化会做详细测试，如果没修改其它变更可能对其产生的影响一般不会影响其逻辑判断）
    </p>
    <p>
     3、接口脚本需要一定的自动化校验能力，除请求http状态的判断外，还需要对核心内容的正常性做判断（判断内容可与数据库内容匹配等方式，不建议用写死的内容）。
    </p>
    <p>
     4、持续性能测试，还需要做好相关的监控、性能指标的分析自动化，减少人工操作。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <br/>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f75303131333931383339:2f61727469636c652f64657461696c732f3830343030353735" class_="artid" style="display:none">
 </p>
</div>


