---
layout: post
title: "Android微信终端开发工具的新手使用教程"
date: 2023-05-31 18:16:03 +0800
description: "1.申请你的AppID请到 开发者应用登记页面 进行登记，登记并选择移动应用进行设置"
keywords: "微信开发者工具怎么选择系统"
categories: ['Android']
tags: ['终端', '微信', '开发工具', 'Android', 'Android']
artid: "12656581"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=12656581
    alt: "Android微信终端开发工具的新手使用教程"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Android微信终端开发工具的新手使用教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
     <h5 style="font-size:20px; font-style:normal; font-weight:400; color:#000000">
      1.申请你的AppID
     </h5>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      请到
      <a href="http://open.weixin.qq.com/app/list/?lang=zh_CN" rel="nofollow noopener noreferrer" style="font-size:14px; font-style:normal; font-weight:400; color:#636B89" target="_blank">
       开发者应用登记页面
      </a>
      进行登记，登记并选择移动应用进行设置后，将该应用提交审核，只有审核通过的应用才能进行开发。
     </p>
    </div>
    <div style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
     <h5 style="font-size:20px; font-style:normal; font-weight:400; color:#000000">
      2.下载微信终端开发工具包
     </h5>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      开发工具包主要包含3部分内容：（其中，只有libammsdk.jar是必须的）
     </p>
     <ul style="list-style:disc outside none">
      <li style="list-style:disc outside none">
       libammsdk.jar（每个第三方应用必须要导入该sdk库，用于实现与微信的通信）
      </li>
      <li style="list-style:disc outside none">
       API文档（供开发者查阅使用）
      </li>
      <li style="list-style:disc outside none">
       界面小工具源码（封装了界面表现的工具类，以及一些界面风格）
      </li>
     </ul>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      下载：
      <a href="http://open.weixin.qq.com/download/sdk/wechat_sdk_android.zip" rel="nofollow noopener noreferrer" style="font-size:14px; font-style:normal; font-weight:400; color:#636B89" target="_blank">
       Android平台开发工具包
      </a>
     </p>
    </div>
    <div style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
     <h5 style="font-size:20px; font-style:normal; font-weight:400; color:#000000">
      3.搭建开发环境
     </h5>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      [1] 在Eclipse中建立你的工程。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      [2] 在工程中新建一个libs目录，将开发工具包中libs目录下的libammsdk.jar复制到该目录中（如下图所示，建立了一个名为SDK_Sample 的工程，并把jar包复制到libs目录下）。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/516/4F913A3D4FDB47AA94F1E20EA307CFDF" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      [3] 右键单击工程，选择Build Path中的Configure Build Path...，选中Libraries这个tab，并通过Add Jars...导入工程libs目录下的libammsdk.jar文件。（如下图所示）。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/510/666347408981406CBF97A5CAD1760515" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      在你需要使用微信终端API的文件中导入相应的类。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; font-family:Courier New; color:#000000">
      import com.tencent.mm.sdk.openapi.WXTextObject;
     </p>
    </div>
    <div style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
     <h5 style="font-size:20px; font-style:normal; font-weight:400; color:#000000">
      4.在代码中使用开发工具包
     </h5>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      [1] 注册到微信
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      要使你的程序启动后微信终端能响应你的程序，必须在代码中向微信终端注册你的id。（如下图所示，可以在程序入口Activity的onCreate回调函数处，或其他合适的地方将你的应用id注册到微信。注册函数示例如下图所示。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/511/4A90A8A16EDF494ABE8711D2DE73847F" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      [2] 发送请求或响应到微信
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      现在，你的程序要发送请求或发送响应到微信终端，可以通过IWXAPI的
      <span style="font-family:Courier New; font-size:14px; color:#000000; font-style:normal; font-weight:400">
       sendReq
      </span>
      和
      <span style="font-family:Courier New; font-size:14px; color:#000000; font-style:normal; font-weight:400">
       sendResp
      </span>
      两个方法来实现。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; font-family:Courier New; color:#000000">
      boolean sendReq(BaseReq req);
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      sendReq是第三方app主动发送消息给微信，发送完成之后会切回到第三方app界面。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; font-family:Courier New; color:#000000">
      boolean sendResp(BaseResp resp);
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      sendResp是微信向第三方app请求数据，第三方app回应数据之后会切回到微信界面。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      sendReq的实现示例，如下图所示：
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/512/16249306C4404AECB1DE70A2B2458853" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <div style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
       需要注意的是，SendMessageToWX.Req的scene成员，如果scene填WXSceneSession，那么消息会发送至微信的会话内。如果scene填WXSceneTimeline（微信4.2以上支持，如果需要检查微信版本支持API的情况， 可调用
       <a href="http://open.weixin.qq.com/document/sdk/android/?lang=zh_CN" rel="nofollow noopener noreferrer" style="font-size:14px; font-style:normal; font-weight:400; color:#636B89" target="_blank">
        IWXAPI的getWXAppSupportAPI方法
       </a>
       ,0x21020001及以上支持发送朋友圈），那么消息会发送至朋友圈。scene默认值为WXSceneSession。
      </p>
     </div>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      sendResp的实现与SendReq类似，如下图所示：
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/513/BFCB46578AA848DA9131C32D36EC14C4" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      具体要发送的内容由第三方app开发者定义，具体可参考微信开发工具包中的SDK Sample Demo源码。
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      [3] 接收微信的请求及返回值
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      如果你的程序需要接收微信发送的请求，或者接收发送到微信请求的响应结果，需要下面3步操作：
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      a. 在你的包名相应目录下新建一个wxapi目录，并在该wxapi目录下新增一个WXEntryActivity类，该类继承自Activity
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      （例如应用程序的包名为net.sourceforge.simcpux，则新添加的类如下图所示）
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/517/42F372669B334D5F98F6D95BA2AEA69B" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      并在manifest文件里面加上exported属性，设置为true，例如：
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/514/D135107720FE4A72A4EE8AFBCB300198" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      b. 实现IWXAPIEventHandler接口，微信发送的请求将回调到onReq方法，发送到微信请求的响应结果将回调到onResp方法
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      c. 在WXEntryActivity中将接收到的intent及实现了IWXAPIEventHandler接口的对象传递给IWXAPI接口的handleIntent方法，示例如下图：
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <img alt="" src="http://note.youdao.com/yws/res/515/100B44A200F1448397D6A9ECECC9219D" style="font-size:14px; font-style:normal; font-weight:400; color:#000000"/>
     </p>
     <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      当微信发送请求到你的应用，将通过IWXAPIEventHandler接口的onReq方法进行回调，类似的，应用请求微信的响应结果将通过onResp回调。
     </p>
    </div>
    <div style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
     <div style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
      <h5 style="font-size:20px; font-style:normal; font-weight:400; color:#000000">
       注意
      </h5>
      <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
       如果需要混淆代码，为了保证sdk的正常使用，需要在proguard.cfg加上下面两行配置：
      </p>
      <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
       -keep class com.tencent.mm.sdk.openapi.WXMediaMessage {*;}
      </p>
      <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
       -keep class com.tencent.mm.sdk.openapi.** implements com.tencent.mm.sdk.openapi.WXMediaMessage$IMediaObject {*;}
      </p>
     </div>
    </div>
    <p style="font-size:14px; font-style:normal; font-weight:400; color:#000000">
     至此，你已经能使用微信Android开发工具包的API内容了。如果想更详细了解每个API函数的用法，请查阅
     <a href="http://open.weixin.qq.com/document/sdk/android/?lang=zh_CN" rel="nofollow noopener noreferrer" style="font-size:14px; font-style:normal; font-weight:400; color:#636B89" target="_blank">
      Android 平台参考手册
     </a>
     或自行下载阅读微信SDK Sample Demo源码。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6c6a77343938303636303039:2f61727469636c652f64657461696c732f3132363536353831" class_="artid" style="display:none">
 </p>
</div>


