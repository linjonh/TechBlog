---
layout: post
title: "教你用JMeter做接口测试的几个简单实例"
date: 2023-05-15 20:34:37 +0800
description: "这次小项目是基于HTTP协议的接口，通过JMeter来完成一次基本的接口测试，完整复习一下JMete"
keywords: "jmeter 例子"
categories: ['接口测试']
tags: ['自动化测试', '测试工具', '压力测试', 'Json', 'Jmeter']
artid: "130692122"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=130692122
    alt: "教你用JMeter做接口测试的几个简单实例"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     教你用JMeter做接口测试的几个简单实例
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p id="main-toc">
     <strong>
      目录
     </strong>
    </p>
    <p id="-toc" style="margin-left:40px;">
    </p>
    <p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:40px;">
     <a href="#%E5%89%8D%E8%A8%80" rel="nofollow">
      前言
     </a>
    </p>
    <p id="1%E3%80%81%E7%99%BB%E5%BD%95%EF%BC%88POST%EF%BC%89-toc" style="margin-left:40px;">
     <a href="#1%E3%80%81%E7%99%BB%E5%BD%95%EF%BC%88POST%EF%BC%89" rel="nofollow">
      1、登录（POST）
     </a>
    </p>
    <p id="page_title-toc" style="margin-left:80px;">
     <a href="#page_title" rel="nofollow">
      登录
     </a>
    </p>
    <p id="2%E3%80%81%E8%8E%B7%E5%8F%96%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88GET%EF%BC%89-toc" style="margin-left:40px;">
     <a href="#2%E3%80%81%E8%8E%B7%E5%8F%96%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88GET%EF%BC%89" rel="nofollow">
      2、获取学生信息（GET）
     </a>
    </p>
    <p id="page_title-toc" style="margin-left:80px;">
     <a href="#page_title" rel="nofollow">
      获取学生信息
     </a>
    </p>
    <p id="3%E3%80%81%E6%B7%BB%E5%8A%A0%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88POST%EF%BC%8CJSON%EF%BC%89-toc" style="margin-left:40px;">
     <a href="#3%E3%80%81%E6%B7%BB%E5%8A%A0%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88POST%EF%BC%8CJSON%EF%BC%89" rel="nofollow">
      3、添加学生信息（POST，JSON）
     </a>
    </p>
    <p id="page_title-toc" style="margin-left:80px;">
     <a href="#page_title" rel="nofollow">
      添加学生信息
     </a>
    </p>
    <p id="4%E3%80%81%E5%AD%A6%E7%94%9F%E5%85%85%E5%80%BC%E9%87%91%E5%B8%81%EF%BC%88POST%EF%BC%8CCookie%EF%BC%89-toc" style="margin-left:40px;">
     <a href="#4%E3%80%81%E5%AD%A6%E7%94%9F%E5%85%85%E5%80%BC%E9%87%91%E5%B8%81%EF%BC%88POST%EF%BC%8CCookie%EF%BC%89" rel="nofollow">
      4、学生充值金币（POST，Cookie）
     </a>
    </p>
    <p id="page_title-toc" style="margin-left:80px;">
     <a href="#page_title" rel="nofollow">
      学生金币充值
     </a>
    </p>
    <p id="5%E3%80%81%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88GET%EF%BC%8Cheader%EF%BC%89-toc" style="margin-left:40px;">
     <a href="#5%E3%80%81%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88GET%EF%BC%8Cheader%EF%BC%89" rel="nofollow">
      5、获取所有学生信息（GET，header）
     </a>
    </p>
    <p id="page_title-toc" style="margin-left:80px;">
     <a href="#page_title" rel="nofollow">
      获取所有学生信息
     </a>
    </p>
    <p id="6%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88POST%EF%BC%89-toc" style="margin-left:40px;">
     <a href="#6%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88POST%EF%BC%89" rel="nofollow">
      6、文件上传（POST）
     </a>
    </p>
    <p id="page_title-toc" style="margin-left:80px;">
     <a href="#page_title" rel="nofollow">
      文件上传
     </a>
    </p>
    <hr id="hr-toc"/>
    <p>
    </p>
    <h3 id="%E5%89%8D%E8%A8%80">
     前言
    </h3>
    <p>
     这次小项目是基于HTTP协议的接口，通过JMeter来完成一次基本的接口测试，完整复习一下JMeter的基本操作。
    </p>
    <p>
     这次练手用的项目，提供的接口文档挺详细的，文末领取。
    </p>
    <p>
     在实际项目中，测试也要先从开发那拿到接口说明书，分析熟悉业务后，写接口的测试用例，最后再在JMeter里写接口测试的脚本。
    </p>
    <p>
     设置如下
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/0e5da20bbf4ec41084936f88f8aa1aec.png"/>
    </p>
    <p>
     <span style="color:#fe2c24;">
      <strong>
       jmeter接口测试视频教程：
      </strong>
     </span>
    </p>
    <p>
     <a class="has-card" href="https://www.bilibili.com/video/BV1As4y1z7a3/?spm_id_from=333.999.0.0" rel="nofollow" title="敢称史上最全，jmeter接口测试实战教程，一学就会，零基础入门必看_哔哩哔哩_bilibili">
      <span class="link-card-box">
       <span class="link-title">
        敢称史上最全，jmeter接口测试实战教程，一学就会，零基础入门必看_哔哩哔哩_bilibili
       </span>
       <span class="link-link">
        <img alt="icon-default.png?t=N3I4" class="link-link-icon" src="https://i-blog.csdnimg.cn/blog_migrate/64d367beb016e45fdc8d8aaff940b313.png">
         https://www.bilibili.com/video/BV1As4y1z7a3/?spm_id_from=333.999.0.0
        </img>
       </span>
      </span>
     </a>
    </p>
    <h3 id="1%E3%80%81%E7%99%BB%E5%BD%95%EF%BC%88POST%EF%BC%89">
     1、登录（POST）
    </h3>
    <blockquote>
     <h4 id="page_title">
      登录
     </h4>
     <p>
      登录接口
     </p>
     <p>
      <strong>
       简要描述：
      </strong>
     </p>
     <ul>
      <li>
       登录接口
      </li>
     </ul>
     <p>
      <strong>
       请求URL：
      </strong>
     </p>
     <ul>
      <li>
       <code>
        http://api.nnzhp.cn/api/user/login
       </code>
      </li>
     </ul>
     <p>
      <strong>
       请求方式：
      </strong>
     </p>
     <ul>
      <li>
       post
      </li>
     </ul>
     <p>
     </p>
    </blockquote>
    <table>
     <tbody>
      <tr>
       <td>
        <p>
         参数名
        </p>
       </td>
       <td>
        <p>
         必选
        </p>
       </td>
       <td>
        <p>
         类型
        </p>
       </td>
       <td>
        <p>
         说明
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         username
        </p>
       </td>
       <td>
        <p>
         是
        </p>
       </td>
       <td>
        <p>
         string
        </p>
       </td>
       <td>
        <p>
         用户名
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         passwd
        </p>
       </td>
       <td>
        <p>
         是
        </p>
       </td>
       <td>
        <p>
         string
        </p>
       </td>
       <td>
        <p>
         密码
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     登录接口POST请求，入参 username 和 passwd 都是必填项。
    </p>
    <p>
     在线程组下添加一个察看结果树和HTTP请求默认值，前者可以方便查看所有请求的结果，后者在跑多个同域名的接口的测试的时候，可以设置默认值很实用。
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/dd171832ca58ce194b137acff2ec7398.png"/>
    </p>
    <p>
     接着就可以做HTTP请求，并加上相应的断言，看用错误密码登录和成功的登录的响应是否符合预期
    </p>
    <p>
     具体如下：
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/bdc4bc4fb8f052836b8ca261af1797b6.png"/>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/d444c8f25ad33f9846b51108756091d2.png"/>
    </p>
    <p>
     错误的密码时，登录失败，返回的响应体符合断言的预期：
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/4b8da60a395203d251a86772fbda43e0.png"/>
    </p>
    <p>
     请求正确，登录成功，断言通过：
    </p>
    <p>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/64e63d9e0215a6205ed3593f84d66a90.png"/>
    </p>
    <h3>
    </h3>
    <h3 id="2%E3%80%81%E8%8E%B7%E5%8F%96%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88GET%EF%BC%89">
     2、获取学生信息（GET）
    </h3>
    <blockquote>
     <h4>
      获取学生信息
     </h4>
     <p>
      <strong>
       简要描述：
      </strong>
     </p>
     <ul>
      <li>
       获取学生信息接口
      </li>
     </ul>
     <p>
      <strong>
       请求URL：
      </strong>
     </p>
     <ul>
      <li>
       <code>
        http://api.nnzhp.cn/api/user/stu_info
       </code>
      </li>
     </ul>
     <p>
      <strong>
       请求方式：
      </strong>
     </p>
     <ul>
      <li>
       get
      </li>
     </ul>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
        参数名
       </th>
       <th>
        必选
       </th>
       <th>
        类型
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        stu_name
       </td>
       <td>
        是
       </td>
       <td>
        string
       </td>
       <td>
        学生姓名
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     从接口文档中，我们可以看到获取学生信息用到的是GET方式的请求，入参中 stu_name 为必填项，返回参数太多，就不细说了。
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ee84678774aa329944fccc5988dd10d3.png"/>
    </p>
    <h3>
    </h3>
    <h3 id="3%E3%80%81%E6%B7%BB%E5%8A%A0%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88POST%EF%BC%8CJSON%EF%BC%89">
     3、添加学生信息（POST，JSON）
    </h3>
    <blockquote>
     <h4>
      添加学生信息
     </h4>
     <p>
      <strong>
       简要描述：
      </strong>
     </p>
     <ul>
      <li>
       添加学生信息，这个接口是用来讲入参是json类型的
      </li>
     </ul>
     <p>
      <strong>
       请求URL：
      </strong>
     </p>
     <ul>
      <li>
       <code>
        http://api.nnzhp.cn/api/user/add_stu
       </code>
      </li>
     </ul>
     <p>
      <strong>
       请求方式：
      </strong>
     </p>
     <ul>
      <li>
       <p>
        post
       </p>
      </li>
      <li>
       <p>
        入参是json类型
       </p>
      </li>
     </ul>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
        参数名
       </th>
       <th>
        必选
       </th>
       <th>
        类型
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        name
       </td>
       <td>
        是
       </td>
       <td>
        string
       </td>
       <td>
        学生姓名
       </td>
      </tr>
      <tr>
       <td>
        grade
       </td>
       <td>
        是
       </td>
       <td>
        string
       </td>
       <td>
        班级
       </td>
      </tr>
      <tr>
       <td>
        phone
       </td>
       <td>
        是
       </td>
       <td>
        int
       </td>
       <td>
        电话
       </td>
      </tr>
      <tr>
       <td>
        sex
       </td>
       <td>
        否
       </td>
       <td>
        string
       </td>
       <td>
        性别，如果不传默认为男
       </td>
      </tr>
      <tr>
       <td>
        age
       </td>
       <td>
        否
       </td>
       <td>
        int
       </td>
       <td>
        年龄，如果不传默认为18
       </td>
      </tr>
      <tr>
       <td>
        addr
       </td>
       <td>
        否
       </td>
       <td>
        string
       </td>
       <td>
        地址，如果不传默认为北京市昌平区
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     在添加学生信息的接口中，用到的也是POST请求方式，但与登录接口不同的是，它的入参是JSON类型的，接口文档中有1个JSON请求示例，我们可以直接复制过来，简单修改一下即可。如下：
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/30586dc72f8d33d17db97c1529066f37.png"/>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ccfffeda4a13c4bf4b0cc6cafad4b9c0.png"/>
    </p>
    <p>
     在这里，由于这个学生信息已存在系统中了，因此返回添加失败的结果。所以，我需要添加1个新的学生信息，另外，这里需要调整下编码格式为utf-8，否则添加的学生信息会出现中文乱码。
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/41d19c11913b84e570b22aa2a341053a.png"/>
    </p>
    <p>
     <span style="color:#fe2c24;">
      <strong>
       jmeter接口测试视频教程：
      </strong>
     </span>
    </p>
    <p>
     <a class="has-card" href="https://www.bilibili.com/video/BV1As4y1z7a3/?spm_id_from=333.999.0.0" rel="nofollow" title="敢称史上最全，jmeter接口测试实战教程，一学就会，零基础入门必看_哔哩哔哩_bilibili">
      <span class="link-card-box">
       <span class="link-title">
        敢称史上最全，jmeter接口测试实战教程，一学就会，零基础入门必看_哔哩哔哩_bilibili
       </span>
       <span class="link-link">
        <img alt="icon-default.png?t=N3I4" class="link-link-icon" src="https://i-blog.csdnimg.cn/blog_migrate/64d367beb016e45fdc8d8aaff940b313.png"/>
        https://www.bilibili.com/video/BV1As4y1z7a3/?spm_id_from=333.999.0.0
       </span>
      </span>
     </a>
    </p>
    <h3 id="4%E3%80%81%E5%AD%A6%E7%94%9F%E5%85%85%E5%80%BC%E9%87%91%E5%B8%81%EF%BC%88POST%EF%BC%8CCookie%EF%BC%89">
     4、学生充值金币（POST，Cookie）
    </h3>
    <blockquote>
     <h4>
      学生金币充值
     </h4>
     <p>
      <strong>
       简要描述：
      </strong>
     </p>
     <ul>
      <li>
       学生金币充值接口，这个接口是为了讲添加cookie以及身份验证的
      </li>
     </ul>
     <p>
      <strong>
       请求URL：
      </strong>
     </p>
     <ul>
      <li>
       <code>
        http://api.nnzhp.cn/api/user/gold_add
       </code>
      </li>
     </ul>
     <p>
      <strong>
       请求方式：
      </strong>
     </p>
     <ul>
      <li>
       post
      </li>
     </ul>
     <p>
      <strong>
       参数：
      </strong>
     </p>
     <p>
      <strong>
       该接口有权限验证，需要admin用户才可以做操作，需要添加cookie
      </strong>
     </p>
     <p>
      <strong>
       cookie中key为登录的用户名，value从登录接口中获取，登陆成功之后会返回sign
      </strong>
     </p>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
        参数名
       </th>
       <th>
        必选
       </th>
       <th>
        类型
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        stu_id
       </td>
       <td>
        是
       </td>
       <td>
        int
       </td>
       <td>
        学生id
       </td>
      </tr>
      <tr>
       <td>
        gold
       </td>
       <td>
        是
       </td>
       <td>
        int
       </td>
       <td>
        金币数量
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     这个接口有权限验证，需要admin用户登录成功后才可以进行充值，另外，在入参 stu_id 和 gold 中，我们发现 stu_id 指的是学生ID，这里其实就是最开始 获取学生信息 接口返回结果中的id字段，如下：
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/a200f0e5cbad32602f04830c8c1fe48a.png"/>
    </p>
    <p>
    </p>
    <h3 id="5%E3%80%81%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%EF%BC%88GET%EF%BC%8Cheader%EF%BC%89">
     5、获取所有学生信息（GET，header）
    </h3>
    <blockquote>
     <h4>
      获取所有学生信息
     </h4>
     <p>
      <strong>
       简要描述：
      </strong>
     </p>
     <ul>
      <li>
       这个接口是为了说明怎么添加header信息的
      </li>
     </ul>
     <p>
      <strong>
       请求URL：
      </strong>
     </p>
     <ul>
      <li>
       <code>
        http://api.nnzhp.cn/api/user/all_stu
       </code>
      </li>
     </ul>
     <p>
      <strong>
       请求方式：
      </strong>
     </p>
     <ul>
      <li>
       get
      </li>
     </ul>
     <p>
      <code>
       需要添加header信息，key为Referer value 为http://api.nnzhp.cn/
      </code>
     </p>
     <p>
      <strong>
       参数：
      </strong>
     </p>
     <p>
      无
     </p>
    </blockquote>
    <p>
    </p>
    <p>
     从接口文档中，我们了解到，要获取所有学生信息，需要添加请求信息头，因此，我们创建一个线程组，在线程组下依次添加HTTP信息头管理器、HTTP请求、察看结果树，如下
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/505968e000af0c2e07470a41897bd878.png"/>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/66b15d6c4033e107ef0921241cb08495.png"/>
    </p>
    <h3>
    </h3>
    <h3 id="6%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%88POST%EF%BC%89">
     6、文件上传（POST）
    </h3>
    <blockquote>
     <h4>
      文件上传
     </h4>
     <p>
      <strong>
       简要描述：
      </strong>
     </p>
     <ul>
      <li>
       上传文件接口
      </li>
     </ul>
     <p>
      <strong>
       请求URL：
      </strong>
     </p>
     <ul>
      <li>
       <code>
        http://api.nnzhp.cn/api/file/file_upload
       </code>
      </li>
     </ul>
     <p>
      <strong>
       请求方式：
      </strong>
     </p>
     <ul>
      <li>
       post
      </li>
     </ul>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
        参数名
       </th>
       <th>
        必选
       </th>
       <th>
        类型
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        file
       </td>
       <td>
        是
       </td>
       <td>
        file
       </td>
       <td>
        文件
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     在上传文件接口中，需要注意的是这里的入参是file类型的，因此，我们需要准备一个待上传的文件。
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/bed04c1345da50428e241786ddd75ed7.png"/>
    </p>
    <p>
     <span style="color:#fe2c24;">
      <strong>
       jmeter接口测试视频教程：
      </strong>
     </span>
    </p>
    <p>
     <a class="has-card" href="https://www.bilibili.com/video/BV1As4y1z7a3/?spm_id_from=333.999.0.0" rel="nofollow" title="敢称史上最全，jmeter接口测试实战教程，一学就会，零基础入门必看_哔哩哔哩_bilibili">
      <span class="link-card-box">
       <span class="link-title">
        敢称史上最全，jmeter接口测试实战教程，一学就会，零基础入门必看_哔哩哔哩_bilibili
       </span>
       <span class="link-link">
        <img alt="icon-default.png?t=N3I4" class="link-link-icon" src="https://i-blog.csdnimg.cn/blog_migrate/64d367beb016e45fdc8d8aaff940b313.png"/>
        https://www.bilibili.com/video/BV1As4y1z7a3/?spm_id_from=333.999.0.0
       </span>
      </span>
     </a>
     <img alt="" height="505" src="https://i-blog.csdnimg.cn/blog_migrate/9d40f0e49ca278f91ca8977084032d8c.png" width="831"/>
    </p>
    <p>
     <img alt="" height="498" src="https://i-blog.csdnimg.cn/blog_migrate/2e9ad7feefe5fa8355c2c12f578e8267.png" width="854"/>
    </p>
    <p>
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f4d58425f313232302f:61727469636c652f64657461696c732f313330363932313232" class_="artid" style="display:none">
 </p>
</div>


