---
layout: post
title: "批量检测微信小程序封禁状态的-Python-脚本"
date: 2025-02-23 13:55:28 +0800
description: "文章浏览阅读1.7k次，点赞61次，【代码】批量检测微信小程序封禁状态的 Python _批量检测小"
keywords: "批量检测小程序被封接口"
categories: ['']
tags: ['微信小程序', '小程序', 'Python']
artid: "144966681"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=144966681
    alt: "批量检测微信小程序封禁状态的-Python-脚本"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     批量检测微信小程序封禁状态的 Python 脚本
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/30be121e67cb4982ae6d5bf1aaa0f408.png#pic_center"/>
    </p>
    <h4>
     <a id="Python__2">
     </a>
     Python 脚本代码
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> json

<span class="token comment"># 要检查的小程序 App ID 列表</span>
app_ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'appid1'</span><span class="token punctuation">,</span> <span class="token string">'appid2'</span><span class="token punctuation">,</span> <span class="token string">'appid3'</span><span class="token punctuation">]</span>  <span class="token comment"># 请替换为实际的 App ID</span>

<span class="token comment"># 定义 API URL 模板</span>
api_url_template <span class="token operator">=</span> <span class="token string">'https://down.ychengsnsm.com/xcx/checkxcx.php?appid={}'</span>

<span class="token comment"># 获取小程序状态的函数</span>
<span class="token keyword">def</span> <span class="token function">get_app_status</span><span class="token punctuation">(</span>app_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
    api_url <span class="token operator">=</span> api_url_template<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>app_id<span class="token punctuation">)</span>  <span class="token comment"># 用 app_id 替换 URL 中的占位符</span>

    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 发送 GET 请求</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>api_url<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
        response<span class="token punctuation">.</span>raise_for_status<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 如果请求失败会抛出异常</span>

        <span class="token comment"># 解析 JSON 响应</span>
        response_data <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 判断返回的状态</span>
        <span class="token keyword">if</span> <span class="token string">'code'</span> <span class="token keyword">in</span> response_data<span class="token punctuation">:</span>
            code <span class="token operator">=</span> response_data<span class="token punctuation">[</span><span class="token string">'code'</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> code <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>app_id<span class="token punctuation">}</span></span><span class="token string">: 小程序状态正常"</span></span>
            <span class="token keyword">elif</span> code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>app_id<span class="token punctuation">}</span></span><span class="token string">: 小程序已被封禁"</span></span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>app_id<span class="token punctuation">}</span></span><span class="token string">: 接口返回了未知的状态码 (</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>code<span class="token punctuation">}</span></span><span class="token string">)"</span></span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>app_id<span class="token punctuation">}</span></span><span class="token string">: 接口返回的数据格式不符合预期"</span></span>

    <span class="token keyword">except</span> requests<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>RequestException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>app_id<span class="token punctuation">}</span></span><span class="token string">: 错误 - 请求失败: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span>
    <span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>app_id<span class="token punctuation">}</span></span><span class="token string">: 错误 - 无效的 JSON 响应"</span></span>

<span class="token comment"># 批量检查每个小程序的状态</span>
<span class="token keyword">for</span> app_id <span class="token keyword">in</span> app_ids<span class="token punctuation">:</span>
    result <span class="token operator">=</span> get_app_status<span class="token punctuation">(</span>app_id<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_49">
     </a>
     代码解析
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        API URL 模板
       </strong>
      </p>
      <ul>
       <li>
        <code>
         api_url_template
        </code>
        变量存储了 API 请求的 URL 模板。通过
        <code>
         .format()
        </code>
        方法将每个小程序的
        <code>
         app_id
        </code>
        填充到 URL 中。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         get_app_status
        </code>
        函数
       </strong>
      </p>
      <ul>
       <li>
        <code>
         get_app_status(app_id)
        </code>
        函数发送一个 HTTP GET 请求到 API 接口，获取小程序的封禁状态。
       </li>
       <li>
        <code>
         requests.get
        </code>
        负责发送请求，并在接收到响应后通过
        <code>
         .json()
        </code>
        方法解析 JSON 格式的数据。
       </li>
       <li>
        如果
        <code>
         code
        </code>
        字段存在，根据它的值来判断小程序的状态。返回不同的信息：
        <ul>
         <li>
          <code>
           code == 1
          </code>
          ：小程序状态正常
         </li>
         <li>
          <code>
           code == 0
          </code>
          ：小程序已被封禁
         </li>
         <li>
          如果返回的
          <code>
           code
          </code>
          值不在预期范围内，输出“未知状态”信息。
         </li>
        </ul>
       </li>
       <li>
        如果请求出现错误，捕获异常并返回错误信息。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        批量检测
       </strong>
      </p>
      <ul>
       <li>
        使用一个循环遍历
        <code>
         app_ids
        </code>
        列表，调用
        <code>
         get_app_status
        </code>
        检查每个小程序的状态，并打印结果。
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <a id="_66">
     </a>
     使用说明
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        设置小程序 App ID
       </strong>
      </p>
      <ul>
       <li>
        在
        <code>
         app_ids
        </code>
        列表中，填入你需要检查的小程序 App ID。
       </li>
      </ul>
      <pre><code class="prism language-python">app_ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'wx1234567890abcdef'</span><span class="token punctuation">,</span> <span class="token string">'wxabcdef1234567890'</span><span class="token punctuation">]</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        安装依赖
       </strong>
      </p>
      <ul>
       <li>
        确保你的 Python 环境中已安装
        <code>
         requests
        </code>
        库。如果没有安装，可以使用以下命令安装：
       </li>
      </ul>
      <pre><code class="prism language-bash">pip <span class="token function">install</span> requests
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        运行脚本
       </strong>
      </p>
      <ul>
       <li>
        将修改后的 Python 脚本保存为
        <code>
         .py
        </code>
        文件（例如：
        <code>
         check_xcx_status.py
        </code>
        ），然后通过命令行运行：
       </li>
      </ul>
      <pre><code class="prism language-bash">python check_xcx_status.py
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        查看结果
       </strong>
      </p>
      <ul>
       <li>
        运行后，控制台会显示每个小程序的封禁状态，例如：
        <pre><code class="prism language-bash">wx1234567890abcdef: 小程序状态正常
wxabcdef1234567890: 小程序已被封禁
</code></pre>
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <a id="_93">
     </a>
     常见错误及解决方案
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        请求失败 (RequestException)
       </strong>
      </p>
      <ul>
       <li>
        如果遇到请求失败，可能是网络问题、API 地址错误或服务器不可用。检查 API 地址是否正确，或者尝试访问其他网站以确认网络连接正常。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        无效的 JSON 响应
       </strong>
      </p>
      <ul>
       <li>
        如果接口返回的数据格式无效，可能是接口问题。你可以在脚本中添加一些调试信息，查看接口返回的原始内容，或者联系接口提供方确认返回格式。
       </li>
      </ul>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f793133313637332f:61727469636c652f64657461696c732f313434393636363831" class_="artid" style="display:none">
 </p>
</div>


