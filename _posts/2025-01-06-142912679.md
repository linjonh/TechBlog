---
layout: post
title: "Unity-平滑移动实现物体缓慢移动到目标位置Vector3.SmoothDamp"
date: 2025-01-06 16:32:54 +0800
description: "是一个非常有用的工具，用于平滑地改变一个向量到目标向量。它在平滑移动、相机跟随、动画过渡等场景中非常"
keywords: "vector3.smoothdamp"
categories: ['Unity']
tags: ['游戏引擎', 'Unity']
artid: "142912679"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=142912679
    alt: "Unity-平滑移动实现物体缓慢移动到目标位置Vector3.SmoothDamp"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Unity 平滑移动】实现物体缓慢移动到目标位置Vector3.SmoothDamp
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <code>
      Vector3.SmoothDamp
     </code>
     是 Unity 中用于平滑地改变一个向量（Vector3）到目标向量的静态方法。它通常用于平滑移动、相机跟随、动画过渡等场景，以避免突兀的变化。
    </p>
    <p>
     <span style="color:#956fe7;">
      public static Vector3 SmoothDamp
     </span>
     (
     <span style="color:#ff9900;">
      Vector3 current, Vector3 target, ref Vector3 currentVelocity, float smoothTime, float maxSpeed = Mathf.Infinity, float deltaTime = Time.deltaTime
     </span>
     );
    </p>
    <ul>
     <li>
      <p>
       <code>
        current
       </code>
       ：当前向量（通常表示当前位置或方向）。
      </p>
     </li>
     <li>
      <p>
       <code>
        target
       </code>
       ：目标向量（通常表示目标位置或方向）。
      </p>
     </li>
     <li>
      <p>
       <code>
        currentVelocity
       </code>
       ：当前速度向量，用于存储和更新当前的速度。
      </p>
     </li>
     <li>
      <p>
       <code>
        smoothTime
       </code>
       ：平滑时间，表示达到目标向量所需的时间（以秒为单位）。
      </p>
     </li>
     <li>
      <p>
       <code>
        maxSpeed
       </code>
       ：最大速度，表示向量变化的最大速度（可选，默认为
       <code>
        Mathf.Infinity
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       <code>
        deltaTime
       </code>
       ：时间增量，表示当前帧的时间间隔（可选，默认为
       <code>
        Time.deltaTime
       </code>
       ）。
      </p>
     </li>
    </ul>
    <h4>
     返回值
    </h4>
    <ul>
     <li>
      <p>
       返回一个新的
       <code>
        Vector3
       </code>
       向量，表示当前向量平滑变化后的结果。
      </p>
     </li>
    </ul>
    <h4>
     工作原理
    </h4>
    <p>
     <code>
      Vector3.SmoothDamp
     </code>
     使用了一种称为“阻尼”（damping）的技术，通过逐步调整当前向量，使其平滑地接近目标向量。具体步骤如下：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        计算目标速度
       </strong>
       ：根据当前向量、目标向量、当前速度和时间增量，计算出目标速度。
      </p>
     </li>
     <li>
      <p>
       <strong>
        限制速度
       </strong>
       ：如果指定了最大速度，则将目标速度限制在最大速度范围内。
      </p>
     </li>
     <li>
      <p>
       <strong>
        更新当前速度
       </strong>
       ：根据目标速度和当前速度，更新当前速度。
      </p>
     </li>
     <li>
      <p>
       <strong>
        计算新位置
       </strong>
       ：根据当前速度和时间增量，计算出新的当前向量。
      </p>
     </li>
    </ol>
    <h4>
     示例代码
    </h4>
    <p>
     以下是一个示例代码，展示了如何使用
     <code>
      Vector3.SmoothDamp
     </code>
     平滑地移动一个物体到目标位置：
    </p>
    <pre><code class="language-cs">using UnityEngine;

public class SmoothDampExample : MonoBehaviour
{
    public Transform target; // 目标位置
    public float smoothTime = 0.3f; // 平滑时间
    public float maxSpeed = Mathf.Infinity; // 最大速度

    private Vector3 velocity = Vector3.zero; // 当前速度

    void Update()
    {
        // 计算平滑移动后的位置
        Vector3 newPosition = Vector3.SmoothDamp(transform.position, target.position, ref velocity, smoothTime, maxSpeed);

        // 更新物体的位置
        transform.position = newPosition;
    }
}</code></pre>
    <p>
     在这个示例中，
     <code>
      target
     </code>
     是目标位置，
     <code>
      smoothTime
     </code>
     是平滑时间，
     <code>
      maxSpeed
     </code>
     是最大速度。
     <code>
      Vector3.SmoothDamp
     </code>
     方法用于计算平滑移动后的位置，并将其赋值给物体的
     <code>
      transform.position
     </code>
     。
    </p>
    <h4>
     应用场景
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        平滑移动
       </strong>
       ：在游戏中，可以使用
       <code>
        Vector3.SmoothDamp
       </code>
       来平滑地移动物体到目标位置，避免突兀的变化。
      </p>
     </li>
     <li>
      <p>
       <strong>
        相机跟随
       </strong>
       ：在相机跟随玩家或物体的场景中，可以使用
       <code>
        Vector3.SmoothDamp
       </code>
       来平滑地调整相机的位置，使其跟随目标物体。
      </p>
     </li>
     <li>
      <p>
       <strong>
        动画过渡
       </strong>
       ：在动画过渡中，可以使用
       <code>
        Vector3.SmoothDamp
       </code>
       来平滑地改变物体的属性（如位置、旋转、缩放等），使其过渡更加自然。
      </p>
     </li>
     <li>
      <p>
       <strong>
        物理模拟
       </strong>
       ：在物理模拟中，可以使用
       <code>
        Vector3.SmoothDamp
       </code>
       来平滑地调整物体的速度和位置，使其运动更加自然。
      </p>
     </li>
    </ol>
    <h4>
     注意事项
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        平滑时间
       </strong>
       ：
       <code>
        smoothTime
       </code>
       参数决定了平滑过渡的时间。较大的值会导致过渡更加缓慢，较小的值会导致过渡更加迅速。
      </p>
     </li>
     <li>
      <p>
       <strong>
        最大速度
       </strong>
       ：
       <code>
        maxSpeed
       </code>
       参数限制了向量变化的最大速度。如果不需要限制速度，可以将其设置为
       <code>
        Mathf.Infinity
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        时间增量
       </strong>
       ：
       <code>
        deltaTime
       </code>
       参数表示当前帧的时间间隔。通常情况下，使用
       <code>
        Time.deltaTime
       </code>
       即可。
      </p>
     </li>
     <li>
      <p>
       <strong>
        性能
       </strong>
       ：
       <code>
        Vector3.SmoothDamp
       </code>
       的计算涉及到多个步骤，因此在性能敏感的场景中，需要注意其对性能的影响。
      </p>
     </li>
    </ol>
    <h4>
     总结
    </h4>
    <p>
     <code>
      Vector3.SmoothDamp
     </code>
     是一个非常有用的工具，用于平滑地改变一个向量到目标向量。它在平滑移动、相机跟随、动画过渡等场景中非常常见。理解其工作原理和应用场景，对于游戏开发和物理模拟非常重要。
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6c656f7973712f:61727469636c652f64657461696c732f313432393132363739" class_="artid" style="display:none">
 </p>
</div>


