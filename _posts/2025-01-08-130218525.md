---
layout: post
title: "DNS域名解析服务正向反向解析主从域名服务器"
date: 2025-01-08 14:49:07 +0800
description: "在日常生活中人们习惯便用域名访问服务器，但机器间互相只认IP地址，域名与1P地址之间是多对一的关系，"
keywords: "dns端口"
categories: ['']
tags: ['服务器', 'Linux']
artid: "130218525"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=130218525
    alt: "DNS域名解析服务正向反向解析主从域名服务器"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     DNS域名解析服务（正向、反向解析、主从域名服务器）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      DNS域名解析服务（正向、反向解析、主从域名服务器）
     </h4>
     <ul>
      <li>
       <a href="#DNS_2" rel="nofollow">
        一、DNS概述
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1DNS_4" rel="nofollow">
          1、DNS的定义
         </a>
        </li>
        <li>
         <a href="#2DNS_8" rel="nofollow">
          2、DNS使用端口
         </a>
        </li>
        <li>
         <a href="#3DNS_10" rel="nofollow">
          3、DNS域名长度限制
         </a>
        </li>
        <li>
         <a href="#4DNS_12" rel="nofollow">
          4、DNS域名解析方式
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#DNS_16" rel="nofollow">
        二、DNS的域名结构
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1_17" rel="nofollow">
          1、域名结构
         </a>
        </li>
        <li>
         <a href="#2_25" rel="nofollow">
          2、域名的分布式结构
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#DNS_34" rel="nofollow">
        三、DNS服务器类型
       </a>
      </li>
      <li>
       <a href="#DNS_47" rel="nofollow">
        四、DNS域名解析服务器步骤
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1bind_48" rel="nofollow">
          1、安装bind软件包
         </a>
        </li>
        <li>
         <a href="#2_55" rel="nofollow">
          2、配置正向解析
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#1_56" rel="nofollow">
            （1）、先查看需要修改的配置文件所在路径
           </a>
          </li>
          <li>
           <a href="#2_73" rel="nofollow">
            （2）、修改主配置文件
           </a>
          </li>
          <li>
           <a href="#3_100" rel="nofollow">
            （3）、修改区域配置文件，添加正向区域配置
           </a>
          </li>
          <li>
           <a href="#4_116" rel="nofollow">
            （4）、配置正向区域数据文件
           </a>
          </li>
          <li>
           <a href="#5DNS_168" rel="nofollow">
            （5）、在客户端的域名解析配置文件中添加DNS服务器地址
           </a>
          </li>
          <li>
           <a href="#6DNS_187" rel="nofollow">
            （6）、测试DNS解析
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#3_199" rel="nofollow">
          3、配置反向解析
         </a>
        </li>
        <li>
         <a href="#4_269" rel="nofollow">
          4、配置主、从域名服务器
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#1_270" rel="nofollow">
            （1）配置主服务器正向、反向解析
           </a>
          </li>
          <li>
           <a href="#2_357" rel="nofollow">
            （2）配置从服务器正向、反向解析
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="DNS_2">
     </a>
     一、DNS概述
    </h2>
    <ul>
     <li>
      <strong>
       在日常生活中人们习惯便用域名访问服务器，但机器间互相只认IP地址，域名与1P地址之间是多对一的关系，一个ip地址不一定只对应一个域名，且一个域名只可以对应一个ip地址，它们之间的转换工作称为域名解析，域名解析需要由专门的域名解析服务器来完成，整个过程是自动进行的。
      </strong>
     </li>
    </ul>
    <h3>
     <a id="1DNS_4">
     </a>
     1、DNS的定义
    </h3>
    <ul>
     <li>
      DNS是“域名系统”的英文缩写。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。
     </li>
     <li>
      DNS服务使用TCP和UDP的53端口，TCP的53端口用于连接DNS服务器，UDP的53端口用于解析DNS。
     </li>
     <li>
      每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符
     </li>
    </ul>
    <h3>
     <a id="2DNS_8">
     </a>
     2、DNS使用端口
    </h3>
    <ul>
     <li>
      DNS服务使用TCP和UDP的53端口，TCP的53端口用于连接DNS服务器，UDP的53端口用于解析DNS。
     </li>
    </ul>
    <h3>
     <a id="3DNS_10">
     </a>
     3、DNS域名长度限制
    </h3>
    <ul>
     <li>
      每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符
     </li>
    </ul>
    <h3>
     <a id="4DNS_12">
     </a>
     4、DNS域名解析方式
    </h3>
    <ul>
     <li>
      <p>
       正向解析：根据域名查找对应的IP地址
      </p>
     </li>
     <li>
      <p>
       反向解析：根据IP地址查找对应的域名
      </p>
     </li>
    </ul>
    <h2>
     <a id="DNS_16">
     </a>
     二、DNS的域名结构
    </h2>
    <h3>
     <a id="1_17">
     </a>
     1、域名结构
    </h3>
    <pre><code class="prism language-go">http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>sina<span class="token punctuation">.</span>com<span class="token punctuation">.</span>cn<span class="token punctuation">.</span><span class="token operator">/</span>

http<span class="token punctuation">:</span>主机名 子域 二级域 顶级域 根域
</code></pre>
    <h3>
     <a id="2_25">
     </a>
     2、域名的分布式结构
    </h3>
    <ul>
     <li>
      <strong>
       根域： 位于树状结构最顶层，用“ . ”表示
      </strong>
     </li>
     <li>
      <strong>
       顶级域： 一般代表一种类型的组织机构或国家地区;如.net(网络供应商)、.com(工商企业)、.org（团体组织）、.edu（教育机构）、.gov(政府部门)、.cn（中国国家域名）
      </strong>
     </li>
     <li>
      <strong>
       二级域： 用来标明顶级域内的一个特定的组织，国家顶级域下面的二级域名由国家部门统一管理
      </strong>
     </li>
     <li>
      <strong>
       子域： 二级域下所创建的各级域统称为子域，各个组织或用户可以自由申请注册自己的域名
      </strong>
     </li>
     <li>
      <strong>
       主机： 主机位于域名空间最下层，就是一台具体的计算机
      </strong>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b7df605e1232e21fb490922d2304b996.png#pic_center"/>
    </p>
    <h2>
     <a id="DNS_34">
     </a>
     三、DNS服务器类型
    </h2>
    <p>
     <strong>
      1、主域名服务器：
     </strong>
    </p>
    <ul>
     <li>
      负责维护一个区域的所有域名信息，是特定的所有信息的权威信息源，数据可以修改。构建主域名服务器时，需要自行建立所负责区域的地址数据文
     </li>
    </ul>
    <p>
     <strong>
      2、从域名服务器：
     </strong>
    </p>
    <ul>
     <li>
      当主域名服务器出现故障、关闭或负载过重时，从域名服务器作为备份服务提供域名解析服务。从域名服务器提供的解析结果不是由自己决定的，而是来自于主域名服务器。构建从域名服务器时，需要指定主域名服务器的位置，以便服务器能自动同步区域的地址数据库。
     </li>
    </ul>
    <p>
     <strong>
      3、缓存域名服务器：
     </strong>
    </p>
    <ul>
     <li>
      只提供域名解析结果的缓存功能 目的在于提高查询速度和效率，但没有域名数据库。
     </li>
     <li>
      它从某个远程服务器取得每次域名服务器查询的结果，并将它放在高速缓存中，以后查询相同的信息时用它予以响应。缓存域名服务器不是权威性服务器，因为提供的所有信息都是间接信息。构建缓存域名服务器时，必须设置根域或指定其他DNS服务器作为解析来源。
     </li>
    </ul>
    <p>
     <strong>
      4、转发域名服务器：
     </strong>
    </p>
    <ul>
     <li>
      负责所有非本地域名的本地查询。转发域名服务器接到查询请求后，在其缓存中查找，如找不到就将请求依次转发到指定的域名服务器，直到查找到结果为止，否则返回无法映射的结果。
     </li>
    </ul>
    <h2>
     <a id="DNS_47">
     </a>
     四、DNS域名解析服务器步骤
    </h2>
    <h3>
     <a id="1bind_48">
     </a>
     1、安装bind软件包
    </h3>
    <pre><code class="prism language-go">yum <span class="token operator">-</span>y install bind    
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/206a1d80ab6c945ab1acda4384b59938.png#pic_center"/>
    </p>
    <h3>
     <a id="2_55">
     </a>
     2、配置正向解析
    </h3>
    <h4>
     <a id="1_56">
     </a>
     （1）、先查看需要修改的配置文件所在路径
    </h4>
    <pre><code class="prism language-go">
rpm <span class="token operator">-</span>qc bind                   #查询bind软件配置文件所在路径

<span class="token operator">/</span>etc<span class="token operator">/</span>named<span class="token punctuation">.</span>conf                #主配置文件
<span class="token operator">/</span>etc<span class="token operator">/</span>named<span class="token operator">/</span>rfc1912<span class="token punctuation">.</span>zonrs       #区域配置文件    
<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>named<span class="token punctuation">.</span>localhost     #区域数据配置文件 


修改完成：wq保存并退出
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/83c2b2a1fe1cde0b1792086398008470.png#pic_center"/>
    </p>
    <h4>
     <a id="2_73">
     </a>
     （2）、修改主配置文件
    </h4>
    <pre><code class="prism language-go">vim <span class="token operator">/</span>etc<span class="token operator">/</span>named<span class="token punctuation">.</span>conf

options <span class="token punctuation">{<!-- --></span>
        listen<span class="token operator">-</span>on  port <span class="token number">53</span>  <span class="token punctuation">{<!-- --></span> <span class="token number">192.168</span><span class="token number">.184</span><span class="token number">.10</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>              #监听<span class="token number">53</span>端口，IP地址使用提供服务的本地IP，也可用any代表所有
        # listen<span class="token operator">-</span>on<span class="token operator">-</span>v6 port <span class="token number">53</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">:</span> <span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>                     # ipv6这行如果不使用，可以注释掉或者删除
  directory       <span class="token string">"/var/named"</span><span class="token punctuation">;</span>                               #区域数据文件的默认存放位置
  dump<span class="token operator">-</span> file      <span class="token string">"/var/ named/data/cache_ dump .db"</span>；        #域名缓存数据库文件的位置
  statistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named stats.txt"</span><span class="token punctuation">;</span>          #状态统计文件的位置
  memstatistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named_ mem_ stats. txt"</span><span class="token punctuation">;</span>          #内存统计文件的位置
  allow<span class="token operator">-</span>query   <span class="token punctuation">{<!-- --></span><span class="token number">192.168</span><span class="token number">.80</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>；<span class="token number">172.16</span><span class="token number">.100</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>； <span class="token punctuation">}</span>  
                        <span class="token punctuation">{<!-- --></span> any<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>                                       #允许使用本DNS解析服务的网段，也可用any代表所有
<span class="token punctuation">}</span><span class="token punctuation">;</span>

zone  <span class="token string">" . "</span> IN <span class="token punctuation">{<!-- --></span>                                            #正向解析“<span class="token punctuation">.</span> "根区域
        <span class="token keyword">type</span> hint；                                         #类型为根区域
        file <span class="token string">"named.ca"</span><span class="token punctuation">;</span>                                    #区域数据文件为named<span class="token punctuation">.</span>ca，记录了<span class="token number">13</span>台根域服务器的域名和IP地址等信息
<span class="token punctuation">}</span><span class="token punctuation">;</span>

include <span class="token string">"/etc/ named. rfc1912. zones"</span><span class="token punctuation">;</span>                   #包含区域配置文件里的所有配置
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e5d9eaed044840ab62c98ce5d671e1c3.png#pic_center"/>
    </p>
    <h4>
     <a id="3_100">
     </a>
     （3）、修改区域配置文件，添加正向区域配置
    </h4>
    <pre><code class="prism language-go">
vim <span class="token operator">/</span>etc<span class="token operator">/</span> named<span class="token punctuation">.</span> rfc1912<span class="token punctuation">.</span> zone                           #文件里有模版，可复制粘贴后修改

zone <span class="token string">"xc.com"</span> IN <span class="token punctuation">{<!-- --></span>                                     #正向解析<span class="token string">"lic.com"</span>区域
          <span class="token keyword">type</span> master<span class="token punctuation">;</span>                                      #类型为主区域
          file <span class="token string">"xc.com.zone"</span><span class="token punctuation">;</span>                          ●指定区域数据文件为lic<span class="token punctuation">.</span> com<span class="token punctuation">.</span> zone
          allow<span class="token operator">-</span>update <span class="token punctuation">{<!-- --></span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ba33ee88c2a4fa791812c6cc02b9775a.png#pic_center"/>
    </p>
    <h4>
     <a id="4_116">
     </a>
     （4）、配置正向区域数据文件
    </h4>
    <pre><code class="prism language-go">cd <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>

cp <span class="token operator">-</span>p named<span class="token punctuation">.</span>localhost lic<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone                      #保留源文件的权限和属主的属性复制

vim <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone
$TTL 1D                                                              #设置有效解析记录的生命周期
@       IN SOA xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span> admin<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span> <span class="token punctuation">(</span>            #“@”符号表示当前的DNS区域名
                                           <span class="token number">0</span>       <span class="token punctuation">;</span> serial <span class="token punctuation">.</span>        #更新序列号，可以是<span class="token number">10</span>位以内的整数
                                           1D    <span class="token punctuation">;</span> refresh           #刷新时间，重新下载地址数据的间隔
                                           1H    <span class="token punctuation">;</span> retry             #重试延时，下载失败后的重试间隔
                                           1W   <span class="token punctuation">;</span>expire              #失效时间，超过该时间仍无法下载则放弃
                                           3H <span class="token punctuation">)</span>  <span class="token punctuation">;</span>minimum            #无效解析记录的生存周期



             NS    xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>                                          #记录当前区域的DNS服务器的名称
              A     <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.10</span>                                #记录主机IP地址
www  IN  A     <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.20</span>                                        #记录正向解析www<span class="token punctuation">.</span>benet<span class="token punctuation">.</span>com对应的IP
mail IN  A     <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.30</span>
ftp  IN CNAME  www                                                   # CNAME使用别名，ftp是www的别名
<span class="token operator">*</span>    IN   A    <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.100</span>                                       #泛域名解析，“<span class="token operator">*</span>"代表任意主机名
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e2ac4e2a843ff68e472d5d45ae057258.png#pic_center"/>
    </p>
    <pre><code class="prism language-go">
systemctl start named                               #启动服务
systemctl stop firewalld                            #关闭防火墙
setenforce <span class="token number">0</span>                                        #关闭安全设施  

     
vim  <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span> messages
或者                                                #如果服务启动失败，可以查看日志文件来排查错误
journalctl <span class="token operator">-</span>u named <span class="token operator">-</span>r   

rndc<span class="token operator">-</span>confgen <span class="token operator">-</span>r <span class="token operator">/</span>dev<span class="token operator">/</span>urandom <span class="token operator">-</span>a                     #如果服务启动卡住，可以执行此命令解决
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b07c985f25c68f2d999831393c1666d5.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/44b8e6552339cc81de012b08b1453058.png"/>
    </p>
    <h4>
     <a id="5DNS_168">
     </a>
     （5）、在客户端的域名解析配置文件中添加DNS服务器地址
    </h4>
    <pre><code class="prism language-go">在Linux系统上设置DNS服务器地址的方法：

（<span class="token number">1</span>）vi <span class="token operator">/</span>etc<span class="token operator">/</span>resolv<span class="token punctuation">.</span>conf                                      #修改完后立即生效
nameserver <span class="token number">192.168</span><span class="token number">.184</span><span class="token number">.10</span>


（<span class="token number">2</span>）vi <span class="token operator">/</span>etc<span class="token operator">/</span> sysconfig<span class="token operator">/</span>network<span class="token operator">-</span> scripts<span class="token operator">/</span> ifcfg<span class="token operator">-</span>ens33         #修改完后需要重启网卡
DNS1<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.80</span><span class="token number">.10</span>                                            #在dns1上设置dns服务器
systemctl restart network
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ef8f1adfdfb9f1c0fe0192bac5f4074c.png#pic_center"/>
    </p>
    <h4>
     <a id="6DNS_187">
     </a>
     （6）、测试DNS解析
    </h4>
    <pre><code class="prism language-go">host www<span class="token punctuation">.</span>lic<span class="token punctuation">.</span>com
nslookup www<span class="token punctuation">.</span>lic<span class="token punctuation">.</span>com
dig  www<span class="token punctuation">.</span>lic<span class="token punctuation">.</span>com
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5389a96d6ab91ddd1f886468a44b241c.png#pic_center"/>
    </p>
    <h3>
     <a id="3_199">
     </a>
     3、配置反向解析
    </h3>
    <pre><code class="prism language-go">

vim   <span class="token operator">/</span>etc<span class="token operator">/</span>named<span class="token punctuation">.</span>conf                #主配置文件
和正向设置的一样就行

</code></pre>
    <pre><code class="prism language-go"><span class="token operator">/</span>etc<span class="token operator">/</span>named<span class="token operator">/</span>rfc1912<span class="token punctuation">.</span>zonrs       #区域配置文件   


找个模板来写，网段倒过来写
zone <span class="token string">"92.168.192.in-addr.arpa"</span> IN <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">type</span> master<span class="token punctuation">;</span>
        file <span class="token string">"xc.com.zone.local"</span><span class="token punctuation">;</span>
        allow<span class="token operator">-</span>update <span class="token punctuation">{<!-- --></span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/961ece39557dcad9ac7c530e7515af0f.png#pic_center"/>
    </p>
    <pre><code class="prism language-go">cd <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>
cp <span class="token operator">-</span>p named<span class="token punctuation">.</span>localhost xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone<span class="token punctuation">.</span>local       

vim <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone
$TTL 1D                                                           
@       IN SOA xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>  admin<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span> <span class="token punctuation">(</span>          
                                           <span class="token number">0</span>       <span class="token punctuation">;</span> serial <span class="token punctuation">.</span>      
                                           1D    <span class="token punctuation">;</span> refresh        
                                           1H    <span class="token punctuation">;</span> retry          
                                           1W   <span class="token punctuation">;</span>expire              
                                           3H <span class="token punctuation">)</span>  <span class="token punctuation">;</span>minimum    

             NS          xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>                           
             A           <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.10</span>       
<span class="token number">50</span> IN PTR                www<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>                  
<span class="token number">88</span> IN PTR                news<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>      
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c87b9a05cd0bd6fd0152f866a76f209a.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/524d5b31b15495cc98424b951ae0fa5f.png#pic_center"/>
    </p>
    <pre><code class="prism language-go">systemctl start named                       
systemctl stop firewalld                           
setenforce <span class="token number">0</span>                                     
   
vi <span class="token operator">/</span>etc<span class="token operator">/</span>resolv<span class="token punctuation">.</span>conf                                   
nameserver <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.10</span>

nslookup <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.50</span>
nslookup <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.88</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9ba9532e9036105ba93cda007fb90ad7.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/28554224a4afb3951605f666f350e6ba.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d86522d2d4791b7a8b513bef7d3190c5.png#pic_center"/>
    </p>
    <h3>
     <a id="4_269">
     </a>
     4、配置主、从域名服务器
    </h3>
    <h4>
     <a id="1_270">
     </a>
     （1）配置主服务器正向、反向解析
    </h4>
    <pre><code class="prism language-go">vim <span class="token operator">/</span>etc<span class="token operator">/</span>named<span class="token punctuation">.</span>conf

options <span class="token punctuation">{<!-- --></span>
        listen<span class="token operator">-</span>on  port <span class="token number">53</span>  <span class="token punctuation">{<!-- --></span> any<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>            
        # listen<span class="token operator">-</span>on<span class="token operator">-</span>v6 port <span class="token number">53</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">:</span> <span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>                 
  directory       <span class="token string">"/var/named"</span><span class="token punctuation">;</span>                           
  dump<span class="token operator">-</span> file      <span class="token string">"/var/ named/data/cache_ dump .db"</span>；       
  statistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named stats.txt"</span><span class="token punctuation">;</span>      
  memstatistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named_ mem_ stats. txt"</span><span class="token punctuation">;</span>     
  allow<span class="token operator">-</span>query   <span class="token punctuation">{<!-- --></span>any； <span class="token punctuation">}</span>                             
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-go">vim <span class="token operator">/</span>etc<span class="token operator">/</span> named<span class="token punctuation">.</span> rfc1912<span class="token punctuation">.</span> zone                           

zone <span class="token string">"xc.com"</span> IN <span class="token punctuation">{<!-- --></span>                                     
          <span class="token keyword">type</span> master<span class="token punctuation">;</span>                                     
          file <span class="token string">"xc.com.zone"</span><span class="token punctuation">;</span>                     #正向            
          allow<span class="token operator">-</span>update <span class="token punctuation">{<!-- --></span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
zone <span class="token string">"92.168.192.in-addr.arpa"</span> IN <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">type</span> master<span class="token punctuation">;</span>
        file <span class="token string">"xc.com.zone.local"</span><span class="token punctuation">;</span>                 #反向   
        allow<span class="token operator">-</span>update <span class="token punctuation">{<!-- --></span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-go">cd <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>

cp <span class="token operator">-</span>p named<span class="token punctuation">.</span>localhost xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone
vim <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone
@       IN SOA xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span> admin<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>  <span class="token punctuation">(</span>            
                                             ……
             NS       xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>                               #正向                        
              A        <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.10</span>                           
www  IN  A       <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.20</span>                                        
news IN  A        <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.30</span>
ftp  IN CNAME  www                                                 
<span class="token operator">*</span>    IN   A          <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.100</span> 



cp <span class="token operator">-</span>p named<span class="token punctuation">.</span>localhost xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone<span class="token punctuation">.</span>local
vim <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>zone<span class="token punctuation">.</span>local

@       IN SOA xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span> admin<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>  <span class="token punctuation">(</span>            
                                             ……
             NS       xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>                                #反向                                           
              A        <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.10</span>                           
<span class="token number">20</span>  IN  A          www<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>                                    
<span class="token number">30</span> IN  A         news<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>
</code></pre>
    <pre><code class="prism language-go">systemctl start named                       
systemctl stop firewalld                           
setenforce <span class="token number">0</span>                                     
   
vi <span class="token operator">/</span>etc<span class="token operator">/</span>resolv<span class="token punctuation">.</span>conf                                   
nameserver <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.10</span>


nslookup www<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com
nslookup news<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com
nslookup ftp<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com

nslookup <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.50</span>
nslookup <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.88</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5d7f2b3a20dbe8970b7079da3d4213d7.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5ac10e796d9e1466808f2fd27e570fdb.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e881d7fccde79b568bb3412325ceb4e5.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c0fd57dec03e8247541bae97b8777694.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9ba9532e9036105ba93cda007fb90ad7.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/28554224a4afb3951605f666f350e6ba.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/21c9ee217f64c7210fa7a1c8ca9d48d1.png#pic_center"/>
    </p>
    <h4>
     <a id="2_357">
     </a>
     （2）配置从服务器正向、反向解析
    </h4>
    <pre><code class="prism language-go">vim <span class="token operator">/</span>etc<span class="token operator">/</span>named<span class="token punctuation">.</span>conf

options <span class="token punctuation">{<!-- --></span>
        listen<span class="token operator">-</span>on  port <span class="token number">53</span>  <span class="token punctuation">{<!-- --></span> any<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>            
        # listen<span class="token operator">-</span>on<span class="token operator">-</span>v6 port <span class="token number">53</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">:</span> <span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>                 
  directory       <span class="token string">"/var/named"</span><span class="token punctuation">;</span>                           
  dump<span class="token operator">-</span> file      <span class="token string">"/var/ named/data/cache_ dump .db"</span>；       
  statistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named stats.txt"</span><span class="token punctuation">;</span>      
  memstatistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named_ mem_ stats. txt"</span><span class="token punctuation">;</span>     
  allow<span class="token operator">-</span>query   <span class="token punctuation">{<!-- --></span>any； <span class="token punctuation">}</span>                             
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-go">vim <span class="token operator">/</span>etc<span class="token operator">/</span> named<span class="token punctuation">.</span> rfc1912<span class="token punctuation">.</span> zone                           

zone <span class="token string">"xc.com"</span> IN <span class="token punctuation">{<!-- --></span>                                     
          <span class="token keyword">type</span> slave<span class="token punctuation">;</span>                                     
          masters <span class="token string">"192.168.92.10"</span><span class="token punctuation">;</span>                     #正向            
          file <span class="token string">"slaves/xc.com.zone"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
zone <span class="token string">"92.168.192.in-addr.arpa"</span> IN <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">type</span> slave<span class="token punctuation">;</span>
        masters <span class="token string">"192.168.92.10"</span><span class="token punctuation">;</span>                 #反向   
        <span class="token punctuation">;</span>file <span class="token string">"slaves/xc.com.zone.local"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-go">cd <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>named<span class="token operator">/</span>

<span class="token punctuation">[</span>root@localhost named<span class="token punctuation">]</span># ls
data  dynamic  named<span class="token punctuation">.</span>ca  named<span class="token punctuation">.</span>empty  named<span class="token punctuation">.</span>localhost  named<span class="token punctuation">.</span>loopback  slaves

</code></pre>
    <pre><code class="prism language-go">systemctl start named                       
systemctl stop firewalld                           
setenforce <span class="token number">0</span>                                     
   
vi <span class="token operator">/</span>etc<span class="token operator">/</span>resolv<span class="token punctuation">.</span>conf                                   
nameserver <span class="token number">192.168</span><span class="token number">.92</span><span class="token number">.10</span>


nslookup www<span class="token punctuation">.</span>xc<span class="token punctuation">.</span>com
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5d7f2b3a20dbe8970b7079da3d4213d7.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bf73af6a31df2e796b01038aea5e3e6d.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e4f7e77e3d6ad5eac05aac06526c315c.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3da56b29c3e9ade297139371c6c767d9.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6875b94db319e6a9f5d7267066bbcc54.png#pic_center"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0ca25abe67bbbe80e9af1d63c7dee385.png#pic_center"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f417869633132332f:61727469636c652f64657461696c732f313330323138353235" class_="artid" style="display:none">
 </p>
</div>


