---
layout: post
title: "前端每日一练使用-JavaScript-下载图片并保存到本地的方法详解"
date: 2024-03-13 11:20:17 +0800
description: "前端每日一练：实现下载图片功能​。_js 下载图片"
keywords: "js 下载图片"
categories: ['前端每日一练']
tags: ['面试', '前端', 'Node', 'Javascript']
artid: "136674937"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=136674937
    alt: "前端每日一练使用-JavaScript-下载图片并保存到本地的方法详解"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端每日一练：使用 JavaScript 下载图片并保存到本地的方法详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     在前端开发中，经常会遇到需要将图片从网络上下载并保存到本地的需求。本文将介绍如何使用 JavaScript 实现下载图片的功能，并提供详细的解释和代码示例。
    </p>
    <h5>
     1.
     <code>
      downloadImage
     </code>
     函数
    </h5>
    <p>
     首先，让我们来了解
     <code>
      downloadImage
     </code>
     函数的实现原理和作用。这个函数的主要功能是接收图片的 URL 和要保存的文件名，然后在用户点击下载链接时将图片保存到本地。
    </p>
    <pre><code class="language-javascript">function downloadIamge(src, imgName){​

    let image = new Image();​

    image.src = src;​

    image.setAttribute("crossOrigin", "anonymous");​

    image.onload = function() {​
    
        let c = document.createElement("canvas");​

        c.width = image.width;​

        c.height = image.height;​

        c.getContext("2d").drawImage(image, 0, 0, image.width, image.height);​
    
        let a = document.createElement("a"); ​

        a.download = imgName;​

        a.href = c.toDataURL("image/png");​

        a.click();​
    
    }​

}</code></pre>
    <h5>
     2. 实现原理解释
    </h5>
    <ul>
     <li>
      首先，创建一个新的 Image 对象，并将图片的 URL 赋值给它。
     </li>
     <li>
      通过设置
      <code>
       crossOrigin
      </code>
      属性为
      <code>
       "anonymous"
      </code>
      ，解决跨域访问的问题。
     </li>
     <li>
      当图片加载完成后，创建一个新的 canvas 元素，并将图片绘制到 canvas 上。
     </li>
     <li>
      创建一个新的
      <code>
       &lt;a&gt;
      </code>
      元素作为下载链接，并设置下载的文件名为
      <code>
       imgName
      </code>
      。
     </li>
     <li>
      将 canvas 的数据转换为 Data URL，并将其赋值给下载链接的
      <code>
       href
      </code>
      属性。
     </li>
     <li>
      最后，模拟用户点击下载链接，触发图片下载的操作。
     </li>
    </ul>
    <h5>
     3. 使用示例
    </h5>
    <p>
     下面是一个使用示例，展示了如何调用
     <code>
      downloadImage
     </code>
     函数下载图片到本地：
    </p>
    <pre><code class="language-javascript">const imageUrl = "https://example.com/image.jpg";
const imageName = "myImage.jpg";
downloadImage(imageUrl, imageName);
</code></pre>
    <p>
    </p>
    <h5>
     4. 注意事项
    </h5>
    <ul>
     <li>
      确保图片的 URL 是有效的，并且具有足够的权限允许跨域访问。
     </li>
     <li>
      如果图片来自其他域名，请确保在服务器端设置了正确的跨域资源共享（CORS）配置。
     </li>
    </ul>
    <p>
     通过本文的介绍，你现在应该了解如何使用 JavaScript 下载图片并保存到本地。这个方法非常实用，可以帮助你在前端开发中处理各种图片下载需求。
    </p>
   </div>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f53415858322f:61727469636c652f64657461696c732f313336363734393337" class_="artid" style="display:none">
 </p>
</div>


