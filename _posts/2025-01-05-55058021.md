---
layout: post
title: "微信小程序开发之用户系统-一键登录-获取session_key和openid"
date: 2025-01-05 11:04:13 +0800
description: "思来想去不愿自己的微信小程序是个单机版本.自己又不会写后台.现在借助leancloud可以实现微信小"
keywords: "微信一键登录泄露session key"
categories: ['微信小程序2点滴知识', '']
tags: ['无标签']
artid: "55058021"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=55058021
    alt: "微信小程序开发之用户系统-一键登录-获取session_key和openid"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序开发之用户系统 一键登录 获取session_key和openid
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      思来想去不愿自己的
      <a class="replace_word" href="http://lib.csdn.net/base/wechat" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(223,52,52); font-weight:bold" target="_blank" title="微信开发知识库">
       微信
      </a>
      小程序是个单机版本.自己又不会写后台.现在借助leancloud可以实现微信小程序一键登录功能.尝试后,做笔记.
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      第一步:
      <a href="https://unpkg.com/leancloud-storage@2.0.0-beta.4/dist/av-weapp.js" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       下载av-weapp.js
      </a>
      ,放到utils下.
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      第二步:使用
      <span style="padding:2px 4px">
       const AV = require('../../utils/av-weapp.js');路径根据具体情况而定.
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      第三步:做初始化.
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
    </p>
    <div class="dp-highlighter bg_javascript" style='font-family:Consolas,"Courier New",Courier,mono,serif; width:940.5px; overflow:hidden; padding-top:1px; position:relative; border-color:rgb(204,204,204); color:rgb(85,85,85); line-height:35px; margin:18px 0px!important; background-color:rgb(231,229,220)'>
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)">
       <strong>
        [javascript]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/qq_31383345/article/details/53193490#" rel="noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">
        view plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/qq_31383345/article/details/53193490#" rel="noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="position:absolute; left:511px; top:759px; width:18px; height:18px; z-index:99">
       </div>
       <span class="tracking-ad">
        <a href="https://code.csdn.net/snippets/1989423" rel="nofollow noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; background-color:inherit" target="_blank" title="在CODE上查看代码片">
         <img alt="在CODE上查看代码片" height="12" src="https://code.csdn.net/assets/CODE_ico.png" style="border:none; position:relative; top:1px; left:2px" width="12"/>
        </a>
       </span>
       <span class="tracking-ad">
        <a href="https://code.csdn.net/snippets/1989423/fork" rel="nofollow noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; background-color:inherit" target="_blank" title="派生到我的代码片">
         <img alt="派生到我的代码片" height="12" src="https://code.csdn.net/assets/ico_fork.svg" style="border:none; position:relative; top:2px; left:2px" width="12"/>
        </a>
       </span>
      </div>
     </div>
     <ol class="dp-c" start="1" style="padding:0px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)">
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         AV.init({
        </span>
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        appId:
        <span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">
         'EJx0NSfY********-gzGzoHsz'
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         ,
        </span>
       </span>
      </li>
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        appKey:
        <span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">
         'FBVPg5G**********T97SNQj'
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         ,
        </span>
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        });
       </span>
      </li>
     </ol>
    </div>
    <br style='color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'/>
    <span style='color:rgb(85,85,85); font-family:"microsoft yahei"; line-height:35px; font-size:24px'>
     第四步:在微信公众平台获取
    </span>
    <span style='font-size:15px; color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
     <span style="font-size:24px">
      AppID(小程序ID) 和
      <span style="line-height:22.4px">
       AppSecret(小程序密钥)
      </span>
     </span>
    </span>
    <span style='color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
    </span>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style='color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
      <span style="font-size:24px">
       <img alt="" src="https://img-blog.csdn.net/20161117003704105?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" style="border:none">
        <br/>
       </img>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style='color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
      <span style="font-size:24px">
       <br/>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style='color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
      <span style="font-size:24px">
       <span style="line-height:22.4px">
        第五步:leancloud控制台配置
        <span style="line-height:22.4px">
         AppID(小程序ID) 和
        </span>
        <span style="line-height:22.4px">
         AppSecret(小程序密钥)
        </span>
       </span>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style='color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
      <span style="font-size:24px">
       <br/>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style='color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
      <span style="font-size:24px">
       <img alt="" src="https://img-blog.csdn.net/20161117004010294?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" style="border:none">
        <br/>
       </img>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style='color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
      <span style="font-size:24px">
       <br/>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style='color:rgb(53,53,53); font-family:"Helvetica Neue","Hiragino Sans GB","Microsoft YaHei",黑体,Arial,sans-serif; line-height:22.4px'>
      <span style="font-size:24px">
       <img alt="" src="https://img-blog.csdn.net/20161117004128342?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" style="border:none">
        <br/>
       </img>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      第六步:用户登录
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <br/>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
    </p>
    <div class="dp-highlighter bg_javascript" style='font-family:Consolas,"Courier New",Courier,mono,serif; width:940.5px; overflow:hidden; padding-top:1px; position:relative; border-color:rgb(204,204,204); color:rgb(85,85,85); line-height:35px; margin:18px 0px!important; background-color:rgb(231,229,220)'>
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)">
       <strong>
        [javascript]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/qq_31383345/article/details/53193490#" rel="noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">
        view plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/qq_31383345/article/details/53193490#" rel="noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="position:absolute; left:511px; top:2465px; width:18px; height:18px; z-index:99">
       </div>
       <span class="tracking-ad">
        <a href="https://code.csdn.net/snippets/1989423" rel="nofollow noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; background-color:inherit" target="_blank" title="在CODE上查看代码片">
         <img alt="在CODE上查看代码片" height="12" src="https://code.csdn.net/assets/CODE_ico.png" style="border:none; position:relative; top:1px; left:2px" width="12"/>
        </a>
       </span>
       <span class="tracking-ad">
        <a href="https://code.csdn.net/snippets/1989423/fork" rel="nofollow noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; background-color:inherit" target="_blank" title="派生到我的代码片">
         <img alt="派生到我的代码片" height="12" src="https://code.csdn.net/assets/ico_fork.svg" style="border:none; position:relative; top:2px; left:2px" width="12"/>
        </a>
       </span>
      </div>
     </div>
     <ol class="dp-c" start="1" style="padding:0px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)">
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         &lt;span style=
        </span>
        <span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">
         "font-size:24px;"
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         &gt;AV.User.loginWithWeapp().then(user =&gt; {
        </span>
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">
         this
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         .globalData.user = user.toJSON();
        </span>
       </span>
      </li>
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        }).
        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">
         catch
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         (console.error);&lt;/span&gt;
        </span>
       </span>
      </li>
     </ol>
    </div>
    <br style='color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'/>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      登陆后在平台查看用户信息
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <img alt="" src="https://img-blog.csdn.net/20161117004615431?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" style="border:none">
       <br/>
      </img>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <br/>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      获取到: session_key和openid
     </span>
     <br/>
    </p>
    <br style='color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'/>
    <span style='color:rgb(85,85,85); font-family:"microsoft yahei"; line-height:35px; font-size:24px'>
     <img alt="" src="https://img-blog.csdn.net/20161117004643704?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" style="border:none"/>
     <br/>
    </span>
    <span style='color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
    </span>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      第七步:获取当前用户信息
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
     </span>
    </p>
    <div class="dp-highlighter bg_javascript" style='font-family:Consolas,"Courier New",Courier,mono,serif; width:940.5px; overflow:hidden; padding-top:1px; position:relative; border-color:rgb(204,204,204); color:rgb(85,85,85); line-height:35px; margin:18px 0px!important; background-color:rgb(231,229,220)'>
     <div class="bar" style="padding-left:45px">
      <div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)">
       <strong>
        [javascript]
       </strong>
       <a class="ViewSource" href="http://blog.csdn.net/qq_31383345/article/details/53193490#" rel="noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">
        view plain
       </a>
       <a class="CopyToClipboard" href="http://blog.csdn.net/qq_31383345/article/details/53193490#" rel="noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">
        copy
       </a>
       <div style="position:absolute; left:511px; top:3840px; width:18px; height:18px; z-index:99">
       </div>
       <span class="tracking-ad">
        <a href="https://code.csdn.net/snippets/1989423" rel="nofollow noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; background-color:inherit" target="_blank" title="在CODE上查看代码片">
         <img alt="在CODE上查看代码片" height="12" src="https://code.csdn.net/assets/CODE_ico.png" style="border:none; position:relative; top:1px; left:2px" width="12"/>
        </a>
       </span>
       <span class="tracking-ad">
        <a href="https://code.csdn.net/snippets/1989423/fork" rel="nofollow noopener noreferrer" style="text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; color:rgb(12,137,207); display:inline-block; width:16px; height:16px; background-color:inherit" target="_blank" title="派生到我的代码片">
         <img alt="派生到我的代码片" height="12" src="https://code.csdn.net/assets/ico_fork.svg" style="border:none; position:relative; top:2px; left:2px" width="12"/>
        </a>
       </span>
      </div>
     </div>
     <ol class="dp-c" start="1" style="padding:0px; border:none; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)">
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">
         const
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         user = AV.User.current();
        </span>
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">
         // 调用小程序 API，得到用户信息
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
        </span>
       </span>
      </li>
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        wx.getUserInfo({
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        success: ({userInfo}) =&gt; {
       </span>
      </li>
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">
         // 更新当前用户的信息
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        user.set(userInfo).save().then(user =&gt; {
       </span>
      </li>
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">
         // 成功，此时可在控制台中看到更新后的用户信息
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
        </span>
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">
         this
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         .globalData.user = user.toJSON();
        </span>
       </span>
      </li>
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        }).
        <span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">
         catch
        </span>
        <span style="margin:0px; padding:0px; border:none; background-color:inherit">
         (console.error);
        </span>
       </span>
      </li>
      <li style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        }
       </span>
      </li>
      <li class="alt" style="border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:18px; margin:0px!important; padding:0px 3px 0px 10px!important">
       <span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">
        });
       </span>
      </li>
     </ol>
    </div>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      注意:
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <span style="white-space:pre">
      </span>
      wx.request() 需要配置合法域名,否则会报错.
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; line-height:35px'>
     <span style="font-size:24px">
      <span style="white-space:pre">
      </span>
      在上一次笔记中已经写明.1.
      <strong>
       <a href="http://blog.csdn.net/qq_31383345/article/details/53193382" rel="noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
        如何配置合法域名
       </a>
       2.
      </strong>
      <a href="https://leancloud.cn/docs/weapp.html" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       在微信小程序中使用 LeanCloud
      </a>
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f73696e61745f3137373735393937:2f61727469636c652f64657461696c732f3535303538303231" class_="artid" style="display:none">
 </p>
</div>


