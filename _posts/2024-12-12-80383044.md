---
layout: post
title: "Centos卸载和安装Mysql数据库"
date: 2024-12-12 17:47:14 +0800
description: "在Linux上安装mysql数据库，我们可以去其官网上下载mysql数据库的rpm包，http://"
keywords: "直接卸载mysql会不会把里面的数据库都删除"
categories: ['数据库']
tags: ['无标签']
artid: "80383044"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=80383044
    alt: "Centos卸载和安装Mysql数据库"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Centos卸载和安装Mysql数据库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     在Linux上安装mysql数据库，我们可以去其官网上下载mysql数据库的rpm包，
    </p>
    <p>
     http://dev.mysql.com/downloads/mysql/5.6.html#downloads，大家可以根据自己的操作系统去下载对应的数据库文件，
    </p>
    <p>
     首先查看是否安装：
    </p>
    <pre>rpm -qa | grep mysql　　// 这个命令就会查看该操作系统上是否已经安装了mysql数据库</pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6ccd64ea2cc0288b8006f81bdfb80d2f.png">
      <br/>
     </img>
    </p>
    <p>
     有的话，我们就通过 rpm -e 命令 或者 rpm -e --nodeps 命令来卸载掉
    </p>
    <p>
    </p>
    <pre>rpm -e mysql　　// 普通删除模式
rpm -e --nodeps mysql　　// 强力删除模式，如果使用上面命令删除时，提示有依赖的其它文件，则用该命令可以对其进行强力删除</pre>
    <p>
     rpm -e --nodeps 文件名
     <span style="color:#009900;">
     </span>
     <span style="color:#009900;">
      //卸载 ， 文件名为使用rpm -qa|grep mysql 查询的内容
     </span>
    </p>
    <p>
     <span style="color:#009900;">
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/7805c9d9a64c64e29e167f9dc02ac8b1.png">
       <br/>
      </img>
     </span>
    </p>
    <p>
     <span style="color:#009900;">
      如下：已经完全卸载干净
     </span>
    </p>
    <p>
     <span style="color:#009900;">
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/f55ac6d476d725086e6979e3b9544154.png">
       <br/>
      </img>
     </span>
    </p>
    <p>
     <span style="color:#009900;">
      <span style="color:#333333;">
       删除etc目录下的my.cnf文件
      </span>
     </span>
    </p>
    <div style="line-height:1.8;">
     rm /etc/my.cnf
    </div>
    查看/var/lib/mysql文件夹是否存在，如果有，请删除，其中含有mysql残留的数据库，如果不删除，新安装的mysql是不会创建新数据库的
    <p>
     如果有，则删除
     <code class="bash functions">
      rm
     </code>
     <code class="bash plain">
      -rf
     </code>
     <code class="bash plain">
      /var/lib/mysql
     </code>
    </p>
    也可以通过yum来进行mysql的安装
    <p>
     我是通过yum的方式来进行mysql的数据库安装，首先我们可以输入 yum list | grep mysql 命令来查看yum上提供的mysql数据库可下载的版本：
    </p>
    <div class="cnblogs_code">
     <pre>yum list | grep mysql</pre>
    </div>
    <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/a697ada724667cb9f59dabdcb3ae18ea.png">
     <br/>
     <p>
     </p>
     <p>
      可以看到版本比较旧。
     </p>
     <h4>
      <span style="color:#FF0000;">
       离线安装：
      </span>
      <br/>
     </h4>
     <p>
      首先去官网下载离线包：https://dev.mysql.com/downloads/mysql/5.7.html#downloads
     </p>
     <p>
      <br/>
     </p>
     <p>
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/14837bc1caec066c443add1c4b31b6dc.png">
       <br/>
      </img>
     </p>
     <p>
      然后拷贝到Linux系统下（可用winscp）
     </p>
     <p>
      <img alt="" height="354" src="https://i-blog.csdnimg.cn/blog_migrate/39001b450254937e0a3dd62e492892ad.png" width="656"/>
     </p>
     <p>
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/9682f33a57279659c9ae49b7226b9314.png">
       <br/>
      </img>
     </p>
     <p>
      拷贝解压到安装目录：
     </p>
     <p>
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/2f87d7073b6878b06e6580fb307a9111.png"/>
     </p>
     <p>
      tar -zxvf
      <span style="font-size:14px;color:#333333;">
       mysql-5.6.36-linux-glibc2.5-x86_64.tar.gz
      </span>
     </p>
     <p>
      <span style="color:#333333;">
       将解压好的文件夹重命名为mysql
      </span>
     </p>
     <p>
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/2089e9c16a4a160c796d88509ef9ae7d.png"/>
     </p>
     <p>
      <span style="color:#333333;">
       在etc下新建配置文件my.cnf，并在该文件内添加以下代码：
      </span>
     </p>
     <p>
     </p>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        [mysql]
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        # 设置mysql客户端默认字符集
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        default-character-set=utf8
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        socket=/var/lib/mysql/mysql.sock
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        [mysqld]
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        skip-name-resolve
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        #设置3306端口
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        port=3306
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        socket=/var/lib/mysql/mysql.sock
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        # 设置mysql的安装目录
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        basedir=/home/yexin/Software/mysql
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        # 设置mysql数据库的数据的存放目录
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        datadir=
        <span style="font-size:12px;">
         /home/yexin/Software
        </span>
        /mysql/data
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        # 允许最大连接数
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        max_connections=200
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        # 服务端使用的字符集默认为8比特编码的latin1字符集
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        character-set-server=utf8
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        # 创建新表时将使用的默认存储引擎
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        default-storage-engine=INNODB
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        lower_case_table_names=1
       </span>
      </div>
      <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
       <span style="font-size:12px;">
        max_allowed_packet=16M
       </span>
      </div>
     </blockquote>
     <span style="color:#333333;">
      创建上步骤中用到的目录并将其用户设置为yexin
     </span>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       mkdir /var/lib/mysql
      </div>
      <div style="line-height:1.8;">
       mkdir /var/lib/mysql/mysql
      </div>
      <div style="line-height:1.8;">
       chown -R yexin:nimrod /var/lib/mysql
      </div>
      <div style="line-height:1.8;">
       chown -R yexin:nimrod /var/lib/mysql/mysql
      </div>
     </blockquote>
     <p>
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/831d46ff3be4e0a76ea21f2b0eef39bf.png"/>
     </p>
     <p>
      <span style="color:#333333;">
       进入安装mysql软件目录
      </span>
     </p>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       cd /home/yexin/Software/mysql
      </div>
      <div style="line-height:1.8;">
       chown -R yexin:nimrod ./
       <span style="color:#009900;">
        #修改当前目录拥有者为mysql用户
       </span>
      </div>
      <div style="line-height:1.8;">
       ./scripts/mysql_install_db --user=yexin
       <span style="color:#009900;">
        #安装数据库
       </span>
      </div>
      <div style="line-height:1.8;">
       chown -R yexin:nimrod data
       <span style="color:#009900;">
        #修改当前data目录拥有者为mysql用户
       </span>
      </div>
     </blockquote>
     <br/>
     <p>
      <span style="font-size:18px;color:#FF0000;">
       到此数据库安装完毕！
      </span>
      <br/>
     </p>
     <p>
     </p>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       <strong>
        二、配置MySQL
       </strong>
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       1、授予my.cnf的最大权限。
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       chown 777 /etc/my.cnf
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       设置开机自启动服务控制脚本：
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       2、复制启动脚本到资源目录
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       cp ./support-files/mysql.server /etc/rc.d/init.d/mysqld
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       3、增加mysqld服务控制脚本执行权限
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       chmod +x /etc/rc.d/init.d/mysqld
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       4、将mysqld服务加入到系统服务
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       chkconfig --add mysqld
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       5、检查mysqld服务是否已经生效
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       chkconfig --list mysqld
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;margin-left:28px;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       命令输出类似下面的结果：
      </span>
     </div>
     <div style="white-space:pre-wrap;margin-left:28px;text-indent:28px;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       mysqld 0:off 1:off 2:on 3:on 4:on 5:on 6:off
      </span>
     </div>
     <div style="white-space:pre-wrap;margin-left:28px;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       表明mysqld服务已经生效，在2、3、4、5运行级别随系统启动而自动启动，以后可以使用service命令控制mysql的启动和停止。
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       6、启动msql（停止mysqld服务：service mysqld stop）
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       service mysqld start
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       7、将mysql的bin目录加入PATH环境变量，编辑/etc/profile文件
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       vi /etc/profile
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       <span style="white-space:pre;">
       </span>
       在文件最后添加如下信息：
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       export PATH=$PATH:/usr/local/mysql/bin
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       <span style="white-space:pre;">
       </span>
       执行下面的命令使所做的更改生效：
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       . /etc/profile
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       8、以root账户登陆mysql，默认是没有密码
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       mysql -u root -p
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       9、设置root账户密码 注意下面的you password改成你的要修改的密码
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       use mysql
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       update user set password=password('you password') where user='root'and host='localhost';
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <div style="white-space:pre-wrap;line-height:1.8;font-size:14px;">
      <span style="color:#333333;">
       10、设置远程主机登录，注意下面的your username 和 your password改成你需要设置的用户和密码
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       GRANT ALL PRIVILEGES ON *.* TO'your username'@'%' IDENTIFIED BY 'your password' WITH GRANT OPTION;
      </div>
     </blockquote>
     <div style="line-height:1.8;">
      <span style="white-space:pre;">
      </span>
     </div>
     <blockquote style="margin:0 0 0 40px;border:none;padding:0px;">
      <div style="line-height:1.8;">
       FLUSH PRIVILEGES ;
      </div>
     </blockquote>
     <br/>
     <p>
      <br/>
     </p>
     <p>
      <br/>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <br/>
     </p>
     <p>
      <br/>
     </p>
     <p>
     </p>
     <p>
      <br/>
     </p>
     <p>
      <br/>
     </p>
     <p>
     </p>
     <p>
     </p>
    </img>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3235393438373137:2f61727469636c652f64657461696c732f3830333833303434" class_="artid" style="display:none">
 </p>
</div>


