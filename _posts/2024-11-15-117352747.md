---
layout: post
title: "HarmonyOS特点,HarmonyOS-基本控件的实现"
date: 2024-11-15 12:07:33 +0800
description: "本文详细介绍了HarmonyOS应用开发的基础控件，涉及创建DemoProject、Hap构建、轻量"
keywords: "harmonyos重写控件的测量逻辑需要满足哪些条件"
categories: ['未分类']
tags: ['Harmonyos']
artid: "117352747"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=117352747
  alt: "HarmonyOS特点,HarmonyOS-基本控件的实现"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     HarmonyOS特点,HarmonyOS 基本控件的实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div style="font-size:16px;">
     <p>
      感谢关注HarmonyOS，为了便于大家学习特将鸿蒙2.0基础教学内容整理如下：
     </p>
     <p>
      1、HarmonyOS应用开发―视频播放
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-hap1/index.html#0
     </p>
     <p>
      2、HarmonyOS应用开发―基本控件
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-hap2/index.html#0
     </p>
     <p>
      3、HarmonyOS应用开发―UI开发与预览
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-ui/index.html#0
     </p>
     <p>
      4、HarmonyOS应用开发―设备虚拟化特性开发
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-screenhardware/index.html#0
     </p>
     <p>
      5、HarmonyOS应用开发―HelloWorld应用开发E2E体验
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-HelloWorld/index.html#0
     </p>
     <p>
      6、HarmonyOS应用开发―有界面元程序交互
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-hap6/index.html#0
     </p>
     <p>
      7、HarmonyOS应用开发-分布式任务调度
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-hap5/index.html#0
     </p>
     <p>
      8、HarmonyOS应用开发―剪切板
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-hap4/index.html#0
     </p>
     <p>
      9、HarmonyOS应用开发―应用偏好数据读写
     </p>
     <p>
      https://developer.huawei.com/consumer/cn/codelab/HarmonyOS-hap3/index.html#0
     </p>
     <p>
      以下为HarmonyOS应用开发―基本控件节选部分，如想进一步了解，请点击：HarmonyOS应用开发―基本控件
     </p>
     <p>
      HarmonyOS应用开发-基本控件
     </p>
     <p>
      1、介绍
     </p>
     <p>
      您将建立什么
     </p>
     <p>
      在这个Codelab中，你将创建Demo Project，并将Demo编译成Hap，此示例应用程序展示了如何使用轻量级偏好数据库。
     </p>
     <p>
      您将会学到什么
     </p>
     <p>
      如何创建一个HarmonyOS Demo Project
     </p>
     <p>
      如何构建一个Hap并且将其部署到智慧屏真机
     </p>
     <p>
      通过此示例应用体验如何使用轻量级偏好数据库
     </p>
     <p>
      2. 您需要什么
     </p>
     <p>
      硬件要求
     </p>
     <p>
      操作系统：Windows10 64位
     </p>
     <p>
      内存：8G及以上。
     </p>
     <p>
      硬盘：100G及以上。
     </p>
     <p>
      分辨率：1280*800及以上
     </p>
     <p>
      软件要求
     </p>
     <p>
      DevEco Studio：需手动下载安装，详细步骤请参考《DevEco Studio使用指南》2.1.2
     </p>
     <p>
      JDK：DevEco Studio自动安装。
     </p>
     <p>
      Node.js：请手动下载安装，详细步骤请参考《DevEco Studio使用指南》2.1.3 下载和安装Node.js。
     </p>
     <p>
      HarmonyOS SDK：待DevEco Studio安装完成后，利用DevEco Studio来加载HarmonyOS SDK。详细步骤请参考《DevEco Studio使用指南》2.1.6 加载HarmonyOS SDK。
     </p>
     <p>
      Maven库依赖包：如需手动拷贝和配置，详细步骤请参考《DevEco Studio使用指南》2.3 离线方式配置Maven库。
     </p>
     <p>
      需要的知识点
     </p>
     <p>
      Java基础开发能力。
     </p>
     <p>
      3. 能力接入准备
     </p>
     <p>
      实现HarmonyOS应用开发，需要完成以下准备工作：
     </p>
     <p>
      环境准备。
     </p>
     <p>
      环境搭建。
     </p>
     <p>
      创建项目
     </p>
     <p>
      申请调试证书
     </p>
     <p>
      应用开发
     </p>
     <p>
      具体操作，请按照《DevEco Studio使用指南》中详细说明来完成。
     </p>
     <p>
      4. 代码片段
     </p>
     <p>
      1. 布局：
     </p>
     <p>
      布局代码：
     </p>
     <p>
      LayoutConfig config = new LayoutConfig(LayoutConfig.MATCH_PARENT, LayoutConfig.MATCH_PARENT);
     </p>
     <p>
      myLayout.setLayoutConfig(config);
     </p>
     <p>
      myLayout.setOrientation(Component.VERTICAL);
     </p>
     <p>
      ShapeElement element = new ShapeElement();
     </p>
     <p>
      element.setRgbColor(new RgbColor(255, 255, 255));
     </p>
     <p>
      myLayout.setBackground(element);
     </p>
     <p>
      log = createText("日志信息");
     </p>
     <p>
      myLayout.addComponent(log);
     </p>
     <p>
      writeBtn = createBtn("写入preferences数据", new RgbColor(0, 0, 255), 1002);
     </p>
     <p>
      readBtn = createBtn("读取preferences数据", new RgbColor(0, 0, 255), 1003);
     </p>
     <p>
      addObserver = createBtn("注册观察者", new RgbColor(255, 0, 0), 1004);
     </p>
     <p>
      private Text createText(String title) {
      <!-- -->
     </p>
     <p>
      Text text = new Text(this);
     </p>
     <p>
      DirectionalLayout.LayoutConfig config = new DirectionalLayout.LayoutConfig(DirectionalLayout.LayoutConfig.MATCH_CONTENT, DirectionalLayout.LayoutConfig.MATCH_CONTENT);
     </p>
     <p>
      text.setLayoutConfig(config);
     </p>
     <p>
      text.setText(title);
     </p>
     <p>
      text.setTextSize(48);
     </p>
     <p>
      text.setTextColor(new Color(0xFF0000FF));
     </p>
     <p>
      return text;
     </p>
     <p>
      }
     </p>
     <p>
      private Button createBtn(String title, RgbColor color, int id) {
      <!-- -->
     </p>
     <p>
      Button btn = new Button(this);
     </p>
     <p>
      LayoutConfig configBtn = new LayoutConfig(500, 100);
     </p>
     <p>
      configBtn.topMargin = 30;
     </p>
     <p>
      btn.setLayoutConfig(configBtn);
     </p>
     <p>
      btn.setText(title);
     </p>
     <p>
      btn.setId(id);
     </p>
     <p>
      btn.setTextSize(48);
     </p>
     <p>
      btn.setTextColor(new Color(0xFFFFFFFF));
     </p>
     <p>
      ShapeElement elementBtn = new ShapeElement();
     </p>
     <p>
      elementBtn.setRgbColor(color);
     </p>
     <p>
      elementBtn.setCornerRadius(12);
     </p>
     <p>
      btn.setBackground(elementBtn);
     </p>
     <p>
      myLayout.addComponent(btn);
     </p>
     <p>
      return btn;
     </p>
     <p>
      }
     </p>
     <p>
      2. Preferences使用：
     </p>
     <p>
      Preferences初始化
     </p>
     <p>
      private void initPreferences() {
      <!-- -->
     </p>
     <p>
      DatabaseHelper databaseHelper = new DatabaseHelper(this);
     </p>
     <p>
      String fileName = "user_info";
     </p>
     <p>
      preferences = databaseHelper.getPreferences(fileName);
     </p>
     <p>
      }
     </p>
     <p>
      写文件：
     </p>
     <p>
      preferences.putInt("age", Integer.parseInt(age.getText()));
     </p>
     <p>
      preferences.putString("name", name.getText());
     </p>
     <p>
      preferences.flushSync();
     </p>
     <p>
      读文件：
     </p>
     <p>
      int age = preferences.getInt("age", 0);
     </p>
     <p>
      String name = preferences.getString("name", "");
     </p>
     <p>
      ToastDialog toastDialog = new ToastDialog(PreferencesAbilitySlice.this);
     </p>
     <p>
      toastDialog.setText("read user data frome preferences name:" + name + ", age:" + age);
     </p>
     <p>
      toastDialog.show();
     </p>
     <p>
      观察者：
     </p>
     <p>
      注册：
     </p>
     <p>
      counter = new PreferencesChangeCounter();
     </p>
     <p>
      preferences.registerObserver(counter);
     </p>
     <p>
      private class PreferencesChangeCounter implements Preferences.PreferencesObserver {
      <!-- -->
     </p>
     <p>
      @Override
     </p>
     <p>
      public void onChange(Preferences preferences, String key) {
      <!-- -->
     </p>
     <p>
      if ("name".equals(key)) {
      <!-- -->
     </p>
     <p>
      String name = preferences.getString("name", "");
     </p>
     <p>
      log.setText("user data name is edit:" + name);
     </p>
     <p>
      }
     </p>
     <p>
      if ("age".equals(key)) {
      <!-- -->
     </p>
     <p>
      int age = preferences.getInt("age", 0);
     </p>
     <p>
      log.setText("user data age is edit:" + age);
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      删除：
     </p>
     <p>
      preferences.unregisterObserver(counter);
     </p>
     <p>
      3. 响应遥控器点击
     </p>
     <p>
      在zh-CN.json文件中写入：
     </p>
     <p>
      private void addFocusChangedListener(Component view) {
      <!-- -->
     </p>
     <p>
      view.setFocusChangedListener(new Component.FocusChangedListener() {
      <!-- -->
     </p>
     <p>
      @Override
     </p>
     <p>
      public void onFocusChange(Component component, boolean b) {
      <!-- -->
     </p>
     <p>
      ShapeElement shapeElement = (ShapeElement) view.getBackgroundElement();
     </p>
     <p>
      if (b) {
      <!-- -->
     </p>
     <p>
      shapeElement.setStroke(10, new RgbColor(0, 0, 0));
     </p>
     <p>
      focusView = view;
     </p>
     <p>
      } else {
      <!-- -->
     </p>
     <p>
      shapeElement.setStroke(0, new RgbColor(0, 0, 0));
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      });
     </p>
     <p>
      }
     </p>
     <p>
      @Override
     </p>
     <p>
      public boolean onKeyUp(int keyCode, KeyEvent keyEvent) {
      <!-- -->
     </p>
     <p>
      switch (keyCode) {
      <!-- -->
     </p>
     <p>
      case KeyEvent.KEY_DPAD_CENTER:
     </p>
     <p>
      case KeyEvent.KEY_ENTER:
     </p>
     <p>
      if(focusView == writeBtn) {
      <!-- -->
     </p>
     <p>
      preferences.putInt("age", index++);
     </p>
     <p>
      preferences.putString("name", "张三");
     </p>
     <p>
      preferences.flushSync();
     </p>
     <p>
      }
     </p>
     <p>
      if(focusView == readBtn) {
      <!-- -->
     </p>
     <p>
      int age = preferences.getInt("age", 0);
     </p>
     <p>
      String name = preferences.getString("name", "");
     </p>
     <p>
      log.setText("read user data frome preferences name:" + name + ", age:" + age);
     </p>
     <p>
      }
     </p>
     <p>
      if(focusView == addObserver) {
      <!-- -->
     </p>
     <p>
      if (addObserver.getText().equals("注册观察者")) {
      <!-- -->
     </p>
     <p>
      addObserver.setText("删除观察者");
     </p>
     <p>
      // 向preferences实例注册观察者
     </p>
     <p>
      counter = new PreferencesChangeCounter();
     </p>
     <p>
      preferences.registerObserver(counter);
     </p>
     <p>
      } else {
      <!-- -->
     </p>
     <p>
      addObserver.setText("注册观察者");
     </p>
     <p>
      // 向preferences实例注销观察者
     </p>
     <p>
      preferences.unregisterObserver(counter);
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      return true;
     </p>
     <p>
      case KeyEvent.KEY_DPAD_UP:
     </p>
     <p>
      int position = views.indexOf(focusView.getId());
     </p>
     <p>
      if (position &gt; 0) {
      <!-- -->
     </p>
     <p>
      switch (position) {
      <!-- -->
     </p>
     <p>
      case 1:
     </p>
     <p>
      writeBtn.requestFocus();
     </p>
     <p>
      break;
     </p>
     <p>
      case 2:
     </p>
     <p>
      readBtn.requestFocus();
     </p>
     <p>
      break;
     </p>
     <p>
      default:
     </p>
     <p>
      break;
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      return true;
     </p>
     <p>
      case KeyEvent.KEY_DPAD_DOWN:
     </p>
     <p>
      position = views.indexOf(focusView.getId());
     </p>
     <p>
      if (position &lt; 3) {
      <!-- -->
     </p>
     <p>
      switch (position) {
      <!-- -->
     </p>
     <p>
      case 0:
     </p>
     <p>
      readBtn.requestFocus();
     </p>
     <p>
      break;
     </p>
     <p>
      case 1:
     </p>
     <p>
      addObserver.requestFocus();
     </p>
     <p>
      break;
     </p>
     <p>
      default:
     </p>
     <p>
      break;
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      return true;
     </p>
     <p>
      }
     </p>
     <p>
      return false;
     </p>
     <p>
      }
     </p>
     <p>
      4.编译运行该应用
     </p>
     <p>
      通过hdc连接大屏设备
     </p>
     <p>
      先查看智慧屏IP：大屏设置-&gt;"网络与连接"-&gt;"网络"-&gt;"有线网络"
     </p>
     <p>
      在cmd或者IDE的Terminal输入命令：
     </p>
     <p>
      hdc tconn 192.168.3.9:5555
     </p>
     <p>
      运行hap
     </p>
     <p align="center">
      <img alt="1a4acd24eef3d52c6e894be098197ab8.png" src="https://i-blog.csdnimg.cn/blog_migrate/09a7428e34002e67617841231249ae35.png"/>
     </p>
     <p>
      提示：需要通过注册成开发者才能完成集成准备中的操作。
     </p>
     <p>
      干得好
     </p>
     <p>
      你已经成功完成了HarmonyOS应用开发E2E体验，学到了：
     </p>
     <p>
      如何创建一个HarmonyOS Demo Project
     </p>
     <p>
      如何构建一个Hap并且将其部署到真机上
     </p>
     <p>
      在HarmonyOS上如何使用HarmonyOS的轻量级偏好数据库
     </p>
     <p>
      到此这篇关于HarmonyOS应 基本控件的实现的文章就介绍到这了,更多相关HarmonyOS应 基本控件内容请搜索云海天教程以前的文章或继续浏览下面的相关文章希望大家以后多多支持云海天教程！
     </p>
     <p>
      原文链接：https://blog.csdn.net/weixin_48304573/article/details/108448738
     </p>
    </div>
   </div>
  </div>
  <div id="recommendDown">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33353635353939302f:61727469636c652f64657461696c732f313137333532373437" class_="artid" style="display:none">
 </p>
</div>
