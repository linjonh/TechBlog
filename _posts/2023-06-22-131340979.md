---
layout: post
title: "基于51单片机的频率计"
date: 2023-06-22 15:10:28 +0800
description: "频率计数器是计算机、通讯设备、音频视频等科研生产领域不可缺少的测量仪器。它是一种用十进制数字显示被测"
keywords: "51单片机频率计"
categories: ['']
tags: ['嵌入式硬件', '单片机']
artid: "131340979"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=131340979
    alt: "基于51单片机的频率计"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     基于51单片机的频率计
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     频率计
    </h2>
    <h3>
     <a id="51_1">
     </a>
     基于51单片机的频率计
    </h3>
    <h3>
     <a id="_2">
     </a>
     简介
    </h3>
    <p>
     1.频率计数器是计算机、通讯设备、音频视频等科研生产领域不可缺少的测量仪器。它是一种用十进制数字显示被测信号频率的数字测量仪器。它的基本功能是测量正弦信号，方波信号及其他各种单位时间内变化的物理量。在进行模拟、数字电路的设计、安装、调试过程中，由于其使用十进制数显示，测量迅速，精确度高，显示直观，经常要用到频率计。
     <br/>
     本文的频率计系统是以单片机（AT89C51）为核心，利用AT89C51单片机的T0和T1的定时计数功能来完成对输入的信号进行频率计数，由时基集成电路NE555P、四位共阴极数码管等元器件以及C语言程序组成。
     <br/>
     2.本设计拟实现的性能指标如下：
     <br/>
     本文利用AT89C51单片机的T0、T1的定时计数器功能，来完成对输入的信号进行频率计数，计数的频率结果通过4位动态数码管显示出来。能够对0－9999HZ的信号频率进行准确计数，计数误差不超过±1HZ。
    </p>
    <p>
     <strong>
      数码管显示
     </strong>
     <br/>
     数码管是一种半导体发光器件，其基本单元是发光二极管。数码管按段数分为七段数码管和八段数码管，八段数码管比七段数码管多一个发光二极管单元（多一个小数点显示）；按能显示多少个“8”可分为1位、2位、4位等等数码管：按发光二极管单元连接方式分为共阳极数码管和共阴极数码管。
     <br/>
     共阳数码管是指将所有发光二极管的阳极接到一起形成公共阳极(COM)的数码管，共阳数码管在应用时应将公共极COM接到+5V，当某一字段发光二极管的阴极为低电平时，相应字段就点亮，当某一字段的阴极为高电平时，相应字段就不亮。
     <br/>
     共阴数码管是指将所有发光二极管的阴极接到一起形成公共阴极(COM)的数码管，共阴数码管在应用时应将公共极COM接到地线GND上，当某一字段发光二极管的阳极为高电平时，相应字段就点亮，当某一字段的阳极为低电平时，相应字段就不亮。
     <br/>
     <img alt="数码管" src="https://i-blog.csdnimg.cn/blog_migrate/978423ab6e940844cabf1de901d6d63c.png#pic_center"/>
    </p>
    <p>
     <strong>
      定时电路NE555
     </strong>
     <br/>
     1、NE555是属于555系列的计时IC的其中的一种型号，555系列IC的接脚功能及运用都是相容的，只是型号不同的因其价格不同其稳定度、省电、可产生的振荡频率也不大相同；而555是一个用途很广且相当普遍的计时IC，只需少数的电阻和电容，便可产生数位电路所需的各种不同频率之脉波讯号。
     <br/>
     NE555的特点有：
     <br/>
     （1）只需简单的电阻器、电容器，即可完成特定的振荡延时作用。其延时范围极广，可由几微秒至几小时之久。
     <br/>
     （2）它的操作电源范围极大，可与TTL，CMOS等逻辑闸配合，也就是它的输出准位及输入触发准位，均能与这些逻辑系列的高、低态组合。
     <br/>
     （3）其输出端的供给电流大，可直接推动多种自动控制的负载。
     <br/>
     （4）它的计时精确度高、温度稳定度佳，且价格便宜。
     <br/>
     2、NE555引脚位配置说明下：
     <br/>
     <img alt="NE555引脚图" src="https://i-blog.csdnimg.cn/blog_migrate/e8bb18452584d9682d232379aa2ec2b6.png#pic_center">
      <br/>
      Pin 1 (接地) -地线(或共同接地) ，通常被连接到电路共同接地。
      <br/>
      Pin 2 (触发点) -这个脚位是触发NE555使其启动它的时间周期。触发信号上缘电压须大于2/3 VCC，下缘须低于1/3 VCC 。
      <br/>
      Pin 3 (输出) -当时间周期开始555的输出输出脚位，移至比电源电压少1.7伏的高电位。周期的结束输出回到O伏左右的低电位。于高电位时的最大输出电流大约200 mA 。
      <br/>
      Pin 4 (重置) -一个低逻辑电位送至这个脚位时会重置定时器和使输出回到一个低电位。它通常被接到正电源或忽略不用。
      <br/>
      Pin 5 (控制) -这个接脚准许由外部电压改变触发和闸限电压。当计时器经营在稳定或振荡的运作方式下,这输入能用来改变或调整输出频率。
      <br/>
      Pin 6 (重置锁定) - Pin 6重置锁定并使输出呈低态。当这个接脚的电压从1/3 VCC电压以下移至2/3 VCC以上时启动这个动作。
      <br/>
      Pin 7 (放电) -这个接脚和主要的输出接脚有相同的电流输出能力，当输出为ON时为LOW，对地为低阻抗，当输出为OFF时为HIGH，对地为高阻抗。
      <br/>
      Pin 8 (V +) -这是555个计时器IC的正电源电压端。供应电压的范围是+4.5伏特(最小值)至+16伏特(最大值)。
      <br/>
      3、参数功能特性：
      <br/>
      •供应电压4.5-18V
      <br/>
      •供应电流3-6 mA
      <br/>
      •输出电流225mA (max)
      <br/>
      •上升/下降时间100 ns
      <br/>
      4、NE555内部结构图
      <br/>
      <img alt="NE555内部结构图" src="https://i-blog.csdnimg.cn/blog_migrate/d77a204e113e9b8681438cbd99baf7b0.png#pic_center"/>
     </img>
    </p>
    <h3>
     <a id="_38">
     </a>
     硬件电路设计
    </h3>
    <p>
     1、NE555方波产生信号电路图
     <br/>
     所产生方波公式：T1=0.693(RA+RB)
     <em>
      C
      <br/>
      T2=0.693RB
     </em>
     C
     <br/>
     F=1.433/(RA+2RB)*C
     <img alt="NE555方波信号产生电路原理图" src="https://i-blog.csdnimg.cn/blog_migrate/0e75a63a79e847ad351bb4af3f613c6c.png#pic_center">
      <br/>
      <strong>
       源文件下载
      </strong>
      <br/>
      链接：
      <a href="https://download.csdn.net/download/weixin_44134630/19716003?spm=1001.2014.3001.5503">
       源文件下载
      </a>
     </img>
    </p>
    <h3>
     <a id="httpsimgblogcsdnimgcnf128186241a749478449ba72051e2eaapngpic_center_45">
     </a>
     仿真图
     <img alt="频率计仿真电路图" src="https://i-blog.csdnimg.cn/blog_migrate/7d3c9873e2847dd83a8622ebf03b3d85.png#pic_center"/>
    </h3>
    <h3>
     <a id="_47">
     </a>
     代码
    </h3>
    <pre><code class="prism language-c"><span class="token comment">//包含头文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;reg52.h&gt;</span> </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;math.h&gt;</span></span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> code dispbit<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//反扫 （高位接高位）</span>
<span class="token comment">//unsigned char code dispbit[]={0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01}; //正扫 （高位接低位）</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> code dispcode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">0xc0</span><span class="token punctuation">,</span><span class="token number">0xf9</span><span class="token punctuation">,</span><span class="token number">0xa4</span><span class="token punctuation">,</span><span class="token number">0xb0</span><span class="token punctuation">,</span><span class="token number">0x99</span><span class="token punctuation">,</span><span class="token number">0x92</span><span class="token punctuation">,</span><span class="token number">0x82</span><span class="token punctuation">,</span><span class="token number">0xf8</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x90</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//数码管显示码0-9 （a b c d e f g dp）</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> dispbuf<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">//显示数据暂存数组</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 					  <span class="token comment">//频率值暂存数组</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> T0count<span class="token punctuation">;</span> 					  <span class="token comment">//计数器计满次数，计满一次对应的脉冲数为65536个</span>
<span class="token keyword">unsigned</span> <span class="token keyword">int</span> timecount<span class="token punctuation">;</span> 				  <span class="token comment">//定时器定时1秒的变量，每次对应为50ms，计20次对应就是1秒，然后计算一秒内的计数器脉冲个数</span>
bit flag<span class="token punctuation">;</span> 								  <span class="token comment">//计时到1秒时该标志位置1，进行脉冲数的运算，得出结果送显示，然后该位清零，重新开始脉冲计数</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> x<span class="token punctuation">;</span> 						  <span class="token comment">//计算脉冲的数据范围一般比较大，所以用无符号长整形变量定义该变量</span>

sbit dian<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">7</span><span class="token punctuation">;</span>							  <span class="token comment">//位定义小数点，用于kHz显示</span>
 
<span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>							  <span class="token comment">//显示函数</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> j<span class="token punctuation">;</span>						  <span class="token comment">//定义变量用于显示延时	</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>dispbuf<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span>					  <span class="token comment">//如果十万位不为0</span>
	<span class="token punctuation">{<!-- --></span>
		P2<span class="token operator">=</span>dispbit<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		P0<span class="token operator">=</span>dispcode<span class="token punctuation">[</span>dispbuf<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 		  <span class="token comment">//十万位正常显示数字</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">;</span>j<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		P0<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>dispbuf<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0</span><span class="token operator">||</span>dispbuf<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span>	  <span class="token comment">//如果十万位和万位都不等于零</span>
	<span class="token punctuation">{<!-- --></span>
		P2<span class="token operator">=</span>dispbit<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		P0<span class="token operator">=</span>dispcode<span class="token punctuation">[</span>dispbuf<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 		  <span class="token comment">//万位正常显示</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">;</span>j<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		P0<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 

	P2<span class="token operator">=</span>dispbit<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>						  <span class="token comment">//同上</span>
	P0<span class="token operator">=</span>dispcode<span class="token punctuation">[</span>dispbuf<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	dian<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>								  <span class="token comment">//该位显示小数点</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">;</span>j<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	P0<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>

	P2<span class="token operator">=</span>dispbit<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	P0<span class="token operator">=</span>dispcode<span class="token punctuation">[</span>dispbuf<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">;</span>j<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	P0<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>

	P2<span class="token operator">=</span>dispbit<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	P0<span class="token operator">=</span>dispcode<span class="token punctuation">[</span>dispbuf<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">;</span>j<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	P0<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>

	P2<span class="token operator">=</span>dispbit<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	P0<span class="token operator">=</span>dispcode<span class="token punctuation">[</span>dispbuf<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">;</span>j<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	P0<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> 						  <span class="token comment">//主函数</span>
<span class="token punctuation">{<!-- --></span> 
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">;</span> 
	TMOD<span class="token operator">=</span><span class="token number">0x15</span><span class="token punctuation">;</span> 							  <span class="token comment">//定义T1为定时模式，T0位计数模式</span>
	TH0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 
	TL0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 								  <span class="token comment">//计数器清零</span>
	TH1<span class="token operator">=</span><span class="token number">0x3c</span><span class="token punctuation">;</span> 
	TL1<span class="token operator">=</span><span class="token number">0xb0</span><span class="token punctuation">;</span> 							  <span class="token comment">//定时器赋值（定时50ms）</span>
	TR1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> 								  <span class="token comment">//打开定时器T1</span>
	TR0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> 								  <span class="token comment">//打开计数器T0</span>
	ET0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> 								  <span class="token comment">//打开中断允许</span>
	ET1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>								  <span class="token comment">//打开中断允许</span>
	EA<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> 								  <span class="token comment">//打开中断总开关</span>

	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 							  <span class="token comment">//进入循环，因为括号内为常数1，不会变化，所以该表达式一直成立，又称死循环</span>
	<span class="token punctuation">{<!-- --></span>	
		<span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>						  <span class="token comment">//调用显示函数</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span> 						  <span class="token comment">//判断1秒时间是否到</span>
		<span class="token punctuation">{<!-- --></span> 
			flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 					  <span class="token comment">//标志位清零，计算完脉冲数后重新开始计时计数</span>
			x<span class="token operator">=</span>T0count<span class="token operator">*</span><span class="token number">65536</span><span class="token operator">+</span>TH0<span class="token operator">*</span><span class="token number">256</span><span class="token operator">+</span>TL0<span class="token punctuation">;</span>  <span class="token comment">//读取1秒时间内的计数个数（T0count为每次计数超过65536时进入计数中断加1）</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> 			  <span class="token comment">//for循环将暂存数组内数据清零</span>
			<span class="token punctuation">{<!-- --></span> 
				temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 
			<span class="token punctuation">}</span> 	  
			i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 						  <span class="token comment">//i清零</span>
			<span class="token keyword">while</span><span class="token punctuation">(</span>x<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span> 				  <span class="token comment">//将x拆分为6个一位数</span>
			<span class="token punctuation">{<!-- --></span> 
				temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span> 			  <span class="token comment">//如果x/10不为0，将x除以10的余数赋值temp【i】</span>
				x<span class="token operator">=</span>x<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span> 				  <span class="token comment">//然后将x/10的商赋值给x</span>
				i<span class="token operator">++</span><span class="token punctuation">;</span> 					  <span class="token comment">//i++</span>
			<span class="token punctuation">}</span> 
			temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token punctuation">;</span> 					  <span class="token comment">//最高位直接赋值给temp【i】</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> 			  <span class="token comment">//for循环用于将数据送入显示暂存数组</span>
			<span class="token punctuation">{<!-- --></span> 
				dispbuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> 	  <span class="token comment">//赋值语句</span>
			<span class="token punctuation">}</span> 
			T0count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 					  <span class="token comment">//计数器中断次数清零</span>
			TH0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 
			TL0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 						  <span class="token comment">//计数器清零</span>
			TR0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
			TR1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>						  <span class="token comment">//重新打开定时计数器</span>
		<span class="token punctuation">}</span> 
	<span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
  
<span class="token keyword">void</span> <span class="token function">t0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">1</span>					  <span class="token comment">//计数器中断函数</span>
<span class="token punctuation">{<!-- --></span> 
  T0count<span class="token operator">++</span><span class="token punctuation">;</span> 							  <span class="token comment">//计数超过65536，就产生一次中断</span>
<span class="token punctuation">}</span> 
  
<span class="token keyword">void</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">3</span>					  <span class="token comment">//定时器中断函数</span>
<span class="token punctuation">{<!-- --></span> 
  TH1<span class="token operator">=</span><span class="token number">0x3c</span><span class="token punctuation">;</span> 
  TL1<span class="token operator">=</span><span class="token number">0xb0</span><span class="token punctuation">;</span> 							  <span class="token comment">//50ms进入一次中断，进入中断后要重新赋初值</span>
  timecount<span class="token operator">++</span><span class="token punctuation">;</span> 							  <span class="token comment">//每进一次中断就是50ms，该变量加一</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>timecount<span class="token operator">==</span><span class="token number">20</span><span class="token punctuation">)</span> 					  <span class="token comment">//该变量加到20次时，代表1秒到了</span>
    <span class="token punctuation">{<!-- --></span> 
      TR0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>							  <span class="token comment">//关闭计数器</span>
	  TR1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 							  <span class="token comment">//关闭定时器</span>
      timecount<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 						  <span class="token comment">//计时变量清零，准备下次定时</span>
      flag<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> 							  <span class="token comment">//一秒时间到，该标志位置1，主函数中执行脉冲数运算与显示函数</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
<span class="token comment">/**************************这里是函数的结尾END***************************/</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343133343633302f:61727469636c652f64657461696c732f313331333430393739" class_="artid" style="display:none">
 </p>
</div>


