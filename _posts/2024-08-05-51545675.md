---
layout: post
title: "搜索jar包中的文件"
date: 2024-08-05 22:24:31 +0800
description: "下面的程序可以根据文件名或者文件内容搜索jar包中的文件。package account;impor"
keywords: "怎么在 jar包里面 通过文件名 获取对应的文件"
categories: ['Java']
tags: ['无标签']
artid: "51545675"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=51545675
    alt: "搜索jar包中的文件"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     搜索jar包中的文件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     下面的程序可以根据文件名或者文件内容搜索jar包中的文件。
    </p>
    <p>
     <br/>
    </p>
    <p>
     package account;
     <br/>
     import java.io.BufferedReader;
     <br/>
     import java.io.File;
     <br/>
     import java.io.InputStreamReader;
     <br/>
     import java.util.ArrayList;
     <br/>
     import java.util.Enumeration;
     <br/>
     import java.util.List;
     <br/>
     import java.util.zip.ZipEntry;
     <br/>
     import java.util.zip.ZipFile;
     <br/>
     <br/>
     <br/>
     /**
     <br/>
     * 寻找指定路径下jar包中含特定字符串的文件
     <br/>
     * @author 千年独步
     <br/>
     */
     <br/>
     public class FindStrInJar {
     <!-- -->
     <br/>
     <span style="white-space:pre">
     </span>
     <br/>
     public String condition;  //查询的条件
     <br/>
     <br/>
     <br/>
     public ArrayList&lt;String&gt; jarFiles = new ArrayList&lt;String&gt;();
     <br/>
     <br/>
     <br/>
     public FindStrInJar() {
     <!-- -->
     <br/>
     }
     <br/>
     <br/>
     <br/>
     public FindStrInJar(String condition) {
     <!-- -->
     <br/>
     this.condition = condition;
     <br/>
     }
     <br/>
     <br/>
     public FindStrInJar(String condition, String exclude) {
     <!-- -->
     <br/>
     this.condition = condition;
     <br/>
     }
     <br/>
     <br/>
     <br/>
     public void setCondition(String condition) {
     <!-- -->
     <br/>
     this.condition = condition;
     <br/>
     }
     <br/>
     <br/>
     public List&lt;String&gt; find(String dir, boolean recurse) {
     <!-- -->
     <br/>
     searchDir(dir, recurse);
     <br/>
     return this.jarFiles;
     <br/>
     }
     <br/>
     <br/>
     public List&lt;String&gt; getFilenames() {
     <!-- -->
     <br/>
     return this.jarFiles;
     <br/>
     }
     <br/>
     <br/>
     <br/>
     protected String getClassName(ZipEntry entry) {
     <!-- -->
     <br/>
     StringBuffer className = new StringBuffer(entry.getName().replace("/", "."));
     <br/>
     return className.toString();
     <br/>
     }
     <br/>
     <br/>
     <br/>
     <span style="white-space:pre">
     </span>
     protected void searchDir(String dir, boolean recurse) {
     <!-- -->
     <br/>
     try {
     <!-- -->
     <br/>
     File d = new File(dir);
     <br/>
     if (!d.isDirectory()) {
     <!-- -->
     <br/>
     return;
     <br/>
     }
     <br/>
     File[] files = d.listFiles();
     <br/>
     for (int i = 0; i &lt; files.length; i++) {
     <!-- -->
     <br/>
     if (recurse &amp;&amp; files[i].isDirectory()) {
     <!-- -->
     <br/>
     searchDir(files[i].getAbsolutePath(), true);
     <br/>
     } else {
     <!-- -->
     <br/>
     String filename = files[i].getAbsolutePath();
     <br/>
     if (filename.endsWith(".jar")||filename.endsWith(".zip")) {
     <!-- -->
     <br/>
     ZipFile zip = new ZipFile(filename);
     <br/>
     Enumeration&lt;? extends ZipEntry&gt; entries = zip.entries();
     <br/>
     while (entries.hasMoreElements()) {
     <!-- -->
     <br/>
     ZipEntry entry = entries.nextElement();
     <br/>
     String thisClassName = getClassName(entry);
     <br/>
     <br/>
     //按照文件内容搜索文件。不搜索扩展名为.class的文件
     <br/>
     //                            if(thisClassName.lastIndexOf(".class")==-1){
     <!-- -->
     <br/>
     //
     <span style="white-space:pre">
     </span>
     BufferedReader r = new BufferedReader(new InputStreamReader(zip.getInputStream(entry)));
     <br/>
     //
     <span style="white-space:pre">
     </span>
     while(r.read()!=-1){
     <!-- -->
     <br/>
     //
     <span style="white-space:pre">
     </span>
     String tempStr = r.readLine();
     <br/>
     //
     <span style="white-space:pre">
     </span>
     if(null!=tempStr &amp;&amp; tempStr.indexOf(condition)&gt;-1){
     <!-- -->
     <br/>
     //
     <span style="white-space:pre">
     </span>
     this.jarFiles.add(filename + "  ---&gt;  " + thisClassName);
     <br/>
     //
     <span style="white-space:pre">
     </span>
     break;
     <br/>
     //
     <span style="white-space:pre">
     </span>
     }
     <br/>
     //
     <span style="white-space:pre">
     </span>
     }
     <br/>
     //                            }
     <br/>
     <br/>
     //按照文件名搜索文件
     <br/>
     if (thisClassName.contains(condition)) {
     <!-- -->
     <br/>
     this.jarFiles.add(filename + "  ---&gt;  " + thisClassName);
     <br/>
     }
     <br/>
     //获取扩展名为properties的文件
     <br/>
     //                            if(thisClassName.lastIndexOf("properties")&gt;-1) {
     <!-- -->
     <br/>
     //                              this.jarFiles.add(filename + "  ---&gt;  " + thisClassName);
     <br/>
     //                            }
     <br/>
     }
     <br/>
     zip.close();
     <br/>
     }
     <br/>
     }
     <br/>
     }
     <br/>
     } catch (Exception e) {
     <!-- -->
     <br/>
     e.printStackTrace();
     <br/>
     }
     <br/>
     }
     <br/>
     <br/>
     <br/>
     public static void main(String args[]) {
     <!-- -->
     <br/>
     //FindStrInJar findInJar = new FindStrInJar("springTransactionManager"); //要寻找的字符串
     <br/>
     FindStrInJar findInJar = new FindStrInJar("productServiceConsumer"); //要寻找的字符串
     <br/>
     List&lt;String&gt; jarFiles = findInJar.find("E:\\workspace\\AccountServiceCenter\\lib", true);
     <br/>
     if (jarFiles.size() == 0) {
     <!-- -->
     <br/>
     System.out.println("Not Found");
     <br/>
     } else {
     <!-- -->
     <br/>
     for (int i = 0; i &lt; jarFiles.size(); i++) {
     <!-- -->
     <br/>
     System.out.println(jarFiles.get(i));
     <br/>
     }
     <br/>
     }
     <br/>
     }
     <br/>
     <br/>
     }
     <br/>
    </p>
    <p>
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f6b656b6574727472:2f61727469636c652f64657461696c732f3531353435363735" class_="artid" style="display:none">
 </p>
</div>


