---
layout: post
title: "微信小程序倒计时功能"
date: 2025-01-19 11:35:01 +0800
description: "倒计时功能是一个比较常见的功能，比如用户获取验证码就需要用到。这里记录一下在微信小程序里面倒计时功能"
keywords: "微信小程序当前时间倒计时怎么设置"
categories: ['']
tags: ['微信', '小程序', '倒计时']
artid: "78485635"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=78485635
    alt: "微信小程序倒计时功能"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序倒计时功能
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h5 id="倒计时功能是一个比较常见的功能比如用户获取验证码就需要用到这里记录一下在微信小程序里面倒计时功能的简单实现">
     <strong>
      倒计时功能是一个比较常见的功能，比如用户获取验证码就需要用到。这里记录一下在微信小程序里面倒计时功能的简单实现
     </strong>
    </h5>
    <ul>
     <li>
      直接看看代码吧
     </li>
    </ul>
    <pre class="prettyprint"><code class="hljs javascript"><span class="hljs-comment">//倒计时60秒</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">countDown</span><span class="hljs-params">(that,count)</span> {<!-- --></span>
  <span class="hljs-keyword">if</span> (count == <span class="hljs-number">0</span>) {
    that.setData({
      timeCountDownTop: <span class="hljs-string">'获取验证码'</span>,
      counting:<span class="hljs-literal">false</span>
    })
    <span class="hljs-keyword">return</span>;
  }

  that.setData({
    counting:<span class="hljs-literal">true</span>,
    timeCountDownTop: count + <span class="hljs-string">'秒后重新获取'</span>,
  })

  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<!-- --></span>
    count--;
    countDown(that, count);
  }, <span class="hljs-number">1000</span>);
}</code></pre>
    <ul>
     <li>
      在需要倒计时的地方调用
     </li>
    </ul>
    <pre class="prettyprint"><code class="hljs javascript">Page({
    data:{
        counting:<span class="hljs-literal">false</span>
    },

    <span class="hljs-comment">//生成验证码</span>
    generateVerifyCode:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">if</span> (!that.data.counting) {
          wx.showToast({
            title: <span class="hljs-string">'验证码已发送'</span>,
          })

          <span class="hljs-comment">//开始倒计时60秒</span>
          countDown(that, <span class="hljs-number">60</span>);
        } 
    },
})</code></pre>
    <h5 id="下面简单介绍下功能的实现">
     <strong>
      下面简单介绍下功能的实现
     </strong>
    </h5>
    <ul>
     <li>
      首先倒计时的方法是写在Page的外面，这个别搞错了
     </li>
     <li>
      实现倒计时关键的地方在于setTimeout方法，也即下面这段代码。setTimeout方法可以设置在指定的时间间隔执行某个函数。应用的格式是setTimeout(function(),time),function就是对应要执行的方法，time就是时间间隔，这里的1000表示1000毫秒，也就是间隔1秒执行一次countDown方法。
     </li>
    </ul>
    <pre class="prettyprint"><code class="hljs lua">setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    count<span class="hljs-comment">--;</span>
    countDown(that, count);
  }, <span class="hljs-number">1000</span>);</code></pre>
    <ul>
     <li>
      countDown方法中利用count字段来设置倒计时的时间，比如这里是60秒
     </li>
     <li>
      countDown方法中把that也传递进去是为了在倒计时状态改变时利用setData方法更新页面
     </li>
     <li>
      countDown方法中利用counting字段来判断是否已经在倒计时了，避免重复开始倒计时
     </li>
     <li>
      倒计时结束是通过count来判断，通过return直接退出
     </li>
    </ul>
    <h5 id="以上就是微信小程序里面倒计时功能的简单实现啦希望对大家有用">
     <strong>
      以上就是微信小程序里面倒计时功能的简单实现啦，希望对大家有用！
     </strong>
    </h5>
    <hr/>
    <p>
    </p>
    <center>
     <br/>
     欢迎关注我的公众号，和我一起每天进步一点点！
     <br/>
     <img alt="这里写图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e09dd5a089f31710126d61972c3122f1.jpeg" title="">
     </img>
    </center>
    <p>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d7974683133313431333134:2f61727469636c652f64657461696c732f3738343835363335" class_="artid" style="display:none">
 </p>
</div>


