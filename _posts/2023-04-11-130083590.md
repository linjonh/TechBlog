---
layout: post
title: python-ç®€å•å°æ¸¸æˆä¹‹è´ªåƒè›‡
date: 2023-04-11 15:16:25 +0800
categories: [game]
tags: [å¼€å‘è¯­è¨€,python,pygame,pycharm]
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=130083590
    alt: python-ç®€å•å°æ¸¸æˆä¹‹è´ªåƒè›‡
artid: 130083590
render_with_liquid: false
---
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     python ç®€å•å°æ¸¸æˆä¹‹è´ªåƒè›‡
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     ä½¿ç”¨pythonè‡ªå¸¦çš„åº“å®Œæˆå°æ¸¸æˆï¼š
    </h2>
    <p>
     æ¸¸æˆæ‹¥æœ‰å…ƒç´ ï¼šè´ªåƒè›‡åŸºç¡€åŠŸèƒ½ï¼Œå¾—åˆ†ç»Ÿè®¡ï¼Œæœ€é«˜å¾—åˆ†ç»Ÿè®¡ï¼Œéšœç¢å¢™ã€‚
    </p>
    <p>
     å…³é”®ï¼šä½¿ç”¨äºŒç»´è¡¨å»ä¿å­˜åœ°å›¾æ•°æ®ï¼Œé€šè¿‡å­˜å‚¨ä¸åŒçš„æ•°å­—å»åˆ¤æ–­åœ°å›¾ä¿¡æ¯ï¼Œéšæœºç”Ÿæˆçš„é£Ÿç‰©å’Œåƒæ‰é£Ÿç‰©åğŸçš„å˜åŒ–ã€‚
    </p>
    <blockquote>
     <p>
      å‚è€ƒæ–‡ç« ï¼š
      <a href="https://blog.csdn.net/znix1116/article/details/116102909" title="(33æ¡æ¶ˆæ¯) ç”¨pythonè‡ªå¸¦çš„tkinteråšæ¸¸æˆï¼ˆä¸€ï¼‰â€”â€” è´ªåƒè›‡ ç¯‡_python tkinteræ¸¸æˆ_Juni Zhuçš„åšå®¢-CSDNåšå®¢">
       (33æ¡æ¶ˆæ¯) ç”¨pythonè‡ªå¸¦çš„tkinteråšæ¸¸æˆï¼ˆä¸€ï¼‰â€”â€” è´ªåƒè›‡ ç¯‡_python tkinteræ¸¸æˆ_Juni Zhuçš„åšå®¢-CSDNåšå®¢
      </a>
     </p>
    </blockquote>
    <hr/>
    <p>
     å›¾ç‰‡
     <img alt="81da9ee18e724612acc33e5ff9a5d64e.png" src="https://i-blog.csdnimg.cn/blog_migrate/b1607f7564e975b2013ceed1ac79c71b.png">
      <img alt="04d04dd94a574971939818a187d0fd0e.png" src="https://i-blog.csdnimg.cn/blog_migrate/7f6fe9e0ff4fb515a904cb87466892f5.png">
       <img alt="7eb0b27780284299965621d4f7bec041.png" src="https://i-blog.csdnimg.cn/blog_migrate/b6e363c9698ce0ceb614569676d07fea.png"/>
      </img>
     </img>
    </p>
    <p>
    </p>
    <h2>
     ä½¿ç”¨åº“ï¼š
    </h2>
    <pre><code class="language-python">import tkinter as tk
from tkinter.messagebox import showinfo
import random</code></pre>
    <blockquote>
     <p>
      1. åˆå§‹åŒ–æ•°æ®ï¼šåœ¨è¿™é‡Œåˆå§‹åŒ–æ‰€æœ‰çš„æ¸¸æˆå‚æ•°åŒ…æ‹¬ï¼ˆçª—å£å¤§å° é¢œè‰²ï¼Œåˆ†æ•°ï¼Œè¿åŠ¨é€Ÿåº¦ç­‰...ï¼‰ã€å¯è‡ªå·±ä¿®æ”¹ã€‘ï¼š
     </p>
    </blockquote>
    <pre><code class="language-python">    def __init__(self):

        self.window = None          # å®ä¾‹åŒ–çš„çª—ä½“
        self.canvas = None          # å®ä¾‹åŒ–çš„ç”»å¸ƒ
        self.loop = 0               # æš‚åœæ ‡è®°ï¼Œ1ä¸ºå¼€å¯ï¼Œ0ä¸ºæš‚åœ
        self.loop_id = None         # å®ä¾‹åŒ–loopï¼Œç”¨æ¥å–æ¶ˆå¾ªç¯
        self.game_map = []          # æ•´ä¸ªæ¸¸æˆçš„åœ°å›¾
        self.snake_body = []        # è›‡èº«çš„åæ ‡é›†
        self.food_xy = []           # é£Ÿç‰©çš„åæ ‡
        self.head_x = 0             # è›‡å¤´çš„Xåæ ‡
        self.head_y = 0             # è›‡å¤´çš„Yåæ ‡
        self.dd = [0]               # è®°å½•æŒ‰é”®æ–¹å‘
        self.score = 0              # è®°å½•å¾—åˆ†
        self.score_max = 0          # å†å²æœ€é«˜å¾—åˆ†
        self.len = 3                # è›‡èº«åˆå§‹é•¿åº¦ï¼ˆæœ€å°è®¾å®šå€¼ä¸º1ï¼Œä¸åŒ…æ‹¬è›‡å¤´ï¼‰
        self.body_len = self.len    # è›‡èº«å½“å‰é•¿åº¦
        self.FPS = 100              # è›‡çš„ç§»åŠ¨é€Ÿåº¦ï¼ˆå•ä½æ¯«ç§’ï¼‰
        self.row_cells = 27         # ä¸€è¡Œå¤šå°‘ä¸ªå•å…ƒæ ¼(å«è¾¹æ¡†)
        self.col_cells = 27         # ä¸€å…±å¤šå°‘è¡Œå•å…ƒæ ¼(å«è¾¹æ¡†)
        self.canvas_bg = 'white'    # æ¸¸æˆèƒŒæ™¯è‰²
        self.cell_size = 20         # æ–¹æ ¼å•å…ƒæ ¼å¤§å°
        self.cell_gap = 0           # æ–¹æ ¼é—´è·
        self.frame_x = 15           # å·¦å³è¾¹è·
        self.frame_y = 15           # ä¸Šä¸‹è¾¹è·
        self.win_w_plus = 120       # çª—å£å³è¾¹é¢å¤–å¤šå‡ºçš„å®½åº¦
        self.wall_list = list()     # å¢™ä½“éšœç¢

        self.color_dict = {
            0: 'white',             # 0è¡¨ç¤ºç©ºç™½
            1: 'red',               # 1ä»£è¡¨è›‡å¤´
            2: 'black',             # 2ä»£è¡¨è›‡èº«
            3: 'red',               # 3ä»£è¡¨é£Ÿç‰©
            4: 'gray'               # 4ä»£è¡¨å¢™
        }

        self.run_game()</code></pre>
    <blockquote>
     <p>
      2. çª—å£çš„åˆå§‹åŒ–ï¼šåˆ›å»ºçª—å£ å’Œ ç”»å¸ƒ ä»¥åŠ çª—å£æ˜¾ç¤ºæ–‡å­—
     </p>
    </blockquote>
    <pre><code class="language-python">    def run_game(self):

        # æ¸¸æˆçª—å£
        self.window = tk.Tk()           # å¼€ä¸€ä¸ªçª—å£
        self.window.focus_force()       # ä¸»çª—å£ç„¦ç‚¹
        self.window.title('è´ªåƒè›‡å°æ¸¸æˆ')

        # çª—ä½“å¤§å°
        win_w_size = self.row_cells * self.cell_size + self.frame_x * 2 + self.win_w_plus
        win_h_size = self.col_cells * self.cell_size + self.frame_y * 2
        screenWidth = self.window.winfo_screenwidth()        # è·å–æ˜¾ç¤ºåŒºåŸŸçš„å®½åº¦
        screenHeight = self.window.winfo_screenheight()      # è·å–æ˜¾ç¤ºåŒºåŸŸçš„é«˜åº¦
        left = (screenWidth - win_w_size) // 2
        top = (screenHeight - win_h_size) // 2
        self.window.geometry("{}x{}+{}+{}".format(win_w_size, win_h_size, left, top))

        # æ“ä½œä»‹ç»
        txt_lable = tk.Label(self.window, text="æ“ä½œæ–¹å¼:\n(W)å‘ä¸Š\n(S)å‘ä¸‹\n(A)å‘å·¦\n(D)å‘åˆ\n(ç©ºæ ¼)STOP", font=('Ya_hei', 15))
        txt_lable.place(x=self.cell_size * self.col_cells + self.cell_size * 2, y=self.cell_size * 10)

        # åˆ›å»ºç”»å¸ƒ
        canvas_h = win_h_size
        canvas_w = win_w_size - self.win_w_plus
        self.canvas = tk.Canvas(self.window, bg=self.canvas_bg, height=canvas_h, width=canvas_w, highlightthickness=0)
        self.canvas.place(x=0, y=0)
        self.game_start()</code></pre>
    <blockquote>
     <p>
      3. åˆ›å»ºåœ°å›¾æ•°æ®ï¼Œä½¿ç”¨äºŒç»´è¡¨çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼ˆ0ä¸ºç©ºç™½ï¼Œ 4ä¸ºå¢™å£ï¼‰
     </p>
    </blockquote>
    <pre><code class="language-python">    def create_map(self):
        # åˆ›å»ºåœ°å›¾åˆ—è¡¨ é€šè¿‡åˆ—è¡¨å­˜æ”¾
        self.game_map = []
        for i in range(0, self.col_cells):
            self.game_map.append([])
        for i in range(0, self.col_cells):
            for j in range(0, self.row_cells):
                self.game_map[i].append(j)
                self.game_map[i][j] = 0
        print("--------------------     åœ°å›¾æ•°æ®      ---------------------")
        print(self.game_map)
        # ç»˜åˆ¶éšœç¢ç‰© å¯ä»¥è‡ªå·±è®¾ç½®
        for i in range(0, self.row_cells - 1):
            self.game_map[0][i] = 4
            self.game_map[self.col_cells - 1][i] = 4

        for i in range(0, self.col_cells - 1):
            self.game_map[i][0] = 4
            self.game_map[i][self.row_cells - 1] = 4
        self.game_map[-1][-1] = 4

        u = 5
        d = 20
        for i in range(5, 10):
            self.wall_list.append([u, i])
            self.game_map[u][i] = 4
            self.wall_list.append([d, i])
            self.game_map[d][i] = 4

        for i in range(17, 22):
            self.wall_list.append([u, i])
            self.game_map[u][i] = 4
            self.wall_list.append([d, i])
            self.game_map[d][i] = 4
        print(self.wall_list)
</code></pre>
    <blockquote>
     <p>
      4. åˆ›å»ºåƒç´ æ ¼ï¼š
     </p>
    </blockquote>
    <pre><code class="language-python">    def create_cells(self):
        # åˆ›å»ºå•å…ƒæ ¼ åƒç´ ç‚¹
        for y in range(0, self.col_cells):
            for x in range(0, self.row_cells):
                a = self.frame_x + self.cell_size * x
                b = self.frame_y + self.cell_size * y
                c = self.frame_x + self.cell_size * (x + 1)
                d = self.frame_y + self.cell_size * (y + 1)
                e = self.canvas_bg
                f = self.cell_gap
                g = self.color_dict[self.game_map[y][x]]
                self.canvas.itemconfig(self.canvas.create_rectangle(a, b, c, d, outline=e, width=f, fill=g), fill=g)</code></pre>
    <blockquote>
     <p>
      5. åˆå§‹åŒ– ğŸçš„ä¿¡æ¯å’Œä½ç½®
     </p>
    </blockquote>
    <pre><code class="language-python">    def create_snake(self):
        # è›‡å¤´ åœ¨è¾¹æ¡†ä¸­é—´
        self.snake_body = [[self.col_cells // 2, self.row_cells // 2]]
        # è›‡èº« è›‡å¤´ä¸Šè‰²ï¼Œé¢œè‰²ä¸ºå®šä¹‰çš„1
        self.game_map[self.snake_body[0][0]][self.snake_body[0][1]] = 1</code></pre>
    <blockquote>
     <p>
      6. é£Ÿç‰©çš„éšæœºç”Ÿæˆ
     </p>
    </blockquote>
    <pre><code class="language-python">    def create_food(self):

        # é£Ÿç‰© é€šè¿‡ random éšæœºç”Ÿæˆ
        self.food_xy = [0, 0]
        self.food_xy[1] = random.randint(1, self.row_cells - 2)
        self.food_xy[0] = random.randint(1, self.col_cells - 2)
        while self.game_map[self.food_xy[0]][self.food_xy[1]] != 0:
            self.food_xy[0] = random.randint(1, self.row_cells - 2)
            self.food_xy[1] = random.randint(1, self.col_cells - 2)

        self.game_map[self.food_xy[0]][self.food_xy[1]] = 3</code></pre>
    <blockquote>
     <p>
      7. è¯»å–ğŸåœ¨åœ°å›¾ä¸Šçš„ä¿¡æ¯
     </p>
    </blockquote>
    <pre><code class="language-python">    def snake_xy(self):
        # è¯»å–è›‡
        xy = []
        for i in range(0, self.col_cells):
            try:  # æŸ¥æ‰¾æ•°å€¼ä¸º1çš„åæ ‡ï¼Œæ²¡æœ‰å°±è¿”å›0ã€‚ä¸ºé˜²æ­¢åœ¨0åˆ—ï¼Œå…ˆåŠ ä¸Š1ï¼Œæœ€åå†å‡å»ã€‚
                x = self.game_map[i].index(1) + 1
            except:
                x = 0
            xy.append(x)
        self.head_x = max(xy)
        self.head_y = xy.index(self.head_x)
        self.head_x = self.head_x - 1</code></pre>
    <blockquote>
     <p>
      8. æ§åˆ¶ğŸçš„ç§»åŠ¨
     </p>
    </blockquote>
    <pre><code class="language-python">    def move_snake(self, event):

        # è®°å½•æŒ‰é”®çš„æ–¹å‘ï¼Œaä¸Š bä¸‹ cå·¦ då³
        def move_key(a, b, c, d):
            direction = event.keysym

            if self.head_x != self.snake_body[-1][1]:
                if direction == a:
                    self.dd[0] = 1
                if direction == b:
                    self.dd[0] = 2
            else:
                if direction == c:
                    self.dd[0] = 3
                if direction == d:
                    self.dd[0] = 4

            if self.head_y != self.snake_body[-1][0]:
                if direction == c:
                    self.dd[0] = 3
                if direction == d:
                    self.dd[0] = 4
            else:
                if direction == a:
                    self.dd[0] = 1
                if direction == b:
                    self.dd[0] = 2

</code></pre>
    <pre><code class="language-python">        def pause_key(key):
            """ æš‚åœé”® """
            direction = event.keysym
            if direction == key:
                self.loop = 0
                showinfo('æš‚åœ', 'æŒ‰ç¡®å®šé”®ç»§ç»­')
                self.loop = 1
                self.window.after(self.FPS, self.game_loop)

        move_key('w', 's', 'a', 'd')
        move_key('W', 'S', 'A', 'D')
        move_key('Up', 'Down', 'Left', 'Right')
        pause_key('space')</code></pre>
    <blockquote>
     <p>
      9. åˆ¤æ–­æ¸¸æˆæ˜¯å¦ç»“æŸ
     </p>
    </blockquote>
    <pre><code class="language-python">    def game_over(self):

        def over():
            showinfo('æ¸¸æˆç»“æŸ', 'æœ¬æ¬¡å¾—åˆ†: {}\n\nå†æ¥ä¸€å±€'.format(self.score))
            # åˆ¤æ–­åˆ†æ•°
            if self.score &gt;= self.score_max:
                self.score_max = self.score
            self.score = 0
            self.body_len = self.len
            self.game_start()

        if [self.head_y, self.head_x] in self.snake_body[0:-2]: over()
        if self.head_x == self.row_cells - 1 or self.head_x == 0: over()
        if self.head_y == self.col_cells - 1 or self.head_y == 0: over()
        if [self.head_y, self.head_x] in self.wall_list: over()
</code></pre>
    <blockquote>
     <p>
      10.Â  è®°å½•è›‡å¤´è¿è¡Œè½¨è¿¹ï¼Œç”Ÿæˆè›‡èº«
     </p>
    </blockquote>
    <pre><code class="language-python">    def snake_record(self):

        # è®°å½•è›‡å¤´è¿è¡Œè½¨è¿¹ï¼Œç”Ÿæˆè›‡èº«
        temp = []
        temp.append(self.head_y)
        temp.append(self.head_x)
        print(self.head_y, self.head_x, self.game_map[self.head_y][self.head_x])
        self.snake_body.append(temp)

        if self.snake_body[-1] == self.snake_body[-2]:
            del self.snake_body[-1]

        # ç¢°åˆ°é£Ÿç‰©èº«ä½“åŠ é•¿ï¼Œå¹¶å†éšæœºç”Ÿæˆä¸€ä¸ªé£Ÿç‰©
        if [self.head_y, self.head_x] == self.food_xy:
            self.score += 1
            self.body_len += 1
            self.create_food()
        # é™åˆ¶è›‡èº«é•¿åº¦ï¼Œä¸è¶…è¿‡è®¾å®šå€¼
        elif len(self.snake_body) &gt; self.body_len:
            self.game_map[self.snake_body[0][0]][self.snake_body[0][1]] = 0
            del self.snake_body[0]

        # åœ¨æ–¹å‘ è‡ªåŠ¨å‰è¿›
        def move(d, x, y):
            if self.dd[0] == d:  # æ ¹æ®æ–¹å‘å€¼æ¥å†³å®šèµ°å‘
                self.game_map[self.head_y + x][self.head_x + y] = 1
                self.game_map[self.head_y + 0][self.head_x + 0] = 2

        move(1, -1, 0)
        move(2, 1, 0)
        move(3, 0, -1)
        move(4, 0, 1)
</code></pre>
    <blockquote>
     <p>
      11.Â  æ¯æ¬¡åƒåˆ°é£Ÿç‰©åğŸä¼šå˜é•¿ï¼Œåˆ†æ•°ä¼šå¢åŠ  æ‰€ä»¥åƒåˆ°ä¸€æ¬¡ï¼Œç”»é¢ä¼šåˆ·æ–°ä¸€æ¬¡ã€‚
     </p>
    </blockquote>
    <pre><code class="language-python">    def game_loop(self):
        # åƒåˆ°food å¾ªç¯ åˆ·æ–°
        self.snake_record()
        self.snake_xy()
        self.canvas.delete('all')  # æ¸…é™¤canvas
        self.create_cells()
        self.game_over()
        if self.loop == 1:
            txt_s = tk.Label(self.window, text="å½“å‰å¾—åˆ†:\n({})\n\næœ€é«˜å¾—åˆ†:\n({})".format(self.score, self.score_max), font=('Ya_hei', 15))
            txt_s.place(x=self.cell_size * self.col_cells + self.cell_size * 2, y=self.cell_size * 2)
            self.loop_id = self.window.after(self.FPS, self.game_loop)</code></pre>
    <blockquote>
     <p>
      12.Â  æ¸¸æˆçš„å¼€å§‹ æŒ‰é¡ºåº åˆå§‹åŒ–å‡½æ•°
     </p>
    </blockquote>
    <pre><code class="language-python">    def game_start(self):

        # æ¸¸æˆå¼€å§‹
        self.loop = 1       # æš‚åœæ ‡è®°ï¼Œ1ä¸ºå¼€å¯ï¼Œ0ä¸ºæš‚åœ
        self.dd = [0]       # è®°å½•æŒ‰é”®æ–¹å‘
        self.create_map()
        self.create_snake()
        self.create_food()
        self.window.bind('&lt;Key&gt;', self.move_snake)
        self.snake_xy()
        self.game_loop()</code></pre>
    <blockquote>
     <p>
      13. æ¸¸æˆç»“æŸå…³é—­çª—å£
     </p>
    </blockquote>
    <pre><code class="language-python">        def close_w():
            self.loop = 0
            self.window.after_cancel(self.loop_id)
            self.window.destroy()

        self.window.protocol('WM_DELETE_WINDOW', close_w)
        self.window.mainloop()
</code></pre>
    <blockquote>
     <p>
      14. å¯åŠ¨main
     </p>
    </blockquote>
    <pre><code class="language-python">if __name__ == '__main__':
    Snake()
</code></pre>
    <p>
    </p>
    <h3>
     å…¨éƒ¨ä»£ç ï¼š
    </h3>
    <pre><code class="language-python">import tkinter as tk
from tkinter.messagebox import showinfo
import random


class Snake:

    def __init__(self):

        self.window = None          # å®ä¾‹åŒ–çš„çª—ä½“
        self.canvas = None          # å®ä¾‹åŒ–çš„ç”»å¸ƒ
        self.loop = 0               # æš‚åœæ ‡è®°ï¼Œ1ä¸ºå¼€å¯ï¼Œ0ä¸ºæš‚åœ
        self.loop_id = None         # å®ä¾‹åŒ–loopï¼Œç”¨æ¥å–æ¶ˆå¾ªç¯
        self.game_map = []          # æ•´ä¸ªæ¸¸æˆçš„åœ°å›¾
        self.snake_body = []        # è›‡èº«çš„åæ ‡é›†
        self.food_xy = []           # é£Ÿç‰©çš„åæ ‡
        self.head_x = 0             # è›‡å¤´çš„Xåæ ‡
        self.head_y = 0             # è›‡å¤´çš„Yåæ ‡
        self.dd = [0]               # è®°å½•æŒ‰é”®æ–¹å‘
        self.score = 0              # è®°å½•å¾—åˆ†
        self.score_max = 0          # å†å²æœ€é«˜å¾—åˆ†
        self.len = 3                # è›‡èº«åˆå§‹é•¿åº¦ï¼ˆæœ€å°è®¾å®šå€¼ä¸º1ï¼Œä¸åŒ…æ‹¬è›‡å¤´ï¼‰
        self.body_len = self.len    # è›‡èº«å½“å‰é•¿åº¦
        self.FPS = 100              # è›‡çš„ç§»åŠ¨é€Ÿåº¦ï¼ˆå•ä½æ¯«ç§’ï¼‰
        self.row_cells = 27         # ä¸€è¡Œå¤šå°‘ä¸ªå•å…ƒæ ¼(å«è¾¹æ¡†)
        self.col_cells = 27         # ä¸€å…±å¤šå°‘è¡Œå•å…ƒæ ¼(å«è¾¹æ¡†)
        self.canvas_bg = 'white'    # æ¸¸æˆèƒŒæ™¯è‰²
        self.cell_size = 20         # æ–¹æ ¼å•å…ƒæ ¼å¤§å°
        self.cell_gap = 0           # æ–¹æ ¼é—´è·
        self.frame_x = 15           # å·¦å³è¾¹è·
        self.frame_y = 15           # ä¸Šä¸‹è¾¹è·
        self.win_w_plus = 120       # çª—å£å³è¾¹é¢å¤–å¤šå‡ºçš„å®½åº¦
        self.wall_list = list()     # å¢™ä½“éšœç¢

        self.color_dict = {
            0: 'white',             # 0è¡¨ç¤ºç©ºç™½
            1: 'red',               # 1ä»£è¡¨è›‡å¤´
            2: 'black',             # 2ä»£è¡¨è›‡èº«
            3: 'red',               # 3ä»£è¡¨é£Ÿç‰©
            4: 'gray'               # 4ä»£è¡¨å¢™
        }

        self.run_game()

    def run_game(self):

        # æ¸¸æˆçª—å£
        self.window = tk.Tk()           # å¼€ä¸€ä¸ªçª—å£
        self.window.focus_force()       # ä¸»çª—å£ç„¦ç‚¹
        self.window.title('è´ªåƒè›‡å°æ¸¸æˆ')

        # çª—ä½“å¤§å°
        win_w_size = self.row_cells * self.cell_size + self.frame_x * 2 + self.win_w_plus
        win_h_size = self.col_cells * self.cell_size + self.frame_y * 2
        screenWidth = self.window.winfo_screenwidth()        # è·å–æ˜¾ç¤ºåŒºåŸŸçš„å®½åº¦
        screenHeight = self.window.winfo_screenheight()      # è·å–æ˜¾ç¤ºåŒºåŸŸçš„é«˜åº¦
        left = (screenWidth - win_w_size) // 2
        top = (screenHeight - win_h_size) // 2
        self.window.geometry("{}x{}+{}+{}".format(win_w_size, win_h_size, left, top))

        # æ“ä½œä»‹ç»
        txt_lable = tk.Label(self.window, text="æ“ä½œæ–¹å¼:\n(W)å‘ä¸Š\n(S)å‘ä¸‹\n(A)å‘å·¦\n(D)å‘åˆ\n(ç©ºæ ¼)STOP", font=('Ya_hei', 15))
        txt_lable.place(x=self.cell_size * self.col_cells + self.cell_size * 2, y=self.cell_size * 10)

        # åˆ›å»ºç”»å¸ƒ
        canvas_h = win_h_size
        canvas_w = win_w_size - self.win_w_plus
        self.canvas = tk.Canvas(self.window, bg=self.canvas_bg, height=canvas_h, width=canvas_w, highlightthickness=0)
        self.canvas.place(x=0, y=0)
        self.game_start()


    def create_map(self):
        # åˆ›å»ºåœ°å›¾åˆ—è¡¨ é€šè¿‡åˆ—è¡¨å­˜æ”¾
        self.game_map = []
        for i in range(0, self.col_cells):
            self.game_map.append([])
        for i in range(0, self.col_cells):
            for j in range(0, self.row_cells):
                self.game_map[i].append(j)
                self.game_map[i][j] = 0
        print("--------------------     åœ°å›¾æ•°æ®      ---------------------")
        print(self.game_map)
        # ç»˜åˆ¶éšœç¢ç‰© å¯ä»¥è‡ªå·±è®¾ç½®
        for i in range(0, self.row_cells - 1):
            self.game_map[0][i] = 4
            self.game_map[self.col_cells - 1][i] = 4

        for i in range(0, self.col_cells - 1):
            self.game_map[i][0] = 4
            self.game_map[i][self.row_cells - 1] = 4
        self.game_map[-1][-1] = 4

        u = 5
        d = 20
        for i in range(5, 10):
            self.wall_list.append([u, i])
            self.game_map[u][i] = 4
            self.wall_list.append([d, i])
            self.game_map[d][i] = 4

        for i in range(17, 22):
            self.wall_list.append([u, i])
            self.game_map[u][i] = 4
            self.wall_list.append([d, i])
            self.game_map[d][i] = 4
        print(self.wall_list)

    def create_cells(self):
        # åˆ›å»ºå•å…ƒæ ¼ åƒç´ ç‚¹
        for y in range(0, self.col_cells):
            for x in range(0, self.row_cells):
                a = self.frame_x + self.cell_size * x
                b = self.frame_y + self.cell_size * y
                c = self.frame_x + self.cell_size * (x + 1)
                d = self.frame_y + self.cell_size * (y + 1)
                e = self.canvas_bg
                f = self.cell_gap
                g = self.color_dict[self.game_map[y][x]]
                self.canvas.itemconfig(self.canvas.create_rectangle(a, b, c, d, outline=e, width=f, fill=g), fill=g)

    def create_snake(self):
        # è›‡å¤´ åœ¨è¾¹æ¡†ä¸­é—´
        self.snake_body = [[self.col_cells // 2, self.row_cells // 2]]
        # è›‡èº« è›‡å¤´ä¸Šè‰²ï¼Œé¢œè‰²ä¸ºå®šä¹‰çš„1
        self.game_map[self.snake_body[0][0]][self.snake_body[0][1]] = 1

    def create_food(self):

        # é£Ÿç‰© é€šè¿‡ random éšæœºç”Ÿæˆ
        self.food_xy = [0, 0]
        self.food_xy[1] = random.randint(1, self.row_cells - 2)
        self.food_xy[0] = random.randint(1, self.col_cells - 2)
        while self.game_map[self.food_xy[0]][self.food_xy[1]] != 0:
            self.food_xy[0] = random.randint(1, self.row_cells - 2)
            self.food_xy[1] = random.randint(1, self.col_cells - 2)

        self.game_map[self.food_xy[0]][self.food_xy[1]] = 3

    def snake_xy(self):
        # è¯»å–è›‡
        xy = []
        for i in range(0, self.col_cells):
            try:  # æŸ¥æ‰¾æ•°å€¼ä¸º1çš„åæ ‡ï¼Œæ²¡æœ‰å°±è¿”å›0ã€‚ä¸ºé˜²æ­¢åœ¨0åˆ—ï¼Œå…ˆåŠ ä¸Š1ï¼Œæœ€åå†å‡å»ã€‚
                x = self.game_map[i].index(1) + 1
            except:
                x = 0
            xy.append(x)
        self.head_x = max(xy)
        self.head_y = xy.index(self.head_x)
        self.head_x = self.head_x - 1

    def move_snake(self, event):

        # è®°å½•æŒ‰é”®çš„æ–¹å‘ï¼Œaä¸Š bä¸‹ cå·¦ då³
        def move_key(a, b, c, d):
            direction = event.keysym

            if self.head_x != self.snake_body[-1][1]:
                if direction == a:
                    self.dd[0] = 1
                if direction == b:
                    self.dd[0] = 2
            else:
                if direction == c:
                    self.dd[0] = 3
                if direction == d:
                    self.dd[0] = 4

            if self.head_y != self.snake_body[-1][0]:
                if direction == c:
                    self.dd[0] = 3
                if direction == d:
                    self.dd[0] = 4
            else:
                if direction == a:
                    self.dd[0] = 1
                if direction == b:
                    self.dd[0] = 2

        def pause_key(key):
            """ æš‚åœé”® """
            direction = event.keysym
            if direction == key:
                self.loop = 0
                showinfo('æš‚åœ', 'æŒ‰ç¡®å®šé”®ç»§ç»­')
                self.loop = 1
                self.window.after(self.FPS, self.game_loop)

        move_key('w', 's', 'a', 'd')
        move_key('W', 'S', 'A', 'D')
        move_key('Up', 'Down', 'Left', 'Right')
        pause_key('space')



    def game_over(self):

        def over():
            showinfo('æ¸¸æˆç»“æŸ', 'æœ¬æ¬¡å¾—åˆ†: {}\n\nå†æ¥ä¸€å±€'.format(self.score))
            # åˆ¤æ–­åˆ†æ•°
            if self.score &gt;= self.score_max:
                self.score_max = self.score
            self.score = 0
            self.body_len = self.len
            self.game_start()

        if [self.head_y, self.head_x] in self.snake_body[0:-2]: over()
        if self.head_x == self.row_cells - 1 or self.head_x == 0: over()
        if self.head_y == self.col_cells - 1 or self.head_y == 0: over()
        if [self.head_y, self.head_x] in self.wall_list: over()

    def snake_record(self):

        # è®°å½•è›‡å¤´è¿è¡Œè½¨è¿¹ï¼Œç”Ÿæˆè›‡èº«
        temp = []
        temp.append(self.head_y)
        temp.append(self.head_x)
        print(self.head_y, self.head_x, self.game_map[self.head_y][self.head_x])
        self.snake_body.append(temp)

        if self.snake_body[-1] == self.snake_body[-2]:
            del self.snake_body[-1]

        # ç¢°åˆ°é£Ÿç‰©èº«ä½“åŠ é•¿ï¼Œå¹¶å†éšæœºç”Ÿæˆä¸€ä¸ªé£Ÿç‰©
        if [self.head_y, self.head_x] == self.food_xy:
            self.score += 1
            self.body_len += 1
            self.create_food()
        # é™åˆ¶è›‡èº«é•¿åº¦ï¼Œä¸è¶…è¿‡è®¾å®šå€¼
        elif len(self.snake_body) &gt; self.body_len:
            self.game_map[self.snake_body[0][0]][self.snake_body[0][1]] = 0
            del self.snake_body[0]

        # åœ¨æ–¹å‘ è‡ªåŠ¨å‰è¿›
        def move(d, x, y):
            if self.dd[0] == d:  # æ ¹æ®æ–¹å‘å€¼æ¥å†³å®šèµ°å‘
                self.game_map[self.head_y + x][self.head_x + y] = 1
                self.game_map[self.head_y + 0][self.head_x + 0] = 2

        move(1, -1, 0)
        move(2, 1, 0)
        move(3, 0, -1)
        move(4, 0, 1)

    def game_loop(self):
        # åƒåˆ°food å¾ªç¯ åˆ·æ–°
        self.snake_record()
        self.snake_xy()
        self.canvas.delete('all')  # æ¸…é™¤canvas
        self.create_cells()
        self.game_over()
        if self.loop == 1:
            txt_s = tk.Label(self.window, text="å½“å‰å¾—åˆ†:\n({})\n\næœ€é«˜å¾—åˆ†:\n({})".format(self.score, self.score_max), font=('Ya_hei', 15))
            txt_s.place(x=self.cell_size * self.col_cells + self.cell_size * 2, y=self.cell_size * 2)
            self.loop_id = self.window.after(self.FPS, self.game_loop)


    def game_start(self):

        # æ¸¸æˆå¼€å§‹
        self.loop = 1       # æš‚åœæ ‡è®°ï¼Œ1ä¸ºå¼€å¯ï¼Œ0ä¸ºæš‚åœ
        self.dd = [0]       # è®°å½•æŒ‰é”®æ–¹å‘
        self.create_map()
        self.create_snake()
        self.create_food()
        self.window.bind('&lt;Key&gt;', self.move_snake)
        self.snake_xy()
        self.game_loop()

        def close_w():
            self.loop = 0
            self.window.after_cancel(self.loop_id)
            self.window.destroy()

        self.window.protocol('WM_DELETE_WINDOW', close_w)
        self.window.mainloop()


if __name__ == '__main__':
    Snake()

</code></pre>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
</div>


