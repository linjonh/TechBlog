---
layout: post
title: "Python打地鼠小游戏源代码"
date: 2024-10-12 23:37:08 +0800
description: "Python打地鼠小游戏源代码，打地鼠游戏是一款具有童年回忆的游戏"
keywords: "打地鼠代码"
categories: ['Python']
tags: ['打地鼠', '开发语言', 'Python', 'Pygame']
artid: "123873509"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=123873509
    alt: "Python打地鼠小游戏源代码"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Python打地鼠小游戏源代码
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     Python打地鼠小游戏源代码，打地鼠游戏是一款具有童年回忆的游戏，不知你是否还记得童年时站在电玩城打地鼠游戏机的前面疯狂的挥动手中的棒槌，一直不停的打地鼠，那个时候是不是觉得很好玩呢。程序运行截图：
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/877c13743dcafc8300973d7f63dd0107.png#pic_center">
      <br/>
      核心代码：
     </img>
    </p>
    <pre><code class="prism language-bash"><span class="token string">''</span>'
Function:
	打地鼠<span class="token punctuation">(</span>Whac-A-Mole<span class="token punctuation">)</span>小游戏
Author:
	Charles
微信公众号:
	Python代码大全
<span class="token string">''</span>'
<span class="token function">import</span> cfg
<span class="token function">import</span> pygame
<span class="token function">import</span> random
from modules.sprites.mole <span class="token function">import</span> *
from modules.sprites.hammer <span class="token function">import</span> *
from modules.interfaces.endinterface <span class="token function">import</span> *
from modules.interfaces.startinterface <span class="token function">import</span> *


<span class="token string">''</span>'游戏初始化<span class="token string">''</span>'
def initGame<span class="token punctuation">(</span><span class="token punctuation">)</span>:
	pygame.init<span class="token punctuation">(</span><span class="token punctuation">)</span>
	pygame.mixer.init<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">screen</span> <span class="token operator">=</span> pygame.display.set_mode<span class="token punctuation">(</span>cfg.SCREENSIZE<span class="token punctuation">)</span>
	pygame.display.set_caption<span class="token punctuation">(</span><span class="token string">'打地鼠-微信公众号:Python代码大全'</span><span class="token punctuation">)</span>
	<span class="token builtin class-name">return</span> <span class="token function">screen</span>


<span class="token string">''</span>'主函数<span class="token string">''</span>'
def main<span class="token punctuation">(</span><span class="token punctuation">)</span>:
	<span class="token comment"># 初始化</span>
	<span class="token function">screen</span> <span class="token operator">=</span> initGame<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment"># 加载背景音乐和其他音效</span>
	pygame.mixer.music.load<span class="token punctuation">(</span>cfg.BGM_PATH<span class="token punctuation">)</span>
	pygame.mixer.music.play<span class="token punctuation">(</span>-1<span class="token punctuation">)</span>
	audios <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
				<span class="token string">'count_down'</span><span class="token builtin class-name">:</span> pygame.mixer.Sound<span class="token punctuation">(</span>cfg.COUNT_DOWN_SOUND_PATH<span class="token punctuation">)</span>,
				<span class="token string">'hammering'</span><span class="token builtin class-name">:</span> pygame.mixer.Sound<span class="token punctuation">(</span>cfg.HAMMERING_SOUND_PATH<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
	<span class="token comment"># 加载字体</span>
	font <span class="token operator">=</span> pygame.font.Font<span class="token punctuation">(</span>cfg.FONT_PATH, <span class="token number">40</span><span class="token punctuation">)</span>
	<span class="token comment"># 加载背景图片</span>
	bg_img <span class="token operator">=</span> pygame.image.load<span class="token punctuation">(</span>cfg.GAME_BG_IMAGEPATH<span class="token punctuation">)</span>
	<span class="token comment"># 开始界面</span>
	startInterface<span class="token punctuation">(</span>screen, cfg.GAME_BEGIN_IMAGEPATHS<span class="token punctuation">)</span>
	<span class="token comment"># 地鼠改变位置的计时</span>
	hole_pos <span class="token operator">=</span> random.choice<span class="token punctuation">(</span>cfg.HOLE_POSITIONS<span class="token punctuation">)</span>
	change_hole_event <span class="token operator">=</span> pygame.USEREVENT
	pygame.time.set_timer<span class="token punctuation">(</span>change_hole_event, <span class="token number">800</span><span class="token punctuation">)</span>
	<span class="token comment"># 地鼠</span>
	mole <span class="token operator">=</span> Mole<span class="token punctuation">(</span>cfg.MOLE_IMAGEPATHS, hole_pos<span class="token punctuation">)</span>
	<span class="token comment"># 锤子</span>
	hammer <span class="token operator">=</span> Hammer<span class="token punctuation">(</span>cfg.HAMMER_IMAGEPATHS, <span class="token punctuation">(</span><span class="token number">500</span>, <span class="token number">250</span><span class="token punctuation">))</span>
	<span class="token comment"># 时钟</span>
	clock <span class="token operator">=</span> pygame.time.Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment"># 分数</span>
	your_score <span class="token operator">=</span> <span class="token number">0</span>
	flag <span class="token operator">=</span> False
	<span class="token comment"># 初始时间</span>
	init_time <span class="token operator">=</span> pygame.time.get_ticks<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment"># 游戏主循环</span>
	<span class="token keyword">while</span> True:
		<span class="token comment"># --游戏时间为60s</span>
		time_remain <span class="token operator">=</span> round<span class="token variable"><span class="token punctuation">((</span><span class="token number">61000</span> <span class="token operator">-</span> <span class="token punctuation">(</span>pygame.time.get_ticks<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> init_time<span class="token punctuation">))</span></span> / <span class="token number">1000</span>.<span class="token punctuation">)</span>
		<span class="token comment"># --游戏时间减少, 地鼠变位置速度变快</span>
		<span class="token keyword">if</span> time_remain <span class="token operator">==</span> <span class="token number">40</span> and not flag:
			hole_pos <span class="token operator">=</span> random.choice<span class="token punctuation">(</span>cfg.HOLE_POSITIONS<span class="token punctuation">)</span>
			mole.reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
			mole.setPosition<span class="token punctuation">(</span>hole_pos<span class="token punctuation">)</span>
			pygame.time.set_timer<span class="token punctuation">(</span>change_hole_event, <span class="token number">650</span><span class="token punctuation">)</span>
			flag <span class="token operator">=</span> True
		<span class="token keyword">elif</span> time_remain <span class="token operator">==</span> <span class="token number">20</span> and flag:
			hole_pos <span class="token operator">=</span> random.choice<span class="token punctuation">(</span>cfg.HOLE_POSITIONS<span class="token punctuation">)</span>
			mole.reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
			mole.setPosition<span class="token punctuation">(</span>hole_pos<span class="token punctuation">)</span>
			pygame.time.set_timer<span class="token punctuation">(</span>change_hole_event, <span class="token number">500</span><span class="token punctuation">)</span>
			flag <span class="token operator">=</span> False
		<span class="token comment"># --倒计时音效</span>
		<span class="token keyword">if</span> time_remain <span class="token operator">==</span> <span class="token number">10</span>:
			audios<span class="token punctuation">[</span><span class="token string">'count_down'</span><span class="token punctuation">]</span>.play<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token comment"># --游戏结束</span>
		<span class="token keyword">if</span> time_remain <span class="token operator">&lt;</span> <span class="token number">0</span>: <span class="token builtin class-name">break</span>
		count_down_text <span class="token operator">=</span> font.render<span class="token punctuation">(</span><span class="token string">'Time: '</span>+str<span class="token punctuation">(</span>time_remain<span class="token punctuation">)</span>, True, cfg.WHITE<span class="token punctuation">)</span>
		<span class="token comment"># --按键检测</span>
		<span class="token keyword">for</span> <span class="token for-or-select variable">event</span> <span class="token keyword">in</span> pygame.event.get<span class="token punctuation">(</span><span class="token punctuation">)</span>:
			<span class="token keyword">if</span> event.type <span class="token operator">==</span> pygame.QUIT:
				pygame.quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
				sys.exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">elif</span> event.type <span class="token operator">==</span> pygame.MOUSEMOTION:
				hammer.setPosition<span class="token punctuation">(</span>pygame.mouse.get_pos<span class="token punctuation">(</span><span class="token punctuation">))</span>
			<span class="token keyword">elif</span> event.type <span class="token operator">==</span> pygame.MOUSEBUTTONDOWN:
				<span class="token keyword">if</span> event.button <span class="token operator">==</span> <span class="token number">1</span>:
					hammer.setHammering<span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">elif</span> event.type <span class="token operator">==</span> change_hole_event:
				hole_pos <span class="token operator">=</span> random.choice<span class="token punctuation">(</span>cfg.HOLE_POSITIONS<span class="token punctuation">)</span>
				mole.reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
				mole.setPosition<span class="token punctuation">(</span>hole_pos<span class="token punctuation">)</span>
		<span class="token comment"># --碰撞检测</span>
		<span class="token keyword">if</span> hammer.is_hammering and not mole.is_hammer:
			is_hammer <span class="token operator">=</span> pygame.sprite.collide_mask<span class="token punctuation">(</span>hammer, mole<span class="token punctuation">)</span>
			<span class="token keyword">if</span> is_hammer:
				audios<span class="token punctuation">[</span><span class="token string">'hammering'</span><span class="token punctuation">]</span>.play<span class="token punctuation">(</span><span class="token punctuation">)</span>
				mole.setBeHammered<span class="token punctuation">(</span><span class="token punctuation">)</span>
				your_score <span class="token operator">+=</span> <span class="token number">10</span>
		<span class="token comment"># --分数</span>
		your_score_text <span class="token operator">=</span> font.render<span class="token punctuation">(</span><span class="token string">'Score: '</span>+str<span class="token punctuation">(</span>your_score<span class="token punctuation">)</span>, True, cfg.BROWN<span class="token punctuation">)</span>
		<span class="token comment"># --绑定必要的游戏元素到屏幕(注意顺序)</span>
		screen.blit<span class="token punctuation">(</span>bg_img, <span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">))</span>
		screen.blit<span class="token punctuation">(</span>count_down_text, <span class="token punctuation">(</span><span class="token number">875</span>, <span class="token number">8</span><span class="token punctuation">))</span>
		screen.blit<span class="token punctuation">(</span>your_score_text, <span class="token punctuation">(</span><span class="token number">800</span>, <span class="token number">430</span><span class="token punctuation">))</span>
		mole.draw<span class="token punctuation">(</span>screen<span class="token punctuation">)</span>
		hammer.draw<span class="token punctuation">(</span>screen<span class="token punctuation">)</span>
		<span class="token comment"># --更新</span>
		pygame.display.flip<span class="token punctuation">(</span><span class="token punctuation">)</span>
		clock.tick<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
	<span class="token comment"># 读取最佳分数(try块避免第一次游戏无.rec文件)</span>
	try:
		best_score <span class="token operator">=</span> int<span class="token punctuation">(</span>open<span class="token punctuation">(</span>cfg.RECORD_PATH<span class="token punctuation">)</span>.read<span class="token punctuation">(</span><span class="token punctuation">))</span>
	except:
		best_score <span class="token operator">=</span> <span class="token number">0</span>
	<span class="token comment"># 若当前分数大于最佳分数则更新最佳分数</span>
	<span class="token keyword">if</span> your_score <span class="token operator">&gt;</span> best_score:
		f <span class="token operator">=</span> open<span class="token punctuation">(</span>cfg.RECORD_PATH, <span class="token string">'w'</span><span class="token punctuation">)</span>
		f.write<span class="token punctuation">(</span>str<span class="token punctuation">(</span>your_score<span class="token punctuation">))</span>
		f.close<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment"># 结束界面</span>
	score_info <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'your_score'</span><span class="token builtin class-name">:</span> your_score, <span class="token string">'best_score'</span><span class="token builtin class-name">:</span> best_score<span class="token punctuation">}</span>
	is_restart <span class="token operator">=</span> endInterface<span class="token punctuation">(</span>screen, cfg.GAME_END_IMAGEPATH, cfg.GAME_AGAIN_IMAGEPATHS, score_info, cfg.FONT_PATH, <span class="token punctuation">[</span>cfg.WHITE, cfg.RED<span class="token punctuation">]</span>, cfg.SCREENSIZE<span class="token punctuation">)</span>
	<span class="token builtin class-name">return</span> is_restart


<span class="token string">''</span>'run<span class="token string">''</span>'
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token builtin class-name">:</span>
	<span class="token keyword">while</span> True:
		is_restart <span class="token operator">=</span> main<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> not is_restart:
			<span class="token builtin class-name">break</span>
</code></pre>
    <p>
     cfg.py
    </p>
    <pre><code class="prism language-bash"><span class="token string">''</span>'配置文件<span class="token string">''</span>'
<span class="token function">import</span> os


CURPATH <span class="token operator">=</span> os.getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span>
SCREENSIZE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">993</span>, <span class="token number">477</span><span class="token punctuation">)</span>
HAMMER_IMAGEPATHS <span class="token operator">=</span> <span class="token punctuation">[</span>os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/hammer0.png'</span><span class="token punctuation">)</span>, os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/hammer1.png'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
GAME_BEGIN_IMAGEPATHS <span class="token operator">=</span> <span class="token punctuation">[</span>os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/begin.png'</span><span class="token punctuation">)</span>, os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/begin1.png'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
GAME_AGAIN_IMAGEPATHS <span class="token operator">=</span> <span class="token punctuation">[</span>os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/again1.png'</span><span class="token punctuation">)</span>, os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/again2.png'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
GAME_BG_IMAGEPATH <span class="token operator">=</span> os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/background.png'</span><span class="token punctuation">)</span>
GAME_END_IMAGEPATH <span class="token operator">=</span> os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/end.png'</span><span class="token punctuation">)</span>
MOLE_IMAGEPATHS <span class="token operator">=</span> <span class="token punctuation">[</span>os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/mole_1.png'</span><span class="token punctuation">)</span>, os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/mole_laugh1.png'</span><span class="token punctuation">)</span>,
                   os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/mole_laugh2.png'</span><span class="token punctuation">)</span>, os.path.join<span class="token punctuation">(</span>CURPATH, <span class="token string">'resources/images/mole_laugh3.png'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
HOLE_POSITIONS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">90</span>, -20<span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">405</span>, -20<span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">720</span>, -20<span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">90</span>, <span class="token number">140</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">405</span>, <span class="token number">140</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">720</span>, <span class="token number">140</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">90</span>, <span class="token number">290</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">405</span>, <span class="token number">290</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token number">720</span>, <span class="token number">290</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
BGM_PATH <span class="token operator">=</span> <span class="token string">'resources/audios/bgm.mp3'</span>
COUNT_DOWN_SOUND_PATH <span class="token operator">=</span> <span class="token string">'resources/audios/count_down.wav'</span>
HAMMERING_SOUND_PATH <span class="token operator">=</span> <span class="token string">'resources/audios/hammering.wav'</span>
FONT_PATH <span class="token operator">=</span> <span class="token string">'resources/font/Gabriola.ttf'</span>
BROWN <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">150</span>, <span class="token number">75</span>, <span class="token number">0</span><span class="token punctuation">)</span>
WHITE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span>, <span class="token number">255</span>, <span class="token number">255</span><span class="token punctuation">)</span>
RED <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span>
RECORD_PATH <span class="token operator">=</span> <span class="token string">'score.rec'</span>
</code></pre>
    <p>
     hammer.py
    </p>
    <pre><code class="prism language-bash"><span class="token string">''</span>'
Function:
    定义锤子
Author:
    Charles
微信公众号:
    Python代码大全
<span class="token string">''</span>'
<span class="token function">import</span> pygame


<span class="token string">''</span>'锤子类<span class="token string">''</span>'
class Hammer<span class="token punctuation">(</span>pygame.sprite.Sprite<span class="token punctuation">)</span>:
    def __init__<span class="token punctuation">(</span>self, image_paths, position, **kwargs<span class="token punctuation">)</span>:
        pygame.sprite.Sprite.__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self.images <span class="token operator">=</span> <span class="token punctuation">[</span>pygame.image.load<span class="token punctuation">(</span>image_paths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>, pygame.image.load<span class="token punctuation">(</span>image_paths<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        self.image <span class="token operator">=</span> self.images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        self.rect <span class="token operator">=</span> self.image.get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self.mask <span class="token operator">=</span> pygame.mask.from_surface<span class="token punctuation">(</span>self.images<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        self.rect.left, self.rect.top <span class="token operator">=</span> position
        <span class="token comment"># 用于显示锤击时的特效</span>
        self.hammer_count <span class="token operator">=</span> <span class="token number">0</span>
        self.hammer_last_time <span class="token operator">=</span> <span class="token number">4</span>
        self.is_hammering <span class="token operator">=</span> False
    <span class="token string">''</span>'设置位置<span class="token string">''</span>'
    def setPosition<span class="token punctuation">(</span>self, pos<span class="token punctuation">)</span>:
        self.rect.centerx, self.rect.centery <span class="token operator">=</span> pos
    <span class="token string">''</span>'设置hammering<span class="token string">''</span>'
    def setHammering<span class="token punctuation">(</span>self<span class="token punctuation">)</span>:
        self.is_hammering <span class="token operator">=</span> True
    <span class="token string">''</span>'显示在屏幕上<span class="token string">''</span>'
    def draw<span class="token punctuation">(</span>self, <span class="token function">screen</span><span class="token punctuation">)</span>:
        <span class="token keyword">if</span> self.is_hammering:
            self.image <span class="token operator">=</span> self.images<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
            self.hammer_count <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> self.hammer_count <span class="token operator">&gt;</span> self.hammer_last_time:
                self.is_hammering <span class="token operator">=</span> False
                self.hammer_count <span class="token operator">=</span> <span class="token number">0</span>
        else:
            self.image <span class="token operator">=</span> self.images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        screen.blit<span class="token punctuation">(</span>self.image, self.rect<span class="token punctuation">)</span>
</code></pre>
    <p>
     完整程序代码下载：
     <a href="https://download.csdn.net/download/weixin_42756970/85060095">
      Python打地鼠小游戏源代码
     </a>
     <br/>
     更多Python源代码，请关注公众号：Python代码大全。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/65f61069abca131a9bfde29da25a2d9c.png#pic_center"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323735363937302f:61727469636c652f64657461696c732f313233383733353039" class_="artid" style="display:none">
 </p>
</div>


