---
layout: post
title: 2024-12-09-从自建到云原生数据管理的未来与变革
date: 2024-12-09 11:15:37 +0800
categories: [腾讯云产品专栏]
tags: [云原生,oracle,数据库]
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=141154510
  alt: 从自建到云原生数据管理的未来与变革
artid: 141154510
render_with_liquid: false
---
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     从自建到云原生：数据管理的未来与变革
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_1">
     </a>
     前言
    </h2>
    <p>
     最近，我看完腾讯云社区发布的纪录片
     <a href="https://cloud.tencent.com/developer/special/documentary?from_column=20421&amp;from=20421" rel="nofollow">
      《中国数据库前世今生》
     </a>
     ，其中有段话让我忍俊不禁。纪录片提到，云数据库刚刚兴起时，最大的挑战并不是来自竞争对手，而是来自那些选择在云服务器上自建数据库的用户。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/84990d1059ac53941a7cee088245066d.png"/>
    </p>
    <p>
     关于这部纪录片，我有许多深刻的感想。从国产数据库的探索历程，到我个人在数据库领域的经历，再到如今云原生数据库的先进技术，我感触颇深。如果你对这一话题也感兴趣，欢迎阅读我的其他文章，它们涵盖了更多相关的探讨和见解。
    </p>
    <p>
     关于国产数据库的发展趋势的探讨：https://www.cnblogs.com/guoxiaoyu/p/18295131
    </p>
    <p>
     个人与数据库相识、相知的经历：https://www.cnblogs.com/guoxiaoyu/p/18338820
    </p>
    <p>
     观存储历史，论数据未来：https://www.cnblogs.com/guoxiaoyu/p/18352499
    </p>
    <p>
     接着这个话题，虽然当时我也觉得这说法有些滑稽，但在我深入研究了云数据库与自建解决方案的区别后，才明白这种看法的背景。由于当时云数据库尚未普及，很多人误以为云数据库不过是将开源的MySQL或其他数据库搭建在云服务器上，然后还要为此额外付费。于是，他们会想，既然如此，为什么不直接在云上租用服务器自己维护数据库呢？
    </p>
    <p>
     我们可以深入探讨一下自建数据库与云数据库的优劣之分。传统自建数据库模式要求企业自行搭建硬件设施并维护软件系统，随着业务的扩展，这种模式逐渐暴露出成本高昂、扩展性不足和维护难度大的问题。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/6e1d72f02a365c4812599f97bab73f14.png"/>
    </p>
    <p>
     相比之下，云数据库的出现为企业提供了一种更为灵活、高效且成本可控的解决方案。云数据库不仅简化了数据管理过程，还通过自动化和智能化手段，提升了数据处理的便捷性和效率。因此，云数据库在满足企业不断增长的数据需求方面，显然展现了更大的优势。
    </p>
    <p>
     根据Gartner报告的分析，云数据库市场正处于上升阶段。2023年，全球数据库市场规模预计将突破1000亿美元，而云数据库的市场份额有望达到55%。报告还指出，2022年AWS的数据库管理系统（DBMS）的收入已经超越了Oracle等传统数据库厂商，显示出云数据库的强劲增长势头。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/0b7c67889cf3ba8224081fd76e9e2689.png"/>
    </p>
    <p>
     我认为，云数据库的发展正经历两个重要阶段：第一阶段是从传统数据库向云数据库的迁移；第二阶段则是从云数据库向云原生数据库的进化。目前，分布式云原生数据库正成为市场的主流趋势，标志着云数据库技术的不断成熟和进步。
    </p>
    <h2>
     <a id="_29">
     </a>
     传统自建
    </h2>
    <p>
     自从数据库技术的流行以来，互联网行业也经历了飞速的发展。数据的快速存储和处理能力极大地推动了企业和业务的成长。在那个时期，企业为了满足不断增长的业务需求，不得不自行购买服务器和存储设备，建设机房，并且组建专业的开发、网络和数据库运维团队。这种自建模式不仅要求企业承担高昂的硬件投资和人力资源成本，还面临着招聘周期长、技术更新迅速等一系列挑战。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/b36cf27b1aea719339715eeae2b4d180.png"/>
    </p>
    <p>
     此外，自建数据库的运维风险也不容忽视。诸如意外断电、硬件故障，甚至是人为操作失误，都有可能导致服务中断，进而影响业务的正常运行。这些问题使得传统的自建数据库模式逐渐显露出其局限性，为云数据库的崛起和普及铺平了道路。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/b5243f088b1c5b6eda1ea6b9c3cbcf1f.png"/>
    </p>
    <p>
     在这种情况下，小规模企业可能能够应对自建数据库的挑战。然而，一旦企业的产品流量显著增长，就会面临机房资源不足的问题，以及如何实施异地容灾的挑战。由于所有的开发和运维人员通常集中在一个地方办公，企业无法简单地在其他地区租赁新的机房来满足业务的扩展需求。这样一来，企业就需要寻找解决方案，以应对快速增长带来的各种基础设施问题。于是，我们见证了所谓的“伪云”现象的出现。
    </p>
    <h2>
     <a id="_41">
     </a>
     云服务器
    </h2>
    <p>
     我之所以提到云服务器而非云数据库，是因为根据上文提到的客户痛点，我们可以发现，云服务器和云数据库这两种服务的起源分别是在2000至2010年代初。当时，企业的业务增长速度还没有如今这么快，因此，即便用户了解云数据库的存在，他们也常常将其视为云服务商在云服务器上为企业搭建的开源数据库产品，并以此进行包装和销售。这种情况下，云数据库常被视作云服务器的一种附加功能，而非独立的、具备完整能力的解决方案。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/5ae98f27b7c641a1297cfcf2b1d43293.png"/>
    </p>
    <p>
     在这个时期，用户的痛点主要在于他们可以自行搭建数据库。用户可以选择直接购买一台服务器并在上面安装数据库软件，如 MySQL 等。因此，那时许多云服务商的客户倾向于选择自建方案，即在云服务器上自行搭建数据库。这种方式不仅允许用户根据自身需求选择不同的配置和机房地点，还能在一定程度上解决大部分问题，例如机房的位置、意外断电和硬件故障等。对于这些用户而言，云服务器提供的灵活配置选项和可控的环境设置，能够有效应对他们的主要需求，因此其他问题往往显得无关紧要。
    </p>
    <h2>
     <a id="_49">
     </a>
     云数据库
    </h2>
    <p>
     所有产品的需求都需参考其时代背景。当进入到2010至2020年代时，互联网发展迅猛，这段时间被许多程序员视为十年红利期。在这一时期，随着互联网产品的突飞猛进，已搭建好的数据库面临着自动扩容和缩容的需求。因为谁也无法预见哪个互联网产品会突然爆红，一旦某个产品流量激增，传统数据库集群可能难以应对如此庞大的业务量。为了避免因网站运维停机而损失客户流量，云数据库的自动扩展能力成为了关键解决方案，从而成为了市场上备受青睐的选择。这一时期，云数据库因其灵活性和扩展性，在应对快速变化的业务需求上表现出色。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/aecdb3a61128caf8da7c1bb55e57881b.png"/>
    </p>
    <p>
     过去，数据形式和应用场景相对单一，例如传统数据库主要应用于金融、运营商、政务等传统行业领域。然而，随着互联网、移动互联网及产业互联网的迅猛发展，各行业正在加速推进电子化和信息化的进程。这种加速使得应用服务形式变得多样化，从而导致行业的数据形式和应用场景也日益丰富。这种多样化的趋势对底层数据库的能力提出了更高的要求和更多的挑战，因为新的应用场景不仅需要处理更复杂的数据类型，还要求数据库具备更强的扩展性、灵活性和高效的性能。
    </p>
    <h3>
     <a id="_57">
     </a>
     云数据库的天花板由调度决定
    </h3>
    <p>
     过去，我们通常认为数据库的性能瓶颈主要集中在优化器的能力上。在那个时代，程序员的面试中几乎都会涉及SQL调优，毕竟优化器的功能主要限于简单的操作，比如调整字段顺序，无法真正深度优化用户的SQL查询。因此，尽管优化器能在一定程度上提升性能，但对于复杂的查询或大规模的数据处理，其效果往往有限，无法全面满足高性能需求。
    </p>
    <p>
     今天，对于云数据库而言，更为关键的是数据库的综合调度能力，这不仅仅包括计算层的调度和数据层面的调度，还涵盖了资源层面的调度。这意味着，云数据库需要能够有效地管理和优化计算资源的分配，以应对动态变化的工作负载；同时，必须在数据存储和访问层面上进行高效的调度，以确保数据的快速处理和准确访问；此外，还要在资源层面上进行合理的调度，以确保资源的有效利用和成本控制。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/a2a92ddd567e3b854a27c1a2a17103f8.png"/>
    </p>
    <p>
     数据的智能调度在云数据库中至关重要，以腾讯云数据库为例，其存储与计算支持以下五层调度能力：
    </p>
    <ol>
     <li>
      <strong>
       计算类型
      </strong>
      ：包括在线事务处理（OLTP）、在线分析处理（OLAP）以及流式计算，以适应不同的业务需求和负载类型。
     </li>
     <li>
      <strong>
       库表调度
      </strong>
      ：基于数据的亲和性进行库表调度，以优化数据存储和访问效率。
     </li>
     <li>
      <strong>
       存储类型
      </strong>
      ：支持行存储、列存储、内存表和日志等多种存储方式，以适应不同的数据处理需求。
     </li>
     <li>
      <strong>
       数据冷热
      </strong>
      ：对冷数据、温数据和热数据进行差异化处理，以提高存储和访问的灵活性。
     </li>
     <li>
      <strong>
       容灾调度
      </strong>
      ：根据容灾需求进行跨中心和跨城市的调度，以保障数据的可靠性和业务的连续性。
     </li>
    </ol>
    <p>
     在实际应用中，我们面临着各种场景，如在线交易、AP处理、流式计算等，这些都需要云数据库技术进行有效的整合，以在性能和成本之间实现最佳平衡。因此，智能调度不仅仅是对技术能力的考验，更是实现高效数据处理和资源优化的关键。
    </p>
    <h3>
     <a id="_75">
     </a>
     智能运维
    </h3>
    <p>
     最后需要强调的是，单纯优化数据库自身的功能和性能并不足以满足全面的业务需求，还必须推动业务流程的优化改造，从而形成数据库应用的良性循环。腾讯云数据库通过智能运维平台，利用全链路分析技术，为每条SQL语句附加业务标签，从而实现对基础业务的提升和业务研发的精准优化。
    </p>
    <p>
     这种方法不仅使数据库能够更准确地识别和处理实际业务场景中的问题，还能够推动业务过程的不断改进和优化。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/c2d868f749336938b434801e92f08084.png"/>
    </p>
    <p>
     运维工作对于许多人员来说往往是一场挑战，因为其涉及的任务繁多且复杂，常常令人生畏。然而，如果能够提供一个直观、可视化的界面，将大大简化运维管理的难度。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/07b390c7f86b6c1fb801c81c3342a840.png"/>
    </p>
    <p>
     一个全面的可视化界面可以清晰地展示系统的各项指标和性能数据，包括实时监控、告警管理、资源使用情况、性能瓶颈分析等。通过图形化的仪表盘和交互式图表，运维人员能够更快速地识别系统的健康状态、潜在问题和趋势变化，从而提高故障排除的效率，减少人为错误的发生。同时，集成的分析工具可以帮助运维人员深入了解系统的运行情况，制定更具针对性的优化策略。
    </p>
    <h3>
     <a id="_90">
     </a>
     迁移实践
    </h3>
    <p>
     以腾讯云为例，目前，国内两家主要的国有大行已经成功地基于TDSQL进行银行核心系统的分布式改造，将原本依赖于国外IBM DB2等数据库的核心系统迁移至TDSQL的国产分布式架构。这一举措标志着国产云数据库在金融行业中的重要突破，显示出国产数据库在全球市场中不断增强的竞争力和可信赖性。
    </p>
    <p>
     此外，TDSQL 还进行了开源，并向开放原子开源基金会捐赠了 OpenTenBase。这一举措旨在推动国产数据库技术的普及与发展，鼓励更多的开发者参与到国产数据库技术的创新和生态建设中来。通过开源共创的模式，TDSQL 希望与上下游产业链以及广大开发者共同努力，构建一个繁荣的数据库技术生态系统。
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/0d32640c6724586713cc59753451251a.png"/>
    </p>
    <h2>
     <a id="_98">
     </a>
     云原生数据库
    </h2>
    <p>
     进入20年代，云原生技术逐渐成为行业发展的主流趋势。云原生数据库，作为专为云环境设计和优化的数据库系统，通过深度融合云原生技术的优势，展现出显著的灵活性、可扩展性、弹性和自动化程度。这类数据库系统能够充分利用云计算的动态资源分配和按需扩展能力，从而应对日益增长的数据处理需求，并实现高效、可靠的数据管理。我们这里仍然以腾讯云TDSQL为例
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/afe7ff720ed29b75f08f1df0397eceea.png"/>
    </p>
    <p>
     他所支持的是针对企业需求的高度弹性和灵活性，因为在实际应用中，服务器的负载常常会出现高峰和低谷。腾讯云 TDSQL 在设计时充分考虑了这种波动性，通过卓越的弹性和可扩展性，确保系统能够根据实时的负载情况自动调整资源配置。这种能力使得企业能够在高峰期获得足够的资源支持，而在低谷期则可以减少资源的使用，从而最大限度地优化资源利用效率，降低运营成本。
    </p>
    <p>
     为了更好地理解 TDSQL 的架构及其弹性特性，可以参考腾讯云云原生数据库的架构图：
    </p>
    <p>
     <img alt="image" src="https://i-blog.csdnimg.cn/blog_migrate/03883fbf8975b50bb518876d96b4e75a.png"/>
    </p>
    <h3>
     <a id="_110">
     </a>
     为什么云原生数据库优于云数据库
    </h3>
    <p>
     仍然以腾讯云为例，云原生数据库 TDSQL-C MySQL 版在多个方面优于传统的云数据库 MySQL。我们来对比一下。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        特性/能力
       </th>
       <th>
        云数据库 MySQL 劣势
       </th>
       <th>
        TDSQL-C MySQL 版优势
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        数据存储上限
       </td>
       <td>
        受单物理机限制
       </td>
       <td>
        分布式存储，单实例可达400TB
       </td>
      </tr>
      <tr>
       <td>
        升级和扩展
       </td>
       <td>
        规格升级、增加只读实例耗时较长
       </td>
       <td>
        计算节点无状态，秒级升配、切换、增加只读节点
       </td>
      </tr>
      <tr>
       <td>
        数据一致性
       </td>
       <td>
        做到数据强一致性成本高
       </td>
       <td>
        数据块级别的三副本强一致
       </td>
      </tr>
      <tr>
       <td>
        数据同步
       </td>
       <td>
        基于 binlog 的数据同步，主备延迟问题
       </td>
       <td>
        主从基于 redo 同步，从库延迟降到 ms 级别
       </td>
      </tr>
      <tr>
       <td>
        写性能
       </td>
       <td>
        全日志及数据页更新导致写性能瓶颈
       </td>
       <td>
        只写 redo，轻量级写入，更高写入性能（140%）
       </td>
      </tr>
      <tr>
       <td>
        磁盘扩容
       </td>
       <td>
        -
       </td>
       <td>
        磁盘扩容业务无感知、业务无影响
       </td>
      </tr>
      <tr>
       <td>
        备份/回档速率
       </td>
       <td>
        回档慢，数据恢复时间较长
       </td>
       <td>
        每秒 GB 的备份/回档速率，解决备份慢回档慢问题
       </td>
      </tr>
      <tr>
       <td>
        计算资源
       </td>
       <td>
        -
       </td>
       <td>
        具备 Serverless 能力
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     云原生数据库代表了数据库技术的未来趋势，它专为云计算环境设计，具备了传统数据库所不具备的特性。这些数据库充分利用了云平台的弹性、可扩展性和自动化运维能力，能够快速适应业务需求的变化，实现资源的最优分配。
    </p>
    <p>
     随着企业数字化转型的加速，云原生数据库的这些优势变得尤为重要，它们支持了微服务架构、容器化部署和DevOps实践，使得应用开发和运维更加高效和敏捷。此外，云原生数据库的高可用性和灾难恢复能力，确保了企业数据的安全性和业务的连续性。因此，云原生数据库不仅能够满足当前的技术需求，也为未来的技术发展奠定了基础，成为推动企业创新和增长的关键力量。
    </p>
    <h2>
     <a id="_129">
     </a>
     总结
    </h2>
    <p>
     在数据技术不断演进的背景下，云数据库的崛起和云原生数据库的普及标志着数据库技术的显著变革。从最初的自建数据库模式到如今的云原生数据库，企业在数据管理上的选择变得更加丰富和灵活。云数据库不仅仅是对传统数据库技术的一个迁移，更是对其进行了一次全面的升级和优化。
    </p>
    <p>
     回顾过去，传统自建数据库模式虽然为企业提供了极大的灵活性和控制权，但其高昂的硬件投资、复杂的维护工作和扩展困难，使得许多企业不得不面对诸多挑战。特别是在面对业务快速增长和数据处理需求剧增的情况下，传统模式显得捉襟见肘。云数据库的出现恰逢其时，以其优越的自动化管理、弹性扩展和成本效益，为企业提供了一种更为高效的解决方案。
    </p>
    <p>
     随着云技术的进一步发展，云原生数据库作为云计算环境下的新一代数据库系统，展现了更为卓越的性能和适应能力。它们不仅在资源管理和调度上展现了极高的智能化水平，还在数据处理的灵活性和扩展性方面远超传统数据库。以腾讯云 TDSQL 为例，其在弹性扩展、数据一致性和性能优化等方面的优势，使得企业在处理大规模数据时能够游刃有余，极大地提升了业务的持续性和稳定性。
    </p>
    <p>
     面对日益复杂的业务需求和技术挑战，云原生数据库的优势愈发突出。它们不仅能够有效应对现代数据处理的高负载和多样化需求，还为企业数字化转型提供了强有力的支持。从业务敏捷性到运营效率，从数据安全到成本控制，云原生数据库在各个方面都表现出色。
    </p>
    <p>
     总结来看，数据技术的发展从未停止脚步，而云数据库及云原生数据库的出现无疑为企业的数据管理和业务增长提供了新的动力。未来，随着技术的进一步进步和应用场景的不断拓展，云原生数据库将继续发挥其重要作用，推动数据管理技术向更加智能、灵活和高效的方向发展。企业在这一变革过程中，需要紧跟技术趋势，灵活调整战略，以确保在数字化时代中保持竞争力和创新力。
    </p>
    <hr/>
    <p>
     我是努力的小雨，一名 Java 服务端码农，潜心研究着 AI 技术的奥秘。我热爱技术交流与分享，对开源社区充满热情。同时也是掘金优秀作者、腾讯云创作之星、阿里云专家博主、华为云云享专家等多重身份。
    </p>
    <p>
     💡 我将不吝分享我在技术道路上的个人探索与经验，希望能为你的学习与成长带来一些启发与帮助。
    </p>
    <p>
     🌟 欢迎关注努力的小雨！🌟
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
</div>


<p class="artid" style="display:none">68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34303238303034332f:61727469636c652f64657461696c732f313431313534353130</p>
