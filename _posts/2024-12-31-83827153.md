---
layout: post
title: "vdbench-自动化测试脚本"
date: 2024-12-31 16:43:34 +0800
description: "vdbench-自动化测试脚本?\t\t\t1\t\t\t2\t\t\t3\t\t\t4\t\t\t5\t\t\t6\t\t\t7\t\t\t8\t\t"
keywords: "vd脚本"
categories: ['Vdbech']
tags: ['无标签']
artid: "83827153"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=83827153
    alt: "vdbench-自动化测试脚本"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     vdbench-自动化测试脚本
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <a class="postTitle2" href="https://www.cnblogs.com/Alysa-lrr/p/8000344.html" id="cb_post_title_url" rel="nofollow">
      <u>
       <span style="color:#0066cc;">
        vdbench-自动化测试脚本
       </span>
      </u>
     </a>
    </p>
    <p>
     <a class="toolbar_item command_help help" href="https://www.cnblogs.com/Alysa-lrr/p/8000344.html#" rel="nofollow">
      <u>
       <span style="color:#0066cc;">
        ?
       </span>
      </u>
     </a>
    </p>
    <table>
     <tbody>
      <tr>
       <td>
        <p>
         1
        </p>
        <p>
         2
        </p>
        <p>
         3
        </p>
        <p>
         4
        </p>
        <p>
         5
        </p>
        <p>
         6
        </p>
        <p>
         7
        </p>
        <p>
         8
        </p>
        <p>
         9
        </p>
        <p>
         10
        </p>
        <p>
         11
        </p>
        <p>
         12
        </p>
        <p>
         13
        </p>
        <p>
         14
        </p>
        <p>
         15
        </p>
        <p>
         16
        </p>
        <p>
         17
        </p>
        <p>
         18
        </p>
        <p>
         19
        </p>
        <p>
         20
        </p>
        <p>
         21
        </p>
        <p>
         22
        </p>
        <p>
         23
        </p>
        <p>
         24
        </p>
        <p>
         25
        </p>
        <p>
         26
        </p>
        <p>
         27
        </p>
        <p>
         28
        </p>
        <p>
         29
        </p>
        <p>
         30
        </p>
        <p>
         31
        </p>
       </td>
       <td>
        <p>
         <code>
          #!/usr/bin/python
         </code>
        </p>
        <p>
         <code>
          # -*- coding:utf8 -*-
         </code>
        </p>
        <p>
        </p>
        <p>
         <code>
          import
         </code>
         <code>
          sys
         </code>
        </p>
        <p>
         <code>
          import
         </code>
         <code>
          commands
         </code>
        </p>
        <p>
        </p>
        <p>
         <code>
          TEST_CONF
         </code>
         <code>
          =
         </code>
         <code>
          """
         </code>
        </p>
        <p>
         <code>
          hd=default,vdbench=/var/www/html/vdbench504,user=root,shell=ssh
         </code>
        </p>
        <p>
         <code>
          sd=sd1,lun=/dev/vdc,openflags=o_direct,threads=1
         </code>
        </p>
        <p>
         <code>
          wd=wd1,sd=sd1,xfersize=16k,readpct={readpct},seekpct={seekpct}
         </code>
        </p>
        <p>
         <code>
          rd=rd1,wd=wd1,iorate=max,elapsed=10,maxdata=5500g,interval=1,warmup=3
         </code>
        </p>
        <p>
         <code>
          """
         </code>
        </p>
        <p>
         <code>
          def
         </code>
         <code>
          gen_test_file(file_name, rs_list):
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          for
         </code>
         <code>
          num,rs
         </code>
         <code>
          in
         </code>
         <code>
          enumerate
         </code>
         <code>
          (rs_list):
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          with
         </code>
         <code>
          open
         </code>
         <code>
          (file_name
         </code>
         <code>
          +
         </code>
         <code>
          "-"
         </code>
         <code>
          +
         </code>
         <code>
          str
         </code>
         <code>
          (num),
         </code>
         <code>
          'w'
         </code>
         <code>
          ) as fw:
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          fw.write(TEST_CONF.
         </code>
         <code>
          format
         </code>
         <code>
          (
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          readpct
         </code>
         <code>
          =
         </code>
         <code>
          rs[
         </code>
         <code>
          'readpct'
         </code>
         <code>
          ], seekpct
         </code>
         <code>
          =
         </code>
         <code>
          rs[
         </code>
         <code>
          'seekpct'
         </code>
         <code>
          ])
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          )
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          return
         </code>
        </p>
        <p>
        </p>
        <p>
         <code>
          def
         </code>
         <code>
          main():
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          fn
         </code>
         <code>
          =
         </code>
         <code>
          'test'
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          rs_list
         </code>
         <code>
          =
         </code>
         <code>
          [
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          {
          <!-- -->
         </code>
         <code>
          'readpct'
         </code>
         <code>
          :
         </code>
         <code>
          100
         </code>
         <code>
          ,
         </code>
         <code>
          'seekpct'
         </code>
         <code>
          :
         </code>
         <code>
          100
         </code>
         <code>
          },
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          {
          <!-- -->
         </code>
         <code>
          'readpct'
         </code>
         <code>
          :
         </code>
         <code>
          0
         </code>
         <code>
          ,
         </code>
         <code>
          'seekpct'
         </code>
         <code>
          :
         </code>
         <code>
          100
         </code>
         <code>
          },
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          {
          <!-- -->
         </code>
         <code>
          'readpct'
         </code>
         <code>
          :
         </code>
         <code>
          100
         </code>
         <code>
          ,
         </code>
         <code>
          'seekpct'
         </code>
         <code>
          :
         </code>
         <code>
          0
         </code>
         <code>
          },
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          {
          <!-- -->
         </code>
         <code>
          'readpct'
         </code>
         <code>
          :
         </code>
         <code>
          0
         </code>
         <code>
          ,
         </code>
         <code>
          'seekpct'
         </code>
         <code>
          :
         </code>
         <code>
          0
         </code>
         <code>
          },
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          ]
         </code>
         <code>
          *
         </code>
         <code>
          3
         </code>
         <code>
          #*3是这4个用例循环3次的意思
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          gen_test_file(
         </code>
         <code>
          './{}'
         </code>
         <code>
          .
         </code>
         <code>
          format
         </code>
         <code>
          (fn), rs_list)
         </code>
        </p>
        <p>
        </p>
        <p>
         <code>
         </code>
         <code>
          for
         </code>
         <code>
          num0,rs
         </code>
         <code>
          in
         </code>
         <code>
          enumerate
         </code>
         <code>
          (rs_list):
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     cmd='./vdbench -f {}'.format(fn) + "-" + str(num0) + ' -o /root/res' + str(num0)
     <br/>
     #print cmd
     <br/>
     print commands.getoutput(cmd)
    </p>
    <p>
     <a class="toolbar_item command_help help" href="https://www.cnblogs.com/Alysa-lrr/p/8000344.html#" rel="nofollow">
      <u>
       <span style="color:#0066cc;">
        ?
       </span>
      </u>
     </a>
    </p>
    <table>
     <tbody>
      <tr>
       <td>
        <p>
         1
        </p>
        <p>
         2
        </p>
        <p>
         3
        </p>
       </td>
       <td>
        <p>
         <code>
          if
         </code>
         <code>
          __name__
         </code>
         <code>
          =
         </code>
         <code>
          =
         </code>
         <code>
          '__main__'
         </code>
         <code>
          :
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          main()
         </code>
        </p>
        <p>
         <code>
         </code>
         <code>
          sys.exit(
         </code>
         <code>
          0
         </code>
         <code>
          )
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f736f7068696176696179616e67:2f61727469636c652f64657461696c732f3833383237313533" class_="artid" style="display:none">
 </p>
</div>


