---
layout: post
title: "STK12与Python联合仿真一环境搭建"
date: 2022-10-19 14:21:13 +0800
description: "STK仿真python接口，安装与测试_stk12"
keywords: "stk12"
categories: ['Stk']
tags: ['开发语言', '人工智能', 'Python']
artid: "126689524"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=126689524
    alt: "STK12与Python联合仿真一环境搭建"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     STK12与Python联合仿真（一）：环境搭建
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      环境搭建
     </h4>
     <ul>
      <li>
       <a href="#PythonJupyter_notebook_2" rel="nofollow">
        安装Python和Jupyter notebook
       </a>
      </li>
      <li>
       <a href="#_9" rel="nofollow">
        关键一步
       </a>
      </li>
      <li>
       <a href="#STK_17" rel="nofollow">
        STK配置
       </a>
      </li>
      <li>
       <a href="#But_58" rel="nofollow">
        But
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="PythonJupyter_notebook_2">
     </a>
     安装Python和Jupyter notebook
    </h2>
    <p>
     这个各大博主都有讲解，附上几个链接吧
     <br/>
     <a href="https://zhuanlan.zhihu.com/p/33105153" rel="nofollow">
      Jupyter Notebook介绍、安装及使用教程
     </a>
     @ 知乎 豆先生
     <br/>
     <a href="https://blog.csdn.net/jiangyutongyangyi/article/details/105460970">
      jupyter notebook自动补全
     </a>
     @ CSDN 怎么会有不写代码的小朋友呢
     <br/>
     <strong>
      1. python安装时一定要选择让pip在系统的环境变量里
     </strong>
     <br/>
     <strong>
      2. 要记住自己Python的安装路径，后面有用
     </strong>
    </p>
    <h2>
     <a id="_9">
     </a>
     关键一步
    </h2>
    <p>
     在STK的安装目录里找到&lt;your path&gt;:STK\bin\AgPythonAPI里面的agi.stk12-12.2.0-py3-none-any.whl
     <br/>
     我的是
     <code>
      F:\STK\bin\AgPythonAPI
     </code>
     <br/>
     路径栏中输入cmd，表示在当前目录中打开命令行
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3cfa1344fcb0319a2136a3890d42faaa.png">
      <br/>
      输入
      <code>
       pip install &lt;TAB&gt;
      </code>
      然后 Enter安装（TAB键是自动补全，因为该目录下就这一个文件，所以会很轻易的自动补全）
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c9be70ac8aafdf8004259a2e030f3f76.png"/>
     </img>
    </p>
    <h2>
     <a id="STK_17">
     </a>
     STK配置
    </h2>
    <p>
     其实STK也可以不配置，看个人喜好，按照官网的视频要求是要配置的
    </p>
    <ol>
     <li>
      <p>
       打开STK，如图，先把创建场景的弹窗关掉，然后点击Python的那个图标
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1c1f1b1cee9ee36f89bf28b7d88e50a7.png"/>
      </p>
     </li>
     <li>
      <p>
       配置 Python路径，前文所说要记住自己Python路径的作用就有了
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b242ffd606c76d6a1abd7cf974aedd0e.png">
        <br/>
        这是我自己Python的路径，第一个路径选中Python.exe就对了
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/60a1e1291f3aee0ecefdc8b55ab60235.png">
         <br/>
         第二个就是Scripts文件了，就在同一级目录，然后双击进去后点击确定就可以了
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a0805245a656cd3b1332b97c69913543.png">
          <br/>
          配置完之后Lunch就可以了，另外那两个勾我是都勾上的
          <br/>
          <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3e57ad1dd1bea58db2ff2ddf780bf2bd.png"/>
         </img>
        </img>
       </img>
      </p>
     </li>
     <li>
      <p>
       然后你就得到一个在软件里面的，狭小的notebook
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f432578f236389432fdd3e99fd1472c3.png"/>
      </p>
     </li>
     <li>
      <p>
       先不管这个，先完成其他的配置，我们新建一个场景，随便起个名字
       <br/>
       File &gt; New &gt; Name任意 &gt; OK
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/149ec426e1c8ce8690341b55743e8618.png"/>
       <br/>
       进入的时间要卡一会，等一会就好了，进去后如下：
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9774410ef733b925265d2fce47cef9f0.png"/>
       <br/>
       先把插入的那个close掉
      </p>
     </li>
    </ol>
    <p>
     然后在Edit &gt; Preference 里面找到 Intergrated Jupyter Notebooks for Python
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c9fd33a43ad48de40f2c5dbd0402a60b.png"/>
     <br/>
     注意这个localhost，每个人可能不一样，我们把他复制下来，打开你的浏览器，直接输进浏览器的地址行，回车进入
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3a4add7d639e32a282de0f1ab3649cc7.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6797ab857138db422a04aea57d04d89c.png"/>
     <br/>
     这里需要登录，不过没关系啊，我们按照他的说法，随便打开一个命令，输入
     <code>
      jupyter notebook list
     </code>
     找到localhost和你一样的那一个，这里我的是5281，然后把token复制下来（在命令行中，选中完成后右击一下即可完成复制）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/66b24a5453b598faae64eb930eeb0eb7.png"/>
    </p>
    <p>
     粘贴在这里
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/68c54820ee6d4c787af44613fdc26b04.png"/>
     <br/>
     然后 New Password随便输入就可以了，123都行，点击下面的Log in and …
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/38813372267156c15c141229770d2865.png"/>
     <br/>
     点击进入StarterScripy
     <br/>
     就能看到舒适版的了
    </p>
    <h2>
     <a id="But_58">
     </a>
     But
    </h2>
    <p>
     这个方法我自认为有点繁琐，而且路径不能自己定义，以下方法可以自己创建notebook并且链接上去
     <br/>
     我们新建一个场景后，可以用如下方式打开Python 视窗
    </p>
    <ol>
     <li>
      View&gt;Toolbars&gt;Intergrate … (如图)
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c5a576b7e44c68febc5f2b58e27e5d86.png"/>
      <br/>
      然后，就会多出来这个
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f93629e35c086d5e692afb29cd3313cc.png"/>
      <br/>
      点一下那个Python的图标，就会弹出来了
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/feca3756aa0ae0d2fced3a15208387c0.png"/>
      <br/>
      然后进入绿色已开启的笔记本，在最后一行加入STK_PID
      <br/>
      运行
      <br/>
      记住这个PID，这里是40556，每个人的可能不一样
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b08d4b4ce215949bcf39e184bb6796d0.png"/>
      <br/>
      然后，自己新建笔记本，我的方法是直接在想要放的路径中，打开cmd用ipython notebook
     </li>
    </ol>
    <p>
     输入以下代码，要修改的就是那个STK_PID，这个是根据刚才那一步得到的
    </p>
    <pre><code class="prism language-Python">from agi.stk12.stkdesktop import STKDesktop
from agi.stk12.stkobjects import *
from agi.stk12.stkutil import *
from agi.stk12.vgt import *
import os
</code></pre>
    <pre><code class="prism language-Python">STK_PID = 40556  # 根据自己刚刚得到的PID
stk = STKDesktop.AttachToApplication(pid=int(STK_PID))
# stk = STKDesktop.StartApplication(visible=True) #using optional visible argument
root = stk.Root
print(type(root))
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7f8b2e3a8db8998ed2207c1189e9cc62.png"/>
     <br/>
     如果允许成功了，就说明连接到STK了
     <br/>
     由于我们已经创建了场景
     <br/>
     因此，我们只要让代码连结现有的场景就可以了
    </p>
    <pre><code class="prism language-Python">scenario = root.CurrentScenario # 链接当前场景
scenario.SetTimePeriod('Today','+24hr') # 日期设置为今天
root.Rewind() # 复位
</code></pre>
    <p>
     新建两个简单的组件
    </p>
    <pre><code class="prism language-Python"># 添加地面站
target = AgTarget(scenario.Children.New(AgESTKObjectType.eTarget,"GroundTarget"))
target.Position.AssignGeodetic(50,-100,0)
# 添加卫星
satellite = AgSatellite(root.CurrentScenario.Children.New(AgESTKObjectType.eSatellite,"LeoSat"))
print(scenario.StartTime)
print(scenario.StopTime)
root.ExecuteCommand('SetState */Satellite/LeoSat Classical TwoBody "' + 
                    str(scenario.StartTime) + '" "' + str(scenario.StopTime) + 
                    '" 60 ICRF "' + str(scenario.StartTime) + '" 7200000.0 0.0 90 0.0 0.0 0.0');
</code></pre>
    <p>
     STK会同步更新组件
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f3ec38ac75667333e7618e9859849ef9.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34323633353134322f:61727469636c652f64657461696c732f313236363839353234" class_="artid" style="display:none">
 </p>
</div>


