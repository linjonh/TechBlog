---
layout: post
title: "WinSCP如何使用公网TCP地址访问本地服务器"
date: 2024-12-09 21:46:32 +0800
description: "​Winscp是一个支持SSH(Secure SHell)的可"
keywords: "windows tcp 访问"
categories: ['未分类']
tags: ['网络协议', '服务器', 'Tcp']
artid: "135845415"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=135845415
    alt: "WinSCP如何使用公网TCP地址访问本地服务器"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     WinSCP如何使用公网TCP地址访问本地服务器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#1__2" rel="nofollow">
          1. 简介
         </a>
        </li>
        <li>
         <a href="#2__26" rel="nofollow">
          2. 软件下载安装：
         </a>
        </li>
        <li>
         <a href="#3_SSH_38" rel="nofollow">
          3. SSH链接服务器
         </a>
        </li>
        <li>
         <a href="#4_WinSCPTCP_62" rel="nofollow">
          4. WinSCP使用公网TCP地址链接本地服务器
         </a>
        </li>
        <li>
         <a href="#5__WinSCPTCP_106" rel="nofollow">
          5. WinSCP使用固定公网TCP地址访问服务器
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h3>
     <a id="1__2">
     </a>
     1. 简介
    </h3>
    <p>
     ​
     <strong>
      Winscp
     </strong>
     是一个支持
     <strong>
      SSH(
      <strong>
       Secure SHell)的
      </strong>
      可视化
     </strong>
     SCP(Secure Copy)文件传输软件，它的主要功能是在本地与远程计算机间安全地复制文件，并且可以直接编辑文件。
    </p>
    <p>
     ​ 可视化操作就是直接把文件
     <strong>
      从本机拖入
     </strong>
     ，打开文件
     <strong>
      直接双击
     </strong>
     即可。
    </p>
    <img alt="image-20231026163601310" src="https://i-blog.csdnimg.cn/blog_migrate/597aec7002fa0921177ea998cb7698ed.png">
     <p>
      <strong>
       软件特性
      </strong>
     </p>
     <ul>
      <li>
       <p>
        支持协议众多：SSH ，FTP、SFTP、FTPS、SCP。
       </p>
      </li>
      <li>
       <p>
        友好的图形操作界面，设置可以在选项界面中更改皮肤。
       </p>
      </li>
      <li>
       <p>
        与 Windows 完美集成(拖拽, URL, 快捷方式)
       </p>
      </li>
      <li>
       <p>
        内置文本编辑器
       </p>
      </li>
      <li>
       <p>
        带有比较目录、同步、同步浏览、查找文件、清除缓存等额外有用功能。
       </p>
      </li>
      <li>
       <p>
        能够保存多个ftp会话。
       </p>
      </li>
     </ul>
     <h3>
      <a id="2__26">
      </a>
      2. 软件下载安装：
     </h3>
     <p>
      GIthub项目地址：
      <a href="https://github.com/winscp/winscp">
       Github WinSCP
      </a>
     </p>
     <p>
      下载链接：
      <a href="https://winscp.net/eng/download.php" rel="nofollow">
       download WinSCP
      </a>
     </p>
     <p>
      <img alt="image-20231026101124381" src="https://i-blog.csdnimg.cn/blog_migrate/d703032fe650317c28060a5a24d9b29c.png"/>
     </p>
     <p>
      Winscp界面：
     </p>
     <p>
      <img alt="image-20231026101231952" src="https://i-blog.csdnimg.cn/blog_migrate/79e0f87846a44ad6a7993b8b4a39310e.png"/>
     </p>
     <h3>
      <a id="3_SSH_38">
      </a>
      3. SSH链接服务器
     </h3>
     <p>
      首先，ifconfig命令查询服务器ip地址：
     </p>
     <p>
      这里以centos7系统举例（ubuntu等同理）：
     </p>
     <p>
      <img alt="image-20231026105722517" src="https://i-blog.csdnimg.cn/blog_migrate/9a7da9c22d0bd322d6dad93d6afbabc2.png"/>
     </p>
     <p>
      复制局域网地址：
      <code>
       192.168.40.162
      </code>
     </p>
     <p>
      <img alt="image-20231026110615656" src="https://i-blog.csdnimg.cn/blog_migrate/4fb2e4ea1a8340b8bb92b1c960e29bad.png"/>
     </p>
     <p>
      直接从win本地拖入文件：
     </p>
     <p>
      <img alt="image-20231026143413337" src="https://i-blog.csdnimg.cn/blog_migrate/25bf35836ab9bc5e7734d28a993b6342.png"/>
     </p>
     <p>
      检查一下，成功传输：
     </p>
     <p>
      <img alt="image-20231026143551998" src="https://i-blog.csdnimg.cn/blog_migrate/87f0749dc46d6edd4ceb7b24582b7b80.png"/>
     </p>
     <p>
      以上操作在本地进行，如果人在异地，需要公网访问本地服务器，就需要在本地服务器上安装内网穿透服务来实现将本地局域网地址映射至公网。
     </p>
     <h3>
      <a id="4_WinSCPTCP_62">
      </a>
      4. WinSCP使用公网TCP地址链接本地服务器
     </h3>
     <p>
      ​ 首先，我们需要提前在本地服务器上安装内网穿透软件，这里我使用的是
      <strong>
       免费版本不限流量
      </strong>
      且
      <strong>
       支持TCP
      </strong>
      传输的
      <a href="https://www.cpolar.com/" rel="nofollow">
       Cpolar
      </a>
      。
     </p>
     <p>
      <strong>
       如何安装Cpolar请参考：
      </strong>
     </p>
     <p>
      centos安装完毕后，浏览器登陆
      <strong>
       localhost:9200
      </strong>
      如下：（若centos
      <strong>
       无图形化界面
      </strong>
      可以
      <a href="https://www.cpolar.com/docs" rel="nofollow">
       手动调整隧道配置文件
      </a>
      实现穿透，在文档第四章）
     </p>
     <p>
      点击
      <strong>
       创建隧道
      </strong>
      ：
     </p>
     <p>
      <img alt="image-20231026150603677" src="https://i-blog.csdnimg.cn/blog_migrate/725f26fb5865494243275465c12f3ed7.png"/>
     </p>
     <p>
      示例如下：
     </p>
     <p>
      <img alt="image-20231026151246802" src="https://i-blog.csdnimg.cn/blog_migrate/2ad8631cfb9395c3d61ce73c818a0d6b.png"/>
     </p>
     <ul>
      <li>
       隧道名称：可自定义命名，注意不要与已有的隧道名称重复
      </li>
      <li>
       协议：选择TCP
      </li>
      <li>
       本地地址：22
      </li>
      <li>
       域名类型：随机临时（cpolar免费版）
      </li>
      <li>
       地区：选择China top
      </li>
     </ul>
     <p>
      点击
      <code>
       创建
      </code>
     </p>
     <p>
      <img alt="image-20231026151417135" src="https://i-blog.csdnimg.cn/blog_migrate/5e61a3ec02f53ec77509782bdd045e85.png"/>
     </p>
     <p>
      ​ 打开在线隧道列表, 复制刚刚映射的公网tcp地址
     </p>
     <p>
      回到winscp：
     </p>
     <p>
      <img alt="image-20231026151631524" src="https://i-blog.csdnimg.cn/blog_migrate/36d062fac5b75e93d381fb832b021a0f.png"/>
     </p>
     <ul>
      <li>
       协议：SFTP
      </li>
      <li>
       主机名：生成的公网地址（不带端口号）
      </li>
      <li>
       端口号：写cpolar生成的5位数端口号
      </li>
     </ul>
     <p>
      <img alt="image-20231026154231330" src="https://i-blog.csdnimg.cn/blog_migrate/cfb7548de169d4108c6893e6e80fb38a.png"/>
     </p>
     <p>
      <img alt="image-20231026154247961" src="https://i-blog.csdnimg.cn/blog_migrate/6475097460ffbdd4ed14582d7e16aad0.png"/>
     </p>
     <p>
      成功使用公网访问！
     </p>
     <h3>
      <a id="5__WinSCPTCP_106">
      </a>
      5. WinSCP使用固定公网TCP地址访问服务器
     </h3>
     <p>
      如果想将TCP链接固定为永久不变的ip地址，需要 使用 cpolar
      <strong>
       的付费功能
      </strong>
      ，将套餐
      <strong>
       升级
      </strong>
      为
      <strong>
       专业版套餐
      </strong>
      及以上，
      <strong>
       支持固定TCP地址
      </strong>
      。
     </p>
     <p>
      访问
      <a href="https://dashboard.cpolar.com/reserved" rel="nofollow">
       cpolar仪表盘
      </a>
      ：
     </p>
     <p>
      往下翻，找到保留TCP地址：
     </p>
     <p>
      <img alt="image-20231026154938345" src="https://i-blog.csdnimg.cn/blog_migrate/0f03cbaa577699837afadd695153806a.png"/>
     </p>
     <ul>
      <li>
       <p>
        地区：国内选择 china vip
       </p>
      </li>
      <li>
       <p>
        描述：自行填写，用来区分地址用途
       </p>
       <p>
        点击
        <strong>
         保留
        </strong>
       </p>
      </li>
     </ul>
     <p>
      回到
      <strong>
       服务器cpolar webui
      </strong>
      ：
     </p>
     <p>
      <img alt="image-20231026160630033" src="https://i-blog.csdnimg.cn/blog_migrate/4c7e6025bf74bcc535ca2ea0061c5472.png"/>
     </p>
     <ul>
      <li>
       <p>
        隧道名称：可自定义命名，注意不要与已有的隧道名称重复
       </p>
      </li>
      <li>
       <p>
        协议：选择TCP
       </p>
      </li>
      <li>
       <p>
        本地地址：22
       </p>
      </li>
      <li>
       <p>
        域名类型：随机临时（cpolar免费版）
       </p>
      </li>
      <li>
       <p>
        地区：选择China top
       </p>
       <p>
        映射为刚刚
        <strong>
         保留的固定tcp地址
        </strong>
       </p>
      </li>
     </ul>
     <p>
      <img alt="image-20231026162201285" src="https://i-blog.csdnimg.cn/blog_migrate/a8ac1777c204b659bdc6337ddaccf08c.png"/>
     </p>
     <p>
      所有配置都已经完成，现在我们就可以在
      <strong>
       异地公网
      </strong>
      访问centos服务器编辑和上传文件，并且链接
      <strong>
       地址固定永久
      </strong>
      不变！
     </p>
     <p>
      我们现在测试一下，回到winscp：
     </p>
     <p>
      <img alt="image-20231026160309546" src="https://i-blog.csdnimg.cn/blog_migrate/496252bfa1527a2c7e0656523785c390.png"/>
     </p>
     <p>
      成功使用固定tcp远程登陆centos服务器：
     </p>
     <p>
      <img alt="image-20231026162315124" src="https://i-blog.csdnimg.cn/blog_migrate/98b64b5e57c69995e7383ae97df00673.png"/>
     </p>
     <p>
      现在我们就可以使用任意一台电脑，无需在局域网内也可以访问此centos服务器！
     </p>
    </img>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f5469616d5f63722f:61727469636c652f64657461696c732f313335383435343135" class_="artid" style="display:none">
 </p>
</div>


