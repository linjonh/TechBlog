---
layout: post
title: "solr完整教程"
date: 2024-08-20 00:20:31 +0800
description: "目录(?)[-]概述企业搜索引擎方案选型Solr的特性Solr使用Lucene并且进行了扩展Sche"
keywords: "solr帮助教程"
categories: ['搜索模块']
tags: ['无标签']
artid: "42970935"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=42970935
    alt: "solr完整教程"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     solr完整教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <span class="link_postdate">
    </span>
    <span class="link_view" title="阅读次数">
    </span>
    <span class="link_comments" title="评论次数">
    </span>
    <span class="link_collect">
    </span>
    <span class="link_report">
    </span>
    <div style="border:solid 1px #ccc; background:#eee; float:left; min-width:200px; padding:4px 10px">
     <p style="text-align:right; margin:0">
      <span style="float:left">
       目录
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#" rel="noopener noreferrer" target="_blank" title="系统根据文章中H1到H6标签自动生成文章目录">
        (?)
       </a>
      </span>
      <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#" rel="noopener noreferrer" target="_blank" title="收起">
       [-]
      </a>
     </p>
     <ol style="margin-left:14px; padding-left:14px; line-height:160%">
      <li>
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t0" rel="noopener noreferrer" target="_blank">
        概述
       </a>
       <ol>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t1" rel="noopener noreferrer" target="_blank">
          企业搜索引擎方案选型
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t2" rel="noopener noreferrer" target="_blank">
          Solr的特性
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t3" rel="noopener noreferrer" target="_blank">
            Solr使用Lucene并且进行了扩展
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t4" rel="noopener noreferrer" target="_blank">
            Schema模式
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t5" rel="noopener noreferrer" target="_blank">
            查询
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t6" rel="noopener noreferrer" target="_blank">
            核心
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t7" rel="noopener noreferrer" target="_blank">
            缓存
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t8" rel="noopener noreferrer" target="_blank">
            复制
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t9" rel="noopener noreferrer" target="_blank">
            管理接口
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t10" rel="noopener noreferrer" target="_blank">
          Solr服务原理
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t11" rel="noopener noreferrer" target="_blank">
            索引
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t12" rel="noopener noreferrer" target="_blank">
            搜索
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t13" rel="noopener noreferrer" target="_blank">
          源码结构
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t14" rel="noopener noreferrer" target="_blank">
            目录结构说明
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t15" rel="noopener noreferrer" target="_blank">
            Solr home说明
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t16" rel="noopener noreferrer" target="_blank">
            solr的各包的说明
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t17" rel="noopener noreferrer" target="_blank">
          版本说明
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t18" rel="noopener noreferrer" target="_blank">
            版本
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t19" rel="noopener noreferrer" target="_blank">
            版本
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t20" rel="noopener noreferrer" target="_blank">
          分布式和复制 Solr 架构
         </a>
        </li>
       </ol>
      </li>
      <li>
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t21" rel="noopener noreferrer" target="_blank">
        Solr的安装与配置
       </a>
       <ol>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t22" rel="noopener noreferrer" target="_blank">
          在Tomcat下Solr安装
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t23" rel="noopener noreferrer" target="_blank">
            安装准备
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t24" rel="noopener noreferrer" target="_blank">
            安装过程
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t25" rel="noopener noreferrer" target="_blank">
            验证安装
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t26" rel="noopener noreferrer" target="_blank">
          中文分词配置
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t27" rel="noopener noreferrer" target="_blank">
            mmseg4j
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t28" rel="noopener noreferrer" target="_blank">
            paoding
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t29" rel="noopener noreferrer" target="_blank">
          多核MultiCore配置
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t30" rel="noopener noreferrer" target="_blank">
            MultiCore的配置方法
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t31" rel="noopener noreferrer" target="_blank">
            为何使用多core
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t32" rel="noopener noreferrer" target="_blank">
          配置文件说明
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t33" rel="noopener noreferrer" target="_blank">
            schemaxml
           </a>
           <ol>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t34" rel="noopener noreferrer" target="_blank">
              FieldType类型
             </a>
            </li>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t35" rel="noopener noreferrer" target="_blank">
              Fields字段
             </a>
            </li>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t36" rel="noopener noreferrer" target="_blank">
              copyField复制字段
             </a>
            </li>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t37" rel="noopener noreferrer" target="_blank">
              dynamicField动态字段
             </a>
            </li>
           </ol>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t38" rel="noopener noreferrer" target="_blank">
            solrconfigxml
           </a>
          </li>
         </ol>
        </li>
       </ol>
      </li>
      <li>
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t39" rel="noopener noreferrer" target="_blank">
        Solr的应用
       </a>
       <ol>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t40" rel="noopener noreferrer" target="_blank">
          SOLR应用概述
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t41" rel="noopener noreferrer" target="_blank">
            Solr的应用模式
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t42" rel="noopener noreferrer" target="_blank">
            SOLR的使用过程说明
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t43" rel="noopener noreferrer" target="_blank">
          一个简单的例子
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t44" rel="noopener noreferrer" target="_blank">
            Solr Schema 设计
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t45" rel="noopener noreferrer" target="_blank">
            构建索引
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t46" rel="noopener noreferrer" target="_blank">
            搜索测试
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t47" rel="noopener noreferrer" target="_blank">
          搜索引擎的规划设计
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t48" rel="noopener noreferrer" target="_blank">
            定义业务模型
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t49" rel="noopener noreferrer" target="_blank">
            定制索引服务
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t50" rel="noopener noreferrer" target="_blank">
            定制搜索服务
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t51" rel="noopener noreferrer" target="_blank">
          搜索引擎配置
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t52" rel="noopener noreferrer" target="_blank">
            Solr Schema 设计如何定制索引的结构
           </a>
           <ol>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t53" rel="noopener noreferrer" target="_blank">
              定义好需要的类型Fieldtype
             </a>
            </li>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t54" rel="noopener noreferrer" target="_blank">
              定义好需要的字段Fielde
             </a>
            </li>
           </ol>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t55" rel="noopener noreferrer" target="_blank">
            如何进行索引操作
           </a>
           <ol>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t56" rel="noopener noreferrer" target="_blank">
              基本索引操作
             </a>
             <ol>
              <li>
               <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t57" rel="noopener noreferrer" target="_blank">
                新增更新索引
               </a>
              </li>
              <li>
               <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t58" rel="noopener noreferrer" target="_blank">
                删除索引
               </a>
               <ol>
                <li>
                 <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t59" rel="noopener noreferrer" target="_blank">
                  删除制定ID的索引
                 </a>
                </li>
                <li>
                 <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t60" rel="noopener noreferrer" target="_blank">
                  删除查询到的索引数据
                 </a>
                </li>
                <li>
                 <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t61" rel="noopener noreferrer" target="_blank">
                  删除所有索引数据
                 </a>
                </li>
               </ol>
              </li>
              <li>
               <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t62" rel="noopener noreferrer" target="_blank">
                批量索引操作
               </a>
               <ol>
                <li>
                 <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t63" rel="noopener noreferrer" target="_blank">
                  通过CVS文件的方式提交
                 </a>
                </li>
                <li>
                 <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t64" rel="noopener noreferrer" target="_blank">
                  数据库数据导入生成索引DataImportHandler DIH
                 </a>
                 <ol>
                  <li>
                   <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t65" rel="noopener noreferrer" target="_blank">
                    全量更新索引
                   </a>
                  </li>
                  <li>
                   <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t66" rel="noopener noreferrer" target="_blank">
                    增量更新索引
                   </a>
                  </li>
                 </ol>
                </li>
                <li>
                 <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t67" rel="noopener noreferrer" target="_blank">
                  如何进行搜索
                 </a>
                 <ol>
                  <li>
                   <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t68" rel="noopener noreferrer" target="_blank">
                    搜索语法
                   </a>
                   <ol>
                    <li>
                     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t69" rel="noopener noreferrer" target="_blank">
                      solr 查询参数说明
                     </a>
                     <ol>
                      <li>
                       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t70" rel="noopener noreferrer" target="_blank">
                        常用
                       </a>
                      </li>
                      <li>
                       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t71" rel="noopener noreferrer" target="_blank">
                        不常用
                       </a>
                      </li>
                      <li>
                       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t72" rel="noopener noreferrer" target="_blank">
                        其它
                       </a>
                      </li>
                     </ol>
                    </li>
                    <li>
                     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t73" rel="noopener noreferrer" target="_blank">
                      Solr的检索运算符
                     </a>
                    </li>
                    <li>
                     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t74" rel="noopener noreferrer" target="_blank">
                      solr查询的一些常用语法
                     </a>
                    </li>
                   </ol>
                  </li>
                  <li>
                   <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t75" rel="noopener noreferrer" target="_blank">
                    排序
                   </a>
                  </li>
                  <li>
                   <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t76" rel="noopener noreferrer" target="_blank">
                    字段增加权重
                   </a>
                  </li>
                  <li>
                   <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t77" rel="noopener noreferrer" target="_blank">
                    Solr分词器过滤器分析器
                   </a>
                  </li>
                  <li>
                   <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t78" rel="noopener noreferrer" target="_blank">
                    Solr高亮使用
                   </a>
                  </li>
                 </ol>
                </li>
               </ol>
              </li>
             </ol>
            </li>
           </ol>
          </li>
         </ol>
        </li>
       </ol>
      </li>
      <li>
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t79" rel="noopener noreferrer" target="_blank">
        SolrJ的用法
       </a>
       <ol>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t80" rel="noopener noreferrer" target="_blank">
          搜索接口的调用实例
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t81" rel="noopener noreferrer" target="_blank">
          Solrj的使用说明
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t82" rel="noopener noreferrer" target="_blank">
            Adding Data to Solr
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t83" rel="noopener noreferrer" target="_blank">
            Directly adding POJOs to Solr
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t84" rel="noopener noreferrer" target="_blank">
            Reading Data from Solr
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t85" rel="noopener noreferrer" target="_blank">
          创建查询
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t86" rel="noopener noreferrer" target="_blank">
          使用 SolrJ 创建索引
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t87" rel="noopener noreferrer" target="_blank">
          Solrj包的结构说明
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t88" rel="noopener noreferrer" target="_blank">
            CommonsHttpSolrServer
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t89" rel="noopener noreferrer" target="_blank">
            Setting XMLResponseParser
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t90" rel="noopener noreferrer" target="_blank">
            Changing other Connection Settings
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t91" rel="noopener noreferrer" target="_blank">
            EmbeddedSolrServer
           </a>
          </li>
         </ol>
        </li>
       </ol>
      </li>
      <li>
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t92" rel="noopener noreferrer" target="_blank">
        Solr的实际应用测试报告
       </a>
       <ol>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t93" rel="noopener noreferrer" target="_blank">
          线下压力测试报告
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t94" rel="noopener noreferrer" target="_blank">
          线上环境运行报告
         </a>
        </li>
       </ol>
      </li>
      <li>
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t95" rel="noopener noreferrer" target="_blank">
        solr性能调优
       </a>
       <ol>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t96" rel="noopener noreferrer" target="_blank">
          Schema Design Considerations
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t97" rel="noopener noreferrer" target="_blank">
            indexedfields
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t98" rel="noopener noreferrer" target="_blank">
            storedfields
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t99" rel="noopener noreferrer" target="_blank">
          ConfigurationConsiderations
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t100" rel="noopener noreferrer" target="_blank">
            mergeFactor
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t101" rel="noopener noreferrer" target="_blank">
            mergeFactor Tradeoffs
           </a>
          </li>
         </ol>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t102" rel="noopener noreferrer" target="_blank">
          Cache autoWarm Count Considerations
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t103" rel="noopener noreferrer" target="_blank">
          Cache hit rate缓存命中率
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t104" rel="noopener noreferrer" target="_blank">
          Explicit Warming of Sort Fields
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t105" rel="noopener noreferrer" target="_blank">
          OptimizationConsiderations
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t106" rel="noopener noreferrer" target="_blank">
          Updates and Commit Frequency Tradeoffs
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t107" rel="noopener noreferrer" target="_blank">
          Query Response Compression
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t108" rel="noopener noreferrer" target="_blank">
          Embedded vs HTTP Post
         </a>
        </li>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t109" rel="noopener noreferrer" target="_blank">
          RAM UsageConsiderations内存方面的考虑
         </a>
         <ol>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t110" rel="noopener noreferrer" target="_blank">
            OutOfMemoryErrors
           </a>
          </li>
          <li>
           <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t111" rel="noopener noreferrer" target="_blank">
            Memory allocated to the Java VM
           </a>
           <ol>
            <li>
             <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t112" rel="noopener noreferrer" target="_blank">
              Factors affecting memory usage影响内存使用量的因素
             </a>
            </li>
           </ol>
          </li>
         </ol>
        </li>
       </ol>
      </li>
      <li>
       <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t113" rel="noopener noreferrer" target="_blank">
        FAQ
       </a>
       <ol>
        <li>
         <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#t114" rel="noopener noreferrer" target="_blank">
          出现乱码或者查不到结果的排查方法
         </a>
        </li>
       </ol>
      </li>
     </ol>
    </div>
    <p>
     <a name="OLE_LINK4" target="_blank">
     </a>
     <a name="OLE_LINK3" target="_blank">
     </a>
     <a name="OLE_LINK2" target="_blank">
     </a>
     <a name="文档名称" target="_blank">
     </a>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <br/>
    </p>
    <br/>
    <p align="center">
     <strong>
      目 录
     </strong>
    </p>
    <p align="center">
     <strong>
     </strong>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337190" rel="noopener noreferrer" target="_blank">
      1
      <span style="color:windowtext">
      </span>
      概述
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337191" rel="noopener noreferrer" target="_blank">
      1.1
      <span style="color:windowtext">
      </span>
      企业搜索引擎方案选型
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337192" rel="noopener noreferrer" target="_blank">
      1.2
      <span style="color:windowtext">
      </span>
      Solr的特性
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337193" rel="noopener noreferrer" target="_blank">
      1.2.1
      <span style="color:windowtext">
      </span>
      Solr使用Lucene并且进行了扩展
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337194" rel="noopener noreferrer" target="_blank">
      1.2.2
      <span style="color:windowtext">
      </span>
      Schema（模式）
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       5
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337195" rel="noopener noreferrer" target="_blank">
      1.2.3
      <span style="color:windowtext">
      </span>
      查询
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       5
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337196" rel="noopener noreferrer" target="_blank">
      1.2.4
      <span style="color:windowtext">
      </span>
      核心
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       5
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337197" rel="noopener noreferrer" target="_blank">
      1.2.5
      <span style="color:windowtext">
      </span>
      缓存
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       5
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337198" rel="noopener noreferrer" target="_blank">
      1.2.6
      <span style="color:windowtext">
      </span>
      复制
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       6
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337199" rel="noopener noreferrer" target="_blank">
      1.2.7
      <span style="color:windowtext">
      </span>
      管理接口
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       6
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337200" rel="noopener noreferrer" target="_blank">
      1.3
      <span style="color:windowtext">
      </span>
      <strong>
       Solr服务原理
      </strong>
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       6
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337201" rel="noopener noreferrer" target="_blank">
      1.3.1
      <span style="color:windowtext">
      </span>
      索引
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       6
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337202" rel="noopener noreferrer" target="_blank">
      1.3.2
      <span style="color:windowtext">
      </span>
      搜索
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       7
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337203" rel="noopener noreferrer" target="_blank">
      1.4
      <span style="color:windowtext">
      </span>
      源码结构
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       8
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337204" rel="noopener noreferrer" target="_blank">
      1.4.1
      <span style="color:windowtext">
      </span>
      目录结构说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       8
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337205" rel="noopener noreferrer" target="_blank">
      1.4.2
      <span style="color:windowtext">
      </span>
      Solr home说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       9
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337206" rel="noopener noreferrer" target="_blank">
      1.4.3
      <span style="color:windowtext">
      </span>
      solr的各包的说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       10
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337207" rel="noopener noreferrer" target="_blank">
      1.5
      <span style="color:windowtext">
      </span>
      版本说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       11
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337208" rel="noopener noreferrer" target="_blank">
      1.5.1
      <span style="color:windowtext">
      </span>
      1.3版本
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       11
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337209" rel="noopener noreferrer" target="_blank">
      1.5.2
      <span style="color:windowtext">
      </span>
      1.4版本
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       12
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337210" rel="noopener noreferrer" target="_blank">
      1.6
      <span style="color:windowtext">
      </span>
      分布式和复制 Solr 架构
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337211" rel="noopener noreferrer" target="_blank">
      2
      <span style="color:windowtext">
      </span>
      Solr的安装与配置
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337212" rel="noopener noreferrer" target="_blank">
      2.1
      <span style="color:windowtext">
      </span>
      在Tomcat下Solr安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337213" rel="noopener noreferrer" target="_blank">
      2.1.1
      <span style="color:windowtext">
      </span>
      安装准备
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337214" rel="noopener noreferrer" target="_blank">
      2.1.2
      <span style="color:windowtext">
      </span>
      安装过程
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       14
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337215" rel="noopener noreferrer" target="_blank">
      2.1.3
      <span style="color:windowtext">
      </span>
      验证安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       15
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337216" rel="noopener noreferrer" target="_blank">
      2.2
      <span style="color:windowtext">
      </span>
      中文分词配置
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       15
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337217" rel="noopener noreferrer" target="_blank">
      2.2.1
      <span style="color:windowtext">
      </span>
      mmseg4j
      <span style="color:windowtext">
       15
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337218" rel="noopener noreferrer" target="_blank">
      2.2.2
      <span style="color:windowtext">
      </span>
      paoding
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       19
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337219" rel="noopener noreferrer" target="_blank">
      2.3
      <span style="color:windowtext">
      </span>
      多核（MultiCore）配置
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       22
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337220" rel="noopener noreferrer" target="_blank">
      2.3.1
      <span style="color:windowtext">
      </span>
      MultiCore的配置方法
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       22
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337221" rel="noopener noreferrer" target="_blank">
      2.3.2
      <span style="color:windowtext">
      </span>
      为何使用多core ？
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       23
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337222" rel="noopener noreferrer" target="_blank">
      2.4
      <span style="color:windowtext">
      </span>
      配置文件说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       23
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337223" rel="noopener noreferrer" target="_blank">
      2.4.1
      <span style="color:windowtext">
      </span>
      schema.xml
      <span style="color:windowtext">
       24
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337224" rel="noopener noreferrer" target="_blank">
      2.4.2
      <span style="color:windowtext">
      </span>
      solrconfig.xml
      <span style="color:windowtext">
       25
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337225" rel="noopener noreferrer" target="_blank">
      3
      <span style="color:windowtext">
      </span>
      Solr的应用
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       29
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337226" rel="noopener noreferrer" target="_blank">
      3.1
      <span style="color:windowtext">
      </span>
      SOLR应用概述
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       29
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337227" rel="noopener noreferrer" target="_blank">
      3.1.1
      <span style="color:windowtext">
      </span>
      Solr的应用模式
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       29
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337228" rel="noopener noreferrer" target="_blank">
      3.1.2
      <span style="color:windowtext">
      </span>
      SOLR的使用过程说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       30
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337229" rel="noopener noreferrer" target="_blank">
      3.2
      <span style="color:windowtext">
      </span>
      一个简单的例子
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       30
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337230" rel="noopener noreferrer" target="_blank">
      3.2.1
      <span style="color:windowtext">
      </span>
      Solr Schema 设计
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       30
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337231" rel="noopener noreferrer" target="_blank">
      3.2.2
      <span style="color:windowtext">
      </span>
      构建索引
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       30
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337232" rel="noopener noreferrer" target="_blank">
      3.2.3
      <span style="color:windowtext">
      </span>
      搜索测试
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       31
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337233" rel="noopener noreferrer" target="_blank">
      3.3
      <span style="color:windowtext">
      </span>
      搜索引擎的规划设计
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       32
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337234" rel="noopener noreferrer" target="_blank">
      3.3.1
      <span style="color:windowtext">
      </span>
      定义业务模型
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       32
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337235" rel="noopener noreferrer" target="_blank">
      3.3.2
      <span style="color:windowtext">
      </span>
      定制索引服务
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       34
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337236" rel="noopener noreferrer" target="_blank">
      3.3.3
      <span style="color:windowtext">
      </span>
      定制搜索服务
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       34
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337237" rel="noopener noreferrer" target="_blank">
      3.4
      <span style="color:windowtext">
      </span>
      搜索引擎配置
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       34
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337238" rel="noopener noreferrer" target="_blank">
      3.4.1
      <span style="color:windowtext">
      </span>
      Solr Schema 设计(如何定制索引的结构?)
      <span style="color:windowtext">
       34
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337239" rel="noopener noreferrer" target="_blank">
      3.5
      <span style="color:windowtext">
      </span>
      如何进行索引操作？
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       36
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337240" rel="noopener noreferrer" target="_blank">
      3.5.1
      <span style="color:windowtext">
      </span>
      基本索引操作
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       36
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337241" rel="noopener noreferrer" target="_blank">
      3.5.2
      <span style="color:windowtext">
      </span>
      批量索引操作
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       37
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337242" rel="noopener noreferrer" target="_blank">
      3.6
      <span style="color:windowtext">
      </span>
      如何进行搜索
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       39
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337243" rel="noopener noreferrer" target="_blank">
      3.6.1
      <span style="color:windowtext">
      </span>
      搜索语法
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       39
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337244" rel="noopener noreferrer" target="_blank">
      3.6.2
      <span style="color:windowtext">
      </span>
      排序
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       42
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337245" rel="noopener noreferrer" target="_blank">
      3.6.3
      <span style="color:windowtext">
      </span>
      字段增加权重
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       42
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337246" rel="noopener noreferrer" target="_blank">
      3.6.4
      <span style="color:windowtext">
      </span>
      Solr分词器、过滤器、分析器
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       42
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337247" rel="noopener noreferrer" target="_blank">
      3.6.5
      <span style="color:windowtext">
      </span>
      Solr高亮使用
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       46
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337248" rel="noopener noreferrer" target="_blank">
      4
      <span style="color:windowtext">
      </span>
      SolrJ的用法
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       46
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337249" rel="noopener noreferrer" target="_blank">
      4.1
      <span style="color:windowtext">
      </span>
      搜索接口的调用实例
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       46
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337250" rel="noopener noreferrer" target="_blank">
      4.2
      <span style="color:windowtext">
      </span>
      Solrj的使用说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       47
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337251" rel="noopener noreferrer" target="_blank">
      4.2.1
      <span style="color:windowtext">
      </span>
      Adding Data to Solr
      <span style="color:windowtext">
       47
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337252" rel="noopener noreferrer" target="_blank">
      4.2.2
      <span style="color:windowtext">
      </span>
      Directly adding POJOs to Solr
      <span style="color:windowtext">
       49
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337253" rel="noopener noreferrer" target="_blank">
      4.2.3
      <span style="color:windowtext">
      </span>
      Reading Data from Solr
      <span style="color:windowtext">
       51
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337254" rel="noopener noreferrer" target="_blank">
      4.3
      <span style="color:windowtext">
      </span>
      创建查询
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       51
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337255" rel="noopener noreferrer" target="_blank">
      <strong>
       4.4
      </strong>
      <span style="color:windowtext">
      </span>
      <strong>
       使用 SolrJ 创建索引
      </strong>
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       52
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337256" rel="noopener noreferrer" target="_blank">
      4.5
      <span style="color:windowtext">
      </span>
      Solrj包的结构说明
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       53
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337257" rel="noopener noreferrer" target="_blank">
      4.5.1
      <span style="color:windowtext">
      </span>
      CommonsHttpSolrServer
      <span style="color:windowtext">
       53
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337258" rel="noopener noreferrer" target="_blank">
      4.5.2
      <span style="color:windowtext">
      </span>
      Setting XMLResponseParser
      <span style="color:windowtext">
       53
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337259" rel="noopener noreferrer" target="_blank">
      4.5.3
      <span style="color:windowtext">
      </span>
      Changing other Connection Settings
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       53
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337260" rel="noopener noreferrer" target="_blank">
      4.5.4
      <span style="color:windowtext">
      </span>
      EmbeddedSolrServer
      <span style="color:windowtext">
       54
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337261" rel="noopener noreferrer" target="_blank">
      5
      <span style="color:windowtext">
      </span>
      Solr的实际应用测试报告
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       54
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337262" rel="noopener noreferrer" target="_blank">
      5.1
      <span style="color:windowtext">
      </span>
      线下压力测试报告
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       54
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337263" rel="noopener noreferrer" target="_blank">
      5.2
      <span style="color:windowtext">
      </span>
      线上环境运行报告
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       54
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337264" rel="noopener noreferrer" target="_blank">
      6
      <span style="color:windowtext">
      </span>
      solr性能调优
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       55
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337265" rel="noopener noreferrer" target="_blank">
      6.1
      <span style="color:windowtext">
      </span>
      Schema Design Considerations
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       55
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337266" rel="noopener noreferrer" target="_blank">
      6.1.1
      <span style="color:windowtext">
      </span>
      indexed fields
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       55
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337267" rel="noopener noreferrer" target="_blank">
      6.1.2
      <span style="color:windowtext">
      </span>
      stored fields
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       55
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337268" rel="noopener noreferrer" target="_blank">
      6.2
      <span style="color:windowtext">
      </span>
      Configuration Considerations
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       55
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337269" rel="noopener noreferrer" target="_blank">
      6.2.1
      <span style="color:windowtext">
      </span>
      mergeFactor
      <span style="color:windowtext">
       55
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337270" rel="noopener noreferrer" target="_blank">
      6.2.2
      <span style="color:windowtext">
      </span>
      mergeFactor Tradeoffs
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       56
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337271" rel="noopener noreferrer" target="_blank">
      6.3
      <span style="color:windowtext">
      </span>
      Cache autoWarm Count Considerations
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       56
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337272" rel="noopener noreferrer" target="_blank">
      6.4
      <span style="color:windowtext">
      </span>
      Cache hit rate（缓存命中率）
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       56
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337273" rel="noopener noreferrer" target="_blank">
      6.5
      <span style="color:windowtext">
      </span>
      Explicit Warming of Sort Fields
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       56
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337274" rel="noopener noreferrer" target="_blank">
      6.6
      <span style="color:windowtext">
      </span>
      Optimization Considerations
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       56
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337275" rel="noopener noreferrer" target="_blank">
      6.7
      <span style="color:windowtext">
      </span>
      Updates and Commit Frequency Tradeoffs
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       56
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337276" rel="noopener noreferrer" target="_blank">
      6.8
      <span style="color:windowtext">
      </span>
      Query Response Compression
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       57
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337277" rel="noopener noreferrer" target="_blank">
      6.9
      <span style="color:windowtext">
      </span>
      Embedded vs HTTP Post
      <span style="color:windowtext">
       57
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337278" rel="noopener noreferrer" target="_blank">
      6.10
      <span style="color:windowtext">
      </span>
      RAM Usage Considerations（内存方面的考虑）
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       57
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337279" rel="noopener noreferrer" target="_blank">
      6.10.1
      <span style="color:windowtext">
      </span>
      OutOfMemoryErrors
      <span style="color:windowtext">
       .
      </span>
      <span style="color:windowtext">
       57
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337280" rel="noopener noreferrer" target="_blank">
      6.10.2
      <span style="color:windowtext">
      </span>
      Memory allocated to the Java VM
      <span style="color:windowtext">
       ..
      </span>
      <span style="color:windowtext">
       57
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337281" rel="noopener noreferrer" target="_blank">
      7
      <span style="color:windowtext">
      </span>
      FAQ
      <span style="color:windowtext">
       ..
      </span>
      <span style="color:windowtext">
       58
      </span>
     </a>
    </p>
    <p>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Toc277337282" rel="noopener noreferrer" target="_blank">
      7.1
      <span style="color:windowtext">
      </span>
      出现乱码或者查不到结果的排查方法：
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       58
      </span>
     </a>
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <h2>
     <a name="t0" target="_blank">
     </a>
     <a name="_Toc277337190" target="_blank">
      1      概述
     </a>
    </h2>
    <h3>
     <a name="t1" target="_blank">
     </a>
     <a name="_Toc277337191" target="_blank">
      1.1      企业搜索引擎方案选型
     </a>
    </h3>
    <p>
     <span style="color:black">
      由于搜索引擎功能在门户社区中对提高用户体验有着重在门户社区中涉及大量需要搜索引擎的功能需求，目前在实现搜索引擎的方案上有集中方案可供选择：
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      1)
     </span>
     <span style="color:black">
      基于
     </span>
     <strong>
      <span style="color:black">
       Lucene
      </span>
     </strong>
     <span style="color:black">
      自己进行封装实现站内搜索。工作量及扩展性都较大，不采用。
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      调用
     </span>
     <strong>
      <span style="color:black">
       Google
      </span>
      <span style="color:black">
       、
      </span>
      <span style="color:black">
       Baidu
      </span>
      <span style="color:black">
       的
      </span>
      <span style="color:black">
       API
      </span>
     </strong>
     <span style="color:black">
      实现站内搜索。同第三方搜索引擎绑定太死，无法满足后期业务扩展需要，暂时不采用。
     </span>
    </p>
    <p>
     <span style="color:black">
      3)
     </span>
     <span style="color:black">
      基于
     </span>
     <strong>
      <span style="color:black">
       Compass+Lucene
      </span>
     </strong>
     <span style="color:black">
      实现站内搜索。适合于对数据库驱动的应用数据进行索引，尤其是替代传统的
     </span>
     <span style="color:black">
      like‘%expression%’
     </span>
     <span style="color:black">
      来实现对
     </span>
     <span style="color:black">
      varchar
     </span>
     <span style="color:black">
      或
     </span>
     <span style="color:black">
      clob
     </span>
     <span style="color:black">
      等字段的索引，对于实现站内搜索是一种值得采纳的方案。但在分布式处理、接口封装上尚需要自己进行一定程度的封装
     </span>
     。
    </p>
    <p>
     <span style="color:black">
      4)
     </span>
     <span style="color:black">
      基于
     </span>
     <strong>
      <span style="color:black">
       Solr
      </span>
     </strong>
     <span style="color:black">
      实现站内搜索。封装及扩展性较好，提供了较为完备的解决方案，因此在门户社区中采用此方案。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <strong>
      <span style="color:black">
       基于以述的几种方案的综合分析，对于我们公司的搜索引擎方案，采用
      </span>
      <span style="color:black">
       solr
      </span>
      <span style="color:black">
       来实现比较合适。
      </span>
     </strong>
    </p>
    <h3>
     <a name="t2" target="_blank">
     </a>
     <a name="_Toc277337192" target="_blank">
      1.2      Solr
     </a>
     的特性
    </h3>
    <p>
     <span style="color:black">
      ApacheSolr
     </span>
     <span style="color:black">
      是一个开源的搜索服务器，
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      使用
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      语言开发，主要基于
     </span>
     <span style="color:black">
      HTTP
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      Apache Lucene
     </span>
     <span style="color:black">
      实现。定制
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      索引的实现方法很简单，用
     </span>
     <span style="color:black">
      POST
     </span>
     <span style="color:black">
      方法向
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      服务器发送一个描述所有
     </span>
     <span style="color:black">
      Field
     </span>
     <span style="color:black">
      及其内容的
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      文档就可以了。定制搜索的时候只需要发送
     </span>
     <span style="color:black">
      HTTPGET
     </span>
     <span style="color:black">
      请求即可，然后对
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      返回的信息进行重新布局，以产生利于用户理解的页面内容布局。
     </span>
     <span style="color:black">
      Solr1.3
     </span>
     <span style="color:black">
      版本开始支持从数据库（通过
     </span>
     <span style="color:black">
      JDBC
     </span>
     <span style="color:black">
      ）、
     </span>
     <span style="color:black">
      RSS
     </span>
     <span style="color:black">
      提要、
     </span>
     <span style="color:black">
      Web
     </span>
     <span style="color:black">
      页面和文件中导入数据，但是不直接支持从二进制文件格式中提取内容，比如
     </span>
     <span style="color:black">
      MSOffice
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      AdobePDF
     </span>
     <span style="color:black">
      或其他专有格式。
     </span>
    </p>
    <p>
     <span style="color:black">
      更重要的是，
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      创建的索引与
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      搜索引擎库完全兼容。通过对
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      进行适当的配置，某些情况下可能需要进行编码，
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      可以阅读和使用构建到其他
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      应用程序中的索引。此外，很多
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      工具（如
     </span>
     <span style="color:black">
      Nutch
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      Luke
     </span>
     <span style="color:black">
      ）也可以使用
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      创建的索引
     </span>
    </p>
    <p>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的特性包括：
     </span>
    </p>
    <p>
     ü
     <span style="color:black">
      高级的全文搜索功能
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      专为高通量的网络流量进行的优化
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      基于开放接口（
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      HTTP
     </span>
     <span style="color:black">
      ）的标准
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      综合的
     </span>
     <span style="color:black">
      HTML
     </span>
     <span style="color:black">
      管理界面
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      可伸缩性－能够有效地复制到另外一个
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      搜索服务器
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      使用
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      配置达到灵活性和适配性
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      可扩展的插件体系
     </span>
    </p>
    <h4>
     <a name="t3" target="_blank">
     </a>
     <a name="_Toc277337193" target="_blank">
      1.2.1     Solr
     </a>
     使用Lucene并且进行了扩展
    </h4>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      一个真正的拥有动态域
     </span>
     <span style="color:black">
      (DynamicField)
     </span>
     <span style="color:black">
      和唯一键
     </span>
     <span style="color:black">
      (UniqueKey)
     </span>
     <span style="color:black">
      的数据模式
     </span>
     <span style="color:black">
      (DataSchema)
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      对
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      查询语言的强大扩展！
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      支持对结果进行动态的分组和过滤
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      高级的，可配置的文本分析
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      高度可配置和可扩展的缓存机制
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      性能优化
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      支持通过
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      进行外部配置
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      拥有一个管理界面
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      可监控的日志
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      支持
     </span>
     <span style="color:red">
      高速增量式更新
     </span>
     <span style="color:black">
      (Fastincremental Updates)
     </span>
     <span style="color:black">
      和快照发布
     </span>
     <span style="color:black">
      (SnapshotDistribution)
     </span>
    </p>
    <h4>
     <a name="t4" target="_blank">
     </a>
     <a name="_Toc277337194" target="_blank">
      1.2.2     Schema
     </a>
     （模式）
    </h4>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      定义域类型和文档的域
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      能够驱动智能处理
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      声明式的
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      分析器规范
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      动态域能够随时增加域
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      拷贝域功能允许对一个域进行多种方式的索引，或者将多个域联合成一个可搜索的域
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      显式类型能够减少对域类型的猜测
     </span>
    </p>
    <p>
     ü
     <span style="color:black">
      能够使用外部的基于文件的终止词列表，同义词列表和保护词列表的配置
     </span>
    </p>
    <h4>
     <a name="t5" target="_blank">
     </a>
     <a name="_Toc277337195" target="_blank">
      1.2.3     查询
     </a>
    </h4>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      拥有可配置响应格式（
     </span>
     <span style="color:black">
      XML/XSLT,JSON,Python,Ruby
     </span>
     <span style="color:black">
      ）的
     </span>
     <span style="color:black">
      HTTP
     </span>
     <span style="color:black">
      接口
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      高亮的上下文搜索结果
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      基于域值和显式查询的片段式搜索（
     </span>
     <span style="color:black">
      FacetedSearch
     </span>
     <span style="color:black">
      ）
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      对查询语言增加了排序规范
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      常量的打分范围
     </span>
     <span style="color:black">
      (Constantscoring range)
     </span>
     <span style="color:black">
      和前缀式查询－没有
     </span>
     <span style="color:black">
      idf,coord,
     </span>
     <span style="color:black">
      或者
     </span>
     <span style="color:black">
      lengthNorm
     </span>
     <span style="color:black">
      因子，对查询匹配的词没有数量限制
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      函数查询
     </span>
     <span style="color:black">
      (FunctionQuery)-
     </span>
     <span style="color:black">
      通过关于一个域的数值或顺序的函数对打分进行影响
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      性能优化
     </span>
    </p>
    <h4>
     <a name="t6" target="_blank">
     </a>
     <a name="_Toc277337196" target="_blank">
      1.2.4     核心
     </a>
    </h4>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      可插拔的查询句柄（
     </span>
     <span style="color:black">
      QueryHandler
     </span>
     <span style="color:black">
      ）和可扩展的
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      数据格式
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      使用唯一键的域能够增强文档唯一性
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      能够高效地进行批量更新和删除
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      用户可配置的文档索引变化触发器（命令）
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      并发控制的搜索器
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      能够正确处理数字类型，从而能够进行排序和范围搜索
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      能够控制缺失排序域的文档
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      支持搜索结果的动态分组
     </span>
    </p>
    <h4>
     <a name="t7" target="_blank">
     </a>
     <a name="_Toc277337197" target="_blank">
      1.2.5     缓存
     </a>
    </h4>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      可配置的查询结果，过滤器，和文档缓存实例
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      可插拔的缓存实现
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      后台缓存热启：当一个新的搜索器被打开时，可配置的搜索将它热启，避免第一个结果慢下来，当热启时，当前搜索器处理目前的请求（？？？）。
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      后台自动热启：当前搜索器缓存中最常访问的项目在新的搜索器中再次生成，能够在索引器和搜索器变化的时候高速缓存常查询的结果
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      快速和小的过滤器实现
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      支持自动热启的用户级别的缓存
     </span>
    </p>
    <h4>
     <a name="t8" target="_blank">
     </a>
     <a name="_Toc277337198" target="_blank">
      1.2.6     复制
     </a>
    </h4>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      能够将使用
     </span>
     <span style="color:black">
      rsync
     </span>
     <span style="color:black">
      传输时改变的索引部分有效的发布
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      使用拉策略
     </span>
     <span style="color:black">
      (PullStrategy)
     </span>
     <span style="color:black">
      来简化增加搜索器
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      可配置的发布间隔能够允许对时间线和缓存使用进行权衡选择
     </span>
    </p>
    <h4>
     <a name="t9" target="_blank">
     </a>
     <a name="_Toc277337199" target="_blank">
      1.2.7     管理接口
     </a>
    </h4>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      能够对缓存使用，更新和查询进行综合统计
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      文本分析调试器，能够显示每个分析器每个阶段的结果
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      基于
     </span>
     <span style="color:black">
      WEB
     </span>
     <span style="color:black">
      的查询和调试输出：解析查询输出，
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      explain
     </span>
     <span style="color:black">
      方法细节，能够解释为何某个文档打分低，被排除在结果中等等
     </span>
    </p>
    <h3>
     <a name="t10" target="_blank">
     </a>
     <a name="_Toc277337200" target="_blank">
      1.3
      <strong>
       Solr
      </strong>
     </a>
     <strong>
      服务原理
     </strong>
    </h3>
    <p>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      对外提供
     </span>
     <span style="color:black">
      标准的http
     </span>
     接口来实现对数据的索引的增加、删除、修改、查询。在Solr中，用户通过向部署在servlet 容器中
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      Solr Web
     </span>
     <span style="color:black">
      应用程序发送
     </span>
     <span style="color:black">
      HTTP
     </span>
     <span style="color:black">
      请求来启动索引和搜索。
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      接受请求，确定要使用的适当
     </span>
     <span style="color:black">
      SolrRequestHandler
     </span>
     <span style="color:black">
      ，然后处理请求。通过
     </span>
     <span style="color:black">
      HTTP
     </span>
     <span style="color:black">
      以同样的方式返回响应。默认配置返回
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的标准
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      响应，也可以配置
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的备用响应格式。
     </span>
    </p>
    <h4>
     <a name="t11" target="_blank">
     </a>
     <a name="_Toc277337201" target="_blank">
      1.3.1     索引
     </a>
    </h4>
    <p>
     <span style="color:black">
      可以向
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      索引
     </span>
     <span style="color:black">
      servlet
     </span>
     <span style="color:black">
      传递四个不同的索引请求：
     </span>
    </p>
    <p>
     <span style="color:black">
      1)
     </span>
     <span style="color:black">
      add/update
     </span>
     <span style="color:black">
      允许向
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      添加文档或更新文档。直到提交后才能搜索到这些添加和更新。
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      commit
     </span>
     <span style="color:black">
      告诉
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      ，应该使上次提交以来所做的所有更改都可以搜索到。
     </span>
    </p>
    <p>
     <span style="color:black">
      3)
     </span>
     <span style="color:black">
      optimize
     </span>
     <span style="color:black">
      重构
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      的文件以改进搜索性能。索引完成后执行一下优化通常比较好。如果更新比较频繁，则应该在使用率较低的时候安排优化。一个索引无需优化也可以正常地运行。优化是一个耗时较多的过程。
     </span>
    </p>
    <p>
     <span style="color:black">
      4)
     </span>
     <span style="color:black">
      delete
     </span>
     <span style="color:black">
      可以通过
     </span>
     <span style="color:black">
      id
     </span>
     <span style="color:black">
      或查询来指定。按
     </span>
     <span style="color:black">
      id
     </span>
     <span style="color:black">
      删除将删除具有指定
     </span>
     <span style="color:black">
      id
     </span>
     <span style="color:black">
      的文档；按查询删除将删除查询返回的所有文档。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      要实现添加文档索引则只需要调用搜索接口以
     </span>
     <span style="color:black">
      HTTP POST
     </span>
     <span style="color:black">
      的方式提交
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      报文。
     </span>
     <span style="color:black">
      (
     </span>
     <span style="color:black">
      索引接口：
     </span>
     <a href="http://192.168.10.85:18080/solr/update" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black">
       http://192.168.10.85:18080/solr/update
      </span>
     </a>
     <span style="color:black">
      )
     </span>
     <span style="color:black">
      ，下面是添加文档的示例报文：
     </span>
    </p>
    <p>
     <span style="color:black; background:yellow">
      注：多核心时为这个地址
     </span>
     <a href="http://192.168.10.85:18080/solr/core0/update/" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black; background:yellow">
       http://192.168.10.85:18080/solr/core0/update/
      </span>
     </a>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       add
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       doc
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "id"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      TWINX2048-3200PRO
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "name"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      CORSAIR  XMS 2GB (2
     </span>
     x 1GB) 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) Dual Channel Kit System Memory - Retail
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "manu"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      Corsair Microsystems Inc.
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "cat"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      electronics
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "cat"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      memory
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "features"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      CAS latency 2
     </span>
     , 2-3-3-6 timing, 2.75v, unbuffered, heat-spreader
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "price"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      185
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "popularity"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      5
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "inStock"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      true
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       doc
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       doc
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "id"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      VS1GB400C3
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "name"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      CORSAIR ValueSelect 1GB 184-Pin DDR SDRAM Unbuffered DDR 400 (PC 3200) System Memory - Retail
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "manu"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      Corsair Microsystems Inc.
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "cat"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      electronics
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "cat"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      memory
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "price"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      74.99
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "popularity"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      7
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       field
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "inStock"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      true
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       field
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       doc
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       add
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <h4>
     <a name="t12" target="_blank">
     </a>
     <a name="_Toc277337202" target="_blank">
      <span style="color:black">
       1.3.2
      </span>
      <span style="color:black">
       搜索
      </span>
     </a>
    </h4>
    <p>
     <span style="color:black">
      要实现搜索则只需要调用搜索接口发送
     </span>
     <span style="color:black">
      HTTP GET
     </span>
     <span style="color:black">
      ，示例：
     </span>
    </p>
    <table border="0" cellpadding="0" cellspacing="0" width="97%">
     <tbody>
      <tr>
       <td style="background:#EEEEEE">
        <p>
         <a href="http://192.168.10.85:18080/solr/select?indent=on&amp;version=2.2&amp;q=%20solr&amp;start=0&amp;rows=10&amp;fl=*%2Cscore&amp;qt=standard&amp;wt=standard" rel="nofollow noopener noreferrer" target="_blank">
          http://192.168.10.85:18080/solr/select?indent=on&amp;version=2.2&amp;q= solr&amp;start=0&amp;rows=10&amp;fl=*%2Cscore&amp;qt=standard&amp;wt=standard
         </a>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="background:yellow">
      注：多核心时为这个地址
     </span>
     <a href="http://192.168.10.85:18080/solr/core0/select/" rel="nofollow noopener noreferrer" target="_blank">
      <span style="background:yellow">
       http://192.168.10.85:18080/solr/core0/select/
      </span>
     </a>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      示例中，查询
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      词“
     </span>
     <span style="color:black">
      ipad
     </span>
     <span style="color:black">
      ”的请求被提交，要求返回
     </span>
     <span style="color:black">
      10
     </span>
     <span style="color:black">
      个结果。想知道更多有关各种可选查询选项的信息，请参看下文的“
     </span>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_%E6%90%9C%E7%B4%A2%E8%AF%AD%E6%B3%95" rel="noopener noreferrer" target="_blank">
      <span style="color:black">
       搜索语法
      </span>
     </a>
     <span style="color:black">
      ”部分。
     </span>
    </p>
    <p>
    </p>
    <p>
     <span style="color:black">
      返回的搜索结果报文：
     </span>
    </p>
    <p style="background:#D9D9D9">
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       response
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       lst
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "responseHeader"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       int
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "status"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      0
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       int
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       int
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "QTime"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      6
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       int
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       lst
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "params"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "rows"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      10
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "start"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      0
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "fl"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      *,score
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "hl"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      true
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "q"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      content:"faceted browsing"
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       lst
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       lst
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       result
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "response"
     </span>
     <span style="color:black">
     </span>
     <span style="color:red">
      numFound
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "
     </span>
     <span style="color:blue">
      1
     </span>
     <span style="color:blue">
      "
     </span>
     <span style="color:black">
     </span>
     <span style="color:red">
      start
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "0"
     </span>
     <span style="color:black">
     </span>
     <span style="color:red">
      maxScore
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "
     </span>
     <span style="color:blue">
      1
     </span>
     <span style="color:blue">
      .058217"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       doc
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       float
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "score"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      1
     </span>
     <span style="color:black">
      .058217
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       float
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       arr
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "all"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      http://localhost/myBlog/solr
     </span>
     -rocks-again.html
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      is Great
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      ,lucene,enterprise,search,greatness
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      has some really great features, like faceted browsing and replication
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       arr
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       arr
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "content"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      has some really great features, like faceted browsing and replication
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       arr
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       date
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "creationDate"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      2007-01-07T05:04:00.000Z
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       date
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       arr
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "keywords"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      ,lucene,enterprise,search,greatness
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       arr
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       int
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "rating"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      8
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       int
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "title"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      is Great
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "url"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      http://localhost/myBlog/solr
     </span>
     -rocks-again.html
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       doc
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       result
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       lst
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "highlighting"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       lst
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "http://localhost/myBlog/
     </span>
     <span style="color:blue">
      solr
     </span>
     <span style="color:blue">
      -rocks-again.html"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       arr
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:black">
      =
     </span>
     <span style="color:blue">
      "content"
     </span>
     <strong>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      has some really great features, like
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       em
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      faceted
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       em
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;
      </span>
      <span style="color:#006699">
       em
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      browsing
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       em
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
      and replication
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       str
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       arr
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       lst
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
     </span>
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       lst
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <strong>
      <span style="color:#006699">
       &lt;/
      </span>
      <span style="color:#006699">
       response
      </span>
      <span style="color:#006699">
       &gt;
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h3>
     <a name="t13" target="_blank">
     </a>
     <a name="_Toc277337203" target="_blank">
      1.4      源码结构
     </a>
    </h3>
    <h4>
     <a name="t14" target="_blank">
     </a>
     <a name="_Toc277337204" target="_blank">
      1.4.1     目录结构说明
     </a>
    </h4>
    <p>
     <span style="color:black">
      我们下载的
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      包后，进入
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      所在的目录，我们可以看到以下几个目录：
     </span>
     <span style="color:black">
      build
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      client
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      dist
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      example
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      lib
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      site
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      src
     </span>
     <span style="color:black">
      。下面分别对其进行介绍。
     </span>
    </p>
    <p>
     <span style="color:black">
      1)
     </span>
     <strong>
      <span style="color:black">
       build
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录是在
     </span>
     <span style="color:black">
      ant build
     </span>
     <span style="color:black">
      过程中生成的，其中包含了未被打包成
     </span>
     <span style="color:black">
      jar
     </span>
     <span style="color:black">
      或是
     </span>
     <span style="color:black">
      war
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      class
     </span>
     <span style="color:black">
      文件以及一些文档文件。
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <strong>
      <span style="color:black">
       client
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录包含了特定语言的
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      客户端
     </span>
     <span style="color:black">
      API
     </span>
     <span style="color:black">
      ，使得使用其他语言的用户能通过
     </span>
     <span style="color:black">
      HTTP
     </span>
     <span style="color:black">
      用
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      与
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      进行通话。现在该目录里面虽然包含
     </span>
     <span style="color:black">
      javascript
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      python
     </span>
     <span style="color:black">
      、
     </span>
     <span style="color:black">
      ruby
     </span>
     <span style="color:black">
      三个子目录，但是到目前为止只包含一部分的
     </span>
     <span style="color:black">
      ruby
     </span>
     <span style="color:black">
      的代码，其他语言仍是空的。另外，
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      客户端称为
     </span>
     <span style="color:black">
      SolrJ
     </span>
     <span style="color:black">
      ，其代码位于
     </span>
     <span style="color:black">
      src/solrj
     </span>
     <span style="color:black">
      目录下面。在之后的文章中我会详细介绍
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      客户端的使用。
     </span>
    </p>
    <p>
     <span style="color:black">
      3)
     </span>
     <strong>
      <span style="color:black">
       dist
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录包含
     </span>
     <span style="color:black">
      build
     </span>
     <span style="color:black">
      过程中产生的
     </span>
     <span style="color:black">
      war
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      jar
     </span>
     <span style="color:black">
      文件，以及相关的依赖文件。还记得上一篇文章中，我们在
     </span>
     <span style="color:black">
      build 1.4
     </span>
     <span style="color:black">
      版本的
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      源代码后需要部署
     </span>
     <span style="color:black">
      example
     </span>
     <span style="color:black">
      吗？其实就是将该目录下面的
     </span>
     <span style="color:black">
      apache-solr-1.4.war
     </span>
     <span style="color:black">
      部署到
     </span>
     <span style="color:black">
      Jetty
     </span>
     <span style="color:black">
      上面去，并重命名为
     </span>
     <span style="color:black">
      solr.war
     </span>
     <span style="color:black">
      。
     </span>
    </p>
    <p>
     <span style="color:black">
      4)
     </span>
     <strong>
      <span style="color:black">
       example
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      这个目录实际上是
     </span>
     <span style="color:black">
      Jetty
     </span>
     <span style="color:black">
      的安装目录。其中包含了一些样例数据和一些
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的配置。
     </span>
    </p>
    <p>
     <span style="color:black">
      其中一些子目录也比较重要，这里也对它们稍作介绍。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       example/etc
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录包含了
     </span>
     <span style="color:black">
      Jetty
     </span>
     <span style="color:black">
      的配置，在这里我们可以将
     </span>
     <span style="color:black">
      Jetty
     </span>
     <span style="color:black">
      的默认端口从
     </span>
     <span style="color:black">
      8983
     </span>
     <span style="color:black">
      改为
     </span>
     <span style="color:black">
      80
     </span>
     <span style="color:black">
      端口。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <span style="color:black">
      将其中的
     </span>
     <span style="color:black">
      8983
     </span>
     <span style="color:black">
      端口换成
     </span>
     <span style="color:black">
      80
     </span>
     <span style="color:black">
      端口。注意更改端口后启动
     </span>
     <span style="color:black">
      Jetty
     </span>
     <span style="color:black">
      可能会提示你没有权限，你需要使用
     </span>
     <em>
      <span style="color:black">
       sudo java -jar start.jar
      </span>
     </em>
     <span style="color:black">
      来运行。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       example/multicore
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录包含了在
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      multicore
     </span>
     <span style="color:black">
      中设置的多个
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录。在之后的文章中我会对其进行介绍。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       example/solr
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录是一个包含了默认配置信息的
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录。
     </span>
    </p>
    <p>
     <span style="color:black">
      详见下面的“
     </span>
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_Solr_home%E8%AF%B4%E6%98%8E" rel="noopener noreferrer" target="_blank">
      solr home说明
     </a>
     <span style="color:black">
      ”
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       example/webapps
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      Jetty
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      webapps
     </span>
     <span style="color:black">
      目录，该目录通常用来放置
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      Web
     </span>
     <span style="color:black">
      应用程序。在
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      中，前面提到的
     </span>
     <span style="color:black">
      solr.war
     </span>
     <span style="color:black">
      文件就部署在这里。
     </span>
    </p>
    <p>
     <strong>
      5)  lib：该目录包含了所有Solr的API所依赖的库文件。其中包括Lucene，Apache commons utilities和用来处理XML的Stax库。
     </strong>
    </p>
    <p>
     <strong>
      6)  site：该目录仅仅包含了Solr的官网的网页内容，以及一些教程的PDF文档。
     </strong>
    </p>
    <p>
     <strong>
      7)  src：该目录包含了Solr项目的整个源代码。这里对其各个子目录也做相应的介绍。
     </strong>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       src/java
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录存放的是
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      使用
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      编写的源代码。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       src/scripts
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录存放的是配置
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      服务器的
     </span>
     <span style="color:black">
      Unix BashShell
     </span>
     <span style="color:black">
      脚本，在后面介绍多服务器配置中将会有重要的作用。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       src/solrj
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      前面提到过该目录存放的是
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      版本的客户端代码。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       src/test
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录存放的是测试程序的源代码和测试文件。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       src/webapp
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录存放的是管理
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      Web
     </span>
     <span style="color:black">
      页面，包括
     </span>
     <span style="color:black">
      Servlet
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      JSP
     </span>
     <span style="color:black">
      文件，其构成了前面提到的
     </span>
     <span style="color:black">
      WAR
     </span>
     <span style="color:black">
      文件。管理
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      JSP
     </span>
     <span style="color:black">
      页面在
     </span>
     <span style="color:black">
      web/admin
     </span>
     <span style="color:black">
      目录下面，如果你有兴趣折腾
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      可以找到相应的
     </span>
     <span style="color:black">
      JSP
     </span>
     <span style="color:black">
      的页面对其进行设置
     </span>
    </p>
    <h4>
     <a name="t15" target="_blank">
     </a>
     <a name="_Toc277337205" target="_blank">
     </a>
     <a name="_Solr_home说明" target="_blank">
     </a>
     1.4.2
     <span style="color:black">
      Solr home
     </span>
     说明
    </h4>
    <p>
     <span style="color:black">
      所谓的
     </span>
     <span style="color:black">
      Solr home
     </span>
     <span style="color:black">
      目录实际上是一个运行的
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      实例所对应的配置和数据（
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      索引）。在上一篇文章中我提到过在
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      example/solr
     </span>
     <span style="color:black">
      目录就是一个
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      用做示例的默认配置
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录。实际上
     </span>
     <span style="color:black">
      example/multicore
     </span>
     <span style="color:black">
      也是一个合法的
     </span>
     <span style="color:black">
      Solr home
     </span>
     <span style="color:black">
      目录，只不过是用来做
     </span>
     <span style="color:black">
      mult-core
     </span>
     <span style="color:black">
      设置的。那么我们来看看
     </span>
     <span style="color:black">
      example/solr
     </span>
     <span style="color:black">
      这个目录里面都有些什么。
     </span>
    </p>
    <p>
     <strong>
      <span style="color:black">
       example/solr
      </span>
     </strong>
     <span style="color:black">
      目录下主要有以下一些目录和文件：
     </span>
    </p>
    <p>
     <strong>
      1)  bin：如果你需要对Solr进行更高级的配置，该目录建议用来存放Solr的复制脚本。
     </strong>
    </p>
    <p>
     <strong>
      2)  conf ：该目录下面包含了各种配置文件，下面列出了两个最为重要的配置文件。其余的.txt和.xml文件被这两个文件所引用，如用来对文本进行特殊的处理。
     </strong>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       conf/schema.xml
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该文件是索引的
     </span>
     <span style="color:black">
      schema
     </span>
     <span style="color:black">
      ，包含了域类型的定义以及相关联的
     </span>
     <span style="color:black">
      analyzer
     </span>
     <span style="color:black">
      链。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       conf/solrconfig.xml
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该文件是
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的主配置文件。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       conf/xslt
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      该目录包含了各种
     </span>
     <span style="color:black">
      XSLT
     </span>
     <span style="color:black">
      文件，能将
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的查询响应转换成不同的格式，如：
     </span>
     <span style="color:black">
      Atom/RSS
     </span>
     <span style="color:black">
      等。
     </span>
    </p>
    <p>
     <strong>
      3)  data：包含了Lucene的二进制索引文件。
     </strong>
    </p>
    <p>
     <strong>
      4)  lib：该目录是可选的。用来放置附加的Java JAR文件，Solr在启动时会自动加载该目录下的JAR文件。这就使得用户可以对Solr的发布版本（solr.war）进行扩展。如果你的扩展并不对Solr本身进行修改，那么就可以将你的修改部署到JAR文件中放到这里。
     </strong>
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <p>
     <strong>
      Solr是如何找到运行所需要的home目录的呢？
     </strong>
    </p>
    <p>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      首先检查名为
     </span>
     <span style="color:black">
      solr.solr.home
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      系统属性，有几种不同的方式来设置该
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      系统属性。一种不管你使用什么样的
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      应用服务器或
     </span>
     <span style="color:black">
      Servlet
     </span>
     <span style="color:black">
      引擎都通用的方法是在调用
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      的命令行中进行设置。所以，你可以在启动
     </span>
     <span style="color:black">
      Jetty
     </span>
     <span style="color:black">
      的时候显式地指定
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录
     </span>
     <span style="color:black">
      java -Dsolr.solr.home=solr/ -jar start.jar
     </span>
     <span style="color:black">
      。另一种通用的方法是使用
     </span>
     <span style="color:black">
      JNDI
     </span>
     <span style="color:black">
      ，将
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录绑定到
     </span>
     <span style="color:black">
      java:comp/env/solr/home
     </span>
     <span style="color:black">
      。并向
     </span>
     <span style="color:black">
      src/webapp/web/WEB-INF/web.xml
     </span>
     <span style="color:black">
      添加以下一段代码：
     </span>
    </p>
    <p style="background:#D9D9D9">
     1     &lt;env-entry&gt;
    </p>
    <p style="background:#D9D9D9">
     2      &lt;env-entry-name&gt;solr/home&lt;/env-entry-name&gt;
    </p>
    <p style="background:#D9D9D9">
     3      &lt;env-entry-value&gt;solr/&lt;/env-entry-value&gt;
    </p>
    <p style="background:#D9D9D9">
     4      &lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
    </p>
    <p style="background:#D9D9D9">
     5     &lt;/env-entry&gt;
    </p>
    <p>
     <span style="color:black">
      实际上这段
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      在
     </span>
     <span style="color:black">
      web.xml
     </span>
     <span style="color:black">
      文件中已经存在，你只需要把原来注释掉的
     </span>
     <span style="color:black">
      xml
     </span>
     <span style="color:black">
      取消注释，添加你所要指向的
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录即可。因为修改了
     </span>
     <span style="color:black">
      web.xml
     </span>
     <span style="color:black">
      文件，所以你需要运行
     </span>
     <span style="color:black">
      antdist-war
     </span>
     <span style="color:black">
      来重新打包之后再部署
     </span>
     <span style="color:black">
      WAR
     </span>
     <span style="color:black">
      文件。
     </span>
    </p>
    <p>
     <span style="color:black">
      最后，如果
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录既没有通过
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      系统属性指定也没有通过
     </span>
     <span style="color:black">
      JNDI
     </span>
     <span style="color:black">
      指定，那么他将默认指向
     </span>
     <span style="color:black">
      solr/
     </span>
     <span style="color:black">
      。
     </span>
    </p>
    <p>
     <span style="color:black">
      在产品环境中，我们必须设置
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      home
     </span>
     <span style="color:black">
      目录而不是让其默认指向
     </span>
     <span style="color:black">
      solr/
     </span>
     <span style="color:black">
      。而且应该使用绝对路径，而不是相对路径，因为你有可能从不同的目录下面启动应用服务器。
     </span>
    </p>
    <p>
    </p>
    <div>
     <p>
      注：Jetty 是一个开源的servlet容器，它为基于Java的web内容，例如JSP和servlet提供运行环境。Jetty是使用Java语言编写的，它的API以一组JAR包的形式发布。开发人员可以将Jetty容器实例化成一个对象，可以迅速为一些独立运行（stand-alone）的Java应用提供网络和web连接。
     </p>
    </div>
    <h4>
     <a name="t16" target="_blank">
     </a>
     <a name="_Toc277337206" target="_blank">
      1.4.3     solr
     </a>
     的各包的说明
    </h4>
    <p>
     <span style="color:black">
      分析
     </span>
     <span style="color:black">
      Apache Solr
     </span>
     <span style="color:black">
      的各个包，力图详细地分析
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的设计和架构。
     </span>
     <span style="color:black">
      Apache Solr
     </span>
     <span style="color:black">
      由
     </span>
     <span style="color:black">
      12
     </span>
     <span style="color:black">
      个包组成，如下：
     </span>
    </p>
    <p>
     1.
     <span style="color:black">
      org.apache.solr.analysis
     </span>
    </p>
    <p>
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      org.apache.solr.core
     </span>
    </p>
    <p>
     <span style="color:black">
      3.
     </span>
     <span style="color:black">
      org.apache.solr.request
     </span>
    </p>
    <p>
     <span style="color:black">
      4.
     </span>
     <span style="color:black">
      org.apache.solr.schema
     </span>
    </p>
    <p>
     <span style="color:black">
      5.
     </span>
     <span style="color:black">
      org.apache.solr.search
     </span>
    </p>
    <p>
     <span style="color:black">
      6.
     </span>
     <span style="color:black">
      org.apache.solr.search.function
     </span>
    </p>
    <p>
     <span style="color:black">
      7.
     </span>
     <span style="color:black">
      org.apache.solr.servlet
     </span>
    </p>
    <p>
     <span style="color:black">
      8.
     </span>
     <span style="color:black">
      org.apache.solr.tst
     </span>
    </p>
    <p>
     <span style="color:black">
      9.
     </span>
     <span style="color:black">
      org.apache.solr.update
     </span>
    </p>
    <p>
     <span style="color:black">
      10.
     </span>
     <span style="color:black">
      org.apache.solr.util
     </span>
    </p>
    <p>
     <span style="color:black">
      11.
     </span>
     <span style="color:black">
      org.apache.solr.util.test
     </span>
    </p>
    <p>
     <span style="color:black">
      12.
     </span>
     <span style="color:black">
      org.apache.solr.util.xlst
     </span>
    </p>
    <p>
     <span style="color:black">
      我们先从使用者的角度出发，最先看到的当然是
     </span>
     <span style="color:black">
      servlet,
     </span>
     <span style="color:black">
      因为
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      本身是个独立的网络应用程序，需要在
     </span>
     <span style="color:black">
      Servlet
     </span>
     <span style="color:black">
      容器中运行来提供服务，所以
     </span>
     <span style="color:black">
      servlet
     </span>
     <span style="color:black">
      是用户接触的最外层。我们看看
     </span>
     <span style="color:black">
      org.apache.solr.servlet
     </span>
     <span style="color:black">
      包。这个包很简单，只有两个类：
     </span>
     <span style="color:black">
      SolrServlet
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      SolrUpdateServlet.
     </span>
     <span style="color:black">
      我们很容易从类名中猜出这两个类的用途。
     </span>
    </p>
    <p>
     <span style="color:black">
      SolrServlet
     </span>
     <span style="color:black">
      类继承
     </span>
     <span style="color:black">
      HttpServlet
     </span>
     <span style="color:black">
      类，只有四个方法：
     </span>
    </p>
    <p>
     ·
     <span style="color:black">
      init()
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      destroy()
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      doGet()
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      doPost()
     </span>
    </p>
    <p>
     <span style="color:black">
      SolrServlet
     </span>
     <span style="color:black">
      类中除了普通的
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      类对象（包括
     </span>
     <span style="color:black">
      Servlet
     </span>
     <span style="color:black">
      相关的）外，有四个
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      本身的类，还有一个
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      本身的异常。其中两个类和一个异常属于
     </span>
     <span style="color:black">
      org.apache.solr.core
     </span>
     <span style="color:black">
      包，两个类属于
     </span>
     <span style="color:black">
      org.apache.solr.request
     </span>
     <span style="color:black">
      包。属于
     </span>
     <span style="color:black">
      core
     </span>
     <span style="color:black">
      包的有：
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      Config:
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      SolrCore:
     </span>
    </p>
    <p>
     <span style="color:black">
      属于
     </span>
     <span style="color:black">
      request
     </span>
     <span style="color:black">
      包的有：
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      SolrQueryResponse:
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      QueryResponseWriter:
     </span>
    </p>
    <p>
     分析一下这个SolrServlet类。首先servlet会调用init()方法进行初始化：通过Context查找java:comp/env/solr/home来确定Solr的主目录（home），接着调用Config.setInstanceDir(home)方法设置这个实例的目录。然后通过SolrCore.getSolrCore()来获得一个SolrCore实例。destroy()方法将会在Servlet对象销毁时调用，仅仅调用core.close()关闭SolrCore实例。
    </p>
    <p>
     当用户请求进来时doPost()简单地将任务交给doGet()完成，主要的任务由doGet()完成。分析一下doGet()方法：
    </p>
    <p>
     1)
     <span style="color:black">
      使用
     </span>
     <span style="color:black">
      SolrCore
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      doGet()
     </span>
     <span style="color:black">
      参数
     </span>
     <span style="color:black">
      request
     </span>
     <span style="color:black">
      生成一个
     </span>
     <span style="color:black">
      SolrServletRequest
     </span>
     <span style="color:black">
      对象
     </span>
     <span style="color:black">
      (
     </span>
     <span style="color:black">
      注意：这个
     </span>
     <span style="color:black">
      SolrServletRequest
     </span>
     <span style="color:black">
      类不是公开类，位于
     </span>
     <span style="color:black">
      org.apache.solr.servlet
     </span>
     <span style="color:black">
      包中，继承了
     </span>
     <span style="color:black">
      SolrQueryRequestBase
     </span>
     <span style="color:black">
      类，仅仅接受
     </span>
     <span style="color:black">
      SolrCore
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      HttpServletRequest
     </span>
     <span style="color:black">
      对象作为参数
     </span>
     <span style="color:black">
      )
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      然后
     </span>
     <span style="color:red">
      SolrCore
     </span>
     <span style="color:red">
      执行
     </span>
     <span style="color:red">
      execute()
     </span>
     <span style="color:black">
      方法（参数为
     </span>
     <span style="color:black">
      SolrServletRequest
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      SolrQueryResponse
     </span>
     <span style="color:black">
      ）
     </span>
    </p>
    <p>
     由此可见，真正的处理核心是SolrCore的execute方法
    </p>
    <h3>
     <a name="t17" target="_blank">
     </a>
     <a name="_Toc277337207" target="_blank">
      1.5      版本说明
     </a>
    </h3>
    <h4>
     <a name="t18" target="_blank">
     </a>
     <a name="_Toc277337208" target="_blank">
      1.5.1     1.3
     </a>
     版本
    </h4>
    <p>
     Solr 的 1.3 版本以 Apache Lucene 2.3 版本的巨大性能提升为基础，并增加了一个新的、向后兼容的、即插即用组件架构。该架构使开发人员踊跃创建可以进一步增强 Solr 的组件。例如，1.3 版本就包含能够实现以下功能的组件：
    </p>
    <ul type="disc">
     <li style="color:black">
      “您是不是要找……” 拼写检查
     </li>
     <li style="color:black">
      查找 “类似的” Document
     </li>
     <li style="color:black">
      根据编辑输入（又称付费排序）覆盖搜索结果
     </li>
    </ul>
    <p>
     另外，查询解析、搜索、分类以及调试这样的现有功能也被组件化了。现在，您可以通过组合这些组件来自定义创建 SolrRequestHandler。最后，Solr 还增加了直接为数据库内容创建索引的功能，并且通过分布式搜索来支持庞大的系统，这一点对很多企业都很重要。
    </p>
    <p>
     Solr 1.3 发生了很大的变化。它有很多新的特性，比如拼写检查、数据导入、编辑排序和分布式搜索。此外，还学习了 Solr 的增强功能，包括一个更新、更快的 Lucene 版本。Solr 有许多地方改变了，也有许多地方没有改变。Solr 仍然是一个可靠的、可行的、支持良好的搜索服务器，并且已经可以部署到企业中。现在，Solr 开发人员开始研究添加文档聚合、更多的分析选项、Windows 友好的复制以及复制文档检测等特性。
    </p>
    <h4>
     <a name="t19" target="_blank">
     </a>
     <a name="_Toc277337209" target="_blank">
      1.5.2     1.4
     </a>
     版本
    </h4>
    <p>
     Solr 1.4.1发布了！此版本是一个bug修复版，同时也将Lucene升级到了Lucene 2.9.3。作为Java开源世界最为著名的全文检索工具来说，Lucene名气之大是在是可想而知了。而Solr是基于Lucene的一个企业级全文检索工具实现。
    </p>
    <p>
     Solr底层基于Lucene，而操作完全基于web方式Solr同时提供检索高亮标记，动态集群，数据库整合，多种文档支持的特性，因此是用来制作企业级全文检索的一个良好的选择。
    </p>
    <p>
     Solr完全采用Java编写，因此具有跨平台的能力，可以运行在Linux，Unix等多种支持Java的平台上。而Solr既可以作为独立应用部署在应用程序服务器上（例如Tomcat），也可以通过的REST和JSONapi来与现有的应用进行整合，因此使用起来十分灵活方便。
    </p>
    <h3>
     <a name="t20" target="_blank">
     </a>
     <a name="_Toc277337210" target="_blank">
      1.6      分布式和复制 Solr
     </a>
     架构
    </h3>
    <p align="center">
     图1
    </p>
    <p align="center">
    </p>
    <p>
     注意，图 1 中输入的请求可以进入任何一个复制的片中，因为它们是功能齐全的 Solr 实例。然后，检索节点会将请求发送到其他片。这些请求仅仅是普通的 Solr 请求。要将请求提交到 Solr 服务器并分发请求，需要将 shards 参数添加到请求，比如：
    </p>
    <p style="background:#D9D9D9">
     <a href="http://localhost:8983/solr/select?shards=localhost:8983/solr,localhost:7574/solr&amp;q=ipod+solr" rel="nofollow noopener noreferrer" target="_blank">
      http://localhost:8983/solr/select?shards=localhost:8983/solr,localhost:7574/solr&amp;q=ipod+solr
     </a>
    </p>
    <p>
     在这个例子中，我假定在本地主机上运行了两个 Solr 服务器（它不是真正的分布式的；它适合于这里的论述，但不能用于您的设置），主服务器在端口 8983 上，从服务器在端口 7574 上。输入的请求进入端口 8983 上的实例，然后它将请求发送到片式服务器上。应用程序很可能将 shards 参数值设置成 solrconfig.xml 文件中的 SolrRequestHandler 的默认配置的一部分，这样就不需要在每次查询时都传入所有片式服务器的名称了。
    </p>
    <h2>
     <a name="t21" target="_blank">
     </a>
     <a name="_Toc277337211" target="_blank">
      2      Solr
     </a>
     的安装与配置
    </h2>
    <h3>
     <a name="t22" target="_blank">
     </a>
     <a name="_Toc277337212" target="_blank">
      2.1      在Tomcat
     </a>
     下Solr安装
    </h3>
    <p>
     <span style="color:black">
      下面以Linux
     </span>
     下安装配置Solr进行说明，windows与此类似。
    </p>
    <h4>
     <a name="t23" target="_blank">
     </a>
     <a name="_Toc277337213" target="_blank">
      2.1.1     安装准备
     </a>
    </h4>
    <p>
     1)       下载tomcat6.0.20：
    </p>
    <p>
     <a href="http://tomcat.apache.org/" rel="nofollow noopener noreferrer" target="_blank">
      http://tomcat.apache.org/
     </a>
    </p>
    <p>
     2)       tomcat调优：
    </p>
    <p>
     调优tomcat加大内存和连接数
    </p>
    <p>
     Ø  MaxThread 500
    </p>
    <p>
     Ø  MinSpareThread 25
    </p>
    <p>
     Ø  MaxSpareThread75
    </p>
    <p>
     Ø  Xmx 1024M
    </p>
    <p>
     <a name="_Toc269891281" target="_blank">
      3)       操作系统网络参数优化
     </a>
    </p>
    <p>
     用做测试的各台服务器，均在/etc/sysctl.conf配置文件中增加如下内核参数：
    </p>
    <p>
     net.ipv4.tcp_syncookies = 1
    </p>
    <p>
     net.ipv4.tcp_tw_reuse = 1
    </p>
    <p>
     net.ipv4.tcp_tw_recycle = 1
    </p>
    <p>
     net.ipv4.tcp_fin_timeout = 5
    </p>
    <p>
     4)       下载solr
    </p>
    <p>
     下载地址：
     <a href="http://apache.etoak.com/lucene/solr/1.4.1/" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:windowtext">
       http://apache.etoak.com/lucene/solr/1.4.1/
      </span>
     </a>
    </p>
    <p>
     详情请见：http://wiki.apache.org/solr/Solr1.4
    </p>
    <p>
     5)       下载分词器：
    </p>
    <p>
     下载地址：
     <a href="http://code.google.com/p/mmseg4j/" rel="nofollow noopener noreferrer" target="_blank">
      http://code.google.com/p/mmseg4j/
     </a>
    </p>
    <p>
     6)       下载词库：
    </p>
    <p>
     <a href="http://code.google.com/p/mmseg4j/downloads/detail?name=data.zip&amp;can=2&amp;q" rel="nofollow noopener noreferrer" target="_blank">
      http://code.google.com/p/mmseg4j/downloads/detail?name=data.zip&amp;can=2&amp;q
     </a>
     =
    </p>
    <h4>
     <a name="t24" target="_blank">
     </a>
     <a name="_Toc277337214" target="_blank">
      2.1.2     安装过程
     </a>
    </h4>
    <p>
     1)  安装tomcat6
    </p>
    <p>
     安装完tomcat后修改./conf/server.xml
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#D9D9D9">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;Connector port="8080" protocol="HTTP/1.1"
        </p>
        <p>
         connectionTimeout="20000"
        </p>
        <p>
         redirectPort="8443"  URIEncoding="
         <span style="color:red">
          UTF-8
         </span>
         "/&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      <span style="color:red">
       注：
      </span>
      <span style="color:red">
       如果没有设置
      </span>
      <span style="color:red">
       URIEncoding="UTF-8"
      </span>
      <span style="color:red">
       ，在提交查询的
      </span>
      <span style="color:red">
       select
      </span>
      <span style="color:red">
       的
      </span>
      <span style="color:red">
       url
      </span>
      <span style="color:red">
       会出现乱码，当然也就查不到了。
      </span>
     </strong>
    </p>
    <p>
     <span style="color:red">
     </span>
    </p>
    <p>
     2)  将下载的solr包下面的dist文件夹中的
     <strong>
      <span style="background:yellow">
       apache-solr-1.4.1.war
      </span>
     </strong>
     拷贝到
     <strong>
      tomcat的webapps
     </strong>
     并且改名为 solr.war  一般情况下会自动生成相应的文件夹。
    </p>
    <p>
     3)  新建/opt/solr-tomcat/solr文件夹，把下载的solr包中的
     <strong>
      example
      <span style="background:yellow">
       /solr
      </span>
     </strong>
     文件夹下面的所有文件放入到/opt/solr-tomcat/solr里面。
    </p>
    <p>
     4)  最后一步配置添加solr.home环境变量，可以有二种方式（两种取其一即可）：
    </p>
    <p>
     a）基于环境变量
    </p>
    <p>
     linux在当前用户的环境变量中（.bash_profile）或在./bin/catalina.sh中添加如下环境变量：
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         export JAVA_OPTS="$JAVA_OPTS -Dsolr.solr.home=/opt/solr-tomcat/solr"
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     b）基于JNDI
    </p>
    <p>
     在tomcat的conf文件夹建立Catalina文件夹，然后在Catalina文件夹中在建立localhost文件夹，在该文件夹下面建立 solr.xml,
     <span style="color:black">
      Xml
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
      :
     </span>
    </p>
    <div style="background:#FAFAFA">
     <p style="background:#FAFAFA">
      <strong>
       <span style="color:#006699">
        &lt;Context
       </span>
      </strong>
      <span style="color:black">
      </span>
      <span style="color:red">
       docBase
      </span>
      <span style="color:black">
       =
      </span>
      <span style="color:blue">
       "/usr/local/tomcat6/webapps/solr.war"
      </span>
      <span style="color:black">
      </span>
      <span style="color:red">
       debug
      </span>
      <span style="color:black">
       =
      </span>
      <span style="color:blue">
       "0"
      </span>
      <span style="color:black">
      </span>
      <span style="color:red">
       crossContext
      </span>
      <span style="color:black">
       =
      </span>
      <span style="color:blue">
       "true"
      </span>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#006699">
        &gt;
       </span>
      </strong>
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#006699">
        &lt;Environment
       </span>
      </strong>
      <span style="color:black">
      </span>
      <span style="color:red">
       name
      </span>
      <span style="color:black">
       =
      </span>
      <span style="color:blue">
       "solr/home"
      </span>
      <span style="color:black">
      </span>
      <span style="color:red">
       type
      </span>
      <span style="color:black">
       =
      </span>
      <span style="color:blue">
       "java.lang.String"
      </span>
      <span style="color:black">
      </span>
      <span style="color:red">
       value
      </span>
      <span style="color:black">
       =
      </span>
      <span style="color:blue">
       "/opt/solr-tomcat/solr"
      </span>
      <span style="color:black">
      </span>
      <span style="color:red">
       override
      </span>
      <span style="color:black">
       =
      </span>
      <span style="color:blue">
       "true"
      </span>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#006699">
        /&gt;
       </span>
      </strong>
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <strong>
       <span style="color:#006699">
        &lt;/Context&gt;
       </span>
      </strong>
      <span style="color:black">
      </span>
     </p>
    </div>
    <p>
     <span style="color:black">
     </span>
    </p>
    <div>
     <p>
      注：如果没有设定solr.solr.home环境变量或JNDI的情况下，Solr查找./solr，因此在启动时候需要切换到/opt/solr-tomcat
     </p>
    </div>
    <h4>
     <a name="t25" target="_blank">
     </a>
     <a name="_Toc277337215" target="_blank">
      2.1.3     验证安装
     </a>
    </h4>
    <p>
     <span style="color:black">
      访问
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      管理界面
     </span>
     <span style="color:black">
      http://ip:port/solr
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     1)  打开管理后台
    </p>
    <p>
     打开浏览器，输入：
     <a href="http://192.168.10.85:18080/solr/admin/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/admin/
     </a>
     （注：多核心时为这个地址http://192.168.10.85:18080/solr/，首页会列出多核的链接，点击进入），就可以访问solr服务了
    </p>
    <p>
     2)  如果出现如下图示，表示配置成功。
    </p>
    <p>
    </p>
    <div>
     <p>
      注：观察这个指定的solr主位置，里面存在两个文件夹：conf和data。其中conf里存放了对solr而言最重要的两个配置文件schema.xml和solrconfig.xml。data则用于存放索引文件，schema.xml主要包括types、fields和其他的一些缺省设置。solrconfig.xml用来配置Solr的一些系统属性，例如与索引和查询处理有关的一些常见的配置选项，以及缓存、扩展等等。
     </p>
    </div>
    <p>
    </p>
    <h3>
     <a name="t26" target="_blank">
     </a>
     <a name="_Toc277337216" target="_blank">
      2.2      中文分词配置
     </a>
    </h3>
    <h4>
     <a name="t27" target="_blank">
     </a>
     <a name="_Toc277337217" target="_blank">
     </a>
     <a name="_mmseg4j" target="_blank">
     </a>
     2.2.1     mmseg4j
    </h4>
    <p>
     下面主要说的是怎么在solr中加入中文分词(引入实现mmseg算法的第三方开源项目)。
    </p>
    <p>
     1)       下载分词器：
     <a href="http://code.google.com/p/mmseg4j/" rel="nofollow noopener noreferrer" target="_blank">
      http://code.google.com/p/mmseg4j/
     </a>
    </p>
    <p>
     2)       下载词库：
     <a href="http://code.google.com/p/mmseg4j/downloads/detail?name=data.zip&amp;can=2&amp;q" rel="nofollow noopener noreferrer" target="_blank">
      http://code.google.com/p/mmseg4j/downloads/detail?name=data.zip&amp;can=2&amp;q
     </a>
     =
    </p>
    <p>
     3)       将解压后的mmseg4j-1.8.2目录下的mmseg4j-all-1.8.2.jar拷贝到Tomcat_HOME\webapps\solr\WEB-INF\lib目录下。
    </p>
    <p>
     4)       添加词库：在/opt/solr-tomcat/solr目录下新建dic文件夹，将解压后的sogou-dic\data目录下的words.dic拷贝到/opt/solr-tomcat/solr/dic目录下。
    </p>
    <p>
     5)       更改schema.xml(/opt/solr-tomcat/solr/conf/)文件，使分词器起到作用。
    </p>
    <p>
     在schema.xml的&lt;types&gt;、&lt;fields&gt;和部分新增如下配置：
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;types&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         <span style="background:yellow">
          &lt;!--mmseg4j field types--&gt;
         </span>
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;fieldType name="textComplex" class="solr.TextField" positionIncrementGap="100" &gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;analyzer&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory" mode="complex" dicPath="
         <strong>
          /opt/solr-tomcat/solr/dic
         </strong>
         "/&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;/analyzer&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;/fieldType&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;fieldType name="textMaxWord" class="solr.TextField" positionIncrementGap="100" &gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;analyzer&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory" mode="max-word" dicPath="/opt/solr-tomcat/solr/dic"/&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;/analyzer&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;/fieldType&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;fieldType name="textSimple" class="solr.TextField" positionIncrementGap="100" &gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;analyzer&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory" mode="simple" dicPath="/opt/solr-tomcat/solr/dic"/&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;/analyzer&gt;
        </p>
        <p>
         <span style="background:yellow">
         </span>
         &lt;/fieldType&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         &lt;/types&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:red">
      注：
     </span>
     <span style="color:red">
      dicPath="
     </span>
     <span style="background:yellow">
      /opt/solr-tomcat/solr/dic
     </span>
     <span style="color:red">
      "
     </span>
     <span style="color:red">
      是你的词库路径。
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;fields&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         &lt;field name="simple" type="textSimple" indexed="true" stored="true" multiValued="true"/&gt;
        </p>
        <p>
         &lt;field name="complex" type="textComplex" indexed="true" stored="true" multiValued="true"/&gt;
        </p>
        <p>
         &lt;field name="text" type="textMaxWord" indexed="true" stored="true" multiValued="true"/&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         &lt;/fields&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;copyField source="simple" dest="text"/&gt;
        </p>
        <p>
         &lt;copyField source="complex" dest="text"/&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p>
     重启你的tomcat。
    </p>
    <p>
     访问：
     <a href="http://192.168.10.85:18080/solr/admin/analysis.jsp" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/admin/analysis.jsp
     </a>
     可以看mmseg4j 的分词效果。在Field 的下拉菜单选择name，然后在应用输入complex。分词的结果，如下图：
    </p>
    <p>
     好了，可以运行起来了，那就添加个文档试下，在 解压后的apache-solr-1.4.0\example\exampledocs目录下创建 mmseg4j-solr-demo-doc.xml 文档，内容如下：
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;add&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;1&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;昨日,记者从解放军总参谋部相关部门获悉,截至3月28日,解放军和武警部队累计出动7.2万人次官兵支援地方抗旱救灾。组织民兵预备役人员20.2万人 次支援地方抗旱救灾。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;2&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;下半年房价调整就是挤水分 房价回不到去年水平。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;3&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;
         <em>
          solr
         </em>
         是基于Lucene Java搜索库的企业级全文搜索引擎，目前是apache的一个项目。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;4&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;中国人民银行是中华人民共和国的中央银行。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;/add&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     然后在 cmd 下运行 post.jar，如下：
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         l
         <span style="color:red">
          F:\lucene\solr\apache-solr-1.4.0\example\exampledocs&gt;java -Durl=http://localhost:8089/solr/update -Dcommit=yes -jar post.jar mmseg4j-solr-demo-doc.xml
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:red">
      注意：
     </span>
     <span style="color:red">
      mmseg4j-solr-demo-doc.xml
     </span>
     <span style="color:red">
      要是
     </span>
     <span style="color:red">
      UTF-8
     </span>
     <span style="color:red">
      格式，不然提交后会乱码。
     </span>
    </p>
    <p>
     <span style="color:red">
      还有在查询中文时需要把
     </span>
     <span style="color:red">
      tomcat
     </span>
     <span style="color:red">
      设置成
     </span>
     <span style="color:red">
      URIEncoding="UTF-8";
     </span>
    </p>
    <p>
    </p>
    <p>
     查看是否有数据，访问：http://localhost:8089/solr/admin/在QueryString: 中输入“中国”，显示如下图所示：
    </p>
    <p>
     到这里，分词成功。至于schema.xml中的配置属性会在下一章中进行详细的介绍。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <strong>
      [Solr分词顺序]
     </strong>
    </p>
    <p>
     Solr建立索引和对关键词进行查询都得对字串进行分词，在向索引库中添加全文检索类型的索引的时候，Solr会首先用空格进行分词，然后把分词结果依次使用指定的过滤器进行过滤，最后剩下的结果才会加入到索引库中以备查询。分词的顺序如下：
    </p>
    <p>
     索引
    </p>
    <p>
     1：空格whitespaceTokenize
    </p>
    <p>
     2：过滤词(停用词，如：on、of、a、an等) StopFilter
    </p>
    <p>
     3：拆字WordDelimiterFilter
    </p>
    <p>
     4：小写过滤LowerCaseFilter
    </p>
    <p>
     5：英文相近词EnglishPorterFilter
    </p>
    <p>
     6：去除重复词RemoveDuplicatesTokenFilter
    </p>
    <p>
     查询
    </p>
    <p>
     1：查询相近词
    </p>
    <p>
     2：过滤词
    </p>
    <p>
     3：拆字
    </p>
    <p>
     4：小写过滤
    </p>
    <p>
     5：英文相近词
    </p>
    <p>
     6：去除重复词
    </p>
    <p>
     以上是针对英文，中文的除了空格，其他都类似。
    </p>
    <p>
     <span style="color:black">
      注：
     </span>
    </p>
    <ul type="disc">
     <li>
      <a href="http://code.google.com/p/mmseg4j" rel="nofollow noopener noreferrer" target="_blank">
       <span style="color:black">
        mmseg4j
       </span>
      </a>
      ： complex 1200kb/s左右, simple 1900kb/s左右
     </li>
     <li>
      <a href="http://code.google.com/p/mmseg4j" rel="nofollow noopener noreferrer" target="_blank">
       <span style="color:black">
        mmseg4j
       </span>
      </a>
      ：自带sogou词库，支持名为 wordsxxx.dic（
      <span style="color:black">
       如：
      </span>
      <span style="color:black">
       data/words-my.dic
      </span>
      ）， utf8文本格式的用户自定义词库，一行一词。不支持自动检测。 -Dmmseg.dic.path
     </li>
    </ul>
    <p>
     <span style="color:black">
      MMseg4jHandler(1.8
     </span>
     <span style="color:black">
      以后支持
     </span>
     <span style="color:black">
      ):
     </span>
     <span style="color:black">
      添加
     </span>
     <span style="color:black">
      MMseg4jHandler
     </span>
     <span style="color:black">
      类，可以在
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      中用
     </span>
     <span style="color:black">
      url
     </span>
     <span style="color:black">
      的方式来控制加载检测词库。参数：
     </span>
    </p>
    <ul type="disc">
     <li style="color:black">
      dicPath 是指定词库的目录，特性与MMSegTokenizerFactory中的dicPath一样（相对目录是，是相对 solr.home）。
     </li>
     <li style="color:black">
      check 是指是否检测词库，其值是true 或 on。
     </li>
     <li style="color:black">
      reload 是否尝试加载词库，其值是 true 或 on。此值为 true，会忽视 check 参数。
     </li>
    </ul>
    <p>
     <span style="color:black">
      solrconfig.xml
     </span>
     <span style="color:black">
      ：
     </span>
    </p>
    <p>
     <strong>
      <span style="color:black">
       &lt;requesthandlername="/mmseg4j"class="com.chenlb.mmseg4j.solr.MMseg4jHandler"&gt;
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:black">
       &lt;lstname="defaults"&gt;
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:black">
       &lt;strname="dicPath"&gt;
      </span>
     </strong>
    </p>
    <p>
     <span style="color:black">
      dic
     </span>
    </p>
    <p>
     <strong>
      <span style="color:black">
       &lt;/str&gt;
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:black">
       &lt;/lst&gt;
      </span>
     </strong>
    </p>
    <p>
     <strong>
      <span style="color:black">
       &lt;/requesthandler&gt;
      </span>
     </strong>
    </p>
    <p>
     <span style="color:black">
      此功能可以让外置程序做相关的控制，如：尝试加载词库，然后外置程序决定是否重做索引。
     </span>
    </p>
    <p>
    </p>
    <h4>
     <a name="t28" target="_blank">
     </a>
     <a name="_Toc277337218" target="_blank">
      2.2.2     paoding
     </a>
    </h4>
    <p>
     <span style="color:#4B4B4B">
      对全文检索而言，中文分词非常的重要，这里采用了qieqie
     </span>
     庖丁分词。集成非常的容易，我下载的是2.0.4-alpha2版本，其中它支持最多切分和按最大切分。创建自己的一个中文TokenizerFactory继承自solr的BaseTokenizerFactory。
    </p>
    <p>
    </p>
    <p style="background:#EEEEEE">
     <span style="color:green">
      /**
      <br/>
      <br/>
      * Created by IntelliJ IDEA.
      <br/>
      <br/>
      * User: ronghao
      <br/>
      <br/>
      * Date: 2007-11-3
      <br/>
      <br/>
      * Time: 14:40:59
      <br/>
      <br/>
      *
     </span>
     <span style="color:green">
      中文切词
     </span>
     <span style="color:green">
     </span>
     <span style="color:green">
      对庖丁切词的封装
     </span>
     <span style="color:green">
      <br/>
      <br/>
      */
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      public
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      class
     </span>
     <span style="color:black">
      ChineseTokenizerFactory
     </span>
     <span style="color:blue">
      extends
     </span>
     <span style="color:black">
      BaseTokenizerFactory {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:green">
      /**
      <br/>
      <br/>
      *
     </span>
     <span style="color:green">
      最多切分
     </span>
     <span style="color:green">
     </span>
     <span style="color:green">
      默认模式
     </span>
     <span style="color:green">
      <br/>
      <br/>
      */
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      public
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      static
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      final
     </span>
     <span style="color:black">
      String MOST_WORDS_MODE = "most-words";
      <br/>
      <br/>
     </span>
     <span style="color:green">
      /**
      <br/>
      <br/>
      *
     </span>
     <span style="color:green">
      按最大切分
     </span>
     <span style="color:green">
      <br/>
      <br/>
      */
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      public
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      static
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      final
     </span>
     <span style="color:black">
      String MAX_WORD_LENGTH_MODE = "max-word-length";
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      private
     </span>
     <span style="color:black">
      String mode =
     </span>
     <span style="color:blue">
      null
     </span>
     <span style="color:black">
      ;
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      public
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      void
     </span>
     <span style="color:black">
      setMode(String mode) {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      if
     </span>
     <span style="color:black">
      (mode==
     </span>
     <span style="color:blue">
      null
     </span>
     <span style="color:black">
      ||MOST_WORDS_MODE.equalsIgnoreCase(mode)
      <br/>
      <br/>
      || "default".equalsIgnoreCase(mode)) {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      this
     </span>
     <span style="color:black">
      .mode=MOST_WORDS_MODE;
      <br/>
      <br/>
      }
     </span>
     <span style="color:blue">
      else
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      if
     </span>
     <span style="color:black">
      (MAX_WORD_LENGTH_MODE.equalsIgnoreCase(mode)) {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      this
     </span>
     <span style="color:black">
      .mode=MAX_WORD_LENGTH_MODE;
      <br/>
      <br/>
      }
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      else
     </span>
     <span style="color:black">
      {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      throw
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      new
     </span>
     <span style="color:black">
      IllegalArgumentException("
     </span>
     <span style="color:black">
      不合法的分析器
     </span>
     <span style="color:black">
      Mode
     </span>
     <span style="color:black">
      参数设置
     </span>
     <span style="color:black">
      :" + mode);
      <br/>
      <br/>
      }
      <br/>
      <br/>
      }
      <br/>
      <br/>
      @Override
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      public
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      void
     </span>
     <span style="color:black">
      init(Map&lt;String, String&gt; args) {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      super
     </span>
     <span style="color:black">
      .init(args);
      <br/>
      <br/>
      setMode(args.get("mode"));
      <br/>
      <br/>
      }
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      public
     </span>
     <span style="color:black">
      TokenStream create(Reader input) {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      return
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      new
     </span>
     <span style="color:black">
      PaodingTokenizer(input, PaodingMaker.make(),
      <br/>
      <br/>
      createTokenCollector());
      <br/>
      <br/>
      }
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      private
     </span>
     <span style="color:black">
      TokenCollector createTokenCollector() {
      <!-- -->
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      if
     </span>
     <span style="color:black">
      ( MOST_WORDS_MODE.equals(mode))
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      return
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      new
     </span>
     <span style="color:black">
      MostWordsTokenCollector();
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      if
     </span>
     <span style="color:black">
      ( MAX_WORD_LENGTH_MODE.equals(mode))
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      return
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      new
     </span>
     <span style="color:black">
      MaxWordLengthTokenCollector();
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      throw
     </span>
     <span style="color:black">
     </span>
     <span style="color:blue">
      new
     </span>
     <span style="color:black">
      Error("never happened");
      <br/>
      <br/>
      }
      <br/>
      <br/>
      }
     </span>
    </p>
    <p>
     <span style="color:#4B4B4B">
      在schema.xml
     </span>
     的字段text配置里加入该分词器。
    </p>
    <p>
    </p>
    <p style="background:#EEEEEE">
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      fieldtype
     </span>
     <span style="color:red">
      name
     </span>
     <span style="color:blue">
      ="text"
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.TextField"
     </span>
     <span style="color:red">
      positionIncrementGap
     </span>
     <span style="color:blue">
      ="100"&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      analyzer
     </span>
     <span style="color:red">
      type
     </span>
     <span style="color:blue">
      ="index"&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      tokenizer
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="com.ronghao.fulltextsearch.analyzer.ChineseTokenizerFactory"
     </span>
     <span style="color:red">
      mode
     </span>
     <span style="color:blue">
      ="most-words"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.StopFilterFactory"
     </span>
     <span style="color:red">
      ignoreCase
     </span>
     <span style="color:blue">
      ="true"
     </span>
     <span style="color:red">
      words
     </span>
     <span style="color:blue">
      ="stopwords.txt"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.WordDelimiterFilterFactory"
     </span>
     <span style="color:red">
      generateWordParts
     </span>
     <span style="color:blue">
      ="1"
     </span>
     <span style="color:red">
      generateNumberParts
     </span>
     <span style="color:blue">
      ="1"
     </span>
     <span style="color:red">
      catenateWords
     </span>
     <span style="color:blue">
      ="1"
     </span>
     <span style="color:red">
      catenateNumbers
     </span>
     <span style="color:blue">
      ="1"
     </span>
     <span style="color:red">
      catenateAll
     </span>
     <span style="color:blue">
      ="0"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.LowerCaseFilterFactory"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.RemoveDuplicatesTokenFilterFactory"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;/
     </span>
     <span style="color:maroon">
      analyzer
     </span>
     <span style="color:blue">
      &gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      analyzer
     </span>
     <span style="color:red">
      type
     </span>
     <span style="color:blue">
      ="query"&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      tokenizer
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="com.ronghao.fulltextsearch.analyzer.ChineseTokenizerFactory"
     </span>
     <span style="color:red">
      mode
     </span>
     <span style="color:blue">
      ="most-words"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.SynonymFilterFactory"
     </span>
     <span style="color:red">
      synonyms
     </span>
     <span style="color:blue">
      ="synonyms.txt"
     </span>
     <span style="color:red">
      ignoreCase
     </span>
     <span style="color:blue">
      ="true"
     </span>
     <span style="color:red">
      expand
     </span>
     <span style="color:blue">
      ="true"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.StopFilterFactory"
     </span>
     <span style="color:red">
      ignoreCase
     </span>
     <span style="color:blue">
      ="true"
     </span>
     <span style="color:red">
      words
     </span>
     <span style="color:blue">
      ="stopwords.txt"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.WordDelimiterFilterFactory"
     </span>
     <span style="color:red">
      generateWordParts
     </span>
     <span style="color:blue">
      ="1"
     </span>
     <span style="color:red">
      generateNumberParts
     </span>
     <span style="color:blue">
      ="1"
     </span>
     <span style="color:red">
      catenateWords
     </span>
     <span style="color:blue">
      ="0"
     </span>
     <span style="color:red">
      catenateNumbers
     </span>
     <span style="color:blue">
      ="0"
     </span>
     <span style="color:red">
      catenateAll
     </span>
     <span style="color:blue">
      ="0"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.LowerCaseFilterFactory"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      filter
     </span>
     <span style="color:red">
      class
     </span>
     <span style="color:blue">
      ="solr.RemoveDuplicatesTokenFilterFactory"/&gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;/
     </span>
     <span style="color:maroon">
      analyzer
     </span>
     <span style="color:blue">
      &gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;/
     </span>
     <span style="color:maroon">
      fieldtype
     </span>
     <span style="color:blue">
      &gt;
     </span>
     <span style="color:black">
      <br/>
      <br/>
     </span>
     <span style="color:blue">
      &lt;/
     </span>
     <span style="color:maroon">
      types
     </span>
     <span style="color:blue">
      &gt;
     </span>
    </p>
    <p>
     <span style="color:#4B4B4B">
     </span>
     <span style="color:#4B4B4B">
      完成后重启tomcat
     </span>
     ，即可在
     <a href="http://localhost:8080/solr/admin/analysis.jsp" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black">
       http://localhost:8080/solr/admin/analysis.jsp
      </span>
     </a>
    </p>
    <p>
     <span style="color:#4B4B4B">
      体验到庖丁的中文分词。注意要将paoding-analysis.jar
     </span>
     复制到solr的lib下，注意修改jar包里字典的home。
    </p>
    <h3>
     <a name="t29" target="_blank">
     </a>
     <a name="_Toc277337219" target="_blank">
      2.3      多核（MultiCore
     </a>
     ）配置
    </h3>
    <p>
     Solr Multicore 是 solr1.3 的新特性。其目的一个solr实例，可以有多个搜索应用。
    </p>
    <p>
    </p>
    <p>
     我们知道你既可以把不同类型的数据放到同一index中，也可以使用分开的多indexes。基于这一点，你只需知道如何使用多indexes（实际上就是运行Solr的多实例）。尽管如此，为每一个类型添加一个完整的Solr实例会显得太臃肿庞大。Solr1.3引入了Solrcore的概念，该方案使用一个Solr实例管理多个indexes，这样就有热点core（hotcore）的重读（reloading）与交换（swap，通常是读index与写index交换），那么管理一个 core或index也容易些。每个Solrcore由它自己的配置文件和索引数据组成。在多core执行搜索和索引几乎和没有使用core一样。你只是添加core的名字为各自不同的URL。单core情况下的如下搜索：
    </p>
    <p>
     <a href="http://localhost:8983/solr/select?q=dave%20matthews" rel="nofollow noopener noreferrer" target="_blank">
      http://localhost:8983/solr/select?q=dave%20matthews
     </a>
    </p>
    <p>
     在多core环境下，你可以通过如下方式访问一个名为mbartists的core：
    </p>
    <p>
     <a href="http://localhost:8983/solr/core0/select?q=dave%20matthews" rel="nofollow noopener noreferrer" target="_blank">
      http://localhost:8983/solr/core0/select?q=dave%20matthews
     </a>
    </p>
    <p>
     并非在URL中引入corename的参数名值对，而是用不同的context。这样就可以像在单core中执行你的管理任务，搜索，更新操作。
    </p>
    <h4>
     <a name="t30" target="_blank">
     </a>
     <a name="_Toc277337220" target="_blank">
      2.3.1     MultiCore
     </a>
     的配置方法
    </h4>
    <p>
     1、找到solr下载包中的example文件夹，在它的下面有个multicore文件夹，将这个文件夹下面的core0、core1和solr.xml拷贝到 c:\solr-tomcat\solr下面。
    </p>
    <p>
     注意：有一个 solr.xml（这只是默认文件，当然也可以指定别的文件），如：
    </p>
    <p>
     &lt;?xml version="1.0"encoding="UTF-8" ?&gt;
    </p>
    <p>
     &lt;solrpersistent="false"&gt;
    </p>
    <p>
     &lt;coresadminPath="/admin/cores"&gt;
    </p>
    <p>
     &lt;core name="core0"instanceDir="core0" /&gt;
    </p>
    <p>
     &lt;core name="core1"instanceDir="core1" /&gt;
    </p>
    <p>
     &lt;/cores&gt;
    </p>
    <p>
     &lt;/solr&gt;
    </p>
    <p>
    </p>
    <p>
     这个文件是告诉solr应该加载哪些core，&lt;cores&gt;……&lt;/cores&gt;里有 core0、core1。core0（可以类比以前的solr.home）/conf目录下有schema.xml与solrconfig.xml，可以把实际应用的/solr/conf/schema.xml复制过来（
     <span style="color:red">
      注意：
     </span>
     <span style="color:red">
      solrconfig.xml
     </span>
     <span style="color:red">
      不要复制
     </span>
     ）。
    </p>
    <p>
    </p>
    <p>
     2、启动tomcat，访问应用，就可以看到有Admin core0 和Admin core1
    </p>
    <p>
     <a href="http://192.168.10.85:18080/solr/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/
     </a>
    </p>
    <p>
     <a href="http://192.168.10.85:18080/solr/core0/admin/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/core0/admin/
     </a>
    </p>
    <p>
     <a href="http://192.168.10.85:18080/solr/core1/admin/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/core1/admin/
     </a>
    </p>
    <p>
     <a href="http://192.168.10.85:18080/solr/core1/admin/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/core1/admin/
     </a>
     <a href="http://localhost:8080/solr/admin/analysis.jsp" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black">
       analysis.jsp
      </span>
     </a>
    </p>
    <p>
    </p>
    <p>
     3、采用上面的默认solr.xml，索引文件将存放在同一个目录下面，在这里将存放在C:\solr-tomcat\solr\data，如果你想更改目录，或者两个应用存放在不同的目录，请参见下面的xml。
    </p>
    <p>
     &lt;corename="core0" instanceDir="core0"&gt;
    </p>
    <p>
     &lt;property name="dataDir"value="/opt/solr-tomcat/solr/data/core0" /&gt;
    </p>
    <p>
     &lt;/core&gt;
    </p>
    <p>
     &lt;corename="core1" instanceDir="core1"&gt;
    </p>
    <p>
     &lt;property name="dataDir"value="/opt/solr-tomcat/solr/data/core1" /&gt;
    </p>
    <p>
     &lt;/core&gt;
    </p>
    <p>
    </p>
    <p>
     <strong>
      一些关键的配置值是：
     </strong>
    </p>
    <p>
     1.Persistent="false"指明运行时的任何修改我们不做保存。如拷贝。如果你想保存从启动起的一些改动，那就把persistent设置为true。如果你的index策略是完成建index到一个纯净的core中然后交换到活动core 那么你绝对应该设为true。
    </p>
    <p>
     sharedLib="lib"指明了所有core的jar文件的lib目录。如果你有一个core有自己需要的jar文件，那么你可以把他们置入到core/lib目录。例如：karaoke core 使用 Solr Cell来索引化富文本内容，因此那些用来解析和抽取富文本的jar文件被放到./examples/cores/karaoke/lib/.
    </p>
    <p>
    </p>
    <h4>
     <a name="t31" target="_blank">
     </a>
     <a name="_Toc277337221" target="_blank">
      2.3.2     为何使用多core
     </a>
     ？
    </h4>
    <p>
     Solr实例支持多core比启用多index要好（do more）。多core同时解决了在生产环境下的一些关键需求：
    </p>
    <p>
     1.重建索引
    </p>
    <p>
     2.测试配置变更
    </p>
    <p>
     3.合并索引
    </p>
    <p>
     4.运行时重命名core
    </p>
    <p>
     <strong>
      为何多core不是默认的？
     </strong>
    </p>
    <p>
     多core是1.3版本中才加的，1.4后更成熟。我们强烈建议你使用多core，既是你现在的solr.xml只配置了一个core，虽然会比单个索引稍复杂，但可以带来管理core上的好处。或许一天单个core可能最终RELOAD and STATUS命令，又或许单个core最终会被废禁。多个core会是Solr将来支持大规模分布式索引的关键。因此，以后可以期待更多。
    </p>
    <p>
     你可以得到更多的关于Solr的资料：
     <a href="http://wiki.apache.org/solr/CoreAdmin" rel="nofollow noopener noreferrer" target="_blank">
      http://wiki.apache.org/solr/CoreAdmin
     </a>
     。
    </p>
    <h3>
     <a name="t32" target="_blank">
     </a>
     <a name="_Toc277337222" target="_blank">
     </a>
     <a name="_配置文件说明" target="_blank">
     </a>
     2.4      配置文件说明
    </h3>
    <div>
     <p>
      <span style="color:#424040">
       运行
      </span>
      <span style="color:#424040">
       solr
      </span>
      <span style="color:#424040">
       是个很简单的事，如何让
      </span>
      <span style="color:#424040">
       solr
      </span>
      <span style="color:#424040">
       高效运行你的项目，这个就不容易了。要考虑的因素太多。这里很重要一个就是对
      </span>
      <span style="color:#424040">
       solr
      </span>
      <span style="color:#424040">
       的配置要了解。懂得配置文件每个配置项的含义，这样操作起来就会如鱼得水！
      </span>
     </p>
    </div>
    <p>
     在solr里面主要的就是solr的主目录下面的
     <strong>
      schema.xml
     </strong>
     ,
     <strong>
      solrConfig.xml
     </strong>
     。
    </p>
    <p>
    </p>
    <h4>
     <a name="t33" target="_blank">
     </a>
     <a name="_Toc277337223" target="_blank">
      2.4.1     schema.xml
     </a>
    </h4>
    <p>
     schema.xml，这个相当于数据表配置文件，它定义了加入索引的数据的数据类型的。主要包括types、fields和其他的一些缺省设置。
    </p>
    <p>
     <span style="color:red">
      注:schema.xml
     </span>
     里有一个uniqueKey,
     <span style="color:red">
      的配置，这里将
     </span>
     <span style="color:red">
      id
     </span>
     <span style="color:red">
      字段作为索引文档的唯一标识符，非常重要。
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      uniqueKey
     </span>
     <span style="color:blue">
      &gt;
     </span>
     <span style="color:black">
      id
     </span>
     <span style="color:blue">
      &lt;/
     </span>
     <span style="color:maroon">
      uniqueKey
     </span>
     <span style="color:blue">
      &gt;
     </span>
    </p>
    <h5>
     <a name="t34" target="_blank">
     </a>
     1.  FieldType（类型）
    </h5>
    <p>
     首先需要在types结点内定义一个FieldType子结点，包括name,class,positionIncrementGap等等一些参数，name就是这个FieldType的名称，class指向org.apache.solr.analysis包里面对应的class名称，用来定义这个类型的行为。在FieldType定义的时候最重要的就是定义这个类型的数据在建立索引和进行查询的时候要使用的分析器analyzer,包括分词和过滤。例如：
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;fieldType name="text" class="solr.TextField" positionIncrementGap="100"&gt;
        </p>
        <p>
         &lt;analyzer type="index"&gt;
        </p>
        <p>
         &lt;tokenizer class="
         <span style="color:red">
          solr.WhitespaceTokenizerFactory
         </span>
         "/&gt;
        </p>
        <p>
         &lt;!-- in this example, we will only use synonyms at query time
        </p>
        <p>
         &lt;filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/&gt;
        </p>
        <p>
         --&gt;
        </p>
        <p>
         &lt;!-- Case insensitive stop word removal.
        </p>
        <p>
         enablePositionIncrements=true ensures that a 'gap' is left to
        </p>
        <p>
         allow for accurate phrase queries.
        </p>
        <p>
         --&gt;
        </p>
        <p>
         &lt;filter class="
         <span style="color:red">
          solr.StopFilterFactory
         </span>
         "
        </p>
        <p>
         ignoreCase="true"
        </p>
        <p>
         words="stopwords.txt"
        </p>
        <p>
         enablePositionIncrements="true"
        </p>
        <p>
         /&gt;
        </p>
        <p>
         &lt;filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/&gt;
        </p>
        <p>
         &lt;filter class="
         <span style="color:red">
          solr.LowerCaseFilterFactory
         </span>
         "/&gt;
        </p>
        <p>
         &lt;filter class="
         <span style="color:red">
          solr.EnglishPorterFilterFactory
         </span>
         " protected="protwords.txt"/&gt;
        </p>
        <p>
         &lt;filter class="
         <span style="color:red">
          solr.RemoveDuplicatesTokenFilterFactory
         </span>
         "/&gt;
        </p>
        <p>
         &lt;/analyzer&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         &lt;/fieldType&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p>
     在index的analyzer中使用solr.WhitespaceTokenizerFactory这个分词包，就是空格分词，然后使用solr.StopFilterFactory，solr.WordDelimiterFilterFactory，solr.LowerCaseFilterFactory，solr.EnglishPorterFilterFactory，solr.RemoveDuplicatesTokenFilterFactory这几个过滤器。在向索引库中添加text类型的索引的时候，Solr会首先用空格进行分词，然后把分词结果依次使用指定的过滤器进行过滤，最后剩下的结果才会加入到索引库中以备查询。Solr的analysis包并没有带支持中文分词的包
    </p>
    <h5>
     <a name="t35" target="_blank">
     </a>
     2.  Fields（字段）
    </h5>
    <p>
     接下来的工作就是在fields结点内定义具体的字段（类似数据库中的字段），就是filed，filed定义包括name,type（为之前定义过的各种FieldType）,indexed（是否被索引）,stored（是否被储存），multiValued（是否有多个值）等等。
    </p>
    <p>
     例：
    </p>
    <p>
     &lt;fields&gt;
    </p>
    <p>
     &lt;fieldname="id" type="integer" indexed="true"stored="true" required="true" /&gt;
    </p>
    <p>
     &lt;fieldname="name" type="text" indexed="true"stored="true" /&gt;
    </p>
    <p>
     &lt;fieldname="summary" type="text" indexed="true"stored="true" /&gt;
    </p>
    <p>
     &lt;fieldname="author" type="string" indexed="true"stored="true" /&gt;
    </p>
    <p>
     &lt;fieldname="date" type="date" indexed="false"stored="true" /&gt;
    </p>
    <p>
     &lt;fieldname="content" type="text" indexed="true"stored="false" /&gt;
    </p>
    <p>
     &lt;fieldname="keywords" type="keyword_text"indexed="true" stored="false" multiValued="true"/&gt;
    </p>
    <p>
     &lt;fieldname="all" type="text" indexed="true"stored="false" multiValued="true"/&gt;
    </p>
    <p>
     &lt;/fields&gt;
    </p>
    <p>
    </p>
    <p>
     field的定义相当重要，有几个技巧需注意一下，对可能存在多值得字段尽量设置multiValued属性为true，避免建索引是抛出错误；如果不需要存储相应字段值，尽量将stored属性设为false。
    </p>
    <h5>
     <a name="t36" target="_blank">
     </a>
     3.  copyField（复制字段）
    </h5>
    <p>
     建议建立了一个拷贝字段，将所有的全文字段复制到一个字段中，以便进行统一的检索：
    </p>
    <p>
     &lt;field name="all" type="text"indexed="true" stored="false"multiValued="true"/&gt;
    </p>
    <p>
    </p>
    <p>
     并在拷贝字段结点处完成拷贝设置：
    </p>
    <p>
    </p>
    <p>
     &lt;copyField source="name"dest="all"/&gt;
    </p>
    <p>
     &lt;copyField source="summary"dest="all"/&gt;
    </p>
    <div>
     <p>
      注：“拷贝字段”就是查询的时候不用再输入：
      <span style="color:windowtext">
       userName:
      </span>
      <span style="color:windowtext">
       张三
      </span>
      <span style="color:windowtext">
       anduserProfile:
      </span>
      <span style="color:windowtext">
       张三的个人简介
      </span>
      。直接可以输入"张三"就可以将“名字”含“张三”或者“简介”中含“张三”的又或者“名字”和“简介”都含有“张三”的查询出来。他将需要查询的内容放在了一个字段中，并且默认查询该字段设为该字段就行了。
     </p>
    </div>
    <h5>
     <a name="t37" target="_blank">
     </a>
     4.  dynamicField（动态字段）
    </h5>
    <p>
     除此之外，还可以定义动态字段，所谓动态字段就是不用指定具体的名称，只要定义字段名称的规则，例如定义一个dynamicField，name 为*_i，定义它的type为text，那么在使用这个字段的时候，任何以_i结尾的字段都被认为是符合这个定义的，例如：name_i，gender_i，school_i等。
    </p>
    <p>
     schema.xml配置文件大体上就是这样，更多细节请参见solrwiki：
     <a href="http://wiki.apache.org/solr/SchemaXml" rel="nofollow noopener noreferrer" target="_blank">
      http://wiki.apache.org/solr/SchemaXml
     </a>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h4>
     <a name="t38" target="_blank">
     </a>
     2.4.2
     <a name="_Toc277337224" target="_blank">
      solrconfig.xml
     </a>
    </h4>
    <p>
     在配置方面，solrconfig.xml文件不仅指定了 Solr 如何处理索引、突出显示、分类、搜索以及其他请求，还指定了用于指定缓存的处理方法的属性，以及用于指定Lucene 管理索引的方法的属性。配置取决于模式，但模式不取决于配置。
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     solrconfig.xml文件包含了大部分的参数用来配置Solr本身的。
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       dataDirparameter
      </span>
      <span style="color:black">
       ：
      </span>
     </strong>
     <span style="color:black">
      &lt;dataDir&gt;/var/data/solr&lt;/dataDir&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      用来指定一个替换原先在
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      目录下默认存放所有的索引数据，可以在
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      目录以外的任意目录中。如果复制使用后应该符合该参数。如果这个目录不是绝对路径的话，那么应该以当前的容器为相对路径。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     l
     <strong>
      <span style="color:black">
       mainIndex
      </span>
      <span style="color:black">
       ：
      </span>
      <span style="color:black">
       这个参数的值用来控制合并多个索引段。
      </span>
     </strong>
    </p>
    <p>
     <span style="color:black">
      &lt;useCompoundFile&gt;
     </span>
     <span style="color:black">
      ：通过将很多
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      内部文件整合到单一一个文件来减少使用中的文件的数量。这可有助于减少
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      使用的文件句柄数目，代价是降低了性能。除非是应用程序用完了文件句柄，否则
     </span>
     <span style="color:black">
      false
     </span>
     <span style="color:black">
      的默认值应该就已经足够。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      mergeFactor
     </span>
     <span style="color:black">
      ：决定低水平的
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      段被合并的频率。较小的值（最小为
     </span>
     <span style="color:black">
      2
     </span>
     <span style="color:black">
      ）使用的内存较少但导致的索引时间也更慢。较大的值可使索引时间变快但会牺牲较多的内存。
     </span>
    </p>
    <p>
     <span style="color:black">
      maxBufferedDocs
     </span>
     <span style="color:black">
      ：
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      在合并内存中文档和创建新段之前，定义所需索引的最小文档数。段
     </span>
     <span style="color:black">
      是用来存储索引信息的
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      文件。较大的值可使索引时间变快但会牺牲较多的内存。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     l
     <strong>
      <span style="color:black">
       maxMergeDocs
      </span>
      <span style="color:black">
       ：
      </span>
      <span style="color:black">
       控制可由
      </span>
      <span style="color:black">
       Solr ,000)
      </span>
      <span style="color:black">
       最适合于具有合并的
      </span>
      <span style="color:black">
       Document
      </span>
      <span style="color:black">
       的最大数。较小的值
      </span>
      <span style="color:black">
       (&lt; 10
      </span>
      <span style="color:black">
       大量更新的应用程序。该参数不允许
      </span>
      <span style="color:black">
       lucene
      </span>
      <span style="color:black">
       在任何索引段里包含比这个值更多的文档，但是，多余的文档可以创建一个新的索引段进行替换。
      </span>
     </strong>
    </p>
    <p>
     l
     <strong>
      <span style="color:black">
       maxFieldLength
      </span>
      <span style="color:black">
       ：
      </span>
      <span style="color:black">
       对于给定的
      </span>
      <span style="color:black">
       Document
      </span>
      <span style="color:black">
       ，控制可添加到
      </span>
      <span style="color:black">
       Field
      </span>
      <span style="color:black">
       的最大条目数，进而截断该文档。如果文档可能会很大，就需要增加这个数值。然而，若将这个值设置得过高会导致内存不足错误。
      </span>
     </strong>
    </p>
    <p>
     l
     <strong>
      <span style="color:black">
       unlockOnStartup
      </span>
      <span style="color:black">
       ：
      </span>
      <span style="color:black">
       unlockOnStartup
      </span>
      <span style="color:black">
       告知
      </span>
      <span style="color:black">
       Solr
      </span>
      <span style="color:black">
       忽略在多线程环境中用来保护索引的锁定机制。在某些情况下，索引可能会由于不正确的关机或其他错误而一直处于锁定，这就妨碍了添加和更新。将其设置为
      </span>
      <span style="color:black">
       true
      </span>
      <span style="color:black">
       可以禁用启动锁定，进而允许进行添加和更新。
      </span>
     </strong>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;mainIndex&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;!--lucene options specific to the main on-disk lucene index --&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;useCompoundFile&gt;false&lt;/useCompoundFile&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;mergeFactor&gt;10&lt;/mergeFactor&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;maxBufferedDocs&gt;1000&lt;/maxBufferedDocs&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;maxMergeDocs&gt;2147483647&lt;/maxMergeDocs&gt;
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;maxFieldLength&gt;10000&lt;/maxFieldLength&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      &lt;/mainIndex&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <strong>
      <span style="color:black">
       updateHandler
      </span>
      <span style="color:black">
       ：
      </span>
      <span style="color:black">
      </span>
      <span style="color:black">
       这个更新处理器主要涉及底层的关于如何更新处理内部的信息。（此参数不能跟高层次的配置参数
      </span>
      <span style="color:black">
       Request Handlers
      </span>
      <span style="color:black">
       对处理发自客户端的更新相混淆）。
      </span>
      <span style="color:black">
      </span>
     </strong>
    </p>
    <p>
     <span style="color:black">
      &lt;updateHandlerclass="solr.DirectUpdateHandler2"&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      &lt;!-- Limit the number of deletions Solrwill buffer during doc updating.
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      Settingthis lower can help bound memory use during indexing.
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      --&gt;
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
     </span>
     <span style="color:black">
      缓冲更新这么多的数目，设置如下比较低的值，可以约束索引时候所用的内存
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;maxPendingDeletes&gt;100000&lt;/maxPendingDeletes&gt;
     </span>
     <br/>
     <span style="color:black">
      等待文档满足一定的标准后将自动提交，未来版本可以扩展现有的标准
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;!-- autocommit pending docsif certain criteria are met.  Future versions may expand the available
     </span>
     <br/>
     criteria --&gt;
     <br/>
     &lt;autoCommit&gt;
     <br/>
     &lt;maxDocs&gt;10000&lt;/maxDocs&gt; &lt;!-- maximum uncommited docs beforeautocommit triggered --&gt;
     <br/>
     <span style="color:black">
      触发自动提交前最多可以等待提交的文档数量
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;maxTime&gt;86000&lt;/maxTime&gt; &lt;!-- maximum time (in MS) after addinga doc before an autocommit is triggered --&gt;
     </span>
     <br/>
     <span style="color:black">
      在添加了一个文档之后，触发自动提交之前所最大的等待时间
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;/autoCommit&gt;
     </span>
    </p>
    <p>
     <span style="color:black">
      这个参数用来配置执行外部的命令。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
     </span>
     <span style="color:black">
      一个
     </span>
     <span style="color:black">
      postCommit
     </span>
     <span style="color:black">
      的事件被触发当每一个提交之后
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;listener event="postCommit"class="solr.RunExecutableListener"&gt;
     </span>
     <br/>
     &lt;strname="exe"&gt;snapshooter&lt;/str&gt;
     <br/>
     &lt;strname="dir"&gt;solr/bin&lt;/str&gt;
     <br/>
     &lt;boolname="wait"&gt;true&lt;/bool&gt;
     <br/>
     &lt;!--
     <br/>
     &lt;arrname="args"&gt; &lt;str&gt;arg1&lt;/str&gt;&lt;str&gt;arg2&lt;/str&gt; &lt;/arr&gt;
     <br/>
     &lt;arrname="env"&gt; &lt;str&gt;MYVAR=val1&lt;/str&gt; &lt;/arr&gt;
     <br/>
     --&gt;
     <br/>
     &lt;/listener&gt;
     <br/>
     exe--
     <span style="color:black">
      可执行的文件类型
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      dir--
     </span>
     <span style="color:black">
      可以用该目录做为当前的工作目录。默认为
     </span>
     <span style="color:black">
      "."
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      wait--
     </span>
     <span style="color:black">
      调用线程要等到可执行的返回值
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      args--
     </span>
     <span style="color:black">
      传递给程序的参数
     </span>
     <span style="color:black">
      默认
     </span>
     <span style="color:black">
      nothing
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      env--
     </span>
     <span style="color:black">
      环境变量的设置
     </span>
     <span style="color:black">
      默认
     </span>
     <span style="color:black">
      nothing
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      <br/>
      &lt;query&gt;
     </span>
     <br/>
     &lt;!-- Maximum number ofclauses in a boolean query... can affect range
     <br/>
     or wildcard queries that expand to big boolean queries.
     <br/>
     <span style="color:black">
      一次布尔查询的最大数量，可以影响查询的范围或者进行通配符的查询，借此来扩展一个更强大的查询。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      An exception is thrown if exceeded.
     </span>
     <br/>
     --&gt;
     <br/>
     &lt;maxBooleanClauses&gt;1024&lt;/maxBooleanClauses&gt;
     <br/>
     <br/>
     &lt;query&gt;:
     <br/>
     <span style="color:black">
      控制跟查询相关的一切东东。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      <br/>
      Caching
     </span>
     <span style="color:black">
      ：修改这个参数可以做为索引的增长和变化。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      <br/>
      &lt;!-- Cache used by SolrIndexSearcher forfilters (DocSets),
     </span>
     <br/>
     unordered sets of *all* documents that match a query.
     <br/>
     <span style="color:black">
      在过滤器中过滤文档集合的时候，或者是一个无序的所有的文档集合中将在在
     </span>
     <span style="color:black">
      SolrIndexSearcher
     </span>
     <span style="color:black">
      中使用缓存来匹配符合查询的所有文档。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      When a new searcher is opened, its caches may be prepopulated
     </span>
     <br/>
     or "autowarmed" using data from caches in the old searcher.
     <br/>
     <span style="color:black">
      当一次搜索被打开，它可以自动的或者预先从旧的搜索中使用缓存数据。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      autowarmCount is the number of items to prepopulate.
     </span>
     <br/>
     autowarmCount
     <span style="color:black">
      这个值是预先设置的数值项。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      For LRUCache,
     </span>
     <br/>
     the autowarmed items will be the most recently accessed items.
     <br/>
     <span style="color:black">
      在
     </span>
     <span style="color:black">
      LRUCache
     </span>
     <span style="color:black">
      中，这个
     </span>
     <span style="color:black">
      autowarmed
     </span>
     <span style="color:black">
      项中保存的是最近访问的项。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      Parameters:
     </span>
     <span style="color:black">
      参数选项
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      class - the SolrCache implementation (currently only LRUCache)
     </span>
     <span style="color:black">
      实现
     </span>
     <span style="color:black">
      SolrCache
     </span>
     <span style="color:black">
      接口的类
     </span>
     <span style="color:black">
      当前仅有
     </span>
     <span style="color:black">
      LRUCache
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
     </span>
     <br/>
     size - the maximum number of entries in the cache
     <br/>
     <span style="color:black">
      在
     </span>
     <span style="color:black">
      cache
     </span>
     <span style="color:black">
      中最大的上限值
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      initialSize - the initial capacity (number of entries) of
     </span>
     <br/>
     the cache.  (seel java.util.HashMap)
     <br/>
     <span style="color:black">
      在
     </span>
     <span style="color:black">
      cache
     </span>
     <span style="color:black">
      中初始化的数量
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      autowarmCount - the number of entries to prepopulate from
     </span>
     <br/>
     and old cache.
     <br/>
     <span style="color:black">
      从旧的缓存中预先设置的项数。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      --&gt;
     </span>
     <br/>
     &lt;filterCache
     <br/>
     class="solr.LRUCache"
     <br/>
     size="512"
     <br/>
     initialSize="512"
     <br/>
     autowarmCount="256"/&gt;
     <br/>
     <br/>
     &lt;!-- queryResultCache cachesresults of searches - ordered lists of
     <br/>
     document ids (DocList) based on a query, a sort, and the range
     <br/>
     of documents requested.  --&gt;
     <br/>
     <span style="color:black">
      查询结果缓存
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;queryResultCache
     </span>
     <br/>
     class="solr.LRUCache"
     <br/>
     size="512"
     <br/>
     initialSize="512"
     <br/>
     autowarmCount="256"/&gt;
     <br/>
     <br/>
     &lt;!-- documentCache caches LuceneDocument objects (the stored fields for each document).
     <br/>
     documentCache
     <span style="color:black">
      缓存
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      的文档对象（存储领域的每一个文件）
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      Since Luceneinternal document ids are transient, this cache will not be autowarmed. --&gt;
     </span>
     <br/>
     <span style="color:black">
      由于
     </span>
     <span style="color:black">
      Lucene
     </span>
     <span style="color:black">
      的内部文档
     </span>
     <span style="color:black">
      ID
     </span>
     <span style="color:black">
      标识（文档名称）是短暂的，所以这种缓存不会被自动
     </span>
     <span style="color:black">
      warmed
     </span>
     <span style="color:black">
      。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;documentCache
     </span>
     <br/>
     class="solr.LRUCache"
     <br/>
     size="512"
     <br/>
     initialSize="512"
     <br/>
     autowarmCount="0"/&gt;
     <br/>
     <br/>
     &lt;!-- Example of a genericcache.
     <br/>
     <span style="color:black">
      一个通用缓存的列子。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      These caches may be accessed by name
     </span>
     <br/>
     through SolrIndexSearcher.getCache().cacheLookup(), and cacheInsert().
     <br/>
     <span style="color:black">
      这些缓存可以通过在
     </span>
     <span style="color:black">
      SolrIndexSearcher.getCache().cacheLookup()
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      cacheInsert()
     </span>
     <span style="color:black">
      中利用缓存名称访问得到。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      The purpose is to enable easy caching of user/application level data.
     </span>
     <br/>
     <span style="color:black">
      这样做的目的就是很方便的缓存用户级或应用程序级的数据。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      The regenerator argument should be specified as an implementation
     </span>
     <br/>
     of solr.search.CacheRegenerator if autowarming is desired.  --&gt;
     <br/>
     <span style="color:black">
      这么做的的关键就是应该明确规定实现
     </span>
     <span style="color:black">
      solr.search.CacheRegenerator
     </span>
     <span style="color:black">
      接口如果
     </span>
     <span style="color:black">
      autowarming
     </span>
     <span style="color:black">
      是比较理想化的设置。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      &lt;!--
     </span>
     <br/>
     &lt;cachename="myUserCache"
     <br/>
     class="solr.LRUCache"
     <br/>
     size="4096"
     <br/>
     initialSize="1024"
     <br/>
     autowarmCount="1024"
     <br/>
     regenerator="org.mycompany.mypackage.MyRegenerator"
     <br/>
     /&gt;
     <br/>
     --&gt;
     <br/>
     <br/>
     &lt;!-- An optimization thatattempts to use a filter to satisfy a search.
     <br/>
     <span style="color:black">
      一种优化方式就是利用一个过滤器，以满足搜索需求。
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      If the requested sort does not include a score,
     </span>
     <br/>
     <span style="color:black">
      如果请求的不是要求包括得分的类型，
     </span>
     <span style="color:black">
      filterCache
     </span>
     <span style="color:black">
      这种过滤器将检查与过滤器相匹配的结果。如果找到，过滤器将被用来作为文档的来源识别码，并在这个基础上进行排序。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      then the filterCache
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      will be checked for a filter matching the query.  If found, the filter
     </span>
     <br/>
     will be used as the source of document ids, and then the sort will be
     <br/>
     applied to that.
     <br/>
     --&gt;
     <br/>
     &lt;useFilterForSortedQuery&gt;true&lt;/useFilterForSortedQuery&gt;
    </p>
    <p>
     <span style="color:black">
      &lt;!-- An optimizationfor use with the queryResultCache.  When a search
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      is requested, a superset of the requested number of document ids
     </span>
     <br/>
     are collected.  For example, of a search for a particular query
     <br/>
     requests matching documents 10 through 19, and queryWindowSize is 50,
     <br/>
     then documents 0 through 50 will be collected and cached. Any further
     <br/>
     requests in that range can be satisfied via the cache.
     <br/>
     --&gt;
    </p>
    <p>
     <span style="color:black">
      一种优化用于
     </span>
     <span style="color:black">
      queryResultCache
     </span>
     <span style="color:black">
      ，当一个搜索被请求，也会收集一定数量的文档
     </span>
     <span style="color:black">
      ID
     </span>
     <span style="color:black">
      做为一个超集。举个例子，一个特定的查询请求匹配的文档是
     </span>
     <span style="color:black">
      10
     </span>
     <span style="color:black">
      到
     </span>
     <span style="color:black">
      19
     </span>
     <span style="color:black">
      ，此时，
     </span>
     <span style="color:black">
      queryWindowSize
     </span>
     <span style="color:black">
      是
     </span>
     <span style="color:black">
      50
     </span>
     <span style="color:black">
      ，这样，文档从
     </span>
     <span style="color:black">
      0
     </span>
     <span style="color:black">
      到
     </span>
     <span style="color:black">
      50
     </span>
     <span style="color:black">
      都会被收集并缓存。这样，任何更多的在这个范围内的请求都会通过缓存来满足查询。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      &lt;queryResultWindowSize&gt;50&lt;/queryResultWindowSize&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      &lt;!-- This entry enables an int hashrepresentation for filters (DocSets)
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      when the number of items in the set is less than maxSize. For smaller
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      sets, this representation is more memory efficient, more efficient to
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      iterate over, and faster to take intersections.
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      --&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      &lt;HashDocSetmaxSize="3000" loadFactor="0.75"/&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      &lt;!-- boolToFilterOptimizerconverts boolean clauses with zero boost
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      cached filters ifthe number of docs selected by the clause exceeds the
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      threshold (represented as a fraction of the total index)
     </span>
    </p>
    <p>
     <span style="color:black">
      --&gt;
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      &lt;boolTofilterOptimizerenabled="true" cacheSize="32"threshold=".05"/&gt;
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      <br/>
      <br/>
      &lt;!-- Lazy field loading willattempt to read only parts of documents on disk that are
     </span>
     <br/>
     requested.  Enabling should be faster if you aren't retrieving all storedfields.
     <br/>
     --&gt;
     <br/>
     &lt;enableLazyFieldLoading&gt;false&lt;/enableLazyFieldLoading&gt;
    </p>
    <p>
    </p>
    <h2>
     <a name="t39" target="_blank">
     </a>
     <a name="_Toc277337225" target="_blank">
      3      Solr
     </a>
     的应用
    </h2>
    <p>
     <span style="color:black">
      关于
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的详细使用说明，请参考
     </span>
     <span style="color:black">
      :
     </span>
     <a href="http://wiki.apache.org/solr/FrontPage" rel="nofollow noopener noreferrer" target="_blank">
      http://wiki.apache.org/solr/FrontPage
     </a>
    </p>
    <h3>
     <a name="t40" target="_blank">
     </a>
     <a name="_Toc277337226" target="_blank">
      3.1      SOLR
     </a>
     应用概述
    </h3>
    <h4>
     <a name="t41" target="_blank">
     </a>
     <a name="_Toc277337227" target="_blank">
      3.1.1     Solr
     </a>
     的应用模式
    </h4>
    <p>
     <span style="color:black">
      在门户社区中需要使用
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      ，可采用如下模式：
     </span>
    </p>
    <p>
     <span style="color:black">
      1)
     </span>
     <strong>
      <span style="color:black">
       对于原有系统已有的数据或需要索引的数据量较大的情况
      </span>
     </strong>
     <span style="color:black">
     </span>
    </p>
    <p align="left">
     <span style="color:black">
      直接采用通过http
     </span>
     方式调用solr
     <span style="color:black">
      的接口方式，效率较差，采用
     </span>
     solr
     <span style="color:black">
      本身对csv
     </span>
     的支持（http://wiki.apache.org/solr
     <span style="color:black">
      /UpdateCSV
     </span>
     <span style="color:black">
      ），将数据导出为csv
     </span>
     格式，然后调用solr
     <span style="color:black">
      的csv
     </span>
     接口
     <a href="http://localhost:8080/solr/update/csv" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black">
       http://localhost:8080/solr/update/csv
      </span>
     </a>
    </p>
    <p>
     <strong>
      2)
      <span style="color:black">
       对于系统新增的数据
      </span>
     </strong>
    </p>
    <p align="left">
     <span style="color:black">
      先将需要索引查询的数据组装成xml
     </span>
     格式，然后使用httpclient 将数据提交到solr
     <span style="color:black">
      的http
     </span>
     接口，例如：
     <a href="http://localhost:8080/solr/update" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black">
       http://localhost:8080/solr/update
      </span>
     </a>
    </p>
    <p align="left">
     <span style="color:black">
      也可以参考post.jar
     </span>
     中的SimplePostTool的实现。
     <a href="http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/util/SimplePostTool.java?view=co" rel="nofollow noopener noreferrer" target="_blank">
      http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/util/SimplePostTool.java?view=co
     </a>
    </p>
    <p>
     <strong>
      3)  中文分词
     </strong>
    </p>
    <p>
     <span style="color:black">
      采用mmseg4j
     </span>
     作为solr
     <span style="color:black">
      （Lucene
     </span>
     ）缺省的中文分词方案
    </p>
    <p>
     <span style="color:black">
      项目库：
     </span>
     <a href="http://code.google.com/p/mmseg4j/" rel="nofollow noopener noreferrer" target="_blank">
      http://code.google.com/p/mmseg4j/
     </a>
    </p>
    <p>
     <span style="color:black">
      也可以采用庖丁解牛作为
     </span>
     solr
     <span style="color:black">
      （Lucene
     </span>
     ）缺省的中文分词方案
    </p>
    <p>
     <span style="color:black">
      项目库：http://code.google.com/p/paoding/
     </span>
    </p>
    <p>
     <strong>
      4)  与nutch的集成使用
     </strong>
    </p>
    <p>
     <a href="http://blog.foofactory.fi/2007/02/online-indexing-integrating-nutch-with.html" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black">
       http://blog.foofactory.fi/2007/02/online-indexing-integrating-nutch-with.html
      </span>
     </a>
    </p>
    <p>
     <strong>
      5)  嵌入式Solr
     </strong>
    </p>
    <p>
     <a href="http://wiki.apache.org/solr/Solrj#EmbeddedSolrServer" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:black">
       http://wiki.apache.org/solr/Solrj#EmbeddedSolrServer
      </span>
     </a>
    </p>
    <p>
     <strong>
      6)  分布式索引
     </strong>
    </p>
    <p>
     <a href="http://wiki.apache.org/solr/CollectionDistribution" rel="nofollow noopener noreferrer" target="_blank">
      http://wiki.apache.org/solr/CollectionDistribution
     </a>
    </p>
    <h4>
     <a name="t42" target="_blank">
     </a>
     <a name="_Toc277337228" target="_blank">
      3.1.2     SOLR
     </a>
     的使用过程说明
    </h4>
    <p>
     <span style="color:black">
      1)
     </span>
     <span style="color:black">
      第一步：搜索引擎规划设计
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      定制好业务模型
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      定制好索引结构
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      定制好搜索策略
     </span>
    </p>
    <p>
     <span style="color:black">
      ü
     </span>
     <span style="color:black">
      配置
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      schemal
     </span>
     <span style="color:black">
      配置文件
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      第二步：搜索引擎配置
     </span>
    </p>
    <p>
     <span style="color:black">
      根据搜索引擎的规划，配置
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      schema.xml
     </span>
     <span style="color:black">
      等配置文件。
     </span>
    </p>
    <p>
     <span style="color:black">
      3)
     </span>
     <span style="color:black">
      第三步：构建索引并定时更新索引
     </span>
    </p>
    <p>
     通过调用索引接口进行索引的构建与更新。
    </p>
    <p>
     <span style="color:black">
      4)
     </span>
     <span style="color:black">
      第三步：搜索
     </span>
    </p>
    <p>
     通过调用搜索接口进行搜索。
    </p>
    <h3>
     <a name="t43" target="_blank">
     </a>
     <a name="_Toc277337229" target="_blank">
      3.2      一个简单的例子
     </a>
    </h3>
    <h4>
     <a name="t44" target="_blank">
     </a>
     <a name="_Toc277337230" target="_blank">
      3.2.1     Solr Schema
     </a>
     设计
    </h4>
    <p>
     见“
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_mmseg4j" rel="noopener noreferrer" target="_blank">
      2.2.1      mmseg4j
     </a>
     ”中的第(5)点。
    </p>
    <h4>
     <a name="t45" target="_blank">
     </a>
     <a name="_Toc277337231" target="_blank">
      3.2.2     构建索引
     </a>
    </h4>
    <p align="left">
     <span style="color:black">
      找到下载的软件包，在\apache-solr-1.4.1\example\exampledocs
     </span>
     目录下创建mmseg4j-solr-demo-doc.xml 文档，内容如下：
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;add&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;1&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;昨日,记者从解放军总参谋部相关部门获悉,截至3月28日,解放军和武警部队累计出动7.2万人次官兵支援地方抗旱救灾。组织民兵预备役人员20.2万人 次支援地方抗旱救灾。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;2&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;下半年房价调整就是挤水分 房价回不到去年水平。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;3&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;
         <em>
          solr
         </em>
         是基于Lucene Java搜索库的企业级全文搜索引擎，目前是apache的一个项目。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;doc&gt;
        </p>
        <p>
         &lt;field name="id"&gt;4&lt;/field&gt;
        </p>
        <p>
         &lt;field name="text"&gt;中国人民银行是中华人民共和国的中央银行。&lt;/field&gt;
        </p>
        <p>
         &lt;/doc&gt;
        </p>
        <p>
         &lt;/add&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     然后在 cmd 切换到“
     <span style="color:red">
      apache-solr-1.4.0\example\exampledocs&gt;
     </span>
     ”,运行 post.jar，命令如下：
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:red">
          java -Durl=http://192.168.10.85:18080/solr/update -Dcommit=yes -jar post.jar mmseg4j-solr-demo-doc.xml
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     注：多核心时为这个地址
     <a href="http://192.168.10.85:18080/solr/core0/update/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/core0/update/
     </a>
    </p>
    <h4>
     <a name="t46" target="_blank">
     </a>
     <a name="_Toc277337232" target="_blank">
      3.2.3     搜索测试
     </a>
    </h4>
    <p>
     查看是否有数据
    </p>
    <p>
     访问：
     <span style="color:red">
      http://192.168.10.85:18080/solr/admin/
     </span>
    </p>
    <p>
     在Query String：中输入“中国”，显示如下图所示：
    </p>
    <p>
     <a href="http://192.168.10.85:18080/solr/core0/select/?q=%E4%B8%AD%E5%9B%BD&amp;version=2.2&amp;start=0&amp;rows=10&amp;indent=on" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/core0/select/?q=中国&amp;version=2.2&amp;start=0&amp;rows=10&amp;indent=on
     </a>
    </p>
    <h3>
     <a name="t47" target="_blank">
     </a>
     <a name="_Toc277337233" target="_blank">
      3.3      搜索引擎的规划设计
     </a>
    </h3>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p align="center">
     <span style="color:black">
      搜索应用架构
     </span>
    </p>
    <h4>
     <a name="t48" target="_blank">
     </a>
     <a name="_Toc277337234" target="_blank">
     </a>
     <a name="minor3.2" target="_blank">
      3.3.1    定义业务模型
     </a>
    </h4>
    <p align="left">
     <span style="color:black">
      定义搜索的业务模型即对搜索的需求进行分析，确定搜索的业务对象和结构：
     </span>
    </p>
    <p align="left">
     <span style="color:black">
      1
     </span>
     <span style="color:black">
      ）确定要搜索的业务对象：
     </span>
    </p>
    <p align="left">
     <span style="color:black">
      分析确定有哪些内容需要进行搜索，这些内容的来源，更新的频次等信息，按如下结构进行定义：
     </span>
    </p>
    <p align="left">
     <strong>
      <span style="color:black">
       示例：
      </span>
     </strong>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" width="571">
     <tbody>
      <tr>
       <td style="background:#D6E3BC">
        <p>
         <strong>
          <span style="color:black">
           编码
          </span>
         </strong>
        </p>
       </td>
       <td style="background:#D6E3BC">
        <p>
         <strong>
          <span style="color:black">
           业务对象
          </span>
         </strong>
        </p>
       </td>
       <td style="background:#D6E3BC">
        <p>
         <strong>
          <span style="color:black">
           优先级
          </span>
         </strong>
        </p>
       </td>
       <td style="background:#D6E3BC">
        <p>
         <strong>
          <span style="color:black">
           内容来源
          </span>
         </strong>
        </p>
       </td>
       <td style="background:#D6E3BC">
        <p>
         <strong>
          <span style="color:black">
           更新频次
          </span>
         </strong>
        </p>
       </td>
       <td style="background:#D6E3BC">
        <p>
         <strong>
          <span style="color:black">
           说明
          </span>
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T001
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          天气信息
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          168
         </span>
         <span style="color:black">
          平台
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
         <span style="color:black">
          小时
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          输入城市名则结果为该城市的天气，没有输入地名则结果为您所属地市的天气信息
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T002
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          餐饮酒店
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          互联网
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每日
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索词可以是地名、特色菜、餐馆名称，搜索结果是与您的搜索词相关的餐馆信息
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T003
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          航班信息
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          互联网
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每日
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索词可以是起始和到港的城市名，搜索结果是与您的搜索词相关的航班信息
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T004
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          火车时刻
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          互联网
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每日
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索词可以是列车车次、起始站点、途经站点，搜索结果是与您的搜索词相关的火车车次详细信息
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T005
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          电影影讯
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          12580
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每日
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索词可以是最新放映的影片名或影院名称，搜索结果是与您的搜索词相关的各影院近期放映的电影影讯。
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T006
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          股票行情
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          168
         </span>
         <span style="color:black">
          平台
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
         <span style="color:black">
          分钟
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索词可以是股票代码、股票名称，搜索结果是与您的搜索词相关的即时的股票行情信息。
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T007
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          移动业务
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          手工导入
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每月
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索词可以移动是业务名称，搜索结果是与您的搜索词相关的业务简介和开通方法信息。
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T008
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          通讯录
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          手工导入
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每月
         </span>
        </p>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T009
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          短信
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          手工导入
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每日
         </span>
        </p>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T010
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          彩信
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          手工导入
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每日
         </span>
        </p>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          T011
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          WAP
         </span>
         <span style="color:black">
          网址
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          1
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          手工导入
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          每日
         </span>
        </p>
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p align="left">
     <span style="color:black">
      2
     </span>
     <span style="color:black">
      ）梳理业务对象的结构
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      针对以上业务对象进行分析梳理出业务对象的结构。以下是通讯录和
     </span>
     <span style="color:black">
      wap
     </span>
     <span style="color:black">
      网址的结构定义
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     a)
     <span style="color:black">
      通讯录
     </span>
    </p>
    <table border="0" cellpadding="0" cellspacing="0" width="567">
     <tbody>
      <tr>
       <td style="background:#D9D9D9">
        <p>
         <strong>
          <span style="color:black">
           字段
          </span>
         </strong>
        </p>
       </td>
       <td style="background:#D9D9D9">
        <p>
         <strong>
          <span style="color:black">
           说明
          </span>
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         ID
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          内容标识
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         userName
        </p>
       </td>
       <td>
        <p>
         姓名
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         userMail
        </p>
       </td>
       <td>
        <p>
         用户邮箱
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         mobile
        </p>
       </td>
       <td>
        <p>
         用户手机号
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         department
        </p>
       </td>
       <td>
        <p>
         部门
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         sex
        </p>
       </td>
       <td>
        <p>
         性别
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         birthday
        </p>
       </td>
       <td>
        <p>
         生日
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         msn
        </p>
       </td>
       <td>
        <p>
         MSN
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         qq
        </p>
       </td>
       <td>
        <p>
         QQ号
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     b)wap
     <span style="color:black">
      网站
     </span>
    </p>
    <table border="0" cellpadding="0" cellspacing="0" width="567">
     <tbody>
      <tr>
       <td style="background:#D9D9D9">
        <p>
         <span style="color:black">
          字段
         </span>
        </p>
       </td>
       <td style="background:#D9D9D9">
        <p>
         <span style="color:black">
          说明
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          ID
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          内容标识
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          标题
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          内容标题
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          URL
         </span>
         <span style="color:black">
          地址
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          Wap
         </span>
         <span style="color:black">
          网站的URL
         </span>
         地址
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          标签
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索的依据，多个关键字以"
         </span>
         ，"分隔。
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          摘要
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          Wap
         </span>
         <span style="color:black">
          网站的简要说明
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:black">
          网站分类
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:black">
          搜索、娱乐、SNS
         </span>
         、新闻
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h4>
     <a name="t49" target="_blank">
     </a>
     <a name="_Toc277337235" target="_blank">
     </a>
     <a name="minor3.4" target="_blank">
      3.3.2    定制索引服务
     </a>
    </h4>
    <p>
     <span style="color:black">
      定制索引服务是对索引源进行结构化的索引，换句话说，索引后的结果是结构化的、有意义的信息。定制索引主要涉及如下几个方面：
     </span>
    </p>
    <p>
     1)    分类：多核解决方案
    </p>
    <p>
     2)    需要检索的字段
    </p>
    <p>
     3)    需要存储的字段
    </p>
    <p>
     4)    过滤条件
    </p>
    <p>
     5)    排序
    </p>
    <p>
     <span style="color:black">
      6)
     </span>
     索引的更新频次
    </p>
    <h4>
     <a name="t50" target="_blank">
     </a>
     <a name="_Toc277337236" target="_blank">
     </a>
     <a name="minor3.5" target="_blank">
      3.3.3    定制搜索服务
     </a>
    </h4>
    <p>
     <span style="color:black">
      定制搜索是指确定搜索支持的规则
     </span>
    </p>
    <p>
     1)    过滤条件
    </p>
    <p>
     2)    排序规则
    </p>
    <h3>
     <a name="t51" target="_blank">
     </a>
     <a name="_Toc277337237" target="_blank">
      3.4      搜索引擎配置
     </a>
    </h3>
    <h4>
     <a name="t52" target="_blank">
     </a>
     <a name="_Toc277337238" target="_blank">
      3.4.1     Solr Schema
     </a>
     设计(如何定制索引的结构?)
    </h4>
    <p>
     索引的结构配置主要是对schema.xml中的Fieldtype、Fields、copyField、dynamicField的配置,schema.xml的配置文件说明请参考“
     <a href="http://blog.csdn.net/chenjia3615349/article/details/8112289#_%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E" rel="noopener noreferrer" target="_blank">
      <span style="color:windowtext">
       2.4
      </span>
      <span style="color:windowtext">
       配置文件说明
      </span>
     </a>
     ”的“1schema.xml”，下面我们以搜索通讯录为例进行说明。
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#D9D9D9">
     <tbody>
      <tr>
       <td>
        <p>
         <strong>
          <span style="color:black">
           public String userName = null;//
          </span>
          <span style="color:black">
           姓名
          </span>
         </strong>
        </p>
        <p>
         <strong>
          <span style="color:black">
           public String userMail = null;//
          </span>
          <span style="color:black">
           用户邮箱
          </span>
         </strong>
        </p>
        <p>
         <strong>
          <span style="color:black">
           public String mobile = null;//
          </span>
          <span style="color:black">
           用户手机号
          </span>
         </strong>
        </p>
        <p>
         <strong>
          <span style="color:black">
           public String department = null;//
          </span>
         </strong>
        </p>
        <p>
         <strong>
          <span style="color:black">
           public String sex = null;//
          </span>
          <span style="color:black">
           性别
          </span>
         </strong>
        </p>
        <p>
         <strong>
          <span style="color:black">
           public String birthday = null;//
          </span>
          <span style="color:black">
           生日
          </span>
         </strong>
        </p>
        <p>
         <strong>
          <span style="color:black">
           public String msn = null;
          </span>
         </strong>
        </p>
        <p>
         <strong>
          <span style="color:black">
           public String qq = null;
          </span>
         </strong>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h5>
     <a name="t53" target="_blank">
     </a>
     1.  定义好需要的类型（Fieldtype）
    </h5>
    <p>
     <span style="color:black">
      定义好需要的类型（
     </span>
     Fieldtype
     <span style="color:black">
      ），同时为类型（
     </span>
     Fieldtype
     <span style="color:black">
      ）配置合适的分词器，下面以
     </span>
     <span style="color:black">
      mmsg4j
     </span>
     <span style="color:black">
      中文分词为示例
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:black">
      ：
     </span>
     <strong>
     </strong>
    </p>
    <p>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;types&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         &lt;!--mmseg4j field types--&gt;
        </p>
        <p>
         &lt;fieldType name="textComplex" class="solr.TextField" positionIncrementGap="100" &gt;
        </p>
        <p>
         &lt;analyzer&gt;
        </p>
        <p>
         &lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory" mode="complex" dicPath="
         <strong>
          /opt/solr-tomcat/solr/dic
         </strong>
         "/&gt;
        </p>
        <p>
         &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
        </p>
        <p>
         &lt;/analyzer&gt;
        </p>
        <p>
         &lt;/fieldType&gt;
        </p>
        <p>
        </p>
        <p>
         &lt;fieldType name="textMaxWord" class="solr.TextField" positionIncrementGap="100" &gt;
        </p>
        <p>
         &lt;analyzer&gt;
        </p>
        <p>
         &lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory" mode="max-word" dicPath="/opt/solr-tomcat/solr/dic"/&gt;
        </p>
        <p>
         &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
        </p>
        <p>
         &lt;/analyzer&gt;
        </p>
        <p>
         &lt;/fieldType&gt;
        </p>
        <p>
        </p>
        <p>
         &lt;fieldType name="textSimple" class="solr.TextField" positionIncrementGap="100" &gt;
        </p>
        <p>
         &lt;analyzer&gt;
        </p>
        <p>
         &lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory" mode="simple" dicPath="/opt/solr-tomcat/solr/dic"/&gt;
        </p>
        <p>
         &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
        </p>
        <p>
         &lt;/analyzer&gt;
        </p>
        <p>
         &lt;/fieldType&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         &lt;/types&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:red">
      注：
     </span>
     <span style="color:red">
      dicPath="
     </span>
     <span style="background:yellow">
      /opt/solr-tomcat/solr/dic
     </span>
     <span style="color:red">
      "
     </span>
     <span style="color:red">
      是你的词库路径。
     </span>
    </p>
    <p>
     <strong>
      <span style="color:black">
      </span>
     </strong>
    </p>
    <h5>
     <a name="t54" target="_blank">
     </a>
     2.  定义好需要的字段（Fielde）
    </h5>
    <p>
     <span style="color:red">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;fields&gt;
        </p>
        <p>
         ……
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           username
          </span>
         </strong>
         <span style="color:black">
          " type="string" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           usermail
          </span>
         </strong>
         <span style="color:black">
          " type="text" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           mobile
          </span>
         </strong>
         <span style="color:black">
          " type="text" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           department
          </span>
         </strong>
         <span style="color:black">
          " type="text" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           sex
          </span>
         </strong>
         <span style="color:black">
          " type="text" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           birthday
          </span>
         </strong>
         <span style="color:black">
          " type="text" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           msn
          </span>
         </strong>
         <span style="color:black">
          " type="text" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="
         </span>
         <strong>
          <span style="color:black">
           qq
          </span>
         </strong>
         <span style="color:black">
          " type="text" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         ……
        </p>
        <p>
         &lt;/fields&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;copyField source="simple" dest="text"/&gt;
        </p>
        <p>
         &lt;copyField source="complex" dest="text"/&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p>
     <strong>
      <span style="color:black">
       示例：
      </span>
      <span style="color:black">
       博客应用程序的声明字段
      </span>
     </strong>
    </p>
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
     <tbody>
      <tr>
       <td style="background:#EEEEEE">
        <p>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="keywords" type="text_ws" indexed="true" stored="true"
         </span>
        </p>
        <p>
         <span style="color:black">
         </span>
         multiValued="true" omitNorms="true"/&gt;
        </p>
        <p>
         <span style="color:black">
          &lt;field name="creationDate" type="date" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="rating" type="sint" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="published" type="boolean" indexed="true" stored="true"/&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;field name="content" type="text" indexed="true" stored="true" /&gt;
         </span>
        </p>
        <p>
         <span style="color:black">
          &lt;!-- catchall field,
         </span>
        </p>
        <p>
         <span style="color:black">
          containing many of the other searchable text fields
         </span>
        </p>
        <p>
         <span style="color:black">
         </span>
         (implemented via copyField further on in this schema) --&gt;
        </p>
        <p>
         <span style="color:black">
          &lt;field name="all" type="text" indexed="true" stored="true" multiValued="true"/&gt;
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <h3>
     <a name="t55" target="_blank">
     </a>
     <a name="_Toc277337239" target="_blank">
      3.5      如何进行索引操作？
     </a>
    </h3>
    <h4>
     <a name="t56" target="_blank">
     </a>
     <a name="_Toc277337240" target="_blank">
      3.5.1     基本索引操作
     </a>
    </h4>
    <p>
     <span style="color:black">
      在 Solr
     </span>
     中，通过向部署在 servlet 容器中的 Solr Web 应用程序发送 HTTP 请求来启动索引。您可以向 Solr 索引 servlet 传递四个不同的索引请求：
    </p>
    <p>
     <span style="color:#333333">
      1)
     </span>
     <strong>
      <span style="color:#333333">
       add/update
      </span>
     </strong>
     <span style="color:#333333">
      允许您向
     </span>
     <span style="color:#333333">
      Solr
     </span>
     <span style="color:#333333">
      添加文档或更新文档。直到提交后才能搜索到这些添加和更新。
     </span>
    </p>
    <p>
     <span style="color:#333333">
      2)
     </span>
     <strong>
      <span style="color:#333333">
       commit
      </span>
     </strong>
     <span style="color:#333333">
      告诉
     </span>
     <span style="color:#333333">
      Solr
     </span>
     <span style="color:#333333">
      ，应该使上次提交以来所做的所有更改都可以搜索到。
     </span>
    </p>
    <p>
     <span style="color:#333333">
      3)
     </span>
     <strong>
      <span style="color:#333333">
       optimize
      </span>
     </strong>
     <span style="color:#333333">
      重构
     </span>
     <span style="color:#333333">
      Lucene
     </span>
     <span style="color:#333333">
      的文件以改进搜索性能。索引完成后执行一下优化通常比较好。如果更新比较频繁，则应该在使用率较低的时候安排优化。一个索引无需优化也可以正常地运行。优化是一个耗时较多的过程。
     </span>
    </p>
    <p>
     <span style="color:#333333">
      4)
     </span>
     <strong>
      <span style="color:#333333">
       delete
      </span>
     </strong>
     <span style="color:#333333">
      可以通过
     </span>
     <span style="color:#333333">
      id
     </span>
     <span style="color:#333333">
      或查询来指定。按
     </span>
     <span style="color:#333333">
      id
     </span>
     <span style="color:#333333">
      删除将删除具有指定
     </span>
     <span style="color:#333333">
      id
     </span>
     <span style="color:#333333">
      的文档；按查询删除将删除查询返回的所有文档。
     </span>
    </p>
    <h5>
     <a name="t57" target="_blank">
     </a>
     <a name="listing1" target="_blank">
      1.  新增、更新索引
     </a>
    </h5>
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
     <tbody>
      <tr>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="background:#D9D9D9">
     &lt;add&gt;
     <br/>
     &lt;doc&gt;
     <br/>
     &lt;fieldname="url"&gt;http://localhost/myBlog/solr-rocks.html&lt;/field&gt;
     <br/>
     &lt;field name="title"&gt;Solr Search is Simply Great&lt;/field&gt;
     <br/>
     &lt;field name="keywords"&gt;solr,lucene,enterprise,search&lt;/field&gt;
     <br/>
     &lt;fieldname="creationDate"&gt;2007-01-06T05:04:00.000Z&lt;/field&gt;
     <br/>
     &lt;field name="rating"&gt;10&lt;/field&gt;
     <br/>
     &lt;field name="content"&gt;Solr is a really great open source searchserver. It scales,
     <br/>
     it's easy to configure and the Solr community is reallysupportive.&lt;/field&gt;
     <br/>
     &lt;field name="published"&gt;on&lt;/field&gt;
     <br/>
     &lt;/doc&gt;
     <br/>
     &lt;/add&gt;
    </p>
    <p>
     <code>
      <span style="color:#333333">
       &lt;doc&gt;
      </span>
     </code>
     <span style="color:#333333">
      中的每个 field
     </span>
     条目告诉 Solr 应该将哪些
     <code>
      <span style="color:#333333">
       Field
      </span>
     </code>
     <span style="color:#333333">
      添加到所创建文档的 Lucene
     </span>
     索引中。可以向
     <code>
      <span style="color:#333333">
       add
      </span>
     </code>
     <span style="color:#333333">
      命令添加多个
     </span>
     <code>
      <span style="color:#333333">
       &lt;doc&gt;
      </span>
     </code>
     <span style="color:#333333">
      。
     </span>
     <code>
      <span style="color:#333333">
       通过
      </span>
     </code>
     <code>
      <span style="color:#333333">
       HTTP POST
      </span>
     </code>
     <span style="color:#333333">
      将命令发往：http://localhost:8080/solr/update
     </span>
     。如果一切进展顺利，则会随
     <code>
      <span style="color:#333333">
       &lt;result status="0"/&gt;
      </span>
     </code>
     <span style="color:#333333">
      返回一个 XML
     </span>
     文档，添加文档成功，如果是相同的 URL 自动更新文档（示例应用程序中的 URL 是 Solr 识别文档以前被添加过所使用的惟一 id）。
    </p>
    <p>
     <span style="color:red">
      注:schema.xml
     </span>
     里有一个uniqueKey,
     <span style="color:red">
      的配置，这里将
     </span>
     <span style="color:red">
      url
     </span>
     <span style="color:red">
      字段作为索引文档的唯一标识符，非常重要。
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:blue">
      &lt;
     </span>
     <span style="color:maroon">
      uniqueKey
     </span>
     <span style="color:blue">
      &gt;
     </span>
     <span style="color:black">
      url
     </span>
     <span style="color:blue">
      &lt;/
     </span>
     <span style="color:maroon">
      uniqueKey
     </span>
     <span style="color:blue">
      &gt;
     </span>
    </p>
    <p>
     <span style="color:#333333">
     </span>
    </p>
    <h5>
     <a name="t58" target="_blank">
     </a>
     2.  删除索引
    </h5>
    <h6>
     <a name="t59" target="_blank">
     </a>
     1）       删除制定ID的索引
    </h6>
    <p style="background:#D9D9D9">
     &lt;delete&gt;&lt;id&gt;05138022&lt;/id&gt;&lt;/delete&gt;
    </p>
    <h6>
     <a name="t60" target="_blank">
     </a>
     2）       删除查询到的索引数据
    </h6>
    <p style="background:#D9D9D9">
     &lt;delete&gt;&lt;query&gt;id:IW-02&lt;/query&gt;&lt;/delete&gt;
    </p>
    <h6>
     <a name="t61" target="_blank">
     </a>
     3）       删除所有索引数据
    </h6>
    <p style="background:#D9D9D9">
     &lt;delete&gt;&lt;query&gt;*:*&lt;/query&gt;&lt;/delete&gt;
    </p>
    <p>
     <code>
      <span style="color:#333333">
      </span>
     </code>
    </p>
    <p>
     <code>
      <span style="color:#333333">
       通过
      </span>
     </code>
     <code>
      <span style="color:#333333">
       HTTP POST
      </span>
     </code>
     <span style="color:#333333">
      将命令发往：
     </span>
     <span style="color:#333333">
      http://localhost:8080/solr/update
     </span>
    </p>
    <p>
     注：以上xml文件通过
     <code>
      <span style="color:#333333">
       HTTP POST
      </span>
     </code>
     <span style="color:#333333">
      将命令发往在
     </span>
     <a href="http://192.168.10.85:18080/solr/update/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/update/
     </a>
     ，多核心时为这个地址
     <a href="http://192.168.10.85:18080/solr/core0/update/" rel="nofollow noopener noreferrer" target="_blank">
      http://192.168.10.85:18080/solr/core0/update/
     </a>
    </p>
    <p>
    </p>
    <h4>
     <a name="t62" target="_blank">
     </a>
     <a name="_Toc277337241" target="_blank">
      3.5.2     批量索引操作
     </a>
    </h4>
    <p>
     <span style="color:#333333">
      对原有系统已有的数据或需要索引的数据量较大的情况，需要进行批量的索引操作
     </span>
    </p>
    <h5>
     <a name="t63" target="_blank">
     </a>
     1.  通过CVS文件的方式提交
    </h5>
    <p>
     <span style="color:black">
      直接采用通过
     </span>
     <span style="color:black">
      http
     </span>
     <span style="color:black">
      方式调用
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的接口方式，效率较差，采用
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      本身对
     </span>
     <span style="color:black">
      csv
     </span>
     <span style="color:black">
      的支持（
     </span>
     <a name="OLE_LINK1" target="_blank">
     </a>
     <a href="http://wiki.apache.org/solr/UpdateCSV" rel="nofollow noopener noreferrer" target="_blank">
      http://wiki.apache.org/solr/UpdateCSV
     </a>
     <span style="color:black">
      ），将数据导出为
     </span>
     <span style="color:black">
      csv
     </span>
     <span style="color:black">
      格式，然后调用
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      csv
     </span>
     <span style="color:black">
      接口
     </span>
     <a href="http://localhost:8080/solr/update/csv" rel="nofollow noopener noreferrer" target="_blank">
      http://localhost:8080/solr/update/csv
     </a>
    </p>
    <p>
     具体操作步聚：
    </p>
    <p>
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      修改
     </span>
     <span style="color:black">
      conf/solrconfig.xml
     </span>
    </p>
    <p>
     <span style="color:black">
      1
     </span>
     <span style="color:black">
      ）新增
     </span>
     <span style="color:black">
      csv
     </span>
     <span style="color:black">
      处理配置项
     </span>
    </p>
    <div style="background:#F3F5F7">
     <pre style="background:#F3F5F7"><span style="color:black">  </span>&lt;!-- CSV update handler, loaded on demand --&gt;</pre>
     <pre style="background:#F3F5F7"><span style="color:black">  </span>&lt;requestHandler name="/update/csv" class="solr.CSVRequestHandler" startup="lazy"&gt;</pre>
     <pre style="background:#F3F5F7"><span style="color:black">  </span>&lt;/requestHandler&gt;</pre>
    </div>
    <p>
     2）修改
     <span style="color:black">
      enableRemoteStreaming=true
     </span>
    </p>
    <div style="background:#F3F5F7">
     <pre style="background:#F3F5F7"><span style="color:black">&lt;requestParsers enableRemoteStreaming="true" multipartUploadLimitInKB="2048" /&gt;</span></pre>
    </div>
    <p>
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      下面的命令能直接读取输入文件提交到
     </span>
     <span style="color:black">
      Solr
     </span>
    </p>
    <div style="background:#F3F5F7">
     <pre style="background:#F3F5F7"><span style="color:black">curl http://localhost:8983/solr/update/csv?stream.file=exampledocs/books.csv&amp;stream.contentType=text/plain;charset=utf-8</span></pre>
     <pre style="background:#F3F5F7"><span style="color:black">#NOTE: The full path, or a path relative to the CWD of the running solr server must be used.</span></pre>
    </div>
    <h5>
     <a name="t64" target="_blank">
     </a>
     2.  数据库数据导入生成索引（
     <a href="http://wiki.apache.org/solr/DataImportHandler" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:#1111CC">
       DataImportHandler
      </span>
     </a>
     <span style="color:black">
      DIH
     </span>
     ）
    </h5>
    <p>
     写程序可以将数据读出100条，如果你的内存够大，可以是1000条甚至更多，然后放入Collection中，批量提交至solr。或者读取数据写入xml文件中，再将该文件提交到solr等等。但是，我们还可以通过配置文件直接读取数据库建立索引。
    </p>
    <h6>
     <a name="t65" target="_blank">
     </a>
     1）       全量更新索引
    </h6>
    <p>
     一、提供对应数据库的jdbc驱动。
    </p>
    <p>
     将jdbc驱动放在TOMCAT_HOME\webapps\solr\WEB-INF\lib目录下。
    </p>
    <p>
     二、在C:\solr-tomcat\solr\conf目录下新建db文件夹，在db文件夹中新建db-data-config.xml内容如下：
    </p>
    <p style="background:#D9D9D9">
     &lt;dataConfig&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;dataSourcetype="JdbcDataSource"driver="oracle.jdbc.driver.OracleDriver"url="jdbc:oracle:thin:@192.168.1.1:1521:数据库名" user="用户名" password="密码"/&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;document name="messages"&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;entity name="message"transformer="ClobTransformer" query="select * fromtb_message"&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;fieldcolumn="ID" name="id" /&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;fieldcolumn="TITLE" name="title"/&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;fieldcolumn="CONTENT" clob="true" name="content" /&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;fieldcolumn="SENDTIME" name="sendtime" /&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;/entity&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;/document&gt;
    </p>
    <p style="background:#D9D9D9">
     &lt;/dataConfig&gt;
    </p>
    <p>
     三、修改C:\solr-tomcat\solr\conf目录下的solrconfig.xml文件。在相应的位置添加如下代码：
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;!-- DataImportHandler --&gt;
        </p>
        <p>
         &lt;requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler"&gt;
        </p>
        <p>
         &lt;lst name="defaults"&gt;
        </p>
        <p>
         &lt;str name="config"&gt;C:\solr-tomcat\solr\conf\db\db-data-config.xml&lt;/str&gt;
        </p>
        <p>
         &lt;/lst&gt;
        </p>
        <p>
         &lt;/requestHandler&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     注：C:\solr-tomcat\solr\conf\db\db-data-config.xml是db-data-config.xml的存放路径，你要根据实际情况而定。
    </p>
    <p>
     document：一个文档也就是lucene的document这个没什么解释的。
    </p>
    <p>
     entity：主要针对的是一个数据库表。
    </p>
    <p>
     filed：属性column是数据库的字段，name是filed的名字，即schema中的field name。
    </p>
    <p>
     更多请参考官方wiki：http://wiki.apache.org/solr/DataImportHandler
    </p>
    <p>
    </p>
    <p>
     四、启动TOMCAT，输入地址进行导入，导入分为多种模式：我用的是完全导入模式。
    </p>
    <p>
     <a href="http://localhost:8080/solr/dataimport?command=full-import" rel="nofollow noopener noreferrer" target="_blank">
      http://localhost:8080/solr/dataimport?command=full-import
     </a>
    </p>
    <p>
     结果：
    </p>
    <p>
     00C:\solr-tomcat\solr\conf\db\db-data-config.xmlfull-importidle1202009-09-0521:28:08Indexing completed. Added/Updated: 2 documents. Deleted 0documents.2009-09-05 21:28:092009-09-05 21:28:090:0:0.579This response formatis experimental. It is likely to change in the future.
    </p>
    <p>
    </p>
    <p>
     五、再去查询你刚才提交的数据。
    </p>
    <p>
    </p>
    <p>
     上面的例子只不过是很简单的一个部分。针对solr的 MultiCore，通过配置db-data-config.xml也可以实现，还有多表，或者多表关联等等操作只要在db-data-config.xml配置清楚都可以进行数据的导入。
    </p>
    <p>
     在solr1.4中还有更多的扩展功能，这些功能为重建索引提供能很方便的操作。而且datasource不单单指的是database，可以是xml文件，还可以是来自网络上的等等。
    </p>
    <p>
    </p>
    <h6>
     <a name="t66" target="_blank">
     </a>
     2）       增量更新索引
    </h6>
    <p>
     1、首先要确认表中有last_modified字段。
    </p>
    <p>
     2、修改C:\solr-tomcat\solr\conf\db\db-data-config.xml文件，内容如下：
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         &lt;dataConfig&gt;
        </p>
        <p>
         &lt;dataSource type="JdbcDataSource" driver="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@192.168.1.1:1521:数据库名" user="用户名" password="密码"/&gt;
        </p>
        <p>
         &lt;document name="messages"&gt;
        </p>
        <p>
         &lt;entity name="message" pk="ID"
        </p>
        <p>
         transformer="ClobTransformer"
        </p>
        <p>
         query="select * from tb_message"
        </p>
        <p>
         deltaQuery="select id from tb_message where to_char(
         <span style="color:red">
          last_modified
         </span>
         ,'YYYY-MM-DD HH24:MI:SS') &gt; '${dataimporter.last_index_time}'"&gt;
        </p>
        <p>
         &lt;field column="ID" name="id" /&gt;
        </p>
        <p>
         &lt;field column="TITLE" name="title" /&gt;
        </p>
        <p>
         &lt;field column="CONTENT" clob="true" name="content" /&gt;
        </p>
        <p>
         &lt;field column="SENDTIME" name="sendtime" /&gt;
        </p>
        <p>
         &lt;/entity&gt;
        </p>
        <p>
         &lt;/document&gt;
        </p>
        <p>
         &lt;/dataConfig&gt;
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     3、重启tomcat。添加一条记录。
    </p>
    <p>
     访问：
     <a href="http://localhost:8089/solr/dataimport?command=delta-import" rel="nofollow noopener noreferrer" target="_blank">
      http://localhost:8089/solr/dataimport?command=delta-import
     </a>
    </p>
    <p>
     再查询一下，是不是可以查询到刚才添加的记录了。
    </p>
    <p>
    </p>
    <h3>
     <a name="t67" target="_blank">
     </a>
     <a name="_Toc277337242" target="_blank">
     </a>
     <a name="_搜索语法" target="_blank">
     </a>
     3.6      如何进行搜索
    </h3>
    <h4>
     <a name="t68" target="_blank">
     </a>
     <a name="_Toc277337243" target="_blank">
      3.6.1     搜索语法
     </a>
    </h4>
    <h5>
     <a name="t69" target="_blank">
     </a>
     1.  solr 查询参数说明
    </h5>
    <h6>
     <a name="t70" target="_blank">
     </a>
     1）       常用
    </h6>
    <p>
     <span style="color:black">
      1)
     </span>
     <span style="color:black">
      q -
     </span>
     <span style="color:black">
      查询字符串，必须的。
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      fl -
     </span>
     <span style="color:black">
      指定返回那些字段内容，用逗号或空格分隔多个。
     </span>
    </p>
    <p>
     <span style="color:black">
      3)
     </span>
     <span style="color:black">
      start -
     </span>
     <span style="color:black">
      返回第一条记录在完整找到结果中的偏移位置，
     </span>
     <span style="color:black">
      0
     </span>
     <span style="color:black">
      开始，一般分页用。
     </span>
    </p>
    <p>
     <span style="color:black">
      4)
     </span>
     <span style="color:black">
      rows -
     </span>
     <span style="color:black">
      指定返回结果最多有多少条记录，配合
     </span>
     <span style="color:black">
      start
     </span>
     <span style="color:black">
      来实现分页。
     </span>
    </p>
    <p>
     <span style="color:black">
      5)
     </span>
     <span style="color:black">
      sort -
     </span>
     <span style="color:black">
      排序，格式：
     </span>
     <span style="color:black">
      sort=&lt;field name&gt;+&lt;desc|asc&gt;[,&lt;fieldname&gt;+&lt;desc|asc&gt;]…
     </span>
     <span style="color:black">
      。示例：（
     </span>
     <span style="color:black">
      inStock desc, price asc
     </span>
     <span style="color:black">
      ）表示先
     </span>
     <span style="color:black">
      “inStock”
     </span>
     <span style="color:black">
      降序
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:black">
      再
     </span>
     <span style="color:black">
      “price”
     </span>
     <span style="color:black">
      升序，默认是相关性降序。
     </span>
    </p>
    <p>
     <strong>
      <span style="color:black">
       注：排序字段
      </span>
      <span style="color:black">
       只能针对数值型如：
      </span>
      <span style="color:black">
       int,dobuble
      </span>
      <span style="color:black">
       等
      </span>
      <span style="color:black">
       …
      </span>
     </strong>
    </p>
    <p>
     <span style="color:black">
      6)
     </span>
     <span style="color:black">
      wt - (writer type)
     </span>
     <span style="color:black">
      指定输出格式，可以有
     </span>
     <span style="color:black">
      xml, json, php, phps,
     </span>
     <span style="color:black">
      后面
     </span>
     <span style="color:black">
      solr 1.3
     </span>
     <span style="color:black">
      增加的，要用通知我们，因为默认没有打开。
     </span>
    </p>
    <p>
     <span style="color:black">
      7)
     </span>
     <span style="color:black">
      fq -
     </span>
     <span style="color:black">
      （
     </span>
     <span style="color:black">
      filter query
     </span>
     <span style="color:black">
      ）过虑查询，作用：在
     </span>
     <span style="color:black">
      q
     </span>
     <span style="color:black">
      查询符合结果中同时是
     </span>
     <span style="color:black">
      fq
     </span>
     <span style="color:black">
      查询符合的，例如：
     </span>
     <span style="color:black">
      q=mm&amp;fq=date_time:[20081001 TO 20091031]
     </span>
     <span style="color:black">
      ，找关键字
     </span>
     <span style="color:black">
      mm
     </span>
     <span style="color:black">
      ，并且
     </span>
     <span style="color:black">
      date_time
     </span>
     <span style="color:black">
      是
     </span>
     <span style="color:black">
      20081001
     </span>
     <span style="color:black">
      到
     </span>
     <span style="color:black">
      20091031
     </span>
     <span style="color:black">
      之间的。官方文档：
     </span>
     <a href="http://wiki.apache.org/solr/CommonQueryParameters#head-6522ef80f22d0e50d2f12ec487758577506d6002" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:#0044AA">
       http://wiki.apache.org/solr/CommonQueryParameters#head-6522ef80f22d0e50d2f12ec487758577506d6002
      </span>
     </a>
    </p>
    <h6>
     <a name="t71" target="_blank">
     </a>
     2）       不常用
    </h6>
    <p>
     <span style="color:black">
      1)
     </span>
     <span style="color:black">
      q.op -
     </span>
     <span style="color:black">
      覆盖
     </span>
     <span style="color:black">
      schema.xml
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      defaultOperator
     </span>
     <span style="color:black">
      （有空格时用
     </span>
     <span style="color:black">
      "AND"
     </span>
     <span style="color:black">
      还是用
     </span>
     <span style="color:black">
      "OR"
     </span>
     <span style="color:black">
      操作逻辑），一般默认指定
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      df -
     </span>
     <span style="color:black">
      默认的查询字段，一般默认指定
     </span>
    </p>
    <p>
     <span style="color:black">
      3)
     </span>
     <span style="color:black">
      qt -
     </span>
     <span style="color:black">
      （
     </span>
     <span style="color:black">
      query type
     </span>
     <span style="color:black">
      ）指定那个类型来处理查询请求，一般不用指定，默认是
     </span>
     <span style="color:black">
      standard
     </span>
     <span style="color:black">
      。
     </span>
    </p>
    <h6>
     <a name="t72" target="_blank">
     </a>
     3）       其它
    </h6>
    <p>
     <span style="color:black">
      1)
     </span>
     <span style="color:black">
      indent -
     </span>
     <span style="color:black">
      返回的结果是否缩进，默认关闭，用
     </span>
     <span style="color:black">
      indent=true|on
     </span>
     <span style="color:black">
      开启，一般调试
     </span>
     <span style="color:black">
      json,php,phps,ruby
     </span>
     <span style="color:black">
      输出才有必要用这个参数。
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      version -
     </span>
     <span style="color:black">
      查询语法的版本，建议不使用它，由服务器指定默认值。
     </span>
    </p>
    <p>
    </p>
    <h5>
     <a name="t73" target="_blank">
     </a>
     2.  Solr的检索运算符
    </h5>
    <p>
     1. “:” 指定字段查指定值，如返回所有值*:*
    </p>
    <p>
     2. “?” 表示单个任意字符的通配
    </p>
    <p>
     3. “*” 表示多个任意字符的通配（不能在检索的项开始使用*或者?符号）
    </p>
    <p>
     4. “~” 表示模糊检索，如检索拼写类似于”roam”的项这样写：roam~将找到形如foam和roams的单词；roam~0.8，检索返回相似度在0.8以上的记录。
    </p>
    <p>
     5. 邻近检索，如检索相隔10个单词的”apache”和”jakarta”，”jakarta apache”~10
    </p>
    <p>
     6. “^” 控制相关度检索，如检索jakarta apache，同时希望去让”jakarta”的相关度更加好，那么在其后加上”^”符号和增量值，即jakarta^4 apache
    </p>
    <p>
     7. 布尔操作符AND、||
    </p>
    <p>
     8. 布尔操作符OR、&amp;&amp;
    </p>
    <p>
     9. 布尔操作符NOT、!、- （排除操作符不能单独与项使用构成查询）
    </p>
    <p>
     10.“+” 存在操作符，要求符号”+”后的项必须在文档相应的域中存在
    </p>
    <p>
     11. ( ) 用于构成子查询
    </p>
    <p>
     12. [] 包含范围检索，如检索某时间段记录，包含头尾，date:[200707 TO 200710]
    </p>
    <p>
     13. {} 不包含范围检索，如检索某时间段记录，不包含头尾
    </p>
    <p>
     date:{200707 TO 200710}
    </p>
    <p>
     <strong>
      注：范围检索字段只适用于:String,int,dobule,date不能用于long型的字段
     </strong>
    </p>
    <p>
     14. \ 转义操作符，特殊字符包括+ - &amp;&amp; || ! ( ) { } [ ] ^ ” ~ * ? :\
    </p>
    <h5>
     <a name="t74" target="_blank">
     </a>
     3.  solr查询的一些常用语法
    </h5>
    <p>
     1、首先假设我的数据里fields有:name, tel, address 预设的搜寻是name这个字段, 如果要搜寻的数据刚好就是 name 这个字段,就不需要指定搜寻字段名称。
    </p>
    <p>
    </p>
    <p>
     2、查询规则:
    </p>
    <p>
     如欲查询特定字段(非预设字段),请在查询词前加上该字段名称加“:” (不包含”号) 符号,
    </p>
    <p>
     例如: address:北京市海淀区上地软件园 tel:88xxxxx1
    </p>
    <p>
     1&gt;. q代表query input
    </p>
    <p>
    </p>
    <p>
     2&gt;. version代表solr版本(建议不要变动此变量)
    </p>
    <p>
    </p>
    <p>
     3&gt;. start代表显示结果从哪一笔结果资料开始,预设为0代表第一笔, rows是说要显示几笔数据,预设为10笔
    </p>
    <p>
     (因为有时查询结果可能有几百笔,但不需要显示所有结果,所以预设是从第一笔开始到第十笔)
    </p>
    <p>
     所以若要显示第10到30笔就改为:
    </p>
    <p>
     http://localhost:8080/solr/select/?indent=on&amp;version=2.2&amp;q=address:北京市海淀区上地软件园+tel:88xxxxx1&amp;version=2.2&amp;start=10&amp;rows=20&amp;indent=on
    </p>
    <p>
     (indent代表输出的xml要不要缩行.预设为开启 on)
    </p>
    <p>
    </p>
    <p>
     3、另外,要限定输出结果的内容可用 “fl=” 加上你要的字段名称,如以下这个范例:
    </p>
    <p>
     http://localhost:8080/solr/select/?indent=on&amp;version=2.2&amp;q=text:北京+ OR+text:亿度&amp;start=0&amp;rows=10&amp;fl=name,address,tel
    </p>
    <p>
     在fl=之后加上了name,adress,tel
    </p>
    <p>
     所以结果会如下:
    </p>
    <p>
     &lt;result name=”response” numFound=”1340″ start=”0″&gt;
    </p>
    <p>
     &lt;doc&gt;
    </p>
    <p>
     &lt;str name=”name”&gt;北京亿度&lt;/str&gt;
    </p>
    <p>
     &lt;str name=”address”&gt;北京市海淀区上地软件园&lt;/str&gt;
    </p>
    <p>
     &lt;strname=”tel”&gt;88xxxxxx1&lt;/str&gt;
    </p>
    <p>
     &lt;/doc&gt;
    </p>
    <p>
     &lt;doc&gt;
    </p>
    <p>
     &lt;str name=”name”&gt;北京亿度&lt;/str&gt;
    </p>
    <p>
     &lt;str name=”address”/&gt;
    </p>
    <p>
     &lt;strname=”tel”&gt;88xxxxxx1&lt;/str&gt;
    </p>
    <p>
     &lt;/doc&gt;
    </p>
    <p>
     &lt;/result&gt;
    </p>
    <p>
    </p>
    <p>
     4、查询 name 或 address:直接输入查询词, 如: 亿度
    </p>
    <p>
     送出的内容即为:
    </p>
    <p>
     name:亿度 AND address:海淀
    </p>
    <p>
    </p>
    <p>
     5、若要搜寻联集结果,请在词与词间空格或加上大写 “OR”(不包含”号).
    </p>
    <p>
     例如: text:海淀 OR text:亿度
    </p>
    <p>
     text:海淀 OR 亿度
    </p>
    <p>
     或
    </p>
    <p>
     海淀 亿度
    </p>
    <p>
     或
    </p>
    <p>
     name:亿度 OR tel:88xxxxxx1
    </p>
    <p>
     或
    </p>
    <p>
     name:亿度 tel:88xxxxxx1
    </p>
    <p>
     6、若要搜寻交集结果,请在词与词间加上大写 “AND” 或 “+” (不包含”号).
    </p>
    <p>
     例如: text:海淀 AND 亿度
    </p>
    <p>
     或
    </p>
    <p>
     +text:海淀 +text:亿度
    </p>
    <p>
     或
    </p>
    <p>
     name:亿度 AND tel:88xxxxxx1
    </p>
    <p>
     或
    </p>
    <p>
     name: ( +亿度 +海淀)
    </p>
    <p>
    </p>
    <p>
     7、排除查询
    </p>
    <p>
     在要排除的词前加上 “-” (不包含”号) 号
    </p>
    <p>
     例如: 海淀 -亿度
    </p>
    <p>
     搜寻结果不会有包含亿度的词的结果在内
    </p>
    <p>
    </p>
    <p>
     8、Group 搜寻
    </p>
    <p>
     使用 “()” 来包含一个group
    </p>
    <p>
     如希望搜寻在店名字段内同时有 “台北”(不包含”号) 及 “火车站”(不包含”号)
    </p>
    <p>
    </p>
    <p>
     9、增加权重: 如要搜寻 “北京 加油站”(不包含”号) 但因为回传太多笔资料内有 “中华”(不包含”号) 或 “加油站”(不包含”号) 的结果,
    </p>
    <p>
     所以想要把有包含 “加油站”(不包含”号)的数据往前排,可使用 “^”(不包含”号)符号在后面加上愈增加的权重数,
    </p>
    <p>
     像是 “2″,则可以这样做:
    </p>
    <p>
     北京 加油站^2
    </p>
    <p>
     会同时搜寻含有北京或加油站的结果,并把加油站这个词加权所以搜寻时会先判断加油站这一个词在搜寻结果中的比重,甚至假设一笔数据内加油站出现过两次以上的就更加会有优先权。
    </p>
    <p>
     查询时在查询词后加上 “^” (不包含”号) 再加上权重分数
    </p>
    <p>
     例如: 亿度 AND “北京”^2
    </p>
    <p>
     或
    </p>
    <p>
     亿度^2 OR 北京
    </p>
    <p>
    </p>
    <p>
     10、Wildcard 搜寻使用 “*” 符号;如果输入 “中国*银” (不包含”号), 结果会有中国信托商业银行, 中国输出入银行图书阅览室, 中国商银证券
    </p>
    <p>
     中国及银之间可夹任何长短字词.
    </p>
    <h4>
     <a name="t75" target="_blank">
     </a>
     <a name="_Toc277337244" target="_blank">
      3.6.2     排序
     </a>
    </h4>
    <h4>
     <a name="t76" target="_blank">
     </a>
     <a name="_Toc277337245" target="_blank">
      3.6.3     字段增加权重
     </a>
    </h4>
    <p>
     在很多时候，我们可能会需要增加某一个字段的权重，以合理的显示搜索结果。
    </p>
    <p>
     例如：有一个schma，有三个字段：chapterId,title, content.
    </p>
    <p>
     我们希望某一个关键字如果在title中匹配了，就要优先显示，而在content中匹配了，就放在搜索结果的后面。当然，如果两者同时匹配当然没什么好说的了。看看solr中如何做到吧。
    </p>
    <p>
     title:(test1 test2)^4 content:(test1 test2)
    </p>
    <p>
     给title字段增加权重，优先匹配
    </p>
    <p>
     关于^后面的数字4，经过我测试，最佳值应该是有n个字段就写成n+1，当然希望大家能更好的去测试！
    </p>
    <p>
    </p>
    <h4>
     <a name="t77" target="_blank">
     </a>
     <a name="_Toc277337246" target="_blank">
      3.6.4     Solr
     </a>
     分词器、过滤器、分析器
    </h4>
    <p>
     关于lucene的分析器，分词器，过滤器，请看：
     <a href="http://lianj-lee.javaeye.com/blog/501247" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:windowtext">
       http://lianj-lee.javaeye.com/blog/501247
      </span>
     </a>
    </p>
    <p>
     对一个document进行索引时，其中的每个field中的数据都会经历分析（根据上面的一个博客可以知道，分析就是组合分词和过滤），最终将一句话分成单个的单词，去掉句子当中的空白符号，大写转换小写，复数转单数，去掉多余的词，进行同义词代换等等。
    </p>
    <p>
     如：This is a blog!this, is, a 会被去除，最后最剩下blog。当然!这个符号也会被去除的。
    </p>
    <p>
     这个过程是在索引和查询过程中都会进行的，而且通常两者进行的处理的都是一样的，这样做是为了保证建立的索引和查询的正确匹配。
    </p>
    <p>
     分析器（Analyzer）
    </p>
    <p>
     分析器是包括两个部分：分词器和过滤器。分词器功能将句子分成单个的词元token，过滤器就是对词元进行过滤。
    </p>
    <p>
     solr自带了一些分词器，如果你需要使用自定义的分词器，那么就需要修改schema.xml文件。
    </p>
    <p>
     schema.xml 文件允许两种方式修改文本被分析的方式，通常只有field类型为 solr.TextField 的field的内容允许定制分析器。
    </p>
    <p>
    </p>
    <p>
     方法一：使用任何org.apache.lucene.analysis.Analyzer的子类进行设定。
    </p>
    <p>
     &lt;fieldType name="text"class="solr.TextField"&gt;
    </p>
    <p>
     &lt;analyzerclass="org.wltea.analyzer.lucene.IKAnalyzer"/&gt;
    </p>
    <p>
     &lt;/fieldType&gt;
    </p>
    <p>
     方法二：指定一个TokenizerFactory，后面跟一系列的TokenFilterFactories（它们将按照所列的顺序发生作用），Factories被用来创建分词器和分词过滤器，它们用于对分词器和分词过滤器的准备配置，这样做的目的是为了避免the overhead of creation via reflection。
    </p>
    <p>
    </p>
    <p>
     &lt;analyzertype="index"&gt;
    </p>
    <p>
     &lt;tokenizerclass="org.wltea.analyzer.solr.IKTokenizerFactory"isMaxWordLength="false"/&gt;
    </p>
    <p>
     ……
    </p>
    <p>
    </p>
    <p>
     &lt;/analyzer&gt;
    </p>
    <p>
     &lt;analyzer type="query"&gt;
    </p>
    <p>
     &lt;tokenizerclass="org.wltea.analyzer.solr.IKTokenizerFactory"isMaxWordLength="true"/&gt;
    </p>
    <p>
     ……
    </p>
    <p>
     &lt;/analyzer&gt;
    </p>
    <p>
    </p>
    <p>
     需要说明的一点是，Any Analyzer,TokenizerFactory, or TokenFilterFactory 应该用带包名的全类名进行指定，请确保它们位于Solr的classpath 路径下。对于 org.apache.solr.analysis.* 包下的类，仅仅通过solr.*就可以进行指定。
    </p>
    <p>
    </p>
    <p>
     如果你需要使用自己的分词器和过滤器，你就需要自己写一个 factory ，它必须是 BaseTokenizerFactory(分词器) 或BaseTokenFilterFactory（过滤器）的子类。就像下面一样。
    </p>
    <p>
    </p>
    <p>
     public class MyFilterFactory extendsBaseTokenFilterFactory {
     <!-- -->
    </p>
    <p>
     public TokenStream create(TokenStream input) {
     <!-- -->
    </p>
    <p>
     return new MyFilter(input);
    </p>
    <p>
     }
    </p>
    <p>
     }
    </p>
    <p>
    </p>
    <p>
     对于IK3.1.5版本已经完全支持了solr的分词，这样就不用自己来编写了， 而对于中文的切词的话，ik对solr的支持已经很完美了。
    </p>
    <p>
    </p>
    <p>
     Solr提供了哪些TokenizerFactories？
    </p>
    <p>
    </p>
    <p>
     1. solr.LetterTokenizerFactory
    </p>
    <p>
     创建org.apache.lucene.analysis.LetterTokenizer.
    </p>
    <p>
     分词举例：
    </p>
    <p>
     "I can't" ==&gt; "I", "can", "t"，字母切词。
    </p>
    <p>
    </p>
    <p>
     2. solr.WhitespaceTokenizerFactory
    </p>
    <p>
     创建org.apache.lucene.analysis.WhitespaceTokenizer，主要是切除所有空白字符。
    </p>
    <p>
    </p>
    <p>
     3. solr.LowerCaseTokenizerFactory
    </p>
    <p>
     创建org.apache.lucene.analysis.LowerCaseTokenizer
    </p>
    <p>
     分词举例：
    </p>
    <p>
     "I can't" ==&gt; "i", "can", "t"，主要是大写转小写。
    </p>
    <p>
    </p>
    <p>
     4. solr.StandardTokenizerFactory
    </p>
    <p>
     创建org.apache.lucene.analysis.standard.StandardTokenizer
    </p>
    <p>
     分词举例：  "I.B.M. cat's can't" ==&gt;
    </p>
    <p>
     ACRONYM: "I.B.M.",APOSTROPHE:"cat's", APOSTROPHE:"can't"
    </p>
    <p>
     说明：该分词器，会自动地给每个分词添加type，以便接下来的对type敏感的过滤器进行处理，目前仅仅只有StandardFilter对Token 的类型是敏感的。
    </p>
    <p>
    </p>
    <p>
     5. solr.HTMLStripWhitespaceTokenizerFactory
    </p>
    <p>
     从结果中除去HTML标签，将结果交给WhitespaceTokenizer处理。
    </p>
    <p>
     例子：
    </p>
    <p>
     my &lt;ahref="www.foo.bar"&gt;link&lt;/a&gt;
    </p>
    <p>
     my link
    </p>
    <p>
     &lt;?xml?&gt;&lt;br&gt;hello&lt;!--comment--&gt;
    </p>
    <p>
     hello
    </p>
    <p>
     hello&lt;script&gt;&lt;--f('&lt;--internal--&gt;&lt;/script&gt;'); --&gt;&lt;/script&gt;
    </p>
    <p>
     hello
    </p>
    <p>
     if a&lt;b then print a;
    </p>
    <p>
     if a&lt;b then print a;
    </p>
    <p>
     hello &lt;td height=22 nowrapalign="left"&gt;
    </p>
    <p>
     hello
    </p>
    <p>
     a&amp;lt;b &amp;#65 Alpha&amp;Omega&amp;Omega;
    </p>
    <p>
     a&lt;b A Alpha&amp;Omega Ω
    </p>
    <p>
    </p>
    <p>
     6. solr.HTMLStripStandardTokenizerFactory
    </p>
    <p>
     从结果中出去HTML标签，将结果交给StandardTokenizer处理。
    </p>
    <p>
    </p>
    <p>
     7. solr.PatternTokenizerFactory
    </p>
    <p>
     说明：按照规则表达式样式对分本进行分词。
    </p>
    <p>
     例子：处理对象为，mice; kittens; dogs，他们由分号加上一个或多个的空格分隔。
    </p>
    <p>
     &lt;fieldTypename="semicolonDelimited" class="solr.TextField"&gt;
    </p>
    <p>
     &lt;analyzer&gt;
    </p>
    <p>
     &lt;tokenizer class="solr.PatternTokenizerFactory"pattern="; *" /&gt;
    </p>
    <p>
     &lt;/analyzer&gt;
    </p>
    <p>
     &lt;/fieldType&gt;
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     Solr有哪些TokenFilterFactories？
    </p>
    <p>
    </p>
    <p>
     1. solr.StandardFilterFactory
    </p>
    <p>
     创建：org.apache.lucene.analysis.standard.StandardFilter.
    </p>
    <p>
     移除首字母简写中的点和Token后面的’s。仅仅作用于有类的Token，他们是由StandardTokenizer产生的。
    </p>
    <p>
     例：StandardTokenizer+ StandardFilter
    </p>
    <p>
     "I.B.M. cat's can't" ==&gt;"IBM", "cat", "can't"
    </p>
    <p>
     2. solr.LowerCaseFilterFactory
    </p>
    <p>
     创建：org.apache.lucene.analysis.LowerCaseFilter.
    </p>
    <p>
     3. solr.TrimFilterFactory【solr1.2】
    </p>
    <p>
     创建：org.apache.solr.analysis.TrimFilter
    </p>
    <p>
     去掉Token两端的空白符
    </p>
    <p>
     例：
    </p>
    <p>
     " Kittens!   ", "Duck" ==&gt;"Kittens!", "Duck".
    </p>
    <p>
     4. solr.StopFilterFactory
    </p>
    <p>
     创建：org.apache.lucene.analysis.StopFilter
    </p>
    <p>
     去掉如下的通用词，多为虚词。
    </p>
    <p>
     "a", "an", "and", "are","as", "at", "be", "but","by",
    </p>
    <p>
     "for", "if", "in", "into","is", "it",
    </p>
    <p>
     "no", "not", "of", "on","or", "s", "such",
    </p>
    <p>
     "t", "that", "the", "their","then", "there", "these",
    </p>
    <p>
     "they", "this", "to", "was","will", "with"
    </p>
    <p>
     自定义的通用词表的使用可以通过schema.xml文件中的"words"属性来指定，如下。
    </p>
    <p>
     &lt;fieldtype name="teststop"class="solr.TextField"&gt;
    </p>
    <p>
     &lt;analyzer&gt;
    </p>
    <p>
     &lt;tokenizer class="solr.LowerCaseTokenizerFactory"/&gt;
    </p>
    <p>
     &lt;filter class="solr.StopFilterFactory"words="stopwords.txt" ignoreCase="true"/&gt;
    </p>
    <p>
     &lt;/analyzer&gt;
    </p>
    <p>
     &lt;/fieldtype&gt;
    </p>
    <p>
    </p>
    <p>
     5.  solr.KeepWordFilterFactory【solr1.3】
    </p>
    <p>
     创建：org.apache.solr.analysis.KeepWordFilter
    </p>
    <p>
     作用与solr.StopFilterFactory相反，保留词的列表也可以通过”word”属性进行指定。
    </p>
    <p>
     &lt;fieldtype name="testkeep"class="solr.TextField"&gt;
    </p>
    <p>
     &lt;analyzer&gt;
    </p>
    <p>
     &lt;filter class="solr.KeepWordFilterFactory"words="keepwords.txt" ignoreCase="true"/&gt;
    </p>
    <p>
     &lt;/analyzer&gt;
    </p>
    <p>
     &lt;/fieldtype&gt;
    </p>
    <p>
    </p>
    <p>
     6. solr.LengthFilterFactory
    </p>
    <p>
     创建：solr.LengthFilter
    </p>
    <p>
     过滤掉长度在某个范围之外的词。范围设定方式见下面。
    </p>
    <p>
     &lt;fieldtype name="lengthfilt"class="solr.TextField"&gt;
    </p>
    <p>
     &lt;analyzer&gt;
    </p>
    <p>
     &lt;tokenizer class="solr.WhitespaceTokenizerFactory"/&gt;
    </p>
    <p>
     &lt;filter class="solr.LengthFilterFactory" min="2"max="5" /&gt;
    </p>
    <p>
     &lt;/analyzer&gt;
    </p>
    <p>
     &lt;/fieldtype&gt;
    </p>
    <p>
    </p>
    <p>
     7. solr.PorterStemFilterFactory
    </p>
    <p>
     创建：org.apache.lucene.analysis.PorterStemFilter
    </p>
    <p>
     采用Porter Stemming Algorithm算法去掉单词的后缀，例如将复数形式变成单数形式，第三人称动词变成第一人称，现在分词变成一般现在时的动词。
    </p>
    <p>
     8. solr.EnglishPorterFilterFactory
    </p>
    <p>
     创建：solr.EnglishPorterFilter
    </p>
    <p>
     关于句子主干的处理，其中的"protected"指定不允许修改的词的文件。
    </p>
    <p>
     9. solr.SnowballPorterFilterFactory
    </p>
    <p>
     关于不同语言的词干处理
    </p>
    <p>
     10.solr.WordDelimiterFilterFactory
    </p>
    <p>
     关于分隔符的处理。
    </p>
    <p>
     11.solr.SynonymFilterFactory
    </p>
    <p>
     关于同义词的处理。
    </p>
    <p>
     12.solr.RemoveDuplicatesTokenFilterFactory
    </p>
    <p>
     避免重复处理。
    </p>
    <p>
    </p>
    <h4>
     <a name="t78" target="_blank">
     </a>
     <a name="_Toc277337247" target="_blank">
      3.6.5     Solr
     </a>
     高亮使用
    </h4>
    <p>
     1、SolrQuery类，此类有方法setHighlight(true)，当设置为true时，表示开启了高亮。
    </p>
    <p>
     2、SolrQuery类，有方法：
    </p>
    <p>
     // 以下给两个字段开启了高亮，分别是name，description，
    </p>
    <p>
     query.addHighlightField("name");
    </p>
    <p>
     query.addHighlightField("description");
    </p>
    <p>
     // 以下两个方法主要是在高亮的关键字前后加上html代码
    </p>
    <p>
     query.setHighlightSimplePre("&lt;fontcolor=\"red\"&gt;");
    </p>
    <p>
     query.setHighlightSimplePost("&lt;/font&gt;");
    </p>
    <p>
     3、下面是获取高亮的内容：
    </p>
    <p>
     Map&lt;String,Map&lt;String,List&lt;String&gt;&gt;&gt; map =response.getHighlighting();
    </p>
    <p>
     Map的Key为document的Id，即你在schema.xml中设置的Id，Value为该Id对应的document的值，Value也为一个Map，该Map的Key为fieldName，Value为List&lt;String&gt;，这个List里面的内容就是该文档的高亮字段。
    </p>
    <p>
     所以当做逻辑处理的时候，只要按照这个层次，依次把东西给取出来即可，如果取出来的东西为空，则用QueryResponse中的 SolrDocument的getFieldValue(filedName)的值。
    </p>
    <p>
     对了，请注意在solrConfig.xml中开启高亮组件，这个可以看看官方wiki或者看solrconfig.xml中注释！
    </p>
    <h2>
     <a name="t79" target="_blank">
     </a>
     <a name="_Toc277337248" target="_blank">
     </a>
     <a name="_SolrJ的用法" target="_blank">
     </a>
     4      SolrJ的用法
    </h2>
    <p>
     <span style="color:black">
      是访问
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      客户端框架，它提供添加索引、更新索引及搜索查询
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      的接口。以
     </span>
     <span style="color:black">
      JAR
     </span>
     <span style="color:black">
      包的方式提供（
     </span>
     <span style="color:black">
      JavaDoc
     </span>
     <span style="color:black">
      文档：
     </span>
     <a href="http://lucene.apache.org/solr/api/solrj/index.html" rel="nofollow noopener noreferrer" target="_blank">
      http://lucene.apache.org/solr/api/solrj/index.html
     </a>
     ）
    </p>
    <h3>
     <a name="t80" target="_blank">
     </a>
     <a name="_Toc277337249" target="_blank">
      4.1      搜索接口的调用实例
     </a>
    </h3>
    <div style="background:#FAFAFA">
     <p style="background:#FAFAFA">
      <strong>
       <span style="color:#7F0055">
        public
       </span>
      </strong>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        class
       </span>
      </strong>
      <span style="color:black">
       SolrJSearch {
       <!-- -->
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        private
       </span>
      </strong>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        static
       </span>
      </strong>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        final
       </span>
      </strong>
      <span style="color:black">
       String SOLR_URL =
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <span style="color:#008200">
       //"http://10.0.8.10:8081/solr/spacearticle/";
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <span style="color:blue">
       "http://localhost:8080/solr/"
      </span>
      <span style="color:black">
       ;
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        private
       </span>
      </strong>
      <span style="color:black">
       CommonsHttpSolrServer solrServer =
      </span>
      <strong>
       <span style="color:#7F0055">
        null
       </span>
      </strong>
      <span style="color:black">
       ;
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        public
       </span>
      </strong>
      <span style="color:black">
       SolrJSearch(){
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        try
       </span>
      </strong>
      <span style="color:black">
       {
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       solrServer =
      </span>
      <strong>
       <span style="color:#7F0055">
        new
       </span>
      </strong>
      <span style="color:black">
       CommonsHttpSolrServer(SOLR_URL);
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       solrServer.setMaxTotalConnections(100);
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       solrServer.setSoTimeout(10000);// socket read timeout
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       solrServer.setConnectionTimeout(5000);
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:#2B91AF">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
      <strong>
       <span style="color:#7F0055">
        catch
       </span>
      </strong>
      <span style="color:black">
       (MalformedURLException e) {
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       e.printStackTrace();
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        public
       </span>
      </strong>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        void
       </span>
      </strong>
      <span style="color:black">
       search(){
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       SolrQuery query =
      </span>
      <strong>
       <span style="color:#7F0055">
        new
       </span>
      </strong>
      <span style="color:black">
       SolrQuery();
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       query.setQuery(
      </span>
      <span style="color:blue">
       "A_Title:
      </span>
      <span style="color:blue">
       新浪科技
      </span>
      <span style="color:blue">
       "
      </span>
      <span style="color:black">
       );
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:#008200">
      </span>
      //
      <span style="color:#008200">
       新加条件（
      </span>
      <span style="color:#008200">
       and
      </span>
      <span style="color:#008200">
       的作用对
      </span>
      <span style="color:#008200">
       TERM_VAL
      </span>
      <span style="color:#008200">
       的
      </span>
      <span style="color:#008200">
       6
      </span>
      <span style="color:#008200">
       到
      </span>
      <span style="color:#008200">
       8
      </span>
      <span style="color:#008200">
       折的限制）
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       query.addFilterQuery("TERM_VAL:{6TO 8
      </span>
      <span style="color:black">
       折
      </span>
      <span style="color:black">
       }");
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:#008200">
       //
      </span>
      <span style="color:#008200">
       排序用的
      </span>
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:#008200">
       //query.addSortField( "price", SolrQuery.ORDER.asc );
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        try
       </span>
      </strong>
      <span style="color:black">
       {
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       QueryResponse rsp = solrServer.query( query );
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       SolrDocumentList docs = rsp.getResults();
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       System.out.println(
      </span>
      <span style="color:blue">
       "
      </span>
      <span style="color:blue">
       文档个数：
      </span>
      <span style="color:blue">
       "
      </span>
      <span style="color:black">
       + docs.getNumFound());
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       System.out.println(
      </span>
      <span style="color:blue">
       "
      </span>
      <span style="color:blue">
       查询时间：
      </span>
      <span style="color:blue">
       "
      </span>
      <span style="color:black">
       + rsp.getQTime());
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        for
       </span>
      </strong>
      <span style="color:black">
       (SolrDocument doc : docs) {
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       String title = (String) doc.getFieldValue(
      </span>
      <span style="color:blue">
       "A_Title"
      </span>
      <span style="color:black">
       );
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       Integer id = (Integer) doc.getFieldValue(
      </span>
      <span style="color:blue">
       "A_ID"
      </span>
      <span style="color:black">
       );
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       System.out.println(id);
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       System.out.println(title);
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
      <strong>
       <span style="color:#7F0055">
        catch
       </span>
      </strong>
      <span style="color:black">
       (SolrServerException e) {
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       e.printStackTrace();
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        public
       </span>
      </strong>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        static
       </span>
      </strong>
      <span style="color:black">
      </span>
      <strong>
       <span style="color:#7F0055">
        void
       </span>
      </strong>
      <span style="color:black">
       main(String[] args) {
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       SolrJSearch sj =
      </span>
      <strong>
       <span style="color:#7F0055">
        new
       </span>
      </strong>
      <span style="color:black">
       SolrJSearch();
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       sj.search();
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
     </p>
     <p style="background:#FAFAFA">
      <span style="color:black">
       }
      </span>
     </p>
    </div>
    <h3>
     <a name="t81" target="_blank">
     </a>
     <a name="_Toc277337250" target="_blank">
      4.2      Solrj
     </a>
     的使用说明
    </h3>
    <p>
     <span style="color:black">
      solrj
     </span>
     <span style="color:black">
      被设计成一个可扩展的框架，用以向
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      服务器提交请求，并接收回应。我们已经将最通用的一些命令封装在了
     </span>
     <span style="color:black">
      solrServer
     </span>
     <span style="color:black">
      类中了。
     </span>
    </p>
    <h4>
     <a name="t82" target="_blank">
     </a>
     <a name="_Toc277337251" target="_blank">
      4.2.1     Adding Data to Solr
     </a>
    </h4>
    <p>
     <span style="color:black">
      首先需要获得一个
     </span>
     <span style="color:black">
      server
     </span>
     <span style="color:black">
      的实例，
     </span>
     <span style="color:black">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          SolrServer server = getSolrServer();
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <pre><span style="color:black">如果，你使用的是一个远程的solrServer</span>的话呢，你或许会这样来实现getSolrServer()这个方法：       </pre>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <strong>
          <span style="color:#7F0055">
           public
          </span>
         </strong>
         <span style="color:black">
          SolrServer getSolrServer(){
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
         </span>
         <span style="color:#008200">
          //the instance can be reused
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          3.
         </span>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           return
          </span>
         </strong>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          CommonsHttpSolrServer();
         </span>
        </p>
        <p>
         <span style="color:black">
          4.
         </span>
         <span style="color:black">
          }
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      如果，你使用的是一个本地的
     </span>
     <span style="color:black">
      solrServer
     </span>
     <span style="color:black">
      的话，你或许会这样来实现
     </span>
     <span style="color:black">
      getSolrServer()
     </span>
     <span style="color:black">
      方法：
     </span>
     <span style="color:black">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <strong>
          <span style="color:#7F0055">
           public
          </span>
         </strong>
         <span style="color:black">
          SolrServer getSolrServer(){
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
         </span>
         <span style="color:#008200">
          //the instance can be reused
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          3.
         </span>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           return
          </span>
         </strong>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          EmbeddedSolrServer();
         </span>
        </p>
        <p>
         <span style="color:black">
          4.
         </span>
         <span style="color:black">
          }
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <pre><span style="color:black"> </span></pre>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      如果，你在添加数据之前，想清空现有的索引，那么你可以这么做：
     </span>
    </p>
    <p>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      server.deleteByQuery(
     </span>
     <span style="color:blue">
      "*:*"
     </span>
     <span style="color:black">
      );
     </span>
     <span style="color:#008200">
      // delete everything!
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      构造一个
     </span>
     <span style="color:black">
      document
     </span>
    </p>
    <p>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      SolrInputDocument doc1 =
     </span>
     <strong>
      <span style="color:#7F0055">
       new
      </span>
     </strong>
     <span style="color:black">
      SolrInputDocument();
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      doc1.addField(
     </span>
     <span style="color:blue">
      "id"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:blue">
      "id1"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:#C00000">
      1
     </span>
     <span style="color:black">
      .0f );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      3.
     </span>
     <span style="color:black">
      doc1.addField(
     </span>
     <span style="color:blue">
      "name"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:blue">
      "doc1"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:#C00000">
      1
     </span>
     <span style="color:black">
      .0f );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      4.
     </span>
     <span style="color:black">
      doc1.addField(
     </span>
     <span style="color:blue">
      "price"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:#C00000">
      10
     </span>
     <span style="color:black">
      );
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      构造另外一个文档，每个文档都能够被独自地提交给
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      ，但是，批量提交是更高效的。每一个对
     </span>
     <span style="color:black">
      SolrServer
     </span>
     <span style="color:black">
      的请求都是
     </span>
     <span style="color:black">
      http
     </span>
     <span style="color:black">
      请求，当然对于
     </span>
     <span style="color:black">
      EmbeddedSolrServer
     </span>
     <span style="color:black">
      来说，是不一样的。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      SolrInputDocument doc2 =
     </span>
     <strong>
      <span style="color:#7F0055">
       new
      </span>
     </strong>
     <span style="color:black">
      SolrInputDocument();
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      doc2.addField(
     </span>
     <span style="color:blue">
      "id"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:blue">
      "id2"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:#C00000">
      1
     </span>
     <span style="color:black">
      .0f );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      3.
     </span>
     <span style="color:black">
      doc2.addField(
     </span>
     <span style="color:blue">
      "name"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:blue">
      "doc2"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:#C00000">
      1
     </span>
     <span style="color:black">
      .0f );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      4.
     </span>
     <span style="color:black">
      doc2.addField(
     </span>
     <span style="color:blue">
      "price"
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:#C00000">
      20
     </span>
     <span style="color:black">
      );
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      构造一个文档的集合
     </span>
    </p>
    <p>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      Collection docs =
     </span>
     <strong>
      <span style="color:#7F0055">
       new
      </span>
     </strong>
     <span style="color:black">
      ArrayList();
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      docs.add( doc1 );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      3.
     </span>
     <span style="color:black">
      docs.add( doc2 );
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      将
     </span>
     <span style="color:black">
      documents
     </span>
     <span style="color:black">
      提交给
     </span>
     <span style="color:black">
      solr
     </span>
    </p>
    <p>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      server.add( docs );
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      提交一个
     </span>
     <span style="color:black">
      commit
     </span>
    </p>
    <p>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      server.commit();
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      在添加完
     </span>
     <span style="color:black">
      documents
     </span>
     <span style="color:black">
      后，立即做一个
     </span>
     <span style="color:black">
      commit
     </span>
     <span style="color:black">
      ，你可以这样来写你的程序：
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      UpdateRequest req =
     </span>
     <strong>
      <span style="color:#7F0055">
       new
      </span>
     </strong>
     <span style="color:black">
      UpdateRequest();
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      req.setAction( UpdateRequest.ACTION.COMMIT,
     </span>
     <strong>
      <span style="color:#7F0055">
       false
      </span>
     </strong>
     <span style="color:black">
      ,
     </span>
     <strong>
      <span style="color:#7F0055">
       false
      </span>
     </strong>
     <span style="color:black">
      );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      3.
     </span>
     <span style="color:black">
      req.add( docs );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      4.
     </span>
     <span style="color:black">
      UpdateResponse rsp = req.process( server );
     </span>
    </p>
    <h4>
     <a name="t83" target="_blank">
     </a>
     <a name="_Toc277337252" target="_blank">
      4.2.2     Directly adding POJOs to Solr
     </a>
    </h4>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      使用
     </span>
     <span style="color:black">
      java
     </span>
     <span style="color:black">
      注释创建
     </span>
     <span style="color:black">
      java bean
     </span>
     <span style="color:black">
      。
     </span>
     <span style="color:black">
      @Field
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      ，可以被用在域上，或者是
     </span>
     <span style="color:black">
      setter
     </span>
     <span style="color:black">
      方法上。如果一个域的名称跟
     </span>
     <span style="color:black">
      bean
     </span>
     <span style="color:black">
      的名称是不一样的，那么在
     </span>
     <span style="color:black">
      java
     </span>
     <span style="color:black">
      注释中填写别名，具体的，可以参照下面的域
     </span>
     <span style="color:black">
      categories
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <strong>
          <span style="color:#7F0055">
           import
          </span>
         </strong>
         <span style="color:black">
          org.apache.solr.client.solrj.beans.Field;
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           public
          </span>
         </strong>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           class
          </span>
         </strong>
         <span style="color:black">
          Item {
         </span>
        </p>
        <p>
         <span style="color:black">
          3.
         </span>
         <span style="color:black">
         </span>
         <span style="color:#646464">
          @Field
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          4.
         </span>
         <span style="color:black">
          String id;
         </span>
        </p>
        <p>
         <span style="color:black">
          5.
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          6.
         </span>
         <span style="color:black">
         </span>
         <span style="color:#646464">
          @Field
         </span>
         <span style="color:black">
          (
         </span>
         <span style="color:blue">
          "cat"
         </span>
         <span style="color:black">
          )
         </span>
        </p>
        <p>
         <span style="color:black">
          7.
         </span>
         <span style="color:black">
          String[] categories;
         </span>
        </p>
        <p>
         <span style="color:black">
          8.
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          9.
         </span>
         <span style="color:black">
         </span>
         <span style="color:#646464">
          @Field
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          10.
         </span>
         <span style="color:black">
          List features;
         </span>
        </p>
        <p>
         <span style="color:black">
          11.
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          12.
         </span>
         <span style="color:black">
          }
         </span>
        </p>
        <p>
         <span style="color:black">
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      java
     </span>
     <span style="color:black">
      注释也可以使用在
     </span>
     <span style="color:black">
      setter
     </span>
     <span style="color:black">
      方法上，如下面的例子：
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:#646464">
          @Field
         </span>
         <span style="color:black">
          (
         </span>
         <span style="color:blue">
          "cat"
         </span>
         <span style="color:black">
          )
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           public
          </span>
         </strong>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           void
          </span>
         </strong>
         <span style="color:black">
          setCategory(String[] c){
         </span>
        </p>
        <p>
         <span style="color:black">
          3.
         </span>
         <span style="color:black">
         </span>
         <strong>
          <span style="color:#7F0055">
           this
          </span>
         </strong>
         <span style="color:black">
          .categories = c;
         </span>
        </p>
        <p>
         <span style="color:black">
          4.
         </span>
         <span style="color:black">
          }
         </span>
        </p>
        <p>
         <span style="color:black">
         </span>
         <span style="color:black">
          这里应该要有一个相对的，
         </span>
         <span style="color:black">
          get
         </span>
         <span style="color:black">
          方法（没有加
         </span>
         <span style="color:black">
          java
         </span>
         <span style="color:black">
          注释的）来读取属性
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      Get an instance of server
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          SolrServer server = getSolrServer();
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      创建
     </span>
     <span style="color:black">
      bean
     </span>
     <span style="color:black">
      实例
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          Item item =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          Item();
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
          item.id =
         </span>
         <span style="color:blue">
          "one"
         </span>
         <span style="color:black">
          ;
         </span>
        </p>
        <p>
         <span style="color:black">
          item.categories =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          String[] {
         </span>
         <span style="color:blue">
          "aaa"
         </span>
         <span style="color:black">
          ,
         </span>
         <span style="color:blue">
          "bbb"
         </span>
         <span style="color:black">
          ,
         </span>
         <span style="color:blue">
          "ccc"
         </span>
         <span style="color:black">
          };
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      添加给
     </span>
     <span style="color:black">
      solr
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          server.addBean(item);
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      将多个
     </span>
     <span style="color:black">
      bean
     </span>
     <span style="color:black">
      提交给
     </span>
     <span style="color:black">
      solr
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          List beans ;
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
         </span>
         <span style="color:#008200">
          //add Item objects to the list
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          3.
         </span>
         <span style="color:black">
          server.addBeans(beans);
         </span>
        </p>
        <p>
         <span style="color:black">
         </span>
         <span style="color:black">
          注意：
         </span>
         <span style="color:black">
          你可以重复使用
         </span>
         <span style="color:black">
          SolrServer
         </span>
         <span style="color:black">
          ，这样可以提高性能。
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a name="t84" target="_blank">
     </a>
     <a name="_Toc277337253" target="_blank">
      4.2.3     Reading Data from Solr
     </a>
    </h4>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      获取
     </span>
     <span style="color:black">
      solrserver
     </span>
     <span style="color:black">
      的实例
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          SolrServer server = getSolrServer();
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      构造
     </span>
     <span style="color:black">
      SolrQuery
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          SolrQuery query =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          SolrQuery();
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
          query.setQuery(
         </span>
         <span style="color:blue">
          "*:*"
         </span>
         <span style="color:black">
          );
         </span>
        </p>
        <p>
         <span style="color:black">
          query.addSortField(
         </span>
         <span style="color:blue">
          "price"
         </span>
         <span style="color:black">
          , SolrQuery.ORDER.asc );
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      向服务器发出查询请求
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
        </p>
        <p>
         <span style="color:black">
          QueryResponse rsp = server.query( query );
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      获取结果。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          SolrDocumentList docs = rsp.getResults();
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      想要以
     </span>
     <span style="color:black">
      javabean
     </span>
     <span style="color:black">
      的方式获取结果，那么这个
     </span>
     <span style="color:black">
      javabean
     </span>
     <span style="color:black">
      必须像之前的例子一样有
     </span>
     <span style="color:black">
      java
     </span>
     <span style="color:black">
      注释。
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          List beans = rsp.getBeans(Item.
         </span>
         <strong>
          <span style="color:#7F0055">
           class
          </span>
         </strong>
         <span style="color:black">
          );
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a name="t85" target="_blank">
     </a>
     <a name="_Toc277337254" target="_blank">
      4.3      创建查询
     </a>
    </h3>
    <p>
     <span style="color:black">
      solrJ
     </span>
     <span style="color:black">
      提供了一组
     </span>
     <span style="color:black">
      API
     </span>
     <span style="color:black">
      ，来帮助我们创建查询，下面是一个
     </span>
     <span style="color:black">
      faceted query
     </span>
     <span style="color:black">
      的例子。
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          SolrServer server = getSolrServer();
         </span>
        </p>
        <p>
         <span style="color:black">
          SolrQuery solrQuery =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          SolrQuery().
         </span>
        </p>
        <p>
         <span style="color:black">
          setQuery(
         </span>
         <span style="color:blue">
          "ipod"
         </span>
         <span style="color:black">
          ).
         </span>
        </p>
        <p>
         <span style="color:black">
          setFacet(
         </span>
         <strong>
          <span style="color:#7F0055">
           true
          </span>
         </strong>
         <span style="color:black">
          ).
         </span>
        </p>
        <p>
         <span style="color:black">
          setFacetMinCount(
         </span>
         <span style="color:#C00000">
          1
         </span>
         <span style="color:black">
          ).
         </span>
        </p>
        <p>
         <span style="color:black">
          setFacetLimit(
         </span>
         <span style="color:#C00000">
          8
         </span>
         <span style="color:black">
          ).
         </span>
        </p>
        <p>
         <span style="color:black">
          addFacetField(
         </span>
         <span style="color:blue">
          "category"
         </span>
         <span style="color:black">
          ).
         </span>
        </p>
        <p>
         <span style="color:black">
          addFacetField(
         </span>
         <span style="color:blue">
          "inStock"
         </span>
         <span style="color:black">
          );
         </span>
        </p>
        <p>
         <span style="color:black">
          QueryResponse rsp = server.query(solrQuery);
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      所有的
     </span>
     <span style="color:black">
      setter/add
     </span>
     <span style="color:black">
      方法都是返回它自己本身的实例，所以就像你所看到的一样，上面的用法是链式的。
     </span>
    </p>
    <h3>
     <a name="t86" target="_blank">
     </a>
     <a name="_Toc277337255" target="_blank">
     </a>
     <a name="listing16" target="_blank">
      <strong>
       4.4     使用 SolrJ
      </strong>
     </a>
     <strong>
      创建索引
     </strong>
    </h3>
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
     <tbody>
      <tr>
       <td style="background:#EEEEEE">
        <p>
         Collection&lt;SolrInputDocument&gt; docs = new HashSet&lt;SolrInputDocument&gt;();
        </p>
        <p>
         for (int i = 0; i &lt; 10; i++) {
         <!-- -->
        </p>
        <p>
         SolrInputDocument doc = new SolrInputDocument();
        </p>
        <p>
         doc.addField("link", "http://non-existent-url.foo/" + i + ".html");
        </p>
        <p>
         doc.addField("source", "Blog #" + i);
        </p>
        <p>
         doc.addField("source-link", "http://non-existent-url.foo/index.html");
        </p>
        <p>
         doc.addField("subject", "Subject: " + i);
        </p>
        <p>
         doc.addField("title", "Title: " + i);
        </p>
        <p>
         doc.addField("content", "This is the " + i + "(th|nd|rd) piece of content.");
        </p>
        <p>
         doc.addField("category", CATEGORIES[rand.nextInt(CATEGORIES.length)]);
        </p>
        <p>
         doc.addField("rating", i);
        </p>
        <p>
         //System.out.println("Doc[" + i + "] is " + doc);
        </p>
        <p>
         docs.add(doc);
        </p>
        <p>
         }
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      以上代码中循环只是创建了
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      SolrInputDocument
     </span>
     <span style="color:black">
      （实际是一个夸张的
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      Map
     </span>
     <span style="color:black">
      ），然后给它添加
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      Field
     </span>
     <span style="color:black">
      。我将它添加到了一个集合中，这样一次就能将所有的文档发送到
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      。借助这个功能可以极大地加索引的创
     </span>
     <span style="color:black">
      ??
     </span>
     <span style="color:black">
      ，并减少通过
     </span>
     <span style="color:black">
      HTTP
     </span>
     <span style="color:black">
      发送请求导致的开销。然后我调用了
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      UpdateResponseresponse = server.add(docs);
     </span>
     <span style="color:black">
      ，它负责序列化文档并将其提交到
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      。
     </span>
     <span style="color:black">
      UpdateResponse
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      返回的值包含处理文档所用的时间的信息。为了让这些文档能够被搜索到，我又发出一个提交命令：
     </span>
     <span style="color:black">
      server.commit();
     </span>
     <span style="color:black">
      。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h3>
     <a name="t87" target="_blank">
     </a>
     <a name="_Toc277337256" target="_blank">
      4.5      Solrj
     </a>
     包的结构说明
    </h3>
    <h4>
     <a name="t88" target="_blank">
     </a>
     <a name="_Toc277337257" target="_blank">
      4.5.1     CommonsHttpSolrServer
     </a>
    </h4>
    <p>
     <span style="color:black">
      CommonsHttpSolrServer
     </span>
     <span style="color:black">
      使用
     </span>
     <span style="color:black">
      HTTPClient
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      服务器进行通信。
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#D9D9D9">
     <tbody>
      <tr>
       <td>
        <p>
         <strong>
          <span style="color:black">
           Java
          </span>
          <span style="color:black">
           代码
          </span>
          <span style="color:black">
          </span>
         </strong>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          String url =
         </span>
         <span style="color:blue">
          "http://localhost:8983/solr"
         </span>
         <span style="color:black">
          ;
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
          SolrServer server =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          CommonsHttpSolrServer( url );
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a name="t89" target="_blank">
     </a>
     <a name="_Toc277337258" target="_blank">
      4.5.2     Setting XMLResponseParser
     </a>
    </h4>
    <p>
     <span style="color:black">
      sorlr J
     </span>
     <span style="color:black">
      目前使用二进制的格式作为默认的格式。对于
     </span>
     <span style="color:black">
      solr1.2
     </span>
     <span style="color:black">
      的用户通过显示的设置才能使用
     </span>
     <span style="color:black">
      XML
     </span>
     <span style="color:black">
      格式。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      Java
     </span>
     <span style="color:black">
      代码
     </span>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      server.setParser(
     </span>
     <strong>
      <span style="color:#7F0055">
       new
      </span>
     </strong>
     <span style="color:black">
      XMLResponseParser());
     </span>
    </p>
    <pre><span style="color:black"> </span></pre>
    <h4>
     <a name="t90" target="_blank">
     </a>
     <a name="_Toc277337259" target="_blank">
      4.5.3     Changing other Connection Settings
     </a>
    </h4>
    <p>
     <span style="color:black">
      CommonsHttpSorlrServer
     </span>
     <span style="color:black">
      允许设置链接属性。
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      String url =
     </span>
     <span style="color:blue">
      "http://localhost:8983/solr"
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      CommonsHttpSolrServer server =
     </span>
     <strong>
      <span style="color:#7F0055">
       new
      </span>
     </strong>
     <span style="color:black">
      CommonsHttpSolrServer( url );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      3.
     </span>
     <span style="color:black">
      server.setSoTimeout(
     </span>
     <span style="color:#C00000">
      1000
     </span>
     <span style="color:black">
      );
     </span>
     <span style="color:#008200">
      // socket read timeout
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      4.
     </span>
     <span style="color:black">
      server.setConnectionTimeout(
     </span>
     <span style="color:#C00000">
      100
     </span>
     <span style="color:black">
      );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      5.
     </span>
     <span style="color:black">
      server.setDefaultMaxConnectionsPerHost(
     </span>
     <span style="color:#C00000">
      100
     </span>
     <span style="color:black">
      );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      6.
     </span>
     <span style="color:black">
      server.setMaxTotalConnections(
     </span>
     <span style="color:#C00000">
      100
     </span>
     <span style="color:black">
      );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      7.
     </span>
     <span style="color:black">
      server.setFollowRedirects(
     </span>
     <strong>
      <span style="color:#7F0055">
       false
      </span>
     </strong>
     <span style="color:black">
      );
     </span>
     <span style="color:#008200">
      // defaults to false
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      8.
     </span>
     <span style="color:black">
     </span>
     <span style="color:#008200">
      // allowCompression defaults to false.
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      9.
     </span>
     <span style="color:black">
     </span>
     <span style="color:#008200">
      // Server side must support gzip or deflate for this to have any effect.
     </span>
     <span style="color:black">
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      10.
     </span>
     <span style="color:black">
      server.setAllowCompression(
     </span>
     <strong>
      <span style="color:#7F0055">
       true
      </span>
     </strong>
     <span style="color:black">
      );
     </span>
    </p>
    <p style="background:#D9D9D9">
     <span style="color:black">
      11.
     </span>
     <span style="color:black">
      server.setMaxRetries(
     </span>
     <span style="color:#C00000">
      1
     </span>
     <span style="color:black">
      );
     </span>
     <span style="color:#008200">
      // defaults to 0.  &gt; 1 not recommended.
     </span>
     <span style="color:black">
     </span>
    </p>
    <h4>
     <a name="t91" target="_blank">
     </a>
     <a name="_Toc277337260" target="_blank">
      4.5.4  EmbeddedSolrServer
     </a>
    </h4>
    <p>
     <span style="color:black">
      EmbeddedSorrServer
     </span>
     <span style="color:black">
      提供和
     </span>
     <span style="color:black">
      CommonsHttpSorlrServer
     </span>
     <span style="color:black">
      相同的接口，它不需要
     </span>
     <span style="color:black">
      http
     </span>
     <span style="color:black">
      连接。
     </span>
    </p>
    <table border="1" cellpadding="0" cellspacing="0" style="background:#F2F2F2" width="576">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          SolrCore core = SolrCore.getSolrCore();
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
          SolrServer server =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          EmbeddedSolrServer( core );
         </span>
        </p>
        <p>
         <span style="color:black">
          3.
         </span>
         <span style="color:black">
          ...
         </span>
        </p>
        <p>
         <span style="color:black">
         </span>
         <span style="color:black">
          如果你想要使用
         </span>
         <span style="color:black">
          Multicore
         </span>
         <span style="color:black">
          特性，那么你可以这样使用：
         </span>
        </p>
        <p>
         <span style="color:black">
          Java
         </span>
         <span style="color:black">
          代码
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          1.
         </span>
         <span style="color:black">
          File home =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          File( getSolrHome() );
         </span>
        </p>
        <p>
         <span style="color:black">
          2.
         </span>
         <span style="color:black">
          File f =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          File( home,
         </span>
         <span style="color:blue">
          "solr.xml"
         </span>
         <span style="color:black">
          );
         </span>
        </p>
        <p>
         <span style="color:black">
          3.
         </span>
         <span style="color:black">
          multicore.load( getSolrHome(), f );
         </span>
        </p>
        <p>
         <span style="color:black">
          4.
         </span>
         <span style="color:black">
         </span>
        </p>
        <p>
         <span style="color:black">
          EmbeddedSolrServer server =
         </span>
         <strong>
          <span style="color:#7F0055">
           new
          </span>
         </strong>
         <span style="color:black">
          EmbeddedSolrServer( multicore,
         </span>
         <span style="color:blue">
          "core name as defined in solr.xml"
         </span>
         <span style="color:black">
          );
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <pre><span style="color:black">    </span><span style="color:black">注：如果你在你的项目中内嵌solr</span>服务，这将是一个不错的选择。无论你能否使用http，它都提供相同的接口。</pre>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h2>
     <a name="t92" target="_blank">
     </a>
     <a name="_Toc277337261" target="_blank">
      5      Solr
     </a>
     的实际应用测试报告
    </h2>
    <h3>
     <a name="t93" target="_blank">
     </a>
     <a name="_Toc277337262" target="_blank">
      5.1      线下压力测试报告
     </a>
    </h3>
    <p>
     <span style="color:black">
      1
     </span>
     <span style="color:black">
      ）测试环境：
     </span>
    </p>
    <p>
     Tomcat启动内存:1024M 支持并发线程数：512
    </p>
    <p>
     服务器配置：cpu：P4 3.0 双核，内存：1G DDR333
    </p>
    <p>
     <span style="color:black">
      2
     </span>
     <span style="color:black">
      ）测试结果：
     </span>
    </p>
    <table border="0" cellpadding="0" cellspacing="0" width="510">
     <tbody>
      <tr>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          查询字段数
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          存储数据量
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          日查询次数
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          平均每秒查询次数
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          查询效率
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          全量更新索引数据
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          73
         </span>
         <span style="color:black">
          个
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          3W
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          2
         </span>
         <span style="color:black">
          －
         </span>
         <span style="color:black">
          2.5W
         </span>
         <span style="color:black">
          次
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          3
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          3
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          19
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a name="t94" target="_blank">
     </a>
     <a name="_Toc277337263" target="_blank">
      5.2      线上环境运行报告
     </a>
    </h3>
    <p>
     <span style="color:black">
      1
     </span>
     <span style="color:black">
      ）测试环境：
     </span>
    </p>
    <p>
     Tomcat启动内存：512M  支持并发线程数：512
    </p>
    <p>
     服务器配置：cpu 双Intel XEON 3.4GB 内存2G
    </p>
    <p>
     <span style="color:black">
      2
     </span>
     <span style="color:black">
      ）测试结果：
     </span>
    </p>
    <table border="0" cellpadding="0" cellspacing="0" width="511">
     <tbody>
      <tr>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          查询字段数
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          存储数据量
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          并发数
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          一次查询效率
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          多条件一次查询效率
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          多条件二次查询效率
         </span>
        </p>
       </td>
       <td style="background:#D8D8D8">
        <p align="center">
         <span style="color:black">
          全量更新数据
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          73
         </span>
         <span style="color:black">
          个
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          4W
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          50
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          620
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          400
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          300
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          40
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          73
         </span>
         <span style="color:black">
          个
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          2W
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          50
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          810
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          450
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          315
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          20
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          73
         </span>
         <span style="color:black">
          个
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          1W
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          50
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          940
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          460
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          340
         </span>
         <span style="color:black">
          条
         </span>
         <span style="color:black">
          /
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
       <td style="background:white">
        <p align="center">
         <span style="color:black">
          13
         </span>
         <span style="color:black">
          秒
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      注：
     </strong>
     1）一次查询：只带一个条件的查询
    </p>
    <p>
     2）多条件一次查询：多个条件的查询
    </p>
    <p>
     3）多条件二次查询效率：多个条件查询（并加了fq - （filter query）过虑查询）
    </p>
    <h2>
     <a name="t95" target="_blank">
     </a>
     6
     <a href="http://xiaoyezi1128.javaeye.com/blog/560685" rel="nofollow noopener noreferrer" target="_blank">
      <span style="color:windowtext">
       solr
      </span>
      <span style="color:windowtext">
       性能调优
      </span>
     </a>
     <a name="_Toc277337264" target="_blank">
     </a>
    </h2>
    <h3>
     <a name="t96" target="_blank">
     </a>
     <a name="_Toc277337265" target="_blank">
      <span style="color:black">
       6.1
      </span>
      <span style="color:black">
       Schema Design Considerations
      </span>
     </a>
    </h3>
    <h4>
     <a name="t97" target="_blank">
     </a>
     <span style="color:black">
      6.1.1
     </span>
     <span style="color:black">
      <a name="_Toc277337266" target="_blank">
       indexedfields
      </a>
     </span>
    </h4>
    <p>
     <span style="color:black">
      indexed fields
     </span>
     <span style="color:black">
      的数量将会影响以下的一些性能：
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      索引时的时候的内存使用量
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      索引段的合并时间
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      优化时间
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      索引的大小
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      我们可以通过
     </span>
     <span style="color:black">
      将
     </span>
     <span style="color:black">
      omitNorms=“true”
     </span>
     <span style="color:black">
      来减少
     </span>
     <span style="color:black">
      indexed fields
     </span>
     <span style="color:black">
      数量增加所带来的影响。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h4>
     <a name="t98" target="_blank">
     </a>
     <span style="color:black">
      6.1.2
     </span>
     <span style="color:black">
      <a name="_Toc277337267" target="_blank">
       storedfields
      </a>
     </span>
    </h4>
    <p>
     <span style="color:black">
      Retrieving the stored fields
     </span>
     <span style="color:black">
      确实是一种开销。这个开销，受每个文档所存储的字节影响很大。每个文档的所占用的空间越大，文档就显的更稀疏，这样从硬盘中读取数据，就需要更多的
     </span>
     <span style="color:black">
      i/o
     </span>
     <span style="color:black">
      操作（通常，我们在存储比较大的域的时候，就会考虑这样的事情，比如存储一篇文章的文档。）
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      可以考虑将比较大的域放到
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      外面来存储。如果你觉得这样做会有些别扭的话，可以考虑使用压缩的域，但是这样会加重
     </span>
     <span style="color:black">
      cpu
     </span>
     <span style="color:black">
      在存储和读取域的时候的负担。不过这样却是可以较少
     </span>
     <span style="color:black">
      i/0
     </span>
     <span style="color:black">
      的负担。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      如果，你并不是总是使用
     </span>
     <span style="color:black">
      stored fields
     </span>
     <span style="color:black">
      的话，可以使用
     </span>
     <span style="color:black">
      stored field
     </span>
     <span style="color:black">
      的延迟加载，这样可以节省很多的性能，尤其是使用
     </span>
     <span style="color:black">
      compressed field
     </span>
     <span style="color:black">
      的时候。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h3>
     <a name="t99" target="_blank">
     </a>
     <span style="color:black">
      6.2
     </span>
     <span style="color:black">
      <a name="_Toc277337268" target="_blank">
       ConfigurationConsiderations
      </a>
     </span>
    </h3>
    <h4>
     <a name="t100" target="_blank">
     </a>
     <a name="_Toc277337269" target="_blank">
      <span style="color:black">
       6.2.1
      </span>
      <span style="color:black">
       mergeFactor
      </span>
     </a>
    </h4>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      这个是合并因子，这个参数大概决定了
     </span>
     <span style="color:black">
      segment(
     </span>
     <span style="color:black">
      索引段
     </span>
     <span style="color:black">
      )
     </span>
     <span style="color:black">
      的数量。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      合并因子这个值告诉
     </span>
     <span style="color:black">
      lucene
     </span>
     <span style="color:black">
      ，在什么时候，要将几个
     </span>
     <span style="color:black">
      segment
     </span>
     <span style="color:black">
      合并成为一个
     </span>
     <span style="color:black">
      segment,
     </span>
     <span style="color:black">
      合并因子就像是一个数字系统的基数一样。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      比如说，如果你将合并因子设成
     </span>
     <span style="color:black">
      10
     </span>
     <span style="color:black">
      ，那么每往索引中添加
     </span>
     <span style="color:black">
      1000
     </span>
     <span style="color:black">
      个文档的时候，就会创建一个新的索引段。当第
     </span>
     <span style="color:black">
      10
     </span>
     <span style="color:black">
      个大小为
     </span>
     <span style="color:black">
      1000
     </span>
     <span style="color:black">
      的索引段添加进来的时候，这十个索引段就会被合并成一个大小为
     </span>
     <span style="color:black">
      10
     </span>
     <span style="color:black">
      ，
     </span>
     <span style="color:black">
      000
     </span>
     <span style="color:black">
      的索引段。当十个大小为
     </span>
     <span style="color:black">
      10
     </span>
     <span style="color:black">
      ，
     </span>
     <span style="color:black">
      000
     </span>
     <span style="color:black">
      的索引段生成的时候，它们就会被合并成一个大小为
     </span>
     <span style="color:black">
      100
     </span>
     <span style="color:black">
      ，
     </span>
     <span style="color:black">
      000
     </span>
     <span style="color:black">
      的索引段。如此类推下去。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      这个值可以在
     </span>
     <span style="color:black">
      solrconfig.xml
     </span>
     <span style="color:black">
      中的
     </span>
     <span style="color:black">
      *mainIndex*
     </span>
     <span style="color:black">
      中设置。（不用管
     </span>
     <span style="color:black">
      indexDefaults
     </span>
     <span style="color:black">
      中设置）
     </span>
    </p>
    <h4>
     <a name="t101" target="_blank">
     </a>
     <a name="_Toc277337270" target="_blank">
      <span style="color:black">
       6.2.2
      </span>
      <span style="color:black">
       mergeFactor Tradeoffs
      </span>
     </a>
    </h4>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      较高的合并因子
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      会提高索引速度
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      较低频率的合并，会导致
     </span>
     <span style="color:black">
      更多的索引文件，这会降低索引的搜索效率
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      较低的合并因子
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      较少数量的索引文件，能加快索引的搜索速度。
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      较高频率的合并，会降低索引的速度。
     </span>
    </p>
    <h3>
     <a name="t102" target="_blank">
     </a>
     <a name="_Toc277337271" target="_blank">
      <span style="color:black">
       6.3
      </span>
      <span style="color:black">
       Cache autoWarm Count Considerations
      </span>
     </a>
    </h3>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      当一个新的
     </span>
     <span style="color:black">
      searcher
     </span>
     <span style="color:black">
      打开的时候，它缓存可以被预热，或者说使用从旧的
     </span>
     <span style="color:black">
      searcher
     </span>
     <span style="color:black">
      的缓存的数据来
     </span>
     <span style="color:black">
      “
     </span>
     <span style="color:black">
      自动加热
     </span>
     <span style="color:black">
      ”
     </span>
     <span style="color:black">
      。
     </span>
     <span style="color:black">
      autowarmCount
     </span>
     <span style="color:black">
      是这样的一个参数，它表示从旧缓存中拷贝到新缓存中的对象数量。
     </span>
     <span style="color:black">
      autowarmCount
     </span>
     <span style="color:black">
      这个参数将会影响
     </span>
     <span style="color:black">
      “
     </span>
     <span style="color:black">
      自动预热
     </span>
     <span style="color:black">
      ”
     </span>
     <span style="color:black">
      的时间。有些时候，我们需要一些折中的考虑，
     </span>
     <span style="color:black">
      seacher
     </span>
     <span style="color:black">
      启动的时间和缓存加热的程度。当然啦，缓存加热的程度越好，使用的时间就会越长，但往往，我们并不希望过长的
     </span>
     <span style="color:black">
      seacher
     </span>
     <span style="color:black">
      启动时间。这个
     </span>
     <span style="color:black">
      autowarm
     </span>
     <span style="color:black">
      参数可以在
     </span>
     <span style="color:black">
      solrconfig.xml
     </span>
     <span style="color:black">
      文件中被设置。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      详细的配置可以参考
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      wiki
     </span>
     <span style="color:black">
      。
     </span>
    </p>
    <h3>
     <a name="t103" target="_blank">
     </a>
     <a name="_Toc277337272" target="_blank">
      <span style="color:black">
       6.4
      </span>
      <span style="color:black">
       Cache hit rate
      </span>
     </a>
     <span style="color:black">
      （缓存命中率）
     </span>
    </h3>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      我们可以通过
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      admin
     </span>
     <span style="color:black">
      界面来查看缓存的状态信息。提高
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      缓存的大小往往是提高性能的捷径。当你使用面搜索的时候，你或许可以注意一下
     </span>
     <span style="color:black">
      filterCache,
     </span>
     <span style="color:black">
      这个是由
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      实现的缓存。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      详细的内容可以参考
     </span>
     <span style="color:black">
      solrCaching
     </span>
     <span style="color:black">
      这篇
     </span>
     <span style="color:black">
      wiki
     </span>
     <span style="color:black">
      。
     </span>
    </p>
    <h3>
     <a name="t104" target="_blank">
     </a>
     <a name="_Toc277337273" target="_blank">
      <span style="color:black">
       6.5
      </span>
      <span style="color:black">
       Explicit Warming of Sort Fields
      </span>
     </a>
     <span style="color:black">
     </span>
    </h3>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      如果你有许多域是基于排序的，那么你可以在
     </span>
     <span style="color:black">
      "newSearcher"
     </span>
     <span style="color:black">
      和
     </span>
     <span style="color:black">
      "firstSearcher"eventlisteners
     </span>
     <span style="color:black">
      中添加一些明显需要预热的查询，这样
     </span>
     <span style="color:black">
      FieldCache
     </span>
     <span style="color:black">
      就会缓存这部分内容。
     </span>
    </p>
    <h3>
     <a name="t105" target="_blank">
     </a>
     <span style="color:black">
      6.6
     </span>
     <span style="color:black">
      <a name="_Toc277337274" target="_blank">
       OptimizationConsiderations
      </a>
     </span>
    </h3>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      优化索引，是我们经常会做的事情，比如，当我们建立好索引，然后这个索引不会再变更的情况，我们就会做一次优化了。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      但，如果你的索引经常会改变，那么你就需要好好的考虑下面的因素的。
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      当越来越多的索引段被加进索引，查询的性能就会降低，
     </span>
     <span style="color:black">
      lucene
     </span>
     <span style="color:black">
      对索引段的数量有一个上限的限制，当超过这个限制的时候，索引段可以自动合并成为一个。
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      在同样没有缓存的情况下，一个没有经过优化的索引的性能会比经过优化的索引的性能少
     </span>
     <span style="color:black">
      10%……
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
      自动加热的时间将会变长，因为它依赖于搜索。
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      优化将会对索引的分发产生影响。
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      在优化期间，文件的大小将会是索引的两倍，不过最终将会回到它原来的大小，或者会更小一点。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      优化，会将所有的索引段合并成为一个索引段，所以，优化这个操作其实可以帮助避免
     </span>
     <span style="color:black">
      “too many files”
     </span>
     <span style="color:black">
      这个问题，这个错误是由文件系统抛出的。
     </span>
    </p>
    <h3>
     <a name="t106" target="_blank">
     </a>
     <a name="_Toc277337275" target="_blank">
      <span style="color:black">
       6.7
      </span>
      <span style="color:black">
       Updates and Commit Frequency Tradeoffs
      </span>
     </a>
    </h3>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      如果从机太经常从主机更新的话，从机的性能是会受到影响的。为了避免，由于这个问题而引起的性能下降，我们还必须了解从机是怎样执行更新的，这样我们才能更准确去调节一些相关的参数（
     </span>
     <span style="color:black">
      commit
     </span>
     <span style="color:black">
      的频率，
     </span>
     <span style="color:black">
      spappullers,autowarming/autocount
     </span>
     <span style="color:black">
      ）
     </span>
     <span style="color:black">
      ,
     </span>
     <span style="color:black">
      这样，从机的更新才不会太频繁。
     </span>
    </p>
    <p>
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      执行
     </span>
     <span style="color:black">
      commit
     </span>
     <span style="color:black">
      操作会让
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      新生成一个
     </span>
     <span style="color:black">
      snapshot
     </span>
     <span style="color:black">
      。如果将
     </span>
     <span style="color:black">
      postCommit
     </span>
     <span style="color:black">
      参数设成
     </span>
     <span style="color:black">
      true
     </span>
     <span style="color:black">
      的话，
     </span>
     <span style="color:black">
      optimization
     </span>
     <span style="color:black">
      也会执行
     </span>
     <span style="color:black">
      snapShot.
     </span>
    </p>
    <p>
     <span style="color:black">
      2.
     </span>
     <span style="color:black">
      slave
     </span>
     <span style="color:black">
      上的
     </span>
     <span style="color:black">
      Snappuller
     </span>
     <span style="color:black">
      程序一般是在
     </span>
     <span style="color:black">
      crontab
     </span>
     <span style="color:black">
      上面执行的，它会去
     </span>
     <span style="color:black">
      master
     </span>
     <span style="color:black">
      询问，有没有新版的
     </span>
     <span style="color:black">
      snapshot
     </span>
     <span style="color:black">
      。一旦发现新的版本，
     </span>
     <span style="color:black">
      slave
     </span>
     <span style="color:black">
      就会把它下载下来，然后
     </span>
     <span style="color:black">
      snapinstall.
     </span>
    </p>
    <p>
     <span style="color:black">
      3.
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      每次当一个新的
     </span>
     <span style="color:black">
      searcher
     </span>
     <span style="color:black">
      被
     </span>
     <span style="color:black">
      open
     </span>
     <span style="color:black">
      的时候，会有一个缓存预热的过程，预热之后，新的索引才会交付使用。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      这里讨论三个有关的参数：
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <strong>
      <span style="color:black">
       number/frequency of snapshots
      </span>
     </strong>
     <span style="color:black">
      ----snapshot
     </span>
     <span style="color:black">
      的频率。
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <strong>
      <span style="color:black">
       snappullers
      </span>
      <span style="color:black">
       是
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:black">
      在
     </span>
     <span style="color:black">
      crontab
     </span>
     <span style="color:black">
      中的，它当然可以每秒一次、每天一次、或者其他的时间间隔一次运行。它运行的时候，只会下载
     </span>
     <span style="color:black">
      slave
     </span>
     <span style="color:black">
      上没有的，并且最新的版本。
     </span>
    </p>
    <p>
     <span style="color:black">
      ·
     </span>
     <span style="color:black">
     </span>
     <strong>
      <span style="color:black">
       Cache autowarming
      </span>
     </strong>
     <span style="color:black">
     </span>
     <span style="color:black">
      可以在
     </span>
     <span style="color:black">
      solrconfig.xml
     </span>
     <span style="color:black">
      文件中配置。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      如果，你想要的效果是频繁的更新
     </span>
     <span style="color:black">
      slave
     </span>
     <span style="color:black">
      上的索引，以便这样看起来比较像
     </span>
     <span style="color:black">
      “
     </span>
     <span style="color:black">
      实时索引
     </span>
     <span style="color:black">
      ”
     </span>
     <span style="color:black">
      。那么，你就需要让
     </span>
     <span style="color:black">
      snapshot
     </span>
     <span style="color:black">
      尽可能频繁的运行，然后也让
     </span>
     <span style="color:black">
      snappuller
     </span>
     <span style="color:black">
      频繁的运行。这样，我们或许可以每
     </span>
     <span style="color:black">
      5
     </span>
     <span style="color:black">
      分钟更新一次，并且还能取得不错的性能，当然啦，
     </span>
     <span style="color:black">
      cach
     </span>
     <span style="color:black">
      的命中率是很重要的，恩，缓存的加热时间也将会影响到更新的频繁度。
     </span>
    </p>
    <p>
     <span style="color:black">
      cache
     </span>
     <span style="color:black">
      对性能是很重要的。一方面，新的缓存必须拥有足够的缓存量，这样接下来的的查询才能够从缓存中受益。另一方面，缓存的预热将可能占用很长一段时间，尤其是，它其实是只使用一个线程，和一个
     </span>
     <span style="color:black">
      cpu
     </span>
     <span style="color:black">
      在工作。
     </span>
     <span style="color:black">
      snapinstaller
     </span>
     <span style="color:black">
      太频繁的话，
     </span>
     <span style="color:black">
      solr slave
     </span>
     <span style="color:black">
      将会处于一个不太理想的状态，可能它还在预热一个新的缓存，然而一个更新的
     </span>
     <span style="color:black">
      searcher
     </span>
     <span style="color:black">
      被
     </span>
     <span style="color:black">
      opern
     </span>
     <span style="color:black">
      了。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      怎么解决这样的一个问题呢，我们可能会取消第一个
     </span>
     <span style="color:black">
      seacher
     </span>
     <span style="color:black">
      ，然后去处理一个更新
     </span>
     <span style="color:black">
      seacher
     </span>
     <span style="color:black">
      ，也即是第二个。然而有可能第二个
     </span>
     <span style="color:black">
      seacher
     </span>
     <span style="color:black">
      还没有被使用上的时候，第三个又过来了。看吧，一个恶性的循环，不是。当然也有可能，我们刚刚预热好的时候就开始新一轮的缓存预热，其实，这样缓存的作用压根就没有能体现出来。出现这种情况的时候，降低
     </span>
     <span style="color:black">
      snapshot
     </span>
     <span style="color:black">
      的频率才是硬道理。
     </span>
    </p>
    <h3>
     <a name="t107" target="_blank">
     </a>
     <a name="_Toc277337276" target="_blank">
      <span style="color:black">
       6.8
      </span>
      <span style="color:black">
       Query Response Compression
      </span>
     </a>
    </h3>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      在有些情况下，我们可以考虑将
     </span>
     <span style="color:black">
      solr xml response
     </span>
     <span style="color:black">
      压缩后才输出。如果
     </span>
     <span style="color:black">
      response
     </span>
     <span style="color:black">
      非常大，就会触及
     </span>
     <span style="color:black">
      NIc i/o
     </span>
     <span style="color:black">
      限制。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      当然压缩这个操作将会增加
     </span>
     <span style="color:black">
      cpu
     </span>
     <span style="color:black">
      的负担，其实，
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      一个典型的依赖于
     </span>
     <span style="color:black">
      cpu
     </span>
     <span style="color:black">
      处理速度的服务，增加这个压缩的操作，将无疑会降低查询性能。但是，压缩后的数据将会是压缩前的数据的
     </span>
     <span style="color:black">
      6
     </span>
     <span style="color:black">
      分之一
     </span>
     <span style="color:black">
      的大小。然而
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的查询性能也会有
     </span>
     <span style="color:black">
      15%
     </span>
     <span style="color:black">
      左右的消耗。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      至于怎样配置这个功能，要看你使用的什么服务器而定，可以查阅相关的文档。
     </span>
    </p>
    <h3>
     <a name="t108" target="_blank">
     </a>
     <a name="_Toc277337277" target="_blank">
      <span style="color:black">
       6.9
      </span>
      <span style="color:black">
       Embedded vs HTTP Post
      </span>
     </a>
    </h3>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      使用
     </span>
     <span style="color:black">
      embeded
     </span>
     <span style="color:black">
      来建立索引，将会比使用
     </span>
     <span style="color:black">
      xml
     </span>
     <span style="color:black">
      格式来建立索引快
     </span>
     <span style="color:black">
      50%
     </span>
     <span style="color:black">
      。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h3>
     <a name="t109" target="_blank">
     </a>
     <span style="color:black">
      6.10
     </span>
     <span style="color:black">
      <a name="_Toc277337278" target="_blank">
       RAM UsageConsiderations
      </a>
     </span>
     <span style="color:black">
      （内存方面的考虑）
     </span>
    </h3>
    <h4>
     <a name="t110" target="_blank">
     </a>
     <a name="_Toc277337279" target="_blank">
      <span style="color:black">
       6.10.1
      </span>
      <span style="color:black">
       OutOfMemoryErrors
      </span>
     </a>
    </h4>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      如果你的
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      实例没有被指定足够多的内存的话，
     </span>
     <span style="color:black">
      java virtual machine
     </span>
     <span style="color:black">
      也许会抛
     </span>
     <span style="color:black">
      outof memoryError
     </span>
     <span style="color:black">
      ，这个并不对索引数据产生影响。但是这个时候，任何的
     </span>
     <span style="color:black">
      adds/deletes/commits
     </span>
     <span style="color:black">
      操作都是不能够成功的。
     </span>
    </p>
    <h4>
     <a name="t111" target="_blank">
     </a>
     <a name="_Toc277337280" target="_blank">
      <span style="color:black">
       6.10.2
      </span>
      <span style="color:black">
       Memory allocated to the Java VM
      </span>
     </a>
    </h4>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      最简单的解决这个方法就是，当然前提是
     </span>
     <span style="color:black">
      java virtual machine
     </span>
     <span style="color:black">
      还没有使用掉你全部的内存，增加运行
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      java
     </span>
     <span style="color:black">
      虚拟机的内存。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
    </p>
    <h5>
     <a name="t112" target="_blank">
     </a>
     <span style="color:black">
      1.
     </span>
     <span style="color:black">
      Factors affecting memory usage
     </span>
     <span style="color:black">
      （影响内存使用量的因素）
     </span>
    </h5>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      我想，你或许也会考虑怎样去减少
     </span>
     <span style="color:black">
      solr
     </span>
     <span style="color:black">
      的内存使用量。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      其中的一个因素就是
     </span>
     <span style="color:black">
      input document
     </span>
     <span style="color:black">
      的大小。
     </span>
    </p>
    <p>
     <span style="color:black">
     </span>
     <span style="color:black">
      当我们使用
     </span>
     <span style="color:black">
      xml
     </span>
     <span style="color:black">
      执行
     </span>
     <span style="color:black">
      add
     </span>
     <span style="color:black">
      操作的时候，就会有两个限制。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <span style="color:black">
      document
     </span>
     <span style="color:black">
      中的
     </span>
     <span style="color:black">
      field
     </span>
     <span style="color:black">
      都是会被存进内存的，
     </span>
     <span style="color:black">
      field
     </span>
     <span style="color:black">
      有个属性叫
     </span>
     <span style="color:black">
      maxFieldLength
     </span>
     <span style="color:black">
      ，它或许能帮上忙。
     </span>
    </p>
    <p>
     <span style="color:black">
      l
     </span>
     <span style="color:black">
     </span>
     <span style="color:black">
      每增加一个域，也是会增加内存的使用的。
     </span>
    </p>
    <p>
     <span style="color:black">
      引用自：
     </span>
     <a href="http://mxsfengg.javaeye.com/blog/355007" rel="nofollow noopener noreferrer" target="_blank">
      http://mxsfengg.javaeye.com/blog/355007
     </a>
    </p>
    <h2>
     <a name="t113" target="_blank">
     </a>
     <a name="_Toc277337281" target="_blank">
      7      FAQ
     </a>
    </h2>
    <h3>
     <a name="t114" target="_blank">
     </a>
     <a name="_Toc277337282" target="_blank">
      7.1      出现乱码或者查不到结果的排查方法：
     </a>
    </h3>
    <p>
     <span style="color:black">
      1) Tomcat
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      server.xml
     </span>
     <span style="color:black">
      需要保证：
     </span>
    </p>
    <p>
     <span style="color:black">
      如果没有设置
     </span>
     <span style="color:black">
      URIEncoding="UTF-8"
     </span>
     <span style="color:black">
      ，在提交查询的
     </span>
     <span style="color:black">
      select
     </span>
     <span style="color:black">
      的
     </span>
     <span style="color:black">
      url
     </span>
     <span style="color:black">
      会出现乱码，当然也就查不到了。
     </span>
    </p>
    <p>
     <span style="color:black">
      2)
     </span>
     <span style="color:black">
      添加索引的时候，
     </span>
     <span style="color:black">
      xml
     </span>
     <span style="color:black">
      数据文件需要包含
     </span>
     <span style="color:black">
      utf-8
     </span>
     <span style="color:black">
      声明，也就是：
     </span>
    </p>
    <p>
     <span style="color:black">
      然后使用
     </span>
     <span style="color:black">
      Solr
     </span>
     <span style="color:black">
      自带的
     </span>
     <span style="color:black">
      post.jar
     </span>
     <span style="color:black">
      或者
     </span>
     <span style="color:black">
      curl
     </span>
     <span style="color:black">
      来进行
     </span>
     <span style="color:black">
      post
     </span>
     <span style="color:black">
      索引：
     </span>
    </p>
    <p>
     <span style="color:black">
      java: java -Durl=http://localhost:8080/solr/update -Dcommit=yes-jar post.jar data.xml
     </span>
    </p>
    <p>
     <span style="color:black">
      该步骤如果没有设置好，出错的表现是，查询的结果是乱码
     </span>
     <span style="color:black">
      (
     </span>
     <span style="color:black">
      可以设置查询关键词为
     </span>
     <span style="color:black">
      id:[*TO *]
     </span>
     <span style="color:black">
      确保显示出所有的结果
     </span>
     <span style="color:black">
      ).
     </span>
    </p>
    <p>
     <span style="color:black">
      3)
     </span>
     <span style="color:black">
      如果确保了如上的两个步骤都设置正确，但是使用
     </span>
     <span style="color:black">
      http://localhost:8080/solr/admin/
     </span>
     <span style="color:black">
      的查询表单
     </span>
     <span style="color:black">
      (
     </span>
     <span style="color:black">
      该表单支持
     </span>
     <span style="color:black">
      utf-8
     </span>
     <span style="color:black">
      没有问题
     </span>
     <span style="color:black">
      )
     </span>
     <span style="color:black">
      仍旧查不到结果，则问题可能出在分词器，可以尝试不同的分词器。
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f797a37303734393938:2f61727469636c652f64657461696c732f3432393730393335" class_="artid" style="display:none">
 </p>
</div>


