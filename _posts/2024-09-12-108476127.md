---
layout: post
title: "前端进阶攻略之迭代器"
date: 2024-09-12 22:02:22 +0800
description: "前端进阶攻略之迭代器一.什么是迭代器?1.什么是迭代？从一个数据集合中按照一定的顺序，不断的取出数据"
keywords: "前端 自定义迭代"
categories: ['Es']
tags: ['Es']
artid: "108476127"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=108476127
    alt: "前端进阶攻略之迭代器"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端进阶攻略之迭代器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <center>
     <h2>
      前端进阶攻略之迭代器
     </h2>
    </center>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4fa81523dd02837e33a3187b1710b919.jpeg#pic_center"/>
    </p>
    <h2>
     <a id="_3">
     </a>
     一.什么是迭代器?
    </h2>
    <h6>
     <a id="1_4">
     </a>
     1.什么是迭代？
    </h6>
    <p>
     从一个数据集合中按照一定的顺序，不断的取出数据的过程
    </p>
    <h6>
     <a id="2_7">
     </a>
     2.迭代和遍历的区别？
    </h6>
    <p>
     迭代强调的依次取出，不能确定可以取出的值有多少，也不能保证去把数据全部取完
    </p>
    <p>
     遍历必须保证数据的长度，循环不断的全部取出，针对于数据量过大的情况下使用遍历，需要时间过长
    </p>
    <h6>
     <a id="3_11">
     </a>
     3.迭代器
    </h6>
    <p>
     对迭代过程的封装，通常表现为对象的数据形式（也可以使用数组），不同语言中，表现出了的迭代形式不一样
    </p>
    <h6>
     <a id="4_15">
     </a>
     4.迭代模式
    </h6>
    <p>
     一种编程设计模式，用于同一迭代的过程，并且规范迭代器的格式
    </p>
    <h2>
     <a id="JS_17">
     </a>
     二.JS原生迭代器
    </h2>
    <p>
     在写原生迭代器时，首先要明白迭代器的原理
     <br/>
     迭代器需要满足的条件：
     <br/>
     2.1.取出下一个数据的能力
     <br/>
     2.2.判断是否有下一个数据
    </p>
    <pre><code class="prism language-javascript">        <span class="token keyword">function</span> <span class="token function">iterator</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
            i<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">var</span> result<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
                value<span class="token punctuation">:</span>arr<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
                done<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token operator">&gt;=</span>arr<span class="token punctuation">.</span>length
                <span class="token punctuation">}</span> 
            <span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> arr1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> it<span class="token operator">=</span><span class="token function">iterator</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     只要知道迭代器需要满足的条件，写一个原生迭代器还是非常简单的
     <br/>
     最终在控制台中调用.next()方法输出的结果为：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/32f4a997ed9dea80daa3fc8998a78133.png#pic_center">
      <br/>
      如果用while（）循环可以让迭代器自己取数据，直到没有数据为止
     </img>
    </p>
    <pre><code class="prism language-javascript">        <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> iterator <span class="token operator">=</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//用于迭代数组的对象，iterator为迭代器的名称</span>
            i <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    value <span class="token punctuation">:</span> arr<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
                    done <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">&gt;=</span> arr<span class="token punctuation">.</span>length
                <span class="token punctuation">}</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span>
        <span class="token comment">// 让迭代器自己取数据，直到没有数据为止</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
            data <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"迭代完成"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="ES6_67">
     </a>
     三.ES6中的迭代器
    </h2>
    <p>
     在es6中如果对象具有知名符号属性Symbol.iterator,则表示该对象可以迭代
    </p>
    <pre><code class="prism language-javascript">        <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">464</span><span class="token punctuation">,</span> <span class="token number">878</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
            <span class="token comment">// // 在es6中如果对象具有知名符号属性Symbol.iterator,则表示该对象可以迭代</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
        <span class="token keyword">const</span> iterator <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//es6之后，数组可以直接创建迭代对象</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{value: 464, done: false}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{value: 878, done: false}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{value: 88, done: false}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     使用es6中的知名符号Symbol.iterator可以直接创建一个迭代对象，通过调用迭代对象的next（）方法，可以直接迭代数组中的数据
    </p>
    <h5>
     <a id="31_86">
     </a>
     3.1、使用迭代器生成斐波那契数列
    </h5>
    <p>
     下面我们就使用迭代器来自定义自己的一个斐波那契数列组，我们直到斐波那契数列有两个运行前提，第一个前提是初始化的前两个数字为0，1,第二个前提是将来的每一个值都是前两个值的和。这样我们的目标就是每次都迭代输出一个新的值。
    </p>
    <pre><code class="prism language-javascript"> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">5</span> <span class="token number">8</span> <span class="token number">13.</span><span class="token operator">...</span><span class="token punctuation">.</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 创建一个分斐波那契数列的迭代器 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token keyword">function</span> <span class="token function">createFeibo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">let</span> prev1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> prev2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//前两位</span>
            <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//当前第几位</span>
            <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">let</span> value<span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;=</span><span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                        value <span class="token operator">=</span> <span class="token number">1</span>
                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                        value <span class="token operator">=</span> prev1 <span class="token operator">+</span> prev2<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                        value<span class="token punctuation">,</span>
                        done<span class="token punctuation">:</span> <span class="token boolean">false</span>
                    <span class="token punctuation">}</span>
                    prev2 <span class="token operator">=</span> prev1<span class="token punctuation">;</span>
                    prev1 <span class="token operator">=</span> result<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                    n<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> result
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> iter <span class="token operator">=</span> <span class="token function">createFeibo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     在 ES6 中常用的集合对象（数组、Set/Map集合）和字符串都是可迭代对象，这些对象都有默认的迭代器和Symbol.iterator属性。
    </p>
    <p>
     通过生成器创建的迭代器也是可迭代对象，因为生成器默认会为Symbol.iterator属性赋值。
    </p>
    <h2>
     <a id="_for__of_121">
     </a>
     四. for of循环
    </h2>
    <p>
     for of 循环遍历、 就是专门针对可迭代对象的， 不是可迭代对象不能使用 forof循环。
    </p>
    <pre><code class="prism language-javascript">        <span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> arr1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="for_offor_in__130">
     </a>
     for of与for in 区别：
    </h4>
    <p>
     区别①：for of无法循环遍历对象
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">var</span> userMsg <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'nick'</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'freddy'</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">'mike'</span><span class="token punctuation">,</span>	
    <span class="token number">3</span><span class="token punctuation">:</span> <span class="token string">'james'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> userMsg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> userMsg<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----------分割线-----------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> item <span class="token keyword">of</span> userMsg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>	
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a1cd17f13fe0161ecafaf8e974c8bff2.png#pic_center">
      <br/>
      区别②：遍历输出结果不同
     </img>
    </p>
    <pre><code class="prism language-javascript">
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'nick'</span><span class="token punctuation">,</span><span class="token string">'freddy'</span><span class="token punctuation">,</span><span class="token string">'mike'</span><span class="token punctuation">,</span><span class="token string">'james'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> arr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----------分割线-----------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>	
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/92a09c5245876888789ed47230d8767f.png#pic_center">
      <br/>
      不难看出，for in循环遍历的是数组的键值(索引)，而for of循环遍历的是数组的值。
     </img>
    </p>
    <p>
     区别③：for in 会遍历自定义属性，for of不会
    </p>
    <pre><code class="prism language-javascript">
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'nick'</span><span class="token punctuation">,</span><span class="token string">'freddy'</span><span class="token punctuation">,</span><span class="token string">'mike'</span><span class="token punctuation">,</span><span class="token string">'james'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"数组"</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> arr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">': '</span><span class="token operator">+</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----------分割线-----------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>	
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/767945963aac888885b98cb7556b672d.png#pic_center"/>
    </p>
    <p>
     给数组添加一个自定义属性name，并且赋值"数组"。然后进行遍历输出的，会发现新定义的属性也被for in输出来了，而for of并不会对name进行输出。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f7a6d31373637313434333039322f:61727469636c652f64657461696c732f313038343736313237" class_="artid" style="display:none">
 </p>
</div>


