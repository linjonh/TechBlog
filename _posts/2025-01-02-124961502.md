---
layout: post
title: "uniapp微信小程序启动页广告每天显示一次"
date: 2025-01-02 09:56:25 +0800
description: "uniapp微信小程序启动页广告（每天显示一次）_uniapp 微信小程序启动页"
keywords: "uniapp 微信小程序启动页"
categories: ['']
tags: ['微信小程序', '小程序', '前端', 'Vue', 'Javascript']
artid: "124961502"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=124961502
    alt: "uniapp微信小程序启动页广告每天显示一次"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     uniapp微信小程序启动页广告（每天显示一次）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <blockquote>
     <pre><code class="language-css">&lt;template&gt;
	&lt;view class="viewpager__-wrapper"&gt;
		&lt;u-swiper
			:list="list6"
			@change="e =&gt; currentNum = e.current"
			:autoplay="true"
			height="100%"
			indicatorStyle="right: 20px"&gt;
			&lt;view slot="indicator" class="indicator-num"&gt;
				&lt;text class="indicator-num__text"&gt;{<!-- -->{ currentNum + 1 }}/{<!-- -->{ list6.length }}&lt;/text&gt;
			&lt;/view&gt;
		&lt;/u-swiper&gt;
		&lt;view class="viewpager__-time l-box-pf-t" v-if="countDown!=0"&gt;
			{<!-- -->{countDown}}后自动关闭
		&lt;/view&gt;
		&lt;view class="viewpager__-button l-box-pf-b" v-if="currentNum == 2"&gt;
			&lt;u-button type="success" text="立即体验" @click="handleIndex"&gt;&lt;/u-button&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
	const app = getApp()

	export default {
		name:"viewpager",
		data() {
			return {
				currentNum: 1,
				bannerList:[],
				list6: [],
				countDown: 0,
				timerThree: null,
				_temp:''
			};
		},
		created() {
		},
		onLoad() {
			this.test()
		},
		methods:{
			test(){
                //记录当天时间 存起来 
				const that = this
				if(!uni.getStorageSync('today')){
					that.countDownFunc()
					uni.setStorageSync("today", new Date().toLocaleDateString());
				} else {
					let _time = uni.getStorageSync('today')
					let _today =  new Date().toLocaleDateString()
                    // 第二次进来 如果存起来的时间等于今天的时间  直接进首页
					if(_time == _today) {
						uni.switchTab({
							url: '../index/index'
						})
					} else {
                      // 当天时间不等于存起来的时间。重新存今天的时间，请求广告并且展示
						uni.setStorageSync("today", new Date().toLocaleDateString());
						that.countDownFunc()
					}
				}
			},
			getBanner() {
				let _url =app.globalData.url
			   	const newUrl = _url.substr(0, _url.length - 1);
				自己拿广告图的接口().then((res) =&gt; {
					if(res) {
						this.bannerList = res
						let arr = []
						res.forEach(item =&gt; {
							let imgUrl = newUrl + item.picUrl
							arr.push(imgUrl)
						});
						this.list6 = arr
					}
				})
			},
			countDownFunc(){
				this.getBanner()
				const TIME_COUNT = 8; 
				if(!this.timerThree){ 
					this.countDown = TIME_COUNT;
					this.timerThree = setInterval(()=&gt;{
					if(this.countDown &gt; 0 &amp;&amp; this.countDown &lt;= TIME_COUNT){
						this.countDown--;
					} else {
						clearInterval(this.timerThree);
						this.timerThree = null;
						uni.switchTab({
							url: '../index/index'
						})
					}
					},1000)
				}
			},
			handleIndex(){
				if(this.timerThree){
					clearInterval(this.timerThree);
					this.timerThree = null;
					uni.switchTab({
						url: '../index/index'
					})
				}
			}
		}
	}
&lt;/script&gt;

&lt;style lang="scss"&gt;
	.viewpager__{
		&amp;-wrapper{
			height: 100vh;
		}
		&amp;-time{top:40px;color: #C4C6C9;left: 20rpx;font-size: 24rpx;}
		&amp;-button{bottom: 45px;width: 50%;left: 25%;}
	}
.indicator {
        @include flex(row);
        justify-content: center;

        &amp;__dot {
             height: 6px;
             width: 6px;
             border-radius: 100px;
             background-color: rgba(255, 255, 255, 0.35);
             margin: 0 5px;
             transition: background-color 0.3s;
    
            &amp;--active {
                 background-color: #ffffff;
             }
        }
    }

    .indicator-num {
        padding: 2px 0;
        background-color: rgba(0, 0, 0, 0.35);
        border-radius: 100px;
        width: 35px;
        @include flex;
        justify-content: center;

        &amp;__text {
             color: #FFFFFF;
             font-size: 12px;
         }
    }
&lt;/style&gt;
</code></pre>
    </blockquote>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33393635363531312f:61727469636c652f64657461696c732f313234393631353032" class_="artid" style="display:none">
 </p>
</div>


