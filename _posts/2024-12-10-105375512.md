---
layout: post
title: "ROS入门-5深入了解ROS话题通信机制的过程"
date: 2024-12-10 11:52:15 +0800
description: "文章目录前言ROS系列文章节点的连接①发布者`Talker`注册②订阅者`Listener`注册③节"
keywords: "深入了解ros话题通信机制的过程"
categories: ['Ros']
tags: ['话题', '机器人操作系统', 'Topic', 'Ros', 'Ros']
artid: "105375512"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=105375512
    alt: "ROS入门-5深入了解ROS话题通信机制的过程"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【ROS入门-5】深入了解ROS话题通信机制的过程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        前言
       </a>
      </li>
      <li>
       <a href="#ROS_5" rel="nofollow">
        ROS系列文章
       </a>
      </li>
      <li>
       <a href="#_19" rel="nofollow">
        节点的连接
       </a>
      </li>
      <li>
       <a href="#Talker_27" rel="nofollow">
        ①发布者`Talker`注册
       </a>
      </li>
      <li>
       <a href="#Listener_31" rel="nofollow">
        ②订阅者`Listener`注册
       </a>
      </li>
      <li>
       <a href="#ROS_Master_35" rel="nofollow">
        ③节点管理器`ROS Master`进行话题匹配
       </a>
      </li>
      <li>
       <a href="#ListenerTalker_39" rel="nofollow">
        ④订阅者`Listener`向`Talker`发送连接请求
       </a>
      </li>
      <li>
       <a href="#Talker_44" rel="nofollow">
        ⑤发布者`Talker`确认连接请求
       </a>
      </li>
      <li>
       <a href="#ListenerTalker_48" rel="nofollow">
        ⑥`Listener`尝试与`Talker`建立网络连接
       </a>
      </li>
      <li>
       <a href="#TalkerListener_52" rel="nofollow">
        ⑦`Talker`向`Listener`发布消息
       </a>
      </li>
      <li>
       <a href="#_55" rel="nofollow">
        总结
       </a>
      </li>
      <li>
       <a href="#_61" rel="nofollow">
        引用说明
       </a>
      </li>
      <li>
       <a href="#_65" rel="nofollow">
        参考
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     前言
    </h2>
    <p>
     在上一篇文章中简单了解了ROS话题通信机制，但是它内部的通信过程，很多人都是不知道的，今天我看了
     <a href="https://item.jd.com/12377412.html" rel="nofollow">
      胡春旭的书籍——《ROS机器人开发实践》
     </a>
     ，又加深了对ROS话题通信的理解，打算接着讲解一下其过程是怎么样的。
    </p>
    <h2>
     <a id="ROS_5">
     </a>
     ROS系列文章
    </h2>
    <ul>
     <li>
      <p>
       <a href="https://blog.csdn.net/jiejiemcu/article/details/105314870">
        【ROS入门-1】手把手教你在Ubuntu18.04安装ROS Melodic
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://jiejie.blog.csdn.net/article/details/105323363" rel="nofollow">
        【ROS入门-2】带你看ROS文件系统及其工具
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://blog.csdn.net/jiejiemcu/article/details/105330117">
        【ROS入门-3】嘴对嘴讲解ROS的核心概念——节点与节点管理器
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://blog.csdn.net/jiejiemcu/article/details/105349782">
        【ROS入门-4】嘴对嘴讲解ROS的核心概念——ROS话题通信机制
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://jiejie.blog.csdn.net/article/details/105375512" rel="nofollow">
        【ROS入门-5】深入了解ROS话题通信机制的过程
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://jiejie.blog.csdn.net/article/details/105418716" rel="nofollow">
        【ROS入门-6】ROS工作空间、package 及 catkin 编译系统
       </a>
      </p>
     </li>
    </ul>
    <h2>
     <a id="_19">
     </a>
     节点的连接
    </h2>
    <p>
     一个节点需要与系统中其他节点进行通信才有意义，系统中任何单独的一个节点其实都是没有意义的。下图是一个话题通讯的过程示意图，一个节点通过节点管理器连接到另一个节点，最终请求话题数据流。
    </p>
    <p>
     <img alt="ros016" src="https://i-blog.csdnimg.cn/blog_migrate/e91831575ed37501aaed9f3235fd4e1a.png"/>
    </p>
    <blockquote>
     <p>
      ps：在ROS中有两个节点：一个是发布者
      <code>
       Talker
      </code>
      ，另一个是订阅者
      <code>
       Listener
      </code>
      ，两个节点分别发布、订阅同一个话题
      <code>
       bar
      </code>
      。
     </p>
    </blockquote>
    <h2>
     <a id="Talker_27">
     </a>
     ①发布者
     <code>
      Talker
     </code>
     注册
    </h2>
    <p>
     在系统中，节点与节点是没有任何关系的，都靠节点管理器来处理相关的请求与服务，首先第一步，发布者
     <code>
      Talker
     </code>
     需要向节点管理器
     <code>
      ROS Master
     </code>
     注册相关信息，包括节点的信息、需要发布的话题名等，然后节点管理器
     <code>
      ROS Master
     </code>
     会记录下来
     <code>
      Talker
     </code>
     节点的信息。
    </p>
    <h2>
     <a id="Listener_31">
     </a>
     ②订阅者
     <code>
      Listener
     </code>
     注册
    </h2>
    <p>
     同理订阅者
     <code>
      Listener
     </code>
     也需要向节点管理器
     <code>
      ROS Master
     </code>
     注册相关信息，这其实是启动两个节点时候就已经做了的事情。
    </p>
    <h2>
     <a id="ROS_Master_35">
     </a>
     ③节点管理器
     <code>
      ROS Master
     </code>
     进行话题匹配
    </h2>
    <p>
     因为发布者
     <code>
      Talker
     </code>
     与订阅者
     <code>
      Listener
     </code>
     节点都在节点管理器
     <code>
      ROS Master
     </code>
     注册了信息，那么节点管理器
     <code>
      ROS Master
     </code>
     就会发现有相同的话题信息，此时它就需要将订阅与发布话题的两个节点匹配在一起，会通过RPC向订阅者
     <code>
      Listener
     </code>
     发送
     <code>
      Talker
     </code>
     节点的RPC地址信息。
    </p>
    <h2>
     <a id="ListenerTalker_39">
     </a>
     ④订阅者
     <code>
      Listener
     </code>
     向
     <code>
      Talker
     </code>
     发送连接请求
    </h2>
    <p>
     订阅者
     <code>
      Listener
     </code>
     知道发布者
     <code>
      Talker
     </code>
     后，就会主动找到它，并且通过RPC向T
     <code>
      Talker
     </code>
     <br/>
     发送连接请求，传输订阅的话题名、消息类型以及通信协议。
    </p>
    <h2>
     <a id="Talker_44">
     </a>
     ⑤发布者
     <code>
      Talker
     </code>
     确认连接请求
    </h2>
    <p>
     <code>
      Talker
     </code>
     接收到
     <code>
      Listener
     </code>
     发送的连接请求后，继续通过RPC向
     <code>
      Listener
     </code>
     确认连接信息，同时发送自身相关的信息。
    </p>
    <h2>
     <a id="ListenerTalker_48">
     </a>
     ⑥
     <code>
      Listener
     </code>
     尝试与
     <code>
      Talker
     </code>
     建立网络连接
    </h2>
    <p>
     Listener接收到确认信息后，使用TCP尝试与
     <code>
      Talker
     </code>
     建立网络连接。
    </p>
    <h2>
     <a id="TalkerListener_52">
     </a>
     ⑦
     <code>
      Talker
     </code>
     向
     <code>
      Listener
     </code>
     发布消息
    </h2>
    <p>
     成功建立连接后，
     <code>
      Talker
     </code>
     开始向
     <code>
      Listener
     </code>
     发送话题消息数据。
    </p>
    <h2>
     <a id="_55">
     </a>
     总结
    </h2>
    <p>
     在节点与节点建立连接前，他们的通信协议都是RPC，而这主要都是依赖于节点管理器的，在节点与节点建立连接后，就直接是使用TCP协议进行数据传输，而不需要依赖节点管理器，此时节点管理器允许被关闭，但在关闭后，其他节点就不能订阅、发布这个话题消息了。
    </p>
    <p>
     总之节点管理器
     <code>
      ROS Master
     </code>
     在节点建立连接的过程中起到了重要作用，
     <strong>
      但是并不参与节点之间最终的数据传输。
     </strong>
    </p>
    <h2>
     <a id="_61">
     </a>
     引用说明
    </h2>
    <p>
     本文的部分截图来自书籍
     <a href="https://item.jd.com/12377412.html" rel="nofollow">
      《ROS机器人开发实践》 胡春旭 著
     </a>
     。
    </p>
    <h2>
     <a id="_65">
     </a>
     参考
    </h2>
    <p>
     <a href="http://wiki.ros.org/cn/ROS/Tutorials/UnderstandingTopics" rel="nofollow">
      ROS官方wiki
     </a>
    </p>
    <p>
     <a href="https://joveh-h.blog.csdn.net/article/details/90551432" rel="nofollow">
      ROS笔记（7） 话题通信
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6a69656a69656d63752f:61727469636c652f64657461696c732f313035333735353132" class_="artid" style="display:none">
 </p>
</div>


