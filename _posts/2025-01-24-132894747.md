---
layout: post
title: "免费和开源的机器翻译软件LibreTranslate"
date: 2025-01-24 17:03:55 +0800
description: "LibreTranslate 是免费开源的机器翻译软件，支持自托管、离线功能且易于设置。_libre"
keywords: "libretranslate"
categories: ['未分类']
tags: ['翻译', '群晖', '工具', 'Docker']
artid: "132894747"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=132894747
  alt: "免费和开源的机器翻译软件LibreTranslate"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     免费和开源的机器翻译软件LibreTranslate
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3ad5c92032f4ed6ad99c3467582cb5f0.png#pic_center"/>
    </p>
    <p>
     <strong>
      什么是 LibreTranslate ？
     </strong>
    </p>
    <blockquote>
     <p>
      <code>
       LibreTranslate
      </code>
      免费开源机器翻译
      <code>
       API
      </code>
      ，完全自托管。与其他
      <code>
       API
      </code>
      不同，它不依赖于
      <code>
       Google
      </code>
      或
      <code>
       Azure
      </code>
      等专有提供商来执行翻译。它的翻译引擎由开源
      <code>
       Argos Translate
      </code>
      库提供支持。
     </p>
    </blockquote>
    <p>
     这个软件在
     <code>
      2022
     </code>
     年
     <code>
      3
     </code>
     月的时候折腾过，但当时容器会停止，从下面的文章看，应该可能是内存不够。
    </p>
    <p>
     <a href="https://www.reddit.com/r/selfhosted/comments/yrdeyc/libretranslate_free_and_open_source_machine" rel="nofollow">
      https://www.reddit.com/r/selfhosted/comments/yrdeyc/libretranslate_free_and_open_source_machine
     </a>
    </p>
    <p>
     毕竟翻译模型和语言模型都是很耗资源的，当然除了内存，最好还有
     <code>
      GPU
     </code>
     的支持。
    </p>
    <p>
     今年
     <code>
      618
     </code>
     买了根内存条，所以又把它翻出来了，虽然才
     <code>
      8G
     </code>
     ，但确实跑起来了，也有可能是老苏选择的语言模型少的缘故。
    </p>
    <blockquote>
     <p>
      文中部分截图还是使用的老图，但不会影响您的理解；
     </p>
    </blockquote>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/8ba9440037c798527164e8e405236cf4.png"/>
    </p>
    <p>
     如果你不想自己搭建，可以去官方搭建的站点看看，网址：
     <a href="https://libretranslate.com/" rel="nofollow">
      https://libretranslate.com
     </a>
    </p>
    <h2>
     <a id="_21">
     </a>
     安装
    </h2>
    <p>
     在群晖上以 Docker 方式安装。
    </p>
    <p>
     在注册表中搜索
     <code>
      libretranslate
     </code>
     ，选择第一个
     <code>
      libretranslate/libretranslate
     </code>
     ，版本选择
     <code>
      latest
     </code>
     。
    </p>
    <blockquote>
     <ol>
      <li>
       本次折腾，
       <code>
        latest
       </code>
       对应的版本是
       <code>
        v1.3.11
       </code>
       ;
      </li>
      <li>
       如果你的主机带
       <code>
        nvidia
       </code>
       显卡，可以选择
       <code>
        latest-cuda
       </code>
       试试；
      </li>
     </ol>
    </blockquote>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/34541ba8a6b9f2d24b9f0b32b9b69bcd.png"/>
    </p>
    <h3>
     <a id="_32">
     </a>
     端口
    </h3>
    <p>
     本地端口不冲突就行，不确定的话可以用命令查一下
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 查看端口占用</span>
<span class="token function">netstat</span> <span class="token parameter variable">-tunlp</span> <span class="token operator">|</span> <span class="token function">grep</span> 端口号
</code></pre>
    <table>
     <thead>
      <tr>
       <th align="center">
        本地端口
       </th>
       <th align="center">
        容器端口
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="center">
        <code>
         5353
        </code>
       </td>
       <td align="center">
        <code>
         5000
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/3c67afdc7e740be93b138dc1a022c57c.png"/>
    </p>
    <h3>
     <a id="_47">
     </a>
     环境
    </h3>
    <p>
     <code>
      LibreTranslate
     </code>
     有很多命令行参数，可以参考官方的文档：
     <a href="https://github.com/LibreTranslate/LibreTranslate#arguments">
      https://github.com/LibreTranslate/LibreTranslate#arguments
     </a>
    </p>
    <blockquote>
     <p>
      【注意】：每个参数都有一个可以替代使用的等效环境变量。环境。变量会覆盖默认值，但优先级低于命令参数，并且在与
      <code>
       Docker
      </code>
      一起使用时特别有用。环境变量名称是等效命令参数名称的大写字母，带有
      <code>
       LT
      </code>
      前缀。
     </p>
    </blockquote>
    <p>
     老苏没有使用环境变量，而是在命令行中输入了
     <code>
      --load-only en,zh
     </code>
     ，意思是只加载中文和英文。如果要使用环境变量，可以用
     <code>
      LT_LOAD_ONLY
     </code>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/e4ac76bb787e0ff08daec5aa5cfc6cfc.png"/>
    </p>
    <h2>
     <a id="_57">
     </a>
     命令行运行
    </h2>
    <blockquote>
     <p>
      命令行方式中，老苏对容器的最大内存使用量和
      <code>
       CPU
      </code>
      占用做了限制；当然机器够强的话，可以不做限制的；
     </p>
    </blockquote>
    <h3>
     <a id="docker_cli__61">
     </a>
     docker cli 安装
    </h3>
    <p>
     如果你熟悉命令行，可能用
     <code>
      docker cli
     </code>
     更快捷
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 运行容器（低调内敛模式）</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
   <span class="token parameter variable">--restart</span> unless-stopped <span class="token punctuation">\</span>
   <span class="token parameter variable">--name</span> libretranslate <span class="token punctuation">\</span>
   --cpu-shares<span class="token operator">=</span><span class="token string">"700"</span> <span class="token punctuation">\</span>
   <span class="token parameter variable">--memory</span> 4096m <span class="token punctuation">\</span>
   <span class="token parameter variable">-p</span> <span class="token number">5353</span>:5000 <span class="token punctuation">\</span>
   libretranslate/libretranslate <span class="token punctuation">\</span>
   --load-only en,zh

<span class="token comment"># 运行容器（火力全开模式）</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--restart</span> unless-stopped <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> libretranslate <span class="token punctuation">\</span>
<span class="token parameter variable">-p</span> <span class="token number">5353</span>:5000 <span class="token punctuation">\</span>
libretranslate/libretranslate <span class="token punctuation">\</span>
--load-only en,zh
</code></pre>
<p>
<strong>
参数说明：
</strong>
</p>
<ul>
<li>
<code>
--cpus-shares="700"
</code>
：为容器提供更少比例的
<code>
CPU
</code>
周期，默认为
<code>
1024
</code>
;
</li>
<li>
<code>
--memory 4096m
</code>
；为容器的内存使用设置一个无法超越的硬限制；
</li>
</ul>
<p>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b265c8da65e6058516a512c783c3df4b.png#pic_center"/>
</p>
<p>
从上图可以看到，第一次运行时，会下载我们设定的语言模型
</p>
<h3>
<a id="dockercompose__95">
</a>
docker-compose 安装
</h3>
<blockquote>
<p>
不推荐这种方式安装，会看不到容器的日志，原因不明；这会导致你不知道语言模型是否下载成功，因而不知道什么时候才能正常访问
</p>
</blockquote>
<p>
<img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/0cf0bdc01f6c03c356c25336286fa13a.png"/>
</p>
<p>
也可以用
<code>
docker-compose
</code>
安装，将下面的内容保存为
<code>
docker-compose.yml
</code>
文件
</p>
<pre><code class="prism language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
<span class="token key atrule">libretranslate</span><span class="token punctuation">:</span>
<span class="token key atrule">image</span><span class="token punctuation">:</span> libretranslate/libretranslate
<span class="token key atrule">container_name</span><span class="token punctuation">:</span> libretranslate
<span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
<span class="token comment"># mem_limit: 4096m</span>
<span class="token comment"># cpu_shares: 700</span>
<span class="token key atrule">ports</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> 5353<span class="token punctuation">:</span><span class="token number">5000</span>
<span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
<span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'CMD-SHELL'</span><span class="token punctuation">,</span> <span class="token string">'./venv/bin/python scripts/healthcheck.py'</span><span class="token punctuation">]</span>
<span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>load<span class="token punctuation">-</span>only en<span class="token punctuation">,</span>zh
</code></pre>
<blockquote>
<p>
如果你想启用资源限制，可以去掉
<code> #
</code>
号的注释；
</p>
</blockquote>
<p>
然后执行下面的命令
</p>
<pre><code class="prism language-bash"><span class="token comment"># 新建文件夹 libretranslate </span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /volume1/docker/libretranslate

<span class="token comment"># 进入 libretranslate 目录</span>
<span class="token builtin class-name">cd</span> /volume1/docker/libretranslate

<span class="token comment"># 将 docker-compose.yml 放入当前目录</span>

<span class="token comment"># 一键启动</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre>
<p>
<img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/1fdedba3ce3f7d3d54b71d49bb32a1e6.png"/>
</p>
<h2>
<a id="_139">
</a>
运行
</h2>
<p>
第一次运行会需要下载语言模型
</p>
<p>
<img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/b1d5d098a5d0ee3e7aa5283ccc7ddb37.png"/>
</p>
<p>
当你在日志中看到
<code>
Running on http://0.0.0.0:5000
</code>
时，就可以在浏览器中输入
<code>
http://群晖 IP:5353
</code>
，并看到主界面了
</p>
<p>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4ac13a9e09f3368eb774e946bfda3afb.png#pic_center"/>
</p>
<p>
复制了下面这段英文，试了下
<code>
英翻中
</code>
</p>
<pre><code class="prism language-text">Free and Open Source Machine Translation API. Self-hosted, offline capable and easy to setup.
</code></pre>
<p>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7573b1825ac32b177b40c3ba2d44d52f.png#pic_center"/>
</p>
<p>
又用下面这段中文，试了下
<code>
中翻英
</code>
</p>
<pre><code class="prism language-text">Plane 是一个简单的、可扩展的、开源的项目和产品管理工具。
</code></pre>
<p>
<code>
LibreTranslate
</code>
翻译的
</p>
<pre><code class="prism language-text">Plane is a simple, expanded, open-source project and product management tool
</code></pre>
<p>
<img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/db975dc216462c506e4fde7161213d5f.png"/>
</p>
<p>
百度翻译的
</p>
<pre><code class="prism language-text">Plane is a simple, scalable, open-source project and product management tool.
</code></pre>
<p>
<img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/cea197606e6e14f53007538b074fdde7.png"/>
</p>
<p>
似乎看起来效果还可以对吧，此外还支持翻译文件，格式也比较丰富
</p>
<p>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6cdb3fefe9d5577e6ebd065d3d3ae89c.png#pic_center"/>
</p>
<p>
至于
<code>
API
</code>
一般人也用不上，就不提了
</p>
<h2>
<a id="_188">
</a>
参考文档
</h2>
<blockquote>
<p>
LibreTranslate/LibreTranslate: Free and Open Source Machine Translation API. 100% self-hosted, offline capable and easy to setup.
<br/>
地址：
<a href="https://github.com/LibreTranslate/LibreTranslate">
https://github.com/LibreTranslate/LibreTranslate
</a>
</p>
</blockquote>
<blockquote>
<p>
Docker Container Memory &amp; CPU Limit: Set Up and Manage Resources
<br/>
地址：
<a href="https://phoenixnap.com/kb/docker-memory-and-cpu-limit" rel="nofollow">
https://phoenixnap.com/kb/docker-memory-and-cpu-limit
</a>
</p>
</blockquote>

   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f77627375323030342f:61727469636c652f64657461696c732f313332383934373437" class_="artid" style="display:none">
 </p>
</div>
