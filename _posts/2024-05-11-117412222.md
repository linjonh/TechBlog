---
layout: post
title: "如何处理数据库瓶颈问题"
date: 2024-05-11 11:33:15 +0800
description: "亿级数据量系统数据库性能优化方案wangpf2011 2019-08-28 12:36:20  21"
keywords: "数据库瓶颈"
categories: ['']
tags: ['无标签']
artid: "117412222"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=117412222
    alt: "如何处理数据库瓶颈问题"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     如何处理数据库瓶颈问题
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     亿级数据量系统数据库性能优化方案
     <br/>
     一、数据库性能瓶颈主要原因
     <br/>
     1、数据库连接
    </p>
    <p>
     MySQL数据库默认连接为100，我们可以通过配置initialSize、minIdle、maxActive等进行调优，但由于硬件资源的限制，数据库连接不可能无限制的增加，对大型单体应用单实例数据库可能会出现最大连接数不能满足实际需求的情况，这时就会系统业务阻塞。
    </p>
    <p>
     2、表数据量大（空间存储问题）
    </p>
    <p>
     普遍观点认为单表数据量超过1000万条时就是出现数据库读取性能瓶颈。从索引角度分析，如果索引未被命中，数据库系统就会全表扫描，数据量越大，扫描全表的时间就会越长；即使索引被命中了，由于B+TREE索引是存放在硬盘上的，数据量越大B+TREE层次越深，IO次数也就越多。
    </p>
    <p>
     3、硬件资源限制
    </p>
    <p>
     硬件资源直接影响QPS每秒查询数/TPS每秒事务数。
    </p>
    <p>
     二、数据性能优化方案
     <br/>
     常见的数据性能优化方案：SQL优化、缓存、创建索引、读写分离、分库分表等。
    </p>
    <p>
     解决大数据量性能优化，真正有效方案是采用分布式数据存储，即上面所述读写分离和分库分表。
    </p>
    <p>
     1、读写分离
    </p>
    <p>
     读写分离基于主从复制，采用区别读、写多数据源方式进行数据的存储和加载。数据的存储（增删改）指定写数据源，数据的读取查询指定读数据源。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/38f3480835db8151e1eb50c0c82c988c.png"/>
    </p>
    <p>
     通过读写分离复制与master相同的数据源（一主多从），多数据源可以部署到不同主机上，从而可以解决数据里连接瓶颈和硬件资源限制问题。
    </p>
    <p>
     2、分库分表
    </p>
    <p>
     对数据的库表进行拆分，用分片的方式对数据进行管理。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5cc2596c8558ed0c9882e36166686fa9.png"/>
    </p>
    <p>
     数据库垂直拆分将单一库拆分多个领域数据库，使各领域数据库移植性更好，功能划分更清晰。同时也能解决数据库连接、硬件资源限制问题。任何一种方案在解决问题的同时，也会带来新的问题，分库分表也不例外，比如关联查询变得复杂、分布式事务问题等。
    </p>
    <p>
     水平拆分是将大表按照一定规则拆分成若干个小表，比如将3000万数据量的一张单表user拆分为3个小表user01、user02、user03。主要解决了单表数据量大问题，从而也就解决了存储空间带来的数据库性能瓶颈。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/98a5b9bc820e20cf04cebcea5933f736.png"/>
    </p>
    <p>
     下一篇文章将重点讲解MyCat及其在分库分表方面的应用，更详细介绍分库分表实现方案。
     <br/>
     ————————————————
    </p>
    <p>
     转自参考链接：https://blog.csdn.net/wangpf2011/article/details/100116677
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33323532373434392f:61727469636c652f64657461696c732f313137343132323232" class_="artid" style="display:none">
 </p>
</div>


