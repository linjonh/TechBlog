---
layout: post
title: "vueelement-实现动态多条件搜索查询"
date: 2024-01-11 11:53:03 +0800
description: '<template>  <div class="k-search-sub">    <el-form'
keywords: "vue动态查询"
categories: ["未分类"]
tags: ["Vue"]
artid: "108006197"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=108006197
  alt: "vueelement-实现动态多条件搜索查询"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     vue+element  实现动态多条件搜索查询
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <pre><code class="language-javascript">
&lt;template&gt;
  &lt;div class="k-search-sub"&gt;
    &lt;el-form :inline="true" :model="seachData" class="demo-form-inline"&gt;
      &lt;!-- Input 输入框 --&gt;
      &lt;el-form-item :label="item.title" v-for="(item, index) in inputs" :key="item.model+''+index"&gt;
        &lt;el-input
          :style="{width:item.width+'px'}"
          v-model.trim="seachData.input[item.model]"
          :placeholder="item.placeholder?item.placeholder:''"
          @input="seachData.input[item.model]=$limit200and400(200,seachData.input[item.model])"
        &gt;&lt;/el-input&gt;
      &lt;/el-form-item&gt;

      &lt;!--  select  选择框 --&gt;
      &lt;el-form-item :label="item.title" v-for="(item, index) in selects" :key="item.model+''+index"&gt;
        &lt;slot v-if="item.slot" :name="item.slot"&gt;&lt;/slot&gt;
        &lt;el-select
          v-else
          :style="{width:item.width+'px'}"
          :disabled="item.disabled"
          :filterable="item.filterable"
          :clearable="typeof(item.clearable) == 'undefined'?true:item.clearable"
          v-model.trim="seachData.select[item.model]"
          :placeholder="item.placeholder?item.placeholder:''"
          @change="item.change?item.change($event):undefined"
          @clear="item.clear?item.clear():undefined"
        &gt;
          &lt;el-option
            v-for="(option, index) in item.options"
            :key="option.label+''+index"
            :label="option.label"
            :value="option.value"
            :disabled="option.disabled"
          &gt;&lt;/el-option&gt;
        &lt;/el-select&gt;
      &lt;/el-form-item&gt;

      &lt;!-- dateTime  起始时间选择器 --&gt;
      &lt;el-form-item :label="date.label" v-if="date.label"&gt;
        &lt;el-date-picker
          v-model="seachData.date[date.model]"
          :type="date.type?date.type:'daterange'"
          :value-format="date.format?date.format:'yyyy-MM-dd'"
          range-separator="至"
          start-placeholder=" "
          end-placeholder="  "
          :style="{width:date.width+'px'}"
        &gt;&lt;/el-date-picker&gt;
      &lt;/el-form-item&gt;

      &lt;!-- button  查询 &amp;&amp; 重置 --&gt;
      &lt;el-form-item&gt;
        &lt;el-button
          :type="button.type?button.type:'primary'"
          :plain="button.plain"
          :round="button.round"
          :circle="button.circle"
          :disabled="button.disabled"
          icon="el-icon-search"
          @click="search"
        &gt;查询&lt;/el-button&gt;
        &lt;el-button @click="onReset" icon="el-icon-refresh"&gt;重置&lt;/el-button&gt;
      &lt;/el-form-item&gt;
    &lt;/el-form&gt;

&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
name: "SearchBar",
props: {
inputs: {
default: () =&gt; {
return new Array();
},
},
selects: {
default: () =&gt; {
return new Array();
},
},
button: {
default: () =&gt; {
return new Object();
},
},
date: {
default: () =&gt; {
return new Object();
},
},
},
data() {
return {
seachData: {
input: {},
select: {},
date: {},
},
};
},
mounted() {
this.clearData();
},
methods: {
changeInput(key, value) {
},
/**
_ 查询
_/
search() {
let searchObj = {};
if (this.inputs.length != 0) {
this.inputs.map((el) =&gt; {
searchObj[el.model] = this.seachData.input[el.model] || "";
});
}
if (this.selects.length != 0) {
this.selects.map((el) =&gt; {
searchObj[el.model] = this.seachData.select[el.model] || "";
});
}
if (this.date.label) {
searchObj[this.date.model] = this.seachData.date[this.date.model] || [];
}
this.$emit("search", searchObj);
},
/**
_ 重置
_/
onReset() {
let searchObj = {};
if (this.inputs.length != 0) {
this.inputs.map((el) =&gt; {
searchObj[el.model] = "";
this.$set(this.seachData.input, el.model, "");
        });
      }
      if (this.selects.length != 0) {
        this.selects.map((el) =&gt; {
          searchObj[el.model] = "";
          this.$set(this.seachData.select, el.model, "");
});
}
if (this.date.label) {
searchObj[this.date.model] = [];
this.$set(this.seachData.date, el.model, []);
      }
      this.$emit("onReset", searchObj);
},
clearData() {
if (this.inputs.length != 0) {
this.inputs.map((el) =&gt; {
this.$set(this.seachData.input, el.model, "");
        });
      }
      if (this.selects.length != 0) {
        this.selects.map((el) =&gt; {
          this.$set(this.seachData.select, el.model, "");
});
}
if (this.date.label) {
this.$set(this.seachData.date, el.model, []);
}
},
},
};
&lt;/script&gt;
&lt;style scoped lang="scss"&gt;
// 搜索框 头部
.k-search-sub{
// padding: 10px 0 20px 0;
margin-top: 10px;
.el-form{
.el-form-item{
height: 30px;
line-height: 30px;
.el-form-item**label{
height: 30px;
line-height: 30px;
}
.el-input**inner{
width: 150px;
}
.el-range-editor{
width: 304px;
.el-range-separator{
width: 6%;
padding: 0px 2px;
}
}
.el-form-item**content{
height: 30px;
line-height: 30px;
.el-date-editor {
display: inline-block !important;
vertical-align: middle;
line-height: 24px;
.el-range**icon{
line-height: 22px;
}
.el-range-separator{
line-height: 22px;

            }
          }
          .el-select{
            // height: 30px;
            // line-height: 30px;

          }
        }
      }
      .right_btn{
        float: right;
        margin-right: 0px;
        // margin-top: 5px;
      }
    }

}

&lt;/style&gt;</code></pre>
<p>
该组件主要实现 多条件查询     通过传参进行动态生成
</p>
<pre><code> &lt;!-- 搜索框 --&gt;
&lt;search-bar :inputs="inputs" :selects="selects" @search="search" @onReset="onReset"&gt;
&lt;el-select v-model.trim="searchObj.appTypeId" @change="toSecondClass" slot="appTypeId"&gt;
&lt;el-option
v-for="(item, index) in optionsType"
:key="item.enumCode + index"
:label="item.enumName"
:value="item.enumCode"
/&gt;
&lt;/el-select&gt;

      &lt;el-select v-model.trim="searchObj.appClassId" slot="appClassId"&gt;
        &lt;el-option
          v-for="(item, index) in appClassList"
          :key="item.valueCode + index"
          :label="item.valueName"
          :value="item.valueCode"
        /&gt;
      &lt;/el-select&gt;
    &lt;/search-bar&gt;</code></pre>
    <p>
     <img alt="" height="394" src="https://i-blog.csdnimg.cn/blog_migrate/5416bb4e5ce3dac59650c17718b01b3d.png" width="1091"/>
    </p>
    <p>
    </p>
    <p>
     <img alt="" height="482" src="https://i-blog.csdnimg.cn/blog_migrate/89c0b98447f8fa9a815cd41fcdc967b2.png" width="1200"/>
    </p>
    <p>
    </p>
    <pre><code>&lt;template&gt;

&lt;div class="content"&gt;
&lt;!-- 搜索框 --&gt;
&lt;search-bar :inputs="inputs" :selects="selects" @search="search" @onReset="onReset" /&gt;

    &lt;!-- 表格 --&gt;
    &lt;div class="ktable"&gt;
      &lt;k-table
        :tableData="tableData"
        :searchObj="searchObj"
        :columns="columns"
        :operationObj="operationObj"
        @handleSizeChange="handleSizeChange"
        @handleCurrentChange="handleCurrentChange"
        @queryDetail="handleRouterDetail"
      &gt;
       &lt;el-table-column label="设备分类" slot="deviceClass"&gt;
        &lt;template slot-scope="scope"&gt;
          &lt;div&gt;{<!-- -->{scope.row.deviceClass}}&lt;/div&gt;
        &lt;/template&gt;
      &lt;/el-table-column&gt;
        &lt;el-table-column prop="createdAt" label="创建时间" slot="createdAt"&gt;
          &lt;template slot-scope="scope"&gt;
            &lt;span&gt;{<!-- -->{ moment(scope.row.createdAt).format("YYYY-MM-DD HH:mm")}}&lt;/span&gt;
          &lt;/template&gt;
        &lt;/el-table-column&gt;
      &lt;/k-table&gt;
    &lt;/div&gt;

    &lt;!-- 自定义模型=&gt; 查看详情 --&gt;
    &lt;el-dialog
      custom-class="maxHeightDialog"
        class="oflow"
      title="详情"
      :visible.sync="dialogVisible"
      :close-on-click-modal="false"
    &gt;
      &lt;pre v-html="jsonData"&gt;&lt;/pre&gt;
    &lt;/el-dialog&gt;

&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import SearchBar from "@/components/SearchBar";
import KTable from "@/components/KTable/index";
import formatJson from "@/utils/formatJson.js";
import { queryBaseOrganizeList, getModelProvinceList } from "@/api/appManage";

export default {
name: "ElementTest",
components: {
SearchBar,
KTable
},
data() {
return {
inputs: [
{ title: "模型编码", model: "model", width: "" },
{ title: "设备名称", model: "productName", width: "" }
],
selects: [
{
title: "组织名称",
model: "bcId",
change: val =&gt; {},
options: []
}
],
// date: { label: "起止时间", type: "daterange", model: "datetime" },
tableData: [{}],
searchObj: {
model: "",
productName: "",
bcId: "",
currentPage: 1,
pageNum: 1,
pageSize: 10,
total: 0
},
columns: [
{ prop: "deviceType", label: "类型名称", width: "", hasSort: false },
{ slot: "deviceClass", },
{ prop: "model", label: "模型编码", width: "", hasSort: false },
{ prop: "protocolType", label: "协议", width: "", hasSort: false },
{ prop: "bcName", label: "组织名称", width: "", hasSort: false },
{ prop: "jsonDetail", label: "模型信息", width: "", hasSort: false },
{ slot: "createdAt" }
],
jsonData: "",
operationObj: {
queryDetailName: "查看详情"
},
dialogVisible: false
};
},
mounted() {
this.getType();
this.initData();
},
methods: {
initData() {
getModelProvinceList(this.searchObj).then(res =&gt; {
if (res) {
this.tableData = res.list;
this.searchObj.total = res.total;
}
});
},
search(val) {

      this.searchObj = Object.assign(this.searchObj, val);
      this.initData();
    },
    getType() {
      this.selects[0].options = [];
      queryBaseOrganizeList().then(res =&gt; {
        if (res.data) {
          res.data.map(el =&gt; {
            let obj = {
              label: el.bcName,
              value: el.bcId
            };
            this.selects[0].options.push(obj);
          });
          this.selects[0].options.unshift({ value: "", label: "全部" });
        }
      });
    },
    onReset(val) {
      this.searchObj = {
        model: "",
        productName: "",
        bcId: "",
        currentPage: 1,
        pageNum: 1,
        pageSize: 10,
        total: 0
      };

      this.initData();
    },
    // 分页
    handleSizeChange(val) {
      this.searchObj.pageSize = val;
      this.initData();
    },
    // 分页
    handleCurrentChange(val) {
      this.searchObj.pageNum = val;
      this.searchObj.currentPage = val;
      this.initData();
    },
    // 查看详情
    handleRouterDetail(row) {
      let showJson = JSON.parse(JSON.stringify(row));
      showJson.jsonDetail = JSON.parse(showJson.jsonDetail);
      this.jsonData = formatJson(showJson);
      this.dialogVisible = true;
    }

}
};
&lt;/script&gt;
&lt;style lang="scss" scoped&gt;
.content {
box-sizing: border-box;
height: 100%;
position: relative;
font-size: 14px;
line-height: 28px;
padding: 10px 20px;
margin-bottom: 10px;
}
&lt;/style&gt;</code></pre>
<p>
</p>

   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34303737393939392f:61727469636c652f64657461696c732f313038303036313937" class_="artid" style="display:none">
 </p>
</div>
