---
layout: post
title: "python-m-SimpleHTTPServer-快速搭建http服务"
date: 2024-12-05 11:31:48 +0800
description: "首先确保装了Python，我的操作系统是WIN7，其实对于Python来说，什么操作系统并不重要。P"
keywords: "python -m simple"
categories: ['Python']
tags: ['开发语言', 'Python', 'Http']
artid: "122238403"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=122238403
    alt: "python-m-SimpleHTTPServer-快速搭建http服务"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     python -m SimpleHTTPServer 快速搭建http服务
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
    </h3>
    <p>
     搭建FTP，或者是搭建网络文件系统，这些方法都能够实现Linux的目录共享。但是FTP和网络文件系统的功能都过于强大，因此它们都有一些不够方便的地方。比如你想快速共享Linux系统的某个目录给整个项目团队，还想在一分钟内做到，怎么办？
    </p>
    <p>
     <strong>
      很简单，使用SimpleHTTPServer
     </strong>
    </p>
    <p>
     各种Linux发行版通常都内置了Python，故使用此方法非常方便。在其它OS（比如Windows）此方法也有效，但是要麻烦一些，必须先搭建Python环境。
    </p>
    <p>
     SimpleHTTPServer是Python 2自带的一个模块，是Python的Web服务器。
     <strong>
      它在Python 3已经合并到http.server模块中。SimpleHTTPServer在Python 3的用法与在Python 2的用法相似(
      <span style="color:#fe2c24;">
       python3 -m http.server 6789
      </span>
      ), 本文以Python 2为例。
     </strong>
    </p>
    <p>
     SimpleHTTPServer有一个特性，如果待共享的目录下有index.html，那么index.html文件会被视为默认主页；如果不存在index.html文件，那么就会显示整个目录列表。
    </p>
    <p>
     SimpleHTTPServer使用方法
    </p>
    <p>
     1）进入待分享的目录
     <br/>
     2）执行命令
    </p>
    <pre>　　<strong><span style="color:#fe2c24;"># python -m SimpleHTTPServer $端口号 </span></strong>
　　# 注意：不填端口号则默认使用8000端口。</pre>
    <p>
     3）浏览器访问该主机的地址：
     <a href="http://ip/" rel="nofollow" title="http://IP">
      http://IP
     </a>
     :端口号/
    </p>
    <p>
     首先确保装了Python，其实对于Python来说，什么操作系统并不重要。Python内置了一个简单的HTTP服务器，只需要在命令行下面敲一行命令，一个HTTP服务器就起来了：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
        <p>
         1
        </p>
       </td>
       <td>
        <p>
         <code>
          python
         </code>
         <code>
          -m
         </code>
         <code>
          SimpleHTTPServer 8111
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     后面的8111端口是可选的，不填会采用缺省端口8000。注意，这会将当前所在的文件夹设置为默认的Web目录，试着在浏览器敲入本机地址：http://localhost:8111
    </p>
    <p>
     <br/>
     如果当前文件夹有index.html文件，会默认显示该文件，否则，会以文件列表的形式显示目录下所有文件。这样已经实现了最基本的文件分享的目的，你可以做成一个脚本，再建立一个快捷方式，就可以很方便的启动文件分享了。如果有更多需求，完全可以根据自己需要定制，，或者直接看源码。我拷贝一段，方便参考：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
        <p>
         1
         <br/>
         2
         <br/>
         3
         <br/>
         4
         <br/>
         5
         <br/>
         6
         <br/>
         7
         <br/>
         8
         <br/>
         9
         <br/>
         10
         <br/>
         11
        </p>
       </td>
       <td>
        <p>
         <code>
          import
         </code>
         <code>
          SimpleHTTPServer
         </code>
         <br/>
         <code>
          import
         </code>
         <code>
          SocketServer
         </code>
         <br/>
         <br/>
         <code>
          PORT
         </code>
         <code>
          =
         </code>
         <code>
          8000
         </code>
         <br/>
         <br/>
         <code>
          Handler
         </code>
         <code>
          =
         </code>
         <code>
          SimpleHTTPServer.SimpleHTTPRequestHandler
         </code>
         <br/>
         <br/>
         <code>
          httpd
         </code>
         <code>
          =
         </code>
         <code>
          SocketServer.TCPServer(("", PORT), Handler)
         </code>
         <br/>
         <br/>
         <code>
          print
         </code>
         <code>
          "serving at port"
         </code>
         <code>
          , PORT
         </code>
         <br/>
         <code>
          httpd.serve_forever()
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     如果你想改变端口号，你可以使用如下的命令：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
        <p>
         1
        </p>
       </td>
       <td>
        <p>
         <code>
          python
         </code>
         <code>
          -m
         </code>
         <code>
          SimpleHTTPServer 8080
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     如果你只想让这个HTTP服务器服务于本地环境，那么，你需要定制一下你的Python的程序，下面是一个示例：
    </p>
    <table>
     <tbody>
      <tr>
       <td>
        <p>
         1
         <br/>
         2
         <br/>
         3
         <br/>
         4
         <br/>
         5
         <br/>
         6
         <br/>
         7
         <br/>
         8
         <br/>
         9
         <br/>
         10
         <br/>
         11
         <br/>
         12
         <br/>
         13
         <br/>
         14
         <br/>
         15
         <br/>
         16
         <br/>
         17
         <br/>
         18
         <br/>
         19
        </p>
       </td>
       <td>
        <p>
         <code>
          import
         </code>
         <code>
          sys
         </code>
         <br/>
         <code>
          import
         </code>
         <code>
          BaseHTTPServer
         </code>
         <br/>
         <code>
          from
         </code>
         <code>
          SimpleHTTPServer
         </code>
         <code>
          import
         </code>
         <code>
          SimpleHTTPRequestHandler
         </code>
         <br/>
         <code>
          HandlerClass
         </code>
         <code>
          =
         </code>
         <code>
          SimpleHTTPRequestHandler
         </code>
         <br/>
         <code>
          ServerClass
         </code>
         <code>
          =
         </code>
         <code>
          BaseHTTPServer.HTTPServer
         </code>
         <br/>
         <code>
          Protocol
         </code>
         <code>
          =
         </code>
         <code>
          "HTTP/1.0"
         </code>
         <br/>
         <code>
         </code>
         <br/>
         <code>
          if
         </code>
         <code>
          sys.argv[
         </code>
         <code>
          1
         </code>
         <code>
          :]:
         </code>
         <br/>
         <code>
         </code>
         <code>
          port
         </code>
         <code>
          =
         </code>
         <code>
          int
         </code>
         <code>
          (sys.argv[
         </code>
         <code>
          1
         </code>
         <code>
          ])
         </code>
         <br/>
         <code>
          else
         </code>
         <code>
          :
         </code>
         <br/>
         <code>
         </code>
         <code>
          port
         </code>
         <code>
          =
         </code>
         <code>
          8000
         </code>
         <br/>
         <code>
          server_address
         </code>
         <code>
          =
         </code>
         <code>
          (
         </code>
         <code>
          '127.0.0.1'
         </code>
         <code>
          , port)
         </code>
         <br/>
         <code>
         </code>
         <br/>
         <code>
          HandlerClass.protocol_version
         </code>
         <code>
          =
         </code>
         <code>
          Protocol
         </code>
         <br/>
         <code>
          httpd
         </code>
         <code>
          =
         </code>
         <code>
          ServerClass(server_address, HandlerClass)
         </code>
         <br/>
         <code>
         </code>
         <br/>
         <code>
          sa
         </code>
         <code>
          =
         </code>
         <code>
          httpd.socket.getsockname()
         </code>
         <br/>
         <code>
          print
         </code>
         <code>
          "Serving HTTP on"
         </code>
         <code>
          , sa[
         </code>
         <code>
          0
         </code>
         <code>
          ],
         </code>
         <code>
          "port"
         </code>
         <code>
          , sa[
         </code>
         <code>
          1
         </code>
         <code>
          ],
         </code>
         <code>
          "..."
         </code>
         <br/>
         <code>
          httpd.serve_forever()
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6c6a697a73682f:61727469636c652f64657461696c732f313232323338343033" class_="artid" style="display:none">
 </p>
</div>


