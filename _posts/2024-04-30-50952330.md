---
layout: post
title: "android中sqlite数据库的基本使用和添加多张表"
date: 2024-04-30 01:54:34 +0800
description: "看了很多关于android使用sqlite数据库的文章，很多都是介绍了数据库的建立和表的建立，而表通"
keywords: "sqlite多表单"
categories: ["未分类"]
tags: ["无标签"]
artid: "50952330"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=50952330
  alt: "android中sqlite数据库的基本使用和添加多张表"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     android中sqlite数据库的基本使用和添加多张表
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     <span style="margin:0px; padding:0px; font-size:16px">
      看了很多关于android使用sqlite数据库的文章，很多都是介绍了数据库的建立和表的建立，而表通常都是只建立一张，而实际情况我们用到的表可能不止一张，那这种情况下我们又该怎么办呢，好了，下面我教大家如何在sqlite数据库中建立多张表。
     </span>
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     <span style="margin:0px; padding:0px; font-size:16px">
      首先是如何建立数据库和表：
     </span>
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     <span style="margin:0px; padding:0px; font-size:16px">
      建立一个类继承SQLiteOpenHelper，即：
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; background-color:rgb(245,245,245)">
     <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">class</span> ReaderOpenHelper <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">extends</span> SQLiteOpenHelper</pre>
    </div>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     然后添加构造方法：
    </p>
    <div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; background-color:rgb(245,245,245)">
     <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ReaderOpenHelper(Context context) {
        
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">super</span>(context, "people.db", <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, 1<span style="margin:0px; padding:0px; line-height:1.5!important">);
        
    }</span></pre>
    </div>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     people.db是数据库名字，1是数据库版本。
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     然后在该类实现以下两个方法：
    </p>
    <div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; background-color:rgb(245,245,245)">
     <div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px">
      <span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important">
       <a style="margin:0px; padding:0px; color:rgb(0,105,214); font-weight:inherit; line-height:inherit; text-decoration:underline; border:none!important" target="_blank" title="复制代码">
        <img alt="复制代码" src="https://i-blog.csdnimg.cn/blog_migrate/69c5a8ac3fa60e0848d784a6dd461da6.gif" style="margin:0px; padding:0px; max-width:900px; border:none!important"/>
       </a>
      </span>
     </div>
     <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; line-height:1.5!important">@Override
    </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">void</span><span style="margin:0px; padding:0px; line-height:1.5!important"> onCreate(SQLiteDatabase db) {
        </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> TODO Auto-generated method stub</span>
     db.execSQL("create table readers(renumber integer primary key,rename text,retype text,reage text,rephone text,usename integer,password integer,createtime text)"<span style="margin:0px; padding:0px; line-height:1.5!important">);
     db.execSQL(</span>"create table books(booknumber integer primary key,bookname text,booktype text,bookeditor text,intime text,incounts integer)"<span style="margin:0px; padding:0px; line-height:1.5!important">);
    }</span></pre>
     <div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px">
      <span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important">
       <a style="margin:0px; padding:0px; color:rgb(0,105,214); font-weight:inherit; line-height:inherit; text-decoration:underline; border:none!important" target="_blank" title="复制代码">
        <img alt="复制代码" src="https://i-blog.csdnimg.cn/blog_migrate/69c5a8ac3fa60e0848d784a6dd461da6.gif" style="margin:0px; padding:0px; max-width:900px; border:none!important"/>
       </a>
      </span>
     </div>
    </div>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     db.execSQL的作用是执行SQL语句，create table readers是创建一个叫readers的表，括号里就是各个字段名和值类型。
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     这里创建了两张表。另一张叫books
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     继续实现：
    </p>
    <div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; background-color:rgb(245,245,245)">
     <div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px">
      <span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important">
       <a style="margin:0px; padding:0px; color:rgb(0,105,214); font-weight:inherit; line-height:inherit; text-decoration:underline; border:none!important" target="_blank" title="复制代码">
        <img alt="复制代码" src="https://i-blog.csdnimg.cn/blog_migrate/69c5a8ac3fa60e0848d784a6dd461da6.gif" style="margin:0px; padding:0px; max-width:900px; border:none!important"/>
       </a>
      </span>
     </div>
     <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; line-height:1.5!important">@Override
    </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">void</span> onUpgrade(SQLiteDatabase db, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">int</span> oldVersion, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">int</span><span style="margin:0px; padding:0px; line-height:1.5!important"> newVersion) {
        </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> TODO Auto-generated method stub</span>
        db.execSQL("drop if table exists readers"<span style="margin:0px; padding:0px; line-height:1.5!important">);
        db.execSQL(</span>"drop if table exists  books"<span style="margin:0px; padding:0px; line-height:1.5!important">);
        onCreate(db);
    }</span></pre>
     <div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px">
      <span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important">
       <a style="margin:0px; padding:0px; color:rgb(0,105,214); font-weight:inherit; line-height:inherit; text-decoration:underline; border:none!important" target="_blank" title="复制代码">
        <img alt="复制代码" src="https://i-blog.csdnimg.cn/blog_migrate/69c5a8ac3fa60e0848d784a6dd461da6.gif" style="margin:0px; padding:0px; max-width:900px; border:none!important"/>
       </a>
      </span>
     </div>
    </div>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     执行Sql语句"drop if table exists 表名"
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     这样你的sqlite数据库和两张表就创建完成了。
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     接下来再建一个数据库manager类，如：
    </p>
    <div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; background-color:rgb(245,245,245)">
     <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">class</span> ReaderManager </pre>
    </div>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     添加一个构造方法
    </p>
    <div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; background-color:rgb(245,245,245)">
     <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ReaderManager(Context conetxt) {
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">this</span>.context =<span style="margin:0px; padding:0px; line-height:1.5!important"> context;
        readerOpenHelper </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ReaderOpenHelper(conetxt);
    }</span></pre>
    </div>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px; line-height:19.5px; background-color:rgb(245,245,245)">
     然后添加表的操作方法：
    </p>
    <div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; background-color:rgb(245,245,245)">
     <div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px">
      <span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important">
       <a style="margin:0px; padding:0px; color:rgb(0,105,214); font-weight:inherit; line-height:inherit; text-decoration:underline; border:none!important" target="_blank" title="复制代码">
        <img alt="复制代码" src="https://i-blog.csdnimg.cn/blog_migrate/69c5a8ac3fa60e0848d784a6dd461da6.gif" style="margin:0px; padding:0px; max-width:900px; border:none!important"/>
       </a>
      </span>
     </div>
     <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">package</span><span style="margin:0px; padding:0px; line-height:1.5!important"> com.zhou.db;

</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> java.util.ArrayList;
</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> java.util.List;

</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> com.zhou.utils.Books;
</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> com.zhou.utils.Reader;

</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> android.content.ContentValues;
</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> android.content.Context;
</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> android.database.Cursor;
</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> android.database.sqlite.SQLiteDatabase;
</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">import</span><span style="margin:0px; padding:0px; line-height:1.5!important"> android.util.Log;

</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">class</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ReaderManager {
ReaderOpenHelper readerOpenHelper;
Context context;

    </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ReaderManager(Context conetxt) {
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">this</span>.context =<span style="margin:0px; padding:0px; line-height:1.5!important"> context;
        readerOpenHelper </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ReaderOpenHelper(conetxt);
    }

    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 增加读者</span>
    <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">void</span><span style="margin:0px; padding:0px; line-height:1.5!important"> addSQL(Reader reader) {
        SQLiteDatabase db </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">try</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db </span>=<span style="margin:0px; padding:0px; line-height:1.5!important"> readerOpenHelper.getWritableDatabase();
            ContentValues values </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ContentValues();
            values.put(</span>"renumber"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getReNumber());
            values.put(</span>"rename"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getName());
            values.put(</span>"retype"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getSex());
            values.put(</span>"reage"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getAge());
            values.put(</span>"rephone"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getPhoneNumber());
            values.put(</span>"createtime"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getCreateTime());
            values.put(</span>"usename"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getUseName());
            values.put(</span>"password"<span style="margin:0px; padding:0px; line-height:1.5!important">, reader.getPassword());
            db.insert(</span>"readers", <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">, values);
        } </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">catch</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (Exception e) {
            </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> TODO: handle exception</span>
        } <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">finally</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db.close();
        }
    }

    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 增加图书</span>
    <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">void</span><span style="margin:0px; padding:0px; line-height:1.5!important"> bookAddSQL(Books book) {
        SQLiteDatabase db </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">try</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db </span>=<span style="margin:0px; padding:0px; line-height:1.5!important"> readerOpenHelper.getWritableDatabase();
            ContentValues values </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ContentValues();
            values.put(</span>"booknumber"<span style="margin:0px; padding:0px; line-height:1.5!important">, book.getBookNumber());
            values.put(</span>"bookname"<span style="margin:0px; padding:0px; line-height:1.5!important">, book.getBookName());
            values.put(</span>"booktype"<span style="margin:0px; padding:0px; line-height:1.5!important">, book.getBookType());
            values.put(</span>"bookeditor"<span style="margin:0px; padding:0px; line-height:1.5!important">, book.getBookEditer());
            values.put(</span>"intime"<span style="margin:0px; padding:0px; line-height:1.5!important">, book.getInTime());
            values.put(</span>"incounts"<span style="margin:0px; padding:0px; line-height:1.5!important">, book.getCount());
            db.insert(</span>"books", <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">, values);
        } </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">catch</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (Exception e) {
            </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> TODO: handle exception</span>
        } <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">finally</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db.close();
        }
    }

    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 读者查询</span>
    <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> List&lt;Reader&gt;<span style="margin:0px; padding:0px; line-height:1.5!important"> selectSQL() {
        List</span>&lt;Reader&gt; list = <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span> ArrayList&lt;Reader&gt;<span style="margin:0px; padding:0px; line-height:1.5!important">();
        SQLiteDatabase db </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 获取一个光标对象</span>
        Cursor cursor = <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">try</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db </span>=<span style="margin:0px; padding:0px; line-height:1.5!important"> readerOpenHelper.getReadableDatabase();
            cursor </span>= db.query("readers", <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">);
            Reader reader </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
            </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">while</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (cursor.moveToNext()) {
                reader </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span><span style="margin:0px; padding:0px; line-height:1.5!important"> Reader();
                reader.setReNumber(cursor.getInt(cursor
                        .getColumnIndex(</span>"renumber"<span style="margin:0px; padding:0px; line-height:1.5!important">)));

                reader.setName(cursor.getString(cursor.getColumnIndex(</span>"rename"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                reader.setSex(cursor.getString(cursor.getColumnIndex(</span>"retype"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                reader.setAge(cursor.getString(cursor.getColumnIndex(</span>"reage"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                reader.setPhoneNumber(cursor.getString(cursor
                        .getColumnIndex(</span>"rephone"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                reader.setCreateTime(cursor.getString(cursor
                        .getColumnIndex(</span>"createtime"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                reader.setUseName(cursor.getInt(cursor
                        .getColumnIndex(</span>"usename"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                reader.setPassword(cursor.getInt(cursor
                        .getColumnIndex(</span>"password"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                list.add(reader);
            }
        } </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">catch</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (Exception e) {
            </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> TODO: handle exception</span>
        } <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">finally</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            cursor.close();
            db.close();
        }

        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">return</span><span style="margin:0px; padding:0px; line-height:1.5!important"> list;
    }

    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 图书查询</span>
    <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> List&lt;Books&gt;<span style="margin:0px; padding:0px; line-height:1.5!important"> bookSelectSQL() {
        List</span>&lt;Books&gt; list = <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span> ArrayList&lt;Books&gt;<span style="margin:0px; padding:0px; line-height:1.5!important">();
        SQLiteDatabase db </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 获取一个光标对象</span>
        Cursor cursor = <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">try</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db </span>=<span style="margin:0px; padding:0px; line-height:1.5!important"> readerOpenHelper.getReadableDatabase();
            cursor </span>= db.query("books", <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span>, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">);
            Books book </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
            </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">while</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (cursor.moveToNext()) {
                book </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span><span style="margin:0px; padding:0px; line-height:1.5!important"> Books();
                book.setBookNumber(cursor.getInt(cursor
                        .getColumnIndex(</span>"booknumber"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                book.setBookName(cursor.getString(cursor
                        .getColumnIndex(</span>"bookname"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                book.setBookType(cursor.getString(cursor
                        .getColumnIndex(</span>"booktype"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                book.setBookEditer(cursor.getString(cursor
                        .getColumnIndex(</span>"bookeditor"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                book.setInTime(cursor.getString(cursor.getColumnIndex(</span>"intime"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                book.setCount(cursor.getInt(cursor.getColumnIndex(</span>"incounts"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                Log.d(</span>"TAGG", cursor.getString(cursor.getColumnIndex("intime"<span style="margin:0px; padding:0px; line-height:1.5!important">)));
                list.add(book);
            }
        } </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">catch</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (Exception e) {
            </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> TODO: handle exception</span>
        } <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">finally</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            cursor.close();
            db.close();
        }

        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">return</span><span style="margin:0px; padding:0px; line-height:1.5!important"> list;
    }

    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 读者删除</span>
    <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">void</span> deleteSQL(<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">final</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">long</span><span style="margin:0px; padding:0px; line-height:1.5!important"> id) {
        SQLiteDatabase db </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">try</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db </span>=<span style="margin:0px; padding:0px; line-height:1.5!important"> readerOpenHelper.getWritableDatabase();
            db.delete(</span>"readers", "renumber=" + id, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">);
        } </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">catch</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (Exception e) {

        } </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">finally</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db.close();
        }
    }

    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 读者更新</span>

    <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">void</span> updateData(<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">int</span><span style="margin:0px; padding:0px; line-height:1.5!important"> id, String name, String sex, String age,
            String phoneNumber, </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">int</span><span style="margin:0px; padding:0px; line-height:1.5!important"> password) {

        SQLiteDatabase db </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">;
        </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">try</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db </span>=<span style="margin:0px; padding:0px; line-height:1.5!important"> readerOpenHelper.getWritableDatabase();
            ContentValues values </span>= <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">new</span><span style="margin:0px; padding:0px; line-height:1.5!important"> ContentValues();
            values.put(</span>"rename"<span style="margin:0px; padding:0px; line-height:1.5!important">, name);
            values.put(</span>"retype"<span style="margin:0px; padding:0px; line-height:1.5!important">, sex);
            values.put(</span>"reage"<span style="margin:0px; padding:0px; line-height:1.5!important">, age);
            values.put(</span>"rephone"<span style="margin:0px; padding:0px; line-height:1.5!important">, phoneNumber);
            values.put(</span>"password"<span style="margin:0px; padding:0px; line-height:1.5!important">, password);
            db.update(</span>"readers", values, "renumber=" + id, <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">null</span><span style="margin:0px; padding:0px; line-height:1.5!important">);
        } </span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">catch</span><span style="margin:0px; padding:0px; line-height:1.5!important"> (Exception e) {
            </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> TODO: handle exception</span>
        } <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">finally</span><span style="margin:0px; padding:0px; line-height:1.5!important"> {
            db.close();
        }

    }

    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> public long getCount() {
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span>
    <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> Cursor cursor = null;
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> long count = 0;
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> SQLiteDatabase db = null;
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> try {
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> db = readerOpenHelper.getWritableDatabase();
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> cursor = db.query("readers", null, null, null, null, null, null);
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span>
    <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> if (null != cursor) {
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> count = cursor.getCount();
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> cursor.close();
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> }
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> } catch (Exception e) {
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> } finally {
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> db.close();
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> }
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> return count;
    </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> }</span>

<span style="margin:0px; padding:0px; line-height:1.5!important">
}</span></pre>
    </div>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f78756e616e343139:2f61727469636c652f64657461696c732f3530393532333330" class_="artid" style="display:none">
 </p>
</div>
