---
title: "åˆ›å»ºPythonç±»åº“.whlæ–‡ä»¶"
date: "2025-07-25T16:39:56+08:00"
keywords: "åˆ›å»ºPythonç±»åº“"
categories: ['Pythonç±»åº“']
tags: ['Pythonç±»åº“','whl']
image: "https://api.vvhan.com/api/bing?rand=sj&t=2025-07-25"
---
![](https://api.vvhan.com/api/bing?rand=sj&t=2025-07-25)

å¦‚æœä½ æƒ³**ç§æœ‰éƒ¨ç½² pip åŒ…**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å‘å¸ƒåˆ° PyPIï¼Œè€Œæ˜¯è‡ªå·±å†…éƒ¨ä½¿ç”¨ï¼Œæœ‰å‡ ç§æ–¹å¼å¯ä»¥å®ç°ã€‚ä¸‹é¢æ˜¯å¸¸è§çš„åšæ³•å’Œé€‚åˆçš„åœºæ™¯ï¼š

---

## ğŸ§© æ–¹æ³•ä¸€ï¼šç›´æ¥é€šè¿‡æœ¬åœ°è·¯å¾„æˆ–æ–‡ä»¶å®‰è£…ï¼ˆå¼€å‘/æµ‹è¯•æœ€ç®€å•ï¼‰

### âœ… åœºæ™¯ï¼šè‡ªå·±æˆ–å›¢é˜Ÿå†…æœ¬åœ°ä½¿ç”¨

### æ“ä½œï¼š

æ‰“åŒ…ä½ çš„åŒ…ï¼š

```bash
python -m build
```

ç„¶åå®‰è£…ï¼š

```bash
pip install dist/your_package_name-0.1.0-py3-none-any.whl
```

ä¹Ÿå¯ä»¥ä¸æ‰“åŒ…ï¼Œç›´æ¥å®‰è£…æºç ç›®å½•ï¼š

```bash
pip install .
```

æˆ–ï¼š

```bash
pip install -e .   # å¼€å‘æ¨¡å¼ï¼ˆä¿®æ”¹æºç ç«‹å³ç”Ÿæ•ˆï¼‰
```

---

## ğŸŒ æ–¹æ³•äºŒï¼šé€šè¿‡ç§æœ‰ Git ä»“åº“å®‰è£…

### âœ… åœºæ™¯ï¼šä½ åœ¨ GitHub / GitLab / å…¬å¸ Git æœåŠ¡å™¨æœ‰é¡¹ç›®ä»“åº“

### æ“ä½œï¼š

```bash
pip install git+https://your.git.server/youruser/yourrepo.git@main
```

å¦‚æœé¡¹ç›®ç»“æ„ä¸æ˜¯æ ‡å‡†ç»“æ„ï¼Œè¿˜å¯ä»¥åŠ å­ç›®å½•ï¼š

```bash
pip install git+https://...git@main#egg=yourpkg&subdirectory=subdir
```

å¦‚æœ Git ä»“åº“æ˜¯ç§æœ‰çš„ï¼Œå¯ä»¥ï¼š

* ç”¨å¸¦ token çš„ URLï¼ˆä¸å®‰å…¨ï¼Œä½†èƒ½ç”¨ï¼‰
* é…ç½® `.netrc` æˆ– `ssh`

---

## ğŸ“¦ æ–¹æ³•ä¸‰ï¼šæ­å»ºç§æœ‰ PyPI æœåŠ¡å™¨

### âœ… åœºæ™¯ï¼šä½ æœ‰å…¬å¸å†…éƒ¨éƒ¨ç½²éœ€æ±‚ï¼ˆæœ€æ ‡å‡†ã€å¯æ§ï¼‰

#### é€‰é¡¹ Aï¼šä½¿ç”¨ `pypiserver`

ç®€å•æ­å»ºï¼š

```bash
pip install pypiserver
mkdir -p ~/packages
pypi-server run -p 8080 ~/packages
```

ä¸Šä¼ ä½ çš„åŒ…ï¼ˆ`.whl` æˆ– `.tar.gz`ï¼‰åˆ° `~/packages/`

å®‰è£…æ—¶ï¼š

```bash
pip install your-package --extra-index-url http://your-server:8080/simple
```

#### é€‰é¡¹ Bï¼šæ›´å¼ºçš„å·¥å…·ï¼ˆæ”¯æŒæƒé™æ§åˆ¶ï¼‰

* [DevPI](https://devpi.net/)
* [Sonatype Nexus](https://www.sonatype.com/products/repository-oss)
* [Artifactory](https://jfrog.com/artifactory/)

è¿™äº›é€‚åˆä¼ä¸šçº§éƒ¨ç½²ã€‚

---

## ğŸ” æ–¹æ³•å››ï¼šæœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨æˆ– Web æœåŠ¡å™¨ä½œä¸º index

å¦‚æœä½ åªæ˜¯æƒ³åœ¨å±€åŸŸç½‘é‡Œåˆ†å‘ï¼Œä¹Ÿå¯ä»¥æŠŠ `.whl` æ–‡ä»¶æ”¾åœ¨æŸä¸ªç›®å½•æˆ–æœåŠ¡å™¨ä¸Šï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªç®€å•çš„ index é¡µé¢ï¼š

```bash
python -m http.server 8000
```

è®¿é—® `http://localhost:8000/`ï¼Œç„¶åï¼š

```bash
pip install your-package --extra-index-url http://localhost:8000
```

å¿…é¡»åœ¨ç›®å½•ä¸‹æœ‰ä¸ªç®€å•çš„ `simple/index.html` ç»“æ„ï¼Œæˆ–è€…ä½ ä½¿ç”¨ `--find-links`ï¼š

```bash
pip install --find-links=http://localhost:8000 your-package
```

---

## ğŸ“ æ€»ç»“

| æ–¹å¼      | é€‚åˆåœºæ™¯       | å®‰è£…æ–¹å¼                     | å®‰å…¨æ€§/çµæ´»æ€§     |
| ------- | ---------- | ------------------------ | ----------- |
| æœ¬åœ°å®‰è£…    | æœ¬åœ°æµ‹è¯•ã€å¼€å‘    | `pip install .` æˆ– `.whl` | æœ€ç®€å•         |
| Git å®‰è£…  | å›¢é˜Ÿå…±äº«ã€CI/CD | `pip install git+...`    | å®‰å…¨æ€§è§† Git è®¤è¯ |
| ç§æœ‰ PyPI | ä¼ä¸šå†…éƒ¨       | `--extra-index-url`      | æ ‡å‡†ã€å¯æ§ã€æ¨è    |
| æ–‡ä»¶æœåŠ¡å™¨   | å¿«é€Ÿå…±äº«       | `--find-links`           | å¿«æ·ã€ä¸æ¨èé•¿æœŸä½¿ç”¨  |

---

éœ€è¦æˆ‘å¸®ä½ æ­ä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ç§æœ‰ pip åŒ…éƒ¨ç½²ä¾‹å­å—ï¼Ÿä¾‹å¦‚ï¼š`git+æœ¬åœ°ä»“åº“` æˆ– `pypiserver` æ¨¡æ‹Ÿéƒ¨ç½²ã€‚


ä½ è¯´çš„åº”è¯¥æ˜¯ï¼š`pyproject.toml`ã€`setup.cfg` ç­‰æ‰“åŒ…é…ç½®æ–‡ä»¶æ˜¯å¦éœ€è¦**æ‰‹åŠ¨ç¼–å†™**ï¼Œè¿˜æ˜¯å¯ä»¥é€šè¿‡å·¥å…·**è‡ªåŠ¨ç”Ÿæˆ**ã€‚

ç­”æ¡ˆæ˜¯ï¼š

---

## âœ… æœ‰å·¥å…·å¯ä»¥å¸®åŠ©ä½ è‡ªåŠ¨ç”Ÿæˆ `pyproject.toml`ï¼ˆæˆ–æ—§ç‰ˆçš„ `setup.py`ï¼‰

ä»¥ä¸‹æ˜¯å‡ ç§æ¨èå·¥å…·ï¼š

---

### ğŸ› ï¸ æ–¹æ³•ä¸€ï¼šä½¿ç”¨ \[**`hatch`**]ï¼ˆç°ä»£æ¨èï¼Œå®˜æ–¹æ”¯æŒï¼‰

#### å®‰è£…ï¼š

```bash
pip install hatch
```

#### åˆ›å»ºæ–°é¡¹ç›®ï¼š

```bash
hatch new myproject
```

è¿™ä¼šè‡ªåŠ¨ç”Ÿæˆï¼š

```
myproject/
â”œâ”€â”€ myproject/
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ pyproject.toml  âœ… âœ… âœ…
â””â”€â”€ README.md
```

`pyproject.toml` ç»“æ„æ¸…æ™°ï¼Œæ”¯æŒ CLI è„šæœ¬å£°æ˜ï¼Œéå¸¸é€‚åˆç°ä»£é¡¹ç›®ã€‚

---

### ğŸ› ï¸ æ–¹æ³•äºŒï¼šä½¿ç”¨ \[**`flit`**]ï¼ˆé€‚åˆçº¯ Python åŒ…ï¼‰

#### å®‰è£…ï¼š

```bash
pip install flit
```

#### åˆå§‹åŒ–ï¼š

```bash
flit init
```

å®ƒä¼šé—®ä½ ä¸€äº›é—®é¢˜ï¼Œç„¶åç”Ÿæˆä¸€ä¸ª `pyproject.toml` æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼š

```toml
[project]
name = "your-package"
authors = [{name = "Your Name", email = "you@example.com"}]
version = "0.1.0"
description = ""
readme = "README.md"
requires-python = ">=3.8"
dependencies = []

[project.scripts]
your-command = "your_module:main"
```

ç„¶åä½ åªéœ€è¿è¡Œï¼š

```bash
flit install
```

---

### ğŸ› ï¸ æ–¹æ³•ä¸‰ï¼š`setuptools`ï¼ˆæ‰‹åŠ¨å¤šï¼Œä½†é€šç”¨ï¼‰

#### åˆå§‹åŒ–é¡¹ç›®ï¼š

```bash
pip install setuptools
```

ä½ å¯ä»¥æ‰‹åŠ¨å†™ `pyproject.toml` æˆ–ä½¿ç”¨æ¨¡æ¿ç”Ÿæˆå™¨ï¼ˆå¦‚ cookiecutterï¼‰åˆå§‹åŒ–é¡¹ç›®ã€‚

---

### âœ… æ€»ç»“

| å·¥å…·         | æ˜¯å¦ç”Ÿæˆ `pyproject.toml` | æ˜¯å¦æ”¯æŒ CLI å®‰è£… | æ¨èæŒ‡æ•°  |
| ---------- | --------------------- | ----------- | ----- |
| Hatch      | âœ… æ˜¯                   | âœ… æ˜¯         | â­â­â­â­â­ |
| Flit       | âœ… æ˜¯                   | âœ… æ˜¯         | â­â­â­â­  |
| Setuptools | âœ… æ˜¯ï¼ˆè¾ƒç¹çï¼‰              | âœ… æ˜¯         | â­â­â­   |

---

# My python util collections
æˆ‘çš„ä¸ªäººpythonå·¥å…·é›†,æ¨¡å—æ„å»ºæµç¨‹ï¼š

## é¡¹ç›®ç»“æ„
```bash
â”œâ”€â”€ README.md
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ src
â”‚   â””â”€â”€ pyutils
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base_sqlite_db.py
â”‚       â”œâ”€â”€ my_log.py
â”‚       â”œâ”€â”€ utils.py
â”‚       â””â”€â”€ zip.py
â””â”€â”€ tests
    â””â”€â”€ test.py
```

## Moduleæ¨¡å—æ„å»º

- **1ã€ç¤ºä¾‹ï¼ˆä½¿ç”¨ setuptoolsï¼‰ï¼š**
    
    ```toml
    #åœ¨pyproject.tomlæ–‡ä»¶

    [build-system]
    requires = ["setuptools>=61.0"]
    build-backend = "setuptools.build_meta"

    [project]
    name = "your-package-name"
    version = "0.1.0"
    description = "ç®€çŸ­æè¿°"
    readme = "README.md"
    requires-python = ">=3.7"
    license = {text = "MIT"}
    authors = [
    {name = "ä½ çš„åå­—", email = "ä½ @é‚®ç®±.com"}
    ]
    dependencies = [
    "requests>=2.0",  # ä¾èµ–ç¤ºä¾‹
    ]

    [project.urls]
    Homepage = "https://github.com/yourname/yourproject"
    ```
- **2ã€æ„å»ºåŒ…**
    - å…ˆå®‰è£…æ‰“åŒ…å·¥å…·ï¼ˆä¸€æ¬¡æ€§æ“ä½œï¼‰ï¼š
    ```bash
    pip install build
    ```

    - ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š
    ```bash
    python -m build
    ```
    - ä¼šç”Ÿæˆï¼š

    ```pgsql
    dist/
    â”œâ”€â”€ your_package_name-0.1.0.tar.gz
    â””â”€â”€ your_package_name-0.1.0-py3-none-any.whl
    ```

# ä¸Šä¼ åˆ° PyPI
## å®‰è£…ä¸Šä¼ å·¥å…·ï¼š

```bash
pip install twine
```
## æ³¨å†Œå¹¶è·å– [PyPI](https://pypi.org/account/register/) è´¦å·

ä¸Šä¼ ï¼š

```bash
twine upload dist/*
```
è¾“å…¥ä½ çš„ PyPI ç”¨æˆ·åå’Œå¯†ç å³å¯ã€‚

ğŸ’¡ æœ€æ–°ç‰ˆæœ¬twineå¯èƒ½æ˜¯OIDC çš„API tokenï¼Œåœ¨pypiçš„ä¸ªäººè´¦å·ä¸‹åˆ›å»º API tokenï¼Œ
å¹¶åœ¨`~/.pypirc`æœ¬åœ°ä¿å­˜é…ç½®ï¼Œå¯ä»¥é•¿æœŸå…è¾“å…¥tokenä½¿ç”¨ï¼š
```toml
[distutils]
index-servers =
    pypi
[pypi]
  repository= https://upload.pypi.org/legacy/ #ä¸Šä¼ åœ°å€
  username = __token__ #éªŒè¯ç±»å‹
  password =  #è¾“å…¥ä½ çš„token pypi-AgEIcHlwaS5.....
```

ğŸ’¡ å»ºè®®å…ˆä¸Šä¼ åˆ°æµ‹è¯•ç¯å¢ƒ Test PyPIï¼š

ğŸ’¡ Because TestPyPI has a separate database from the live PyPI, youâ€™ll need a separate user account specifically for TestPyPI. Go to https://test.pypi.org/account/register/ to register your account.
```bash
twine upload --repository testpypi dist/*
```

# åœ¨å…¶ä»–é¡¹ç›®ä¸­å®‰è£…
```bash
pip install your-package-name
```
æˆ–è€…ä» Test PyPIï¼š

```bash
pip install --index-url https://test.pypi.org/simple/ your-package-name
```