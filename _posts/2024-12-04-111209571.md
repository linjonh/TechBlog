---
layout: post
title: "Linux后台运行Java程序命令详解"
date: 2024-12-04 20:24:44 +0800
description: "nohup java -jar -Xms512m -Xmx512m app3.jar > /var/"
keywords: "linux java后台运行命令"
categories: ['Linux']
tags: ['无标签']
artid: "111209571"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=111209571
    alt: "Linux后台运行Java程序命令详解"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Linux后台运行Java程序命令详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <span style="color:#f33b45;">
      nohup java -jar -Xms512m -Xmx512m app3.jar &gt; /var/log/java/app3.log 2&gt;&amp;1 &amp;
     </span>
    </p>
    <p>
     上面是后台运行Java程序，并将日志输出到 /var/log/java/app3.log 的Linux命令，本文将详细分析此命令。
    </p>
    <p>
     <strong>
      启动jar包
     </strong>
    </p>
    <p>
     <span style="color:#f33b45;">
      java -jar -Xms512m -Xmx512m app3.jar
     </span>
     这条命令是运行app3.jar，并将最大堆内存、最小堆内存设置为512m。
    </p>
    <p>
     <strong>
      输出与输出重定向
     </strong>
    </p>
    <p>
     重定向命令列表
    </p>
    <table>
     <tbody>
      <tr>
       <th>
        命令
       </th>
       <th>
        说明
       </th>
      </tr>
      <tr>
       <td>
        command &gt; file
       </td>
       <td>
        将输出重定向到 file。
       </td>
      </tr>
      <tr>
       <td>
        command &lt; file
       </td>
       <td>
        将输入重定向到 file。
       </td>
      </tr>
      <tr>
       <td>
        command &gt;&gt; file
       </td>
       <td>
        将输出以追加的方式重定向到 file。
       </td>
      </tr>
      <tr>
       <td>
        n &gt; file
       </td>
       <td>
        将文件描述符为 n 的文件重定向到 file。
       </td>
      </tr>
      <tr>
       <td>
        n &gt;&gt; file
       </td>
       <td>
        将文件描述符为 n 的文件以追加的方式重定向到 file。
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     新建一个 file01.txt 文件，并填写一些内容。
    </p>
    <p>
     <span style="color:#f33b45;">
      vim file01.txt
     </span>
    </p>
    <p>
     输入 abcdefg
    </p>
    <p>
     执行
     <span style="color:#f33b45;">
      cat file01.txt &gt; file_new.txt
     </span>
     命令，cat命令的输出重定向到file_new.txt。
    </p>
    <p>
     执行
     <span style="color:#f33b45;">
      cat not-exit-file.txt &gt; not-exit-new.txt
     </span>
     命令，not-exit-file.txt 文件不存在，提示信息“cat: not-exit-file.txt: 没有那个文件或目录”是一个标准错误输出，而标准错误输出并没有重定向到 not-exit-new.txt
    </p>
    <p>
     <img alt="" height="103" src="https://i-blog.csdnimg.cn/blog_migrate/e9057053e2130fce1c5c1e614c342196.png" width="613"/>
    </p>
    <p>
     在Linux运行一个shell命令行时通常会自动打开三个标准文件：
    </p>
    <p>
     标准输入文件（stdin），文件描述符为0，通常对应终端的键盘，进程将从标准输入文件中得到输入数据。
     <br/>
     标准输出文件（stdout），文件描述符为1，正常输出数据输出到标准输出文件。
     <br/>
     标准错误输出文件（stderr），文件描述符为2，错误信息输出到标准错误文件中。
    </p>
    <p>
     &gt; 符号是将文件描述符为1的输出重定向到文件中，而 cat not-exit-file.txt 得到的是一个标准错误输出，如果要将标准错误输出重定向到文件，这要使用 2&gt; 符号
    </p>
    <p>
     <span style="color:#f33b45;">
      cat not-exit-file.txt 2&gt; not-exit-new.txt
     </span>
    </p>
    <p>
     <img alt="" height="107" src="https://i-blog.csdnimg.cn/blog_migrate/ba5c468790c0d2fb6f7c072511a546d6.png" width="641"/>
    </p>
    <p>
     如果要将标准输出和标准错误输出都重定向到文件，可使用 command &gt; file 2&gt;&amp;1 命令。
    </p>
    <p>
     java -jar -Xms512m -Xmx512m app3.jar
     <span style="color:#f33b45;">
      &gt; /var/log/java/app3.log 2&gt;&amp;1
     </span>
     此命令便是运行app3.jar，并将标准输出和标准错误输出重定向到 /var/log/java/app3.log
    </p>
    <p>
     <strong>
      后台启动 &amp;
     </strong>
    </p>
    <p>
     在终端运行某个命令时，终端被该命令占据，可以在命令后面加上 &amp; 实现后台运行。
    </p>
    <p>
     java -jar -Xms512m -Xmx512m app3.jar &gt; /var/log/java/app3.log 2&gt;&amp;1
     <span style="color:#f33b45;">
      &amp;
     </span>
     这条命令便是后台运行app3.jar
    </p>
    <p>
     但这种启动方式有缺陷，使用&amp;启动的后台进程与终端关联，当用户注销（logout）或者网络断开时，终端会收到Linux HUP信号（hangup）从而关闭终端，并且关闭其所有子进程。
    </p>
    <p>
     <strong>
      nohup不挂起( no hang up)
     </strong>
    </p>
    <p>
     使用nohup命令可以使得进程忽略HUP信号，即便终端关闭了，nohup启动的进程也不会被关闭。
    </p>
    <p>
     <span style="color:#f33b45;">
      nohup
     </span>
     java -jar -Xms512m -Xmx512m app3.jar &gt; /var/log/java/app3.log 2&gt;&amp;1 &amp;
    </p>
    <p>
     <strong>
      总结
     </strong>
    </p>
    <p>
     nohup java -jar -Xms512m -Xmx512m app3.jar &gt; /var/log/java/app3.log 2&gt;&amp;1 &amp;
    </p>
    <p>
     这条命令的作用是：让app3.jar在后台运行，将标准输出、标准错误输出重定向到/var/log/java/app3.log，并且忽略HUP信号，终端关闭时，本进程不关闭。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031303630363339372f:61727469636c652f64657461696c732f313131323039353731" class_="artid" style="display:none">
 </p>
</div>


