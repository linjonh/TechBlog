---
layout: post
title: "Java中Date与LocalDateLocalDateTime之间的区别及相互转换"
date: 2024-11-29 17:08:59 +0800
description: "Java中Date与LocalDate、LocalDateTime之间的区别及相互转换_date l"
keywords: "date localdate"
categories: ['Java']
tags: ['开发语言', 'Java']
artid: "136241929"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=136241929
    alt: "Java中Date与LocalDateLocalDateTime之间的区别及相互转换"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java中Date与LocalDate、LocalDateTime之间的区别及相互转换
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     前言
    </h3>
    <p>
     在Java开发过程中，处理日期和时间是常见的需求。随着Java 8引入了全新的日期/时间API，原有的
     <code>
      java.util.Date
     </code>
     类逐渐被
     <code>
      java.time
     </code>
     包中的
     <code>
      LocalDate
     </code>
     和
     <code>
      LocalDateTime
     </code>
     等类所替代。本文将详细阐述这三个类之间的主要区别以及它们之间的相互转换。
    </p>
    <h4>
     <a id="1__4">
     </a>
     1. 类型介绍与特点
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        java.util.Date
       </strong>
      </p>
      <p>
       <code>
        Date
       </code>
       类是Java早期版本提供的用于表示特定的瞬间，精确到毫秒级别的日期和时间对象。它包含了一个从格林尼治标准时间1970年1月1日0点0分0秒（即Unix纪元）开始计算的毫秒数。这个类的设计存在一些问题，如非线程安全、可变性以及时区处理不便等。
      </p>
     </li>
     <li>
      <p>
       <strong>
        java.time.LocalDate
       </strong>
      </p>
      <p>
       <code>
        LocalDate
       </code>
       是Java 8新增的时间API类，仅表示日期部分，不包括时间信息，也不包含任何时区信息。它是不可变的，提供对年、月、日的精确操作，并且支持各种日期计算方法。
      </p>
     </li>
     <li>
      <p>
       <strong>
        java.time.LocalDateTime
       </strong>
      </p>
      <p>
       <code>
        LocalDateTime
       </code>
       同样来自Java 8的新时间API，它不仅包含日期信息，还包含了时间信息，但同样不带有时区。它也是不可变的，提供了丰富的日期和时间的操作功能，比如获取当前日期时间、增加或减少日期时间单位等。
      </p>
     </li>
    </ul>
    <h4>
     <a id="2__18">
     </a>
     2. 主要区别
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        精度与范围
       </strong>
      </p>
      <ul>
       <li>
        <code>
         Date
        </code>
        ：存储的是自Unix纪元以来的毫秒数，因此它的精度是到毫秒级别。
       </li>
       <li>
        <code>
         LocalDate
        </code>
        ：只表示日期，没有时间信息，精度到天。
       </li>
       <li>
        <code>
         LocalDateTime
        </code>
        ：同时表示日期和时间，精度同样是到纳秒级别。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        时区
       </strong>
      </p>
      <ul>
       <li>
        <code>
         Date
        </code>
        ：虽然实际存储的是UTC时间戳，但是由于其设计原因，在显示和解析时可能会受到默认时区的影响。
       </li>
       <li>
        <code>
         LocalDate
        </code>
        和
        <code>
         LocalDateTime
        </code>
        ：都不包含时区信息，代表的是本地日期和时间。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        可变性
       </strong>
      </p>
      <ul>
       <li>
        <code>
         Date
        </code>
        ：是可变的，可以通过方法修改其内部值。
       </li>
       <li>
        <code>
         LocalDate
        </code>
        和
        <code>
         LocalDateTime
        </code>
        ：都是不可变的，每次更改都会返回一个新的实例。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        易用性与安全性
       </strong>
      </p>
      <ul>
       <li>
        <code>
         Date
        </code>
        ：使用起来较为繁琐，且容易出现并发问题，因为很多操作不是线程安全的。
       </li>
       <li>
        <code>
         LocalDate
        </code>
        和
        <code>
         LocalDateTime
        </code>
        ：具有更好的API设计，易于理解和使用，同时由于不可变性，更有利于编写线程安全的代码。
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="3__41">
     </a>
     3. 相互转换
    </h4>
    <h5>
     <a id="DateLocalDateLocalDateTime_43">
     </a>
     Date转LocalDate或LocalDateTime
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Timestamp</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">ZoneId</span></span><span class="token punctuation">;</span>

<span class="token comment">// Date -&gt; LocalDate</span>
<span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">atZone</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Date -&gt; LocalDateTime</span>
<span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">atZone</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocalDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="LocalDateLocalDateTimeDate_58">
     </a>
     LocalDate或LocalDateTime转Date
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Timestamp</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">ZoneId</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token comment">// LocalDate -&gt; Date</span>
<span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>localDate<span class="token punctuation">.</span><span class="token function">atStartOfDay</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// LocalDateTime -&gt; Date</span>
<span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">.</span><span class="token function">atZone</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="_76">
     </a>
     总结
    </h3>
    <p>
     <code>
      java.util.Date
     </code>
     在Java 8以后已经不再是推荐使用的日期时间类，而
     <code>
      LocalDate
     </code>
     和
     <code>
      LocalDateTime
     </code>
     分别对应日期和日期时间的精确表达，具有更好的设计和更多的功能。在处理日期时间相关的业务逻辑时，应优先考虑使用新的
     <code>
      java.time
     </code>
     包下的类。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f77656e7875616e6b656a692f:61727469636c652f64657461696c732f313336323431393239" class_="artid" style="display:none">
 </p>
</div>


