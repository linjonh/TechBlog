---
layout: post
title: "pc-端-前端对接支付宝支付-前端获取支付宝返回的form-表单以及submit提交表单,自动跳转支付页面扫码支付"
date: 2024-12-30 18:55:33 +0800
description: "项目中用到了微信扫码，支付宝扫码支付。前端调取支付宝接口（后台进行了封装，没有直接调取支付宝接口）。"
keywords: "前端支付宝支付返回的链接怎么访问"
categories: ['Javascript']
tags: ['Pc']
artid: "92801626"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=92801626
    alt: "pc-端-前端对接支付宝支付-前端获取支付宝返回的form-表单以及submit提交表单,自动跳转支付页面扫码支付"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     pc 端 前端对接支付宝支付-前端获取支付宝返回的form 表单以及submit提交表单，自动跳转支付页面扫码支付
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     项目中用到了微信扫码，支付宝扫码支付。前端调取支付宝接口（后台进行了封装，没有直接调取支付宝接口）。
     <br/>
     调用接口返回数据中，会有一串form表单字符串返回，前端需要做的就是把这串form 表单字符串通过appendchild 方法添加到当前页面中，并且执行这个表单的submit() 方法，表单提交以后，会自动跳转到支付宝扫码支付页面
    </p>
    <p>
     返回的form数据大概如下，（可能会有差别）
    </p>
    <pre><code>&lt;form name="punchout_form" method="post" action="https://openapi.alipay.com/gateway.do?charset=GBK&amp;method=alipay.trade.page.pay&amp;sign=tXR6yxB9Uowu7tfbXVPHBoQXeyOqP2JXvo%2Fzmz%2BIA08aWin63h1%2FF7gHNN7I2K%2FnTV3ZYtvPkILu%2FS8uPmzpsAv1SJev0UNN2AbLDIGvbd%2BWn5neyIUqKcu5ySP1S8Bt4fbnvkMgnlijR25obVi5aFbj99JBZDrpeJ5cB9uq7Ccx7nX54%2F7coNv26PFD%2FPirlIKVVr2avD2w%3D%3D&amp;return_url=http%3A%2F%2Fwww.shanshiwangluo.com%2F%23%2FpayNotify&amp;notify_url=http%3A%2F%2Fwww.shanshiwangluo.com%2Fssmall%2Fportal%2Forder%2Fpay%2FaliCallback&amp;version=1.0&amp;app_id=2018062260383877&amp;sign_type=RSA2&amp;timestamp=2018-12-15+17%3A13%3A32&amp;alipay_sdk=alipay-sdk-java-dynamicVersionNo&amp;format=json"&gt;
&lt;input type="hidden" name="biz_content" value="{    &amp;quot;out_trade_no&amp;quot;:&amp;quot;1812141933252566&amp;quot;,    &amp;quot;product_code&amp;quot;:&amp;quot;FAST_INSTANT_TRADE_PAY&amp;quot;,    &amp;quot;total_amount&amp;quot;:0.02,    &amp;quot;subject&amp;quot;:&amp;quot; 订单：1812141933252566&amp;quot;,    &amp;quot;extend_params&amp;quot;:{    &amp;quot;sys_service_provider_id&amp;quot;:&amp;quot;2018062211454921&amp;quot;    }  }"&gt;
&lt;input type="submit" value="立即支付" style="display:none" &gt;
&lt;/form&gt;
&lt;script&gt;document.forms[0].submit();&lt;/script&gt;
</code></pre>
    <p>
     前端实例代码：
    </p>
    <pre><code>//支付宝支付
 if(resp.code=="200"){
 // 添加之前先删除一下，如果单页面，页面不刷新，添加进去的内容会一直保留在页面中，二次调用form表单会出错
 let divForm = document.getElementsByTagName('divform')
    if (divForm.length) {
      document.body.removeChild(divForm[0])
    }
     const div=document.createElement('divform');
     div.innerHTML=resp.data; // data就是接口返回的form 表单字符串
     document.body.appendChild(div);
     document.forms[0].setAttribute('target', '_blank') // 新开窗口跳转
     document.forms[0].submit();
 }else{
     this.$alert("错误："+resp.data,"提示",{
         confirmButtonText:'确定'
     });
 }

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f736869383531303531323739:2f61727469636c652f64657461696c732f3932383031363236" class_="artid" style="display:none">
 </p>
</div>


