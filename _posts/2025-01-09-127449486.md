---
layout: post
title: "微信小程序项目中that和this的区别this.setData报错undefined解决方法"
date: 2025-01-09 01:22:42 +0800
description: "本文探讨了在微信小程序开发中遇到的`setData`未定义错误，该错误源于`this`指向问题。在小"
keywords: "微信小程序this和that"
categories: ["未分类"]
tags: ["微信小程序", "小程序"]
artid: "127449486"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=127449486
  alt: "微信小程序项目中that和this的区别this.setData报错undefined解决方法"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序项目中that和this的区别（this.setData()报错undefined解决方法）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     在编写获取用户信息进行登录的代码时，报了一个这样的错误
    </p>
    <p>
     <img alt="" height="183" src="https://i-blog.csdnimg.cn/blog_migrate/34aa8a69511cc4e2d6f38cd7c133b5d1.png" width="598"/>
    </p>
    <h3>
     <span style="color:#fe2c24;">
      后面经过摸索，最终发现是this指向的问题！！！
     </span>
    </h3>
    <p>
    </p>
    <p>
     <strong>
      现在我们来看看如何解决小程序中this指向问题以及that和this的区别
     </strong>
    </p>
    <p>
     在微信小程序中，setData使用最频繁的接口，也是最容易引发性能问题的接口
    </p>
    <p>
     在上面发生了'setData' undefined，那么我们定位到问题代码段
    </p>
    <p>
     <img alt="" height="479" src="https://i-blog.csdnimg.cn/blog_migrate/521fc013ef59c545e2cba7de4feb53d7.png" width="423"/>
    </p>
    <p>
     this代表着当前对象，会随着程序的执行过程中的执行上下文改变
    </p>
    <p>
     通常就是谁调用它，this就指向谁
    </p>
    <p>
    </p>
    <h3>
     <span style="color:#fe2c24;">
      <strong>
       打印this，看看它到底指向谁！！！
      </strong>
     </span>
    </h3>
    <p>
     <img alt="" height="360" src="https://i-blog.csdnimg.cn/blog_migrate/a564de503732a51a2c02b589fd8aad84.png" width="424"/>
    </p>
    <p>
     分别打印两个不同位置的this，看看它们分别指向什么
    </p>
    <p>
     <img alt="" height="51" src="https://i-blog.csdnimg.cn/blog_migrate/a91e55a8912067c2c0ce630d7db95a71.png" width="760"/>
    </p>
    <p>
     <img alt="" height="28" src="https://i-blog.csdnimg.cn/blog_migrate/737636cbc7ab75ebfc2e88aeccf52c9a.png" width="550"/>
    </p>
    <p>
     外部的this指向的是当前页面，内部的this为undefined
    </p>
    <p>
     我们调用setData是要改变这个页面的data的值，所以这里用到的this是外部的this
    </p>
    <p>
    </p>
    <h3>
     <span style="color:#fe2c24;">
      如何修改this？
     </span>
    </h3>
    <h3>
     <span style="color:#fe2c24;">
     </span>
     <img alt="" height="360" src="https://i-blog.csdnimg.cn/blog_migrate/27bda6485865049d4e9d5eda48062490.png" width="335"/>
    </h3>
    <p>
     通过我们通过将外部this赋给that，来使用外部this即可，当然这里的that换成其他变量名都可以，只是大家经常用that来命名 ！
    </p>
    <p>
    </p>
    <h3>
     <span style="color:#fe2c24;">
      箭头函数的方法
     </span>
    </h3>
    <p>
     ES6语法增加了
     <a href="https://so.csdn.net/so/search?q=%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0&amp;spm=1001.2101.3001.7020" title="箭头函数">
      箭头函数
     </a>
     的规则，箭头函数的this指向上一级作用域
    </p>
    <p>
     <img alt="" height="333" src="https://i-blog.csdnimg.cn/blog_migrate/e6b4cf1475688348f1a2c0afc4753ce2.png" width="413"/>
    </p>
    <h3>
     <strong>
      <span style="color:#fe2c24;">
       所以我们可以直接把success
       <a href="https://so.csdn.net/so/search?q=%E5%9B%9E%E8%B0%83&amp;spm=1001.2101.3001.7020" title="回调">
        回调
       </a>
       函数里写成箭头函数形式！！！！
      </span>
     </strong>
    </h3>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36343130333034392f:61727469636c652f64657461696c732f313237343439343836" class_="artid" style="display:none">
 </p>
</div>
