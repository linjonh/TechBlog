---
layout: post
title: 毕业设计-python小游戏设计-走迷宫游戏设计与实现
date: 2022-09-21 09:56:53 +0800
description: 文章浏览阅读8.4k次，点赞9次，收藏178次。🔥 这两年开始毕业设计和毕业答辩的要求和难度不断提升
keywords: 毕业设计游戏设计题目
categories: ['计算机专业', '毕设选题', '毕业设计系列']
tags: ['走迷宫游戏设计', '游戏', '毕业设计', 'Python', 'Pygame']
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=126966726
    alt: 毕业设计-python小游戏设计-走迷宫游戏设计与实现
artid: 126966726
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【毕业设计】 python小游戏设计 - 走迷宫游戏设计与实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#0__3" rel="nofollow">
        0 前言
       </a>
      </li>
      <li>
       <a href="#1__23" rel="nofollow">
        1 课题背景
       </a>
      </li>
      <li>
       <a href="#2__31" rel="nofollow">
        2 实现效果
       </a>
      </li>
      <li>
       <a href="#3_Pygame_42" rel="nofollow">
        3 Pygame介绍
       </a>
      </li>
      <li>
       <a href="#4__101" rel="nofollow">
        4 具体实现
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#41__103" rel="nofollow">
          4.1 创建迷宫
         </a>
        </li>
        <li>
         <a href="#42__196" rel="nofollow">
          4.2 定义角色类
         </a>
        </li>
        <li>
         <a href="#43__266" rel="nofollow">
          4.3 界面切换
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#5__345" rel="nofollow">
        5 最后
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <hr color="#000000" size='1"'/>
    <h2>
     <a id="0__3">
     </a>
     0 前言
    </h2>
    <p>
     🔥 这两年开始毕业设计和毕业答辩的要求和难度不断提升，传统的毕设题目缺少创新和亮点，往往达不到毕业答辩的要求，这两年不断有学弟学妹告诉学长自己做的项目系统达不到老师的要求。
    </p>
    <p>
     为了大家能够顺利以及最少的精力通过毕设，学长分享优质毕业设计项目，今天要分享的是
    </p>
    <p>
     🚩
     <strong>
      基于python的走迷宫游戏设计与实现
     </strong>
    </p>
    <p>
     🥇学长这里给一个题目综合评分(每项满分5分)
    </p>
    <ul>
     <li>
      难度系数：3分
     </li>
     <li>
      工作量：3分
     </li>
     <li>
      创新点：3分
     </li>
    </ul>
    <p>
     🧿
     <strong>
      选题指导, 项目分享：
     </strong>
    </p>
    <p>
     <a href="https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md" rel="nofollow">
      https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md
     </a>
    </p>
    <h2>
     <a id="1__23">
     </a>
     1 课题背景
    </h2>
    <p>
     人类建造迷宫已有5000年的历史。在世界的不同文化发展时期，这些奇特的建筑物始终吸引人们沿着弯弯曲曲、困难重重的小路吃力地行走，寻找真相。迷宫类小游戏应运而生。
    </p>
    <p>
     今天我们用pygame做一个走迷宫小游戏，游戏规则如下：
    </p>
    <p>
     玩家通过↑↓←→键控制主角行动，使主角从出发点(左上角)绕出迷宫，到达终点(右下角)即为游戏胜利。
    </p>
    <h2>
     <a id="2__31">
     </a>
     2 实现效果
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2766045271564c94a905c9ca3762b381.png#pic_center" width="600"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/83002fc19f354179720559c0c1e798fc.png#pic_center" width="600"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/05820d794c2f528115a8a97eec441a47.png#pic_center" width="600"/>
    </p>
    <h2>
     <a id="3_Pygame_42">
     </a>
     3 Pygame介绍
    </h2>
    <p>
     <strong>
      简介
     </strong>
    </p>
    <p>
     Pygame是一系列专门为编写电子游戏而设计的Python模块(modules)。Pygame在已经非常优秀的SDL库的基础上增加了许多功能。这让你能够用Python语言编写出丰富多彩的游戏程序。
    </p>
    <p>
     Pygame可移植性高，几乎能在任何平台和操作系统上运行。
    </p>
    <p>
     Pygame已经被下载过数百万次。
    </p>
    <p>
     Pygame免费开源。它在LGPL许可证(Lesser General Public License，GNU宽通用公共许可证)下发行。使用Pygame，你可以创造出免费开源，可共享，或者商业化的游戏。详情请见LGPL许可证。
    </p>
    <p>
     <strong>
      优点
     </strong>
    </p>
    <ul>
     <li>
      <p>
       能够轻松使用多核CPU(multi core CPUs) :如今双核CPU很常用，8核CPU在桌面系统中也很便宜，而利用好多核系统，能让你在你的游戏中实现更多东西。特定的pygame函数能够释放令人生畏的python GIL(全局解释器锁),这几乎是你用C语言才能做的事。
      </p>
     </li>
     <li>
      <p>
       核心函数用最优化的C语言或汇编语言编写:C语言代码通常比Python代码运行速度快10-20倍。而汇编语言编写的代码(assembly code)比Python甚至快到100多倍。
      </p>
     </li>
     <li>
      <p>
       安装便捷:一般仅需包管理程序或二进制系统程序便能安装。
      </p>
     </li>
     <li>
      <p>
       真正地可移植:支持Linux (主要发行版), Windows (95, 98, ME, 2000, XP, Vista, 64-bit Windows,), Windows CE, BeOS, MacOS, Mac OS X, FreeBSD, NetBSD, OpenBSD, BSD/OS, Solaris, IRIX, and QNX等操作系统.也能支持AmigaOS, Dreamcast, Atari, AIX, OSF/Tru64, RISC OS, SymbianOS and OS/2，但是还没有受到官方认可。你也可以在手持设备,游戏控制台， One Laptop Per Child (OLPC) computer项目的电脑等设备中使用pygame.
      </p>
     </li>
     <li>
      <p>
       用法简单:无论是小孩子还是大人都能学会用pygame来制作射击类游戏。
      </p>
     </li>
     <li>
      <p>
       很多Pygame游戏已发行:其中包括很多游戏大赛入围作品、非常受欢迎的开源可分享的游戏。
      </p>
     </li>
     <li>
      <p>
       由你来控制主循环:由你来调用pygame的函数，pygame的函数并不需要调用你的函数。当你同时还在使用其他库来编写各种各种的程序时，这能够为你提供极大的掌控权。
      </p>
     </li>
     <li>
      <p>
       不需要GUI就能使用所有函数:仅在命令行中，你就可以使用pygame的某些函数来处理图片，获取游戏杆输入，播放音乐……
      </p>
     </li>
     <li>
      <p>
       对bug反应迅速:很多bug在被上报的1小时内就能被我们修复。虽然有时候我们确实会卡在某一个bug上很久，但大多数时候我们都是很不错的bug修复者。如今bug的上报已经很少了，因为许多bug早已被我们修复。
      </p>
     </li>
     <li>
      <p>
       代码量少:pygame并没有数以万计的也许你永远用不到的冗杂代码。pygame的核心代码一直保持着简洁特点，其他附加物诸如GUI库等，都是在核心代码之外单独设计研发的。
      </p>
     </li>
     <li>
      <p>
       模块化:你可以单独使用pygame的某个模块。想要换着使用一个别的声音处理库？没问题。pygame的很多核心模块支持独立初始化与使用。
      </p>
     </li>
    </ul>
    <p>
     <strong>
      最小开发框架
     </strong>
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> pygame<span class="token punctuation">,</span>sys <span class="token comment">#sys是python的标准库，提供Python运行时环境变量的操控</span>

pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#内部各功能模块进行初始化创建及变量设置，默认调用</span>
size <span class="token operator">=</span> width<span class="token punctuation">,</span>height <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">,</span><span class="token number">600</span>  <span class="token comment">#设置游戏窗口大小，分别是宽度和高度</span>
screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>size<span class="token punctuation">)</span>  <span class="token comment">#初始化显示窗口</span>
pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">"小游戏程序"</span><span class="token punctuation">)</span>  <span class="token comment">#设置显示窗口的标题内容，是一个字符串类型</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>  <span class="token comment">#无限循环，直到Python运行时退出结束</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#从Pygame的事件队列中取出事件，并从队列中删除该事件</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>  <span class="token comment">#获得事件类型，并逐类响应</span>
            sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">#用于退出结束游戏并退出          </span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#对显示窗口进行更新，默认窗口全部重绘</span>

</code></pre>
    <p>
     <strong>
      代码执行流程
     </strong>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/36f02db4ff5ef470d20b6f8d270b7017.png"/>
    </p>
    <h2>
     <a id="4__101">
     </a>
     4 具体实现
    </h2>
    <h3>
     <a id="41__103">
     </a>
     4.1 创建迷宫
    </h3>
    <p>
     首先，当然是创建迷宫啦，为了方便，这里采用随机生成迷宫的方式(人工设计真的费眼睛，弄到一半不想弄了，有兴趣的可以自行尝试。)。思路其实很简单，就是把游戏界面划分成多个cell，类似这样子：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8f43b1f77723737235d7c9c0a9ad54cf.png#pic_center">
      <br/>
      然后设计算法遍历所有的cell，每个被遍历到的cell在某几个随机的方向上打开一堵墙(就是去掉分割cell的线条)就ok啦~
     </img>
    </p>
    <p>
     算法如下：
    </p>
    <pre><code class="prism language-python"><span class="token triple-quoted-string string">'''随机生成迷宫类'''</span>
<span class="token keyword">class</span> <span class="token class-name">RandomMaze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> maze_size<span class="token punctuation">,</span> block_size<span class="token punctuation">,</span> border_size<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>block_size <span class="token operator">=</span> block_size
    self<span class="token punctuation">.</span>border_size <span class="token operator">=</span> border_size
    self<span class="token punctuation">.</span>maze_size <span class="token operator">=</span> maze_size
    self<span class="token punctuation">.</span>blocks_list <span class="token operator">=</span> RandomMaze<span class="token punctuation">.</span>createMaze<span class="token punctuation">(</span>maze_size<span class="token punctuation">,</span> block_size<span class="token punctuation">,</span> border_size<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>font <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>SysFont<span class="token punctuation">(</span><span class="token string">'Consolas'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token triple-quoted-string string">'''画到屏幕上'''</span>
  <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> screen<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>maze_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>maze_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>blocks_list<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">.</span>draw<span class="token punctuation">(</span>screen<span class="token punctuation">)</span>
    <span class="token comment"># 起点和终点标志</span>
    showText<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> <span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    showText<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>maze_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>self<span class="token punctuation">.</span>block_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>self<span class="token punctuation">.</span>maze_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>self<span class="token punctuation">.</span>block_size<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token triple-quoted-string string">'''创建迷宫'''</span>
  <span class="token decorator annotation punctuation">@staticmethod</span>
  <span class="token keyword">def</span> <span class="token function">createMaze</span><span class="token punctuation">(</span>maze_size<span class="token punctuation">,</span> block_size<span class="token punctuation">,</span> border_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">nextBlock</span><span class="token punctuation">(</span>block_now<span class="token punctuation">,</span> blocks_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
      directions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'top'</span><span class="token punctuation">,</span> <span class="token string">'bottom'</span><span class="token punctuation">,</span> <span class="token string">'left'</span><span class="token punctuation">,</span> <span class="token string">'right'</span><span class="token punctuation">]</span>
      blocks_around <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>directions<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      block_next <span class="token operator">=</span> <span class="token boolean">None</span>
      count <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token comment"># 查看上边block</span>
      <span class="token keyword">if</span> block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        block_now_top <span class="token operator">=</span> blocks_list<span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> block_now_top<span class="token punctuation">.</span>is_visited<span class="token punctuation">:</span>
          blocks_around<span class="token punctuation">[</span><span class="token string">'top'</span><span class="token punctuation">]</span> <span class="token operator">=</span> block_now_top
          count <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token comment"># 查看下边block</span>
      <span class="token keyword">if</span> block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;</span> maze_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        block_now_bottom <span class="token operator">=</span> blocks_list<span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> block_now_bottom<span class="token punctuation">.</span>is_visited<span class="token punctuation">:</span>
          blocks_around<span class="token punctuation">[</span><span class="token string">'bottom'</span><span class="token punctuation">]</span> <span class="token operator">=</span> block_now_bottom
          count <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token comment"># 查看左边block</span>
      <span class="token keyword">if</span> block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        block_now_left <span class="token operator">=</span> blocks_list<span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> block_now_left<span class="token punctuation">.</span>is_visited<span class="token punctuation">:</span>
          blocks_around<span class="token punctuation">[</span><span class="token string">'left'</span><span class="token punctuation">]</span> <span class="token operator">=</span> block_now_left
          count <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token comment"># 查看右边block</span>
      <span class="token keyword">if</span> block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;</span> maze_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        block_now_right <span class="token operator">=</span> blocks_list<span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>block_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> block_now_right<span class="token punctuation">.</span>is_visited<span class="token punctuation">:</span>
          blocks_around<span class="token punctuation">[</span><span class="token string">'right'</span><span class="token punctuation">]</span> <span class="token operator">=</span> block_now_right
          count <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token keyword">if</span> count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
          direction <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>directions<span class="token punctuation">)</span>
          <span class="token keyword">if</span> blocks_around<span class="token punctuation">.</span>get<span class="token punctuation">(</span>direction<span class="token punctuation">)</span><span class="token punctuation">:</span>
            block_next <span class="token operator">=</span> blocks_around<span class="token punctuation">.</span>get<span class="token punctuation">(</span>direction<span class="token punctuation">)</span>
            <span class="token keyword">if</span> direction <span class="token operator">==</span> <span class="token string">'top'</span><span class="token punctuation">:</span>
              block_next<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
              block_now<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
            <span class="token keyword">elif</span> direction <span class="token operator">==</span> <span class="token string">'bottom'</span><span class="token punctuation">:</span>
              block_next<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
              block_now<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
            <span class="token keyword">elif</span> direction <span class="token operator">==</span> <span class="token string">'left'</span><span class="token punctuation">:</span>
              block_next<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
              block_now<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
            <span class="token keyword">elif</span> direction <span class="token operator">==</span> <span class="token string">'right'</span><span class="token punctuation">:</span>
              block_next<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
              block_now<span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
            <span class="token keyword">break</span>
      <span class="token keyword">return</span> block_next
    blocks_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Block<span class="token punctuation">(</span><span class="token punctuation">[</span>col<span class="token punctuation">,</span> row<span class="token punctuation">]</span><span class="token punctuation">,</span> block_size<span class="token punctuation">,</span> border_size<span class="token punctuation">)</span> <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>maze_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>maze_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    block_now <span class="token operator">=</span> blocks_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    records <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
      <span class="token keyword">if</span> block_now<span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> block_now<span class="token punctuation">.</span>is_visited<span class="token punctuation">:</span>
          block_now<span class="token punctuation">.</span>is_visited <span class="token operator">=</span> <span class="token boolean">True</span>
          records<span class="token punctuation">.</span>append<span class="token punctuation">(</span>block_now<span class="token punctuation">)</span>
        block_now <span class="token operator">=</span> nextBlock<span class="token punctuation">(</span>block_now<span class="token punctuation">,</span> blocks_list<span class="token punctuation">)</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
        block_now <span class="token operator">=</span> records<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
          <span class="token keyword">break</span>
    <span class="token keyword">return</span> blocks_list
</code></pre>
    <h3>
     <a id="42__196">
     </a>
     4.2 定义角色类
    </h3>
    <p>
     角色类需要根据用户的操作进行上下左右的移动，同时，保证移动是不能跨越墙的就OK了~具体而言，以下两点：
    </p>
    <p>
     <strong>
      定义角色
     </strong>
    </p>
    <pre><code class="prism language-python"><span class="token triple-quoted-string string">'''定义hero'''</span>
<span class="token keyword">class</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> imagepath<span class="token punctuation">,</span> coordinate<span class="token punctuation">,</span> block_size<span class="token punctuation">,</span> border_size<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span>imagepath<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>scale<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">,</span> <span class="token punctuation">(</span>block_size<span class="token punctuation">,</span> block_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> block_size <span class="token operator">+</span> border_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> block_size <span class="token operator">+</span> border_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    self<span class="token punctuation">.</span>coordinate <span class="token operator">=</span> coordinate
    self<span class="token punctuation">.</span>block_size <span class="token operator">=</span> block_size
    self<span class="token punctuation">.</span>border_size <span class="token operator">=</span> border_size
</code></pre>
    <p>
     <strong>
      移动设置
     </strong>
    </p>
    <pre><code class="prism language-python"><span class="token triple-quoted-string string">'''移动'''</span>
  <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> direction<span class="token punctuation">,</span> maze<span class="token punctuation">)</span><span class="token punctuation">:</span>
    blocks_list <span class="token operator">=</span> maze<span class="token punctuation">.</span>blocks_list
    <span class="token keyword">if</span> direction <span class="token operator">==</span> <span class="token string">'up'</span><span class="token punctuation">:</span>
      <span class="token keyword">if</span> blocks_list<span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">elif</span> direction <span class="token operator">==</span> <span class="token string">'down'</span><span class="token punctuation">:</span>
      <span class="token keyword">if</span> blocks_list<span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">elif</span> direction <span class="token operator">==</span> <span class="token string">'left'</span><span class="token punctuation">:</span>
      <span class="token keyword">if</span> blocks_list<span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">elif</span> direction <span class="token operator">==</span> <span class="token string">'right'</span><span class="token punctuation">:</span>
      <span class="token keyword">if</span> blocks_list<span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>has_walls<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
      <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">'Unsupport direction &lt;%s&gt; in Hero.move...'</span> <span class="token operator">%</span> direction<span class="token punctuation">)</span>
  <span class="token triple-quoted-string string">'''绑定到屏幕'''</span>
  <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> screen<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>block_size <span class="token operator">+</span> self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>block_size <span class="token operator">+</span> self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      绑定到屏幕
     </strong>
    </p>
    <pre><code class="prism language-python"> <span class="token triple-quoted-string string">'''绑定到屏幕'''</span>
  <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> screen<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>block_size <span class="token operator">+</span> self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>block_size <span class="token operator">+</span> self<span class="token punctuation">.</span>border_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="43__266">
     </a>
     4.3 界面切换
    </h3>
    <p>
     最后要完成游戏主循环，只要每次载入一个随机生成的迷宫地图和实例化一个主角，不断进行按键检测，并根据按键检测的结果移动主角，最后根据行动结果更新界面数据就可以了
    </p>
    <p>
     若主角到达了终点，则进入关卡切换界面。
    </p>
    <p>
     具体而言，代码实现如下：
    </p>
    <pre><code class="prism language-python"><span class="token triple-quoted-string string">'''主函数'''</span>
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># 初始化</span>
  pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
  pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
  pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
  pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>load<span class="token punctuation">(</span>cfg<span class="token punctuation">.</span>BGMPATH<span class="token punctuation">)</span>
  pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>play<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>
  screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>cfg<span class="token punctuation">.</span>SCREENSIZE<span class="token punctuation">)</span>
  pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">'Maze - 微信公众号: Charles的皮卡丘'</span><span class="token punctuation">)</span>
  font <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>SysFont<span class="token punctuation">(</span><span class="token string">'Consolas'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token comment"># 开始界面</span>
  Interface<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> cfg<span class="token punctuation">,</span> <span class="token string">'game_start'</span><span class="token punctuation">)</span>
  <span class="token comment"># 记录关卡数</span>
  num_levels <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token comment"># 记录最少用了多少步通关</span>
  best_scores <span class="token operator">=</span> <span class="token string">'None'</span>
  <span class="token comment"># 关卡循环切换</span>
  <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    num_levels <span class="token operator">+=</span> <span class="token number">1</span>
    clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>
    screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>cfg<span class="token punctuation">.</span>SCREENSIZE<span class="token punctuation">)</span>
    <span class="token comment"># --随机生成关卡地图</span>
    maze_now <span class="token operator">=</span> RandomMaze<span class="token punctuation">(</span>cfg<span class="token punctuation">.</span>MAZESIZE<span class="token punctuation">,</span> cfg<span class="token punctuation">.</span>BLOCKSIZE<span class="token punctuation">,</span> cfg<span class="token punctuation">.</span>BORDERSIZE<span class="token punctuation">)</span>
    <span class="token comment"># --生成hero</span>
    hero_now <span class="token operator">=</span> Hero<span class="token punctuation">(</span>cfg<span class="token punctuation">.</span>HEROPICPATH<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cfg<span class="token punctuation">.</span>BLOCKSIZE<span class="token punctuation">,</span> cfg<span class="token punctuation">.</span>BORDERSIZE<span class="token punctuation">)</span>
    <span class="token comment"># --统计步数</span>
    num_steps <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token comment"># --关卡内主循环</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
      dt <span class="token operator">=</span> clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span>cfg<span class="token punctuation">.</span>FPS<span class="token punctuation">)</span>
      screen<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      is_move <span class="token operator">=</span> <span class="token boolean">False</span>
      <span class="token comment"># ----↑↓←→控制hero</span>
      <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
          pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
          sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>KEYDOWN<span class="token punctuation">:</span>
          <span class="token keyword">if</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_UP<span class="token punctuation">:</span>
            is_move <span class="token operator">=</span> hero_now<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token string">'up'</span><span class="token punctuation">,</span> maze_now<span class="token punctuation">)</span>
          <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_DOWN<span class="token punctuation">:</span>
            is_move <span class="token operator">=</span> hero_now<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token string">'down'</span><span class="token punctuation">,</span> maze_now<span class="token punctuation">)</span>
          <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_LEFT<span class="token punctuation">:</span>
            is_move <span class="token operator">=</span> hero_now<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">,</span> maze_now<span class="token punctuation">)</span>
          <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_RIGHT<span class="token punctuation">:</span>
            is_move <span class="token operator">=</span> hero_now<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token string">'right'</span><span class="token punctuation">,</span> maze_now<span class="token punctuation">)</span>
      num_steps <span class="token operator">+=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>is_move<span class="token punctuation">)</span>
      hero_now<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>screen<span class="token punctuation">)</span>
      maze_now<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>screen<span class="token punctuation">)</span>
      <span class="token comment"># ----显示一些信息</span>
      showText<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token string">'LEVELDONE: %d'</span> <span class="token operator">%</span> num_levels<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      showText<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token string">'BESTSCORE: %s'</span> <span class="token operator">%</span> best_scores<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">210</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      showText<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token string">'USEDSTEPS: %s'</span> <span class="token operator">%</span> num_steps<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">410</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      showText<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token string">'S: your starting point    D: your destination'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment"># ----判断游戏是否胜利</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hero_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> cfg<span class="token punctuation">.</span>MAZESIZE<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span>hero_now<span class="token punctuation">.</span>coordinate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> cfg<span class="token punctuation">.</span>MAZESIZE<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
      pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 更新最优成绩</span>
    <span class="token keyword">if</span> best_scores <span class="token operator">==</span> <span class="token string">'None'</span><span class="token punctuation">:</span>
      best_scores <span class="token operator">=</span> num_steps
    <span class="token keyword">else</span><span class="token punctuation">:</span>
      <span class="token keyword">if</span> best_scores <span class="token operator">&gt;</span> num_steps<span class="token punctuation">:</span>
        best_scores <span class="token operator">=</span> num_steps
    <span class="token comment"># 关卡切换</span>
    Interface<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> cfg<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'game_switch'</span><span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="5__345">
     </a>
     5 最后
    </h2>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f485558494e592f:61727469636c652f64657461696c732f313236393636373236" class_="artid" style="display:none">
 </p>
</div>


