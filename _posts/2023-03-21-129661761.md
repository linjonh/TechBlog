---
layout: post
title: "前端学习笔记17-RuoYi框架前端功能实现及二次封装组件解析"
date: 2023-03-21 15:07:36 +0800
description: "文章浏览阅读5k次，点赞5次，本文详细介绍了前端权限管理的实现，包括菜单权限、按钮权限、接口权限的控"
keywords: "若依前端"
categories: ['']
tags: ['前端框架', '前端', 'Vue', 'Javascript']
artid: "129661761"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=129661761
    alt: "前端学习笔记17-RuoYi框架前端功能实现及二次封装组件解析"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端学习笔记（17）-RuoYi框架前端功能实现及二次封装组件解析
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div class="kdocs-document">
     <p style="">
      （未完，持续更新）
     </p>
     <h5 style="">
      1.功能实现
     </h5>
     <h6 style="">
      1.1前端部分权限管理
     </h6>
     <h6 style="">
      1.1.1什么是权限管理
     </h6>
     <p style="">
      登录的人的角色可能是超级管理员、管理员、以及普通用户或者有更多的层级角色，拥有不同权限的用户登录系统之后看到的界面是不一样的。
     </p>
     <p style="">
      若依系统中的权限分为以下几类：
     </p>
     <blockquote class="kdocs-blockquote" style="">
      1 菜单权限：用户登录系统之后能看到哪些菜单
      <br/>
      2 按钮权限：用户在一个页面上能看到哪些按钮，比如新增、删除等按钮
      <br/>
      3 接口权限：用户带着认证信息请求后端接口，是否有权限访问，该接口和前端页面上的按钮一一对应
      <br/>
      4 数据权限：用户有权限访问后端某个接口，但是不同的用户相同的接口相同的入参，根据权限大小不同，返回的结果应当不一样——权限大的能够看到的数据更多。
     </blockquote>
     <h6 style="text-align:left;">
      1.1.2菜单权限
     </h6>
     <p style="">
      <span class="kdocs-bold" style="font-weight:bold;">
       （1）获取用户角色、权限存入Vuex
      </span>
     </p>
     <p style="text-indent:1.4em;">
      permission.js文件中设置了
      <a class="kdocs-link" href="https://so.csdn.net/so/search?q=%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB&amp;spm=1001.2101.3001.7020" rel="noopener noreferrer" style="color:#0A6CFF;" target="_blank">
       导航守卫
      </a>
      ，每次路由发生变化的时候就会触发router.beforeEach的回调函数。当用户登录时，会调用代码如下：
     </p>
     <pre class="kdocs-typescript"><code class="language-typescript">//permission.js
isRelogin.show = true
        // 判断当前用户是否已拉取完user_info信息
        useUserStore().getInfo().then(() =&gt; {
          //...
        }).catch(err =&gt; {
          useUserStore().logOut().then(() =&gt; {
            ElMessage.error(err)
            next({ path: '/' })
          })
        })</code></pre>
     <p style="text-indent:1.4em;">
      将用户的权限字符存入数据库，当用户登录后根据用户的登录信息获取用户的所有信息（包括用户的权限信息），也就是调用Vuex里user模块的actions：getInfo()，将角色信息roles、权限标识存入user模块的states。
     </p>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:368px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:79.07609%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/16f4f139d3dcce1e1f78bab5b9208d0f.png" style="margin-left:;display:block;width:368px;margin-top:-79.07609%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <pre class="kdocs-typescript"><code class="language-typescript">//user.js(store)
// 获取用户信息
      getInfo() {
        return new Promise((resolve, reject) =&gt; {
          getInfo().then(res =&gt; {
            console.log(res)
            const user = res.user
            const avatar = (user.avatar == "" || user.avatar == null) ? defAva : user.avatar;

            if (res.roles &amp;&amp; res.roles.length &gt; 0) { // 验证返回的roles是否是一个非空数组
              this.roles = res.roles
              this.permissions = res.permissions
            } else {
              this.roles = ['ROLE_DEFAULT']
            }
            this.name = user.userName
            this.avatar = avatar;
            resolve(res)
          }).catch(error =&gt; {
            reject(error)
          })
        })
      },</code></pre>
     <p style="text-indent:1.4em;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （2）获取路由数据，动态路由遍历，验证是否具备权限
      </span>
     </p>
     <p style="text-indent:1.4em;padding-left:1.4em;">
      后端请求可以访问的路由数据，遍历后台传来的路由字符串，转换为组件对象，根据roles权限生成可访问的路由表。
     </p>
     <p style="text-indent:1.4em;padding-left:1.4em;">
      动态路由遍历，验证是否具备权限，如果具备权限也加入路由表。
     </p>
     <pre class="kdocs-typescript"><code class="language-typescript">//permission.js(store)
generateRoutes(roles) {
        return new Promise(resolve =&gt; {
          // 向后端请求路由数据
          getRouters().then(res =&gt; {
               //...
                // 遍历后台传来的路由字符串，转换为组件对象
                const rewriteRoutes = filterAsyncRouter(rdata, false, true)
               //... 
                resolve(rewriteRoutes)
          })
        })
      }</code></pre>
     <p style="text-indent:1.4em;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （3）获取路由实例，调用addRoute动态添加可访问路由表
      </span>
     </p>
     <p style="">
      添加路由配置具体可见：
      <a class="kdocs-link" href="https://router.vuejs.org/zh/guide/advanced/dynamic-routing.html" rel="nofollow noopener noreferrer" style="color:#0A6CFF;" target="_blank">
       https://router.vuejs.org/zh/guide/advanced/dynamic-routing.html
      </a>
     </p>
     <pre class="kdocs-typescript"><code class="language-typescript">// 判断当前用户是否已拉取完user_info信息之后
        useUserStore().getInfo().then(() =&gt; {
          isRelogin.show = false
          usePermissionStore().generateRoutes().then(accessRoutes =&gt; {
            // 根据roles权限生成可访问的路由表
            accessRoutes.forEach(route =&gt; {
              if (!isHttp(route.path)) {
                router.addRoute(route) // 动态添加可访问路由表
              }
            })
            next({ ...to, replace: true }) // hack方法 确保addRoutes已完成
          })
//router/index.js
const router = createRouter</code></pre>
     <p style="">
      此时如果访问没有权限的路由地址，相当于没有和已经定义好的路由匹配的，就会重定向到404page，pathMatch的作用就是
      <span class="kdocs-bold" style="font-weight:bold;">
       使用正则进行路径匹配
      </span>
      ，当匹配的结果没有一个和已经定义好的路由相同的话，就会进行重定向。
     </p>
     <pre class="kdocs-typescript"><code class="language-typescript">  {
    path: "/:pathMatch(.*)*",
    component: () =&gt; import('@/views/error/404'),
    hidden: true
  },</code></pre>
     <p style="">
      <span class="kdocs-bold" style="font-weight:bold;">
       （4）菜单组件
      </span>
     </p>
     <p style="text-indent:1.4em;">
      1.1.2（2）步骤同时也将可访问的路由存入state中 的sidebarRouters，在菜单栏组件调用实现，没有权限的自然也不会显示，并且只会显示hidden: false的组件，其他例如/401、/404则不会显示。
     </p>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:200px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:204.5%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/60c38c04b89bd094e7f343b5a4a25612.png" style="margin-left:;display:block;width:200px;margin-top:-204.5%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <h6 style="">
      1.1.3
      <span class="kdocs-bold" style="font-weight:bold;">
       按钮权限
      </span>
     </h6>
     <p style="text-indent:1.4em;">
      封装了一个指令权限，能简单快速的实现按钮级别的权限判断。
      <a class="kdocs-link" href="https://gitee.com/y_project/RuoYi-Cloud/tree/master/ruoyi-ui/src/directive/permission" rel="nofollow noopener noreferrer" style="color:#0A6CFF;" target="_blank">
       <span class="kdocs-bold" style="font-weight:bold;">
        v-permission
       </span>
      </a>
     </p>
     <p style="text-indent:1.4em;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （1）使用权限字符串 v-hasPermi
      </span>
     </p>
     <pre class="kdocs-typescript"><code class="language-typescript">// 单个
&lt;el-button v-hasPermi="['system:user:add']"&gt;存在权限字符串才能看到&lt;/el-button&gt;
// 多个
&lt;el-button v-hasPermi="['system:user:add', 'system:user:edit']"&gt;包含权限字符串才能看到&lt;/el-button&gt;</code></pre>
     <p style="text-indent:1.4em;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （2）使用角色字符串 v-hasRole
      </span>
     </p>
     <pre class="kdocs-typescript"><code class="language-typescript">// 单个
&lt;el-button v-hasRole="['admin']"&gt;管理员才能看到&lt;/el-button&gt;
// 多个
&lt;el-button v-hasRole="['role1', 'role2']"&gt;包含角色才能看到&lt;/el-button&gt;</code></pre>
     <blockquote class="kdocs-blockquote" style="text-align:null;">
      <span class="kdocs-bold" style="font-weight:bold;">
       提示
      </span>
      <br/>
      在某些情况下，它是不适合使用v-hasPermi，如元素标签组件，只能通过手动设置v-if。 可以使用全局权限判断函数，用法和指令 v-hasPermi 类似。
     </blockquote>
     <pre class="kdocs-xml"><code class="language-xml">&lt;template&gt;
  &lt;div class="app-container"&gt;
        &lt;el-tabs type="border-card"&gt;
          &lt;el-tab-pane v-if="checkPermi(['system:user:add'])" label="用户管理" name="user"&gt;用户管理&lt;/el-tab-pane&gt;
          &lt;el-tab-pane v-if="checkPermi(['system:user:add', 'system:user:edit'])" label="角色增改" name="menu"&gt;角色增改&lt;/el-tab-pane&gt;
          &lt;el-tab-pane v-if="checkPermi(['system:config:list'])" label="参数管理" name="menu1"&gt;参数管理&lt;/el-tab-pane&gt;
          &lt;el-tab-pane v-if="checkRole(['admin'])" label="角色管理" name="role"&gt;角色管理&lt;/el-tab-pane&gt;
          &lt;el-tab-pane v-if="checkRole(['admin','common'])" label="定时任务" name="job"&gt;定时任务&lt;/el-tab-pane&gt;
        &lt;/el-tabs&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { checkPermi, checkRole } from "@/utils/permission"; // 权限判断函数
export default({
   methods: {
    checkPermi,
    checkRole
  }
})
&lt;/script&gt;</code></pre>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:604px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:16.721855%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/a98edd774fe62abea89d357c483114f8.png" style="margin-left:;display:block;width:604px;margin-top:-16.721855%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <h6 style="">
      1.1.4 接口权限
     </h6>
     <p style="text-indent:1.4em;">
      前端鉴权只能保证可以隐藏或禁用菜单，并不能保证菜单关联的后端接口请求不被非法调用，若依支持在后端接口方法使用角色或权限字符声明权限：
     </p>
     <p style="text-indent:1.4em;">
      以下代码表示必须拥有system:user:add和system:user:update权限才可访问
     </p>
     <pre class="kdocs-java"><code class="language-java">@RequiresPermissions({"system:user:add", "system:user:update"})
public AjaxResult save(...)
{
    return AjaxResult.success(...);
}</code></pre>
     <p style="text-indent:1.4em;">
      以下代码表示必须拥有admin角色才可访问
     </p>
     <pre class="kdocs-java"><code class="language-java">@RequiresRoles("admin")
public AjaxResult save(...)
{
    return AjaxResult.success(...);
}</code></pre>
     <blockquote class="kdocs-blockquote" style="">
      若依没有为后端接口专门设计权限管理模块，它认为后端接口和菜单具有对应关系，可以直接使用菜单的角色或权限字符用于后端接口的权限声明。
     </blockquote>
     <h6 style="">
      1.1.5 数据权限
     </h6>
     <p style="text-indent:1.4em;">
      略
     </p>
     <h6 style="">
      1.1.6 流程图
     </h6>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:66.35135%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/f5338960d9efa47c897f3454ee115fab.png" style="margin-left:;display:block;width:740px;margin-top:-66.35135%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="">
     </p>
     <h6 style="">
      1.2 页签缓存
     </h6>
     <h6 style="">
      1.2.1 简介
     </h6>
     <p style="text-indent:1.4em;">
      由于目前 keep-alive 和 router-view 是强耦合的，而且查看文档和源码不难发现 keep-alive 的
      <a class="kdocs-link" href="https://cn.vuejs.org/v2/api/#keep-alive" rel="nofollow noopener noreferrer" style="color:#0A6CFF;" target="_blank">
       <span class="kdocs-bold" style="font-weight:bold;">
        include
       </span>
      </a>
      默认是优先匹配组件的
      <span class="kdocs-bold" style="font-weight:bold;">
       name
      </span>
      ，所以在编写路由 router 和路由对应的 view component 的时候一定要确保 两者的 name 是完全一致的。(切记 name 命名时候尽量保证唯一性 切记不要和某些组件的命名重复了，不然会递归引用最后内存溢出等问题
     </p>
     <h6 style="">
      1.2.2 demo
     </h6>
     <pre class="kdocs-javascript"><code class="language-javascript">//router 路由声明
{
  path: 'config',
  component: ()=&gt;import('@/views/system/config/index'),
  name: 'Config',
  meta: { title: '参数设置', icon: 'edit' }
}</code></pre>
     <pre class="kdocs-javascript"><code class="language-javascript">//路由对应的view  system/config/index
export default {
  name: 'Config'
}</code></pre>
     <p style="text-align:null;">
      一定要保证两者的名字相同，切记写重或者写错。默认如果不写 name 就不会被缓存。
     </p>
     <blockquote class="kdocs-blockquote" style="text-align:null;">
      <span class="kdocs-bold" style="font-weight:bold;">
       提示
      </span>
      <br/>
      在系统管理-菜单管理-可以配置菜单页签是否缓存，默认为缓存
     </blockquote>
     <h6 style="">
      1.3 异常处理
     </h6>
     <h6 style="">
      1.3.1 实现
     </h6>
     <p style="text-indent:1.4em;">
      request.js 配置了vue的axios参数,对入参和出参进行判断、封装和处理,对于一些共通错误进行统一抛出,不管什么接口方法都需要用到 request.js ,之后如果对接口入参和出参有调整都需要去修改该文件。
     </p>
     <p style="text-indent:1.4em;">
      axios配置：
      <a class="kdocs-link" href="https://blog.csdn.net/JiangZhengyang7/article/details/129260624?spm=1001.2014.3001.5502" rel="noopener noreferrer" style="color:#0A6CFF;" target="_blank">
       https://blog.csdn.net/JiangZhengyang7/article/details/129260624?spm=1001.2014.3001.5502
      </a>
     </p>
     <h6 style="">
      1.3.2 响应拦截的几种情况
     </h6>
     <ul>
      <li style="margin-left:2.8em;list-style-type:circle;text-indent:0;">
       <p>
        登录过期，提示需要重新登录，利用vuex清除token数据
       </p>
      </li>
     </ul>
     <ul>
      <li style="margin-left:2.8em;list-style-type:circle;text-indent:0;">
       <p>
        服务器报错500，提示对应异常、
       </p>
      </li>
     </ul>
     <ul>
      <li style="margin-left:2.8em;list-style-type:circle;text-indent:0;">
       <p>
        接口正常执行，但返回非200状态码，提示对应异常
       </p>
      </li>
     </ul>
     <ul>
      <li style="margin-left:2.8em;list-style-type:circle;text-indent:0;">
       <p>
        正常执行正常返回数据
       </p>
      </li>
     </ul>
     <h6 style="">
      1.4 全局样式
     </h6>
     <h6 style="">
      1.4.1 组件使用主题颜色样式实现
     </h6>
     <p style="text-align:left;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （1）定义一套主题色 css 变量，每种主题色对应不同的透明度
      </span>
     </p>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:290px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:93.103455%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/1b272faa3e5ea4a3ea811c87ebe50470.png" style="margin-left:;display:block;width:290px;margin-top:-93.103455%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <pre class="kdocs-javascript"><code class="language-javascript">// 变浅颜色值
export function getLightColor(color, level) {
    let rgb = hexToRgb(color)
    for (let i = 0; i &lt; 3; i++) {
        rgb[i] = Math.floor((255 - rgb[i]) * level + rgb[i])
    }
    return rgbToHex(rgb[0], rgb[1], rgb[2])
}

// 变深颜色值
export function getDarkColor(color, level) {
    let rgb = hexToRgb(color)
    for (let i = 0; i &lt; 3; i++) {
        rgb[i] = Math.floor(rgb[i] * (1 - level))
    }
    return rgbToHex(rgb[0], rgb[1], rgb[2])
}
</code></pre>
     <p style="text-align:left;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （2）自定义html中的样式
      </span>
     </p>
     <blockquote class="kdocs-blockquote" style="">
      声明一个自定义属性，属性名需要以两个减号（--）开始，属性值则可以是任何有效的 CSS 值。
     </blockquote>
     <pre class="kdocs-javascript"><code class="language-javascript">//utils/theme.js
// 处理主题样式
export function handleThemeStyle(theme) {
    document.documentElement.style.setProperty('--el-color-primary', theme)
    for (let i = 1; i &lt;= 9; i++) {
        document.documentElement.style.setProperty(`--el-color-primary-light-${i}`, `${getLightColor(theme, i / 10)}`)
    }
    for (let i = 1; i &lt;= 9; i++) {
        document.documentElement.style.setProperty(`--el-color-primary-dark-${i}`, `${getDarkColor(theme, i / 10)}`)
    }
}</code></pre>
     <p style="text-indent:1.4em;text-align:left;">
      <span class="kdocs-bold" style="font-weight:bold;">
       document.documentElement
      </span>
      是一个会返回文档对象（
      <span class="kdocs-underline" style="text-decoration:underline;">
       document
      </span>
      ）的根
      <span class="kdocs-underline" style="text-decoration:underline;">
       元素
      </span>
      的只读属性（如 HTML 文档的
      <span class="kdocs-underline" style="text-decoration:underline;">
       &lt;html&gt;
      </span>
      元素）。
     </p>
     <p style="text-indent:1.4em;text-align:left;">
      <span class="kdocs-bold" style="font-weight:bold;">
       document.documentElement.style
      </span>
      属性定义了 当前浏览器支持的 所有 css 属性.
     </p>
     <p style="text-indent:1.4em;text-align:left;">
      <span class="kdocs-underline" style="text-decoration:underline;">
       以
      </span>
      <span class="kdocs-bold" style="font-weight:bold;">
       <span class="kdocs-underline" style="text-decoration:underline;">
        document.documentElement.style.setProperty
       </span>
      </span>
      <span class="kdocs-underline" style="text-decoration:underline;">
       方式设置CSS变量会添加到html中。这样就可以在 HTML 文档的任何地方访问到它了
      </span>
     </p>
     <p style="text-indent:1.4em;">
     </p>
     <p style="text-align:left;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （3）组件color、background使用自定义属性
      </span>
     </p>
     <p style="">
      <span class="kdocs-bold" style="font-weight:bold;">
       例子
      </span>
      ：修改TreeSelect组件中的样式
     </p>
     <pre class="kdocs-javascript"><code class="language-javascript">:deep(.el-tree-node__content:focus) {
  color:var(--el-color-primary)
}</code></pre>
     <blockquote class="kdocs-blockquote" style="">
      <span class="kdocs-bold" style="font-weight:bold;">
       备注：
      </span>
      自定义属性名是大小写敏感的，--my-color 和 --My-color 会被认为是两个不同的自定义属性。
      <br/>
      使用一个局部变量时用
      <a class="kdocs-link" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/var" rel="nofollow noopener noreferrer" style="color:#0A6CFF;" target="_blank">
       <span class="kdocs-underline" style="text-decoration:underline;">
        var()
       </span>
      </a>
      函数包裹以表示一个合法的属性值：
     </blockquote>
     <p style="">
      js中获取：
     </p>
     <pre class="kdocs-javascript"><code class="language-javascript">document.documentElement.style.getPropertyValue('--el-color-primary')
//#409EFF</code></pre>
     <h6 style="">
      1.4.2 主题样式自定义存储实现
     </h6>
     <p style="text-indent:1.4em;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （1）Vuex中定义了默认的主题样式
      </span>
     </p>
     <p style="text-indent:1.4em;">
      一开始进入后台，本地存储中不会存储有主题样式，此时会使用store定义的默认样式。
     </p>
     <pre class="kdocs-javascript"><code class="language-javascript">//store/setting.js    
state: () =&gt; ({
      title: '',
      theme: storageSetting.theme || '#409EFF',
      sideTheme: storageSetting.sideTheme || sideTheme,
      showSettings: showSettings,
     //...
    }),</code></pre>
     <p style="text-indent:1.4em;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （2）用户修改主题风格、样式存储，保存后存入本地存储localStorage中
      </span>
     </p>
     <p style="text-indent:1.4em;">
      经过对Vuex的学习我们可以知道，网页刷新时state中的数据也会丢失，因此当用户在系统中修改主题样式并保存时，就会将样式保存至本地也就是
      <span class="kdocs-bold" style="font-weight:bold;">
       localStorage
      </span>
      中。
     </p>
     <pre class="kdocs-javascript"><code class="language-javascript">function saveSetting() {
  proxy.$modal.loading("正在保存到本地，请稍候...");
  let layoutSetting = {
    "topNav": storeSettings.value.topNav,
    "tagsView": storeSettings.value.tagsView,
    //...
  };
  localStorage.setItem("layout-setting", JSON.stringify(layoutSetting));
  setTimeout(proxy.$modal.closeLoading(), 1000)
}</code></pre>
     <p style="text-indent:1.4em;">
      <span class="kdocs-bold" style="font-weight:bold;">
       （3）在公共组件中读取Vuex中存储的主题样式，判断
      </span>
     </p>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:474px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:44.93671%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/dd3c6432ffdeb2d9b5176e8f07000814.png" style="margin-left:;display:block;width:474px;margin-top:-44.93671%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="text-indent:1.4em;text-align:left;">
      公共组件例如sidebar、TopNav，对Vuex中存储的主题样式进行判断，比如判断是否需要隐藏Navbar，或者是否是theme-dark风格之后，在全局样式variables.module.scss中获取对应不同风格的样式。当然，对于主题颜色的设置和1.4.1中的方法不一样。
     </p>
     <blockquote class="kdocs-blockquote" style="text-align:left;">
      <span class="kdocs-bold" style="font-weight:bold;">
       需要注意的是，在 vite 创建的项目中，如果你想在 js 里引用 scss 文件，需要在后缀前加上 .module，如variables.module.scss
      </span>
     </blockquote>
     <pre class="kdocs-xml"><code class="language-xml">//sidebar/index.vue 
&lt;el-menu
        :default-active="activeMenu"
        :collapse="isCollapse"
        :background-color="sideTheme === 'theme-dark' ? variables.menuBackground : variables.menuLightBackground"
        :text-color="sideTheme === 'theme-dark' ? variables.menuColor : variables.menuLightColor"
        mode="vertical"
      &gt;
&lt;script setup&gt;
import variables from '@/assets/styles/variables.module.scss'
import useSettingsStore from '@/store/modules/settings'
const settingsStore = useSettingsStore()
&lt;/script&gt;</code></pre>
     <h6 style="">
      1.4.3 新增样式
     </h6>
     <p style="text-indent:1.4em;">
      页面的样式和组件是一个道理，全局的
      <span class="kdocs-bold" style="font-weight:bold;">
       @assets/styles
      </span>
      放置全局公用的样式，每一个页面的样式就写在当前 views下面，请记住加上scoped 就只会作用在当前组件内了，避免造成全局的样式污染。
     </p>
     <h6 style="">
      1.5
      <span class="kdocs-bold" style="font-weight:bold;">
       使用图标
      </span>
     </h6>
     <h6 style="">
      1.5.1
      <span class="kdocs-bold" style="font-weight:bold;">
       使用方式
      </span>
     </h6>
     <pre class="kdocs-javascript"><code class="language-javascript">&lt;!-- icon-class 为 icon 的名字; class-name 为 icon 自定义 class--&gt;
&lt;svg-icon icon-class="password"  class-name='custom-class' /&gt;</code></pre>
     <h6 style="">
      1.5.2
      <span class="kdocs-bold" style="font-weight:bold;">
       改变颜色
      </span>
     </h6>
     <p style="text-indent:1.4em;text-align:null;">
      svg-icon 默认会读取其父级的 color fill: currentColor;
     </p>
     <p style="text-indent:1.4em;text-align:null;">
      你可以改变父级的color或者直接改变fill的颜色即可。
     </p>
     <blockquote class="kdocs-blockquote" style="text-align:null;">
      <span class="kdocs-bold" style="font-weight:bold;">
       提示
      </span>
      <br/>
      如果你是从
      <a class="kdocs-link" href="https://www.iconfont.cn/" rel="nofollow noopener noreferrer" style="color:#0A6CFF;" target="_blank">
       <span class="kdocs-bold" style="font-weight:bold;">
        iconfont (opens new window)
       </span>
      </a>
      下载的图标，记得使用如 Sketch 等工具规范一下图标的大小问题，不然可能会造成项目中的图标大小尺寸不统一的问题。 本项目中使用的图标都是 128*128 大小规格的
     </blockquote>
     <h5 style="">
      2.二次封装组件
     </h5>
     <h6 style="">
      2.1
      <span class="kdocs-bold" style="font-weight:bold;">
       树形选择组件TreeSelect
      </span>
     </h6>
     <h6 style="">
      2.1.1 示例
     </h6>
     <p style="text-indent:1.4em;">
      组件是直接使用，无需引入。
     </p>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:425px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:64.2353%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/d2691beef57075624ee019711eb1be86.png" style="margin-left:;display:block;width:425px;margin-top:-64.2353%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="">
     </p>
     <h6 style="">
      2.1.2 属性
     </h6>
     <div style="">
      <table border="1" cellpadding="1" cellspacing="1" class="kdocs-table" style="">
       <tbody>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            属性名
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            说明
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:101px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            类型
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:100px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            可选值
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            默认值
           </span>
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:52px;">
          <p style="">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            objMap
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:52px;">
          <p style="">
           配置项，对应了options中的字段名,子级字段名以及显示名称
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:101px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           Object
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:100px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           -
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:52px;">
          <p style="">
           value: 'id', label: 'label',
          </p>
          <p style="">
           children: 'children'
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:52px;">
          <p style="">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            options
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:52px;">
          <p style="">
           传入要的分支节点以及叶节点
          </p>
          <pre class="kdocs-javascript"><code class="language-javascript">[{
  id: '&lt;id&gt;',
  label: '&lt;label&gt;',
  children: [
    {
      id: '&lt;child id&gt;',
      label: '&lt;child label&gt;',
    },
    ...
  ],
}]</code></pre>
         </td>
         <td class="kdocs-tableCell" style="width:101px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           Array
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:100px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           -
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           []
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            accordion
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:52px;">
          <p style="">
           是否自动收起
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:101px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           Boolean
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:100px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            true/false
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           false
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            value
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:49px;">
          <p style="">
           当前双向绑定的值
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:101px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           String, Number
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:100px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           -
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           ''
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:49px;">
          <p style="">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            placeholder
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:49px;">
          <p style="">
           输入框内部的文字
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:101px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           String
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:100px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           -
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           ''
          </p>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <h6 style="text-align:left;">
      2.1.3 事件
     </h6>
     <div style="">
      <table border="1" cellpadding="1" cellspacing="1" class="kdocs-table" style="">
       <tbody>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:251px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            事件
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:332px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            说明
           </span>
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:251px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           update:value
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:332px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           树形选择组件所选值更新，返回所选id
          </p>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <h6 style="">
      2.2
      <span class="kdocs-bold" style="font-weight:bold;">
       工具栏右侧组件RightToolbar
      </span>
     </h6>
     <h6 style="">
      2.2.1 示例
     </h6>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:161px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:34.16149%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/38be5ad8971d88d5c6faec2482618122.png" style="margin-left:;display:block;width:161px;margin-top:-34.16149%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="text-indent:1.4em;">
      分别有搜索栏隐藏或显示、刷新搜索栏、table显隐列显示配置的功能。
     </p>
     <div class="kdocs-line-container" style="display:flex;justify-content:center;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:543px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:77.16391%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/6fd85927a8902af5b18688fc03c445a3.png" style="margin-left:;display:block;width:543px;margin-top:-77.16391%;height:auto;"/>
       </div>
      </div>
     </div>
     <h6 style="">
      2.2.2 属性
     </h6>
     <div style="">
      <table border="1" cellpadding="1" cellspacing="1" class="kdocs-table" style="">
       <tbody>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            属性名
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            说明
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            类型
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            可选值
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            默认值
           </span>
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:49px;">
          <p style="text-align:left;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            showSearch
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:49px;">
          <p style="text-align:left;">
           双向绑定一个Boolean属性，点击工具栏第一个按钮则改变，将其v-show绑定搜索栏
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           Boolean
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            true/false
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           true
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            columns
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:52px;">
          <p style="text-align:left;">
           传入表格数据显隐列配置，将columns[].visible绑定表格列。
          </p>
          <pre class="kdocs-javascript"><code class="language-javascript">[
  { key: 0, label: `&lt;label1&gt;`, visible: true },
  { key: 1, label: `&lt;label2&gt;`, visible: true },
],</code></pre>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           Array
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           -
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           -
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            search
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:52px;">
          <p style="text-align:left;">
           是否需要显示/隐藏搜索栏
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           Boolean
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            true/false
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           false
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:113px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           <span class="kdocs-fontSize" style="font-size:9pt;">
            gutter
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:338px;vertical-align:top;height:49px;">
          <p style="text-align:left;">
           组件样式配置
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           Number
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           -
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:205px;vertical-align:top;height:49px;">
          <p style="text-align:center;">
           10
          </p>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <h6 style="">
      2.2.3 事件
     </h6>
     <div style="">
      <table border="1" cellpadding="1" cellspacing="1" class="kdocs-table" style="">
       <tbody>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:280px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            事件
           </span>
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:361px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           <span class="kdocs-bold" style="font-weight:bold;">
            说明
           </span>
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:280px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           update:showSearch
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:361px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           点击隐藏搜索/显示搜索按钮，返回Boolean值
          </p>
         </td>
        </tr>
        <tr class="kdocs-tableRow">
         <td class="kdocs-tableCell" style="width:280px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           queryTable
          </p>
         </td>
         <td class="kdocs-tableCell" style="width:361px;vertical-align:top;height:52px;">
          <p style="text-align:center;">
           点击刷新按钮
          </p>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <h5 style="">
      3.前端打包部署服务器
     </h5>
     <p style="">
      （未完）
     </p>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f4a69616e675a68656e6779616e67372f:61727469636c652f64657461696c732f313239363631373631" class_="artid" style="display:none">
 </p>
</div>


