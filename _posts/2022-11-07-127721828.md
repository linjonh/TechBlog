---
layout: post
title: "远程服务器配置-Anaconda-并安装-PyTorch-详细教程"
date: 2022-11-07 16:06:19 +0800
description: "远程服务器配置 Anaconda 并安装 PyTorch 详细教程_远程服务器安装anaconda"
keywords: "远程服务器安装anaconda"
categories: ['环境搭建']
tags: ['服务器', 'Pytorch', 'Python', 'Anaconda']
artid: "127721828"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=127721828
    alt: "远程服务器配置-Anaconda-并安装-PyTorch-详细教程"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     远程服务器配置 Anaconda 并安装 PyTorch 详细教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#1__anaconda_2" rel="nofollow">
        1 远程服务器安装 anaconda
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#11__anaconda_4" rel="nofollow">
          1.1 安装 anaconda
         </a>
        </li>
        <li>
         <a href="#12__56" rel="nofollow">
          1.2 配置环境变量
         </a>
        </li>
        <li>
         <a href="#13__conda__89" rel="nofollow">
          1.3 在终端中进入/退出 conda 环境
         </a>
        </li>
        <li>
         <a href="#14__CUDA__GPU__95" rel="nofollow">
          1.4 查看服务器 CUDA 最高版本(也包含 GPU 使用率/内存使用情况等信息)
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#2__PyTorch__103" rel="nofollow">
        2 配置 PyTorch 环境
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#21__PyTorch_104" rel="nofollow">
          2.1 安装 PyTorch
         </a>
        </li>
        <li>
         <a href="#22__PyTorch__151" rel="nofollow">
          2.2 检验 PyTorch 安装成功
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="1__anaconda_2">
     </a>
     1 远程服务器安装 anaconda
    </h2>
    <h3>
     <a id="11__anaconda_4">
     </a>
     1.1 安装 anaconda
    </h3>
    <p>
     进入
     <a href="https://www.anaconda.com/" rel="nofollow">
      anaconda 官网
     </a>
     ，因为服务器是 Linux 系统，所以点击下图图标：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/9acf16d64b36365a05128794da268ce7.png" width="70%">
     </img>
    </center>
    <p>
     点击下图位置（一般情况下下载这个即可），即可开始下载 安装anaconda所需的文件，我这里是
     <code>
      Anaconda3-2022.10-Linux-x86_64.sh
     </code>
     （后续更新版本会有差别）：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ab38195307cb5ad97b3075540b46ea4e.png"/>
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/f334b10e9a78f587ff666da72faa66b1.png" width="35%">
     </img>
    </center>
    <p>
     下载好后我们将
     <code>
      Anaconda3-2022.10-Linux-x86_64.sh
     </code>
     文件上传到远程服务器中，如何上传可以参考我的博客：
     <a href="https://blog.csdn.net/Friedrichor/article/details/122620361">
      将本地项目/文件上传到远程服务器中详细教程（vscode，sftp）
     </a>
    </p>
    <p>
     按照博客里的步骤，把
     <code>
      Anaconda3-2022.10-Linux-x86_64.sh
     </code>
     上传到远程服务器中：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/cdd52d24c640d9a59aa10070fd3e7360.png" width="40%">
     </img>
    </center>
    <p>
     这样就上传到服务器了：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/6e5efc0c3f0bcc8322a067e8da13c07e.png" width="40%">
     </img>
    </center>
    <p>
     在服务器中新建终端：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/964146570ae9eb5f8861bf2fb23cf587.png" width="40%">
     </img>
    </center>
    <p>
     复制
     <code>
      Anaconda3-2022.10-Linux-x86_64.sh
     </code>
     在服务器中的路径（相对路径）：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/b8b856977afbef2a3da30ea1bbf3fe89.png" width="40%">
     </img>
    </center>
    <p>
     在终端中输入
     <code>
      sh 刚才复制的相对路径
     </code>
     ，我这里是
     <code>
      sh Anaconda3-2022.10-Linux-x86_64.sh
     </code>
     ：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/8e50e6df6ce1a83d1cc3374c09808c39.png" width="70%">
     </img>
    </center>
    <p>
     这里直接按
     <strong>
      回车
     </strong>
     即可：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/e80f015997fcf2bbcda7b1f76361f956.png" width="70%"/>
    </center>
    <p>
     然后一直按回车，直到出现如下界面，输入
     <code>
      yes
     </code>
     ：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/d22613f061861db8eab80391824f5e98.png" width="70%"/>
    </center>
    <p>
     然后这里直接按
     <strong>
      回车
     </strong>
     即可，然后就会自动在当前目录下创建 anaconda3 文件夹安装 anaconda 的内容：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/e547094fdbfd418af9ed91a3d6e92ae3.png" width="70%"/>
    </center>
    <p>
     到这里了依然输入
     <code>
      yes
     </code>
     ：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/eb8b8a7cc9a304333398851d25a3fd75.png" width="70%"/>
    </center>
    <p>
     最后这样就安装成功了：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/d45e134db330d88dd5e1a8bde5c8271e.png" width="70%"/>
    </center>
    <h3>
     <a id="12__56">
     </a>
     1.2 配置环境变量
    </h3>
    <p>
     （这步可能不需要，可以在终端输入 conda，看下会不会正常输出）
     <br/>
     安装完 anaconda 后我们发现 conda 并不能用，原因在于环境变量还没配置。
    </p>
    <p>
     在终端输入
     <code>
      vim .bashrc
     </code>
     ：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/eb062213953fd58cf07486aee1b92188.png" width="40%"/>
    </center>
    <p>
     进入 bashrc：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/5da629fde70abc30f95fdfac1a02ca72.png" width="90%"/>
    </center>
    <p>
     在当前界面输入
     <code>
      i
     </code>
     按键，进入编辑模式。
     <br/>
     在最后一行输入
     <code>
      export PATH=“/xxx/anaconda3/bin:$PATH”
     </code>
     （其中的
     <code>
      xxx
     </code>
     换成自己当前目录路径，其实也就是 anaconda3 目录所在路径）：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/e0f542310afdae72f44b8a5571086a5c.png" width="70%"/>
    </center>
    <p>
     输入后，按键盘上的
     <code>
      esc
     </code>
     键，输入
     <code>
      :wq
     </code>
     ，再
     <strong>
      按回车
     </strong>
     ，即可完成保存编辑并退出：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/01fc76bfb0e19aea2d16f36c4f0fa6ab.png" width="60%"/>
    </center>
    <p>
     然后就会退回到原先的终端界面，再输入
     <code>
      source .bashrc
     </code>
     ，让配置生效：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/d2bb6c09c9cf91a921c528dc3a4b4013.png" width="40%"/>
    </center>
    <p>
     然后命令行前面这块出现
     <code>
      (base)
     </code>
     ，就说明环境变量也配置成功了，并且这时也已进入 conda 环境：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/5377df8fc2fd42e6660482c3b323fe8b.png" width="40%"/>
    </center>
    <p>
     这是可以输入
     <code>
      python
     </code>
     查看下python 版本，再输入
     <code>
      exit()
     </code>
     即可退出 python 环境：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/eeb8d6856fa92028cb22e35215c5a79c.png" width="70%"/>
    </center>
    <h3>
     <a id="13__conda__89">
     </a>
     1.3 在终端中进入/退出 conda 环境
    </h3>
    <pre><code class="prism language-c">conda activate   # 进入conda环境 出现<span class="token punctuation">(</span>base<span class="token punctuation">)</span>则说明安装成功
conda deactivate # 退出conda环境
</code></pre>
    <h3>
     <a id="14__CUDA__GPU__95">
     </a>
     1.4 查看服务器 CUDA 最高版本(也包含 GPU 使用率/内存使用情况等信息)
    </h3>
    <p>
     在终端输入
     <code>
      nvidia-smi
     </code>
     可查看 CUDA 最高版本 和 GPU 使用率/内存使用情况等信息，下图中各参数意义可参考另一个博客：
     <a href="https://blog.csdn.net/Friedrichor/article/details/122673408">
      查看 gpu 使用率/内存使用情况
     </a>
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/e4668b5fb7f52c8011304ffb922b19de.png" width="70%"/>
    </center>
    <p>
     这里看到
     <code>
      CUDA Version: 11.4
     </code>
     ，表示我这里服务器支持的 CUDA 最高版本为 11.4，这个版本号在后续安装 PyTorch 时会用到。
    </p>
    <h2>
     <a id="2__PyTorch__103">
     </a>
     2 配置 PyTorch 环境
    </h2>
    <h3>
     <a id="21__PyTorch_104">
     </a>
     2.1 安装 PyTorch
    </h3>
    <p>
     创建 conda 虚拟环境，输入
     <code>
      conda create -n pytorch python=3.9
     </code>
     (这个指令的含义是创建一个python3.9版本的虚拟环境，名称为 pytorch)，格式为
     <code>
      conda create -n 环境名称 python=版本号
     </code>
     ：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/09a87c585d4957a54100ee5b9629f3f7.png" width="70%"/>
    </center>
    <p>
     输入
     <code>
      y
     </code>
     ：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/ab041eb706d5ccbb2fd355159c105440.png" width="70%"/>
    </center>
    <p>
     安装完成：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/6fc3f7b3ff04722527c76ae7c201d063.png" width="50%"/>
    </center>
    <p>
     输入
     <code>
      conda activate pytorch
     </code>
     (格式为
     <code>
      conda activate 环境名称
     </code>
     )，进入刚才创建的虚拟环境：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/214e12babe7d1c6caa87c290c25298e9.png" width="50%"/>
    </center>
    <p>
     进入
     <a href="https://pytorch.org/" rel="nofollow">
      pytorch 官网
     </a>
     ，点击 Install：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/3d989f17b82e4f16036d28ac531feb54.png" width="90%"/>
    </center>
    <p>
     如下选择，复制指令
     <code>
      conda install pytorch torchvision torchaudio pytorch-cuda=11.6 -c pytorch -c nvidia
     </code>
     。如果服务器支持 CUDA 最高版本高于 11.6 (在上文
     <strong>
      1.4 查看 gpu 使用率/内存使用情况等信息
     </strong>
     中查看)，那么直接在服务器终端粘贴这个指令即可。
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/365e99240916454482f64c84ec6fb509.png" width="90%"/>
    </center>
    <p>
     但上文中写到我这里服务器支持的 CUDA 最高版本为 11.4，上图中需要的 CUDA 只有 11.6 和 11.7 版本的，都高于我服务器的 CUDA 版本，那么这时该怎么办呢？
    </p>
    <p>
     那就只能安装以前的版本了，以满足自己服务器的要求，点击
     <a href="https://pytorch.org/get-started/previous-versions/" rel="nofollow">
      install previous versions of PyTorch
     </a>
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/1b907eb19d0c953c9eda9c58066dfc49.png" width="90%"/>
    </center>
    <p>
     可以看到 这里有个 PyTorch 1.12.1 版本的，底下有可供 CUDA 10.2、11.3、11.6 的 PyTorch安装指令，因为我这里服务器的 CUDA 最高版本为 11.4，安装 PyTorch 肯定要小于这个版本，所以选择 11.3 版本了，复制下图指令，即
     <code>
      conda install pytorch==1.12.1 torchvision==0.13.1 torchaudio==0.12.1 cudatoolkit=11.3 -c pytorch
     </code>
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/8ddc566b21866b80aca26cdf994659e8.png" width="90%"/>
    </center>
    <p>
     粘贴到终端（在刚才 conda 新建的虚拟环境(名为pytorch) 中）：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/ed743829bd39d8ea10015e09f706b789.png" width="100%"/>
    </center>
    <p>
     输入
     <code>
      y
     </code>
     ：
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/50615c147a76448549902578d7159b48.png" width="90%"/>
    </center>
    <p>
     等待一会儿，这样就算安装好了：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/353f2c9da41ac20bf009b55a531d0667.png"/>
    </p>
    <h3>
     <a id="22__PyTorch__151">
     </a>
     2.2 检验 PyTorch 安装成功
    </h3>
    <p>
     在终端依次输入
     <code>
      python
     </code>
     ，
     <code>
      import torch
     </code>
     ，
     <code>
      torch.__version__
     </code>
     ，
     <code>
      torch.cuda.is_available()
     </code>
     ，就可以检验 PyTorch 是否安装成功，并可查看版本号等等。
    </p>
    <center>
     <img src="https://i-blog.csdnimg.cn/blog_migrate/bc10faa605514ad2fa09f229741d91ed.png" width="80%"/>
    </center>
    <pre><code class="prism language-python"><span class="token punctuation">(</span>pytorch<span class="token punctuation">)</span> kfh@amax<span class="token punctuation">:</span><span class="token operator">~</span>$ python  <span class="token comment"># 进入python环境</span>
Python <span class="token number">3.9</span><span class="token number">.13</span> <span class="token punctuation">(</span>main<span class="token punctuation">,</span> Oct <span class="token number">13</span> <span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">:</span><span class="token number">33</span><span class="token punctuation">)</span> 
<span class="token punctuation">[</span>GCC <span class="token number">11.2</span><span class="token number">.0</span><span class="token punctuation">]</span> <span class="token punctuation">:</span><span class="token punctuation">:</span> Anaconda<span class="token punctuation">,</span> Inc<span class="token punctuation">.</span> on linux
Type <span class="token string">"help"</span><span class="token punctuation">,</span> <span class="token string">"copyright"</span><span class="token punctuation">,</span> <span class="token string">"credits"</span> <span class="token keyword">or</span> <span class="token string">"license"</span> <span class="token keyword">for</span> more information<span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> torch   <span class="token comment"># 输入并按回车后只要不报错就说明pytorch已经安装成功了</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> torch<span class="token punctuation">.</span>__version__  <span class="token comment"># 查看 PyTorch 版本号</span>
<span class="token string">'1.12.1'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 查看 CUDA 即 GPU 是否可用</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f4672696564726963686f722f:61727469636c652f64657461696c732f313237373231383238" class_="artid" style="display:none">
 </p>
</div>


