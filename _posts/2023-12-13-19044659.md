---
layout: post
title: "Android-细说searchView"
date: 2023-12-13 12:34:44 +0800
description: "本文详细介绍了Android平台上的搜索功能实现方式，包括searchdialog和searchwi"
keywords: "Android 细说searchView"
categories: ['工作']
tags: ['无标签']
artid: "19044659"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=19044659
    alt: "Android-细说searchView"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Android 细说searchView
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <br/>
    <p align="left">
     <span style="font-size:24px; color:#ff0000">
      请细读文章后半部分，结合实例，亲笔写的总结。
     </span>
    </p>
    <p align="left">
     Android为程序的搜索功能提供了统一的搜索接口，searchdialog和search widget。
    </p>
    <p align="left">
     searchdialog只能为于activity
     <span style="color:red">
      窗口的上方
     </span>
     ，search widget可以位于
     <span style="color:red">
      任何位置
     </span>
     。
    </p>
    <p align="left">
     searchdialog和searchwidget的
     <span style="color:#FF9900">
      其他
     </span>
     <span style="color:#FF9900">
      属
     </span>
     <span style="color:#FF9900">
      性
     </span>
     如下：
    </p>
    <p align="left">
     <span style="color:#FF9900">
      A
     </span>
     <span style="color:#FF9900">
      ：
     </span>
     <span style="color:#FF9900">
      声
     </span>
     <span style="color:#FF9900">
      音搜索。
     </span>
    </p>
    <p align="left">
     <span style="color:#FF9900">
      B
     </span>
     <span style="color:#FF9900">
      ：根据最近的搜索
     </span>
     <span style="color:#FF9900">
      结
     </span>
     <span style="color:#FF9900">
      果，
     </span>
     <span style="color:#FF9900">
      给
     </span>
     <span style="color:#FF9900">
      出搜索建
     </span>
     <span style="color:#FF9900">
      议
     </span>
     <span style="color:#FF9900">
      。
     </span>
    </p>
    <p align="left">
     <span style="color:#FF9900">
      C
     </span>
     <span style="color:#FF9900">
      ：根据我
     </span>
     <span style="color:#FF9900">
      们
     </span>
     <span style="color:#FF9900">
      程序的
     </span>
     <span style="color:#FF9900">
      实际
     </span>
     <span style="color:#FF9900">
      搜索
     </span>
     <span style="color:#FF9900">
      结
     </span>
     <span style="color:#FF9900">
      果，
     </span>
     <span style="color:#FF9900">
      给
     </span>
     <span style="color:#FF9900">
      出搜索建
     </span>
     <span style="color:#FF9900">
      议
     </span>
     <span style="color:#FF9900">
      。
     </span>
    </p>
    <p align="left">
     <span style="color:red">
      注1
     </span>
     ：search widget在Android 3.0或更高版本才可用
    </p>
    <p align="left">
    </p>
    <p align="left">
     searchdialog和search widget的搜索功能特性都一样，但是他们还有微小
     <span style="color:red">
      区别
     </span>
     ：
    </p>
    <p align="left">
     <span style="color:#FF6600">
      A,search dialog
     </span>
     <span style="color:#FF6600">
      是一
     </span>
     <span style="color:#FF6600">
      个
     </span>
     <span style="color:#FF6600">
      被系
     </span>
     <span style="color:#FF6600">
      统
     </span>
     <span style="color:#FF6600">
      控制的UI
     </span>
     <span style="color:#FF6600">
      组
     </span>
     <span style="color:#FF6600">
      件。但他被用
     </span>
     <span style="color:#FF6600">
      户
     </span>
     <span style="color:#FF6600">
      激活的
     </span>
     <span style="color:#FF6600">
      时
     </span>
     <span style="color:#FF6600">
      候，
     </span>
     <span style="color:#FF6600">
      它总
     </span>
     <span style="color:#FF6600">
      是出
     </span>
     <span style="color:#FF6600">
      现
     </span>
     <span style="color:#FF6600">
      在activity
     </span>
     的上方。
    </p>
    <p align="left">
     <span style="color:#FF6600">
      B,Android
     </span>
     <span style="color:#FF6600">
      系
     </span>
     <span style="color:#FF6600">
      统负责处
     </span>
     <span style="color:#FF6600">
      理search dialog
     </span>
     上所有的事件，
     <span style="color:#FF6600">
      当
     </span>
     <span style="color:#FF6600">
      用
     </span>
     <span style="color:#FF6600">
      户
     </span>
     <span style="color:#FF6600">
      提交了
     </span>
     <span style="color:#FF6600">
      查询
     </span>
     <span style="color:#FF6600">
      ，系
     </span>
     <span style="color:#FF6600">
      统会
     </span>
     <span style="color:#FF6600">
      把
     </span>
     <span style="color:#FF6600">
      这个查询请
     </span>
     <span style="color:#FF6600">
      求
     </span>
     <span style="color:#FF6600">
      传输
     </span>
     <span style="color:#FF6600">
      到我
     </span>
     <span style="color:#FF6600">
      们
     </span>
     <span style="color:#FF6600">
      的searchable activity
     </span>
     ，
     <span style="color:#FF6600">
      让
     </span>
     <span style="color:#FF6600">
      searchable activity
     </span>
     <span style="color:#FF6600">
      在
     </span>
     <span style="color:#FF6600">
      处
     </span>
     <span style="color:#FF6600">
      理
     </span>
     <span style="color:#FF6600">
      真
     </span>
     <span style="color:#FF6600">
      正的
     </span>
     <span style="color:#FF6600">
      查询
     </span>
     <span style="color:#FF6600">
      。C,search widget
     </span>
     是SearchView的一
     <span style="color:#FF6600">
      个实
     </span>
     <span style="color:#FF6600">
      例，
     </span>
     <span style="color:#FF6600">
      你
     </span>
     <span style="color:#FF6600">
      可以把
     </span>
     <span style="color:#FF6600">
      它
     </span>
     <span style="color:#FF6600">
      放在
     </span>
     <span style="color:#FF6600">
      你
     </span>
     <span style="color:#FF6600">
      的布局的任何地方。
     </span>
    </p>
    <p align="left">
     <span style="color:#FF6600">
      D,
     </span>
     <span style="color:#FF6600">
      默
     </span>
     <span style="color:#FF6600">
      认
     </span>
     <span style="color:#FF6600">
      的，search widget
     </span>
     和一
     <span style="color:#FF6600">
      个标
     </span>
     <span style="color:#FF6600">
      准的EditText widget
     </span>
     一
     <span style="color:#FF6600">
      样
     </span>
     <span style="color:#FF6600">
      ，不能做任何事情。但是
     </span>
     <span style="color:#FF6600">
      你
     </span>
     <span style="color:#FF6600">
      可以配置
     </span>
     <span style="color:#FF6600">
      它
     </span>
     <span style="color:#FF6600">
      ，
     </span>
     <span style="color:#FF6600">
      让
     </span>
     <span style="color:#FF6600">
      android
     </span>
     <span style="color:#FF6600">
      系
     </span>
     <span style="color:#FF6600">
      统处
     </span>
     <span style="color:#FF6600">
      理所有的按
     </span>
     <span style="color:#FF6600">
      键
     </span>
     <span style="color:#FF6600">
      事件，把
     </span>
     <span style="color:#FF6600">
      查询请
     </span>
     <span style="color:#FF6600">
      求
     </span>
     <span style="color:#FF6600">
      传输给
     </span>
     <span style="color:#FF6600">
      合适的activity,
     </span>
     可以配置
     <span style="color:#FF6600">
      它让它
     </span>
     <span style="color:#FF6600">
      像search dialog
     </span>
     一
     <span style="color:#FF6600">
      样
     </span>
     <span style="color:#FF6600">
      提供search suggestions
     </span>
     。
    </p>
    <p align="left">
     <span style="color:red">
      E,search widget
     </span>
     <span style="color:red">
      在 Android 3.0
     </span>
     或更高版本才可用.search dialog
     <span style="color:red">
      没
     </span>
     <span style="color:red">
      有此
     </span>
     <span style="color:red">
      项
     </span>
     <span style="color:red">
      限制
     </span>
    </p>
    <p>
    </p>
    <p align="left">
     <span style="color:#003366">
      当用户在
     </span>
     <span style="color:#003366">
      search dialog
     </span>
     <span style="color:#003366">
      或
     </span>
     <span style="color:#003366">
      search widget
     </span>
     <span style="color:#003366">
      中执行一个搜索的时候，系统会创建一个
     </span>
     <span style="color:#003366">
      Intent
     </span>
     <span style="color:#003366">
      ，并把查询关键字保存在里面，
     </span>
    </p>
    <p align="left">
     <span style="color:#003366">
      然后启动我们在
     </span>
     <span style="color:#003366">
      AndroidManifest.xml
     </span>
     <span style="color:#003366">
      中声明好的
     </span>
     <span style="color:#003366">
      searchable activity
     </span>
     <span style="color:#003366">
      ，并把
     </span>
     <span style="color:#003366">
      Intent
     </span>
     <span style="color:#003366">
      传送给它。
     </span>
    </p>
    <p>
    </p>
    <p align="left">
     <span style="color:#003366">
      实现一个可以搜索的程序，主要需要以下几个部份
     </span>
     ：
    </p>
    <p align="left">
     （1）
     <span style="color:#FF6600">
      search dialog or widget
     </span>
     <span style="color:#FF6600">
      的
     </span>
     <span style="color:red">
      配置文件
     </span>
     。
    </p>
    <p align="left">
     <span style="color:navy">
      配置一个
     </span>
     <span style="color:navy">
      XML
     </span>
     <span style="color:navy">
      文件用于配置
     </span>
     <span style="color:navy">
      search dialog
     </span>
     <span style="color:navy">
      或
     </span>
     <span style="color:navy">
      widget
     </span>
     <span style="color:navy">
      的设置。对于
     </span>
     <span style="color:navy">
      search dialog
     </span>
     <span style="color:navy">
      ，该配置文件的名字一般约定为
     </span>
     <span style="color:#FF9900">
      searchable.xml
     </span>
    </p>
    <p align="left">
     （2）
     <span style="color:#FF6600">
      searchable activity
     </span>
     。
    </p>
    <p align="left">
     <span style="color:navy">
      searchable activity
     </span>
     <span style="color:navy">
      用于接收搜索关键字，并进行数据搜索和显示搜索结果。
     </span>
    </p>
    <p align="left">
     （3）
     <span style="color:#FF6600">
      搜索条。
     </span>
     <span style="color:#FF6600">
      search dialog
     </span>
     <span style="color:#FF6600">
      或
     </span>
     <span style="color:#FF6600">
      search widget
     </span>
    </p>
    <p align="left">
     <span style="color:#FF6600">
      * The search dialog
     </span>
     <span style="color:#FF6600">
      ：
     </span>
     <span style="color:navy">
      默认
     </span>
     <span style="color:navy">
      search dialog
     </span>
     <span style="color:navy">
      是隐藏。当我们按下了
     </span>
     <span style="color:navy">
      SEARCH
     </span>
     <span style="color:navy">
      键或在程序中调用
     </span>
     <span style="color:#FF9900">
      on
      <wbr/>
      SearchRequested()
     </span>
     <span style="color:navy">
      ，它将出现在屏幕的上方。
     </span>
    </p>
    <p align="left">
     <span style="color:#FF6600">
      * SearchView widget
     </span>
     <span style="color:#FF6600">
      ：
     </span>
     <span style="color:navy">
      使用
     </span>
     <span style="color:navy">
      search widget
     </span>
     <span style="color:navy">
      的时候，你可以把该搜索框放在我们
     </span>
     <span style="color:navy">
      activity
     </span>
     <span style="color:navy">
      的任何地方
     </span>
     <span style="color:navy">
      ,
     </span>
     <span style="color:navy">
      通常把它作为
     </span>
     <span style="color:navy">
      Act
      <wbr/>
      ion Bar
     </span>
     <span style="color:navy">
      的一个菜单而不是放到
     </span>
     <span style="color:navy">
      Layout
     </span>
     <span style="color:navy">
      的
     </span>
     <span style="color:navy">
      xml
     </span>
     <span style="color:navy">
      里面，对于用户来说会显得更加方便。
     </span>
    </p>
    <p>
    </p>
    <p>
     具体实现步骤（
     <span style="color:red">
      以
     </span>
     <span style="color:red">
      SDK
     </span>
     <span style="color:red">
      自带的
     </span>
     <span style="color:red">
      Sample  SearchableDictionary
     </span>
     <span style="color:red">
      工程分析举例
     </span>
     ）：
    </p>
    <p>
     (1)   创建配置文件searchable.xml，存放于res/xml文件夹下
    </p>
    <p align="left">
     &lt;searchable
     <span style="color:#7F007F">
      xmlns:android
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       "http://schemas.android.com/apk/res/android"
      </span>
     </em>
    </p>
    <p align="left">
     android:label=
     <em>
      "@string/search_label"
     </em>
    </p>
    <p align="left">
     android:hint=
     <em>
      "@string/search_hint"
     </em>
    </p>
    <p align="left">
     android:searchSettingsDescription=
     <em>
      "@string/settings_description"
     </em>
    </p>
    <p align="left">
     //搜索功能描述
     <span style="color:#7F007F">
      android:searchSuggestAuthority
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       "com.example.android.searchabledict.DictionaryProvider"
      </span>
     </em>
     //
     <span style="color:green; background:whitesmoke">
      Content Provider
     </span>
     的主机名，
     <span style="color:green; background:whitesmoke">
      它必须和你的content provider
     </span>
     的mainfest中的               android:authorities一致
    </p>
    <p align="left">
     android:searchSuggestIntentAction=
     <em>
      "android.intent.act
      <wbr/>
      ion.VIEW"
     </em>
    </p>
    <p align="left">
     //可选项，定义当用户选择了suggestion后发送给activity的Intent的Act
     <wbr/>
     ion，默认为Intent.
     <span style="color:green">
      ACT
      <wbr/>
      ION_SEARCH
     </span>
    </p>
    <p align="left">
     android:searchSuggestIntentData=
     <em>
      "content://com.example.android.searchabledict.DictionaryProvider/dictionary"
     </em>
    </p>
    <p align="left">
     //定义当用户选择了suggestion后的发送给activity的intent的da
     <wbr/>
     ta，比如:
    </p>
    <p align="left">
     “content://com.example.android.searchabledict.DictionaryProvider/dictionary/1”(abbey这个单词的Uri)
    </p>
    <p align="left">
     android:searchSuggestSelection=
     <em>
      " ?"
     </em>
    </p>
    <p align="left">
     //
     <span style="color:green; background:whitesmoke">
      它就作为
     </span>
     selection参数传入到你的suggetion content provider的query函数中,固定为空格 +？
    </p>
    <p align="left">
     android:searchSuggestThreshold=
     <em>
      "1"
     </em>
    </p>
    <p align="left">
     android:includeInGlobalSearch=
     <em>
      "true"
     </em>
     &gt;  //是否支持全局搜索，就是从桌面搜索
    </p>
    <p>
     &lt;/searchable&gt;
    </p>
    <p>
     <span style="color:red">
      关于
     </span>
     <span style="color:red">
      searchable.xml
     </span>
     <span style="color:red">
      更多内容请参考
     </span>
     <span style="color:red">
      (
     </span>
     <span style="color:red">
      官方英文文档
     </span>
     <span style="color:red">
      )
     </span>
     <span style="color:red">
      ：
     </span>
    </p>
    <p>
     <span style="color:red">
      <a href="http://developer.android.com/guide/topics/search/searchable-config.html" rel="nofollow noopener noreferrer" target="_blank">
       http://developer.android.com/guide/topics/search/searchable-config.html
      </a>
     </span>
    </p>
    <p>
     <span style="color:red">
      或
     </span>
     <span style="color:red">
      (
     </span>
     <span style="color:red">
      中文翻译
     </span>
     <span style="color:red">
      )
     </span>
     <span style="color:red">
      ：
     </span>
    </p>
    <p>
     <span style="color:red">
      <a href="http://hubingforever.blog.163.com/blog/static/171040579201142911524541/" rel="nofollow noopener noreferrer" target="_blank">
       http://hubingforever.blog.163.com/blog/static/171040579201142911524541/
      </a>
     </span>
    </p>
    <p>
     <span style="color:red">
     </span>
    </p>
    <p>
     (2)   创建SearchableActivity
    </p>
    <p>
     searchable activity根据搜索关键字进行搜索，并显示搜索结果
    </p>
    <p>
     <span style="color:#ff990">
      1). MENIFEST.XML
     </span>
     <span style="color:#ff990">
      声明
     </span>
     <span style="color:#ff990">
      searchable activity
     </span>
    </p>
    <p align="left">
     &lt;activity
    </p>
    <p align="left">
     <span style="color:#7F007F">
      android:name
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       ".SearchableDictionary"
      </span>
     </em>
    </p>
    <p align="left">
     <span style="color:#7F007F">
      android:launchMode
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       "singleInstance"
      </span>
     </em>
     <span style="color:teal">
      &gt;
     </span>
    </p>
    <p align="left">
     &lt;intent-filter&gt;
    </p>
    <p align="left">
     &lt;act
     <wbr/>
     ion
     <span style="color:#7F007F">
      android:name
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       "android.intent.act
       <wbr/>
       ion.MAIN"
      </span>
     </em>
     <span style="color:teal">
      /&gt;
     </span>
    </p>
    <p align="left">
     &lt;category
     <span style="color:#7F007F">
      android:name
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       "android.intent.category.LAUNCHER"
      </span>
     </em>
     <span style="color:teal">
      /&gt;
     </span>
    </p>
    <p align="left">
     &lt;/intent-filter&gt;
    </p>
    <p align="left">
     &lt;intent-filter&gt;
    </p>
    <p align="left">
     &lt;act
     <wbr/>
     ionandroid:name=
     <em>
      "android.intent.act
      <wbr/>
      ion.SEARCH"
     </em>
     /&gt;
    </p>
    <p align="left">
     &lt;/intent-filter&gt;
    </p>
    <p align="left">
     &lt;meta-da
     <wbr/>
     ta
    </p>
    <p align="left">
     android:name=
     <em>
      "android.app.searchable"
     </em>
    </p>
    <p align="left">
     android:resource=
     <em>
      "@xml/searchable"
     </em>
     /&gt;
    </p>
    <p>
     &lt;/activity&gt;
    </p>
    <p align="left">
     &lt;meta-da
     <wbr/>
     ta
    </p>
    <p align="left">
     <span style="color:#7F007F">
      android:name
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       "
      </span>
      android.app.default_searchable
      <span style="color:#2A00FF">
       "
      </span>
     </em>
    </p>
    <p>
     <span style="color:#7F007F">
      android:value
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       ".SearchableDictionary"
      </span>
     </em>
     <span style="color:teal">
      /&gt;
     </span>
    </p>
    <p>
     //可有可无，这个主要是想让app的任何地方都可以实施搜索并向该activity发送Intent
    </p>
    <p>
     <span style="color:#ff660">
      2)
     </span>
     <span style="color:#ff660">
      创建
     </span>
     <span style="color:#ff660">
      Searchable Activity
     </span>
    </p>
    <p>
     SearchableDictionary.java:
    </p>
    <p>
     它重写了on
     <wbr/>
     NewIntent方法来处理新的Intent，如果这个activity是由我们手动点击应用图标启动的，Intent的act
     <wbr/>
     ion为Intent.ACT
     <wbr/>
     ION_MAIN，不会执行handleIntent里面的处理搜索的代码。另一方面它在菜单里又定义了一个搜索按钮作为actionbar的一部分显示在屏幕顶端了。当我们点击这个按钮时，通过直接调用on
     <wbr/>
     SearchRequested()；就会在屏幕顶端出现一个在搜索框(Search Dialog)，向里面输入英文单词(注意:会有suggestions下拉列表,后面再说它的配置)，当你点击了其中一条或者按下了软键盘的右下角的“开始“键，就会立即给
     <em>
      SearchableDictionary这个
     </em>
     SearchableActivity发送一个Intent，其act
     <wbr/>
     ion根据你刚才的操作(是点了suggestion还是按了“开始”键)分别为：Intent.ACT
     <wbr/>
     ION_VIEW和Intent.ACT
     <wbr/>
     ION_SEARCH，其中这个IntentIntent.ACT
     <wbr/>
     ION_VIEW是在searchable.xml里面自主定义的。接着触发on
     <wbr/>
     NewIntent方法。
    </p>
    <p>
     若是单击suggestion来的，那么intent.getData()可以获取这个suggestion的唯一Uri(比如：
    </p>
    <p>
     “content://com.example.android.searchabledict.DictionaryProvider/dictionary/1”)，然后启动WordActivity查询数据库并显示word这个单词的释义；若是按了“开始”键来的,那么intent.getStringExtra(SearchManager.QUERY);可以获取此次要搜索的关键词,然后通过showResults方法搜索数据库并显示搜索结果,可能不止一条结果，所以开头定义了一个ListView。
    </p>
    <p>
    </p>
    <p>
     <span style="color:red">
      (3
     </span>
     <span style="color:red">
      ）创建ContentProvider
     </span>
    </p>
    <p align="left">
     <span style="color:#FF6600">
      ?
     </span>
     <span style="color:#ff660">
      MENIFEST.XML
     </span>
     <span style="color:#ff660">
      里面声明:
     </span>
    </p>
    <p align="left">
     &lt;provider
    </p>
    <p align="left">
     <span style="color:#7F007F">
      android:name
     </span>
     =
     <em>
      <span style="color:#2A00FF">
       ".DictionaryProvider"
      </span>
     </em>
    </p>
    <p>
     android:authorities=
     <em>
      "com.example.android.searchabledict.DictionaryProvider"
     </em>
     <span style="color:teal">
      /&gt;
     </span>
    </p>
    <p>
    </p>
    <p>
     ?       实现ContentProvider实现Suggestions
    </p>
    <p>
     DictionaryProvider.java：
    </p>
    <p>
     里面主要是public Cursor query(…)这个方法，提供显示搜索建议的Cursor，之前里面定义了一个UriMatcher，用于匹配识别搜索类型，当URI匹配时返回相应的匹配码：就是指当搜索框自动访问ContentProvider获取搜索建议时，URI是
    </p>
    <p>
     <span style="color:green">
      “content://com.example.android.searchabledict.DictionaryProvider/search_suggest_query?limit=50”
     </span>
     ,正好匹配
     <span style="color:blue">
      AUTHORITY + SearchManager.SUGGEST_URI_PATH_SHORTCUT
     </span>
     ，返回匹配码
     <span style="color:blue">
      SEARCH_SUGGEST
     </span>
     ，通过getSuggestions(selectionArgs[0])返回suggestions的cursor.当我们点击suggestions的任意一条后，search dialog消失并会向activity发送Intent,此时这个Intent包含了一条这条suggestion的uri,(比如
     <span style="color:green">
      “content://com.example.android.searchabledict.DictionaryProvider/dictionary/1
     </span>
     ”)那么activity可以通过这个uri访问ContentProvider来获取cursor并显示结果，因此当UriMatcher匹配到这个uri时返回匹配码
     <span style="color:blue">
      GET_WORD
     </span>
     ，通过调用getWord(uri)获取cursor。
    </p>
    <p>
     当我们没有点击所给的suggestion而是点击了”开始”键强行搜索时，uri会是
    </p>
    <p>
     <span style="color:green">
      “content://com.example.android.searchabledict.DictionaryProvider/dictionary
     </span>
     ”，则返回匹配码
     <span style="color:blue">
      SEARCH_WORDS
     </span>
     ,通过search(selectionArgs[0])搜索数据库并返回cursor。
    </p>
    <p>
     匹配码
     <span style="color:blue">
      REFRESH_SHORTCUT
     </span>
     目前还用不到。
    </p>
    <p>
    </p>
    <p>
     最后说明搜索框获得suggestions的cursor后，如何知道显示那些列的内容，
    </p>
    <p>
     SearchManager 定义了两个固定列名：
     <span style="color:blue">
      SearchManager.SUGGEST_COLUMN_TEXT_1
     </span>
     和
     <span style="color:blue">
      SearchManager.SUGGEST_COLUMN_TEXT_2
     </span>
     ，显示suggestions是就是取这两列的内容显示，矛盾的是我们的cursor对应的数据库表的列名几乎不可能都采用这两个固定的列名，解决办法是将查询到的结果表的列名重新命名为这两个固定列名。因此可以在DictionaryDatabase.java中看到定义了一个HashMap，用于映射原列名和改后的列名，这个HashMap应用于SQLiteQueryBuilder对象，就可以完成查询后结果表的列的重命名工作。
    </p>
    <p>
     前面说过一个URI：
    </p>
    <p>
     <span style="color:green">
      content://com.example.android.searchabledict.DictionaryProvider/dictionary/1
     </span>
     <span style="color:green">
      ，
     </span>
    </p>
    <p>
     他是怎么来的？由于前面一部分来自searchable.xml里面的定义
     <span style="color:#0700">
      android:searchSuggestIntentData
     </span>
     <span style="color:#0700">
      ，
     </span>
     最后的1是id值，那么这个id值它是怎么获得的呢？你以为是取 _id这列的值吗，我们通常android里面数据库的主键通常用_id，但这不是必须的，要能获得id值，android在SearchManager又定义了一个列名：
    </p>
    <p>
     <span style="color:green">
      SearchManager.SUGGEST_COLUMN_INTENT_DA
      <wbr/>
      TA_ID
     </span>
     用来获取id这个值，看它的名字就因该知道它是作为Intent的da
     <wbr/>
     ta的uri最后的id了。因此一般还需要在HashMap映射_id为
     <span style="color:green">
      SearchManager.SUGGEST_COLUMN_INTENT_DA
      <wbr/>
      TA_ID
     </span>
     <span style="color:green">
      。
     </span>
    </p>
    <p>
    </p>
    <p>
     <span style="color:red">
      附
     </span>
     ：android系统内置的ContentResolver 查询数据库并重命名列的方法（关键在projection）：
    </p>
    <p align="left">
     Cursor cursor =
     <em>
      resolver
     </em>
     .query(
     <em>
      uri
     </em>
     ,
     <strong>
      new
     </strong>
     String[] {
     <!-- -->
    </p>
    <p align="left">
     MediaStore.Audio.Media.
     <em>
      _ID
     </em>
     + " AS _id",
    </p>
    <p align="left">
     MediaStore.Audio.Media.
     <em>
      _ID
     </em>
     + " AS suggest_intent_da
     <wbr/>
     ta_id",
    </p>
    <p align="left">
     MediaStore.Audio.Media.
     <em>
      TITLE
     </em>
     + " AS suggest_text_1",
    </p>
    <p align="left">
     MediaStore.Audio.Media.
     <em>
      ARTIST
     </em>
     + " AS suggest_text_2" },
    </p>
    <p align="left">
     "title like'%" + keywd + "%'  or artist like '%" + keywd
    </p>
    +"%' ",
    <strong>
     null
    </strong>
    ,
    <strong>
     null
    </strong>
    );
    <br/>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f7a68616f77656978696e6731393839:2f61727469636c652f64657461696c732f3139303434363539" class_="artid" style="display:none">
 </p>
</div>


