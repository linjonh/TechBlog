---
layout: post
title: "拼图游戏-java实现"
date: 2025-01-03 17:02:29 +0800
description: "游戏说明： 设计一款拼图游戏，要求点击图片按钮，实现图片按钮的移动，直到每一个按钮都到达指定位置游戏"
keywords: "用java实现一个6*6的拼图游戏,初始化时图片是乱序的,可以通过拖动移动图片到新的"
categories: ['游戏', 'Java']
tags: ['游戏']
artid: "71404651"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=71404651
    alt: "拼图游戏-java实现"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     拼图游戏---java实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     游戏说明：
     <br/>
     设计一款拼图游戏，要求点击图片按钮，实现图片按钮的移动，直到每一个按钮都到达指定位置游戏终止退出。
     <br/>
     游戏设计思路：
     <br/>
     1.准备一张图像文件；
     <br/>
     2.创建N个按钮图标，每个按钮图标里面存入一张分割后的图片信息；
     <br/>
     3.创建一个空白按钮用于和图标按钮交换位置，达到移动的效果；
     <br/>
     4.乱序，将按钮图标乱序，完成游戏效果；
     <br/>
     5.创建一个面板添加游戏开始和游戏结束按钮；
     <br/>
     6.设计游戏窗口；
    </p>
    <p>
     游戏界面设计基本结构：
     <br/>
     <img alt="这里写图片描述" src="https://img-blog.csdn.net/20170508120005147?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYW5ncnlfeW91dGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
    </p>
    <p>
     代码实现：
    </p>
    <pre class="prettyprint"><code class="hljs java">Cell类----设计每个按钮对象应该具备的属性功能---针对按钮
<span class="hljs-keyword">package</span> puzzle_game;
<span class="hljs-keyword">import</span> java.awt.Rectangle;
<span class="hljs-keyword">import</span> javax.swing.Icon;
<span class="hljs-keyword">import</span> javax.swing.JButton;

<span class="hljs-annotation">@SuppressWarnings</span>(<span class="hljs-string">"serial"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cell</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JButton</span>{<!-- --></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> IMAGEWIDTH;<span class="hljs-comment">//设置按钮的宽度大小</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> IMAGEHEIGHT;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> ID = <span class="hljs-number">0</span>;<span class="hljs-comment">//设置当前按钮的指向坐标</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title">Cell</span>(Icon icon, <span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> imagewidth, <span class="hljs-keyword">int</span> height)//构造函数初始化，传入两个参数，一个是图像的图标，一个是该按钮的数组ID
    {
        <span class="hljs-keyword">this</span>.setIcon(icon);
        <span class="hljs-keyword">this</span>.ID = id;
        <span class="hljs-keyword">this</span>.IMAGEWIDTH = imagewidth;
        <span class="hljs-keyword">this</span>.IMAGEHEIGHT = height;
        <span class="hljs-keyword">this</span>.setSize(IMAGEWIDTH, IMAGEHEIGHT);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>(Direction dir)//移动
    {
        Rectangle rec = <span class="hljs-keyword">this</span>.getBounds();<span class="hljs-comment">//获取当前对象的这个边框</span>
        <span class="hljs-keyword">switch</span>(dir)
        {
        <span class="hljs-keyword">case</span> UP:<span class="hljs-comment">//向上移动，改变坐标</span>
            <span class="hljs-keyword">this</span>.setLocation(rec.x, rec.y + IMAGEHEIGHT);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOWN:<span class="hljs-comment">//向下移动</span>
            <span class="hljs-keyword">this</span>.setLocation(rec.x, rec.y - IMAGEHEIGHT);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> LEFT:<span class="hljs-comment">//向左移动</span>
            <span class="hljs-keyword">this</span>.setLocation(rec.x - IMAGEWIDTH, rec.y);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> RIGHT:<span class="hljs-comment">//向右移动</span>
            <span class="hljs-keyword">this</span>.setLocation(rec.x + IMAGEWIDTH, rec.y);
            <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getID</span>() {
        <span class="hljs-keyword">return</span> ID;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getX</span>()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getBounds().x;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getY</span>()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getBounds().y;
    }
}
</code></pre>
    <pre class="prettyprint"><code class="hljs java">Direction类------方向枚举类，存放移动的方向
<span class="hljs-keyword">package</span> puzzle_game;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> Direction {
    UP,
    DOWN,
    LEFT,
    RIGHT
}
</code></pre>
    <pre class="prettyprint"><code class="hljs java">GamePanel类-----游戏面板设计类，真正的游戏思想从此开始
主要实现的功能有：
<span class="hljs-number">1.</span>初始化面板按钮数组，将图像转化成图标然后存入按钮中；
<span class="hljs-number">2.</span>打乱数组面板中的按钮排序，实现游戏娱乐功能；
<span class="hljs-number">3.</span>每个按钮添加监听机制，实现点击按钮后的移动功能；

<span class="hljs-keyword">package</span> puzzle_game;

<span class="hljs-keyword">import</span> java.awt.event.MouseEvent;
<span class="hljs-keyword">import</span> java.awt.event.MouseListener;
<span class="hljs-keyword">import</span> java.awt.image.BufferedImage;
<span class="hljs-keyword">import</span> java.io.File;
<span class="hljs-keyword">import</span> java.util.Random;
<span class="hljs-keyword">import</span> javax.imageio.ImageIO;
<span class="hljs-keyword">import</span> javax.swing.ImageIcon;
<span class="hljs-keyword">import</span> javax.swing.JOptionPane;
<span class="hljs-keyword">import</span> javax.swing.JPanel;

<span class="hljs-annotation">@SuppressWarnings</span>(<span class="hljs-string">"serial"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GamePanel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JPanel</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MouseListener</span>{<!-- --></span>

    <span class="hljs-keyword">private</span> Cell BlankCell = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> row = <span class="hljs-number">4</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> col = <span class="hljs-number">4</span>;<span class="hljs-comment">//设置这个拼图的行列</span>
    <span class="hljs-keyword">private</span> Cell cells[] = <span class="hljs-keyword">new</span> Cell[row*col];<span class="hljs-comment">//创建一个按钮对象数组</span>
    <span class="hljs-keyword">int</span> ImageWidth;
    <span class="hljs-keyword">int</span> ImageHeight;

    <span class="hljs-keyword">public</span> <span class="hljs-title">GamePanel</span>()//构造函数
    {
        <span class="hljs-keyword">this</span>.setLayout(<span class="hljs-keyword">null</span>);
        init();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span>()//初始化完成以下功能--完成图像的切割，完成图像到图标的转换，完成按钮图标的添加，将按钮添加到面板上，并且给每一个按钮添加监听机制
    {
        <span class="hljs-keyword">int</span> num = <span class="hljs-number">0</span>;
        BufferedImage buf = <span class="hljs-keyword">null</span>;
        BufferedImage bufnew = <span class="hljs-keyword">null</span>;
        ImageIcon icon = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">int</span> width = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">int</span> height = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">try</span>
        {
            buf = ImageIO.read(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"F:/Image/Puzzle_game/puze.jpg"</span>));<span class="hljs-comment">//读取文件图像</span>
            ImageWidth = buf.getWidth();
            ImageHeight = buf.getHeight();
            System.out.println(<span class="hljs-string">"ImageWidth-&gt;"</span>+ImageWidth+<span class="hljs-string">"ImageHeight-&gt;"</span>+ImageHeight);
            width = ImageWidth/col;
            height = ImageHeight/row;
        }<span class="hljs-keyword">catch</span>(Exception e)
        {
            System.out.println(e);
        }
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; row; i++)
        {
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; col; j++)
            {
                num = i*col+j;<span class="hljs-comment">//表示当前这个图像的坐标id，在数组中的下标</span>
                <span class="hljs-keyword">if</span>(num &lt; row*col-<span class="hljs-number">1</span>)
                {
                    bufnew = buf.getSubimage(width*j, height*i, width, height);
                    icon = <span class="hljs-keyword">new</span> ImageIcon(bufnew);<span class="hljs-comment">//将图像转化成图标</span>
                }
                <span class="hljs-keyword">else</span><span class="hljs-comment">//使最后一张图像为空白图像</span>
                {
                    icon = <span class="hljs-keyword">new</span> ImageIcon(<span class="hljs-string">"F:/Image/Puzzle_game/background2.jpg"</span>);<span class="hljs-comment">//一张空白图像</span>
                }
                cells[num] = <span class="hljs-keyword">new</span> Cell(icon, num, width, height);<span class="hljs-comment">//添加图标到每一个BUTTON按钮上面</span>
                cells[num].setLocation(width*j, height*i);
            }
        }
        BlankCell = cells[cells.length-<span class="hljs-number">1</span>];<span class="hljs-comment">//初始化空白格</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cells.length; i++)
        {
            <span class="hljs-keyword">this</span>.add(cells[i]);<span class="hljs-comment">//将每一个按钮添加到当前这个面板上面</span>
            <span class="hljs-keyword">if</span>(i &lt; cells.length-<span class="hljs-number">1</span>)
                cells[i].addMouseListener(<span class="hljs-keyword">this</span>);<span class="hljs-comment">//空白格不添加监听机制</span>
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OutOfOrder</span>()//乱序----打乱图片的排布顺序
    {
        Random random = <span class="hljs-keyword">new</span> Random();
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span> ; i &lt; cells.length ; i++)
        {
            <span class="hljs-keyword">int</span> index1 = random.nextInt(cells.length);<span class="hljs-comment">//cells的长度是9，但是他的上限是9，取不到9，所取值范围是0-8</span>
            <span class="hljs-keyword">int</span> index2 = random.nextInt(cells.length);
            <span class="hljs-keyword">int</span> x = cells[index1].getX();
            <span class="hljs-keyword">int</span> y = cells[index1].getY();<span class="hljs-comment">//获取下标是index1的数组元素按钮的坐标</span>
            cells[index1].setLocation(cells[index2].getX(), cells[index2].getY());
            cells[index2].setLocation(x, y);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">IsWin</span>()//判断游戏玩家是否赢
    {
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cells.length; i++)
        {
            <span class="hljs-keyword">int</span> x = cells[i].getX();
            <span class="hljs-keyword">int</span> y = cells[i].getY();
            <span class="hljs-keyword">if</span>(x/(ImageWidth/col) + y/(ImageHeight/row) != i)
            {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mouseClicked</span>(MouseEvent e)
    {
        Cell t = (Cell) e.getSource();
        <span class="hljs-keyword">int</span> x = BlankCell.getX();
        <span class="hljs-keyword">int</span> y = BlankCell.getY();
        <span class="hljs-keyword">if</span>(t.getY() == y &amp;&amp; t.getX() + ImageWidth/col == x)<span class="hljs-comment">//图像向右走</span>
        {
            t.move(Direction.RIGHT);
            BlankCell.move(Direction.LEFT);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t.getY() == y &amp;&amp; t.getX() - ImageWidth/col == x)<span class="hljs-comment">//图像向左走</span>
        {
            t.move(Direction.LEFT);
            BlankCell.move(Direction.RIGHT);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t.getX() == x &amp;&amp; t.getY() + ImageHeight/row == y)<span class="hljs-comment">//图像向上走</span>
        {
            t.move(Direction.UP);
            BlankCell.move(Direction.DOWN);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t.getX() == x &amp;&amp; t.getY() - ImageHeight/row == y)<span class="hljs-comment">//图像向下走</span>
        {
            t.move(Direction.DOWN);
            BlankCell.move(Direction.UP);
        }
        <span class="hljs-keyword">if</span>(IsWin())
        {
            <span class="hljs-keyword">int</span> choice = JOptionPane.showConfirmDialog(<span class="hljs-keyword">null</span>, <span class="hljs-string">"恭喜您过关了是否还来一局？"</span>, <span class="hljs-string">"提示"</span>, JOptionPane.YES_NO_OPTION);
            <span class="hljs-keyword">if</span>(choice == <span class="hljs-number">0</span>)<span class="hljs-comment">//表示再来一局</span>
            {
                <span class="hljs-keyword">this</span>.OutOfOrder();
            }
            <span class="hljs-keyword">else</span><span class="hljs-comment">//表示退出游戏</span>
                System.exit(<span class="hljs-number">1</span>);
        }
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mousePressed</span>(MouseEvent e) {
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mouseReleased</span>(MouseEvent e) {
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mouseEntered</span>(MouseEvent e) {
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mouseExited</span>(MouseEvent e) {
    }
}
</code></pre>
    <pre class="prettyprint"><code class="hljs java">GameFrame类------设置游戏的打开窗口类，创建了一个菜单面板存放游戏开始和游戏结束两个按钮，并且对游戏的窗口进行了基本设置，这是整个游戏的入口。

<span class="hljs-keyword">package</span> puzzle_game;

<span class="hljs-keyword">import</span> java.awt.BorderLayout;
<span class="hljs-keyword">import</span> java.awt.Container;
<span class="hljs-keyword">import</span> java.awt.EventQueue;
<span class="hljs-keyword">import</span> java.awt.FlowLayout;
<span class="hljs-keyword">import</span> java.awt.event.ActionEvent;
<span class="hljs-keyword">import</span> java.awt.event.ActionListener;
<span class="hljs-keyword">import</span> javax.swing.JButton;
<span class="hljs-keyword">import</span> javax.swing.JFrame;
<span class="hljs-keyword">import</span> javax.swing.JPanel;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameFrame</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JFrame</span> {<!-- --></span>
    <span class="hljs-keyword">public</span> JPanel pane1 = <span class="hljs-keyword">new</span> JPanel();
    <span class="hljs-keyword">public</span> JButton button1 = <span class="hljs-keyword">new</span> JButton(<span class="hljs-string">"游戏开始"</span>);
    <span class="hljs-keyword">public</span> JButton button2 = <span class="hljs-keyword">new</span> JButton(<span class="hljs-string">"游戏结束"</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-title">GameFrame</span>()
    {
        <span class="hljs-keyword">super</span>(<span class="hljs-string">"拼图游戏"</span>);
        pane1.setLayout(<span class="hljs-keyword">new</span> FlowLayout());
        pane1.add(button1);
        pane1.add(button2);
        Container con = <span class="hljs-keyword">this</span>.getContentPane();
        con.add(pane1,BorderLayout.NORTH);
        GamePanel gamepane = <span class="hljs-keyword">new</span> GamePanel();
        con.add(gamepane,BorderLayout.CENTER);
        <span class="hljs-keyword">this</span>.setBounds(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">600</span>, <span class="hljs-number">600</span>);
        <span class="hljs-keyword">this</span>.setVisible(<span class="hljs-keyword">true</span>);
        <span class="hljs-keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        button1.addActionListener(<span class="hljs-keyword">new</span> ActionListener()
        {
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">actionPerformed</span>(<span class="hljs-keyword">final</span> ActionEvent e)
            {
                gamepane.OutOfOrder();
            }
        });
        button2.addActionListener(<span class="hljs-keyword">new</span> ActionListener()
        {
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">actionPerformed</span>(<span class="hljs-keyword">final</span> ActionEvent e)
            {
                System.exit(<span class="hljs-number">1</span>);
            }
        });
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(String[] args) {
        <span class="hljs-keyword">new</span> GameFrame();
    }
}
</code></pre>
    <p>
     这是刚运行程序以后的界面，也是拼图成功的界面，我设置的是4*4模式，你也可以根据自己的喜好设计模式诸如–2*3，3*4，都可以；
     <br/>
     <img alt="这是刚运行程序以后的界面，也是拼图成功的界面" src="https://img-blog.csdn.net/20170508114902464?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYW5ncnlfeW91dGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
    </p>
    <p>
     这是我点击开始以后运行的界面，当然每次都不同，因为乱序是随机生成的顺序，那么现在就可以玩你自己的游戏了：
     <br/>
     <img alt="这是我点击开始以后运行的界面，当然每次都不同，因为乱序是随机生成的顺序：" src="https://img-blog.csdn.net/20170508115046012?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYW5ncnlfeW91dGg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f616e6772795f796f757468:2f61727469636c652f64657461696c732f3731343034363531" class_="artid" style="display:none">
 </p>
</div>


