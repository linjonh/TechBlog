---
layout: post
title: "微信小程序实现简单下拉加载更多"
date: 2022-06-12 20:55:49 +0800
description: "微信小程序实现简单下拉加载更多_微信小程序 - (下拉)加载更多数据"
keywords: "微信小程序 - (下拉)加载更多数据"
categories: ['微信小程序']
tags: ['微信小程序', '前端', 'Javascript']
artid: "125249764"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125249764
    alt: "微信小程序实现简单下拉加载更多"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序实现简单下拉加载更多
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     1.微信小程序前端页面：
    </p>
    <p>
    </p>
    <pre><code class="language-XML">&lt;block wx:for="{<!-- -->{list}}"&gt;
  &lt;navigator url="/pages/udd/udd?id={<!-- -->{item.id}}"&gt;
    &lt;l-card type="primary" l-img-class="right-card" position="left" image="/img/QQ.GIF"&gt;
      &lt;view style="color: aquamarine;"&gt;id：{<!-- -->{item.id}}&lt;/view&gt;
      &lt;view class="content" style="color: yellowgreen;"&gt;标题：{<!-- -->{item.name}}&lt;/view&gt;
      &lt;view style="color: coral;"&gt;地址：{<!-- -->{item.adress}}&lt;/view&gt;
      &lt;view style="color: red;"&gt;价格：${<!-- -->{item.price}}&lt;/view&gt;
    &lt;/l-card&gt;
  &lt;/navigator&gt;
&lt;/block&gt;</code></pre>
    <p>
     2.前端js代码：
    </p>
    <pre><code class="language-javascript"> onLoad: function (options) {
    var that = this
    wx.request({
      // 请求地址
      url: '',//填写自己的请求地址
      //传页码和每页显示的数量
      data: {
        length: 0
      },
      success: function (res) {
        that.setData({
          list: res.data.data
        })
      }
    })
  },</code></pre>
    <pre><code class="language-javascript">onReachBottom: function () {
    var that = this
    var length = this.__data__.list.length
    var arr = this.__data__.list
    wx.request({
      // 请求地址
      url: '',//填写自己的请求地址
      //传页码和每页显示的数量
      data: {
        length: length
      },
      success: function (res) {
        //判断是否有数据，如果没有数据给吃提示
        if (res.data.data != '') {
          wx.showToast({
            title: '正在加载中',
            icon: 'loading',
            duration: 2000
          })
          //把值发送到前端进行渲染
          that.setData({
            list: arr.concat(res.data.data)
          })
        } else {
          wx.showToast({
            title: '没有更多数据！',
            icon: 'error',
            duration: 2000
          })
        }
      }
    })
  },</code></pre>
    <p>
     后端控制器代码：
    </p>
    <pre><code class="language-php">//此方法为微信小程序下拉加载更多
    public function last(Request $request)
    {
        //接收前端分页的值
        $length = $request-&gt;get('length');
        //实例化模型
        $model = new LastModel();
        //调用模型查询出数据
        $Rasdata = $model-&gt;Show($length);
        return ['code' =&gt; '200', 'msg' =&gt; '查询成功', 'data' =&gt; $Rasdata];
    }</code></pre>
    <p>
     后端模型代码：
    </p>
    <pre><code class="language-php"> //连接表格
    protected $table = '';

    //实现列表下拉
    public function Show($length)
    {
        return $this-&gt;offset($length)-&gt;limit(5)-&gt;get();
    }</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35393532373638322f:61727469636c652f64657461696c732f313235323439373634" class_="artid" style="display:none">
 </p>
</div>


