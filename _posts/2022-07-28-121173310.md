---
layout: post
title: "Servlet实现前后端json数据交互,前端js传输数据,后端fastjson解析json数据,以及Tomcat部署和jquery的部署"
date: 2022-07-28 15:53:02 +0800
description: "本文介绍了如何利用Java的Servlet技术，结合Fastjson处理前端通过POST请求发送的加"
keywords: "servlet怎么接受前端传回的json"
categories: ['']
tags: ['前端', 'Json', 'Javascript']
artid: "121173310"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=121173310
    alt: "Servlet实现前后端json数据交互,前端js传输数据,后端fastjson解析json数据,以及Tomcat部署和jquery的部署"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Servlet实现前后端json数据交互，前端js传输数据，后端fastjson解析json数据，以及Tomcat部署和jquery的部署
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     最近写了一个小的web练习项目，后端接受前端传来的json数据，并返回相应的信息
    </p>
    <p>
     要求如下：
    </p>
    <p style="margin-left:0;text-align:justify;">
     编写一个用于计算加权平均数的Servlet，以Post方式接收如下json格式参数
    </p>
    <p style="margin-left:0;text-align:justify;">
     {
     <!-- -->
    </p>
    <p style="margin-left:0;text-align:justify;">
     "nums": [1, 2, 3, 4],
    </p>
    <p style="margin-left:0;text-align:justify;">
     "weight": [3, 1, 4, 5],
    </p>
    <p style="margin-left:0;text-align:justify;">
     "accuracy": 2
    </p>
    <p style="margin-left:0;text-align:justify;">
     }
    </p>
    <p style="margin-left:0;text-align:justify;">
     nums表示若干个数，weight表示这些数的权重，accuracy表示保留小数点后多少位(四舍六入五成双)。
    </p>
    <p style="margin-left:0;text-align:justify;">
     首先创建一个web项目
    </p>
    <p style="margin-left:0;text-align:justify;">
     <img alt="" height="508" src="https://i-blog.csdnimg.cn/blog_migrate/ad5f7718c1b440f0b14a9b9cd82607bb.png" width="656"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <h2 style="margin-left:0px;text-align:justify;">
     部署tomcat，这个在idea中只有完整版才有，社区版是找不到这个Tomcat Server的
    </h2>
    <p>
     项目创建完了要在run-&gt;Edit Configurations中新建一个tomcat，选择自己tomcat下载路径即可
    </p>
    <p style="margin-left:0;text-align:justify;">
     <img alt="" height="854" src="https://i-blog.csdnimg.cn/blog_migrate/27c061ceddd9f15634a2e1512705d91f.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
     然后创建一个类继承自HttpServlet
    </p>
    <p>
     接着在web.xml中部署文件
    </p>
    <h2>
     web.xml部署文件
    </h2>
    <p>
     形式如下
    </p>
    <p>
     <img alt="" height="255" src="https://i-blog.csdnimg.cn/blog_migrate/fe0739e720444c3d4a3c82171637f3a5.png" width="612"/>
    </p>
    <p>
     servlet-mapping 中写的是虚拟目录
    </p>
    <p>
     由于是前后端交互的，所以我们先编写前端的html代码再来到后端处理数据
    </p>
    <h2>
     html端代码如下：
    </h2>
    <p>
     <img alt="" height="776" src="https://i-blog.csdnimg.cn/blog_migrate/369452ec3aa588f4f87b0b7186e3a61f.png" width="1200"/>
    </p>
    <p>
     在这个html界面中我们使用了jquery的库，可以使用各大厂商现成的库，也可在在官网复制一份然后创建一个js文件
    </p>
    <p>
     这里采用的是复制的方法：
    </p>
    <h2>
     引用jquery库，以及$符号未定义的解决方法：
    </h2>
    <p>
     在官网找到
    </p>
    <p>
     <img alt="" height="238" src="https://i-blog.csdnimg.cn/blog_migrate/0835b5fab6a17433c3e20ebe23cf6bb4.png" width="1200"/>
    </p>
    <p>
     点进去将内容全部复制，然后回到idea，在webapp下创建一个js文件，将所有内容复制过去即可，
    </p>
    <p>
     在使用的时候就可以
    </p>
    <p>
     <img alt="" height="41" src="https://i-blog.csdnimg.cn/blog_migrate/170a7af21ee2687e7616e93b677d4165.png" width="624"/>
    </p>
    <p>
     这样来应用jquery库，如果还是出现无法引用的问题，可以尝试选中src按Alt+Enter来查看提示
    </p>
    <hr/>
    <p>
     那么现在html界面已经写完了，我们要在后端对前端发送过来的数据进行处理，
    </p>
    <p>
     因为用到了Servlet和Fastjson，我们需要在lib引入两个jar包
    </p>
    <p>
     <img alt="" height="108" src="https://i-blog.csdnimg.cn/blog_migrate/d2b4bfe252160b5db8b29100287b2692.png" width="419"/>
    </p>
    <p>
     主要代码如下
    </p>
    <p>
     <img alt="" height="579" src="https://i-blog.csdnimg.cn/blog_migrate/9aa8f5877e2d8f28ff43229a3a244609.png" width="1200"/>
    </p>
    <p>
     中间的计算我们跳过，直接到最后的返回json上来，
    </p>
    <p>
     返回数据主要使用PrintWriter这个类
    </p>
    <p>
     我们通过response来返回这个类的主体
    </p>
    <p>
     <img alt="" height="165" src="https://i-blog.csdnimg.cn/blog_migrate/05abcdc71747178e168b46c663cb2a41.png" width="593"/>
    </p>
    <p>
     然后对JSONObject添加数据之后
    </p>
    <p>
     就可以使用printWriter中的write方法来返回数据到前端
    </p>
    <p>
     <img alt="" height="54" src="https://i-blog.csdnimg.cn/blog_migrate/8f1df308a10f4936f76db88298d8aa14.png" width="505"/>
    </p>
    <h2>
     其中可能会出现一个运行时的异常，
     <strong>
      java.lang.NoClassDefFoundError:com/alibaba/fastjson/JSONOBject
     </strong>
    </h2>
    <p>
     有一个解决方法是复制Tomcat-&gt;lib-&gt;servlet对应的jar包到jdk-&gt;jre-&gt;lib-&gt;ext中，然后重启ide即可
    </p>
    <h2>
     附一张工程目录图
    </h2>
    <p>
     <img alt="" height="531" src="https://i-blog.csdnimg.cn/blog_migrate/6469089220bf0d5d8015de7cb34da164.png" width="419"/>
    </p>
    <hr/>
    <p>
     最后我们来看一看运行效果
    </p>
    <p>
     <img alt="" height="256" src="https://i-blog.csdnimg.cn/blog_migrate/687ed3613b3e812a853835622f8b61a6.png" width="721"/>
    </p>
    <p>
     F12查看返回数据
    </p>
    <p>
     <img alt="" height="780" src="https://i-blog.csdnimg.cn/blog_migrate/006c1c37de0e89ca7f65af9dc728d9d5.png" width="971"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35353530343639352f:61727469636c652f64657461696c732f313231313733333130" class_="artid" style="display:none">
 </p>
</div>


