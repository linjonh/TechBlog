---
layout: post
title: "Centos7源码编译安装PostgreSQL13.5版本数据库详细操作步骤"
date: 2022-10-13 11:35:25 +0800
description: "centos7离线编译部署PostgreSQL数据库13.5版本，从下载到使用，一文搞定。PG数据库"
keywords: "pgsql13.5"
categories: ['']
tags: ['运维', 'Linux', 'Centos']
artid: "127295617"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=127295617
    alt: "Centos7源码编译安装PostgreSQL13.5版本数据库详细操作步骤"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Centos7源码编译安装PostgreSQL13.5版本数据库详细操作步骤
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p id="main-toc">
     <strong>
      目录
     </strong>
    </p>
    <p id="-toc" style="margin-left:40px;">
    </p>
    <p id="1.%E4%B8%8B%E8%BD%BDPostgreSQL13.5%E7%89%88%E6%9C%AC-toc" style="margin-left:40px;">
     <a href="#1.%E4%B8%8B%E8%BD%BDPostgreSQL13.5%E7%89%88%E6%9C%AC" rel="nofollow">
      1.下载PostgreSQL13.5版本
     </a>
    </p>
    <p id="1.1%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E9%83%BD%E6%9C%89%E8%BF%99%E4%BA%9B%E4%BE%9D%E8%B5%96-toc" style="margin-left:80px;">
     <a href="#1.1%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E9%83%BD%E6%9C%89%E8%BF%99%E4%BA%9B%E4%BE%9D%E8%B5%96" rel="nofollow">
      1.1查看是否都有这些依赖
     </a>
    </p>
    <p id="1.2%E8%8B%A5%E6%97%A0%E5%88%99%E8%A7%A3%E5%86%B3%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96%EF%BC%9A-toc" style="margin-left:80px;">
     <a href="#1.2%E8%8B%A5%E6%97%A0%E5%88%99%E8%A7%A3%E5%86%B3%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96%EF%BC%9A" rel="nofollow">
      1.2若无则解决编译安装所需依赖：
     </a>
    </p>
    <p id="1.3%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%8C%85-toc" style="margin-left:80px;">
     <a href="#1.3%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%8C%85" rel="nofollow">
      1.3下载源码编译安装包
     </a>
    </p>
    <p id="%C2%A02.%E5%AE%89%E8%A3%85PostgreSQL-V13.5%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:40px;">
     <a href="#%C2%A02.%E5%AE%89%E8%A3%85PostgreSQL-V13.5%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">
      2.安装PostgreSQL-V13.5数据库
     </a>
    </p>
    <p id="2.1%E8%A7%A3%E5%8E%8B%E7%BC%96%E8%AF%91-toc" style="margin-left:80px;">
     <a href="#2.1%E8%A7%A3%E5%8E%8B%E7%BC%96%E8%AF%91" rel="nofollow">
      2.1解压编译
     </a>
    </p>
    <p id="2.2%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E5%92%8C%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;">
     <a href="#2.2%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E5%92%8C%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE" rel="nofollow">
      2.2安装、配置用户和环境变量配置
     </a>
    </p>
    <p id="2.3%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:80px;">
     <a href="#2.3%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">
      2.3初始化数据库
     </a>
    </p>
    <p id="2.4%E5%90%AF%E5%8A%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E8%BF%9B%E5%85%A5%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81-toc" style="margin-left:80px;">
     <a href="#2.4%E5%90%AF%E5%8A%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E8%BF%9B%E5%85%A5%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81" rel="nofollow">
      2.4启动数据库、进入修改密码
     </a>
    </p>
    <p id="2.5%E4%BF%AE%E6%94%B9pg%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;">
     <a href="#2.5%E4%BF%AE%E6%94%B9pg%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">
      2.5修改pg数据库配置文件
     </a>
    </p>
    <p id="3.%E4%BD%BF%E7%94%A8pgAdmin%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95-toc" style="margin-left:40px;">
     <a href="#3.%E4%BD%BF%E7%94%A8pgAdmin%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95" rel="nofollow">
      3.使用pgAdmin远程连接测试
     </a>
    </p>
    <hr id="hr-toc"/>
    <p>
    </p>
    <h3 id="1.%E4%B8%8B%E8%BD%BDPostgreSQL13.5%E7%89%88%E6%9C%AC">
     1.下载PostgreSQL13.5版本
    </h3>
    <h4 id="1.1%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E9%83%BD%E6%9C%89%E8%BF%99%E4%BA%9B%E4%BE%9D%E8%B5%96">
     1.1查看是否都有这些依赖
    </h4>
    <p>
     openssl-devel libxml2-devel libxslt-devel python-devel cmake gcc-c++ zlib-devel bzip2 readline-devel
    </p>
    <h4 id="1.2%E8%8B%A5%E6%97%A0%E5%88%99%E8%A7%A3%E5%86%B3%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96%EF%BC%9A">
     1.2若无则解决编译安装所需依赖：
    </h4>
    <p>
     yum -y install openssl-devel libxml2-devel libxslt-devel python-devel cmake gcc-c++ zlib-devel bzip2 readline-devel
    </p>
    <h4 id="1.3%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%8C%85">
     1.3下载源码编译安装包
    </h4>
    <p>
     官网地址：
     <a href="https://www.postgresql.org/" rel="nofollow" title="PostgreSQL: The world's most advanced open source database">
      PostgreSQL: The world's most advanced open source database
     </a>
    </p>
    <p>
     按照下图所示，下载完成后，上传至所需安装服务器
    </p>
    <p>
     <img alt="" height="599" src="https://i-blog.csdnimg.cn/blog_migrate/3c47ded1fca433b8ff431e132c012881.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="841" src="https://i-blog.csdnimg.cn/blog_migrate/52f04677b93a46d31caeb6d20cf7023a.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="902" src="https://i-blog.csdnimg.cn/blog_migrate/0fa683c39b1b0f985c822d2e18dcf63c.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="737" src="https://i-blog.csdnimg.cn/blog_migrate/49f0bb34737918318b18ff04dec701d5.png" width="1200">
     </img>
    </p>
    <h3 id="%C2%A02.%E5%AE%89%E8%A3%85PostgreSQL-V13.5%E6%95%B0%E6%8D%AE%E5%BA%93">
     2.安装PostgreSQL-V13.5数据库
    </h3>
    <h4 id="2.1%E8%A7%A3%E5%8E%8B%E7%BC%96%E8%AF%91">
     2.1解压编译
    </h4>
    <p>
     上传文件到服务器后，进入到文件上传目录，解压压缩包
    </p>
    <p>
     tar -xvf postgresql-13.5.tar.gz
    </p>
    <p>
     解压后会出现一个新的文件夹，进入此文件夹
     <br/>
     <img alt="" height="105" src="https://i-blog.csdnimg.cn/blog_migrate/fd18eccd26452fddebcd4b91c3dd8eec.png" width="777"/>
    </p>
    <p>
     进入后执行  命令进行编译   --prefix=/usr/    为编译到指定目录
    </p>
    <p>
     ./configure --prefix=/usr/local/postgresql
    </p>
    <p>
     如果所需依赖是全部安装了的，以及centos版本是一致的应该不会出现问题，如下图，无报错即为编译成功
    </p>
    <p>
     <img alt="" height="352" src="https://i-blog.csdnimg.cn/blog_migrate/401902d5d6533cfdc632259929f645a4.png" width="1065"/>
    </p>
    <h4 id="2.2%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E5%92%8C%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE">
     2.2安装、配置用户和环境变量配置
    </h4>
    <p>
     执行  make &amp;&amp; make install 等待完成安装  （ps:注意后面两个单词中间空格）
    </p>
    <p>
     执行完毕截图：
    </p>
    <p>
     <img alt="" height="369" src="https://i-blog.csdnimg.cn/blog_migrate/468220534fb8276c728b98ca8bfb05a1.png" width="1001"/>
    </p>
    <p>
     添加用户，并对安装路径文件夹赋权
    </p>
    <p>
     useradd postgre
    </p>
    <p>
     chown -R postgre:postgre /usr/local/postgresql
    </p>
    <p>
     <img alt="" height="137" src="https://i-blog.csdnimg.cn/blog_migrate/c4814f666d31e57b95c7cfe7ef0ad4c8.png" width="914"/>
    </p>
    <p>
     环境变量配置
    </p>
    <p>
     执行 vim /etc/profile  编辑环境变量文件  在最后插入如下两行即可
    </p>
    <p>
     export PGHOME=/usr/local/postgresql
     <br/>
     export PATH=$PATH:$PGHOME/bin
    </p>
    <p>
     <img alt="" height="766" src="https://i-blog.csdnimg.cn/blog_migrate/713c98e22a062100612009b1a5b938ec.png" width="1200"/>
    </p>
    <p>
     编辑完保存退出，执行 source /etc/profile 使刚刚的编辑立即生效
    </p>
    <h4 id="2.3%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93">
     2.3初始化数据库
    </h4>
    <p>
     执行 su postgre 切换到刚刚创建的用户进入到安装postgresql的路径下的bin目录
    </p>
    <p>
     <img alt="" height="80" src="https://i-blog.csdnimg.cn/blog_migrate/813b252c3bc7cce886209e3572735134.png" width="649"/>
    </p>
    <p>
     进入后执行如下命令，初始化数据库
    </p>
    <p>
     ./initdb -D /usr/local/postgresql/data -U postgre --encoding=UTF8 --lc-collate=en_US.UTF-8 --lc-ctype=en_US.UTF-8
    </p>
    <p>
     执行成功截图，数据库已初始化完成!
     <br/>
     <img alt="" height="564" src="https://i-blog.csdnimg.cn/blog_migrate/953a2d584f4232b7439cd9946d44ebb1.png" width="1200"/>
     <br/>
    </p>
    <h4 id="2.4%E5%90%AF%E5%8A%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E8%BF%9B%E5%85%A5%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81">
     2.4启动数据库、进入修改密码
    </h4>
    <p>
     ./pg_ctl -D /usr/local/postgresql/data/ start
    </p>
    <p>
     <img alt="" height="209" src="https://i-blog.csdnimg.cn/blog_migrate/43fbcd2895876d88c01d8fbf581d3e42.png" width="1041"/>
    </p>
    <p>
     登陆进入数据库，此时登陆默认无密码
     <img alt="" height="133" src="https://i-blog.csdnimg.cn/blog_migrate/dc4c53da3161393235cdb194faf3a1cf.png" width="891"/>
    </p>
    <p>
     执行 \password  进行密码修改  注意两次输入密码一致，无复杂度要求
    </p>
    <p>
     <img alt="" height="88" src="https://i-blog.csdnimg.cn/blog_migrate/0247cec75228f33552a63b9e00f2b003.png" width="421"/>
    </p>
    <p>
     输入 \q 或者exit 退出数据库
    </p>
    <h4 id="2.5%E4%BF%AE%E6%94%B9pg%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">
     2.5修改pg数据库配置文件
    </h4>
    <p>
     此次配置修改是一些基础的功能配置，一些其他复杂的功能可后期自己进行配置
    </p>
    <p>
     此时修改配置文件的目的：
    </p>
    <p>
     1.配置数据库需要密码登陆
    </p>
    <p>
     2.能够其他远程机器访问服务器数据库
    </p>
    <p>
     3.日志的输出位置
    </p>
    <p>
     返回data目录，编辑配置文件
    </p>
    <p>
     cd ../data
    </p>
    <p>
     vim postgresql.conf
    </p>
    <p>
     <img alt="" height="89" src="https://i-blog.csdnimg.cn/blog_migrate/770c9e290ca438de2a5f5cd7e24b1d35.png" width="666"/>
    </p>
    <p>
     按照下图配置即可，日志路径需根据自己需要进行配置      此文件较长，注意查看不要翻过了
     <img alt="" height="593" src="https://i-blog.csdnimg.cn/blog_migrate/9ca26f5ba04a67bb1c6eaeb0d4b2a82f.png" width="960"/>
    </p>
    <p>
     保存退出后，执行 vim pg_hba.conf   翻到最后
    </p>
    <p>
     <img alt="" height="496" src="https://i-blog.csdnimg.cn/blog_migrate/1b85c95cbcb9584d1b4dc654f100437d.png" width="1098"/>
    </p>
    <p>
     重启数据库，再次进行连接
    </p>
    <p>
     pg_ctl -D /usr/local/postgresql/data/  restart
    </p>
    <p>
     <img alt="" height="257" src="https://i-blog.csdnimg.cn/blog_migrate/4d5fe447f6c8185896d290ab8537cce0.png" width="1195"/>
    </p>
    <p>
     psql -U postgre -d postgres -h 127.0.0.1 -p 5432
    </p>
    <p>
     输入密码，登陆成功，pg数据部署完成
    </p>
    <p>
    </p>
    <p>
    </p>
    <h3 id="3.%E4%BD%BF%E7%94%A8pgAdmin%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95">
     3.使用pgAdmin远程连接测试
    </h3>
    <p>
     注意使用远程连接，注意防火墙策略是否开启5432端口，若未开启则需要开启端口，否则无法访问
    </p>
    <p>
     <img alt="" height="775" src="https://i-blog.csdnimg.cn/blog_migrate/6f3ce747127cba7607d1a36fd420bd86.png" width="900"/>
    </p>
    <p>
     save之后不提示错误信息，即为连接成功
    </p>
    <p>
     1665631766000
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f74776f5f736869742f:61727469636c652f64657461696c732f313237323935363137" class_="artid" style="display:none">
 </p>
</div>


