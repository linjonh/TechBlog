---
layout: post
title: "Java-Calendar-日历类的时间操作-Timestamp-Date-Calendar-相互转换"
date: 2024-12-07 09:55:39 +0800
description: "+次，点赞96次，收藏387次。Java Calendar 日历类的时间操作，这也许是 Java 环"
keywords: "javacalendar"
categories: ['算法', '所有', 'Java']
tags: ['时间', 'Timestamp', 'Java', 'Date', 'Calendar']
artid: "9630893"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=9630893
    alt: "Java-Calendar-日历类的时间操作-Timestamp-Date-Calendar-相互转换"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java Calendar 日历类的时间操作 Timestamp Date Calendar 相互转换
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     Java Calendar 日历类的时间操作，这也许是 Java 环境下创建和管理日历及操作时间最简单的一个方案了，示范代码也很简单。
    </p>
    <p>
     演示了获取时间，日期时间的累加和累减，以及日期时间的比较。
    </p>
    <p>
     原文地址：blog.csdn.net/joyous/article/details/9630893
    </p>
    <p>
     <span style="color:#ff0000;">
      注意事项：
     </span>
    </p>
    <p>
     <span style="color:#ff0000;">
      Calendar 的 month 从 0 开始，也就是全年 12 个月由 0 ~ 11 进行表示。
     </span>
    </p>
    <p>
     <span style="color:#ff0000;">
      而 Calendar.DAY_OF_WEEK 定义值如下，每周从 SUNDAY 开始，从 1 ~ 7：
     </span>
    </p>
    <p>
     <span style="color:#ff0000;">
      Calendar.SUNDAY = 1
      <br/>
      Calendar.MONDAY = 2
      <br/>
      Calendar.TUESDAY = 3
      <br/>
      Calendar.WEDNESDAY = 4
      <br/>
      Calendar.THURSDAY = 5
      <br/>
      Calendar.FRIDAY = 6
      <br/>
      Calendar.SATURDAY = 7
     </span>
    </p>
    <p>
     <strong>
      SimpleDateFormat 的格式定义
     </strong>
    </p>
    <p>
    </p>
    <table border="0" cellpadding="0" cellspacing="3">
     <tbody>
      <tr>
       <th>
        Letter
       </th>
       <th>
        Date or Time Component
       </th>
       <th>
        Presentation
       </th>
       <th>
        Examples
       </th>
      </tr>
      <tr>
       <td>
        <code>
         G
        </code>
       </td>
       <td>
        Era designator
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#text" rel="nofollow">
         Text
        </a>
       </td>
       <td>
        <code>
         AD
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         y
        </code>
       </td>
       <td>
        Year
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#year" rel="nofollow">
         Year
        </a>
       </td>
       <td>
        <code>
         1996
        </code>
        ;
        <code>
         96
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Y
        </code>
       </td>
       <td>
        Week year
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#year" rel="nofollow">
         Year
        </a>
       </td>
       <td>
        <code>
         2009
        </code>
        ;
        <code>
         09
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         M
        </code>
       </td>
       <td>
        Month in year (context sensitive)
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#month" rel="nofollow">
         Month
        </a>
       </td>
       <td>
        <code>
         July
        </code>
        ;
        <code>
         Jul
        </code>
        ;
        <code>
         07
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         L
        </code>
       </td>
       <td>
        Month in year (standalone form)
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#month" rel="nofollow">
         Month
        </a>
       </td>
       <td>
        <code>
         July
        </code>
        ;
        <code>
         Jul
        </code>
        ;
        <code>
         07
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         w
        </code>
       </td>
       <td>
        Week in year
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         27
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         W
        </code>
       </td>
       <td>
        Week in month
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         2
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         D
        </code>
       </td>
       <td>
        Day in year
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         189
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         d
        </code>
       </td>
       <td>
        Day in month
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         10
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         F
        </code>
       </td>
       <td>
        Day of week in month
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         2
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         E
        </code>
       </td>
       <td>
        Day name in week
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#text" rel="nofollow">
         Text
        </a>
       </td>
       <td>
        <code>
         Tuesday
        </code>
        ;
        <code>
         Tue
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         u
        </code>
       </td>
       <td>
        Day number of week (1 = Monday, ..., 7 = Sunday)
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         1
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         a
        </code>
       </td>
       <td>
        Am/pm marker
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#text" rel="nofollow">
         Text
        </a>
       </td>
       <td>
        <code>
         PM
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         H
        </code>
       </td>
       <td>
        Hour in day (0-23)
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         0
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         k
        </code>
       </td>
       <td>
        Hour in day (1-24)
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         24
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         K
        </code>
       </td>
       <td>
        Hour in am/pm (0-11)
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         0
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         h
        </code>
       </td>
       <td>
        Hour in am/pm (1-12)
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         12
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         m
        </code>
       </td>
       <td>
        Minute in hour
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         30
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         s
        </code>
       </td>
       <td>
        Second in minute
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         55
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         S
        </code>
       </td>
       <td>
        Millisecond
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#number" rel="nofollow">
         Number
        </a>
       </td>
       <td>
        <code>
         978
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         z
        </code>
       </td>
       <td>
        Time zone
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#timezone" rel="nofollow">
         General time zone
        </a>
       </td>
       <td>
        <code>
         Pacific Standard Time
        </code>
        ;
        <code>
         PST
        </code>
        ;
        <code>
         GMT-08:00
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Z
        </code>
       </td>
       <td>
        Time zone
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#rfc822timezone" rel="nofollow">
         RFC 822 time zone
        </a>
       </td>
       <td>
        <code>
         -0800
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         X
        </code>
       </td>
       <td>
        Time zone
       </td>
       <td>
        <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html?noframes=true#iso8601timezone" rel="nofollow">
         ISO 8601 time zone
        </a>
       </td>
       <td>
        <code>
         -08
        </code>
        ;
        <code>
         -0800
        </code>
        ;
        <code>
         -08:00
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p>
     <strong>
      Java Calendar 演示代码如下：
     </strong>
    </p>
    <p>
    </p>
    <pre class="has"><code class="language-java">package demo;

import java.util.Date;
import java.text.SimpleDateFormat;
import java.text.DateFormat;
import java.text.ParseException;
import java.util.Calendar;

public class Test
{
  public Test()
  {
  }

  public static void main(String[] args)
  {
    // 字符串转换日期格式
    // DateFormat fmtDateTime = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    // 接收传入参数
    // String strDate = args[1];
    // 得到日期格式对象
    // Date date = fmtDateTime.parse(strDate);

    // 完整显示今天日期时间
    String str = (new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SSS")).format(new Date());
    System.out.println(str);

    // 创建 Calendar 对象
    Calendar calendar = Calendar.getInstance();

    try
    {
      // 对 calendar 设置时间的方法
      // 设置传入的时间格式
      SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-M-d H:m:s");
      // 指定一个日期
      Date date = dateFormat.parse("2013-6-1 13:24:16");
      // 对 calendar 设置为 date 所定的日期
      calendar.setTime(date);

      // 按特定格式显示刚设置的时间
      str = (new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SSS")).format(calendar.getTime());
      System.out.println(str);
    }
    catch (ParseException e)
    {
      e.printStackTrace();
    }

    // 或者另一種設置 calendar 方式
    // 分別爲 year, month, date, hourOfDay, minute, second
    calendar = Calendar.getInstance();
    calendar.set(2013, 1, 2, 17, 35, 44);
    str = (new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SSS")).format(calendar.getTime());
    System.out.println(str);

    // Calendar 取得当前时间的方法
    // 初始化 (重置) Calendar 对象
    calendar = Calendar.getInstance();
    // 或者用 Date 来初始化 Calendar 对象
    calendar.setTime(new Date());

    // setTime 类似上面一行
    // Date date = new Date();
    // calendar.setTime(date);

    str = (new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SSS")).format(calendar.getTime());
    System.out.println(str);

    // 显示年份
    int year = calendar.get(Calendar.YEAR);
    System.out.println("year is = " + String.valueOf(year));

    // 显示月份 (从0开始, 实际显示要加一)
    int month = calendar.get(Calendar.MONTH);
    System.out.println("nth is = " + (month + 1));

    // 本周几
    int week = calendar.get(Calendar.DAY_OF_WEEK);
    System.out.println("week is = " + week);

    // 今年的第 N 天
    int DAY_OF_YEAR = calendar.get(Calendar.DAY_OF_YEAR);
    System.out.println("DAY_OF_YEAR is = " + DAY_OF_YEAR);

    // 本月第 N 天
    int DAY_OF_MONTH = calendar.get(Calendar.DAY_OF_MONTH);
    System.out.println("DAY_OF_MONTH = " + String.valueOf(DAY_OF_MONTH));

    // 3小时以后
    calendar.add(Calendar.HOUR_OF_DAY, 3);
    int HOUR_OF_DAY = calendar.get(Calendar.HOUR_OF_DAY);
    System.out.println("HOUR_OF_DAY + 3 = " + HOUR_OF_DAY);

    // 当前分钟数
    int MINUTE = calendar.get(Calendar.MINUTE);
    System.out.println("MINUTE = " + MINUTE);

    // 15 分钟以后
    calendar.add(Calendar.MINUTE, 15);
    MINUTE = calendar.get(Calendar.MINUTE);
    System.out.println("MINUTE + 15 = " + MINUTE);

    // 30分钟前
    calendar.add(Calendar.MINUTE, -30);
    MINUTE = calendar.get(Calendar.MINUTE);
    System.out.println("MINUTE - 30 = " + MINUTE);

    // 7天前
    calendar.add(Calendar.DAY_OF_YEAR, -7);
    // 显示当月 x 号
    int day_of_month = calendar.get(Calendar.DAY_OF_MONTH);
    System.out.println("day_of_month -7 = " + day_of_month);

    // 格式化显示
    str = (new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SS")).format(calendar.getTime());
    System.out.println(str);

    // 重置 Calendar 显示当前时间
    calendar.setTime(new Date());
    str = (new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SS")).format(calendar.getTime());
    System.out.println(str);

    // 创建一个 Calendar 用于比较时间
    Calendar calendarNew = Calendar.getInstance();

    // 设定为 5 小时以前，后者大，显示 -1
    calendarNew.add(Calendar.HOUR, -5);
    System.out.println("时间比较：" + calendarNew.compareTo(calendar));

    // 设定7小时以后，前者大，显示 1
    calendarNew.add(Calendar.HOUR, +7);
    System.out.println("时间比较：" + calendarNew.compareTo(calendar));

    // 退回 2 小时，时间相同，显示 0
    calendarNew.add(Calendar.HOUR, -2);
    System.out.println("时间比较：" + calendarNew.compareTo(calendar));
  }
}</code></pre>
    <p>
     运行结果
    </p>
    <pre class="has"><code class="language-plain">2013-06-07 23:27:34:195
2013-06-01 13:24:16:000
2013-02-02 17:35:44:197
2013-06-07 23:27:34:197
year is = 2013
nth is = 6
week is = 6
DAY_OF_YEAR is = 158
DAY_OF_MONTH = 7
HOUR_OF_DAY + 3 = 2
MINUTE = 27
MINUTE + 15 = 42
MINUTE - 30 = 12
2013-06-08 02:12:34:197
2013-06-07 23:27:34:199
时间比较：-1
时间比较：1
时间比较：0</code></pre>
    <p>
     要计算时间差，可用 Calendar.getTimeInMillis() 取得两个时间的毫秒级的时间差，再加以换算即可，比如获得相差天数，代码如下：
    </p>
    <pre class="has"><code class="language-java">    // 得微秒级时间差
    long val = calendarEnd.getTimeInMillis() - calendarBegin.getTimeInMillis();
    // 换算后得到天数
    long day = val / (1000 * 60 * 60 * 24);
</code></pre>
    <p>
     其他与 date 相关的类型转换代码如下。
    </p>
    <p>
     Timestamp 类型转换为 Date 类型：
    </p>
    <pre class="has"><code class="language-java">Timestamp stamp = new Timestamp(System.currentTimeMillis());
Date date = new Date(stamp.getTime());
System.out.println(date);</code></pre>
    <p>
     Timestamp 类型转换为 Calendar 类型：
    </p>
    <pre class="has"><code class="language-java">// 获取 Timestamp 类型时间
Timestamp timestamp = new Timestamp(System.currentTimeMillis());

// 转换为 Calendar 类型，SUN 也推荐用 Calendar 处理时间信息
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(timestamp.getTime());</code></pre>
    <p>
     Date 类型转换为 Calendar 类型：
    </p>
    <pre class="has"><code class="language-java">// Date 向 Calendar 赋值
calendar.setTime(date);</code></pre>
    <p>
     Calendar 类型转换为 Timestamp 类型：
    </p>
    <pre class="has"><code class="language-java">// 创建 Calendar 对象，也同时获取了当前时间
Calendar calendar = Calendar.getInstance();

// 转换为 Timestamp 类型对象
Timestamp timestamp = new Timestamp(calendar.getTimeInMillis());
System.out.println(timestamp);</code></pre>
    <p>
     Calendar 类型转换为 Date 类型：
    </p>
    <pre class="has"><code class="language-java">// Calendar 对象类型转换为 Date 对象类型
Calendar calendar = Calendar.getInstance();
java.util.Date date = calendar.getTime();
System.out.println(date);</code></pre>
    <p>
     StringDate 转换为 Date 或者 Timestamp
    </p>
    <pre class="has"><code class="language-java">/* 将字符串日期或者日期时间转换为 timestamp 格式 */
try
  {
    // 一个字符串日期
    String strDate = "2020-01-31";

    // 设置传入格式
    // yyyy-MM-dd 或者完整的 yyyy-MM-dd HH:mm:ss
    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date date = dateFormat.parse(strDate);

    // 创建 Calendar 用于处理 date 对象
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);

    // 由 calendar 对象生成 timestamp
    Timestamp timestamp = new Timestamp(calendar.getTimeInMillis());
    System.out.printf(timestamp);
  }
  catch (Exception e)
  {
    e.printStackTrace();
  }</code></pre>
    <p>
     原文地址：blog.csdn.net/joyous/article/details/9630893
    </p>
    <p>
     <a href="https://blog.inull.net/" rel="nofollow">
      https://blog.inull.net
     </a>
     <br/>
     Q群讨论 236201801
    </p>
   </div>
  </div>
 </article>
 <p alt="6874:7470733a2f2f626c6f672e6373646e2e6e65742f6a6f796f75:732f61727469636c652f64657461696c732f39363330383933" class_="artid" style="display:none">
 </p>
</div>


