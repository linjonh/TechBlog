---
layout: post
title: "移植Python到arm-linux系统"
date: 2024-04-27 05:34:22 +0800
description: "本文详细介绍了在Ubuntu 12.0.4环境下，使用GCC arm-arago-linux-gnu"
keywords: ".arm-linux-gnueabihf交叉编译python源码 移植python解释器到arm"
categories: ['Python']
tags: ['移植', 'Python', 'Arm']
artid: "78047552"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=78047552
    alt: "移植Python到arm-linux系统"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     移植Python到arm linux系统
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p align="left">
     <strong>
      <span style="color:#333333">
       编译环境：
      </span>
      <span style="color:#333333">
       ubuntu-12.0.4
      </span>
     </strong>
    </p>
    <p align="left">
     <span style="color:rgb(51,51,51)">
      <strong>
       编译器：gcc
      </strong>
     </span>
     <span style="color:rgb(51,51,51)">
      <strong>
       arm-arago-linux-gnueabi
      </strong>
     </span>
    </p>
    <p align="left">
     <strong>
      <span style="color:#333333">
       Python
      </span>
      <span style="color:#333333">
       版本：
      </span>
      <span style="color:#333333">
       3.6.2
      </span>
     </strong>
    </p>
    <p align="left">
     <span style="color:#333333">
      <strong>
       Python
      </strong>
     </span>
     <strong>
      <span style="color:#333333">
       安装包文件名：
      </span>
      <span style="color:#333333">
       Python-3.6.2.tgz
      </span>
     </strong>
    </p>
    <p align="left">
     <span style="color:#333333">
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      整个过程分为三大步骤：
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      1.
     </span>
     <span style="color:#333333">
      直接编译
     </span>
     <span style="color:#333333">
      python
     </span>
     <span style="color:#333333">
      ，
     </span>
     生成Python解释器
    </p>
    <p align="left">
     <span style="color:#333333">
      2.
     </span>
     <span style="color:#333333">
      交叉编译
     </span>
     <span style="color:#333333">
      python
     </span>
    </p>
    <p>
     3. 复制可移植文件到arm文件系统
    </p>
    <p>
     <br/>
    </p>
    <p>
     具体步骤：
    </p>
    <p>
     1.将安装包复制到新建的文件目录下并解压
    </p>
    <p>
     解压命令: tar –zxvf Python-3.6.2.tgz
    </p>
    <p>
    </p>
    <p>
     2. 进入Python-3.6.2文件夹，执行：
    </p>
    <p>
     ./configure
    </p>
    <p>
     3．编译python Pareser/pgen ，生成Python解释器：
    </p>
    <p>
     make
    </p>
    <p>
     4.在Python-3.6.2目录下新建mylib文件夹，用于存放生成的可移植文件：
    </p>
    <p>
     命令：mkdir mylib
    </p>
    <p>
     5．配置交叉编译：
    </p>
    <p align="left">
     <span style="color:#333333">
      ·
     </span>
     <span style="color:#333333">
      CC
     </span>
     <span style="color:#333333">
      为指定
     </span>
     <span style="color:#333333">
      C
     </span>
     <span style="color:#333333">
      交叉编译器，我的是
     </span>
     <span style="color:#333333">
      arm-arago-linux-gnueabi-gcc
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      ·
     </span>
     <span style="color:#333333">
      CXX
     </span>
     <span style="color:#333333">
      为指定
     </span>
     <span style="color:#333333">
      C++
     </span>
     <span style="color:#333333">
      交叉编译器，我的是
     </span>
     <span style="color:#333333">
      arm-arago-linux-gnueabi-g++
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      ·
     </span>
     <span style="color:#333333">
      AR
     </span>
     <span style="color:#333333">
      为
     </span>
     <span style="color:#333333">
      ar
     </span>
     <span style="color:#333333">
      工具，我的是
     </span>
     <span style="color:#333333">
      arm-arago-linux-gnueabi-ar
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      ·
     </span>
     <span style="color:#333333">
      RANLIB
     </span>
     <span style="color:#333333">
      为
     </span>
     <span style="color:#333333">
      ranlib
     </span>
     <span style="color:#333333">
      工具，我的是
     </span>
     <span style="color:#333333">
      arm-arago-linux-gnueabi-ranlib
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      ·
     </span>
     <span style="color:#333333">
      Host
     </span>
     <span style="color:#333333">
      为目标主机，我这里设置的是
     </span>
     <span style="color:#333333">
      arm-arago-linux-gnueabi
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      ·
     </span>
     <span style="color:#333333">
      Build
     </span>
     <span style="color:#333333">
      为编译环境主机，我的是i386
     </span>
    </p>
    <p align="left">
     <span style="color:#333333">
      ·
     </span>
     <span style="color:#333333">
      Prefix
     </span>
     <span style="color:#333333">
      为安装位置
     </span>
    </p>
    <p>
     配置命令：
    </p>
    <p>
     CC=arm-arago-linux-gnueabi-gccCXX=arm-arago-linux-gnueabi-g++ AR=arm-arago-linux-gnueabi-arRANLIB=arm-arago-linux-gnueabi-ranlib ./configure--host=arm-arago-linux-gnueabi --build=i386 --disable-ipv6ac_cv_file__dev_ptmx=no ac_cv_file__dev_ptc=no --prefix=/home/forlinx/work/python/Python-3.6.2/mylib
    </p>
    <p>
     6．编译
    </p>
    <p>
     l HOSTPYTHON指定我们之前编译的X86版本的python文件
    </p>
    <p>
     l HOSTPGEN指定我们之前编译的X86版本的pgen文件
    </p>
    <p>
     编译命令：
    </p>
    <p>
     make HOSTPYTHON=./python HOSTPGEN=./Parser/pgenBLDSHARED="arm-arago-linux-gnueabi-gcc -shared"CROSS_COMPILE=arm-arago-linux-gnueabi- CROSS_COMPILE_TARGET=yesHOSTARCH=arm-arago-linux-gnueabi BUILDARCH=i386
    </p>
    <p>
     7．安装
    </p>
    <p>
     安装命令：
    </p>
    <p>
     make install HOSTPYTHON=./pythonBLDSHARED="arm-arago-linux-gnueabi-gcc -shared"CROSS_COMPILE=arm-arago-linux-gnueabi- CROSS_COMPILE_TARGET=yesprefix=/home/forlinx/work/python/Python-3.6.2/mylib
    </p>
    <p>
     8．复制mylib目录下文件到arm文件系统
    </p>
    <p>
     最后会在prefix指定的目录下有新生成的文件和文件夹，主要文件夹是/bin,/include,/lib,/share。把他们都复制到目标机器的/usr目录下。最后在目标机上执行一下命令可以检查python环境是否完整。
    </p>
    <p>
     9．重新编译arm文件系统，并烧录到开发板验证。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f73636f66696c65645f7175616e:2f61727469636c652f64657461696c732f3738303437353532" class_="artid" style="display:none">
 </p>
</div>


