---
layout: post
title: "Python之unittest框架的使用包含测试套件,第三方测试报告"
date: 2023-03-31 17:30:24 +0800
description: "本文详细介绍了unittest框架的使用方法，包括如何创建测试类和测试用例，使用断言进行结果验证，以"
keywords: "unittest教程"
categories: ['Python']
tags: ['机器学习', 'Python', 'Pandas']
artid: "129797664"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=129797664
    alt: "Python之unittest框架的使用包含测试套件,第三方测试报告"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Python之unittest框架的使用（包含：测试套件，第三方测试报告）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     <a id="_0">
     </a>
    </h2>
    <div>
     <h4>
      <span style="color:#ad720d;">
       <strong>
        文章目录
       </strong>
      </span>
     </h4>
     <ul>
      <li>
       <strong>
        <a href="#_12" rel="nofollow">
         <span style="color:#ad720d;">
          前言
         </span>
        </a>
       </strong>
      </li>
      <li>
       <strong>
        <a href="#pandas_22" rel="nofollow">
         <span style="color:#ad720d;">
          一、u
         </span>
        </a>
        <span style="color:#ad720d;">
         nittest框架
        </span>
       </strong>
      </li>
      <li>
       <strong>
        <a href="#_26" rel="nofollow">
         <span style="color:#ad720d;">
          二、
         </span>
        </a>
        <span style="color:#ad720d;">
         测试套件
        </span>
       </strong>
      </li>
      <li>
       <span style="color:#ad720d;">
        <strong>
         三、补充知识点（了解）
        </strong>
       </span>
      </li>
      <li>
       <span style="color:#ad720d;">
        <strong>
         四、在测试用例里添加用例描述（在报告里面展示）
        </strong>
       </span>
      </li>
      <li>
       <strong>
        <a href="#_55" rel="nofollow">
         <span style="color:#ad720d;">
          总结
         </span>
        </a>
       </strong>
      </li>
     </ul>
    </div>
    <hr/>
    <h2>
     <a id="_12">
     </a>
     前言
    </h2>
    <p>
     分步骤记录unittest框架的基本用法，测试套件的用法。
    </p>
    <hr/>
    <p>
    </p>
    <h2>
     <a id="pandas_22">
     </a>
     一、unittest框架
    </h2>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       1、使用unittest框架，首先要建立一个测试类，然后这个类要继承unittest模块中的TestCase
      </strong>
     </span>
     <br/>
    </h4>
    <p>
     <img alt="" height="400" src="https://i-blog.csdnimg.cn/blog_migrate/647db4ec6f5159bd1627f02a08d64452.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       2、在这个TestLogin类中，需要写用例，也就是写函数，一个函数代表一条用例。（注意：测试用例，用test开头）
      </strong>
     </span>
    </h4>
    <p>
     （1）以一个函数举例
    </p>
    <p>
     <img alt="" height="612" src="https://i-blog.csdnimg.cn/blog_migrate/02f691e53a2439652b1a0f378fbb6a90.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="576" src="https://i-blog.csdnimg.cn/blog_migrate/8f276242d6f5b099384d6156194c7305.png" width="1200"/>
    </p>
    <p>
    </p>
    <h4>
     <strong>
      <span style="color:#ad720d;">
       3、在以test开头的测试用例（函数）里面，主要写逻辑，以及断言
      </span>
     </strong>
    </h4>
    <p>
     <strong>
      （1）在这里面。会有断言前的结果和断言后的结果。
     </strong>
    </p>
    <p>
     断言前的结果，我们必须想办法的去获取。断言后的结果一般我们自己写的。那么断言前的结果，在以后的实际测试中，会遇到后端返回很多数据，我们最需要做的就是在这么多的结果中，怎么去拿到我们想要的数据（结果）。
    </p>
    <p>
     <img alt="" height="761" src="https://i-blog.csdnimg.cn/blog_migrate/91a003a6e4c1db9d78016b66ed5cd449.png" width="1200"/>
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       4、一般写好了测试用例，接着会运行一下有没有问题
      </strong>
     </span>
    </h4>
    <p>
     <strong>
      （1）直接点击函数左侧的运行符号进行运行
     </strong>
    </p>
    <p>
     <img alt="" height="826" src="https://i-blog.csdnimg.cn/blog_migrate/b37426234a9da35429caac6c9ed09b64.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      （2） 入口函数进行运行
     </strong>
    </p>
    <p>
     <img alt="" height="566" src="https://i-blog.csdnimg.cn/blog_migrate/ae4c8a7a2f0c41f1938ae8cd2800dbea.png" width="1200"/>
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       5、断言（对实际的结果和预期的结果进行断言）
      </strong>
     </span>
    </h4>
    <p>
     <strong>
      在这里断言一般有两种方式：
     </strong>
     <br/>
     <strong>
      第一种使用Python自己的断言方式（基本是不用）
     </strong>
    </p>
    <p>
     # 1、使用python中的关键字assert来断言(不推荐)
    </p>
    <p>
     # assert excepted == result # 如果条件不相等：抛出断言异常
    </p>
    <p>
     <br/>
     <strong>
      第二种使用unittest里面的断言方式（常用）
     </strong>
    </p>
    <hr/>
    <p>
    </p>
    <h2>
     <a id="_26">
     </a>
     二、测试套件
    </h2>
    <h4>
     <a id="1_27">
     </a>
     <span style="color:#ad720d;">
      <strong>
       步骤1：创建一个测试套件
      </strong>
     </span>
    </h4>
    <p>
     <strong>
      suite = unittest.TestSuite()
     </strong>
    </p>
    <p>
     解释：在这里TestSuite(）就是一个测试套件，通俗一点就是来装用例的一个容器
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       步骤2：加载测试用例
      </strong>
     </span>
    </h4>
    <p>
     解释：这个步骤相当于，我先要找到测试用例，再装到容器里面去（注意：这里是有两个步骤，先发现用例，再收集（也就是加载））
    </p>
    <p>
     # 通过路径进行加载(加载器，unittest.TestLoader)
    </p>
    <p>
    </p>
    <p>
     <span style="color:#b95514;">
      <strong>
       （1）先创建一个测试加载器
      </strong>
     </span>
    </p>
    <p>
     <strong>
      load = unittest.TestLoader()
     </strong>
    </p>
    <p>
     解释：load是TestLoader这个类的实例化对象，使用这个加载器里面的函数，这个函数是专门用来发现测试用例的
    </p>
    <p>
    </p>
    <p>
     <span style="color:#b95514;">
      <strong>
       （2）发现（找到）测试用例
      </strong>
     </span>
    </p>
    <p>
     <strong>
      load.discover(测试用例所在的路径)
     </strong>
    </p>
    <p>
     例如：# load.discover(r'C:\project\py47\code_demo\testcases')
    </p>
    <p>
     <strong>
      <span style="color:#fe2c24;">
       注意：这个路径的尾部截止是一个py文件夹，而不是py文件。也就是我们要拿到py文件的上一级，如果拿到了py文件，那么系统就会报一些错误。
      </span>
     </strong>
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       步骤3：把测试用例装到测试套件里面
      </strong>
     </span>
    </h4>
    <p>
     注意：在这里要使用步骤1里面的创建好的测试套件，以及步骤2中的发现用例
    </p>
    <p>
     <strong>
      suite.addTest(load.discover(r'C:\project\py47\code_demo\testcases'))
     </strong>
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       步骤4：创建一个测试执行器
      </strong>
     </span>
    </h4>
    <p>
     <strong>
      runner = unittest.TextTestRunner()
     </strong>
    </p>
    <p>
     解释：TextTestRunner是一个类，runner是这个类的对象
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       步骤5：执行测试用例
      </strong>
     </span>
    </h4>
    <p>
     注意：这里执行用例是这个套件里面所有的测试用例
    </p>
    <p>
     <strong>
      runner.run(suite)  #对象调用了TextTestRunner类中的函数
     </strong>
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#ad720d;">
      <strong>
       步骤6：加入测试报告
      </strong>
     </span>
    </h4>
    <p>
     注意：这里需要导入关于测试报告的模块（一般使用第三方写的）
    </p>
    <p>
     例如：
     <br/>
     使用第三方包BeautifulReport
     <br/>
     需要先安装：pip install BeautifulReport
    </p>
    <p>
     <strong>
      from BeautifulReport import BeautifulReport
      <br/>
      runner=BeautifulReport(suite)
      <br/>
      runner.report(description='测试报告')
     </strong>
     <br/>
     解释：BeautifulReport 是一个类，runner是这个类的实例化对象。report()是这个类里面的函数
    </p>
    <p>
    </p>
    <p>
     <span style="color:#be191c;">
      <strong>
       总结：步骤1到步骤6的关系：
      </strong>
     </span>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/3d5679153f6a5fcdc4ba26b3520c0934.jpeg"/>
    </p>
    <hr/>
    <h2>
    </h2>
    <h2>
     <span style="color:#ad720d;">
      <strong>
       三、补充知识点（了解）：
      </strong>
     </span>
    </h2>
    <h4>
     <strong>
      1、关于测试报告的生成
     </strong>
    </h4>
    <p>
     使用unittest框架里面自带的报告unitetstreport
    </p>
    <p>
     # 从unittestreport模块导入TestRunner这个类
     <br/>
     from unittestreport import TestRunner
    </p>
    <p>
     <br/>
     # 1、创建一个测试执行器
     <br/>
     runner = TestRunner(suite, templates=2)
    </p>
    <p>
     <br/>
     # 2、执行测试套件中的所有用例
     <br/>
     runner.run()
     <br/>
     解释：templates是选择这个函数中模板的参数，不同的数值，所选择的模板不一样。
     <br/>
    </p>
    <h4>
     <strong>
      2、另外两种加载测试用例的方法
     </strong>
    </h4>
    <p>
     <span style="color:#ad720d;">
      <strong>
       1）通过用例模块进行加载(不常用)
      </strong>
     </span>
    </p>
    <p>
     suite = unittest.defaultTestLoader.loadTestsFromModule(模块)
    </p>
    <p>
     举例：
     <br/>
     #导入模块
     <br/>
     # from code_demo.testcases import test_login
     <br/>
     # suite = unittest.defaultTestLoader.loadTestsFromModule(test_login)
    </p>
    <p>
     <span style="color:#fe2c24;">
      <strong>
       注意1：
      </strong>
     </span>
     defaultTestLoader是TestLoader这个类的对象。  源码里面defaultTestLoader = TestLoader()；loadTestsFromModule()这是个函数。这里是：对象调用函数。
    </p>
    <p>
     <br/>
     <span style="color:#fe2c24;">
      <strong>
       注意2：
      </strong>
     </span>
     这里对用例模块的加载，模块是指：例如：登录成功，登录失败。这种py文件（也可以这么说：是py文件夹里面的py文件）
    </p>
    <p>
    </p>
    <p>
     <span style="color:#ad720d;">
      <strong>
       2）通过测试类收集（不常用）
      </strong>
     </span>
    </p>
    <p>
     unittest.defaultTestLoader.loadTestsFromTestCase(测试类)
    </p>
    <p>
     举例：
     <br/>
     # 导入测试类
     <br/>
     from code_demo.testcases.test_demo import TestDemo
     <br/>
     suite = unittest.defaultTestLoader.loadTestsFromTestCase(TestDemo)
     <br/>
     注意：这个就相当于py文件里面的某个类名
    </p>
    <p>
    </p>
    <h3>
     <span style="color:#1c7331;">
      <strong>
       一个完整版的演示：
      </strong>
     </span>
    </h3>
    <p>
     <span style="color:#be191c;">
      <strong>
       （1） fun1文件定义了2个函数（用于进行测试）
      </strong>
     </span>
    </p>
    <p>
     <img alt="" height="750" src="https://i-blog.csdnimg.cn/blog_migrate/ee3e363921322a6693bbfa15de6d5f9d.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <span style="color:#be191c;">
      <strong>
       （2）testcase文件夹里面放入测试用例文件（文件当中定义一个类，类里面有2条用例（也就是以test开头了2个函数））
      </strong>
     </span>
    </p>
    <p>
     <img alt="" height="904" src="https://i-blog.csdnimg.cn/blog_migrate/f52f3ab0fcfbf8fb2a47d345f81cedda.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
     <span style="color:#be191c;">
      <strong>
       （3）main文件里面主要是用来加载测试用例，以及执行测试用例的入口
      </strong>
     </span>
    </p>
    <p>
     <img alt="" height="862" src="https://i-blog.csdnimg.cn/blog_migrate/ac23002623b39ac319e97ce49857cec4.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
     <span style="color:#be191c;">
      <strong>
       （4）report测试报告
      </strong>
     </span>
    </p>
    <p>
     <img alt="" height="943" src="https://i-blog.csdnimg.cn/blog_migrate/13e6d54f77cdd1ddfbdf422f5061ddb1.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
     如果用例失败，这个会有失败的明显
    </p>
    <p>
     <img alt="" height="1200" src="https://i-blog.csdnimg.cn/blog_migrate/9a123c8f89ec2ad632f4160064af81e2.png" width="1200"/>
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     <strong>
      四、在测试用例里添加用例描述（在报告里面展示）
     </strong>
    </h2>
    <p>
     举例：
    </p>
    <p>
     <img alt="" height="996" src="https://i-blog.csdnimg.cn/blog_migrate/ccbf868c911b2ce6a16ff191c8a1888a.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="916" src="https://i-blog.csdnimg.cn/blog_migrate/df0784c9198077f7905b128598d46dc3.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
     <img alt="" height="717" src="https://i-blog.csdnimg.cn/blog_migrate/9f29edf551c1af6567a9ff567ee74423.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="892" src="https://i-blog.csdnimg.cn/blog_migrate/fa84e019d12471986caa6c495401aa0a.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_55">
     </a>
     总结
    </h2>
    <p>
     平时用测试套件很容易忘记，在这里详细的分步骤解析一下具体的用法。以及第三方测试报告的用法。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353237323337312f:61727469636c652f64657461696c732f313239373937363634" class_="artid" style="display:none">
 </p>
</div>


