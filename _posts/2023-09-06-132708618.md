---
layout: post
title: "远程访问服务器JupyterLab的配置方法"
date: 2023-09-06 09:56:05 +0800
description: "这里注意，连不上的话可能是默认端口22不对，需要在后面加上-p 端口号（很关键，之前没加一直连不上去"
keywords: "jupyter lab 远程访问"
categories: ["未分类"]
tags: ["服务器"]
artid: "132708618"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=132708618
  alt: "远程访问服务器JupyterLab的配置方法"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     远程访问服务器JupyterLab的配置方法
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      远程访问服务器JupyterLab的配置方法
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#_6" rel="nofollow">
          环境及工具
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_11" rel="nofollow">
            注意
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_20" rel="nofollow">
          基本步骤
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_29" rel="nofollow">
            生成密码
           </a>
          </li>
          <li>
           <a href="#_45" rel="nofollow">
            生成并修改配置文件
           </a>
          </li>
          <li>
           <a href="#jupyter_localhost__84" rel="nofollow">
            *错误：jupyter localhost 已拒绝连接*
           </a>
          </li>
          <li>
           <a href="#jupyter_104" rel="nofollow">
            后台运行jupyter
           </a>
          </li>
          <li>
           <a href="#_109" rel="nofollow">
            后台关闭
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <hr/>
    <p>
     其实就是在服务器运行JupyterLab，然后在本地浏览器访问
    </p>
    <h3>
     <a id="_6">
     </a>
     环境及工具
    </h3>
    <p>
     服务器：Ubuntu 16.04
     <br/>
     本机： windows 11
     <br/>
     个人使用终端神器MobaXterm，创建SSH session后就可以远程登录服务器，有很多功能，在这里，windows下载的文件可直接拖拽至服务器上。
    </p>
    <h4>
     <a id="_11">
     </a>
     注意
    </h4>
    <p>
     安装好后，主机名称前多了(base)，如果想取消，有以下两种方法：
    </p>
    <ul>
     <li>
      一次性取消
      <br/>
      进入终端后输入conda deactivate 退出虚拟环境
     </li>
     <li>
      永久取消
      <br/>
      ① 输入vim ~/.bashrc
      <br/>
      ② 然后将下图中，除export PATH="/root/anaconda3/bin:$PATH"一行外的其他行都加#注释掉，按Esc，输入:wq回车保存退出，再次进入终端后就不会有(base)
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/cbcc57da9239f20b465fbc06f05702db.png"/>
     </li>
    </ul>
    <h3>
     <a id="_20">
     </a>
     基本步骤
    </h3>
    <p>
     服务器安装JupyterLab
     <br/>
     这里推荐直接安装Anaconda，安装好后可以通过命令jupyter lab打开测试一下。
    </p>
    <pre><code class="prism language-bash">conda <span class="token function">install</span> <span class="token parameter variable">-c</span> conda-forge jupyterlab <span class="token parameter variable">-y</span>
</code></pre>
    <h4>
     <a id="_29">
     </a>
     生成密码
    </h4>
    <p>
     $ python
     <br/>
     Python 3.7.3 (default, Mar 27 2019, 22:11:17)
     <br/>
     [GCC 7.3.0] :: Anaconda, Inc. on linux
     <br/>
     Type “help”, “copyright”, “credits” or “license” for more information.
    </p>
    <pre><code class="prism language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> from notebook.auth <span class="token function">import</span> <span class="token function">passwd</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> passwd<span class="token punctuation">(</span><span class="token punctuation">)</span>
Enter password:
Verify password:
<span class="token string">'sha1:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>
</code></pre>
    <p>
     此处的密码可由自己随意设定
    </p>
    <h4>
     <a id="_45">
     </a>
     生成并修改配置文件
    </h4>
    <p>
     3.1 生成配置文件
    </p>
    <pre><code class="prism language-bash">jupyter notebook --generate-config
</code></pre>
    <p>
     3.2 修改配置文件
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">vim</span> ~/.jupyter/jupyter_notebook_config.py  <span class="token comment"># ～为自己的路径</span>
Writing default config to: /YourHomePath/.jupyter/jupyter_notebook_config.
</code></pre>
    <p>
     做修改如下：
    </p>
    <p>
     允许远程访问
     <br/>
     不使用本地浏览器打开
     <br/>
     允许所有IP访问
     <br/>
     配置密码（这个非必要，之后会解释）
    </p>
    <pre><code class="prism language-bash">c.NotebookApp.allow_remote_access <span class="token operator">=</span> True
c.NotebookApp.open_browser <span class="token operator">=</span> False
<span class="token assign-left variable">c.NotebookApp.ip</span><span class="token operator">=</span><span class="token string">'*'</span>
c.NotebookApp.password <span class="token operator">=</span> <span class="token string">'sha1:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>

c.NotebookApp.allow_root <span class="token operator">=</span> True
c.NotebookApp.port <span class="token operator">=</span> <span class="token number">8989</span>
</code></pre>
<p>
保存并退出后，通过命令 jupyter lab 打开，此时系统会提示如下（此时配置了上文提到的密码 c.NotebookApp.password）：
</p>
<p>
在浏览器输入 ip：8989，按要求输入密码即可。
</p>
<p>
如果之前没有配置 c.NotebookApp.password，打开 jupyterlab 后会提示如下：
</p>
<p>
在浏览器输入 ip：8989，会提示如下界面，需要输入给出的 token 值。
</p>
<h4>
<a id="jupyter_localhost__84">
</a>
<em>
错误：jupyter localhost 已拒绝连接
</em>
</h4>
<p>
或者
</p>
<pre><code class="prism language-bash">OSError: <span class="token punctuation">[</span>Errno <span class="token number">99</span><span class="token punctuation">]</span> Cannot assign requested address
</code></pre>
<p>
采用自定义端口和转发，解决此问题
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4d54fe343fc013d5394c728082cb6aa7.png">
<br/>
比如我用的本地端口是 8181，服务器设置的端口为 8989
<br/>
那么在 cmd 中输入
</img>
</p>
<pre><code class="prism language-bash"><span class="token function">ssh</span> <span class="token parameter variable">-N</span> <span class="token parameter variable">-f</span> <span class="token parameter variable">-L</span> localhost:8181:localhost:8989 root@10.2.151.232
</code></pre>
<p>
之后再浏览器输入 localhost:8181，输入自己设定的密码就可以打开了
</p>
<p>
这里注意，连不上的话可能是默认端口 22 不对，需要在后面加上-p 端口号（很关键，之前没加一直连不上去，查了很多 host 啥的但最关键的加个-p xxxx 就好了）
</p>
<p>
其实就是建立一个本地和远程服务器端口的连接，之后本地的 cmd 窗口就可以关掉了
</p>
<p>
就这么一行指令，完事，虽然短，但治根治本，希望下次不要再遇到类似的问题了，就算有也希望自己知道该怎么分析问题，改从什么地方入手去解决。
</p>
<h4>
<a id="jupyter_104">
</a>
后台运行 jupyter
</h4>
<pre><code class="prism language-bash"><span class="token function">nohup</span> jupyter lab <span class="token operator">&gt;</span> jupyter.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre>
<h4>
<a id="_109">
</a>
后台关闭
</h4>
<pre><code class="prism language-bash"><span class="token function">ps</span> <span class="token parameter variable">-a</span>
<span class="token function">kill</span> <span class="token parameter variable">-9</span> PID
</code></pre>
<p>
————————————————
<br/>
版权声明：本文为 CSDN 博主「啊啊啊狗哥」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
<br/>
原文链接：https://blog.csdn.net/GouGe_CSDN/article/details/104567559
</p>

   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323738353533372f:61727469636c652f64657461696c732f313332373038363138" class_="artid" style="display:none">
 </p>
</div>
