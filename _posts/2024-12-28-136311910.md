---
layout: post
title: "Rust简介安装和编译"
date: 2024-12-28 18:19:16 +0800
description: "本文介绍了Rust编程语言，包括其安全、并发和性能特性，详细讲解了Rust的安装过程，以及项目结构、"
keywords: "rust安装"
categories: ['随笔']
tags: ['开发语言', 'Rust']
artid: "136311910"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=136311910
    alt: "Rust简介安装和编译"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Rust】简介、安装和编译
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#Rust_4" rel="nofollow">
        一、Rust简介
       </a>
      </li>
      <li>
       <a href="#Rust__34" rel="nofollow">
        二、Rust 安装
       </a>
      </li>
      <li>
       <a href="#Rust__68" rel="nofollow">
        三、Rust 程序结构
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#31_Modules_88" rel="nofollow">
          3.1 模块（Modules）：
         </a>
        </li>
        <li>
         <a href="#32_Functions_111" rel="nofollow">
          3.2 函数（Functions）：
         </a>
        </li>
        <li>
         <a href="#33_Variables_130" rel="nofollow">
          3.3 变量（Variables）：
         </a>
        </li>
        <li>
         <a href="#34_Control_Flow_178" rel="nofollow">
          3.4 控制流（Control Flow）：
         </a>
        </li>
        <li>
         <a href="#35_Macros_226" rel="nofollow">
          3.5 宏（Macros）：
         </a>
        </li>
        <li>
         <a href="#36__246" rel="nofollow">
          3.6 完整示例：
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_308" rel="nofollow">
        四、编译
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <p>
     用了一个rust代码，记录下。
    </p>
    <h2>
     <a id="Rust_4">
     </a>
     一、Rust简介
    </h2>
    <p>
     <font color="red">
      R
     </font>
     <font color="orange">
      u
     </font>
     <font color="green">
      s
     </font>
     <font color="purple">
      t
     </font>
     是一种系统级编程语言，由 Mozilla（火狐那个） 开发，并于
     <code>
      2010
     </code>
     年首次公开发布。它的设计旨在提供高性能、并发性、安全性以及开发人员友好的语法。Rust 的特点包括但不限于以下几个方面：
    </p>
    <p>
     <font color="green">
      <strong>
       特点
      </strong>
      ：
     </font>
    </p>
    <ol>
     <li>
      <strong>
       安全性
      </strong>
      ：
      <ul>
       <li>
        Rust 最引人注目的特性之一是其强大的安全性。它使用一套称为 “borrow checker” 的系统来在编译时检查数据访问的正确性，避免了内存溢出、空指针和数据竞争等常见的安全漏洞。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       并发性
      </strong>
      ：
      <ul>
       <li>
        Rust 提供了轻量级的线程（称为 “任务”）和基于消息传递的并发模型。Rust 的所有权和借用系统使得在编写并发代码时更加安全和容易。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       性能
      </strong>
      ：
      <ul>
       <li>
        Rust 的设计目标之一是提供与 C/C++ 相当的性能。它不会引入运行时开销，
        <font color="red">
         直接编译为本地机器码，使得 Rust 适用于对性能要求较高的应用程序。
        </font>
       </li>
      </ul>
     </li>
     <li>
      <strong>
       内存管理
      </strong>
      ：
      <ul>
       <li>
        Rust 通过所有权（ownership）和借用（borrowing）的概念，实现了内存安全和高效的内存管理。所有权规则确保了在任何时刻只有一个所有者能够访问内存，借用规则则允许多个只读引用或者单个可变引用。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       功能丰富的标准库
      </strong>
      ：
      <ul>
       <li>
        Rust 的标准库提供了丰富的功能，包括支持文件操作、网络通信、多线程、数据结构、加密等方面。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       开发人员友好的工具
      </strong>
      ：
      <ul>
       <li>
        <code>
         Cargo
        </code>
        是 Rust 的包管理和构建系统，提供了项目管理、依赖管理、测试等功能，极大地简化了项目的管理和构建流程。
       </li>
       <li>
        Rust 的错误信息也是开发者称赞的地方之一，友好而详细的错误提示帮助开发者更快地定位和解决问题。
       </li>
      </ul>
     </li>
    </ol>
    <p>
     <font color="green">
      <strong>
       适用领域：
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       系统编程
      </strong>
      ：Rust 最初就是为了取代 C 和 C++ 而设计的，因此非常适合系统级编程，包括
      <strong>
       操作系统、嵌入式开发
      </strong>
      等领域。
     </li>
     <li>
      <strong>
       网络服务
      </strong>
      ：由于其安全性和性能，Rust 在构建网络服务、服务器端应用程序方面表现出色，比如 WebAssembly、后端服务等。
     </li>
     <li>
      <strong>
       游戏开发
      </strong>
      ：Rust 适合游戏开发领域，其性能和并发性使其成为实现高性能游戏引擎的良好选择。
     </li>
     <li>
      <strong>
       工具开发
      </strong>
      ：由于 Rust 的稳定性、安全性和性能，它也被广泛用于开发系统工具、编译器、分析器等。
     </li>
    </ul>
    <h2>
     <a id="Rust__34">
     </a>
     二、Rust 安装
    </h2>
    <p>
     安装 Rust 时，会安装 Rust 编程语言的工具链和相关的工具。包括 Rust 编译器（
     <code>
      rustc
     </code>
     ）、包管理器
     <code>
      Cargo
     </code>
     、Rust 标准库以及一些辅助工具。具体来说，安装 Rust 会包括以下内容：
    </p>
    <ol>
     <li>
      <strong>
       Rust 编程语言工具链
      </strong>
      ：
      <ul>
       <li>
        <code>
         rustc
        </code>
        ：Rust 的编译器，负责将 Rust 代码编译成可执行程序或者库。
       </li>
       <li>
        <code>
         cargo
        </code>
        ：Rust 的包管理器和构建工具，用于创建、构建、测试和发布 Rust 项目。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       Rust 标准库
      </strong>
      ：
      <ul>
       <li>
        Rust 标准库包含了常用的数据结构、函数等，是 Rust 开发中常用的库之一。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       Rust 文档和示例
      </strong>
      ：
      <ul>
       <li>
        安装 Rust 后，可以通过
        <code>
         rustup doc
        </code>
        命令来打开 Rust 的文档，包括标准库的文档和 Rust 编程语言的指南。
       </li>
       <li>
        Rust 还会自带一些示例程序，可以通过
        <code>
         rustup doc --book
        </code>
        命令来查看官方示例和教程。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       Rustup 工具
      </strong>
      ：
      <ul>
       <li>
        <code>
         rustup
        </code>
        是 Rust 的工具链管理器，用于安装、管理和更新 Rust 工具链和版本。它提供了便捷的方式来管理不同版本的 Rust 和工具链。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       额外的工具
      </strong>
      ：
      <ul>
       <li>
        在安装 Rust 时，可能会默认安装一些辅助工具，比如
        <code>
         rustfmt
        </code>
        （Rust 代码格式化工具）和
        <code>
         clippy
        </code>
        （Rust 代码 lint 工具）等。这些工具可以帮助你保持代码的风格统一和代码质量。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <p>
     下载安装程序：
     <a href="https://www.rust-lang.org/tools/install" rel="nofollow">
      https://www.rust-lang.org/tools/install
     </a>
    </p>
    <p>
     运行安装程序，出现：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/48505ad515f876b2e6bcc1748ea77396.png" width="500">
      <br/>
      输入1，回车即可默认安装，期间会下载资源文件。
     </img>
    </p>
    <p>
     安装完后查看版本信息：
    </p>
    <pre><code class="prism language-bash">rustc <span class="token parameter variable">--version</span>
<span class="token function">cargo</span> <span class="token parameter variable">--version</span>
</code></pre>
    <p>
     Rust没有专门的IDE，你可以使用VS code或者IDEA的插件。
    </p>
    <h2>
     <a id="Rust__68">
     </a>
     三、Rust 程序结构
    </h2>
    <p>
     项目结构：
    </p>
    <pre><code class="prism language-bash">my_project/
├── Cargo.toml        <span class="token comment"># 项目的配置文件，包含了项目的元数据和依赖信息。</span>
└── src/
    ├── main.rs       <span class="token comment"># 主入口文件</span>
    ├── lib.rs        <span class="token comment"># 库的入口文件</span>
    ├── my_module.rs  <span class="token comment"># 自定义模块文件</span>
    └── my_module_test.rs  <span class="token comment"># 测试文件</span>

</code></pre>
    <hr/>
    <p>
     Rust 程序的程序结构包括了模块（
     <code>
      Modules
     </code>
     ）、函数（
     <code>
      Functions
     </code>
     ）、变量（
     <code>
      Variables
     </code>
     ）、控制流（
     <code>
      Control Flow
     </code>
     ）等部分。下面是 Rust 程序的基本结构和各个部分的详细介绍：
    </p>
    <h3>
     <a id="31_Modules_88">
     </a>
     3.1 模块（Modules）：
    </h3>
    <ul>
     <li>
      <p>
       Rust 中的模块用于组织代码，将相关的功能组织在一起。一个 Rust 程序通常由一个主模块（
       <code>
        main.rs
       </code>
       ）和多个子模块组成。
      </p>
     </li>
     <li>
      <p>
       使用
       <code>
        mod
       </code>
       关键字定义模块，模块可以嵌套。
      </p>
     </li>
     <li>
      <p>
       示例：
      </p>
      <pre><code class="prism language-rust"><span class="token comment">// 定义一个模块</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">my_module</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在模块中定义函数</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello from my_module!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在主函数中使用模块中的函数</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">my_module<span class="token punctuation">::</span></span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="32_Functions_111">
     </a>
     3.2 函数（Functions）：
    </h3>
    <ul>
     <li>
      <p>
       Rust 中的函数使用
       <code>
        fn
       </code>
       关键字定义，函数可以有参数和返回值。
      </p>
     </li>
     <li>
      <p>
       函数的参数和返回值必须指定类型。
      </p>
     </li>
     <li>
      <p>
       示例：
      </p>
      <pre><code class="prism language-rust"><span class="token comment">// 定义一个函数</span>
<span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">i32</span> <span class="token punctuation">{<!-- --></span>
    a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// 调用函数</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Result: {}"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Result: 15</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="33_Variables_130">
     </a>
     3.3 变量（Variables）：
    </h3>
    <ul>
     <li>
      <p>
       Rust 中的变量使用
       <code>
        let
       </code>
       关键字声明，变量默认是不可变的（immutable）。
      </p>
     </li>
     <li>
      <p>
       使用
       <code>
        mut
       </code>
       关键字可以声明可变变量。
      </p>
     </li>
     <li>
      <p>
       示例：
      </p>
      <pre><code class="prism language-rust"><span class="token comment">// 声明不可变变量</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment">// x = 10; // 错误！不可变变量不能修改</span>

<span class="token comment">// 声明可变变量</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span> <span class="token comment">// 可变变量可以修改</span>
</code></pre>
     </li>
    </ul>
    <p>
     Rust 中常见的变量类型：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        类型
       </th>
       <th>
        描述
       </th>
       <th>
        大小
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         i8
        </code>
       </td>
       <td>
        有符号 8 位整数
       </td>
       <td>
        1 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         i16
        </code>
       </td>
       <td>
        有符号 16 位整数
       </td>
       <td>
        2 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         i32
        </code>
       </td>
       <td>
        有符号 32 位整数（默认类型）
       </td>
       <td>
        4 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         i64
        </code>
       </td>
       <td>
        有符号 64 位整数
       </td>
       <td>
        8 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         u8
        </code>
       </td>
       <td>
        无符号 8 位整数
       </td>
       <td>
        1 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         u16
        </code>
       </td>
       <td>
        无符号 16 位整数
       </td>
       <td>
        2 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         u32
        </code>
       </td>
       <td>
        无符号 32 位整数
       </td>
       <td>
        4 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         u64
        </code>
       </td>
       <td>
        无符号 64 位整数
       </td>
       <td>
        8 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         isize
        </code>
       </td>
       <td>
        有符号整数，与指针大小相同
       </td>
       <td>
        平台相关
       </td>
      </tr>
      <tr>
       <td>
        <code>
         usize
        </code>
       </td>
       <td>
        无符号整数，与指针大小相同
       </td>
       <td>
        平台相关
       </td>
      </tr>
      <tr>
       <td>
        <code>
         f32
        </code>
       </td>
       <td>
        单精度浮点数
       </td>
       <td>
        4 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         f64
        </code>
       </td>
       <td>
        双精度浮点数（默认类型）
       </td>
       <td>
        8 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         bool
        </code>
       </td>
       <td>
        布尔类型，true 或 false
       </td>
       <td>
        1 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         char
        </code>
       </td>
       <td>
        字符类型
       </td>
       <td>
        4 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         ()
        </code>
       </td>
       <td>
        空类型（Unit 类型，类似于 void）
       </td>
       <td>
        0 字节
       </td>
      </tr>
      <tr>
       <td>
        <code>
         str
        </code>
       </td>
       <td>
        字符串类型（不可变）
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         String
        </code>
       </td>
       <td>
        字符串类型（可变，堆分配）
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         &amp;str
        </code>
       </td>
       <td>
        字符串切片引用（不可变）
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         &amp;String
        </code>
       </td>
       <td>
        字符串引用（不可变）
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Vec&lt;T&gt;
        </code>
       </td>
       <td>
        动态数组类型（可变长度数组）
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Option&lt;T&gt;
        </code>
       </td>
       <td>
        可选值类型，用于处理可能为
        <code>
         None
        </code>
        的值
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Result&lt;T, E&gt;
        </code>
       </td>
       <td>
        结果类型，用于处理可能出错的操作
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Tuple
        </code>
       </td>
       <td>
        元组类型，固定长度的不同类型值的组合
       </td>
       <td>
        不定长
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Array
        </code>
       </td>
       <td>
        数组类型，固定长度的相同类型值的集合
       </td>
       <td>
        固定长度
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="34_Control_Flow_178">
     </a>
     3.4 控制流（Control Flow）：
    </h3>
    <ul>
     <li>
      <p>
       Rust 中的控制流语句包括 if 表达式、循环和匹配模式（match）。
      </p>
      <p>
       if 表达式：
      </p>
      <pre><code class="prism language-rust"><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> number <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Number is less than 5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Number is greater than or equal to 5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      <p>
       while 循环：
      </p>
      <pre><code class="prism language-rust"><span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> count <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Count: {}"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      <p>
       for 循环：
      </p>
      <pre><code class="prism language-rust"><span class="token keyword">for</span> number <span class="token keyword">in</span> <span class="token number">1</span><span class="token punctuation">..=</span><span class="token number">5</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Number: {}"</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      <p>
       match表达式：
      </p>
      <pre><code class="prism language-rust"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">match</span> x <span class="token punctuation">{<!-- --></span>
    <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"One"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Two"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    _ <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Other"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="35_Macros_226">
     </a>
     3.5 宏（Macros）：
    </h3>
    <ul>
     <li>
      <p>
       Rust 中的宏允许你编写类似函数的代码来生成代码。
      </p>
     </li>
     <li>
      <p>
       Rust 内置了一些常用的宏，比如
       <code>
        println!
       </code>
       和
       <code>
        vec!
       </code>
       等。
      </p>
     </li>
     <li>
      <p>
       你也可以自定义宏。
      </p>
     </li>
     <li>
      <p>
       示例：
      </p>
      <pre><code class="prism language-rust"><span class="token macro property">macro_rules!</span> greet <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token macro property">greet!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用宏</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="36__246">
     </a>
     3.6 完整示例：
    </h3>
    <pre><code class="prism language-rust"><span class="token comment">// 定义一个模块</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">my_module</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在模块中定义函数</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello from my_module!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个函数</span>
<span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">i32</span> <span class="token punctuation">{<!-- --></span>
    a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// 主函数</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">my_module<span class="token punctuation">::</span></span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用模块中的函数</span>

    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用函数</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Result: {}"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Result: 15</span>

    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 定义不可变变量</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 定义可变变量</span>
    y <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span> <span class="token comment">// 修改可变变量的值</span>

    <span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> number <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Number is less than 5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Number is greater than or equal to 5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> count <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Count: {}"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> number <span class="token keyword">in</span> <span class="token number">1</span><span class="token punctuation">..=</span><span class="token number">5</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Number: {}"</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">match</span> x <span class="token punctuation">{<!-- --></span>
        <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"One"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Two"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        _ <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Other"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token macro property">macro_rules!</span> greet <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token macro property">greet!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用宏</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="_308">
     </a>
     四、编译
    </h2>
    <p>
     以使用 Cargo 这个 Rust 的包管理器和构建工具来编译程序
    </p>
    <p>
     打开终端（命令行），进入到项目目录。
     <br/>
     运行：
    </p>
    <pre><code class="prism language-c">cargo build
</code></pre>
    <p>
     这会在项目目录下生成一个 target/ 目录，其中包含编译生成的可执行文件。
    </p>
    <p>
     编译完成后，在终端中运行生成的可执行文件：
    </p>
    <pre><code class="prism language-bash">./target/debug/my_project
</code></pre>
    <p>
     如果是库项目，需要将库文件引入其他 Rust 项目中，或者进行单元测试等。
    </p>
    <p>
     如果需要进行发布版的编译（带有优化）：
    </p>
    <pre><code class="prism language-bash"><span class="token function">cargo</span> build <span class="token parameter variable">--release</span>
</code></pre>
    <p>
     这会在 target/ 目录下生成一个 release/ 目录，其中包含优化后的可执行文件。这个可执行文件在运行时可能会更快，但编译时间会更长。
    </p>
    <p>
     附加命令
    </p>
    <ul>
     <li>
      <p>
       <code>
        cargo run
       </code>
       : 编译并运行项目。如果你不需要单独编译，可以直接使用这个命令来编译和运行项目：
      </p>
     </li>
     <li>
      <p>
       <code>
        cargo check
       </code>
       : 检查代码是否可以编译，但不生成可执行文件。这个命令可以用于快速检查代码的语法和类型错误：
      </p>
     </li>
    </ul>
    <p>
     注意事项
    </p>
    <ul>
     <li>
      在使用 Cargo 编译 Rust 程序时，它会自动下载并管理依赖项。
     </li>
     <li>
      如果你使用的是 IDE（如 Visual Studio Code），通常也会有相应的插件支持 Cargo 的编译和调试。
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333736343937342f:61727469636c652f64657461696c732f313336333131393130" class_="artid" style="display:none">
 </p>
</div>


