---
layout: post
title: "列表解析及生成器表达式的效率问题"
date: 2023-10-22 09:19:47 +0800
description: "列表解析(List Comprehensions)，来自函数式的编程语言Haskell。是一个非常有"
keywords: "(expr for item in iterable if condition)"
categories: ['编程语言', '大数据及云计算']
tags: ['函数式编程', 'Python']
artid: "51174767"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=51174767
    alt: "列表解析及生成器表达式的效率问题"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     列表解析及生成器表达式的效率问题
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <span style="font-family:FangSong_GB2312">
     <span style="font-size:18px">
      列表解析(List Comprehensions)，来自函数式的编程语言Haskell。是一个非常有用，简单而且灵活的工具，可以动态地创建列表。自Python2.0，列表开始加入到Python中，里面有lambda,map,filter等，使Python具备一个很重要的功能:函数式编程。使Python语言有了个革命性的发展.也提供用户一个强大工具，只用一行代码就可以创建包含特定内容的列表。
      <br/>
     </span>
    </span>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       其基本格式:
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       <span style="font-family:FangSong_GB2312; color:rgb(204,51,204)">
        <strong>
         [
        </strong>
       </span>
       <span style="font-family:FangSong_GB2312; color:rgb(255,0,0)">
        expr
       </span>
       <span style="font-family:FangSong_GB2312; color:rgb(0,153,0)">
        for
       </span>
       <span style="font-family:FangSong_GB2312; color:rgb(255,0,0)">
        item
       </span>
       <span style="font-family:FangSong_GB2312; color:rgb(0,153,0)">
        in
       </span>
       <span style="font-family:FangSong_GB2312; color:rgb(255,0,0)">
        iterable
       </span>
       <span style="font-family:FangSong_GB2312; color:rgb(0,153,0)">
        if
       </span>
       <span style="font-family:FangSong_GB2312; color:rgb(255,0,0)">
        condition
       </span>
       <span style="font-family:FangSong_GB2312">
        <span style="color:#cc33cc">
         <strong>
          ]
         </strong>
        </span>
       </span>
       <br/>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       比如下面两个例子，即可以用map, filter等来实现
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       <br/>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       <img alt="" src="https://img-blog.csdn.net/20160417194324588">
        <br/>
       </img>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       <br/>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       也可以使用列表解析来实现
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       <img alt="" src="https://img-blog.csdn.net/20160417194424448">
        <br/>
       </img>
      </span>
     </span>
    </p>
    <span style="font-family:FangSong_GB2312">
     <span style="font-size:18px">
      列表解析的一个不足就是必要生成所有的数据，用以创建整个列表。这可能对有大量数据的迭代器有负面效应，存在严重效率问题.生成器表达式自Python2.4被引入，与列表解析非常相似，语法也相似。不过它不会真正创建数字列表，而是返回一个生成器，这个生成器在每次计算出一条数据后，把这条数据yield(产生)出来，生成器表达式使用了lazy
      <br/>
      evaluation(延迟计算)，所以它在内存使用上更有效。生成器表达式格式:
      <br/>
     </span>
    </span>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       <span style="color:#cc33cc">
        <strong>
         (
        </strong>
       </span>
       <span style="color:#ff0000">
        expr
       </span>
       <span style="color:#009900">
        for
       </span>
       <span style="color:#ff0000">
        item
       </span>
       <span style="color:#009900">
        in
       </span>
       <span style="color:#ff0000">
        iterable
       </span>
       <span style="color:#009900">
        if
       </span>
       <span style="color:#ff0000">
        condition
       </span>
       <span style="color:#cc33cc">
        <strong>
         )
        </strong>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       下面举个例子来说明:
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       【
       <span style="font-family:FangSong_GB2312">
        测试文件
       </span>
       】
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       准备了四个文件: 1.txt 2.txt 3.txt 4.txt
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       文件大小分别为: 10M 100M 1G 10G
      </span>
     </span>
    </p>
    <p>
     <span style="font-size:18px">
      <img alt="" src="https://img-blog.csdn.net/20160418055121318">
       <br/>
      </img>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-size:18px">
       <span style="font-family:FangSong_GB2312">
        【
       </span>
       <span style="font-family:FangSong_GB2312">
        测试内容
       </span>
       <span style="font-family:FangSong_GB2312">
        】测试上述四个文件所有非空字符的数目
       </span>
       <br/>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-size:18px">
        <span style="font-family:FangSong_GB2312">
         【
        </span>
        <span style="font-family:FangSong_GB2312">
         测试项目
        </span>
        <span style="font-family:FangSong_GB2312">
         】列表解析  VS  生成器表达式
        </span>
        <br/>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px">
         【测试脚本】
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px">
         <br/>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px">
         <img alt="" src="https://img-blog.csdn.net/20160418054652988">
          <br/>
         </img>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px">
         <br/>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px">
         【测试结果】
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px">
         <img alt="" src="https://img-blog.csdn.net/20160418054759895">
          <br/>
         </img>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px">
         【测试分析】
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px; color:#ff0000">
         1. 当数据比较小时，使用生成器表达式所耗时间比列表解析要稍微快些
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:FangSong_GB2312">
      <span style="font-family:FangSong_GB2312">
       <span style="font-family:FangSong_GB2312">
        <span style="font-size:18px; color:#ff0000">
         2. 当数据比较大时，比如接近PC机内存的总量时，用后者速度要快的多！
        </span>
       </span>
      </span>
     </span>
    </p>
    <br/>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f4a657272795f31313236:2f61727469636c652f64657461696c732f3531313734373637" class_="artid" style="display:none">
 </p>
</div>


