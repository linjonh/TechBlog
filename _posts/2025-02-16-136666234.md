---
layout: post
title: "HarmonyOS-页面跳转Router实例演示"
date: 2025-02-16 21:19:20 +0800
description: "本文将以APP的登录和修改昵称为例演示官网的几种页面跳转、返回以及这些流程携带参数，实例的形式记录学"
keywords: "HarmonyOS,页面跳转,Router模块"
categories: ['']
tags: ['华为', 'Harmonyos']
artid: "136666234"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=136666234
    alt: "HarmonyOS-页面跳转Router实例演示"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     HarmonyOS-页面跳转Router实例演示
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-left:.0001pt;text-align:justify;">
     本文将以APP的登录和修改昵称为例演示官网的几种页面跳转、返回以及这些流程携带参数，实例的形式记录学习HarmonyOS的页面跳转。
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     “
     <span style="background-color:#ffffff;">
      页面路由指在应用程序中实现不同页面之间的跳转和数据传递。
     </span>
     <span style="background-color:#ffffff;">
      HarmonyOS
     </span>
     <span style="background-color:#ffffff;">
      提供了Router模块，通过不同的url地址，可以方便地进行页面路由，轻松地访问不同的页面。本文将从
     </span>
     <a href="#section6414655195312" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        页面跳转
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      、
     </span>
     <a href="#ZH-CN_TOPIC_0000001523968678__%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        页面返回
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      和
     </span>
     <a href="#ZH-CN_TOPIC_0000001523968678__%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E%E5%89%8D%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E8%AF%A2%E9%97%AE%E6%A1%86" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        页面返回前增加一个询问框
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      几个方面介绍Router模块提供的功能。
     </span>
     ”这是官网对Router的介绍。
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       该案例非常简单我准备了LoginPages.ets、MainPages.ets、DetailPages.ets，分别是APP的登录页面、主页面和昵称修改页面。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <img alt="" height="597" src="https://i-blog.csdnimg.cn/blog_migrate/4bf57d24c68b95ff542352a4684bc645.png" width="304"/>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     登录页-LoginPage
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <img alt="" height="609" src="https://i-blog.csdnimg.cn/blog_migrate/3e9d16fe02352ab835b85db107c26a57.png" width="297"/>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     首页-MainPage
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <img alt="" height="591" src="https://i-blog.csdnimg.cn/blog_migrate/10ea042238319c1c46941bd6a97141f6.png" width="290"/>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     详情页修改昵称-DetailPage
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       LoginPages.ets有一个登录按钮、和账号文本。
      </span>
     </span>
    </p>
    <pre><code class="hljs">@State name: string = '张一三'
@State userId: string = '123456'

build() {
  Row() {
    Column() {
      Text(this.name)
        .fontSize(20)
        .fontWeight(FontWeight.Bold)

      Button("登录")
        .fontSize(26)
        .margin({
          top:30
        })
        .padding({
          left:30,
          top:10,
          right:30,
          bottom:10,
        })
        .onClick(event =&gt;{
//这里是放置具体的场景一、二、三、四、五的代码
})</code></pre>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       场景一：
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       初学HarmonyOS不管三七二十一我就想看一眼鸿蒙的页面跳转
      </span>
     </span>
    </p>
    <pre><code class="hljs">router.pushUrl({
  url: 'pages/MainPage' // 目标url
}, router.RouterMode.Standard, (err) =&gt; {
  if (err) {
    console.error(`Invoke pushUrl failed, code is ${err.code}, message is ${err.message}`);
    return;
  }
  console.info('Invoke pushUrl succeeded.');
});</code></pre>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      有个小问题，如果我多次点击登录按钮会出现多个首页，这也不是我们想要的，于是场景二来了。
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       场景
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       二
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       ：希望
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       如果用户故意或者不小心点了多次登录按钮，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       保证每次只有一个
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       首
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       页存在于页面栈中，在返回时直接回到
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       之前的登录
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       页。这种场景下，可以使用pushUrl()方法，并且使用Single实例模式。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       防止重复点击。
      </span>
     </span>
    </p>
    <pre><code class="hljs">router.pushUrl({
  url: 'pages/MainPage' // 目标url
}, router.RouterMode.Single, (err) =&gt; {
  if (err) {
    console.error(`Invoke pushUrl failed, code is ${err.code}, message is ${err.message}`);
    return;
  }
  console.info('Invoke pushUrl succeeded.');
});</code></pre>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       不对啊，我从登录页点登录按钮成功后进入了进入App首页，怎么按返回键还能回到登录页，这肯定不对，需要优化。于是就有了下面的场景三。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       场景
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       三
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       ：希望从登录页成功登录后，跳转到
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       首
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       页。同时，销毁登录页，在返回时直接退出应用
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       而不是回到登录页面
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       。这种场景下，可以使用replaceUrl()方法，并且使用Standard实例模式。
      </span>
     </span>
    </p>
    <pre><code class="hljs">router.replaceUrl({
  url: 'pages/MainPage' // 目标url
}, router.RouterMode.Standard, (err) =&gt; {
  if (err) {
    console.error(`Invoke replaceUrl failed, code is ${err.code}, message is ${err.message}`);
    return;
  }
  console.info('Invoke replaceUrl succeeded.');
})</code></pre>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       场景四：
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       主页面有一个“修改昵称”点击会跳转到DetailPages页面，如果DetailPages
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       已经被查看过，则不需要再新建一个详情页，而是直接跳转到已经存在的详情页。这种场景下，可以使用replaceUrl()方法，并且使用Single实例模式。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       place的防止重复点击，复用页面
      </span>
     </span>
    </p>
    <pre><code class="hljs">router.replaceUrl({
  url: 'pages/MainPage' // 目标url
}, router.RouterMode.Single, (err) =&gt; {
  if (err) {
    console.error(`Invoke replaceUrl failed, code is ${err.code}, message is ${err.message}`);
    return;
  }
  console.info('Invoke replaceUrl succeeded.');})</code></pre>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       上面场景都有一个特点是页面跳转时没有携带参数，但实际开发时在登录页与服务端交互后，服务端返回的一些参数和凭证是需要送给主页面的。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      如果需要在跳转时传递一些数据给目标页，则可以在调用Router模块的方法时，添加一个params属性，并指定一个对象作为参数。例如：
     </span>
    </p>
    <pre><code class="hljs">let paramsInfo: DataModel = {
  name: this.name,
  userId: this.userId
};

router.pushUrl({
  url: 'pages/MainPage', // 目标url
  params: paramsInfo // 添加params属性，传递自定义参数
}, (err) =&gt; {
  if (err) {
    console.error(`Invoke pushUrl failed, code is ${err.code}, message is ${err.message}`);
    return;
  }
  console.info('Invoke pushUrl succeeded.');
})</code></pre>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       这是定义传递的对象：
      </span>
     </span>
    </p>
    <pre><code class="hljs">class DataModel {
  name: string;
  userId: string;
}</code></pre>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      在目标页中，可以通过调用Router模块的
     </span>
     <a href="#ZH-CN_TOPIC_0000001523808578__routergetparams" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        getParams()
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      方法来获取传递过来的参数。
     </span>
     <span style="background-color:#ffffff;">
      本案例在MainPages页面的
     </span>
     <span style="background-color:#2b2b2b;">
      <span style="color:#ffffff;">
       aboutToAppear
      </span>
     </span>
     <span style="background-color:#2b2b2b;">
      <span style="color:#ffffff;">
       生命周期
      </span>
     </span>
     <span style="background-color:#ffffff;">
      ：
     </span>
    </p>
    <pre><code class="hljs">aboutToAppear(){
  const params = router.getParams(); // 获取传递过来的参数对象
  this.name = params['name']; // 获取id属性的值
  const password = params['password'].age; // 获取age属性的值
  console.log("   name= "+this.name+"      password= "+password)
}</code></pre>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       登陆后app首页就会显示登录页输入的账号。
      </span>
     </span>
    </p>
    <ol>
     <li style="text-align:justify;">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        页面返回
       </span>
      </span>
     </li>
    </ol>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       首页有一个修改昵称的按钮，点击会会到DetailPage页面，
      </span>
      <span style="background-color:#ffffff;">
       当用户完成操作后，需要
      </span>
      <span style="background-color:#ffffff;">
       将修改后的昵称
      </span>
      <span style="background-color:#ffffff;">
       返回到上一个页面或者指定页面，这就需要用到页面返回功能。在返回的过程中，可能需要将数据传递给目标页，这就需要用到数据传递功能。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       可以使用以下几种方式进行页面返回：
      </span>
     </span>
    </p>
    <pre><code class="hljs">Button("返回")
  .fontSize(26)
  .margin({
    top:30
  })
  .padding({
    left:30,
    top:10,
    right:30,
    bottom:10,
  }) .onClick(event =&gt;{
  //回到上一个页面
  // router.back();
  //回到指定页面
  router.back({
    url: 'pages/MainPage’
  });
})</code></pre>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      但是
     </span>
     <span style="background-color:#ffffff;">
      有一点必须注意
     </span>
     <span style="background-color:#ffffff;">
      ，
     </span>
     <span style="background-color:#ffffff;">
      方式一的“
     </span>
     <span style="background-color:#ffffff;">
      上一个页面
     </span>
     <span style="background-color:#ffffff;">
      ”
     </span>
     <span style="background-color:#ffffff;">
      或者方式二“我们指定的页面”，此处统称为返回的
     </span>
     <span style="background-color:#ffffff;">
      目标页
     </span>
     <span style="background-color:#ffffff;">
      面哈，返回的目标页面
     </span>
     <span style="background-color:#ffffff;">
      必须存在于页面栈中才能够返回
     </span>
     <span style="background-color:#ffffff;">
      ，
     </span>
     <span style="background-color:#ffffff;">
      否则该方法将无效。
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
    </p>
    <p style="margin-left:.0001pt;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       方式三：返回到指定页面，并传递自定义参数信息
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       此处我将修改后的昵称
      </span>
     </span>
     <span style="background-color:#2b2b2b;">
      <span style="color:#ffffff;">
       老梁学
      </span>
     </span>
     <span style="background-color:#2b2b2b;">
      <span style="color:#ffffff;">
       HarmonyOS
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       传回去了
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       。
      </span>
     </span>
    </p>
    <pre><code class="hljs">Button("确认修改")
  .fontSize(26)
  .margin({
    top:30
  })
  .padding({
    left:30,
    top:10,
    right:30,
    bottom:10,
  }) .onClick(event =&gt;{
  router.back({
    url: 'pages/MainPage',
    params: {
      name: this.message
    }
  });
})</code></pre>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#242728;">
        这种方式不仅可以返回到指定页面，还可以在返回的同时传递自定义参数信息。这些参数信息可以在目标页中通过调用router.getParams()方法进行获取和解析。
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#242728;">
        我们在
       </span>
      </span>
      <span style="background-color:#2b2b2b;">
       <span style="color:#ffffff;">
        MainPage
       </span>
      </span>
      <span style="background-color:#2b2b2b;">
       <span style="color:#ffffff;">
        的
       </span>
      </span>
      <span style="background-color:#ffffff;">
       在
      </span>
      <a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-page-custom-components-lifecycle-0000001524296665-V3" rel="nofollow" title="onPageShow()生命周期">
       onPageShow()生命周期
      </a>
      <span style="background-color:#ffffff;">
       回调中：
      </span>
     </span>
    </p>
    <pre><code class="hljs">onPageShow() {
  const params = router.getParams(); // 获取传递过来的参数对象
  const name = params['name']; // 获取info属性的值
  this.name = name
}</code></pre>
    <p style="margin-left:.0001pt;text-align:left;">
     <img alt="" height="594" src="https://i-blog.csdnimg.cn/blog_migrate/ddea1f0a611c6f832a2a4f1510798794.png" width="302"/>
    </p>
    <p style="margin-left:.0001pt;text-align:left;">
     首页-MainPage修改昵称以后
    </p>
    <p style="margin-left:.0001pt;text-align:left;">
     <span style="background-color:#ffffff;">
      <strong>
       <span style="background-color:#ffffff;">
        <strong>
         补充说明
        </strong>
       </span>
      </strong>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#328dff;">
       1、鸿蒙提供了
      </span>
     </span>
     <a href="#ZH-CN_TOPIC_0000001523808578__routerpushurl9" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        router.pushUrl()
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      和
     </span>
     <a href="#ZH-CN_TOPIC_0000001523808578__routerreplaceurl9" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        router.replaceUrl()
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      这两种
     </span>
     <span style="background-color:#ffffff;">
      跳转
     </span>
     <span style="background-color:#ffffff;">
      模式
     </span>
     <span style="background-color:#ffffff;">
      ，
     </span>
     <span style="background-color:#ffffff;">
      很明显两者区别是
     </span>
     <span style="background-color:#ffffff;">
      目标页是否会替换当前页
     </span>
     <span style="background-color:#ffffff;">
      ，
     </span>
     <span style="background-color:#ffffff;">
      即A面启动了B页面之后A页面是在B页面下面继续存活还是被直接销毁
     </span>
     <span style="background-color:#ffffff;">
      。
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       router.pushUrl()：目标页不会替换当前页，而是压入页面栈。这样可以保留当前页的状态，并且可
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       以通过返回键或者调用
      </span>
     </span>
     <a href="#ZH-CN_TOPIC_0000001523808578__routerback" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        router.back()
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       方法返回到当前页。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       router.replaceUrl()：目标页会替换当前页，并销毁当前页。这样可以释放当前页的资源，并且无法返回到当前页。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      2、
     </span>
     <span style="background-color:#ffffff;">
      页面栈的最大容量为32个页面。如果超过这个限制，可以调用
     </span>
     <a href="#ZH-CN_TOPIC_0000001523808578__routerclear" rel="nofollow">
      <span style="background-color:#ffffff;">
       <span style="color:#328dff;">
        router.clear()
       </span>
      </span>
     </a>
     <span style="background-color:#ffffff;">
      方法清空历史页面栈，释放内存空间。
     </span>
    </p>
    <p style="margin-left:0;text-align:left;">
     <strong>
      <span style="background-color:#ffffff;">
       <span style="color:#242728;">
        <strong>
         3、
        </strong>
       </span>
      </span>
     </strong>
     <span style="background-color:#ffffff;">
      <span style="color:#242728;">
       标准实例模式下，router.RouterMode.Standard参数可以省略。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      4、
     </span>
     <span style="background-color:#ffffff;">
      在使用页面路由Router相关功能之前，需要在代码中先导入Router模块。
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      import router from
     </span>
     <a href="mailto:'%20rel=">
      <u>
       <span style="background-color:#ffffff;">
        <span style="color:#0000ff;">
         <u>
          '@ohos.router';
         </u>
        </span>
       </span>
      </u>
     </a>
     <span style="background-color:#ffffff;">
      快捷键alt+enter是可以直接导包的
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f486964616e6368616f66616e2f:61727469636c652f64657461696c732f313336363636323334" class_="artid" style="display:none">
 </p>
</div>


