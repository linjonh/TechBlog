---
layout: post
title: 基于STM32的最小系统电路设计STM32F103C8T6为例
date: 2024-12-30 09:28:36 +0800
categories: [嵌入式硬件]
tags: [电路设计,最小系统板,STM32,MCU]
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=138352997
    alt: 基于STM32的最小系统电路设计STM32F103C8T6为例
artid: 138352997
render_with_liquid: false
---
<p class="artid" style="display:none">$url</p>
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     基于STM32的最小系统电路设计（STM32F103C8T6为例）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <strong>
      前言：
     </strong>
     本篇博客为嵌入式硬件领域的文章，对
     <span style="color:#fe2c24;">
      <strong>
       STM32
      </strong>
     </span>
     的最小系统电路设计进行教学。本篇博客以嘉立创
     <span style="color:#fe2c24;">
      <strong>
       EDA
      </strong>
     </span>
     （标准版）进行绘制
     <span style="color:#fe2c24;">
      <strong>
       STM32F103C8T6
      </strong>
     </span>
     的最小系统电路 PCB 板，STM32 的最小系统通常包括：微控制器、时钟电路、电源电路、复位电路以及程序下载端口。本篇博客对
     <span style="color:#fe2c24;">
      <strong>
       STM32F103C8T6
      </strong>
     </span>
     的最小系统进行介绍并强调绘制 PCB 过程中的注意事项！
     <strong>
      （PCB绘制图见篇末）
     </strong>
    </p>
    <p>
     <strong>
      最小系统电路：
     </strong>
    </p>
    <p>
     <img alt="" height="875" src="https://i-blog.csdnimg.cn/blog_migrate/084ca484bce88132f431f03d18d59229.jpeg" width="1200"/>
    </p>
    <p>
     <strong>
      PCB绘图：
     </strong>
    </p>
    <p>
     <img alt="" height="1200" src="https://i-blog.csdnimg.cn/blog_migrate/d86dc2ffbbf759b7071b59e70c92ddb0.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="926" src="https://i-blog.csdnimg.cn/blog_migrate/9ad2bb3ee85652255b7e52cfafee54b3.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="975" src="https://i-blog.csdnimg.cn/blog_migrate/afac85f7ca5c140b66521ac55fbf3cfb.png" width="1200">
     </img>
    </p>
    <p>
     <img alt="" height="1090" src="https://i-blog.csdnimg.cn/blog_migrate/bc5c1197ce50ff63d7750d43eb4c209c.png" width="1200"/>
    </p>
    <h2>
     一、最小系统电路概述
    </h2>
    <blockquote>
     <p>
      <strong>
       最小系统电路通常指的是能够维持一个微控制器（MCU）的电路，包括以下几个基本部分：
      </strong>
     </p>
     <p>
      <strong>
       1、微控制器（MCU）
      </strong>
      : 最小系统电路的核心，负责处理数据和运行程序；
     </p>
     <p>
      <strong>
       2、时钟电路:
      </strong>
      提供MCU运行所需的时钟信号，通常包括晶体振荡器和相关的电容；
     </p>
     <p>
      <strong>
       3、电源:
      </strong>
      为MCU和其他电路提供稳定的电源。可能包括电压调节器、滤波电容等；
     </p>
     <p>
      <strong>
       4、复位电路:
      </strong>
      确保MCU在上电或需要时能够正确地启动和复位；
     </p>
     <p>
      <strong>
       5、程序下载端口:
      </strong>
      允许程序员将代码烧录到MCU中，并在开发过程中进行调试。这通常包括JTAG、SWD、ISP等接口；
     </p>
    </blockquote>
    <blockquote>
     <p>
      这个最小系统电路是构建更复杂系统的基础，可以根据具体的应用需求进行扩展和修改。在设计时，需要考虑MCU的规格、功耗、工作电压、接口需求等因素，以确保系统的稳定运行。
     </p>
    </blockquote>
    <p>
     <img alt="" height="681" src="https://i-blog.csdnimg.cn/blog_migrate/de4f99edaa4ac771d1fcc042ce48a5c2.jpeg" width="1200"/>
    </p>
    <h2>
     二、最小系统电路设计
    </h2>
    <h3>
     2.1
     <strong>
      微控制器（MCU）
     </strong>
    </h3>
    <p>
     微控制器（Microcontroller，简称MCU）是一种集成电路，它集成了中央处理单元（CPU）、内存、输入/输出（I/O）接口和部分外设功能，用于控制电子设备的一个或多个功能。本篇博客的最小系统板使用 STM32F103C8T6 作为 MCU 进行操作，STM32F103C8T6拥有非常多的外设功能，包括：GPIO、UART、USB、SPI、I2C以及CAN等，可以制造出各种样式的电子产品。
    </p>
    <p class="img-center">
     <img alt="" height="726" src="https://i-blog.csdnimg.cn/blog_migrate/a51edf541e937aaf35ae76bc9474f693.png" width="1200"/>
    </p>
    <p>
     微控制器电路中的去耦电容（作者是拆分下来画的），如下图所示：
    </p>
    <p class="img-center">
     <img alt="" height="310" src="https://i-blog.csdnimg.cn/blog_migrate/48b59d39875c71fede96f51a4473fab6.png" width="541"/>
    </p>
    <p>
     去耦电容核心作用是来滤除杂波的，保持引脚电压的稳定。这些电容也尽量离芯片相关引脚近一点。分布在芯片四周即可。
    </p>
    <h3>
     2.2 时钟电路
    </h3>
    <p>
     STM32 最小系统板的时钟电路又称为 “晶振电路”。晶振电路，全称为晶体振荡电路，是电子设备中用于产生稳定、准确的频率信号的电路。晶振电路广泛应用于各种电子产品中，如计算机、手机、通信设备等，其主要作用是提供精确的时间基准和稳定的系统时钟。
    </p>
    <p>
     时钟电路（晶振电路）用来给芯片提供时钟信号，原理图如下：
    </p>
    <p class="img-center">
     <img alt="" height="581" src="https://i-blog.csdnimg.cn/blog_migrate/d273b37d9de4b64a391ee1bf7fcdc017.png" width="812"/>
    </p>
    <blockquote>
     <p>
      <strong>
       PCB绘制需要注意的点：
      </strong>
     </p>
     <p>
      1、画板时晶振尽量离芯片近一点；
      <br/>
      2、晶振底部尽量不要穿过其他支路，防止信号串扰；
      <br/>
      3、不同型号的晶振可能需要不同的电路设计，根据自己使用的晶振型号设计；
     </p>
    </blockquote>
    <h3>
     2.3 电源
    </h3>
    <p>
     该STM32最小系统板上的电源电路使用了AMS1117-3.3V模块，属于典型的降压电源电路。将输入的 5V 电压进行降压，最终输出需要使用的 3.3V 电压。
    </p>
    <blockquote>
     <p>
      <strong>
       电源电路中使用的两种不同的电容？
      </strong>
     </p>
     <p>
      (1)、 输入滤波电容的作用：
     </p>
     <p>
      输入电压，当接入电源，其幅值是从零起始的，波动非常大，加入足够容量的电容进行滤波后，因电容的充放电效应，该脉动直流变成纹波不大的直流电，这是输入滤波的作用。
     </p>
     <p>
      (2)、输出滤波电容的作用：
     </p>
     <p>
      稳压电路的工作过程需要从输出采样，然后根据其反馈值调节输出以达稳压的目的。如果此时没有输出滤波电容，只要因负载变化带来的电压波动频率恰好与稳压电路的调节速率差不多就会产生振荡效应，导致输出失控，所以稳压输出也必须加滤波电容，而且增加滤波电容也可以进一步增加稳压输出的稳定性。
     </p>
    </blockquote>
    <blockquote>
     <p>
      <strong>
       ★大电容和小电容并联的作用：
      </strong>
     </p>
     <p>
      至于与大容量电解电容并联的小电容，其作用在于旁路频率较高的波动电压，因为铝电解电容的制造工艺导致其具有较大的ESL（等效电感），无法滤除高频成份，故需加个小电容。
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="639" src="https://i-blog.csdnimg.cn/blog_migrate/3a466e5ccedf1035dfc9aa3f50336195.png" width="764"/>
    </p>
    <h3>
     2.4 复位电路
    </h3>
    <blockquote>
     <p>
      STM32 有三种复位方式：电源复位、系统复位和后备域复位;
     </p>
    </blockquote>
    <p>
     电源复位时，当RESET引脚被拉低(KEY1被按下)，产生外部复位，并产生复位脉冲，从而使系统复位。
    </p>
    <p class="img-center">
     <img alt="" height="572" src="https://i-blog.csdnimg.cn/blog_migrate/c652e5ef75da76934a1bf7fbdb0b5f57.png" width="571"/>
    </p>
    <h3>
     2.5 程序下载端口
    </h3>
    <p>
     程序下载电路包括：BOOT电路和程序下载接口
    </p>
    <p>
     ★BOOT电路
    </p>
    <p>
     <img alt="" height="561" src="https://i-blog.csdnimg.cn/blog_migrate/aafb42414db53d2aa6bc6c386e609f47.png" width="858"/>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        启动方式
       </th>
       <th>
        BOOT0
       </th>
       <th>
        BOOT1
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        从主闪存存储器启动
       </td>
       <td>
        0
       </td>
       <td>
        x
       </td>
      </tr>
      <tr>
       <td>
        从系统存储器启动
       </td>
       <td>
        1
       </td>
       <td>
        0
       </td>
      </tr>
      <tr>
       <td>
        从内置SRAM启动
       </td>
       <td>
        1
       </td>
       <td>
        1
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     程序下载接口，如下图所示（型号：HEADER_1*4P）：
    </p>
    <p class="img-center">
     <img alt="" height="584" src="https://i-blog.csdnimg.cn/blog_migrate/046855c0b81bd31ab920db00f98e3a3b.png" width="448"/>
    </p>
    <h2>
     三、启动方式
    </h2>
    <p>
     一般来说就是指我们下好程序后，重启芯片时，SYSCLK 的第4个上升沿，BOOT 引脚的值将被锁存。用户可以通过设置 BOOT1 和 BOOT0 引脚的状态，来选择在复位后的启动模式。
    </p>
    <p class="img-center">
     <img alt="" height="170" src="https://i-blog.csdnimg.cn/blog_migrate/a424e72bcfd2cebfc227c0008722c45f.png" width="884"/>
    </p>
    <h3>
     3.1 主闪存存储器启动
    </h3>
    <p>
     <strong>
      1、第一种方式(boot0 = 0)：Flash memory启动方式
     </strong>
    </p>
    <p>
     启动地址：0x08000000 是 STM32 内置的 Flash，一般我们使用 JTAG 或者 SWD 模式下载程序时，就是下载到这个里面，重启后也直接从这启动程序。基本上都是采用这种模式。
    </p>
    <h3>
     3.2 系统存储器启动
    </h3>
    <p>
     <strong>
      2、第二种方式(boot0 = 1；boot1 = 0)：System memory启动方式
     </strong>
    </p>
    <p>
     启动地址：0x1FFF0000从系统存储器启动，这种模式启动的程序功能是由厂家设置的。一般来说，这种启动方式用的比较少。系统存储器是芯片内部一块特定的区域，STM32在出厂时，由ST在这个区域内部预置了一段BootLoader， 也就是我们常说的ISP程序， 这是一块ROM，出厂后无法修改。一般来说，我们选用这种启动模式时，是为了从串口下载程序，因为在厂家提供的BootLoader 中，提供了串口下载程序的固件，可以通过这个BootLoader将程序下载到系统的Flash中。但是这个下载方式需要以下步骤：
    </p>
    <p>
     1、将BOOT0设置为1，BOOT1设置为0，然后按下复位键，这样才能从系统存储器启动BootLoader
     <br/>
     2、最后在BootLoader的帮助下，通过串口下载程序到Flash中
     <br/>
     3、程序下载完成后，又有需要将BOOT0设置为GND，手动复位，这样，STM32才可以从Flash中启动可以看到， 利用串口下载程序还是比较的麻烦，需要跳帽跳来跳去的，非常的不注重用户体验。
    </p>
    <h3>
     3.3
     <strong>
      内置SRAM
     </strong>
     启动
    </h3>
    <p>
     <strong>
      3、第三种方式(boot0 = 1;boot1 = 1)：SRAM启动方式
     </strong>
    </p>
    <p>
     启动地址：0x20000000 内置SRAM，既然是SRAM，自然也就没有程序存储的能力了，这个模式一般用于程序调试。假如我只修改了代码中一个小小的 地方，然后就需要重新擦除整个Flash，比较的费时，可以考虑从这个模式启动代码（也就是STM32的内存中），用于快速的程序调试，等程序调试完成后，在将程序下载到SRAM中。
    </p>
    <p class="img-center">
     <img alt="" height="871" src="https://i-blog.csdnimg.cn/blog_migrate/ce814b09cd3d2dd9c3c768bd3c98e6d6.png" width="1200"/>
    </p>
    <h2>
     四、PCB绘制的注意事项
    </h2>
    <blockquote>
     <p>
      以下内容是作者自己总结的需要注意点，后续如果还有，作者还会继续补充到这里。
     </p>
    </blockquote>
    <p>
     1.PCB的边缘层是机械层。
     <br/>
     2.要注意走电源的线要画的尽量粗一些。(容易被忽略的点)
     <br/>
     3.PCB覆铜的过程中，没有导线的地方都是空白的，只有有导线连接的地方会被附上铜。
     <br/>
     4.器件在画PCB的时，要尽可能的短一些，减少环境噪声等干扰(带来相应的问题是器件之间存在些许的干扰)。
     <br/>
     5.可以使用局部覆铜，可以增强散热。
     <br/>
     6.原理图空脚不能只空着，要么接地，要么就标上×的引脚符号。
     <br/>
     7.有USB的情况下，要尽量在前面加上一个保险丝。（作用：起静电放电防护。）
     <br/>
     8.PCB中GND引脚可以不接，最后直接对地覆铜即可。
     <br/>
     9.局部铺铜的话，不用选去除死铜那个选项，直接快捷键P+R即可。
     <br/>
     10.PCB要测距离的话，就按ctrl+m
     <br/>
     11.在PCB画图的工程中，连线尽量不要走直角,应该选择大90°的角度进行连线，从PCB加工生产的角度来说，最好不要直角走线，而是采用弧形走线或钝角走线（避免电磁影响、频率影响、腐蚀度影响、美观性影响）
    </p>
    <h2>
     五、PCB绘制图分享
    </h2>
    <p>
     <strong>
      绘制图地址：
     </strong>
     <a href="https://download.csdn.net/download/black_sneak/89257468" title="STM32F103C8T6的PCB绘制图资源资源-CSDN文库">
      STM32F103C8T6的PCB绘制图资源资源-CSDN文库
     </a>
    </p>
    <p>
     <strong>
      如果积分不够的朋友，
      <span style="color:#fe2c24;">
       点波关注
      </span>
      ，
      <span style="color:#fe2c24;">
       评论区留下邮箱
      </span>
      ，
      <span style="color:#fe2c24;">
       作者无偿提供源码和后续问题解答
      </span>
      。求求啦关注一波吧 ！！！
     </strong>
    </p>
   </div>
  </div>
 </article>
</div>


