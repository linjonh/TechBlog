---
layout: post
title: "基于开源的Micro-RTSP,使用VLC和ffmpeg拉流播放RTSP视频流,本例使用安信可ESP32-CAM进行推流"
date: 2022-12-13 14:28:11 +0800
description: "基于开源的Micro-RTSP，使用VLC和ffmpeg拉流播放RTSP视频流，本例使用安信可ESP"
keywords: "micro-rtsp arduino库"
categories: ["未分类"]
tags: ["网络协议", "硬件工程", "物联网", "嵌入式硬件", "实时音视频"]
artid: "128301045"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=128301045
  alt: "基于开源的Micro-RTSP,使用VLC和ffmpeg拉流播放RTSP视频流,本例使用安信可ESP32-CAM进行推流"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     基于开源的Micro-RTSP，使用VLC和ffmpeg拉流播放RTSP视频流，本例使用安信可ESP32 CAM进行推流。
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     基于开源的Micro-RTSP，使用VLC和ffmpeg拉流播放RTSP视频流，本例使用安信可ESP32 CAM进行推流。
     <br/>
     vlc播放命令为：rtsp://192.168.43.128:8554/mjpeg/1。
     <br/>
     ffmpeg播放命令为：ffplay rtsp://192.168.43.128:8554/mjpeg/1。
     <br/>
     使用ESP-IDF5.0编译成功。esp-idf-v4.4.2编译不成功，有成功的小伙伴可以分享一下。
    </p>
    <h3>
     <a id="1_4">
     </a>
     1.源码地址：
    </h3>
    <p>
     git clone https://github.com/brainrecall/Micro-RTSP
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/22f9eb92608129e32a95d4597b4a02fe.png"/>
    </p>
    <h3>
     <a id="2_7">
     </a>
     2.保存源码：
    </h3>
    <p>
     保存在本地D:\Espressif\esp-idf-5.0\examples\Micro-RTSP
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3982af94f0df62dfb63801939661ce19.png"/>
    </p>
    <h3>
     <a id="3esp32camera_10">
     </a>
     3.下载并保存esp32-camera库
    </h3>
    <p>
     git源码：https://github.com/espressif/esp32-camera/tree/afcb7b07272200f69373cb3ba97e3a0afc188ba2
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/399bacb0ae9205f633cb9b7f35f7e254.png">
      <br/>
      esp32-camera库保存在目录D:\Espressif\esp-idf-5.0\examples\Micro-RTSP\examples\esp-idf\components\esp32-camera
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/88802955fd6040becb2051049f0a3324.png"/>
     </img>
    </p>
    <h3>
     <a id="4vscode_espidf50_15">
     </a>
     4.使用vscode esp-idf5.0环境创建本工程
    </h3>
    <p>
     使用vscode esp-idf打开目录D:\Espressif\esp-idf-5.0\examples\Micro-RTSP\examples\esp-idf，后面工程的编辑修改都是在此目前进行
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/be440d5a3538cebfb7e89b6eca2d29da.png">
      <br/>
      vscode工程目录如下：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5928c4681c19fd53e67b41f928dcb5fb.png"/>
     </img>
    </p>
    <h3>
     <a id="5OV2640cpp_20">
     </a>
     5.修改文件OV2640.cpp
    </h3>
    <p>
     D:\Espressif\esp-idf-5.0\examples\Micro-RTSP\src\OV2640.cpp
     <br/>
     将下面代码注释掉：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9722270d108774b54ef01962b96cf396.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a712fb3ae5ccc9052139e5bb4308cac6.png"/>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/89ec341f3c8bddac11eec33184676c79.png"/>
     </img>
    </p>
    <h3>
     <a id="6wifi_ssidpassword_26">
     </a>
     6.修改wifi ssid和password:
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2c003025fc0d053cd5815e1dbb7f5b1c.png"/>
    </p>
    <h3>
     <a id="7_28">
     </a>
     7.编译下载
    </h3>
    <p>
     看到rtsp://esp32cam3.localdomain:8554/mjpeg/1代表ESP32CAM rtsp串流以及准备好了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5009ea598e55943db31cf3ce6b08020a.png"/>
    </p>
    <h3>
     <a id="8esp32camap_31">
     </a>
     8.下载完成后esp32cam链接上手机ap热点
    </h3>
    <p>
     esp32cam的ip地址是192.168.43.128
    </p>
    <h3>
     <a id="9VLC_33">
     </a>
     9.下载安装VLC，并配置网络协议
    </h3>
    <p>
     PC中安装完vlc后，链接到同样的手机热点。并在下图中输入网络URL。
     <br/>
     rtsp://192.168.43.128:8554/mjpeg/1
     <br/>
     其中192.168.43.128是esp32cam的ip地址
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bca771e48f02abdb0d72931107ecb94c.png"/>
    </p>
    <h3>
     <a id="10_38">
     </a>
     10.大功告成：
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9f8ef82e38d6b76a8e10361fff32ab60.png"/>
     <br/>
     使用ffmpeg也是可以播放的，命令为：ffplay rtsp://192.168.43.128:8554/mjpeg/1
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4534b820f6459cf83b4306d27fed9127.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f6b6174657264616973792f:61727469636c652f64657461696c732f313238333031303435" class_="artid" style="display:none">
 </p>
</div>
