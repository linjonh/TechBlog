---
layout: post
title: "Java注解基本用法"
date: 2024-12-30 20:00:43 +0800
description: "注解基本概念注解(元数据)为我们在代码中添加信息提供一种形式化的方法，我们可以在某个时刻非常方便的使"
keywords: "java注解例子"
categories: ['Java']
tags: ['注解', 'Java']
artid: "80764783"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=80764783
    alt: "Java注解基本用法"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java注解基本用法
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     注解基本概念
    </h4>
    <p>
     注解(元数据)为我们在代码中添加信息提供一种形式化的方法，我们可以在某个时刻非常方便的使用这些数据。将的通俗一点，就是为这个方法增加的说明或功能。例如：@Overvide这个注解就用来说明这个方式重写父类的。
    </p>
    <h5>
     JDK提供的注解
    </h5>
    <p>
     Java目前内置了三种注解@Override、@
     <span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">
      Deprecated、
      <span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">
       @SuppressWarnnings
      </span>
     </span>
    </p>
    <p>
    </p>
    <ul>
     <li>
      <span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;">
       @Override：用于标识方法，标识该方法属于重写父类的方法
      </span>
     </li>
    </ul>
    <pre><code class="language-java">@Target(ElementType.METHOD)
@Retention(RetentionPolicy.SOURCE)
public @interface Override {
}</code></pre>
    <ul>
     <li>
      <span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;">
       @
       <span style="background-color:rgb(255,255,255);">
        Deprecated：用于标识方法或类，标识该类或方法已过时，建议不要使用
       </span>
      </span>
     </li>
    </ul>
    <pre><code class="language-java">@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(value={CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE})
public @interface Deprecated {
}</code></pre>
    <ul>
     <li>
      <span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">
       @SuppressWarnnings:用于有选择的关闭编译器对类、方法、成员变量、变量初始化的警告
      </span>
      <br/>
     </li>
    </ul>
    <span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;">
    </span>
    <pre><code class="language-java">@Target({TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE})
@Retention(RetentionPolicy.SOURCE)
public @interface SuppressWarnings {
    String[] value();
}</code></pre>
    <h5>
     <span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;">
      元注解
     </span>
    </h5>
    <p>
     Java提供了四种元注解，即修饰注解的注解。观察上面源码可以发现三种，即：@Target、@Retention、@Document、@Inherited。主要作用如下：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ffcc57bf71c9231ce5dc99470ffde83e.png">
      <br/>
     </img>
    </p>
    <h4>
     如何自定义注解
    </h4>
    <p>
     使用@interface定义注解，会自动继承java.lang.
     <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
      annotation.A
     </span>
     <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
      nnotation接口，类似于类自动继承Object一样。注解中的每个方法表示一个配置参数，返回类型即是参数类型，可以通过default标识参数默认值。定义方式如下：
     </span>
    </p>
    <pre><code class="language-java">import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

@Target(ElementType.METHOD)
public @interface Test {

    String value() default "";
}</code></pre>
    <h6>
     注解中的参数类型
    </h6>
    <p>
     注解中的参数只支持如下类型：
    </p>
    <p>
    </p>
    <ul>
     <li>
      所有的基本类型：byte、short、char、int、long、float、double
     </li>
     <li>
      String类型
     </li>
     <li>
      Class类型
     </li>
     <li>
      enum类型
     </li>
     <li>
      Annotation类型
     </li>
     <li>
      以上类型的数组
     </li>
    </ul>
    <p>
     如果定义其他类型的参数编译器会报错。
    </p>
    <h6>
     使用注解的注意点
    </h6>
    <p>
    </p>
    <ul>
     <li>
      如果注解只有一个参数，最好取名value，这样在使用的时候可以直接指定属性值。例如：@Test("hello")
     </li>
     <li>
      只能使用public和默认权限修饰符修饰参数
     </li>
     <li>
      参数默认值：注解参数必须有确定的值。要么在定义的时候给默认值；要么在使用注解的时候指定参数值。
     </li>
    </ul>
    <h4>
     注解处理器
    </h4>
    <p>
     如果没有读取注解的方法，那么该注解就没有任何意义。使用注解的过程中，注解处理器是必不可少的，Java领反射机制，完成对注解的处理 。
    </p>
    <h6>
     注解处理器类库
    </h6>
    <p>
     Java通过反射机制获取类、方法、属性上的注解，因此java.lang.reflect提供AnnotationElement支持注解，主要方法如下：
    </p>
    <p>
    </p>
    <ul>
     <li>
      <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
       boolean is AnnotationPresent(Class&lt;?extends Annotation&gt; annotationClass)：判断该元素是否被annotationClass注解修饰
      </span>
      <br/>
     </li>
     <li>
      <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
       <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
        &lt;T extends Annotation&gt; T getAnnotation(Class&lt;T&gt; annotationClass)：获取 该元素上annotationClass类型的注解，如果没有返回null
       </span>
       <br/>
      </span>
     </li>
     <li>
      <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
       <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
        <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
         Annotation[] getAnnotations()：返回该元素上所有的注解
        </span>
        <br/>
       </span>
      </span>
     </li>
     <li>
      <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
       <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
        <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
         <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
          &lt;T extends Annotation&gt; T[] getAnnotationsByType(
          <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
           Class&lt;T&gt; annotationClass
          </span>
          )：返回该元素上指定类型所有的注解
         </span>
         <br/>
        </span>
       </span>
      </span>
     </li>
     <li>
      <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
       <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
        <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
         <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
          Annotation[] getDeclaredAnnotations()：返回直接修饰该元素的所有注解
         </span>
         <br/>
        </span>
       </span>
      </span>
     </li>
     <li>
      <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
       <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
        <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
         <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
          <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
           <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
            &lt;T extends Annotation&gt; T[]
           </span>
           getDeclaredAnnotationsByType(
           <span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">
            Class&lt;T&gt; annotationClass
           </span>
           )：返回直接修饰该元素的所有注解
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
    </ul>
    <p>
     <span style="font-family:Verdana, Arial, Helvetica, sans-serif;color:#333333;">
      <span style="font-size:13.3333px;">
       以下是注解实例：
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:Verdana, Arial, Helvetica, sans-serif;color:#333333;">
      <span style="font-size:13.3333px;">
       定义注解：
      </span>
     </span>
    </p>
    <pre><code class="language-java">import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
public @interface Test {

    int max() default 0;

    int min() default 0;

    String description() default "";
}</code></pre>
    <p>
     注解使用：
    </p>
    <pre><code class="language-java">public class AnnoationTest {

    @Test(min = 6,max = 10,description = "用户名长度在6-10个字符之间")
    private String name;

    @Test(min = 6,max =10,description = "密码长度在6-10个字符之间")
    private String pasdword;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPasdword() {
        return pasdword;
    }

    public void setPasdword(String pasdword) {
        this.pasdword = pasdword;
    }
}</code></pre>
    <p>
     注解处理器以及测试主方法：
    </p>
    <pre><code class="language-java">import java.lang.reflect.Field;

public class TestUtil {

    public static void valid(Object obj) throws IllegalAccessException {
        Class&lt;?&gt; clazz = obj.getClass();
        Field[] fields = clazz.getDeclaredFields();
        for (Field field:fields){
            Test test = field.getAnnotation(Test.class);//获取属性上的@Test注解
            if(test != null){
                field.setAccessible(true);//设置属性可访问

                if("class java.lang.String".equals(field.getGenericType().toString())){//字符串类型的才判断长度
                    String value = (String)field.get(obj);
                    if(value != null &amp;&amp; ((value.length() &gt; test.max()) || value.length() &lt; test.min())){
                        System.out.println(test.description());
                    }
                }
            }
        }

    }

    public static void main(String[] args){
        AnnoationTest annotation = new AnnoationTest();
        annotation.setName("abcefg");
        annotation.setPasdword("1234567890");
        try {
            valid(annotation);
        } catch (IllegalAccessException e) {

            e.printStackTrace();
        }
    }
}</code></pre>
    <p>
     会根据用户设置属性长度检查属性值是否符合要求
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6865797269616e:2f61727469636c652f64657461696c732f3830373634373833" class_="artid" style="display:none">
 </p>
</div>


