---
layout: post
title: 5分钟入门用Java做人工智能_超简单_菜鸟快速上手
date: 2025-01-19 08:15:09 +0800
categories: ['开发语言']
tags: ['开发语言', '人工智能', 'Java']
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143197649
    alt: 5分钟入门用Java做人工智能_超简单_菜鸟快速上手
artid: 143197649
render_with_liquid: false
---
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     5分钟入门:用Java做人工智能_超简单_菜鸟快速上手
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div class="article-content-wrap" style="font-size: 16px;">
     <div class="artical-content-bak main-content editor-side-new">
      <div class="con editor-preview-side" id="result">
       <div class="editor-container container am-engine" id="container">
        <h3 id="h0">
         Spring AI的整体介绍
        </h3>
        <p class="ne-p">
         当前Java调用大模型做人工智能时，会面临缺乏优质AI应用框架的挑战。
        </p>
        <p class="ne-p">
         Spring作为资深的Java应用框架提供者，通过推出Spring AI来解决这一问题。它借鉴了langchain的核心理念，并结合了Java面向对象编程的特点，为开发者提供了统一且可灵活替换的接口。
        </p>
        <p class="ne-p">
         Spring AI的核心优势包括标准化不同AI供应商(如阿里云、OpenAI等)的接口实现，使得代码只需编写一次即可轻松切换不同的AI服务；
        </p>
        <p class="ne-p">
         同时，这个框架由专门团队维护，保证了稳定性和安全性，让Java开发者能够更高效地集成和利用大模型能力。
        </p>
        <h3 id="h1">
         Spring AI Alibaba 介绍 ：整合Qwen模型，确保内容安全与智能性的国内优秀选择
        </h3>
        <p class="ne-p">
         当大模型进入国内市场时，如何在确保内容安全可控的同时，还能保持模型的智能性以满足业务需求，成为了一个关键挑战。Spring AI Alibaba作为这一领域的优秀选择，不仅整合了Qwen(通义千问)系列模型及其阿里云的最佳实践，还提供了强大的内容安全保障。Qwen-2.5已在OpenCompass评选中被评为开源模型中的第一名，证明了其卓越性能。Spring AI Alibaba是一套基于Spring生态系统的AI框架本地化实现，它通过提供统一且标准化的接口来简化不同AI服务提供商之间的切换过程，极大降低了开发与迁移成本。开发者只需调整配置即可轻松更换底层AI实现，同时支持包括文本生成、图像创建在内的多种应用场景。此外，该框架兼容Flux流输出，并为开发者提供了Prompt模板等功能，使得构建高效且灵活的AI应用变得更加便捷。总之，Spring AI Alibaba凭借其全面的功能支持和良好的抽象设计，在促进国内AI项目快速落地方面展现出了显著优势。
        </p>
        <h3 id="h2">
         使用SpringBoot集成Spring AI Alibaba构建对话模型及流返回接口
        </h3>
        <p class="ne-p">
         基于SpringBoot集成Spring AI Alibaba来完成一个简单的对话模型，并构建一个支持prompt的流返回接口，具体步骤如下：
        </p>
        <h4 id="h3">
         前提条件
        </h4>
        <ol class="ne-ol">
         <li>
          确保您的开发环境满足以下要求：
         </li>
        </ol>
        <ul>
         <li>
          JDK版本：JDK 17(含)以上。
         </li>
         <li>
          Spring Boot版本：3.3.x或更高。
         </li>
        </ul>
        <ol class="ne-ol" start="2">
         <li>
          在阿里云申请通义千问API-key。参考我了解的信息中的第1篇参考内容第3步进行操作。
         </li>
         <li>
          配置百炼 API KEY：
         </li>
        </ol>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-bash has-numbering" id="code_id_0"><span class="token builtin class-name">export</span> <span class="token assign-left variable">AI_DASHSCOPE_API_KEY</span><span class="token operator">=</span><span class="token variable">${REPLACE-WITH-VALID-API-KEY}</span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <h4 id="h4">
         添加仓库和依赖
        </h4>
        <ol class="ne-ol" start="4">
         <li>
          添加Spring仓库到您的
          <code>
           pom.xml
          </code>
          文件中，因为Spring AI的M1版本尚未提交到Maven中央仓库，所以需要手动添加这些仓库配置。这部分直接引用了我了解的信息中的代码示例：
         </li>
        </ol>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-xml has-numbering" id="code_id_1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>sonatype-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://oss.sonatype.org/content/repositories/snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-milestones<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Spring Milestones<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.spring.io/milestone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Spring Snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.spring.io/snapshot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
            <li>
             4.
            </li>
            <li>
             5.
            </li>
            <li>
             6.
            </li>
            <li>
             7.
            </li>
            <li>
             8.
            </li>
            <li>
             9.
            </li>
            <li>
             10.
            </li>
            <li>
             11.
            </li>
            <li>
             12.
            </li>
            <li>
             13.
            </li>
            <li>
             14.
            </li>
            <li>
             15.
            </li>
            <li>
             16.
            </li>
            <li>
             17.
            </li>
            <li>
             18.
            </li>
            <li>
             19.
            </li>
            <li>
             20.
            </li>
            <li>
             21.
            </li>
            <li>
             22.
            </li>
            <li>
             23.
            </li>
            <li>
             24.
            </li>
            <li>
             25.
            </li>
            <li>
             26.
            </li>
            <li>
             27.
            </li>
            <li>
             28.
            </li>
            <li>
             29.
            </li>
            <li>
             30.
            </li>
            <li>
             31.
            </li>
            <li>
             32.
            </li>
            <li>
             33.
            </li>
            <li>
             34.
            </li>
            <li>
             35.
            </li>
            <li>
             36.
            </li>
            <li>
             37.
            </li>
            <li>
             38.
            </li>
            <li>
             39.
            </li>
            <li>
             40.
            </li>
            <li>
             41.
            </li>
            <li>
             42.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <ol class="ne-ol" start="5">
         <li>
          在
          <code>
           pom.xml
          </code>
          中添加
          <code>
           spring-ai-alibaba-starter
          </code>
          依赖以及设置Spring Boot父项目依赖。确保使用与您Spring Boot版本相匹配的版本号。
         </li>
        </ol>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-xml has-numbering" id="code_id_2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.3.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud.ai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-ai-alibaba-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.0-M2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

  ...其他依赖...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
            <li>
             4.
            </li>
            <li>
             5.
            </li>
            <li>
             6.
            </li>
            <li>
             7.
            </li>
            <li>
             8.
            </li>
            <li>
             9.
            </li>
            <li>
             10.
            </li>
            <li>
             11.
            </li>
            <li>
             12.
            </li>
            <li>
             13.
            </li>
            <li>
             14.
            </li>
            <li>
             15.
            </li>
            <li>
             16.
            </li>
            <li>
             17.
            </li>
            <li>
             18.
            </li>
            <li>
             19.
            </li>
            <li>
             20.
            </li>
            <li>
             21.
            </li>
            <li>
             22.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <h4 id="h5">
         创建Controller类并注入ChatClient
        </h4>
        <ol class="ne-ol" start="6">
         <li>
          创建一个新的Controller类
          <code>
           ChatController
          </code>
          ，在其中注入
          <code>
           ChatClient
          </code>
          实例。这里还实现了跨域支持(CORS)，并通过
          <code>
           @GetMapping
          </code>
          注解定义了一个名为
          <code>
           /ai/steamChat
          </code>
          的GET接口，该接口接受
          <code>
           input
          </code>
          参数作为用户输入，并返回
          <code>
           Flux&lt;String&gt;
          </code>
          类型的响应数据流。以下是完整的代码实现：
         </li>
        </ol>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-java has-numbering" id="code_id_3"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/ai"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@CrossOrigin</span><span class="token punctuation">(</span>origins <span class="token operator">=</span> <span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token comment">// 开启跨域访问</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatController</span> <span class="token punctuation">{<!-- --></span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ChatClient</span> chatClient<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"classpath:correct-and-expand.st"</span><span class="token punctuation">)</span>
  <span class="token class-name">Resource</span> resource<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">ChatController</span><span class="token punctuation">(</span><span class="token class-name">ChatClient<span class="token punctuation">.</span>Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>chatClient <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/steamChat"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">steamChat</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> input<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">PromptTemplate</span> promptTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PromptTemplate</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Prompt</span> prompt <span class="token operator">=</span> promptTemplate<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> chatClient<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
            <li>
             4.
            </li>
            <li>
             5.
            </li>
            <li>
             6.
            </li>
            <li>
             7.
            </li>
            <li>
             8.
            </li>
            <li>
             9.
            </li>
            <li>
             10.
            </li>
            <li>
             11.
            </li>
            <li>
             12.
            </li>
            <li>
             13.
            </li>
            <li>
             14.
            </li>
            <li>
             15.
            </li>
            <li>
             16.
            </li>
            <li>
             17.
            </li>
            <li>
             18.
            </li>
            <li>
             19.
            </li>
            <li>
             20.
            </li>
            <li>
             21.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <h4 id="h6">
         应用属性配置
        </h4>
        <ol class="ne-ol" start="7">
         <li>
          在
          <code>
           application.properties
          </code>
          或
          <code>
           application.yml
          </code>
          中设置之前获得的通义千问API key:
         </li>
        </ol>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-properties has-numbering" id="code_id_4"><span class="token key attr-name">spring.ai.dashscope.api-key</span><span class="token punctuation">=</span><span class="token value attr-value">${AI_DASHSCOPE_API_KEY}</span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <p class="ne-p">
         通过上述步骤，您已经成功地创建了一个基于Spring Boot的应用程序，它集成了Spring AI Alibaba，并提供了一个能够接收用户输入、生成响应文本并以流的形式返回结果的服务。此服务位于
         <code>
          http://localhost:8080/ai/steamChat?input=...
         </code>
         路径下，并且支持跨域请求。当用户通过这个URL发送带有
         <code>
          input
         </code>
         参数的GET请求时，系统将调用阿里云通义大模型处理该请求，并即时输出处理结果给客户端。
        </p>
        <h3 id="h7">
         构建前端应用
        </h3>
        <p class="ne-p">
         我们可以基于React创建一个简单的前端应用来支持流式数据输出。该应用将通过与后端的交互(使用
         <code>
          http://localhost:8080/ai/steamChat?input=…
         </code>
         作为请求地址)，接收并显示以流形式返回的数据。下面是详细的构建步骤及所需代码。
        </p>
        <h4 id="h8">
         创建新项目
        </h4>
        <p class="ne-p">
         首先，你需要在本地机器上设置一个新的React应用程序，并安装必要的依赖包。这可以通过运行以下命令完成：
        </p>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-plain has-numbering" id="code_id_5">npx create-react-app frontend
cd frontend
npm install</code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <p class="ne-p">
         这些命令会生成一个新的名为
         <code>
          frontend
         </code>
         的React项目，并自动安装所有必需的基础依赖。
        </p>
        <h4 id="h9">
         修改基本文件结构
        </h4>
        <p class="ne-p">
         接下来，我们将调整一些基础文件的内容以适应我们的需求。主要涉及修改
         <code>
          public/index.html
         </code>
         、
         <code>
          src/index.js
         </code>
         以及新增组件
         <code>
          ChatComponent
         </code>
         用于处理聊天功能。
        </p>
        <h5 id="h10">
         <code>
          public/index.html
         </code>
        </h5>
        <p class="ne-p">
         确保你的HTML文档头部包含正确的字符集声明和视口配置，以保证最佳的跨设备兼容性。这部分内容应该类似于：
        </p>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-html has-numbering" id="code_id_6"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Stream Chat App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
            <li>
             4.
            </li>
            <li>
             5.
            </li>
            <li>
             6.
            </li>
            <li>
             7.
            </li>
            <li>
             8.
            </li>
            <li>
             9.
            </li>
            <li>
             10.
            </li>
            <li>
             11.
            </li>
            <li>
             12.
            </li>
            <li>
             13.
            </li>
            <li>
             14.
            </li>
            <li>
             15.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <h5 id="h11">
         <code>
          src/index.js
         </code>
        </h5>
        <p class="ne-p">
         保持默认的入口点配置不变，这样React就可以正确地渲染我们的根组件
         <code>
          App
         </code>
         了：
        </p>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-javascript has-numbering" id="code_id_7"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
            <li>
             4.
            </li>
            <li>
             5.
            </li>
            <li>
             6.
            </li>
            <li>
             7.
            </li>
            <li>
             8.
            </li>
            <li>
             9.
            </li>
            <li>
             10.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <h5 id="h12">
         <code>
          src/App.js
         </code>
        </h5>
        <p class="ne-p">
         定义
         <code>
          App
         </code>
         组件为一个简单的容器，它将包含我们即将实现的聊天组件
         <code>
          ChatComponent
         </code>
         ：
        </p>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-javascript has-numbering" id="code_id_8"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ChatComponent <span class="token keyword">from</span> <span class="token string">'./components/ChatComponent'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ChatComponent <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
            <li>
             4.
            </li>
            <li>
             5.
            </li>
            <li>
             6.
            </li>
            <li>
             7.
            </li>
            <li>
             8.
            </li>
            <li>
             9.
            </li>
            <li>
             10.
            </li>
            <li>
             11.
            </li>
            <li>
             12.
            </li>
            <li>
             13.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <h4 id="h13">
         实现聊天组件
        </h4>
        <p class="ne-p">
         最后，我们需要开发核心的聊天组件
         <code>
          ChatComponent
         </code>
         ，它负责用户输入处理、消息发送至服务器以及从服务器接收流式响应并在界面上展示。
        </p>
        <h5 id="h14">
         <code>
          src/components/ChatComponent.js
         </code>
        </h5>
        <p class="ne-p">
         这个组件利用了React的状态管理机制来跟踪用户输入的消息和接收到的服务端响应。它还包含了向指定URL发起GET请求的功能，并实时更新界面显示最新的信息片段。
        </p>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-jsx has-numbering" id="code_id_9"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">ChatComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>input<span class="token punctuation">,</span> setInput<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>messages<span class="token punctuation">,</span> setMessages<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleInputChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setInput</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleSendMessage</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:8080/ai/steamChat?input=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>input<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> reader <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> decoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>done<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value<span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> readerDone <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        done <span class="token operator">=</span> readerDone<span class="token punctuation">;</span>
        <span class="token keyword">const</span> chunk <span class="token operator">=</span> decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">stream</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setMessages</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">preMessages</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> preMessages <span class="token operator">+</span> chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 在每次请求完成后添加换行符</span>
      <span class="token function">setMessages</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">preMessages</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> preMessages <span class="token operator">+</span> <span class="token string">'\n\n=============================\n\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Failed to fetch'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleClearMessages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setMessages</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{<!-- --></span>input<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{<!-- --></span>handleInputChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Enter your message<span class="token punctuation">"</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{<!-- --></span>handleSendMessage<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Send</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{<!-- --></span>handleClearMessages<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Clear</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Messages:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>messages<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ChatComponent<span class="token punctuation">;</span></code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
            <li>
             2.
            </li>
            <li>
             3.
            </li>
            <li>
             4.
            </li>
            <li>
             5.
            </li>
            <li>
             6.
            </li>
            <li>
             7.
            </li>
            <li>
             8.
            </li>
            <li>
             9.
            </li>
            <li>
             10.
            </li>
            <li>
             11.
            </li>
            <li>
             12.
            </li>
            <li>
             13.
            </li>
            <li>
             14.
            </li>
            <li>
             15.
            </li>
            <li>
             16.
            </li>
            <li>
             17.
            </li>
            <li>
             18.
            </li>
            <li>
             19.
            </li>
            <li>
             20.
            </li>
            <li>
             21.
            </li>
            <li>
             22.
            </li>
            <li>
             23.
            </li>
            <li>
             24.
            </li>
            <li>
             25.
            </li>
            <li>
             26.
            </li>
            <li>
             27.
            </li>
            <li>
             28.
            </li>
            <li>
             29.
            </li>
            <li>
             30.
            </li>
            <li>
             31.
            </li>
            <li>
             32.
            </li>
            <li>
             33.
            </li>
            <li>
             34.
            </li>
            <li>
             35.
            </li>
            <li>
             36.
            </li>
            <li>
             37.
            </li>
            <li>
             38.
            </li>
            <li>
             39.
            </li>
            <li>
             40.
            </li>
            <li>
             41.
            </li>
            <li>
             42.
            </li>
            <li>
             43.
            </li>
            <li>
             44.
            </li>
            <li>
             45.
            </li>
            <li>
             46.
            </li>
            <li>
             47.
            </li>
            <li>
             48.
            </li>
            <li>
             49.
            </li>
            <li>
             50.
            </li>
            <li>
             51.
            </li>
            <li>
             52.
            </li>
            <li>
             53.
            </li>
            <li>
             54.
            </li>
            <li>
             55.
            </li>
            <li>
             56.
            </li>
            <li>
             57.
            </li>
            <li>
             58.
            </li>
            <li>
             59.
            </li>
            <li>
             60.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <h4 id="h15">
         启动应用
        </h4>
        <p class="ne-p">
         一旦上述设置全部完成，你可以通过执行如下命令启动开发服务器，从而在浏览器中查看你的应用程序：
        </p>
        <div>
         <div class="code-toolbar">
          <div class="hljs-cto">
           <div class="operation_box">
            <button class="copy_btn disable">
             登录后复制
            </button>
            <a class="downloadCode" title="登录后一键下载全文代码">
             <i class="iconblog blogimport">
             </i>
            </a>
           </div>
           <pre class="has" tabindex="0"><code class="language-bash has-numbering" id="code_id_10"><span class="token function">npm</span> start</code></pre>
           <ul class="pre-numbering">
            <li>
             1.
            </li>
           </ul>
          </div>
         </div>
        </div>
        <p class="ne-p">
         以上步骤描述了一个完整的流程，从初始化React项目到最终实现能够与提供流式数据服务端通信的应用程序。注意，在实际部署时，请确保后端服务已经启动并且允许来自前端应用的CORS请求。
        </p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </article>
</div>


