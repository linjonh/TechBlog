---
layout: post
title: "Javaparse包的使用和讲解"
date: 2024-10-11 07:46:57 +0800
description: "本文介绍了JavaParser，一个开源的Java源代码解析库，"
keywords: "javaparse"
categories: ['未分类']
tags: ['经验分享', '开发语言', 'Ee']
artid: "137527874"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=137527874
    alt: "Javaparse包的使用和讲解"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Javaparse包的使用和讲解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="JavaParser__Java__Java_ASTJavaParser__API_Java_APIJavajavajavaxtoolsAST_0">
     </a>
     JavaParser 是一个开源的 Java 源代码解析器和操作库，它能够解析 Java 源代码并构建对应的抽象语法树（AST）。JavaParser 提供了一组 API，使得开发者可以轻松地分析、修改和生成 Java 源代码。据此，你可以通过这些API来实现Java动态编译，原生的java库有javax.tools,但可惜不能支持对于AST的修改
    </h2>
    <p>
     著名的java效率包lombok的底层实现原理就是基于对java的AST的修改。
    </p>
    <h3>
     <a id="javapraser_4">
     </a>
     如何下载javapraser
    </h3>
    <p>
     (1) Maven下载，下文附上依赖坐标
    </p>
    <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.github.javaparser&lt;/groupId&gt;
    &lt;artifactId&gt;javaparser-core&lt;/artifactId&gt;
    &lt;version&gt;最新版本号&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
    <p>
     （2）Gradle下载
    </p>
    <pre><code>implementation 'com.github.javaparser:javaparser-core:最新版本号'
</code></pre>
    <p>
     （3）源地址下载：github
     <br/>
     <a href="https://github.com/javaparser/javaparser/releases">
      直接下载jar包
     </a>
    </p>
    <p>
     ##在最新的3.25.10版的API中，使用了大量的函数式编程。
    </p>
    <h2>
     <a id="JavaParserparseParseResultT_25">
     </a>
     JavaParser类是源代码的解析器，可以通过使用其实例的parse()方法解析源代码或字符串得到一个解析结果ParseResult
    </h2>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 <span class="token class-name">ParserConfiguration</span> parserConfiguration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ParserConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JavaParser</span> javaParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaParser</span><span class="token punctuation">(</span>parserConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token string">"public class HelloWorld {\n"</span> <span class="token operator">+</span>
                      <span class="token string">"    public static void main(String[] args) {\n"</span> <span class="token operator">+</span>
                      <span class="token string">"        System.out.println(\"Hello, JavaParser!\");\n"</span> <span class="token operator">+</span>
                      <span class="token string">"    }\n"</span> <span class="token operator">+</span>
                      <span class="token string">"}"</span><span class="token punctuation">;</span>

        <span class="token comment">// 解析代码</span>
        <span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CompilationUnit</span><span class="token punctuation">&gt;</span></span> compilationUnit <span class="token operator">=</span> javaParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token punctuation">}</span>
</code></pre>
    <p>
     Javaparser有两种构造方法
     <br/>
     无参构造 JavaParser()
     <br/>
     有参构造 Java Parser(ParserConfiguration)
     <br/>
     ParserConfiguration用于配置一些选项
     <br/>
     <code>
      ParserConfiguration
     </code>
     类提供了一系列方法用于设置解析器的配置选项。以下是所有可用的设置方法：
    </p>
    <ol>
     <li>
      <code>
       setLanguageLevel(LanguageLevel level)
      </code>
      : 设置解析器使用的语言级别。
     </li>
     <li>
      <code>
       setAttributeComments(boolean attributeComments)
      </code>
      : 设置是否解析属性的注释。
     </li>
     <li>
      <code>
       setLexicalPreservationEnabled(boolean lexicalPreservationEnabled)
      </code>
      : 设置是否启用词法保留。
     </li>
     <li>
      <code>
       setTabSize(int tabSize)
      </code>
      : 设置解析器使用的制表符大小。
     </li>
     <li>
      <code>
       setColumnStart(int columnStart)
      </code>
      : 设置解析器的起始列。
     </li>
     <li>
      <code>
       setColumnEnd(int columnEnd)
      </code>
      : 设置解析器的结束列。
     </li>
     <li>
      <code>
       setTabulationSize(int tabulationSize)
      </code>
      : 设置解析器的制表符大小。
     </li>
     <li>
      <code>
       setPreprocessUnicodeEscapes(boolean preprocessUnicodeEscapes)
      </code>
      : 设置是否预处理 Unicode 转义字符。
     </li>
     <li>
      <code>
       setAutoCloseEnabled(boolean autoCloseEnabled)
      </code>
      : 设置是否启用自动关闭功能。
     </li>
     <li>
      <code>
       setAutomaticImports(boolean automaticImports)
      </code>
      : 设置是否自动导入。
     </li>
     <li>
      <code>
       setLexicalPreservationEnabled(boolean lexicalPreservationEnabled)
      </code>
      : 设置是否启用词法保留。
     </li>
    </ol>
    <p>
     <code>
      ParserConfiguration
     </code>
     类中提供了一些获取配置选项的方法，你可以使用这些方法来获取当前配置的信息。以下是所有可用的获取方法：
    </p>
    <ol>
     <li>
      <code>
       getLanguageLevel()
      </code>
      : 获取解析器使用的语言级别。
     </li>
     <li>
      <code>
       isAttributeComments()
      </code>
      : 获取是否解析属性的注释。
     </li>
     <li>
      <code>
       isLexicalPreservationEnabled()
      </code>
      : 获取是否启用词法保留。
     </li>
     <li>
      <code>
       getTabSize()
      </code>
      : 获取解析器使用的制表符大小。
     </li>
     <li>
      <code>
       getColumnStart()
      </code>
      : 获取解析器的起始列。
     </li>
     <li>
      <code>
       getColumnEnd()
      </code>
      : 获取解析器的结束列。
     </li>
     <li>
      <code>
       getTabulationSize()
      </code>
      : 获取解析器的制表符大小。
     </li>
     <li>
      <code>
       isPreprocessUnicodeEscapes()
      </code>
      : 获取是否预处理 Unicode 转义字符。
     </li>
     <li>
      <code>
       isAutoCloseEnabled()
      </code>
      : 获取是否启用自动关闭功能。
     </li>
     <li>
      <code>
       isAutomaticImports()
      </code>
      : 获取是否自动导入。
     </li>
     <li>
      <code>
       isLexicalPreservationEnabled()
      </code>
      : 获取是否启用词法保留。
     </li>
    </ol>
    <p>
     你可以使用这些方法来获取当前配置的信息，并根据需要进行进一步处理。
    </p>
    <p>
     在此有几个概念的辨析:
     <br/>
     语言级别
     <br/>
     指的是解析器使用的编程语言的版本或规范。在 JavaParser 中，语言级别可以设置为不同的 Java 版本，例如 Java 8、Java 11 等。这决定了解析器在解析代码时会考虑哪些语言特性和语法规则。
    </p>
    <p>
     词法保留（Lexical Preservation）
     <br/>
     指的是在解析代码时保留代码的原始格式和排版。启用词法保留功能后，解析器将尽可能地保留代码中的空格、缩进、换行符等词法结构，以保持代码的视觉布局和格式不变。这对于需要保留代码原始格式的应用场景非常有用，例如代码转换、代码生成、代码格式化等。
    </p>
    <p>
     制表符大小（Tab Size）
     <br/>
     是指在解析器中使用的制表符的宽度。制表符是一种特殊字符，通常用于在代码中表示缩进。制表符大小表示一个制表符字符在文本中所占的空格数目。例如，如果制表符大小为 4，则一个制表符字符在文本中将会被替换为四个空格字符。这有助于在不同的编辑器和环境中保持代码的一致缩进样式。
    </p>
    <h3>
     <a id="AutoclosingAutoimport_88">
     </a>
     标题自动关闭（Auto-closing）和自动导入（Auto-import）是在编程环境中常见的功能。
    </h3>
    <ol>
     <li>
      <p>
       <strong>
        自动关闭
       </strong>
       ：指的是编辑器或IDE（集成开发环境）在输入代码时自动补全相应的闭合符号，例如括号、引号、标签等。这样可以减少编码过程中的疏忽或错误，提高编码效率和代码质量。例如，当你输入左括号时，编辑器会自动添加右括号，并将光标放置在括号中间，方便你输入括号内的内容。
      </p>
     </li>
     <li>
      <p>
       <strong>
        自动导入
       </strong>
       ：指的是编辑器或IDE根据你的代码内容自动引入所需的外部模块、库或类。当你在代码中使用了未导入的模块或类时，编辑器会自动检测并提供导入建议，你可以通过快捷键或点击建议来自动导入所需的内容。这样可以减少手动导入的工作量，并确保代码的正确性和一致性。
      </p>
     </li>
    </ol>
    <h3>
     <a id="parse_parse_94">
     </a>
     parse()方法有多个参数不同的重载，支持文件流，字符串的解析 ，同时也有对单个语句进行解析的方法parse
    </h3>
    <p>
     在 JavaParser 中，解析 Java 代码有多种方法，取决于您想要解析的代码的类型和结构。以下是一些常用的解析方法：
    </p>
    <ol>
     <li>
      <strong>
       解析整个 Java 文件（Compilation Unit）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CompilationUnit</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="2">
     <li>
      <strong>
       解析代码块（Block）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BlockStmt</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseBlock</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="3">
     <li>
      <strong>
       解析表达式（Expression）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Expression</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseExpression</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="4">
     <li>
      <strong>
       解析语句（Statement）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Statement</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseStatement</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="5">
     <li>
      <strong>
       解析类型（Type）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Type</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="6">
     <li>
      <strong>
       解析注解（Annotation）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AnnotationExpr</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseAnnotation</span><span class="token punctuation">(</span>annotation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="7">
     <li>
      <strong>
       解析名称（Name）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Name</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="8">
     <li>
      <strong>
       解析 import 语句
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ImportDeclaration</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseImport</span><span class="token punctuation">(</span>importDeclaration<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ol start="9">
     <li>
      <strong>
       解析注释（Comment）
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parseComment</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     以上代码中的
     <code>
      file
     </code>
     、
     <code>
      code
     </code>
     、
     <code>
      expression
     </code>
     、
     <code>
      statement
     </code>
     、
     <code>
      type
     </code>
     、
     <code>
      annotation
     </code>
     、
     <code>
      name
     </code>
     、
     <code>
      importDeclaration
     </code>
     、
     <code>
      comment
     </code>
     分别是您要解析的 Java 文件、代码片段、表达式、语句、类型、注解、名称、import 语句、注释。
    </p>
    <p>
     您可以根据需要选择适合您情况的解析方法。
    </p>
    <h3>
     <a id="_staticJavaParser_146">
     </a>
     除此之外 你还可以通过staticJavaParser这个类的静态方法直接调用这些函数
    </h3>
    <h2>
     <a id="_ParesResultT__148">
     </a>
     结果类 ParesResult 类
    </h2>
    <p>
     <code>
      ParseResult&lt;T&gt;
     </code>
     是 JavaParser 中的一个泛型类，用于表示解析操作的结果。它通常包含两个主要部分：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        解析成功与否的状态信息
       </strong>
       ：通过
       <code>
        isSuccessful()
       </code>
       方法可以获取解析是否成功的布尔值。如果解析成功，则可以通过
       <code>
        getResult()
       </code>
       方法获取解析得到的对象；如果解析失败，则可以通过
       <code>
        getProblems()
       </code>
       方法获取解析过程中遇到的问题列表。
      </p>
     </li>
     <li>
      <p>
       <strong>
        解析得到的对象
       </strong>
       ：泛型类型
       <code>
        T
       </code>
       表示解析得到的对象的类型。根据解析操作的不同，可以得到不同类型的对象，例如
       <code>
        CompilationUnit
       </code>
       、
       <code>
        BlockStmt
       </code>
       、
       <code>
        Expression
       </code>
       等。
      </p>
     </li>
    </ol>
    <p>
     通常，您可以按照以下方式使用
     <code>
      ParseResult&lt;T&gt;
     </code>
     ：
    </p>
    <pre><code class="prism language-java"><span class="token class-name">ParseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token comment">// 执行解析操作，获取解析结果</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">isSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 解析成功</span>
    <span class="token class-name">T</span> parsedObject <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 对解析得到的对象进行操作</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 解析失败</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Problem</span><span class="token punctuation">&gt;</span></span> problems <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getProblems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 处理解析过程中遇到的问题</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在这个例子中，根据
     <code>
      isSuccessful()
     </code>
     方法的返回值来判断解析操作是否成功，如果成功，则通过
     <code>
      getResult()
     </code>
     方法获取解析得到的对象进行后续操作，如果失败，则通过
     <code>
      getProblems()
     </code>
     方法获取解析过程中遇到的问题列表进行处理。
    </p>
    <h2>
     <a id="Node_173">
     </a>
     节点类Node
    </h2>
    <p>
     在 JavaParser 中，节点类用于表示 Java 源代码中的各种结构，如表达式、语句、类型、注解等。这些节点类都位于
     <code>
      com.github.javaparser.ast
     </code>
     包中。以下是 JavaParser 中常见的节点类：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        CompilationUnit（编译单元）
       </strong>
       ：表示整个 Java 源文件的抽象语法树。它是 AST 的根节点。
      </p>
     </li>
     <li>
      <p>
       <strong>
        PackageDeclaration（包声明）
       </strong>
       ：表示 Java 源文件中的包声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        ImportDeclaration（导入声明）
       </strong>
       ：表示 Java 源文件中的导入声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        ClassOrInterfaceDeclaration（类或接口声明）
       </strong>
       ：表示类或接口的声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        FieldDeclaration（字段声明）
       </strong>
       ：表示类或接口中的字段声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        MethodDeclaration（方法声明）
       </strong>
       ：表示类或接口中的方法声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        ConstructorDeclaration（构造函数声明）
       </strong>
       ：表示类的构造函数声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        EnumDeclaration（枚举声明）
       </strong>
       ：表示枚举类型的声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        EnumConstantDeclaration（枚举常量声明）
       </strong>
       ：表示枚举类型中的常量声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        AnnotationDeclaration（注解声明）
       </strong>
       ：表示注解类型的声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        AnnotationMemberDeclaration（注解成员声明）
       </strong>
       ：表示注解类型中的成员声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Parameter（参数）
       </strong>
       ：表示方法或构造函数的参数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        VariableDeclarator（变量声明符）
       </strong>
       ：表示变量的声明符号。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Expression（表达式）
       </strong>
       ：表示 Java 中的各种表达式，如赋值表达式、方法调用、算术表达式等。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Statement（语句）
       </strong>
       ：表示 Java 中的各种语句，如 if 语句、for 循环、while 循环等。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Type（类型）
       </strong>
       ：表示 Java 中的各种类型，如基本类型、类类型、数组类型等。
      </p>
     </li>
     <li>
      <p>
       <strong>
        AnnotationExpr（注解表达式）
       </strong>
       ：表示 Java 中的注解。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Name（名称）
       </strong>
       ：表示 Java 中的标识符名称。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Comment（注释）
       </strong>
       ：表示 Java 源代码中的注释。
      </p>
     </li>
    </ol>
    <p>
     这些节点类构成了 JavaParser 中的 AST（抽象语法树），可以通过解析 Java 源代码得到相应的节点对象，并通过这些节点对象进行语法分析、代码生成等操作。
    </p>
    <h3>
     <a id="NodeNodeList_215">
     </a>
     他们都继承了Node这个类，除此之外，你可以通过操纵NodeList这个容器类来实现遍历的操作
    </h3>
    <p>
     这些节点类在 JavaParser 中都有一些常用的方法，用于获取节点的属性、进行节点的遍历和修改等操作。以下是这些节点类常用的方法：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        获取节点的名称、类型等属性
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         getName()
        </code>
        : 获取节点的名称。
       </li>
       <li>
        <code>
         getType()
        </code>
        : 获取节点的类型。
       </li>
       <li>
        其他类似的获取属性的方法，根据节点类型的不同而有所不同。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        获取节点的子节点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         getChildNodes()
        </code>
        : 获取节点的所有子节点。
       </li>
       <li>
        根据节点的类型，可能会有特定的方法来获取特定类型的子节点。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        遍历节点的属性
       </strong>
       ：
      </p>
      <ul>
       <li>
        根据节点的类型和属性的不同，通常会有一些遍历属性的方法，例如获取方法的参数列表、获取字段的类型等。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        修改节点的属性
       </strong>
       ：
      </p>
      <ul>
       <li>
        根据节点的类型和属性的不同，通常会有一些设置属性的方法，例如设置方法的参数列表、设置字段的类型等。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        判断节点类型
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         isMethodDeclaration()
        </code>
        : 判断节点是否是方法声明。
       </li>
       <li>
        <code>
         isFieldDeclaration()
        </code>
        : 判断节点是否是字段声明。
       </li>
       <li>
        <code>
         isExpressionStmt()
        </code>
        : 判断节点是否是表达式语句。
       </li>
       <li>
        其他类似的判断节点类型的方法，根据节点类型的不同而有所不同。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        节点的位置信息
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         getBegin()
        </code>
        和
        <code>
         getEnd()
        </code>
        : 获取节点在源代码中的起始位置和结束位置。
       </li>
       <li>
        <code>
         getRange()
        </code>
        : 获取节点在源代码中的范围。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        节点的文本表示
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         toString()
        </code>
        : 获取节点的文本表示。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        节点的克隆和复制
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         clone()
        </code>
        : 克隆节点，生成一个与原节点相同的新节点。
       </li>
       <li>
        <code>
         cloneForImport()
        </code>
        等特定的克隆方法，用于在导入节点时进行克隆。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        其他操作
       </strong>
       ：
      </p>
      <ul>
       <li>
        根据节点类型的不同，可能会有其他特定的方法用于特定操作，如获取方法的异常列表、获取注解的成员列表等。
       </li>
      </ul>
     </li>
    </ol>
    <p>
     这些方法可以帮助您对节点进行各种操作，包括遍历、修改、分析等。具体使用哪些方法取决于您的需求和对节点的操作目的。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span></span><span class="token class-name">StaticJavaParser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span></span><span class="token class-name">CompilationUnit</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">ClassOrInterfaceDeclaration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">FieldDeclaration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">MethodDeclaration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">Parameter</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 解析Java源代码</span>
        <span class="token class-name">CompilationUnit</span> cu <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"public class MyClass {\n"</span> <span class="token operator">+</span>
                <span class="token string">"    private int myField;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\n"</span> <span class="token operator">+</span>
                <span class="token string">"    public void myMethod(int parameter) {\n"</span> <span class="token operator">+</span>
                <span class="token string">"        System.out.println(\"Hello, world!\");\n"</span> <span class="token operator">+</span>
                <span class="token string">"    }\n"</span> <span class="token operator">+</span>
                <span class="token string">"}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取类声明</span>
        <span class="token class-name">ClassOrInterfaceDeclaration</span> classDeclaration <span class="token operator">=</span> cu<span class="token punctuation">.</span><span class="token function">getClassByName</span><span class="token punctuation">(</span><span class="token string">"MyClass"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> classDeclaration<span class="token punctuation">.</span><span class="token function">getNameAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Class Name: "</span> <span class="token operator">+</span> className<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取字段声明</span>
        <span class="token class-name">FieldDeclaration</span> fieldDeclaration <span class="token operator">=</span> classDeclaration<span class="token punctuation">.</span><span class="token function">getFieldByName</span><span class="token punctuation">(</span><span class="token string">"myField"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> fieldName <span class="token operator">=</span> fieldDeclaration<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNameAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Field Name: "</span> <span class="token operator">+</span> fieldName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取方法声明</span>
        <span class="token class-name">MethodDeclaration</span> methodDeclaration <span class="token operator">=</span> classDeclaration<span class="token punctuation">.</span><span class="token function">getMethodsByName</span><span class="token punctuation">(</span><span class="token string">"myMethod"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> methodDeclaration<span class="token punctuation">.</span><span class="token function">getNameAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Method Name: "</span> <span class="token operator">+</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取方法参数</span>
        <span class="token class-name">Parameter</span> parameter <span class="token operator">=</span> methodDeclaration<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> parameterName <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">getNameAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Parameter Name: "</span> <span class="token operator">+</span> parameterName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="TypeTypeSolver_296">
     </a>
     Type和TypeSolver类
    </h3>
    <p>
     <code>
      TypeSolver
     </code>
     是 JavaParser 中用于解析和解决类型的重要类。它在 JavaParser 的类型处理过程中起着关键作用，特别是对于类类型的解析和解决。
    </p>
    <p>
     以下是关于
     <code>
      TypeSolver
     </code>
     类的主要信息：
    </p>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：
       <code>
        TypeSolver
       </code>
       主要用于帮助 JavaParser 解析代码中的类引用，找到类的定义并建立类之间的关系，以便在语法树中正确表示类的继承、实现等关系。
      </p>
     </li>
     <li>
      <p>
       <strong>
        类型解析
       </strong>
       ：通过配置适当的
       <code>
        TypeSolver
       </code>
       ，你可以确保 JavaParser 在解析代码时能够正确地处理类型信息，从而更准确地分析和理解代码。
      </p>
     </li>
     <li>
      <p>
       <strong>
        类引用解析
       </strong>
       ：
       <code>
        TypeSolver
       </code>
       可以解析代码中对类的引用，例如在方法参数、变量声明等处使用的类名，通过解析这些引用，JavaParser 可以找到对应的类定义。
      </p>
     </li>
     <li>
      <p>
       <strong>
        类关系建立
       </strong>
       ：除了解析类引用外，
       <code>
        TypeSolver
       </code>
       还能够建立类之间的关系，包括类的继承关系、实现接口关系等。这些关系对于理解代码的结构和行为非常重要。
      </p>
     </li>
    </ul>
    <p>
     总的来说，
     <code>
      TypeSolver
     </code>
     在 JavaParser 中扮演着重要的角色，通过解析和解决类型信息，帮助 JavaParser 更准确地理解和分析代码的结构和含义。
    </p>
    <h3>
     <a id="_312">
     </a>
     实例：
    </h3>
    <p>
     编译一个源文件，增加一个public void your(String str){System.out.println(str);}方法和删除源代码原本就有的一个字段，最后输出更改后的代码
    </p>
    <pre><code class="prism language-java"> <span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Consumer</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span></span><span class="token class-name">StaticJavaParser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span></span><span class="token class-name">CompilationUnit</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span></span><span class="token class-name">Modifier</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">ClassOrInterfaceDeclaration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">FieldDeclaration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">MethodDeclaration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>nodeTypes<span class="token punctuation">.</span></span><span class="token class-name">NodeWithSimpleName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>stmt<span class="token punctuation">.</span></span><span class="token class-name">BlockStmt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>stmt<span class="token punctuation">.</span></span><span class="token class-name">ExpressionStmt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>javaparser<span class="token punctuation">.</span>ast<span class="token punctuation">.</span>body<span class="token punctuation">.</span></span><span class="token class-name">Parameter</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 解析现有的源代码</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token string">"public class MyClass { "</span> <span class="token operator">+</span>
        				<span class="token string">"public String myfield;"</span><span class="token operator">+</span>
                      <span class="token string">"    public void existingMethod() { "</span> <span class="token operator">+</span>
                      <span class="token string">"        System.out.println(\"Existing method\"); "</span> <span class="token operator">+</span>
                      <span class="token string">"    } "</span> <span class="token operator">+</span>
                      <span class="token string">"}"</span><span class="token punctuation">;</span>
        
        <span class="token class-name">CompilationUnit</span> cu <span class="token operator">=</span> <span class="token class-name">StaticJavaParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 创建一个新的方法声明</span>
        <span class="token keyword">final</span> <span class="token class-name">MethodDeclaration</span> newMethod <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MethodDeclaration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 设置新方法的修饰符为 public</span>
        newMethod<span class="token punctuation">.</span><span class="token function">addModifier</span><span class="token punctuation">(</span><span class="token class-name">Modifier<span class="token punctuation">.</span>Keyword</span><span class="token punctuation">.</span><span class="token constant">PUBLIC</span><span class="token punctuation">,</span><span class="token class-name">Modifier<span class="token punctuation">.</span>Keyword</span><span class="token punctuation">.</span><span class="token constant">STATIC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 设置新方法的名称</span>
        newMethod<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"newMethod"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 添加参数</span>
        <span class="token class-name">Parameter</span> parameter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        parameter<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        parameter<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"arg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newMethod<span class="token punctuation">.</span><span class="token function">addParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
   
        
        <span class="token comment">// 将新方法添加到类中</span>
        cu<span class="token punctuation">.</span><span class="token function">getClassByName</span><span class="token punctuation">(</span><span class="token string">"MyClass"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ClassOrInterfaceDeclaration</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">ClassOrInterfaceDeclaration</span> classDeclaration<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                classDeclaration<span class="token punctuation">.</span><span class="token function">addMember</span><span class="token punctuation">(</span>newMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 移除字段</span>
        <span class="token comment">// 获取类声明</span>
        <span class="token class-name">ClassOrInterfaceDeclaration</span> classDeclaration <span class="token operator">=</span> cu<span class="token punctuation">.</span><span class="token function">getClassByName</span><span class="token punctuation">(</span><span class="token string">"MyClass"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 通过字段名称获取 FieldDeclaration</span>
        <span class="token class-name">FieldDeclaration</span> fieldDeclaration <span class="token operator">=</span> classDeclaration<span class="token punctuation">.</span><span class="token function">getFieldByName</span><span class="token punctuation">(</span><span class="token string">"myfield"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        fieldDeclaration<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 输出修改后的代码</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cu<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f787768787768786877776a782f:61727469636c652f64657461696c732f313337353237383734" class_="artid" style="display:none">
 </p>
</div>


