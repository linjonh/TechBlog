---
layout: post
title: "通过堡垒机跳板机实现文件在本地Mac与服务器之间的互传"
date: 2025-01-19 16:34:08 +0800
description: "1.堡垒机堡垒机，也可以成为跳板机。日常开发中，有时候需要连接远程服务器。为了安全性等方面考虑，连接"
keywords: "mac 通过堡垒机 文件传输运维工具"
categories: ['技术方案', '开发辅助']
tags: ['跳板机', '堡垒机', 'Ssh', 'Scp', 'Mac']
artid: "92793976"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=92793976
    alt: "通过堡垒机跳板机实现文件在本地Mac与服务器之间的互传"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     通过堡垒机/跳板机实现文件在本地Mac与服务器之间的互传
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1_1">
     </a>
     1.堡垒机
    </h3>
    <p>
     堡垒机，也可以成为跳板机。
    </p>
    <p>
     日常开发中，有时候需要连接远程服务器。为了安全性等方面考虑，连接远程服务器之前，需要先连接堡垒机。
    </p>
    <p>
     本地服务器、堡垒机和远程服务器之间的架构简单描述如下图：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/674bd65b0089076d207e992cec125a49.png"/>
    </p>
    <p>
     访问远程服务器的正常流程：
    </p>
    <ol>
     <li>
      通过ssh登录堡垒机。
     </li>
     <li>
      通过ssh登录远程服务器。
     </li>
    </ol>
    <h3>
     <a id="2_15">
     </a>
     2.环境
    </h3>
    <ul>
     <li>
      本地计算机：Mac OS 10.13.4，假定IP为
      <code>
       10.10.10.10
      </code>
     </li>
     <li>
      堡垒机：Linux version 3.10.0-514.2.2.el7.x86_64，假定IP为
      <code>
       20.20.20.20
      </code>
     </li>
     <li>
      远程服务器：Linux version 3.10.0-514.2.2.el7.x86_64，假定IP为
      <code>
       30.30.30.30
      </code>
     </li>
     <li>
      目标文件：假定文件名为
      <code>
       demo.jar
      </code>
     </li>
    </ul>
    <h3>
     <a id="3_22">
     </a>
     3.将本地文件拷贝至服务器
    </h3>
    <ol>
     <li>
      <p>
       将文件从本地拷贝至堡垒机
      </p>
      <pre><code class="prism language-shell"><span class="token comment"># scp {目标文件} {堡垒机用户名}@{堡垒机地址}:{堡垒机上放置文件的目录}</span>
<span class="token comment"># 需要输入密码</span>
hanchaodeMacBook-Pro:~ hanchao$ <span class="token function">scp</span> demo.jar hanchao@20.20.20.20:/home/hanchao/
hanchao@20.20.20.20's password:
demo.jar																																				100%   96KB   1.8MB/s   00:00
</code></pre>
     </li>
     <li>
      <p>
       登录堡垒机查看文件
      </p>
      <pre><code class="prism language-shell"><span class="token comment"># 登录堡垒机，需要输入密码</span>
hanchaodeMacBook-Pro:~ hanchao$ <span class="token function">ssh</span> 20.20.20.20
hanchao@20.20.20.20's password:

<span class="token comment"># 查看目标文件</span>
<span class="token punctuation">[</span>hanchao@20.20.20.20 ~<span class="token punctuation">]</span>$ <span class="token function">ls</span> /home/hanchao/demo.jar
/home/hanchao/demo.jar
</code></pre>
     </li>
     <li>
      <p>
       将文件从堡垒机拷贝至服务器
      </p>
      <pre><code class="prism language-shell">  <span class="token comment"># scp {目标文件} {服务器用户名}@{服务器地址}:{服务器上放置文件的目录}</span>
  <span class="token punctuation">[</span>hanchao@20.20.20.20 ~<span class="token punctuation">]</span>$ <span class="token function">scp</span> demo.jar hanchao@30.30.30.30:/home/hanchao/
  hanchao@0.30.30.30's password:
  demo.jar																																				100%   96KB   1.8MB/s   00:00
</code></pre>
     </li>
     <li>
      <p>
       登录服务器查看文件
      </p>
      <pre><code class="prism language-shell">  <span class="token comment"># 登录服务器，需要输入密码</span>
  hanchaodeMacBook-Pro:~ hanchao$ <span class="token function">ssh</span> 30.30.30.30
  hanchao@0.30.30.30's password:
  
  <span class="token comment"># 查看目标文件</span>
  <span class="token punctuation">[</span>hanchao@0.30.30.30 ~<span class="token punctuation">]</span>$ <span class="token function">ls</span> /home/hanchao/demo.jar
  /home/hanchao/demo.jar
</code></pre>
     </li>
    </ol>
    <h3>
     <a id="4_66">
     </a>
     4.从服务器下载文件至本地
    </h3>
    <ol>
     <li>
      <p>
       Mac OS设置共享权限
      </p>
      <p>
       偏好设置
       <code>
        --&gt;
       </code>
       共享
       <code>
        --&gt;
       </code>
       远程登录
       <code>
        --&gt;
       </code>
       添加用户，例如hanchao
       <code>
        --&gt;
       </code>
       保存退出。
      </p>
     </li>
     <li>
      <p>
       将文件从服务器下载至堡垒机
      </p>
      <pre><code class="prism language-shell">  <span class="token comment"># 登录堡垒机，需要输入密码</span>
  hanchaodeMacBook-Pro:~ hanchao$ <span class="token function">ssh</span> 20.20.20.20
  hanchao@20.20.20.20<span class="token string">'s password:
  
  # 登录服务器，需要输入密码
  [hanchao@20.20.20.20 ~]$ hanchao$ ssh 30.30.30.30
  hanchao@30.30.30.30'</span>s password:
  
  <span class="token comment"># scp {目标文件} {堡垒机用户名}@{堡垒机地址}:{堡垒机上放置文件的目录}</span>
  <span class="token comment"># 需要输入密码</span>
  <span class="token punctuation">[</span>hanchao@30.30.30.30 ~<span class="token punctuation">]</span>$ <span class="token function">scp</span> demo.jar hanchao@20.20.20.20:/home/hanchao/
  hanchao@20.20.20.20's password:
  demo.jar																																				100%   96KB   1.8MB/s   00:00
</code></pre>
     </li>
     <li>
      <p>
       将文件从堡垒机下载至本地
      </p>
      <pre><code class="prism language-shell">  <span class="token comment"># 退出服务器，返回堡垒机</span>
  <span class="token punctuation">[</span>hanchao@30.30.30.30 ~<span class="token punctuation">]</span>$ <span class="token keyword">exit</span>
  <span class="token punctuation">[</span>hanchao@20.20.20.20 ~<span class="token punctuation">]</span>$ 
  
  <span class="token comment"># scp {目标文件} {堡垒机用户名}@{堡垒机地址}:{堡垒机上放置文件的目录}</span>
  <span class="token comment"># 需要输入密码</span>
  <span class="token punctuation">[</span>hanchao@20.20.20.20 ~<span class="token punctuation">]</span>$ <span class="token function">scp</span> demo.jar hanchao@10.10.10.10:/home/hanchao/
  hanchao@10.10.10.10's password:
  demo.jar		
</code></pre>
     </li>
     <li>
      <p>
       在本地查看文件
      </p>
      <pre><code class="prism language-shell">  <span class="token comment"># 退出堡垒机，返回本地计算机</span>
  <span class="token punctuation">[</span>hanchao@20.20.20.20 ~<span class="token punctuation">]</span>$ <span class="token keyword">exit</span>
  hanchaodeMacBook-Pro:~ hanchao$ 
  
  <span class="token comment"># 查看目标文件</span>
  hanchaodeMacBook-Pro:~ hanchao$ <span class="token function">ls</span> /home/hanchao/demo.jar
  /home/hanchao/demo.jar
</code></pre>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f68616e6368616f35323732:2f61727469636c652f64657461696c732f3932373933393736" class_="artid" style="display:none">
 </p>
</div>


