---
layout: post
title: "2021-01-25大疆DJI的SDK说明"
date: 2025-01-14 14:00:08 +0800
description: "这是一个DJI SDK的概述。其中对Windows SDK 进行了详细的说明。官方的开发者网站为：h"
keywords: "大疆无人机二次开发提供了什么接口"
categories: ['']
tags: ['Github', 'C']
artid: "113104571"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=113104571
    alt: "2021-01-25大疆DJI的SDK说明"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     2021-01-25大疆DJI的SDK说明
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     这是用于二次开发的大疆SDK。官方开发者网站为https://developer.dji.com/cn/。源码为https://github.com/dji-sdk/Windows-SDK-Doc。 sdk下载地址为https://github.com/dji-sdk/Windows-SDK
    </p>
    <h3>
     <a id="1_Mobile_SDK_2">
     </a>
     1. Mobile SDK
    </h3>
    <p>
     <strong>
      支持平台
     </strong>
     ：IOS 9.0+ 安卓5.0.0＋
    </p>
    <p>
     <strong>
      具备功能如下所示
     </strong>
     ：
    </p>
    <ul>
     <li>
      上层以及底层的控制
     </li>
     <li>
      飞行数据实时回传
     </li>
     <li>
      自主避障（只适用于有此功能的无人机）
     </li>
     <li>
      相机和云台的全方位实时控制
     </li>
     <li>
      获得大疆图传系统传回的高清影像
     </li>
     <li>
      照片和视频的实时回传下载
     </li>
     <li>
      已有任务：Waypoint,Hotpoint,FollowMe
     </li>
     <li>
      电池和遥控器的状态信息获取以及参数设置
     </li>
    </ul>
    <p>
     <strong>
      支持的DJI产品：
     </strong>
    </p>
    <ul>
     <li>
      Spark 系列
     </li>
     <li>
      Mavic 系列
     </li>
     <li>
      Phantom系列
     </li>
     <li>
      Inspire系列
     </li>
     <li>
      Matrice系列
     </li>
    </ul>
    <h3>
     <a id="2_UX_SDK_22">
     </a>
     2. UX SDK
    </h3>
    <p>
     <strong>
      支持平台
     </strong>
     ：IOS 9.0+ 安卓5.0.0＋
    </p>
    <p>
     <strong>
      具备功能如下所示
     </strong>
     ：UX软件开发工具包通过为所有核心功能提供用户UI元素来加快开发时间。应用程序可以在几分钟内创建，无需额外的代码行。
    </p>
    <p>
     <strong>
      支持的DJI产品：
     </strong>
    </p>
    <ul>
     <li>
      Spark 系列
     </li>
     <li>
      Mavic 系列
     </li>
     <li>
      Phantom系列
     </li>
     <li>
      Inspire系列
     </li>
     <li>
      Matrice系列
     </li>
    </ul>
    <h3>
     <a id="3_Onboard_SDK_34">
     </a>
     3. Onboard SDK
    </h3>
    <p>
     <strong>
      支持平台
     </strong>
     ：Linux, ROS, Embedded systems
    </p>
    <p>
     <strong>
      具备功能如下所示
     </strong>
     ：
    </p>
    <ul>
     <li>
      相机和云台控制
     </li>
     <li>
      实时图传
     </li>
     <li>
      双目视觉图传
     </li>
     <li>
      实时视图差
     </li>
     <li>
      自定义局部导航
     </li>
     <li>
      预设任务
     </li>
     <li>
      遥控器
     </li>
     <li>
      与Mobile SDK 实时通信
     </li>
     <li>
      多功能I/O控制
     </li>
     <li>
      与DJI飞控同步
     </li>
    </ul>
    <p>
     <strong>
      支持的DJI产品：
     </strong>
    </p>
    <ul>
     <li>
      Matrice 300 RTK
     </li>
     <li>
      Matrice 200 系列
     </li>
     <li>
      Matrice 600 系列
     </li>
     <li>
      A3
     </li>
     <li>
      N3
     </li>
     <li>
      Manifold
     </li>
     <li>
      D-RTK GNSS
     </li>
    </ul>
    <h3>
     <a id="4_Payload_SDK_58">
     </a>
     4. Payload SDK
    </h3>
    <p>
     <strong>
      支持平台
     </strong>
     ：Linux, RTOS, Embedded systems
    </p>
    <p>
     <strong>
      具备功能如下所示
     </strong>
     ：
    </p>
    <ul>
     <li>
      Mobile SDK 通信
     </li>
     <li>
      下行网口数据传输
     </li>
     <li>
      下行网口视频传输
     </li>
     <li>
      DJI Pilot支持相机云台类负载
     </li>
     <li>
      Mobile SDK支持相机云台类负载
     </li>
     <li>
      定制widget
     </li>
     <li>
      飞行状态数据
     </li>
    </ul>
    <p>
     <strong>
      支持的DJI产品：
     </strong>
    </p>
    <ul>
     <li>
      经纬M300RTK
     </li>
     <li>
      经纬M210
     </li>
     <li>
      经纬210RTK
     </li>
    </ul>
    <p>
     <strong>
      说明
     </strong>
    </p>
    <ul>
     <li>
      API接口 通过全新的协议，可以让定制负载与无人机飞控，GPS模块，图传等内部系统通信
     </li>
     <li>
      负载集成平台 提供两种负载集成端口，便于开发者将专属负载整合至大疆无人机，实现软硬件一体化控制，丰富飞行作业功能，将无人机应用扩展至更广阔的领域
     </li>
     <li>
      外部负载 由开发者自行开发的专用负载，拓展无人机功能，完成特定任务
     </li>
     <li>
      移动APP 通过DJI Pilot app或定制移动app查看负载实时数据，发送指令和调节设置
     </li>
    </ul>
    <h3>
     <a id="Windows_sdk_81">
     </a>
     Windows sdk
    </h3>
    <p>
     <strong>
      支持平台
     </strong>
     ：Windows 10
    </p>
    <p>
     <strong>
      具备功能如下所示
     </strong>
     ：
    </p>
    <ul>
     <li>
      上层即底层飞行控制
     </li>
     <li>
      飞行数据实时回传
     </li>
     <li>
      自主避障
     </li>
     <li>
      相机与云台的全方位实时控制
     </li>
     <li>
      获得DJI图传系统传回的高清影像
     </li>
    </ul>
    <p>
     <strong>
      支持的DJI产品：
     </strong>
    </p>
    <ul>
     <li>
      MAVIC 2行业双光版
     </li>
     <li>
      MAVIC 2行业版
     </li>
     <li>
      MAVIC 2系列
     </li>
     <li>
      MAVIC Air
     </li>
    </ul>
    <p>
     <strong>
      相关链接
     </strong>
    </p>
    <ul>
     <li>
      文档链接：https://developer.dji.com/cn/windows-sdk/
     </li>
     <li>
      GitHub链接：https://github.com/dji-sdk/Windows-SDK
     </li>
    </ul>
    <p>
     <strong>
      Windows SDK文档介绍
     </strong>
    </p>
    <p>
     Windows SDK文档的目标是为任何具有UWP应用经验的开发人员提供使用DJI技术开发特色APP所需的知识和理解。
    </p>
    <p>
     <strong>
      开发工作流程
     </strong>
    </p>
    <p>
     从注册为开发人员，到部署应用程序，这一部分将带领开发人员完成整个开发过程。
    </p>
    <ul>
     <li>
      <strong>
       前提：
      </strong>
      使用DJI windows软件开发工具包开发应用程序(sdk)需要几个通用的和特定于平台的先决条件。 需要掌握的知识：
     </li>
    </ul>
    <ol>
     <li>
      对UWP开发有一定的了解；
     </li>
     <li>
      与DJI视窗软件开发工具包兼容的DJI产品。目前兼容的产品有幻影4 Pro V2.0和Mavic Air WiFi模式；
     </li>
     <li>
      用于DJI开发商注册验证的信用卡或电话号码(不收费)
     </li>
     <li>
      具有win 10系统，VS2017，Windows 10 SDK （版本1803或者更高都没关系 ）
     </li>
    </ol>
    <ul>
     <li>
      <strong>
       注册为DJI开发者并且下载SDK
      </strong>
     </li>
    </ul>
    <ol>
     <li>
      注册网址：https://account.dji.com/register?appId=dji_sdk&amp;backUrl=https%3A%2F%2Fdeveloper.dji.com%2Fuser&amp;locale=en_US
     </li>
     <li>
      SDK下载地址：GitHub链接：https://github.com/dji-sdk/Windows-SDK
     </li>
    </ol>
    <ul>
     <li>
      <strong>
       把SDK融合进APP
      </strong>
     </li>
    </ul>
    <ol>
     <li>
      <p>
       创建一个新的UWP 应用程序
       <br/>
       1.1 打开VS2017
       <br/>
       1.2 选择File-&gt;New-&gt;Project 选择Blank APP (Universal Windows)模板
       <br/>
       1.3 取名为DJIWSDKDemo 同时选择最低版本和目标版本
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9aead65ff1fe91610d03f02b29a366db.png">
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0fd460a197bcaa0571d6cf32106eeca4.png"/>
       </img>
      </p>
     </li>
     <li>
      <p>
       把WSDK导入到工程中区
       <br/>
       2.1 在DJIWSDKDemo工程下，新建一个文件夹DJIWindowsSDK,然后把这个SDK Lib放在此文件夹中。
       <br/>
       2.2 在VS2017中，右键引用，添加DJIWindoesSDK.dll。
       <br/>
       2.3 在DJIWSDKDemo文件夹中加入SDK Lib中的pthread_dll.dll 和 libcrypto-1.1.dll, for x86。
       <br/>
       2.4 在VS2017中，右键工程，添加上述的SDK Lib中的dll。
      </p>
     </li>
     <li>
      <p>
       属性配置
       <br/>
       3.1 在VS2017中，右键解决方案，选择属性，再到配置属性，选择平台为x86；
       <br/>
       3.2 双击Package.appxmanifest，再打包，把包名取为"com.dji.wsdkdemo"；
       <br/>
       3.3 右键Package.appxmanifest， 选择查看代码， 把下列代码放到Capabilities 标签中；
       <br/>
       <code>
        &lt;DeviceCapability Name="serialcommunication"&gt; &lt;Device Id="vidpid:2ca3 001f"&gt; &lt;Function Type="name:serialPort" /&gt; &lt;/Device&gt; &lt;/DeviceCapability&gt;
       </code>
      </p>
     </li>
     <li>
      <p>
       获得APP密钥
       <br/>
       4.1 进入官网 https://developer.dji.com/cn/ 注册账号和设置密码
       <br/>
       4.2 点击APPs 设置如下,关键是包名字应该为com.wsdk.sample
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2837d42a387cc8a495d1771301b80864.png"/>
      </p>
     </li>
     <li>
      <p>
       注册应用程式
       <br/>
       5.1 双击MainPage.xaml.cs；
       <br/>
       5.2 在主页面导入DJI的命名空间
       <code>
        using DJI.WindowsSDK;
       </code>
       ；
       <br/>
       5.3 创造一个新的方法Instance_SDKRegistrationEvent；
       <br/>
       5.4 添加SDKRegistrationStateChanged事件监听Instance_SDKRegistrationEvent方法；
       <br/>
       5.5 在MainPage()中调用RegisterApp()方法，如下所示:
      </p>
     </li>
    </ol>
    <pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token function">MainPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    DJISDKManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>SDKRegistrationStateChanged <span class="token operator">+</span><span class="token operator">=</span> Instance_SDKRegistrationEvent<span class="token punctuation">;</span>

    <span class="token comment">//Replace with your registered App Key. Make sure your App Key matched your application's package name on DJI developer center.</span>
    DJISDKManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">RegisterApp</span><span class="token punctuation">(</span><span class="token string">"Please enter your App Key here."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token keyword">void</span> <span class="token function">Instance_SDKRegistrationEvent</span><span class="token punctuation">(</span><span class="token class-name">SDKRegistrationState</span> state<span class="token punctuation">,</span> <span class="token class-name">SDKError</span> resultCode<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> SDKError<span class="token punctuation">.</span>NO_ERROR<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
    	System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Register app successfully."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//The product connection state will be updated when it changes here.</span>
        DJISDKManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>ComponentManager<span class="token punctuation">.</span><span class="token function">GetProductHandler</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ProductTypeChanged <span class="token operator">+</span><span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">delegate</span> <span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> ProductTypeMsg<span class="token operator">?</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">await</span> Dispatcher<span class="token punctuation">.</span><span class="token function">RunAsync</span><span class="token punctuation">(</span>Windows<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Core<span class="token punctuation">.</span>CoreDispatcherPriority<span class="token punctuation">.</span>Normal<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">value</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">!=</span> ProductType<span class="token punctuation">.</span>UNRECOGNIZED<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The Aircraft is connected now."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//You can load/display your pages according to the aircraft connection state here.</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                <span class="token punctuation">{<!-- --></span>
                    System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The Aircraft is disconnected now."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//You can hide your pages according to the aircraft connection state here, or show the connection tips to the users.</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">//If you want to get the latest product connection state manually, you can use the following code</span>
        <span class="token keyword">var</span> productType <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> DJISDKManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>ComponentManager<span class="token punctuation">.</span><span class="token function">GetProductHandler</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetProductTypeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>productType <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> productType<span class="token operator">?</span><span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">!=</span> ProductType<span class="token punctuation">.</span>UNRECOGNIZED<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The Aircraft is connected now."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//You can load/display your pages according to the aircraft connection state here.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Register SDK failed, the error is: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>resultCode<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="6">
     <li>
      运行WSDK Demo
      <br/>
      成功注册应用程序需要互联网连接。由于此应用程序仅演示DJI视窗软件开发工具包的注册过程，并不直接与DJI产品交互，因此无需连接到DJI产品来运行此应用程序。如果一切顺利，您应该能够在弹出窗口中看到以下日志:
      <code>
       Register app successfully.
      </code>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353631363532392f:61727469636c652f64657461696c732f313133313034353731" class_="artid" style="display:none">
 </p>
</div>


