---
layout: post
title: "java.lang.OutOfMemoryError-GC-overhead-limit-exceeded解决"
date: 2024-12-27 22:11:16 +0800
description: "UNEXPECTED TOP-LEVEL ERROR:java.lang.OutOfMemoryEr"
keywords: "java.lang.outofmemoryerror: gc overhead limit exceeded"
categories: ['System', 'Android']
tags: ['无标签']
artid: "9170361"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=9170361
    alt: "java.lang.OutOfMemoryError-GC-overhead-limit-exceeded解决"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     java.lang.OutOfMemoryError: GC overhead limit exceeded解决
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; color:rgb(57,57,57); font-size:14px; line-height:21px; background-color:rgb(250,247,239)"><span style="margin:0px; padding:0px">UNEXPECTED TOP-LEVEL ERROR:
java.lang.OutOfMemoryError: GC overhead limit exceeded
    at com.android.dx.dex.code.OutputFinisher.findExpandedOpcodeForInsn(OutputFinisher.java:525)
    at com.android.dx.dex.code.OutputFinisher.calculateReservedCount(OutputFinisher.java:466)
    at com.android.dx.dex.code.OutputFinisher.reserveRegisters(OutputFinisher.java:402)
    at com.android.dx.dex.code.OutputFinisher.finishProcessingAndGetList(OutputFinisher.java:358)
    at com.android.dx.dex.code.DalvCode.finishProcessingIfNecessary(DalvCode.java:108)
    at com.android.dx.dex.code.DalvCode.getInsns(DalvCode.java:185)
    at com.android.dx.dex.file.CodeItem.place0(CodeItem.java:223)
    at com.android.dx.dex.file.OffsettedItem.place(OffsettedItem.java:242)
    at com.android.dx.dex.file.MixedItemSection.placeItems(MixedItemSection.java:312)
    at com.android.dx.dex.file.DexFile.toDex0(DexFile.java:543)
    at com.android.dx.dex.file.DexFile.toDex(DexFile.java:216)
    at com.android.dx.command.dexer.Main.writeDex(Main.java:574)
    at com.android.dx.command.dexer.Main.run(Main.java:218)
    at com.android.dx.command.dexer.Main.main(Main.java:174)
    at com.android.dx.command.Main.main(Main.java:95)
make: *** [out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/noproguard.classes-with-local.dex] error 3</span></pre>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     解决方法：
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     方法一：
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     用java命令指定java虚拟机堆的大小来把需要编译的东西先编译出来，可能需要几分钟。
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     java -Xms3550M -Xmx3550M -jar /home/test/4.0/out/host/linux-x86/framework/dx.jar --dex --output=out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/noproguard.classes-with-local.dex --core-library out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/noproguard.classes.jar
    </p>
    <span style="color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     运行完这个后。再重新make就好了，因为这个包已经被make出来了，所以重新make的时候不会再去编译它
    </span>
    <br style="margin:0px; padding:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)"/>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     这个方法只能是make出错后在执行上述命令，然后在接着执行make命令
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     方法二：
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     修改definitions.mk文件 此文件位于build/core/目录下
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     修改变量 ：transform-classes.jar-to-dex中的
     <span style="margin:0px; padding:0px; color:rgb(255,0,0)">
      -JXms16M -JXmx1024M
     </span>
     值
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     代码中的变量定义:
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     define transform-classes.jar-to-dex
     <br style="margin:0px; padding:0px"/>
     @echo "target Dex: $(PRIVATE_MODULE)"
     <br style="margin:0px; padding:0px"/>
     @mkdir -p $(dir $@)
     <br style="margin:0px; padding:0px"/>
     $(hide) $(DX) \
     <br style="margin:0px; padding:0px"/>
     $(if $(findstring windows,$(HOST_OS)),
     <span style="margin:0px; padding:0px">
      ,-J
      <span style="margin:0px; padding:0px; color:rgb(255,0,0)">
       Xms16M -JXmx1024M
      </span>
     </span>
     ) \
     <br style="margin:0px; padding:0px"/>
     --dex --output=$@ \
     <br style="margin:0px; padding:0px"/>
     $(if $(NO_OPTIMIZE_DX), \
     <br style="margin:0px; padding:0px"/>
     --no-optimize) \
     <br style="margin:0px; padding:0px"/>
     $(if $(GENERATE_DEX_DEBUG), \
     <br style="margin:0px; padding:0px"/>
     --debug --verbose \
     <br style="margin:0px; padding:0px"/>
     --dump-to=$(@:.dex=.lst) \
     <br style="margin:0px; padding:0px"/>
     --dump-width=1000) \
     <br style="margin:0px; padding:0px"/>
     $(PRIVATE_DX_FLAGS) \
     <br style="margin:0px; padding:0px"/>
     $&lt;
     <br style="margin:0px; padding:0px"/>
     endef
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     将-JXms16M -JXmx1024M 修改成适当的值
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     我的机器是内存是32G的，
     <span style="margin:0px; padding:0px; color:rgb(255,0,0)">
      我将-JXms16M -JXmx1024M修改为-JXms1024M -JXmx2048M
     </span>
    </p>
    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(57,57,57); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; background-color:rgb(250,247,239)">
     具体值的大小要根据具体机器的内存而定，内存太少设置的值大一样会出现问题。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f666c79696e6771:722f61727469636c652f64657461696c732f39313730333631" class_="artid" style="display:none">
 </p>
</div>


