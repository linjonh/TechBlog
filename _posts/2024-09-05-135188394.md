---
title: 2024-09-05-Pythonè·å–Yandexæœç´¢å¼•æ“æœç´¢ç»“æœè¯¦è§£
date: 2024-09-05 11:26:07 +0800
categories: ['Python']
tags: ['Python', 'æœç´¢å¼•æ“', 'å¼€å‘è¯­è¨€']
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=135188394
  alt: Pythonè·å–Yandexæœç´¢å¼•æ“æœç´¢ç»“æœè¯¦è§£
artid: 135188394
render_with_liquid: false
---
</p>
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Pythonè·å–Yandexæœç´¢å¼•æ“æœç´¢ç»“æœè¯¦è§£
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/87d69cf88a3e176b2a292c3f058b56cb.png"/>
    </p>
    <h2>
     <a id="_1">
     </a>
     æ›´å¤šèµ„æ–™è·å–
    </h2>
    <p>
     ğŸ“š ä¸ªäººç½‘ç«™ï¼š
     <a href="http://ipengtao.com/" rel="nofollow">
      ipengtao.com
     </a>
    </p>
    <hr/>
    <p>
     åœ¨ç½‘ç»œæœç´¢é¢†åŸŸï¼ŒYandexæ˜¯ä¸€ä¸ªå¤‡å—æ¬¢è¿çš„æœç´¢å¼•æ“ï¼Œç‰¹åˆ«åœ¨ä¿„ç½—æ–¯å’Œå‘¨è¾¹åœ°åŒºä½¿ç”¨å¹¿æ³›ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨Pythonè·å–Yandexæœç´¢å¼•æ“çš„æœç´¢ç»“æœï¼Œä»¥ä¾¿åœ¨é¡¹ç›®ä¸­è¿›è¡Œæœç´¢ç»“æœåˆ†æå’Œæ•°æ®æŒ–æ˜ã€‚
    </p>
    <h3>
     <a id="RequestsHTTP_9">
     </a>
     ä½¿ç”¨Requestsåº“è¿›è¡ŒHTTPè¯·æ±‚
    </h3>
    <p>
     ä½¿ç”¨
     <code>
      requests
     </code>
     åº“å‘Yandexæœç´¢å¼•æ“å‘é€HTTPè¯·æ±‚ã€‚
    </p>
    <p>
     ç¡®ä¿å·²ç»å®‰è£…äº†è¯¥åº“ï¼š
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> requests
</code></pre>
    <p>
     ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºå¦‚ä½•å‘Yandexæœç´¢å¼•æ“å‘èµ·æœç´¢è¯·æ±‚å¹¶è·å–ç»“æœï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests

<span class="token keyword">def</span> <span class="token function">yandex_search</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">:</span>
    base_url <span class="token operator">=</span> <span class="token string">"https://yandex.com/search/"</span>
    params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> query<span class="token punctuation">}</span>
    
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>base_url<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span>text
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>

<span class="token comment"># ç¤ºä¾‹æœç´¢</span>
query <span class="token operator">=</span> <span class="token string">"Python web scraping"</span>
search_results <span class="token operator">=</span> yandex_search<span class="token punctuation">(</span>query<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>search_results<span class="token punctuation">)</span>
</code></pre>
    <p>
     è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°
     <code>
      yandex_search
     </code>
     ï¼Œæ¥å—ä¸€ä¸ªæœç´¢æŸ¥è¯¢ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›Yandexæœç´¢ç»“æœçš„HTMLæ–‡æœ¬ã€‚è¯·æ³¨æ„ï¼Œå®é™…é¡¹ç›®ä¸­ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨æ›´å¤æ‚çš„è¯·æ±‚å¤´å’Œå¤„ç†å¯èƒ½çš„åçˆ¬è™«æœºåˆ¶ã€‚
    </p>
    <h3>
     <a id="Beautiful_SoupHTML_44">
     </a>
     ä½¿ç”¨Beautiful Soupè§£æHTML
    </h3>
    <p>
     ä½¿ç”¨
     <code>
      Beautiful Soup
     </code>
     åº“è§£æYandexæœç´¢ç»“æœçš„HTMLæ–‡æœ¬ã€‚
    </p>
    <p>
     ç¡®ä¿å·²ç»å®‰è£…äº†è¯¥åº“ï¼š
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> beautifulsoup4
</code></pre>
    <p>
     ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨Beautiful Soupæå–æœç´¢ç»“æœä¸­çš„æ ‡é¢˜å’Œé“¾æ¥ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

<span class="token keyword">def</span> <span class="token function">parse_search_results</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">:</span>
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
    
    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> result <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'serp-item'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        title <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'organic__url-text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        link <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'organic__url'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>
        results<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span> <span class="token string">'link'</span><span class="token punctuation">:</span> link<span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> results

<span class="token comment"># è§£ææœç´¢ç»“æœ</span>
parsed_results <span class="token operator">=</span> parse_search_results<span class="token punctuation">(</span>search_results<span class="token punctuation">)</span>

<span class="token comment"># æ‰“å°ç»“æœ</span>
<span class="token keyword">for</span> result <span class="token keyword">in</span> parsed_results<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre>
    <p>
     åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°
     <code>
      parse_search_results
     </code>
     ï¼Œè¯¥å‡½æ•°æ¥å—Yandexæœç´¢ç»“æœçš„HTMLæ–‡æœ¬ï¼Œä½¿ç”¨Beautiful Soupè§£æHTMLå¹¶æå–æœç´¢ç»“æœçš„æ ‡é¢˜å’Œé“¾æ¥ã€‚
    </p>
    <h3>
     <a id="_80">
     </a>
     å®Œæ•´ç¤ºä¾‹
    </h3>
    <p>
     ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºå¦‚ä½•ä¸€æ¬¡æ€§è¿›è¡ŒYandexæœç´¢ã€è§£æHTMLå¹¶è¾“å‡ºç»“æœï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

<span class="token keyword">def</span> <span class="token function">yandex_search</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">:</span>
    base_url <span class="token operator">=</span> <span class="token string">"https://yandex.com/search/"</span>
    params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> query<span class="token punctuation">}</span>
    
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>base_url<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span>text
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>

<span class="token keyword">def</span> <span class="token function">parse_search_results</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">:</span>
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
    
    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> result <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'serp-item'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        title <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'organic__url-text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        link <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'organic__url'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>
        results<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span> <span class="token string">'link'</span><span class="token punctuation">:</span> link<span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> results

<span class="token comment"># ç¤ºä¾‹æœç´¢</span>
query <span class="token operator">=</span> <span class="token string">"Python web scraping"</span>
search_results <span class="token operator">=</span> yandex_search<span class="token punctuation">(</span>query<span class="token punctuation">)</span>

<span class="token comment"># è§£ææœç´¢ç»“æœ</span>
parsed_results <span class="token operator">=</span> parse_search_results<span class="token punctuation">(</span>search_results<span class="token punctuation">)</span>

<span class="token comment"># æ‰“å°ç»“æœ</span>
<span class="token keyword">for</span> result <span class="token keyword">in</span> parsed_results<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre>
    <p>
     é€šè¿‡è¿™ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå¯ä»¥å°†è¿™äº›ä»£ç é›†æˆåˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œä»¥ä¾¿è·å–å¹¶åˆ†æYandexæœç´¢å¼•æ“çš„æœç´¢ç»“æœã€‚
    </p>
    <h3>
     <a id="_124">
     </a>
     æ·»åŠ ç”¨æˆ·ä»£ç†å’Œåçˆ¬è™«æœºåˆ¶
    </h3>
    <p>
     ä¸ºäº†æé«˜è¯·æ±‚çš„å¯é æ€§å’Œé¿å…è¢«è¯†åˆ«ä¸ºçˆ¬è™«ï¼Œå¯ä»¥è®¾ç½®ç”¨æˆ·ä»£ç†å’Œå¤„ç†åçˆ¬è™«æœºåˆ¶ã€‚
    </p>
    <p>
     åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨
     <code>
      fake_useragent
     </code>
     åº“ç”Ÿæˆéšæœºçš„ç”¨æˆ·ä»£ç†ï¼š
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> fake_useragent
</code></pre>
    <p>
     ç„¶åï¼Œä¿®æ”¹
     <code>
      yandex_search
     </code>
     å‡½æ•°ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">from</span> fake_useragent <span class="token keyword">import</span> UserAgent

<span class="token keyword">def</span> <span class="token function">yandex_search</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">:</span>
    base_url <span class="token operator">=</span> <span class="token string">"https://yandex.com/search/"</span>
    params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> query<span class="token punctuation">}</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span> UserAgent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>random<span class="token punctuation">}</span>
    
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>base_url<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span>text
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
</code></pre>
    <p>
     è¿™æ ·ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªéšæœºçš„ç”¨æˆ·ä»£ç†ï¼Œå¢åŠ äº†åçˆ¬è™«çš„éš¾åº¦ã€‚
    </p>
    <h3>
     <a id="_156">
     </a>
     å¤šé¡µæœç´¢ç»“æœ
    </h3>
    <p>
     é€šå¸¸ï¼Œæœç´¢ç»“æœä¼šåˆ†ä¸ºå¤šé¡µï¼Œå¯èƒ½éœ€è¦è·å–å¤šä¸ªé¡µé¢çš„ç»“æœã€‚
    </p>
    <p>
     ä¸‹é¢æ˜¯ä¿®æ”¹ä»£ç ä»¥è·å–å¤šé¡µç»“æœçš„ç¤ºä¾‹ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">yandex_search</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> num_pages<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    base_url <span class="token operator">=</span> <span class="token string">"https://yandex.com/search/"</span>
    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> num_pages<span class="token punctuation">)</span><span class="token punctuation">:</span>
        params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> query<span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">:</span> page<span class="token punctuation">}</span>
        headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span> UserAgent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>random<span class="token punctuation">}</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>base_url<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
            results<span class="token punctuation">.</span>append<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>
    
    <span class="token keyword">return</span> results
</code></pre>
    <p>
     ç„¶åï¼Œå¯ä»¥ä¿®æ”¹è§£æå‡½æ•°ä»¥å¤„ç†å¤šä¸ªé¡µé¢çš„HTMLæ–‡æœ¬ã€‚
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">parse_search_results</span><span class="token punctuation">(</span>html_pages<span class="token punctuation">)</span><span class="token punctuation">:</span>
    all_results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> html <span class="token keyword">in</span> html_pages<span class="token punctuation">:</span>
        soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> result <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'serp-item'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            title <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'organic__url-text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
            link <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'organic__url'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>
            all_results<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span> <span class="token string">'link'</span><span class="token punctuation">:</span> link<span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> all_results
</code></pre>
    <h3>
     <a id="_196">
     </a>
     å¢åŠ å¼‚å¸¸å¤„ç†æœºåˆ¶
    </h3>
    <p>
     åœ¨çœŸå®çš„ç½‘ç»œçˆ¬è™«é¡¹ç›®ä¸­ï¼Œç»å¸¸éœ€è¦æ·»åŠ å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œä»¥å¤„ç†ç½‘ç»œè¯·æ±‚å¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚
    </p>
    <p>
     ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œä»¥å¤„ç†å¯èƒ½çš„å¼‚å¸¸ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">from</span> fake_useragent <span class="token keyword">import</span> UserAgent

<span class="token keyword">def</span> <span class="token function">yandex_search</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> num_pages<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    base_url <span class="token operator">=</span> <span class="token string">"https://yandex.com/search/"</span>
    results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> num_pages<span class="token punctuation">)</span><span class="token punctuation">:</span>
        params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'text'</span><span class="token punctuation">:</span> query<span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">:</span> page<span class="token punctuation">}</span>
        headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span> UserAgent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>random<span class="token punctuation">}</span>
        
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>base_url<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
            response<span class="token punctuation">.</span>raise_for_status<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ</span>
        <span class="token keyword">except</span> requests<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>RequestException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error in page </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
        
        results<span class="token punctuation">.</span>append<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> results
</code></pre>
    <p>
     è¿™ä¸ªä¿®æ”¹ä½¿ç”¨äº†
     <code>
      try-except
     </code>
     å—æ¥æ•è·
     <code>
      requests
     </code>
     åº“å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¹¶åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚è¿™æœ‰åŠ©äºåœ¨ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶è¿›è¡Œé€‚å½“çš„å¤„ç†ï¼Œé¿å…ç¨‹åºå´©æºƒã€‚
    </p>
    <h3>
     <a id="_229">
     </a>
     å­˜å‚¨æœç´¢ç»“æœ
    </h3>
    <p>
     åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯èƒ½éœ€è¦å°†æœç´¢ç»“æœä¿å­˜åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ï¼Œä»¥å¤‡åç»­åˆ†æã€‚
    </p>
    <p>
     ä»¥ä¸‹æ˜¯å°†æœç´¢ç»“æœä¿å­˜åˆ°JSONæ–‡ä»¶çš„ç®€å•ç¤ºä¾‹ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> json

<span class="token keyword">def</span> <span class="token function">save_results_to_json</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
        json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>results<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># ç¤ºä¾‹è°ƒç”¨</span>
search_results <span class="token operator">=</span> yandex_search<span class="token punctuation">(</span><span class="token string">"Python web scraping"</span><span class="token punctuation">,</span> num_pages<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
save_results_to_json<span class="token punctuation">(</span>search_results<span class="token punctuation">,</span> <span class="token string">"yandex_search_results.json"</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     è¿™ä¸ªç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ª
     <code>
      save_results_to_json
     </code>
     å‡½æ•°ï¼Œæ¥å—æœç´¢ç»“æœå’Œæ–‡ä»¶åä½œä¸ºå‚æ•°ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°JSONæ–‡ä»¶ä¸­ã€‚å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹æ­¤å‡½æ•°ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®å­˜å‚¨éœ€æ±‚ã€‚
    </p>
    <h3>
     <a id="_249">
     </a>
     æ€»ç»“
    </h3>
    <p>
     åœ¨æœ¬æ–‡ä¸­ï¼Œæ·±å…¥æ¢è®¨äº†å¦‚ä½•ä½¿ç”¨Pythonä»Yandexæœç´¢å¼•æ“è·å–æœç´¢ç»“æœã€‚é€šè¿‡ä½¿ç”¨
     <code>
      requests
     </code>
     åº“æ„å»ºHTTPè¯·æ±‚ï¼Œ
     <code>
      Beautiful Soup
     </code>
     åº“è§£æHTMLæ–‡æœ¬ï¼Œä»¥åŠ
     <code>
      fake_useragent
     </code>
     åº“ç”Ÿæˆéšæœºç”¨æˆ·ä»£ç†ï¼Œå®ç°äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„æœç´¢å¼•æ“çˆ¬è™«ã€‚ç¤ºä¾‹ä»£ç ä¸­è€ƒè™‘äº†å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿äº†ç¨‹åºçš„ç¨³å®šæ€§ï¼Œå¹¶å±•ç¤ºäº†å¦‚ä½•å°†æœç´¢ç»“æœå­˜å‚¨åˆ°JSONæ–‡ä»¶ä¸­ã€‚
    </p>
    <p>
     åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™äº›ç¤ºä¾‹ä»£ç å¯ä»¥ä½œä¸ºä¸€ä¸ªåŸºç¡€æ¡†æ¶ï¼Œå¸®åŠ©å¼€å‘è€…å®šåˆ¶é€‚åº”ç‰¹å®šéœ€æ±‚çš„ç½‘ç»œçˆ¬è™«ã€‚é€šè¿‡äº†è§£å¼‚å¸¸å¤„ç†ã€ç”¨æˆ·ä»£ç†è®¾ç½®ã€HTMLè§£æç­‰å…³é”®æ¦‚å¿µï¼Œè¯»è€…å°†æ›´å¥½åœ°ç†è§£æ„å»ºå¥å£®ç½‘ç»œçˆ¬è™«çš„åŸºæœ¬æ­¥éª¤ã€‚æ­¤å¤–ï¼Œç¤ºä¾‹ä»£ç è¿˜æ¼”ç¤ºäº†å¦‚ä½•å¤„ç†å¤šé¡µæœç´¢ç»“æœï¼Œä½¿å…¶æ›´å…·å®ç”¨æ€§ã€‚é€šè¿‡åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™äº›æ¦‚å¿µï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾åœ°å®šåˆ¶è‡ªå·±çš„ç½‘ç»œçˆ¬è™«ï¼Œç”¨äºè·å–ã€åˆ†æå’Œå­˜å‚¨Yandexæœç´¢å¼•æ“çš„ä¸°å¯Œä¿¡æ¯ã€‚
    </p>
    <hr/>
    <h2>
     <a id="Python_256">
     </a>
     Pythonå­¦ä¹ è·¯çº¿
    </h2>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/0b9967d3437b99c90e6e948411ec96a1.png"/>
    </p>
    <h2>
     <a id="_258">
     </a>
     æ›´å¤šèµ„æ–™è·å–
    </h2>
    <p>
     ğŸ“š ä¸ªäººç½‘ç«™ï¼š
     <a href="http://ipengtao.com/" rel="nofollow">
      ipengtao.com
     </a>
    </p>
    <p>
     å¦‚æœè¿˜æƒ³è¦é¢†å–æ›´å¤šæ›´ä¸°å¯Œçš„èµ„æ–™ï¼Œå¯ä»¥ç‚¹å‡»æ–‡ç« ä¸‹æ–¹åç‰‡ï¼Œå›å¤ã€
     <strong>
      ä¼˜è´¨èµ„æ–™
     </strong>
     ã€‘ï¼Œå³å¯è·å– å…¨æ–¹ä½å­¦ä¹ èµ„æ–™åŒ…ã€‚
    </p>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/d844690f5d767b2e027b4cc0354198bb.png">
      <br/>
      ç‚¹å‡»æ–‡ç« ä¸‹æ–¹é“¾æ¥å¡ç‰‡ï¼Œå›å¤ã€
      <strong>
       ä¼˜è´¨èµ„æ–™
      </strong>
      ã€‘ï¼Œå¯ç›´æ¥é¢†å–èµ„æ–™å¤§ç¤¼åŒ…ã€‚
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
</div>


<p class="artid" style="display:none">68747470733a2f2f626c:6f672e6373646e2e6e65742f77755368694a696e675a756f2f:61727469636c652f64657461696c732f313335313838333934
