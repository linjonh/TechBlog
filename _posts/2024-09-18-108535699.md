---
layout: post
title: "云原生Cloud-Native概念与实践"
date: 2024-09-18 07:44:52 +0800
description: "云原生介绍所谓云原生，它不是一个产品，而是一套技术体系和一套方法论，而数字化"
keywords: "aws cloud native"
categories: ['互联网知识']
tags: ['云端']
artid: "108535699"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=108535699
    alt: "云原生Cloud-Native概念与实践"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     云原生（Cloud Native）概念与实践
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一 、云原生的诞生
    </h2>
    <p>
     要了解一件事件，我们要回到事情起始。
    </p>
    <p>
     云原生（Cloud Native）的概念，由来自Pivotal的MattStine于2013年首次提出，被一直延续使用至今。这个概念是Matt Stine根据其多年的架构和咨询经验总结出来的一个思想集合，并得到了社区的不断完善，内容非常多，包括DevOps、持续交付（Continuous Delivery）、微服务（MicroServices）、敏捷基础设施（Agile Infrastructure）和12要素（The Twelve-Factor App）等几大主题，不但包括根据业务能力对公司进行文化、组织架构的重组与建设，也包括方法论与原则，还有具体的操作工具。采用基于云原生的技术和管理方法，可以更好地把业务生于“云”或迁移到云平台，从而享受“云”的高效和持续的服务能力。
    </p>
    <p>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/972b23563298082c65f4048255ce1815.png"/>
    </p>
    <p>
     image.png
    </p>
    <h2>
     二、 CNCF重新定义云原生
    </h2>
    <p>
     CNCF，即云原生计算基金会，2015年由谷歌牵头成立，基金会成员目前已有一百多企业与机构，包括亚马逊、微软、思科等巨头。
    </p>
    <p>
     目前CNCF给出了1.0的云原生定义，链接如下：
     <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fcncf%2Ftoc%2Fblob%2Fmaster%2FDEFINITION.md%23%25E4%25B8%25AD%25E6%2596%2587%25E7%2589%2588%25E6%259C%25AC" rel="nofollow">
      https://github.com/cncf/toc/blob/master/DEFINITION.md#%E4%B8%AD%E6%96%87%E7%89%88%E6%9C%AC
     </a>
    </p>
    <p>
     Cloud native technologies empower organizations to build and run scalable applications in modern, dynamic environments such as public, private, and hybrid clouds. Containers, service meshes, microservices, immutable infrastructure, and declarative APIs exemplify this approach.
    </p>
    <p>
     These techniques enable loosely coupled systems that are resilient, manageable, and observable. Combined with robust automation, they allow engineers to make high-impact changes frequently and predictably with minimal toil.
    </p>
    <p>
     The Cloud Native Computing Foundation seeks to drive adoption of this paradigm by fostering and sustaining an ecosystem of open source, vendor-neutral projects. We democratize state-of-the-art patterns to make these innovations accessible for everyone.
    </p>
    <h3>
     中文版本：
    </h3>
    <p>
     云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。
    </p>
    <p>
     这些技术能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术使工程师能够轻松地对系统作出频繁和可预测的重大变更。
    </p>
    <p>
     云原生计算基金会（CNCF）致力于培育和维护一个厂商中立的开源生态系统，来推广云原生技术。我们通过将最前沿的模式民主化，让这些创新为大众所用。
    </p>
    <h2>
     三、到底怎么理解云原生
    </h2>
    <p>
     上面的定义其实都是比较抽象的，不接地气，那么到底该怎么理解云原生呢？或者说要怎么使用，怎么开发才算是云原生呢？
    </p>
    <p>
     顾名思义，云原生是面向“云”而设计的应用，因此技术部分依赖于传统云计算的3层概念，基础设施即服务（IaaS）、平台即服务（PaaS）和软件即服务（SaaS），例如，敏捷的不可变基础设施交付类似于IaaS，用来提供计算网络存储等基础资源，这些资源是可编程且不可变的，直接通过API可以对外提供服务；有些应用通过PaaS服务本来就能组合成不同的业务能力，不一定需要从头开始建设；还有一些软件只需要“云”的资源就能直接运行起来为云用户提供服务，即SaaS能力，用户直接面对的就是原生的应用。
    </p>
    <p>
     从这个思想出来，我们不能理解：
    </p>
    <blockquote>
     <p>
      云原生并非把原先在物理服务器上跑的东西放到虚拟机里跑，真正的云化不仅是基础设施和平台的事情，应用也要做出改变，改变传统的做法，实现云化的应用
     </p>
    </blockquote>
    <blockquote>
     <p>
      ——应用的架构、应用的开发方式、应用部署和维护技术都要做出改变，真正的发挥云的弹性、动态调度、自动伸缩
     </p>
    </blockquote>
    <p>
     那么怎么实现云原生呢？云原生架构和云原生应用所涉及的技术很多，如容器技术、微服务、可持续交付、DevOps，这四点构成云原生的四要素。
    </p>
    <p>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/e4285482b41b4e5a21982a502f7349c6.png"/>
    </p>
    <p>
     image.png
    </p>
    <h4>
     3.1 微服务
    </h4>
    <p>
     一个微服务基本是一个能独立发布的应用服务，因此可以作为独立组件升级、灰度或复用等，对整个大应用的影响也较小，每个服务可以由专门的组织来单独完成，依赖方只要定好输入和输出口即可完全开发，甚至整个团队的组织架构也会更精简，因此沟通成本低、效率高。
    </p>
    <blockquote>
     <p>
      微服务的技术实现有著名spring cloud框架和正在大力发展的service mesh,比如istio,linkerd
     </p>
    </blockquote>
    <h4>
     3.2 devOps
    </h4>
    <p>
     DevOps如果从字面上来理解只是Dev（开发人员）+Ops（运维人员），实际上，它是一组过程、方法与系统的统称。DevOps强调的是高效组织团队之间如何通过自动化的工具协作和沟通来完成软件的生命周期管理，从而更快、更频繁地交付更稳定的软件。
    </p>
    <blockquote>
     <p>
      devOps方案有ansible，saltstack，Prometheus、Alertmanager - grafana等
     </p>
    </blockquote>
    <h4>
     3.3 持续交付
    </h4>
    <p>
     敏捷开发要求持续交付，因为敏捷开发要求随时有一个版本可以上到大群环境，所以要持续交付。持续交付目的的快速应对客户的需求变化，要求发布非常频繁，所以会存在多个版本同时提供服务的情况，因此需要支持灰度发布/金丝雀发布等
    </p>
    <blockquote>
     <p>
      持续交付方案包括gitlab，jenkins，tekton等
     </p>
    </blockquote>
    <h4>
     3.4 容器化
    </h4>
    <p>
     说起容器化，不得提docker。
     <br/>
     Docker是软件行业最受欢迎的软件容器项目，Docker起到应用隔离作用，为微服务及其所需的所有配置、依赖关系和环境变量移动到全新、无差别的运行环境，移植性强。但是docker对于分布式应用的部署和编排没有考虑，在网络和存储方式都没有提出比较好的方式，包括docker-compose。
     <br/>
     这个时候Kubernetes横空出世，可以说Kubernetes正在推动了云原生的流行和发展。Kubernetes是一个允许自动化部署、管理和伸缩容器的工具。它提供了一些强大的功能，例如容器之间的负载均衡，重启失败的容器以及编排容器使用的存储，极大方便了广大的开发者。
    </p>
    <h2>
     四、总结
    </h2>
    <p>
     云原生的DevOps、平台、持续交付、微服务都是云原生不可或缺的一部分。
     <br/>
     云原生不是一个产品，而是一套技术体系和一套方法论，随着云原生的大力发展，它必将成为未来的主流，进而影响到每一个技术人员，每一个企业，每一个行业，成为我们都必须掌握的基本技能。
    </p>
    <h3>
     <strong>
      云原生介绍
     </strong>
    </h3>
    <p>
     所谓云原生，它不是一个产品，而是一套技术体系和一套方法论，而数字化转型是思想先行，从内到外的整体变革。更确切地说，它是一种文化，更是一种潮流，是云计算的一个必然导向。
    </p>
    <h4>
     <strong>
      云原生概念
     </strong>
    </h4>
    <p>
     云原生（Cloud Native）的概念，由来自Pivotal的MattStine于2013年首次提出，被一直延续使用至今。
    </p>
    <p>
     这个概念是Matt Stine根据其多年的架构和咨询经验总结出来的一个思想集合，并得到了社区的不断完善，内容非常多，包括DevOps、持续交付（Continuous Delivery）、微服务（MicroServices）、敏捷基础设施（Agile Infrastructure）和12要素（The Twelve-Factor App）等几大主题，不但包括根据业务能力对公司进行文化、组织架构的重组与建设，也包括方法论与原则，还有具体的操作工具。采用基于云原生的技术和管理方法，可以更好地把业务生于“云”或迁移到云平台，从而享受“云”的高效和持续的服务能力。
    </p>
    <p>
     2018年CNCF重定义:云原生技术有利于各组织在公有云、 私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、 不可变基础设施和声明式API。结合可靠的自动化手段，云原生技术可进行频繁并可预测的变更。
    </p>
    <h4>
     <strong>
      云原生架构的几个主要特征：
     </strong>
    </h4>
    <ul>
     <li>
      符合１２因素应用
     </li>
     <li>
      面向微服务架构
     </li>
     <li>
      自服务敏捷架构
     </li>
     <li>
      基于API的协作
     </li>
     <li>
      抗脆弱性
     </li>
    </ul>
    <h4>
     <strong>
      ２０１５年谷歌主导下CNCF成立后，起初对云原生的定义包含以下三个方面：
     </strong>
    </h4>
    <ul>
     <li>
      应用容器化
     </li>
     <li>
      面向微服务的架构
     </li>
     <li>
      应用支持容器的编排调度
     </li>
    </ul>
    <p>
     <strong>
      ２０１８年重定义：
     </strong>
     <br/>
     云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括
     <strong>
      容器、服务网格、微服务、不可变基础设施和声明式API。
     </strong>
    </p>
    <h4>
     <strong>
      云原生设计理念
     </strong>
    </h4>
    <p>
     云原生系统的设计理念如下:
    </p>
    <ul>
     <li>
      面向分布式设计（Distribution）：容器、微服务、API驱动的开发；
     </li>
     <li>
      面向配置设计（Configuration）：一个镜像，多个环境配置；
     </li>
     <li>
      面向韧性设计（Resistancy）：故障容忍和自愈；
     </li>
     <li>
      面向弹性设计（Elasticity）：弹性扩展和对环境变化（负载）做出响应；
     </li>
     <li>
      面向交付设计（Delivery）：自动拉起，缩短交付时间；
     </li>
     <li>
      面向性能设计（Performance）：响应式，并发和资源高效利用；
     </li>
     <li>
      面向自动化设计（Automation）：自动化的 DevOps；
     </li>
     <li>
      面向诊断性设计（Diagnosability）：集群级别的日志、metric 和追踪；
     </li>
     <li>
      面向安全性设计（Security）：安全端点、API Gateway、端到端加密；
     </li>
    </ul>
    <h4>
     <strong>
      云原生四要素
     </strong>
    </h4>
    <p>
     云原生的四要素：持续交付、DevOps、微服务、容器
    </p>
    <p>
     <img alt="http://file.elecfans.com/web1/M00/65/B4/pIYBAFustJ-AQ0DBAAHmMkugodE389.png" height="319" src="https://i-blog.csdnimg.cn/blog_migrate/9e0ab0b91aafaac3833f40be1dbfb5f9.png" width="319"/>
    </p>
    <p>
     持续交付——缩小开发者认知，灵活开发方向
    </p>
    <p>
     微服务——内聚更强，更加敏捷
    </p>
    <p>
     容器技术——使资源调度、微服务更容易
    </p>
    <p>
     DevOps——以终为始，运维合一
    </p>
    <p>
     云原生的DevOps、容器技术、持续交付、微服务都是云原生不可或缺的一部分，需要以全局地眼光看待问题，脱离任何一个元素，对于企业来说都是“管中窥豹”、“一叶障目”，只有加以整合才能见到云原生的全局风貌。
    </p>
    <p>
     面对业态各异的业务上云以及碎片化的物联网解决方案部署，利用云原生思维和模式，构建基于云原生的物联网平台以及解决方案，势必将加速企业，甚至整个社会的数字化转型。
    </p>
    <h4>
     <a name="t4">
     </a>
     <strong>
      云原生应用的关键属性
     </strong>
    </h4>
    <p>
     <strong>
      1
     </strong>
     <strong>
      、打包为轻量级容器
     </strong>
     ：云原生应用程序是打包为轻量级容器的独立自治服务的集合。与虚拟机不同，容器可以快速扩缩容。将扩展单元转移到容器，能够优化基础架构利用率。
    </p>
    <p>
     <strong>
      2
     </strong>
     <strong>
      、使用最佳语言和框架开发
     </strong>
     ：云原生应用程序的每项服务都是使用最适合该功能的语言和框架开发的。云原生应用程序是多语言的，服务会使用各种不同的语言、运行时和框架。例如，开发人员可以构建基于在Node.js中开发的WebSockets的实时流服务，同时选择Python和Flask来暴露API。开发微服务的细粒度方法使它们能够为特定任务选择最佳语言和框架。
    </p>
    <p>
     <strong>
      3
     </strong>
     <strong>
      、设计为松耦合的微服务
     </strong>
     ：属于同一应用程序的服务通过应用程序运行时来发现彼此。它们独立于其他服务而存在。正确集成时，弹性基础架构和应用程序架构可以高效地、以高性能来进行扩展。
    </p>
    <p>
     松耦合的服务让开发人员可以在处理每个服务时都能够独立于其他服务来工作。通过这种分离，开发人员可以专注于每项服务的核心功能，以提供细粒度的功能。这种方法可以实现整个应用程序的有效生命周期管理，因为每个服务都是独立维护的，并且拥有明确的所有权。
    </p>
    <p>
     <strong>
      4
     </strong>
     <strong>
      、以API为中心进行交互和协作：
     </strong>
     云原生服务使用轻量级API，这些API基于REST、gRPC或NATS等协议。REST通常被用作通过HTTP公开API的最低公分母。为了提高性能，gRPC通常用于服务之间的内部通信。NATS具有发布-订阅功能，可在应用程序内实现异步通信。
    </p>
    <p>
     <strong>
      5
     </strong>
     <strong>
      、在架构中将无状态和有状态服务清晰分离：
     </strong>
     持久耐用的服务通常遵循不同的模式，以确保更高的可用性和弹性。无状态服务和有状态服务是彼此独立存在的。存储会影响容器的使用。我们必须越来越多地在有状态、无状态、微存储环境（这一点有些人可能觉得有争议）等不同语境下考虑持久性这一因素。
    </p>
    <p>
     <strong>
      6
     </strong>
     <strong>
      、与服务器和操作系统依赖关系隔离：
     </strong>
     云原生应用程序与任何特定操作系统或单个计算机没有关联。它们在更高的抽象级别上运行。唯一的例外是微服务需要某些功能，包括固态驱动器（SSD）和图形处理单元（GPU），这些功能可能由一部分机器专门提供。
    </p>
    <p>
     <strong>
      7
     </strong>
     <strong>
      、部署在自服务的弹性云基础架构上：
     </strong>
     云原生应用程序部署在虚拟的、共享的和弹性的基础架构上。它们可以与底层基础架构保持一致，以动态增长和缩小——根据不同的负载来自我调节。
    </p>
    <p>
     <strong>
      8
     </strong>
     <strong>
      、通过敏捷DevOps流程进行管理：
     </strong>
     云原生应用程序的每项服务都会经历一个独立的生命周期，通过敏捷的DevOps流程进行管理。多个持续集成／持续交付（CI / CD）流水线可以协同工作以部署和管理云原生应用程序。
    </p>
    <p>
     <strong>
      9
     </strong>
     <strong>
      、自动化功能：
     </strong>
     云原生应用程序可以高度自动化。它们与Infrastructure as Code的概念相得益彰。企业需要一定程度的自动化来管理大型和复杂的应用程序。
    </p>
    <p>
     <strong>
      10
     </strong>
     <strong>
      、定义的、策略驱动的资源分配：
     </strong>
     最后，云原生应用程序与通过一组策略定义的治理模型一致。它们遵循CPU和存储配额以及将资源分配给服务的网络策略等策略。例如，在企业方案中，中央IT可以定义策略来为每个部门分配资源。每个部门的开发人员和DevOps团队都拥有对其资源共享的完全访问权和所有权。
    </p>
    <h4>
     <a name="t5">
     </a>
     <strong>
      “云原生”应用价值
     </strong>
    </h4>
    <p>
     从CNCF的定义来看，采用基于云原生的技术和管理方法，将更好地把业务生于“云”或迁移到云平台，从而享受“云”的高效和持续服务能力。
    </p>
    <p>
     1）快速迭代
    </p>
    <p>
     利用云原生应用程序开发，意味着使用敏捷与可扩展的组件，如以Kubernetes为代表的容器来提供离散和可重用的功能，这些功能以良好描述的方式集成，甚至跨越多云等技术边界，这使得交付团队可以使用重复的自动化和编排来快速迭代。
    </p>
    <p>
     2）自动部署
    </p>
    <p>
     云原生方法远优于传统的面向虚拟化的业务流程，传统方法需要投入大量的精力来构建开发环境，以及软件交付过程中的其他不同环境。而云原生架构具备自动化和组合功能，并且依赖于可靠、经过验证和审核的已知良好流程的基础，交付十分敏捷，而不再需要人工干预重复执行。
    </p>
    <p>
     3）独立高效
    </p>
    <p>
     云原生带来了微服务化架构，一个微服务基本是一个能独立发布的应用服务，因此可以作为独立组件升级、灰度或复用等，对整个大应用的影响也较小，每个服务可以由专门的组织来单独完成，依赖方只要定好输入和输出口即可完全开发、甚至整个团队的组织架构也会更精简，因此沟通成本低、效率高。
    </p>
    <h4>
     <a name="t6">
     </a>
     <strong>
      云原生于中国市场
     </strong>
    </h4>
    <p>
     在中国市场，云原生仍然是一个较为新的概念，多数中国企业在云原生的专业知识、部署开发以及管理应用的能力仍不成熟。令人欣慰的是，在云原生道路上探索公有云厂商们已经做出了许多的努力，诸如AWS的ECS产品、用友云的PaaS基础平台等容器服务已经被许多用户所认可，而云管理服务商们也已充分意识到了云原生将是企业数字化转型的加速器。作为数字化转型的引领者，云管理服务商们正努力成为云原生的先行者，不断尝试并挖掘云原生的精髓所在，突破更多的云原生部署壁垒，以帮助企业快速构建云原生应用，实现微服务架构改造以及DevOps落地。
    </p>
    <p>
     随着云计算的大行其道，大家都在喊着要上云，云原生（Cloud Native）的概念应运而生，甚至国内外的大厂们还联合成立了云原生基金会CNCF（
     <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.cncf.io%2F" rel="nofollow">
      https://www.cncf.io/
     </a>
     ）。我们刚刚搞懂什么是移动互联网，云计算，微服务，那么什么是云原生呢? 把服务应用上云租个云服务器就是云原生了吗？当然不可能这样简单，那么笔者今天和大家聊聊什么是云原生吧。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33343839363139392f:61727469636c652f64657461696c732f313038353335363939" class_="artid" style="display:none">
 </p>
</div>


