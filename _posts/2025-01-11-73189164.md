---
layout: post
title: "高德地图API-JS实现获取坐标和回显点标记"
date: 2025-01-11 11:12:33 +0800
description: "1.搜索+选择+获取经纬度和详细地址2.回显数据并点标记3.实现第一步：引入资源文件根据需要引入第二"
keywords: "高德地图审图号返显"
categories: ['Java']
tags: ['无标签']
artid: "73189164"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=73189164
    alt: "高德地图API-JS实现获取坐标和回显点标记"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     高德地图API JS实现获取坐标和回显点标记
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     1.搜索+选择+获取经纬度和详细地址
    </p>
    <p>
     <img alt="" height="481" src="https://i-blog.csdnimg.cn/blog_migrate/f12c0e6e4d61b9f4e086889e6a944be6.png" width="795"/>
    </p>
    <p>
     2.回显数据并点标记
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ec57c811347ff870b11a175f5e0aed78.png"/>
    </p>
    <p>
     3.实现
    </p>
    <p>
     第一步：引入资源文件
    </p>
    <p>
     &lt;!--引入高德地图JSAPI --&gt;
     <br/>
     &lt;script src="//webapi.amap.com/maps?v=1.3&amp;key=在官网申请一个key"&gt;&lt;/script&gt;
     <br/>
     &lt;!--引入UI组件库（1.0版本） --&gt;
     <br/>
     &lt;script src="//webapi.amap.com/ui/1.0/main.js"&gt;&lt;/script&gt;
     <br/>
     &lt;script type="text/javascript" src="http://webapi.amap.com/demos/js/liteToolbar.js"&gt;&lt;/script&gt;
     <br/>
     &lt;script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"&gt;&lt;/script&gt;
     <br/>
     &lt;link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/&gt;
    </p>
    <p>
     根据需要引入
    </p>
    <p>
     第二步：代码
    </p>
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy">
      <a target="_blank" title="复制代码">
       <img alt="复制代码" src="https://i-blog.csdnimg.cn/blog_migrate/69c5a8ac3fa60e0848d784a6dd461da6.gif"/>
      </a>
     </span>
    </div>
    <pre><span style="color:#008080"> 1</span> <span style="color:#0000ff">var</span><span style="color:#000000"> map,addMarker;
</span><span style="color:#008080"> 2</span> <span style="color:#0000ff">var</span><span style="color:#000000"> geocoder;
</span><span style="color:#008080"> 3</span> <span style="color:#0000ff">var</span><span style="color:#000000"> placeSearch;
</span><span style="color:#008080"> 4</span> $(<span style="color:#0000ff">function</span><span style="color:#000000">(){
</span><span style="color:#008080"> 5</span>     <span style="color:#008000">//</span><span style="color:#008000"> 加入高的地图</span>
<span style="color:#008080"> 6</span>     map = <span style="color:#0000ff">new</span> AMap.Map('mymap'<span style="color:#000000">, {
</span><span style="color:#008080"> 7</span>            resizeEnable: <span style="color:#0000ff">true</span><span style="color:#008000">/*</span><span style="color:#008000"> ,
</span><span style="color:#008080"> 8</span> <span style="color:#008000">           zoom:11,
</span><span style="color:#008080"> 9</span> <span style="color:#008000">           center: [116.397428, 39.90923] </span><span style="color:#008000">*/</span>
<span style="color:#008080">10</span> <span style="color:#000000">    });
</span><span style="color:#008080">11</span>     AMap.plugin(['AMap.ToolBar','AMap.Scale'<span style="color:#000000">],
</span><span style="color:#008080">12</span>         <span style="color:#0000ff">function</span><span style="color:#000000">(){
</span><span style="color:#008080">13</span>             map.addControl(<span style="color:#0000ff">new</span><span style="color:#000000"> AMap.ToolBar());
</span><span style="color:#008080">14</span> 
<span style="color:#008080">15</span>             map.addControl(<span style="color:#0000ff">new</span><span style="color:#000000"> AMap.Scale());
</span><span style="color:#008080">16</span> <span style="color:#000000">    });
</span><span style="color:#008080">17</span>     AMap.service('AMap.Geocoder',<span style="color:#0000ff">function</span>(){<!-- --><span style="color:#008000">//</span><span style="color:#008000">回调函数</span>
<span style="color:#008080">18</span>         <span style="color:#008000">//</span><span style="color:#008000">实例化Geocoder</span>
<span style="color:#008080">19</span>         geocoder = <span style="color:#0000ff">new</span><span style="color:#000000"> AMap.Geocoder({
</span><span style="color:#008080">20</span>             city: "全国"<span style="color:#008000">//</span><span style="color:#008000">城市，默认：“全国”</span>
<span style="color:#008080">21</span> <span style="color:#000000">        });
</span><span style="color:#008080">22</span>         <span style="color:#008000">//</span><span style="color:#008000">TODO: 使用geocoder 对象完成相关功能</span>
<span style="color:#008080">23</span> <span style="color:#000000">    });
</span><span style="color:#008080">24</span>     <span style="color:#008000">//</span><span style="color:#008000"> 加载搜索列表</span>
<span style="color:#008080">25</span> <span style="color:#000000">    myMapViewLocation();
</span><span style="color:#008080">26</span>     AMap.service(["AMap.PlaceSearch"], <span style="color:#0000ff">function</span><span style="color:#000000">() {
</span><span style="color:#008080">27</span>             placeSearch = <span style="color:#0000ff">new</span> AMap.PlaceSearch({ <span style="color:#008000">//</span><span style="color:#008000">构造地点查询类</span>
<span style="color:#008080">28</span>             pageSize: 5<span style="color:#000000">,
</span><span style="color:#008080">29</span>             pageIndex: 1<span style="color:#000000">,
</span><span style="color:#008080">30</span>             city: "全国", <span style="color:#008000">//</span><span style="color:#008000">城市</span>
<span style="color:#008080">31</span> <span style="color:#000000">            map: map,
</span><span style="color:#008080">32</span>             panel: "panel"
<span style="color:#008080">33</span> <span style="color:#000000">        });
</span><span style="color:#008080">34</span> <span style="color:#000000">    });
</span><span style="color:#008080">35</span>     <span style="color:#008000">//</span><span style="color:#008000">为地图注册click事件获取鼠标点击出的经纬度坐标</span>
<span style="color:#008080">36</span>     <span style="color:#0000ff">var</span> clickEventListener = map.on('click', <span style="color:#0000ff">function</span><span style="color:#000000">(e) {
</span><span style="color:#008080">37</span>         $("input[name=lon]"<span style="color:#000000">).val(e.lnglat.lng);
</span><span style="color:#008080">38</span>         $("input[name=lat]"<span style="color:#000000">).val(e.lnglat.lat);
</span><span style="color:#008080">39</span>         <span style="color:#008000">//</span><span style="color:#008000"> 填写地址</span>
<span style="color:#008080">40</span> <span style="color:#000000">        writeAddress([e.lnglat.lng,e.lnglat.lat]);
</span><span style="color:#008080">41</span> <span style="color:#000000">    });
</span><span style="color:#008080">42</span>     <span style="color:#008000">//</span><span style="color:#008000">placeSearch.search("北京");</span>
<span style="color:#008080">43</span>     $("#mymap_search").on("keydown",<span style="color:#0000ff">function</span><span style="color:#000000">(event){
</span><span style="color:#008080">44</span>         <span style="color:#0000ff">if</span>(event = event ||<span style="color:#000000"> window.event){
</span><span style="color:#008080">45</span>             <span style="color:#0000ff">if</span>(event.keyCode==13<span style="color:#000000">){
</span><span style="color:#008080">46</span> <span style="color:#000000">                mapsearch();
</span><span style="color:#008080">47</span> <span style="color:#000000">            }
</span><span style="color:#008080">48</span> <span style="color:#000000">        }
</span><span style="color:#008080">49</span> <span style="color:#000000">    });
</span><span style="color:#008080">50</span> <span style="color:#000000">});
</span><span style="color:#008080">51</span> <span style="color:#008000">//</span><span style="color:#008000">地图搜索</span>
<span style="color:#008080">52</span> <span style="color:#0000ff">function</span><span style="color:#000000"> mapsearch(){
</span><span style="color:#008080">53</span>     <span style="color:#0000ff">var</span> searchVal = $("#mymap_search"<span style="color:#000000">).val();
</span><span style="color:#008080">54</span> <span style="color:#000000">    placeSearch.search(searchVal);
</span><span style="color:#008080">55</span> <span style="color:#000000">}
</span><span style="color:#008080">56</span> <span style="color:#008000">//</span><span style="color:#008000"> 回显</span>
<span style="color:#008080">57</span> <span style="color:#0000ff">function</span><span style="color:#000000"> myMapViewLocation(){
</span><span style="color:#008080">58</span>     <span style="color:#008000">//</span><span style="color:#008000">console.log("回显坐标");</span>
<span style="color:#008080">59</span>     <span style="color:#0000ff">var</span> mlon = $("input[name=lon]"<span style="color:#000000">).val();
</span><span style="color:#008080">60</span>     <span style="color:#0000ff">var</span> mlat = $("input[name=lat]"<span style="color:#000000">).val();
</span><span style="color:#008080">61</span>     <span style="color:#0000ff">var</span> lnglatXY =<span style="color:#000000"> [mlon,mlat];
</span><span style="color:#008080">62</span>     <span style="color:#0000ff">if</span>(mlon&amp;&amp;<span style="color:#000000">mlat){
</span><span style="color:#008080">63</span> <span style="color:#000000">        addMarker(lnglatXY);
</span><span style="color:#008080">64</span> <span style="color:#000000">    }
</span><span style="color:#008080">65</span> <span style="color:#000000">}
</span><span style="color:#008080">66</span> <span style="color:#008000">//</span><span style="color:#008000"> 实例化点标记</span>
<span style="color:#008080">67</span> <span style="color:#0000ff">function</span><span style="color:#000000"> addMarker(lnglatXY) {
</span><span style="color:#008080">68</span>     <span style="color:#008000">//</span><span style="color:#008000">console.log(lnglatXY);</span>
<span style="color:#008080">69</span>     marker = <span style="color:#0000ff">new</span><span style="color:#000000"> AMap.Marker({
</span><span style="color:#008080">70</span>         icon: "http://webapi.amap.com/theme/v1.3/markers/n/mark_b.png"<span style="color:#000000">,
</span><span style="color:#008080">71</span> <span style="color:#000000">        position: lnglatXY
</span><span style="color:#008080">72</span> <span style="color:#000000">    });
</span><span style="color:#008080">73</span> <span style="color:#000000">    marker.setMap(map);
</span><span style="color:#008080">74</span>     map.setFitView();<span style="color:#008000">//</span><span style="color:#008000"> 执行定位</span>
<span style="color:#008080">75</span> <span style="color:#000000">}
</span><span style="color:#008080">76</span> <span style="color:#008000">//</span><span style="color:#008000"> 填写地址</span>
<span style="color:#008080">77</span> <span style="color:#0000ff">function</span><span style="color:#000000"> writeAddress(lnglatXY){
</span><span style="color:#008080">78</span>     geocoder.getAddress(lnglatXY, <span style="color:#0000ff">function</span><span style="color:#000000">(status, result) {
</span><span style="color:#008080">79</span>         <span style="color:#0000ff">if</span> (status === 'complete' &amp;&amp; result.info === 'OK'<span style="color:#000000">) {
</span><span style="color:#008080">80</span> <span style="color:#000000">            geocoder_CallBack(result);
</span><span style="color:#008080">81</span> <span style="color:#000000">        }
</span><span style="color:#008080">82</span> <span style="color:#000000">    }); 
</span><span style="color:#008080">83</span> <span style="color:#000000">}
</span><span style="color:#008080">84</span> <span style="color:#008000">//</span><span style="color:#008000"> 地址回调</span>
<span style="color:#008080">85</span> <span style="color:#0000ff">function</span><span style="color:#000000"> geocoder_CallBack(data) {
</span><span style="color:#008080">86</span>     <span style="color:#0000ff">var</span> address = data.regeocode.formattedAddress; <span style="color:#008000">//</span><span style="color:#008000">返回地址描述</span>
<span style="color:#008080">87</span>     $("input[name=resourceAddress]"<span style="color:#000000">).val(address);
</span><span style="color:#008080">88</span> }</pre>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f6a757374646f69745f706f7461746f:2f61727469636c652f64657461696c732f3733313839313634" class_="artid" style="display:none">
 </p>
</div>


