---
layout: post
title: "一个机器上安装两个数据库,在连接数据库时怎么通过端口号连接指定数据库"
date: 2023-06-21 15:41:20 +0800
description: "最近在研究问题时，无意间遇到了这个问题（如题），之前一直都是在自己的笔记本电脑SQLServer20"
keywords: "安装两个 数据库 连接字符串"
categories: ['数据库']
tags: ['数据库连接', '指定端口号', 'Sql', 'Server']
artid: "47683497"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=47683497
    alt: "一个机器上安装两个数据库,在连接数据库时怎么通过端口号连接指定数据库"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     一个机器上安装两个数据库，在连接数据库时怎么通过端口号连接指定数据库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <span style="font-size:14px">
      最近在研究问题时，无意间遇到了这个问题（如题），之前一直都是在自己的笔记本电脑SQLServer2008上测试的，但是今天突然想要连接工作室的电脑上的数据库，把连接字符串的连接地址写成了工作室的IP,点击运行程序，半天没有反应，然后直接报错，没有可用数据，开始是连接用户名和密码写错了，和自己笔记本上的用户名和密码不一样，修改以后还是却报错了，没有数据，想了半天原因，突然想到会不会是我的机器上安装了sql2008和sql2012两个数据库导致的，然后就开始分析，找了很多相关的材料和相关的问题，发现确实是因为这个原因，我以为程序会直接连到sql2012上，所以要连接的数据库名写的是sql2012数据库中的DBText数据库，经过了几个小时的分析之后才搞明白原因，我是先安装的sql2008，默认端口是1433，然后再安装的sql2012，sqlserver默认是占用1433端口，但是因为sql2008已经占用，所以sql2012占用了3153端口，而如果正常连接数据库在指定数据所在服务器的IP地址时通常习惯只写IP，不会写端口号，也可以连接，但是机器上安装了两个数据，引擎也不知道要连哪个，所以如果直接写ip地址，而没有指定端口号，连接的是你首先安装在电脑上的那个数据库，我的首先连接的就是sql2008，而如果你指定端口号之后，程序就会按照你的设置去连接，比如我的机器sql2012占用端口号是3153，有的朋友可能不知道在哪里查看占用端口号，这里我们可以在管理工具当中新建查询，输入：
      <span style="line-height:20px; white-space:pre-wrap">
       <span style="word-wrap:normal; word-break:normal; line-height:19px">
        exec sys.sp_readerrorlog 0, 1, 'listening'
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="font-size:13px; line-height:20px; white-space:pre-wrap">
      <br/>
     </span>
    </p>
    <p>
     <span style="font-size:13px; line-height:20px; white-space:pre-wrap">
      <img alt="" src="https://img-blog.csdn.net/20150815174308935?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center">
       <br/>
      </img>
     </span>
    </p>
    <p>
     <span style="font-size:13px; line-height:20px; white-space:pre-wrap">
      <br/>
     </span>
    </p>
    <p>
     <span style="line-height:20px; white-space:pre-wrap">
      <span style="font-size:14px">
       这里我们可以看到，显示占用端口为3153，那么我们将数据库连接字符串中指定数据库所在服务器名称由默认
      </span>
      <span style="font-size:14px">
       data source = 60.20.8.157
      </span>
      <span style="font-size:14px">
       改为
      </span>
      <span style="font-size:14px">
       data source =
      </span>
      <span style="font-size:14px; line-height:20px; white-space:pre-wrap">
       <strong>
        60.20.8.157，3153
       </strong>
       就可以了，这里大家要看清楚，一定要看清楚，IP地址和端口号之间是“
      </span>
      <span style="line-height:20px; white-space:pre-wrap">
       <span style="font-size:24px">
        <strong>
         ，
        </strong>
       </span>
      </span>
      <span style="font-size:14px; line-height:20px; white-space:pre-wrap">
       ”号。而不是“
      </span>
      <span style="line-height:20px; white-space:pre-wrap">
       <span style="font-size:24px">
        <strong>
         ：
        </strong>
       </span>
      </span>
      <span style="font-size:14px; line-height:20px; white-space:pre-wrap">
       ”号！！！！！！！这个一定要看好，通常在指定端口时采用的是冒号，但是这里用的是逗号！！！！！！！！！
      </span>
     </span>
    </p>
    <p>
     <span style="font-size:14px">
      <span style="line-height:20px; white-space:pre-wrap">
       至此，你就可以任意指定你要连接的是某台机器上的哪个数据库了，解决方法肯可能不一定适用所有人的情况，希望对大家有帮助！
      </span>
     </span>
    </p>
    <p>
     <span style="line-height:20px; white-space:pre-wrap">
      <span style="font-size:14px">
       <span style="font-size:14px; line-height:20px; white-space:pre-wrap">
        <br/>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="line-height:20px; white-space:pre-wrap">
      <span style="font-size:14px">
       <span style="font-size:14px; line-height:20px; white-space:pre-wrap">
        <br/>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span style="line-height:20px; white-space:pre-wrap">
      <span style="font-size:14px">
       <span style="font-size:14px; line-height:20px; white-space:pre-wrap">
        <br/>
       </span>
      </span>
     </span>
    </p>
    <p>
     <br/>
    </p>
    <p>
     <span style="font-size:13px; line-height:20px; white-space:pre-wrap">
      <br/>
     </span>
    </p>
    <p>
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f75303134313830353034:2f61727469636c652f64657461696c732f3437363833343937" class_="artid" style="display:none">
 </p>
</div>


