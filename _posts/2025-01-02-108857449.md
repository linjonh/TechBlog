---
layout: post
title: "微信小程序-使用-vant-weapp-之后的分包优化"
date: 2025-01-02 20:55:30 +0800
description: "本文介绍了在开发微信小程序时遇到的因 vant-weapp 导致的包体积过大的问题，以及如何通过官方"
keywords: "小程序引用vant超大小"
categories: ['小程序之旅']
tags: ['小程序']
artid: "108857449"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=108857449
    alt: "微信小程序-使用-vant-weapp-之后的分包优化"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序-使用 vant-weapp 之后的分包优化
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     背景
    </h2>
    <p>
     在开发中引入了
     <code>
      vant-weapp
     </code>
     导致项目包过大，真机调试不了，也上传不了，所以只能分包加载了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a14aa2456fbb5bcdbbd8fda365bf7c91.png#pic_center"/>
    </p>
    <h2>
     <a id="_5">
     </a>
     实现
    </h2>
    <p>
     首先就是根据官方文档进行分包
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e44db721482f7e17851bfae58f58aaa7.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a3ac0fdd6e9eea6f8fab95f8500a7ba9.png#pic_center"/>
    </p>
    <p>
     但是有可能包体积还是过大，这时候只能进入到
     <code>
      vant-weapp
     </code>
     库的目录下，删除不必要的组件了。
     <br/>
     我们在用
     <code>
      npm
     </code>
     安装
     <code>
      vant-weapp
     </code>
     构建后会生成两个文件夹
    </p>
    <p>
     这两个文件的区别，官网也说明了：
     <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html#Tips" rel="nofollow">
      原理介绍
     </a>
    </p>
    <blockquote>
     <p>
      node_modules 目录不会参与编译、上传和打包中
      <br/>
      miniprogram_npm 目录，里面会存放构建打包后的 npm 包，也就是小程序真正使用的 npm 包。
     </p>
    </blockquote>
    <p>
     在
     <code>
      miniprogram_npm
     </code>
     中找到
     <code>
      vant-weapp
     </code>
     库，删除一些没用到的组件。最后记得在开发者工具中点击
     <code>
      编译
     </code>
     ，或者重启开发者工具自动编译，才能看到分包后各个包的大小。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dea4ffc1bb71d1a9057ecb77d857edf5.png#pic_center"/>
    </p>
    <h2>
     <a id="_25">
     </a>
     注意事项
    </h2>
    <ul>
     <li>
      路径问题：分包之后，页面跳转路径，图片路径，以及 templates 模板的路径都要检查。
     </li>
    </ul>
    <h2>
     <a id="_28">
     </a>
     参考
    </h2>
    <ul>
     <li>
      <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html" rel="nofollow">
       使用分包
      </a>
     </li>
     <li>
      <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html#Tips" rel="nofollow">
       miniprogram_npm 和 nodes_modules 文件夹的区别
      </a>
     </li>
     <li>
      <a href="https://www.jianshu.com/p/4ba9f59ed5e4" rel="nofollow">
       微信小程序 - 分包加载使用注意事项
      </a>
     </li>
     <li>
      <a href="https://juejin.im/post/6844904181774417928#heading-1" rel="nofollow">
       小程序实战(十二)-分包加载
      </a>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f49547869616f646f6e672f:61727469636c652f64657461696c732f313038383537343439" class_="artid" style="display:none">
 </p>
</div>


