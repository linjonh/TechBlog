---
layout: post
title: "Element-Plus-表格后端排序"
date: 2022-08-12 11:19:56 +0800
description: "文章浏览阅读4.1k次，点赞2次，element、element plus 表格tabel后端排序，"
keywords: "element plus 表格排序"
categories: ['前端', 'Vue']
tags: ['开发语言', '前端', 'Javascript']
artid: "126299491"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=126299491
    alt: "Element-Plus-表格后端排序"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Element Plus 表格后端排序
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      element 表格后端排序（element和element plus通用）
     </h4>
     <ul>
      <li>
       <a href="#_2" rel="nofollow">
        问题
       </a>
      </li>
      <li>
       <a href="#_6" rel="nofollow">
        解决方法
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_2">
     </a>
     问题
    </h2>
    <p>
     element排序采用官方给出的方案，按部就班后的产生的问题是：给出的排序有三种状态，
     <code>
      descending
     </code>
     、
     <code>
      ascending
     </code>
     和
     <code>
      null
     </code>
     但是我只需要前面两种，目前的效果如下：
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ff725c0df6af41d2b892451219079fff.gif#pic_center"/>
    </p>
    <h2>
     <a id="_6">
     </a>
     解决方法
    </h2>
    <p>
     使用两个变量分别保存上一次为null时的prop和 保存之前的排序状态，实现效果：
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/cedc31f52c2a2fbecd6b7eb6ba92f4cd.gif#pic_center"/>
    </p>
    <p>
     <strong>
      代码：
     </strong>
    </p>
    <p>
     html：
    </p>
    <pre><code> &lt;el-table
          :data="dataObj.dataList"
          ref="multipleTable"
          slot="empty"
          :height="tableHeight"
          @sort-change="colChange"
          :sort-orders="['ascending', 'descending']"
          :default-sort="{prop: 'id', order: 'descending'}"
          :cell-class-name="rowClass"
      &gt;
</code></pre>
    <p>
     js（vue3的写法）
    </p>
    <pre><code>  const dataObj = reactive({
      searchObj: {
        id: '',
        planName: '',
        createUser: '',
        status: undefined,
        orderBy: 'id',
        orderType: 'desc',
      },
      dataList: [],
      searchPage: {
        pageSize: 10,
        pageNum: 1,
      },
      prevProp: 'id', // 保存上一次为null时的prop
      saveSort: 'descending',  // 保存之前的排序状态
    })
</code></pre>
    <pre><code>	// 排序
    const colChange = ({column, prop, order}) =&gt; {
      if (order &amp;&amp; dataObj.prevProp !== prop) {
        dataObj.prevProp = prop
      }
      if (!order) {
        order = dataObj.saveSort === 'descending' ? 'ascending' : 'descending'
        that.$refs.multipleTable.sort(dataObj.prevProp, order)
        prop = dataObj.prevProp
      }
      dataObj.saveSort = order
      dataObj.searchObj.orderBy = prop
      dataObj.searchObj.orderType = dataObj.saveSort === 'descending' ? 'desc' : 'asc'
      if (column) getDataList() // 获取数据的方法
    }
    // 重置
    const resetData = () =&gt; {
      dataObj.searchPage.pageSize = 10
      dataObj.searchPage.pageNum = 1
      dataObj.searchObj = {}
      that.$refs.multipleTable.sort('id', 'descending')
    }
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323931323233372f:61727469636c652f64657461696c732f313236323939343931" class_="artid" style="display:none">
 </p>
</div>


