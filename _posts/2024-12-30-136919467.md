---
layout: post
title: "西门子-S7-200-SMART-系列九一文读懂s7-200-SMART-CPU作客户端与s7-12001500的s7通信"
date: 2024-12-30 15:44:59 +0800
description: "经过测试s7-200 smart 能够实现与s7-1200 /1500的s7通信，s7-200 sm"
keywords: "1500与200smarts7通讯"
categories: ['西门子', '西门子', 'Smart', '200']
tags: ['自动化', '网络', '经验分享']
artid: "136919467"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=136919467
    alt: "西门子-S7-200-SMART-系列九一文读懂s7-200-SMART-CPU作客户端与s7-12001500的s7通信"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     西门子 S7-200 SMART 系列九：一文读懂s7-200 SMART CPU作客户端与s7-1200/1500的s7通信
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     原文链接：
     <a href="https://www.ics-pedia.com/%E4%B8%80%E6%96%87%E8%AF%BB%E6%87%82s7-200-smart-cpu%E4%BD%9C%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8Es7-1200-1500%E7%9A%84s7%E9%80%9A%E4%BF%A1/" rel="nofollow">
      ics-pedia.com/一文读懂s7-200-smart-cpu作客户端与s7-1200-1500的s7通信/
     </a>
    </p>
    <h3>
     <a id="s7200_smart__s712001500_S7__1">
     </a>
     s7-200 smart 做客户端实现与 s7-1200/1500 S7 通信
    </h3>
    <p>
     <img alt="image-20240321144244041" src="https://i-blog.csdnimg.cn/blog_migrate/430d6b861ff34e0a88630084b6bf2aa0.png"/>
    </p>
    <p>
     在上期文章中，与大家分享如何使用向导实现s7-200 smart 与 s7-200 smart cpu 之间的S7单边通信，相信有不少小伙伴已经动手实践过了，学习PLC就是需要不断的实践，才能不断发现问题，解决问题，提升技能，所以还没有行动的小伙伴赶快行动起来吧。（文章结尾有往期文章链接）
    </p>
    <p>
     还有小伙伴可能会问，那s7-200 smart 能否实现与s7-1200/1500,甚至s7-300/400通讯呢?答案是肯定的。
    </p>
    <p>
     经过测试s7-200 smart 能够实现与s7-1200 /1500的s7通信，s7-200 smart 即可以作为客户端也可以作为服务端使用，但是在与s7-300/400的通信中，s7-200 smart只能作为服务端使用，必须由s7-300/400侧发起PUT/GET通讯（原因可能与TSAP有关，有兴趣的小伙伴可以研究下）s7-300/400侧的PUT/GET通讯将在s7-300/400专题中分享，本期主要分享s7-200 smart 作为客户端与s7-1200/1500 之间的单边通讯；
    </p>
    <p>
     <strong>
      注：在工业通讯中，通常把发起请求的一端称为“客户端”，提供数据的一端称为“服务端”；例如：s7-200 smart 与 s7-1200 通讯，如果s7-200 smart发起PUT/GET请求，我们就称s7-200 smart 为客户端，s7-1200 为服务端；同样，如果由s7-1200发起PUT/GET,我们就称s7-1200为客户端，s7-200 smart为服务端；
     </strong>
    </p>
    <table>
     <tbody>
      <tr>
       <td>
        一
       </td>
       <td>
        s7-200 smart 作客户端 与 S7-1200/1500的S7单边通讯
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     上期文章中讲到，在s7通信中，只需要在客户端组态相应通讯参数和通讯程序，在服务端仅需把数据放入相应的存储区即可。因此接回上篇文章，我们保持s7-200 smart 侧通讯程序不变（
     <strong>
      没看过的小伙伴，可先查看上篇文章
     </strong>
     ），只是把远端plc(服务端)由s7-200 smart 更换为s7-1200/1500来为大家分享。
    </p>
    <p>
     有的小伙伴可能有疑惑，前面不是说服务端仅需要把数据放入相应存储区（上篇文章组态的远端存储区VB100
     <sub>
      VB107）就可以了，还需要讲什么？对了，本期就是讲讲**怎么把s7-1200/1500的数据放入VB100
     </sub>
     VB107里面**；
    </p>
    <p>
     有使用过s7-1200或者s7-1500的小伙伴都知道，在s7-1200和s7-1500中没有V存储区，只有M存储区和DB块，那该怎么办呢？这个问题西门子研发人员已经考虑过了，即
     <strong>
      在S7-1200/1500中使用DB1作为对应的V区使用，即VB100
      <sub>
       VB07对应s7-1200/1500中DB1.DB100
      </sub>
      DB1.DBB107
     </strong>
     ,以S7-1200 CPU 1214C来讲解，步骤如下：
    </p>
    <ol>
     <li>
      <p>
       打开TIA Portal创建新项目,并打开项目视图
      </p>
      <p>
       <img alt="image-20240321111727743" src="https://i-blog.csdnimg.cn/blog_migrate/abce8e4cabd8e5ee902b13493caa8bba.png"/>
      </p>
     </li>
     <li>
      <p>
       添加新设备
      </p>
      <p>
       <img alt="image-20240321112023416" src="https://i-blog.csdnimg.cn/blog_migrate/08c290ea36d1e88a491b1cf2b98e32c3.png"/>
      </p>
     </li>
     <li>
      <p>
       为控制器分配IP地址（192.168.2.101）与 s7-200 smart plc 同网段
      </p>
      <p>
       <img alt="image-20240321112520127" src="https://i-blog.csdnimg.cn/blog_migrate/b3eadcd4905c5f8c3165a3c8c5d07372.png"/>
      </p>
     </li>
     <li>
      <p>
       在DB1中创建8个Byte变量，此处以VB100~VB107命名；
       <strong>
        注：建议大家在DB块中使用结构体来新建变量，能够保持程序的模块化和可读性；
       </strong>
      </p>
      <p>
       <img alt="image-20240321114621436" src="https://i-blog.csdnimg.cn/blog_migrate/2e6381d388fa83fcc9dce66e666d1b31.png"/>
      </p>
     </li>
     <li>
      <p>
       有小伙伴发现我们新建的DB块里面没有地址，那要怎么对应呢？接下来需要开启取消勾选块“优化访问”，即出来便移量列，对应绝对地址；
      </p>
     </li>
    </ol>
    <p>
     <img alt="image-20240321135010291" src="https://i-blog.csdnimg.cn/blog_migrate/6a90fce4a2aed57d754a12ebfba5ca9e.png"/>
    </p>
    <ol start="6">
     <li>
      <p>
       点击编译，即可看到绝对地址;
      </p>
      <p>
       <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/b9ca0b5abc324ddc15b9a59d50a5862e.png"/>
      </p>
      <p>
       <strong>
        注意：优化块访问和取消优化块访问的区别在与寻址方式不一样；
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <strong>
          优化块访问：通过符号寻址 例如：“Test_Data”.SendToSmart.VB100
         </strong>
        </p>
       </li>
       <li>
        <p>
         <strong>
          取消优化块访问：通过绝对地址 例如：DB1.DBB100
         </strong>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       由于我们需要的是DB1.dbb100~DB1.Dbb107,所以需要在数据块前面插入占位符(实际应用中，可用作其它用途)用数组代替；
      </p>
      <p>
       <img alt="image-20240321140058108" src="https://i-blog.csdnimg.cn/blog_migrate/7dd6f74f364f4887a353ceb8730846c5.png"/>
      </p>
     </li>
     <li>
      <p>
       很多小伙伴做到这一步，就结束了，但往往在实际应用的时候总是连接不上，又找不到问题。实际上是少了一步
       <strong>
        修改连接机制
       </strong>
       ；S7-1200 作为服务器进行 S7 通信，对于 CPU V4.0以后的固件版本，需要勾选“允许来自远程对象的PUT/GET通信访问”，否者，无法建立通信
      </p>
      <p>
       <img alt="image-20240321141606475" src="https://i-blog.csdnimg.cn/blog_migrate/2738a55a8189e08a9a19455022f78d74.png"/>
      </p>
      <p>
       <strong>
        注：s7-1200/1500 与 西门子 精简（smart系列）触摸屏通讯时，同样需要勾选“允许来自远程对象的PUT/GET通信访问”，否则无法建立连接；
       </strong>
      </p>
     </li>
    </ol>
    <table>
     <tbody>
      <tr>
       <td>
        二
       </td>
       <td>
        s7-200 smart 单边S7通讯总结
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     至些s7-200 smart 做为客户端(client)的s7单边通信及s7-200 smart / s7-1200/1500作为服务端的配置都已经分享完毕，看似挺复杂，其实只要抓住关键点大部分都可以成功通讯；总结如下：
    </p>
    <ul>
     <li>
      <strong>
       谁发起请求，谁就是客户端；谁提供数据，谁就是服务端；
      </strong>
     </li>
     <li>
      <strong>
       客户端需要编写通讯请求程序，服务端不需要编写通讯请求程序；
      </strong>
     </li>
     <li>
      <strong>
       s7-200 smart 通讯V存储区，对应s7-300/400/1200/1500都是DB1
      </strong>
     </li>
     <li>
      <strong>
       s7-1200/1500 块的优化访问需取消，用绝对地址访问；
      </strong>
     </li>
     <li>
      <strong>
       s7-1200/1500 连接机制勾选不要忘记允许请求；
      </strong>
     </li>
    </ul>
    <table>
     <tbody>
      <tr>
       <td>
        三
       </td>
       <td>
        结语
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      如果您觉得文章对您有帮助，欢迎评论、点赞、收藏，加关注！您的支持将是小编最大动力！
     </strong>
    </p>
    <p>
     <strong>
      下载方式：关注公众号，在公众号回复“10003”，获取下载连接
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f4a6f686e5f30393034303231312f:61727469636c652f64657461696c732f313336393139343637" class_="artid" style="display:none">
 </p>
</div>


