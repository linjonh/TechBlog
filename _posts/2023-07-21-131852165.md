---
layout: post
title: "Docker构建Java镜像并部署Java项目"
date: 2023-07-21 16:03:35 +0800
description: "本文详细阐述了如何利用Docker创建一个基于eclipse-te"
keywords: "docker java镜像"
categories: ['Linux']
tags: ['容器', 'Java', 'Docker']
artid: "131852165"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=131852165
    alt: "Docker构建Java镜像并部署Java项目"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Docker构建Java镜像并部署Java项目
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#1__5" rel="nofollow">
          1. 准备工作
         </a>
        </li>
        <li>
         <a href="#2_Dockerfile_11" rel="nofollow">
          2. 创建Dockerfile
         </a>
        </li>
        <li>
         <a href="#3__46" rel="nofollow">
          3. 构建镜像
         </a>
        </li>
        <li>
         <a href="#4__62" rel="nofollow">
          4. 查看镜像是否构建成功
         </a>
        </li>
        <li>
         <a href="#5__70" rel="nofollow">
          5. 运行容器
         </a>
        </li>
        <li>
         <a href="#6_Java_90" rel="nofollow">
          6. 访问Java服务
         </a>
        </li>
        <li>
         <a href="#7__95" rel="nofollow">
          7. 总结
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <p>
     本文介绍了如何使用Docker构建一个Java项目的镜像，并以后端项目为例进行演示。在这个例子中，我们将使用
     <code>
      eclipse-temurin:8-jre
     </code>
     作为基础镜像，并创建一个可以运行Java项目的Docker镜像。
    </p>
    <h3>
     <a id="1__5">
     </a>
     1. 准备工作
    </h3>
    <p>
     在开始之前，我们需要做一些准备工作。首先，确保你已经安装了Docker，并具有构建和运行Docker镜像的权限。
    </p>
    <p>
     接下来，我们需要准备Java项目的可执行JAR文件。假设我们的Java项目构建后的可执行JAR文件位于
     <code>
      ./wms-admin/target/code-safe.jar
     </code>
     。我们将在Docker镜像中将该JAR文件复制到容器中，并在容器中运行它。
    </p>
    <h3>
     <a id="2_Dockerfile_11">
     </a>
     2. 创建Dockerfile
    </h3>
    <p>
     在项目根目录下创建一个名为
     <code>
      Dockerfile
     </code>
     的文件，并使用以下内容：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 指定基础镜像</span>
FROM eclipse-temurin:8-jre

<span class="token comment"># 在镜像中执行命令,创建目录，并使用它作为工作目录</span>
RUN <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /project
<span class="token comment"># 设置工作目录，即后续命令的默认执行路径</span>
WORKDIR /project
<span class="token comment"># 复制文件或目录到镜像中。可以将本地文件或目录复制到镜像的指定位置。</span>
COPY ./code-safe.jar /project/code-safe.jar

<span class="token comment"># 设置环境变量</span>
<span class="token comment"># 指定容器的时区</span>
ENV <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai
<span class="token comment"># 用于配置 Java 虚拟机的选项，如初始堆大小、最大堆大小和随机数生成器，可通过 docker run -e "JAVA_OPTS=" 进行覆盖</span>
ENV <span class="token assign-left variable">JAVA_OPTS</span><span class="token operator">=</span><span class="token string">"-Xms512m -Xmx1024m -Djava.security.egd=file:/dev/./urandom"</span>
<span class="token comment">## 应用参数</span>
ENV <span class="token assign-left variable">ARGS</span><span class="token operator">=</span><span class="token string">""</span>

<span class="token comment"># 定义容器启动后执行的命令,启动后端项目</span>
CMD <span class="token function">java</span> <span class="token variable">${JAVA_OPTS}</span> <span class="token parameter variable">-jar</span> code-safe.jar <span class="token variable">$ARGS</span>

<span class="token comment"># 声明要监听的端口</span>
EXPOSE <span class="token number">16000</span>
</code></pre>
    <p>
     在这个Dockerfile中，我们使用
     <code>
      eclipse-temurin:8-jre
     </code>
     作为基础镜像。然后，我们创建一个工作目录/project，并将Java项目的可执行JAR文件复制到容器中的该目录下。
    </p>
    <p>
     接下来，我们设置了一些环境变量，用于配置Java虚拟机的选项和应用参数。其中，JAVA_OPTS用于配置Java虚拟机的一些选项，如初始堆大小和最大堆大小。我们还定义了一个ARGS环境变量，用于传递应用程序的命令行参数。
    </p>
    <p>
     最后，我们使用CMD指令定义容器启动后要执行的命令。在这个例子中，我们将以
     <code>
      ${JAVA_OPTS}
     </code>
     和
     <code>
      ${ARGS}
     </code>
     为参数启动Java应用程序。
    </p>
    <h3>
     <a id="3__46">
     </a>
     3. 构建镜像
    </h3>
    <ol>
     <li>
      准备好资源
     </li>
     <li>
      将资源
      <code>
       jar包
      </code>
      ,
      <code>
       Dockerfile
      </code>
      放在同一个目录中
     </li>
     <li>
      使用docker build命令来构建我们的Java镜像
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">docker</span> build <span class="token parameter variable">-t</span> <span class="token function">java</span> <span class="token builtin class-name">.</span>
</code></pre>
    <blockquote>
     <p>
      其中，-t选项指定镜像的名称为java，.表示Dockerfile所在的当前目录。
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/33a655a704fedf21f5f6ec06f5ce23ed.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c0e7bfa60dee4d1a373ea019b3e5b912.png"/>
    </p>
    <h3>
     <a id="4__62">
     </a>
     4. 查看镜像是否构建成功
    </h3>
    <pre><code class="prism language-bash"><span class="token function">docker</span> images
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5d881a4b915096cb91576b5933df584b.png"/>
    </p>
    <h3>
     <a id="5__70">
     </a>
     5. 运行容器
    </h3>
    <p>
     完成镜像的构建后，我们可以使用docker run命令来运行容器：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">16000</span>:16000 <span class="token parameter variable">--name</span> myjava java:latest
</code></pre>
    <blockquote>
     <p>
      -d参数表示以后台方式运行容器
      <br/>
      -p 16000:16000参数表示将容器的16000端口映射到主机的16000端口
      <br/>
      –name myjava 参数表示为容器指定一个名字。
     </p>
    </blockquote>
    <p>
     查看容器是否运行成功
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2cbf6163a231b7edd90a4b425a5e192f.png"/>
    </p>
    <h3>
     <a id="6_Java_90">
     </a>
     6. 访问Java服务
    </h3>
    <p>
     现在，我们已经成功运行了一个Java项目的Docker容器。我们可以通过访问http://localhost:16000来访问我们的Java应用程序。
    </p>
    <h3>
     <a id="7__95">
     </a>
     7. 总结
    </h3>
    <p>
     本文介绍了如何使用Docker构建一个Java项目的镜像，并在容器中运行它。通过使用Docker，我们可以将Java应用程序打包为一个独立的容器，使得应用程序的部署和管理更加简单和灵活。希望本文对您有所帮助，谢谢阅读！
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333934373839342f:61727469636c652f64657461696c732f313331383532313635" class_="artid" style="display:none">
 </p>
</div>


