---
layout: post
title: "深入解析-Java-的-switch-语句"
date: 2024-07-26 16:36:43 +0800
description: "switch语句适用于对单个变量的多个可能值进行判断，代码更加简洁和清晰。使用break语句可以避免"
keywords: "java switch"
categories: ['进阶教程', 'Java']
tags: ['控制流', 'Through', 'Switch', 'Java']
artid: "140719291"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=140719291
    alt: "深入解析-Java-的-switch-语句"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     深入解析 Java 的 switch 语句
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="_Java__switch__0">
     </a>
     深入解析 Java 的
     <code>
      switch
     </code>
     语句
    </h4>
    <p>
     在 Java 编程中，
     <code>
      switch
     </code>
     语句是一种常用的控制流语句，它能够根据变量的不同值执行不同的代码块。与
     <code>
      if-else
     </code>
     语句相比，
     <code>
      switch
     </code>
     语句在处理多个条件判断时更加简洁和清晰，尤其适用于对一个变量的多个可能值进行判断的场景。本文将详细介绍
     <code>
      switch
     </code>
     语句的基本语法、使用示例、穿透特性、Java 12 和 Java 13 引入的
     <code>
      switch
     </code>
     表达式和
     <code>
      yield
     </code>
     关键字，并讨论常见问题及其解决方案。
    </p>
    <h5>
     <a id="switch__4">
     </a>
     一、
     <code>
      switch
     </code>
     语句的基本语法
    </h5>
    <p>
     <code>
      switch
     </code>
     语句的基本语法如下：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">switch</span> <span class="token punctuation">(</span>expression<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> value1<span class="token operator">:</span>
        <span class="token comment">// 语句</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> value2<span class="token operator">:</span>
        <span class="token comment">// 语句</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token comment">// 你可以有任意数量的 case 语句</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token comment">// 语句</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      <strong>
       expression
      </strong>
      ：必须是一个整型、枚举类型、字符型或字符串类型的表达式。
     </li>
     <li>
      <strong>
       case
      </strong>
      ：每个
      <code>
       case
      </code>
      标签后的值必须是常量表达式，且数据类型必须与
      <code>
       switch
      </code>
      表达式类型一致。
     </li>
     <li>
      <strong>
       break
      </strong>
      ：用于终止一个
      <code>
       case
      </code>
      分支，防止程序继续执行后面的
      <code>
       case
      </code>
      分支。如果没有
      <code>
       break
      </code>
      ，程序将继续执行下一个
      <code>
       case
      </code>
      分支的语句（称为“穿透”）。
     </li>
     <li>
      <strong>
       default
      </strong>
      ：可选的，用于处理所有未匹配任何
      <code>
       case
      </code>
      标签的情况。
     </li>
    </ul>
    <h5>
     <a id="switch__27">
     </a>
     二、
     <code>
      switch
     </code>
     语句的使用示例
    </h5>
    <h6>
     <a id="_1_switch__29">
     </a>
     示例 1：整型
     <code>
      switch
     </code>
     语句
    </h6>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwitchExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dayName<span class="token punctuation">;</span>
        
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Monday"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Tuesday"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Wednesday"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Thursday"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Friday"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Saturday"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Sunday"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                dayName <span class="token operator">=</span> <span class="token string">"Invalid day"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The day is: "</span> <span class="token operator">+</span> dayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在这个示例中，根据变量
     <code>
      day
     </code>
     的值，
     <code>
      switch
     </code>
     语句选择对应的
     <code>
      case
     </code>
     分支执行，并输出对应的星期几。如果
     <code>
      day
     </code>
     的值不在 1 到 7 的范围内，将执行
     <code>
      default
     </code>
     分支。
    </p>
    <h6>
     <a id="_2_switch__71">
     </a>
     示例 2：字符串
     <code>
      switch
     </code>
     语句
    </h6>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwitchExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> fruit <span class="token operator">=</span> <span class="token string">"Apple"</span><span class="token punctuation">;</span>
        
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>fruit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token string">"Apple"</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The fruit is an Apple."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">"Banana"</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The fruit is a Banana."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">"Orange"</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The fruit is an Orange."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Unknown fruit."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在这个示例中，根据变量
     <code>
      fruit
     </code>
     的值，
     <code>
      switch
     </code>
     语句选择对应的
     <code>
      case
     </code>
     分支执行，并输出对应的水果名称。如果
     <code>
      fruit
     </code>
     的值不是已定义的水果，将执行
     <code>
      default
     </code>
     分支。
    </p>
    <h5>
     <a id="switch__98">
     </a>
     三、
     <code>
      switch
     </code>
     语句的穿透特性
    </h5>
    <p>
     在
     <code>
      switch
     </code>
     语句中，如果
     <code>
      case
     </code>
     分支中省略
     <code>
      break
     </code>
     语句，程序将继续执行后续的
     <code>
      case
     </code>
     分支，直到遇到
     <code>
      break
     </code>
     语句或
     <code>
      switch
     </code>
     块结束。这种特性称为“穿透”。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwitchExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is not 1, 2, or 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     输出结果：
    </p>
    <pre><code>Number is 2
Number is 3
</code></pre>
    <p>
     在这个例子中，由于在
     <code>
      case 2:
     </code>
     之后没有
     <code>
      break
     </code>
     ，程序继续执行
     <code>
      case 3:
     </code>
     的语句。为了避免这种穿透现象，建议在每个
     <code>
      case
     </code>
     分支的最后加上
     <code>
      break
     </code>
     语句。
    </p>
    <h5>
     <a id="Java_12__switch__130">
     </a>
     四、Java 12 引入的
     <code>
      switch
     </code>
     表达式
    </h5>
    <p>
     Java 12 引入了
     <code>
      switch
     </code>
     表达式，使得
     <code>
      switch
     </code>
     语句可以返回值，从而简化了代码。在 Java 12 及之后的版本中，可以使用箭头语法。
    </p>
    <h6>
     <a id="_3_switch__134">
     </a>
     示例 3：使用
     <code>
      switch
     </code>
     表达式
    </h6>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwitchExpressionExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dayName <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token string">"Monday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token string">"Tuesday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token string">"Wednesday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">4</span> <span class="token operator">-&gt;</span> <span class="token string">"Thursday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">5</span> <span class="token operator">-&gt;</span> <span class="token string">"Friday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">6</span> <span class="token operator">-&gt;</span> <span class="token string">"Saturday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">7</span> <span class="token operator">-&gt;</span> <span class="token string">"Sunday"</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token string">"Invalid day"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The day is: "</span> <span class="token operator">+</span> dayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在这个示例中，
     <code>
      switch
     </code>
     表达式使用箭头语法，并且每个分支都返回一个值。
     <code>
      default
     </code>
     分支处理所有未匹配的情况。相较于传统的
     <code>
      switch
     </code>
     语句，
     <code>
      switch
     </code>
     表达式更加简洁和易读。
    </p>
    <h5>
     <a id="Java_13__yield__158">
     </a>
     五、Java 13 引入的
     <code>
      yield
     </code>
     关键字
    </h5>
    <p>
     在 Java 13 及之后的版本中，
     <code>
      yield
     </code>
     关键字被引入到
     <code>
      switch
     </code>
     表达式中，以便从一个分支返回一个值。这在需要复杂逻辑时非常有用。
    </p>
    <h6>
     <a id="_4_yield__162">
     </a>
     示例 4：使用
     <code>
      yield
     </code>
     关键字
    </h6>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwitchYieldExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dayName <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token string">"Monday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token string">"Tuesday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Processing Wednesday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">yield</span> <span class="token string">"Wednesday"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">case</span> <span class="token number">4</span> <span class="token operator">-&gt;</span> <span class="token string">"Thursday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">5</span> <span class="token operator">-&gt;</span> <span class="token string">"Friday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">6</span> <span class="token operator">-&gt;</span> <span class="token string">"Saturday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">7</span> <span class="token operator">-&gt;</span> <span class="token string">"Sunday"</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token string">"Invalid day"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The day is: "</span> <span class="token operator">+</span> dayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在这个示例中，
     <code>
      case 3
     </code>
     使用了大括号来包含多条语句，并使用
     <code>
      yield
     </code>
     关键字返回一个值。这样可以在每个分支中执行更多的代码而不会失去表达式的简洁性。
    </p>
    <h5>
     <a id="_189">
     </a>
     六、常见问题及解决方案
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        穿透（Fall-through）问题
       </strong>
      </p>
      <p>
       <strong>
        问题
       </strong>
       ：如果在
       <code>
        case
       </code>
       分支中没有使用
       <code>
        break
       </code>
       语句，程序将继续执行后续的
       <code>
        case
       </code>
       分支，直到遇到
       <code>
        break
       </code>
       语句或
       <code>
        switch
       </code>
       块结束。
      </p>
      <p>
       <strong>
        解决方案
       </strong>
       ：在每个
       <code>
        case
       </code>
       分支的最后加上
       <code>
        break
       </code>
       语句，确保程序在匹配的
       <code>
        case
       </code>
       分支后跳出
       <code>
        switch
       </code>
       语句。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">switch</span> <span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is not 1, 2, or 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        常量表达式问题
       </strong>
      </p>
      <p>
       <strong>
        问题
       </strong>
       ：
       <code>
        case
       </code>
       标签后的值必须是编译时常量，因此不能使用变量或运行时计算的值。
      </p>
      <p>
       <strong>
        解决方案
       </strong>
       ：确保
       <code>
        case
       </code>
       标签后的值是编译时常量，例如字面值、枚举常量或
       <code>
        final
       </code>
       常量。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">CONSTANT</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">CONSTANT</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is not 1 or 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        数据类型问题
       </strong>
      </p>
      <p>
       <strong>
        问题
       </strong>
       ：
       <code>
        switch
       </code>
       表达式的类型和
       <code>
        case
       </code>
       标签的类型必须一致，否则会出现编译错误。
      </p>
      <p>
       <strong>
        解决方案
       </strong>
       ：确保
       <code>
        switch
       </code>
       表达式和
       <code>
        case
       </code>
       标签的类型一致。Java 7 及以上版本支持
       <code>
        String
       </code>
       类型，但早期版本不支持。
      </p>
      <pre><code class="prism language-java"><span class="token class-name">String</span> fruit <span class="token operator">=</span> <span class="token string">"Apple"</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>fruit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token string">"Apple"</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The fruit is an Apple."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"Banana"</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The fruit is a Banana."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Unknown fruit."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        忽略
        <code>
         default
        </code>
        分支
       </strong>
      </p>
      <p>
       <strong>
        问题
       </strong>
       ：如果
       <code>
        switch
       </code>
       表达式的值未匹配任何
       <code>
        case
       </code>
       标签且没有
       <code>
        default
       </code>
       分支，程序不会执行任何
       <code>
        switch
       </code>
       语句中的代码。
      </p>
      <p>
       <strong>
        解决方案
       </strong>
       ：建议始终提供一个
       <code>
        default
       </code>
       分支来处理未匹配的情况。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">switch</span> <span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Number is not 1 or 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        可读性和维护性问题
       </strong>
      </p>
      <p>
       <strong>
        问题
       </strong>
       ：如果
       <code>
        switch
       </code>
       语句包含大量的
       <code>
        case
       </code>
       分支，代码可能变得难以阅读和维护。
      </p>
      <p>
       <strong>
        解决方案
       </strong>
       ：考虑将复杂的
       <code>
        switch
       </code>
       语句重构为更简洁的方法或类，或使用
       <code>
        enum
       </code>
       类型结合
       <code>
        switch
       </code>
       语句来提高可读性。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Day</span> <span class="token punctuation">{<!-- --></span>
    <span class="token constant">MONDAY</span><span class="token punctuation">,</span> <span class="token constant">TUESDAY</span><span class="token punctuation">,</span> <span class="token constant">WEDNESDAY</span><span class="token punctuation">,</span> <span class="token constant">THURSDAY</span><span class="token punctuation">,</span> <span class="token constant">FRIDAY</span><span class="token punctuation">,</span> <span class="token constant">SATURDAY</span><span class="token punctuation">,</span> <span class="token constant">SUNDAY</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Day</span> day <span class="token operator">=</span> <span class="token class-name">Day</span><span class="token punctuation">.</span><span class="token constant">WEDNESDAY</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token constant">MONDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Today is Monday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">TUESDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Today is Tuesday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">WEDNESDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Today is Wednesday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">THURSDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Today is Thursday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">FRIDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Today is Friday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">SATURDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Today is Saturday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">SUNDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Today is Sunday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Invalid day"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        复杂逻辑问题
       </strong>
      </p>
      <p>
       <strong>
        问题
       </strong>
       ：有时一个
       <code>
        case
       </code>
       分支需要执行复杂的逻辑，导致代码变得臃肿。
      </p>
      <p>
       <strong>
        解决方案
       </strong>
       ：可以使用 Java 13 引入的
       <code>
        yield
       </code>
       关键字，或将复杂逻辑封装到方法中，以保持
       <code>
        switch
       </code>
       语句的简洁。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwitchYieldExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dayName <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token string">"Monday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token string">"Tuesday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Processing Wednesday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">yield</span> <span class="token string">"Wednesday"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">case</span> <span class="token number">4</span> <span class="token operator">-&gt;</span> <span class="token string">"Thursday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">5</span> <span class="token operator">-&gt;</span> <span class="token string">"Friday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">6</span> <span class="token operator">-&gt;</span> <span class="token string">"Saturday"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">7</span> <span class="token operator">-&gt;</span> <span class="token string">"Sunday"</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token string">"Invalid day"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The day is: "</span> <span class="token operator">+</span> dayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ol>
    <p>
     通过理解和避免这些常见问题，可以更有效地使用
     <code>
      switch
     </code>
     语句，使代码更加简洁、可读和易于维护。
    </p>
    <h5>
     <a id="_350">
     </a>
     七、总结
    </h5>
    <ul>
     <li>
      <code>
       switch
      </code>
      语句适用于对单个变量的多个可能值进行判断，代码更加简洁和清晰。
     </li>
     <li>
      使用
      <code>
       break
      </code>
      语句可以避免“穿透”问题。
     </li>
     <li>
      Java 12 引入的
      <code>
       switch
      </code>
      表达式使得
      <code>
       switch
      </code>
      语句更加简洁和功能强大。
     </li>
     <li>
      <code>
       yield
      </code>
      关键字在 Java 13 中被引入，用于从
      <code>
       switch
      </code>
      表达式的分支中返回值，使得代码更加灵活。
     </li>
     <li>
      理解并解决常见问题，可以更有效地使用
      <code>
       switch
      </code>
      语句。
     </li>
    </ul>
    <p>
     通过本文的详细介绍，希望你对 Java 的
     <code>
      switch
     </code>
     语句有了更深入的了解，能够在实际编程中灵活运用这一强大的控制流语句。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33383431313739362f:61727469636c652f64657461696c732f313430373139323931" class_="artid" style="display:none">
 </p>
</div>


