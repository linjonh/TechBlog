---
layout: post
title: "资深老鸟整理,Java接口自动化测试总结,从0到1自动化..."
date: 2023-12-24 21:22:34 +0800
description: "本文介绍了接口自动化中的RESTAssured和HttpClient工具，比较了它们的优势，以及如何"
keywords: "java接口自动化测试"
categories: ["未分类"]
tags: ["自动化", "开发语言", "Java"]
artid: "135187194"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=135187194
  alt: "资深老鸟整理,Java接口自动化测试总结,从0到1自动化..."
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     资深老鸟整理，Java接口自动化测试总结，从0到1自动化...
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     这几年接口自动化变得越来越热门，相对比于UI自动化，接口自动化有一些优势
    </p>
    <p>
     1）运行比UI更稳定，让BUG更容易定位 2）UI自动化维护成本太高，接口相对低一些
    </p>
    <p>
     接口测试其实有很多方式，主要有两种，一个是工具，最常见的有：Postman，SoupUI，Jmeter；另一个就是代码，Java和Python都可以实现。
    </p>
    <p>
     工具的好处就是直观，快速上手，有些工具也做到了半自动化和集成，但是工具还是会有一定的限制，代码相对与工具来说是更万能，利用接口测试框架结合TestNG或者Junit，实现接口自动化。
    </p>
    <p>
     <strong>
      1、REST Assured测试框架
     </strong>
    </p>
    <p>
     maven坐标
    </p>
    <pre><code>&lt;dependencies&gt;
      &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;
        &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;
        &lt;version&gt;4.0.0&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/json-path --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;
        &lt;artifactId&gt;json-path&lt;/artifactId&gt;
        &lt;version&gt;4.0.0&lt;/version&gt;
    &lt;/dependency&gt;

      &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/json-schema-validator --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;
        &lt;artifactId&gt;json-schema-validator&lt;/artifactId&gt;
        &lt;version&gt;4.0.0&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;</code></pre>
<p>
官方文档中建议静态导入
</p>
<pre><code>import static io.restassured.RestAssured._;
import static io.restassured.matcher.RestAssuredMatchers._;
import static org.hamcrest.Matchers.\*;</code></pre>
<p>
语法格式
</p>
<pre><code>public void testExample()
{
given()
.queryParam("wd","mp3")
.when()
.get("http://www.baidu.com/s")
.then()
.log().all()
.statusCode(200);
}</code></pre>
<p>
given() 后面跟一次网络请求所需要的条件
</p>
<p>
.cookies() --cookies 是 Map 形式存储 .contentType() .queryParam("key","value") 用于 get 请求参数 .body(Jsondata) 存放 Json 格式类型 .body(XMLdata) 存放 XML 格式类型 .formParam("Key","Value") 表单参数类型 .multipartFile(new File(filePath)) .log().all() 打印所有日志 .relaxedHTTPSValidation() --处理无效 SSL 证书过期 不对的异常
</p>
<p>
when() 触发条件
</p>
<p>
.get("url") .post("url") .post("url/{key1}/{key2}",value1,value2)
</p>
<p>
then() 断言
</p>
<p>
.statusCode(200) .body("key",hasItems(""))
</p>
<pre><code>public Response testDemo(String corpid,String corpsecret ){
Response res = RestAssured.given()
.log().all()
.when().get("https://baidu.com")
.then().extract().response();　　　　
return res;
}</code></pre>
<p>
extract().response() 以 response 格式获取响应结果 res.getCookie() res.getHeader() res.getStatusCode() res.path("").toString() 获取返回中某个节点的值 res.asString() 获取返回内容体
</p>
<p>
<img alt="" height="184" src="https://i-blog.csdnimg.cn/blog_migrate/98a9f6eaf4af302a1c9956281c155137.png" width="524"/>
</p>
<p>
<strong>
2、HttpClient
</strong>
</p>
<p>
maven 坐标
</p>
<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient --&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
&lt;artifactId&gt;httpclient&lt;/artifactId&gt;
&lt;version&gt;4.5.5&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
&lt;artifactId&gt;httpcore&lt;/artifactId&gt;
&lt;version&gt;4.4.4&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
<p>
导入
</p>
<pre><code>import org.apache.http.HttpResponse;  
import org.apache.http.client.HttpClient;  
import org.apache.http.client.methods.HttpPost;  
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.HttpEntity;</code></pre>
<p>
简单实例
</p>
<pre><code>public String demoPost(String httpUrl) {
String cookie ="JESSIONID=xxxxxxxx";　　　　 String params = "JsonData";
StringEntity stringEntity = new StringEntity(params, "UTF-8");  
 stringEntity.setContentType("application/x-www-form-urlencoded");

        HttpPost httpPost = new HttpPost(httpUrl);
        httpPost.setHeader(cookie,cookie);
        httpPost.setEntity(stringEntity);

        HttpClient client = new DefaultHttpClient();
        HttpResponse Response = client.execute(httpPost);
        String result = EntityUtils.toString(Response.getEntity());
    }</code></pre>
    <p>
     登录需要存储Cookie的方式
    </p>
    <pre><code>CookieStore cookiestore=new BasicCookieStore();

CloseableHttpClient client1=HttpClients.custom().setDefaultCookieStore(cookiestore).build();

List&lt;Cookie&gt; cookies = cookiesstore.getCookies();</code></pre>
<p>
如果登录时页面有重定向操作，也可以用 cookieStore 的方式存储每次重定向时需要用到的 cookie
</p>
<p>
<strong>
3、对返回的内容 Json 化
</strong>
</p>
<p>
1）JSON
</p>
<p>
maven 坐标
</p>
<pre><code>&lt;dependency&gt;
&lt;groupId&gt;org.json&lt;/groupId&gt;
&lt;artifactId&gt;json&lt;/artifactId&gt;
&lt;version&gt;20180130&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
<p>
数组形式 response
</p>
<pre><code>JSONArray array = new JSONArray(response);
JSONObject object = array.getJSONObject(0);
String value = object.get("key").toString();</code></pre>
<p>
带头信息的 response
</p>
<pre><code>JSONObject object = new JSONObject(response);
String value = object.getString("key");</code></pre>
<p>
2）gson (推荐)
</p>
<pre><code>&lt;dependency&gt;
　　&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;
　　&lt;artifactId&gt;gson&lt;/artifactId&gt;
　　&lt;version&gt;2.8.2&lt;/version&gt; //如果使用更新的版本，JsonParser 会被推荐不使用
&lt;/dependency&gt;

import com.google.gson.JsonParser;
import com.google.gson.JsonArray;
import com.google.gson.JsonObject;</code></pre>
<p>
数组形式 response
</p>
<pre><code>JsonPraser parser = new JsonParser();
JsonArray array = parser.parse(response).getAsJsonArray;
JsonObject object = array.get(0).getAsJsonObject();
String value = object.get("key").getAsString();</code></pre>
<p>
带头信息的 response
</p>
<pre><code>JsonPraser parser = new JsonParser();
JsonObject object = parser.parse(response).getAsJsonOjbect();
JsonObject object_in = object.get("key").getAsJsonObject();
String value = object_in.get("key").getAsString();</code></pre>
<p>
getAsString() 获取字符串的值 toString() 获取字符串
</p>
<p>
还可以利用 Gson 提供的 fromJson()方法来实现从 Json 相关对象到 Java 实体
</p>
<pre><code>import com.google.gson.Gson;

Gson gson = new Gson();
JsonObject object = gson.fromJson(response,JsonObject.class);</code></pre>
<p>
上述例子将 Json 字符串转化为了 JsonObject 实体
</p>
<p>
也可以将 Json 字符串转化为自己写的类
</p>
<h3>
总结
</h3>
<h4>
如果你对此文有任何疑问，如果你也需要接口项目实战，如果你对软件测试、接口测试、自动化测试、面试经验交流感兴趣欢迎加入我们，加入方式在文章的最后面
</h4>
<blockquote>
<h3>
自动化测试相关教程推荐：
</h3>
<h3>
<a href="https://www.bilibili.com/video/BV17G4y1Z74z/?spm_id_from=333.999.0.0&amp;vd_source=f7b265e48f8139faff684d5069fdfad7" rel="nofollow" title="2023最新自动化测试自学教程新手小白26天入门最详细教程,目前已有300多人通过学习这套教程入职大厂！！_哔哩哔哩_bilibili">
2023 最新自动化测试自学教程新手小白 26 天入门最详细教程,目前已有 300 多人通过学习这套教程入职大厂！！*哔哩哔哩\_bilibili
</a>
</h3>
<h3>
<a href="https://www.bilibili.com/video/BV1AF411T7qJ/?spm_id_from=333.999.0.0" rel="nofollow" title="2023 最新合集 Python 自动化测试开发框架【全栈/实战/教程】合集精华，学完年薪 40W+*哔哩哔哩*bilibili">
2023 最新合集 Python 自动化测试开发框架【全栈/实战/教程】合集精华，学完年薪 40W+*哔哩哔哩*bilibili
</a>
</h3>
<h3>
测试开发相关教程推荐
</h3>
<h3>
<a href="https://www.bilibili.com/video/BV1hX4y187wi/?spm_id_from=333.999.0.0&amp;vd_source=f7b265e48f8139faff684d5069fdfad7" rel="nofollow" title="2023 全网最牛，字节测试开发大佬现场教学，从零开始教你成为年薪百万的测试开发工程师*哔哩哔哩*bilibili">
2023 全网最牛，字节测试开发大佬现场教学，从零开始教你成为年薪百万的测试开发工程师*哔哩哔哩*bilibili
</a>
</h3>
<h3>
postman/jmeter/fiddler 测试工具类教程推荐
</h3>
<h3>
<a href="https://www.bilibili.com/video/BV1e44y1X78S/?spm_id_from=333.999.0.0&amp;vd_source=f7b265e48f8139faff684d5069fdfad7" rel="nofollow" title="讲的最详细 JMeter 接口测试/接口自动化测试项目实战合集教程，学 jmeter 接口测试一套教程就够了！！*哔哩哔哩*bilibili">
讲的最详细 JMeter 接口测试/接口自动化测试项目实战合集教程，学 jmeter 接口测试一套教程就够了！！*哔哩哔哩*bilibili
</a>
</h3>
<h3>
<a href="https://www.bilibili.com/video/BV1o54y1u7UU/?spm_id_from=333.999.0.0" rel="nofollow" title="2023 自学 fiddler 抓包，请一定要看完【如何 1 天学会 fiddler 抓包】的全网最详细视频教程！！*哔哩哔哩*bilibili">
2023 自学 fiddler 抓包，请一定要看完【如何 1 天学会 fiddler 抓包】的全网最详细视频教程！！*哔哩哔哩*bilibili
</a>
</h3>
<h3>
<a href="https://www.bilibili.com/video/BV16L41117wB/?spm_id_from=333.999.0.0" rel="nofollow" title="2023 全网封神，B 站讲的最详细的 Postman 接口测试实战教学，小白都能学会*哔哩哔哩*bilibili">
2023 全网封神，B 站讲的最详细的 Postman 接口测试实战教学，小白都能学会*哔哩哔哩\_bilibili
</a>
</h3>
<p>
</p>
<p>
</p>
</blockquote>
<h2>
总结：
</h2>
<h2>
光学理论是没用的，要学会跟着一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。
</h2>
<p>
</p>
<p>
<img alt="" height="872" src="https://i-blog.csdnimg.cn/blog_migrate/cc0273e988e98442b67d5b15963a358f.jpeg" width="670"/>
</p>
<p>
<img alt="" height="872" src="https://i-blog.csdnimg.cn/blog_migrate/ea5f3c4682ad089b2a9d274d1aff4218.jpeg" width="670"/>
</p>
<p>
<strong>
如果对你有帮助的话，点个赞收个藏，给作者一个鼓励。也方便你下次能够快速查找。
</strong>
</p>
<p>
<strong>
如有不懂还要咨询下方小卡片，博主也希望和志同道合的测试人员一起学习进步
</strong>
</p>
<p>
<strong>
在适当的年龄，选择适当的岗位，尽量去发挥好自己的优势。
</strong>
</p>
<p>
<strong>
我的自动化测试开发之路，一路走来都离不每个阶段的计划，因为自己喜欢规划和总结，
</strong>
</p>
<p>
<strong>
测试开发视频教程、学习笔记领取传送门！！
</strong>
</p>
<p class="img-center">
<img alt="" height="215" src="https://i-blog.csdnimg.cn/blog_migrate/08f84f3c62ad7bd2b042d8f305bb428d.gif" width="129"/>
</p>
<p>
</p>

   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36373535333235302f:61727469636c652f64657461696c732f313335313837313934" class_="artid" style="display:none">
 </p>
</div>
