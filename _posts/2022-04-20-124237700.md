---
layout: post
title: "VMware虚拟机Host-Only模式通信与联网"
date: 2022-04-20 18:31:33 +0800
description: "VMware虚拟机通信与联网_虚拟机hostonly怎么联网"
keywords: "虚拟机hostonly怎么联网"
categories: ['笔记', 'Linux']
tags: ['虚拟机', 'Linux']
artid: "124237700"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=124237700
    alt: "VMware虚拟机Host-Only模式通信与联网"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     VMware虚拟机Host-Only模式通信与联网
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <ul>
          <li>
           <ul>
            <li>
             <a href="#_1" rel="nofollow">
              一.需求
             </a>
            </li>
            <li>
             <a href="#_8" rel="nofollow">
              二.网络配置
             </a>
            </li>
            <li>
             <ul>
              <li>
               <a href="#1_9" rel="nofollow">
                1、设置网卡模式
               </a>
              </li>
              <li>
               <a href="#2_13" rel="nofollow">
                2、查看虚拟网络
               </a>
              </li>
              <li>
               <a href="#3_17" rel="nofollow">
                3、设置网络共享
               </a>
              </li>
              <li>
               <a href="#4IP_23" rel="nofollow">
                4、虚拟机IP配置
               </a>
              </li>
              <li>
               <a href="#5_52" rel="nofollow">
                5、查看网络配置信息
               </a>
              </li>
              <li>
               <a href="#6_60" rel="nofollow">
                6、注意
               </a>
              </li>
             </ul>
            </li>
           </ul>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h5>
     <a id="_1">
     </a>
     一.需求
    </h5>
    <p>
     实现宿主机与多个虚拟机之间的通信，实现虚拟机联网。
     <br/>
     工具：VMware
     <br/>
     系统：CentOS
     <br/>
     采用模式：Host-Only
     <br/>
     网络拓扑如：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8f452a682dc064c5759f75de8c040bfd.png"/>
    </p>
    <h5>
     <a id="_8">
     </a>
     二.网络配置
    </h5>
    <h6>
     <a id="1_9">
     </a>
     1、设置网卡模式
    </h6>
    <p>
     选择网卡模式：仅主机模式
     <br/>
     虚拟机会与宿主机的虚拟网卡组成一个局域网，局域网中可使用单独的静态内部IP，只需要将网关设置为虚拟网卡的地址即可，这样，虚拟机之间可通过局域网互联，虚拟机通过网关与宿主机相连。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/473ec29cefe5fa8295cb4c9e2b885163.png"/>
    </p>
    <h6>
     <a id="2_13">
     </a>
     2、查看虚拟网络
    </h6>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1a73f74a1c061effee57548d04f5ac4f.png">
      <br/>
      找到“仅主机模式”的网卡名称为“VMnet1”
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4c3156737c2ceeee8eaa1ff04826cada.png"/>
     </img>
    </p>
    <h6>
     <a id="3_17">
     </a>
     3、设置网络共享
    </h6>
    <p>
     查看宿主机的网络连接，并将网络与虚拟机网卡共享
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e68badd8567f8954f1bc158a3fac5259.png">
      <br/>
      在当前网络右键选择“属性”，将网络共享给虚拟网卡
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d8fe827c855d67ca23e93a052eb4c811.png">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4d5ed10edb50b1114d8a9f5e53e2072e.png"/>
      </img>
     </img>
    </p>
    <h6>
     <a id="4IP_23">
     </a>
     4、虚拟机IP配置
    </h6>
    <p>
     (1)设置固定IP：
     <br/>
     命令：
    </p>
    <pre><code class="prism language-bash"><span class="token function">vi</span> /etc/sysconfig/network-scripts/ifcfg-你的网卡名
</code></pre>
    <p>
     修改和新增的配置：
    </p>
    <pre><code class="prism language-bash"><span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.137.2 实际地址须与GATEWAY在同一网段
<span class="token assign-left variable">NETMASK</span><span class="token operator">=</span><span class="token number">255.255</span>.255.0
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token number">192.168</span>.137.1	  即Host-Only Network的IP地址
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static / dhcp	  static表示使用静态IP，DHCP使用动态IP
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes      	  表示开机启动配置
</code></pre>
    <p>
     GATEWAY，IPADDR根据本地实际地址进行配置
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/181114bdfc09472c6c75e05ed7de0880.png">
      <br/>
      (2)修改DNS
     </img>
    </p>
    <pre><code class="prism language-bash"><span class="token function">vi</span> /etc/resolv.conf
</code></pre>
    <p>
     增加配置：
    </p>
    <pre><code class="prism language-bash">nameserver <span class="token number">114.114</span>.114.114
或183.221.253.100、61.139.2.69、8.8.8.8
</code></pre>
    <p>
     然后重启网络服务：
    </p>
    <pre><code class="prism language-bash"><span class="token function">service</span> network restart
</code></pre>
    <h6>
     <a id="5_52">
     </a>
     5、查看网络配置信息
    </h6>
    <pre><code class="prism language-bash"><span class="token function">ifconfig</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f77f9a74d2cda9fd493e9773f88d2176.png">
      <br/>
      最后，ping命令测试是否能联网
      <br/>
      其他虚拟机按相同方法进行配置即可。
     </img>
    </p>
    <h6>
     <a id="6_60">
     </a>
     6、注意
    </h6>
    <p>
     由于win10的bug，每次重启电脑后，虚拟机无法联网。需要在网络连接面板手动取消共享，再重新共享网络才能生效。
     <br/>
     对于这个问题，一篇博客可以参考：https://blog.moeyukina.top/index.php/2019/12/08/windowsics/
     <br/>
     (但是我的电脑没有生效…)
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343733323337392f:61727469636c652f64657461696c732f313234323337373030" class_="artid" style="display:none">
 </p>
</div>


