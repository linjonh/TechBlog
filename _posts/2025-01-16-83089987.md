---
layout: post
title: "使用阿里云推流服务接入微信直播功能"
date: 2025-01-16 13:56:32 +0800
description: "1，在阿里云平台搜索视频直播，并按步骤开通所有依赖功能，进入视频直播的后台。2，视频直播功能分为推流"
keywords: "阿里云直播 嵌入小程序"
categories: ['']
tags: ['阿里云', '直播']
artid: "83089987"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=83089987
    alt: "使用阿里云推流服务接入微信直播功能"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用阿里云推流服务接入微信直播功能
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     1，在阿里云平台搜索视频直播，并按步骤开通所有依赖功能，进入视频直播的后台。
    </p>
    <p>
     2，视频直播功能分为推流（录制视频）、拉流（观看视频）两个过程。
    </p>
    <p>
     推流：建议使用阿里云自带的阿里云直播，或者obs推流软件进行测试。
    </p>
    <p>
     首先，按阿里云步骤配置域名，然后点击管理，进入管理界面。
    </p>
    <p>
    </p>
    <p>
     然后，使用阿里云鉴权url，这样可以防止别人盗取链接。保证直播的安全性
    </p>
    <p>
     然后，生成鉴权url即为此次测试直播的推流url
    </p>
    <p>
     3，拿到此url，即可在obs推流软件或者微信小程序的直播组件上进行推流。
    </p>
    <p>
     小程序：将推流url填写到url="" 内。在对应页面的js中的onready方法内，调用
    </p>
    <p>
     this.ctx = wx.createLivePusherContext('pusher')
    </p>
    <p>
     <br/>
     至此，当打开此页面时，即可自动推流，并能实时看到自己的录制画面。（开发工具暂不支持，需要用手机进行调试）。
    </p>
    <p>
     obs:请自行查看obs的帮助文档。
    </p>
    <p>
     4，微信小程序观看直播
    </p>
    <p>
     在阿里云 流管理 的界面可以看到此次推流
    </p>
    <p>
     点击此处的直播地址即可查看此直播的三个格式的播放地址
    </p>
    <p>
     另外，拉流地址可由推流地址生成，
    </p>
    <p>
     将拉流url放入小程序的直播播放组件中（live-player）
    </p>
    <p>
     &lt;live-player id="player" src="拉流url" autoplay="true" bindstatechange="statechange" binderror="error" /&gt;
    </p>
    <p>
     <br/>
     在对应的js的onready方法中加入
    </p>
    <p>
     onReady(res) {
     <!-- -->
     <br/>
     this.ctx = wx.createLivePlayerContext('player')
     <br/>
     },
    </p>
    <p>
     <br/>
     至此，打开此观看页面，即可看到直播内容。完成推流与拉流全过程（延迟在2-3秒）
    </p>
    <p>
     <br/>
     ---------------------
     <br/>
     作者：xishuchen0520
     <br/>
     来源：CSDN
     <br/>
     原文：https://blog.csdn.net/xishuchen0520/article/details/80356134?utm_source=copy
     <br/>
     版权声明：本文为博主原创文章，转载请附上博文链接！
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f77656978696e5f3432333938363937:2f61727469636c652f64657461696c732f3833303839393837" class_="artid" style="display:none">
 </p>
</div>


