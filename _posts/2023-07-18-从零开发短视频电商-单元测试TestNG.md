---
layout: post
title: 从零开发短视频电商-单元测试TestNG
date: 2023-07-18 22:00:01 +0800
categories: [《🌹从零开发短视频电商》]
tags: [音视频,单元测试,log4j]
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=131797266
    alt: 从零开发短视频电商-单元测试TestNG
artid: 131797266
render_with_liquid: false
---
<p class="artid" style="display:none">$url</p>
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     从零开发短视频电商 单元测试（TestNG）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#_1" rel="nofollow">
          简介
         </a>
        </li>
        <li>
         <a href="#_22" rel="nofollow">
          简单示例
         </a>
        </li>
        <li>
         <a href="#_66" rel="nofollow">
          执行测试并查看测试报告
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_IDEAtestngxml_68" rel="nofollow">
            方式一 在IDEA中运行testng.xml文件
           </a>
          </li>
          <li>
           <a href="#_IDEApackage_126" rel="nofollow">
            方式二 在IDEA中运行测试类或者package
           </a>
          </li>
          <li>
           <a href="#_Maven_130" rel="nofollow">
            方式三 在Maven中运行测试
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_200" rel="nofollow">
          统计测试覆盖率
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_IDEA__204" rel="nofollow">
            方式一 IDEA 支持详细的代码测试覆盖率统计
           </a>
          </li>
          <li>
           <a href="#_Maven_208" rel="nofollow">
            方式二 Maven支持测试覆盖率
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#IDEA_252" rel="nofollow">
          在IDEA中创建测试用例
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_IDEA__254" rel="nofollow">
            使用 IDEA 快速创建单元测试，提高开发和测试效率
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_258" rel="nofollow">
          常用注解
         </a>
        </li>
        <li>
         <a href="#_282" rel="nofollow">
          常用场景
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_284" rel="nofollow">
            忽略测试
           </a>
          </li>
          <li>
           <a href="#_308" rel="nofollow">
            参数化测试
           </a>
          </li>
          <li>
           <a href="#_337" rel="nofollow">
            测试组
           </a>
          </li>
          <li>
           <a href="#_367" rel="nofollow">
            异常测试
           </a>
          </li>
          <li>
           <a href="#_385" rel="nofollow">
            超时测试
           </a>
          </li>
          <li>
           <a href="#_405" rel="nofollow">
            多线程测试
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_427" rel="nofollow">
          重新运行失败的测试
         </a>
        </li>
        <li>
         <a href="#_433" rel="nofollow">
          断言
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_437" rel="nofollow">
            验证两个值是否相等
           </a>
          </li>
          <li>
           <a href="#_457" rel="nofollow">
            验证条件是否为真或为假
           </a>
          </li>
          <li>
           <a href="#_null__null_477" rel="nofollow">
            验证值是否为 null 或非 null
           </a>
          </li>
          <li>
           <a href="#_497" rel="nofollow">
            验证是否抛出了预期的异常
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h3>
     <a id="_1">
     </a>
     简介
    </h3>
    <p>
     <strong>
      官网
     </strong>
     ：
     <a href="https://testng.org/doc/index.html" rel="nofollow">
      https://testng.org/doc/index.html
     </a>
    </p>
    <p>
     TestNG是一个基于 Java 的开源测试框架。该框架受到 JUnit 和 NUnit 的启发，但引入了一些新功能，使其更强大且更易于使用。您可以在测试实施期间创建 HTML 报告。它具有分组测试、注释、参数化等功能，有助于更快地创建测试。
    </p>
    <p>
     <strong>
      TestNG的核心特性
     </strong>
    </p>
    <ul>
     <li>
      <p>
       在任意大小的线程池中运行测试，并提供各种可用策略（所有方法都在自己的线程中，每个测试类一个线程等等）。
      </p>
     </li>
     <li>
      <p>
       测试您的代码是否是线程安全的。
      </p>
     </li>
     <li>
      <p>
       灵活的测试配置。
      </p>
     </li>
     <li>
      <p>
       支持数据驱动测试（使用
       <code>
        @DataProvider
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       支持参数。
      </p>
     </li>
     <li>
      <p>
       强大的执行模型（不再是
       <code>
        TestSuite
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       由多种工具和插件支持（Eclipse、IDEA、Maven 等）。
      </p>
     </li>
     <li>
      <p>
       嵌入 BeanShell 以提高灵活性。
      </p>
     </li>
     <li>
      <p>
       用于运行时和日志记录的默认 JDK 函数（无依赖项）。
      </p>
     </li>
     <li>
      <p>
       应用程序服务器测试的相关方法。
      </p>
     </li>
     <li>
      <p>
       可以进行单元测试，功能测试，端到端测试，集成测试等。
      </p>
     </li>
    </ul>
    <h3>
     <a id="_22">
     </a>
     简单示例
    </h3>
    <p>
     <strong>
      1.添加依赖
     </strong>
    </p>
    <pre><code class="prism language-xml">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       TestNG 最高 v7.5：
      </strong>
      JDK 8 或更高版本。
     </p>
     <p>
      <strong>
       TestNG v7.6.0 及更高版本：
      </strong>
      JDK 11 或更高版本。
     </p>
    </blockquote>
    <p>
     <strong>
      2.简单测试示例
     </strong>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleTest</span> <span class="token punctuation">{<!-- --></span>
 
 <span class="token annotation punctuation">@BeforeClass</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">// 实例化此测试时将调用的代码</span>
 <span class="token punctuation">}</span>
 
 <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"fast"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">aFastTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Fast test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"slow"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">aSlowTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Slow test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <ul>
      <li>
       一个测试方法可以属于一个或多个组。
      </li>
     </ul>
    </blockquote>
    <h3>
     <a id="_66">
     </a>
     执行测试并查看测试报告
    </h3>
    <h4>
     <a id="_IDEAtestngxml_68">
     </a>
     方式一 在IDEA中运行testng.xml文件
    </h4>
    <p>
     这是一个testNG.xml文件
    </p>
    <pre><code class="prism language-xml"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">suite</span> <span class="token name">SYSTEM</span> <span class="token string">"https://testng.org/testng-1.0.dtd"</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>suite</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Suite1<span class="token punctuation">"</span></span> <span class="token attr-name">verbose</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 指定包名--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Regression1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packages</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.sample<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packages</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 指定类名称 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Regression2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.sample.ParameterSample<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.sample.ParameterTest<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>classes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 指定要包含和排除的组和方法 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Regression3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groups</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>run</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>brokenTests<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkinTests<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>run</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groups</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.IndividualMethodsTest<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>methods</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>testMethod<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>methods</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>classes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 在属性中指定其他详细信息，例如是否并行运行测试、使用多少个线程、是否正在运行 JUnit 测试等 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Regression4<span class="token punctuation">"</span></span> <span class="token attr-name">preserve-order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">parallel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>methods<span class="token punctuation">"</span></span> <span class="token attr-name">thread-count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.Test1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>methods</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>methods</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.Test2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>classes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>suite</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <blockquote>
     <p>
      在testNG.xml文件上右键运行即可。
     </p>
    </blockquote>
    <h4>
     <a id="_IDEApackage_126">
     </a>
     方式二 在IDEA中运行测试类或者package
    </h4>
    <p>
     在测试类或者测试的package上右键运行即可。
    </p>
    <h4>
     <a id="_Maven_130">
     </a>
     方式三 在Maven中运行测试
    </h4>
    <p>
     在Maven项目中
     <code>
      Maven Surefire Plugin
     </code>
     插件是用来执行单元测试的，所以在pom.xml文件中需要添加
     <code>
      Maven Surefire Plugin
     </code>
     插件，在 configuration 中可以配置需要执行的测试文件。
    </p>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-surefire-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--&lt;version&gt;3.0.0-M5&lt;/version&gt;--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${maven-surefire-plugin.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trimStackTrace</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trimStackTrace</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*Test.java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*Tests.java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>**/integration/**<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parallel</span><span class="token punctuation">&gt;</span></span>classes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parallel</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>threadCountMethods</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>threadCountMethods</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>useSystemClassLoader</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>useSystemClassLoader</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>forkCount</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>forkCount</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reuseForks</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>reuseForks</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argLine</span><span class="token punctuation">&gt;</span></span>-Xmx1024m -XX:MaxPermSize=256m<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argLine</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rerunFailingTestsCount</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rerunFailingTestsCount</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testFailureIgnore</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testFailureIgnore</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reportFormat</span><span class="token punctuation">&gt;</span></span>plain<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>reportFormat</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reportsDirectory</span><span class="token punctuation">&gt;</span></span>${project.build.directory}/surefire-reports<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>reportsDirectory</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <blockquote>
     <p>
      在执行完之后，surefire的report默认会存放在target/surefire-reports 文件夹中。
     </p>
    </blockquote>
    <ul>
     <li>
      <code>
       &lt;trimStackTrace&gt;
      </code>
      设置为
      <code>
       true
      </code>
      ，以裁剪堆栈跟踪信息，使其更易读。
     </li>
     <li>
      <code>
       &lt;parallel&gt;
      </code>
      设置为
      <code>
       classes
      </code>
      ，以允许并行执行测试类，提高执行速度。
     </li>
     <li>
      <code>
       &lt;threadCountMethods&gt;
      </code>
      设置为一个适当的线程数，用于并行执行测试方法。
     </li>
     <li>
      <code>
       &lt;useSystemClassLoader&gt;
      </code>
      设置为
      <code>
       false
      </code>
      ，以避免使用系统类加载器，减少可能的冲突。
     </li>
     <li>
      <code>
       &lt;forkCount&gt;
      </code>
      设置为
      <code>
       1
      </code>
      ，以避免使用多个进程执行测试。
     </li>
     <li>
      <code>
       &lt;reuseForks&gt;
      </code>
      设置为
      <code>
       true
      </code>
      ，以重用测试进程，提高执行效率。
     </li>
     <li>
      <code>
       &lt;argLine&gt;
      </code>
      可以指定额外的 JVM 参数，如堆内存大小、永久代大小等。
     </li>
     <li>
      <code>
       &lt;rerunFailingTestsCount&gt;
      </code>
      设置为一个适当的值，以在测试失败时重新运行测试。
     </li>
     <li>
      <code>
       &lt;testFailureIgnore&gt;
      </code>
      设置为
      <code>
       true
      </code>
      ，以忽略测试失败并继续构建过程。
     </li>
     <li>
      <code>
       &lt;reportsDirectory&gt;
      </code>
      指定测试报告的输出目录。
     </li>
    </ul>
    <p>
     Maven也有自己的一些常用命令，我们可以通过Maven命令来执行测试代码。
    </p>
    <pre><code class="prism language-ini">编译：mvn compile　　--src/main/java目录java源码编译生成class （target目录下）
测试：mvn test　　　　--src/test/java 目录编译
清理：mvn clean　　　 --删除target目录，也就是将class文件等删除
打包：mvn package　　--生成压缩文件：java项目#jar包；web项目#war包，也是放在target目录下
安装：mvn install　　　--将压缩文件(jar或者war)上传到本地仓库
部署：mvn deploy　　   --将压缩文件上传私服
</code></pre>
    <blockquote>
     <p>
      ​ 我们可以通过
      <code>
       mvn clean test
      </code>
      执行测试用例，整个过程是通过调用pom.xml 中的
      <code>
       Maven Surefire Plugin
      </code>
      插件 - &gt; 运行所配置的测试用例。
     </p>
     <p>
      <strong>
       跳过测试
      </strong>
     </p>
     <ul>
      <li>
       <p>
        mvn clean package/install -DskipTests
       </p>
      </li>
      <li>
       <p>
        mvn clean package/install -Dmaven.test.skip=true
       </p>
      </li>
     </ul>
    </blockquote>
    <h3>
     <a id="_200">
     </a>
     统计测试覆盖率
    </h3>
    <blockquote>
     <p>
      测试代码覆盖率越高，代码质量越高
     </p>
    </blockquote>
    <h4>
     <a id="_IDEA__204">
     </a>
     方式一 IDEA 支持详细的代码测试覆盖率统计
    </h4>
    <blockquote>
     <p>
      很简单不介绍了
     </p>
    </blockquote>
    <h4>
     <a id="_Maven_208">
     </a>
     方式二 Maven支持测试覆盖率
    </h4>
    <p>
     JaCoCo是一个开源的覆盖率工具，它针对的开发语言是java，其使用方法很灵活，可以嵌入到Ant、Maven中，很多第三方的工具提供了对JaCoCo的集成，如sonar、Jenkins等。
    </p>
    <p>
     JaCoCo包含了多种尺度的覆盖率计数器,包含指令级覆盖(Instructions,C0coverage)，分支（Branches,C1coverage）、圈复杂度(CyclomaticComplexity)、行覆盖(Lines)、方法覆盖(non-abstract methods)、类覆盖(classes)
    </p>
    <p>
     <strong>
      pom.xml添加
     </strong>
    </p>
    <pre><code class="prism language-xml">   <span class="token comment">&lt;!-- jacoco: generate test coverage report --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jacoco.version</span><span class="token punctuation">&gt;</span></span>0.8.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jacoco.version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.jacoco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jacoco-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jacoco.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>com/**/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*Test.java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>**/AccountImageUtilTest.java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>skip</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>skip</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>prepare-agent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>generate-code-coverage-report<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>report<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     在工程根目录下执行
     <code>
      mvn clean test
     </code>
     来执行单元测试并生成覆盖率报告，生成后的报告为
     <code>
      ./target/site/jacoco/index.html
     </code>
     ，通过浏览器打开该文件，可以看到整体的覆盖率以及单元测试的情况。
    </p>
    <h3>
     <a id="IDEA_252">
     </a>
     在IDEA中创建测试用例
    </h3>
    <h4>
     <a id="_IDEA__254">
     </a>
     使用 IDEA 快速创建单元测试，提高开发和测试效率
    </h4>
    <p>
     在需要测试的类或接口（推荐基于接口创建）名称上使用
     <code>
      Alt+Enter
     </code>
     ，然后选择
     <strong>
      创建测试
     </strong>
     。
    </p>
    <h3>
     <a id="_258">
     </a>
     常用注解
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        注解
       </th>
       <th>
        注释
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        @BeforeSuite
       </td>
       <td>
        被注解的方法，将在
        <strong>
         整个测试套件之前
        </strong>
        运行
       </td>
      </tr>
      <tr>
       <td>
        @AfterSuite
       </td>
       <td>
        被注解的方法，将在
        <strong>
         整个测试套件之后
        </strong>
        运行
       </td>
      </tr>
      <tr>
       <td>
        @BeforeTest
       </td>
       <td>
        被注解的方法，将在
        <strong>
         测试套件内所有用例执行之前
        </strong>
        运行
       </td>
      </tr>
      <tr>
       <td>
        @AfterTest
       </td>
       <td>
        被注解的方法，将在
        <strong>
         测试套件内所有用例执行之后
        </strong>
        运行
       </td>
      </tr>
      <tr>
       <td>
        @BeforeGroups
       </td>
       <td>
        被注解的方法，将在
        <strong>
         指定组内任意用例执行之前
        </strong>
        运行
       </td>
      </tr>
      <tr>
       <td>
        @AfterGroups
       </td>
       <td>
        被注解的方法，将在
        <strong>
         指定组内任意用例执行之后
        </strong>
        运行
       </td>
      </tr>
      <tr>
       <td>
        @BeforeClass
       </td>
       <td>
        带注释的方法将在调用当前类中的
        <strong>
         第一个测试方法之前
        </strong>
        运行。
       </td>
      </tr>
      <tr>
       <td>
        @AfterClass
       </td>
       <td>
        被注解的方法将在当前类中的
        <strong>
         所有测试方法运行完毕后
        </strong>
        运行。
       </td>
      </tr>
      <tr>
       <td>
        @BeforeMethod
       </td>
       <td>
        带注释的方法将在
        <strong>
         每个测试方法之前
        </strong>
        运行。
       </td>
      </tr>
      <tr>
       <td>
        @AfterMethod
       </td>
       <td>
        带注释的方法将在
        <strong>
         每个测试方法之后
        </strong>
        运行。
       </td>
      </tr>
      <tr>
       <td>
        @DataProvider
       </td>
       <td>
        被注解的方法，强制返回一个 二维数组Object[ ][ ]作为另外一个@Test方法的数据工厂
       </td>
      </tr>
      <tr>
       <td>
        @Factory
       </td>
       <td>
        被注解的方法，作为对象工厂，强制返回一个对象数组 Object[ ]
       </td>
      </tr>
      <tr>
       <td>
        @Listeners
       </td>
       <td>
        定义一个测试类的监听器
       </td>
      </tr>
      <tr>
       <td>
        @Parameters
       </td>
       <td>
        定义一组参数，在方法运行期间向方法传递参数的值，参数的值在testng.xml中定义
       </td>
      </tr>
      <tr>
       <td>
        @Test
       </td>
       <td>
        标记方法为测试方法，如果标记的是类，则此类中所有的public方法都为测试方法
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      具体生命周期如下图
     </strong>
     ：
    </p>
    <p>
     <img alt="img" src="https://i-blog.csdnimg.cn/blog_migrate/49ed7cc1fa15b87e7ee7ff2a874c0801.gif"/>
    </p>
    <h3>
     <a id="_282">
     </a>
     常用场景
    </h3>
    <h4>
     <a id="_284">
     </a>
     忽略测试
    </h4>
    <p>
     有时，你可能需要暂时忽略某些测试方法，以避免执行它们。你可以使用
     <code>
      @Test(enabled = false)
     </code>
     注解来标记需要忽略的测试方法。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IgnoreTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 测试方法1的代码</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 测试方法2的代码</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     <code>
      testMethod2
     </code>
     被标记为
     <code>
      enabled = false
     </code>
     ，表示该测试方法将被忽略，不会执行。只有被标记为
     <code>
      enabled = true
     </code>
     或未使用
     <code>
      enabled
     </code>
     属性的测试方法才会被执行。
    </p>
    <h4>
     <a id="_308">
     </a>
     参数化测试
    </h4>
    <p>
     通过参数化测试，可以使用不同的输入值运行相同的测试方法，以验证代码在不同参数下的行为。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">DataProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span></span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParameterizedTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@DataProvider</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"additionData"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">additionData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
      <span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>dataProvider <span class="token operator">=</span> <span class="token string">"additionData"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAddition</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> expected<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token class-name">Calculator</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <h4>
     <a id="_337">
     </a>
     测试组
    </h4>
    <p>
     通过测试组（Test Groups），可以对测试方法进行分类，并选择性地运行特定组的测试。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span></span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token string">"smoke"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 测试登录功能</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token string">"regression"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 测试首页功能</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token string">"regression"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testProfilePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 测试个人资料页面功能</span>
    <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_367">
     </a>
     异常测试
    </h4>
    <p>
     在测试中验证代码是否能够正确地抛出预期的异常。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>expectedExceptions <span class="token operator">=</span> <span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDivideByZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token class-name">Calculator</span><span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     使用
     <code>
      @Test
     </code>
     注解的
     <code>
      expectedExceptions
     </code>
     属性指定了预期的异常类型。如果在测试方法中执行的代码确实抛出了指定的异常，则测试将被标记为通过。
    </p>
    <h4>
     <a id="_385">
     </a>
     超时测试
    </h4>
    <p>
     设置测试方法的最大执行时间，以确保代码在规定的时间范围内完成执行。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeoutTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>timeOut <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLongRunningOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 模拟一个长时间运行的操作</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     使用
     <code>
      @Test
     </code>
     注解的
     <code>
      timeOut
     </code>
     属性指定了最大执行时间（以毫秒为单位）。如果测试方法的执行时间超过指定的时间，测试将被标记为失败。
    </p>
    <h4>
     <a id="_405">
     </a>
     多线程测试
    </h4>
    <p>
     使用 TestNG，你可以在多个线程中并发地执行测试方法，以模拟并发和并行的场景。可以通过在
     <code>
      @Test
     </code>
     注解中设置
     <code>
      threadPoolSize
     </code>
     和
     <code>
      invocationCount
     </code>
     属性来实现。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultiThreadTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>threadPoolSize <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> invocationCount <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在多个线程中并发执行的测试方法</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      testMethod
     </code>
     使用了
     <code>
      threadPoolSize = 5
     </code>
     和
     <code>
      invocationCount = 10
     </code>
     ，表示将在一个具有 5 个线程的线程池中并发地执行该测试方法，总共执行 10 次。这样可以模拟并发的场景，并观察测试方法在多线程环境下的行为。
    </p>
    <p>
     注意：在编写多线程测试时，要确保测试方法是线程安全的，并处理好线程间的同步和共享资源的访问。
    </p>
    <h3>
     <a id="_427">
     </a>
     重新运行失败的测试
    </h3>
    <p>
     在maven环境执行测试中，每次测试失败时，TestNG 都会在输出目录中创建一个名为
     <code>
      testng-failed.xml
     </code>
     的文件。此 XML 文件包含仅重新运行这些失败的方法所需的信息，使您能够快速重现故障，而无需运行整个测试。
    </p>
    <blockquote>
     <p>
      <code>
       \target\surefire-reports\testng-failed.xml
      </code>
     </p>
    </blockquote>
    <h3>
     <a id="_433">
     </a>
     断言
    </h3>
    <p>
     在 TestNG 中，常用的断言方法位于
     <code>
      org.testng.Assert
     </code>
     类中，它提供了一系列用于验证测试结果的断言方法。以下是一些常用的断言方法及其最佳实践的代码示例：
    </p>
    <h4>
     <a id="_437">
     </a>
     验证两个值是否相等
    </h4>
    <p>
     <code>
      assertEquals
     </code>
     ：验证两个值是否相等。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span></span><span class="token class-name">Assert</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AssertionTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAddition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token class-name">Calculator</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"Addition result is incorrect."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在上述示例中，
     <code>
      assertEquals
     </code>
     方法用于验证
     <code>
      result
     </code>
     的值是否等于 5。如果断言失败，会抛出 AssertionError，并显示指定的错误消息。
    </p>
    <h4>
     <a id="_457">
     </a>
     验证条件是否为真或为假
    </h4>
    <p>
     <code>
      assertTrue
     </code>
     和
     <code>
      assertFalse
     </code>
     ：验证条件是否为真或为假。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span></span><span class="token class-name">Assert</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AssertionTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIsEvenNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"Number is not even."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在上述示例中，
     <code>
      assertTrue
     </code>
     方法用于验证
     <code>
      number
     </code>
     是否为偶数。如果条件不满足，断言失败并显示错误消息。
    </p>
    <h4>
     <a id="_null__null_477">
     </a>
     验证值是否为 null 或非 null
    </h4>
    <p>
     <code>
      assertNull
     </code>
     和
     <code>
      assertNotNull
     </code>
     ：验证值是否为 null 或非 null。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span></span><span class="token class-name">Assert</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AssertionTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token string">"Jane"</span><span class="token punctuation">,</span> <span class="token string">"Doe"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token string">"Array is null."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在上述示例中，
     <code>
      assertNotNull
     </code>
     方法用于验证
     <code>
      names
     </code>
     数组是否为非 null。如果数组为 null，断言失败并显示错误消息。
    </p>
    <h4>
     <a id="_497">
     </a>
     验证是否抛出了预期的异常
    </h4>
    <p>
     <code>
      assertThrows
     </code>
     ：验证是否抛出了预期的异常。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span></span><span class="token class-name">Assert</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>testng<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AssertionTest</span> <span class="token punctuation">{<!-- --></span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDivideByZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertThrows</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Calculator</span><span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在上述示例中，
     <code>
      assertThrows
     </code>
     方法用于验证
     <code>
      Calculator.divide(10, 0)
     </code>
     是否抛出了
     <code>
      ArithmeticException
     </code>
     异常。如果没有抛出预期的异常，断言失败。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
</div>


