---
layout: post
title: "java8-计算时间差_Java-8计算两个LocalDateTime之间的差"
date: 2024-12-02 13:39:53 +0800
description: "本文档探讨了如何使用Java 8 API正确计算两个LocalDateTime实例之间的差值，包括年"
keywords: "java localdatetime计算两个时间差"
categories: ["未分类"]
tags: ["计算时间差", "Java"]
artid: "114232914"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=114232914
  alt: "java8-计算时间差_Java-8计算两个LocalDateTime之间的差"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     java8 计算时间差_Java 8：计算两个LocalDateTime之间的差
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div style="font-size:16px;">
     <p>
      我试图计算两者之间的差异LocalDateTime。
     </p>
     <p>
      输出必须为格式y years m months d days h hours m minutes s seconds。这是我写的：
     </p>
     <p>
      import java.time.Duration;
     </p>
     <p>
      import java.time.Instant;
     </p>
     <p>
      import java.time.LocalDateTime;
     </p>
     <p>
      import java.time.Period;
     </p>
     <p>
      import java.time.ZoneId;
     </p>
     <p>
      public class Main {
      <!-- -->
     </p>
     <p>
      static final int MINUTES_PER_HOUR = 60;
     </p>
     <p>
      static final int SECONDS_PER_MINUTE = 60;
     </p>
     <p>
      static final int SECONDS_PER_HOUR = SECONDS_PER_MINUTE * MINUTES_PER_HOUR;
     </p>
     <p>
      public static void main(String[] args) {
      <!-- -->
     </p>
     <p>
      LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 9, 19, 46, 45);
     </p>
     <p>
      LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);
     </p>
     <p>
      Period period = getPeriod(fromDateTime, toDateTime);
     </p>
     <p>
      long time[] = getTime(fromDateTime, toDateTime);
     </p>
     <p>
      System.out.println(period.getYears() + " years " +
     </p>
     <p>
      period.getMonths() + " months " +
     </p>
     <p>
      period.getDays() + " days " +
     </p>
     <p>
      time[0] + " hours " +
     </p>
     <p>
      time[1] + " minutes " +
     </p>
     <p>
      time[2] + " seconds.");
     </p>
     <p>
      }
     </p>
     <p>
      private static Period getPeriod(LocalDateTime dob, LocalDateTime now) {
      <!-- -->
     </p>
     <p>
      return Period.between(dob.toLocalDate(), now.toLocalDate());
     </p>
     <p>
      }
     </p>
     <p>
      private static long[] getTime(LocalDateTime dob, LocalDateTime now) {
      <!-- -->
     </p>
     <p>
      LocalDateTime today = LocalDateTime.of(now.getYear(),
     </p>
     <p>
      now.getMonthValue(), now.getDayOfMonth(), dob.getHour(), dob.getMinute(), dob.getSecond());
     </p>
     <p>
      Duration duration = Duration.between(today, now);
     </p>
     <p>
      long seconds = duration.getSeconds();
     </p>
     <p>
      long hours = seconds / SECONDS_PER_HOUR;
     </p>
     <p>
      long minutes = ((seconds % SECONDS_PER_HOUR) / SECONDS_PER_MINUTE);
     </p>
     <p>
      long secs = (seconds % SECONDS_PER_MINUTE);
     </p>
     <p>
      return new long[]{hours, minutes, secs};
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      我得到的输出是29 years 8 months 24 days 12 hours 0 minutes 50 seconds。我已经从该网站检查了我的结果(带有12/16/1984 07:45:55和09/09/2014 19:46:45)。以下屏幕截图显示了输出：
     </p>
     <p align="center">
      <img alt="57b5de04c829baa717576a12bd9cc1a8.png" src="https://i-blog.csdnimg.cn/blog_migrate/1507f7ed2bcc28f6dd594d869efff80b.png"/>
     </p>
     <p>
      我很确定月份值后面的字段在我的代码中出了错。任何建议都将非常有帮助。
     </p>
     <p>
      更新资料
     </p>
     <p>
      我已经从另一个网站测试了我的结果，但是得到的结果却有所不同。在这里是：计算两个日期之间的持续时间(结果：29年，8个月，24天，12小时，0分钟和50秒)。
     </p>
     <p>
      更新资料
     </p>
     <p>
      由于我从两个不同的站点获得了两个不同的结果，因此我想知道我的计算算法是否合法。如果我使用以下两个LocalDateTime对象：
     </p>
     <p>
      LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 40, 45);
     </p>
     <p>
      LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);
     </p>
     <p>
      然后输出即将到来： 29 years 8 months 25 days -1 hours -5 minutes -10 seconds.
     </p>
     <p>
      从这个链接应该是29 years 8 months 24 days 22 hours, 54 minutes and 50 seconds。因此该算法也需要处理负数。
     </p>
     <p>
      注意问题不是关于哪个站点给我什么结果，我需要知道正确的算法并且需要正确的结果。
     </p>
    </div>
   </div>
  </div>
  <div id="recommendDown">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33343438353031322f:61727469636c652f64657461696c732f313134323332393134" class_="artid" style="display:none">
 </p>
</div>
