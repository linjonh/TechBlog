---
layout: post
title: "人大金仓数据库Kingbase替换license.dat文件过期Linux服务器"
date: 2023-11-08 16:53:31 +0800
description: "在Linux中安装了人大金仓数据库后，由于之前选择的授权文件是90天过期，当license.bat授"
keywords: "kingbase授权文件过期怎么替换"
categories: ["未分类"]
tags: ["数据库"]
artid: "134292355"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=134292355
  alt: "人大金仓数据库Kingbase替换license.dat文件过期Linux服务器"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     人大金仓数据库（Kingbase）替换license.dat文件过期（Linux服务器）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
     前言
    </h3>
    <p>
     在Linux中安装了人大金仓数据库后，由于之前选择的授权文件是90天过期，当license.bat授权文件过期后，数据库将出现连不上的情况，提示“ License file expired”。因此，现在为了保证Kingbase数据库能够正常使用，需要重新替换授权文件license.dat，下面我们就来操作如何去替换已经过期的授权文件。
    </p>
    <h3>
     步骤
    </h3>
    <h4>
     1.先去人大金仓官网下载一个可以使用的授权文件。
    </h4>
    <p>
     地址：
     <a href="https://www.kingbase.com.cn/xzzx/index.htm" rel="nofollow" title="人大金仓-成为世界卓越的数据库产品与服务提供商">
      人大金仓-成为世界卓越的数据库产品与服务提供商
     </a>
    </p>
    <p>
     根据实际情况下载对应的就好。
    </p>
    <p>
     <img alt="" height="743" src="https://i-blog.csdnimg.cn/blog_migrate/0cfba8d0e54211929253691fca82b7ca.png" width="1200"/>
    </p>
    <h4>
     2. 将下载好的license.dat文件上传到我们安装KIngbase的服务器上（位置任意）
    </h4>
    <h4>
     3.切换用户
    </h4>
    <p>
     <span style="color:#ff9900;">
      说明：
     </span>
     如果大家在安装kingbase的时候不是新创建了一个用户来安装，那么就可以省略这步，笔者之前是新创建了一个新用户（kingbase）来安装人大金仓数据库的为了安全。因此在这儿需要切换用户来执行人大金仓的相关命令。
    </p>
    <p>
     <img alt="" height="217" src="https://i-blog.csdnimg.cn/blog_migrate/c9cf9fba6fe78b78800259a7d77d3e47.png" width="613"/>
    </p>
    <p>
     切换用户并切换到安装license.dat的目录
    </p>
    <pre><code>su kingbase</code></pre>
    <h4>
     4.在进行替换授权文件之前，需要先停止kingbase数据库。
    </h4>
    <p>
     （1）检查kingbase的数据库进程
    </p>
    <pre><code>ps -ef|grep kingbase
</code></pre>
    <p>
     可以看到运行kingbase的基本情况。
    </p>
    <p>
     （2）找到kingbase的安装位置
    </p>
    <pre><code>find / -name kingbase</code></pre>
    <p>
     （3）切换到安装kingbase的bin文件夹目录下，执行如下停止命令：-D 是指定目录根据你上面那个查看kingbase进程运行的的路径来确定。
    </p>
    <pre><code>cd /data/KingbaseES/V8/R6/Server/bin
./sys_ctl stop -D /data/KingbaseES/V8/R6/data
</code></pre>
    <h4>
     5.找到我们之前安装kingbase数据库的license.dat文件
    </h4>
    <pre><code>find / -name license.dat</code></pre>
    <p>
     <img alt="" height="68" src="https://i-blog.csdnimg.cn/blog_migrate/ba6331e38035d0c7384e3c50f40ff0e8.png" width="660"/>
    </p>
    <h4>
     6.替换license.dat文件
    </h4>
    <p>
     切换到上面这个目录（/data/KingbaseES/V8/R6），找到的kingbase的过期的license.dat授权文件删除或重命名，再把之前上传到服务器的license.dat文件，移动到现在kingbase的安装授权证书目录下。
    </p>
    <h4>
     7.启动kingbase数据库
    </h4>
    <p>
     在/bin目录下执行如下命令：
    </p>
    <pre><code>./sys_ctl start -D /data/KingbaseES/V8/R6/data</code></pre>
    <h4>
     8.验证是否更新成功
    </h4>
    <p>
     如果没更新成功，是不能通过命令登录服务器上kingbase。
    </p>
    <p>
     方法一：在Linux中使用连接数据库的命令
    </p>
    <p>
     命令也是需要再bin目录下执行。
    </p>
    <blockquote>
     <p>
      ./ksql -U 用户名 -W -p 端口号
     </p>
    </blockquote>
    <p>
     能够正常连接进入即为成功。
    </p>
    <p>
     方法二：通过kingbase的管理工具来连接数据库，能够正常连接即为成功。
    </p>
    <p>
     并且登录kingbase的管理工具之后，可以通过命令查看当前授权文件的过期时间。
    </p>
    <p>
     命令：select GET_LICENSE_VALIDDAYS();
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35323938353038372f:61727469636c652f64657461696c732f313334323932333535" class_="artid" style="display:none">
 </p>
</div>
