---
layout: post
title: "Python游戏开发反弹球内附完整代码"
date: 2024-07-12 00:09:39 +0800
description: "反弹球是一个简单的物理模拟游戏，玩家需要通过点击屏幕来控制一个小球反弹，以避开不断移动的目标。游戏的"
keywords: "python弹球游戏代码"
categories: ['Python']
tags: ['Python', 'Java', 'Android']
artid: "140365031"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=140365031
    alt: "Python游戏开发反弹球内附完整代码"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Python游戏开发：反弹球（内附完整代码）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/254e2a729b8e49ffb58f0b685faae37e.gif#pic_center"/>
    </p>
    <p>
     反弹球是一个简单的物理模拟游戏，玩家需要通过点击屏幕来控制一个小球反弹，以避开不断移动的目标。游戏的背景设定在一个抽象的空间中，小球和目标都在一个二维平面上移动，玩家的目标是尽可能长时间地保持小球在屏幕内。
    </p>
    <h2>
     <a id="_5">
     </a>
     一、游戏实现
    </h2>
    <p>
     这个游戏使用Python语言编写，利用了turtle图形库来创建图形界面，以及freegames库中的vector类来处理向量运算。游戏的实现主要分为以下几个步骤：
    </p>
    <p>
     <strong>
      初始化游戏变量和界面。
      <br/>
      定义游戏逻辑和物理规则。
      <br/>
      绘制游戏界面和元素。
      <br/>
      响应用户输入和更新游戏状态。
      <br/>
      循环执行游戏逻辑。
     </strong>
    </p>
    <h2>
     <a id="_13">
     </a>
     二、实现步骤
    </h2>
    <h3>
     <a id="1_14">
     </a>
     1.导入模块与初始化
    </h3>
    <p>
     首先，我们需要导入必要的Python模块，并初始化游戏的基本设置。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> random <span class="token keyword">import</span> randrange
<span class="token keyword">from</span> turtle <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> freegames <span class="token keyword">import</span> vector

<span class="token comment"># 初始化小球的位置和速度</span>
ball <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">)</span>
speed <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment"># 初始化目标列表</span>
targets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre>
    <ul>
     <li>
      <code>
       from random import randrange
      </code>
      导入随机数生成函数。
     </li>
     <li>
      <code>
       from turtle import *
      </code>
      导入Turtle图形库，用于绘制游戏界面。
     </li>
     <li>
      <code>
       from freegames import vector
      </code>
      导入向量类，用于处理小球和目标的位置和速度。
     </li>
    </ul>
    <h3>
     <a id="2_35">
     </a>
     2.游戏界面设置
    </h3>
    <p>
     接下来，设置游戏界面的大小和隐藏Turtle图形。
    </p>
    <pre><code class="prism language-python">setup<span class="token punctuation">(</span><span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">370</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
hideturtle<span class="token punctuation">(</span><span class="token punctuation">)</span>
up<span class="token punctuation">(</span><span class="token punctuation">)</span>
tracer<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <code>
       setup(420, 420, 370, 0)
      </code>
      设置画布大小和初始位置。
     </li>
     <li>
      <code>
       hideturtle()
      </code>
      隐藏Turtle图形，因为游戏不需要显示绘制工具。
     </li>
     <li>
      <code>
       up()
      </code>
      抬起画笔，移动时不绘制线条。
     </li>
     <li>
      <code>
       tracer(False)
      </code>
      关闭动画更新，以提高绘制效率。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c112e98159504cd9b059d1a20efcfe7f.png"/>
     </li>
    </ul>
    <h3>
     <a id="3_51">
     </a>
     3.屏幕点击事件处理
    </h3>
    <p>
     定义一个函数来响应屏幕点击事件，更新小球的位置和速度。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">tap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""响应屏幕点击，重置小球位置和速度。"""</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> inside<span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">:</span>
        ball<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">199</span>
        ball<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">199</span>
        speed<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">25</span>
        speed<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">25</span>
</code></pre>
    <ul>
     <li>
      <code>
       tap
      </code>
      函数通过参数
      <code>
       x
      </code>
      和
      <code>
       y
      </code>
      接收点击位置。
     </li>
     <li>
      <code>
       inside(ball)
      </code>
      检查小球是否在屏幕内。
     </li>
     <li>
      如果小球不在屏幕内，重置小球位置，并根据点击位置计算速度。
     </li>
    </ul>
    <h3>
     <a id="4_69">
     </a>
     4.判断小球是否在屏幕内
    </h3>
    <p>
     定义一个函数来判断给定的坐标是否在屏幕内。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">inside</span><span class="token punctuation">(</span>xy<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""判断给定坐标是否在屏幕内。"""</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">200</span> <span class="token operator">&lt;</span> xy<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">200</span> <span class="token keyword">and</span> <span class="token operator">-</span><span class="token number">200</span> <span class="token operator">&lt;</span> xy<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">200</span>
</code></pre>
    <ul>
     <li>
      <code>
       inside
      </code>
      函数通过参数
      <code>
       xy
      </code>
      接收坐标。
     </li>
     <li>
      返回值表示坐标是否在屏幕内。
     </li>
    </ul>
    <h3>
     <a id="5_81">
     </a>
     5.绘制游戏界面
    </h3>
    <p>
     定义一个函数来绘制小球和目标。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""清除屏幕并重新绘制小球和目标。"""</span>
    clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> targets<span class="token punctuation">:</span>
        goto<span class="token punctuation">(</span>target<span class="token punctuation">.</span>x<span class="token punctuation">,</span> target<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
        dot<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> inside<span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">:</span>
        goto<span class="token punctuation">(</span>ball<span class="token punctuation">.</span>x<span class="token punctuation">,</span> ball<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
        dot<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span>
    update<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <code>
       clear()
      </code>
      清除屏幕。
     </li>
     <li>
      <code>
       goto(target.x, target.y)
      </code>
      移动画笔到目标位置。
     </li>
     <li>
      <code>
       dot(20, 'blue')
      </code>
      绘制蓝色目标点。
     </li>
     <li>
      <code>
       goto(ball.x, ball.y)
      </code>
      移动画笔到小球位置。
     </li>
     <li>
      <code>
       dot(6, 'red')
      </code>
      绘制红色小球。
     </li>
     <li>
      <code>
       update()
      </code>
      更新屏幕显示。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0b9e0c61affa416cb70c9d673aa583fa.png"/>
     </li>
    </ul>
    <h3>
     <a id="6_105">
     </a>
     6.移动小球和目标
    </h3>
    <p>
     定义一个函数来移动小球和目标，并更新游戏状态。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""移动小球和目标，更新游戏状态。"""</span>
    <span class="token comment"># 随机生成新目标</span>
    <span class="token keyword">if</span> randrange<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        y <span class="token operator">=</span> randrange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span>
        target <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        targets<span class="token punctuation">.</span>append<span class="token punctuation">(</span>target<span class="token punctuation">)</span>

    <span class="token comment"># 移动现有目标</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> targets<span class="token punctuation">:</span>
        target<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">0.5</span>

    <span class="token comment"># 更新小球位置和速度</span>
    <span class="token keyword">if</span> inside<span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">:</span>
        speed<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">0.35</span>
        ball<span class="token punctuation">.</span>move<span class="token punctuation">(</span>speed<span class="token punctuation">)</span>

    <span class="token comment"># 检查并更新目标列表</span>
    dupe <span class="token operator">=</span> targets<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    targets<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> dupe<span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>target <span class="token operator">-</span> ball<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">13</span><span class="token punctuation">:</span>
            targets<span class="token punctuation">.</span>append<span class="token punctuation">(</span>target<span class="token punctuation">)</span>

    <span class="token comment"># 绘制更新后的游戏界面</span>
    draw<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 检查是否有目标移出屏幕</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> targets<span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> inside<span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span>

    <span class="token comment"># 定时调用move函数，更新游戏状态</span>
    ontimer<span class="token punctuation">(</span>move<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <code>
       randrange(40)
      </code>
      随机生成新目标的条件。
     </li>
     <li>
      <code>
       target.x -= 0.5
      </code>
      目标向左移动。
     </li>
     <li>
      <code>
       speed.y -= 0.35
      </code>
      小球向下加速，模拟重力。
     </li>
     <li>
      <code>
       ball.move(speed)
      </code>
      更新小球位置。
     </li>
     <li>
      <code>
       abs(target - ball) &gt; 13
      </code>
      判断目标是否被击中。
     </li>
     <li>
      <code>
       ontimer(move, 50)
      </code>
      每50毫秒调用一次
      <code>
       move
      </code>
      函数，实现游戏循环。
     </li>
    </ul>
    <h3>
     <a id="7_152">
     </a>
     7.游戏主循环
    </h3>
    <p>
     最后，设置屏幕点击事件的回调函数，并启动游戏循环。
    </p>
    <pre><code class="prism language-python">onscreenclick<span class="token punctuation">(</span>tap<span class="token punctuation">)</span>
move<span class="token punctuation">(</span><span class="token punctuation">)</span>
done<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <code>
       onscreenclick(tap)
      </code>
      设置屏幕点击事件的回调函数。
     </li>
     <li>
      <code>
       move()
      </code>
      启动游戏循环。
     </li>
     <li>
      <code>
       done()
      </code>
      结束游戏，保持最后的画面。
     </li>
    </ul>
    <p>
     通过以上代码解析，我们可以看到反弹球游戏的实现涉及到了随机数生成、事件处理、物理模拟和图形绘制等多个方面。
    </p>
    <h2>
     <a id="_167">
     </a>
     三、效果展示
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/254e2a729b8e49ffb58f0b685faae37e.gif#pic_center"/>
    </p>
    <h2>
     <a id="_170">
     </a>
     四、完整代码及注释
    </h2>
    <pre><code class="prism language-python"><span class="token keyword">from</span> random <span class="token keyword">import</span> randrange  <span class="token comment"># 导入随机数生成函数</span>
<span class="token keyword">from</span> turtle <span class="token keyword">import</span> <span class="token operator">*</span>  <span class="token comment"># 导入Turtle图形库，用于绘制游戏界面</span>
<span class="token keyword">from</span> freegames <span class="token keyword">import</span> vector  <span class="token comment"># 导入向量类，用于处理小球和目标的位置和速度</span>

<span class="token comment"># 初始化小球的位置和速度</span>
ball <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">)</span>  <span class="token comment"># 小球的初始位置</span>
speed <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 小球的初始速度</span>

<span class="token comment"># 初始化目标列表，用于存储目标的位置</span>
targets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment"># 设置游戏界面的大小和初始位置</span>
setup<span class="token punctuation">(</span><span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">370</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 画布大小和初始位置</span>
hideturtle<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 隐藏Turtle图形</span>
up<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 抬起画笔，移动时不绘制线条</span>
tracer<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment"># 关闭动画更新，以提高绘制效率</span>

<span class="token comment"># 定义屏幕点击事件处理函数</span>
<span class="token keyword">def</span> <span class="token function">tap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""响应屏幕点击事件，重置小球位置和速度。"""</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> inside<span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 如果小球不在屏幕内</span>
        ball<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">199</span>  <span class="token comment"># 重置小球的x坐标</span>
        ball<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">199</span>  <span class="token comment"># 重置小球的y坐标</span>
        speed<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">25</span>  <span class="token comment"># 根据点击位置计算小球的x方向速度</span>
        speed<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">25</span>  <span class="token comment"># 根据点击位置计算小球的y方向速度</span>

<span class="token comment"># 定义判断小球是否在屏幕内的函数</span>
<span class="token keyword">def</span> <span class="token function">inside</span><span class="token punctuation">(</span>xy<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""判断给定坐标是否在屏幕内。"""</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">200</span> <span class="token operator">&lt;</span> xy<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">200</span> <span class="token keyword">and</span> <span class="token operator">-</span><span class="token number">200</span> <span class="token operator">&lt;</span> xy<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">200</span>  <span class="token comment"># 检查坐标是否在屏幕范围内</span>

<span class="token comment"># 定义绘制游戏界面的函数</span>
<span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""清除屏幕并重新绘制小球和目标。"""</span>
    clear<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 清除屏幕</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> targets<span class="token punctuation">:</span>  <span class="token comment"># 遍历目标列表</span>
        goto<span class="token punctuation">(</span>target<span class="token punctuation">.</span>x<span class="token punctuation">,</span> target<span class="token punctuation">.</span>y<span class="token punctuation">)</span>  <span class="token comment"># 移动画笔到目标位置</span>
        dot<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span>  <span class="token comment"># 绘制蓝色目标点，半径为20</span>
    <span class="token keyword">if</span> inside<span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 如果小球在屏幕内</span>
        goto<span class="token punctuation">(</span>ball<span class="token punctuation">.</span>x<span class="token punctuation">,</span> ball<span class="token punctuation">.</span>y<span class="token punctuation">)</span>  <span class="token comment"># 移动画笔到小球位置</span>
        dot<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span>  <span class="token comment"># 绘制红色小球，半径为6</span>
    update<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 更新屏幕显示</span>

<span class="token comment"># 定义移动小球和目标的函数</span>
<span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""移动小球和目标，更新游戏状态。"""</span>
    <span class="token comment"># 随机生成新目标</span>
    <span class="token keyword">if</span> randrange<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>  <span class="token comment"># 每40帧有1帧的概率生成新目标</span>
        y <span class="token operator">=</span> randrange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span>  <span class="token comment"># 目标的y坐标随机生成</span>
        target <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>  <span class="token comment"># 新目标的x坐标固定为200</span>
        targets<span class="token punctuation">.</span>append<span class="token punctuation">(</span>target<span class="token punctuation">)</span>  <span class="token comment"># 将新目标添加到目标列表</span>

    <span class="token comment"># 移动现有目标</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> targets<span class="token punctuation">:</span>  <span class="token comment"># 遍历目标列表</span>
        target<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">0.5</span>  <span class="token comment"># 目标向左移动</span>

    <span class="token comment"># 更新小球位置和速度</span>
    <span class="token keyword">if</span> inside<span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 如果小球在屏幕内</span>
        speed<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">0.35</span>  <span class="token comment"># 小球向下加速，模拟重力</span>
        ball<span class="token punctuation">.</span>move<span class="token punctuation">(</span>speed<span class="token punctuation">)</span>  <span class="token comment"># 更新小球位置</span>

    <span class="token comment"># 检查并更新目标列表</span>
    dupe <span class="token operator">=</span> targets<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 复制当前目标列表</span>
    targets<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 清空当前目标列表</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> dupe<span class="token punctuation">:</span>  <span class="token comment"># 遍历复制的目标列表</span>
        <span class="token keyword">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>target <span class="token operator">-</span> ball<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">13</span><span class="token punctuation">:</span>  <span class="token comment"># 如果目标与小球的距离大于13</span>
            targets<span class="token punctuation">.</span>append<span class="token punctuation">(</span>target<span class="token punctuation">)</span>  <span class="token comment"># 将目标添加回目标列表</span>

    <span class="token comment"># 绘制更新后的游戏界面</span>
    draw<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 检查是否有目标移出屏幕</span>
    <span class="token keyword">for</span> target <span class="token keyword">in</span> targets<span class="token punctuation">:</span>  <span class="token comment"># 遍历目标列表</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> inside<span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 如果目标不在屏幕内</span>
            <span class="token keyword">return</span>  <span class="token comment"># 停止移动函数</span>

    <span class="token comment"># 定时调用move函数，更新游戏状态</span>
    ontimer<span class="token punctuation">(</span>move<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>  <span class="token comment"># 每50毫秒调用一次move函数</span>

<span class="token comment"># 设置屏幕点击事件的回调函数，并启动游戏循环</span>
onscreenclick<span class="token punctuation">(</span>tap<span class="token punctuation">)</span>  <span class="token comment"># 设置屏幕点击事件的回调函数</span>
move<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 启动游戏循环</span>
done<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 结束游戏，保持最后的画面</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35313339303538322f:61727469636c652f64657461696c732f313430333635303331" class_="artid" style="display:none">
 </p>
</div>


