---
layout: post
title: "云平台监控指标的设定"
date: 2024-05-27 08:56:17 +0800
description: "为了确保存储和服务器能应付不断增长的业务需求，对磁盘资源、内存和CPU资源、宿主操作系统进行监控是必"
keywords: "监控平台对云平台虚拟化需要监控哪些"
categories: ['运维技术', '云计算']
tags: ['经验分享', '云计算']
artid: "108089819"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=108089819
    alt: "云平台监控指标的设定"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     云平台监控指标的设定
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     为了确保存储和服务器能应付不断增长的业务需求，对磁盘资源、内存和CPU资源、宿主操作系统进行监控是必要的。
    </p>
    <p>
     <strong>
      1.磁盘资源
     </strong>
     <br/>
     服务器硬盘是磁盘资源中最慢的组件，在企业数据中心，仔细设计存储子系统，不要让它成为主要的性能瓶颈。
    </p>
    <p>
     <strong>
      建议：
     </strong>
    </p>
    <ul>
     <li>
      使用SAN，即使预算不允许，也要确保磁盘资源争用不会导致虚拟机瘫痪；
     </li>
     <li>
      应将宿主机操作系统安装到专用硬盘上（不是专用卷），确保宿主操作系统不会与虚拟机抢夺磁盘资源。
     </li>
     <li>
      RAID阵列是满足虚拟服务器性能必须的，RAID 1或RAID 10（提供更好的容错）。
     </li>
     <li>
      优先考虑磁盘转速10K RPM的硬盘，比7500 RPM贵但性能表现好；
     </li>
     <li>
      热插拔的SCSI硬盘（否则换硬盘得关闭系统），尤其当多个虚拟服务共享一个存储阵列时；
     </li>
    </ul>
    <p>
     <strong>
      监控指标：
     </strong>
    </p>
    <ul>
     <li>
      每秒I/O数（IOPS或TPS）
     </li>
     <li>
      吞吐量（thoughput)
     </li>
     <li>
      平均IO数据尺寸
     </li>
     <li>
      磁盘活动时间百分比
     </li>
     <li>
      服务时间（磁盘读或写执行的时间，包括寻道、旋转时延和数据传输等），如果该值超过20ms，一般认为会对上层应用产生影响。
     </li>
     <li>
      I/O等待队列长度
     </li>
     <li>
      等待时间（队列中排队的时间）
     </li>
    </ul>
    <p>
     <strong>
      2.内存和CPU
     </strong>
    </p>
    <p>
     <strong>
      监控指标：
     </strong>
    </p>
    <ul>
     <li>
      CPU使用率
     </li>
     <li>
      CPU空闲率（判断CPU是否瓶颈的方法1，运行队列大于CPU核数3～4倍）
     </li>
     <li>
      内存使用率（判断内存是否为瓶颈，至少有10%的可用内存，内存使用率上限85%）
     </li>
    </ul>
    <p>
     <strong>
      3.宿主操作系统
     </strong>
    </p>
    <ul>
     <li>
      独立的虚拟化产品，VMware、Hyper-V
     </li>
     <li>
      保留宿主操作系统中必须的进程
     </li>
     <li>
      确保宿主操作系统上防病毒软件不要扫描虚拟硬盘与虚拟机相关的任何文件
     </li>
     <li>
      宿主操作系统的处理器调度方法
     </li>
     <li>
      空闲时间安排碎片整理
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33373939313434362f:61727469636c652f64657461696c732f313038303839383139" class_="artid" style="display:none">
 </p>
</div>


