---
layout: post
title: "存储的块接口,文件接口,对象接口原理"
date: 2018-11-11 02:26:37 +0800
description: "且听本半仙慢慢道来我们知道磁盘读写的最小粒度为一个扇区，一个扇区大小为512字节。也就是说不可能往某"
keywords: "块接口"
categories: ['']
tags: ['文件', '对象', '存储', '块']
artid: "83935142"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=83935142
    alt: "存储的块接口,文件接口,对象接口原理"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     存储的块接口，文件接口，对象接口原理
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     能阅读本半仙此卷实乃汝之所幸
    </h3>
    <p>
     我们知道磁盘读写的最小粒度为一个扇区，一个扇区大小为512字节。也就是说不可能往某个扇区的某部分开始写入多少多少数据。每次磁头连续读写的时候，只能以扇区为单位，即使一次只写了一个字节的数据，那么下一次就不能再向这个扇区剩余的部分接着写入数据，需要寻找一个空扇区。
    </p>
    <p>
     操作系统每次去读写磁盘的时候，每次都按照扇区单位来操作的话，效率实在太低了。那就将几个扇区合在一起叫做一个块（block），常见有一个块=1k，2K或者4K。块级别接口是直接读写存储空间（磁盘，LUN，Volume）中的一个或者一段地址的扇区来存取数据。比如主机向存储设备发出请求：请将LUN1上的0~127这128个扇区的数据读出来。这之间的交互就是块级别的访问。在线缆上传递的三元素是：起始扇区号码、操作码（是读还是写）、操作的扇区数量。这种访问接口可以是：IDE、SATA、SCSI、ISCSI。底层物理磁盘为了让操作系统看到自己，就把自己抽象逻辑出来，称为块设备。在类UNIX操作系统下块设备表现为一个文件。
    </p>
    <p>
     文件系统的作用是将块数据虚拟成文件。本地文件系统将硬盘上的数据包装，展现，以及提供调用接口。文件系统将数据展现为文件和目录的形式，调用接口包括：读，写，删除，创建。比如主机发出请求：请将X目录下的file.txt文件的前128个字节传给我。这就是文件级别的访问。这种访问接口就由文件系统提供。这种访问方式可以在网络上进行数据传输，即对外提供访问文件系统的接口即可，如NFS、CIFS、CephFS。网络文件系统与本地文件系统的唯一区别就是传输方式从主板上的导线变成了以太网。
    </p>
    <p>
     关于对象存储接口，还是采用上述的比拟方式，客户端向存储系统发出请求：请将X对象的数据给我，我给你X对象的ID。对象存储系统说：好的，我给你返回整个对象。这就是对象级别的访问。对象数据最终存储在对象存储设备（OSD）上，在OSD本地文件系统上以一个文件的形式表现。只要前端接口是对象接口，就是对象存储。至于后端怎么设计实现没有定论，八仙过海各显神威。对象存储是一种新型的存储形态，主要面向海量非结构化数据的存储，常用于静态数据、备份归档、流媒体等场景。与传统的块、文件存储访问方式不同，对象存储通常情况下提供HTTP访问接口，非常方便数据通过互联网进行传输，因此，对象存储成为了云存储领域中的一种常见的存储形态。自己由Ceph入道，所以之前一直以为Ceph就是对象存储的唯一定义，被困了很久。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f75303132333834373838:2f61727469636c652f64657461696c732f3833393335313432" class_="artid" style="display:none">
 </p>
</div>


