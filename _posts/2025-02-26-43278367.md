---
layout: post
title: "UIXO协议"
date: 2025-02-26 13:16:05 +0800
description: "这是一种远优于传统电子积木通信协议的方案，结合TwinkleStar团队正在完成的硬件浏览器非常适合"
keywords: "uixo"
categories: ['硬件浏览器与Uixo开发框架']
tags: ['硬件浏览器', '物联网', 'Uixo', 'Uixo']
artid: "43278367"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=43278367
    alt: "UIXO协议"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     UIXO协议
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p align="center">
     <strong>
      UIXO简化协议
     </strong>
    </p>
    <p>
    </p>
    <p>
     1.    UIXO模块支持热插拔（即插即用），不需要用户电脑里安装任何软件不需任何配置，只要有浏览器就可以。然后在对应的硬件浏览器网页里，参照界面说明读取信息和配置控制UIXO模块。
    </p>
    <p>
     2.    UIXO模块具有串口波特率自适应的特性，上电后通过向WI-FI串口发送测试信息，检测request信息是否是test来完成模块的波特率自适应。
    </p>
    <p>
     3.    小模块的协议将公开，并且提供描述符样例代码帮助用户制造和DIY兼容设备和新设备。
    </p>
    <p>
     4.    模块的协议将划分团队官方认证设备和用户自定义设备。
    </p>
    <p>
     5.    经过官方认证的的设备可以自动识别型号，由硬件浏览器自动分享和从网上下载配置文件和驱动，具有优化的显示图标和专用的参数配置页面，官方认证设备将可以通过网络更新单片机固件，使用TwinkleStar官方服务器，认证设备的制造商将可以把新版固件提交TwinkleStar服务器审核后发布并更新到所有的模块中（通过进入刷机模式串口来写入小模块固件）。
    </p>
    <p>
     6.    未经官方认证的自定义设备允许用户建立自定义的配置页面和配置参数。
    </p>
    <p>
     总结：这是一种远优于传统arduino电子积木的方案，结合团队正在完成的硬件浏览器非常适合在物联网环境下采集数据和完成物理世界的控制。
    </p>
    <p>
     7.    来自TwinkleStar的请求分为（在MODE位）
    </p>
    <p>
     设备类型描述请求(0x01:device descriptor request)
    </p>
    <p>
     地址设置请求(0x02:device address request)
    </p>
    <p>
     设备配置格式请求(0x03:configuation formate request)
    </p>
    <p>
     设备配置请求(0x04:configuration request)
    </p>
    <p>
     设备报告格式请求(0x05:report format request)
    </p>
    <p>
     数据请求(0x06:In action data request)
    </p>
    <p>
     配置更新请求(0x07:save the current configuration toflash)
    </p>
    <p>
     默认配置请求(0x08:restore default configuation)
    </p>
    <p>
     固件更新请求(0x09:mode ISP request)
    </p>
    <p>
     设备信息帮助请求(0x0A:help info in ASCII mode ISP request)
    </p>
    <p>
     IO口配置请求(0x0B:IO configuration request )
    </p>
    <p>
     IO口功能请求(0x0C: IO function request)
    </p>
    <p>
     特殊函数请求(0x0D: Special function request)
    </p>
    <p>
     特殊功能顺序请求(0x0E: Special function sequence request)
    </p>
    <p align="left">
     8．来自串口单片机的数据分为(类似于MODE位)
    </p>
    <p align="left">
     设备类型描述
    </p>
    <p align="left">
     地址
    </p>
    <p align="left">
     配置
    </p>
    <p align="left">
     配置格式
    </p>
    <p align="left">
     报告格式
    </p>
    <p align="left">
     数据请求
    </p>
    <p align="left">
     数据报告
    </p>
    <p>
     IO口配置报告
    </p>
    <p>
     IO口功能报告
    </p>
    <p>
     特殊函数报告
    </p>
    <p>
     特殊功能顺序报告
    </p>
    <p>
    </p>
    <p align="center">
     模块枚举的流程如下
    </p>
    <p>
     1.    模块插入TwinkleStar的WI-FI接口系统上电启动载入默认设备配置说明（有kernel底层自载入该UIXO模块设备配置说明，同时由TwinkleStar发起询问WHO ARE YOU，以此做双层保护）
    </p>
    <p>
     2.    波特率自适应方式：模块接收TwinkleStar请求，回复test直到TwinkleStar找到合适的波特率。之后按协议发送数据。
    </p>
    <p>
     3.    单片机开始发送数据或者TwinkleStar开始发送数据（具体见设备描述分类）
    </p>
    <p>
     4.    当单片机未按请求回复自己的地址的时候重发test等待设备描述符请求（可能是拔出或者更换）按照返回数据重新流程或者关闭WI-FI分配给别的模块
    </p>
    <p>
     <br/>
    </p>
    <p>
    </p>
    <p align="center">
     <strong>
      UIXO-Andromeda协议制定
     </strong>
    </p>
    <p>
     1.    整体结构(总体来讲)：
    </p>
    <p>
     TwinkleStar端协议：
    </p>
    <table align="left" border="1" cellpadding="0" cellspacing="0" width="489">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          0x48
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          0x59
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          0x3C
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          0x**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          0x**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:yellow">
          0x**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B0F0">
          0x**
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          SIZE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          MODE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:yellow">
          DATA
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          Checksum
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     结构说明：
    </p>
    <p>
     帧头：0x48 0x59 0X3C
    </p>
    <p>
     内容：从SIZE到DATA,SIZE指的是从MODE到DATA的字节长度，从0开始计数。
    </p>
    <p>
     帧尾：Checksum是从MODE到DATA的所有字节异或。
    </p>
    <p>
     MCU协处理器端协议：
    </p>
    <table align="left" border="1" cellpadding="0" cellspacing="0" width="489">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          0x48
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          0x59
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          0x3E
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          0x**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          0x**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:yellow">
          0x**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B0F0">
          0x**
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          SIZE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          MODE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:yellow">
          DATA
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          Checksum
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     结构说明：
    </p>
    <p>
     帧头：0x48 0x59 0X3E
    </p>
    <p>
     内容：从SIZE到DATA,SIZE指的是从MODE到DATA的字节长度，从0开始计数。
    </p>
    <p>
     帧尾：Checksum是从MODE到DATA的所有字节异或。
    </p>
    <p>
     2.    当硬件浏览器端询问WHO ARE YOU时，单片机返回设备描述（包括PID,UID）
    </p>
    <p align="left">
     设备描述格式0x48;0x59;0x3E;[设备描述符大小{字节数包括桢头}][设备类{0x00,0x01,0x02,0x03,0x04,0x05}];[设备制造商{0x00代表TwinkleStar团队，0xff代表用户自定义，中间的数值代表不同的认证小模块制造商}]；[设备绝对ID号高字节]；[设备绝对ID号低字节]；[设备硬件版本号]；{可选的xml格式页面描述，用于配制硬件浏览器中的设备页面}；校验位
    </p>
    <p>
     3.    说明MODE位上的作用
    </p>
    <p>
     当MODE位等于以下时，相应作用见下面说明
    </p>
    <p>
     设备类型描述请求(0x01:device descriptor request)
    </p>
    <p>
     地址设置请求(0x02:device address request)
    </p>
    <p>
     设备配置格式请求(0x03:configuation formate request)
    </p>
    <p>
     设备配置请求(0x04:configuration request)
    </p>
    <p>
     设备报告格式请求(0x05:report format request)
    </p>
    <p>
     数据请求(0x06:In action data request)
    </p>
    <p>
     配置更新请求(0x07:save the current configuration toflash)
    </p>
    <p>
     默认配置请求(0x08:restore default configuation)
    </p>
    <p>
     固件更新请求(0x09:mode ISP request)
    </p>
    <p>
     设备信息帮助请求(0x0A:help info in ASCII mode ISP request)
    </p>
    <p>
     IO口配置请求(0x0B:IO configuration request )
    </p>
    <p>
     IO口功能请求(0x0C: IO function request)
    </p>
    <p>
     特殊函数请求(0x0D: Special function request)
    </p>
    <p>
     特殊功能顺序请求(0x0E: Special function sequence request)
    </p>
    <p>
     <span style="color:red">
      思想：封装
     </span>
     <span style="color:red">
      API
     </span>
     <span style="color:red">
      机制，意在更加灵活的搭建应用。
     </span>
    </p>
    <p>
     4.    重点说明一：设备信息帮助请求(0x0A:help info in ASCII mode ISP request)
    </p>
    <p>
     如果硬件浏览器发送以下信息
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          0X48
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          0X59
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          0X3C
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          0X00
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          0X0A
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B0F0">
          0X0A
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          SIZE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          MODE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B0F0">
          Checksum
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     MCU端会发送一系列UIXO模块的帮助配置信息，以及此开发板说明信息
    </p>
    <p>
     5.    重点说明二：IO口配置请求(0x0B:IO configuration request )
    </p>
    <p>
     如果硬件浏览器发送以下信息
    </p>
    <table border="1" cellpadding="0" cellspacing="0" width="571">
     <tbody>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          48
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          59
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          3C
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          0X**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          0X0B
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:yellow">
          0X**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#92D050">
          0X**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B050">
          0X**
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B0F0">
          0X**
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#C00000">
          头
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:red">
          SIZE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#FFC000">
          MODE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:yellow">
          IO
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#92D050">
          IO_MODE
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B050">
          Config_data
         </span>
        </p>
       </td>
       <td>
        <p>
         <span style="color:#00B0F0">
          Checksum
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     格式介绍：
    </p>
    <p>
     硬件浏览器配置，由硬件浏览器发起请求格式
    </p>
    <p>
     <span style="color:#C00000">
      0x48
     </span>
     <span style="color:#C00000">
      ；
     </span>
     <span style="color:#C00000">
      0x59
     </span>
     <span style="color:#C00000">
      ；
     </span>
     <span style="color:#C00000">
      0x3C
     </span>
     ；[
     <span style="color:red">
      请求描述长度
     </span>
     <span style="color:red">
      0(SIZE_LENGHT)
     </span>
     ]；[
     <span style="color:#FFC000">
      请求帧
     </span>
     <span style="color:#FFC000">
      1(MODE)
     </span>
     ] ；[
     <span style="color:yellow">
      请求帧
     </span>
     <span style="color:yellow">
      2(IO)
     </span>
     ]；[
     <span style="color:#92D050">
      请求帧
     </span>
     <span style="color:#92D050">
      3(IO_MODE)
     </span>
     ]；[
     <span style="color:#00B050">
      请求帧
     </span>
     <span style="color:#00B050">
      4(Config_data)
     </span>
     ]；[
     <span style="color:#00B0F0">
      数据校验
     </span>
     <span style="color:#00B0F0">
      (Checksum)
     </span>
     ]
    </p>
    <p>
     SIZE指的是报告描述长度，从请求帧开始到数据校验之前的字节数，并且从0开始计数。
    </p>
    <p>
     请求帧1是MODE，模式请求选择，例如请求设备制造商，这里是0X01;请求确定波特率，即是0x00；IO口配置请求是0x0B;IO口功能请求是0x0C。
    </p>
    <p>
     请求帧2是IO，即IO端口选择。
    </p>
    <p>
     请求帧3是IO_MODE，即请求该IO口模式配置，例如0x00是标准IO口输入输出配置模式；0X01是PWM输出配置模式；0X02是ADC配置模式；0X03是IIC配置模式；0X04是SPI配置模式；0X05是串口配置模式。
    </p>
    <p>
     请求帧4是Config_data，即请求该IO口在模式配置数据参数，例如在标准IO输入输出配置模式下，0x00是标准IO口输入配置；0X01是标准IO口输出配置；其他等等，见以后说明。
    </p>
    <p>
     数据校验是Checksum位，即从MODE开始到checksum之前的所有数据异或。
    </p>
    <p>
     <br/>
    </p>
    <p>
     6.    重点说明四：特殊函数请求(0x0D: Special function request)
    </p>
    <p>
     <span style="color:red">
      思想：增减机制
     </span>
    </p>
    <p>
     7.    重点说明五：特殊功能顺序请求(0x0E: Special function sequence request)
    </p>
    <p>
     <span style="color:red">
      思想
     </span>
     <span style="color:red">
      :
     </span>
     <span style="color:red">
      顺序机制，进化机制
     </span>
    </p>
    <p>
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6879675f7368656e5f687561:2f61727469636c652f64657461696c732f3433323738333637" class_="artid" style="display:none">
 </p>
</div>


