---
layout: post
title: "三Zstack云平台快速安装与初始化ZCCT云计算认证"
date: 2024-03-21 17:01:08 +0800
description: "一、如何准备安装环境，包括服务器、安装包及相关教程1.准备安装环境服务器环境准备正式环境推荐服务器配"
keywords: "zstack安装"
categories: ['Zstack']
tags: ['无标签']
artid: "119132833"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=119132833
    alt: "三Zstack云平台快速安装与初始化ZCCT云计算认证"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     三、Zstack云平台快速安装与初始化（ZCCT云计算认证）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h5>
     <a id="_0">
     </a>
     一、如何准备安装环境，包括服务器、安装包及相关教程
    </h5>
    <h6>
     <a id="1_1">
     </a>
     1.准备安装环境
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        服务器环境准备
       </strong>
       <br/>
       正式环境推荐服务器配置如下：
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/24e441c70e9fbe092eeaec3c6a7cadc8.png">
        <br/>
        因为是学习安装，所以创建一个4C8GB，硬盘不小于40G的虚拟机即可。下图是官方视频里推荐的学习和生产环境要求
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fbe80e5fff9c570debe81e64956dc434.png"/>
       </img>
      </p>
     </li>
     <li>
      <p>
       <strong>
        软件准备
       </strong>
       <br/>
       <strong>
        <mark>
         注意：官方视频教程是基于Zstack3.05录制，而Zstack最新版本为4.16，除了功能做了更新，页面布局也有较大改变和整合，但是问题不大，不增加学习成本。如果觉得有难度的，下载镜像时可以选择视频教程里的3.05版本进行学习
        </mark>
       </strong>
       <br/>
       Zstack镜像是基于Centos7.4深度定制而成。主要包含如下特点和功能：
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f38c3bed8991cb85a9f037955571fd6c.png">
        <strong>
         最新的4.1.6官方镜像下载
        </strong>
        <br/>
        <a href="https://cdn.zstack.io/product_downloads/iso/ZStack/4.1.6/uvml42etfi/ZStack-Cloud-x86_64-DVD-4.1.6-c76.iso" rel="nofollow">
         点击下载
        </a>
        <br/>
        <strong>
         下面是官方镜像主页
        </strong>
        <br/>
        <a href="https://www.zstack.io/product/product_downloads/" rel="nofollow">
         点击打开
        </a>
        <br/>
        <a href="https://www.zstack.io/help/release_notes/" rel="nofollow">
         版本特性
        </a>
       </img>
      </p>
     </li>
     <li>
      <p>
       <strong>
        文档/视频教程
       </strong>
       <br/>
       详细可参考官方部署文档
       <br/>
       <a href="https://www.zstack.io/help/product_manuals/user_guide/v4/3.html" rel="nofollow">
        官方部署文档
       </a>
      </p>
     </li>
    </ul>
    <h6>
     <a id="2Zstack_20">
     </a>
     2.安装Zstack
    </h6>
    <p>
     创建虚拟机CPU4核，内存8G，硬盘&gt;=40G，网络桥接，加载下载好的ISO镜像，开机。
    </p>
    <ul>
     <li>
      1.选择Install ZStack
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3864861610e28a11fbd14808f00e1710.png"/>
     </li>
     <li>
      2.时区默认已经是东8区，键盘为英语美式。这里我们选择安装模式
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/380c0837425695e7338d087f762f7f1a.png">
       <br/>
       <strong>
        安装模式分为四种：
       </strong>
       <br/>
       1.企业版管理中心模式
       <br/>
       2.社区版管理中心模式
       <br/>
       3.计算节点
       <br/>
       4.专家模式
       <br/>
       根据视频教程我们选择
       <mark>
        企业版管理中心，既包含管理又包含计算
       </mark>
       ；
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c3d851b052b5ca98bfe0ad0e29547d6e.png">
        <br/>
        <strong>
         - 3.硬盘分区
        </strong>
        <br/>
        根据教学视频选择自动分区即可
        <br/>
        <strong>
         - 4.配置网络
        </strong>
        <br/>
        点击NET WORK &amp; HOST NAME，进行网络和主机名配置。
        <mark>
         IP必须要填写
        </mark>
        ，本地局域网一个号段，不冲突即可；
        <br/>
        HOST NAME自定义即可
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6df82a4a3f8326321748ce673935b6cf.png"/>
       </img>
      </img>
     </li>
    </ul>
    <h6>
     <a id="3Zstack_40">
     </a>
     3.初始化Zstack
    </h6>
    <p>
     Zstack大体架构
     <br/>
     <strong>
      区域：相当于一个机房
      <br/>
      镜像服务器：为机房提供系统镜像以及模板镜像
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3679e20a68d1232c1598f704961e1c62.png">
      <br/>
      <strong>
       1.登录TUI界面进行初始化
      </strong>
      <br/>
      输入IP地址+5000为TUI的登录网址。比如我的为192.168.1.204:5000，输入初始化用户名和密码为admin,password。点击登录进行初始化；
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bf78d6b592b5eac0cbaf919a649327e0.png"/>
     </img>
    </p>
    <ul>
     <li>
      2.点击初始化向导，开始初始化
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8d0f4d190011f56d18e36e1bf4f98a4e.png"/>
      <br/>
      -
      <strong>
       3.创建一个区域
      </strong>
      <br/>
      可以自定义区域名称，或者直接下一步“
      <strong>
       创建集群”
      </strong>
      ；
      <br/>
      <mark>
       <strong>
        注：在数据中心中，区域一般对应了一个机房
       </strong>
       。
      </mark>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bedb2d6de77de07da1b5364b070d1ee6.png"/>
     </li>
     <li>
      <strong>
       4.创建一个集群
      </strong>
      <br/>
      <strong>
       名称
      </strong>
      ：为集群创建一个名称或者默认；
      <br/>
      <strong>
       类型：
      </strong>
      <br/>
      若服务器采用 KVM 虚拟化技术，请选择 KVM 类型。
      <br/>
      若服务器是阿里云神龙架构，请选择 XDragon 类型
      <br/>
      **CPU架构：**选择X86_64。
      <br/>
      点击“
      <strong>
       添加物理机
      </strong>
      ”开始下一步
     </li>
    </ul>
    <p>
     <strong>
      集群创建时需要注意几下几点：
     </strong>
     <br/>
     <strong>
      一组物理机的逻辑集合，一个集群一般对应了一个机架。
      <br/>
      集群内所有物理机须拥有相同的操作系统。
      <br/>
      集群内所有物理机须拥有相同的网络配置。
      <br/>
      集群内所有物理机须能够访问相同的主存储。
      <br/>
      集群需挂载主存储、二层网络后，才可提供云主机服务。
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/aa86f6da13e9febc52a75911816f439f.png"/>
    </p>
    <ul>
     <li>
      <strong>
       5.添加物理机
      </strong>
     </li>
    </ul>
    <p>
     <strong>
      <mark>
       注意：如果是虚拟机需要开启嵌套虚拟化，否则会添加失败。
      </mark>
     </strong>
     <br/>
     <strong>
      我用的虚拟机环境为PVE，开启虚拟嵌套化，可参考如下文章：
     </strong>
     <br/>
     <a href="https://blog.csdn.net/qq_24841037/article/details/98684837">
      PVE开启虚拟嵌套化
     </a>
     <br/>
     因为是学习用，添加本机IP地址即可。实际生产中有多个计算节点需要依次添加。
     <br/>
     输入root用户和密码，添加完成后点击“
     <strong>
      添加镜像服务器
     </strong>
     ”开始下一步；
     <br/>
     <strong>
      <mark>
       注：添加物理机器需要等待一段时间！
      </mark>
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/47e6c9fb0a566033805e2f5af1ccbdb2.png"/>
    </p>
    <ul>
     <li>
      <strong>
       6.添加镜像服务器
      </strong>
      <br/>
      添加镜像服务器和添加主机差不多，添加时记得选择存储类型：
      <br/>
      <strong>
       ImageStore：
      </strong>
      <br/>
      适用于企业版，使用增量存储，支持在线快照、在线创建镜像、在线克隆。
      <br/>
      <strong>
       Ceph
      </strong>
      ：
      <br/>
      采用 Ceph 分布式块存储，支持在线快照，在线创建镜像、在线克隆。
      <br/>
      <mark>
       <strong>
        挂载路径不要选择系统目录
       </strong>
      </mark>
      <br/>
      输入完成点击“
      <strong>
       下一步：添加主存储
      </strong>
      ”开始下一步操作
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/caa44459ee6650dd7780c133d0d852de.png"/>
      <br/>
      <strong>
       - 7.添加主存储
      </strong>
      <br/>
      选择本地存储。生产环境请根据实际情况选择；
      <br/>
      主存储主要包括 4 种类型：LocalStorage、NFS、SharedMountPoint、Ceph。
     </li>
    </ul>
    <p>
     <strong>
      LocalStorage
     </strong>
     <br/>
     使用各物理机的本地硬盘目录作为主存储，匹配 ImageStore 或 SFTP 镜像服务器，容量由各物理机的目录容量累加。
    </p>
    <p>
     <strong>
      NFS
     </strong>
     <br/>
     使用网络文件系统作为主存储，匹配 ImageStore 或 SFTP 镜像服务器，会在所有物理机上自动挂载此目录。
    </p>
    <p>
     <strong>
      SharedMountPoint
     </strong>
     <br/>
     使用共享文件系统存储，支持 SAN，格式化为 GlusterFS，OCFS2，GFS2，匹配 ImageStore 或 SFTP 镜像服务器，需在各物理机提前挂载存储到相同目录。
    </p>
    <p>
     <strong>
      Ceph
     </strong>
     <br/>
     使用 Ceph 分布式块存储，匹配同一 Ceph 存储集群的镜像服务器。
    </p>
    <p>
     如需使用
     <mark>
      <strong>
       SharedBlock****主存储
      </strong>
     </mark>
     ，请退出 Wizard 进行手动添加。
     <br/>
     <mark>
      <strong>
       注:实操考试需要挂载*SharedBlock
      </strong>
      主存储**
     </mark>
     <br/>
     点击“
     <strong>
      下一步：创建计算规格
     </strong>
     ”开始下一步操作
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1c62ce5f5c8dc27574fc1f49627d33fc.png"/>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        8.创建云主机计算规格
       </strong>
       <br/>
       名称默认即可，选择虚拟机配置，分配策略：
      </p>
      <ul>
       <li>
        <strong>
         物理机分配策略
        </strong>
        <br/>
        创建云主机时采用此计算规格，则执行对应选择的物理机分配策略，默认策略为“运行云主机数量最少”策略。
       </li>
       <li>
        <strong>
         运行云主机数量最少策略
        </strong>
        <br/>
        优先选择虚拟机最少的物理机来创建云主机。
       </li>
       <li>
        <strong>
         CPU 使用率最低策略
        </strong>
        <br/>
        优先选择 CPU 使用率最低的物理机来创建云主机。
       </li>
       <li>
        <strong>
         内存使用率最低策略
        </strong>
        <br/>
        优先选择内存使用率最低的物理机来创建云主机。
       </li>
       <li>
        <strong>
         运行云主机最大数量策略
        </strong>
        <br/>
        用户先指定一台物理机最多允许运行云主机的数量，系统会筛选出满足此要求的物理机来创建云主机。如果没有满足条件的物理机，则会创建失败。
       </li>
       <li>
        <strong>
         首选上次所在物理机策略
        </strong>
        <br/>
        已关机的云主机启动时优先选择上次所在物理机，首次启动的云主机随机选择物理机。
       </li>
       <li>
        <strong>
         随机分配策略
        </strong>
        <br/>
        随机选择物理机来创建云主机。
       </li>
      </ul>
      <p>
       CPU 使用率最低和内存使用率最低策略，可以在平台“全局设置”中配置 CPU 使用率和内存使用率的采集时长。
       <br/>
       磁盘限速和网络限速以及高级参数，目前先不要设置。（因为还不会）
       <br/>
       <strong>
        <mark>
         如果没有出现“
         <strong>
          下一步，添加镜像
         </strong>
         ”记得把网页缩小至70，才能显示
        </mark>
       </strong>
       。
       <br/>
       <strong>
        <mark>
         在这里磨蹭了老长时间才找到原因。
        </mark>
       </strong>
      </p>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/387b7b6aac2f4ab3074c910eb9762661.png"/>
    </p>
    <ul>
     <li>
      <strong>
       9.添加镜像
      </strong>
      <br/>
      镜像格式选择：qcow2
      <br/>
      CPU架构集成物理机为：X86_64
      <br/>
      平台可以选择Linux和Windows
      <br/>
      BIOS模式可以选择LEG和UFI2个模式
      <br/>
      URL默认自动生成就行
      <br/>
      点击**“下一步：创建2层网络”**
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e4e93b7f6d7df8666ec97b4c766fa6bb.png"/>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        9.建2层网络
       </strong>
       <br/>
       类型选择L2NoVlanNetWork：没有vlan的2层网络
       <br/>
       网卡名称填写物理机的网卡名称，具体可以在linux下执行ip addr命令查看。
      </p>
      <p>
       <strong>
        L2NoVlanNetwork
       </strong>
       ：
       <br/>
       表示相关的物理机对应的网络设备不设置 VLAN。
       <br/>
       如果交换机端口设置了 VLAN，则需在交换机端配置 Access 模式。
       <br/>
       如果交换机端口没有设置 VLAN， 则无须特别设置。
       <br/>
       创建二层网络，会根据输入的网络设备号创建网桥设备。
       <br/>
       <strong>
        L2VlanNetwork
       </strong>
       ：
       <br/>
       表示相关的物理机对应的网络设备需设置 VLAN。
       <br/>
       需在物理机接入的交换机端进行 trunk 设置。
       <br/>
       从逻辑上划分虚拟局域网，支持 1- 4094 个子网。
       <br/>
       创建二层网络，会根据输入的网络设备号创建 VLAN 设备，并基于此 VLAN 设备创建网桥。
       <br/>
       创建二层网络，需注意：
       <br/>
       创建二层网络，集群内的物理机需存在此网络设备。
       <br/>
       点击“
       <strong>
        下一步：创建三层网络
       </strong>
       ”进行下一步设置
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5919be90d1d2dc9eb5b6332563cb3049.png"/>
      </p>
     </li>
     <li>
      <p>
       10.
       <strong>
        创建三层网络
       </strong>
       <br/>
       可以选择2中网络段方式：
       <br/>
       <strong>
        网络段方式
       </strong>
       <br/>
       IP范围
       <br/>
       可填写类似172.20.12.2到172.20.12.255，子网掩码填写255.255.0.0，网关填写172.20.0.1。
       <br/>
       <strong>
        CIDR
       </strong>
       <br/>
       无类别域间路由，可填写192.168.1.0/24。
       <br/>
       <strong>
        <mark>
         注意
         <br/>
         不可将网关（例如：xxx.xxx.xxx.1）、广播地址（例如：xxx.xxx.xxx.255）和网络地址（例如：xxx.xxx.xxx.0）等包含在添加的IP段中
        </mark>
       </strong>
       <br/>
       点击完成结束初始化。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ba0622638107a0f8c361780ba6543aa8.png"/>
      </p>
     </li>
    </ul>
    <p>
     <mark>
      <strong>
       安装初始化完
      </strong>
     </mark>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f687a636d313938342f:61727469636c652f64657461696c732f313139313332383333" class_="artid" style="display:none">
 </p>
</div>


