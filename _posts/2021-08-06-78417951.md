---
layout: post
title: "JQuery-DataTables-服务端自定义查询最新版本介绍"
date: 2021-08-06 05:02:54 +0800
description: "JQuery DataTables 服务端自定义查询（最新实例讲解）JQuery DataTable"
keywords: "datatable.search"
categories: ['插件实例详解', 'Web', 'Jquery', 'Jquery', 'Datatables']
tags: ['Datatables', 'Datatabledemo', 'Datatableapi']
artid: "78417951"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=78417951
    alt: "JQuery-DataTables-服务端自定义查询最新版本介绍"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     JQuery DataTables 服务端自定义查询（最新版本介绍）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      在使用JQuery DataTables 做查询的走了很多弯路，搜了一下
      <strong>
       “JQuery DataTables 自定义查询”
      </strong>
      相关博文不是太老，就是胡说八道，只能去翻了一下英文的官方文档，而后才得到答案。
     </p>
    </blockquote>
    <p>
     <strong>
      JQuery DataTables 的自定义查询 是通过 JQuery DataTables API 中的 Search() 方法实现的。
     </strong>
    </p>
    <p>
     <strong>
      使用search API 一定在 配置 searching 配置 为 true
     </strong>
    </p>
    <p>
     下面，我们就以 ASP.NET MVC为例，实现 JQuery DataTables 自定义查询。
    </p>
    <p>
     JQuery DataTables 自定义及多条件查询 有两种实现方式 ：
     <strong>
      全局搜索
     </strong>
     和
     <strong>
      列搜索
     </strong>
    </p>
    <h3 id="jquery-datatables-查询">
     JQuery DataTables 查询
    </h3>
    <blockquote>
     <p>
      <strong>
       检索数据是表概念的核心，该方法允许用户轻松访问数据
      </strong>
      。该方法提供通过API控制表的全局搜索的能力。全局搜索在所有可搜索的列中执行（参考 columns.searchableOption 禁止搜索某些列）。 如果发现数据在任何列中匹配，则整行匹配并显示在结果集中。可以使用 columns().search()API 和 column().search()API 方法来执行各个列的搜索。
     </p>
    </blockquote>
    <p>
     <img alt="Search API" src="https://img-blog.csdn.net/20171102171047949?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2h1YWlfd3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
    </p>
    <p>
     <strong>
      中文文档（推荐）：
      <a href="http://www.datatables.club/reference/api/search%28%29.html" rel="nofollow">
       http://www.datatables.club/reference/api/search().html
      </a>
     </strong>
    </p>
    <p>
     官网API 文档：
     <a href="http://www.datatables.club/reference/api/" rel="nofollow">
      http://www.datatables.club/reference/api/
     </a>
    </p>
    <p>
     从官网文档中，我们可以看到 插件提供了三种搜索方式，其实就是
     <strong>
      全局搜索 和 列搜索
     </strong>
     ，全局搜索和列搜索的区别，我们下面介绍。 我们现在需要知道的是，任何一种API 都可以帮我们实现 自定义查询。
    </p>
    <h3 id="jquery-datatables-多条件查询">
     JQuery DataTables 多条件查询
    </h3>
    <p>
     现在我们详细介绍一下，API提供的三种查询方法—— search，column().search(),columns().search()。
    </p>
    <p>
     其实这三种方法，也就是所谓的全局搜索 和 列搜索， 他们的本质区别在于 ：
     <strong>
      生成的请求表单不同，也是说请求的时候参数不同。
     </strong>
    </p>
    <p>
     这里，可以参考一下 我的上一篇 博文：
    </p>
    <p>
     <a href="http://blog.csdn.net/shuai_wy/article/details/78214419">
      http://blog.csdn.net/shuai_wy/article/details/78214419
     </a>
     （JQuery DataTables 请求表单）
    </p>
    <ul>
     <li>
      search( input [, regex[ , smart[ , caseInsen ]]] )
      <br/>
      <ul>
       <li>
        input :搜索内容
       </li>
       <li>
        regex: true or false ,是否作为正则表单查询
       </li>
       <li>
        smart 执行内置搜索算法（默认为true）或者不执行（false）。在使用此参数前，确保第二个参数是false，不然两个正则表达式可能冲突导致意想不到的结果。 如果你不想使用内置算法搜索，置为false，第二个参数为true，即可自定义正则表达式搜索。
       </li>
       <li>
        caseInsen 不区分大小写匹配
       </li>
      </ul>
     </li>
    </ul>
    <p>
     后面几个参数，对于服务端查询来说，作用不是很大。
    </p>
    <h4 id="全局搜索">
     全局搜索
    </h4>
    <p>
     <strong>
      全局查询search 在服务端查询应用中，实质就是把我们设置的几个 参数，赋给了 search参数。 我们服务端 就可以根据search 传递的参数，来进行查询，就可以了。
     </strong>
    </p>
    <p>
     <img alt="JQuery DataTables 请求表单" src="https://img-blog.csdn.net/20171102192538206?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2h1YWlfd3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
    </p>
    <p>
     <img alt="JQuery DataTables 请求表单" src="https://img-blog.csdn.net/20171102192440655?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2h1YWlfd3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
    </p>
    <p>
     全局搜索实现代码如下：
    </p>
    <pre class="prettyprint"><code class="hljs javascript"><span class="hljs-keyword">var</span> table = $(<span class="hljs-string">'#example'</span>).DataTable();

$(<span class="hljs-string">'#myInput'</span>).on( <span class="hljs-string">'keyup'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
    table.search( <span class="hljs-keyword">this</span>.value ).draw();<span class="hljs-comment">//发起查询请求，并重绘表格</span>
} );
<span class="hljs-comment">// 此处我是用的是全局查询，下面中我们将介绍他们的区别</span>

<span class="hljs-comment">// 这里有一个需要大家注意的地方，在使用 search 的时候，记得一定在 配置中 将 searching 设置 为true. 不然将不起作用</span></code></pre>
    <h4 id="列搜索">
     列搜索
    </h4>
    <ul>
     <li>
      <p>
       columns().search() 和 column().search 都属于列查询，也就是说把查询条件放到 每一列的 search 参数中，传递给后台，后台可以根据列名，分拣处每个字段的查询条件。
      </p>
      <p>
       <img alt="列查询" src="https://img-blog.csdn.net/20171102193837351?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2h1YWlfd3k=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" title=""/>
      </p>
     </li>
    </ul>
    <p>
     实例：
     <br/>
     官网实例：
     <a href="https://datatables.net/reference/api/columns%28%29.search%28%29" rel="nofollow">
      https://datatables.net/reference/api/columns().search()
     </a>
    </p>
    <pre class="prettyprint"><code class="hljs javascript">$(<span class="hljs-string">'#column3_search'</span>).on( <span class="hljs-string">'keyup'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
    table
        .columns( <span class="hljs-number">3</span> )
        .search( <span class="hljs-keyword">this</span>.value )
        .draw();
} );

<span class="hljs-comment">//这里也简单介绍一下： column（），可以通过 索引 如column(1) 或 name值 column("XXX") 或者 every遍历找到某一列。 column 也是一个API，作用就是 定位某一列 </span></code></pre>
    <p>
     列搜索实例：
    </p>
    <pre class="prettyprint"><code class="hljs javascript">  <span class="hljs-keyword">var</span> table = $.fn.dataTables;
        table.columns().every(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span><span class="hljs-comment">//遍历列</span>
            <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.index()) {
               <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">this</span>.search($.trim($(<span class="hljs-string">'#IDNum'</span>).val()));
                    <span class="hljs-keyword">break</span>;
               <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    <span class="hljs-keyword">this</span>.search($.trim($(<span class="hljs-string">'#Name'</span>).val()));
                    <span class="hljs-keyword">break</span>;
            }
        });
        table.columns().search().draw();<span class="hljs-comment">//执行查询</span>
    });</code></pre>
    <h3 id="总结">
     总结
    </h3>
    <p>
     总结一下，JQuery DataTables 查询作为插件的核心，
     <strong>
      依赖的就是 API 中的 Search () 方法
     </strong>
     。
     <strong>
      对于我们服务端实现自定义查询的时候，我们需要的就是把 查询条件传递给后端
     </strong>
     ， 而 全局查询 和 列查询 真正操作的就是我们的
     <strong>
      请求表单
     </strong>
     ，所以 全局查询也好还是列查询也好，对我们服务端查询来说，无关紧要，我们随便选择一种方式，把我么要查询的参数传递给后台即可。
    </p>
    <h3 id="补充">
     补充
    </h3>
    <ol>
     <li>
      我们在上一小节中，提到一个 data参数，data参数可以作为表单里的一个独立参数，传递给后台，我们能不能通过 data实现查询呐？
     </li>
    </ol>
    <blockquote>
     <p>
      答案：不能，因为data 参数在datatables 初始化后就无法修改了，而 datatables插件本身也不允许重复初始化，所以无法实现。
     </p>
    </blockquote>
    <ol>
     <li>
      还有一点大家一定不要忽视，一定要在配置时： searching 设置为 true, 设置为false之后，是无法生效的。 searching 设置true后，会有过滤框显示出来，如果我们不想显示过滤框，我们可以通过 dom 配置，隐藏过滤框
     </li>
    </ol>
    <pre class="prettyprint"><code class="hljs bash">            dom:<span class="hljs-string">'lBrtip'</span></code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f73687561695f7779:2f61727469636c652f64657461696c732f3738343137393531" class_="artid" style="display:none">
 </p>
</div>


