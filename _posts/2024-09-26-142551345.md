---
layout: post
title: "Linux环境下安装python"
date: 2024-09-26 15:58:45 +0800
description: "虽然Python整体构建显示“finished successf"
keywords: "linux 安装python3.9"
categories: ['未分类']
tags: ['Python', 'Linux', 'Chrome']
artid: "142551345"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=142551345
  alt: "Linux环境下安装python"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Linux环境下安装python
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      Linux 环境下安装python
     </h4>
     <ul>
      <li>
       <a href="#LinuxPython__394tgz_1" rel="nofollow">
        以下是在Linux环境下安装Python - 3.9.4.tgz的详细步骤：
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1_Python__394tgz_3" rel="nofollow">
          1. 下载Python - 3.9.4.tgz（如果未下载）
         </a>
        </li>
        <li>
         <a href="#2_16" rel="nofollow">
          2.解压文件
         </a>
        </li>
        <li>
         <a href="#3_24" rel="nofollow">
          3.安装依赖项（如果需要）
         </a>
        </li>
        <li>
         <a href="#4_61" rel="nofollow">
          4.配置和编译
         </a>
        </li>
        <li>
         <a href="#5_105" rel="nofollow">
          5.安装
         </a>
        </li>
        <li>
         <a href="#6alias_shell__python__114" rel="nofollow">
          6.创建一个别名（alias），使得在当前 shell 会话中输入 ​python​ 命令时，实际上会执行
         </a>
        </li>
        <li>
         <a href="#7_127" rel="nofollow">
          7.设置环境变量（可选）
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="LinuxPython__394tgz_1">
     </a>
     以下是在Linux环境下安装Python - 3.9.4.tgz的详细步骤：
    </h2>
    <h3>
     <a id="1_Python__394tgz_3">
     </a>
     1. 下载Python - 3.9.4.tgz（如果未下载）
    </h3>
    <ul>
     <li>
      如果您还没有下载该文件，可以使用
      <code>
       wget
      </code>
      命令（假设官方下载链接为
      <code>
       https://www.python.org/ftp/python/3.9.4/Python - 3.9.4.tgz
      </code>
      ）：
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token comment">#进入软件包下载目录</span>
<span class="token builtin class-name">cd</span> /usr/local/
<span class="token function">ls</span>
<span class="token function">mkdir</span> /usr/local/python
<span class="token builtin class-name">cd</span> /usr/local/python 
<span class="token function">wget</span> https://www.python.org/ftp/python/3.9.4/Python-3.9.4.tgz
ll
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/16357410ec5e494e80827be6f01fdb37.png"/>
    </p>
    <h3>
     <a id="2_16">
     </a>
     2.解压文件
    </h3>
    <ul>
     <li>
      使用
      <code>
       tar
      </code>
      命令解压下载的
      <code>
       .tgz
      </code>
      文件：
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token function">tar</span> -xvf Python-3.9.4.tgz
</code></pre>
    <ul>
     <li>
      这将创建一个名为
      <code>
       Python - 3.9.4
      </code>
      的目录，其中包含Python的源代码。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6e30a9c85cda43d3a96c1d32da36b819.png"/>
     </li>
    </ul>
    <h3>
     <a id="3_24">
     </a>
     3.安装依赖项（如果需要）
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        Debian/Ubuntu系统
       </strong>
       ：
      </p>
      <ul>
       <li>
        执行以下命令安装编译Python所需的依赖项：
       </li>
      </ul>
      <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        Red Hat/CentOS系统
       </strong>
       ：
      </p>
      <ul>
       <li>
        首先更新系统：
       </li>
      </ul>
      <pre><code class="prism language-bash"><span class="token function">sudo</span> yum   -y update
</code></pre>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4ed999b5cc364102a4ba7bac7bd102ed.png">
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9367ff6464ff470eb02659d421e2a977.png"/>
       </img>
      </p>
      <ul>
       <li>
        然后安装依赖项：
       </li>
      </ul>
      <pre><code class="prism language-bash"><span class="token function">sudo</span> yum  -y groupinstall <span class="token string">"Development Tools"</span>
<span class="token function">sudo</span> yum  -y <span class="token function">install</span>  zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel
</code></pre>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/87255f5df93346509c91f2b4fd7a8f6c.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/64cff3ea21744b8cb05a47c358f7c29e.png"/>
     </img>
    </p>
    <pre><code>根据系统版本
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repo
</code></pre>
    <ul>
     <li>
      清理yum缓存并重新生成
     </li>
    </ul>
    <pre><code>yum clean all
yum clean metadata
yum makecache
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2e91673cf9a94621989bcee069ebea58.png"/>
    </p>
    <h3>
     <a id="4_61">
     </a>
     4.配置和编译
    </h3>
    <ul>
     <li>
      进入解压后的
      <code>
       Python - 3.9.4
      </code>
      目录：
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span>  /usr/local/python/Python-3.9.4
</code></pre>
    <ul>
     <li>
      运行配置脚本，例如指定安装目录为
      <code>
       /usr/local/python3.9
      </code>
      （可根据需求修改）：
     </li>
    </ul>
    <pre><code class="prism language-bash">./configure --prefix<span class="token operator">=</span>/usr/local/python3.9
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/16b7b5469bed461296fa70c0259fdce5.png"/>
    </p>
    <ul>
     <li>
      编译源代码：
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token function">make</span>
</code></pre>
    <ul>
     <li>
      <p>
       编译过程可能需要一些时间，具体取决于系统性能。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/839eee3e2b9f402ca99dfb777f01d680.png"/>
      </p>
     </li>
     <li>
      <p>
       异常如下
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e4c6d308a99e45d18a8ada5646a08c35.png"/>
       <br/>
       1）.
       <strong>
        问题分析
       </strong>
      </p>
     </li>
     <li>
      <p>
       在构建Python 3.9.4的过程中，当构建
       <code>
        _ctypes
       </code>
       扩展模块时出现了错误。错误信息显示
       <code>
        /usr/local/python/Python - 3.9.4/Modules/_ctypes/_ctypes.c:107:10: fatal error: ffi.h: No such file or directory
       </code>
       ，这意味着构建
       <code>
        _ctypes
       </code>
       模块需要的
       <code>
        ffi.h
       </code>
       头文件缺失。
       <code>
        _ctypes
       </code>
       模块用于在Python中调用C函数库，而
       <code>
        ffi.h
       </code>
       通常是
       <code>
        libffi
       </code>
       库的一部分，这个库提供了一种在运行时调用C函数的机制。
      </p>
     </li>
     <li>
      <p>
       由于
       <code>
        ffi.h
       </code>
       缺失，导致
       <code>
        gcc
       </code>
       编译器无法编译
       <code>
        _ctypes.c
       </code>
       文件，从而
       <code>
        _ctypes
       </code>
       模块构建失败。虽然Python整体构建显示“finished successfully”，但实际上一些可选模块（如
       <code>
        _ctypes
       </code>
       ）由于缺少必要的组件而未能正确构建。
       <br/>
       2）.
       <strong>
        解决方案
       </strong>
      </p>
     </li>
     <li>
      <p>
       <strong>
        安装libffi - dev（对于基于Debian/Ubuntu系统）或libffi - devel（对于基于Red Hat/CentOS系统）包
       </strong>
      </p>
      <ul>
       <li>
        如果是基于Debian或Ubuntu系统：
        <ul>
         <li>
          使用以下命令安装
          <code>
           libffi - dev
          </code>
          包：
         </li>
        </ul>
        <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> - get <span class="token function">install</span> libffi-devel
</code></pre>
       </li>
       <li>
        如果是基于Red Hat或CentOS系统：
        <ul>
         <li>
          使用以下命令安装
          <code>
           libffi - devel
          </code>
          包：
         </li>
        </ul>
        <pre><code class="prism language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> libffi-devel
</code></pre>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d11a29d31ec04ad69962ed9deb23f765.png"/>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        重新构建Python
       </strong>
      </p>
      <ul>
       <li>
        在安装了相应的
        <code>
         libffi
        </code>
        开发包之后，需要重新运行
        <code>
         make
        </code>
        命令来重新构建Python。这将确保
        <code>
         _ctypes
        </code>
        模块能够找到
        <code>
         ffi.h
        </code>
        头文件并正确构建。例如：
       </li>
      </ul>
      <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /usr/local/python/Python - <span class="token number">3.9</span>.4
<span class="token function">make</span> clean
<span class="token function">make</span>
</code></pre>
      <ul>
       <li>
        这里的
        <code>
         make clean
        </code>
        命令是为了清除之前构建过程中产生的中间文件，以确保重新构建时不会受到之前失败构建的影响。
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="5_105">
     </a>
     5.安装
    </h3>
    <ul>
     <li>
      执行安装命令： 编译源代码无异常前提
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/bd29982a73cf4f9792d8e37856cc6a27.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c2af9eb3331041bfb5b802977f746f68.png"/>
    </p>
    <h3>
     <a id="6alias_shell__python__114">
     </a>
     6.创建一个别名（alias），使得在当前 shell 会话中输入 ​python​ 命令时，实际上会执行
    </h3>
    <pre><code>vim  /etc/profile
alias python='/usr/local/python3.9/bin/python3.9'
export PATH=/usr/local/python3.9/bin:$PATH
alias pip='/usr/local/python3.9/bin/pip3'
export PYTHONPATH=/usr/local/python3.9/lib/python3.9/site-packages:$PYTHONPATH
source /etc/profile
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5cbfece5e5584bd1a8ef49d3a7dd9a0e.png"/>
    </p>
    <h3>
     <a id="7_127">
     </a>
     7.设置环境变量（可选）
    </h3>
    <ul>
     <li>
      <p>
       如果希望在任何目录下都能直接使用新安装的Python版本，可以将其添加到
       <code>
        PATH
       </code>
       环境变量中。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a7cc73ac213d478788c275ddf204e72c.png"/>
      </p>
     </li>
     <li>
      <p>
       对于
       <code>
        bash
       </code>
       用户，编辑
       <code>
        ~/.bashrc
       </code>
       文件：
      </p>
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token function">nano</span> ~/.bashrc
</code></pre>
    <ul>
     <li>
      在文件末尾添加以下行（假设按照前面的
      <code>
       --prefix
      </code>
      安装）：
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"/usr/local/python3.9/bin:<span class="token environment constant">$PATH</span>"</span>
</code></pre>
    <ul>
     <li>
      保存并退出文件（在
      <code>
       nano
      </code>
      中按
      <code>
       Ctrl+X
      </code>
      ，然后按
      <code>
       Y
      </code>
      确认保存）。
     </li>
     <li>
      使环境变量生效：
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token builtin class-name">source</span> ~/.bashrc
</code></pre>
    <p>
     现在您已经在Linux环境下成功安装了Python 3.9.4。您可以在终端中输入
     <code>
      python3.9
     </code>
     来启动新安装的Python解释器进行测试。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f713930383534343730332f:61727469636c652f64657461696c732f313432353531333435" class_="artid" style="display:none">
 </p>
</div>
