---
layout: post
title: "PythonPython-的编译反编译"
date: 2025-01-17 16:10:35 +0800
description: "Pythonpypycpycpyipywpydpyx等。_python反编译"
keywords: "python反编译"
categories: ['Python']
tags: ['开发语言', 'Python']
artid: "140653484"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=140653484
    alt: "PythonPython-的编译反编译"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Python】Python 的编译&amp;反编译
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-github-gist" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="Python__0">
     </a>
     Python 的编译&amp;反编译
    </h2>
    <h3>
     <a id="Python__2">
     </a>
     Python 的文件后缀
    </h3>
    <p>
     <code>
      Python
     </code>
     常见的文件后缀有：
     <code>
      py
     </code>
     、
     <code>
      pyc
     </code>
     、
     <code>
      pyc
     </code>
     、
     <code>
      pyi
     </code>
     、
     <code>
      pyw
     </code>
     、
     <code>
      pyd
     </code>
     、
     <code>
      pyx
     </code>
     等。
    </p>
    <ul>
     <li>
      <code>
       py
      </code>
      ，
      <code>
       Python
      </code>
      源代码文件，使用
      <code>
       python xxx.py
      </code>
      即可执行源码文件。
     </li>
     <li>
      <code>
       pyc
      </code>
      ，
      <code>
       Python
      </code>
      源代码编译生成的文件，由
      <code>
       Python
      </code>
      的虚拟机执行，相对于
      <code>
       .py
      </code>
      文件来说，
      <code>
       .pyc
      </code>
      只是模块加载速度提高，并没有提高代码的执行速度，更多的意义在于避免源码的泄露。
     </li>
     <li>
      <code>
       pyo
      </code>
      ，优化后的
      <code>
       Python
      </code>
      字节码缓存文件，
      <code>
       pyo
      </code>
      文件和
      <code>
       pyc
      </code>
      文件基本上没有区别，唯一的优化是去掉了断言语句，即
      <code>
       assert
      </code>
      语句。
     </li>
     <li>
      <code>
       pyi
      </code>
      ，
      <code>
       Python
      </code>
      的存根文件，用于代码检查时的类型提示。
     </li>
     <li>
      <code>
       pyw
      </code>
      ，
      <code>
       Python
      </code>
      源文件的一种，一般只存在于
      <code>
       Windows
      </code>
      系统。
     </li>
     <li>
      <code>
       pyd
      </code>
      ，
      <code>
       Python
      </code>
      可直接调用的
      <code>
       C
      </code>
      语言动态链接库文件，一般只存在于
      <code>
       Windows
      </code>
      系统。
     </li>
     <li>
      <code>
       pyx
      </code>
      ，
      <code>
       Cython
      </code>
      源代码文件，一般用来编写
      <code>
       Python
      </code>
      的
      <code>
       C
      </code>
      扩展。
     </li>
    </ul>
    <h3>
     <a id="Python__14">
     </a>
     Python 的编译和反编译
    </h3>
    <p>
     <code>
      Python
     </code>
     的编译指的是将
     <code>
      py
     </code>
     文件编译为
     <code>
      pyc
     </code>
     文件，反编译则为该操作的逆向动作。
    </p>
    <h4>
     <a id="Python__18">
     </a>
     Python 源文件的编译
    </h4>
    <p>
     <code>
      Python
     </code>
     的编译共有以下三种方式：
    </p>
    <ol>
     <li>
      <p>
       使用
       <code>
        python xxx.py
       </code>
       执行文件的过程中进行编译。
      </p>
      <p>
       首先准备一个简单的
       <code>
        python
       </code>
       文件
       <code>
        hello.py
       </code>
       ，内容如下：
      </p>
      <pre><code class="prism language-python"><span class="token comment"># hello.py</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span>
</code></pre>
      <p>
       使用
       <code>
        python hello.py
       </code>
       ，执行该文件并没有生成
       <code>
        pyc
       </code>
       文件。
      </p>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/18d7f26c95e44f1e96cddeeb9331c627.png#pic_center"/>
      </p>
      <p>
       再创建一个
       <code>
        import.py
       </code>
       的文件，内容如下：
      </p>
      <pre><code class="prism language-python"><span class="token comment"># import.py</span>
<span class="token keyword">import</span> hello
</code></pre>
      <p>
       使用
       <code>
        python import.py
       </code>
       ，执行该文件的时候，生成了
       <code>
        pyc
       </code>
       文件，
       <code>
        python3
       </code>
       执行代码，会在当前目录下创建
       <code>
        __pycache__
       </code>
       目录下生成对应的
       <code>
        pyc
       </code>
       文件。
      </p>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/da5c021278e3465caede97a422c615d0.png#pic_center"/>
      </p>
      <p>
       使用
       <code>
        python
       </code>
       可以直接执行该
       <code>
        pyc
       </code>
       文件，与执行
       <code>
        python import.py
       </code>
       的效果一致。
      </p>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5356e1e1a7434a38b55d6ae6bb6f79a5.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       使用
       <code>
        py_compile
       </code>
       第三方库编译源文件。
      </p>
      <p>
       执行该步骤之前，先删除上一步操作生成的
       <code>
        __pycache__
       </code>
       这个目录，这一步操作是执行
       <code>
        Python
       </code>
       代码进行的编译操作，进行转化的代码参考如下内容，使用第三方库进行编译，无需考虑代码中是否包含
       <code>
        import
       </code>
       语句，均能够正常编译，如下所示：
      </p>
      <pre><code class="prism language-python"><span class="token keyword">import</span> py_compile
py_compile<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">'sample.py'</span><span class="token punctuation">)</span>
</code></pre>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/52277844c44e482f8c52d28b0496534c.png#pic_center"/>
      </p>
      <p>
       这里也可以使用
       <code>
        python -m
       </code>
       指定
       <code>
        py_compile
       </code>
       第三方库对文件进行编译。
      </p>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/682d38fedc0d40099098c3820ed03e90.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       使用
       <code>
        compileall
       </code>
       第三方库编译源文件。
      </p>
      <p>
       执行该步骤之前，先删除上一步操作生成的
       <code>
        __pycache__
       </code>
       这个目录，进行编译的操作与
       <code>
        py_compile
       </code>
       基本类似，不同的是
       <code>
        compileall
       </code>
       能够对文件进行迭代编译，进行编译操作的代码如下所示：
      </p>
      <pre><code class="prism language-python"><span class="token keyword">import</span> compileall
compileall<span class="token punctuation">.</span>compile_file<span class="token punctuation">(</span><span class="token string">'hello.py'</span><span class="token punctuation">)</span>
<span class="token comment"># 可以递归编译文件夹下所有的python源代码文件</span>
compileall<span class="token punctuation">.</span>compile_dir<span class="token punctuation">(</span><span class="token string">'dir/'</span><span class="token punctuation">,</span> force<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/671f7d12f4a84ac0b66f4dc74d880ed0.png#pic_center"/>
      </p>
      <p>
       执行完成如上代码后，在当前目录以及
       <code>
        dir
       </code>
       目录下生成对应的文件编译的
       <code>
        pyc
       </code>
       文件，直接进行执行，如下所示：
      </p>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ea233e61ef914f6a91e56b45163d6b81.png#pic_center"/>
      </p>
      <p>
       这里和
       <code>
        py_compile
       </code>
       一样，也能够直接指定文件进行编译，如下所示：
      </p>
      <pre><code class="prism language-python">python <span class="token operator">-</span>m compileall <span class="token punctuation">.</span>\hello<span class="token punctuation">.</span>py
python <span class="token operator">-</span>m compileall <span class="token punctuation">.</span>\<span class="token builtin">dir</span>\
</code></pre>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d5d786092b2f43c5a53b952843775801.png#pic_center"/>
      </p>
     </li>
    </ol>
    <h4>
     <a id="Python__91">
     </a>
     Python 的反编译
    </h4>
    <p>
     编译能够在一定程度上实现隐藏源代码的效果，可以通过反编译
     <code>
      pyc
     </code>
     文件来获取
     <code>
      py
     </code>
     源代码，这里使用
     <code>
      uncompyle6
     </code>
     第三方库，具体的过程如下：
    </p>
    <ol>
     <li>
      <p>
       安装
       <code>
        uncompyle6
       </code>
       第三方库。
      </p>
      <pre><code class="prism language-shell">pip <span class="token function">install</span> uncompyle6 <span class="token parameter variable">-i</span> https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
     </li>
     <li>
      <p>
       使用
       <code>
        uncompyle6
       </code>
       对
       <code>
        pyc
       </code>
       文件进行反编译。
      </p>
      <pre><code class="prism language-shell">uncompyle6 <span class="token parameter variable">-o</span> <span class="token builtin class-name">.</span> *.pyc
</code></pre>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/10f9bd0d76ad417ca6d189826d6a1fde.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       打开生成的
       <code>
        py
       </code>
       源代码，内容如下，包含有
       <code>
        Python
       </code>
       版本信息、
       <code>
        uncompyle6
       </code>
       版本信息，以及源代码内容。
      </p>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/05ae407803594fb4ac38e07f92fa638c.png#pic_center"/>
      </p>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f7375755f616e2f:61727469636c652f64657461696c732f313430363533343834" class_="artid" style="display:none">
 </p>
</div>


