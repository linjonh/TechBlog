---
layout: post
title: "优雅的实现小程序-webview-跳转到另外一个小程序"
date: 2025-01-20 22:43:16 +0800
description: "今天公司要一个逻辑，h5页面可以被两个小程序调用，调用这个h5以后里面有一个小跳转，小程序A和小程序"
keywords: "小程序webview调用小程序方法"
categories: ['小程序']
tags: ['小程序', 'Webview', 'Android']
artid: "124973257"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=124973257
    alt: "优雅的实现小程序-webview-跳转到另外一个小程序"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     优雅的实现小程序 webview 跳转到另外一个小程序
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     今天公司要一个逻辑，h5页面可以被两个小程序调用，调用这个h5以后里面有一个小跳转，小程序A和小程序B点击都可以跳转到小程序B的一个页面。
    </p>
    <p>
     只要实现下面的代码即可
    </p>
    <pre><code class="prism language-c">wx<span class="token punctuation">.</span><span class="token function">navigateToMiniProgram</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  appId<span class="token operator">:</span> <span class="token char">''</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span> <span class="token char">'page/index/index?id=123'</span><span class="token punctuation">,</span>
  extraData<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    foo<span class="token operator">:</span> <span class="token char">'bar'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  envVersion<span class="token operator">:</span> <span class="token char">'develop'</span><span class="token punctuation">,</span>
  <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 打开成功</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     这不是很简单嘛，但是等我细细的看过后，我才发现跳转页面是小程序内嵌h5写的，小程序A通过webview跳转到小程序A一点都不难，难的是小程序A通过webview跳转到小程序B，我细细一想，实现的逻辑是这样的
    </p>
    <ul>
     <li>
      小程序A–webview–小程序B
     </li>
    </ul>
    <p>
     这个可以实现吗，，很抱歉，目前小程序并不支持通过内嵌h5的方式跳转到另外一个小程序
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0acf67b055729ea90d37fb4f8c0418b5.png"/>
    </p>
    <p>
     技术无难事，我们可以通过另外一种优雅的方式进行小程序内嵌h5跳转到另外一个小程序
    </p>
    <p>
     具体的实现方式如下
     <br/>
     <strong>
      小程序A–webview（内嵌h5）–小程序A–小程序B
     </strong>
    </p>
    <p>
     废话不多说，看代码
     <br/>
     在小程序A中如下
    </p>
    <pre><code class="prism language-c"><span class="token comment">//跳转到一个webview，jsonUrl是数据</span>
wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  url<span class="token operator">:</span> <span class="token char">'/pages/webView/webView?src='</span><span class="token operator">+</span>jsonUrl<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     在h5的页面如下
    </p>
    <pre><code class="prism language-c"><span class="token function">ShopInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"aaaaa"</span><span class="token punctuation">)</span>
  <span class="token comment">//find是小程序传过来的数据</span>
  <span class="token comment">//若是find等于1，就说明这个页面是通过A打开的，点击按钮跳转到小程序B</span>
  <span class="token comment">//若find等于0，就说明这个页面是通过小程序B打开的，点击按钮跳转到小程序B</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>find<span class="token operator">==</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     wx<span class="token punctuation">.</span>miniProgram<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//switchTab是跳转到导航栏的页面</span>
       url<span class="token operator">:</span> <span class="token char">'/pages/Shop/Shop?&amp;type=10&amp;id='</span><span class="token operator">+</span>Id<span class="token operator">+</span><span class="token char">'&amp;agentId='</span><span class="token operator">+</span>agentId<span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span>miniProgram<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//navigateTo是跳转到非导航栏的页面</span>
      url<span class="token operator">:</span> <span class="token char">'/pages/Shop/Shop?&amp;type=10&amp;id='</span><span class="token operator">+</span>Id<span class="token operator">+</span><span class="token char">'&amp;agentId='</span><span class="token operator">+</span>agentId<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
    <p>
     走到这一步，小程序A通过webview跳转到小程序A就是实现了，下面实现跳转到小程序B的方法。
    </p>
    <p>
     <strong>
      小程序B新建一个空白页面Shop（可以随便命名，只是为了跟小程序A的跳转页面相同，所以也命名为shop）
     </strong>
    </p>
    <pre><code class="prism language-c">	onLoad<span class="token operator">:</span> <span class="token function">function</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token comment">//webview的穿过来的数据都在这里</span>
	    wx<span class="token punctuation">.</span><span class="token function">navigateToMiniProgram</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//在这里实现跳转到小程序A的功能</span>
	      appId<span class="token operator">:</span> <span class="token char">'这里写要跳转的appid'</span><span class="token punctuation">,</span>
	      url<span class="token operator">:</span> <span class="token char">'/pages/Shop/Shop?&amp;type=10&amp;id='</span><span class="token operator">+</span>options<span class="token punctuation">.</span>id<span class="token operator">+</span><span class="token char">'&amp;agentId='</span><span class="token operator">+</span>options<span class="token punctuation">.</span>agentId<span class="token punctuation">,</span>
	      <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"cg"</span><span class="token punctuation">)</span>
	      <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
    <p>
     这样子我们的逻辑就实现了，在这个h5页面，若是小程序A打开，它这个按钮点击就跳往小程序B的页面。若是小程序B打开，就跳转到小程序的B页面，成功实现，打完收工。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353138303230352f:61727469636c652f64657461696c732f313234393733323537" class_="artid" style="display:none">
 </p>
</div>


