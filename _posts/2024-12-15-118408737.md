---
layout: post
title: "前端41_实时消息实现方式前端轮询后端轮询SSEWebsocketsocket.io"
date: 2024-12-15 12:14:08 +0800
description: "文章目录目标前端轮询后端轮询：SSE踩坑static 文件夹下的 index.htmlasync a"
keywords: "前端轮询还是后端轮询好"
categories: ['进阶', '前端笔记']
tags: ['无标签']
artid: "118408737"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=118408737
    alt: "前端41_实时消息实现方式前端轮询后端轮询SSEWebsocketsocket.io"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【前端41_实时消息】实现方式：前端轮询、后端轮询（SSE）、Websocket、socket.io
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#___2" rel="nofollow">
          目标 + 分析需求
         </a>
        </li>
        <li>
         <a href="#_17" rel="nofollow">
          前端轮询：不推荐
         </a>
        </li>
        <li>
         <a href="#SSE_23" rel="nofollow">
          后端轮询：SSE
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_24" rel="nofollow">
            简介
           </a>
          </li>
          <li>
           <a href="#_32" rel="nofollow">
            具体操作
           </a>
          </li>
          <li>
           <a href="#_79" rel="nofollow">
            缺点
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#Websocket_85" rel="nofollow">
          Websocket
         </a>
        </li>
        <li>
         <a href="#socketioWebsocket__Koa_122" rel="nofollow">
          socket.io：Websocket + Koa
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_123" rel="nofollow">
            后端配置
           </a>
          </li>
          <li>
           <a href="#_155" rel="nofollow">
            前后台建立链接
           </a>
          </li>
          <li>
           <a href="#_168" rel="nofollow">
            前端配置
           </a>
          </li>
          <li>
           <a href="#_173" rel="nofollow">
            总结
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_180" rel="nofollow">
          踩坑
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#static__indexhtml_181" rel="nofollow">
            static 文件夹下的 index.html
           </a>
          </li>
          <li>
           <a href="#async_await_185" rel="nofollow">
            async await
           </a>
          </li>
          <li>
           <a href="#form__187" rel="nofollow">
            form 按钮阻止页面刷新
           </a>
          </li>
          <li>
           <a href="#koabody_190" rel="nofollow">
            koa-body
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <hr/>
    <h3>
     <a id="___2">
     </a>
     目标 + 分析需求
    </h3>
    <p>
     目标是做一个实时聊天的工具
    </p>
    <p>
     那么我们就要解决问题了啊：如何保证消息实时更新呢？
    </p>
    <p>
     我们可以不断地发送请求，来实时获取最新数据，从而铺到页面上，这就有几种方法
    </p>
    <ul>
     <li>
      前端轮询
     </li>
     <li>
      建立长链接（前后端一直连接着，有消息更新了，后台就告诉给前台）
     </li>
     <li>
      等等…
     </li>
    </ul>
    <p>
     我们先根据这几个思路学习些新东西
    </p>
    <hr/>
    <h3>
     <a id="_17">
     </a>
     前端轮询：不推荐
    </h3>
    <p>
     这个就比较低级了，在前端可以写个定时器，里面写请求，前端来不断的发送请求给后端
    </p>
    <p>
     弊端就很多啦：能把页面给搞垮掉了！！
    </p>
    <hr/>
    <h3>
     <a id="SSE_23">
     </a>
     后端轮询：SSE
    </h3>
    <h4>
     <a id="_24">
     </a>
     简介
    </h4>
    <p>
     全称
     <code>
      server send event
     </code>
     ，这个比前端轮询能好一点，主要的工作都交给后端啦，当然也需要前端的配合。
    </p>
    <blockquote>
     <p>
      实现思路：后端不断的发送数据给前端，建立长链接
     </p>
    </blockquote>
    <blockquote>
     <p>
      这里选择用
      <strong>
       原生
      </strong>
      来写
      <code>
       SSE
      </code>
      <br/>
      我们知道，
      <code>
       node
      </code>
      原生的话会有
      <code>
       res,write()
      </code>
      ,
      <code>
       res,end()
      </code>
      ，如果要建立长链接的话，就不能结束掉链接，也就是不能
      <code>
       res.end()
      </code>
      ，然而
      <code>
       Koa
      </code>
      中返还的方式是
      <code>
       koa-body
      </code>
      ，里面是
      <code>
       koa
      </code>
      封装的，使用的话会有些问题。
     </p>
    </blockquote>
    <h4>
     <a id="_32">
     </a>
     具体操作
    </h4>
    <p>
     后端设置头部，从而建立长链接 ，例如：
     <code>
      res.setHeader("Content-type", "text/event-stream")
     </code>
    </p>
    <p>
     开始和结束的标志：
     <code>
      data:
     </code>
     ，和
     <code>
      \r\n\r\n
     </code>
     ，例如：
     <code>
      res.write('data:时间是' + new Date() + '\r\n\r\n')
     </code>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c2bc143c27fa7f567a6278b26c76bd7f.gif">
      <br/>
      前端代码如下：
     </img>
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// html</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'/sse'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    source<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'链接成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    source<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获得的数据是:'</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>data <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    source<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
    <p>
     后端代码如下：
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// node.js</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>url <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./index.html'</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>url <span class="token operator">===</span> <span class="token string">'/sse'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-type"</span><span class="token punctuation">,</span> <span class="token string">"text/event-stream"</span><span class="token punctuation">)</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'data:时间是'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\r\n\r\n'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     SSE 会通过
     <code>
      流
     </code>
     这种形式去传递，可以看一下它的接口形式：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bec9bc732906f75366ca3af436ef9c4f.gif"/>
    </p>
    <h4>
     <a id="_79">
     </a>
     缺点
    </h4>
    <p>
     <strong>
      单工的
     </strong>
     ，意思就是说只能从一个方向流动，而不能反过来，那这样就有些场景不好了啊，能不能前端，后台双向流通呢？这就引入了
     <code>
      websocket
     </code>
    </p>
    <hr/>
    <h3>
     <a id="Websocket_85">
     </a>
     Websocket
    </h3>
    <p>
     先用原生的写一个哈，
     <code>
      ws
     </code>
     模块需要
     <code>
      npm i
     </code>
     一下，
     <code>
      Node
     </code>
     代码如下：
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> WebSocketServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ws'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Server
<span class="token keyword">const</span> wss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocketServer</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> port<span class="token operator">:</span> <span class="token number">5678</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
wss<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token parameter">ws</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> somedata <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            name<span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
            age<span class="token operator">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span>
        ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>somedata<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     前端代码如下：
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">"ws://localhost:5678"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 建立 webSocket</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
    <p>
     没错，简单的 webSocket 连接就这么少~
    </p>
    <p>
     <strong>
      注意
     </strong>
     点：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/04afb272dde1d8c29a5747e33e9d3ce3.png">
      <br/>
      我们还有方案，结合
      <code>
       Koa
      </code>
      的话，会同时有路由，还有
      <code>
       webSocket
      </code>
      链接
     </img>
    </p>
    <hr/>
    <h3>
     <a id="socketioWebsocket__Koa_122">
     </a>
     socket.io：Websocket + Koa
    </h3>
    <h4>
     <a id="_123">
     </a>
     后端配置
    </h4>
    <p>
     后端配置服务使用的原生
     <code>
      server
     </code>
     ，最后监听的也是
     <code>
      server
     </code>
     ，概括如下：
    </p>
    <pre><code class="prism language-javascript">  <span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> io <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'socket.io'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
  server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     如果后端想要发送消息的话可以在 io 中的
     <code>
      connection
     </code>
     事件的回调中声明，例子如下：
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> io <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'socket.io'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
io<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token parameter">socket</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">'我是想要发送给前端的消息'</span>
 	socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'clientFn'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>  <span class="token comment">// 广播给一个人</span>
    socket<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'clientFn'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>  <span class="token comment">// 广播给除了自己之外的所有人</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     后端监听前端发来的
     <code>
      btnSend
     </code>
     事件：
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// node 后端代码：</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> io <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'socket.io'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
io<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token parameter">socket</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
	socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'btnSend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
       	<span class="token comment">// 逻辑</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_155">
     </a>
     前后台建立链接
    </h4>
    <p>
     前端这边，我们需要在页面中引入
     <code>
      socket.io.js
     </code>
     这个文件，可以在 依赖中找到
     <code>
      /node_modules/socket.io-client/dist/socket.io.js
     </code>
     ，找到这个文件之后，可以复制出来，然后在页面中引入
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>socket.io.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     接着在下面的脚本中建立链接，访问
     <code>
      /
     </code>
     时建立链接
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> socket <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
</code></pre>
    <h4>
     <a id="_168">
     </a>
     前端配置
    </h4>
    <p>
     前台发送数据：
     <code>
      socket.emit('eventName', data)
     </code>
     <br/>
     前台接收后台的数据：
     <code>
      socket.on('eventName', data =&gt; {})
     </code>
    </p>
    <h4>
     <a id="_173">
     </a>
     总结
    </h4>
    <p>
     前后端发送和接收的方式非常相似，发送都是
     <code>
      emit(事件名称，数据)
     </code>
     ，监听都是
     <code>
      on(事件名称，数据)
     </code>
     ，如下图是个例子
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8ff701faf97909a06d92ed459ae50bf9.png"/>
    </p>
    <hr/>
    <h3>
     <a id="_180">
     </a>
     踩坑
    </h3>
    <h4>
     <a id="static__indexhtml_181">
     </a>
     static 文件夹下的 index.html
    </h4>
    <p>
     如果你在 static 文件夹下 有
     <code>
      index.html
     </code>
     的话，那么当你在浏览器访问根目录的时候就会返回这个
     <code>
      index.html
     </code>
     页面
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1f8153ad1f8aa178801f764c7fea53b8.gif"/>
    </p>
    <h4>
     <a id="async_await_185">
     </a>
     async await
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/50b5cebd9109238096c144751bc98782.png"/>
    </p>
    <h4>
     <a id="form__187">
     </a>
     form 按钮阻止页面刷新
    </h4>
    <p>
     可以在
     <code>
      form
     </code>
     元素上添加如下截图的语句。如果添加这个，那么就不会发送请求。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c9f7a592c09c4714e77cc6dd119bb1c6.png"/>
    </p>
    <h4>
     <a id="koabody_190">
     </a>
     koa-body
    </h4>
    <p>
     如果不装这个中间件的话，后台的
     <code>
      ctx
     </code>
     中就拿不到前台传来的参数，
     <code>
      ctx.request.body
     </code>
     是没有的，安装完这个中间件后就能拿到了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ecaed11ec330efa826de5b2928eaca2e.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031303236333432332f:61727469636c652f64657461696c732f313138343038373337" class_="artid" style="display:none">
 </p>
</div>


