---
layout: post
title: "Python后台运行-nohup-python-xxx.py-"
date: 2025-01-06 10:22:14 +0800
description: "nphup 用法总结代码示例nohup指令2>&1  错误内容重定向到标准输出&  后台运行若不指定"
keywords: "nohup python .py &"
categories: ['Linux']
tags: ['Nphup']
artid: "103336210"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=103336210
    alt: "Python后台运行-nohup-python-xxx.py-"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Python后台运行 -- nohup python xxx.py &amp;
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      nohup 用法总结
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        代码示例
       </a>
      </li>
      <li>
       <a href="#nohup_14" rel="nofollow">
        nohup指令
       </a>
      </li>
      <li>
       <a href="#21___19" rel="nofollow">
        2&gt;&amp;1 错误内容重定向到标准输出
       </a>
      </li>
      <li>
       <a href="#___25" rel="nofollow">
        &amp; 后台运行
       </a>
      </li>
      <li>
       <a href="#nphupout_39" rel="nofollow">
        若不指定输出文件名，默认会在当前目录生成nphup.out文件
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_40" rel="nofollow">
          可能存在的问题
         </a>
        </li>
        <li>
         <a href="#_42" rel="nofollow">
          原因
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#Reference_49" rel="nofollow">
        Reference
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     代码示例
    </h2>
    <p>
     运行python程序 –
     <code>
      my.py
     </code>
     脚本
    </p>
    <pre><code class="prism language-shell"><span class="token function">nohup</span> python my.py <span class="token operator">&gt;&gt;</span> my.log 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span>
<span class="token comment"># 或者</span>
<span class="token function">nohup</span> python my.py <span class="token operator">&gt;&gt;</span> nohup.out 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span>
<span class="token comment"># 或者</span>
<span class="token function">nohup</span> python my.py <span class="token operator">&amp;</span>  <span class="token comment"># 这种写法和上面第二种写法等价</span>
</code></pre>
    <p>
     shell脚本类似 –
     <code>
      tomcat.sh
     </code>
     并指定存放文件目录
    </p>
    <pre><code class="prism language-shell"><span class="token function">nohup</span> tomcat.sh <span class="token operator">&gt;</span> /dev/null 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span>  
</code></pre>
    <h2>
     <a id="nohup_14">
     </a>
     nohup指令
    </h2>
    <ul>
     <li>
      <p>
       nohup指不断地运行，是no hang up的缩写，指不间断，不挂断。运行一个进程的时候，不想让其在你退出账号时关闭，即可用nohup。
      </p>
     </li>
     <li>
      <p>
       nohup在不规定的情况下，所以输出内容会到nohup.out中
      </p>
     </li>
    </ul>
    <h2>
     <a id="21___19">
     </a>
     2&gt;&amp;1 错误内容重定向到标准输出
    </h2>
    <ul>
     <li>
      <code>
       0
      </code>
      表示stdin标准输入，用户键盘输入的内容
      <br/>
      <code>
       1
      </code>
      表示stdout标准输出，输出到显示屏的内容
      <br/>
      <code>
       2
      </code>
      表示stderr标准错误，报错内容
     </li>
     <li>
      <code>
       2&gt;&amp;1
      </code>
      是一个整体，
      <code>
       &gt;
      </code>
      左右不能有空格，即将错误内容重定向输入到标准输出中去。
     </li>
    </ul>
    <h2>
     <a id="___25">
     </a>
     &amp; 后台运行
    </h2>
    <ul>
     <li>
      <code>
       &amp;
      </code>
      为后台运行
     </li>
     <li>
      第一条代码，以python环境不间断的运行
      <code>
       my.py
      </code>
      这个脚本，并且将脚本输出的内容重定向输入my.log中（
      <code>
       &gt;&gt;
      </code>
      意为追加，如果用
      <code>
       &gt;
      </code>
      会让其中的内容清空）
      <br/>
      <code>
       nohup python my.py &gt;&gt; my.log 2&gt;&amp;1 &amp;
      </code>
      和
      <code>
       nohup python my.py 1 &gt;&gt; my.log 2&gt;&amp;1 &amp;
      </code>
      相同，只是
      <code>
       1
      </code>
      (标准输入)被省略了，而后面的
      <code>
       my.log 2&gt;&amp;1
      </code>
      又将
      <code>
       2
      </code>
      (错误内容)输入到标准输出，然后前面的标准输出又输入到
      <code>
       my.log
      </code>
      中，意思错误和标准内容都会输出到
      <code>
       my.log
      </code>
      中，其实代码可拆成两块。即：
     </li>
    </ul>
    <pre><code class="prism language-shell"><span class="token function">nohup</span> python my.py <span class="token operator">&gt;&gt;</span> my.log 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span>
<span class="token comment"># 等价于下面两行的内容</span>
<span class="token function">nohup</span> python my.py 1<span class="token operator">&gt;&gt;</span> my.log <span class="token operator">&amp;</span>
<span class="token function">nohup</span> python my.py 2<span class="token operator">&gt;&gt;</span> my.log <span class="token operator">&amp;</span>
</code></pre>
    <ul>
     <li>
      上面代码就是将错误和标准都输出到my.log，最初的代码只是简化了。
      <br/>
      而加
      <code>
       2&gt;&amp;1
      </code>
      中的
      <code>
       &amp;
      </code>
      是为了区别文件1和
      <code>
       1
      </code>
      (标准输出)，假如为
      <code>
       2&gt;1
      </code>
      ,那么不就成了将错误内容输出到文件1中。
     </li>
     <li>
      <code>
       nohup tomcat.sh &gt; /dev/null 2&gt;&amp;1 &amp;
      </code>
      也是一样的，将错误和标准全部丢入
      <code>
       /dev/null
      </code>
      中，全部销毁。
     </li>
    </ul>
    <h2>
     <a id="nphupout_39">
     </a>
     若不指定输出文件名，默认会在当前目录生成nphup.out文件
    </h2>
    <h3>
     <a id="_40">
     </a>
     可能存在的问题
    </h3>
    <p>
     生成了
     <code>
      nohup.out
     </code>
     文件，但是内容始终是空的。
    </p>
    <h3>
     <a id="_42">
     </a>
     原因
    </h3>
    <p>
     python的输出又缓冲，导致
     <code>
      nohup.out
     </code>
     并不能够马上看到输出。
    </p>
    <p>
     <code>
      -u
     </code>
     参数，使得python不启用缓冲。
    </p>
    <pre><code class="prism language-shell"><span class="token function">nohup</span> python -u my.py <span class="token operator">&gt;&gt;</span> nohup.out 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span>
</code></pre>
    <h2>
     <a id="Reference_49">
     </a>
     Reference
    </h2>
    <p>
     <a href="https://blog.csdn.net/weixin_42840933/article/details/85780125">
      https://blog.csdn.net/weixin_42840933/article/details/85780125
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_31821675/article/details/78246808">
      https://blog.csdn.net/qq_31821675/article/details/78246808
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f33383032343539322f:61727469636c652f64657461696c732f313033333336323130" class_="artid" style="display:none">
 </p>
</div>


