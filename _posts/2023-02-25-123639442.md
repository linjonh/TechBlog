---
layout: post
title: "ajax与后端互相传值与处理各种类型"
date: 2023-02-25 13:47:19 +0800
description: "文章浏览阅读4k次，点赞6次，ajax与后端互相传值与处理(各种类型)提示：这里可以添加系列文章的所"
keywords: "后端穿多条数据给ajax"
categories: ['Ajax']
tags: ['Jquery', 'Java', 'Ajax']
artid: "123639442"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=123639442
    alt: "ajax与后端互相传值与处理各种类型"
render_with_liquid: false
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ajax与后端互相传值与处理(各种类型)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="ajax_0">
     </a>
     ajax与后端互相传值与处理(各种类型)
    </h2>
    <p>
     <code>
      提示：这里可以添加系列文章的所有文章的目录，目录需要自己手动添加
     </code>
    </p>
    <hr/>
    <p>
     <code>
      提示：写完文章后，目录可以自动生成，如何生成可参考右边的帮助文档
     </code>
    </p>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#ajax_0" rel="nofollow">
        ajax与后端互相传值与处理(各种类型)
       </a>
      </li>
      <li>
       <a href="#_12" rel="nofollow">
        前言
       </a>
      </li>
      <li>
       <a href="#ajax_21" rel="nofollow">
        一、ajax的基本操作(入门)
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_22" rel="nofollow">
          前端
         </a>
        </li>
        <li>
         <a href="#java_44" rel="nofollow">
          后端(java)
         </a>
        </li>
        <li>
         <a href="#_53" rel="nofollow">
          结果
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#jqueryajaxjqueryajax_58" rel="nofollow">
        二、jquery版的ajax(用jquery来写ajax,在以后传递跟复杂的参数时,更方便),这里展示最常用的写法
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#json_76" rel="nofollow">
          json
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_82" rel="nofollow">
        传入参数(一个)
       </a>
      </li>
      <li>
       <a href="#_93" rel="nofollow">
        传入一个对象
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_108" rel="nofollow">
          后端接收
         </a>
        </li>
        <li>
         <a href="#_119" rel="nofollow">
          结果
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_122" rel="nofollow">
        传入一个对象集合
       </a>
      </li>
      <li>
       <a href="#_148" rel="nofollow">
        一个数组或集合再加一个参数
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="_12">
     </a>
     前言
    </h2>
    <p>
     <code>
      提示：这里可以添加本文要记录的大概内容：
     </code>
     <br/>
     ajax 全名为 async javascript and XML
     <br/>
     是前后台交互数据的重要工具
     <br/>
     它可以局部刷新页面而不需要刷新整个页面
     <br/>
     那么怎么实现ajax与后台之间的数据传输以及得到数据后怎样处理尤为重要
     <br/>
     <code>
      提示：以下是本篇文章正文内容，下面案例可供参考
     </code>
    </p>
    <h2>
     <a id="ajax_21">
     </a>
     一、ajax的基本操作(入门)
    </h2>
    <h3>
     <a id="_22">
     </a>
     前端
    </h3>
    <p>
     点击 按钮执行loadDoc()函数
    </p>
    <pre><code class="prism language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>loadDoc()<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>更改文本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     这是 loadDoc()函数
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">loadDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">var</span> xhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建XMLHttpRequest对象,即创建一个异步调用对象.</span>
  xhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建一个新的HTTP请求.</span>
  <span class="token comment">//参数含义依次为 请求方式,请求地址, true/false(同步异步),用户名称(可写),密码(可写) </span>
  xhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将请求发送到服务器用于GET请求</span>
  xhttp<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//当readyState属性发生变化时被调用的函数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//status:返回请求的状态号 200为"ok"</span>
    <span class="token comment">//readyState:保存XMLHttpRequest的状态。 4为请求已完成且响应已就绪</span>
     <span class="token keyword">var</span> s<span class="token operator">=</span> xhttp<span class="token punctuation">.</span><span class="token function">responseText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//得到后端返回的字符串</span>
     <span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre>
    <h3>
     <a id="java_44">
     </a>
     后端(java)
    </h3>
    <pre><code class="prism language-java"> <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/url"</span><span class="token punctuation">)</span><span class="token comment">//这里的url 要与上面的保持一致</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{<!-- --></span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>"text<span class="token operator">/</span>json<span class="token punctuation">;</span>charset<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//中文</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"请求成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发送 字符串给前端</span>
    <span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_53">
     </a>
     结果
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/60a578d76ffd133a12b3a25327317a2f.png#pic_center">
      <br/>
      这是ajax入门基本操作,即ajax用来进行前后端交互
     </img>
    </p>
    <h2>
     <a id="jqueryajaxjqueryajax_58">
     </a>
     二、jquery版的ajax(用jquery来写ajax,在以后传递跟复杂的参数时,更方便),这里展示最常用的写法
    </h2>
    <pre><code class="prism language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token comment">//与js类似,</span>
			   type<span class="token punctuation">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span><span class="token comment">//请求类型</span>
			    dataType<span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span><span class="token comment">//可写为json 之后会写到</span>
			    url<span class="token punctuation">:</span> <span class="token string">"url"</span><span class="token punctuation">,</span><span class="token comment">//请求地址</span>
			    data<span class="token punctuation">:</span> <span class="token string">""</span><span class="token comment">//需发送到服务器的数据</span>
				success<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				      <span class="token function">alert</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//成功相应执行的函数</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				error<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				          <span class="token function">alert</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
				  <span class="token comment">//失败</span>
				  <span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="json_76">
     </a>
     json
    </h3>
    <p>
     JSON，全称是 JavaScript Object Notation,译为JavaScript对象标记法。
     <br/>
     通俗的来讲json可以在字符串与对象之间相互转换,方便了前后端数据交互转化与使用.
    </p>
    <hr/>
    <h2>
     <a id="_82">
     </a>
     传入参数(一个)
    </h2>
    <p>
     传入一个参数相对简单
     <br/>
     这是js的ajax
    </p>
    <pre><code class="prism language-javascript">  xhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"http://localhost:8080/s1?id=1"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只是</span>
  <span class="token comment">//在后面加了  ?id=1</span>
</code></pre>
    <p>
     jq的ajax
    </p>
    <pre><code class="prism language-javascript">   data<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//在data后面加,其余不变(也可以像js一样直接在url上加)</span>
</code></pre>
    <h2>
     <a id="_93">
     </a>
     传入一个对象
    </h2>
    <p>
     这个时候再使用原生js就很难实现了
     <br/>
     我们使用jq
     <br/>
     比如我们要把user的四个属性传入后端
    </p>
    <pre><code class="prism language-javascript"> <span class="token keyword">var</span> s<span class="token operator">=</span>  <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token string">"sex"</span><span class="token punctuation">:</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"money"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//这是我们要传的值</span>

             这是ajax的几个参数
                    type<span class="token punctuation">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
                    url<span class="token punctuation">:</span> <span class="token string">"url"</span><span class="token punctuation">,</span>
                    data<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//将s转为json格式</span>
                    dateType<span class="token punctuation">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>表示从后端接收的时json格式
                    <span class="token keyword">async</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    contentType<span class="token punctuation">:</span> <span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">,</span><span class="token comment">//表示传到后端的时json格式,并且支持中文</span>
</code></pre>
    <h3>
     <a id="_108">
     </a>
     后端接收
    </h3>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>RequestMethod<span class="token punctuation">.</span>POST<span class="token punctuation">}</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"/s3"</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token string">"application/json;charset=UTF-8"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token comment">//可以用RequestBody 将user封装</span>
    <span class="token keyword">public</span> String <span class="token function">toPay1</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> User users<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"okk"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_119">
     </a>
     结果
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e03c13368f672df9bfb7d5f553726c32.png#pic_center"/>
    </p>
    <h2>
     <a id="_122">
     </a>
     传入一个对象集合
    </h2>
    <p>
     与上边同理,只不过要先把每一个json放入一个数组中,再将数组json化即可
     <br/>
     前端
    </p>
    <pre><code class="prism language-javascript"> <span class="token keyword">var</span> s<span class="token operator">=</span>  <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token string">"sex"</span><span class="token punctuation">:</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"money"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> s1<span class="token operator">=</span>  <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token string">"sex"</span><span class="token punctuation">:</span><span class="token string">"女"</span><span class="token punctuation">,</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"money"</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
          a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> json<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                    type<span class="token punctuation">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
                    url<span class="token punctuation">:</span> <span class="token string">"http://localhost:8080/s3"</span><span class="token punctuation">,</span>
                    data<span class="token punctuation">:</span> json<span class="token punctuation">,</span>
                    dateType<span class="token punctuation">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>
                    <span class="token keyword">async</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    contentType<span class="token punctuation">:</span> <span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">,</span>
</code></pre>
    <p>
     后端只需要把接收的类型改为对象集合即可
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RequestBody</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> users
</code></pre>
    <p>
     结果
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bfb4534b5de66038bc16d1b1961af7eb.png#pic_center"/>
    </p>
    <h2>
     <a id="_148">
     </a>
     一个数组或集合再加一个参数
    </h2>
    <p>
     我是这样做的
     <br/>
     前端
     <br/>
     同时传入json,并在url加参数
    </p>
    <pre><code class="prism language-javascript">   url<span class="token punctuation">:</span> <span class="token string">"http://localhost:8080/s3?id=1"</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> json<span class="token punctuation">,</span>
</code></pre>
    <p>
     后端接受
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RequestBody</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> users<span class="token punctuation">,</span>String id
</code></pre>
    <p>
     结果
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d4db1d26dec9017f66b6040a683a4f04.png#pic_center"/>
    </p>
    <p>
     <code>
      提示：这里对文章进行总结：
     </code>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35323738383030312f:61727469636c652f64657461696c732f313233363339343432" class_="artid" style="display:none">
 </p>
</div>


