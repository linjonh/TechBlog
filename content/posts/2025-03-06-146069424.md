---
layout: post
title: "统信系统arm架构安装starrocks2.5.14Docker-compose方式部署"
date: 2025-03-06 14:23:41 +0800
description: "下载arm64架构的docker-compose文件，将其放到/usr/local/bin目录下。因宿主机是arm64架构的，需要下载arm64版本的starrocks镜像。下载安装包arrach64架构的 版本为28.0.1，并上传到服务器上。下载地址如下，包括docker-compose 选择arm64架构。dockerhub的镜像地址。"
keywords: "统信系统arm架构安装starrocks2.5.14（Docker-compose方式部署）"
categories: ['未分类']
tags: ['架构', 'Docker', 'Arm']
artid: "146069424"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146069424
    alt: "统信系统arm架构安装starrocks2.5.14Docker-compose方式部署"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146069424
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146069424
cover: https://bing.ee123.net/img/rand?artid=146069424
image: https://bing.ee123.net/img/rand?artid=146069424
img: https://bing.ee123.net/img/rand?artid=146069424
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     统信系统arm架构安装starrocks2.5.14（Docker-compose方式部署）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1_0">
     </a>
     1、查看操作系统
    </h3>
    <pre><code class="prism language-bash"><span class="token function">cat</span> /etc/os-release
<span class="token function">cat</span> /etc/os-version
<span class="token function">uname</span> <span class="token parameter variable">-r</span>
</code></pre>
    <h3>
     <a id="2docker_8">
     </a>
     2、安装docker（离线安装）
    </h3>
    <p>
     下载地址如下，包括docker-compose 选择arm64架构
    </p>
    <pre><code class="prism language-bash">docker安装包下载目录，选择一个即可：
阿里镜像 http://mirrors.aliyun.com/docker-ce/linux/static/stable
官方下载 https://download.docker.com
<span class="token function">docker-compose</span> https://github.com/docker/compose/releases
</code></pre>
    <p>
     下载安装包arrach64架构的 版本为28.0.1，并上传到服务器上
    </p>
    <pre><code class="prism language-bash"><span class="token function">tar</span> xf docker-28.0.1.tgz
<span class="token function">cp</span> docker/* /usr/bin/

<span class="token function">vi</span> /etc/systemd/system/docker.service
<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Docker Application Container Engine
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>https://docs.docker.com
<span class="token assign-left variable">After</span><span class="token operator">=</span>network-online.target firewalld.service
<span class="token assign-left variable">Wants</span><span class="token operator">=</span>network-online.target
  
<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>notify
<span class="token comment"># the default is not to use systemd for cgroups because the delegate issues still</span>
<span class="token comment"># exists and systemd currently does not support the cgroup feature set required</span>
<span class="token comment"># for containers run by docker</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd --selinux-enabled<span class="token operator">=</span>false --insecure-registry<span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill <span class="token parameter variable">-s</span> HUP <span class="token variable">$MAINPID</span>
<span class="token comment"># Having non-zero Limit*s causes performance problems due to accounting overhead</span>
<span class="token comment"># in the kernel. We recommend using cgroups to do container-local accounting.</span>
<span class="token assign-left variable">LimitNOFILE</span><span class="token operator">=</span>infinity
<span class="token assign-left variable">LimitNPROC</span><span class="token operator">=</span>infinity
<span class="token assign-left variable">LimitCORE</span><span class="token operator">=</span>infinity
<span class="token comment"># Uncomment TasksMax if your systemd version supports it.</span>
<span class="token comment"># Only systemd 226 and above support this version.</span>
<span class="token comment">#TasksMax=infinity</span>
<span class="token assign-left variable">TimeoutStartSec</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment"># set delegate yes so that systemd does not reset the cgroups of docker containers</span>
<span class="token assign-left variable">Delegate</span><span class="token operator">=</span>yes
<span class="token comment"># kill only the docker process, not all processes in the cgroup</span>
<span class="token assign-left variable">KillMode</span><span class="token operator">=</span>process
<span class="token comment"># restart the docker process if it exits prematurely</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-failure
<span class="token assign-left variable">StartLimitBurst</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token assign-left variable">StartLimitInterval</span><span class="token operator">=</span>60s
  
<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target


<span class="token function">chmod</span> +x /etc/systemd/system/docker.service
systemctl daemon-reload
systemctl start <span class="token function">docker</span>
systemctl status <span class="token function">docker</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>



<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/docker/daemon.json </span>
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"registry-mirrors"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token string">"https://docker.m.daocloud.io"</span>,
    <span class="token string">"https://registry.docker-cn.com"</span>,
    <span class="token string">"https://mirror.ccs.tencentyun.com"</span>,
    <span class="token string">"https://docker.nju.edu.cn"</span>,
    <span class="token string">"https://hub-mirror.c.163.com"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="3dockercompose_80">
     </a>
     3、安装docker-compose
    </h3>
    <p>
     下载arm64架构的docker-compose文件，将其放到/usr/local/bin目录下
    </p>
    <h3>
     <a id="4arm64_84">
     </a>
     4、下载arm64镜像并导入到服务器
    </h3>
    <p>
     dockerhub的镜像地址
    </p>
    <p>
     https://hub.docker.com/layers/starrocks/allin1-ubuntu/2.5.14/images/sha256-1844ad93cec87907ea1652e98a0c122788f8bf14348c5ca646a82d5a1652c1b3
    </p>
    <p>
     因宿主机是arm64架构的，需要下载arm64版本的starrocks镜像
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> pull starrocks/allin1-ubuntu:2.5.14@sha256:1844ad93cec87907ea1652e98a0c122788f8bf14348c5ca646a82d5a1652c1b3
<span class="token function">docker</span> tag ea513337bad4 starrocks/allin1-ubuntu-arm64:2.5.14
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> allin1-ubuntu-arm64.tar starrocks/allin1-ubuntu-arm64:2.5.14
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> allin1-ubuntu-arm64.tar
</code></pre>
    <h3>
     <a id="5docker_99">
     </a>
     5、docker部署命令
    </h3>
    <pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">9030</span>:9030 <span class="token parameter variable">-p</span> <span class="token number">8030</span>:8030 <span class="token parameter variable">-p</span> <span class="token number">8040</span>:8040 <span class="token parameter variable">-v</span> /data/starrocks/fe:/data/deploy/starrocks/fe/data <span class="token parameter variable">-v</span> /data/starrocks/be:/data/deploy/starrocks/be/data <span class="token parameter variable">-itd</span> <span class="token parameter variable">--name</span> starrocks starrocks/allin1-ubuntu-arm64:2.5.14
</code></pre>
    <h3>
     <a id="6dockercompose_105">
     </a>
     6、使用docker-compose部署
    </h3>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@host-192-170-9-44 starrocks<span class="token punctuation">]</span><span class="token comment"># cat docker-compose.yml </span>
version: <span class="token string">'2.33'</span>
services:
  starrocks:
    image: starrocks/allin1-ubuntu-arm64:2.5.14
    container_name: starrocks
    ports:
      - <span class="token string">"8030:8030"</span>
      - <span class="token string">"9020:8040"</span>
      - <span class="token string">"9030:9030"</span>
    volumes:
      - /data/starrocks/fe/data:/data/deploy/starrocks/fe/data
      - /data/starrocks/fe/meta:/data/deploy/starrocks/fe/meta
      - /data/starrocks/be/data:/data/deploy/starrocks/be/data
      - /data/starrocks/be/storage:/data/deploy/starrocks/be/storage
</code></pre>
    <p>
     启动命令：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> docker-compose.yml up <span class="token parameter variable">-d</span>
</code></pre>
    <h3>
     <a id="7starrocksroot_131">
     </a>
     7、登录starrocks并配置root密码
    </h3>
    <pre><code class="prism language-bash">mysql <span class="token parameter variable">-P</span> <span class="token number">9030</span> <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-u</span> root
SET PASSWORD <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     参考starrocks官网：
     <br/>
     https://docs.starrocks.io/docs/quick_start/shared-nothing/
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35383036393139382f:61727469636c652f64657461696c732f313436303639343234" class_="artid" style="display:none">
 </p>
</div>


