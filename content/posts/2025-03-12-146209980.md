---
layout: post
title: "Vue的scoped原理是什么"
date: 2025-03-12 17:15:11 +0800
description: "Vue的scoped原理是什么？"
keywords: "Vue的scoped原理是什么？"
categories: ['Vue']
tags: ['前端', 'Vue']
artid: "146209980"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146209980
    alt: "Vue的scoped原理是什么"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146209980
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146209980
cover: https://bing.ee123.net/img/rand?artid=146209980
image: https://bing.ee123.net/img/rand?artid=146209980
img: https://bing.ee123.net/img/rand?artid=146209980
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Vue的scoped原理是什么？
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h5>
     scoped的工作原理
    </h5>
    <p>
     当在
     <code>
      &lt;style&gt;
     </code>
     标签上使用
     <code>
      scoped
     </code>
     属性时，Vue 会为当前组件的每个元素添加一个唯一的
     <code>
      data-v-xxxxxx
     </code>
     属性，并将样式规则中的选择器修改为包含该属性的形式。
    </p>
    <h6>
     编译阶段：
    </h6>
    <p>
     在编译
     <code>
      .vue
     </code>
     文件时，Vue 的编译器会处理
     <code>
      &lt;style&gt;
     </code>
     标签，具体步骤如下：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        解析样式
       </strong>
       ：使用
       <code>
        postcss
       </code>
       解析样式，生成 AST（抽象语法树）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        添加属性选择器
       </strong>
       ：遍历 AST，为每个选择器添加
       <code>
        [data-v-xxxxxx]
       </code>
       属性选择器。
      </p>
     </li>
     <li>
      <p>
       <strong>
        生成唯一属性
       </strong>
       ：
       <code>
        xxxxxx
       </code>
       是一个基于组件文件路径和内容的哈希值，确保唯一性。
      </p>
     </li>
    </ol>
    <h6>
     运行时：
    </h6>
    <p>
     在运行时，Vue 会为组件的根元素和所有子元素添加
     <code>
      data-v-xxxxxx
     </code>
     属性。
    </p>
    <h5>
     scoped的优点
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        样式隔离
       </strong>
       ：scoped可以有效地防止组件间的样式冲突，确保每个组件的样式都是独立的。
      </p>
     </li>
     <li>
      <p>
       <strong>
        提高可维护性
       </strong>
       ：由于样式被限制在组件内部，因此当需要修改或调试样式时，可以更容易地定位到相关的组件和样式。
      </p>
     </li>
    </ol>
    <h5>
     scoped的局限性
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        性能影响
       </strong>
       ：虽然scoped样式带来了很多好处，但由于需要为每个组件生成唯一的属性选择器和修改样式选择器，因此可能会对性能产生一定的影响。然而，在大多数情况下，这种影响是可以接受的。
      </p>
     </li>
     <li>
      <p>
       <strong>
        无法使用全局样式库
       </strong>
       ：如果需要使用全局样式库（如Bootstrap），则需要在全局样式文件中引入，而不能在scoped样式中使用。这是因为scoped样式被限制在组件内部，无法应用到全局元素上。
      </p>
     </li>
     <li>
      <p>
       <strong>
        深度选择器
       </strong>
       ：在某些情况下，你可能需要为scoped样式添加一个全局样式或修改子组件的样式。这时可以使用深度选择器（如Vue 3中的
       <code>
        ::v-deep
       </code>
       或Vue 2中的
       <code>
        /deep/
       </code>
       、
       <code>
        &gt;&gt;&gt;
       </code>
       ）来“穿透”scoped限制。但需要注意的是，过度使用深度选择器可能会破坏样式的隔离性。
      </p>
     </li>
    </ol>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35333534313539362f:61727469636c652f64657461696c732f313436323039393830" class_="artid" style="display:none">
 </p>
</div>


