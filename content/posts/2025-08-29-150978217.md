---
layout: post
title: "查看docker容器内部的环境变量并向docker容器内部添加新的环境变量"
date: 2025-08-29T10:59:11+0800
description: "了解如何查看和管理 Docker 容器的环境变量是容器化应用配置管理的重要部分。下面我将为你介绍查看 Docker 容器环境变量和添加新环境变量的方法。"
keywords: "查看docker容器内部的环境变量并向docker容器内部添加新的环境变量"
categories: ['未分类']
tags: ['Spring', 'Java', 'Eureka', 'Cloud']
artid: "150978217"
arturl: "https://blog.csdn.net/caokun_8341/article/details/150978217"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=150978217
    alt: "查看docker容器内部的环境变量并向docker容器内部添加新的环境变量"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=150978217
featuredImagePreview: https://bing.ee123.net/img/rand?artid=150978217
cover: https://bing.ee123.net/img/rand?artid=150978217
image: https://bing.ee123.net/img/rand?artid=150978217
img: https://bing.ee123.net/img/rand?artid=150978217
---



# 查看docker容器内部的环境变量并向docker容器内部添加新的环境变量

了解如何查看和管理 Docker 容器的环境变量是容器化应用配置管理的重要部分。下面我将为你介绍查看 Docker 容器环境变量和添加新环境变量的方法。

#### 📋 查看 Docker 容器环境变量

查看 Docker 容器的环境变量主要有两种方法，这两种方法适用于不同的场景：

| 方法特性 | `docker inspect` | `docker exec` |
| --- | --- | --- |
| ​**核心作用**​ | 检查容器**配置信息**​ | 查看容器**运行时环境**​ |
| ​**容器状态**​ | 支持运行中和已停止的容器 | 仅支持运行中的容器 |
| ​**输出信息**​ | 显示容器被赋予的所有环境变量 | 显示容器内实际生效的所有环境变量 |
| ​**常用场景**​ | 检查预设配置 | 调试运行时环境 |

##### 1. 使用 `docker inspect`命令

`docker inspect`命令能返回容器的详细配置信息，包括其环境变量。这些变量来源于 Dockerfile、`docker run`命令的 `-e`参数或 Docker Compose 文件等。

```

# 直接输出所有环境变量的JSON数组
docker inspect -f '{{json .Config.Env}}' <容器名或ID>

# 或者以更易读的方式列出所有变量
docker inspect -f '{{range .Config.Env}}{{println .}}{{end}}' <容器名或ID>
```

​**示例输出**​：

```

["PATH=/usr/local/sbin:/usr/local/bin", "NODE_ENV=production", "API_KEY=123456"]
```

##### 2. 使用 `docker exec`命令

通过 `docker exec`在容器内部执行命令，可以直接查看容器运行时实际的环境变量。

```

# 执行env命令查看所有环境变量
docker exec <容器名或ID> env

# 或者使用printenv查看特定变量
docker exec <容器名或ID> printenv <变量名>
```

​**示例输出**​：

```

PATH=/usr/local/sbin:/usr/local/bin
NODE_ENV=production
API_KEY=123456
```

#### ➕ 向 Docker 容器添加环境变量

为容器添加环境变量主要有以下几种方式，根据你的需求选择合适的方法：

##### 1. 通过 Dockerfile 添加（构建时）

在构建镜像时，使用 `ENV`指令设置环境变量。这些变量会持久化到镜像中。

```

FROM ubuntu:latest
ENV APP_VERSION="1.0" \
    DB_HOST="database.example.com"
```

##### 2. 启动容器时添加（运行时）

在运行容器时，通过 `-e`或 `--env`标志传递环境变量。这会覆盖 Dockerfile 中设置的相同变量名。

```

# 设置单个变量
docker run -e "APP_ENV=prod" -e "DEBUG=false" <镜像名>

# 从文件加载多个变量（每行一个KEY=VALUE）
docker run --env-file ./env.list <镜像名>
```

​**优先级**​：`docker run -e`设置的变量会覆盖 Dockerfile 中 `ENV`指令定义的变量。

##### 3. 在 Docker Compose 中配置

在 `docker-compose.yml`文件中，可以直接列出环境变量或引用外部环境变量文件。

```

version: '3'
services:
  app:
    image: your-app
    environment:
      - APP_ENV=production
      - REDIS_URL=redis://cache:6379
    env_file:
      - ./common.env
```

##### 4. 对已运行容器的临时处理

​**注意**​：Docker ​**不支持**直接修改已运行容器的环境变量。

若需更改，通常需这样做：

1. ​**停止并删除旧容器**​：

   ```

   docker stop <旧容器名>
   docker rm <旧容器名>
   ```
2. ​**用新环境变量重新启动容器**​：使用包含新环境变量的 `docker run`或 `docker-compose up`命令重新创建并启动容器。

若只是想临时验证某个环境变量的效果，可以**附加一个Shell进程**到容器中并设置变量，但这**不会影响主进程**或其他Shell会话：

```

docker exec -it -e "TEMPORARY_VAR=test_value" <容器名> /bin/bash
```

在这个新启动的bash进程中，可以读取 `$TEMPORARY_VAR`，但容器内原有进程的环境不受影响。

#### 💎 重要提醒

* ​**环境变量优先级**​：`docker run -e`设置的变量 > Dockerfile 中 `ENV`指令定义的变量。
* ​**安全注意**​：避免在 Dockerfile 或代码中硬编码敏感信息（如密码、API 密钥）。建议通过安全的方式（如 Docker Secrets 或运行时注入）传递。
* ​**修改已运行容器**​：若需持久化改变环境变量，通常需要重建容器镜像或使用新的配置重新运行容器。

希望这些信息能帮助你有效管理 Docker 容器的环境变量。如果有更多问题，欢迎继续询问！



