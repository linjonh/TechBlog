---
layout: post
title: "C委托和事件"
date: 2025-03-12 22:12:55 +0800
description: "平时用户自定义委托的机会不太多，一般都使用C#自带的委托：2.如何定义委托？使用delegate关键字定义观察一下：委托和方法的形式的区别：a. 没有方法体  b. 方法返回值前多一个delegate关键字。可以没有返回，可以没有参数。在类内部，在类外部， 但不能在方法内部定义一个事件。使用event关键字。EventHandler委托类型  MyClick就是委托实例，即事件变量。// 默认值null类内部，不能在方法内部。"
keywords: "C#委托和事件"
categories: ['C']
tags: ['笔记', '开发语言', 'C']
artid: "146208138"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146208138
    alt: "C委托和事件"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146208138
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146208138
cover: https://bing.ee123.net/img/rand?artid=146208138
image: https://bing.ee123.net/img/rand?artid=146208138
img: https://bing.ee123.net/img/rand?artid=146208138
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C#委托和事件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     一、委托
    </h2>
    <h3>
     <a id="_3">
     </a>
     委托概念
    </h3>
    <p>
     有的开发者称委托为代理，事件委托= =事件代理。
     <br/>
     委托是用户自定义类型，这一点和类，接口等一样的。委托是引用类型。
     <br/>
     现实中：张三委托李四去做一件事。站在张三的角度，张三委托了李四，站在李四的角度，李四是张三的代理。
     <br/>
     C#语言中的委托比较抽象：【
     <mark>
      委托指向一系列具有相同签名和返回类型的方法的地址
     </mark>
     】。
     <br/>
     <mark>
      当一个方法，它的返回值和参数列表（参数个数，顺序，类型）和某个委托匹配，此委托就可以去代理此方法。
     </mark>
     <br/>
     委托可以指向方法的地址。将来调用委托时，就“间接”调用了某个方法。为啥不直接调用方法呢？让控件和方法之间有一个“代理人”的角色，这样可以
     <mark>
      让控件和方法之间耦合性降低，带来的灵活性。
     </mark>
     <br/>
     总结：
     <mark>
      委托是一系列方法地址的引用。委托就代理了一系列的方法。调用委托就相当于调用这一系列方法。
     </mark>
     <br/>
     委托只所以能代理【一系列】的方法的地址。说明委托肯定实现+=，-=运算符重载。
    </p>
    <h3>
     <a id="_13">
     </a>
     定义委托
    </h3>
    <p>
     平时用户自定义委托的机会不太多，一般都使用C#自带的委托：
     <br/>
     EventHandler、Action, Predicate, Func,…
    </p>
    <p>
     2.如何定义委托？使用delegate关键字定义
     <br/>
     观察一下：委托和方法的形式的区别：a. 没有方法体 b. 方法返回值前多一个delegate关键字。
     <br/>
     可以没有返回，可以没有参数。
    </p>
    <pre><code class="prism language-csharp"> <span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Delegate2</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="3_28">
     </a>
     3。定义到哪里？
    </h3>
    <p>
     在类内部，在类外部， 但不能在方法内部
    </p>
    <h3>
     <a id="4_32">
     </a>
     4。委托怎么使用？或者怎么调用？
    </h3>
    <p>
     想一想方法怎么调用？和方法调用比较一下。
     <br/>
     返回值类型 返回值变量 = 方法名(实参列表);
     <br/>
     SayHello(); // 委托不能像方法一样直接调用，为啥？没有方法体，
     <mark>
      必须代理某个方法（即实例化）后，再调用。
     </mark>
    </p>
    <h3>
     <a id="a__38">
     </a>
     a. 实例化（让某个委托类型去代理一系列方法地址）
    </h3>
    <p>
     C# 1.0写法
     <br/>
     假如把SayHello()当成一个方法的话，Method1是另外一个方法的方法名，相当于方法的参数又是一个方法。在其他语言中，如：javascript，称为回调函数 CallBack。
     <br/>
     <mark>
      委托的实例化：是把另外一个方法的方法名，传递到委托构造函数中了。
     </mark>
     <br/>
     让sayHello1这个委托的实例，指向了Method1在内存分配的地址。
     <br/>
     将来开发者调用sayHello1这个委托实例时，就相当于调用Method1这个方法，从而让需要调用Method1的其他控件和Method1不见面（解耦了）
     <br/>
     <mark>
      事件肯定是委托的实例，但委托实例不一定是事件。
     </mark>
    </p>
    <pre><code class="prism language-csharp"> <span class="token class-name">SayHello</span> sayHello1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SayHello</span><span class="token punctuation">(</span>Method1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 推荐1、Method1不能添加小括号</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"方法1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
    <p>
     实例化有一种简写，只要方法满足了委托
     <mark>
      （当一个方法，它的返回值和参数列表（参数个数，顺序，类型）和某个委托匹配），就可以直接赋值给委托
     </mark>
    </p>
    <pre><code class="prism language-csharp"> <span class="token class-name">SayHello</span> sayHello2 <span class="token operator">=</span> Method2<span class="token punctuation">;</span>  <span class="token comment">// 推荐2</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"方法2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

</code></pre>
    <h3>
     <a id="b__C_20__64">
     </a>
     b. 使用匿名方法进行实例化，匿名委托本质就是匿名方法（匿名函数：没有名称方法） C# 2.0 写法
    </h3>
    <p>
     <mark>
      C#中匿名方法包括两种：1。匿名委托 2。拉姆达（表达式，语句）
     </mark>
    </p>
    <p>
     当拉姆达中方法列表中只有一个形参时，()可以省略。
     <br/>
     当拉姆达方法体中只有一条语句时，{}可以省略，只要{}省略，return必须省略
    </p>
    <pre><code class="prism language-csharp"> <span class="token class-name">SayHello</span> sayHello3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"使用拉姆达表达式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">SayHello</span> sayHello3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"使用拉姆达表达式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token class-name">Delegate2</span> delegate2 <span class="token operator">=</span> <span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

 上面的一行代码可以简写成如下代码：
 <span class="token class-name">Delegate2</span> delegate2 <span class="token operator">=</span> arg <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="_79">
     </a>
     匿名委托(了解)
    </h3>
    <p>
     注意：参数必须设定明确类型，且没有简写形式。
    </p>
    <pre><code class="prism language-csharp"> <span class="token class-name">Delegate2</span> delegate3 <span class="token operator">=</span> <span class="token keyword">delegate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> arg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Delegate2</span> delegate22 <span class="token operator">=</span> <span class="token keyword">delegate</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> arg<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">return</span> arg <span class="token operator">==</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-csharp"><span class="token comment">// 代理非匿名方法，此处delegate21不是事件，第一次赋值不能使用+=</span>
 <span class="token class-name">Delegate2</span> delegate21 <span class="token operator">=</span> Method3<span class="token punctuation">;</span> 
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Method3</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> arg<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"方法3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> arg <span class="token operator">==</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_100">
     </a>
     多播委托：
    </h3>
    <p>
     多播委托：一个委托实例，同时代理多个方法地址。
     <br/>
     a. 语法细节，第一次代理时，不能使用+=，第二次及之后，需要使用+=运算符重载。
     <br/>
     b. 注意调用时，执行顺序。
    </p>
    <pre><code class="prism language-csharp"> <span class="token comment">//delegate21 = Method4; //重新赋值，把原来值替换。不叫多播委托。;</span>
 delegate21 <span class="token operator">+=</span> Method4<span class="token punctuation">;</span> <span class="token comment">// 多播委托。让一个委托实例，指向多个方法的地址。</span>
 delegate21 <span class="token operator">-=</span> Method3<span class="token punctuation">;</span> <span class="token comment">// 移除一个委托指向</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Method4</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> arg<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"方法4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token comment">// ......</span>

 <span class="token comment">// c. 通过拉姆达实例化委托  C# 3.0 写法</span>
 <span class="token class-name">Delegate3</span> delegate31 <span class="token operator">=</span> Method5<span class="token punctuation">;</span>

 <span class="token class-name">Delegate3</span> delegate32 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Method5</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="5_129">
     </a>
     5。委托调用
    </h3>
    <p>
     a.委托实例像方法一样调用。
     <br/>
     b.使用Invoke()
    </p>
    <pre><code class="prism language-csharp">    <span class="token function">sayHello1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 调用委托，相当于访问了Method1()</span>
    <span class="token function">sayHello2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 调用委托，相当于访问了Method2()</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"-------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    sayHello1<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">bool</span></span> result <span class="token operator">=</span> delegate22<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"-------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 多播委托调用。方法的执行顺序和委托绑定方法的顺序是一致的。</span>
    <span class="token comment">//delegate21("hello");</span>
    <span class="token class-name"><span class="token keyword">bool</span></span> result2 <span class="token operator">=</span> delegate21<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 结果拿到最后一个委托的结果。</span>



    Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_154">
     </a>
     常见委托：
    </h3>
    <pre><code class="prism language-csharp"> <span class="token comment">//Action,Action&lt;T&gt;,Func&lt;T&gt;,Predicate&lt;T&gt;,Converter&lt;T1,T2&gt;,EventHandler</span>

 <span class="token class-name">Action<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> action1 <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Action</span> action2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> func1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span> func2 <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> str<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
 <span class="token punctuation">{<!-- --></span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token class-name"><span class="token keyword">bool</span></span> result <span class="token operator">=</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

 Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>func1<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 action1<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Arguments参数</span>
 <span class="token comment">// 常见委托的外形：in逆变，out协变</span>
 <span class="token comment">// public delegate void Action();</span>
 <span class="token comment">// public delegate void Action&lt;in T&gt;(T obj);</span>
 <span class="token comment">// public delegate TResult Func&lt;out TResult&gt;();</span>
 <span class="token comment">// public delegate bool Predicate&lt;in T&gt;(T obj);</span>
 <span class="token comment">// public delegate TOutput Converter&lt;in TInput, out TOutput&gt;(TInput input);</span>
 <span class="token comment">// public delegate void EventHandler(object sender, EventArgs e);</span>
 <span class="token comment">// public delegate void EventHandler&lt;TEventArgs&gt;(object sender, TEventArgs e);</span>
</code></pre>
    <h2>
     <a id="_186">
     </a>
     二、事件
    </h2>
    <h3>
     <a id="1_187">
     </a>
     1。事件概念？
    </h3>
    <p>
     现实中，事件就是发生一件事。
     <br/>
     C#语言中的事件：事件是委托的实例（个体），委托的实例不一定是事件，但事件肯定是委托的实例。
     <br/>
     事件是一种特殊的委托实例。特殊在哪里？安全的委托实例，受CLR（Common Language RunTime公共语言运行时）管理。
    </p>
    <h3>
     <a id="_191">
     </a>
     定义事件
    </h3>
    <p>
     定义一个事件。使用event关键字。 EventHandler委托类型 MyClick就是委托实例，即事件变量。
    </p>
    <pre><code class="prism language-csharp"> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">event</span> <span class="token class-name">EventHandler</span> MyClick<span class="token punctuation">;</span>  <span class="token comment">// 默认值null</span>
</code></pre>
    <h3>
     <a id="_198">
     </a>
     给委托赋值
    </h3>
    <pre><code class="prism language-csharp"><span class="token class-name">EventHandler</span> click1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> arg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 委托实例，不是事件</span>
</code></pre>
    <h3>
     <a id="3_203">
     </a>
     3。事件定义的位置？
    </h3>
    <p>
     类内部，不能在方法内部
    </p>
    <h3>
     <a id="4_206">
     </a>
     4。事件实例化（称事件绑定，和委托实例化基本一致。只是第一初始化时，也可以使用+=或-=）
    </h3>
    <pre><code class="prism language-csharp">MyClick <span class="token operator">+=</span> Program_MyClick<span class="token punctuation">;</span>
MyClick <span class="token operator">+=</span> Program_MyClick1<span class="token punctuation">;</span>
MyClick <span class="token operator">+=</span> <span class="token keyword">delegate</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> arg<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"匿名委托"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
MyClick <span class="token operator">+=</span> <span class="token punctuation">(</span>sender<span class="token punctuation">,</span> arg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"拉姆达语句"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-csharp"> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Program_MyClick</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"事件第一次赋值"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Program_MyClick1</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"事件第二次赋值"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="5__WinForm_231">
     </a>
     5。调用事件？ 人为“立即”调用，在WinForm，一个按钮绑定事件（给事件变量赋值），事件的执行有滞后性，比如：点击时，鼠标进入时，鼠标离开时，…
    </h3>
    <pre><code class="prism language-csharp"><span class="token comment">//MyClick(null, null);</span>
MyClick<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36313831393035362f:61727469636c652f64657461696c732f313436323038313338" class_="artid" style="display:none">
 </p>
</div>


