---
layout: post
title: "微信小程序长按保存图片"
date: 2025-01-07 11:06:11 +0800
description: "本文介绍如何在微信小程序中实现图片的长按保存功能，包括使用bindlongpress事件响应长按操作"
keywords: "小程序长按保存图片"
categories: ['微信小程序']
tags: ['小程序', 'Js']
artid: "114401999"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=114401999
    alt: "微信小程序长按保存图片"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=114401999
featuredImagePreview: https://bing.ee123.net/img/rand?artid=114401999
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序长按保存图片
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <ul>
     <li>
      微信浏览器打开h5页面如果是img标签的话，长按会弹出保存图片的选项。但是微信小程序里面不可以，需要自己写这个功能。
     </li>
     <li>
      这个功能有两个点，一个是
      <code>
       长按
      </code>
      ，一个是
      <code>
       保存图片到本地
      </code>
      。
     </li>
    </ul>
    <h4>
     <a id="1__5">
     </a>
     1. 微信小程序关于图片长按的解释，有两种：
    </h4>
    <p>
     <img alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xK821ril-1614933370610)(/img/bVbBZ0d)]" src="https://i-blog.csdnimg.cn/blog_migrate/bf9ee5070d9076cec919ba58c5b7e61f.png"/>
    </p>
    <h5>
     <a id="_bindlongpress__9">
     </a>
     因此我们选用
     <code>
      bindlongpress
     </code>
     事件
    </h5>
    <h4>
     <a id="2_wxsaveImageToPhotosAlbum_11">
     </a>
     2. 微信小程序同样提供了保存图片的接口，是
     <code>
      wx.saveImageToPhotosAlbum()
     </code>
    </h4>
    <p>
     <img alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rRYdeJLe-1614933370613)(/img/bVbBZ1R)]" src="https://i-blog.csdnimg.cn/blog_migrate/b3e92e8304a42c30bd9f48ea1096728d.png"/>
    </p>
    <h4>
     <a id="3__14">
     </a>
     3. 值得说的是，保存的接口，两个需要注意的地方：
    </h4>
    <p>
     1、需要先授权，调用
     <code>
      wx.getSetting()
     </code>
     方法
     <br/>
     <img alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-DaDOCL6N-1614933370614)(/img/bVbCaTH)]" src="https://i-blog.csdnimg.cn/blog_migrate/4351d44a248313a3684f3ebd30a969d0.png"/>
    </p>
    <p>
     2、保存的图片路径参数，不支持网络路径，而在我们渲染页面时，用到的图片有很大可能是网络路径，这时候我们需要先把网络路径转为可用的本地路径，
     <code>
      wx.getImageInfo()
     </code>
     方法可以满足需要
    </p>
    <p>
     <img alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-HeWgwlbS-1614933370616)(/img/bVbCaT2)]" src="https://i-blog.csdnimg.cn/blog_migrate/d52a351928fb0c79e93932776cf412d7.png"/>
    </p>
    <h4>
     <a id="4__22">
     </a>
     4. 最后再走个心吧，毕竟我这么可爱
    </h4>
    <p>
     1、长按后直接保存未免潦草了些，考虑到用户体验，加入
     <code>
      wx.showActionSheet()
     </code>
     <br/>
     2、如果用户拒绝授权 或者 以前拒绝过授权，这时候也应该给他提示，或者展示再次打开授权的入口
     <br/>
     <img alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wkWsBdC4-1614933370617)(/img/bVbCaWC)]" src="https://i-blog.csdnimg.cn/blog_migrate/f30eba717f1f9a4ea921d1ffd1e05ce4.png"/>
    </p>
    <h3>
     <a id="_28">
     </a>
     将将！然后就可以开始写代码了：
    </h3>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{<!-- -->{url}}<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{<!-- -->{url}}<span class="token punctuation">"</span></span> <span class="token attr-name">bindlongpress</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>saveImage<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <pre><code class="prism language-javascript"><span class="token comment">// 长按保存功能--授权部分</span>
<span class="token function">saveImage</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
    wx<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        itemList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'保存到相册'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">let</span> url <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
            wx<span class="token punctuation">.</span><span class="token function">getSetting</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                success<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>authSetting<span class="token punctuation">[</span><span class="token string">'scope.writePhotosAlbum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        wx<span class="token punctuation">.</span><span class="token function">authorize</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                            scope<span class="token punctuation">:</span> <span class="token string">'scope.writePhotosAlbum'</span><span class="token punctuation">,</span>
                            success<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                                <span class="token comment">// 同意授权</span>
                                _this<span class="token punctuation">.</span><span class="token function">saveImgInner</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            fail<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                                    title<span class="token punctuation">:</span> <span class="token string">'保存失败'</span><span class="token punctuation">,</span>
                                    content<span class="token punctuation">:</span> <span class="token string">'请开启访问手机相册权限'</span><span class="token punctuation">,</span>
                                    <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                        wx<span class="token punctuation">.</span><span class="token function">openSetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 已经授权了</span>
                        _this<span class="token punctuation">.</span><span class="token function">saveImgInner</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                fail<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>   
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">fail</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 长按保存功能--保存部分</span>
<span class="token function">saveImgInner</span> <span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span><span class="token function">getImageInfo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        src<span class="token punctuation">:</span> url<span class="token punctuation">,</span>
        success<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">let</span> path <span class="token operator">=</span> res<span class="token punctuation">.</span>path<span class="token punctuation">;</span>
            wx<span class="token punctuation">.</span><span class="token function">saveImageToPhotosAlbum</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                filePath<span class="token punctuation">:</span> path<span class="token punctuation">,</span>
                success<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                        title<span class="token punctuation">:</span> <span class="token string">'已保存到相册'</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                fail<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        fail<span class="token punctuation">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
    <p>
     文章写的比较正序，参考的是这篇倒序文章，喜欢倒序的筒子们可以去看下这篇： https://www.jianshu.com/p/e592e9b28192
    </p>
    <p>
     到这里文章差不多就结束了。
    </p>
    <p>
     ————————————————————————————————————————
    </p>
    <h4>
     <a id="_109">
     </a>
     但是，但是，考虑到回调地狱的问题，决定做一下优化：
    </h4>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{<!-- -->{url}}<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{<!-- -->{url}}<span class="token punctuation">"</span></span> <span class="token attr-name">bindlongpress</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>saveImage<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <pre><code class="prism language-javascript">  <span class="token comment">// 长按保存功能</span>
  <span class="token function">saveImage</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> saveImage1<span class="token punctuation">,</span> saveImage2<span class="token punctuation">,</span> saveImage3<span class="token punctuation">,</span> saveImage4 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token function">saveImage1</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>saveImage2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>saveImage3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>saveImage4<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 吊起 actionsheet</span>
  <span class="token function">saveImage1</span> <span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      wx<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        itemList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'保存到相册'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        success<span class="token punctuation">:</span> res <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        fail<span class="token punctuation">:</span> err <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> p1
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 授权</span>
  <span class="token function">saveImage2</span> <span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      wx<span class="token punctuation">.</span><span class="token function">getSetting</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        success<span class="token punctuation">:</span> settings <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>settings<span class="token punctuation">.</span>authSetting<span class="token punctuation">[</span><span class="token string">'scope.writePhotosAlbum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            wx<span class="token punctuation">.</span><span class="token function">authorize</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              scope<span class="token punctuation">:</span> <span class="token string">'scope.writePhotosAlbum'</span><span class="token punctuation">,</span>
              success<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                  <span class="token comment">// 同意授权</span>
                  <span class="token function">resolve</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              fail<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                  wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                      title<span class="token punctuation">:</span> <span class="token string">'保存失败'</span><span class="token punctuation">,</span>
                      content<span class="token punctuation">:</span> <span class="token string">'请开启访问手机相册权限'</span><span class="token punctuation">,</span>
                      success<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                        wx<span class="token punctuation">.</span><span class="token function">openSetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                      <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
                  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 已经有权限了</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> p2
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 转换图片格式为本地路径</span>
  <span class="token function">saveImage3</span> <span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      wx<span class="token punctuation">.</span><span class="token function">getImageInfo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        src<span class="token punctuation">:</span> url<span class="token punctuation">,</span>
        success<span class="token punctuation">:</span> res <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        fail<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> p3
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 保存</span>
  <span class="token function">saveImage4</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> p4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      wx<span class="token punctuation">.</span><span class="token function">saveImageToPhotosAlbum</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        filePath<span class="token punctuation">:</span> path<span class="token punctuation">,</span>
        success<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
               title<span class="token punctuation">:</span> <span class="token string">'已保存到相册'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        fail<span class="token punctuation">:</span> err <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> p4
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
    <p>
     然后这才算是结束！
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323238393038302f:61727469636c652f64657461696c732f313134343031393939" class_="artid" style="display:none">
 </p>
</div>


