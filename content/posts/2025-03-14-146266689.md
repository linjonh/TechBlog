---
layout: post
title: "Oracle数据库存储结构-逻辑存储结构"
date: 2025-03-14 21:02:00 +0800
description: "概念逻辑存储结构是从逻辑的角度来分析数据库的构成的，是数据库创建后利用逻辑概念来描述Oracle数据库内部数据的组织和管理形式。在操作系统中，没有数据库逻辑存储结构信息，而只有物理存储结构信息。数据库的逻辑存储结构概念存储在数据库的数据字典中，可以通过数据字典查询逻辑存储结构信息。逻辑结构单元类型数据块：BLOCK区：EXTENT段：SEGMENT表空间：TABLESPACE段是由一个或多个连续或不连续的区组成的逻辑存储单元。数据库模式对象在逻辑上是以段来占据表空间的大小。"
keywords: "Oracle数据库存储结构--逻辑存储结构"
categories: ['未分类']
tags: ['数据库']
artid: "146266689"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146266689
    alt: "Oracle数据库存储结构-逻辑存储结构"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146266689
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146266689
cover: https://bing.ee123.net/img/rand?artid=146266689
image: https://bing.ee123.net/img/rand?artid=146266689
img: https://bing.ee123.net/img/rand?artid=146266689
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Oracle数据库存储结构--逻辑存储结构
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <a href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84&amp;spm=1001.2101.3001.7020" title="数据库存储结构">
      数据库存储结构
     </a>
     ：分为物理存储结构和逻辑存储结构。
    </p>
    <p>
     物理
     <a href="https://so.csdn.net/so/search?q=%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84&amp;spm=1001.2101.3001.7020" title="存储结构">
      存储结构
     </a>
     ：操作系统层面如何组织和管理数据
    </p>
    <p>
     逻辑存储结构：Oracle数据库内部数据组织和管理数据，数据库管理系统层面如何组织和管理数据
    </p>
    <hr/>
    <h2>
     Oracle逻辑存储结构
    </h2>
    <p>
     数据库的逻辑结构是从逻辑的角度分析数据库的构成，即创建数据库后形成的逻辑概念之间的关系。
    </p>
    <h3>
     逻辑存储结构概述
    </h3>
    <blockquote>
     <p>
      概念
     </p>
     <p>
      逻辑存储结构是从逻辑的角度来分析数据库的构成的，是数据库创建后利用逻辑概念来描述Oracle数据库内部数据的组织和管理形式。
     </p>
     <p>
      在操作系统中，没有数据库逻辑存储结构信息，而只有物理存储结构信息。数据库的逻辑存储结构概念存储在数据库的数据字典中，可以通过数据字典查询逻辑存储结构信息。
     </p>
     <p>
      逻辑结构单元类型
     </p>
     <p>
      数据块：BLOCK
     </p>
     <p>
      区：EXTENT
     </p>
     <p>
      段：SEGMENT
     </p>
     <p>
      表空间：TABLESPACE
     </p>
    </blockquote>
    <h3>
     数据库逻辑和物理存储对应关系
    </h3>
    <p>
     <img alt="" height="555" src="https://i-blog.csdnimg.cn/direct/27a98e5787254ea187f06d7e8b538dbc.png" width="874">
     </img>
    </p>
    <h3>
     数据库的存储层次关系
    </h3>
    <p>
     <img alt="" height="394" src="https://i-blog.csdnimg.cn/direct/6d77b8a5ca6246d38733e8e97bd0d0ab.png" width="974"/>
    </p>
    <h3 style="background-color:transparent">
     数据块（BLOCK）
    </h3>
    <h4>
     数据块的概念
    </h4>
    <blockquote>
     <p>
      最小的 I/O单元
     </p>
     <p>
      数据块是Oracle用来管理存储空间的最基本单元，也是最小的逻辑存储单元。Oracle数据库在进行输入输出操作时，都是以块为单位进行逻辑读写操作的。
     </p>
     <p>
      包括一个或者多个OS BLOCK （操作系统数据块）
     </p>
     <p>
      分为标准块和非标准块
     </p>
     <p>
      数据库创建时，DB_BLOCK_SIZE参数设置标准块大小8192B。
     </p>
     <p>
      数据块的大小由初始化参数DB_BLOCK_SIZE确定，在创建数据库之后不可以修改。
     </p>
     <p>
      块大小的查看：
     </p>
     <p>
      G:\app\oracle\product\12.2.0\dbhome_1\dbs\init.ora
     </p>
     <p>
      操作系统路径中Oraclehome下dbs文件夹下初始化参数文件中看到
     </p>
     <p>
      show parameter db_block_size
     </p>
    </blockquote>
    <h4>
     <img alt="" height="123" src="https://i-blog.csdnimg.cn/direct/3f68c060d7ee4490b55619d0dfd1dead.png" width="698">
      数据库块结构
     </img>
    </h4>
    <p>
     <img alt="" height="571" src="https://i-blog.csdnimg.cn/direct/3a65997d8be142a482b52bcc8cf12a72.png" width="986"/>
    </p>
    <blockquote>
     <p>
      块头部包括标题块头、表目录、行目录三部分。
     </p>
     <p>
      块头包含块的一般属性信息，如块的物理地址、块所属段的类型等；
     </p>
     <p>
      表目录包含数据块中保存的表的信息；
     </p>
     <p>
      行目录包含数据块中的行地址等信息。
     </p>
     <p>
      存储区包括行数据区和空闲区两部分。
     </p>
     <p>
      行数据区是已经使用的空间，保存数据库的对象数据； 空闲区是尚未使用的存储空间，用于存放新的行或用来更新已存在的行。
     </p>
    </blockquote>
    <h3 style="background-color:transparent">
     （盘）区
    </h3>
    <blockquote>
     <p>
      盘区是由一系列连续的数据块构成的逻辑存储单元，是存储空间分配与回收的最小单位。
     </p>
     <p>
      当创建一个数据库对象时，Oracle为对象分配若干个区，以构成一个段来为对象提供初始的存储空间。当段中已分配的区都写满后，Oracle会为段分配一个新区，以容纳更多的数据。
     </p>
    </blockquote>
    <h3>
     段
    </h3>
    <h4>
     段的概述
    </h4>
    <blockquote>
     <p>
      段是由一个或多个连续或不连续的区组成的逻辑存储单元。
     </p>
     <p>
      数据库模式对象在逻辑上是以段来占据表空间的大小。
     </p>
     <p>
      段代表特定数据类型的数据存储结构。
     </p>
     <p>
      一个对象只拥有一个段，一个段至少包含一个区。
     </p>
     <p>
      段不再是存储空间的分配单位，而是一个独立的逻辑存储结构。段存于表空间中并且由盘区组成。
     </p>
    </blockquote>
    <h4>
     段的类型：
    </h4>
    <blockquote>
     <p>
      数据段
     </p>
     <p>
      索引段
     </p>
     <p>
      临时段
     </p>
     <p>
      回滚段
     </p>
    </blockquote>
    <h5>
     数据段
    </h5>
    <blockquote>
     <p>
      数据段用来存储表或簇的数据，可以细分为普通表数据段、索引表数据段、分区表数据段及簇数据段四种。
     </p>
    </blockquote>
    <h5>
     索引段
    </h5>
    <blockquote>
     <p>
      用来存放索引信息，主要包括ROWID和索引键。 索引段与其相应的表段经常会被同时访问，为了减少硬盘访问的冲突，索引段与表段可以放到处于不同物理位置的表空间中。
     </p>
    </blockquote>
    <h5>
     临时段
    </h5>
    <blockquote>
     <p>
      当用户进行排序查询时，如果在指定的内存无法完成排序，Oracle将自动从用户默认的临时表空间中指派临时段进行排序。会话结束，数据将从临时段中自动删除。
     </p>
    </blockquote>
    <h5>
     回滚段
    </h5>
    <blockquote>
     <p>
      回滚段用于保存数据库的回滚信息，包含当前未提交事务所修改的数据的原始版本。 一个事务只能使用一个回滚段存放它的回滚信息，但是一个回滚段可以存放多个事务的回滚信息。回滚段可以动态创建和撤销。
     </p>
    </blockquote>
    <h3>
     表空间
    </h3>
    <blockquote>
     <p>
      表空间是在Oracle中用户可以使用的最大的逻辑存储结构，用户在数据库中建立的所有内容都被存储在表空间中。
     </p>
     <p>
      Oracle数据库在逻辑上可以划分为一系列的逻辑空间，每一个逻辑空间就可以称为一个表空间。
     </p>
     <p>
      一个数据库由有一个或多个表空间构成，不同表空间用于存放不同应用的数据，表空间大小决定了数据库的大小。
     </p>
     <p>
      一个表空间对应一个或多个数据文件，数据文件大小决定了表空间的大小。
     </p>
     <p>
      一个数据文件只能从属于一个表空间。
     </p>
     <p>
      表空间是存储模式对象的容器，一个数据库对象只能存储在一个表空间中(分区表和分区索引除外)，但可以存储在该表空间所对应的一个或多个数据文件中。
     </p>
     <p>
      若表空间只有一个数据文件，则该表空间中所有对象都保存在该文件中；若表空间对应多个数据文件，则表空间中的对象可以分布于不同的数据文件中。
     </p>
    </blockquote>
    <h4>
     数据库、表空间、数据文件、数据库对象之间的关系：
    </h4>
    <p>
     <img alt="" height="429" src="https://i-blog.csdnimg.cn/direct/da727d459215435ebd0e6b672634ed64.png" width="897">
     </img>
    </p>
    <blockquote>
     <p>
      通过表空间，可以实现对数据库存储的管理：
     </p>
     <p>
      控制整个数据库占用空间的大小；
     </p>
     <p>
      控制数据库在磁盘上的分配，提高数据库的I/O性能；
     </p>
     <p>
      控制用户所占用的存储空间的大小。
     </p>
    </blockquote>
    <h4>
     表空间的分类
    </h4>
    <h5>
     系统表空间
    </h5>
    <blockquote>
     <p>
      系统表空间——包括SYSTEM和SYSAUX SYSTEM 表空间，主要存储：
     </p>
     <p>
      数据库的数据字典； PL/SQL程序的源代码和解释代码，包括存储过程、函数、包、触发器等；
     </p>
     <p>
      数据库对象的定义，如表、视图、序列、同义词等。
     </p>
     <p>
      SYSAUX表空间
     </p>
     <p>
      SYSAUX表空间是Oracle 10g新增的辅助系统表空间，主要用于存储数据库组件等信息，以减小SYSTEM表空间的负荷。 在通常情况下，不允许删除、重命名及传输SYSAUX表空间。
     </p>
    </blockquote>
    <h5>
     非系统表空间
    </h5>
    <blockquote>
     <p>
      撤销表空间
     </p>
     <p>
      专门进行回滚信息的自动管理，由回滚段构成。一个数据库可以有多个撤销表空间，但每个数据库实例只能使用一个。
     </p>
     <p>
      由UNDO_TABLESPACE参数设置的撤销表空间。
     </p>
     <p>
      初始化参数UNDO_MANAGEMENT=AUTO时，系统使用撤销表空间自动进行回滚信息管理。
     </p>
     <p>
      临时表空间
     </p>
     <p>
      专门进行临时数据管理的表空间。 在数据库实例运行过程中，执行排序等SQL语句时会产生大量的临时数据，这些临时数据将保存在数据库临时表空间中。 建议为数据库单独定义默认的临时表空间。
     </p>
     <p>
      用户表空间
     </p>
     <p>
      保存用户数据。
     </p>
     <p>
      大文件表空间与小文件表空间
     </p>
     <p>
      所谓大文件表空间(Bigfile Tablespace)是指一个表空间只包含一个大数据文件，该文件的最大尺寸为128 TB(数据块大小为32 KB)或只32 TB(数据块大小为8 KB)。
     </p>
     <p>
      与大文件表空间相对应，系统默认创建的表空间称为小文件表空间(Smallfile Tablespace)，如SYSTEM表空间、SYSAUX表空间等。小文件表空间可以包含多达1024个数据文件。小文件表空间的总容量与大文件表空间的容量基本相似。
     </p>
    </blockquote>
    <h4>
     表空间操作
    </h4>
    <h5>
     创建表空间
    </h5>
    <blockquote>
     <p>
      例：为ORCL数据库创建一个表空间
     </p>
     <p>
      SQL&gt; CREATE TABLESPACE ORCLTBS1 DATAFILE                                            'D:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\ORCLTBS1_1.DBF'      SIZE 50M;
     </p>
     <p>
      例：为ORCL数据库的ORCLTBS1表空间添加一个大小为10 MB的新数据文件。
     </p>
     <p>
      SQL&gt; ALTER TABLESPACE ORCLTBS1 ADD DATAFILE      'D:\ORACLE\PRODUCT\10.2.0\ORADATA\ORCL\ORCLTBS1_2.DBF'      SIZE 10M;
     </p>
    </blockquote>
    <h5>
     修改表空间可用性
    </h5>
    <blockquote>
     <p>
      离线状态的表空间是不能进行数据访问的，所对应的所有数据文件也都处于脱机状态。
     </p>
     <p>
      一些表空间必须是在线状态:
     </p>
     <p>
      SYSTEM表空间
     </p>
     <p>
      存放在线回退信息的撤销表空间
     </p>
     <p>
      临时表空间
     </p>
     <p>
      语法 ALTER TABLESPACE … ONLINE|OFFLINE 例：
     </p>
     <p>
      SQL&gt; ALTER TABLESPACE ORCLTBS1 OFFLINE;
     </p>
     <p>
      SQL&gt; ALTER TABLESPACE ORCLTBS1 ONLINE;
     </p>
    </blockquote>
    <h5>
     修改表空间读写性
    </h5>
    <blockquote>
     <p>
      语法：
     </p>
     <p>
      ALTER TABLESPACE … READ ONLY|READ WRITE
     </p>
     <p>
      SQL&gt; ALTER TABLESPACE ORCLTBS1 READ ONLY;
     </p>
     <p>
      SQL&gt; ALTER TABLESPACE ORCLTBS1 READ WRITE;
     </p>
    </blockquote>
    <h5>
     删除表空间
    </h5>
    <blockquote>
     <p>
      语法 DROP TABLESPACE tablespace_name
     </p>
     <p>
      说明：
     </p>
     <p>
      如果表空间非空，应带有子句INCLUDING CONTENTS
     </p>
     <p>
      若要删除操作系统下的数据文件，应带有子句AND DATAFILES
     </p>
    </blockquote>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323430335f38333134373132342f:61727469636c652f64657461696c732f313436323636363839" class_="artid" style="display:none">
 </p>
</div>


