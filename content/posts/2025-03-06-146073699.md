---
layout: post
title: "CSS-Class-Variance-Authority-CSS-类名管理工具库"
date: 2025-03-06 16:23:56 +0800
description: "Class Variance Authority (CVA) 是一个用于管理 CSS 类名 的工具库，特别适合在 React 或 Vue 等前端框架中使用。它可以帮助你更轻松地处理组件的 样式变体（Variants），比如按钮的不同状态（primary、secondary、disabled 等）。"
keywords: "【CSS 】Class Variance Authority CSS 类名管理工具库"
categories: ['Css']
tags: ['前端', 'Css']
artid: "146073699"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146073699
    alt: "CSS-Class-Variance-Authority-CSS-类名管理工具库"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146073699
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146073699
cover: https://bing.ee123.net/img/rand?artid=146073699
image: https://bing.ee123.net/img/rand?artid=146073699
img: https://bing.ee123.net/img/rand?artid=146073699
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【CSS 】Class Variance Authority CSS 类名管理工具库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-kimbie-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1_CVA_0">
     </a>
     1.背景、什么是 CVA？
    </h3>
    <ol>
     <li>
      <strong>
       Class Variance Authority (CVA)
      </strong>
      是一个用于管理
      <strong>
       CSS 类名
      </strong>
      的工具库，特别适合在
      <code>
       React
      </code>
      或
      <code>
       Vue
      </code>
      等前端框架中使用。
     </li>
     <li>
      它可以帮助你更轻松地处理组件的
      <strong>
       样式变体
      </strong>
      （Variants），比如按钮的不同状态（
      <code>
       primary、secondary、disabled
      </code>
      等）。
     </li>
     <li>
      它非常契合像
      <code>
       Tailwind CSS
      </code>
      这类的原子化思想。
     </li>
    </ol>
    <h3>
     <a id="2CVA_8">
     </a>
     2.
     <code>
      CVA
     </code>
     的主要功能和特点?
    </h3>
    <ol>
     <li>
      <strong>
       结构化样式管理
      </strong>
      ：CVA提供了一种结构化的方式来管理样式变体，减少了全局样式冲突的可能性。它允许开发者以声明的方式描述每个参数值的样式，从而自动找出正确的样式组合。
     </li>
     <li>
      <strong>
       方便样式复用和扩展
      </strong>
      ：当需要添加新的样式变体时，CVA使得扩展变得更加方便和高效。开发者可以通过定义variants、compoundVariants和defaultVariants等参数，来轻松创建可复用的样式组合。
     </li>
     <li>
      <strong>
       减少样式冲突
      </strong>
      ：由于CVA采用了结构化的样式管理方式，因此可以大大减少样式冲突的可能性。这使得在大型项目中维护样式变得更加容易。
     </li>
    </ol>
    <h3>
     <a id="3CVA__16">
     </a>
     3.
     <code>
      CVA
     </code>
     的使用场景
    </h3>
    <ol>
     <li>
      <code>
       CVA
      </code>
      特别适用于使用
      <code>
       Tailwind CSS
      </code>
      等原子化 CSS 框架的项目。
     </li>
     <li>
      在这些项目中，开发者通常需要根据组件的 props 值将 Tailwind 类组合在一起，以创建可重用的 UI 元素。
     </li>
     <li>
      然而，随着组件样式的增加，这种组合方式可能会变得非常复杂。通过引入 CVA，开发者可以消除这种复杂性，并以声明的方式描述每个参数值的样式。
     </li>
    </ol>
    <h3>
     <a id="4_CVA_24">
     </a>
     4.如何在项目中使用
     <code>
      CVA
     </code>
    </h3>
    <h4>
     <a id="41_26">
     </a>
     4.1安装
    </h4>
    <p>
     你可以通过
     <code>
      npm
     </code>
     或
     <code>
      pnpm
     </code>
     安装
     <code>
      CVA
     </code>
     ：
    </p>
    <pre><code>npm install class-variance-authority
</code></pre>
    <p>
     或者
    </p>
    <pre><code>pnpm add class-variance-authority
</code></pre>
    <h4>
     <a id="42_CVA_42">
     </a>
     4.2
     <code>
      CVA
     </code>
     函数参数
    </h4>
    <ol>
     <li>
      基础类名（Base Classes）
      <ol>
       <li>
        <strong>
         参数形式
        </strong>
        ：通常是一个数组（也可以是一个用空格分割的字符串），包含一组基础的
        <code>
         CSS
        </code>
        类名。
        <ol>
         <li>
          [‘pl-2’, ‘pt-1’]
         </li>
         <li>
          ‘pl-2 pt-1’
         </li>
        </ol>
       </li>
       <li>
        <strong>
         作用
        </strong>
        ：这些基础类名会被应用到所有生成的样式类名组合中，作为样式的基础部分。它们不是“默认值”意义上的参数，而是函数调用的必需部分。
       </li>
      </ol>
     </li>
     <li>
      变体定义（
      <code>
       Variants Definitions
      </code>
      ）
      <ol>
       <li>
        <strong>
         参数形式
        </strong>
        ：一个对象，其键是变体属性的名称，值通常是一个对象，该对象定义了不同属性值对应的CSS类名数组。
       </li>
       <li>
        <strong>
         作用
        </strong>
        ：变体定义用于指定不同属性组合下的样式变化。这里的对象不是“第二个值”的固定形式，而是变体定义的一种常见结构。
       </li>
      </ol>
     </li>
     <li>
      其他可选参数
      <ol>
       <li>
        <strong>
         复合变体（
         <code>
          Compound Variants
         </code>
         ）
        </strong>
        ：一个对象，定义了当多个变体属性同时满足特定条件时应用的额外CSS类名。
       </li>
       <li>
        <strong>
         默认变体（
         <code>
          Default Variants
         </code>
         ）
        </strong>
        ：一个数组或者是一个字符串，指定了当没有提供特定变体属性值时应使用的默认值。
       </li>
      </ol>
     </li>
    </ol>
    <h4>
     <a id="43_CVA_58">
     </a>
     4.3 定义
     <code>
      CVA
     </code>
     函数
    </h4>
    <h5>
     <a id="431__60">
     </a>
     4.3.1 基础使用
    </h5>
    <blockquote>
     <p>
      以下是一个简单的示例，展示如何使用 CVA 创建一个带有变体的按钮组件。
     </p>
    </blockquote>
    <p>
     4.3.1.1 第一步
    </p>
    <p>
     <code>
      button.tsx
     </code>
    </p>
    <pre><code class="prism language-tsx">import React from "react";
import { cva } from "class-variance-authority";

export type ButtonProps = {
    intent: "primary" | "secondary" | "danger";
    size: "small" | "medium" | "large";
    children: React.ReactNode;
}

/** 
 * 定义样式变体 buttonVariants
 *  cva：核心函数，用于定义样式变体。
 *  variants：定义组件的变体（如 intent 和 size）。
 *  defaultVariants：设置默认的变体值。
*/
const buttonVariants = cva("button", {
    variants: {
        intent: {
            primary: "bg-blue-500 text-white",
            secondary: "bg-gray-500 text-white",
            danger: "bg-red-500 text-white",
        },
        size: {
            small: "text-sm py-1 px-2",
            medium: "text-base py-2 px-4",
            large: "text-lg py-3 px-6",
        },
    },
    defaultVariants: {
        intent: "primary",
        size: "medium",
    },
});

/** 
 * 按钮组件 
 *  buttonVariants({ intent, size })：根据传入的 intent 和 size 动态生成类名。
*/
const Button = ({ intent, size, children }: ButtonProps) =&gt; {
    return (
        &lt;button className={buttonVariants({ intent, size })}&gt;
            {children}
        &lt;/button&gt;
    );
};

export default Button;
</code></pre>
    <p>
     4.3.2.1.2 第二步 使用
     <code>
      botton
     </code>
     按钮
    </p>
    <p>
     根据传入的 intent 和 size 动态生成类名。
    </p>
    <pre><code class="prism language-tsx">import Button from './botton.tsx'

function App() {
  return (
    &lt;div&gt;
      {/* button bg-blue-500 text-white text-base py-2 px-4 */}
      &lt;Button intent="primary" size="medium"&gt;Primary Button&lt;/Button&gt;
      {/* button bg-gray-500 text-white text-sm py-1 px-2500 */}
      &lt;Button intent="secondary" size="small"&gt;Secondary Button&lt;/Button&gt;
      {/* 样式为: button bg-red-500 text-white text-lg py-3 px-6 */}
      &lt;Button intent="danger" size="large"&gt;Danger Button&lt;/Button&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
    <h5>
     <a id="4312__145">
     </a>
     4.3.1.2 高级用法
    </h5>
    <h6>
     <a id="43121____147">
     </a>
     4.3.1.2.1 第一步： 复合变体, 你可以定义多个变体的组合!
    </h6>
    <p>
     <code>
      button.tsx
     </code>
    </p>
    <pre><code class="prism language-jsx">import React from "react";
import { cva } from "class-variance-authority";

export type ButtonProps = {
    intent: "primary" | "secondary"
    disabled: boolean
    children: React.ReactNode
}

/** 
 * 定义样式变体 
 *  cva 第一个参数："button" 是基础类名，用于定义组件的默认样式(如果有多个用空格分即可)。
 *  variants：定义组件的变体（如 intent 和 size）。
 *  defaultVariants：设置默认的变体值。
 *  compoundVariants：用于定义多个变体的组合样式。   
*/

const buttonVariants = cva("button", {
    variants: {
        intent: {
            primary: "bg-blue-500 text-white",
            secondary: "bg-gray-500 text-white",
        },
        outlined: {
            true: "border-2",
        },
    },
    compoundVariants: [
        {
            intent: "primary",
            outlined: false,
            class: "border-blue-500",
        },
        {
            intent: "secondary",
            outlined: false,
            class: "border-gray-500",
        },
    ],
});

/** 
 * 按钮组件 
 *  buttonVariants({ intent, disabled })：根据传入的 intent 和 size 动态生成类名。
 *  当 intent="secondary" 时，disabled=false 时, 它会添加 border-gray-500 类名到结果数组中; 
*/

const Button = ({ intent, disabled }: ButtonProps) =&gt; {
    return (
        &lt;button
            className={buttonVariants({
                intent,
                outlined: disabled,
            })}
        &gt;
            Click Me
        &lt;/button&gt;
    );
};

export default Button;
</code></pre>
    <h6>
     <a id="43122__215">
     </a>
     4.3.1.2.2 第二步
    </h6>
    <p>
     根据传入的 intent 和 disabled动态生成类名。
    </p>
    <pre><code class="prism language-tsx">import Button from './botton.tsx'

function App() {
  return (
    &lt;div&gt;
      {/* 
        当 intent="secondary" 时，disabled=true 时，样式为：
         button bg-blue-500 text-white border-2 
      */}
      &lt;Button intent="primary" disabled&gt;Primary Button&lt;/Button&gt;
      {/* 
        当 intent="secondary" 时，disabled=false 时，样式为:
          button bg-gray-500 text-white border-gray-500 
      */}
      &lt;Button intent="secondary"disabled={false}&gt;Secondary Button&lt;/Button&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
    <h3>
     <a id="5__244">
     </a>
     5. 优点
    </h3>
    <ol>
     <li>
      <strong>
       声明式 API
      </strong>
      ：通过
      <code>
       variants
      </code>
      和
      <code>
       defaultVariants
      </code>
      定义样式，代码更清晰。
     </li>
     <li>
      <strong>
       类型安全
      </strong>
      ：如果你使用 TypeScript，CVA 可以提供完整的类型推断。
     </li>
     <li>
      <strong>
       灵活性
      </strong>
      ：支持复合变体和动态类名，适合复杂的 UI 组件。
     </li>
    </ol>
    <h3>
     <a id="6__252">
     </a>
     6. 总结
    </h3>
    <ol>
     <li>
      Class Variance Authority (CVA) 是一个强大的工具，特别适合管理组件的样式变体。
     </li>
     <li>
      它可以帮助你减少重复代码，提高开发效率。
     </li>
     <li>
      如果你正在构建一个需要多种样式变体的组件库，CVA 是一个非常好的选择！
     </li>
     <li>
      如果你有更多问题，欢迎随时问我！😊
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f6c697578696e5f68656c6c6f2f:61727469636c652f64657461696c732f313436303733363939" class_="artid" style="display:none">
 </p>
</div>


