---
layout: post
title: "CSS-Class-Variance-Authority-CSS-ç±»åç®¡ç†å·¥å…·åº“"
date: 2025-03-06 16:23:56 +0800
description: "Class Variance Authority (CVA) æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† CSS ç±»å çš„å·¥å…·åº“ï¼Œç‰¹åˆ«é€‚åˆåœ¨ React æˆ– Vue ç­‰å‰ç«¯æ¡†æ¶ä¸­ä½¿ç”¨ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ æ›´è½»æ¾åœ°å¤„ç†ç»„ä»¶çš„ æ ·å¼å˜ä½“ï¼ˆVariantsï¼‰ï¼Œæ¯”å¦‚æŒ‰é’®çš„ä¸åŒçŠ¶æ€ï¼ˆprimaryã€secondaryã€disabled ç­‰ï¼‰ã€‚"
keywords: "ã€CSS ã€‘Class Variance Authority CSS ç±»åç®¡ç†å·¥å…·åº“"
categories: ['Css']
tags: ['å‰ç«¯', 'Css']
artid: "146073699"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146073699
    alt: "CSS-Class-Variance-Authority-CSS-ç±»åç®¡ç†å·¥å…·åº“"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146073699
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146073699
cover: https://bing.ee123.net/img/rand?artid=146073699
image: https://bing.ee123.net/img/rand?artid=146073699
img: https://bing.ee123.net/img/rand?artid=146073699
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ã€CSS ã€‘Class Variance Authority CSS ç±»åç®¡ç†å·¥å…·åº“
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-kimbie-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1_CVA_0">
     </a>
     1.èƒŒæ™¯ã€ä»€ä¹ˆæ˜¯ CVAï¼Ÿ
    </h3>
    <ol>
     <li>
      <strong>
       Class Variance Authority (CVA)
      </strong>
      æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†
      <strong>
       CSS ç±»å
      </strong>
      çš„å·¥å…·åº“ï¼Œç‰¹åˆ«é€‚åˆåœ¨
      <code>
       React
      </code>
      æˆ–
      <code>
       Vue
      </code>
      ç­‰å‰ç«¯æ¡†æ¶ä¸­ä½¿ç”¨ã€‚
     </li>
     <li>
      å®ƒå¯ä»¥å¸®åŠ©ä½ æ›´è½»æ¾åœ°å¤„ç†ç»„ä»¶çš„
      <strong>
       æ ·å¼å˜ä½“
      </strong>
      ï¼ˆVariantsï¼‰ï¼Œæ¯”å¦‚æŒ‰é’®çš„ä¸åŒçŠ¶æ€ï¼ˆ
      <code>
       primaryã€secondaryã€disabled
      </code>
      ç­‰ï¼‰ã€‚
     </li>
     <li>
      å®ƒéå¸¸å¥‘åˆåƒ
      <code>
       Tailwind CSS
      </code>
      è¿™ç±»çš„åŸå­åŒ–æ€æƒ³ã€‚
     </li>
    </ol>
    <h3>
     <a id="2CVA_8">
     </a>
     2.
     <code>
      CVA
     </code>
     çš„ä¸»è¦åŠŸèƒ½å’Œç‰¹ç‚¹?
    </h3>
    <ol>
     <li>
      <strong>
       ç»“æ„åŒ–æ ·å¼ç®¡ç†
      </strong>
      ï¼šCVAæä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥ç®¡ç†æ ·å¼å˜ä½“ï¼Œå‡å°‘äº†å…¨å±€æ ·å¼å†²çªçš„å¯èƒ½æ€§ã€‚å®ƒå…è®¸å¼€å‘è€…ä»¥å£°æ˜çš„æ–¹å¼æè¿°æ¯ä¸ªå‚æ•°å€¼çš„æ ·å¼ï¼Œä»è€Œè‡ªåŠ¨æ‰¾å‡ºæ­£ç¡®çš„æ ·å¼ç»„åˆã€‚
     </li>
     <li>
      <strong>
       æ–¹ä¾¿æ ·å¼å¤ç”¨å’Œæ‰©å±•
      </strong>
      ï¼šå½“éœ€è¦æ·»åŠ æ–°çš„æ ·å¼å˜ä½“æ—¶ï¼ŒCVAä½¿å¾—æ‰©å±•å˜å¾—æ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡å®šä¹‰variantsã€compoundVariantså’ŒdefaultVariantsç­‰å‚æ•°ï¼Œæ¥è½»æ¾åˆ›å»ºå¯å¤ç”¨çš„æ ·å¼ç»„åˆã€‚
     </li>
     <li>
      <strong>
       å‡å°‘æ ·å¼å†²çª
      </strong>
      ï¼šç”±äºCVAé‡‡ç”¨äº†ç»“æ„åŒ–çš„æ ·å¼ç®¡ç†æ–¹å¼ï¼Œå› æ­¤å¯ä»¥å¤§å¤§å‡å°‘æ ·å¼å†²çªçš„å¯èƒ½æ€§ã€‚è¿™ä½¿å¾—åœ¨å¤§å‹é¡¹ç›®ä¸­ç»´æŠ¤æ ·å¼å˜å¾—æ›´åŠ å®¹æ˜“ã€‚
     </li>
    </ol>
    <h3>
     <a id="3CVA__16">
     </a>
     3.
     <code>
      CVA
     </code>
     çš„ä½¿ç”¨åœºæ™¯
    </h3>
    <ol>
     <li>
      <code>
       CVA
      </code>
      ç‰¹åˆ«é€‚ç”¨äºä½¿ç”¨
      <code>
       Tailwind CSS
      </code>
      ç­‰åŸå­åŒ– CSS æ¡†æ¶çš„é¡¹ç›®ã€‚
     </li>
     <li>
      åœ¨è¿™äº›é¡¹ç›®ä¸­ï¼Œå¼€å‘è€…é€šå¸¸éœ€è¦æ ¹æ®ç»„ä»¶çš„ props å€¼å°† Tailwind ç±»ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥åˆ›å»ºå¯é‡ç”¨çš„ UI å…ƒç´ ã€‚
     </li>
     <li>
      ç„¶è€Œï¼Œéšç€ç»„ä»¶æ ·å¼çš„å¢åŠ ï¼Œè¿™ç§ç»„åˆæ–¹å¼å¯èƒ½ä¼šå˜å¾—éå¸¸å¤æ‚ã€‚é€šè¿‡å¼•å…¥ CVAï¼Œå¼€å‘è€…å¯ä»¥æ¶ˆé™¤è¿™ç§å¤æ‚æ€§ï¼Œå¹¶ä»¥å£°æ˜çš„æ–¹å¼æè¿°æ¯ä¸ªå‚æ•°å€¼çš„æ ·å¼ã€‚
     </li>
    </ol>
    <h3>
     <a id="4_CVA_24">
     </a>
     4.å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨
     <code>
      CVA
     </code>
    </h3>
    <h4>
     <a id="41_26">
     </a>
     4.1å®‰è£…
    </h4>
    <p>
     ä½ å¯ä»¥é€šè¿‡
     <code>
      npm
     </code>
     æˆ–
     <code>
      pnpm
     </code>
     å®‰è£…
     <code>
      CVA
     </code>
     ï¼š
    </p>
    <pre><code>npm install class-variance-authority
</code></pre>
    <p>
     æˆ–è€…
    </p>
    <pre><code>pnpm add class-variance-authority
</code></pre>
    <h4>
     <a id="42_CVA_42">
     </a>
     4.2
     <code>
      CVA
     </code>
     å‡½æ•°å‚æ•°
    </h4>
    <ol>
     <li>
      åŸºç¡€ç±»åï¼ˆBase Classesï¼‰
      <ol>
       <li>
        <strong>
         å‚æ•°å½¢å¼
        </strong>
        ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç”¨ç©ºæ ¼åˆ†å‰²çš„å­—ç¬¦ä¸²ï¼‰ï¼ŒåŒ…å«ä¸€ç»„åŸºç¡€çš„
        <code>
         CSS
        </code>
        ç±»åã€‚
        <ol>
         <li>
          [â€˜pl-2â€™, â€˜pt-1â€™]
         </li>
         <li>
          â€˜pl-2 pt-1â€™
         </li>
        </ol>
       </li>
       <li>
        <strong>
         ä½œç”¨
        </strong>
        ï¼šè¿™äº›åŸºç¡€ç±»åä¼šè¢«åº”ç”¨åˆ°æ‰€æœ‰ç”Ÿæˆçš„æ ·å¼ç±»åç»„åˆä¸­ï¼Œä½œä¸ºæ ·å¼çš„åŸºç¡€éƒ¨åˆ†ã€‚å®ƒä»¬ä¸æ˜¯â€œé»˜è®¤å€¼â€æ„ä¹‰ä¸Šçš„å‚æ•°ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„å¿…éœ€éƒ¨åˆ†ã€‚
       </li>
      </ol>
     </li>
     <li>
      å˜ä½“å®šä¹‰ï¼ˆ
      <code>
       Variants Definitions
      </code>
      ï¼‰
      <ol>
       <li>
        <strong>
         å‚æ•°å½¢å¼
        </strong>
        ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå…¶é”®æ˜¯å˜ä½“å±æ€§çš„åç§°ï¼Œå€¼é€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®šä¹‰äº†ä¸åŒå±æ€§å€¼å¯¹åº”çš„CSSç±»åæ•°ç»„ã€‚
       </li>
       <li>
        <strong>
         ä½œç”¨
        </strong>
        ï¼šå˜ä½“å®šä¹‰ç”¨äºæŒ‡å®šä¸åŒå±æ€§ç»„åˆä¸‹çš„æ ·å¼å˜åŒ–ã€‚è¿™é‡Œçš„å¯¹è±¡ä¸æ˜¯â€œç¬¬äºŒä¸ªå€¼â€çš„å›ºå®šå½¢å¼ï¼Œè€Œæ˜¯å˜ä½“å®šä¹‰çš„ä¸€ç§å¸¸è§ç»“æ„ã€‚
       </li>
      </ol>
     </li>
     <li>
      å…¶ä»–å¯é€‰å‚æ•°
      <ol>
       <li>
        <strong>
         å¤åˆå˜ä½“ï¼ˆ
         <code>
          Compound Variants
         </code>
         ï¼‰
        </strong>
        ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰äº†å½“å¤šä¸ªå˜ä½“å±æ€§åŒæ—¶æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶åº”ç”¨çš„é¢å¤–CSSç±»åã€‚
       </li>
       <li>
        <strong>
         é»˜è®¤å˜ä½“ï¼ˆ
         <code>
          Default Variants
         </code>
         ï¼‰
        </strong>
        ï¼šä¸€ä¸ªæ•°ç»„æˆ–è€…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡å®šäº†å½“æ²¡æœ‰æä¾›ç‰¹å®šå˜ä½“å±æ€§å€¼æ—¶åº”ä½¿ç”¨çš„é»˜è®¤å€¼ã€‚
       </li>
      </ol>
     </li>
    </ol>
    <h4>
     <a id="43_CVA_58">
     </a>
     4.3 å®šä¹‰
     <code>
      CVA
     </code>
     å‡½æ•°
    </h4>
    <h5>
     <a id="431__60">
     </a>
     4.3.1 åŸºç¡€ä½¿ç”¨
    </h5>
    <blockquote>
     <p>
      ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ CVA åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å˜ä½“çš„æŒ‰é’®ç»„ä»¶ã€‚
     </p>
    </blockquote>
    <p>
     4.3.1.1 ç¬¬ä¸€æ­¥
    </p>
    <p>
     <code>
      button.tsx
     </code>
    </p>
    <pre><code class="prism language-tsx">import React from "react";
import { cva } from "class-variance-authority";

export type ButtonProps = {
    intent: "primary" | "secondary" | "danger";
    size: "small" | "medium" | "large";
    children: React.ReactNode;
}

/** 
 * å®šä¹‰æ ·å¼å˜ä½“ buttonVariants
 *  cvaï¼šæ ¸å¿ƒå‡½æ•°ï¼Œç”¨äºå®šä¹‰æ ·å¼å˜ä½“ã€‚
 *  variantsï¼šå®šä¹‰ç»„ä»¶çš„å˜ä½“ï¼ˆå¦‚ intent å’Œ sizeï¼‰ã€‚
 *  defaultVariantsï¼šè®¾ç½®é»˜è®¤çš„å˜ä½“å€¼ã€‚
*/
const buttonVariants = cva("button", {
    variants: {
        intent: {
            primary: "bg-blue-500 text-white",
            secondary: "bg-gray-500 text-white",
            danger: "bg-red-500 text-white",
        },
        size: {
            small: "text-sm py-1 px-2",
            medium: "text-base py-2 px-4",
            large: "text-lg py-3 px-6",
        },
    },
    defaultVariants: {
        intent: "primary",
        size: "medium",
    },
});

/** 
 * æŒ‰é’®ç»„ä»¶ 
 *  buttonVariants({ intent, size })ï¼šæ ¹æ®ä¼ å…¥çš„ intent å’Œ size åŠ¨æ€ç”Ÿæˆç±»åã€‚
*/
const Button = ({ intent, size, children }: ButtonProps) =&gt; {
    return (
        &lt;button className={buttonVariants({ intent, size })}&gt;
            {children}
        &lt;/button&gt;
    );
};

export default Button;
</code></pre>
    <p>
     4.3.2.1.2 ç¬¬äºŒæ­¥ ä½¿ç”¨
     <code>
      botton
     </code>
     æŒ‰é’®
    </p>
    <p>
     æ ¹æ®ä¼ å…¥çš„ intent å’Œ size åŠ¨æ€ç”Ÿæˆç±»åã€‚
    </p>
    <pre><code class="prism language-tsx">import Button from './botton.tsx'

function App() {
  return (
    &lt;div&gt;
      {/* button bg-blue-500 text-white text-base py-2 px-4 */}
      &lt;Button intent="primary" size="medium"&gt;Primary Button&lt;/Button&gt;
      {/* button bg-gray-500 text-white text-sm py-1 px-2500 */}
      &lt;Button intent="secondary" size="small"&gt;Secondary Button&lt;/Button&gt;
      {/* æ ·å¼ä¸º: button bg-red-500 text-white text-lg py-3 px-6 */}
      &lt;Button intent="danger" size="large"&gt;Danger Button&lt;/Button&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
    <h5>
     <a id="4312__145">
     </a>
     4.3.1.2 é«˜çº§ç”¨æ³•
    </h5>
    <h6>
     <a id="43121____147">
     </a>
     4.3.1.2.1 ç¬¬ä¸€æ­¥ï¼š å¤åˆå˜ä½“, ä½ å¯ä»¥å®šä¹‰å¤šä¸ªå˜ä½“çš„ç»„åˆ!
    </h6>
    <p>
     <code>
      button.tsx
     </code>
    </p>
    <pre><code class="prism language-jsx">import React from "react";
import { cva } from "class-variance-authority";

export type ButtonProps = {
    intent: "primary" | "secondary"
    disabled: boolean
    children: React.ReactNode
}

/** 
 * å®šä¹‰æ ·å¼å˜ä½“ 
 *  cva ç¬¬ä¸€ä¸ªå‚æ•°ï¼š"button" æ˜¯åŸºç¡€ç±»åï¼Œç”¨äºå®šä¹‰ç»„ä»¶çš„é»˜è®¤æ ·å¼(å¦‚æœæœ‰å¤šä¸ªç”¨ç©ºæ ¼åˆ†å³å¯)ã€‚
 *  variantsï¼šå®šä¹‰ç»„ä»¶çš„å˜ä½“ï¼ˆå¦‚ intent å’Œ sizeï¼‰ã€‚
 *  defaultVariantsï¼šè®¾ç½®é»˜è®¤çš„å˜ä½“å€¼ã€‚
 *  compoundVariantsï¼šç”¨äºå®šä¹‰å¤šä¸ªå˜ä½“çš„ç»„åˆæ ·å¼ã€‚   
*/

const buttonVariants = cva("button", {
    variants: {
        intent: {
            primary: "bg-blue-500 text-white",
            secondary: "bg-gray-500 text-white",
        },
        outlined: {
            true: "border-2",
        },
    },
    compoundVariants: [
        {
            intent: "primary",
            outlined: false,
            class: "border-blue-500",
        },
        {
            intent: "secondary",
            outlined: false,
            class: "border-gray-500",
        },
    ],
});

/** 
 * æŒ‰é’®ç»„ä»¶ 
 *  buttonVariants({ intent, disabled })ï¼šæ ¹æ®ä¼ å…¥çš„ intent å’Œ size åŠ¨æ€ç”Ÿæˆç±»åã€‚
 *  å½“ intent="secondary" æ—¶ï¼Œdisabled=false æ—¶, å®ƒä¼šæ·»åŠ  border-gray-500 ç±»ååˆ°ç»“æœæ•°ç»„ä¸­; 
*/

const Button = ({ intent, disabled }: ButtonProps) =&gt; {
    return (
        &lt;button
            className={buttonVariants({
                intent,
                outlined: disabled,
            })}
        &gt;
            Click Me
        &lt;/button&gt;
    );
};

export default Button;
</code></pre>
    <h6>
     <a id="43122__215">
     </a>
     4.3.1.2.2 ç¬¬äºŒæ­¥
    </h6>
    <p>
     æ ¹æ®ä¼ å…¥çš„ intent å’Œ disabledåŠ¨æ€ç”Ÿæˆç±»åã€‚
    </p>
    <pre><code class="prism language-tsx">import Button from './botton.tsx'

function App() {
  return (
    &lt;div&gt;
      {/* 
        å½“ intent="secondary" æ—¶ï¼Œdisabled=true æ—¶ï¼Œæ ·å¼ä¸ºï¼š
         button bg-blue-500 text-white border-2 
      */}
      &lt;Button intent="primary" disabled&gt;Primary Button&lt;/Button&gt;
      {/* 
        å½“ intent="secondary" æ—¶ï¼Œdisabled=false æ—¶ï¼Œæ ·å¼ä¸º:
          button bg-gray-500 text-white border-gray-500 
      */}
      &lt;Button intent="secondary"disabled={false}&gt;Secondary Button&lt;/Button&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
    <h3>
     <a id="5__244">
     </a>
     5. ä¼˜ç‚¹
    </h3>
    <ol>
     <li>
      <strong>
       å£°æ˜å¼ API
      </strong>
      ï¼šé€šè¿‡
      <code>
       variants
      </code>
      å’Œ
      <code>
       defaultVariants
      </code>
      å®šä¹‰æ ·å¼ï¼Œä»£ç æ›´æ¸…æ™°ã€‚
     </li>
     <li>
      <strong>
       ç±»å‹å®‰å…¨
      </strong>
      ï¼šå¦‚æœä½ ä½¿ç”¨ TypeScriptï¼ŒCVA å¯ä»¥æä¾›å®Œæ•´çš„ç±»å‹æ¨æ–­ã€‚
     </li>
     <li>
      <strong>
       çµæ´»æ€§
      </strong>
      ï¼šæ”¯æŒå¤åˆå˜ä½“å’ŒåŠ¨æ€ç±»åï¼Œé€‚åˆå¤æ‚çš„ UI ç»„ä»¶ã€‚
     </li>
    </ol>
    <h3>
     <a id="6__252">
     </a>
     6. æ€»ç»“
    </h3>
    <ol>
     <li>
      Class Variance Authority (CVA) æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆç®¡ç†ç»„ä»¶çš„æ ·å¼å˜ä½“ã€‚
     </li>
     <li>
      å®ƒå¯ä»¥å¸®åŠ©ä½ å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
     </li>
     <li>
      å¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªéœ€è¦å¤šç§æ ·å¼å˜ä½“çš„ç»„ä»¶åº“ï¼ŒCVA æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ï¼
     </li>
     <li>
      å¦‚æœä½ æœ‰æ›´å¤šé—®é¢˜ï¼Œæ¬¢è¿éšæ—¶é—®æˆ‘ï¼ğŸ˜Š
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f6c697578696e5f68656c6c6f2f:61727469636c652f64657461696c732f313436303733363939" class_="artid" style="display:none">
 </p>
</div>


