---
arturl_encode: "68747470733a2f2f626c:6f672e6373646e2e6e65742f6c697578696e5f68656c6c6f2f:61727469636c652f64657461696c732f313436303733363939"
layout: post
title: "CSS-Class-Variance-Authority-CSS-ç±»åç®¡ç†å·¥å…·åº“"
date: 2025-03-06 16:23:56 +0800
description: "Class Variance Authority (CVA) æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† CSS ç±»å çš„å·¥å…·åº“ï¼Œç‰¹åˆ«é€‚åˆåœ¨ React æˆ– Vue ç­‰å‰ç«¯æ¡†æ¶ä¸­ä½¿ç”¨ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ æ›´è½»æ¾åœ°å¤„ç†ç»„ä»¶çš„ æ ·å¼å˜ä½“ï¼ˆVariantsï¼‰ï¼Œæ¯”å¦‚æŒ‰é’®çš„ä¸åŒçŠ¶æ€ï¼ˆprimaryã€secondaryã€disabled ç­‰ï¼‰ã€‚"
keywords: "ã€CSS ã€‘Class Variance Authority CSS ç±»åç®¡ç†å·¥å…·åº“"
categories: ['Css']
tags: ['å‰ç«¯', 'Css']
artid: "146073699"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146073699
    alt: "CSS-Class-Variance-Authority-CSS-ç±»åç®¡ç†å·¥å…·åº“"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146073699
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146073699
cover: https://bing.ee123.net/img/rand?artid=146073699
image: https://bing.ee123.net/img/rand?artid=146073699
img: https://bing.ee123.net/img/rand?artid=146073699
---

# ã€CSS ã€‘Class Variance Authority CSS ç±»åç®¡ç†å·¥å…·åº“

### 1.èƒŒæ™¯ã€ä»€ä¹ˆæ˜¯ CVAï¼Ÿ

1. **Class Variance Authority (CVA)**
   æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†
   **CSS ç±»å**
   çš„å·¥å…·åº“ï¼Œç‰¹åˆ«é€‚åˆåœ¨
   `React`
   æˆ–
   `Vue`
   ç­‰å‰ç«¯æ¡†æ¶ä¸­ä½¿ç”¨ã€‚
2. å®ƒå¯ä»¥å¸®åŠ©ä½ æ›´è½»æ¾åœ°å¤„ç†ç»„ä»¶çš„
   **æ ·å¼å˜ä½“**
   ï¼ˆVariantsï¼‰ï¼Œæ¯”å¦‚æŒ‰é’®çš„ä¸åŒçŠ¶æ€ï¼ˆ
   `primaryã€secondaryã€disabled`
   ç­‰ï¼‰ã€‚
3. å®ƒéå¸¸å¥‘åˆåƒ
   `Tailwind CSS`
   è¿™ç±»çš„åŸå­åŒ–æ€æƒ³ã€‚

### 2. `CVA` çš„ä¸»è¦åŠŸèƒ½å’Œç‰¹ç‚¹?

1. **ç»“æ„åŒ–æ ·å¼ç®¡ç†**
   ï¼šCVAæä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥ç®¡ç†æ ·å¼å˜ä½“ï¼Œå‡å°‘äº†å…¨å±€æ ·å¼å†²çªçš„å¯èƒ½æ€§ã€‚å®ƒå…è®¸å¼€å‘è€…ä»¥å£°æ˜çš„æ–¹å¼æè¿°æ¯ä¸ªå‚æ•°å€¼çš„æ ·å¼ï¼Œä»è€Œè‡ªåŠ¨æ‰¾å‡ºæ­£ç¡®çš„æ ·å¼ç»„åˆã€‚
2. **æ–¹ä¾¿æ ·å¼å¤ç”¨å’Œæ‰©å±•**
   ï¼šå½“éœ€è¦æ·»åŠ æ–°çš„æ ·å¼å˜ä½“æ—¶ï¼ŒCVAä½¿å¾—æ‰©å±•å˜å¾—æ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡å®šä¹‰variantsã€compoundVariantså’ŒdefaultVariantsç­‰å‚æ•°ï¼Œæ¥è½»æ¾åˆ›å»ºå¯å¤ç”¨çš„æ ·å¼ç»„åˆã€‚
3. **å‡å°‘æ ·å¼å†²çª**
   ï¼šç”±äºCVAé‡‡ç”¨äº†ç»“æ„åŒ–çš„æ ·å¼ç®¡ç†æ–¹å¼ï¼Œå› æ­¤å¯ä»¥å¤§å¤§å‡å°‘æ ·å¼å†²çªçš„å¯èƒ½æ€§ã€‚è¿™ä½¿å¾—åœ¨å¤§å‹é¡¹ç›®ä¸­ç»´æŠ¤æ ·å¼å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

### 3. `CVA` çš„ä½¿ç”¨åœºæ™¯

1. `CVA`
   ç‰¹åˆ«é€‚ç”¨äºä½¿ç”¨
   `Tailwind CSS`
   ç­‰åŸå­åŒ– CSS æ¡†æ¶çš„é¡¹ç›®ã€‚
2. åœ¨è¿™äº›é¡¹ç›®ä¸­ï¼Œå¼€å‘è€…é€šå¸¸éœ€è¦æ ¹æ®ç»„ä»¶çš„ props å€¼å°† Tailwind ç±»ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥åˆ›å»ºå¯é‡ç”¨çš„ UI å…ƒç´ ã€‚
3. ç„¶è€Œï¼Œéšç€ç»„ä»¶æ ·å¼çš„å¢åŠ ï¼Œè¿™ç§ç»„åˆæ–¹å¼å¯èƒ½ä¼šå˜å¾—éå¸¸å¤æ‚ã€‚é€šè¿‡å¼•å…¥ CVAï¼Œå¼€å‘è€…å¯ä»¥æ¶ˆé™¤è¿™ç§å¤æ‚æ€§ï¼Œå¹¶ä»¥å£°æ˜çš„æ–¹å¼æè¿°æ¯ä¸ªå‚æ•°å€¼çš„æ ·å¼ã€‚

### 4.å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ `CVA`

#### 4.1å®‰è£…

ä½ å¯ä»¥é€šè¿‡
`npm`
æˆ–
`pnpm`
å®‰è£…
`CVA`
ï¼š

```
npm install class-variance-authority

```

æˆ–è€…

```
pnpm add class-variance-authority

```

#### 4.2 `CVA` å‡½æ•°å‚æ•°

1. åŸºç¡€ç±»åï¼ˆBase Classesï¼‰
   1. **å‚æ•°å½¢å¼**
      ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç”¨ç©ºæ ¼åˆ†å‰²çš„å­—ç¬¦ä¸²ï¼‰ï¼ŒåŒ…å«ä¸€ç»„åŸºç¡€çš„
      `CSS`
      ç±»åã€‚
      1. [â€˜pl-2â€™, â€˜pt-1â€™]
      2. â€˜pl-2 pt-1â€™
   2. **ä½œç”¨**
      ï¼šè¿™äº›åŸºç¡€ç±»åä¼šè¢«åº”ç”¨åˆ°æ‰€æœ‰ç”Ÿæˆçš„æ ·å¼ç±»åç»„åˆä¸­ï¼Œä½œä¸ºæ ·å¼çš„åŸºç¡€éƒ¨åˆ†ã€‚å®ƒä»¬ä¸æ˜¯â€œé»˜è®¤å€¼â€æ„ä¹‰ä¸Šçš„å‚æ•°ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„å¿…éœ€éƒ¨åˆ†ã€‚
2. å˜ä½“å®šä¹‰ï¼ˆ
   `Variants Definitions`
   ï¼‰
   1. **å‚æ•°å½¢å¼**
      ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå…¶é”®æ˜¯å˜ä½“å±æ€§çš„åç§°ï¼Œå€¼é€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®šä¹‰äº†ä¸åŒå±æ€§å€¼å¯¹åº”çš„CSSç±»åæ•°ç»„ã€‚
   2. **ä½œç”¨**
      ï¼šå˜ä½“å®šä¹‰ç”¨äºæŒ‡å®šä¸åŒå±æ€§ç»„åˆä¸‹çš„æ ·å¼å˜åŒ–ã€‚è¿™é‡Œçš„å¯¹è±¡ä¸æ˜¯â€œç¬¬äºŒä¸ªå€¼â€çš„å›ºå®šå½¢å¼ï¼Œè€Œæ˜¯å˜ä½“å®šä¹‰çš„ä¸€ç§å¸¸è§ç»“æ„ã€‚
3. å…¶ä»–å¯é€‰å‚æ•°
   1. **å¤åˆå˜ä½“ï¼ˆ
      `Compound Variants`
      ï¼‰**
      ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰äº†å½“å¤šä¸ªå˜ä½“å±æ€§åŒæ—¶æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶åº”ç”¨çš„é¢å¤–CSSç±»åã€‚
   2. **é»˜è®¤å˜ä½“ï¼ˆ
      `Default Variants`
      ï¼‰**
      ï¼šä¸€ä¸ªæ•°ç»„æˆ–è€…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡å®šäº†å½“æ²¡æœ‰æä¾›ç‰¹å®šå˜ä½“å±æ€§å€¼æ—¶åº”ä½¿ç”¨çš„é»˜è®¤å€¼ã€‚

#### 4.3 å®šä¹‰ `CVA` å‡½æ•°

##### 4.3.1 åŸºç¡€ä½¿ç”¨

> ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ CVA åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å˜ä½“çš„æŒ‰é’®ç»„ä»¶ã€‚

4.3.1.1 ç¬¬ä¸€æ­¥

`button.tsx`

```tsx
import React from "react";
import { cva } from "class-variance-authority";

export type ButtonProps = {
    intent: "primary" | "secondary" | "danger";
    size: "small" | "medium" | "large";
    children: React.ReactNode;
}

/** 
 * å®šä¹‰æ ·å¼å˜ä½“ buttonVariants
 *  cvaï¼šæ ¸å¿ƒå‡½æ•°ï¼Œç”¨äºå®šä¹‰æ ·å¼å˜ä½“ã€‚
 *  variantsï¼šå®šä¹‰ç»„ä»¶çš„å˜ä½“ï¼ˆå¦‚ intent å’Œ sizeï¼‰ã€‚
 *  defaultVariantsï¼šè®¾ç½®é»˜è®¤çš„å˜ä½“å€¼ã€‚
*/
const buttonVariants = cva("button", {
    variants: {
        intent: {
            primary: "bg-blue-500 text-white",
            secondary: "bg-gray-500 text-white",
            danger: "bg-red-500 text-white",
        },
        size: {
            small: "text-sm py-1 px-2",
            medium: "text-base py-2 px-4",
            large: "text-lg py-3 px-6",
        },
    },
    defaultVariants: {
        intent: "primary",
        size: "medium",
    },
});

/** 
 * æŒ‰é’®ç»„ä»¶ 
 *  buttonVariants({ intent, size })ï¼šæ ¹æ®ä¼ å…¥çš„ intent å’Œ size åŠ¨æ€ç”Ÿæˆç±»åã€‚
*/
const Button = ({ intent, size, children }: ButtonProps) => {
    return (
        <button className={buttonVariants({ intent, size })}>
            {children}
        </button>
    );
};

export default Button;

```

4.3.2.1.2 ç¬¬äºŒæ­¥ ä½¿ç”¨
`botton`
æŒ‰é’®

æ ¹æ®ä¼ å…¥çš„ intent å’Œ size åŠ¨æ€ç”Ÿæˆç±»åã€‚

```tsx
import Button from './botton.tsx'

function App() {
  return (
    <div>
      {/* button bg-blue-500 text-white text-base py-2 px-4 */}
      <Button intent="primary" size="medium">Primary Button</Button>
      {/* button bg-gray-500 text-white text-sm py-1 px-2500 */}
      <Button intent="secondary" size="small">Secondary Button</Button>
      {/* æ ·å¼ä¸º: button bg-red-500 text-white text-lg py-3 px-6 */}
      <Button intent="danger" size="large">Danger Button</Button>
    </div>
  );
}

export default App;

```

##### 4.3.1.2 é«˜çº§ç”¨æ³•

###### 4.3.1.2.1 ç¬¬ä¸€æ­¥ï¼š å¤åˆå˜ä½“, ä½ å¯ä»¥å®šä¹‰å¤šä¸ªå˜ä½“çš„ç»„åˆ!

`button.tsx`

```jsx
import React from "react";
import { cva } from "class-variance-authority";

export type ButtonProps = {
    intent: "primary" | "secondary"
    disabled: boolean
    children: React.ReactNode
}

/** 
 * å®šä¹‰æ ·å¼å˜ä½“ 
 *  cva ç¬¬ä¸€ä¸ªå‚æ•°ï¼š"button" æ˜¯åŸºç¡€ç±»åï¼Œç”¨äºå®šä¹‰ç»„ä»¶çš„é»˜è®¤æ ·å¼(å¦‚æœæœ‰å¤šä¸ªç”¨ç©ºæ ¼åˆ†å³å¯)ã€‚
 *  variantsï¼šå®šä¹‰ç»„ä»¶çš„å˜ä½“ï¼ˆå¦‚ intent å’Œ sizeï¼‰ã€‚
 *  defaultVariantsï¼šè®¾ç½®é»˜è®¤çš„å˜ä½“å€¼ã€‚
 *  compoundVariantsï¼šç”¨äºå®šä¹‰å¤šä¸ªå˜ä½“çš„ç»„åˆæ ·å¼ã€‚   
*/

const buttonVariants = cva("button", {
    variants: {
        intent: {
            primary: "bg-blue-500 text-white",
            secondary: "bg-gray-500 text-white",
        },
        outlined: {
            true: "border-2",
        },
    },
    compoundVariants: [
        {
            intent: "primary",
            outlined: false,
            class: "border-blue-500",
        },
        {
            intent: "secondary",
            outlined: false,
            class: "border-gray-500",
        },
    ],
});

/** 
 * æŒ‰é’®ç»„ä»¶ 
 *  buttonVariants({ intent, disabled })ï¼šæ ¹æ®ä¼ å…¥çš„ intent å’Œ size åŠ¨æ€ç”Ÿæˆç±»åã€‚
 *  å½“ intent="secondary" æ—¶ï¼Œdisabled=false æ—¶, å®ƒä¼šæ·»åŠ  border-gray-500 ç±»ååˆ°ç»“æœæ•°ç»„ä¸­; 
*/

const Button = ({ intent, disabled }: ButtonProps) => {
    return (
        <button
            className={buttonVariants({
                intent,
                outlined: disabled,
            })}
        >
            Click Me
        </button>
    );
};

export default Button;

```

###### 4.3.1.2.2 ç¬¬äºŒæ­¥

æ ¹æ®ä¼ å…¥çš„ intent å’Œ disabledåŠ¨æ€ç”Ÿæˆç±»åã€‚

```tsx
import Button from './botton.tsx'

function App() {
  return (
    <div>
      {/* 
        å½“ intent="secondary" æ—¶ï¼Œdisabled=true æ—¶ï¼Œæ ·å¼ä¸ºï¼š
         button bg-blue-500 text-white border-2 
      */}
      <Button intent="primary" disabled>Primary Button</Button>
      {/* 
        å½“ intent="secondary" æ—¶ï¼Œdisabled=false æ—¶ï¼Œæ ·å¼ä¸º:
          button bg-gray-500 text-white border-gray-500 
      */}
      <Button intent="secondary"disabled={false}>Secondary Button</Button>
    </div>
  );
}

export default App;

```

### 5. ä¼˜ç‚¹

1. **å£°æ˜å¼ API**
   ï¼šé€šè¿‡
   `variants`
   å’Œ
   `defaultVariants`
   å®šä¹‰æ ·å¼ï¼Œä»£ç æ›´æ¸…æ™°ã€‚
2. **ç±»å‹å®‰å…¨**
   ï¼šå¦‚æœä½ ä½¿ç”¨ TypeScriptï¼ŒCVA å¯ä»¥æä¾›å®Œæ•´çš„ç±»å‹æ¨æ–­ã€‚
3. **çµæ´»æ€§**
   ï¼šæ”¯æŒå¤åˆå˜ä½“å’ŒåŠ¨æ€ç±»åï¼Œé€‚åˆå¤æ‚çš„ UI ç»„ä»¶ã€‚

### 6. æ€»ç»“

1. Class Variance Authority (CVA) æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆç®¡ç†ç»„ä»¶çš„æ ·å¼å˜ä½“ã€‚
2. å®ƒå¯ä»¥å¸®åŠ©ä½ å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
3. å¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªéœ€è¦å¤šç§æ ·å¼å˜ä½“çš„ç»„ä»¶åº“ï¼ŒCVA æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ï¼
4. å¦‚æœä½ æœ‰æ›´å¤šé—®é¢˜ï¼Œæ¬¢è¿éšæ—¶é—®æˆ‘ï¼ğŸ˜Š