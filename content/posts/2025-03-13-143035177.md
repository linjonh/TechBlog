---
layout: post
title: "前端-使用Uniapp与安卓IOS混合交互开发"
date: 2025-03-13 17:41:29 +0800
description: "场景描述： 公司经常为了加快项目的推进，常常需要咱们前端写一些H5页面嵌入到原生的APP开发当中去，例如调用设备的摄像头、地理位置、文件系统、显示原生的对话框、提示框等，以提供更好的用户体验。疑难问题：如何和安卓/IOS产生交互...."
keywords: "前端 使用Uniapp与安卓/IOS混合交互开发"
categories: ['Vue', 'App']
tags: ['前端', 'App', 'Android']
artid: "143035177"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143035177
    alt: "前端-使用Uniapp与安卓IOS混合交互开发"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143035177
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143035177
cover: https://bing.ee123.net/img/rand?artid=143035177
image: https://bing.ee123.net/img/rand?artid=143035177
img: https://bing.ee123.net/img/rand?artid=143035177
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端 使用Uniapp与安卓/IOS混合交互开发
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     场景描述： 公司经常为了加快项目的推进，常常需要咱们前端写一些H5页面嵌入到原生的APP开发当中去，例如
     <br/>
     调用设备的摄像头、地理位置、文件系统、显示原生的对话框、提示框等，以提供更好的用户体验。
     <br/>
     疑难问题：如何和安卓/IOS产生交互…
    </p>
    <h3>
     <a id="_3">
     </a>
     前言：
    </h3>
    <p>
     <code>
      uni.getSystemInfoSync().platform
     </code>
     ：Uni-app 框架中用于获取当前运行平台信息的同步方法。它返回一个字符串，表示当前应用运行的操作系统平台。
    </p>
    <blockquote>
     <p>
      <code>
       uni.getSystemInfoSync().platform
      </code>
      获取平台信息
      <br/>
      返回值可以是以下几种之一：
      <br/>
      android：表示当前设备是安卓系统。
      <br/>
      ios：表示当前设备是iOS系统。
      <br/>
      devtools：表示当前是在开发者工具中运行。
      <br/>
      其他平台：如微信小程序、H5等，具体取决于Uni-app支持的平台。
     </p>
    </blockquote>
    <h3>
     <a id="H5_13">
     </a>
     安卓与H5混合开发流程
    </h3>
    <ol>
     <li>
      安卓
      <code>
       WebView
      </code>
      注入
      <br/>
      <code>
       window.安卓提供方法名
      </code>
      调用 Android 原生方法并传递参数（如 android.args）是通过 WebView 和 JavaScript Bridge 实现的。
      <br/>
      安卓人员在
      <code>
       WebView
      </code>
      中注入一个 Java 对象（即代码中的
      <code>
       Android
      </code>
      ），并通过
      <code>
       addJavascriptInterface
      </code>
      方法将该对象暴露给
      <code>
       JavaScript
      </code>
      环境。
     </li>
    </ol>
    <pre><code class="prism language-javascript">    <span class="token comment">// 在 Android 原生代码中设置 WebView 并注入 JavaScript Interface</span>
	WebView webView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>webview<span class="token punctuation">)</span><span class="token punctuation">;</span>
	webView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 创建一个 Java 类来处理 JavaScript 的调用</span>
	webView<span class="token punctuation">.</span><span class="token function">addJavascriptInterface</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebAppInterface</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Android"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 安卓类的名称Android</span>
	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebAppInterface</span> <span class="token punctuation">{<!-- --></span>
	    Context mContext<span class="token punctuation">;</span>
	    <span class="token function">WebAppInterface</span><span class="token punctuation">(</span><span class="token parameter">Context c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        mContext <span class="token operator">=</span> c<span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	    @JavascriptInterface <span class="token comment">// 该类包含需要暴露给 JavaScript 的方法，</span>
	    <span class="token keyword">public</span> String <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">String args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//方法名称</span>
	        <span class="token comment">// 处理传入的参数并返回结果</span>
	        <span class="token keyword">return</span> <span class="token string">"Result from Android: "</span> <span class="token operator">+</span> args<span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      前端
      <code>
       JavaScript
      </code>
      调用
      <br/>
      window.
      <code>
       className
      </code>
      [
      <code>
       android.name
      </code>
      方法名 ] (
      <code>
       android.args
      </code>
      传递参数)
     </li>
    </ol>
    <pre><code class="prism language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>rentalAndroid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> window<span class="token punctuation">.</span>rentalAndroid<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token string">'someArgument'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用方法类并传参</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 "Result from Android: someArgument"</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'获取 android 事件对象失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="IOSH5_46">
     </a>
     IOS与H5混合开发流程
    </h3>
    <ol>
     <li>
      IOS设置
      <code>
       WKWebView
      </code>
      和
      <code>
       WKScriptMessageHandler
      </code>
      <br/>
      首先，在 iOS 原生代码中设置
      <code>
       WKWebView
      </code>
      并注册
      <code>
       WKScriptMessageHandler
      </code>
      ，以便处理来自
      <code>
       JavaScript
      </code>
      的消息。
     </li>
    </ol>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> WebKit
<span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token operator">:</span> UIViewController<span class="token punctuation">,</span> WKScriptMessageHandler <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> <span class="token literal-property property">webView</span><span class="token operator">:</span> WKWebView<span class="token operator">!</span>
    override func <span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 创建 WKWebView 配置</span>
        <span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token function">WKWebViewConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        config<span class="token punctuation">.</span>userContentController<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"nativeHandler"</span><span class="token punctuation">)</span>
        <span class="token comment">// 初始化 WKWebView</span>
        webView <span class="token operator">=</span> <span class="token function">WKWebView</span><span class="token punctuation">(</span>frame<span class="token operator">:</span> self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>frame<span class="token punctuation">,</span> <span class="token literal-property property">configuration</span><span class="token operator">:</span> config<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">addSubview</span><span class="token punctuation">(</span>webView<span class="token punctuation">)</span>
        <span class="token comment">// 加载 H5 页面</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">(</span>string<span class="token operator">:</span> <span class="token string">"https://example.com"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// H5页面链接</span>
            <span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token function">URLRequest</span><span class="token punctuation">(</span>url<span class="token operator">:</span> url<span class="token punctuation">)</span>
            webView<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 处理来自 JavaScript 的消息</span>
    func <span class="token function">userContentController</span><span class="token punctuation">(</span><span class="token parameter">_ userContentController<span class="token operator">:</span> WKUserContentController<span class="token punctuation">,</span> didReceive message<span class="token operator">:</span> WKScriptMessage</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> message<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">"nativeHandler"</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//IOS定义方法名称</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> args <span class="token operator">=</span> message<span class="token punctuation">.</span>body <span class="token keyword">as</span><span class="token operator">?</span> <span class="token punctuation">[</span>String<span class="token operator">:</span> Any<span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 处理传入的参数</span>
                <span class="token function">handleNativeCall</span><span class="token punctuation">(</span>args<span class="token operator">:</span> args<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 处理具体的原生方法调用</span>
    func <span class="token function">handleNativeCall</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token operator">:</span> Any<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> action <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token string">"action"</span><span class="token punctuation">]</span> <span class="token keyword">as</span><span class="token operator">?</span> String <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">switch</span> action <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token string">"doSomething"</span><span class="token operator">:</span> <span class="token comment">// 定义类别</span>
                <span class="token keyword">if</span> <span class="token keyword">let</span> param <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token string">"param"</span><span class="token punctuation">]</span> <span class="token keyword">as</span><span class="token operator">?</span> String <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 处理参数并执行相应操作</span>
                    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Received parameter: \(param)"</span><span class="token punctuation">)</span>
                    <span class="token comment">// 返回结果给 JavaScript</span>
                    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">"Result from iOS: \(param)"</span>
                    webView<span class="token punctuation">.</span><span class="token function">evaluateJavaScript</span><span class="token punctuation">(</span><span class="token string">"window.postMessage('\(result)', '*')"</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Unknown action: \(action)"</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <ol start="2">
     <li>
      前端
      <code>
       JavaScript
      </code>
      调用
      <br/>
      在前端代码中，你可以通过
      <code>
       window.webkit.messageHandlers
      </code>
      发送消息到原生代码。
     </li>
    </ol>
    <pre><code class="prism language-javascript"> <span class="token keyword">const</span> messageBody <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> ios<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token literal-property property">param</span><span class="token operator">:</span> ios<span class="token punctuation">.</span>args <span class="token operator">||</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 发送消息到原生代码</span>
window<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span>messageHandlers<span class="token punctuation">.</span>nativeHandler<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>messageBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="jsIOS_108">
     </a>
     使用js封装调用安卓、IOS方法
    </h3>
    <blockquote>
     <p>
      <code>
       platformHandler
      </code>
      是一个封装方法，接收一个对象参数，包含以下属性：
      <br/>
      android: 对应安卓平台的方法配置。
      <br/>
      ios: 对应iOS平台的方法配置。
      <br/>
      success: 成功回调函数。
      <br/>
      fail: 失败回调函数。
     </p>
    </blockquote>
    <blockquote>
     <p>
      如果是Android平台：
      <br/>
      检查是否提供了有效的Android方法配置 (
      <code>
       android.name
      </code>
      )。
      <br/>
      使用
      <code>
       window.rentalAndroid
      </code>
      调用Android原生方法，并传递参数 (
      <code>
       android.args
      </code>
      )。
      <br/>
      如果成功调用，将结果传递给 success 回调；否则，显示错误提示并执行 fail 回调。
     </p>
    </blockquote>
    <blockquote>
     <p>
      如果是iOS平台：
      <br/>
      检查是否提供了有效的iOS方法配置 (
      <code>
       ios.name
      </code>
      )。
      <br/>
      使用
      <code>
       window.webkit.messageHandlers
      </code>
      调用iOS原生方法，并传递参数 (
      <code>
       ios.args
      </code>
      )。
      <br/>
      如果成功调用，执行 success 回调；否则，显示错误提示并执行 fail 回调。
     </p>
    </blockquote>
    <h3>
     <a id="1__125">
     </a>
     1. 封装方法+平台判断
    </h3>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> platform <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>platform<span class="token punctuation">;</span> <span class="token comment">// 获取平台信息</span>
<span class="token comment">// 判断平台</span>
<span class="token keyword">function</span> <span class="token function">isIOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> platform <span class="token operator">===</span> <span class="token string">'ios'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">isAndroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> platform <span class="token operator">===</span> <span class="token string">'android'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">platformHandler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span>
	android<span class="token punctuation">,</span>
	ios<span class="token punctuation">,</span>
	success<span class="token punctuation">,</span>
	fail
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isIOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// console.log('调用ios函数')</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ios <span class="token operator">||</span> <span class="token operator">!</span>ios<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> $mHelper<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'未添加相应的ios方法'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>webkit <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span>messageHandlers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			window<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span>messageHandlers<span class="token punctuation">[</span>ios<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>ios<span class="token punctuation">.</span>args <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			$mHelper<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'获取ios事件对象失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>fail<span class="token punctuation">)</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// document.location = 'buyCar://appointment?arg1=1号参数&amp;arg2=2号参数'</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isAndroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>android <span class="token operator">||</span> <span class="token operator">!</span>android<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> $mHelper<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'未添加相应的android方法'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>rentalAndroid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// rentalAndroid 安卓命名定义</span>
		<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">(</span>android<span class="token punctuation">.</span>args <span class="token operator">||</span> android<span class="token punctuation">.</span>args <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> window<span class="token punctuation">.</span>rentalAndroid<span class="token punctuation">[</span>android<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token operator">:</span> window<span class="token punctuation">.</span>rentalAndroid<span class="token punctuation">[</span>android<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token function">success</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			$mHelper<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'获取android事件对象失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>fail<span class="token punctuation">)</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 单独暴露</span>
<span class="token keyword">export</span> platformHandler
</code></pre>
    <h3>
     <a id="2__167">
     </a>
     2. 调用封装的方法
    </h3>
    <pre><code class="prism language-javascript">	<span class="token function">platformHandler</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	   	<span class="token literal-property property">android</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
	   		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mapNavigation'</span><span class="token punctuation">,</span> <span class="token comment">// 方法名</span>
	   		<span class="token literal-property property">args</span><span class="token operator">:</span> startString <span class="token comment">// 参数-- 需要安卓定义好格式，可能不能传递对象结构数据等</span>
	   	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	   	<span class="token literal-property property">ios</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
	   		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mapNavigation'</span><span class="token punctuation">,</span>
	   		<span class="token literal-property property">args</span><span class="token operator">:</span> startString 	
	    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="3__179">
     </a>
     3. 扩展
    </h3>
    <p>
     全局挂载该封装文件的方法
     <code>
      platformHandler
     </code>
    </p>
    <ol>
     <li>
      直接挂载
      <br/>
      在 Vue 项目的入口文件（通常是 main.js 或 main.ts）中，将对应的方法挂载到 Vue 的原型上，使其成为全局可用的方法。
      <br/>
      <strong>
       直接挂载
      </strong>
      ：是指在 Vue 的原型（
      <code>
       Vue.prototype
      </code>
      ）上直接添加属性或方法，而不需要通过插件机制。
      <br/>
      <code>
       main.js
      </code>
     </li>
    </ol>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> platformHandler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/untils/platformFn'</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$platformHandler  <span class="token operator">=</span> platformHandler 
</code></pre>
    <ol start="2">
     <li>
      插件注册（
      <code>
       Vue.use
      </code>
      ）引入全局
      <br/>
      封装的方法相当于插件，可以通过
      <code>
       Vue.use(more)
      </code>
      将插件注册到
      <code>
       Vue
      </code>
      实例中，使其在全局范围内可用。
     </li>
    </ol>
    <blockquote>
     <p>
      插件：通常是一个对象，包含一个函数。函数方法会在 Vue.use 调用时执行。
     </p>
    </blockquote>
    <h6>
     <a id="__192">
     </a>
     ① 定义一个插件
    </h6>
    <p>
     <code>
      more.js
     </code>
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">isIOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> platform <span class="token operator">===</span> <span class="token string">'ios'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">isAndroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> platform <span class="token operator">===</span> <span class="token string">'android'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> defalut <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$isIOS <span class="token operator">=</span> <span class="token function">isIOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$isAndroid <span class="token operator">=</span> <span class="token function">isAndroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$iosStatusHeight <span class="token operator">=</span> <span class="token number">44</span><span class="token punctuation">;</span> <span class="token comment">// px</span>
	<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$androidStatusHeight <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// px</span>
<span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="__208">
     </a>
     ② 注册插件
    </h6>
    <p>
     在 Vue 项目的入口文件（如 main.js）中使用 Vue.use 注册插件。
     <br/>
     <code>
      main.js
     </code>
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> more <span class="token keyword">from</span> <span class="token string">'/untils/more'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>more<span class="token punctuation">)</span>
</code></pre>
    <ol start="3">
     <li>
      引用该方法
     </li>
    </ol>
    <pre><code class="prism language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$platformHandler</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
   	<span class="token literal-property property">android</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mapNavigation'</span><span class="token punctuation">,</span> <span class="token comment">// 方法名</span>
   		<span class="token literal-property property">args</span><span class="token operator">:</span> startString <span class="token comment">// 参数-- 需要安卓定义好格式，可能不能传递对象结构数据等</span>
   	<span class="token punctuation">}</span><span class="token punctuation">,</span>
   	<span class="token literal-property property">ios</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mapNavigation'</span><span class="token punctuation">,</span>
   		<span class="token literal-property property">args</span><span class="token operator">:</span> startString 	
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$isIOS
<span class="token keyword">this</span><span class="token punctuation">.</span>$iosStatusHeight 
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/661356c5c53f4408ace651d0b94c000d.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e63:73646e2e6e65742f70696b617169755f6b6f6d6f726562692f:61727469636c652f64657461696c732f313433303335313737" class_="artid" style="display:none">
 </p>
</div>


