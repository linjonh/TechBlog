---
layout: post
title: "Unity实现Android源生平台蓝牙BLE4.0数据传输一"
date: 2018-01-24 11:33:50 +0800
description: "Unity3D是由Unity Technologies开发的一个让玩家轻松创建诸如三维视频游戏、建筑"
keywords: "unity 安卓蓝牙"
categories: ['Unity']
tags: ['蓝牙', 'Unity', 'Unity', 'Ble']
artid: "79148750"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=79148750
    alt: "Unity实现Android源生平台蓝牙BLE4.0数据传输一"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=79148750
featuredImagePreview: https://bing.ee123.net/img/rand?artid=79148750
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Unity实现Android源生平台蓝牙BLE4.0数据传输(一)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     Unity3D是由Unity Technologies开发的一个让玩家轻松创建诸如三维视频游戏、建筑可视化、实时三维动画等类型互动内容的多平台的综合型游戏开发工具，是一个全面整合的专业游戏引擎。虽然是游戏引擎,不过现在目前还有很多用来做AR、VR、MR等内容.这样就少不了要与智能硬件配合交互,智能硬件由于便利性都大多数采用无线连接,无线连接主流一般是WIFI、Bluetooth蓝牙等方式.其中蓝牙BLE4.0以更省电、成本低、3毫秒低延迟、超长有效连接距离、AES-128加密等优势,取得大家的青睐,今天就来说说用Unity实现BLE4.0的数据传输.
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <br style="margin:0px; padding:0px"/>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255)">
     Unity想要使用Android源生控件或者功能首先我们要来了
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      AndroidJavaClass、AndroidJavaObject、AndroidJavaProxy
     </span>
     三个类.
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255)">
     其中
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      AndroidJavaClass
     </span>
     一般调用静态函数跟获取静态字段使用这个,如果做过unity 跟android交互的朋友们应该见过这句
    </p>
    <pre><code class="language-csharp">unityActivity = new AndroidJavaClass("com.unity3d.player.UnityPlayer").GetStatic&lt;AndroidJavaObject&gt;("currentActivity");</code></pre>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px">
      这里先new了一个
      <span style="margin:0px; padding:0px">
       AndroidJavaClass对象然后调用
       <span style="margin:0px; padding:0px">
        GetStatic获取静态字段
        <span style="margin:0px; padding:0px">
         currentActivity
        </span>
       </span>
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      AndroidJavaObject
      <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
       一般是Java实例对象用来调用Java的实例函数跟获取实例字段.
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
       比如 我要建立一个Java的String对象
      </span>
     </span>
    </p>
    <pre><code class="language-csharp"> AndroidJavaObject javaString = new AndroidJavaObject("java.lang.String", text); </code></pre>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
       <span style="color:rgb(0,0,0); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; font-size:14px; text-align:justify; text-indent:28px; background-color:rgb(255,255,255)">
        我再获取这个String对象的字符长度
       </span>
      </span>
     </span>
    </p>
    <pre><code class="language-csharp">var sLenth = javaString.Call&lt;int&gt;("length");</code></pre>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="text-indent:2em; margin:0px; padding:0px; color:rgb(255,76,65)">
      AndroidJavaProxy
     </span>
     <span style="text-indent:2em; margin:0px; padding:0px">
      <span style="margin:0px; padding:0px">
       是用来实现Java的接口
       <span style="margin:0px; padding:0px">
        interface.
        <span style="margin:0px; padding:0px">
         这里引用Unity官方文档样例
        </span>
       </span>
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="text-indent:2em; margin:0px; padding:0px">
      <span style="margin:0px; padding:0px">
       <span style="margin:0px; padding:0px">
        <span style="margin:0px; padding:0px">
        </span>
       </span>
      </span>
     </span>
    </p>
    <pre><code class="language-csharp">private static DateTime selectedDate = DateTime.Now; </code></pre>
    <pre><code class="language-csharp"> public class DateCallback : AndroidJavaProxy
 {
        public DateCallback() :base("android.app.DatePickerDialog$OnDateSetListener") { }

        void onDateSet(AndroidJavaObject view, int year, int monthOfYear, int dayOfMonth)
        {
            selectedDate = new DateTime(year, monthOfYear + 1, dayOfMonth);
        }
 }</code></pre>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     实现接口以后Android 调用接口函数的时候会调用Unity端的接口实现.但函数名应该保持与Java接口函数一致.
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <br/>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     其实能使用
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      AndroidJavaClass
      <span style="margin:0px; padding:0px">
       、
      </span>
      <span style="margin:0px; padding:0px">
       AndroidJavaObject
       <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
        类已经能使用Android 大部分功能.
       </span>
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      <span style="margin:0px; padding:0px">
       <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
        <br style="margin:0px; padding:0px"/>
       </span>
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      <span style="margin:0px; padding:0px">
       <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
        下篇我们来写具体的BLE4.0蓝牙数据传输实现.
       </span>
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      <span style="margin:0px; padding:0px">
       <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
        有问题的朋友可以关注我的微信订阅号给我留言
       </span>
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <span style="margin:0px; padding:0px; color:rgb(255,76,65)">
      <span style="margin:0px; padding:0px">
       <span style="margin:0px; padding:0px; color:rgb(0,0,0)">
        <img alt="" height="200" src="https://img-blog.csdn.net/20180124140612874?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMTU1MDc1NTk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" width="200"/>
       </span>
      </span>
     </span>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <a href="http://blog.csdn.net/qq_15507559/article/details/79149073" rel="noopener noreferrer" target="_blank">
      Unity实现Android源生平台蓝牙BLE4.0数据传输(二)
     </a>
     <br/>
    </p>
    <p style="margin-bottom:0px; padding-top:0px; padding-bottom:0px; clear:both; min-height:1em; color:rgb(62,62,62); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; background-color:rgb(255,255,255); text-indent:2em">
     <a href="http://blog.csdn.net/qq_15507559/article/details/79149801" rel="noopener noreferrer" target="_blank">
      Unity实现Android源生平台蓝牙BLE4.0数据传输(三)
     </a>
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3135353037353539:2f61727469636c652f64657461696c732f3739313438373530" class_="artid" style="display:none">
 </p>
</div>


