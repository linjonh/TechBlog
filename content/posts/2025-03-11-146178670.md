---
layout: post
title: "从0到1入门Docker"
date: 2025-03-11 17:18:46 +0800
description: "Docker"
keywords: "docker run命令 e是必须满足的格式吗"
categories: ['微服务']
tags: ['运维', '容器', 'Docker']
artid: "146178670"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146178670
    alt: "从0到1入门Docker"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146178670
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146178670
cover: https://bing.ee123.net/img/rand?artid=146178670
image: https://bing.ee123.net/img/rand?artid=146178670
img: https://bing.ee123.net/img/rand?artid=146178670
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     从0到1入门Docker
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、快速入门
    </h2>
    <p>
     Docker run命令中的常见参数
    </p>
    <blockquote>
     <ul>
      <li>
       <strong>
        -d
       </strong>
       ：让容器后台运行
      </li>
      <li>
       <strong>
        --name
       </strong>
       ：给容器命名（唯一）
      </li>
      <li>
       <strong>
        -e
       </strong>
       ：环境变量
      </li>
      <li>
       <strong>
        -p
       </strong>
       ：宿主机端口映射到容器内端口
      </li>
      <li>
       <strong>
        镜像名称
       </strong>
       结构：Repository ：TAG（镜像名：版本号）
      </li>
     </ul>
    </blockquote>
    <h2>
     二、Docker基础
    </h2>
    <h3>
     1.常见命令
    </h3>
    <p>
     Docker最常见的命令就是
     <strong>
      操作镜像，容器
     </strong>
     的命令
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/c38957c018f9473f9bfd6eb2bcdd47f2.png"/>
    </p>
    <h3>
     2.数据卷
    </h3>
    <h4>
     （1）介绍
    </h4>
    <p>
     <strong>
      数据卷（volume）
     </strong>
     是一个虚拟目录，是
     <strong>
      容器内目录
     </strong>
     与
     <strong>
      宿主机目录
     </strong>
     之间映射的桥梁，方便我们操作容器内文件，或者方便迁移容器产生的数据
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/74ad9a147ae54ae19435c2cf8342797c.png"/>
    </p>
    <h4>
     （2）数据卷常见命令
    </h4>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/468443684ccf4380bb5453375cafcf6d.png"/>
    </p>
    <h4>
     （3）如何挂载数据卷
    </h4>
    <p>
     在
     <strong>
      创建
     </strong>
     容器时，使用
    </p>
    <blockquote>
     <p>
      <strong>
       docker run -v 数据卷名：容器内目录
      </strong>
     </p>
    </blockquote>
    <p>
     完成挂载，在容器创建时，如果发现挂载的数据卷不存在时，会
     <strong>
      自动
     </strong>
     创建
    </p>
    <h4>
     （4）本地目录挂载
    </h4>
    <blockquote>
     <p>
      <strong>
       docker run -v 本地目录：容器内目录
      </strong>
     </p>
    </blockquote>
    <p>
     可以完成本地目录挂载，本地目录必须以“
     <strong>
      /
     </strong>
     ”或“
     <strong>
      ./
     </strong>
     ”开头，如果直接以名称开头，会被识别为数据卷而非本地目录
    </p>
    <h3>
     3.自定义镜像
    </h3>
    <p>
     镜像就是包含了应用程序，程序运行的系统函数库，运行配置等文件的文件包。构建镜像的过程其实就是把上述文件
     <strong>
      分层打包
     </strong>
     的过程。
    </p>
    <h4>
     （1）镜像结构
    </h4>
    <blockquote>
     <p>
      ①
      <strong>
       层
      </strong>
      （Layer）
     </p>
     <p>
      添加安装包，依赖，配置等，每次操作都形成新的一层
     </p>
     <p>
      ②
      <strong>
       基础镜像
      </strong>
      （BaseImage）
     </p>
     <p>
      应用依赖的系统函数库，环境，配置，文件等
     </p>
     <p>
      ③
      <strong>
       入口
      </strong>
      （Entrypoint）
     </p>
     <p>
      镜像运行入口，一般是程序启动的脚本和参数
     </p>
    </blockquote>
    <h4>
     （2）Dockerfile
    </h4>
    <p>
     <strong>
      Dockerfile
     </strong>
     就是一个文本文件，其中包含一个个的
     <strong>
      指令（Instruction）
     </strong>
     ，用指令来
     <strong>
      描述
     </strong>
     要执行什么操作来构建镜像。将来Docker可以根据Dockerfile帮我们构建镜像，常见指令如下：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/4e5ae959b74f48ceac6e2a862a4052e8.png"/>
    </p>
    <p>
     示例：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/800a80520b5d477ab07f59b9b0e779a2.png"/>
    </p>
    <p>
     当编写好了Dockerfile，可以利用下面命令来构建镜像：
    </p>
    <blockquote>
     <p>
      <strong>
       docker build -t 镜像名 Dockerfile目录  .
      </strong>
     </p>
    </blockquote>
    <p>
     其中：
    </p>
    <blockquote>
     <ul>
      <li>
       <strong>
        -t
       </strong>
       ：是给镜像起名，格式依然是repository：tag，不指定tag时，默认为latest
      </li>
      <li>
       <strong>
        .
       </strong>
       ：是指定Dockerfile所在目录，如果就在当前目录，则指定为“.”
      </li>
     </ul>
    </blockquote>
    <h3>
     4.容器网络互连
    </h3>
    <p>
     默认情况下，所有容器都是以bridge方式连接到Docker的一个虚拟网桥上：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/fe71ad8185374f40a579327e4c1151be.png"/>
    </p>
    <p>
     加入
     <strong>
      自定义
     </strong>
     网络的容器才可以通过
     <strong>
      容器名
     </strong>
     互相访问，Docker的网络操作命令如下：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/e928b804c1b141969358144ebe091632.png"/>
    </p>
    <h2>
     三、项目部署
    </h2>
    <h3>
     1.Docker Compose
    </h3>
    <p>
     Docker Compose通过一个单独的
     <strong>
      docker-compose.yml
     </strong>
     模板文件（YAML文件）来定义一组相关联的应用容器，帮助我们实现
     <strong>
      多个相互关联的Docker容器的快速部署
     </strong>
     。
    </p>
    <p>
     示例：
    </p>
    <pre><code class="hljs">version: "3.8"

services:
  mysql:
    image: mysql
    container_name: mysql
    ports:
      - "3306:3306"
    environment:
      TZ: Asia/Shanghai
      MYSQL_ROOT_PASSWORD: 123
    volumes:
      - "./mysql/conf:/etc/mysql/conf.d"
      - "./mysql/data:/var/lib/mysql"
      - "./mysql/init:/docker-entrypoint-initdb.d"
    networks:
      - hm-net
  hmall:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: hmall
    ports:
      - "8080:8080"
    networks:
      - hm-net
    depends_on:
      - mysql
  nginx:
    image: nginx
    container_name: nginx
    ports:
      - "18080:18080"
      - "18081:18081"
    volumes:
      - "./nginx/nginx.conf:/etc/nginx/nginx.conf"
      - "./nginx/html:/usr/share/nginx/html"
    depends_on:
      - hmall
    networks:
      - hm-net
networks:
  hm-net:
    name: hmall</code></pre>
    <h3>
     2.命令格式
    </h3>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/37e86d4fdea0411099d0c9963c46e1e6.png"/>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f37393639303830352f:61727469636c652f64657461696c732f313436313738363730" class_="artid" style="display:none">
 </p>
</div>


