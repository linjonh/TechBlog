---
layout: post
title: "淘宝母婴购物数据可视化分析基于脱敏公开数据集"
date: 2025-03-08 15:31:02 +0800
description: "思路，过程，收获"
keywords: "淘宝母婴数据分析"
categories: ['未分类']
tags: ['数据可视化', '数据分析', '学习笔记', 'Python']
artid: "146116151"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146116151
    alt: "淘宝母婴购物数据可视化分析基于脱敏公开数据集"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146116151
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146116151
cover: https://bing.ee123.net/img/rand?artid=146116151
image: https://bing.ee123.net/img/rand?artid=146116151
img: https://bing.ee123.net/img/rand?artid=146116151
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     淘宝母婴购物数据可视化分析（基于脱敏公开数据集）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_1">
     </a>
     一、前言
    </h2>
    <p>
     <em>
      以下是“阿里天池”上的比赛介绍，数据集也是源自于那里的公开数据集，数据经过脱敏处理，避免了用户隐私问题。下面是数据集和任务的介绍：
     </em>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1ac6a34b213042f78aa20940f6eba1b9.png"/>
    </p>
    <h2>
     <a id="_6">
     </a>
     二、数据导入与数据预处理
    </h2>
    <pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token comment"># 导入交易信息表</span>
trade_inf <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"C:\Users\31049\Desktop\数据分析\淘宝母婴购物数据可视化分析\tianchi_mum_baby_trade_history.csv"</span><span class="token punctuation">)</span>
<span class="token comment"># 查看前 10行数据</span>
trade_inf<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre>
    <div>
    </div>
    <table border="1" class="dataframe">
     <thead>
      <tr>
       <th>
       </th>
       <th>
        user_id
       </th>
       <th>
        auction_id
       </th>
       <th>
        category_2
       </th>
       <th>
        category_1
       </th>
       <th>
        buy_mount
       </th>
       <th>
        day
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <th>
        0
       </th>
       <td>
        786295544
       </td>
       <td>
        41098319944
       </td>
       <td>
        50014866
       </td>
       <td>
        50022520
       </td>
       <td>
        2
       </td>
       <td>
        20140919
       </td>
      </tr>
      <tr>
       <th>
        1
       </th>
       <td>
        532110457
       </td>
       <td>
        17916191097
       </td>
       <td>
        50011993
       </td>
       <td>
        28
       </td>
       <td>
        1
       </td>
       <td>
        20131011
       </td>
      </tr>
      <tr>
       <th>
        2
       </th>
       <td>
        249013725
       </td>
       <td>
        21896936223
       </td>
       <td>
        50012461
       </td>
       <td>
        50014815
       </td>
       <td>
        1
       </td>
       <td>
        20131011
       </td>
      </tr>
      <tr>
       <th>
        3
       </th>
       <td>
        917056007
       </td>
       <td>
        12515996043
       </td>
       <td>
        50018831
       </td>
       <td>
        50014815
       </td>
       <td>
        2
       </td>
       <td>
        20141023
       </td>
      </tr>
      <tr>
       <th>
        4
       </th>
       <td>
        444069173
       </td>
       <td>
        20487688075
       </td>
       <td>
        50013636
       </td>
       <td>
        50008168
       </td>
       <td>
        1
       </td>
       <td>
        20141103
       </td>
      </tr>
      <tr>
       <th>
        5
       </th>
       <td>
        152298847
       </td>
       <td>
        41840167463
       </td>
       <td>
        121394024
       </td>
       <td>
        50008168
       </td>
       <td>
        1
       </td>
       <td>
        20141103
       </td>
      </tr>
      <tr>
       <th>
        6
       </th>
       <td>
        513441334
       </td>
       <td>
        19909384116
       </td>
       <td>
        50010557
       </td>
       <td>
        50008168
       </td>
       <td>
        1
       </td>
       <td>
        20121212
       </td>
      </tr>
      <tr>
       <th>
        7
       </th>
       <td>
        297411659
       </td>
       <td>
        13540124907
       </td>
       <td>
        50010542
       </td>
       <td>
        50008168
       </td>
       <td>
        1
       </td>
       <td>
        20121212
       </td>
      </tr>
      <tr>
       <th>
        8
       </th>
       <td>
        82830661
       </td>
       <td>
        19948600790
       </td>
       <td>
        50013874
       </td>
       <td>
        28
       </td>
       <td>
        1
       </td>
       <td>
        20121101
       </td>
      </tr>
      <tr>
       <th>
        9
       </th>
       <td>
        475046636
       </td>
       <td>
        10368360710
       </td>
       <td>
        203527
       </td>
       <td>
        28
       </td>
       <td>
        1
       </td>
       <td>
        20121101
       </td>
      </tr>
     </tbody>
    </table>
    <pre><code class="prism language-python"><span class="token comment"># 删除重复数据（不知道有没有重复数据也要执行一遍，避免重复）</span>
trade_inf<span class="token punctuation">.</span>drop_duplicates<span class="token punctuation">(</span>subset<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'auction_id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># 查看数据类型、查看有无缺省值</span>
trade_inf<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 28422 entries, 0 to 29970
Data columns (total 6 columns):
 #   Column      Non-Null Count  Dtype
---  ------      --------------  -----
 0   user_id     28422 non-null  int64
 1   auction_id  28422 non-null  int64
 2   category_2  28422 non-null  int64
 3   category_1  28422 non-null  int64
 4   buy_mount   28422 non-null  int64
 5   day         28422 non-null  int64
dtypes: int64(6)
memory usage: 1.5 MB
</code></pre>
    <p>
     可以发现，并没有缺缺失值，且部分字段的数据类型不正确，需要修正。
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 数据类型转换</span>
<span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">,</span> <span class="token string">'auction_id'</span><span class="token punctuation">,</span> <span class="token string">'category_1'</span><span class="token punctuation">,</span> <span class="token string">'category_2'</span><span class="token punctuation">,</span> <span class="token string">'day'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    trade_inf<span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span>
trade_inf<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>trade_inf<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'%Y%m%d'</span><span class="token punctuation">)</span>
</code></pre>
    <pre><code class="prism language-python"><span class="token comment"># 添加年、季度、月、日这4个字段用于后续分析。</span>
trade_inf<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>year
trade_inf<span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span> <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>month
trade_inf<span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span> <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>day
trade_inf<span class="token punctuation">[</span><span class="token string">'quarter'</span><span class="token punctuation">]</span> <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span><span class="token string">'day'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>quarter
</code></pre>
    <pre><code class="prism language-python"><span class="token comment"># 查看基本统计信息</span>
trade_inf<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">,</span><span class="token string">'day'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <div>
    </div>
    <table border="1" class="dataframe">
     <thead>
      <tr>
       <th>
       </th>
       <th>
        buy_mount
       </th>
       <th>
        day
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <th>
        count
       </th>
       <td>
        28422.000000
       </td>
       <td>
        28422
       </td>
      </tr>
      <tr>
       <th>
        mean
       </th>
       <td>
        2.596862
       </td>
       <td>
        2014-01-15 13:39:12.121596160
       </td>
      </tr>
      <tr>
       <th>
        min
       </th>
       <td>
        1.000000
       </td>
       <td>
        2012-07-02 00:00:00
       </td>
      </tr>
      <tr>
       <th>
        25%
       </th>
       <td>
        1.000000
       </td>
       <td>
        2013-06-18 00:00:00
       </td>
      </tr>
      <tr>
       <th>
        50%
       </th>
       <td>
        1.000000
       </td>
       <td>
        2014-03-04 00:00:00
       </td>
      </tr>
      <tr>
       <th>
        75%
       </th>
       <td>
        1.000000
       </td>
       <td>
        2014-09-09 00:00:00
       </td>
      </tr>
      <tr>
       <th>
        max
       </th>
       <td>
        10000.000000
       </td>
       <td>
        2015-02-05 00:00:00
       </td>
      </tr>
      <tr>
       <th>
        std
       </th>
       <td>
        65.683763
       </td>
       <td>
        NaN
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     发现1：用户的购买数量大多数在1或2,均值在2.5，但是最大为10000，可以认为存在异常特殊数据，我们需要剔除避免影响分析。
    </p>
    <p>
     发现2：该数据集为2012-07-02 至 2015-02-05 的数据。也就是说，2012年和2015年的数据并不完整只有2013和2014年的数据完整。
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 异常值处理</span>
trade_inf <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span>trade_inf<span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">*</span><span class="token number">65.683763</span><span class="token punctuation">]</span>    <span class="token comment"># 默认 3 倍标准差以内的数为正常数据</span>
</code></pre>
    <p>
     查看总体的描述性统计数据：
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 描述性统计（从总体上预览数据）</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'数据处理后的数据量：'</span><span class="token punctuation">,</span> trade_inf<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'用户数：'</span><span class="token punctuation">,</span> trade_inf<span class="token punctuation">.</span>user_id<span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'交易量：'</span><span class="token punctuation">,</span> trade_inf<span class="token punctuation">.</span>auction_id<span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'商品一级类目数：'</span><span class="token punctuation">,</span> trade_inf<span class="token punctuation">.</span>category_1<span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'商品二级类目数：'</span><span class="token punctuation">,</span> trade_inf<span class="token punctuation">.</span>category_2<span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'总销量：'</span><span class="token punctuation">,</span> trade_inf<span class="token punctuation">.</span>buy_mount<span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <pre><code>数据处理后的数据量： 28394
用户数： 28367
交易量： 28394
商品一级类目数： 6
商品二级类目数： 661
总销量： 60
</code></pre>
    <h2>
     <a id="_298">
     </a>
     三、流量分析
    </h2>
    <pre><code class="prism language-python"><span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 数据可视化（年）</span>

plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Microsoft YaHei'</span><span class="token punctuation">]</span>

year <span class="token operator">=</span> trade_inf<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>year<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>year<span class="token punctuation">.</span>values<span class="token punctuation">,</span> hue <span class="token operator">=</span>year<span class="token punctuation">.</span>index<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'viridis'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'销量'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'年销量'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7bb61bb3e08a45028b1cba9325e55ab0.png#pic_center"/>
    </p>
    <p>
     根据可视化结果，只考虑完整的数据（即13和14年）可以发现，2014年的销量比2013年的销量多了很多（大概8000左右）。
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 每年的季度销量对比</span>

years <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2012</span><span class="token punctuation">,</span> <span class="token number">2013</span><span class="token punctuation">,</span> <span class="token number">2014</span><span class="token punctuation">,</span> <span class="token number">2015</span><span class="token punctuation">]</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'skyblue'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">]</span>

fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> year <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>years<span class="token punctuation">)</span><span class="token punctuation">:</span>
    season_data <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span>trade_inf<span class="token punctuation">.</span>year <span class="token operator">==</span> year<span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'quarter'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>season_data<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>season_data<span class="token punctuation">.</span>values<span class="token punctuation">,</span> ax<span class="token operator">=</span>axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"季度"</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"销量"</span><span class="token punctuation">)</span>

<span class="token comment"># 统一 y 轴范围</span>
<span class="token keyword">for</span> ax <span class="token keyword">in</span> axes<span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/0b6d67a4dc764b47a69497cd52046dbe.png#pic_center"/>
    </p>
    <p>
     可以发现，销售量逐年增加。且每年第一季度销量都是最低，每年第四季度销量都是最高。
    </p>
    <p>
     猜想原因：一季度的春节期间，用户无法网购收货，导致销量下降；四季度的 “双十一” 大促活动，导致销量增加。
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 每年的月份销量对比</span>

years <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2012</span><span class="token punctuation">,</span> <span class="token number">2013</span><span class="token punctuation">,</span> <span class="token number">2014</span><span class="token punctuation">,</span> <span class="token number">2015</span><span class="token punctuation">]</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'skyblue'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">]</span>

fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> year <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>years<span class="token punctuation">)</span><span class="token punctuation">:</span>
    season_data <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span>trade_inf<span class="token punctuation">.</span>year <span class="token operator">==</span> year<span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'month'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>season_data<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>season_data<span class="token punctuation">.</span>values<span class="token punctuation">,</span> ax<span class="token operator">=</span>axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"月份"</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"销量"</span><span class="token punctuation">)</span>

<span class="token comment"># 统一 y 轴范围</span>
<span class="token keyword">for</span> ax <span class="token keyword">in</span> axes<span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>         
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dfa31f1dc549411898ea69d0cb77e892.png#pic_center"/>
    </p>
    <p>
     结论：2013年春节在2月10号左右，2014年春节在1月底到2月初，明显春节期间销量明显最低，11月销量明显增多。说明猜想可能是正确的。我们进一步验证。
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 日销量分析（11月）</span>

years <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2012</span><span class="token punctuation">,</span> <span class="token number">2013</span><span class="token punctuation">,</span> <span class="token number">2014</span><span class="token punctuation">]</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'skyblue'</span><span class="token punctuation">]</span>

fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> year <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>years<span class="token punctuation">)</span><span class="token punctuation">:</span>
    date_data <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span><span class="token punctuation">(</span>trade_inf<span class="token punctuation">.</span>year <span class="token operator">==</span> year<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>trade_inf<span class="token punctuation">.</span>month <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'date'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>date_data<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>date_data<span class="token punctuation">.</span>values<span class="token punctuation">,</span> ax<span class="token operator">=</span>axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"销量"</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"11月的日期"</span><span class="token punctuation">)</span>

<span class="token comment"># 统一 y 轴范围</span>
<span class="token keyword">for</span> ax <span class="token keyword">in</span> axes<span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/87963e364c9244269091d8e26410d41d.png#pic_center"/>
    </p>
    <p>
     双十一期间销量比其他日期都要高，说明第四季度的销量增加是主要是“双十一”大促活动带来的。我们看看春节期间的情况。
    </p>
    <pre><code class="prism language-python">years <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2013</span><span class="token punctuation">,</span> <span class="token number">2014</span><span class="token punctuation">]</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'skyblue'</span><span class="token punctuation">]</span>

fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> year <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>years<span class="token punctuation">)</span><span class="token punctuation">:</span>
    date_data <span class="token operator">=</span> trade_inf<span class="token punctuation">[</span><span class="token punctuation">(</span>trade_inf<span class="token punctuation">.</span>year <span class="token operator">==</span> year<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>trade_inf<span class="token punctuation">.</span>month <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'date'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>date_data<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>date_data<span class="token punctuation">.</span>values<span class="token punctuation">,</span> ax<span class="token operator">=</span>axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"销量"</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"2月的日期"</span><span class="token punctuation">)</span>

<span class="token comment"># 统一 y 轴范围</span>
<span class="token keyword">for</span> ax <span class="token keyword">in</span> axes<span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/511ad253d962435399fded22dc4f51bf.png#pic_center"/>
    </p>
    <p>
     可以发现，确实是春节导致了第一季度销量明显下降。
    </p>
    <h2>
     <a id="_469">
     </a>
     四、类目分析
    </h2>
    <pre><code class="prism language-python"><span class="token comment"># 查看一级类目不同商品的销售量</span>
category1 <span class="token operator">=</span> trade_inf<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'category_1'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'buy_mount'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>category1<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>category1<span class="token punctuation">.</span>values<span class="token punctuation">,</span> hue<span class="token operator">=</span>category1<span class="token punctuation">.</span>index<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'viridis'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一级类目不同商品的销售量'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'商品类别'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'销量'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5ad664bcdfdc46f39a4e33facc10260c.png#pic_center"/>
    </p>
    <p>
     根据可视化结果，我们可以直观看到每种一级类目的商品销量对比。
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 查看每个一级类目下，包含的二级类目种类数</span>
category_1_to_2 <span class="token operator">=</span> trade_inf<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'category_1'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'category_2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reindex<span class="token punctuation">(</span>category1<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>category_1_to_2<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>category_1_to_2<span class="token punctuation">.</span>values<span class="token punctuation">,</span> hue<span class="token operator">=</span>category_1_to_2<span class="token punctuation">.</span>index<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'viridis'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'二级类目不同商品的销售量'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'商品类别'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'销量'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4b0106ccb08b4a9c93d7f41d2128199a.png#pic_center"/>
    </p>
    <p>
     上图则是每种一级类目包含的二级类目种数。
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 每个一级类目下，每个二级类目的平均销售量</span>
sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>category1<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>category1<span class="token operator">/</span>category_1_to_2<span class="token punctuation">,</span> hue<span class="token operator">=</span>category1<span class="token punctuation">.</span>index<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">'viridis'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'一级类目商品类别'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'二级类目的平均销量'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/091b097fdaab4312b9020efe0a2897cc.png#pic_center"/>
    </p>
    <p>
     可以发现，虽然总体上看，虽然50009168（一级类目）和122650008（一级类目）包含的二级种类数目都很少，但是该类目下的二级类目平均销量高。这说明，50009168（一级类目）和122650008（一级类目）主要是婴儿消费的必需品，比如奶粉、尿不湿等。
    </p>
    <h2>
     <a id="_523">
     </a>
     五、个人收获和感想
    </h2>
    <p>
     本来根据比赛提出的三个任务（流量分析、类目分析、性别分析）完完整整地做一遍，但是在做的过程中，我发现这个交易数据集的交易量（28394）和用户数（非重复，共28367）差异不大，这里就存在一个问题，用户的复购率几乎为零，也就说，购买数据基本上都是新用户的。因为个人的某些原因（我自己感觉数据集不适合我用hhhh），然后并没有继续深入研究这个数据集。
     <br/>
     最终，我选择参考了文章
     <a href="https://tianchi.aliyun.com/notebook/508900" rel="nofollow">
      https://tianchi.aliyun.com/notebook/508900
     </a>
     ，跟着做了流量分析、类目分析，当然了，也有修改部分和自己的思考，不是完全按部就班。
    </p>
    <ul>
     <li>
      提升了利用python进行数据处理的能力
     </li>
     <li>
      更熟练的利用python进行可视化的能力
     </li>
     <li>
      提升了编程能力（参考的软件版本和自己用的版本不一致的bug处理）
     </li>
     <li>
      锻炼了数据分析思维能力
     </li>
    </ul>
    <p>
     其实，一开始进行“流量分析”的时候，我选择的是使用Power BI 软件进行分析，做了一个简单的数据可视化报表，如下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/aed3304ce4cc4b18b8a611e8766804c0.png"/>
     <br/>
     根据左边的切片器，可以灵活的筛选数据的范围（比如某年，某季度等等），而且做这个可视化报表花了时间真的是特别少的，基本上拖拽就完成了，后面有机会再分享以下使用Power BI进行分析的演示hhhhh。
    </p>
    <p>
     <strong>
      文章如有错误，欢迎大家指正，我们下期再见叭
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f37343236383831372f:61727469636c652f64657461696c732f313436313136313531" class_="artid" style="display:none">
 </p>
</div>


