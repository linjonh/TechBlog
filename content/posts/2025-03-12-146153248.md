---
layout: post
title: "静态路由配置实验相关过程"
date: 2025-03-12 14:15:23 +0800
description: "由于R1-R4各有两个环回接口，骨干链路共六条，则该拓扑图一共有14个广播域。配置过程中，需要注意每个经过手工汇总的路由后，一定要再配置其手工汇总的空接口。基于192.168.1.0/24划分过程如下。可以ping通，实验成功~"
keywords: "静态路由配置实验相关过程"
categories: ['Hcia']
tags: ['运维', '网络', '服务器']
artid: "146153248"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146153248
    alt: "静态路由配置实验相关过程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146153248
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146153248
cover: https://bing.ee123.net/img/rand?artid=146153248
image: https://bing.ee123.net/img/rand?artid=146153248
img: https://bing.ee123.net/img/rand?artid=146153248
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     静态路由配置实验相关过程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <strong>
      <span style="background-color:#cbe0f1">
       实验要求如下：
      </span>
     </strong>
    </p>
    <blockquote>
     <ol>
      <li>
       除R5的环回地址固定以外，整个其他所有网段基于192.168.1.0/24进行合理的ip地址划分
      </li>
      <li>
       R1-R4每个路由器存在两个环回接口，用于模拟连接Pc的网段，地址也在192.168.1.0/24这个范围内
      </li>
      <li>
       R1-R4上不能直接写到达5.5.5.0/24的静态路由，但依然可以访问
      </li>
      <li>
       全网可达，尽量减少每台路由器路由表条日数量，避免环路出现
      </li>
      <li>
       R4与R5间，正常走1000M链路通信，故障时自动改为100M链路
      </li>
     </ol>
    </blockquote>
    <p>
     <strong>
      <span style="background-color:#cbe0f1">
       拓扑图如下：
      </span>
     </strong>
    </p>
    <p>
     <img alt="" height="927" src="https://i-blog.csdnimg.cn/direct/676c9628fa7d4d4097293e8cc422d504.png" width="1329"/>
    </p>
    <p>
     <span style="background-color:#cbe0f1">
      实验步骤：
     </span>
    </p>
    <ol>
     <li>
      IP地址划分，统计拓扑图中一共有多少个广播域，分析各个网段需要的IP地址，分配IP
     </li>
     <li>
      配置各个路由器接口地址以及环回地址
     </li>
     <li>
      配置静态路由，使其全网可达
     </li>
    </ol>
    <p>
     <span style="background-color:#cbe0f1">
      划分IP的思路：
     </span>
    </p>
    <p>
     由于R1-R4各有两个环回接口，骨干链路共六条，则该拓扑图一共有14个广播域。
    </p>
    <p>
     IP分配地址如下：
    </p>
    <table align="center" border="1" cellpadding="1" cellspacing="1" style="height:50px; width:650px">
     <tbody>
      <tr>
       <td colspan="2" style="background-color:#ffffcc; text-align:center">
        <span style="color:#0d0016">
         <span style="background-color:null">
          基于192.168.1.0/24划分过程如下
         </span>
        </span>
       </td>
      </tr>
      <tr>
       <td style="background-color:#ffffcc; text-align:center">
        <span style="color:#0d0016">
         <span style="background-color:null">
          一个骨干
         </span>
        </span>
       </td>
       <td style="background-color:#ffffcc; text-align:center">
        <span style="color:#0d0016">
         <span style="background-color:null">
          划分六个骨干链路
         </span>
        </span>
       </td>
      </tr>
      <tr>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.0/27
          </span>
         </span>
        </p>
       </td>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.0/30
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.4/30
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.8/30
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.12/30
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.16/30
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.20/30
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background-color:#ffffcc; text-align:center">
        <span style="color:#0d0016">
         <span style="background-color:null">
          四个路由的环回
         </span>
        </span>
       </td>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           划分两个环回接口
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.32.0/27
          </span>
         </span>
        </p>
       </td>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.32/28
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.48/28
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.64/27
          </span>
         </span>
        </p>
       </td>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.64/28
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.80/28
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.96/27
          </span>
         </span>
        </p>
       </td>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.96/28
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.112/28
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.128/27
          </span>
         </span>
        </p>
       </td>
       <td style="background-color:#ffffcc">
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.128/28
          </span>
         </span>
        </p>
        <p style="margin-left:0.0001pt; margin-right:0px; text-align:center">
         <span style="color:#0d0016">
          <span style="background-color:null">
           192.168.1.144/28
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     R1配置如下：
    </p>
    <pre><code class="language-bash">#接口IP地址配置
[R1]int g0/0/0
[R1]ip add 192.168.1.1 30

[R1]disp this 
#静态路由配置如下
ip route-static 192.168.1.8 255.255.255.252 192.168.1.2
ip route-static 192.168.1.12 255.255.255.252 192.168.1.6
ip route-static 192.168.1.16 255.255.255.252 192.168.1.2
ip route-static 192.168.1.16 255.255.255.252 192.168.1.6
ip route-static 192.168.1.64 255.255.255.224 192.168.1.2
ip route-static 192.168.1.96 255.255.255.224 192.168.1.6
ip route-static 192.168.1.128 255.255.255.224 192.168.1.2
ip route-static 192.168.1.128 255.255.255.224 192.168.1.6

#手工汇总环回空接口配置，可防止路由黑洞
[R1]ip route-static 192.168.1.32 27 NULL 0

#缺省路由配置
[R1]ip route-static 0.0.0.0 0 192.168.1.2
[R1]ip route-static 0.0.0.0 0 192.168.1.6</code></pre>
    <p>
     R2配置如下：
    </p>
    <pre><code class="language-bash">#静态路由配置如下
[R2]ip route-static 192.168.1.128 27 192.168.1.10
[R2]ip route-static 192.168.1.12 30 192.168.1.10
[R2]ip route-static 192.168.1.96 27 192.168.1.10
[R2]ip route-static 192.168.1.96 27 192.168.1.1
[R2]ip route-static 192.168.1.4 30 192.168.1.1
[R2]ip route-static 192.168.1.16 30 192.168.1.10
[R2]ip route-static 192.168.1.32 27 192.168.1.1


#空接口配置
[R2]ip route-static 192.168.1.64 27 NULL 0

#缺省
[R2]ip route-static 0.0.0.0 0 192.168.1.10</code></pre>
    <p>
     R3配置如下：
    </p>
    <pre><code class="language-bash">[R3]dis this 

#静态路由以及空接口配置如下

ip route-static 192.168.1.0 255.255.255.252 192.168.1.5
ip route-static 192.168.1.8 255.255.255.252 192.168.1.14
ip route-static 192.168.1.16 255.255.255.252 192.168.1.14
ip route-static 192.168.1.32 255.255.255.224 192.168.1.5
ip route-static 192.168.1.64 255.255.255.224 192.168.1.5
ip route-static 192.168.1.64 255.255.255.224 192.168.1.14
ip route-static 192.168.1.96 255.255.255.224 NULL0
ip route-static 192.168.1.128 255.255.255.224 192.168.1.14

#缺省
[R3]ip route-static 0.0.0.0 0 192.168.1.14
</code></pre>
    <p>
     R4配置如下：
    </p>
    <pre><code class="language-bash">[R4]display this 

#静态路由配置、空接口配置如下
ip route-static 0.0.0.0 0.0.0.0 192.168.1.18
ip route-static 192.168.1.0 255.255.255.252 192.168.1.9
ip route-static 192.168.1.4 255.255.255.252 192.168.1.13
ip route-static 192.168.1.32 255.255.255.224 192.168.1.13
ip route-static 192.168.1.32 255.255.255.224 192.168.1.9
ip route-static 192.168.1.64 255.255.255.224 192.168.1.9
ip route-static 192.168.1.96 255.255.255.224 192.168.1.13
ip route-static 192.168.1.128 255.255.255.224 NULL0

#缺省
[R4]ip route-static 0.0.0.0 0 192.168.1.18

#设置100M链路的优先级为61

[R4]ip route-static 0.0.0.0 0.0.0.0 192.168.1.22 preference 61</code></pre>
    <p>
     R5配置如下：
    </p>
    <pre><code class="language-bash">
#静态路由配置如下
[R5]ip route-static 192.168.1.0 255.255.255.252 192.168.1.17
[R5]ip route-static 192.168.1.4 255.255.255.252 192.168.1.17
[R5]ip route-static 192.168.1.8 255.255.255.252 192.168.1.17
[R5]ip route-static 192.168.1.12 255.255.255.252 192.168.1.17
[R5]ip route-static 192.168.1.32 255.255.255.224 192.168.1.17
[R5]ip route-static 192.168.1.128 255.255.255.224 192.168.1.17
[R5]ip route-static 192.168.1.64 255.255.255.224 192.168.1.17
[R5]ip route-static 192.168.1.96 255.255.255.224 192.168.1.17

#配置100M链路的优先级为61
[R5]ip route-static 192.168.1.0 255.255.255.252 192.168.1.21 preference 61
[R5]ip route-static 192.168.1.4 255.255.255.252 192.168.1.21 preference 61
[R5]ip route-static 192.168.1.8 255.255.255.252 192.168.1.21 preference 61
[R5]ip route-static 192.168.1.12 255.255.255.252 192.168.1.21 preference 61
[R5]ip route-static 192.168.1.32 255.255.255.224 192.168.1.21 preference 61
[R5]ip route-static 192.168.1.128 255.255.255.224 192.168.1.21 preference 61
[R5]ip route-static 192.168.1.64 255.255.255.224 192.168.1.21 preference 61
[R5]ip route-static 192.168.1.96 255.255.255.224 192.168.1.21 preference 61

#！注意R5上的缺省也须配置优先级，不然依然不可到达5.5.5.0的网段

[R5]ip route-static 0.0.0.0 0.0.0.0 192.168.1.21 preference 61</code></pre>
    <p>
     到此，完成了所有实验要求，我们尝试用R1去ping通R5的环回，如下：
    </p>
    <p>
     <img alt="" height="831" src="https://i-blog.csdnimg.cn/direct/c36b1070b9a54f8eaa6bb18b714bea80.png" width="1014"/>
    </p>
    <p>
     可以ping通，实验成功~
    </p>
    <p>
     <span style="color:#fe2c24">
      配置过程中，需要注意每个经过手工汇总的路由后，一定要再配置其手工汇总的空接口。
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36333839353235372f:61727469636c652f64657461696c732f313436313533323438" class_="artid" style="display:none">
 </p>
</div>


