---
layout: post
title: "ESP32çš„IDFå¼€å‘å­¦ä¹ -ç§»æ¤lvglå¹¶æ˜¾ç¤ºç®€å•uiä»¥gc9a01ä¸ºä¾‹"
date: 2025-03-10 17:18:59 +0800
description: "å†ç»æ•°æ—¥çš„è°ƒè¯•ä¸ä¼˜åŒ–ï¼Œç»ˆäºæˆåŠŸæ”»å…‹GC9A01æ˜¾ç¤ºå±çš„é©±åŠ¨å¼€å‘ï¼ğŸ‰ æœ¬æ–‡å°†èšç„¦LVGLå›¾å½¢åº“çš„ç§»æ¤ä¸å®è·µï¼Œè¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ESP32-S3å¹³å°ä¸Šå®ç°åŸºç¡€UIæ¸²æŸ“ï¼Œä¸ºåç»­å¤æ‚ç•Œé¢å¼€å‘å¥ å®šåŸºç¡€ã€‚"
keywords: "ESP32çš„IDFå¼€å‘å­¦ä¹ -ç§»æ¤lvglå¹¶æ˜¾ç¤ºç®€å•ui(ä»¥gc9a01ä¸ºä¾‹)"
categories: ['æœªåˆ†ç±»']
tags: ['å­¦ä¹ ', 'Ui']
artid: "146159168"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146159168
    alt: "ESP32çš„IDFå¼€å‘å­¦ä¹ -ç§»æ¤lvglå¹¶æ˜¾ç¤ºç®€å•uiä»¥gc9a01ä¸ºä¾‹"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146159168
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146159168
cover: https://bing.ee123.net/img/rand?artid=146159168
image: https://bing.ee123.net/img/rand?artid=146159168
img: https://bing.ee123.net/img/rand?artid=146159168
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ESP32çš„IDFå¼€å‘å­¦ä¹ -ç§»æ¤lvglå¹¶æ˜¾ç¤ºç®€å•ui(ä»¥gc9a01ä¸ºä¾‹)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="__0">
     </a>
     ğŸ“– å‰è¨€
    </h3>
    <p>
     å†ç»æ•°æ—¥çš„è°ƒè¯•ä¸ä¼˜åŒ–ï¼Œç»ˆäºæˆåŠŸæ”»å…‹GC9A01æ˜¾ç¤ºå±çš„é©±åŠ¨å¼€å‘ï¼ğŸ‰ æœ¬æ–‡å°†èšç„¦
     <strong>
      LVGLå›¾å½¢åº“çš„ç§»æ¤ä¸å®è·µ
     </strong>
     ï¼Œè¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ESP32-S3å¹³å°ä¸Šå®ç°åŸºç¡€UIæ¸²æŸ“ï¼Œä¸ºåç»­å¤æ‚ç•Œé¢å¼€å‘å¥ å®šåŸºç¡€ã€‚
    </p>
    <hr/>
    <h3>
     <a id="_LVGL_5">
     </a>
     ğŸ› ï¸ LVGLç»„ä»¶é›†æˆ
    </h3>
    <h4>
     <a id="1__7">
     </a>
     1ï¸âƒ£
     <strong>
      ç»„ä»¶å®‰è£…
     </strong>
    </h4>
    <p>
     é€šè¿‡
     <strong>
      ESP-IDFç»„ä»¶ç®¡ç†å™¨
     </strong>
     å¿«é€Ÿé›†æˆLVGLï¼š
    </p>
    <ol>
     <li>
      æ‰“å¼€ç»„ä»¶æ³¨å†Œå™¨ï¼Œæœç´¢
      <code>
       lvgl
      </code>
      <br/>
      <img alt="" src="https://i-blog.csdnimg.cn/img_convert/bc60e23ea1fadd12f6d273a94323edbe.png"/>
     </li>
     <li>
      é€‰æ‹©
      <strong>
       v8.xç‰ˆæœ¬
      </strong>
      ï¼ˆæ›´ç¨³å®šçš„é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼‰å¹¶å®‰è£…
      <br/>
      <img alt="" src="https://i-blog.csdnimg.cn/img_convert/75bc10303848fdea8b5dd658130baad7.png"/>
     </li>
     <li>
      åŒæ—¶å®‰è£…
      <strong>
       lvgl_port
      </strong>
      ç«¯å£é€‚é…å±‚
      <br/>
      <img alt="" src="https://i-blog.csdnimg.cn/img_convert/1e06473cf727c7d89c66341365797616.png"/>
     </li>
    </ol>
    <h4>
     <a id="2__16">
     </a>
     2ï¸âƒ£
     <strong>
      å…³é”®é…ç½®
     </strong>
    </h4>
    <pre><code class="prism language-c"><span class="token class-name">lvgl_port_cfg_t</span> port_cfg <span class="token operator">=</span> <span class="token function">ESP_LVGL_PORT_INIT_CONFIG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">lvgl_port_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>port_cfg<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre>
    <p>
     ğŸ“Œ
     <strong>
      é…ç½®é¡¹è§£æ
     </strong>
     ï¼š
    </p>
    <ul>
     <li>
      <strong>
       <code>
        task_priority
       </code>
      </strong>
      : å»ºè®®è®¾ä¸º
      <code>
       5
      </code>
      ï¼ˆä½äºWiFi/BTç­‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼‰
     </li>
     <li>
      <strong>
       <code>
        task_stack
       </code>
      </strong>
      : è‡³å°‘
      <code>
       4096
      </code>
      å­—ï¼ˆå¤æ‚UIéœ€å¢å¤§ï¼‰
     </li>
     <li>
      <strong>
       <code>
        task_affinity
       </code>
      </strong>
      : ç»‘å®šåˆ°
      <code>
       CPU1
      </code>
      å¯éš”ç¦»æ¸²æŸ“ä»»åŠ¡ä¸å…¶ä»–é€»è¾‘
     </li>
    </ul>
    <p>
     âš ï¸
     <strong>
      é‡è¦æç¤º
     </strong>
     ï¼š
    </p>
    <blockquote>
     <ul>
      <li>
       è‹¥æ˜¾ç¤ºå±å‡ºç°æ’•è£‚ï¼Œéœ€è°ƒæ•´
       <code>
        timer_period_ms
       </code>
       ä¸åˆ·æ–°ç‡åŒæ­¥
      </li>
      <li>
       å¤šä»»åŠ¡æ“ä½œLVGLå‰å¿…é¡»
       <strong>
        åŠ é”
       </strong>
      </li>
     </ul>
    </blockquote>
    <hr/>
    <h3>
     <a id="__32">
     </a>
     ğŸ–¥ï¸ æ˜¾ç¤ºå™¨æ³¨å†Œä¸é…ç½®
    </h3>
    <h4>
     <a id="1__34">
     </a>
     1ï¸âƒ£
     <strong>
      ç¡¬ä»¶å®šä¹‰
     </strong>
    </h4>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">gc9a01_swap_xy</span>  <span class="token expression">false </span><span class="token comment">// XYè½´äº¤æ¢ï¼ˆé€‚é…å±å¹•æ–¹å‘ï¼‰</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">gc9a01_mirror_x</span> <span class="token expression">true  </span><span class="token comment">// Xè½´é•œåƒï¼ˆç‰©ç†å®‰è£…æ–¹å‘è¡¥å¿ï¼‰</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">gc9a01_mirror_y</span> <span class="token expression">false </span><span class="token comment">// Yè½´é•œåƒ</span></span>

<span class="token class-name">esp_lcd_panel_io_handle_t</span> io_handle <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">// LCDæ€»çº¿å¥æŸ„</span>
<span class="token class-name">esp_lcd_panel_handle_t</span> panel_handle <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">// é¢æ¿æ§åˆ¶å¥æŸ„</span>
<span class="token class-name">lv_disp_t</span> <span class="token operator">*</span>disp_ <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">// LVGLæ˜¾ç¤ºè®¾å¤‡å¯¹è±¡</span>
</code></pre>
    <h4>
     <a id="2__45">
     </a>
     2ï¸âƒ£
     <strong>
      æ˜¾ç¤ºç«¯å£æ³¨å†Œ
     </strong>
    </h4>
    <pre><code class="prism language-c"><span class="token keyword">const</span> <span class="token class-name">lvgl_port_display_cfg_t</span> display_cfg <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span>io_handle <span class="token operator">=</span> io_handle<span class="token punctuation">,</span> 
    <span class="token punctuation">.</span>panel_handle <span class="token operator">=</span> panel_handle<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>buffer_size <span class="token operator">=</span> LCD_WIDTH <span class="token operator">*</span> <span class="token number">80</span><span class="token punctuation">,</span>   <span class="token comment">// åŒç¼“å†²æ¯å¸§80è¡Œ</span>
    <span class="token punctuation">.</span>double_buffer <span class="token operator">=</span> true<span class="token punctuation">,</span>           <span class="token comment">// âœ… å¯ç”¨åŒç¼“å†²é˜²æ’•è£‚</span>
    <span class="token punctuation">.</span>hres <span class="token operator">=</span> LCD_WIDTH<span class="token punctuation">,</span>               <span class="token comment">// æ°´å¹³åˆ†è¾¨ç‡</span>
    <span class="token punctuation">.</span>vres <span class="token operator">=</span> LCD_HEIGHT<span class="token punctuation">,</span>              <span class="token comment">// å‚ç›´åˆ†è¾¨ç‡</span>
    <span class="token punctuation">.</span>rotation <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">.</span>swap_xy <span class="token operator">=</span> gc9a01_swap_xy<span class="token punctuation">,</span>   <span class="token comment">// åæ ‡ç³»å˜æ¢</span>
        <span class="token punctuation">.</span>mirror_x <span class="token operator">=</span> gc9a01_mirror_x<span class="token punctuation">,</span> 
        <span class="token punctuation">.</span>mirror_y <span class="token operator">=</span> gc9a01_mirror_y<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>flags <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">.</span>buff_dma <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>               <span class="token comment">// ğŸš€ DMAåŠ é€Ÿä¼ è¾“</span>
        <span class="token punctuation">.</span>buff_spiram <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token comment">// ç¦ç”¨PSRAMï¼ˆç‰‡ä¸Šå†…å­˜å……è¶³æ—¶ï¼‰</span>
        <span class="token punctuation">.</span>sw_rotate <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// ä¸ä½¿ç”¨è½¯ä»¶æ—‹è½¬</span>
        <span class="token punctuation">.</span>full_refresh <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// ä¸ä½¿ç”¨å…¨å±åˆ·æ–°</span>
        <span class="token punctuation">.</span>direct_mode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// ä¸ä½¿ç”¨ç›´æ¥æ¨¡å¼</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

disp_ <span class="token operator">=</span> <span class="token function">lvgl_port_add_disp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>display_cfg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ³¨å†Œæ˜¾ç¤ºå™¨åˆ°LVGL</span>
</code></pre>
    <p>
     ğŸ”§
     <strong>
      è°ƒè¯•æŠ€å·§
     </strong>
     ï¼š
    </p>
    <ul>
     <li>
      è‹¥å¸§ç‡ä¸è¶³ï¼Œå¯å°è¯•å¢å¤§
      <code>
       buffer_size
      </code>
      è‡³å…¨å±å°ºå¯¸ï¼ˆç‰ºç‰²å†…å­˜æ¢å–é€Ÿåº¦ï¼‰
     </li>
     <li>
      <code>
       sw_rotate=1
      </code>
      å¯åœ¨ä¸ä¿®æ”¹ç¡¬ä»¶æ’çº¿çš„æƒ…å†µä¸‹è½¯ä»¶æ—‹è½¬å±å¹•
     </li>
     <li>
      PSRAMå’ŒDMAä¸èƒ½åŒæ—¶å¼€å¯
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="__77">
     </a>
     ğŸ”
     <strong>
      æ ¸å¿ƒä»£ç å‰–æ
     </strong>
    </h3>
    <h4>
     <a id="lvgl_port_init__78">
     </a>
     <code>
      lvgl_port_init()
     </code>
     å‡½æ•°è¯¦è§£
    </h4>
    <p>
     è¯¥å‡½æ•°å®ç°äº†LVGLä¸FreeRTOSçš„æ·±åº¦æ•´åˆï¼Œä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š
    </p>
    <table>
     <thead>
      <tr>
       <th>
        æ¨¡å—
       </th>
       <th>
        åŠŸèƒ½è¯´æ˜
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         å¿ƒè·³å®šæ—¶å™¨
        </strong>
       </td>
       <td>
        é€šè¿‡
        <code>
         lvgl_port_tick_init()
        </code>
        æ³¨å…¥ç³»ç»Ÿæ—¶é’Ÿï¼Œç»´æŒLVGLåŠ¨ç”»/äº‹ä»¶å¤„ç†ï¼ˆé»˜è®¤5msä¸­æ–­ï¼‰
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         äº’æ–¥é‡ä¿æŠ¤
        </strong>
       </td>
       <td>
        é€’å½’é”é˜²æ­¢å¤šçº¿ç¨‹ç«äº‰LVGLå¯¹è±¡ï¼ˆå¦‚UIçº¿ç¨‹ä¸ä¼ æ„Ÿå™¨æ•°æ®æ›´æ–°çº¿ç¨‹ï¼‰
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         ä»»åŠ¡ç»‘å®š
        </strong>
       </td>
       <td>
        å¯æŒ‡å®šæ¸²æŸ“ä»»åŠ¡è¿è¡Œçš„CPUæ ¸å¿ƒï¼Œæå‡å¤šæ ¸åˆ©ç”¨ç‡
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     âš ï¸
     <strong>
      çº¿ç¨‹å®‰å…¨è­¦å‘Š
     </strong>
     ï¼š
    </p>
    <blockquote>
     <p>
      æ‰€æœ‰LVGLå¯¹è±¡æ“ä½œå¿…é¡»åŒ…è£¹åœ¨é”å†…ï¼š
     </p>
     <pre><code class="prism language-c"><span class="token function">xSemaphoreTakeRecursive</span><span class="token punctuation">(</span>lvgl_port_ctx<span class="token punctuation">.</span>lvgl_mux<span class="token punctuation">,</span> portMAX_DELAY<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">lv_label_set_text</span><span class="token punctuation">(</span>label<span class="token punctuation">,</span> <span class="token string">"New Value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">xSemaphoreGiveRecursive</span><span class="token punctuation">(</span>lvgl_port_ctx<span class="token punctuation">.</span>lvgl_mux<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    </blockquote>
    <hr/>
    <h3>
     <a id="_UI_97">
     </a>
     ğŸ¨ åŸºç¡€UIå¼€å‘ç¤ºä¾‹
    </h3>
    <pre><code class="prism language-c"><span class="token comment">// è·å–é»˜è®¤å±å¹•å¯¹è±¡</span>
<span class="token class-name">lv_obj_t</span> <span class="token operator">*</span>scr <span class="token operator">=</span> <span class="token function">lv_disp_get_scr_act</span><span class="token punctuation">(</span>disp_<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¾ç½®èƒŒæ™¯æ ·å¼ï¼ˆ50%é€æ˜åº¦ï¼Œç™½è‰²åº•è‰²ï¼‰</span>
<span class="token function">lv_obj_set_style_bg_opa</span><span class="token punctuation">(</span>scr<span class="token punctuation">,</span> LV_OPA_50<span class="token punctuation">,</span> LV_STATE_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">lv_obj_set_style_bg_color</span><span class="token punctuation">(</span>scr<span class="token punctuation">,</span> <span class="token function">lv_color_white</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> LV_PART_MAIN<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// åˆ›å»ºæ–‡æœ¬æ ‡ç­¾å¹¶å®šä½</span>
<span class="token class-name">lv_obj_t</span> <span class="token operator">*</span>label <span class="token operator">=</span> <span class="token function">lv_label_create</span><span class="token punctuation">(</span>scr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">lv_label_set_text</span><span class="token punctuation">(</span>label<span class="token punctuation">,</span> <span class="token string">"Hello ESP32"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">lv_obj_align</span><span class="token punctuation">(</span>label<span class="token punctuation">,</span> LV_ALIGN_CENTER<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å±…ä¸­æ˜¾ç¤º</span>

<span class="token function">ESP_LOGI</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"UIåˆå§‹åŒ–å®Œæˆâœ…"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     ç¼–è¯‘çƒ§å½•åæ•ˆæœï¼š
     <br/>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/aeb6a5fd81bfe9818ab8aa7da74e90bd.jpeg">
      <br/>
      å¤§åŠŸå‘Šæˆï¼ï¼ï¼
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35333434303437372f:61727469636c652f64657461696c732f313436313539313638" class_="artid" style="display:none">
 </p>
</div>


