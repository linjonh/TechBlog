---
layout: post
title: "MariaDB-10.6.21安装后实际版本为10.6.19"
date: 2025-03-14 17:02:45 +0800
description: "安装MariaDB 10.6.21(安装后实际版本为10.6.19)"
keywords: "MariaDB 10.6.21(安装后实际版本为10.6.19)"
categories: ['Mariadb']
tags: ['数据库', 'Mariadb']
artid: "146261379"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146261379
    alt: "MariaDB-10.6.21安装后实际版本为10.6.19"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146261379
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146261379
cover: https://bing.ee123.net/img/rand?artid=146261379
image: https://bing.ee123.net/img/rand?artid=146261379
img: https://bing.ee123.net/img/rand?artid=146261379
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     MariaDB 10.6.21(安装后实际版本为10.6.19)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <strong>
      确保Mysql卸载干净！
     </strong>
    </p>
    <p>
     卸载自带的 MariaDB
    </p>
    <pre><code class="language-bash">查看版本：有则需要卸载。
rpm -qa|grep mariadb

卸载：复制文件名，执行以下指令。
rpm -e --nodeps 文件名

确认卸载：
rpm -qa|grep mariadb</code></pre>
    <h4>
     <strong>
      添加 MariaDB yum 仓库
     </strong>
    </h4>
    <p>
     首先在CentOS操作系统中/etc/yum.repos.d/目录下添加 MariaDB 的YUM配置文件MariaDB.repo文件。 这里使用的是国内源，下载速度比较快些。
    </p>
    <p>
     <a href="http://mirrors.aliyun.com/mariadb/yum/10.6.21/centos7-amd64/" rel="nofollow" title="http://mirrors.aliyun.com/mariadb/yum/10.6.21/centos7-amd64/">
      http://mirrors.aliyun.com/mariadb/yum/10.6.21/centos7-amd64/
     </a>
    </p>
    <p>
     国外的数据源地址是：
     <a href="http://yum.mariadb.org/10.6.21/centos7-amd64" rel="nofollow" title="http://yum.mariadb.org/10.6.21/centos7-amd64">
      http://yum.mariadb.org/10.6.21/centos7-amd64
     </a>
    </p>
    <p>
     使用命令行
    </p>
    <pre><code class="language-bash">vim /etc/yum.repos.d/mariadb.repo</code></pre>
    <p>
     添加如下内容：
    </p>
    <pre><code class="language-bash">[mariadb]
name = MariaDB
baseurl = http://mirrors.aliyun.com/mariadb/yum/10.6.21/centos7-amd64/
gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
enabled=1
gpgcheck=1</code></pre>
    <p>
     更新缓存
    </p>
    <pre><code class="language-bash">yum clean all
yum makecache
yum repolist</code></pre>
    <p>
     显示可安装的版本
    </p>
    <pre><code class="language-bash">#这个可以看版本号
yum search mariadb --showduplicates
或
yum search mariadb</code></pre>
    <h4 style="background-color:transparent">
     安装 MariaDB
    </h4>
    <p>
     通过yum命令安装 MariaDB。
    </p>
    <pre><code class="language-bash">yum  -y install MariaDB-server MariaDB-client</code></pre>
    <p>
     MariaDB 安装完毕后，立即启动数据库服务守护进程。
    </p>
    <pre><code class="language-bash">systemctl start mariadb</code></pre>
    <p>
     设置 MariaDB 在操作系统重启后自动启动服务。
    </p>
    <pre><code class="language-bash">systemctl enable mariadb</code></pre>
    <p>
     查看 MariaDB 服务当前状态。
    </p>
    <pre><code class="language-bash">systemctl status mariadb</code></pre>
    <h4>
     对 MariaDB 进行安全配置
    </h4>
    <p>
     通过以下命令进行安全配置，根据实际情况用 Y/n 回复以下问题：设置 MariaDB 的 root 账户密码，删除匿名用户，禁用 root 远程登录，删除测试数据库，重新加载权限表。
    </p>
    <pre><code class="language-bash">mysql_secure_installation</code></pre>
    <p>
     本人全都是选择了Y，然后按回车。 在配置完数据库的安全配置后，可以通过以下命令查看版本，确认 MariaDB已安装成功。
    </p>
    <pre><code class="language-bash">mysql --version</code></pre>
    <p>
     可以通过 MariaDB 命令行登录，然后对数据库进行sql查询操作。
    </p>
    <pre><code class="language-bash">mysql -uroot -p</code></pre>
    <p>
     设置开机启动服务
    </p>
    <pre><code class="language-bash">systemctl enable mariadb</code></pre>
    <p>
     启动服务
    </p>
    <pre><code class="language-bash">systemctl start mariadb</code></pre>
    <p>
     重启服务
    </p>
    <pre><code class="language-bash">systemctl restart mariadb</code></pre>
    <p>
     停止服务
    </p>
    <pre><code class="language-bash">systemctl stop mariadb</code></pre>
    <p>
     查看状态
    </p>
    <pre><code class="language-bash">systemctl status mariadb</code></pre>
    <h4>
     为 MariaDB 配置远程访问权限
    </h4>
    <p>
     在第三步中如果禁用 root 远程登录选择 Y 的话就不能在别的电脑通过navicat等工具连接到数据库，这时就需要给对应的 MariaDB 账户分配权限，允许使用该账户远程连接到MariaDB。可以输入以下命令查看账号信息：
    </p>
    <pre><code class="language-sql">select User, host from mysql.user;</code></pre>
    <p>
     root账户中的host项是localhost表示该账号只能进行本地登录，如果需要远程访问，我们需要修改权限，输入命令：
    </p>
    <pre><code class="language-sql">GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'my-new-password' WITH GRANT OPTION;</code></pre>
    <p>
     修改权限。%表示针对所有IP，password表示将用这个密码登录root用户，如果想只让某个IP段的主机连接，可以修改为：
    </p>
    <pre><code class="language-sql">GRANT ALL PRIVILEGES ON *.* TO 'root'@'具体的IP' IDENTIFIED BY 'my-new-password' WITH GRANT OPTION;</code></pre>
    <p>
     最后别忘了：
    </p>
    <pre><code class="language-sql">FLUSH PRIVILEGES;</code></pre>
    <p>
     保存更改后，再看看用户账号信息：
    </p>
    <pre><code class="language-sql">select User, host from mysql.user;</code></pre>
    <p>
     这个时候发现root的host项是%，这说明配置成功了，我们可以用该账号进行远程访问了。
    </p>
    <h4>
     <strong>
      设置数据库字母大小写不敏感
     </strong>
    </h4>
    <pre><code class="language-bash">vim /etc/my.cnf.d/server.cnf</code></pre>
    <p>
     在[mysqld]下加上
    </p>
    <pre><code class="language-bash">lower_case_table_names=1</code></pre>
    <p>
     MySQL默认字母大小写敏感的。默认值等于0的，即大小写敏感。所以修改成1就行了。
    </p>
    <h4 style="background-color:transparent">
     设置MariaDB数据库默认编码
    </h4>
    <p>
     MariaDB的默认编码是latin1，插入中文会乱码，因此需要将编码改为utf8。 1).登录，使用以下命令查看当前使用的字符集，应该有好几个不是utf8格式。
    </p>
    <pre><code class="language-sql">show variables like "%character%"; show variables like "%collation%";</code></pre>
    <p>
     2).修改的配置文件
    </p>
    <pre><code class="language-bash">vim /etc/my.cnf.d/client.cnf</code></pre>
    <p>
     在[client]字段里加入
    </p>
    <pre><code class="language-bash">default-character-set=utf8</code></pre>
    <p>
     编辑
    </p>
    <pre><code class="language-bash">vim /etc/my.cnf.d/server.cnf</code></pre>
    <p>
     在[mysqld]字段里加入
    </p>
    <pre><code class="language-bash">character-set-server=utf8</code></pre>
    <p>
     3).重启 MariaDB 配置生效。
    </p>
    <pre><code class="language-bash">systemctl restart mariadb</code></pre>
    <h4>
     忘记了MariaDB root密码，解决办法如下：
    </h4>
    <p>
     1).先停掉MariaDB
    </p>
    <pre><code class="language-bash">systemctl stop mariadb.service</code></pre>
    <p>
     2).KILL掉系统里的MariaDB进程；
    </p>
    <pre><code class="language-bash">ps -ef | grep mariadb #查询进程PID</code></pre>
    <p>
     kill 进程PID
    </p>
    <p>
     3).用以下命令启动MariaDB，以不检查权限的方式启动；
    </p>
    <pre><code class="language-bash">mysqld_safe -skip-grant-tables &amp;</code></pre>
    <p>
     或是 修改/etc/my.cnf文件,在[mysqld]下添加 skip-grant-tables , 再启动MariaDB
    </p>
    <pre><code class="language-bash">systemctl restart mariadb.service</code></pre>
    <p>
     然后用空密码方式使用root用户登录MariaDB；
    </p>
    <pre><code class="language-bash">mysql -u root</code></pre>
    <p>
     4).修改root用户的密码；
    </p>
    <pre><code class="language-bash">update mysql.user set password=password('password') where User='root';
​
# ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';
​
flush privileges;
quit;#或者使用exit;</code></pre>
    <p>
     5). 改完密码需要删除配置文件中的
    </p>
    <pre><code class="language-bash">skip-grant-tables</code></pre>
    <p>
     6).重新启动MariaDB，就可以使用新密码登录
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f37333334373637382f:61727469636c652f64657461696c732f313436323631333739" class_="artid" style="display:none">
 </p>
</div>


