---
layout: post
title: "使用OpenAI创建对话式聊天机器人"
date: 2025-01-11 21:17:50 +0800
description: "本文介绍了如何使用OpenAI的GPT-3.5-Turbo模型和PythonAPI创建一个聊天机器人"
keywords: "openai.chatcompletion.create"
categories: ['小项目']
tags: ['开发语言', '人工智能', 'Python', 'Ai']
artid: "131027195"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=131027195
    alt: "使用OpenAI创建对话式聊天机器人"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=131027195
featuredImagePreview: https://bing.ee123.net/img/rand?artid=131027195
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用OpenAI创建对话式聊天机器人
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-github-gist" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_1">
     </a>
     引言
    </h2>
    <p>
     在当今的技术世界中，人工智能（AI）的发展迅猛，为我们带来了许多令人兴奋的创新。其中，自然语言处理（NLP）领域的进展使得开发对话式聊天机器人成为可能。OpenAI是一家领先的人工智能研究实验室，他们提供了一系列强大的工具和API，让开发者能够轻松构建智能聊天机器人。
    </p>
    <p>
     在本文中，我们将介绍如何使用OpenAI的文本生成功能创建一个对话式聊天机器人。我们将使用Python编程语言，并利用OpenAI的API来实现这一目标。
    </p>
    <h4>
     <a id="_7">
     </a>
     安装依赖包
    </h4>
    <p>
     首先，我们需要安装OpenAI的Python库，该库提供了与OpenAI接口进行交互的功能。通过以下命令使用pip安装所需的依赖包：
    </p>
    <pre><code class="prism language-sh">pip install openai
</code></pre>
    <h3>
     <a id="1OpenAI_API_15">
     </a>
     步骤1：设置OpenAI API密钥
    </h3>
    <p>
     我们需要在OpenAI网站上注册并获取API密钥。
    </p>
    <p>
     <img alt="image-20230514135324838" src="https://i-blog.csdnimg.cn/blog_migrate/e97437d8dd6d027ec64c8f7398f7a9cc.png"/>
    </p>
    <p>
     这个密钥将用于与OpenAI的API进行通信。在你获得API密钥后，你需要将其设置为环境变量或直接在代码中进行设置。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> openai

openai<span class="token punctuation">.</span>api_key <span class="token operator">=</span> <span class="token string">'YOUR_API_KEY'</span>
</code></pre>
    <h3>
     <a id="2_29">
     </a>
     步骤2：编写对话函数
    </h3>
    <p>
     接下来，我们将编写一个名为
     <code>
      chat_with_bot
     </code>
     的函数，该函数将用户的输入作为参数，并使用OpenAI的文本生成API来生成机器人的回答。下面是一个简单的示例：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">chat_with_bot</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">:</span>
  
    response <span class="token operator">=</span> openai<span class="token punctuation">.</span>ChatCompletion<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
      model<span class="token operator">=</span><span class="token string">"gpt-3.5-turbo"</span><span class="token punctuation">,</span>
      messages<span class="token operator">=</span><span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"system"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> prompt<span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
    bot_reply <span class="token operator">=</span> response<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span>content
    <span class="token keyword">return</span> bot_reply
</code></pre>
    <p>
     在这个函数中，获取问题字符串，指定适当的参数（例如生成模型、生成的最大标记数等），并获取生成的回答。
    </p>
    <p>
     <code>
      openai.ChatCompletion.create
     </code>
     方法是一个用于与OpenAI聊天模型进行交互的方法。它发送一个聊天请求，并从模型返回一个聊天响应。下面是对该方法及其内部参数的详细介绍：
    </p>
    <ul>
     <li>
      <p>
       方法：
       <code>
        openai.ChatCompletion.create
       </code>
      </p>
      <ul>
       <li>
        描述：该方法用于与OpenAI聊天模型进行交互。
       </li>
      </ul>
     </li>
     <li>
      <p>
       内部参数：
      </p>
      <ul>
       <li>
        <p>
         <code>
          model
         </code>
         （必填）：字符串类型，指定要使用的模型。
        </p>
       </li>
       <li>
        <p>
         <code>
          messages
         </code>
         （必填）：列表类型，表示聊天中的消息序列。
        </p>
        <ul>
         <li>
          每个消息是一个字典对象，包含以下属性：
         </li>
         <li>
          <code>
           role
          </code>
          （必填）：字符串类型，表示消息的角色。可以是"system"、“user"或"assistant”。
         </li>
         <li>
          <code>
           content
          </code>
          （必填）：字符串类型，表示消息的内容。
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      <p>
       返回值：返回一个对象，包含聊天响应；
      </p>
      <ul>
       <li>
        <code>
         choices
        </code>
        ：一个包含聊天选择项的列表。每个选择项包含以下属性：
        <ul>
         <li>
          <code>
           message
          </code>
          ：聊天选择的消息对象。
         </li>
         <li>
          <code>
           role
          </code>
          ：消息的角色。
         </li>
         <li>
          <code>
           content
          </code>
          ：消息的内容。
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <p>
     使用
     <code>
      openai.ChatCompletion.create
     </code>
     方法时，需要按照指定的格式构建消息序列，并提供适当的模型参数。该方法将发送请求给模型，并返回一个对象，其中包含从模型获取的聊天响应。你可以从响应中提取聊天机器人的回复或其他相关信息。
    </p>
    <h3>
     <a id="3_69">
     </a>
     步骤3：与机器人对话
    </h3>
    <p>
     现在，我们可以编写一个主函数来与机器人进行对话。以下是一个简单的示例：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    user_input <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"你："</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> user_input<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'exit'</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    bot_response <span class="token operator">=</span> chat_with_bot<span class="token punctuation">(</span>user_input<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"机器人:"</span><span class="token punctuation">,</span> bot_response<span class="token punctuation">)</span>
</code></pre>
    <p>
     在这个主函数中，我们使用一个无限循环来持续与机器人进行对话。用户可以输入问题或对话内容，并通过调用
     <code>
      chat_with_bot
     </code>
     函数来获取机器人的回答。如果用户输入"exit"，则程序退出循环。
    </p>
    <p>
     <img alt="image-20230514141627075" src="https://i-blog.csdnimg.cn/blog_migrate/5bfc7cbdd940a06b2decead74f3bee43.png"/>
    </p>
    <h2>
     <a id="_86">
     </a>
     总结
    </h2>
    <p>
     希望本文能为你提供有关使用OpenAI创建对话式聊天机器人的简单案例，希望对你有帮助！
    </p>
    <blockquote>
     <p>
      最近准备考研加期末有点忙，简单分享一下之前研究openai的接口，案例有点简单，只算一个入门，今后再有研究了再补充
     </p>
    </blockquote>
    <p>
     可以直接参考官方文档，更加详细：
     <a href="https://platform.openai.com/docs/api-reference" rel="nofollow">
      openAi文档
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f5958585859582f:61727469636c652f64657461696c732f313331303237313935" class_="artid" style="display:none">
 </p>
</div>


