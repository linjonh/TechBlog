---
layout: post
title: "计算机网络NAT"
date: 2025-03-15 16:13:01 +0800
description: "NAT转换是路由器修改数据包IP地址的过程，分为出站转换（SNAT）和入站转换（DNAT）。"
keywords: "计算机网络——NAT"
categories: ['未分类']
tags: ['计算机网络', '网络', '智能路由器']
artid: "146280945"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146280945
    alt: "计算机网络NAT"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146280945
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146280945
cover: https://bing.ee123.net/img/rand?artid=146280945
image: https://bing.ee123.net/img/rand?artid=146280945
img: https://bing.ee123.net/img/rand?artid=146280945
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     计算机网络——NAT
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、什么是NAT？
    </h2>
    <p>
     <strong>
      NAT（Network Address Translation，网络地址转换）
     </strong>
     是一种将
     <strong>
      私有IP地址
     </strong>
     与
     <strong>
      公有IP地址
     </strong>
     相互映射的技术，主要用于解决IPv4地址不足的问题。它像一名“翻译官”，在数据包经过路由器或防火墙时修改其IP地址，实现内网设备通过少量公网IP访问互联网。
    </p>
    <h4>
     核心作用：
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        节省公网IP
       </strong>
       ：多个设备共享一个公网IP。
      </p>
     </li>
     <li>
      <p>
       <strong>
        隐藏内网结构
       </strong>
       ：对外屏蔽内部网络细节，提升安全性。
      </p>
     </li>
     <li>
      <p>
       <strong>
        解决地址冲突
       </strong>
       ：允许不同内网使用相同的私有IP段。
      </p>
     </li>
    </ul>
    <hr/>
    <h2>
     二、什么是NAT转换？
    </h2>
    <p>
     NAT转换是路由器修改数据包IP地址的过程，分为
     <strong>
      出站转换（SNAT）
     </strong>
     和
     <strong>
      入站转换（DNAT）
     </strong>
     。以下是一个典型流程：
    </p>
    <h4>
     转换步骤（以SNAT为例）：
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        内网设备发送请求
       </strong>
       <br/>
       PC1（私有IP
       <code>
        192.168.1.10
       </code>
       ）访问公网服务器
       <code>
        203.0.113.5
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        路由器修改源IP
       </strong>
       <br/>
       将源IP从
       <code>
        192.168.1.10
       </code>
       替换为公网IP
       <code>
        203.0.113.1
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        服务器响应公网IP
       </strong>
       <br/>
       服务器返回数据到
       <code>
        203.0.113.1
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        路由器还原目标IP
       </strong>
       <br/>
       将目标IP
       <code>
        203.0.113.1
       </code>
       还原为
       <code>
        192.168.1.10
       </code>
       ，转发给PC1。
      </p>
     </li>
    </ol>
    <hr/>
    <h2>
     三、NAT转换的使用场景
    </h2>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         场景
        </strong>
       </th>
       <th>
        <strong>
         说明
        </strong>
       </th>
       <th>
        <strong>
         示例
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         家庭网络
        </strong>
       </td>
       <td>
        多设备（手机、电脑）通过一个公网IP上网
       </td>
       <td>
        家用路由器默认启用NAT
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         企业内网
        </strong>
       </td>
       <td>
        成百上千员工共享少量公网IP访问外网
       </td>
       <td>
        防火墙部署NAT策略
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         云服务器
        </strong>
       </td>
       <td>
        为虚拟机分配私有IP，通过NAT访问公网
       </td>
       <td>
        AWS EC2实例使用NAT网关
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         端口映射
        </strong>
       </td>
       <td>
        将公网IP的特定端口转发到内网服务器（如Web服务）
       </td>
       <td>
        公网IP:80 → 内网服务器:80
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/987197cdf20a4ed7bd72250fbf33e7fa.png"/>
    </p>
    <hr/>
    <h2>
     四、NAT的种类
    </h2>
    <h4>
     1. 静态NAT
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：一对一固定映射，一个私有IP永久绑定一个公网IP。
      </p>
     </li>
     <li>
      <p>
       <strong>
        用途
       </strong>
       ：托管内网服务器（如Web服务器），支持从公网直接访问。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
       <br/>
       内网IP
       <code>
        192.168.1.100
       </code>
       ↔ 公网IP
       <code>
        203.0.113.10
       </code>
       。
       <img alt="" src="https://i-blog.csdnimg.cn/direct/16bdd5ca20d84d309d8a58b4130978ab.png"/>
      </p>
     </li>
    </ul>
    <h4>
     2. 动态NAT
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：从公网IP池中动态分配IP，映射关系不固定（但同一会话期间不变）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        用途
       </strong>
       ：企业内网多设备临时访问外网。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
       <br/>
       内网设备共享公网IP池
       <code>
        203.0.113.1~203.0.113.5
       </code>
       。
       <img alt="" src="https://i-blog.csdnimg.cn/direct/61a0a3e2bfd44f64bb74ffa8c61b3498.png"/>
      </p>
     </li>
    </ul>
    <h4>
     3. NAPT（网络地址端口转换）
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：多对一映射，通过
       <strong>
        端口号
       </strong>
       区分不同会话（最常用的NAT类型）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        用途
       </strong>
       ：家庭或小型企业网络，允许多设备共享单一公网IP。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         PC1：
         <code>
          192.168.1.10:1234
         </code>
         →
         <code>
          203.0.113.1:50001
         </code>
        </p>
       </li>
       <li>
        <p>
         PC2：
         <code>
          192.168.1.11:5678
         </code>
         →
         <code>
          203.0.113.1:50002
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h2>
     五、NAT和NAPT的区别
    </h2>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         对比维度
        </strong>
       </th>
       <th>
        <strong>
         NAT
        </strong>
       </th>
       <th>
        <strong>
         NAPT（PAT）
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         映射方式
        </strong>
       </td>
       <td>
        IP地址一对一映射
       </td>
       <td>
        IP地址 + 端口号多对一映射
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         公网IP消耗
        </strong>
       </td>
       <td>
        需要与内网设备等量的公网IP
       </td>
       <td>
        仅需1个公网IP
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         适用场景
        </strong>
       </td>
       <td>
        托管服务器、需要固定公网IP访问的服务
       </td>
       <td>
        普通上网、多设备共享IP
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         端口复用
        </strong>
       </td>
       <td>
        不支持
       </td>
       <td>
        通过不同端口区分会话
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         典型设备
        </strong>
       </td>
       <td>
        企业级防火墙、高级路由器
       </td>
       <td>
        家用路由器、小型企业网关
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         配置复杂度
        </strong>
       </td>
       <td>
        较高（需手动绑定IP）
       </td>
       <td>
        低（自动管理端口映射）
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f58594c3641414438432f:61727469636c652f64657461696c732f313436323830393435" class_="artid" style="display:none">
 </p>
</div>


