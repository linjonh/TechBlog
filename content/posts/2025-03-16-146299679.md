---
layout: post
title: "android-ConstraintLayout布局-实战打造复杂界面的最佳实践"
date: 2025-03-16 19:20:15 +0800
description: "每个视图都需要在水平和垂直方向上至少有一个约束，否则视图会默认放置在左上角（0,0）位置。（或 **app:layout_constraintEnd_toEndOf）**约束到父布局的顶部和左右边缘。的使用，涵盖基本布局、引导线、链、屏障、组以及动态修改约束等内容。：将多个视图在水平或垂直方向上连接起来，形成一种特殊的关系。相对于其他视图的约束：将视图的边与其他视图的边对齐。动态调整位置，始终位于按钮1和按钮2的结束边。文本框位于按钮1和按钮2的下方，水平居中。动态修改按钮的约束，将其移动到右下角。"
keywords: "android ConstraintLayout布局 实战：打造复杂界面的最佳实践"
categories: ['Android']
tags: ['Android']
artid: "146299679"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146299679
    alt: "android-ConstraintLayout布局-实战打造复杂界面的最佳实践"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146299679
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146299679
cover: https://bing.ee123.net/img/rand?artid=146299679
image: https://bing.ee123.net/img/rand?artid=146299679
img: https://bing.ee123.net/img/rand?artid=146299679
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     android ConstraintLayout布局 实战：打造复杂界面的最佳实践
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <strong>
      ConstraintLayout
     </strong>
     的核心思想是通过 约束（
     <strong>
      Constraints
     </strong>
     ） 来定义视图之间的关系。每个视图都需要在水平和垂直方向上至少有一个约束，否则视图会默认放置在左上角（0,0）位置。
    </p>
    <p>
     <strong>
      约束的类型
     </strong>
     <br/>
     <strong>
      相对于父布局的约束
     </strong>
     ：将视图的边与父布局的边对齐。
    </p>
    <p>
     <strong>
      加粗样式
     </strong>
     相对于其他视图的约束：将视图的边与其他视图的边对齐。
    </p>
    <p>
     <strong>
      引导线（Guideline）
     </strong>
     ：一种不可见的辅助线，用于创建动态约束。
    </p>
    <p>
     <strong>
      屏障（Barrier）
     </strong>
     ：根据一组视图的动态位置自动调整约束。
    </p>
    <p>
     <strong>
      链（Chain）
     </strong>
     ：将多个视图在水平或垂直方向上连接起来，形成一种特殊的关系。
    </p>
    <p>
     在
     <strong>
      build.gradle
     </strong>
     中添加
     <strong>
      ConstraintLayout
     </strong>
     的依赖：
    </p>
    <pre><code>dependencies {
    implementation 'androidx.constraintlayout:constraintlayout:2.1.0'
}
</code></pre>
    <p>
     下面我会通过
     <strong>
      详细的示例
     </strong>
     来讲解
     <strong>
      ConstraintLayout
     </strong>
     的使用，涵盖基本布局、引导线、链、屏障、组以及动态修改约束等内容。每个示例都会附带代码和说明。
    </p>
    <p>
     <strong>
      1. 基本布局示例
     </strong>
     <br/>
     <strong>
      目标：实现一个简单的界面，包含两个按钮和一个文本框。
     </strong>
     <br/>
     按钮1位于左上角。
    </p>
    <p>
     按钮2位于右上角。
    </p>
    <p>
     文本框位于按钮1和按钮2的下方，水平居中。
    </p>
    <p>
     <strong>
      代码：
     </strong>
    </p>
    <pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;!-- 按钮1：左上角 --&gt;
    &lt;Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        android:layout_marginTop="16dp"
        android:layout_marginStart="16dp"/&gt;

    &lt;!-- 按钮2：右上角 --&gt;
    &lt;Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 2"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="16dp"
        android:layout_marginEnd="16dp"/&gt;

    &lt;!-- 文本框：水平居中，位于按钮1和按钮2的下方 --&gt;
    &lt;TextView
        android:id="@+id/textView"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Hello, ConstraintLayout!"
        android:gravity="center"
        android:padding="16dp"
        app:layout_constraintTop_toBottomOf="@id/button1"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="16dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
    <p>
     <strong>
      说明：
     </strong>
     <br/>
     按钮1和按钮2分别通过
     <strong>
      app:layout_constraintTop_toTopOf
     </strong>
     和
     <strong>
      app:layout_constraintStart_toStartOf
     </strong>
     （或 **app:layout_constraintEnd_toEndOf）**约束到父布局的顶部和左右边缘。
    </p>
    <p>
     文本框通过
     <strong>
      app:layout_constraintTop_toBottomOf
     </strong>
     约束到按钮1的下方，并通过
     <strong>
      app:layout_constraintStart_toStartOf
     </strong>
     和
     <strong>
      app:layout_constraintEnd_toEndOf
     </strong>
     实现水平居中。
    </p>
    <p>
     <strong>
      2. 引导线（Guideline）示例
     </strong>
     <br/>
     <strong>
      目标：使用垂直引导线将界面分为左右两部分，左侧放置一个按钮，右侧放置一个文本框。
      <br/>
      代码：
     </strong>
    </p>
    <pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;!-- 垂直引导线，位于父布局的50%位置 --&gt;
    &lt;androidx.constraintlayout.widget.Guideline
        android:id="@+id/guideline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.5"/&gt;

    &lt;!-- 按钮：位于引导线左侧 --&gt;
    &lt;Button
        android:id="@+id/button"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Button"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toStartOf="@id/guideline"
        android:layout_marginTop="16dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"/&gt;

    &lt;!-- 文本框：位于引导线右侧 --&gt;
    &lt;TextView
        android:id="@+id/textView"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="This is the right side."
        android:gravity="center"
        android:padding="16dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toEndOf="@id/guideline"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="16dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
    <p>
     <strong>
      说明
     </strong>
     ：
     <br/>
     引导线通过
     <strong>
      app:layout_constraintGuide_percent=“0.5”
     </strong>
     将界面分为左右两部分。
    </p>
    <p>
     按钮的
     <strong>
      app:layout_constraintEnd_toStartOf
     </strong>
     约束到引导线，文本框的
     <strong>
      app:layout_constraintStart_toEndOf
     </strong>
     约束到引导线。
    </p>
    <p>
     <strong>
      3. 链（Chain）示例
     </strong>
     <br/>
     <strong>
      目标：创建水平链，包含三个按钮，均匀分布。
      <br/>
      代码：
     </strong>
    </p>
    <pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;!-- 按钮1：链的起始 --&gt;
    &lt;Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1"
        app:layout_constraintHorizontal_chainStyle="spread"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toStartOf="@id/button2"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="8dp"/&gt;

    &lt;!-- 按钮2：链的中间 --&gt;
    &lt;Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 2"
        app:layout_constraintStart_toEndOf="@id/button1"
        app:layout_constraintEnd_toStartOf="@id/button3"
        android:layout_marginStart="8dp"
        android:layout_marginEnd="8dp"/&gt;

    &lt;!-- 按钮3：链的结束 --&gt;
    &lt;Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 3"
        app:layout_constraintStart_toEndOf="@id/button2"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginStart="8dp"
        android:layout_marginEnd="16dp"/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
    <p>
     <strong>
      说明：
     </strong>
     <br/>
     通过
     <strong>
      app:layout_constraintHorizontal_chainStyle=“spread”
     </strong>
     设置链的类型为均匀分布。
    </p>
    <p>
     每个按钮通过
     <strong>
      app:layout_constraintStart_toEndOf
     </strong>
     和
     <strong>
      app:layout_constraintEnd_toStartOf
     </strong>
     连接到下一个按钮。
    </p>
    <p>
     <strong>
      4. 屏障（Barrier）示例
      <br/>
      目标：根据两个按钮的动态宽度，创建一个屏障，使文本框始终位于较长的按钮下方。
      <br/>
      代码：
     </strong>
    </p>
    <pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;!-- 按钮1 --&gt;
    &lt;Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Short Button"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        android:layout_marginTop="16dp"
        android:layout_marginStart="16dp"/&gt;

    &lt;!-- 按钮2 --&gt;
    &lt;Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Longer Button Text"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toEndOf="@id/button1"
        android:layout_marginTop="16dp"
        android:layout_marginStart="16dp"/&gt;

    &lt;!-- 屏障：位于按钮1和按钮2的结束边 --&gt;
    &lt;androidx.constraintlayout.widget.Barrier
        android:id="@+id/barrier"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:barrierDirection="end"
        app:constraint_referenced_ids="button1,button2"/&gt;

    &lt;!-- 文本框：位于屏障下方 --&gt;
    &lt;TextView
        android:id="@+id/textView"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="This is below the longer button."
        android:gravity="center"
        android:padding="16dp"
        app:layout_constraintTop_toBottomOf="@id/barrier"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="16dp"/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
    <p>
     <strong>
      说明：
     </strong>
     <br/>
     屏障通过
     <strong>
      app:barrierDirection=“end”
     </strong>
     动态调整位置，始终位于按钮1和按钮2的结束边。
    </p>
    <p>
     文本框通过
     <strong>
      app:layout_constraintTop_toBottomOf
     </strong>
     约束到屏障的下方。
    </p>
    <p>
     <strong>
      5. 动态修改约束
     </strong>
     <br/>
     <strong>
      目标：在代码中动态修改按钮的位置。
      <br/>
      代码：
     </strong>
    </p>
    <pre><code>ConstraintLayout constraintLayout = findViewById(R.id.constraintLayout);
ConstraintSet constraintSet = new ConstraintSet();
constraintSet.clone(constraintLayout);

// 将按钮1移动到父布局的右下角
constraintSet.connect(R.id.button1, ConstraintSet.END, ConstraintSet.PARENT_ID, ConstraintSet.END, 16);
constraintSet.connect(R.id.button1, ConstraintSet.BOTTOM, ConstraintSet.PARENT_ID, ConstraintSet.BOTTOM, 16);
constraintSet.applyTo(constraintLayout);
</code></pre>
    <p>
     <strong>
      说明：
     </strong>
     <br/>
     使用
     <strong>
      ConstraintSet
     </strong>
     动态修改按钮的约束，将其移动到右下角。
    </p>
    <p>
     通过这些示例，你可以掌握
     <strong>
      ConstraintLayout
     </strong>
     的核心用法和高级功能。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e637364:6e2e6e65742f74616e6777656967756f30333035313938372f:61727469636c652f64657461696c732f313436323939363739" class_="artid" style="display:none">
 </p>
</div>


