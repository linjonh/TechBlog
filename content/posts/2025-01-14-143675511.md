---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71796a31393932303730342f:61727469636c652f64657461696c732f313433363735353131"
layout: post
title: "Linuxç³»åˆ—VNCå®‰è£…sshåŽ,sshæ— æ³•ç™»å½•"
date: 2025-01-14 09:47:02 +08:00
description: "ðŸ’ðŸ’ðŸ’æ¬¢è¿Žæ¥åˆ°æˆ‘çš„åšå®¢ï¼Œå¾ˆé«˜å…´èƒ½å¤Ÿåœ¨è¿™é‡Œå’Œæ‚¨è§é¢ï¼å¸Œæœ›æ‚¨åœ¨è¿™é‡Œå¯ä»¥æ„Ÿå—åˆ°ä¸€ä»½è½»æ¾æ„‰å¿«çš„æ°›å›´ï¼Œä¸ä»…å¯ä»¥"
keywords: "vnc ssh"
categories: ['S', 'Linux']
tags: ['è¿ç»´', 'Ssh', 'Linux']
artid: "143675511"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143675511
    alt: "Linuxç³»åˆ—VNCå®‰è£…sshåŽ,sshæ— æ³•ç™»å½•"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143675511
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143675511
---

# ã€Linuxç³»åˆ—ã€‘VNCå®‰è£…sshåŽ,sshæ— æ³•ç™»å½•

> ðŸ’ðŸ’ðŸ’æ¬¢è¿Žæ¥åˆ°æˆ‘çš„åšå®¢ï¼Œå¾ˆé«˜å…´èƒ½å¤Ÿåœ¨è¿™é‡Œå’Œæ‚¨è§é¢ï¼å¸Œæœ›æ‚¨åœ¨è¿™é‡Œå¯ä»¥æ„Ÿå—åˆ°ä¸€ä»½è½»æ¾æ„‰å¿«çš„æ°›å›´ï¼Œä¸ä»…å¯ä»¥èŽ·å¾—æœ‰è¶£çš„å†…å®¹å’ŒçŸ¥è¯†ï¼Œä¹Ÿå¯ä»¥ç•…æ‰€æ¬²è¨€ã€åˆ†äº«æ‚¨çš„æƒ³æ³•å’Œè§è§£ã€‚
>   
> ![img](https://img-blog.csdnimg.cn/img_convert/5ce5e68e322584b3aa8304269fb6a2f7.jpeg#pic_center)
>
> * æŽ¨è:
>   [kwan çš„é¦–é¡µ](https://qinyingjie.blog.csdn.net/?type=blog)
>   ,æŒç»­å­¦ä¹ ,ä¸æ–­æ€»ç»“,å…±åŒè¿›æ­¥,æ´»åˆ°è€å­¦åˆ°è€
> * å¯¼èˆª
>   + [æª€è¶Šå‰‘æŒ‡å¤§åŽ‚ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11763029.html)
>     :å…¨é¢æ€»ç»“ java æ ¸å¿ƒæŠ€æœ¯,jvm,å¹¶å‘ç¼–ç¨‹ redis,kafka,Spring,å¾®æœåŠ¡ç­‰
>   + [å¸¸ç”¨å¼€å‘å·¥å…·ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11474211.html)
>     :å¸¸ç”¨çš„å¼€å‘å·¥å…·,IDEA,Mac,Alfred,Git,typora ç­‰
>   + [æ•°æ®åº“ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11474265.html)
>     :è¯¦ç»†æ€»ç»“äº†å¸¸ç”¨æ•°æ®åº“ mysql æŠ€æœ¯ç‚¹,ä»¥åŠå·¥ä½œä¸­é‡åˆ°çš„ mysql é—®é¢˜ç­‰
>   + [æ–°ç©ºé—´ä»£ç å·¥ä½œå®¤](https://meihua150.cn/)
>     :æä¾›å„ç§è½¯ä»¶æœåŠ¡,æ‰¿æŽ¥å„ç§æ¯•ä¸šè®¾è®¡,æ¯•ä¸šè®ºæ–‡ç­‰
>   + [æ‡’äººè¿ç»´ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_7540627.html)
>     :æ€»ç»“å¥½ç”¨çš„å‘½ä»¤,è§£æ”¾åŒæ‰‹ä¸é¦™å—?èƒ½ç”¨ä¸€ä¸ªå‘½ä»¤å®Œæˆç»ä¸ç”¨ä¸¤ä¸ªæ“ä½œ
>   + [æ•°æ®ç»“æž„ä¸Žç®—æ³•ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11480075.html)
>     :æ€»ç»“æ•°æ®ç»“æž„å’Œç®—æ³•,ä¸åŒç±»åž‹é’ˆå¯¹æ€§è®­ç»ƒ,æå‡ç¼–ç¨‹æ€ç»´,å‰‘æŒ‡å¤§åŽ‚
>
> éžå¸¸æœŸå¾…å’Œæ‚¨ä¸€èµ·åœ¨è¿™ä¸ªå°å°çš„ç½‘ç»œä¸–ç•Œé‡Œå…±åŒæŽ¢ç´¢ã€å­¦ä¹ å’Œæˆé•¿ã€‚ðŸ’ðŸ’ðŸ’ âœ¨âœ¨ æ¬¢è¿Žè®¢é˜…æœ¬ä¸“æ  âœ¨âœ¨

#### åšå®¢ç›®å½•

* + [ä¸€.ä¿®æ”¹ ssh é…ç½®](#_ssh__16)
  + [äºŒ.é‡å¯ ssh æœåŠ¡](#_ssh__35)
  + - [1.ä¿å­˜é…ç½®æ–‡ä»¶](#1_39)
    - [2.é‡å¯ SSH æœåŠ¡](#2_SSH__43)
    - [3.æ£€æŸ¥ SSH æœåŠ¡çŠ¶æ€](#3_SSH__63)
    - [4.æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•](#4_84)
    - [5.ç¡®ä¿é˜²ç«å¢™å…è®¸ SSH ç«¯å£](#5_SSH__100)
    - [6.é‡æ–°å°è¯•è¿žæŽ¥](#6_116)

### ä¸€.ä¿®æ”¹ ssh é…ç½®

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/73b63639814b4492919c793b17805f85.png#pic_center)

VNC æœåŠ¡å™¨ä¸èƒ½ä½¿ç”¨ SSH 22 ç«¯å£ç™»å½•çš„é—®é¢˜å¯èƒ½ç”±å¤šç§åŽŸå› å¼•èµ·ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„åŽŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š

1. **SSH æœåŠ¡æœªå¼€å¯æˆ–é…ç½®å¼‚å¸¸**
   ï¼šå¦‚æžœ SSH æœåŠ¡ï¼ˆ
   `sshd`
   ï¼‰æœªå¼€å¯æˆ–é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯
   `/etc/ssh/sshd_config`
   ï¼‰æƒé™è¢«ä¿®æ”¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ— æ³•é€šè¿‡ SSH 22 ç«¯å£ç™»å½•ã€‚ä½ å¯ä»¥é€šè¿‡ VNC ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œæ£€æŸ¥
   `sshd`
   è¿›ç¨‹æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œå¹¶æ£€æŸ¥é…ç½®æ–‡ä»¶æƒé™ã€‚
2. **SSH æœåŠ¡æœªè®¾ç½®å¼€æœºè‡ªå¯åŠ¨**
   ï¼šå¦‚æžœ SSH æœåŠ¡æœªè®¾ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨ï¼Œé‡å¯å®žä¾‹åŽ SSH æœåŠ¡å¯èƒ½ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œå¯¼è‡´æ— æ³•é€šè¿‡ SSH è¿œç¨‹è¿žæŽ¥ã€‚å¯ä»¥é€šè¿‡ VNC ç™»å½•å®žä¾‹ï¼Œç„¶åŽæ£€æŸ¥å¹¶è®¾ç½® SSH æœåŠ¡å¼€æœºè‡ªå¯åŠ¨ã€‚
3. **å®‰å…¨ç»„è§„åˆ™é™åˆ¶**
   ï¼šå¦‚æžœä½ çš„æœåŠ¡å™¨åœ¨äº‘å¹³å°ä¸Šï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥å®‰å…¨ç»„è§„åˆ™ï¼Œç¡®ä¿å…è®¸ SSHï¼ˆ22 ç«¯å£ï¼‰çš„å…¥ç«™è§„åˆ™å·²ç»è®¾ç½®ã€‚å¦‚æžœæ²¡æœ‰æ­£ç¡®è®¾ç½®ï¼ŒSSH è¿žæŽ¥ä¼šè¢«é˜»æ­¢ã€‚
4. **é˜²ç«å¢™è®¾ç½®**
   ï¼šæœåŠ¡å™¨ä¸Šçš„é˜²ç«å¢™å¯èƒ½é˜»æ­¢äº† SSH ç«¯å£ã€‚éœ€è¦æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€ï¼Œå¹¶ç¡®ä¿ SSH ç«¯å£ï¼ˆ22ï¼‰æ˜¯å¼€æ”¾çš„ã€‚
5. **SSH é…ç½®æ–‡ä»¶é”™è¯¯**
   ï¼šæ£€æŸ¥
   `/etc/ssh/sshd_config`
   æ–‡ä»¶ï¼Œç¡®ä¿ PermitRootLogin å’Œ PasswordAuthentication ç­‰å‚æ•°è®¾ç½®æ­£ç¡®ã€‚ä¾‹å¦‚ï¼Œå°†
   `PermitRootLogin no`
   ä¿®æ”¹ä¸º
   `PermitRootLogin yes`
   ï¼Œå°†
   `PasswordAuthentication no`
   ä¿®æ”¹ä¸º
   `PasswordAuthentication yes`
   ã€‚
6. **SELinux è®¾ç½®**
   ï¼šå¦‚æžœ SELinux è®¾ç½®ä¸º enforcing æ¨¡å¼ï¼Œå¯èƒ½ä¼šé˜»æ­¢ SSH æœåŠ¡ã€‚å¯ä»¥å°è¯•å°† SELinux è®¾ç½®ä¸º disabled æˆ– permissive æ¨¡å¼ã€‚
7. **VNC é…ç½®é—®é¢˜**
   ï¼šå¦‚æžœ VNC é…ç½®ä¸æ­£ç¡®ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ— æ³•é€šè¿‡ SSH è¿žæŽ¥ã€‚éœ€è¦æ£€æŸ¥ VNC é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿ VNC æœåŠ¡æ­£ç¡®å¯åŠ¨ï¼Œå¹¶ä¸”ç«¯å£ï¼ˆé€šå¸¸æ˜¯ 5901 åŠä»¥ä¸Šï¼‰æ²¡æœ‰è¢«é˜²ç«å¢™é˜»æ­¢ã€‚
     
   ![](https://img-blog.csdnimg.cn/img_convert/073d14fb5a4fac0dc4539df8f90f621e.png#pic_center)

### äºŒ.é‡å¯ ssh æœåŠ¡

ä¿®æ”¹ SSH é…ç½®æ–‡ä»¶
`/etc/ssh/sshd_config`
åŽï¼Œè¦ä½¿é…ç½®ç”Ÿæ•ˆï¼Œä½ éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

#### 1.ä¿å­˜é…ç½®æ–‡ä»¶

ç¡®ä¿ä½ å·²ç»ä¿å­˜äº†å¯¹
`sshd_config`
æ–‡ä»¶æ‰€åšçš„æ›´æ”¹ã€‚å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯å‘½ä»¤è¡Œç¼–è¾‘å™¨ï¼ˆå¦‚
`vi`
æˆ–
`nano`
ï¼‰ï¼Œè¯·ç¡®ä¿ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚

#### 2.é‡å¯ SSH æœåŠ¡

ä¸ºäº†è®©æ–°çš„é…ç½®ç”Ÿæ•ˆï¼Œä½ éœ€è¦é‡å¯ SSH æœåŠ¡ã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®Œæˆï¼š

```bash
sudo systemctl restart sshd

```

æˆ–è€…ï¼Œå¦‚æžœä½ çš„ç³»ç»Ÿä½¿ç”¨çš„æ˜¯è¾ƒæ—§çš„ init ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ï¼š

```bash
sudo service ssh restart

```

æˆ–è€…ï¼š

```bash
sudo /etc/init.d/ssh restart

```

#### 3.æ£€æŸ¥ SSH æœåŠ¡çŠ¶æ€

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/9beb0575d4864c70bcafb72772e247dd.png#pic_center)

é‡å¯ SSH æœåŠ¡åŽï¼Œä½ å¯ä»¥æ£€æŸ¥æœåŠ¡çš„çŠ¶æ€ä»¥ç¡®ä¿å®ƒæ­£åœ¨è¿è¡Œï¼š

```bash
sudo systemctl status sshd

```

æˆ–è€…ï¼š

```bash
sudo service ssh status

```

æˆ–è€…ï¼š

```bash
sudo /etc/init.d/ssh status

```

#### 4.æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•

åœ¨é‡å¯ SSH æœåŠ¡ä¹‹å‰ï¼Œå»ºè®®æ£€æŸ¥
`sshd_config`
æ–‡ä»¶çš„è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œä»¥é¿å…å› é…ç½®é”™è¯¯å¯¼è‡´ SSH æœåŠ¡å¯åŠ¨å¤±è´¥ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
sudo sshd -t

```

æˆ–è€…ï¼š

```bash
sudo ssh -T -a localhost

```

è¿™äº›å‘½ä»¤ä¼šæ£€æŸ¥
`sshd_config`
æ–‡ä»¶çš„è¯­æ³•ï¼Œå¹¶æŠ¥å‘Šä»»ä½•é”™è¯¯ã€‚

#### 5.ç¡®ä¿é˜²ç«å¢™å…è®¸ SSH ç«¯å£

å¦‚æžœä½ æ›´æ”¹äº† SSH çš„é»˜è®¤ç«¯å£ï¼ˆä»Ž 22 æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼‰ï¼Œç¡®ä¿é˜²ç«å¢™è§„åˆ™å…è®¸æ–°çš„ç«¯å£ã€‚å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯
`iptables`
ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…è®¸æ–°çš„ç«¯å£ï¼ˆå‡è®¾æ–°ç«¯å£ä¸º 2222ï¼‰ï¼š

```bash
sudo iptables -A INPUT -p tcp --dport 2222 -j ACCEPT
sudo iptables -A OUTPUT -p tcp --sport 2222 -j ACCEPT

```

å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯
`firewalld`
ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
sudo firewall-cmd --permanent --add-port=2222/tcp
sudo firewall-cmd --reload

```

#### 6.é‡æ–°å°è¯•è¿žæŽ¥

åœ¨å®Œæˆä¸Šè¿°æ­¥éª¤åŽï¼Œå°è¯•é‡æ–°é€šè¿‡ SSH è¿žæŽ¥åˆ°æœåŠ¡å™¨ï¼Œä»¥éªŒè¯é…ç½®æ›´æ”¹æ˜¯å¦ç”Ÿæ•ˆã€‚

> è§‰å¾—æœ‰ç”¨çš„è¯ç‚¹ä¸ªèµž
> `ðŸ‘ðŸ»`
> å‘—ã€‚
>   
> â¤ï¸â¤ï¸â¤ï¸æœ¬äººæ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰çº°æ¼ï¼Œæ¬¢è¿Žå„ä½å¤§ä½¬è¯„è®ºæ‰¹è¯„æŒ‡æ­£ï¼ðŸ˜„ðŸ˜„ðŸ˜„
>
> ðŸ’˜ðŸ’˜ðŸ’˜å¦‚æžœè§‰å¾—è¿™ç¯‡æ–‡å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿè¯·ç»™ä¸ªç‚¹èµžã€æ”¶è—ä¸‹å§ï¼Œéžå¸¸æ„Ÿè°¢!ðŸ‘ ðŸ‘ ðŸ‘
>
> ðŸ”¥ðŸ”¥ðŸ”¥Stay Hungry Stay Foolish é“é˜»ä¸”é•¿,è¡Œåˆ™å°†è‡³,è®©æˆ‘ä»¬ä¸€èµ·åŠ æ²¹å§ï¼ðŸŒ™ðŸŒ™ðŸŒ™
>
> ![img](https://img-blog.csdnimg.cn/img_convert/a08571f736dc04b5bef51cd09e8e3a0a.gif#pic_center)