---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34323237383234302f:61727469636c652f64657461696c732f313436303932363332"
layout: post
title: "electron-vue3-vite-æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„åŒå‘é€šä¿¡"
date: 2025-03-07 12:31:25 +08:00
description: "ä»¥Electronå®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„â€æ¸²æŸ“è¿›ç¨‹è§¦å‘åŠ¨ä½œï¼Œç­‰å¾…ä¸»è¿›ç¨‹è¿”å›å†…å®¹â€œä¸ºä¾‹ã€‚Electronçš„åŒå‘é€šä¿¡é‡‡ç”¨ipcMain.handle(electronä¸»è¿›ç¨‹å†…éƒ¨ç›‘å¬)ã€ipcRenderer.invoke(åŒ…è£…ç»™å‰ç«¯é¡µé¢)"
keywords: "electron åŒå‘é€šä¿¡ ä¸ç”¨é¢„åŠ è½½"
categories: ['Forge']
tags: ['å‰ç«¯', 'Javascript', 'Electron']
artid: "146092632"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146092632
    alt: "electron-vue3-vite-æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„åŒå‘é€šä¿¡"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146092632
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146092632
cover: https://bing.ee123.net/img/rand?artid=146092632
image: https://bing.ee123.net/img/rand?artid=146092632
img: https://bing.ee123.net/img/rand?artid=146092632
---

# electron + vue3 + vite æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„åŒå‘é€šä¿¡

> ç”¨ç¤ºä¾‹è®²è§£ä¸‹æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„åŒå‘é€šä¿¡
>   
> åˆå§‹ç‰ˆæœ¬é¡¹ç›®ç»“æ„å¯å‚è€ƒé¡¹ç›®ï¼šhttps://github.com/ylpxzx/electron-forge-project/tree/init\_project

![è¯·æ·»åŠ å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/6e09a79e47454ac9803fe0a356f624a1.gif)

### æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹ï¼ˆåŒå‘ï¼‰

> ä»¥Electronå®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„â€æ¸²æŸ“è¿›ç¨‹è§¦å‘åŠ¨ä½œï¼Œç­‰å¾…ä¸»è¿›ç¨‹è¿”å›å†…å®¹â€œä¸ºä¾‹ã€‚
>   
> Electronçš„åŒå‘é€šä¿¡é‡‡ç”¨
> `ipcMain.handle(electronä¸»è¿›ç¨‹å†…éƒ¨ç›‘å¬)ã€ipcRenderer.invoke(åŒ…è£…ç»™å‰ç«¯é¡µé¢)`
>   
> å®ç°æ•´é¡¹ç›®ç¤ºä¾‹ï¼šhttps://github.com/ylpxzx/electron-forge-project/tree/render\_to\_main\_two\_way

ipcMain.handleæ˜¯ Electron ä¸­ç”¨äºå¤„ç†å¼‚æ­¥ IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰è°ƒç”¨çš„æ–¹æ³•ã€‚ipcMain.handle(â€˜dialog:openFileâ€™, handleFileOpen) çš„ä½œç”¨æ˜¯æ³¨å†Œä¸€ä¸ªå¤„ç†å‡½æ•° handleFileOpenï¼Œå½“æ¸²æŸ“è¿›ç¨‹ï¼ˆé€šå¸¸æ˜¯ä½ çš„ Vue åº”ç”¨ï¼‰å‘é€ä¸€ä¸ªåä¸º dialog:openFile çš„å¼‚æ­¥æ¶ˆæ¯æ—¶ï¼Œè¿™ä¸ªå¤„ç†å‡½æ•°ä¼šè¢«è°ƒç”¨å¹¶è¿”å›å¤„ç†ç»“æœã€‚

#### é€šä¿¡é€»è¾‘

* src/main.js
    
  ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/25d869a8988948989985f1775c0176fa.png)
    
  å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

  ```javascript
  import { app, BrowserWindow, ipcMain, dialog } from 'electron';
  import path from 'node:path';
  import started from 'electron-squirrel-startup';

  // Handle creating/removing shortcuts on Windows when installing/uninstalling.
  if (started) {
    app.quit();
  }

  async function handleFileOpen () {
    const { canceled, filePaths } = await dialog.showOpenDialog()
    if (!canceled) {
      return filePaths[0]
    }
  }

  const createWindow = () => {
    // Create the browser window.
    const mainWindow = new BrowserWindow({
      width: 800,
      height: 600,
      webPreferences: {
        preload: path.join(__dirname, 'preload.js'),
      },
    });

    // and load the index.html of the app.
    if (MAIN_WINDOW_VITE_DEV_SERVER_URL) {
      mainWindow.loadURL(MAIN_WINDOW_VITE_DEV_SERVER_URL);
    } else {
      mainWindow.loadFile(path.join(__dirname, `../renderer/${MAIN_WINDOW_VITE_NAME}/index.html`));
    }

    // Open the DevTools.
    mainWindow.webContents.openDevTools();
  };

  app.whenReady().then(() => {
    createWindow();

    // Bidirectional communication between rendering process and main process
    ipcMain.handle('dialog:openFile', handleFileOpen)

    app.on('activate', () => {
      if (BrowserWindow.getAllWindows().length === 0) {
        createWindow();
      }
    });
  });

  app.on('window-all-closed', () => {
    if (process.platform !== 'darwin') {
      app.quit();
    }
  });

  ```

  åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå½“ç”¨æˆ·åœ¨ Vue åº”ç”¨ä¸­è§¦å‘ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†äº‹ä»¶æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šå‘é€ä¸€ä¸ª â€˜dialog:openFileâ€™ æ¶ˆæ¯åˆ°ä¸»è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹æ¥æ”¶åˆ°æ¶ˆæ¯åä¼šè°ƒç”¨ handleFileOpen å‡½æ•°æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶è¿”å›å¤„ç†ç»“æœã€‚
* src/preload.js
    
  `preload.js`
  ç”¨äºä¸Šä¸‹æ–‡éš”ç¦»ï¼›å°†ç¡®ä¿æ‚¨çš„
  `é¢„åŠ è½½è„šæœ¬`
  å’Œ
  `Electronçš„å†…éƒ¨é€»è¾‘`
  è¿è¡Œåœ¨æ‰€åŠ è½½çš„
  `webcontentç½‘é¡µ`
  ä¹‹å¤–çš„å¦ä¸€ä¸ªç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ç¯å¢ƒé‡Œã€‚ æœ‰åŠ©äºé˜»æ­¢ç½‘ç«™è®¿é—®Electron çš„å†…éƒ¨ç»„ä»¶å’Œ é¢„åŠ è½½è„šæœ¬å¯è®¿é—®çš„é«˜ç­‰çº§æƒé™çš„APIã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯æä¾›ä¸€ä¸ªå…¥å£ç»™æ¸²æŸ“è¿›ç¨‹(å‰ç«¯é¡µé¢)ä½¿ç”¨ï¼Œé¿å…è¢«æ”»å‡»è€…éšæ„è°ƒç”¨electronå†…éƒ¨APIã€‚

  ```javascript
  const { contextBridge, ipcRenderer } = require('electron/renderer')

  contextBridge.exposeInMainWorld('electronAPI', {
    openFile: () => ipcRenderer.invoke('dialog:openFile'),
  })

  ```

#### é¡µé¢ç¤ºä¾‹

é€šä¿¡é€»è¾‘å®ç°åï¼Œæ¥ä¸‹æ¥å°±ç”¨ä¸€ä¸ªé¡µé¢æ¥éªŒè¯ç»“æœ

* src/vue-project/pages/renderToMain/TwoWay.vue

  ```javascript
  <template>
    <div>
      <button type="button" @click="onClick" id="btn">Open a File</button>
      <div>
        File path: <strong>{{ inputVal }}</strong>
      </div>
    </div>
  </template>

  <script setup>
  import { ref } from 'vue'
  const inputVal = ref('')
  const onClick = async () => {
    // è°ƒç”¨electronå¯¹å¤–æš´éœ²çš„openFile API
    const filePath = await electronAPI.openFile()
    inputVal.value = filePath
  }
  </script>

  ```
* src/vue-project/router/index.js

  ```javascript
  import { createWebHashHistory, createRouter } from 'vue-router'

  import HomeView from '@/vue-project/pages/home/index.vue'
  import RenderToMainTwoWay from '@/vue-project/pages/renderToMain/TwoWay.vue'

  const routes = [
    { path: '/', component: HomeView },
    // æ³¨å†Œç¤ºä¾‹è·¯ç”±
    { path: '/renderToMainTwoWay', component: RenderToMainTwoWay },
  ]
  const router = createRouter({
    history: createWebHashHistory(),
    routes,
  })

  export default router;

  ```
* src/vue-project/App.vue

  ```javascript
  <template>
    <h1>ğŸ–¥ï¸ Hello World!</h1>
    <p>Welcome to your Electron application.</p>
    <p>
      <strong>Current route path:</strong> {{ $route.fullPath }}
    </p>
    <nav>
      <div>
        <RouterLink to="/">Go to Home</RouterLink>
      </div>
      <div>
        <RouterLink to="/renderToMainTwoWay">Render-Process <span style="font-size: 10px;"><--></span> Main-Process
        </RouterLink>
      </div>
    </nav>
    <div style="margin-top: 20px; border: 1px solid grey; padding: 20px; border-radius: 10px;">
      <router-view></router-view>
    </div>
  </template>

  <script setup>
  </script>

  ```

#### é¡¹ç›®ç»“æ„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/ac772ac85f864f87822f39864a649278.png)