---
layout: post
title: "spring-boot-发送邮件验证码"
date: 2025-03-12 14:49:58 +0800
description: "qq邮箱在–>设置–>账号POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务。SimpleMailMessage：分装简单的邮件的Bean。1、复杂邮件有更加丰富的内容，如：图片、链接、附件等。JavaMailSender：发送邮件的客户端。JavaMailSender：发送邮件的客户端。MimeMessage：封装复杂邮件的Bean。setFrom（发件地址）setFrom（发件地址）包含邮件标题、邮件正文。setText（正文）setTo（收件地址）setTo（收件地址）"
keywords: "spring boot 发送邮件验证码"
categories: ['毕设Cm项目管理系统']
tags: ['数据库', 'Spring', 'Java', 'Boot']
artid: "146201576"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146201576
    alt: "spring-boot-发送邮件验证码"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146201576
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146201576
cover: https://bing.ee123.net/img/rand?artid=146201576
image: https://bing.ee123.net/img/rand?artid=146201576
img: https://bing.ee123.net/img/rand?artid=146201576
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     spring boot 发送邮件验证码
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="_0">
     </a>
     一、前置需求
    </h4>
    <p>
     1、准备邮箱
     <br/>
     2、登录授权码
     <br/>
     qq邮箱在–&gt;设置–&gt;账号POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务
     <br/>
     开启服务
    </p>
    <h4>
     <a id="_5">
     </a>
     二、发送邮件
    </h4>
    <p>
     1、简单邮件
     <br/>
     包含邮件标题、邮件正文
     <br/>
     2、引入mail启动器
    </p>
    <pre><code class="prism language-xml">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     3、mail参数配置
     <br/>
     application.yml
    </p>
    <pre><code class="prism language-yml"><span class="token key atrule">mail</span><span class="token punctuation">:</span>
  <span class="token key atrule">username</span><span class="token punctuation">:</span> User@qq.com				<span class="token comment">#填写邮箱地址</span>
  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>					<span class="token comment">#填写授权码</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> smtp.qq.com					<span class="token comment">#发送邮件的host</span>
</code></pre>
    <p>
     4、API
     <br/>
     JavaMailSender：发送邮件的客户端
     <br/>
     send(mail)
     <br/>
     SimpleMailMessage：分装简单的邮件的Bean
     <br/>
     setSubject（标题）
     <br/>
     setText（正文）
     <br/>
     setTo（收件地址）
     <br/>
     setFrom（发件地址）
    </p>
    <pre><code class="prism language-csharp">@Service
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendEmailCodeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//发送邮件验证码</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">sendEmailCode</span><span class="token punctuation">(</span><span class="token class-name">JavaMailSender</span> mailSender<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span> <span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token class-name">String</span> code<span class="token punctuation">)</span> <span class="token return-type class-name">throws</span> MailSendException <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//TODO: 发送邮件验证码</span>
        <span class="token class-name">SimpleMailMessage</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SimpleMailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建SimpleMailMessage对象</span>
        message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">"User@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置发件人</span>
        message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置邮件主题</span>
        message<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"您的验证码为："</span> <span class="token operator">+</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置邮件内容</span>
        message<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置收件人邮箱</span>
        mailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//发送邮件</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     我配置的是qq邮箱，发送邮件时报错：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d1b754fde8124e7f927ad21420e9c771.png">
      <br/>
      经过查询：解决方法配置application.yml
      <br/>
      <a href="https://blog.csdn.net/qq_45502195/article/details/143057428">
       发送邮件：530 Login fail. A secure connection is requiered(such as ssl)
      </a>
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7ac9e881c95e42cfbfe2d0e98c6e4ae1.png">
      <br/>
      <mark>
       发送成功
      </mark>
      ：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b13d24aa36de4899a452e42466552fdc.png"/>
     </img>
    </p>
    <h4>
     <a id="_56">
     </a>
     三、复杂邮件
    </h4>
    <p>
     1、复杂邮件有更加丰富的内容，如：图片、链接、附件等
     <br/>
     2、API
     <br/>
     JavaMailSender：发送邮件的客户端
     <br/>
     send(mail)
     <br/>
     MimeMessage：封装复杂邮件的Bean
     <br/>
     send.createMimeMessage()
     <br/>
     MimeMessageHelper:设置复杂邮件的辅助工具
     <br/>
     setSubject（标题）
     <br/>
     setText（正文,escapeHtml）
     <br/>
     setTo（收件地址）
     <br/>
     setFrom（发件地址）
     <br/>
     addAttachment(fileName,file)
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35323130383035382f:61727469636c652f64657461696c732f313436323031353736" class_="artid" style="display:none">
 </p>
</div>


