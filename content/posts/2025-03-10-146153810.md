---
layout: post
title: "PostgreSQL-Ubuntu-系统下PG15的安装与-PGVector-配置指南"
date: 2025-03-10 14:21:07 +0800
description: "🚀 本文详细介绍了如何在 Ubuntu 上安装 PostgreSQL 15 数据库，并配置 PGVector 插件，助力机器学习和数据分析。"
keywords: "『PostgreSQL』 Ubuntu 系统下PG15的安装与 PGVector 配置指南"
categories: ['架构精研', 'Postgresql', 'Ai']
tags: ['数据库', 'Ubuntu', 'Postgresql']
artid: "146153810"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146153810
    alt: "PostgreSQL-Ubuntu-系统下PG15的安装与-PGVector-配置指南"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146153810
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146153810
cover: https://bing.ee123.net/img/rand?artid=146153810
image: https://bing.ee123.net/img/rand?artid=146153810
img: https://bing.ee123.net/img/rand?artid=146153810
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     『PostgreSQL』 Ubuntu 系统下PG15的安装与 PGVector 配置指南
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="" src="https://img-blog.csdnimg.cn/img_convert/977f67705d2beada1e90a652d5c3fc82.gif"/>
    </p>
    <p>
     <img alt="" src="https://img-blog.csdnimg.cn/img_convert/760abeb2442685ce4545a460c03334d5.gif"/>
    </p>
    <p>
     📣读完这篇文章里你能收获到
    </p>
    <ol>
     <li>
      📦 学会如何在 Ubuntu 上安装最新的 PostgreSQL 15 数据库。
     </li>
     <li>
      🔑 掌握修改 PostgreSQL 管理员密码和配置远程连接的方法。
     </li>
     <li>
      🌐 了解如何启用 PGVector 插件，实现向量存储和多种距离计算。
     </li>
     <li>
      🛠️ 学习 PostgreSQL 的基本配置，包括防火墙设置和扩展安装。
     </li>
    </ol>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/129deb4e9670e20ffa85996c7145ffbd.gif"/>
    </p>
    <p>
    </p>
    <br/>
    <img alt="" src="https://img-blog.csdnimg.cn/img_convert/760abeb2442685ce4545a460c03334d5.gif">
     <p>
     </p>
     <p>
      <img alt="" src="https://i-blog.csdnimg.cn/img_convert/129deb4e9670e20ffa85996c7145ffbd.gif"/>
     </p>
     <h2>
      <a id="font_stylecolorrgb6_6_7font_20">
      </a>
      前言
     </h2>
     <p>
      本文为开发者提供了一份详细的指南，介绍了如何在 Ubuntu 系统上安装 PostgreSQL 15 数据库，并配置 PGVector 插件。从更新系统软件包、添加官方仓库，到安装 PostgreSQL、修改管理员密码、允许远程连接，再到安装和启用 PGVector 插件，每一步都配有清晰的命令和说明。通过这些步骤，读者可以快速搭建一个支持向量存储和查询的 PostgreSQL 环境，为机器学习和数据分析项目打下坚实基础。
     </p>
     <p>
      <img alt="" src="https://img-blog.csdnimg.cn/img_convert/760abeb2442685ce4545a460c03334d5.gif"/>
     </p>
     <h2>
      <a id="PostgreSQL_25">
      </a>
      一、安装PostgreSQL
     </h2>
     <h3>
      <a id="font_stylecolorrgb6_6_71_font_26">
      </a>
      1. 更新系统软件包
     </h3>
     <p>
      在安装 PostgreSQL 之前，建议先更新系统软件包，确保系统处于最新状态：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade <span class="token parameter variable">-y</span>
</code></pre>
     <hr/>
     <h3>
      <a id="font_stylecolorrgb6_6_72__PostgreSQL_font_36">
      </a>
      2. 添加 PostgreSQL 官方仓库
     </h3>
     <p>
      Ubuntu 默认仓库中的 PostgreSQL 版本可能不是最新的。为了安装 PostgreSQL 15，需要添加官方的 PostgreSQL 仓库：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'</span>
<span class="token function">wget</span> <span class="token parameter variable">--quiet</span> <span class="token parameter variable">-O</span> - https://www.postgresql.org/media/keys/ACCC4CF8.asc <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
</code></pre>
     <hr/>
     <h3>
      <a id="font_stylecolorrgb6_6_73__PostgreSQL_15font_46">
      </a>
      3. 安装 PostgreSQL 15
     </h3>
     <p>
      添加仓库后，更新软件包列表并安装 PostgreSQL 15：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> postgresql-15 postgresql-client-15
</code></pre>
     <hr/>
     <h3>
      <a id="font_stylecolorrgb6_6_74_font_56">
      </a>
      4. 验证安装
     </h3>
     <p>
      安装完成后，可以通过以下命令验证 PostgreSQL 是否正常运行：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl status postgresql
</code></pre>
     <p>
      如果服务已启动，输出应显示为
      <code>
       active (running)
      </code>
      。
     </p>
     <p>
      此外，可以通过以下命令检查 PostgreSQL 的版本：
     </p>
     <pre><code class="prism language-bash">psql <span class="token parameter variable">--version</span>
</code></pre>
     <p>
      输出应显示为
      <code>
       psql (PostgreSQL) 15.x
      </code>
      。
     </p>
     <hr/>
     <h3>
      <a id="font_stylecolorrgb6_6_75__PostgreSQLfont_75">
      </a>
      5. 配置 PostgreSQL
     </h3>
     <h4>
      <a id="font_stylecolorrgb6_6_751_font_76">
      </a>
      5.1 修改管理员用户密码
     </h4>
     <p>
      默认情况下，PostgreSQL 创建了一个名为
      <code>
       postgres
      </code>
      的用户。可以通过以下命令修改其密码：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> postgres psql
ALTER <span class="token environment constant">USER</span> postgres WITH PASSWORD <span class="token string">'your_new_password'</span><span class="token punctuation">;</span>
<span class="token punctuation">\</span>q
</code></pre>
     <h4>
      <a id="font_stylecolorrgb6_6_752font_85">
      </a>
      5.2允许远程连接
     </h4>
     <p>
      默认情况下，PostgreSQL 只允许本地连接。如果需要允许远程连接，需要修改配置文件：
     </p>
     <ol>
      <li>
       修改
       <code>
        postgresql.conf
       </code>
       文件：
      </li>
     </ol>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/postgresql/15/main/postgresql.conf
</code></pre>
     <p>
      找到
      <code>
       listen_addresses
      </code>
      ，取消注释并将其值改为
      <code>
       '*'
      </code>
      ：
     </p>
     <pre><code class="prism language-plain">listen_addresses = '*'
</code></pre>
     <ol>
      <li>
       修改
       <code>
        pg_hba.conf
       </code>
       文件：
      </li>
     </ol>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/postgresql/15/main/pg_hba.conf
</code></pre>
     <p>
      在文件末尾添加以下行以允许所有 IP 连接：
     </p>
     <pre><code class="prism language-plain">host    all             all             0.0.0.0/0               md5
</code></pre>
     <ol>
      <li>
       重启 PostgreSQL 服务以应用更改：
      </li>
     </ol>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl restart postgresql
</code></pre>
     <h4>
      <a id="font_stylecolorrgb6_6_753_font_120">
      </a>
      5.3 配置防火墙
     </h4>
     <p>
      如果系统启用了防火墙，需要允许 PostgreSQL 的默认端口（5432）通过：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> ufw allow <span class="token number">5432</span>
</code></pre>
     <hr/>
     <h3>
      <a id="font_stylecolorrgb6_6_76__PostgreSQLfont_129">
      </a>
      6. 登录 PostgreSQL
     </h3>
     <p>
      可以通过以下命令切换到
      <code>
       postgres
      </code>
      用户并登录到 PostgreSQL：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> postgres psql
</code></pre>
     <p>
      在 PostgreSQL 提示符下，可以执行 SQL 命令进行数据库操作。
     </p>
     <p>
      <img alt="" src="https://img-blog.csdnimg.cn/img_convert/760abeb2442685ce4545a460c03334d5.gif"/>
     </p>
     <h2>
      <a id="PGVector_142">
      </a>
      二、安装PGVector插件
     </h2>
     <h3>
      <a id="font_stylecolorrgb6_6_71__PGVector_font_143">
      </a>
      1. 安装 PGVector 插件
     </h3>
     <p>
      PGVector 是一个 PostgreSQL 扩展，支持向量存储和多种距离计算。安装步骤如下：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> postgresql-15-pgvector
</code></pre>
     <hr/>
     <h3>
      <a id="font_stylecolorrgb6_6_72__PGVectorfont_152">
      </a>
      2. 配置 PGVector
     </h3>
     <p>
      安装完成后，需要在 PostgreSQL 数据库中启用 PGVector 插件。以下是具体步骤：
     </p>
     <h4>
      <a id="font_stylecolorrgb6_6_721__PostgreSQL_font_155">
      </a>
      2.1 进入 PostgreSQL 命令行
     </h4>
     <p>
      切换到 PostgreSQL 用户并进入命令行：
     </p>
     <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> postgres psql
</code></pre>
     <h4>
      <a id="font_stylecolorrgb6_6_722__PGVector_font_162">
      </a>
      2.2 启用 PGVector 插件
     </h4>
     <p>
      在 PostgreSQL 命令行中，运行以下命令启用 PGVector 插件：
     </p>
     <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> EXTENSION <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> vector<span class="token punctuation">;</span>
</code></pre>
     <h4>
      <a id="font_stylecolorrgb6_6_723_font_169">
      </a>
      2.3 查看插件状态
     </h4>
     <p>
      可以通过以下命令查看已安装的扩展及其状态：
     </p>
     <pre><code class="prism language-sql"><span class="token comment">-- 查看所有可用的扩展</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> pg_available_extensions<span class="token punctuation">;</span>

<span class="token comment">-- 查看当前数据库实例中已安装和启用的扩展</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> pg_extension<span class="token punctuation">;</span>
</code></pre>
     <p>
      <img alt="" src="https://img-blog.csdnimg.cn/img_convert/760abeb2442685ce4545a460c03334d5.gif"/>
     </p>
     <p>
      <img alt="" src="https://img-blog.csdnimg.cn/img_convert/4c035e87ab8e06b29fd76f2b06560c2c.gif"/>
     </p>
    </img>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33343230323837332f:61727469636c652f64657461696c732f313436313533383130" class_="artid" style="display:none">
 </p>
</div>


