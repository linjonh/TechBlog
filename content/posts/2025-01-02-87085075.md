---
layout: post
title: "性能测试如何保证测试环境与真实生产的一致性"
date: 2025-01-02 14:25:06 +0800
description: "保证性能测试与真实生产环境的一致性，具体从以下三个方面来看：1、硬件环境，包括服务器环境、与网络环境"
keywords: "性能测试软件和硬件和生产怎么保持一致"
categories: ['性能测试']
tags: ['无标签']
artid: "87085075"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=87085075
    alt: "性能测试如何保证测试环境与真实生产的一致性"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=87085075
featuredImagePreview: https://bing.ee123.net/img/rand?artid=87085075
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     性能测试：如何保证测试环境与真实生产的一致性
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     保证性能测试与真实生产环境的一致性，具体从以下三个方面来看：
    </p>
    <p>
     <strong>
      1、硬件环境，包括服务器环境、与网络环境
     </strong>
    </p>
    <p>
     如服务器的型号以及是否和其它应用程序共享此服务器，是否在集群环境下，是否通过BIGIP进行负载均衡，客户使用的硬件配置情况，使用的交换机型号，网络传输速率。
    </p>
    <p>
    </p>
    <p>
     <strong>
      2、软件环境
     </strong>
    </p>
    <p>
     版本一致性
    </p>
    <p>
     包括包括操作系统、数据库、中间件的版本，被测系统的版本。
    </p>
    <p>
     配置一致性
    </p>
    <p>
     系统（操作系统/数据库/中间件/被测试系统）参数的配置一致，这些系统参数的配置有可能对系统造成巨大的影响。所以，除了保证测试环境与真实环境所使用的软件版本一致，也要关注其参数的配置是否一致。
    </p>
    <p>
    </p>
    <p>
     <strong>
      3、使用场景的一致性
     </strong>
    </p>
    <p>
     基础数据的一致性
    </p>
    <p>
     包括预测的业务数据量，以及数据类型的分配。很简单的一个列子，一个系统的数据库只有10条数据和一条数据库里几千万条数据，我们在对其进行性能测试时，得到的性能指标可能会有非常大的差别。
    </p>
    <p>
     为了保证每次测试环境的更加一致性，磁盘的使用情况以及磁盘的碎片情况也会或多或少的影响的性能。
    </p>
    <p>
     使用模式的一致性
    </p>
    <p>
     尽量模拟真实场景下用户的使用情况，其实，我们在做性能测试前期的需求分析，其主要目的也就是为了更真实的模拟用户的使用情况。
    </p>
    <p>
     <span style="color:#f33b45;">
      <strong>
       如何压测保证压测的用户数？
      </strong>
     </span>
    </p>
    <p>
     不同的工具对应的能够产生的压测是虚拟用户数是不一样的。比如Loadrunner单机500个左右（4g），locust单机能够支持几千。
     <span style="color:#3399ea;">
      最后采用压力机的方式根据需要产生高并发。
     </span>
    </p>
    <p>
     <span style="color:#f33b45;">
      <strong>
       如何保证服务器的资源是充足的？
      </strong>
     </span>
    </p>
    <p>
     <span style="color:#3399ea;">
      答案是多增加几台服务器!
     </span>
    </p>
    <p>
     <span style="color:#3399ea;">
      不管是直接采用nginx负载均衡，还是采用node集群的方式。
     </span>
    </p>
    <p>
     对于较大的系统来说，单台服务器的处理能力是有限的，通常都会采用集群的方式来进行负载均衡，完成对海量请求的处理。虽然无法获得整体集群的测试环境，但是可以对集群上的一个节点进行性能测试，得出该节点的处理能力，再计算每增加一个节点的性能损失，同样也可以能过建模的方式得到大型负载均衡情况下的预计性能指标。
    </p>
    <p>
     例如:首先在单台服务器上获得具体的性能指标，每台服务器能够承受500用户并发，平均TPS为60，响应时间为2秒，接着，添加负载均衡策略，再次测试负载策略下的数据损耗。得出数据后添加1台负载均衡服务器，测试在两台服务器下每台服务器的性能指标，以此类推，可以得到下表：
    </p>
    <p>
     <img alt="" class="has" src="https://i-blog.csdnimg.cn/blog_migrate/e69caad48f259563dd275a1efcc80865.jpeg"/>
    </p>
    <p>
     随着负载均衡服务器的添加，平均每台服务器的处理能力会逐渐稳定，从而了解在什么情况下需要多少台负载均衡服务器。
    </p>
    <p>
     对于测试环境的搭建，建议生成专门的文档进行管理，并进行配置管理，确保对测试环境做到基线控制。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f77656978696e5f3430383934393231:2f61727469636c652f64657461696c732f3837303835303735" class_="artid" style="display:none">
 </p>
</div>


