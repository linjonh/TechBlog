---
layout: post
title: "linux升级系统,重启出现Minimal-BASH-like-line-editingis-supported"
date: 2025-09-09T21:19:13+0800
description: "需要指名的是MBR分区以msdosX命名，GPT分区以gptX命名。指令查看所有识别到的磁盘和分区。例如：（hd0）(hd0，gpt1）（hd0，gpt2）。命令升级到了ubuntu25.10.在升级的过程会出现以下问题。其中hd0表示第一块磁盘，gpt是分区号。闲来无事，把ubuntu25.04通过。"
keywords: "linux升级系统，重启出现Minimal BASH-like line editingis supported"
categories: ['笔记']
tags: ['服务器', 'Linux']
artid: "151371051"
arturl: "https://blog.csdn.net/m0_50913327/article/details/151371051"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151371051
    alt: "linux升级系统,重启出现Minimal-BASH-like-line-editingis-supported"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151371051
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151371051
cover: https://bing.ee123.net/img/rand?artid=151371051
image: https://bing.ee123.net/img/rand?artid=151371051
img: https://bing.ee123.net/img/rand?artid=151371051
---



# linux升级系统，重启出现Minimal BASH-like line editingis supported



## 一.问题背景

闲来无事，把ubuntu25.04通过`sudo do-release-upgrade`命令升级到了ubuntu25.10.在升级的过程会出现以下问题

* 1.自动替换flatpak程序为snap
* 2.请求是否清除旧依赖  
  `如上，第二步输入y,会清除基于旧内核的引导，且不会重建新引导。` 自动化更新完成，要求重启。此时系统重启进入grub紧急救援模式。  
  ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/defd43b456ae4b699d1dc073e6306a6e.jpg)

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/7739c2a18e1843d6a423cd9d76055952.jpg)

## 二.解决步骤

### 2.1确认系统分区

1.输入`ls`指令查看所有识别到的磁盘和分区。例如：（hd0）(hd0，gpt1）（hd0，gpt2）。  
其中hd0表示第一块磁盘，gpt是分区号。

2. 对每个分区执行 ls (hd0,gptX)/ （将 X 换成实际分区号），找到包含系统文件的分区（需看到 boot root home 等目录，通常是根分区 / 或 /boot 分区）。

### 2.2手动引导

假设找到根分区为 (hd0,gpt2) ，按以下步骤执行（需替换为你的实际分区）：  
需要指名的是MBR分区以msdosX命名，GPT分区以gptX命名。以下命令不受分区类型影响，demo以gpt分区为例讲解：

```bash
# 1.指定根分区
set root=(hd0,gpt2)
# 2.指定内核文件 （进入  boot  目录查看内核名，格式通常为  vmlinuz-xxx ）：
# sda1  对应  (hd0,msdos1) ， xxx  替换为实际内核版本
# nvme0n1p1,nvme0n1p2 一般表示基于pcie接口和nvme协议的固态硬盘分区
# sda1,sda2一般表示基于sata和scsi接口的机械硬盘分区
linux /boot/vmlinuz-xxx  root=/dev/nvme0n1p2

# 3. 指定初始化镜像（格式通常为  initrd.img-xxx ）：
 initrd /boot/initrd.img-xxx （ xxx  与内核版本一致）
# 4.启动
boot

# 5.若进入ui界面，则不需要看第五步！
# 若此时进入  initramfs命令行  可能会存在报错说明。最大可能是第2步，你并不知晓你的分区名，此时可通过如下命令查询
blkid #可能不同分区，命令不同，还可以如下图尝试 fdisk lsblk等  此时获取到磁盘命名及编号。重启系统进入grub命令行，输入和分区编号对应的磁盘命名即可。


```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/c5651c6c6f534d8fa91d1438c37f22e6.jpg)

### 2.3 重建grub引导

```bash
#系统启动成功后，执行以下命令修复GRUB：
 
#1. 安装GRUB到硬盘（ /dev/sda  是第一块硬盘，根据实际情况替换）：
 sudo grub-install /dev/sda 
​
#2. 生成新的GRUB配置文件：
 sudo update-grub （Ubuntu/Debian）或  sudo grub2-mkconfig -o /boot/grub2/grub.cfg （CentOS/RHEL）
​
#3. 重启验证： 
sudo reboot

```

### 2.4 还原软件包

```bash
# 1.有需要重新使用 unsnap恢复flatpak文件

# 2.清理旧依赖
sudo apt-get autoremove
# 3.清理旧内核
#查看当前内核版本，避免误删
uname -r
# 列出内核包
# debian系
dpkg --list 'linux-image*'
# fedora系
rpm -qa | grep kernel

#4.卸载旧内核
# debian系
sudo apt-get remove linux-image-<旧内核版本>  # 替换为要卸载的版本，如 linux-image-5.15.0-75-generic

# fedora系
sudo rpm -e --nodeps kernel-<旧内核版本>

# 5.清除残留
sudo apt-get autoremove  # 自动删除不再需要的依赖（包括旧内核的模块和头文件）

sudo update-grub    # 更新启动菜单，移除旧内核选项

```



