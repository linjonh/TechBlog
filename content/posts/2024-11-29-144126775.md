---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71796a31393932303730342f:61727469636c652f64657461696c732f313434313236373735"
layout: post
title: "Dockerç³»åˆ—Docker-ä¸­ä½¿ç”¨-Redis-é…ç½®æ–‡ä»¶çš„è¯¦ç»†æŒ‡å—"
date: 2024-11-29 08:59:57 +08:00
description: "ðŸ’ðŸ’ðŸ’æ¬¢è¿Žæ¥åˆ°æˆ‘çš„åšå®¢ï¼Œå¾ˆé«˜å…´èƒ½å¤Ÿåœ¨è¿™é‡Œå’Œæ‚¨è§é¢ï¼å¸Œæœ›æ‚¨åœ¨è¿™é‡Œå¯"
keywords: "docker redis é…ç½®æ–‡ä»¶"
categories: ['S', 'Docker']
tags: ['å®¹å™¨', 'Redis', 'Docker']
artid: "144126775"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=144126775
    alt: "Dockerç³»åˆ—Docker-ä¸­ä½¿ç”¨-Redis-é…ç½®æ–‡ä»¶çš„è¯¦ç»†æŒ‡å—"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=144126775
featuredImagePreview: https://bing.ee123.net/img/rand?artid=144126775
---

# ã€Dockerç³»åˆ—ã€‘Docker ä¸­ä½¿ç”¨ Redis é…ç½®æ–‡ä»¶çš„è¯¦ç»†æŒ‡å—

> ðŸ’ðŸ’ðŸ’æ¬¢è¿Žæ¥åˆ°æˆ‘çš„åšå®¢ï¼Œå¾ˆé«˜å…´èƒ½å¤Ÿåœ¨è¿™é‡Œå’Œæ‚¨è§é¢ï¼å¸Œæœ›æ‚¨åœ¨è¿™é‡Œå¯ä»¥æ„Ÿå—åˆ°ä¸€ä»½è½»æ¾æ„‰å¿«çš„æ°›å›´ï¼Œä¸ä»…å¯ä»¥èŽ·å¾—æœ‰è¶£çš„å†…å®¹å’ŒçŸ¥è¯†ï¼Œä¹Ÿå¯ä»¥ç•…æ‰€æ¬²è¨€ã€åˆ†äº«æ‚¨çš„æƒ³æ³•å’Œè§è§£ã€‚
>   
> ![img](https://img-blog.csdnimg.cn/img_convert/5ce5e68e322584b3aa8304269fb6a2f7.jpeg#pic_center)
>
> * æŽ¨è:
>   [kwan çš„é¦–é¡µ](https://qinyingjie.blog.csdn.net/?type=blog)
>   ,æŒç»­å­¦ä¹ ,ä¸æ–­æ€»ç»“,å…±åŒè¿›æ­¥,æ´»åˆ°è€å­¦åˆ°è€
> * å¯¼èˆª
>   + [æª€è¶Šå‰‘æŒ‡å¤§åŽ‚ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11763029.html)
>     :å…¨é¢æ€»ç»“ java æ ¸å¿ƒæŠ€æœ¯,jvm,å¹¶å‘ç¼–ç¨‹ redis,kafka,Spring,å¾®æœåŠ¡ç­‰
>   + [å¸¸ç”¨å¼€å‘å·¥å…·ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11474211.html)
>     :å¸¸ç”¨çš„å¼€å‘å·¥å…·,IDEA,Mac,Alfred,Git,typora ç­‰
>   + [æ•°æ®åº“ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11474265.html)
>     :è¯¦ç»†æ€»ç»“äº†å¸¸ç”¨æ•°æ®åº“ mysql æŠ€æœ¯ç‚¹,ä»¥åŠå·¥ä½œä¸­é‡åˆ°çš„ mysql é—®é¢˜ç­‰
>   + [æ–°ç©ºé—´ä»£ç å·¥ä½œå®¤](https://meihua150.cn/)
>     :æä¾›å„ç§è½¯ä»¶æœåŠ¡,æ‰¿æŽ¥å„ç§æ¯•ä¸šè®¾è®¡,æ¯•ä¸šè®ºæ–‡ç­‰
>   + [æ‡’äººè¿ç»´ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_7540627.html)
>     :æ€»ç»“å¥½ç”¨çš„å‘½ä»¤,è§£æ”¾åŒæ‰‹ä¸é¦™å—?èƒ½ç”¨ä¸€ä¸ªå‘½ä»¤å®Œæˆç»ä¸ç”¨ä¸¤ä¸ªæ“ä½œ
>   + [æ•°æ®ç»“æž„ä¸Žç®—æ³•ç³»åˆ—](https://blog.csdn.net/qyj19920704/category_11480075.html)
>     :æ€»ç»“æ•°æ®ç»“æž„å’Œç®—æ³•,ä¸åŒç±»åž‹é’ˆå¯¹æ€§è®­ç»ƒ,æå‡ç¼–ç¨‹æ€ç»´,å‰‘æŒ‡å¤§åŽ‚
>
> éžå¸¸æœŸå¾…å’Œæ‚¨ä¸€èµ·åœ¨è¿™ä¸ªå°å°çš„ç½‘ç»œä¸–ç•Œé‡Œå…±åŒæŽ¢ç´¢ã€å­¦ä¹ å’Œæˆé•¿ã€‚ðŸ’ðŸ’ðŸ’ âœ¨âœ¨ æ¬¢è¿Žè®¢é˜…æœ¬ä¸“æ  âœ¨âœ¨

#### åšå®¢ç›®å½•

* + [Docker ä¸Ž Redis çš„ç»“åˆ](#Docker__Redis__19)
  + [é…ç½®æ–‡ä»¶çš„é‡è¦æ€§](#_23)
  + [ä¿®æ”¹ docker-compose.yml æ–‡ä»¶](#_dockercomposeyml__27)
  + - [1. æ·»åŠ é…ç½®æ–‡ä»¶å·](#1__31)
    - [2. ä¿®æ”¹å¯åŠ¨å‘½ä»¤](#2__43)
    - [3. çŽ¯å¢ƒå˜é‡](#3__53)
  + [é…ç½®æ–‡ä»¶å†…å®¹](#_64)
  + [å¯åŠ¨ Redis å®¹å™¨](#_Redis__75)
  + [éªŒè¯é…ç½®](#_79)

åœ¨çŽ°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼ŒRedis å› å…¶é«˜æ€§èƒ½å’Œä½Žå»¶è¿Ÿçš„ç‰¹æ€§ï¼Œè¢«å¹¿æ³›ç”¨ä½œæ•°æ®ç»“æž„æœåŠ¡å™¨å’Œæ¶ˆæ¯ä»£ç†ã€‚Docker ä½œä¸ºä¸€ä¸ªè½»é‡çº§çš„å®¹å™¨åŒ–å¹³å°ï¼Œä½¿å¾—éƒ¨ç½²å’Œç®¡ç† Redis å˜å¾—æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c052acc5767945a291c5164d480ef388.png#pic_center)

### Docker ä¸Ž Redis çš„ç»“åˆ

Docker å®¹å™¨åŒ–æŠ€æœ¯å…è®¸å¼€å‘è€…å°†åº”ç”¨åŠå…¶ä¾èµ–æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œç¡®ä¿åº”ç”¨åœ¨ä»»ä½•çŽ¯å¢ƒä¸­éƒ½èƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œã€‚å¯¹äºŽ Redis è¿™æ ·çš„æ•°æ®åº“æ¥è¯´ï¼Œè¿™æ„å‘³ç€å¯ä»¥è½»æ¾åœ°åœ¨ä¸åŒçš„å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§çŽ¯å¢ƒä¸­éƒ¨ç½²ï¼Œè€Œæ— éœ€æ‹…å¿ƒçŽ¯å¢ƒå·®å¼‚å¯¼è‡´çš„é—®é¢˜ã€‚

### é…ç½®æ–‡ä»¶çš„é‡è¦æ€§

Redis çš„çµæ´»æ€§åœ¨äºŽå…¶æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶æ¥è°ƒæ•´å…¶è¡Œä¸ºã€‚è¿™åŒ…æ‹¬è®¾ç½®å¯†ç ã€æŒä¹…åŒ–é€‰é¡¹ã€ç½‘ç»œé…ç½®ç­‰ã€‚é€šè¿‡è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿ Redis å®žä¾‹æŒ‰ç…§æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚å’Œå®‰å…¨æ ‡å‡†è¿è¡Œã€‚

### ä¿®æ”¹ docker-compose.yml æ–‡ä»¶

è¦ä½¿ç”¨è‡ªå®šä¹‰çš„ Redis é…ç½®æ–‡ä»¶å¯åŠ¨ Docker å®¹å™¨ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹
`docker-compose.yml`
æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤å’Œè§£é‡Šï¼š

#### 1. æ·»åŠ é…ç½®æ–‡ä»¶å·

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†æœ¬åœ°çš„
`redis.conf`
é…ç½®æ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨ä¸­çš„æŒ‡å®šè·¯å¾„ã€‚è¿™å¯ä»¥é€šè¿‡
`volumes`
éƒ¨åˆ†å®žçŽ°ï¼š

```yaml
volumes:
  - ./volumes/redis/data:/data
  - ./config/redis.conf:/usr/local/etc/redis/redis.conf:ro

```

è¿™é‡Œï¼Œ
`./volumes/redis/data:/data`
æ˜ å°„äº†æ•°æ®ç›®å½•ï¼Œè€Œ
`./config/redis.conf:/usr/local/etc/redis/redis.conf:ro`
å°†æœ¬åœ°çš„
`redis.conf`
æ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œå¹¶è®¾ç½®ä¸ºåªè¯»æ¨¡å¼ã€‚

#### 2. ä¿®æ”¹å¯åŠ¨å‘½ä»¤

æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å®¹å™¨å¯åŠ¨æ—¶çš„å‘½ä»¤ï¼Œä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ã€‚è¿™å¯ä»¥é€šè¿‡
`command`
éƒ¨åˆ†å®žçŽ°ï¼š

```yaml
command: redis-server /usr/local/etc/redis/redis.conf

```

è¿™è¡Œå‘½ä»¤å‘Šè¯‰ Redis ä½¿ç”¨
`/usr/local/etc/redis/redis.conf`
è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶å¯åŠ¨ã€‚

#### 3. çŽ¯å¢ƒå˜é‡

ä¸ºäº†å¢žå¼ºå®‰å…¨æ€§å’Œçµæ´»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯è®¾ç½®ä¸ºçŽ¯å¢ƒå˜é‡ï¼š

```yaml
environment:
  - REDIS_PASSWORD=${REDIS_PASSWORD:-test2024}

```

è¿™æ ·ï¼Œå³ä½¿é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰æ˜Žç¡®æŒ‡å®šå¯†ç ï¼Œä¹Ÿå¯ä»¥é€šè¿‡çŽ¯å¢ƒå˜é‡æ¥è®¾ç½®ã€‚

### é…ç½®æ–‡ä»¶å†…å®¹

ç¡®ä¿ä½ çš„
`redis.conf`
æ–‡ä»¶ä¸­åŒ…å«äº†æ‰€æœ‰å¿…è¦çš„é…ç½®ï¼Œä¾‹å¦‚ï¼š

```conf
requirepass test2024
appendonly yes

```

è¿™é‡Œï¼Œ
`requirepass test2024`
è®¾ç½®äº† Redis çš„å¯†ç ï¼Œè€Œ
`appendonly yes`
å¯ç”¨äº†æŒä¹…åŒ–ï¼Œç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§ã€‚

### å¯åŠ¨ Redis å®¹å™¨

é…ç½®å®ŒæˆåŽï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œ
`docker-compose up`
å‘½ä»¤æ¥å¯åŠ¨ Redis å®¹å™¨ã€‚Docker å°†æ ¹æ®
`docker-compose.yml`
æ–‡ä»¶ä¸­çš„é…ç½®ï¼Œä½¿ç”¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶å¯åŠ¨ Redis å®žä¾‹ã€‚

### éªŒè¯é…ç½®

å¯åŠ¨å®¹å™¨åŽï¼Œä½ åº”è¯¥éªŒè¯ Redis æ˜¯å¦æŒ‰ç…§é…ç½®æ–‡ä»¶æ­£ç¡®è¿è¡Œã€‚å¯ä»¥é€šè¿‡è¿žæŽ¥åˆ° Redis å®žä¾‹å¹¶å°è¯•æ‰§è¡Œä¸€äº›åŸºæœ¬å‘½ä»¤æ¥å®Œæˆï¼š

```bash
redis-cli
ping

```

å¦‚æžœè¿”å›ž
`PONG`
ï¼Œåˆ™è¡¨ç¤º Redis æœåŠ¡æ­£åœ¨è¿è¡Œã€‚ä½ è¿˜å¯ä»¥æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®è®¾ç½®ï¼š

```bash
redis-cli -a test2024

```

å¦‚æžœèƒ½å¤ŸæˆåŠŸè¿žæŽ¥ï¼Œè¯´æ˜Žå¯†ç è®¾ç½®æ­£ç¡®ã€‚

> è§‰å¾—æœ‰ç”¨çš„è¯ç‚¹ä¸ªèµž
> `ðŸ‘ðŸ»`
> å‘—ã€‚
>   
> â¤ï¸â¤ï¸â¤ï¸æœ¬äººæ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰çº°æ¼ï¼Œæ¬¢è¿Žå„ä½å¤§ä½¬è¯„è®ºæ‰¹è¯„æŒ‡æ­£ï¼ðŸ˜„ðŸ˜„ðŸ˜„
>
> ðŸ’˜ðŸ’˜ðŸ’˜å¦‚æžœè§‰å¾—è¿™ç¯‡æ–‡å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿè¯·ç»™ä¸ªç‚¹èµžã€æ”¶è—ä¸‹å§ï¼Œéžå¸¸æ„Ÿè°¢!ðŸ‘ ðŸ‘ ðŸ‘
>
> ðŸ”¥ðŸ”¥ðŸ”¥Stay Hungry Stay Foolish é“é˜»ä¸”é•¿,è¡Œåˆ™å°†è‡³,è®©æˆ‘ä»¬ä¸€èµ·åŠ æ²¹å§ï¼ðŸŒ™ðŸŒ™ðŸŒ™
>
> ![img](https://img-blog.csdnimg.cn/img_convert/a08571f736dc04b5bef51cd09e8e3a0a.gif#pic_center)