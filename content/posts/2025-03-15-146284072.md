---
layout: post
title: "leetcode-75.颜色分类荷兰国旗问题"
date: 2025-03-15 21:29:42 +0800
description: "本题是经典的「荷兰国旗问题」，由计算机科学家 Edsger W. Dijkstra 首先提出。要想单独解决这道题本身还是很简单的，统计0、1、2的数量然后按顺序赋值，或者手写一个冒泡排序，whatever。但是在这一题中我们主要学习它的思想，题目想要将，那么就要用到。时间复杂度O(n)。在本文的最后会附上leetcode的双指针法，但是本文的主要目的就是学会三指针法，不管哪种方式，核心思想是差不多的，本题的思想同样也是快速排序中对于大量重复元素的优化方式，甚至可以直接作为快排的核心算法。"
keywords: "leetcode 75.颜色分类（荷兰国旗问题）"
categories: ['未分类']
tags: ['面试', '算法', 'Leetcode', 'C']
artid: "146284072"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146284072
    alt: "leetcode-75.颜色分类荷兰国旗问题"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146284072
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146284072
cover: https://bing.ee123.net/img/rand?artid=146284072
image: https://bing.ee123.net/img/rand?artid=146284072
img: https://bing.ee123.net/img/rand?artid=146284072
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     leetcode 75.颜色分类（荷兰国旗问题）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     题目描述
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3875f1ee3df64d9e968a1cb37e32027b.png"/>
    </p>
    <h2>
     <a id="_2">
     </a>
     题目分析
    </h2>
    <p>
     本题是经典的「荷兰国旗问题」，由计算机科学家 Edsger W. Dijkstra 首先提出。
     <br/>
     要想单独解决这道题本身还是很简单的，统计0、1、2的数量然后按顺序赋值，或者手写一个冒泡排序，whatever。
     <br/>
     但是在这一题中我们主要学习它的思想，题目想要将
     <strong>
      一个数组分成三个区间
     </strong>
     ，那么就要用到
     <strong>
      三指针法
     </strong>
     。时间复杂度O(n)。
     <br/>
     在本文的最后会附上leetcode的双指针法，但是本文的主要目的就是学会三指针法，不管哪种方式，核心思想是差不多的，本题的思想同样也是快速排序中对于大量重复元素的优化方式，甚至可以直接作为快排的核心算法。
    </p>
    <h2>
     <a id="_8">
     </a>
     讲解算法原理
    </h2>
    <p>
     既然想要将一个数组分为0、1、2三个区域，那就定义三个指针来解决这个问题。
     <br/>
     <strong>
      指针意义：
     </strong>
     <br/>
     <code>
      i
     </code>
     指向数组第一个元素的位置用来遍历数组
     <br/>
     <code>
      left
     </code>
     指向数组0区间最后一个元素
     <br/>
     <code>
      right
     </code>
     指向数组2区间第一个元素
    </p>
    <h3>
     <a id="_15">
     </a>
     整个数组在完成分区之后的指针位置分布是这样的，数组由三个部分字组成：
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/561f88f3c2e745e1a504c3726f3bd4ea.png">
      <br/>
      注：x 为0区间最后一个元素， y 为2区间第一个元素
     </img>
    </p>
    <h3>
     <a id="_19">
     </a>
     整个数组在正在分区的过程中时的指针位置分布是这样的，数组由四个部分组成：
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/80c42af80a854bcba698675948147587.png"/>
    </p>
    <p>
     我们主要就是要研究正在分区时的指针分布，来规定循环条件以及各种操作。
     <br/>
     数组在分区时分为四个区间：
     <br/>
     <strong>
      [0, left] [left + 1, i - 1] [i, right -1] [right, n]
     </strong>
     <br/>
     从左到右依次是：0区间，1区间，待扫描区域，2区间
     <br/>
     当待扫描区域消失后，数组分区就完成了
    </p>
    <p>
     那么在最刚开始各个指针是怎么分布的呢？
    </p>
    <p>
     以示例一为例：
     <br/>
     nums = [2,0,2,1,1,0]
    </p>
    <h3>
     <a id="_32">
     </a>
     指针的初始化
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/07e86c594510468798cf8ab49e2ccffd.png"/>
    </p>
    <p>
     在最刚开始，数组并没有0区间和2区间，所以left指向数组第一个元素的左边位置，right指向数组的最后一个元素的右边位置，i指向数组的第一个元素。
    </p>
    <h3>
     <a id="i_1_37">
     </a>
     i 指针扫描到不同数据的分类处理1
    </h3>
    <ol>
     <li>
      当i扫描到0时，将i位置的元素与left + 1位置的元素交换，然后再left++，就将0放到了0区间中，最后再i++，准备扫描下一个元素。
      <br/>
      Q：为什么不直接与left交换？
      <br/>
      A：我们不能直接与left交换，因为left在刚开始是不在数组范围内的。我们是通过将left扩容的方式来涵盖0这个元素。
     </li>
     <li>
      当i扫描到2时，将i位置的元素与right - 1位置的元素交换，然后再right–，就将2放到了2区间中，此时i还不能急着++，因为新换过来的元素还没有扫描。就这样进入到下一次循环中，i会再处理这个新换来的元素。
     </li>
     <li>
      当i扫描到1时，直接i++，1就进入了1区间。
      <br/>
      请添加图片描述
      <br/>
      <img alt="请添加图片描述" src="https://i-blog.csdnimg.cn/direct/461c39e2d1b8413bb9061d912f0b6613.png"/>
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">sortColors</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//left为0区间的最后一个元素位置，right为2区间的第一个元素位置</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//i指针遍历整个数组</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token comment">//[0,left],[left+1,i-1],[i,right-1],[right,n]</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> 
            <span class="token punctuation">{<!-- --></span>
            	<span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>left<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            	left<span class="token operator">++</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> 
            <span class="token punctuation">{<!-- --></span>
            	<span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            	right<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     简写后：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">sortColors</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//left为0区间的最后一个元素位置，right为2区间的第一个元素位置</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//i指针遍历整个数组</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token comment">//[0,left],[left+1,i-1],[i,right-1],[right,n]</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span><span class="token operator">++</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span><span class="token operator">--</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     补充：
     <br/>
     leetcode官方给出的双指针法也是经典的方法，在此引用供大家学习：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/525ac36f82b247609c8f8569558efbdd.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/109d200e7a51496aa6d3cdc94c7906d3.gif">
       <br/>
       题解作者：力扣官方
       <br/>
       题解链接：https://leetcode.cn/problems/sort-colors/solutions/437968/yan-se-fen-lei-by-leetcode-solution/
      </img>
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38303336313639372f:61727469636c652f64657461696c732f313436323834303732" class_="artid" style="display:none">
 </p>
</div>


