---
layout: post
title: "Mysql查看执行计划explain关键字详解超详细"
date: 2025-03-14 17:08:04 +0800
description: "Mysql查看执行计划、explain关键字详解（超详细）"
keywords: "Mysql查看执行计划、explain关键字详解（超详细）"
categories: ['数据库']
tags: ['Mysql', 'Explain']
artid: "146261900"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146261900
    alt: "Mysql查看执行计划explain关键字详解超详细"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146261900
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146261900
cover: https://bing.ee123.net/img/rand?artid=146261900
image: https://bing.ee123.net/img/rand?artid=146261900
img: https://bing.ee123.net/img/rand?artid=146261900
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Mysql查看执行计划、explain关键字详解（超详细）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="explain_2">
     </a>
     一、什么是explain
    </h2>
    <p>
     EXPLAIN 是 MySQL 提供的用于分析 SQL 查询执行计划的工具，通过该命令可以获取查询优化器选择的执行路径。
    </p>
    <p>
     <strong>
      总结：
     </strong>
     <mark>
      explain可以查看sql执行时是否有使用到索引，关联查询时可以查看sql的执行顺序。
     </mark>
    </p>
    <p>
     Explain被称为
     <code>
      执行计划
     </code>
     ，在语句之前增加 explain 关键字，MySQL 会在查询上设置一个标记，模拟MySQL优化器来执行SQL语句，执行查询时，会返回执行计划的信息，并不执行这条SQL。（注意，如果 from 中包含子查询，仍会执行该子查询，将结果放入临时表中）。
    </p>
    <p>
     在 MySQL 8.0 版本后，新增 EXPLAIN ANALYZE 功能，可提供实际执行统计信息。
    </p>
    <h2>
     <a id="explain_11">
     </a>
     二、explain基础用法
    </h2>
    <p>
     <strong>
      1. 基本语法
     </strong>
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">EXPLAIN</span> <span class="token punctuation">[</span>FORMAT <span class="token operator">=</span> {TRADITIONAL<span class="token operator">|</span>JSON<span class="token operator">|</span>TREE}<span class="token punctuation">]</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre>
    <blockquote>
     <p>
      解释：
      <code>
       explain+sql语句
      </code>
      ，执行后就可以查看该sql的执行顺序，是否使用索引等信息。
     </p>
    </blockquote>
    <p>
     <strong>
      2. 常用参数
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       FORMAT
      </strong>
      ：指定输出格式（默认传统表格）
     </li>
     <li>
      <strong>
       PARTITIONS
      </strong>
      ：显示分区信息
     </li>
     <li>
      <strong>
       ANALYZE
      </strong>
      ：实际执行并收集统计（8.0+）
     </li>
    </ul>
    <p>
     <strong>
      3. 输出示例
     </strong>
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">=</span> <span class="token string">'tom'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     输出结果示例：
    </p>
    <pre><code class="prism language-sql"><span class="token operator">+</span><span class="token comment">----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span>     <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> employees <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">3000</span> <span class="token operator">|</span>    <span class="token number">10.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
</code></pre>
    <p>
     <strong>
      典型输出包含以下核心列：
     </strong>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        列名
       </th>
       <th>
        说明
       </th>
       <th>
        关键值
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        id
       </td>
       <td>
        查询序列号
       </td>
       <td>
        相同id按顺序执行，不同id从大到小执行
       </td>
      </tr>
      <tr>
       <td>
        <code>
         select_type
        </code>
       </td>
       <td>
        查询类型
       </td>
       <td>
        SIMPLE/PRIMARY/SUBQUERY/DERIVED/UNION
       </td>
      </tr>
      <tr>
       <td>
        table
       </td>
       <td>
        访问的表名
       </td>
       <td>
        &lt;unionM,N&gt; 表示联合查询结果
       </td>
      </tr>
      <tr>
       <td>
        partitions
       </td>
       <td>
        匹配的分区
       </td>
       <td>
        分区表可见具体分区
       </td>
      </tr>
      <tr>
       <td>
        <code>
         type
        </code>
       </td>
       <td>
        访问类型
       </td>
       <td>
        system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL
       </td>
      </tr>
      <tr>
       <td>
        possible_keys
       </td>
       <td>
        可能使用的索引
       </td>
       <td>
        显示候选索引列表
       </td>
      </tr>
      <tr>
       <td>
        <code>
         key
        </code>
       </td>
       <td>
        实际使用的索引
       </td>
       <td>
        NULL 表示未使用索引
       </td>
      </tr>
      <tr>
       <td>
        key_len
       </td>
       <td>
        索引长度
       </td>
       <td>
        复合索引实际使用部分长度
       </td>
      </tr>
      <tr>
       <td>
        ref
       </td>
       <td>
        索引比较的列
       </td>
       <td>
        const/库名.表名.列名
       </td>
      </tr>
      <tr>
       <td>
        rows
       </td>
       <td>
        预估扫描行数
       </td>
       <td>
        基于统计信息估算
       </td>
      </tr>
      <tr>
       <td>
        filtered
       </td>
       <td>
        过滤百分比
       </td>
       <td>
        100% 表示完全匹配索引
       </td>
      </tr>
      <tr>
       <td>
        Extra
       </td>
       <td>
        附加信息
       </td>
       <td>
        Using filesort/Using temporary/Using index
       </td>
      </tr>
     </tbody>
    </table>
    <h2>
     <a id="_55">
     </a>
     三、执行计划字段深度解析
    </h2>
    <h3>
     <a id="31id__56">
     </a>
     3.1、id 列
    </h3>
    <ul>
     <li>
      查询执行顺序标识
     </li>
     <li>
      相同 id 表示同级别执行
     </li>
     <li>
      数字越大优先级越高
     </li>
     <li>
      NULL 表示结果集合并
     </li>
    </ul>
    <h3>
     <a id="32select_type__62">
     </a>
     3.2、select_type 类型
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        类型
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         SIMPLE
        </code>
       </td>
       <td>
        简单查询（无子查询或UNION）
       </td>
      </tr>
      <tr>
       <td>
        PRIMARY
       </td>
       <td>
        外层查询
       </td>
      </tr>
      <tr>
       <td>
        SUBQUERY
       </td>
       <td>
        子查询中的第一个SELECT
       </td>
      </tr>
      <tr>
       <td>
        DERIVED
       </td>
       <td>
        派生表（FROM子句中的子查询）
       </td>
      </tr>
      <tr>
       <td>
        UNION
       </td>
       <td>
        UNION中的第二个或之后的SELECT
       </td>
      </tr>
      <tr>
       <td>
        UNION RESULT
       </td>
       <td>
        UNION的结果
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="33type__72">
     </a>
     3.3、type 访问类型（性能关键指标）
    </h3>
    <p>
     按性能从优到劣排序：
     <br/>
     <code>
      system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL
     </code>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        类型
       </th>
       <th>
        扫描方式
       </th>
       <th>
        出现场景
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        system
       </td>
       <td>
        系统表单行记录
       </td>
       <td>
        MyISAM引擎统计表
       </td>
      </tr>
      <tr>
       <td>
        const
       </td>
       <td>
        主键/唯一索引等值查询
       </td>
       <td>
        WHERE id = 1
       </td>
      </tr>
      <tr>
       <td>
        eq_ref
       </td>
       <td>
        唯一索引关联查询
       </td>
       <td>
        JOIN使用主键或唯一索引
       </td>
      </tr>
      <tr>
       <td>
        ref
       </td>
       <td>
        非唯一索引查找
       </td>
       <td>
        普通二级索引查询
       </td>
      </tr>
      <tr>
       <td>
        range
       </td>
       <td>
        索引范围扫描
       </td>
       <td>
        BETWEEN、IN、&gt; 等范围查询
       </td>
      </tr>
      <tr>
       <td>
        index
       </td>
       <td>
        全索引扫描
       </td>
       <td>
        覆盖索引但需扫描全部索引
       </td>
      </tr>
      <tr>
       <td>
        ALL
       </td>
       <td>
        全表扫描
       </td>
       <td>
        无可用索引或需要读取大部分数据
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      1. type 访问类型详解（性能从优到劣）
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       system
      </strong>
      ：系统表单行访问（内存表）
     </li>
     <li>
      <strong>
       const
      </strong>
      ：主键或唯一索引等值查询
     </li>
    </ul>
    <pre><code class="prism language-sql">   <span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      <strong>
       eq_ref
      </strong>
      ：关联查询主键匹配
     </li>
    </ul>
    <pre><code class="prism language-sql">   <span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders 
   <span class="token keyword">JOIN</span> users <span class="token keyword">ON</span> orders<span class="token punctuation">.</span>user_id <span class="token operator">=</span> users<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      <strong>
       ref
      </strong>
      ：非唯一索引等值查询
     </li>
    </ul>
    <pre><code class="prism language-sql">   <span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_age <span class="token keyword">ON</span> users<span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      <strong>
       range
      </strong>
      ：索引范围扫描
     </li>
    </ul>
    <pre><code class="prism language-sql">   <span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> age <span class="token operator">BETWEEN</span> <span class="token number">20</span> <span class="token operator">AND</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      <strong>
       index
      </strong>
      ：全索引扫描
     </li>
    </ul>
    <pre><code class="prism language-sql">   <span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> users <span class="token keyword">USE</span> <span class="token keyword">INDEX</span><span class="token punctuation">(</span>idx_age<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      <strong>
       ALL
      </strong>
      ：全表扫描（需重点优化）
     </li>
    </ul>
    <h3>
     <a id="34key_len__114">
     </a>
     3.4、key_len 计算规则
    </h3>
    <p>
     索引使用长度的计算方法：
    </p>
    <pre><code class="prism language-sql">key_len <span class="token operator">=</span> 
  <span class="token punctuation">(</span>字符列长度 <span class="token operator">*</span> 字符集bytes<span class="token punctuation">)</span> <span class="token operator">+</span> 
  <span class="token punctuation">(</span>是否<span class="token boolean">NULL</span>? <span class="token number">1</span>:<span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
  <span class="token punctuation">(</span>变长类型? <span class="token number">2</span>:<span class="token number">0</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     示例：VARCHAR(255) utf8mb4 可为NULL列
    </p>
    <pre><code class="prism language-sql"><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1023</span> bytes
</code></pre>
    <h3>
     <a id="35Extra__128">
     </a>
     3.5、Extra 重要信息
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        值
       </th>
       <th>
        含义
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        Using index
       </td>
       <td>
        覆盖索引扫描（无需回表）
       </td>
      </tr>
      <tr>
       <td>
        Using where
       </td>
       <td>
        存储引擎返回数据后在Server层过滤
       </td>
      </tr>
      <tr>
       <td>
        Using temporary
       </td>
       <td>
        使用临时表（常见于GROUP BY/ORDER BY）
       </td>
      </tr>
      <tr>
       <td>
        Using filesort
       </td>
       <td>
        额外排序操作（需优化索引或调整排序方式）
       </td>
      </tr>
      <tr>
       <td>
        Using index condition
       </td>
       <td>
        索引条件下推（ICP优化）
       </td>
      </tr>
      <tr>
       <td>
        Select tables optimized away
       </td>
       <td>
        通过索引直接获取统计信息（如MIN/MAX）
       </td>
      </tr>
     </tbody>
    </table>
    <h2>
     <a id="_138">
     </a>
     四、实战案例分析
    </h2>
    <p>
     <strong>
      案例1：索引失效分析
     </strong>
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>order_date<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2023</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     输出结果：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">type</span>: <span class="token keyword">ALL</span>
<span class="token keyword">key</span>: <span class="token boolean">NULL</span>
Extra: <span class="token keyword">Using</span> <span class="token keyword">where</span>
</code></pre>
    <p>
     问题诊断：对列使用函数导致索引失效
    </p>
    <p>
     优化方案：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> orders <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> idx_order_date <span class="token punctuation">(</span>order_date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders 
<span class="token keyword">WHERE</span> order_date <span class="token operator">BETWEEN</span> <span class="token string">'2023-01-01'</span> <span class="token operator">AND</span> <span class="token string">'2023-12-31'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <strong>
      案例2：连接查询优化
     </strong>
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">EXPLAIN</span> 
<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name 
<span class="token keyword">FROM</span> employees e
<span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>dept_id <span class="token operator">=</span> d<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre>
    <p>
     输出显示：
    </p>
    <pre><code class="prism language-sql"><span class="token operator">+</span><span class="token comment">----+-------------+-------+--------+---------------+---------+---------+--------------+------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span>   <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref          <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+--------+---------------+---------+---------+--------------+------+-------------+</span>
<span class="token operator">|</span> <span class="token number">1</span>  <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> e     <span class="token operator">|</span> <span class="token keyword">ALL</span>    <span class="token operator">|</span> dept_id       <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span> <span class="token number">1000</span> <span class="token operator">|</span>             <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1</span>  <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> d     <span class="token operator">|</span> eq_ref <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> company<span class="token punctuation">.</span>e<span class="token punctuation">.</span>dept_id <span class="token operator">|</span> <span class="token number">1</span>   <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+--------+---------------+---------+---------+--------------+------+-------------+</span>
</code></pre>
    <p>
     优化建议：为 employees 表的 dept_id 字段添加索引
    </p>
    <h2>
     <a id="_181">
     </a>
     五、高级技巧与最佳实践
    </h2>
    <h3>
     <a id="51JSON_182">
     </a>
     5.1、JSON格式输出分析
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">EXPLAIN</span> FORMAT<span class="token operator">=</span>JSON <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     可获取更详细的成本估算信息：
    </p>
    <pre><code class="prism language-sql">{
  <span class="token string">"query_block"</span>: {
    <span class="token string">"cost_info"</span>: {
      <span class="token string">"query_cost"</span>: <span class="token string">"1.20"</span>
    }<span class="token punctuation">,</span>
    <span class="token string">"table"</span>: {
      <span class="token string">"access_type"</span>: <span class="token string">"range"</span><span class="token punctuation">,</span>
      <span class="token string">"rows_examined_per_scan"</span>: <span class="token number">500</span><span class="token punctuation">,</span>
      <span class="token string">"rows_produced_per_join"</span>: <span class="token number">500</span><span class="token punctuation">,</span>
      <span class="token string">"filtered"</span>: <span class="token string">"100.00"</span><span class="token punctuation">,</span>
      <span class="token string">"cost_info"</span>: {
        <span class="token string">"read_cost"</span>: <span class="token string">"0.50"</span><span class="token punctuation">,</span>
        <span class="token string">"eval_cost"</span>: <span class="token string">"0.70"</span><span class="token punctuation">,</span>
        <span class="token string">"prefix_cost"</span>: <span class="token string">"1.20"</span>
      }
    }
  }
}
</code></pre>
    <h3>
     <a id="52_209">
     </a>
     5.2、执行计划可视化工具
    </h3>
    <p>
     推荐使用：
    </p>
    <ul>
     <li>
      MySQL Workbench Visual Explain
     </li>
     <li>
      Percona Toolkit 的 pt-visual-explain
     </li>
     <li>
      在线工具：https://explain.dalibo.com/
     </li>
    </ul>
    <h3>
     <a id="53_215">
     </a>
     5.3、优化器提示
    </h3>
    <p>
     强制使用指定索引：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">USE</span> <span class="token keyword">INDEX</span> <span class="token punctuation">(</span>index_name<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
    <h3>
     <a id="54_221">
     </a>
     5.4、统计信息管理
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">ANALYZE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">;</span>  <span class="token comment">-- 更新统计信息</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span> <span class="token comment">-- 查看索引基数</span>
</code></pre>
    <h2>
     <a id="_228">
     </a>
     六、常见误区与注意事项
    </h2>
    <ol>
     <li>
      rows 列是估算值，实际值可能偏差较大
     </li>
     <li>
      索引覆盖不代表高效，需结合扫描行数判断
     </li>
     <li>
      并非所有 Using filesort 都需要优化，小数据量排序是正常现象
     </li>
     <li>
      强制索引可能适得其反，需结合数据分布考虑
     </li>
     <li>
      连接顺序不一定按书写顺序，优化器会自动选择最佳顺序
     </li>
    </ol>
    <h2>
     <a id="EXPLAIN__235">
     </a>
     七、EXPLAIN 执行计划优化路线图
    </h2>
    <ol>
     <li>
      检查 type 列是否达到 range 级别以上
     </li>
     <li>
      确认 possible_keys 和 key 是否合理
     </li>
     <li>
      分析 key_len 是否充分利用索引
     </li>
     <li>
      检查 rows 估算值是否过大
     </li>
     <li>
      查看 Extra 列是否有警告信息
     </li>
     <li>
      验证 filtered 百分比是否过低
     </li>
     <li>
      对比优化前后的执行计划差异
     </li>
    </ol>
    <br/>
    <br/>
    <h3>
     创作不易，欢迎打赏，你的鼓励将是我创作的最大动力。
    </h3>
    <p>
     <img alt="在这里插入图片描述" height="300" src="https://i-blog.csdnimg.cn/direct/c69c1a11e6214f3da88ee63529e90cb2.jpeg" width="240"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34393131343530332f:61727469636c652f64657461696c732f313436323631393030" class_="artid" style="display:none">
 </p>
</div>


