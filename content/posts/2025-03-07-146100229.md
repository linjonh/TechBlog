---
layout: post
title: "UIè‡ªåŠ¨åŒ–æ¡†æ¶ç¬¬äº”å¼ AndroidUiAutomation-ç±»åŠŸèƒ½ç®€ä»‹"
date: 2025-03-07 17:04:35 +0800
description: "ç±»å°è£…äº†è®¾å¤‡äº¤äº’çš„åŸºæœ¬æ“ä½œï¼ˆå¦‚è¿æ¥ã€æˆªå›¾ã€ç‚¹å‡»ã€æ»‘åŠ¨ï¼‰ï¼ŒåŸºäº uiautomator2 å®ç°ã€‚ç±»è´Ÿè´£æ ¹æ®ç³»ç»Ÿå’Œè¯­è¨€åˆå§‹åŒ–ç¯å¢ƒï¼Œå¹¶æä¾›æ“ä½œæ­¥éª¤çš„æ‰§è¡Œæ¥å£ã€‚æ”¯æŒé€šè¿‡æ–‡æœ¬è¯†åˆ«å’Œå›¾ç‰‡è¯†åˆ«å®šä½ UI å…ƒç´ ï¼Œå¹¶æ‰§è¡Œç‚¹å‡»ç­‰æ“ä½œã€‚simulation_operation_step æ–¹æ³•è®¾è®¡ä¸ºå¯æ‰©å±•ï¼Œæ”¯æŒæ›´å¤šæ“ä½œç±»å‹ï¼ˆå¦‚è¾“å…¥ã€æ»‘åŠ¨ï¼‰ã€‚AndroidUiAutomation ç±»ä¸­åŒ…å«äº†è¿æ¥é”™è¯¯å¤„ç†å’Œèµ„æºæ¸…ç†åŠŸèƒ½ï¼Œç¡®ä¿æ“ä½œçš„ç¨³å®šæ€§å’Œèµ„æºé‡Šæ”¾ã€‚"
keywords: "ã€UIè‡ªåŠ¨åŒ–æ¡†æ¶ç¬¬äº”å¼ ã€‘AndroidUiAutomation ç±»åŠŸèƒ½ç®€ä»‹"
categories: ['æœªåˆ†ç±»']
tags: ['è¿ç»´', 'è‡ªåŠ¨åŒ–', 'Ui']
artid: "146100229"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146100229
    alt: "UIè‡ªåŠ¨åŒ–æ¡†æ¶ç¬¬äº”å¼ AndroidUiAutomation-ç±»åŠŸèƒ½ç®€ä»‹"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146100229
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146100229
cover: https://bing.ee123.net/img/rand?artid=146100229
image: https://bing.ee123.net/img/rand?artid=146100229
img: https://bing.ee123.net/img/rand?artid=146100229
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ã€UIè‡ªåŠ¨åŒ–æ¡†æ¶ç¬¬äº”å¼ ã€‘AndroidUiAutomation ç±»åŠŸèƒ½ç®€ä»‹
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="AndroidUiAutomation___0">
     </a>
     ä¸€ã€AndroidUiAutomation ç±» åŠŸèƒ½ç®€ä»‹
    </h2>
    <ul>
     <li>
      <p>
       <strong>
        åŠŸèƒ½ï¼š
       </strong>
       ä¸º Android è®¾å¤‡æä¾› UI è‡ªåŠ¨åŒ–æ“ä½œçš„å·¥å…·ç±»ï¼Œæ”¯æŒè¿æ¥è®¾å¤‡ã€è·å–æˆªå›¾ã€ç‚¹å‡»ã€æ»‘åŠ¨ã€è·å–å±å¹•åˆ†è¾¨ç‡å’Œæ¸…ç†èµ„æºç­‰åŠŸèƒ½ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         device_idï¼ˆå¯é€‰ï¼‰ï¼š
        </code>
        è®¾å¤‡ IDï¼ˆå¦‚ â€œemulator-5554â€ï¼‰ï¼Œå¦‚æœæœªæŒ‡å®šåˆ™è‡ªåŠ¨æ£€æµ‹ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        å¼‚å¸¸ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         ConnectionErrorï¼š
        </code>
        å¦‚æœæ— æ³•è¿æ¥è®¾å¤‡ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
       <br/>
       AndroidUiAutomation ç±»åŸºäº uiautomator2 åº“ä¸ Android è®¾å¤‡äº¤äº’ï¼Œæä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•æ¥æ‰§è¡Œå¸¸è§çš„ UI æ“ä½œï¼Œé€‚ç”¨äº UI æµ‹è¯•å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚
      </p>
     </li>
    </ul>
    <hr/>
    <h2>
     <a id="_19">
     </a>
     äºŒã€ä»£ç åŠŸèƒ½è§£æ
    </h2>
    <h3>
     <a id="1___init____21">
     </a>
     1.
     <code>
      __init__
     </code>
     æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**åˆå§‹åŒ–
       <code>
        AndroidUiAutomation
       </code>
       ç±»å¹¶è¿æ¥è®¾å¤‡ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         device_idï¼ˆå¯é€‰ï¼‰
        </code>
        ï¼šè®¾å¤‡ IDï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> device_id<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>device <span class="token operator">=</span> u2<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>device_id<span class="token punctuation">)</span> <span class="token keyword">if</span> device_id <span class="token keyword">else</span> u2<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æˆåŠŸè¿æ¥è®¾å¤‡: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>device_info<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ConnectionError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ— æ³•è¿æ¥è®¾å¤‡: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         å¦‚æœæä¾›äº†
         <code>
          device_id
         </code>
         ï¼Œåˆ™è¿æ¥æŒ‡å®šè®¾å¤‡ï¼›å¦åˆ™ï¼Œè‡ªåŠ¨æ£€æµ‹å¹¶è¿æ¥è®¾å¤‡ã€‚
        </p>
       </li>
       <li>
        <p>
         è¿æ¥å¤±è´¥æ—¶æŠ›å‡º
         <code>
          ConnectionError å¼‚å¸¸
         </code>
         ã€‚
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="2_get_screenshot__48">
     </a>
     2.
     <code>
      get_screenshot
     </code>
     æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**è·å–è®¾å¤‡å±å¹•çš„å®æ—¶æˆªå›¾ï¼Œå¹¶å¯é€‰æ‹©ä¿å­˜åˆ°æ–‡ä»¶ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         save_path
        </code>
        ï¼ˆå¯é€‰ï¼‰ï¼šä¿å­˜æˆªå›¾çš„è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ï¼Œå¦‚æœä¸º None åˆ™ä¸ä¿å­˜ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        è¿”å›å€¼ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         numpy.ndarrayï¼š
        </code>
        OpenCV æ ¼å¼çš„æˆªå›¾ï¼ˆBGR æ ¼å¼ï¼‰ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        å¼‚å¸¸ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         Exceptionï¼š
        </code>
        å¦‚æœæˆªå›¾å¤±è´¥ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">get_screenshot</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> save_path<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        screenshot <span class="token operator">=</span> self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>screenshot<span class="token punctuation">(</span><span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'opencv'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> save_path<span class="token punctuation">:</span>
            cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span>save_path<span class="token punctuation">,</span> screenshot<span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æˆªå›¾å·²ä¿å­˜åˆ°: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>save_path<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> screenshot
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"è·å–æˆªå›¾å¤±è´¥: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         è¿”å›è®¾å¤‡çš„å®æ—¶æˆªå›¾ï¼ˆOpenCV æ ¼å¼ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         å¦‚æœæŒ‡å®šäº†
         <code>
          save_path
         </code>
         ï¼Œåˆ™ä¿å­˜æˆªå›¾åˆ°è¯¥è·¯å¾„ã€‚
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="3_click__86">
     </a>
     3.
     <code>
      click
     </code>
     æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**ç‚¹å‡»è®¾å¤‡å±å¹•ä¸Šçš„æŒ‡å®šåæ ‡ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <code>
          xï¼šX åæ ‡ï¼ˆæ•´æ•°ç±»å‹ï¼‰ã€‚
         </code>
        </p>
       </li>
       <li>
        <p>
         <code>
          yï¼šY åæ ‡ï¼ˆæ•´æ•°ç±»å‹ï¼‰ã€‚
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        è¿”å›å€¼ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         boolï¼š
        </code>
        æ“ä½œæ˜¯å¦æˆåŠŸã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        å¼‚å¸¸ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         ValueErrorï¼š
        </code>
        å¦‚æœåæ ‡æ— æ•ˆæˆ–è¶…å‡ºå±å¹•èŒƒå›´ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">click</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        width<span class="token punctuation">,</span> height <span class="token operator">=</span> self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>window_size<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">&lt;=</span> x <span class="token operator">&lt;</span> width <span class="token keyword">and</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> y <span class="token operator">&lt;</span> height<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"åæ ‡ (</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">) è¶…å‡ºå±å¹•èŒƒå›´ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>width<span class="token punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>height<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>click<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æˆåŠŸç‚¹å‡»åæ ‡ (</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">)"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ç‚¹å‡»å¤±è´¥: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
      </p>
      <ul>
       <li>
        æ£€æŸ¥åæ ‡æ˜¯å¦åœ¨å±å¹•èŒƒå›´å†…ï¼Œè‹¥æœ‰æ•ˆåˆ™æ‰§è¡Œç‚¹å‡»æ“ä½œå¹¶è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="4_swipe_coordinates__126">
     </a>
     4.
     <code>
      swipe_coordinates
     </code>
     æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**åœ¨è®¾å¤‡å±å¹•ä¸Šä»èµ·å§‹åæ ‡æ»‘åŠ¨åˆ°ç»“æŸåæ ‡ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <code>
          start_xï¼š
         </code>
         èµ·å§‹ç‚¹ X åæ ‡ï¼ˆæ•´æ•°ç±»å‹ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          start_yï¼š
         </code>
         èµ·å§‹ç‚¹ Y åæ ‡ï¼ˆæ•´æ•°ç±»å‹ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          end_xï¼š
         </code>
         ç»“æŸç‚¹ X åæ ‡ï¼ˆæ•´æ•°ç±»å‹ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          end_yï¼š
         </code>
         ç»“æŸç‚¹ Y åæ ‡ï¼ˆæ•´æ•°ç±»å‹ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          durationï¼ˆå¯é€‰ï¼‰ï¼š
         </code>
         æ»‘åŠ¨æ—¶é•¿ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤ä¸º 500msï¼‰ã€‚
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        è¿”å›å€¼ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         boolï¼š
        </code>
        æ“ä½œæ˜¯å¦æˆåŠŸã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        å¼‚å¸¸ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         ValueErrorï¼š
        </code>
        å¦‚æœåæ ‡æ— æ•ˆæˆ–è¶…å‡ºå±å¹•èŒƒå›´ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">swipe_coordinates</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> start_x<span class="token punctuation">,</span> start_y<span class="token punctuation">,</span> end_x<span class="token punctuation">,</span> end_y<span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        width<span class="token punctuation">,</span> height <span class="token operator">=</span> self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>window_size<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">&lt;=</span> start_x <span class="token operator">&lt;</span> width <span class="token keyword">and</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> start_y <span class="token operator">&lt;</span> height <span class="token keyword">and</span> 
                <span class="token number">0</span> <span class="token operator">&lt;=</span> end_x <span class="token operator">&lt;</span> width <span class="token keyword">and</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> end_y <span class="token operator">&lt;</span> height<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"åæ ‡è¶…å‡ºå±å¹•èŒƒå›´ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>width<span class="token punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>height<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>swipe<span class="token punctuation">(</span>start_x<span class="token punctuation">,</span> start_y<span class="token punctuation">,</span> end_x<span class="token punctuation">,</span> end_y<span class="token punctuation">,</span> duration<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æˆåŠŸä» (</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>start_x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>start_y<span class="token punctuation">}</span></span><span class="token string">) æ»‘åŠ¨åˆ° (</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>end_x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>end_y<span class="token punctuation">}</span></span><span class="token string">)ï¼Œæ—¶é•¿ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>duration<span class="token punctuation">}</span></span><span class="token string">ms"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ»‘åŠ¨å¤±è´¥: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
      </p>
      <ul>
       <li>
        æ£€æŸ¥åæ ‡æœ‰æ•ˆæ€§åæ‰§è¡Œæ»‘åŠ¨æ“ä½œï¼Œè¿”å›æ“ä½œç»“æœã€‚
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="5_get_screen_resolution__173">
     </a>
     5.
     <code>
      get_screen_resolution
     </code>
     æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**è·å–è®¾å¤‡å±å¹•çš„åˆ†è¾¨ç‡ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        è¿”å›å€¼ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         tupleï¼š
        </code>
        å±å¹•åˆ†è¾¨ç‡ï¼ˆwidth, heightï¼‰ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">get_screen_resolution</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        width<span class="token punctuation">,</span> height <span class="token operator">=</span> self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>window_size<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å±å¹•åˆ†è¾¨ç‡: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>width<span class="token punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>height<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> width<span class="token punctuation">,</span> height
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"è·å–åˆ†è¾¨ç‡å¤±è´¥: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
      </p>
      <ul>
       <li>
        è¿”å›å±å¹•çš„å®½åº¦å’Œé«˜åº¦ï¼Œå¤±è´¥æ—¶è¿”å› (None, None)ã€‚
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="6_cleanup__200">
     </a>
     6. cleanup æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**æ¸…ç†èµ„æºï¼Œæ–­å¼€è®¾å¤‡è¿æ¥ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        è¿”å›å€¼ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <code>
         boolï¼š
        </code>
        æ“ä½œæ˜¯å¦æˆåŠŸã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">cleanup</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>disconnect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®¾å¤‡è¿æ¥å·²æ–­å¼€"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ¸…ç†å¤±è´¥: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre>
     </li>
     <li>
      <p>
       æ¸…ç†èµ„æºï¼Œæ–­å¼€è®¾å¤‡è¿æ¥
      </p>
      <ul>
       <li>
        æ–­å¼€è®¾å¤‡è¿æ¥å¹¶é‡Šæ”¾èµ„æºï¼Œè¿”å›æ“ä½œç»“æœã€‚
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="UiAutomation__227">
     </a>
     <code>
      UiAutomation
     </code>
     ç±»
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**æ ¹æ®ç³»ç»Ÿå’Œè¯­è¨€åˆå§‹åŒ– UI è‡ªåŠ¨åŒ–æ“ä½œï¼Œå¹¶æä¾›æ¨¡æ‹Ÿæ“ä½œæ­¥éª¤çš„æ–¹æ³•ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         **systemï¼š**æ“ä½œç³»ç»Ÿç±»å‹ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼Œå¦‚ â€œandroidâ€ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         **languageï¼š**è¯­è¨€ç±»å‹ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼Œå¦‚ â€œenâ€ï¼‰ã€‚
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
       <br/>
       <code>
        UiAutomation
       </code>
       ç±»è®¾è®¡ä¸ºæ ¹æ®ç³»ç»Ÿå’Œè¯­è¨€é…ç½®åˆå§‹åŒ– UI æ“ä½œç¯å¢ƒï¼Œå¹¶é€šè¿‡
       <code>
        simulation_operation_step
       </code>
       æ–¹æ³•æ‰§è¡Œå…·ä½“æ“ä½œæ­¥éª¤ã€‚
      </p>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="1___init____242">
     </a>
     1
     <code>
      . __init__
     </code>
     æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**åˆå§‹åŒ–
       <code>
        UiAutomation
       </code>
       ç±»ã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <code>
          systemï¼š
         </code>
         æ“ä½œç³»ç»Ÿç±»å‹ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          languageï¼š
         </code>
         è¯­è¨€ç±»å‹ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ã€‚
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> system<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> system <span class="token operator">==</span> <span class="token string">"android"</span><span class="token punctuation">:</span>
        <span class="token comment"># self.drive = AndroidUiAutomation()</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"system: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>system<span class="token punctuation">}</span></span><span class="token string">, language: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>language<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token comment"># self.action = UITools(self.drive, language)</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         æ ¹æ®
         <code>
          system
         </code>
         åˆ¤æ–­æ“ä½œç³»ç»Ÿç±»å‹ï¼Œå½“å‰ä»…æ”¯æŒ â€œandroidâ€ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          self.drive
         </code>
         å’Œ
         <code>
          self.action
         </code>
         è¢«æ³¨é‡Šæ‰ï¼Œä»…æ‰“å°ç³»ç»Ÿå’Œè¯­è¨€ä¿¡æ¯ã€‚
        </p>
       </li>
       <li>
        <p>
         æ³¨æ„ï¼šåˆå§‹åŒ–é€»è¾‘ä¸å®Œæ•´ï¼Œå»ºè®®å¯ç”¨å¹¶å®Œå–„ç›¸å…³ä»£ç ã€‚
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="2_simulation_operation_step__272">
     </a>
     2.
     <code>
      simulation_operation_step
     </code>
     æ–¹æ³•
    </h3>
    <ul>
     <li>
      <p>
       **åŠŸèƒ½ï¼š**æ ¹æ®æ­¥éª¤æ‰§è¡Œ UI æ“ä½œã€‚
      </p>
     </li>
     <li>
      <p>
       <strong>
        å‚æ•°ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <code>
          stepï¼š
         </code>
         æ“ä½œæ­¥éª¤ï¼ˆå­—å…¸ç±»å‹ï¼ŒåŒ…å« â€œtypeâ€ã€â€œactionâ€ å’Œ â€œvalueâ€ é”®ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          keywordsï¼ˆå¯é€‰ï¼‰ï¼š
         </code>
         æ“ä½œå…³é”®è¯åˆ—è¡¨ï¼ˆé»˜è®¤ä¸º [â€œtypeâ€, â€œactionâ€, â€œvalueâ€]ï¼‰ã€‚
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ä»£ç ç‰‡æ®µï¼š
       </strong>
      </p>
      <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">simulation_operation_step</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> step<span class="token punctuation">,</span> keywords<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> keywords <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        keywords <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"action"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">]</span>
    <span class="token builtin">type</span> <span class="token operator">=</span> step<span class="token punctuation">[</span>keywords<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>        <span class="token comment"># è¯†åˆ«æ–¹æ³•ï¼šæ–‡å­—è¯†åˆ«/å›¾ç‰‡è¯†åˆ«</span>
    action <span class="token operator">=</span> step<span class="token punctuation">[</span>keywords<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>      <span class="token comment"># æ“ä½œæ–¹æ³•ï¼šç‚¹å‡»/è¾“å…¥/æ»‘åŠ¨</span>
    value <span class="token operator">=</span> step<span class="token punctuation">[</span>keywords<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span>       <span class="token comment"># æ•°æ®</span>
    <span class="token keyword">if</span> <span class="token builtin">type</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"ocr"</span><span class="token punctuation">,</span> <span class="token string">"æ–‡æœ¬"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> action <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token comment"># self.action.click_text(value)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"text: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>value<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> <span class="token builtin">type</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"image"</span><span class="token punctuation">,</span> <span class="token string">"å›¾ç‰‡"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> action <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token comment"># self.action.click_image(value)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"image: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>value<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"ä¸æ”¯æŒçš„æ“ä½œç±»å‹"</span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¯´æ˜ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         æ ¹æ® step ä¸­çš„ type å’Œ action æ‰§è¡Œæ“ä½œï¼Œæ”¯æŒæ–‡æœ¬è¯†åˆ«ï¼ˆâ€œtextâ€ã€â€œocrâ€ã€â€œæ–‡æœ¬â€ï¼‰å’Œå›¾ç‰‡è¯†åˆ«ï¼ˆâ€œimageâ€ã€â€œå›¾ç‰‡â€ï¼‰ã€‚
        </p>
       </li>
       <li>
        <p>
         å½“å‰ä»…æ”¯æŒç‚¹å‡»æ“ä½œï¼Œå®é™…æ“ä½œè¢«æ³¨é‡Šæ‰ï¼Œä»…æ‰“å°ä¿¡æ¯ã€‚
        </p>
       </li>
       <li>
        <p>
         æ³¨æ„ï¼šéœ€å®ç° self.action çš„ç›¸å…³æ–¹æ³•ä»¥å®ŒæˆåŠŸèƒ½ã€‚
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h2>
     <a id="_313">
     </a>
     ä¸‰ã€æ€è·¯æ€»ç»“
    </h2>
    <h4>
     <a id="_315">
     </a>
     æ ¸å¿ƒæ€è·¯ï¼š
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        æ¨¡å—åŒ–è®¾è®¡ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <code>
          AndroidUiAutomation
         </code>
         ç±»å°è£…äº†è®¾å¤‡äº¤äº’çš„åŸºæœ¬æ“ä½œï¼ˆå¦‚è¿æ¥ã€æˆªå›¾ã€ç‚¹å‡»ã€æ»‘åŠ¨ï¼‰ï¼ŒåŸºäº uiautomator2 å®ç°ã€‚
        </p>
       </li>
       <li>
        <p>
         <code>
          UiAutomation
         </code>
         ç±»è´Ÿè´£æ ¹æ®ç³»ç»Ÿå’Œè¯­è¨€åˆå§‹åŒ–ç¯å¢ƒï¼Œå¹¶æä¾›æ“ä½œæ­¥éª¤çš„æ‰§è¡Œæ¥å£ã€‚
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        çµæ´»çš„æ“ä½œæ”¯æŒï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         æ”¯æŒé€šè¿‡æ–‡æœ¬è¯†åˆ«å’Œå›¾ç‰‡è¯†åˆ«å®šä½ UI å…ƒç´ ï¼Œå¹¶æ‰§è¡Œç‚¹å‡»ç­‰æ“ä½œã€‚
        </p>
       </li>
       <li>
        <p>
         simulation_operation_step æ–¹æ³•è®¾è®¡ä¸ºå¯æ‰©å±•ï¼Œæ”¯æŒæ›´å¤šæ“ä½œç±»å‹ï¼ˆå¦‚è¾“å…¥ã€æ»‘åŠ¨ï¼‰ã€‚
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        å¼‚å¸¸å¤„ç†å’Œèµ„æºç®¡ç†ï¼š
       </strong>
      </p>
      <ul>
       <li>
        AndroidUiAutomation ç±»ä¸­åŒ…å«äº†è¿æ¥é”™è¯¯å¤„ç†å’Œèµ„æºæ¸…ç†åŠŸèƒ½ï¼Œç¡®ä¿æ“ä½œçš„ç¨³å®šæ€§å’Œèµ„æºé‡Šæ”¾ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        å½“å‰å®ç°çŠ¶æ€ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         UiAutomation ç±»çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆself.drive å’Œ self.actionï¼‰è¢«æ³¨é‡Šæ‰ï¼Œä»…æ‰“å°ä¿¡æ¯ï¼Œæœªå®ç°å®é™…æ“ä½œã€‚
        </p>
       </li>
       <li>
        <p>
         ä»£ç æ³¨é‡Šè¡¨æ˜ä½œè€…è®¡åˆ’é›†æˆ AndroidUiAutomation å’Œ UITools æ¥å®Œæˆå®Œæ•´åŠŸèƒ½ï¼Œä½†å°šæœªå®ç°ã€‚
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        æ”¹è¿›å»ºè®®ï¼š
       </strong>
      </p>
      <ul>
       <li>
        <p>
         å®Œå–„ UiAutomation ç±»çš„åˆå§‹åŒ–é€»è¾‘ï¼Œå¯ç”¨ self.drive å’Œ self.actionã€‚
        </p>
       </li>
       <li>
        <p>
         å®ç° UITools ä¸­çš„ click_text å’Œ click_image æ–¹æ³•ï¼Œä»¥æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡è¯†åˆ«çš„ç‚¹å‡»æ“ä½œã€‚
        </p>
       </li>
       <li>
        <p>
         ğŸ’¢
         <strong>
          æ‰©å±• simulation_operation_step æ–¹æ³•ï¼Œæ”¯æŒæ›´å¤šæ“ä½œç±»å‹ï¼ˆå¦‚è¾“å…¥ã€æ»‘åŠ¨ï¼‰
         </strong>
         ã€‚
        </p>
       </li>
      </ul>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33393935303537322f:61727469636c652f64657461696c732f313436313030323239" class_="artid" style="display:none">
 </p>
</div>


