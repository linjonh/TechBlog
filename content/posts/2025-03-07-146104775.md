---
layout: post
title: "Debian系统grub新增启动项"
date: 2025-03-07 20:49:42 +0800
description: "根据提示可以了解到，这是一个用于存放配置信息的文件，例如首选启动项、超时时间等等。打开boot里面的grub.cfg，找一个menuentry作为模板。之后将模板放在40_custom里面，添加模板后将启动项名称进行修改。根据提示就可以看出，40是留给客户自定义grub启动项的一个文件。新建启动项实际上就是修改40_custom文件的内容。使用vim打开boot里面的grub.cfg。可以看到我们新加的启动项已经出现在选项中了。从刚才看到的文件提示中，注意到两个路径。可以看到我们的修改已经更新了。"
keywords: "Debian系统grub新增启动项"
categories: ['未分类']
tags: ['Debian']
artid: "146104775"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146104775
    alt: "Debian系统grub新增启动项"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146104775
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146104775
cover: https://bing.ee123.net/img/rand?artid=146104775
image: https://bing.ee123.net/img/rand?artid=146104775
img: https://bing.ee123.net/img/rand?artid=146104775
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Debian系统grub新增启动项
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     参考链接
    </h2>
    <ol>
     <li>
      <p>
       <a href="https://blog.csdn.net/qq_37806908/article/details/104318440" title="给grub添加自定义启动项_linux grub定制 启动项名称自定义-CSDN博客">
        给grub添加自定义启动项_linux grub定制 启动项名称自定义-CSDN博客
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://www.cnblogs.com/longwaytogo/p/5679583.html" rel="nofollow" title="www.cnblogs.com">
        www.cnblogs.com
       </a>
      </p>
     </li>
    </ol>
    <h2>
     1. boot里面的grub.cfg
    </h2>
    <ol>
    </ol>
    <p>
     使用vim打开boot里面的grub.cfg
    </p>
    <pre><code class="language-bash">sudo vim /boot/grub/grub.cfg</code></pre>
    <p>
     这时候会看到文件最上方的提示
    </p>
    <p>
     <img alt="" height="110" src="https://i-blog.csdnimg.cn/direct/a15df131188b472188b61ae0ee0211d1.png" width="534"/>
    </p>
    <h2>
     2. 真正配置grub的文件
    </h2>
    <p>
     从刚才看到的文件提示中，注意到两个路径
    </p>
    <ol>
     <li>
      <p>
       /etc/grub.d
      </p>
     </li>
     <li>
      <p>
       /etc/default/grub
      </p>
     </li>
    </ol>
    <p>
     打开这两个路径下的文件进行查看
    </p>
    <h3>
     /etc/grub.d
    </h3>
    <p>
     这个路径实际上还可以深入
    </p>
    <pre><code class="language-bash">cd /etc/grub.d ls -lh</code></pre>
    <p>
     <img alt="" height="199" src="https://i-blog.csdnimg.cn/direct/e9ff0d120e3e453b90d9df3a8aaf4f7d.png" width="466"/>
    </p>
    <p>
     可以看到存放了几个以数字开头的文件，这几个文件实际上在boot里面的grub.cfg都有提到，例如：
    </p>
    <p>
     <img alt="" height="559" src="https://i-blog.csdnimg.cn/direct/75afdab69e684fac82cfcf4c8108b61f.png" width="639"/>
    </p>
    <p>
     根据提示就可以看出，40是留给客户自定义grub启动项的一个文件
    </p>
    <h3>
     /etc/default/grub
    </h3>
    <pre><code class="language-bash">cd /etc/default
sudo vim grub</code></pre>
    <p>
     <img alt="" height="559" src="https://i-blog.csdnimg.cn/direct/474163e189104aeeb4ff9f8dfe016c6f.png" width="582"/>
    </p>
    <p>
     根据提示可以了解到，这是一个用于存放配置信息的文件，例如首选启动项、超时时间等等
    </p>
    <h2>
     3. 新建grub启动项
    </h2>
    <p>
     新建启动项实际上就是修改40_custom文件的内容
    </p>
    <p>
     修改之前需要一个启动项模板
    </p>
    <p>
     打开boot里面的grub.cfg，找一个menuentry作为模板
    </p>
    <pre><code class="language-bash">sudo cat /boot/grub/grub.cfg</code></pre>
    <pre><code class="language-bash">menuentry 'Debian GNU/Linux' --class debian --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-simple-95d98d7d-a03f-4e65-96fb-56b89c9f5b7f' {
        load_video
        insmod gzio
        if [ x$grub_platform = xxen ]; then insmod xzio; insmod lzopio; fi
        insmod part_msdos
        insmod ext2
        set root='hd0,msdos1'
        if [ x$feature_platform_search_hint = xy ]; then
          search --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1  95d98d7d-a03f-4e65-96fb-56b89c9f5b7f
        else
          search --no-floppy --fs-uuid --set=root 95d98d7d-a03f-4e65-96fb-56b89c9f5b7f
        fi
        echo    'Loading Linux 6.1.0-31-amd64 ...'
        linux   /boot/vmlinuz-6.1.0-31-amd64 root=UUID=95d98d7d-a03f-4e65-96fb-56b89c9f5b7f ro  quiet
        echo    'Loading initial ramdisk ...'
        initrd  /boot/initrd.img-6.1.0-31-amd64
}</code></pre>
    <p>
     之后将模板放在40_custom里面，添加模板后将启动项名称进行修改
    </p>
    <pre><code class="language-bash">sudo vim /etc/grub.d/40_custom</code></pre>
    <h2>
     <img alt="" height="646" src="https://i-blog.csdnimg.cn/direct/d43f064d92fa46408bad4e28e107e579.png" width="1280"/>
    </h2>
    <h2>
     4. 更新启动项
    </h2>
    <p>
     输入命令
    </p>
    <pre><code class="language-bash">sudo update-grub</code></pre>
    <p>
     再次打开boot里的grub
    </p>
    <pre><code class="language-bash">sudo vim /boot/grub/grub.cfg</code></pre>
    <p>
     <img alt="" height="441" src="https://i-blog.csdnimg.cn/direct/6eaaee8bb4ed48fea5acee18bce1191d.png" width="1280"/>
    </p>
    <p>
     可以看到我们的修改已经更新了
    </p>
    <h2>
     5. 重启检查是否有新的启动项
    </h2>
    <pre><code class="language-bash">sudo init 6</code></pre>
    <p>
     <img alt="" height="480" src="https://i-blog.csdnimg.cn/direct/b22f3f0763324c509451e424caad4147.png" width="640"/>
    </p>
    <p>
     可以看到我们新加的启动项已经出现在选项中了
    </p>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f7a65616e646f6e2f:61727469636c652f64657461696c732f313436313034373735" class_="artid" style="display:none">
 </p>
</div>


