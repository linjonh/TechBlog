---
layout: post
title: "Django工程获取请求参数的几种方式"
date: 2025-03-09 14:11:49 +0800
description: "【代码】Django工程获取请求参数的几种方式。"
keywords: "django 获取请求参数"
categories: ['知识科普']
tags: ['Sqlite', 'Python', 'Django']
artid: "146131932"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146131932
    alt: "Django工程获取请求参数的几种方式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146131932
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146131932
cover: https://bing.ee123.net/img/rand?artid=146131932
image: https://bing.ee123.net/img/rand?artid=146131932
img: https://bing.ee123.net/img/rand?artid=146131932
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Django工程获取请求参数的几种方式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     在 Django 中获取请求参数的完整方法如下：
    </p>
    <h4>
     <a id="GET__2">
     </a>
     一、GET 请求参数获取
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">view_func</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 获取单个参数（推荐方式）</span>
    name <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">)</span>  <span class="token comment"># 带默认值</span>
    age <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 获取多个同名参数（如复选框）</span>
    ids <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>getlist<span class="token punctuation">(</span><span class="token string">'ids[]'</span><span class="token punctuation">)</span>  <span class="token comment"># 返回列表</span>
    
    <span class="token comment"># 获取所有参数</span>
    all_params <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 返回字典</span>
</code></pre>
    <h4>
     <a id="POST__16">
     </a>
     二、POST 请求参数获取
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">view_func</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 表单数据获取</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        username <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>
        password <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 处理多选数据</span>
        hobbies <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>getlist<span class="token punctuation">(</span><span class="token string">'hobbies'</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 获取所有参数</span>
        post_data <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="JSON__31">
     </a>
     三、JSON 请求体参数获取
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">import</span> json

<span class="token keyword">def</span> <span class="token function">view_func</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
            username <span class="token operator">=</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>
            age <span class="token operator">=</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError<span class="token punctuation">:</span>
            <span class="token keyword">return</span> HttpResponseBadRequest<span class="token punctuation">(</span><span class="token string">"Invalid JSON"</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="URL__45">
     </a>
     四、URL 路径参数获取
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># urls.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'user/&lt;int:user_id&gt;/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>user_detail<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment"># views.py</span>
<span class="token keyword">def</span> <span class="token function">user_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> user_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 直接获取路径参数</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span>  <span class="token comment"># 自动转换为整数</span>
</code></pre>
    <h4>
     <a id="_61">
     </a>
     五、文件上传处理
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">upload_file</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        uploaded_file <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'myfile'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> uploaded_file<span class="token punctuation">:</span>
            <span class="token comment"># 保存文件到指定位置</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'uploads/</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>uploaded_file<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> <span class="token string">'wb+'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> destination<span class="token punctuation">:</span>
                <span class="token keyword">for</span> chunk <span class="token keyword">in</span> uploaded_file<span class="token punctuation">.</span>chunks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    destination<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"File uploaded"</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_74">
     </a>
     六、请求头信息获取
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">get_headers</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    user_agent <span class="token operator">=</span> request<span class="token punctuation">.</span>META<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'HTTP_USER_AGENT'</span><span class="token punctuation">)</span>
    content_type <span class="token operator">=</span> request<span class="token punctuation">.</span>META<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CONTENT_TYPE'</span><span class="token punctuation">)</span>
    auth_token <span class="token operator">=</span> request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Authorization'</span><span class="token punctuation">)</span>  <span class="token comment"># Django 2.2+</span>
</code></pre>
    <h4>
     <a id="_82">
     </a>
     七、综合示例
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">complex_example</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> product_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 1. 获取路径参数</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Product ID: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>product_id<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    
    <span class="token comment"># 2. 获取GET参数</span>
    page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    search <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 3. 获取POST参数</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'form_data'</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">'json_data'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment"># 4. 处理JSON数据</span>
        <span class="token keyword">if</span> request<span class="token punctuation">.</span>content_type <span class="token operator">==</span> <span class="token string">'application/json'</span><span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                data<span class="token punctuation">[</span><span class="token string">'json_data'</span><span class="token punctuation">]</span> <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
            <span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError<span class="token punctuation">:</span>
                <span class="token keyword">pass</span>
    
    <span class="token comment"># 5. 获取文件</span>
    uploaded_file <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'attachment'</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 6. 获取请求头</span>
    client_ip <span class="token operator">=</span> request<span class="token punctuation">.</span>META<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'REMOTE_ADDR'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_115">
     </a>
     八、注意事项
    </h4>
    <ol>
     <li>
      <strong>
       参数类型转换
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-python"><span class="token comment"># 安全转换示例</span>
<span class="token keyword">def</span> <span class="token function">safe_conversion</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        page_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span>
    <span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
        page_num <span class="token operator">=</span> <span class="token number">1</span>
    
    is_admin <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'true'</span>
</code></pre>
    <ol start="2">
     <li>
      <strong>
       安全验证
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> PermissionDenied

<span class="token keyword">def</span> <span class="token function">secure_view</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 验证必要参数存在</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'user_id'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> PermissionDenied
    
    <span class="token comment"># 参数白名单验证</span>
    allowed_params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'page'</span><span class="token punctuation">,</span> <span class="token string">'sort'</span><span class="token punctuation">,</span> <span class="token string">'filter'</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">set</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>issubset<span class="token punctuation">(</span>allowed_params<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> HttpResponseBadRequest<span class="token punctuation">(</span><span class="token string">"Invalid parameters"</span><span class="token punctuation">)</span>
</code></pre>
    <ol start="3">
     <li>
      <strong>
       Django REST Framework 方式
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-python"><span class="token comment"># serializers.py</span>
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers

<span class="token keyword">class</span> <span class="token class-name">UserSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    username <span class="token operator">=</span> serializers<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    email <span class="token operator">=</span> serializers<span class="token punctuation">.</span>EmailField<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># views.py</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> api_view
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response

<span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">drf_example</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    serializer <span class="token operator">=</span> UserSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token keyword">if</span> serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        username <span class="token operator">=</span> serializer<span class="token punctuation">.</span>validated_data<span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'status'</span><span class="token punctuation">:</span> <span class="token string">'success'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>errors<span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_166">
     </a>
     九、参数获取方法对比
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        参数位置
       </th>
       <th>
        获取方式
       </th>
       <th>
        适用场景
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        URL 查询字符串
       </td>
       <td>
        <code>
         request.GET
        </code>
       </td>
       <td>
        过滤、分页、搜索参数
       </td>
      </tr>
      <tr>
       <td>
        表单数据
       </td>
       <td>
        <code>
         request.POST
        </code>
       </td>
       <td>
        传统表单提交
       </td>
      </tr>
      <tr>
       <td>
        JSON 数据
       </td>
       <td>
        <code>
         json.loads(request.body)
        </code>
       </td>
       <td>
        API 接口、AJAX 请求
       </td>
      </tr>
      <tr>
       <td>
        路径参数
       </td>
       <td>
        视图函数参数
       </td>
       <td>
        RESTful 资源定位
       </td>
      </tr>
      <tr>
       <td>
        文件上传
       </td>
       <td>
        <code>
         request.FILES
        </code>
       </td>
       <td>
        文件上传表单
       </td>
      </tr>
      <tr>
       <td>
        请求头信息
       </td>
       <td>
        <code>
         request.META
        </code>
        /
        <code>
         request.headers
        </code>
       </td>
       <td>
        认证、客户端信息获取
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="_176">
     </a>
     十、最佳实践建议
    </h4>
    <ol>
     <li>
      始终对用户输入进行验证和清理
     </li>
     <li>
      优先使用
      <code>
       get()
      </code>
      方法避免 KeyError
     </li>
     <li>
      对数值型参数进行类型转换和范围验证
     </li>
     <li>
      使用 DRF 的 Serializer 处理复杂参数验证
     </li>
     <li>
      对敏感参数使用 HTTPS 传输
     </li>
     <li>
      限制 GET 参数的最大长度（Django 默认 2500 字符）
     </li>
    </ol>
    <p>
     完整示例项目结构：
    </p>
    <pre><code>myproject/
├── myapp/
│   ├── views.py
│   ├── urls.py
│   └── serializers.py
├── utils/
│   └── param_utils.py
└── myproject/
    ├── settings.py
    └── urls.py
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323733363635372f:61727469636c652f64657461696c732f313436313331393332" class_="artid" style="display:none">
 </p>
</div>


