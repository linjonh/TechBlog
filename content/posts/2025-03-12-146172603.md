---
layout: post
title: "pythonOpenCVHough-Circle-Transform"
date: 2025-03-12 17:03:40 +0800
description: "更多有趣的代码示例，可参考。"
keywords: "cv.houghciro"
categories: ['Python']
tags: ['开发语言', '圆形检测', 'Python', 'Opencv', 'Hough']
artid: "146172603"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146172603
    alt: "pythonOpenCVHough-Circle-Transform"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146172603
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146172603
cover: https://bing.ee123.net/img/rand?artid=146172603
image: https://bing.ee123.net/img/rand?artid=146172603
img: https://bing.ee123.net/img/rand?artid=146172603
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【python】OpenCV—Hough Circle Transform
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-github-gist" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/53e428b1722c41d0b6bb1571fdfa6208.jpeg#pic_center"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <p>
     更多有趣的代码示例，可参考
     <a href="https://blog.csdn.net/bryant_meng/article/details/79263542">
      【Programming】
     </a>
    </p>
    <hr/>
    <h2>
     <a id="1_10">
     </a>
     1、功能描述
    </h2>
    <h2>
     <a id="2_12">
     </a>
     2、代码实现
    </h2>
    <p>
     载入必要的库
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
</code></pre>
    <p>
     函数入口
    </p>
    <pre><code class="prism language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     读取图片，判断图片读取是否成功
    </p>
    <pre><code class="prism language-python">    default_file <span class="token operator">=</span> <span class="token string">'1.jpg'</span>
    filename <span class="token operator">=</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> default_file

    <span class="token comment"># Loads an image</span>
    src <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>cv<span class="token punctuation">.</span>samples<span class="token punctuation">.</span>findFile<span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>

    <span class="token comment"># Check if image is loaded fine</span>
    <span class="token keyword">if</span> src <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Error opening image!'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Usage: hough_circle.py [image_name -- default '</span> <span class="token operator">+</span> default_file <span class="token operator">+</span> <span class="token string">'] \n'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ae2c86c746fe49c88695992b23bd1f11.jpeg#pic_center"/>
    </p>
    <p>
     输入图片转成灰度图
    </p>
    <pre><code class="prism language-python">    gray <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>src<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"gray.jpg"</span><span class="token punctuation">,</span> gray<span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/65de01b12fa64adea76a59fb5571ad7c.jpeg#pic_center"/>
    </p>
    <p>
     灰度图片进行平滑滤波
    </p>
    <pre><code class="prism language-python">    gray <span class="token operator">=</span> cv<span class="token punctuation">.</span>medianBlur<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"medianBlur.jpg"</span><span class="token punctuation">,</span> gray<span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a0c08636f4744397885787d8b8b1ec72.jpeg#pic_center"/>
    </p>
    <p>
     配置好算法需要的参数
    </p>
    <pre><code class="prism language-python">    rows <span class="token operator">=</span> gray<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span>
</code></pre>
    <p>
     output
    </p>
    <pre><code class="prism language-python"><span class="token number">202</span>
</code></pre>
    <p>
     调用圆形检测算法
    </p>
    <pre><code class="prism language-python">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     根据预测的结果绘制出来圆形，包含圆心和圆
    </p>
    <pre><code class="prism language-python">    <span class="token keyword">if</span> circles <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        circles <span class="token operator">=</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">(</span>np<span class="token punctuation">.</span>around<span class="token punctuation">(</span>circles<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> circles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            center <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment"># circle center</span>
            cv<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>src<span class="token punctuation">,</span> center<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token comment"># circle outline</span>
            radius <span class="token operator">=</span> i<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
            cv<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>src<span class="token punctuation">,</span> center<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/631248ff45c444fa9ddb501b19b1b519.jpeg#pic_center">
      <br/>
      保存结果，可视化结果，退出窗口，退出主函数
     </img>
    </p>
    <pre><code class="prism language-python">    cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"circles.jpg"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"detected circles"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token number">0</span>
</code></pre>
    <h2>
     <a id="3_110">
     </a>
     3、效果展示
    </h2>
    <pre><code class="prism language-python">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     输入图片
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0e0399f6953d4096a6e4cc3113e04b22.jpeg#pic_center"/>
    </p>
    <p>
     平滑后
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/32f05c7821e4425b8bc4a438222c5f52.jpeg#pic_center">
      <br/>
      检测结果
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/50789c2901a141d6af82b6d10cd8ca96.jpeg#pic_center"/>
    </p>
    <hr/>
    <pre><code class="prism language-python">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     输入图片
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/283f8a597b404299b8f4a8355ba9160b.jpeg#pic_center"/>
     <br/>
     平滑后
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8304075b7a004a2f8bdcd57a87c6bac8.jpeg#pic_center"/>
    </p>
    <p>
     结果
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/75d3f7d75ef24ec9a2737ce218c0aad0.jpeg#pic_center"/>
    </p>
    <hr/>
    <pre><code class="prism language-python">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     输入图片
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/85796ef79fca4899bbd9a96d521db800.jpeg#pic_center"/>
    </p>
    <p>
     灰度图平滑
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3545e8b13ce24519ae8712d977eb014a.jpeg#pic_center"/>
    </p>
    <p>
     检测结果
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/20794402bef64db58c823aa41b11d6a9.jpeg#pic_center"/>
    </p>
    <hr/>
    <pre><code class="prism language-cpp">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span><span class="token function">HoughCircles</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">110</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     输入图片
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/53e428b1722c41d0b6bb1571fdfa6208.jpeg#pic_center"/>
    </p>
    <p>
     灰度平滑后
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5fbc8ea762a74d388181ac4b73952e19.jpeg#pic_center"/>
    </p>
    <p>
     检测结果
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0ac6fe0a97c946e6b3655af6cda7dda0.jpeg#pic_center"/>
    </p>
    <hr/>
    <pre><code class="prism language-python">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     输入图片
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/742d63a0fb564fb494fdf33fe0da2204.jpeg#pic_center"/>
    </p>
    <p>
     灰度平滑后
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/95831c5b2a81429b9e23773cc9e744ae.jpeg#pic_center"/>
    </p>
    <p>
     检测结果
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e4268c17543640d08dc328abfa47f768.jpeg#pic_center"/>
    </p>
    <hr/>
    <pre><code class="prism language-python">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     输入图片
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/455d154fc2ca45b08f38c1814895c8cb.jpeg#pic_center"/>
    </p>
    <p>
     灰度平滑后
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8b48755b31614d9fb50eb04d9c5c6481.jpeg#pic_center"/>
    </p>
    <p>
     检测结果
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5ea9fe66eb42404892cd4993604823b3.jpeg#pic_center"/>
    </p>
    <hr/>
    <pre><code class="prism language-python">    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     输入图片
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d12f9729cfc5488cb4f93f07664c0081.jpeg#pic_center"/>
    </p>
    <p>
     灰度滤波后
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1fbf297929e94521b7f18deb1aa8e828.jpeg#pic_center"/>
     <br/>
     检测结果
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dbeec93669c84b85afe446c2e7534049.jpeg#pic_center"/>
    </p>
    <h2>
     <a id="4_263">
     </a>
     4、完整代码
    </h2>
    <pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span><span class="token punctuation">:</span>
    default_file <span class="token operator">=</span> <span class="token string">'1.jpg'</span>
    filename <span class="token operator">=</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> default_file

    <span class="token comment"># Loads an image</span>
    src <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>cv<span class="token punctuation">.</span>samples<span class="token punctuation">.</span>findFile<span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>

    <span class="token comment"># Check if image is loaded fine</span>
    <span class="token keyword">if</span> src <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Error opening image!'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Usage: hough_circle.py [image_name -- default '</span> <span class="token operator">+</span> default_file <span class="token operator">+</span> <span class="token string">'] \n'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>

    gray <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>src<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"gray.jpg"</span><span class="token punctuation">,</span> gray<span class="token punctuation">)</span>

    gray <span class="token operator">=</span> cv<span class="token punctuation">.</span>medianBlur<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"medianBlur.jpg"</span><span class="token punctuation">,</span> gray<span class="token punctuation">)</span>

    rows <span class="token operator">=</span> gray<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span>
    circles <span class="token operator">=</span> cv<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>HOUGH_GRADIENT<span class="token punctuation">,</span> dp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> minDist<span class="token operator">=</span>rows <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span>
                              param1<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>
                              minRadius<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> maxRadius<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> circles <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        circles <span class="token operator">=</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">(</span>np<span class="token punctuation">.</span>around<span class="token punctuation">(</span>circles<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> circles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            center <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment"># circle center</span>
            cv<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>src<span class="token punctuation">,</span> center<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token comment"># circle outline</span>
            radius <span class="token operator">=</span> i<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
            cv<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>src<span class="token punctuation">,</span> center<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"circles.jpg"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"detected circles"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token number">0</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="5_316">
     </a>
     5、涉及到的库函数
    </h2>
    <p>
     <code>
      cv2.HoughCircles
     </code>
     是 OpenCV 库中的一个函数，用于在图像中检测圆形的存在。它基于霍夫变换的圆检测算法，可以在给定的图像中检测并返回所有检测到的圆的信息，如圆的中心坐标和半径。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cb18f0dbc21f44929806fa7ef199c34c.png#pic_center"/>
    </p>
    <pre><code class="prism language-python">circles <span class="token operator">=</span> cv2<span class="token punctuation">.</span>HoughCircles<span class="token punctuation">(</span>image<span class="token punctuation">,</span> method<span class="token punctuation">,</span> dp<span class="token punctuation">,</span> minDist<span class="token punctuation">,</span> param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> minRadius<span class="token punctuation">,</span> maxRadius<span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <p>
       image：输入的单通道灰度图像。函数将在该图像中进行圆检测。
      </p>
     </li>
     <li>
      <p>
       method：霍夫变换的检测方法。常用的有
       <code>
        cv2.HOUGH_GRADIENT
       </code>
       和
       <code>
        cv2.HOUGH_GRADIENT_ALT
       </code>
       。
       <code>
        cv2.HOUGH_GRADIENT_ALT
       </code>
       是
       <code>
        cv2.HOUGH_GRADIENT
       </code>
       的改进方法。
      </p>
     </li>
     <li>
      <p>
       dp：图像分辨率与累加器分辨率的比值。例如，dp=1时，累加器和输入图像有相同的分辨率；dp=2时，累加器是输入图像一半大的宽高。
      </p>
     </li>
     <li>
      <p>
       minDist：检测到的圆的中心之间的最小距离。如果设置得太小，可能会检测到多个相邻的圆；如果设置得太大，可能会漏掉一些圆。
      </p>
     </li>
     <li>
      <p>
       param1：Canny边缘检测的高阈值。对于
       <code>
        cv2.HOUGH_GRADIENT
       </code>
       和
       <code>
        cv2.HOUGH_GRADIENT_ALT
       </code>
       ，这是 Canny 边缘检测的高阈值，低阈值是该参数的一半。
      </p>
     </li>
     <li>
      <p>
       param2：累加器阈值。对于
       <code>
        cv2.HOUGH_GRADIENT
       </code>
       ，它表示检测阶段圆心的累加器阈值，值越小，检测出的圆越多；对于
       <code>
        cv2.HOUGH_GRADIENT_ALT
       </code>
       ，它表示圆形的“完美性”度量，值越接近1，算法选择的圆形形状越好。
      </p>
     </li>
     <li>
      <p>
       minRadius：需要检测的最小圆半径。
      </p>
     </li>
     <li>
      <p>
       maxRadius：需要检测的最大圆半径。如果设置为&lt;=0，则使用最大图像尺寸；如果&lt;0，且 method=
       <code>
        cv2.HOUGH_GRADIENT
       </code>
       时，用来查找圆心而忽略半径的查找，method=
       <code>
        cv2.HOUGH_GRADIENT_ALT
       </code>
       不受影响，始终会去找半径。
      </p>
     </li>
    </ul>
    <p>
     返回值
    </p>
    <ul>
     <li>
      circles：返回的圆形的点，是一个三维数组。对于
      <code>
       HOUGH_GRADIENT
      </code>
      和
      <code>
       HOUGH_GRADIENT_ALT
      </code>
      两种方法，返回的圆形数组形式有差异。通常，返回的数组中包含了检测到的圆的中心坐标和半径。
     </li>
    </ul>
    <p>
     注意事项
    </p>
    <ul>
     <li>
      输入图像的质量对函数的检测效果有很大的影响，通常需要进行适当的预处理，如平滑、边缘检测等。
     </li>
     <li>
      参数的选择对检测的结果有重要的影响，需要根据具体的应用场景进行调整和优化。
     </li>
     <li>
      函数返回的圆的信息需要进一步处理和分析，以满足实际应用的需求。
     </li>
    </ul>
    <p>
     应用场景
    </p>
    <ul>
     <li>
      <code>
       cv2.HoughCircles
      </code>
      函数在很多领域都有重要的应用，如医学影像分析、工业机器视觉、自动驾驶等。例如，在医学影像分析中，常常需要检测和分析图像中的各种病变和器官，如肿瘤、血管等。使用
      <code>
       cv2.HoughCircles
      </code>
      函数，可以有效地在医学影像中检测出各种形状的病变，为医生的诊断和治疗提供重要的参考依据。
     </li>
    </ul>
    <h2>
     <a id="6_350">
     </a>
     6、参考
    </h2>
    <hr/>
    <p>
     更多有趣的代码示例，可参考
     <a href="https://blog.csdn.net/bryant_meng/article/details/79263542">
      【Programming】
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f627279616e745f6d656e672f:61727469636c652f64657461696c732f313436313732363033" class_="artid" style="display:none">
 </p>
</div>


