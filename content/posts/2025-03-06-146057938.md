---
layout: post
title: "Better-SQLite3-参数绑定详解"
date: 2025-03-06 08:31:01 +0800
description: "匿名参数：使用问号（?）作为占位符，通过位置绑定参数。命名参数：支持@foo:foo和$foo三种命名参数语法，通过对象绑定参数。混合使用：可以在同一 SQL 语句中混合使用匿名参数和命名参数。数据类型转换自动在 JavaScript 和 SQLite 之间进行数据类型的转换。通过合理使用参数绑定，可以提高代码的可读性、安全性和维护性。希望这篇文章对你有所帮助！如果有更多问题或需要进一步的帮助，请随时提问。"
keywords: "Better-SQLite3 参数绑定详解"
categories: ['Javascript']
tags: ['Sqlite', 'Javascript']
artid: "146057938"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146057938
    alt: "Better-SQLite3-参数绑定详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146057938
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146057938
cover: https://bing.ee123.net/img/rand?artid=146057938
image: https://bing.ee123.net/img/rand?artid=146057938
img: https://bing.ee123.net/img/rand?artid=146057938
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Better-SQLite3 参数绑定详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="BetterSQLite3__0">
     </a>
     Better-SQLite3 参数绑定详解
    </h4>
    <p>
     在使用
     <code>
      better-sqlite3
     </code>
     进行数据库操作时，参数绑定是一个非常重要的概念。它不仅提高了代码的可读性和安全性，还能有效防止 SQL 注入攻击。本文将详细介绍如何在
     <code>
      better-sqlite3
     </code>
     中使用匿名参数和命名参数，并展示一些实际应用示例。
    </p>
    <h5>
     <a id="_4">
     </a>
     匿名参数
    </h5>
    <p>
     匿名参数使用问号（
     <code>
      ?
     </code>
     ）作为占位符，并通过位置来绑定参数值。你可以直接传递参数值，或者将它们放在数组中传递。
    </p>
    <h6>
     <a id="_8">
     </a>
     示例代码
    </h6>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> Database <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'better-sqlite3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Database</span><span class="token punctuation">(</span><span class="token string">'mydb.sqlite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建表</span>
db<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    CREATE TABLE IF NOT EXISTS people (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        first_name TEXT NOT NULL,
        last_name TEXT NOT NULL,
        age INTEGER NOT NULL
    )
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备插入语句</span>
<span class="token keyword">const</span> stmt <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO people (first_name, last_name, age) VALUES (?, ?, ?)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 插入数据 - 直接传递参数</span>
stmt<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token string">'Smith'</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inserted John Smith.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 插入数据 - 使用数组传递参数</span>
stmt<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Jane'</span><span class="token punctuation">,</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inserted Jane Doe.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 插入数据 - 混合方式传递参数</span>
stmt<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Brown'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inserted Alice Brown.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 释放资源</span>
stmt<span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询所有记录以验证插入结果</span>
<span class="token keyword">const</span> selectStmt <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM people"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rows <span class="token operator">=</span> selectStmt<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rows<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, First Name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>first_name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Last Name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>last_name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Age: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
selectStmt<span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 关闭数据库连接</span>
db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Database connection closed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     在这个示例中，我们创建了一个
     <code>
      people
     </code>
     表，并使用匿名参数插入了几条记录。可以看到，无论是直接传递参数还是通过数组传递参数，都可以实现同样的效果。
    </p>
    <h5>
     <a id="_57">
     </a>
     命名参数
    </h5>
    <p>
     命名参数允许你为每个参数指定一个名称，这样可以更清晰地标识每个参数的作用。SQLite 支持三种命名参数语法：
     <code>
      @foo
     </code>
     、
     <code>
      :foo
     </code>
     和
     <code>
      $foo
     </code>
     ，这些都受
     <code>
      better-sqlite3
     </code>
     支持。
    </p>
    <h6>
     <a id="_61">
     </a>
     示例代码
    </h6>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> Database <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'better-sqlite3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Database</span><span class="token punctuation">(</span><span class="token string">'mydb.sqlite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建表</span>
db<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    CREATE TABLE IF NOT EXISTS people (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        first_name TEXT NOT NULL,
        last_name TEXT NOT NULL,
        age INTEGER NOT NULL
    )
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备插入语句 - 使用 @ 符号命名参数</span>
<span class="token keyword">const</span> stmt1 <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO people (first_name, last_name, age) VALUES (@firstName, @lastName, @age)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stmt1<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Smith'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">45</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inserted John Smith using @ notation.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备插入语句 - 使用 : 符号命名参数</span>
<span class="token keyword">const</span> stmt2 <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO people (first_name, last_name, age) VALUES (:firstName, :lastName, :age)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stmt2<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jane'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Doe'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inserted Jane Doe using : notation.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备插入语句 - 使用 $ 符号命名参数</span>
<span class="token keyword">const</span> stmt3 <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO people (first_name, last_name, age) VALUES ($firstName, $lastName, $age)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stmt3<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Brown'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">28</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inserted Alice Brown using $ notation.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询所有记录以验证插入结果</span>
<span class="token keyword">const</span> selectStmt <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM people"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rows <span class="token operator">=</span> selectStmt<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rows<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, First Name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>first_name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Last Name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>last_name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Age: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 关闭数据库连接</span>
db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Database connection closed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     在这个示例中，我们展示了如何使用不同符号的命名参数插入数据。无论使用哪种符号，都能达到相同的效果。
    </p>
    <h5>
     <a id="_118">
     </a>
     混合匿名参数与命名参数
    </h5>
    <p>
     你可以在同一个 SQL 语句中混合使用匿名参数和命名参数。在这种情况下，匿名参数按顺序绑定，而命名参数通过对象传递。
    </p>
    <h6>
     <a id="_122">
     </a>
     示例代码
    </h6>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> Database <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'better-sqlite3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Database</span><span class="token punctuation">(</span><span class="token string">'mydb.sqlite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建表</span>
db<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    CREATE TABLE IF NOT EXISTS people (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        age INTEGER NOT NULL
    )
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备插入语句 - 混合使用匿名参数和命名参数</span>
<span class="token keyword">const</span> stmt <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO people (name, age) VALUES (@name, ?)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 插入数据 - 先传递匿名参数，再传递命名参数</span>
stmt<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Henry'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inserted Henry with age 30.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询所有记录以验证插入结果</span>
<span class="token keyword">const</span> selectStmt <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM people"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rows <span class="token operator">=</span> selectStmt<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rows<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Age: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 关闭数据库连接</span>
db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Database connection closed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     在这个示例中，我们展示了如何在一个 SQL 语句中同时使用匿名参数和命名参数。
    </p>
    <h4>
     <a id="_158">
     </a>
     数据类型转换
    </h4>
    <p>
     <code>
      better-sqlite3
     </code>
     在 JavaScript 和 SQLite 之间自动进行数据类型的转换，具体如下：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        SQLite
       </th>
       <th>
        JavaScript
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        NULL
       </td>
       <td>
        null
       </td>
      </tr>
      <tr>
       <td>
        REAL
       </td>
       <td>
        number
       </td>
      </tr>
      <tr>
       <td>
        INTEGER
       </td>
       <td>
        number or BigInt
       </td>
      </tr>
      <tr>
       <td>
        TEXT
       </td>
       <td>
        string
       </td>
      </tr>
      <tr>
       <td>
        BLOB
       </td>
       <td>
        Buffer
       </td>
      </tr>
     </tbody>
    </table>
    <h6>
     <a id="_170">
     </a>
     示例代码
    </h6>
    <p>
     以下是一个展示不同类型数据转换的示例：
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> Database <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'better-sqlite3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Database</span><span class="token punctuation">(</span><span class="token string">'mydb.sqlite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建表</span>
db<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    CREATE TABLE IF NOT EXISTS data_types (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        real_value REAL,
        integer_value INTEGER,
        text_value TEXT,
        blob_value BLOB
    )
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 准备插入语句</span>
<span class="token keyword">const</span> insertStmt <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO data_types (real_value, integer_value, text_value, blob_value) VALUES (?, ?, ?, ?)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 插入不同类型的值</span>
insertStmt<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>
    <span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token comment">// REAL</span>
    <span class="token number">42</span><span class="token punctuation">,</span>   <span class="token comment">// INTEGER</span>
    <span class="token string">'Hello, World!'</span><span class="token punctuation">,</span> <span class="token comment">// TEXT</span>
    Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'Binary Data'</span><span class="token punctuation">)</span> <span class="token comment">// BLOB</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 释放资源</span>
insertStmt<span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询所有记录以验证插入结果</span>
<span class="token keyword">const</span> selectStmt <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM data_types"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rows <span class="token operator">=</span> selectStmt<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rows<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Real Value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>real_value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Integer Value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>integer_value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Text Value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>text_value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Blob Value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>row<span class="token punctuation">.</span>blob_value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 关闭数据库连接</span>
db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Database connection closed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="_215">
     </a>
     总结
    </h4>
    <ul>
     <li>
      <strong>
       匿名参数
      </strong>
      ：使用问号（
      <code>
       ?
      </code>
      ）作为占位符，通过位置绑定参数。
     </li>
     <li>
      <strong>
       命名参数
      </strong>
      ：支持
      <code>
       @foo
      </code>
      、
      <code>
       :foo
      </code>
      和
      <code>
       $foo
      </code>
      三种命名参数语法，通过对象绑定参数。
     </li>
     <li>
      <strong>
       混合使用
      </strong>
      ：可以在同一 SQL 语句中混合使用匿名参数和命名参数。
     </li>
     <li>
      <strong>
       数据类型转换
      </strong>
      ：
      <code>
       better-sqlite3
      </code>
      自动在 JavaScript 和 SQLite 之间进行数据类型的转换。
     </li>
    </ul>
    <p>
     通过合理使用参数绑定，可以提高代码的可读性、安全性和维护性。希望这篇文章对你有所帮助！如果有更多问题或需要进一步的帮助，请随时提问。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f677573757368616e74616e672f:61727469636c652f64657461696c732f313436303537393338" class_="artid" style="display:none">
 </p>
</div>


