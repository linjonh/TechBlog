---
layout: post
title: "如何使用-CSS-实现黑色遮罩效果"
date: 2025-03-11 20:08:06 +0800
description: "最近在工作中遇见了一个需求，鼠标经过盒子出现黑色遮罩，遮罩中有相关的编辑按钮，点击以后，进行图片上传并且展示，由于当时没有思路，思考了好久，所以在完成开发后进行总结，使用的技术栈是React+less+Antd，过程和解答过程都在下边了。"
keywords: "如何使用 CSS 实现黑色遮罩效果"
categories: ['未分类']
tags: ['前端', 'Javascript', 'Css']
artid: "146187282"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146187282
    alt: "如何使用-CSS-实现黑色遮罩效果"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146187282
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146187282
cover: https://bing.ee123.net/img/rand?artid=146187282
image: https://bing.ee123.net/img/rand?artid=146187282
img: https://bing.ee123.net/img/rand?artid=146187282
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     如何使用 CSS 实现黑色遮罩效果
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     最近在工作中遇见了一个需求，鼠标经过盒子出现黑色遮罩，遮罩中有相关的编辑按钮，点击以后，进行图片上传并且展示，由于当时没有思路，思考了好久，所以在完成开发后进行总结，使用的技术栈是React+less+Antd，过程和解答过程都在下边了
    </p>
    <h2>
     <a id="_1">
     </a>
     需求描述
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/503fb8d34c7d4f998114a2bccf200e99.png">
      <br/>
      初始化页面如下，其中图标和配图部分需要支持上传图片，上传完成后需要在最右侧进行展示，鼠标经过对应的上传上传图标盒子时，需要展示的效果如下
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/900c55aa895843a7a66bae84526cdd61.png"/>
     </img>
    </p>
    <h2>
     <a id="_5">
     </a>
     实现思路
    </h2>
    <p>
     我们直接看代码，如下
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// 触发头像图片选择</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleImageClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
	fileInputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 处理头像图片上传</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleImageChange</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> file <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> imageUrl <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">updateKey</span><span class="token punctuation">(</span><span class="token string">"logoPath"</span><span class="token punctuation">,</span>imageUrl<span class="token punctuation">)</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">upload</span><span class="token punctuation">(</span>appid<span class="token punctuation">,</span> formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">updateKey</span><span class="token punctuation">(</span><span class="token string">"logoPath"</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"icon-wrapper"</span> onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>handleImageClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token punctuation">{<!-- --></span><span class="token comment">/* 预览图片 */</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>img
    src<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token function">changeImageFormat</span><span class="token punctuation">(</span>addAllData<span class="token operator">?.</span>logoPath<span class="token punctuation">)</span> <span class="token operator">||</span> icon<span class="token punctuation">}</span>
    alt<span class="token operator">=</span><span class="token string">"icon"</span>
    width<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">64</span><span class="token punctuation">}</span>
    height<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">64</span><span class="token punctuation">}</span>
    className<span class="token operator">=</span><span class="token string">"icon-img"</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>

  <span class="token punctuation">{<!-- --></span><span class="token comment">/* 编辑按钮 */</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"overlay"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>img
      src<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>edit<span class="token punctuation">}</span>
      alt<span class="token operator">=</span><span class="token string">"edit"</span>
      className<span class="token operator">=</span><span class="token string">"edit-icon"</span>
      width<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">20</span><span class="token punctuation">}</span>
      height<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">20</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

  <span class="token punctuation">{<!-- --></span><span class="token comment">/* 隐藏的文件上传按钮 */</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>input
    type<span class="token operator">=</span><span class="token string">"file"</span>
    ref<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>fileInputRef<span class="token punctuation">}</span>
    style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">"none"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    onChange<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>handleImageChange<span class="token punctuation">}</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre>
    <pre><code class="prism language-javascript"><span class="token punctuation">.</span>icon<span class="token operator">-</span>wrapper <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 64px<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 64px<span class="token punctuation">;</span>
  <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span>

  <span class="token punctuation">.</span>icon<span class="token operator">-</span>img <span class="token punctuation">{<!-- --></span>
      margin<span class="token operator">-</span>top<span class="token operator">:</span> 4px<span class="token punctuation">;</span>
      border<span class="token operator">-</span>radius<span class="token operator">:</span> 12px<span class="token punctuation">;</span>
      object<span class="token operator">-</span>fit<span class="token operator">:</span> cover<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">.</span>overlay <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>
      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
      <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
      justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
      align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token literal-property property">transition</span><span class="token operator">:</span> opacity <span class="token number">0</span><span class="token punctuation">.</span>3s ease<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>out<span class="token punctuation">;</span>
      border<span class="token operator">-</span>radius<span class="token operator">:</span> 12px<span class="token punctuation">;</span>
      margin<span class="token operator">-</span>top<span class="token operator">:</span> 4px<span class="token punctuation">;</span>
      <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span>

      <span class="token punctuation">.</span>edit<span class="token operator">-</span>icon <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> 24px<span class="token punctuation">;</span>
          <span class="token literal-property property">height</span><span class="token operator">:</span> 24px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token operator">&amp;</span><span class="token operator">:</span>hover <span class="token punctuation">.</span>overlay <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 鼠标悬停时显示</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_101">
     </a>
     逻辑部分
    </h3>
    <p>
     在外层icon-wrapper盒子上，绑定了handleImageClick方法，在这个方法中，来触发input的点击事件。接下来是我们需要展示的图片，接下来就是我们的遮罩盒子以及编辑图标，为了实现相应的点击效果，在下方使用了一个input来获取到本地上传图片的选择部分，然后通过handleImageChange方法进行图片的上传，到这里逻辑部分就结束了。
    </p>
    <p>
     那么当鼠标经过的时候，如何实现相关的黑色遮罩以及编辑图标呢，这时候就要到我们的less文件中查看了。
    </p>
    <h3>
     <a id="_106">
     </a>
     样式实现
    </h3>
    <p>
     首先，给icon-wrapper盒子添加了一个相对定位，然后给我们的overlay盒子添加了一个绝对定位，同时给了一个0.4的黑色背景颜色以及一个transition为0.3s的缓入动画，但是现在还没有结束，还需要接入鼠标经过的变化，当鼠标经过的时候，将透明度改为1，这样就可以将黑色遮罩完全显示出来，我这边使用了less，&amp;:hover .overlay，&amp;符号的意思是，当前元素的父元素，所以这行代码的意思是，当鼠标停留在当前元素的父元素，也就是icon-wrapper上的时候，overlay盒子的透明度变为1。
    </p>
    <p>
     这样，就实现了我们需要的效果了，如果你也需要实现类似的功能，希望可以帮到你！
    </p>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36303735343132382f:61727469636c652f64657461696c732f313436313837323832" class_="artid" style="display:none">
 </p>
</div>


