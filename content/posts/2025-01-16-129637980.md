---
layout: post
title: "使用sqlmap执行SQL注入并获取数据库用户名"
date: 2025-01-16 13:11:56 +0800
description: "sqlmap支持MySQL, Oracle,PostgreSQL, Microsoft SQL Se"
keywords: "sql注入 列出用户名"
categories: ['数据库', '安全问题']
tags: ['数据库', 'Sqlmap', 'Sql', 'Sql']
artid: "129637980"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=129637980
    alt: "使用sqlmap执行SQL注入并获取数据库用户名"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=129637980
featuredImagePreview: https://bing.ee123.net/img/rand?artid=129637980
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用sqlmap执行SQL注入并获取数据库用户名
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-github-gist" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="Sqlmap_0">
     </a>
     Sqlmap介绍
    </h2>
    <p>
     sqlmap支持MySQL, Oracle,PostgreSQL, Microsoft SQL Server, Microsoft Access, IBM DB2, SQLite, Firebird,Sybase和SAP MaxDB等数据库的各种安全漏洞检测。
    </p>
    <p>
     sqlmap支持五种不同的注入模式：
    </p>
    <ol>
     <li>
      <p>
       基于布尔的盲注，即可以根据返回页面判断条件真假的注入；
      </p>
     </li>
     <li>
      <p>
       基于时间的盲注，即不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行（即页面返回时间是否增加）来判断；
      </p>
     </li>
     <li>
      <p>
       基于报错注入，即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中；
      </p>
     </li>
     <li>
      <p>
       联合查询注入，可以使用union的情况下的注入；
      </p>
     </li>
     <li>
      <p>
       堆查询注入，可以同时执行多条语句的执行时的注入。
      </p>
     </li>
    </ol>
    <h2>
     <a id="sql_13">
     </a>
     sql注入探测
    </h2>
    <h3>
     <a id="1SQL_14">
     </a>
     1.启动后端服务（含SQL注入漏洞）
    </h3>
    <h3>
     <a id="2burpsuit_15">
     </a>
     2.拿到burpsuit请求文本
    </h3>
    <p>
     保存为：
     <code>
      sqlinject.txt
     </code>
     ，放到sqlmap根目录。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/57d3f0f8873b24ba43b4b63976687a53.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/824e52c525a5a53c9963261e505ea175.png"/>
     </img>
    </p>
    <h3>
     <a id="3sqlmap_20">
     </a>
     3.执行sqlmap注入命令
    </h3>
    <pre><code class="prism language-bash">python sqlmap.py -r sqlinject.txt -f --level<span class="token operator">=</span><span class="token number">3</span> --current-db --current-user
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/334d31e883e95c924450591f584fed2d.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1b4a26e4b8b907dc72850e54c8aea758.png"/>
     </img>
    </p>
    <h2>
     <a id="_28">
     </a>
     修复后再次探测
    </h2>
    <p>
     添加了SQL注入检查后，再次执行注入命令，发现监测到服务端报错了，无法拿到数据库信息了，完美！
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c38f0686b27153fdce922ada5e1d19b0.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f496e6465784d616e2f:61727469636c652f64657461696c732f313239363337393830" class_="artid" style="display:none">
 </p>
</div>


