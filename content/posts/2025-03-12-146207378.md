---
layout: post
title: "starrocks批量启停脚本"
date: 2025-03-12 15:56:14 +0800
description: "定义 StarRocks 安装目录。# 定义 StarRocks 安装目录。# 定义 FE 和 BE 节点列表。# 定义 FE 和 BE 节点列表。# 根据组件类型停止相应节点。# 根据组件类型停止相应节点。# 检查操作是否为停止。# 检查操作是否为停止。"
keywords: "starrocks批量启停脚本"
categories: ['脚本']
tags: ['大数据']
artid: "146207378"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146207378
    alt: "starrocks批量启停脚本"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146207378
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146207378
cover: https://bing.ee123.net/img/rand?artid=146207378
image: https://bing.ee123.net/img/rand?artid=146207378
img: https://bing.ee123.net/img/rand?artid=146207378
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     starrocks批量启停脚本
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <blockquote>
     <p>
      #!/bin/bash
     </p>
     <p>
      # 定义 StarRocks 安装目录
      <br/>
      STARROCKS_HOME="/path/to/starrocks"
     </p>
     <p>
      # 定义 FE 和 BE 节点列表
      <br/>
      FE_NODES=("fe_node1_ip" "fe_node2_ip" "fe_node3_ip")
      <br/>
      BE_NODES=("be_node1_ip" "be_node2_ip" "be_node3_ip")
     </p>
     <p>
      # 定义日志文件
      <br/>
      LOG_FILE="starrocks_stop.log"
     </p>
     <p>
      # 记录日志函数
      <br/>
      log() {
      <!-- -->
      <br/>
      local timestamp=$(date +"%Y-%m-%d %H:%M:%S")
      <br/>
      echo "$timestamp - $1" &gt;&gt; $LOG_FILE
      <br/>
      }
     </p>
     <p>
      # 检查参数数量
      <br/>
      if [ $# -ne 2 ]; then
      <br/>
      log "Usage: $0 stop {fe|be}"
      <br/>
      echo "Usage: $0 stop {fe|be}"
      <br/>
      exit 1
      <br/>
      fi
     </p>
     <p>
      # 检查操作是否为停止
      <br/>
      if [ "$1" != "stop" ]; then
      <br/>
      log "Invalid operation. Only 'stop' is supported."
      <br/>
      echo "Invalid operation. Only 'stop' is supported."
      <br/>
      exit 1
      <br/>
      fi
     </p>
     <p>
      # 根据组件类型停止相应节点
      <br/>
      case "$2" in
      <br/>
      "fe")
      <br/>
      log "Stopping Frontend (FE) nodes..."
      <br/>
      for node in "${FE_NODES[@]}"; do
      <br/>
      log "Stopping FE on $node..."
      <br/>
      ssh $node "$STARROCKS_HOME/fe/bin/stop_fe.sh"
      <br/>
      if [ $? -eq 0 ]; then
      <br/>
      log "FE on $node stopped successfully."
      <br/>
      else
      <br/>
      log "Failed to stop FE on $node."
      <br/>
      fi
      <br/>
      done
      <br/>
      ;;
      <br/>
      "be")
      <br/>
      log "Stopping Backend (BE) nodes..."
      <br/>
      for node in "${BE_NODES[@]}"; do
      <br/>
      log "Stopping BE on $node..."
      <br/>
      ssh $node "$STARROCKS_HOME/be/bin/stop_be.sh"
      <br/>
      if [ $? -eq 0 ]; then
      <br/>
      log "BE on $node stopped successfully."
      <br/>
      else
      <br/>
      log "Failed to stop BE on $node."
      <br/>
      fi
      <br/>
      done
      <br/>
      ;;
      <br/>
      *)
      <br/>
      log "Invalid component type. Please specify 'fe' or 'be'."
      <br/>
      echo "Invalid component type. Please specify 'fe' or 'be'."
      <br/>
      exit 1
      <br/>
      ;;
      <br/>
      esac
     </p>
     <p>
      log "Batch stop process completed."
      <br/>
      echo "Batch stop process completed. Check $LOG_FILE for details."
     </p>
    </blockquote>
    <p>
    </p>
    <blockquote>
     <p>
      #!/bin/bash
     </p>
     <p>
      # 定义 StarRocks 安装目录
      <br/>
      STARROCKS_HOME="/path/to/starrocks"
     </p>
     <p>
      # 定义 FE 和 BE 节点列表
      <br/>
      FE_NODES=("fe_node1_ip" "fe_node2_ip" "fe_node3_ip")
      <br/>
      BE_NODES=("be_node1_ip" "be_node2_ip" "be_node3_ip")
     </p>
     <p>
      # 定义日志文件
      <br/>
      LOG_FILE="starrocks_stop.log"
     </p>
     <p>
      # 记录日志函数
      <br/>
      log() {
      <!-- -->
      <br/>
      local timestamp=$(date +"%Y-%m-%d %H:%M:%S")
      <br/>
      echo "$timestamp - $1" &gt;&gt; $LOG_FILE
      <br/>
      }
     </p>
     <p>
      # 检查参数数量
      <br/>
      if [ $# -ne 2 ]; then
      <br/>
      log "Usage: $0 stop {fe|be}"
      <br/>
      echo "Usage: $0 stop {fe|be}"
      <br/>
      exit 1
      <br/>
      fi
     </p>
     <p>
      # 检查操作是否为停止
      <br/>
      if [ "$1" != "stop" ]; then
      <br/>
      log "Invalid operation. Only 'stop' is supported."
      <br/>
      echo "Invalid operation. Only 'stop' is supported."
      <br/>
      exit 1
      <br/>
      fi
     </p>
     <p>
      # 根据组件类型停止相应节点
      <br/>
      case "$2" in
      <br/>
      "fe")
      <br/>
      log "Stopping Frontend (FE) nodes..."
      <br/>
      for node in "${FE_NODES[@]}"; do
      <br/>
      log "Stopping FE on $node..."
      <br/>
      ssh $node "$STARROCKS_HOME/fe/bin/stop_fe.sh"
      <br/>
      if [ $? -eq 0 ]; then
      <br/>
      log "FE on $node stopped successfully."
      <br/>
      else
      <br/>
      log "Failed to stop FE on $node."
      <br/>
      fi
      <br/>
      done
      <br/>
      ;;
      <br/>
      "be")
      <br/>
      log "Stopping Backend (BE) nodes..."
      <br/>
      for node in "${BE_NODES[@]}"; do
      <br/>
      log "Stopping BE on $node..."
      <br/>
      ssh $node "$STARROCKS_HOME/be/bin/stop_be.sh"
      <br/>
      if [ $? -eq 0 ]; then
      <br/>
      log "BE on $node stopped successfully."
      <br/>
      else
      <br/>
      log "Failed to stop BE on $node."
      <br/>
      fi
      <br/>
      done
      <br/>
      ;;
      <br/>
      *)
      <br/>
      log "Invalid component type. Please specify 'fe' or 'be'."
      <br/>
      echo "Invalid component type. Please specify 'fe' or 'be'."
      <br/>
      exit 1
      <br/>
      ;;
      <br/>
      esac
     </p>
     <p>
      log "Batch stop process completed."
      <br/>
      echo "Batch stop process completed. Check $LOG_FILE for details."
     </p>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f68616f7869616f79616e2f:61727469636c652f64657461696c732f313436323037333738" class_="artid" style="display:none">
 </p>
</div>


