---
layout: post
title: "网络通信基础网络通信基本概念TCPIP-模型"
date: 2025-01-03 07:45:00 +0800
description: "了解网络通信中晦涩难懂的概念，掌握 TCP/IP 五层模型_网络通信"
keywords: "网络通信"
categories: ['网络编程']
tags: ['网络', 'Tcp']
artid: "132954686"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=132954686
    alt: "网络通信基础网络通信基本概念TCPIP-模型"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=132954686
featuredImagePreview: https://bing.ee123.net/img/rand?artid=132954686
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     网络通信基础（网络通信基本概念+TCP/IP 模型）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      网络通信基础
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        一、网络通信基本概念
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1___4" rel="nofollow">
          1、局域网 &amp; 广域网
         </a>
        </li>
        <li>
         <a href="#2IP_10" rel="nofollow">
          2、IP地址
         </a>
        </li>
        <li>
         <a href="#3_17" rel="nofollow">
          3、端口号
         </a>
        </li>
        <li>
         <a href="#4_23" rel="nofollow">
          4、协议
         </a>
        </li>
        <li>
         <a href="#5_29" rel="nofollow">
          5、知名协议的默认端口
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#TCPIP__47" rel="nofollow">
        二、TCP/IP 五层模型
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1TCPIP__48" rel="nofollow">
          1、TCP/IP 协议簇
         </a>
        </li>
        <li>
         <a href="#2_69" rel="nofollow">
          2、在协议分层的背景下，数据如何通过网络传输？
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     一、网络通信基本概念
    </h2>
    <p>
     网络互连的目的是进行网络通信，也即是网络数据传输，更具体一点，是网络主机中的不同进程间，基于网络传输数据。
    </p>
    <h3>
     <a id="1___4">
     </a>
     1、局域网 &amp; 广域网
    </h3>
    <p>
     <strong>
      局域网 LAN
     </strong>
     ：Local Area Network 其中 local 标识局域网是本地，局部组建的一种私有网络。局域网内的主机之间能方便的进行网络通信，又称为内网；
    </p>
    <p>
     <strong>
      广域网 WAN
     </strong>
     ：Wide Area Network 通过路由器，将多个局域网连接起来，在物理上组成很大范围的网络，就形成了广域网。广域网内部的局域网都属于其子网。
    </p>
    <p>
     所谓 “局域网” 和 “广域网” 只是一个
     <code>
      相对
     </code>
     的概念。如果属于全球化的公共型广域网，则称为互联网（又称公网，外网），属于广域网的一个子集。有时在不严格的环境下说的广域网，其实是指互联网。
    </p>
    <h3>
     <a id="2IP_10">
     </a>
     2、IP地址
    </h3>
    <p>
     <strong>
      概念
     </strong>
     ：IP地址主要用于标识网络主机、其他网络设备（如路由器）的网络地址。简单说，IP地址用于定位主机的网络地址。就像我们发送快递一样，需要知道对方的收货地址，快递员才能将包裹送到目的地。
    </p>
    <p>
     <strong>
      格式
     </strong>
     ：IP地址是一个32位的二进制数，通常被分割为4个“8位二进制数”（也就是4个字节），如：
     <br/>
     01100100.00000100.00000101.00000110。常用“点分十进制”的方式来表示，即 a.b.c.d 的形式（a,b,c,d都是0~255之间的十进制整数）。如：100.4.5.6。
    </p>
    <p>
     <strong>
      特殊 IP
     </strong>
     ：127.*的IP地址用于本机环回(loop back)测试，IP 地址是127.0.0.1 本机环回主要用于本机到本机的网络通信（系统内部为了性能，不会走网络的方式传输），对于开发网络通信的程序（即网络编程）而言，常见的开发方式都是本机到本机的网络通信。
    </p>
    <h3>
     <a id="3_17">
     </a>
     3、端口号
    </h3>
    <p>
     <strong>
      概念
     </strong>
     ：端口号是用于标识网络通信中特定应用程序或服务的数字标识符。在网络通信过程中，数据通过不同的端口号来传输到正确的应用程序或服务。类似发送快递时，不光需要指定收货地址（IP地址），还需要指定收货人（端口号）。
    </p>
    <p>
     <strong>
      格式
     </strong>
     ：端口号是 0~65535 范围的数字，在网络通信中，进程可以通过绑定一个端口号，来发送及接收网络数据。
    </p>
    <p>
     <strong>
      注意事项
     </strong>
     ：同一主机两个不同的进程，不能绑定同一个端口号，但一个进程可以绑定多个端口号。
    </p>
    <h3>
     <a id="4_23">
     </a>
     4、协议
    </h3>
    <p>
     有了 IP 地址和端口号，可以定位到网络中唯一的一个进程，但还存在一个问题，网络通信是基于二进制 0/1 数据来传输，如何告诉对方发送的数据是什么样的呢？
    </p>
    <p>
     网络通信传输的数据类型可能有多种：图片，视频，文本等。同一个类型的数据，格式可能也不同，如发送一个文本字符串“你好！”：如何标识发送的数据是文本类型，及文本的编码格式呢？基于网络数据传输，
     <code>
      需要使用协议来规定双方的数据格式
     </code>
     。
    </p>
    <p>
     <strong>
      概念
     </strong>
     ：协议，网络协议的简称，网络协议是网络通信（即网络数据传输）经过的所有网络设备都必须共同遵从的一组约定、规则。如怎么样建立连接、怎么样互相识别等。只有遵守这个约定，计算机之间才能相互通信交流。协议（protocol）最终体现为在网络上传输的数据包的格式。
    </p>
    <h3>
     <a id="5_29">
     </a>
     5、知名协议的默认端口
    </h3>
    <p>
     系统端口号范围为 0 ~ 65535，其中：0 ~ 1023 为知名端口号，这些端口预留给服务端程序绑定广泛使用的
     <code>
      应用层
     </code>
     协议，如：
    </p>
    <blockquote>
     <ul>
      <li>
       22端口：预留给SSH服务器绑定SSH协议
      </li>
      <li>
       21端口：预留给FTP服务器绑定FTP协议
      </li>
      <li>
       23端口：预留给Telnet服务器绑定Telnet协议
      </li>
      <li>
       <strong>
        80端口：预留给HTTP服务器绑定HTTP协议
       </strong>
      </li>
      <li>
       <strong>
        443端口：预留给HTTPS服务器绑定HTTPS协议
       </strong>
      </li>
     </ul>
    </blockquote>
    <h2>
     <a id="TCPIP__47">
     </a>
     二、TCP/IP 五层模型
    </h2>
    <h3>
     <a id="1TCPIP__48">
     </a>
     1、TCP/IP 协议簇
    </h3>
    <p>
     在网络通信中，面对复杂度的环境就需要约定复杂的协议，协议太过于复杂，可以拆分为多个协议，通过对拆分的协议进行分类，对不同的类别进行分层，就约定了层级和层级之间的调用关系：要求上层协议调用下层协议，下层协议给上次协议提供支持，不能跨层调用。
    </p>
    <p>
     <strong>
      协议分层的好处
     </strong>
     ：
    </p>
    <blockquote>
     <ol>
      <li>
       类似于面向接口编程：定义好两层间的接口规范，让双方遵循这个规范来对接。
      </li>
      <li>
       对于使用方来说，并不关心提供方是如何实现的，只需要使用接口即可。
      </li>
      <li>
       对于提供方来说，利用封装的特性，隐藏了实现的细节，只需要开放接口即可。
      </li>
     </ol>
    </blockquote>
    <p>
     这里所说的 TCP/IP 协议是一种网络协议套件，它包含了多个协议，包括
     <mark>
      物理层
     </mark>
     、
     <mark>
      数据链路层
     </mark>
     、
     <mark>
      网络层
     </mark>
     、
     <mark>
      传输层
     </mark>
     、
     <mark>
      应用层
     </mark>
     等多个层次。这些不同层次的协议共同构成了一个完整的网络协议体系。
    </p>
    <p>
     TCP/IP通讯协议采用了五层的层级结构，每一层都呼叫它的下一层所提供的网络来完成自己的需求：
    </p>
    <blockquote>
     <ul>
      <li>
       <p>
        <mark>
         应用层
        </mark>
        ：应用层是TCP/IP模型的最顶层，包含了各种网络应用程序，它主要关注的是传输过来的数据要干啥用。其中一种广泛使用的应用层协议 HTTP、HTTPS。
       </p>
      </li>
      <li>
       <p>
        <mark>
         传输层
        </mark>
        ：负责两台主机之间的数据传输，不考虑中间路径，只关心起点和终点，能够确保数据可靠的从源主机发送到目标主机。比较常见的传输层协议有 TCP、UDP。
       </p>
      </li>
      <li>
       <p>
        <mark>
         网络层
        </mark>
        ：负责地址管理和路由选择，进行两个遥远网络结点之间路径规划。例如在网络层 IP 协议中，通过IP地址来标识一台主机，并通过路由表的方式规划出两台主机之间的数据传输的线路（路由）。
       </p>
      </li>
      <li>
       <p>
        <mark>
         数据链路层
        </mark>
        ：负责设备之间的数据帧的传送和识别，主要关注两个相邻结点之间的传输。例如通过物理地址（如MAC地址）在相邻节点之间传输。数据链路层最典型的协议 以太网协议。
       </p>
      </li>
      <li>
       <p>
        <mark>
         物理层
        </mark>
        ：负责光/电信号的传递方式，通常指网络通信的基础设施。网线、光纤、网络接口等。
       </p>
      </li>
     </ul>
    </blockquote>
    <h3>
     <a id="2_69">
     </a>
     2、在协议分层的背景下，数据如何通过网络传输？
    </h3>
    <p>
     答案就是：
     <mark>
      封装和分用
     </mark>
    </p>
    <blockquote>
     <ol>
      <li>
       封装：发送方发送数据，要把数据从上到下，依次交给对应的层次的协议，进行封装。
      </li>
      <li>
       分用：接收方接收数据，要把数据从下到上，依次交给对应的层次的协议，进行解析。
      </li>
     </ol>
    </blockquote>
    <p>
     <strong>
      （1）忽略中间转发过程的封装分用
     </strong>
    </p>
    <p>
     以李华使用微信给小明发送一条消息“Hello world”为例。下面是李华发送消息的封装过程：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/8aa297f9050e0126b255ad3e3e0b3ff7.png"/>
    </p>
    <blockquote>
     <ol>
      <li>
       <p>
        首先在应用层，李华主机上的微信应用程序拿到上述数据后，首先会使用相应的应用层协议，将数据封装为应用层数据包。
       </p>
      </li>
      <li>
       <p>
        接着应用层调用传输层提供的 API 来处理这个数据，传输层拿到上述数据后，会使用传输层的协议对数据再次封装，上图以 UDP 协议为例。
       </p>
      </li>
      <li>
       <p>
        传输层调用网络层，网络层拿到 UDP 数据包后，使用网络层协议继续进行封装，上图以 IP 协议为例。
       </p>
      </li>
      <li>
       <p>
        网络层调用数据链路层，数据链路层拿到 IP 数据包后，使用数据链路层协议进行封装，上图用经典的以太网协议为例：
       </p>
      </li>
      <li>
       <p>
        数据链路层调用物理层，物理层拿到以太网数据帧后，就将上述的 0/1 二进制数据转化为光信号、电信号等进行传输。
       </p>
      </li>
     </ol>
    </blockquote>
    <p>
     以下是小明接收消息的分用过程：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/503fcbdbf1344ed84e54516430788577.png"/>
    </p>
    <blockquote>
     <ol>
      <li>
       <p>
        在物理层，小明的主机通过网卡接收到高低电平的二进制信号，通过信号解析，还原成 0/1 这样的二进制序列。
       </p>
      </li>
      <li>
       <p>
        接着物理层调用数据链路层，使用以太网协议，将上述 0/1 二进制数据还原成以太网帧，然后把帧头、帧尾去掉，取出以太网数据包的载荷，向上提交给网络层（以太网中有一个字段标志着网络层协议类型）。
       </p>
      </li>
      <li>
       <p>
        网络层拿到载荷后，根据载荷协议类型，这里是 IP 数据包进行解析，然后去掉 IP 报头，取出载荷向上提交给传输层（IP 数据包中有一个字段标志着传输层协议类型）。
       </p>
      </li>
      <li>
       <p>
        传输层拿到载荷，根据载荷协议类型，这里是 UDP 数据包进行解析，去掉 UDP 报头，取出载荷，根据端口号上交给应用层。
       </p>
      </li>
      <li>
       <p>
        应用层中的微信应用程序拿到载荷后，根据相应的应用层程序对载荷内容进行解析，取出相应的字段显示到前端页面。
       </p>
      </li>
     </ol>
    </blockquote>
    <p>
     <strong>
      （2）真实网络环境中的封装分用
     </strong>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ec3e52e986553a51858e33a0ad4f38e4.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f4c45453138303530312f:61727469636c652f64657461696c732f313332393534363836" class_="artid" style="display:none">
 </p>
</div>


