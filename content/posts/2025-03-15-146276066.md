---
layout: post
title: "Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾CentOS-7-nginxapache"
date: 2025-03-15 12:18:51 +0800
description: "åœ¨ CentOS ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ **Let's Encrypt** æä¾›çš„ **Certbot** å·¥å…·æ¥ç”³è¯·å’Œè‡ªåŠ¨ç»­çº¦å…è´¹çš„ SSL è¯ä¹¦ã€‚  "
keywords: "Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ï¼ˆCentOS 7 + nginx/apacheï¼‰"
categories: ['æœªåˆ†ç±»']
tags: ['Ssl', 'Nginx', 'Centos']
artid: "146276066"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146276066
    alt: "Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾CentOS-7-nginxapache"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146276066
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146276066
cover: https://bing.ee123.net/img/rand?artid=146276066
image: https://bing.ee123.net/img/rand?artid=146276066
img: https://bing.ee123.net/img/rand?artid=146276066
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ï¼ˆCentOS 7 + nginx/apacheï¼‰
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     åœ¨ CentOS ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨
     <strong>
      Letâ€™s Encrypt
     </strong>
     æä¾›çš„
     <strong>
      Certbot
     </strong>
     å·¥å…·æ¥ç”³è¯·å’Œè‡ªåŠ¨ç»­çº¦å…è´¹çš„ SSL è¯ä¹¦ã€‚
    </p>
    <hr/>
    <h3>
     <a id="1__Certbot_4">
     </a>
     <strong>
      1. å®‰è£… Certbot
     </strong>
    </h3>
    <h4>
     <a id="CentOS_7__EPEL__Certbot_5">
     </a>
     <strong>
      CentOS 7+ å®‰è£… EPEL å’Œ Certbot
     </strong>
    </h4>
    <pre><code class="prism language-bash">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> epel-release
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> certbot python3-certbot-nginx
</code></pre>
    <p>
     å¦‚æœä½¿ç”¨çš„æ˜¯
     <strong>
      Apache
     </strong>
     ï¼š
    </p>
    <pre><code class="prism language-bash">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> certbot python3-certbot-apache
</code></pre>
    <h4>
     <a id="CentOS_8__DNF_15">
     </a>
     <strong>
      CentOS 8+ (ä½¿ç”¨ DNF)
     </strong>
    </h4>
    <pre><code class="prism language-bash">dnf <span class="token function">install</span> <span class="token parameter variable">-y</span> epel-release
dnf <span class="token function">install</span> <span class="token parameter variable">-y</span> certbot python3-certbot-nginx
</code></pre>
    <hr/>
    <h3>
     <a id="2__SSL__23">
     </a>
     <strong>
      2. ç”³è¯· SSL è¯ä¹¦
     </strong>
    </h3>
    <p>
     æ ¹æ®ä½ çš„ Web æœåŠ¡å™¨ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    </p>
    <h4>
     <a id="Nginx_26">
     </a>
     <strong>
      Nginx
     </strong>
    </h4>
    <pre><code class="prism language-bash">certbot <span class="token parameter variable">--nginx</span> <span class="token parameter variable">-d</span> yourdomain.com <span class="token parameter variable">-d</span> www.yourdomain.com
</code></pre>
    <h4>
     <a id="Apache_31">
     </a>
     <strong>
      Apache
     </strong>
    </h4>
    <pre><code class="prism language-bash">certbot <span class="token parameter variable">--apache</span> <span class="token parameter variable">-d</span> yourdomain.com <span class="token parameter variable">-d</span> www.yourdomain.com
</code></pre>
    <p>
     é¦–æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒä¼šï¼š
    </p>
    <ol>
     <li>
      éªŒè¯åŸŸåæ‰€æœ‰æƒ
     </li>
     <li>
      è‡ªåŠ¨é…ç½® HTTPS è¯ä¹¦
     </li>
     <li>
      è¯ä¹¦é»˜è®¤æœ‰æ•ˆæœŸ
      <strong>
       90 å¤©
      </strong>
     </li>
    </ol>
    <p>
     <mark>
      <strong>
       PS:å¦‚æœnginxä¸æ˜¯é»˜è®¤çš„å®‰è£…è·¯å¾„ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå¹¶è‡ªè¡Œä¿®æ”¹nginxçš„é…ç½®æ–‡ä»¶ï¼Œå‚è€ƒ
       <a href="https://blog.csdn.net/u014681799/article/details/146276347?sharetype=blogdetail&amp;sharerId=146276347&amp;sharerefer=PC&amp;sharesource=u014681799&amp;spm=1011.2480.3001.8118">
        Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ï¼ˆCentOS 7ç‰ˆ + Dockeréƒ¨ç½²çš„nginxï¼‰
       </a>
       ä¸­çš„æ–¹æ¡ˆ2 webrootæ¨¡å¼
      </strong>
     </mark>
    </p>
    <hr/>
    <h3>
     <a id="3__45">
     </a>
     <strong>
      3. é…ç½®è‡ªåŠ¨ç»­çº¦
     </strong>
    </h3>
    <p>
     Letâ€™s Encrypt è¯ä¹¦
     <strong>
      90 å¤©
     </strong>
     åä¼šè¿‡æœŸï¼Œå› æ­¤éœ€è¦å®šæœŸç»­çº¦ã€‚
    </p>
    <h4>
     <a id="_Certbot__48">
     </a>
     <strong>
      æ£€æŸ¥ Certbot æ˜¯å¦æ­£å¸¸ç»­çº¦
     </strong>
    </h4>
    <pre><code class="prism language-bash">certbot renew --dry-run
</code></pre>
    <p>
     å¦‚æœçœ‹åˆ°
     <strong>
      â€œCongratulations, all renewals succeededâ€
     </strong>
     ï¼Œè¯´æ˜ç»­çº¦æ­£å¸¸ã€‚
    </p>
    <h4>
     <a id="_54">
     </a>
     <strong>
      è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆè‡ªåŠ¨ç»­çº¦ï¼‰
     </strong>
    </h4>
    <p>
     ç¼–è¾‘
     <code>
      crontab
     </code>
     ï¼š
    </p>
    <pre><code class="prism language-bash"><span class="token function">crontab</span> <span class="token parameter variable">-e</span>
</code></pre>
    <p>
     æ·»åŠ ä»¥ä¸‹è¡Œï¼Œæ¯å¤©å‡Œæ™¨ 2 ç‚¹è‡ªåŠ¨æ£€æŸ¥å¹¶ç»­çº¦
     <br/>
     Letâ€™s Encrypt ç»­çº¦åï¼Œéœ€è¦é‡å¯ Web æœåŠ¡å™¨ä½¿è¯ä¹¦ç”Ÿæ•ˆã€‚å¯ä»¥åœ¨
     <code>
      crontab
     </code>
     é‡ŒåŠ ä¸Šï¼š
    </p>
    <h4>
     <a id="Nginx_61">
     </a>
     <strong>
      Nginx
     </strong>
    </h4>
    <pre><code class="prism language-bash"><span class="token number">0</span> <span class="token number">2</span> * * * certbot renew <span class="token parameter variable">--quiet</span> --deplpy-hook <span class="token string">"systemctl reload nginx"</span>
æˆ–è€…
<span class="token number">0</span> <span class="token number">2</span> * * * certbot renew <span class="token parameter variable">--quiet</span> --deplpy-hook <span class="token string">"nginx -s reload"</span>
</code></pre>
    <h4>
     <a id="Apache_67">
     </a>
     <strong>
      Apache
     </strong>
    </h4>
    <pre><code class="prism language-bash"><span class="token number">0</span> <span class="token number">2</span> * * * certbot renew <span class="token parameter variable">--quiet</span> --deploy-hook <span class="token string">"systemctl reload httpd"</span>
</code></pre>
    <h3>
     <a id="5__72">
     </a>
     <strong>
      5. éªŒè¯è¯ä¹¦æ˜¯å¦ç”Ÿæ•ˆ
     </strong>
    </h3>
    <pre><code class="prism language-bash">certbot certificates
æˆ–è€…
openssl s_client <span class="token parameter variable">-connect</span> yourdomain.com:443 <span class="token parameter variable">-servername</span> yourdomain.com <span class="token operator">|</span> openssl x509 <span class="token parameter variable">-noout</span> <span class="token parameter variable">-dates</span>
</code></pre>
    <hr/>
    <p>
     å¦‚æœ
     <code>
      Not After
     </code>
     æ—¥æœŸæ›´æ–°ï¼Œè¯´æ˜ç»­çº¦æˆåŠŸã€‚âœ…
    </p>
    <p>
     è¿™æ ·ï¼Œä½ çš„ SSL è¯ä¹¦å°±ä¼š
     <strong>
      è‡ªåŠ¨ç»­çº¦ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œï¼
     </strong>
     ğŸš€
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031343638313739392f:61727469636c652f64657461696c732f313436323736303636" class_="artid" style="display:none">
 </p>
</div>


