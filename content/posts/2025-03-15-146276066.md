---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f753031343638313739392f:61727469636c652f64657461696c732f313436323736303636"
layout: post
title: "Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾CentOS-7-nginxapache"
date: 2025-03-15 12:18:51 +08:00
description: "åœ¨ CentOS ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ **Let's Encrypt** æä¾›çš„ **Certbot** å·¥å…·æ¥ç”³è¯·å’Œè‡ªåŠ¨ç»­çº¦å…è´¹çš„ SSL è¯ä¹¦ã€‚  "
keywords: "Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ï¼ˆCentOS 7 + nginx/apacheï¼‰"
categories: ['æœªåˆ†ç±»']
tags: ['Ssl', 'Nginx', 'Centos']
artid: "146276066"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146276066
    alt: "Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾CentOS-7-nginxapache"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146276066
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146276066
cover: https://bing.ee123.net/img/rand?artid=146276066
image: https://bing.ee123.net/img/rand?artid=146276066
img: https://bing.ee123.net/img/rand?artid=146276066
---

# Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ï¼ˆCentOS 7 + nginx/apacheï¼‰

åœ¨ CentOS ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨
**Letâ€™s Encrypt**
æä¾›çš„
**Certbot**
å·¥å…·æ¥ç”³è¯·å’Œè‡ªåŠ¨ç»­çº¦å…è´¹çš„ SSL è¯ä¹¦ã€‚

---

### **1. å®‰è£… Certbot**

#### **CentOS 7+ å®‰è£… EPEL å’Œ Certbot**

```bash
yum install -y epel-release
yum install -y certbot python3-certbot-nginx

```

å¦‚æœä½¿ç”¨çš„æ˜¯
**Apache**
ï¼š

```bash
yum install -y certbot python3-certbot-apache

```

#### **CentOS 8+ (ä½¿ç”¨ DNF)**

```bash
dnf install -y epel-release
dnf install -y certbot python3-certbot-nginx

```

---

### **2. ç”³è¯· SSL è¯ä¹¦**

æ ¹æ®ä½ çš„ Web æœåŠ¡å™¨ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

#### **Nginx**

```bash
certbot --nginx -d yourdomain.com -d www.yourdomain.com

```

#### **Apache**

```bash
certbot --apache -d yourdomain.com -d www.yourdomain.com

```

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒä¼šï¼š

1. éªŒè¯åŸŸåæ‰€æœ‰æƒ
2. è‡ªåŠ¨é…ç½® HTTPS è¯ä¹¦
3. è¯ä¹¦é»˜è®¤æœ‰æ•ˆæœŸ
   **90 å¤©**

**PS:å¦‚æœnginxä¸æ˜¯é»˜è®¤çš„å®‰è£…è·¯å¾„ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå¹¶è‡ªè¡Œä¿®æ”¹nginxçš„é…ç½®æ–‡ä»¶ï¼Œå‚è€ƒ
[Certbotå®ç°SSLå…è´¹è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ï¼ˆCentOS 7ç‰ˆ + Dockeréƒ¨ç½²çš„nginxï¼‰](https://blog.csdn.net/u014681799/article/details/146276347?sharetype=blogdetail&sharerId=146276347&sharerefer=PC&sharesource=u014681799&spm=1011.2480.3001.8118)
ä¸­çš„æ–¹æ¡ˆ2 webrootæ¨¡å¼**

---

### **3. é…ç½®è‡ªåŠ¨ç»­çº¦**

Letâ€™s Encrypt è¯ä¹¦
**90 å¤©**
åä¼šè¿‡æœŸï¼Œå› æ­¤éœ€è¦å®šæœŸç»­çº¦ã€‚

#### **æ£€æŸ¥ Certbot æ˜¯å¦æ­£å¸¸ç»­çº¦**

```bash
certbot renew --dry-run

```

å¦‚æœçœ‹åˆ°
**â€œCongratulations, all renewals succeededâ€**
ï¼Œè¯´æ˜ç»­çº¦æ­£å¸¸ã€‚

#### **è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆè‡ªåŠ¨ç»­çº¦ï¼‰**

ç¼–è¾‘
`crontab`
ï¼š

```bash
crontab -e

```

æ·»åŠ ä»¥ä¸‹è¡Œï¼Œæ¯å¤©å‡Œæ™¨ 2 ç‚¹è‡ªåŠ¨æ£€æŸ¥å¹¶ç»­çº¦
  
Letâ€™s Encrypt ç»­çº¦åï¼Œéœ€è¦é‡å¯ Web æœåŠ¡å™¨ä½¿è¯ä¹¦ç”Ÿæ•ˆã€‚å¯ä»¥åœ¨
`crontab`
é‡ŒåŠ ä¸Šï¼š

#### **Nginx**

```bash
0 2 * * * certbot renew --quiet --deplpy-hook "systemctl reload nginx"
æˆ–è€…
0 2 * * * certbot renew --quiet --deplpy-hook "nginx -s reload"

```

#### **Apache**

```bash
0 2 * * * certbot renew --quiet --deploy-hook "systemctl reload httpd"

```

### **5. éªŒè¯è¯ä¹¦æ˜¯å¦ç”Ÿæ•ˆ**

```bash
certbot certificates
æˆ–è€…
openssl s_client -connect yourdomain.com:443 -servername yourdomain.com | openssl x509 -noout -dates

```

---

å¦‚æœ
`Not After`
æ—¥æœŸæ›´æ–°ï¼Œè¯´æ˜ç»­çº¦æˆåŠŸã€‚âœ…

è¿™æ ·ï¼Œä½ çš„ SSL è¯ä¹¦å°±ä¼š
**è‡ªåŠ¨ç»­çº¦ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œï¼**
ğŸš€