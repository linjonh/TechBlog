---
layout: post
title: "如果希望将docs文件夹完全切换为master分支,即删除master分支不存在的文件,增加master分支才有的文件,应该怎么做"
date: 2025-03-06 22:20:04 +0800
description: "分支中的所有文件（如果本地有改动，也要覆盖）如果你当前的分支不重要，可以直接切回。目录的改动较多，最安全的方法是。目录的改动，避免误删重要文件！：彻底清除本地所有文件，确保。目录很大，可能影响性能。这样可以避免误删重要文件。如果有未提交的改动，先。如果你只是想临时切换到。目录的改动不大，你可以。，如果你想恢复，请使用。"
keywords: "如果希望将docs文件夹完全切换为master分支，即删除master分支不存在的文件，增加master分支才有的文件，应该怎么做"
categories: ['Git']
tags: ['Git']
artid: "146079729"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146079729
    alt: "如果希望将docs文件夹完全切换为master分支,即删除master分支不存在的文件,增加master分支才有的文件,应该怎么做"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146079729
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146079729
cover: https://bing.ee123.net/img/rand?artid=146079729
image: https://bing.ee123.net/img/rand?artid=146079729
img: https://bing.ee123.net/img/rand?artid=146079729
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     如果希望将docs文件夹完全切换为master分支，即删除master分支不存在的文件，增加master分支才有的文件，应该怎么做
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     如果希望将
     <code>
      docs
     </code>
     文件夹
     <strong>
      完全切换
     </strong>
     为
     <code>
      master
     </code>
     分支的状态，即：
     <br/>
     ✅
     <strong>
      删除
     </strong>
     <code>
      master
     </code>
     中不存在的文件
     <br/>
     ✅
     <strong>
      增加
     </strong>
     <code>
      master
     </code>
     中才有的文件
     <br/>
     ✅
     <strong>
      恢复
     </strong>
     <code>
      master
     </code>
     分支中的所有文件（如果本地有改动，也要覆盖）
    </p>
    <p>
     你可以使用以下方法：
    </p>
    <hr/>
    <h4>
     <a id="_1_git_checkout__git_clean_9">
     </a>
     <strong>
      方法 1：使用
      <code>
       git checkout
      </code>
      +
      <code>
       git clean
      </code>
     </strong>
    </h4>
    <pre><code class="prism language-bash"><span class="token function">git</span> checkout master -- ./docs
<span class="token function">git</span> clean <span class="token parameter variable">-df</span> ./docs
</code></pre>
    <p>
     <strong>
      解释：
     </strong>
    </p>
    <ol>
     <li>
      <code>
       git checkout master -- ./docs
      </code>
      <ul>
       <li>
        将
        <code>
         master
        </code>
        分支的
        <code>
         docs
        </code>
        目录检出到当前分支，会
        <strong>
         覆盖已有的相同文件
        </strong>
        ，但不会删除当前分支多余的文件。
       </li>
      </ul>
     </li>
     <li>
      <code>
       git clean -df ./docs
      </code>
      <ul>
       <li>
        <strong>
         删除 master 没有的文件或目录
        </strong>
        （
        <code>
         -d
        </code>
        代表目录，
        <code>
         -f
        </code>
        强制删除）。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_2_git_reset_hard_22">
     </a>
     <strong>
      方法 2：使用
      <code>
       git reset --hard
      </code>
     </strong>
    </h4>
    <p>
     ⚠
     <strong>
      注意：此方法会丢失
      <code>
       docs
      </code>
      目录下的所有本地改动，谨慎使用！
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token function">git</span> fetch origin  <span class="token comment"># 确保本地获取最新的 master 分支</span>
<span class="token function">git</span> reset <span class="token parameter variable">--hard</span> origin/master -- ./docs
</code></pre>
    <p>
     <strong>
      解释：
     </strong>
    </p>
    <ul>
     <li>
      <code>
       git reset --hard origin/master -- ./docs
      </code>
      <ul>
       <li>
        彻底将
        <code>
         docs
        </code>
        目录
        <strong>
         重置
        </strong>
        为
        <code>
         origin/master
        </code>
        的版本，
       </li>
       <li>
        <strong>
         删除本地改动
        </strong>
        ，恢复
        <code>
         master
        </code>
        上的状态。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_3_35">
     </a>
     <strong>
      方法 3：删除并重新检出
     </strong>
    </h4>
    <p>
     如果
     <code>
      docs
     </code>
     目录的改动很混乱，直接删除然后重新检出：
    </p>
    <pre><code class="prism language-bash"><span class="token function">rm</span> <span class="token parameter variable">-rf</span> ./docs  <span class="token comment"># 删除整个 docs 目录</span>
<span class="token function">git</span> checkout master -- ./docs  <span class="token comment"># 重新检出 master 的 docs 目录</span>
</code></pre>
    <p>
     <strong>
      优点
     </strong>
     ：彻底清除本地所有文件，确保
     <code>
      docs
     </code>
     目录和
     <code>
      master
     </code>
     完全一致。
     <br/>
     <strong>
      缺点
     </strong>
     ：如果
     <code>
      docs
     </code>
     目录很大，可能影响性能。
    </p>
    <hr/>
    <h4>
     <a id="_4_master__46">
     </a>
     <strong>
      方法 4：切换到 master 并重新创建分支
     </strong>
    </h4>
    <p>
     如果你当前的分支不重要，可以直接切回
     <code>
      master
     </code>
     并重新创建分支：
    </p>
    <pre><code class="prism language-bash"><span class="token function">git</span> checkout master
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> new-branch
</code></pre>
    <p>
     这样
     <code>
      docs
     </code>
     目录就和
     <code>
      master
     </code>
     完全一致了。
    </p>
    <hr/>
    <h4>
     <a id="_56">
     </a>
     <strong>
      哪种方法最好？
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       如果有未提交改动，且不想丢失
      </strong>
      → 方法 1 (
      <code>
       checkout
      </code>
      +
      <code>
       clean
      </code>
      )
     </li>
     <li>
      <strong>
       如果不介意丢失所有改动
      </strong>
      → 方法 2 (
      <code>
       reset --hard
      </code>
      )
     </li>
     <li>
      <strong>
       如果想彻底清理后重新检出
      </strong>
      → 方法 3 (
      <code>
       rm -rf
      </code>
      +
      <code>
       checkout
      </code>
      )
     </li>
     <li>
      <strong>
       如果可以重建分支
      </strong>
      → 方法 4 (直接
      <code>
       checkout master
      </code>
      )
     </li>
    </ul>
    <p>
     如果你不确定是否有未提交的改动，建议先运行：
    </p>
    <pre><code class="prism language-bash"><span class="token function">git</span> status
</code></pre>
    <p>
     如果有未提交的改动，先
     <code>
      git stash
     </code>
     备份，然后再操作：
    </p>
    <pre><code class="prism language-bash"><span class="token function">git</span> stash
<span class="token comment"># 运行上述操作</span>
<span class="token function">git</span> stash pop  <span class="token comment"># 取回之前的改动（可选）</span>
</code></pre>
    <p>
     这样可以避免误删重要文件。
    </p>
    <p>
     如果你希望
     <strong>
      先切换
      <code>
       docs
      </code>
      目录到
      <code>
       master
      </code>
      的状态
     </strong>
     ，然后
     <strong>
      再切换回当前分支的状态
     </strong>
     ，可以按照以下步骤操作：
    </p>
    <hr/>
    <h4>
     <a id="_1_git_stash_78">
     </a>
     <strong>
      方法 1：使用
      <code>
       git stash
      </code>
      （推荐）
     </strong>
    </h4>
    <p>
     如果
     <code>
      docs
     </code>
     目录的改动较多，最安全的方法是
     <strong>
      先存储当前分支的
      <code>
       docs
      </code>
      目录状态
     </strong>
     ，切换后再恢复：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 1. 仅存储当前分支 `docs` 目录的修改</span>
<span class="token function">git</span> stash push <span class="token parameter variable">-m</span> <span class="token string">"Save docs before switching"</span> -- docs

<span class="token comment"># 2. 切换 `docs` 目录到 master 分支的状态</span>
<span class="token function">git</span> checkout master -- docs
<span class="token function">git</span> clean <span class="token parameter variable">-df</span> docs  <span class="token comment"># 删除 master 中没有的文件</span>

<span class="token comment"># 3. 确保 `docs` 目录为 master 分支的最新状态</span>
<span class="token function">git</span> reset <span class="token parameter variable">--hard</span> origin/master -- docs

<span class="token comment"># ...（你可以在此时使用 master 版本的 docs 做你的操作）</span>

<span class="token comment"># 4. 恢复当前分支 `docs` 目录的状态</span>
<span class="token function">git</span> stash pop
</code></pre>
    <p>
     ✅
     <strong>
      优点
     </strong>
     ：
    </p>
    <ul>
     <li>
      这不会影响
      <code>
       docs
      </code>
      之外的文件。
     </li>
     <li>
      <code>
       stash
      </code>
      让你可以随时恢复当前分支的
      <code>
       docs
      </code>
      目录状态。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_2_102">
     </a>
     <strong>
      方法 2：使用临时分支
     </strong>
    </h4>
    <p>
     如果你只是想临时切换到
     <code>
      master
     </code>
     版本的
     <code>
      docs
     </code>
     ，然后再回到当前分支：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 1. 记录当前分支名称（假设当前分支是 feature-branch）</span>
<span class="token assign-left variable">CURRENT_BRANCH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> rev-parse --abbrev-ref HEAD<span class="token variable">)</span></span>

<span class="token comment"># 2. 切换 `docs` 目录到 master</span>
<span class="token function">git</span> checkout master -- docs
<span class="token function">git</span> clean <span class="token parameter variable">-df</span> docs

<span class="token comment"># ...（此时你可以操作 master 的 docs 目录）</span>

<span class="token comment"># 3. 切换回原来的分支，并恢复 docs</span>
<span class="token function">git</span> checkout <span class="token variable">$CURRENT_BRANCH</span>
<span class="token function">git</span> checkout <span class="token variable">$CURRENT_BRANCH</span> -- docs
</code></pre>
    <p>
     ✅
     <strong>
      适用于
     </strong>
     ：
    </p>
    <ul>
     <li>
      你想在当前分支临时使用
      <code>
       master
      </code>
      的
      <code>
       docs
      </code>
      ，但不想用
      <code>
       stash
      </code>
      。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_3_123">
     </a>
     <strong>
      方法 3：直接切换回当前分支
     </strong>
    </h4>
    <p>
     如果
     <code>
      docs
     </code>
     目录的改动不大，你可以
     <strong>
      直接切回当前分支
     </strong>
     ，这样
     <code>
      docs
     </code>
     目录就会恢复：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 记录当前分支</span>
<span class="token assign-left variable">CURRENT_BRANCH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> rev-parse --abbrev-ref HEAD<span class="token variable">)</span></span>

<span class="token comment"># 切换 `docs` 目录到 master</span>
<span class="token function">git</span> checkout master -- docs
<span class="token function">git</span> clean <span class="token parameter variable">-df</span> docs

<span class="token comment"># 切换回当前分支</span>
<span class="token function">git</span> checkout <span class="token variable">$CURRENT_BRANCH</span>
</code></pre>
    <p>
     不过这样
     <strong>
      不会恢复
      <code>
       docs
      </code>
      目录的本地修改
     </strong>
     ，如果你想恢复，请使用
     <strong>
      方法 1（stash）
     </strong>
     。
    </p>
    <hr/>
    <h4>
     <a id="_140">
     </a>
     <strong>
      总结
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        方法
       </th>
       <th>
        适用场景
       </th>
       <th>
        是否安全
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         git stash
        </code>
       </td>
       <td>
        <code>
         docs
        </code>
        目录改动较多，希望恢复
       </td>
       <td>
        ✅ 最安全
       </td>
      </tr>
      <tr>
       <td>
        <code>
         临时分支
        </code>
       </td>
       <td>
        需要临时切换
        <code>
         docs
        </code>
        ，然后恢复
       </td>
       <td>
        ⚠️ 可能有冲突
       </td>
      </tr>
      <tr>
       <td>
        <code>
         直接切回当前分支
        </code>
       </td>
       <td>
        改动较少
       </td>
       <td>
        ❌ 可能丢失修改
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     如果不确定，
     <strong>
      推荐方法 1（
      <code>
       git stash
      </code>
      ）
     </strong>
     ，可以安全存储
     <code>
      docs
     </code>
     目录的改动，避免误删重要文件！🚀
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6c79637768752f:61727469636c652f64657461696c732f313436303739373239" class_="artid" style="display:none">
 </p>
</div>


