---
layout: post
title: "编程题7-5-堆中的路径"
date: 2025-03-10 20:51:55 +0800
description: "3. 根据所给下标，从下往上依次遍历输出堆中的元素，直到根结点，即堆中的路径，注意题目中的下标和自定义的堆中的下标。2. 按照题目要求，遍历所给数组，依次将元素加入。，分别是插入元素的个数、以及需要打印的路径条数。，这里不再赘述其原理和实现过程，只给出代码实现（应用）。个要被插入一个初始为空的小顶堆的整数。将一系列给定数字插入一个初始为空的最小堆。个结点到根结点的路径上的数据。，操作完之后即获得了一个最小堆；开始的，代码中的堆的下标是从。随后对任意给定的下标。个结点到根结点的路径。对输入中给出的每个下标。"
keywords: "【编程题】7-5 堆中的路径"
categories: ['数据结构入门65题']
tags: ['数据结构', 'C']
artid: "146012749"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146012749
    alt: "编程题7-5-堆中的路径"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146012749
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146012749
cover: https://bing.ee123.net/img/rand?artid=146012749
image: https://bing.ee123.net/img/rand?artid=146012749
img: https://bing.ee123.net/img/rand?artid=146012749
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【编程题】7-5 堆中的路径
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-kimbie-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="1__1">
     </a>
     1 题目原文
    </h2>
    <blockquote>
     <p>
      题目链接：
      <a href="https://pintia.cn/problem-sets/15/exam/problems/type/7?problemSetProblemId=713" rel="nofollow">
       7-5 堆中的路径
      </a>
     </p>
    </blockquote>
    <p>
     将一系列给定数字插入一个初始为空的最小堆
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        h 
        
       
      
        h
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          h
         </span>
        </span>
       </span>
      </span>
     </span>
     。随后对任意给定的下标
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6595em;">
         </span>
         <span class="mord mathnormal">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     ，打印从第
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6595em;">
         </span>
         <span class="mord mathnormal">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     个结点到根结点的路径。
    </p>
    <p>
     输入格式:
    </p>
    <blockquote>
     <p>
      每组测试第
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         1 
         
        
       
         1
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           1
          </span>
         </span>
        </span>
       </span>
      </span>
      行包含
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         2 
         
        
       
         2
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           2
          </span>
         </span>
        </span>
       </span>
      </span>
      个正整数
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
       
         n
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
         </span>
        </span>
       </span>
      </span>
      和
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         m 
         
        
          ( 
         
        
          ≤ 
         
        
          1 
         
         
         
           0 
          
         
           3 
          
         
        
          ) 
         
        
       
         m (≤10^3)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mrel">
           ≤
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.0641em; vertical-align: -0.25em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mord">
           <span class="mord">
            0
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8141em;">
               <span class="" style="top: -3.063em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  3
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
      ，分别是插入元素的个数、以及需要打印的路径条数。下一行给出区间
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          − 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
          , 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
          ] 
         
        
       
         [−10^4,10^4 ]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1.0641em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord">
           −
          </span>
          <span class="mord">
           1
          </span>
          <span class="mord">
           <span class="mord">
            0
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8141em;">
               <span class="" style="top: -3.063em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  4
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mord">
           <span class="mord">
            0
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8141em;">
               <span class="" style="top: -3.063em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  4
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      内的
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
       
         n
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
         </span>
        </span>
       </span>
      </span>
      个要被插入一个初始为空的小顶堆的整数。最后一行给出
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         m 
         
        
       
         m
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal">
           m
          </span>
         </span>
        </span>
       </span>
      </span>
      个下标。
     </p>
    </blockquote>
    <p>
     输出格式:
    </p>
    <blockquote>
     <p>
      对输入中给出的每个下标
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         i 
         
        
       
         i
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6595em;">
          </span>
          <span class="mord mathnormal">
           i
          </span>
         </span>
        </span>
       </span>
      </span>
      ，在一行中输出从第
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         i 
         
        
       
         i
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6595em;">
          </span>
          <span class="mord mathnormal">
           i
          </span>
         </span>
        </span>
       </span>
      </span>
      个结点到根结点的路径上的数据。数字间以
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         1 
         
        
       
         1
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           1
          </span>
         </span>
        </span>
       </span>
      </span>
      个空格分隔，行末不得有多余空格。
     </p>
    </blockquote>
    <p>
     输入样例:
    </p>
    <pre><code>5 3
46 23 26 24 10
5 4 3
</code></pre>
    <p>
     输出样例:
    </p>
    <pre><code>24 23 10
46 23 10
26 10
</code></pre>
    <h2>
     <a id="2__26">
     </a>
     2 思路解析
    </h2>
    <p>
     此题考查最小堆。
     <br/>
     1. 定义最小优先队列
     <code>
      pq
     </code>
     ；
     <br/>
     2. 按照题目要求，遍历所给数组，依次将元素加入
     <code>
      pq
     </code>
     ，操作完之后即获得了一个最小堆；
     <br/>
     3. 根据所给下标，从下往上依次遍历输出堆中的元素，直到根结点，即堆中的路径，注意题目中的下标和自定义的堆中的下标。
     <br/>
     堆和优先队列可以参考
     <a href="https://blog.csdn.net/m0_52319522/article/details/146159648">
      这篇文章
     </a>
     ，这里不再赘述其原理和实现过程，只给出代码实现（应用）。
    </p>
    <h2>
     <a id="3__32">
     </a>
     3 代码实现
    </h2>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">int</span><span class="token operator">*</span> <span class="token function">create_heap</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span><span class="token operator">*</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>n <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/** 此题中只需要入队，所以只实现上浮操作即可 **/</span>
<span class="token keyword">void</span> <span class="token function">adjust_up_heap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> heap<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> t <span class="token operator">=</span> heap<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> t <span class="token operator">&lt;</span> heap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        heap<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> heap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        n <span class="token operator">=</span> i<span class="token punctuation">;</span>
        i <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    heap<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span><span class="token operator">*</span> <span class="token function">find_path_to_root</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> heap<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span><span class="token operator">*</span> res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token operator">*</span>n <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">,</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        res<span class="token punctuation">[</span>p<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> heap<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        j <span class="token operator">=</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    res <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">*</span>n <span class="token operator">=</span> p<span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">destroy_arr</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token function">free</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span> heap <span class="token operator">=</span> <span class="token function">create_heap</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> heap <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">adjust_up_heap</span><span class="token punctuation">(</span>heap<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>m<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        k <span class="token operator">=</span> n<span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token operator">*</span> r <span class="token operator">=</span> <span class="token function">find_path_to_root</span><span class="token punctuation">(</span>heap<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">" %d"</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">destroy_arr</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">destroy_arr</span><span class="token punctuation">(</span>heap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      注意题目的下标是从
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         1 
         
        
       
         1
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           1
          </span>
         </span>
        </span>
       </span>
      </span>
      开始的，代码中的堆的下标是从
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         0 
         
        
       
         0
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           0
          </span>
         </span>
        </span>
       </span>
      </span>
      开始的。
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35323331393532322f:61727469636c652f64657461696c732f313436303132373439" class_="artid" style="display:none">
 </p>
</div>


