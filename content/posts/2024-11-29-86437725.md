---
layout: post
title: Java-注解Annotation
date: 2024-11-29 09:43:31 +0800
description: "文章目录Annotation工作方式JDK5 内建Annotation限定Ove"
keywords: java annotation
categories: ['Java']
tags: ['无标签']
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=86437725
    alt: Java-注解Annotation
artid: 86437725
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=86437725
featuredImagePreview: https://bing.ee123.net/img/rand?artid=86437725
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java 注解（Annotation）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#Annotation_1" rel="nofollow">
        Annotation工作方式
       </a>
      </li>
      <li>
       <a href="#JDK5_Annotation_7" rel="nofollow">
        JDK5 内建Annotation
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#OverrideOverride_9" rel="nofollow">
          限定Override父类方法@Override
         </a>
        </li>
        <li>
         <a href="#Deprecated_Deprectated_35" rel="nofollow">
          标示方法为Deprecated @Deprectated
         </a>
        </li>
        <li>
         <a href="#SuppressWarnings_71" rel="nofollow">
          抑制编译程序警告@SuppressWarnings
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#Annotation_98" rel="nofollow">
        自定义Annotation类型
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#Singlevalue_annotation_149" rel="nofollow">
          Single-value annotation
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#Retention_198" rel="nofollow">
        告知编译程序如何处理@Retention
       </a>
      </li>
      <li>
       <a href="#annotationTarget_345" rel="nofollow">
        限定annotation使用对象@Target
       </a>
      </li>
      <li>
       <a href="#APIDocumented_390" rel="nofollow">
        要求为API文件@Documented
       </a>
      </li>
      <li>
       <a href="#Inherited_437" rel="nofollow">
        子类是否继承父类@Inherited
       </a>
      </li>
      <li>
       <a href="#JUnit_439" rel="nofollow">
        通过JUnit深入理解反射与注解的使用方式与场景
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="Annotation_1">
     </a>
     Annotation工作方式
    </h2>
    <p>
     从Java5.0版发布以来，5.0平台提供了一个正式的annoatation功能：允许开发者定义、使用自己的annotation类型。此功能由一个定义annotation声明的语法，读取annotation的API，一个使用annotation修饰的class文件，一个annotation处理工具（apt）组成。
    </p>
    <p>
     <mark>
      annotation并不直接影响代码语义
     </mark>
     ，但是它能够工作的方式被看作类似程序的工具或者类库，它会反过来对正在运行的程序语义有所影响。
     <br/>
     annotation可以从源文件、class文件或者以
     <mark>
      在运行时反射
     </mark>
     的多种方式被读取。
    </p>
    <h2>
     <a id="JDK5_Annotation_7">
     </a>
     JDK5 内建Annotation
    </h2>
    <p>
     Java 注解（Annotation）：
    </p>
    <h3>
     <a id="OverrideOverride_9">
     </a>
     限定Override父类方法@Override
    </h3>
    <p>
     java.langOverride是个Marker annotation
     <br/>
     用于标示的Annotation，Annotation名称本身即表示了要给工具程序的信息
     <br/>
     a) Override 注解表示子类要重写（override） 父类的对应方法。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OverrideTest</span> <span class="token punctuation">{<!-- --></span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token string">"This is OverrideTest"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		OverrideTest test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OverrideTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     结果是：
     <br/>
     This is OverrideTest
    </p>
    <h3>
     <a id="Deprecated_Deprectated_35">
     </a>
     标示方法为Deprecated @Deprectated
    </h3>
    <p>
     对编译程序说明某个方法已经不建议使用，即该方法是过时的。
     <br/>
     java.lang.Deprecated也是个Marker annotation
     <br/>
     Deprecated这个名称在告知编译程序，被@Deprecated标示的方法是一个不建议被使用的方法
     <br/>
     b) Deprecated 注解表示方法是不建议被使用的。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeprecatedTest</span> <span class="token punctuation">{<!-- --></span>

	<span class="token annotation punctuation">@Deprecated</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"do something"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		
		DeprecatedTest test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeprecatedTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		test<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		
		
		<span class="token comment">/*Date date = new Date(0);
		
		System.out.println(date.toLocaleString());*/</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     结果是：
     <br/>
     do something
    </p>
    <h3>
     <a id="SuppressWarnings_71">
     </a>
     抑制编译程序警告@SuppressWarnings
    </h3>
    <p>
     对编译程序说明某个方法中若有警告讯息，则加以抑制
     <br/>
     c) SuppressWarnings 注解表示抑制警告。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>TreeMap<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SuppressWarningTest</span> <span class="token punctuation">{<!-- --></span>

	<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token string">"unchecked"</span><span class="token punctuation">,</span> <span class="token string">"rawtypes"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		Map map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     结果是：
     <br/>
     Sun Jan 13 19:59:06 CST 2019
    </p>
    <h2>
     <a id="Annotation_98">
     </a>
     自定义Annotation类型
    </h2>
    <p>
     定义Marker Annotation，也就是Annotation名称本身即提供信息对于程序分析工具来说，主要是检查是否有Marker Annotation的出现，并作出对应的动作。
    </p>
    <p>
     自定义注解：当注解中的属性名为 value 时，在对其赋值时可以不指定属性的名称
     <br/>
     而直接写上属性值即可；除了 value 以外的其他值都需要使用 name=value 这种赋值
     <br/>
     方式，即明确指定给谁赋值。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">AnnotationTest</span> <span class="token punctuation">{<!-- --></span>
	
	String <span class="token function">value1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">AnnotationTest1</span> <span class="token punctuation">{<!-- --></span>

	String <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token annotation punctuation">@AnnotationTest</span><span class="token punctuation">(</span>value1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationUsage</span> <span class="token punctuation">{<!-- --></span>
	
	<span class="token annotation punctuation">@AnnotationTest1</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"usage of annotation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		AnnotationUsage usage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		usage<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre>
    <p>
     结果是：
     <br/>
     usage of annotation
    </p>
    <h3>
     <a id="Singlevalue_annotation_149">
     </a>
     Single-value annotation
    </h3>
    <p>
     value成员设定默认值，用"default"关键词
     <br/>
     数组方式的使用
     <br/>
     枚举在Annotation中的应用
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">AnnotationTest1</span> <span class="token punctuation">{<!-- --></span>

	String<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	EnumTest <span class="token function">value2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> EnumTest<span class="token punctuation">{<!-- --></span>
	Hello<span class="token punctuation">,</span> World<span class="token punctuation">,</span> Welcome
<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">package</span> sixtyNineth<span class="token punctuation">;</span>

<span class="token annotation punctuation">@AnnotationTest1</span><span class="token punctuation">(</span>value2 <span class="token operator">=</span> EnumTest<span class="token punctuation">.</span>Welcome<span class="token punctuation">,</span> value1 <span class="token operator">=</span> <span class="token string">"world"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationUsage</span> <span class="token punctuation">{<!-- --></span>
	
	<span class="token annotation punctuation">@AnnotationTest1</span><span class="token punctuation">(</span>value1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"haha"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> value2 <span class="token operator">=</span> EnumTest<span class="token punctuation">.</span>Hello<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"usage of annotation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		AnnotationUsage usage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		usage<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre>
    <p>
     使用@interface自定义Annotation型态时，实际上是自动继承了java.lang.annotation.Annnotation接口由编译程序自动为您完成其它产生的细节，在定义
     <mark>
      Annotation型态时，不能继承其他的Annotation型态或者接口。
     </mark>
     <br/>
     java.lang.annotation
     <br/>
     Interface Annotation
    </p>
    <p>
     The common interface extended by all annotation types. Note that an interface that manually extends this one does not define an annotation type. Also note that this interface does not itself define an annotation type.
    </p>
    <p>
     当 我 们 使 用 @interface 关 键 字 定 义 一 个 注 解 时 ， 该 注 解 隐 含 地 继 承 了java.lang.annotation.Annotation 接口；如果我们定义了一个接口，并且让该接口继承自 Annotation，那么我们所定义的接口依然还是接口而不是注解； Annotation 本身是接口而不是注解。 （可以与 Enum 类比。）
    </p>
    <p>
     定义Annotation型态时也可以使用包来管理类别方式类同于类的导入功能。
    </p>
    <h2>
     <a id="Retention_198">
     </a>
     告知编译程序如何处理@Retention
    </h2>
    <p>
     java.lang.annotation.Retention型态可以在您定义Annotation型态时，指示编译程序该如何对待您的自定义的Annotation型态。
     <br/>
     ==预设上编译程序会将Annotation信息留在.class档案中，==但是不被虚拟机读取，而仅用于编译程序或工具程序运行时提供信息。
     <br/>
     在使用Retention型态时，需要提供java.lang.annotation.RetentionPolicy的枚举型态Package java.lang.annotation;
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> RetentionPolicy
<span class="token punctuation">{<!-- --></span>
    SOURCE<span class="token punctuation">,</span><span class="token comment">//编译程序处理完Annotation信息后就完成任务</span>
    CLASS，<span class="token comment">//编译程序将Annotation储存于class档中，缺省,不由VM读入</span>
    RUNTIME <span class="token comment">//编译程序将Annotation储存于class档中，可由VM读入，通过反射的方式读取到</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     RetentionPolicy为SOURCE的例子是@SuppressWarnings
     <br/>
     仅在编译时期告知编译程序来抑制警告，所以不必将这个信息储存于.class档案
     <br/>
     RetentionPolicy为RUNTIME的时机，可以像是您使用Java设计一个程序代码分析工具，您让VM能读出Annotation信息，以便在分析程序时使用。
     <br/>
     <mark>
      搭配反射（Reflectiong）机制，就可以达到这个目的
     </mark>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>First<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Retention<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>RetentionPolicy<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RetentionPolicy<span class="token punctuation">.</span>CLASS<span class="token punctuation">)</span>
<span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">MyAnnotation</span> <span class="token punctuation">{<!-- --></span>

    String <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"Matthew"</span><span class="token punctuation">;</span>

    String <span class="token function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>First<span class="token punctuation">;</span>

<span class="token annotation punctuation">@MyAnnotation</span><span class="token punctuation">(</span>hello <span class="token operator">=</span> <span class="token string">"beijing"</span><span class="token punctuation">,</span> world <span class="token operator">=</span> <span class="token string">"shanghai"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@MyAnnotation</span><span class="token punctuation">(</span>hello <span class="token operator">=</span> <span class="token string">"tianjing"</span><span class="token punctuation">,</span> world <span class="token operator">=</span> <span class="token string">"shangdi"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Deprecated</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"output something"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        MyTest myTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        myTest<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre>
    <p>
     java.lang.reflect.AnnotatedElement接口
     <br/>
     public Annotation getAnnotation(Class annotationType);
     <br/>
     public Annotation[] getAnnotations();
     <br/>
     public Annotation[] getDeclaredAnnotations();
     <br/>
     public boolean isAnnotationPresent(Class annotationType);
     <br/>
     <mark>
      Class、Constructor、Field、Method、Package等类别，都实现了AnnotationElement接口
     </mark>
    </p>
    <pre><code>package Seventieth.First;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnnotation {

    String hello() default "Matthew";

    String world();
}

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>First<span class="token punctuation">;</span>

<span class="token annotation punctuation">@MyAnnotation</span><span class="token punctuation">(</span>hello <span class="token operator">=</span> <span class="token string">"beijing"</span><span class="token punctuation">,</span> world <span class="token operator">=</span> <span class="token string">"shanghai"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@MyAnnotation</span><span class="token punctuation">(</span>hello <span class="token operator">=</span> <span class="token string">"tianjing"</span><span class="token punctuation">,</span> world <span class="token operator">=</span> <span class="token string">"shangdi"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Deprecated</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"output something"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

   <span class="token comment">/* public static void main(String[] args) {
        MyTest myTest = new MyTest();

        myTest.output();
    }*/</span>

<span class="token punctuation">}</span>

</code></pre>
    <pre><code>package Seventieth.First;

import java.lang.annotation.Annotation;
import java.lang.reflect.Method;

public class MyReflection {
    public static void main(String[] args) throws  Exception{

        MyTest myTest = new MyTest();

        Class&lt;MyTest&gt; c = MyTest.class;

        Method method = c.getMethod("output", new Class[]{});

        if(method.isAnnotationPresent(MyAnnotation.class)){
            method.invoke(myTest, new Object[]{});

            MyAnnotation myAnnotation = method.getAnnotation(MyAnnotation.class);

            String hello = myAnnotation.hello();
            String world = myAnnotation.world();

            System.out.println(hello + "," + world);
        }

        Annotation[] annotations = method.getAnnotations();

        for(Annotation annotation : annotations){
            System.out.println(annotation.annotationType().getName());
        }

    }
}

</code></pre>
    <p>
     结果是：
     <br/>
     output something
     <br/>
     tianjing,shangdi
     <br/>
     Seventieth.First.MyAnnotation
     <br/>
     java.lang.Deprecated
    </p>
    <p>
     当我们在@Retention(RetentionPolicy.RUNTIME)不用RUNTIME而用CLASS和SOURCE时，运行结果为空，因为注解存在了class文件当中，但是，VM不会反射读取出来，method.isAnnotationPresent(MyAnnotation.class)为false所以没有输出。
     <br/>
     @Retention(RetentionPolicy.SOURCE)
     <br/>
     因为SuppressWarnings的RetentionPolicy为SOURCE
    </p>
    <h2>
     <a id="annotationTarget_345">
     </a>
     限定annotation使用对象@Target
    </h2>
    <p>
     使用java.lang.annotation.Target可以定义其使用的时机，在定义时要指定java.lang.annotation.ElementType的枚举值之一
     <br/>
     package java.lang.annotation;
     <br/>
     public enum ElementType{
     <!-- -->
     <br/>
     TYPE,//适用class，interface，enum
     <br/>
     FIELD,//适用field
     <br/>
     METHOD,//适用method
     <br/>
     PARAMETER,//适用method上的parameter
     <br/>
     CONSTRUCTOR,//适用costructor
     <br/>
     LOCAL_VARIABLE,//适用局部变量
     <br/>
     ABBOTATION_TYPE,//适用annotation型态
     <br/>
     PACKAGE//适用package
     <br/>
     }
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>First<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ElementType<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Target<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>ElementType<span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">MyTarget</span> <span class="token punctuation">{<!-- --></span>

    String <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>First<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTargetTest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@MyTarget</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre>
    <p>
     如果把 @MyTarget(“hello”)放在类上面就会报错’@MyTarget’ not applicable to type，我们把
     <br/>
     @Target(ElementType.METHOD)改为@Target(ElementType.TYPE)就不会报错了
    </p>
    <h2>
     <a id="APIDocumented_390">
     </a>
     要求为API文件@Documented
    </h2>
    <p>
     想要在使用者制作JavaDoc文件的同时，也一并将Annotation的讯息加入至API文件中使用java.lang.annotation.Documented
    </p>
    <pre><code>package Seventieth.First;

public @interface DocumentedAnnotation {
    String hello();
}

</code></pre>
    <pre><code>package Seventieth.First;

public class DocumentedTest {
    @DocumentedAnnotation(hello = "welcome")
    public void method(){
        System.out.println("hello world");
    }
}

</code></pre>
    <p>
     生成java帮助文档在Tool》Generate JavaDoc
     <br/>
     然后在弹出的界面点击Output directory后的按钮选择文档生成路径
     <br/>
     接下来在底部的Locale输入框配置语言和编码集，如下图所示，语言用zh_CN，代表中文
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/73277e56561f5b8e2527c857abf8b2fa.png">
      <br/>
      点击ok生成帮助文档
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a2dc636267cdbb6d83a7a1a7e904e11b.png">
       <br/>
       这就是我生成的java帮助文档，点击DocumentTest拉到最下面有方法详细资料
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/031cf0ae40eaf47ffc0b5cad7501ced0.png">
        <br/>
        我们将DoucumentedAnnotation.java更改一下
       </img>
      </img>
     </img>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>First<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Documented<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">DocumentedAnnotation</span> <span class="token punctuation">{<!-- --></span>
    String <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     再次生成帮助文档，我们发现发发详细资料变成如下图所示的样子
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b0cb092e3d621759093b8e94f156b390.png"/>
    </p>
    <h2>
     <a id="Inherited_437">
     </a>
     子类是否继承父类@Inherited
    </h2>
    <p>
     预设上夫类别中断Annotation并不会被继承至子类别中，可以在定义Annotation型态时加上java.lang.annotation.Inherited型态的Annotation
    </p>
    <h2>
     <a id="JUnit_439">
     </a>
     通过JUnit深入理解反射与注解的使用方式与场景
    </h2>
    <p>
     现在项目中导入
     <a href="https://blog.csdn.net/traitor_4/article/details/80168695">
      jar包
     </a>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>Secound<span class="token punctuation">;</span>

<span class="token keyword">import</span> junit<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>TestCase<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span> <span class="token punctuation">{<!-- --></span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSubtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"welcome"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


</code></pre>
    <p>
     结果是：
     <br/>
     hello world
     <br/>
     welcome
    </p>
    <p>
     方法必须以test开头，JUnit我们学过反射后应该大致了解其思路，首先获得这个类的Class对象，然后获得其所有的方法，存入Method[]然后遍历每一个方法，getName获得方法名，如果是以test开头就通过method.invoke执行这个方法
    </p>
    <p>
     JUnit（3.8、 4.x）： Keep the bar green to keep the code clean.
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> Seventieth<span class="token punctuation">.</span>Secound<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     JUnit4 的执行的一般流程：
     <br/>
     a) 首先获得待测试类所对应的 Class 对象。
     <br/>
     b) 然后通过该 Class 对象获得当前类中所有 public 方法所对应的 Method 数组。
     <br/>
     c) 遍历该 Method 数组，取得每一个 Method 对象
     <br/>
     d) 调用每个 Method 对象的 isAnnotationPresent(Test.class)方法，判断该方法是否被 Test
     <br/>
     注解所修饰。
     <br/>
     e) 如果该方法返回 true，那么调用 method.invoke()方法去执行该方法，否则不执行。
    </p>
    <p>
     <mark>
      单元测试不是为了证明你是对的，而是证明你没有错误。
     </mark>
     <br/>
     Writing Secure Code（编写安全的代码）： Input is evil。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f77656978696e5f3433393037333332:2f61727469636c652f64657461696c732f3836343337373235" class_="artid" style="display:none">
 </p>
</div>


