---
layout: post
title: "基于C语言的控制台小游戏打砖块"
date: 2025-03-09 13:47:19 +0800
description: "开发一个基于文本的控制台程序来实现打砖块游戏，确实可以直接使用标准C语言库加上ncurses或在Windows上使用PDCurses来处理字符界面和键盘输入。ncurses（及其Windows上的兼容版本PDCurses）主要用于提供一种方便的方式来处理复杂的屏幕绘制、窗口管理、键盘和鼠标输入等，特别适合于需要精细控制终端显示的应用程序。对于这个简单的打砖块游戏示例，主要是为了展示如何在控制台环境中创建一个具有基本图形元素的游戏。在这种情况下，ncurses。"
keywords: "基于C语言的控制台小游戏——打砖块"
categories: ['未分类']
tags: ['开发语言', 'C']
artid: "146131410"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146131410
    alt: "基于C语言的控制台小游戏打砖块"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146131410
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146131410
cover: https://bing.ee123.net/img/rand?artid=146131410
image: https://bing.ee123.net/img/rand?artid=146131410
img: https://bing.ee123.net/img/rand?artid=146131410
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     基于C语言的控制台小游戏——打砖块
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a35a7fd34e4547c3b4feacf8cfe6dd42.png">
      <br/>
      开发一个基于文本的控制台程序来实现打砖块游戏，确实可以直接使用标准C语言库加上
      <code>
       ncurses
      </code>
      或在Windows上使用PDCurses来处理字符界面和键盘输入。
      <code>
       ncurses
      </code>
      （及其Windows上的兼容版本PDCurses）主要用于提供一种方便的方式来处理复杂的屏幕绘制、窗口管理、键盘和鼠标输入等，特别适合于需要精细控制终端显示的应用程序。
     </img>
    </p>
    <p>
     对于这个简单的打砖块游戏示例，主要是为了展示如何在控制台环境中创建一个具有基本图形元素的游戏。在这种情况下，
     <code>
      ncurses
     </code>
     或PDCurses的主要作用包括：
    </p>
    <ul>
     <li>
      <strong>
       简化输入处理
      </strong>
      ：允许非阻塞地读取键盘输入，这对于实时游戏非常重要。
     </li>
     <li>
      <strong>
       高效的屏幕更新
      </strong>
      ：通过缓冲区管理减少闪烁，并且只重绘发生变化的部分。
     </li>
     <li>
      <strong>
       支持移动光标、改变文本颜色等高级功能
      </strong>
      ：虽然在这个简单的例子中没有用到这些特性，但在更复杂的游戏或应用中可能会很有用。
     </li>
    </ul>
    <h4>
     <a id="ncursesPDCurses_9">
     </a>
     如果不使用
     <code>
      ncurses
     </code>
     或PDCurses
    </h4>
    <p>
     如果不使用
     <code>
      ncurses
     </code>
     或PDCurses，你也可以直接使用标准输入输出函数如
     <code>
      printf()
     </code>
     和
     <code>
      getch()
     </code>
     （Windows下）或
     <code>
      getchar()
     </code>
     来实现类似的功能，但这可能需要手动处理更多细节，例如：
    </p>
    <ul>
     <li>
      <strong>
       手动处理屏幕刷新
      </strong>
      ：每次更新屏幕内容时都需要清除整个屏幕并重新打印所有内容。
     </li>
     <li>
      <strong>
       处理键盘输入
      </strong>
      ：在Windows系统中可以使用
      <code>
       conio.h
      </code>
      中的
      <code>
       _kbhit()
      </code>
      和
      <code>
       _getch()
      </code>
      来检测按键输入；在Linux/Unix系统中，则可能需要用到
      <code>
       termios
      </code>
      库来设置终端为非规范模式以便读取单个字符而不需等待回车键。
     </li>
    </ul>
    <p>
     这里是一个简化版的例子，不依赖于
     <code>
      ncurses
     </code>
     或PDCurses，适用于Windows平台（使用
     <code>
      conio.h
     </code>
     ）：
    </p>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;conio.h&gt;</span> <span class="token comment">// Windows下的非阻塞输入</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;windows.h&gt;</span> <span class="token comment">// Sleep函数</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">WIDTH</span> <span class="token expression"><span class="token number">40</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEIGHT</span> <span class="token expression"><span class="token number">20</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PADDLE_WIDTH</span> <span class="token expression"><span class="token number">10</span></span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span> Point<span class="token punctuation">;</span>

Point ball <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> HEIGHT <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Point paddle <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>WIDTH <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> PADDLE_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> HEIGHT <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> dx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> dy <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> bricks<span class="token punctuation">[</span>HEIGHT <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>WIDTH<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> HEIGHT <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> WIDTH<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
            bricks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 随机生成一些砖块</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清屏</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Score: %d\n"</span><span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> HEIGHT<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> WIDTH<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">==</span> ball<span class="token punctuation">.</span>y <span class="token operator">&amp;&amp;</span> x <span class="token operator">==</span> ball<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"O"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 球</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">==</span> paddle<span class="token punctuation">.</span>y <span class="token operator">&amp;&amp;</span> x <span class="token operator">&gt;=</span> paddle<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;</span> paddle<span class="token punctuation">.</span>x <span class="token operator">+</span> PADDLE_WIDTH<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 挡板</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">&lt;</span> HEIGHT <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> bricks<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 砖块</span>
            <span class="token keyword">else</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">updateBallPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    ball<span class="token punctuation">.</span>x <span class="token operator">+=</span> dx<span class="token punctuation">;</span>
    ball<span class="token punctuation">.</span>y <span class="token operator">+=</span> dy<span class="token punctuation">;</span>

    <span class="token comment">// 碰撞检测</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ball<span class="token punctuation">.</span>x <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> ball<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> WIDTH <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> dx <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ball<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> dy <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ball<span class="token punctuation">.</span>y <span class="token operator">==</span> paddle<span class="token punctuation">.</span>y <span class="token operator">&amp;&amp;</span> ball<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> paddle<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> ball<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> paddle<span class="token punctuation">.</span>x <span class="token operator">+</span> PADDLE_WIDTH<span class="token punctuation">)</span> dy <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>ball<span class="token punctuation">.</span>y <span class="token operator">&gt;=</span> HEIGHT<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 游戏结束</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Game Over! Press any key to exit."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">_getch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>bricks<span class="token punctuation">[</span>ball<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>ball<span class="token punctuation">.</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 击中砖块</span>
        bricks<span class="token punctuation">[</span>ball<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>ball<span class="token punctuation">.</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        dy <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        score<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">movePaddle</span><span class="token punctuation">(</span><span class="token keyword">int</span> direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    paddle<span class="token punctuation">.</span>x <span class="token operator">+=</span> direction<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>paddle<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> paddle<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>paddle<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> WIDTH <span class="token operator">-</span> PADDLE_WIDTH<span class="token punctuation">)</span> paddle<span class="token punctuation">.</span>x <span class="token operator">=</span> WIDTH <span class="token operator">-</span> PADDLE_WIDTH<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">_kbhit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token function">_getch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token char">'a'</span><span class="token punctuation">)</span> <span class="token function">movePaddle</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token char">'d'</span><span class="token punctuation">)</span> <span class="token function">movePaddle</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">updateBallPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 控制速度</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     编译指令
    </p>
    <pre><code class="prism language-bash">gcc zhuankuai_game.c <span class="token parameter variable">-o</span> zhuankuai_game.exe <span class="token parameter variable">-lconio</span>
</code></pre>
    <p>
     此代码展示了如何在不使用
     <code>
      ncurses
     </code>
     或PDCurses的情况下实现一个简单的打砖块游戏。请注意，由于不同操作系统之间的差异，特别是关于如何处理键盘输入和清屏命令，上述代码主要针对Windows平台。如果你希望在Linux或macOS上运行类似的程序，你需要相应地调整代码以适应不同的API和库。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35323031313731372f:61727469636c652f64657461696c732f313436313331343130" class_="artid" style="display:none">
 </p>
</div>


