---
layout: post
title: "第五章go-的数据类型-及go语言拼接字符串有哪些方式"
date: 2025-03-08 15:21:00 +0800
description: "比如计算直角三角形的斜边长时使用math包的Sqrt()函数，该函数接收的是float64类型的参数，而变量a和b都是int类型的，这个时候就需要将a和b强制类型转换为float64类型。Go 使用了特殊的 rune 类型来处理 Unicode，让基于 Unicode 的文本处理更为方便，也可以使用 byte 型进行默认字符串处理，性能和扩展性都有照顾。因为UTF8编码下一个中文汉字由3~4个字节组成，所以我们不能简单的按照字节去遍历一个包含中文的字符串，否则就会出现上面输出中第一行的结果。"
keywords: "第五章：go 的数据类型 及go语言拼接字符串有哪些方式"
categories: ['Golang']
tags: ['开发语言', '后端', 'Golang']
artid: "146116167"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146116167
    alt: "第五章go-的数据类型-及go语言拼接字符串有哪些方式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146116167
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146116167
cover: https://bing.ee123.net/img/rand?artid=146116167
image: https://bing.ee123.net/img/rand?artid=146116167
img: https://bing.ee123.net/img/rand?artid=146116167
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     第五章：go 的数据类型 及go语言拼接字符串有哪些方式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3 id="c-1-4-0">
     字符串
    </h3>
    <p>
     Go语言中的字符串以原生数据类型出现，使用字符串就像使用其他原生数据类型（int、bool、float32、float64 等）一样。 Go 语言里的字符串的内部实现使用
     <code>
      UTF-8
     </code>
     编码。 字符串的值为
     <code>
      双引号(")
     </code>
     中的内容，可以在Go语言的源码中直接添加非ASCII码字符，例如：
    </p>
    <pre><code>s1 := "hello"
s2 := "你好"
</code></pre>
    <h4 id="c-1-5-0">
     字符串转义符
    </h4>
    <p>
     Go 语言的字符串常见转义符包含回车、换行、单双引号、制表符等，如下表所示。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        转义符
       </th>
       <th>
        含义
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         \r
        </code>
       </td>
       <td>
        回车符（返回行首）
       </td>
      </tr>
      <tr>
       <td>
        <code>
         \n
        </code>
       </td>
       <td>
        换行符（直接跳到下一行的同列位置）
       </td>
      </tr>
      <tr>
       <td>
        <code>
         \t
        </code>
       </td>
       <td>
        制表符
       </td>
      </tr>
      <tr>
       <td>
        <code>
         \'
        </code>
       </td>
       <td>
        单引号
       </td>
      </tr>
      <tr>
       <td>
        <code>
         \"
        </code>
       </td>
       <td>
        双引号
       </td>
      </tr>
      <tr>
       <td>
        <code>
         \\
        </code>
       </td>
       <td>
        反斜杠
       </td>
      </tr>
      <tr>
       <td>
        举个例子，我们要打印一个Windows平台下的一个文件路径：
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p>
     <span style="color:#fe2c24">
      <strong>
       Go 字符串格式化符号:
      </strong>
     </span>
    </p>
    <table>
     <tbody>
      <tr>
       <th>
        格  式
       </th>
       <th>
        描  述
       </th>
      </tr>
      <tr>
       <td>
        %v
       </td>
       <td>
        按值的本来值输出
       </td>
      </tr>
      <tr>
       <td>
        %+v
       </td>
       <td>
        在 %v 基础上，对结构体字段名和值进行展开
       </td>
      </tr>
      <tr>
       <td>
        %#v
       </td>
       <td>
        输出 Go 语言语法格式的值
       </td>
      </tr>
      <tr>
       <td>
        %T
       </td>
       <td>
        输出 Go 语言语法格式的类型和值
       </td>
      </tr>
      <tr>
       <td>
        %%
       </td>
       <td>
        输出 % 本体
       </td>
      </tr>
      <tr>
       <td>
        %b
       </td>
       <td>
        整型以二进制方式显示
       </td>
      </tr>
      <tr>
       <td>
        %o
       </td>
       <td>
        整型以八进制方式显示
       </td>
      </tr>
      <tr>
       <td>
        %d
       </td>
       <td>
        整型以十进制方式显示
       </td>
      </tr>
      <tr>
       <td>
        %x
       </td>
       <td>
        整型以十六进制方式显示
       </td>
      </tr>
      <tr>
       <td>
        %X
       </td>
       <td>
        整型以十六进制、字母大写方式显示
       </td>
      </tr>
      <tr>
       <td>
        %U
       </td>
       <td>
        Unicode 字符
       </td>
      </tr>
      <tr>
       <td>
        %f
       </td>
       <td>
        浮点数
       </td>
      </tr>
      <tr>
       <td>
        %p
       </td>
       <td>
        指针，十六进制方式显示
       </td>
      </tr>
     </tbody>
    </table>
    <pre><code>package main
import (
    "fmt"
)
func main() {
    fmt.Println("str := \"c:\\Code\\lesson1\\go.exe\"")
}
</code></pre>
    <h4 id="c-1-5-1">
     多行字符串
    </h4>
    <p>
     Go语言中要定义一个多行字符串时，就必须使用
     <code>
      反引号
     </code>
     字符：
    </p>
    <pre><code>s1 := `第一行
第二行
第三行
`
fmt.Println(s1)
</code></pre>
    <p>
     反引号间换行将被作为字符串中的换行，但是所有的转义字符均无效，文本将会原样输出。
    </p>
    <h4 id="c-1-5-2">
     字符串的常用操作
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        方法
       </th>
       <th>
        介绍
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        len(str)
       </td>
       <td>
        求长度
       </td>
      </tr>
      <tr>
       <td>
        +或fmt.Sprintf
       </td>
       <td>
        拼接字符串
       </td>
      </tr>
      <tr>
       <td>
        strings.Split
       </td>
       <td>
        分割
       </td>
      </tr>
      <tr>
       <td>
        strings.contains
       </td>
       <td>
        判断是否包含
       </td>
      </tr>
      <tr>
       <td>
        strings.HasPrefix,strings.HasSuffix
       </td>
       <td>
        前缀/后缀判断
       </td>
      </tr>
      <tr>
       <td>
        strings.Index(),strings.LastIndex()
       </td>
       <td>
        子串出现的位置
       </td>
      </tr>
      <tr>
       <td>
        strings.Join(a[]string, sep string)
       </td>
       <td>
        join操作
       </td>
      </tr>
     </tbody>
    </table>
    <h3 id="c-1-5-3">
     byte和rune类型
    </h3>
    <p>
     <span style="color:#fe2c24">
      组成每个字符串的元素叫做“字符”，可以通过遍历或者单个获取字符串元素获得字符。 字符用单引号（’）包裹起来，如：
     </span>
    </p>
    <pre><code>var a = '中'
var b = 'x'
</code></pre>
    <p>
     Go 语言的字符有以下两种：
    </p>
    <ol>
     <li>
      <span style="color:#fe2c24">
       <code>
        uint8
       </code>
       类型，或者叫 byte 型，代表一个
       <code>
        ASCII码
       </code>
       字符。
      </span>
     </li>
     <li>
      <span style="color:#fe2c24">
       <code>
        rune
       </code>
       类型，代表一个
       <code>
        UTF-8字符
       </code>
       。int32
      </span>
     </li>
    </ol>
    <p>
     当需要处理中文、日文或者其他复合字符时，则需要用到
     <code>
      rune
     </code>
     类型。
     <strong>
      <span style="color:#fe2c24">
       <code>
        rune
       </code>
       类型实际是一个
       <code>
        int32
       </code>
       。
      </span>
     </strong>
    </p>
    <p>
     Go 使用了特殊的 rune 类型来处理 Unicode，让基于 Unicode 的文本处理更为方便，也可以使用 byte 型进行默认字符串处理，性能和扩展性都有照顾。
    </p>
    <pre><code>// 遍历字符串
func traversalString() {
	s := "hello沙河"
	for i := 0; i &lt; len(s); i++ { //byte
		fmt.Printf("%v(%c) ", s[i], s[i])
	}
	fmt.Println()
	for _, r := range s { //rune
		fmt.Printf("%v(%c) ", r, r)
	}
	fmt.Println()
}
</code></pre>
    <p>
     输出：
    </p>
    <pre><code>104(h) 101(e) 108(l) 108(l) 111(o) 230(æ) 178(²) 153() 230(æ) 178(²) 179(³) 
104(h) 101(e) 108(l) 108(l) 111(o) 27801(沙) 27827(河) 
</code></pre>
    <p>
     因为UTF8编码下一个中文汉字由3~4个字节组成，所以我们不能简单的按照字节去遍历一个包含中文的字符串，否则就会出现上面输出中第一行的结果。
    </p>
    <p>
     字符串底层是一个byte数组，所以可以和
     <code>
      []byte
     </code>
     类型相互转换。字符串是不能修改的 字符串是由byte字节组成，所以字符串的长度是byte字节的长度。 rune类型用来表示utf8字符，一个rune字符由一个或多个byte组成。
    </p>
    <h4 id="c-1-6-0">
     修改字符串
    </h4>
    <p>
     <span style="color:#fe2c24">
      要修改字符串，需要先将其转换成
      <code>
       []rune
      </code>
      或
      <code>
       []byte
      </code>
      ，完成后再转换为
      <code>
       string
      </code>
      。无论哪种转换，都会重新分配内存，并复制字节数组。
     </span>
    </p>
    <pre><code>func changeString() {
	s1 := "big"
	// 强制类型转换
	byteS1 := []byte(s1)
	byteS1[0] = 'p'
	fmt.Println(string(byteS1))

	s2 := "白萝卜"
	runeS2 := []rune(s2)
	runeS2[0] = '红'
	fmt.Println(string(runeS2))
}
</code></pre>
    <h3 id="c-1-6-1">
     类型转换
    </h3>
    <p>
     Go语言中只有强制类型转换，没有隐式类型转换。该语法只能在两个类型之间支持相互转换的时候使用。
    </p>
    <p>
     强制类型转换的基本语法如下：
    </p>
    <pre><code>T(表达式)
</code></pre>
    <p>
     其中，T表示要转换的类型。表达式包括变量、复杂算子和函数返回值等.
    </p>
    <p>
     比如计算直角三角形的斜边长时使用math包的Sqrt()函数，该函数接收的是float64类型的参数，而变量a和b都是int类型的，这个时候就需要将a和b强制类型转换为float64类型。
    </p>
    <pre><code>func sqrtDemo() {
	var a, b = 3, 4
	var c int
	// math.Sqrt()接收的参数是float64类型，需要强制转换
	c = int(math.Sqrt(float64(a*a + b*b)))
	fmt.Println(c)
}
</code></pre>
    <h3>
     <strong>
      <span style="color:#fe2c24">
       go语言，
       <a href="https://so.csdn.net/so/search?q=%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2&amp;spm=1001.2101.3001.7020" title="拼接字符串">
        拼接字符串
       </a>
       的方式有好几种，这里我整理了以下：
      </span>
     </strong>
    </h3>
    <p>
     <strong>
      <span style="color:#fe2c24">
       生成原理分析链接：
      </span>
     </strong>
     <a href="https://blog.csdn.net/sinat_24985411/article/details/129279992" title="Go字符串拼接方式_go 字符串连接-CSDN博客">
      Go字符串拼接方式_go 字符串连接-CSDN博客
     </a>
    </p>
    <h4 id="%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A">
     <a name="t0">
     </a>
     第一种方式：
    </h4>
    <h5 id="%E4%BD%BF%E7%94%A8%E5%8A%A0%E5%8F%B7%22%2B%22">
     <a name="t1">
     </a>
     使用加号"+"
    </h5>
    <pre><code class="language-Go">package main
 
import "fmt"
 
func main() {
	// Q：拼接字符串有哪些方式
	// A：使用加号"+"，使用加号来连接两个或多个字符串是最直接的方式
	s1 := "Hello,"
	s2 := "World!"
	s3 := s1 + s2
	fmt.Println(s3) //输出：Hello,World!
}</code></pre>
    <h4 id="%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A">
     第二种方式：
    </h4>
    <h5 id="%E4%BD%BF%E7%94%A8fmt.Sprintf">
     <a name="t3">
     </a>
     使用
     <strong>
      <code>
       fmt.Sprintf
      </code>
     </strong>
    </h5>
    <pre><code class="language-Go">package main
 
import "fmt"
 
func main() {
	// Q：拼接字符串有哪些方式
	// A：使用fmt.Sprintf，当需要格式化字符串时，fmt.Sprintf是一个很好的选择。它返回一个格式化后的字符串
	name := "Lucky"
	greeting := fmt.Sprintf("Hello,%s!", name)
	fmt.Println(greeting) // 输出：Hello,Lucky!
}</code></pre>
    <h4 id="%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A">
     第三种方式：
    </h4>
    <h5 id="%E4%BD%BF%E7%94%A8strings.Join">
     <a name="t5">
     </a>
     使用
     <strong>
      <code>
       strings.Join
      </code>
     </strong>
    </h5>
    <pre><code class="language-Go">package main
 
import (
	"fmt"
	"strings"
)
 
func main() {
	// Q：拼接字符串有哪些方式
	// A：使用strings.Join，当需要连接一个字符串切片（slice）时，可以使用strings.Join函数
	parts := []string{"Hello", "World"}
	s := strings.Join(parts, ",")
	fmt.Println(s) // 输出：Hello,World
}</code></pre>
    <h4 id="%E7%AC%AC%E5%9B%9B%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A">
     第四种方式：
    </h4>
    <h5 id="%E4%BD%BF%E7%94%A8strings.Builder">
     <a name="t7">
     </a>
     使用
     <strong>
      <code>
       strings.Builder
      </code>
     </strong>
    </h5>
    <pre><code class="language-Go">package main
 
import (
	"fmt"
	"strings"
)
 
func main() {
	// Q：拼接字符串有哪些方式
	// A：使用strings.Builder，对于大量字符串的拼接操作，使用strings.Builder可以提供更好的性能，因为它避免了不必要的内存分配和复制
	var b strings.Builder
	b.WriteString("Hello,")
	b.WriteString("World!")
	s := b.String()
	fmt.Println(s) // 输出：Hello,World!
}</code></pre>
    <h4 id="%E7%AC%AC%E4%BA%94%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A">
     第五种方式：
    </h4>
    <h5 id="%E4%BD%BF%E7%94%A8bytes.Buffer">
     <a name="t9">
     </a>
     使用
     <strong>
      <code>
       bytes.Buffer
      </code>
     </strong>
    </h5>
    <pre><code class="language-Go">package main
 
import (
	"bytes"
	"fmt"
)
 
func main() {
	// Q：拼接字符串有哪些方式
	// A：使用bytes.Buffer，与strings.Builder类似，但bytes.Buffer用于字节的拼接，然后可以通过String()方法转换为字符串。这在处理字节切片时更为常见
	var b bytes.Buffer
	b.WriteString("Hello,")
	b.WriteString("World!")
	s := b.String()
	fmt.Println(s) // 输出：Hello,World!
}</code></pre>
    <h4>
     第六种方式：（不推荐）
    </h4>
    <h4>
     5. 使用
     <code>
      +
     </code>
     操作符和
     <code>
      +=
     </code>
     操作符的混合使用（不推荐）
    </h4>
    <p>
     在一些简单的场景下，你可以在循环中直接使用
     <code>
      +=
     </code>
     来拼接字符串，但这种方式在大量循环中效率较低，因为它每次拼接都会创建新的字符串。
    </p>
    <p>
     <strong>
      <code>
       <code>
        str := "Hello, "
       </code>
      </code>
     </strong>
    </p>
    <p>
     <strong>
      <code>
       <code>
        for _, word := range []string{"world", "from", "Go"} {
        <!-- -->
       </code>
      </code>
     </strong>
    </p>
    <p>
     <strong>
      <code>
       <code>
        str += word + " "
       </code>
      </code>
     </strong>
    </p>
    <p>
     <strong>
      <code>
       <code>
        }
       </code>
      </code>
     </strong>
    </p>
    <p>
     <strong>
      <code>
       <code>
        fmt.Println(str) // 输出：Hello, world from Go
       </code>
      </code>
     </strong>
    </p>
    <p>
    </p>
    <h4>
     <span style="color:#fe2c24">
      <strong>
       字符串替换的实践案例
      </strong>
     </span>
    </h4>
    <p>
     <span style="color:#fe2c24">
      <strong>
       strings.Replace  / strings.ReplaceAll  / 正则
      </strong>
     </span>
    </p>
    <pre><code class="language-Go">func main() {
	str := "Hello, World! Hello, World! Hello, World! Hello, World! Hello, World!"
	
	// 使用strings.Replace函数进行替换
	start := time.Now()
	newStr := strings.Replace(str, "World", "Golang", -1)
	elapsed := time.Since(start)
	fmt.Printf("strings.Replace: %s\n", elapsed)
	fmt.Println(newStr)

	// 使用strings.ReplaceAll函数进行替换
	start = time.Now()
	newStr = strings.ReplaceAll(str, "World", "Golang")
	elapsed = time.Since(start)
	fmt.Printf("strings.ReplaceAll: %s\n", elapsed)
	fmt.Println(newStr)

	// 使用正则表达式进行替换
	start = time.Now()
	re := regexp.MustCompile(`World`)
	newStr = re.ReplaceAllString(str, "Golang")
	elapsed = time.Since(start)
	fmt.Printf("regexp.ReplaceAllString: %s\n", elapsed)
	fmt.Println(newStr)
}
————————————————

                            版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。
                        
原文链接：https://blog.csdn.net/lsoxvxe/article/details/132426011</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f6c69757869616f6a756e3832382f:61727469636c652f64657461696c732f313436313136313637" class_="artid" style="display:none">
 </p>
</div>


