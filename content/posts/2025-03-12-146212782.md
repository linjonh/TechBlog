---
layout: post
title: "IP和TCP抓包实验"
date: 2025-03-12 19:37:03 +0800
description: "1.配置IP地址，R1的g0/0口为192.168.1.1/24，R2的g0/0口是192.168.1.2/242.开启该链路上R1的g0/0口的抓包3.通过R1pingR2产生流量，并通过wireshark，查看抓取的ping包的内容4.在R2上开启ftp服务，并通过R1去访问R2的FTP5.重新开启wireshark去抓取链路当中FTP的登录名和密码。"
keywords: "IP和TCP抓包实验"
categories: ['未分类']
tags: ['网络协议', '网络', 'Tcp', 'Java']
artid: "146212782"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146212782
    alt: "IP和TCP抓包实验"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146212782
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146212782
cover: https://bing.ee123.net/img/rand?artid=146212782
image: https://bing.ee123.net/img/rand?artid=146212782
img: https://bing.ee123.net/img/rand?artid=146212782
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     IP和TCP抓包实验
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="IPTCP_0">
     </a>
     IP和TCP抓包实验
    </h2>
    <h3>
     <a id="_2">
     </a>
     实验拓扑
    </h3>
    <p>
     <img alt="外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传" src="https://i-blog.csdnimg.cn/direct/d45977fae9664f99bb942939e1ff5cea.png"/>
    </p>
    <h3>
     <a id="_9">
     </a>
     实验需求：
    </h3>
    <p>
     1.配置IP地址，R1的g0/0口为192.168.1.1/24，R2的g0/0口是192.168.1.2/24
    </p>
    <p>
     2.开启该链路上R1的g0/0口的抓包
    </p>
    <p>
     3.通过R1pingR2产生流量，并通过wireshark，查看抓取的ping包的内容
    </p>
    <p>
     4.在R2上开启ftp服务，并通过R1去访问R2的FTP
    </p>
    <p>
     5.重新开启wireshark去抓取链路当中FTP的登录名和密码
    </p>
    <h3>
     <a id="_23">
     </a>
     实验步骤：
    </h3>
    <h6>
     <a id="1ip_25">
     </a>
     1.配置ip信息，实现设备互通
    </h6>
    <pre><code class="prism language-powershell">在R1上
&lt;H3C&gt;system-view        <span class="token operator">/</span><span class="token operator">/</span>进入配置视图
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname R1         <span class="token operator">/</span><span class="token operator">/</span>修改设备名为R1
<span class="token namespace">[R1]</span>int g0/0			<span class="token operator">/</span><span class="token operator">/</span>进入g0/0接口
<span class="token namespace">[R1-GigabitEthernet0/0]</span>ip address 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1 24      <span class="token operator">/</span><span class="token operator">/</span>配置相应ip地址
<span class="token namespace">[R1-GigabitEthernet0/0]</span>display ip interface brief     <span class="token operator">/</span><span class="token operator">/</span>查看所有接口简要信息
<span class="token operator">*</span>down: administratively down
<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: spoofing  <span class="token punctuation">(</span>l<span class="token punctuation">)</span>: loopback
Interface           Physical Protocol IP address/Mask    VPN instance Description  
GE0/0               up       up       192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1/24     <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/2               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser1/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser2/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser3/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser4/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
<span class="token namespace">[R1-GigabitEthernet0/0]</span>
</code></pre>
    <pre><code class="prism language-powershell">在R2上
&lt;H3C&gt;system-view 
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname R2
<span class="token namespace">[R2]</span>int GigabitEthernet 0/0
<span class="token namespace">[R2-GigabitEthernet0/0]</span>ip address 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 24
<span class="token namespace">[R2-GigabitEthernet0/0]</span>display ip interface brief
<span class="token operator">*</span>down: administratively down
<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: spoofing  <span class="token punctuation">(</span>l<span class="token punctuation">)</span>: loopback
Interface           Physical Protocol IP address/Mask    VPN instance Description  
GE0/0               up       up       192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2/24     <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/2               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser1/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser2/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser3/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser4/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
<span class="token namespace">[R2-GigabitEthernet0/0]</span>
</code></pre>
    <h6>
     <a id="2_79">
     </a>
     2.开启链路抓包
    </h6>
    <p>
     <img alt="外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传" src="https://i-blog.csdnimg.cn/direct/d51dfa8f0de542519c16c80b89c126fd.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0b01523c9be742fbbc29de36963088ca.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c74f991eb6464856b715428c2304f4ab.png"/>
    </p>
    <h6>
     <a id="3R1pingR2wiresharkping_93">
     </a>
     3.通过R1pingR2产生流量，并通过wireshark，查看抓取的ping包的内容
    </h6>
    <pre><code class="prism language-powershell">在R1上
<span class="token namespace">[R1]</span>ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2
Ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2<span class="token punctuation">)</span>: 56 <span class="token keyword">data</span> bytes<span class="token punctuation">,</span> press CTRL+C to <span class="token keyword">break</span>
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=0 ttl=255 time=0<span class="token punctuation">.</span>786 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=1 ttl=255 time=0<span class="token punctuation">.</span>402 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=2 ttl=255 time=0<span class="token punctuation">.</span>420 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=3 ttl=255 time=0<span class="token punctuation">.</span>463 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=4 ttl=255 time=0<span class="token punctuation">.</span>470 ms

<span class="token operator">--</span><span class="token operator">-</span> Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 <span class="token operator">--</span><span class="token operator">-</span>
5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss
round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>402/0<span class="token punctuation">.</span>508/0<span class="token punctuation">.</span>786/0<span class="token punctuation">.</span>141 ms
<span class="token namespace">[R1]</span><span class="token operator">%</span>Mar 12 19:04:08:340 2025 R1 PING/6/PING_STATISTICS: Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss<span class="token punctuation">,</span> round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>402/0<span class="token punctuation">.</span>508/0<span class="token punctuation">.</span>786/0<span class="token punctuation">.</span>141 ms<span class="token punctuation">.</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e81d201ef19a4a7e9fc8506da45720c5.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c9689b89d27d406f8f6e332351332f9b.png"/>
    </p>
    <h6>
     <a id="4R2FTPuseradmin12345_119">
     </a>
     4.在R2上开启FTP服务，用户名为user，密码为admin@12345
    </h6>
    <pre><code class="prism language-powershell">在R2上
<span class="token namespace">[R2]</span>ftp server enable 					<span class="token operator">/</span><span class="token operator">/</span>开启ftp服务
<span class="token namespace">[R2]</span>local-user user <span class="token keyword">class</span> manage 		<span class="token operator">/</span><span class="token operator">/</span>创建本地管理用户
New local user added<span class="token punctuation">.</span>
<span class="token namespace">[R2-luser-manage-user]</span>password simple admin@12345		<span class="token operator">/</span><span class="token operator">/</span>设置明文密码
<span class="token namespace">[R2-luser-manage-user]</span>authorization-attribute user-role level-15	<span class="token operator">/</span><span class="token operator">/</span>设置用户等级，此处为最高等级
<span class="token namespace">[R2-luser-manage-user]</span>service-<span class="token function">type</span> ftp				<span class="token operator">/</span><span class="token operator">/</span>将此用户密码用与ftp服务
<span class="token namespace">[R2-luser-manage-user]</span>
</code></pre>
    <h6>
     <a id="5R1FTP_134">
     </a>
     5.
     <strong>
      在R1上访问FTP服务，输入用户名和密码
     </strong>
    </h6>
    <pre><code class="prism language-powershell">在R1上
&lt;R1&gt;ftp 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2     <span class="token operator">/</span><span class="token operator">/</span>登录到R2的FTP服务
Press CTRL+C to abort<span class="token punctuation">.</span>
Connected to 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2<span class="token punctuation">)</span><span class="token punctuation">.</span>
220 FTP service ready<span class="token punctuation">.</span>
User <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2:<span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">)</span>: user      <span class="token operator">/</span><span class="token operator">/</span>输入用户名
331 Password required <span class="token keyword">for</span> user<span class="token punctuation">.</span>
Password:                  	<span class="token operator">/</span><span class="token operator">/</span>密文输入密码
230 User logged in<span class="token punctuation">.</span>      <span class="token operator">/</span><span class="token operator">/</span>登录成功
Remote system <span class="token function">type</span> is UNIX<span class="token punctuation">.</span>
<span class="token keyword">Using</span> binary mode to transfer files<span class="token punctuation">.</span>
ftp&gt; <span class="token function">dir</span>               <span class="token operator">/</span><span class="token operator">/</span>查看R2上ftp服务中的文件
227 Entering Passive Mode <span class="token punctuation">(</span>192<span class="token punctuation">,</span>168<span class="token punctuation">,</span>1<span class="token punctuation">,</span>2<span class="token punctuation">,</span>86<span class="token punctuation">,</span>249<span class="token punctuation">)</span>
150 Accepted <span class="token keyword">data</span> connection
drwxrwxrwx    2 0          0                4096 Mar 12 18:47 diagfile
<span class="token operator">-</span>rwxrwxrwx    1 0          0               43136 Mar 12 18:47 licbackup
<span class="token operator">-</span>rwxrwxrwx    1 0          0               43136 Mar 12 18:47 licnormal
drwxrwxrwx    2 0          0                4096 Mar 12 18:47 logfile
<span class="token operator">-</span>rwxrwxrwx    1 0          0                   0 Mar 12 18:47 msr36-cmw710-boot-r0424p22<span class="token punctuation">.</span>bin
<span class="token operator">-</span>rwxrwxrwx    1 0          0                   0 Mar 12 18:47 msr36-cmw710-system-r0424p22<span class="token punctuation">.</span>bin
drwxrwxrwx    2 0          0                4096 Mar 12 18:47 seclog
226 7 matches total
ftp&gt; 
</code></pre>
    <h6>
     <a id="6WiresharkFTP_164">
     </a>
     6.
     <strong>
      刷新Wireshark，抓取到FTP的登录名和密码，
     </strong>
    </h6>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/70825d5818b94e0ebf0cd349c2964253.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36343530353735322f:61727469636c652f64657461696c732f313436323132373832" class_="artid" style="display:none">
 </p>
</div>


