---
layout: post
title: "在-Windows-上使用-choco-安装-mkcert-并配置-Vue-运行HTTPS"
date: 2025-03-13 19:19:52 +0800
description: "windows中解决vue2或vue3本地运行http转https问题"
keywords: "在 Windows 上使用 choco 安装 mkcert 并配置 Vue 运行HTTPS"
categories: ['Vue', 'Vue']
tags: ['前端本地运行Https', 'Vue', 'Vue', 'Vite']
artid: "146237606"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146237606
    alt: "在-Windows-上使用-choco-安装-mkcert-并配置-Vue-运行HTTPS"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146237606
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146237606
cover: https://bing.ee123.net/img/rand?artid=146237606
image: https://bing.ee123.net/img/rand?artid=146237606
img: https://bing.ee123.net/img/rand?artid=146237606
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     在 Windows 上使用 choco 安装 mkcert 并配置 Vue 运行HTTPS
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <strong>
      解决在Windows上使用Vue本地运行HTTPS的问题,vue-cli或vite都可以使用
     </strong>
    </p>
    <h3>
     <a id="_1_Chocolatey__2">
     </a>
     步骤 1：确认 Chocolatey 是否已安装
    </h3>
    <h4>
     <a id="1__choco__3">
     </a>
     1. 检查 choco 命令是否可用
    </h4>
    <p>
     打开 PowerShell（管理员权限），输入：
    </p>
    <pre><code class="prism language-bash">choco <span class="token parameter variable">-v</span>
</code></pre>
    <ul>
     <li>
      <p>
       如果显示版本号（如 2.4,3），说明已安装 Chocolatey。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/916f9a03d77d4dad872661636a8c5586.png"/>
      </p>
     </li>
     <li>
      <p>
       如果提示 命令未找到，需先安装 Chocolatey。
      </p>
     </li>
    </ul>
    <h3>
     <a id="_2_Chocolatey_12">
     </a>
     步骤 2：安装 Chocolatey（如未安装）
    </h3>
    <h4>
     <a id="1__PowerShell_13">
     </a>
     1. 以管理员身份运行 PowerShell
    </h4>
    <p>
     右键点击 PowerShell 图标，选择 以管理员身份运行。
    </p>
    <h4>
     <a id="2__15">
     </a>
     2. 执行安装命令
    </h4>
    <p>
     在 PowerShell 中输入：
    </p>
    <pre><code class="prism language-bash">Set-ExecutionPolicy Bypass <span class="token parameter variable">-Scope</span> Process <span class="token parameter variable">-Force</span>
<span class="token punctuation">[</span>System.Net.ServicePointManager<span class="token punctuation">]</span>::SecurityProtocol <span class="token operator">=</span> <span class="token punctuation">[</span>System.Net.ServicePointManager<span class="token punctuation">]</span>::SecurityProtocol <span class="token parameter variable">-bor</span> <span class="token number">3072</span>
iex <span class="token variable"><span class="token punctuation">((</span>New<span class="token operator">-</span>Object System.Net.WebClient<span class="token punctuation">)</span>.DownloadString<span class="token punctuation">(</span>'https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>chocolatey.org<span class="token operator">/</span>install.ps1'<span class="token punctuation">))</span></span>
</code></pre>
    <p>
     或
    </p>
    <pre><code class="prism language-bash">Set-ExecutionPolicy Bypass <span class="token parameter variable">-Scope</span> Process -Force<span class="token punctuation">;</span> <span class="token punctuation">[</span>System.Net.ServicePointManager<span class="token punctuation">]</span>::SecurityProtocol <span class="token operator">=</span> <span class="token punctuation">[</span>System.Net.ServicePointManager<span class="token punctuation">]</span>::SecurityProtocol <span class="token parameter variable">-bor</span> <span class="token number">3072</span><span class="token punctuation">;</span> iex <span class="token variable"><span class="token punctuation">((</span>New<span class="token operator">-</span>Object System.Net.WebClient<span class="token punctuation">)</span>.DownloadString<span class="token punctuation">(</span>'https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>community.chocolatey.org<span class="token operator">/</span>install.ps1'<span class="token punctuation">))</span></span>
</code></pre>
    <ul>
     <li>
      此命令会绕过执行策略并安装 Chocolatey。
     </li>
    </ul>
    <h4>
     <a id="3__27">
     </a>
     3. 验证安装
    </h4>
    <p>
     输入 choco -v 或 choco --version，应显示版本号。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/93e13764702c47adb24bde3c8d085497.png">
      <br/>
      <strong>
       其他的choco命令在文章末尾有 使用例子
      </strong>
     </img>
    </p>
    <h3>
     <a id="_3_choco__mkcert_31">
     </a>
     步骤 3：使用 choco 安装 mkcert
    </h3>
    <h4>
     <a id="1__mkcert_32">
     </a>
     1. 安装 mkcert
    </h4>
    <p>
     在 PowerShell（管理员）中运行：
    </p>
    <pre><code class="prism language-bash">choco <span class="token function">install</span> mkcert
</code></pre>
    <ul>
     <li>
      按提示输入 Y 确认安装。
     </li>
    </ul>
    <h4>
     <a id="2__38">
     </a>
     2. 初始化本地证书存储
    </h4>
    <pre><code class="prism language-bash">mkcert <span class="token parameter variable">-install</span>
</code></pre>
    <ul>
     <li>
      此操作会将 mkcert 的根证书添加到系统信任列表，解决浏览器警告。
     </li>
    </ul>
    <h3>
     <a id="_4_44">
     </a>
     步骤 4：为本地开发生成证书
    </h3>
    <h4>
     <a id="1__localhost__45">
     </a>
     1. 生成 localhost 证书
    </h4>
    <pre><code class="prism language-bash">mkcert localhost
</code></pre>
    <ul>
     <li>
      生成两个文件：localhost.pem（证书）和 localhost-key.pem（私钥）。
     </li>
     <li>
      也可以将两个文件放入一个文件夹下，比如创建http_ssl文件夹，然后目录切换到改文件夹执行mkcert命令
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/90c4df940bf246349dd2cc7a3641d161.png"/>
     </li>
    </ul>
    <h3>
     <a id="_5_Vue__HTTPS_54">
     </a>
     步骤 5：配置 Vue 项目使用 HTTPS
    </h3>
    <h4>
     <a id="1__55">
     </a>
     1. 项目配置
    </h4>
    <h5>
     <a id="1_vuecli_vueconfigjs_56">
     </a>
     1. vue-cli修改 vue.config.js
    </h5>
    <p>
     在项目根目录创建或修改 vue.config.js，添加以下内容：
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"localhost-key.pem"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"localhost.pem"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// port: 8080 // 可选，指定端口</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="2_viteviteconfigjs_72">
     </a>
     2. vite修改vite.config.js
    </h5>
    <p>
     在项目根目录创建或修改 vite.config.js，添加以下内容：
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'fs'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineConfig<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> command<span class="token punctuation">,</span> mode <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			 <span class="token comment">// 'https_ssl/localhost-key.pem' 为第四步生产localhost-key.pem文件的位置</span>
		      <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'https_ssl/localhost-key.pem'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		      <span class="token comment">// 'https_ssl/localhost.pem' 为第四步生产localhost.pem文件的位置</span>
		      <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'https_ssl/localhost.pem'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		    <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="2__Vue__92">
     </a>
     2. 重启 Vue 开发服务器
    </h4>
    <pre><code class="prism language-bash"><span class="token function">npm</span> run serve
</code></pre>
    <h4>
     <a id="3__HTTPS__96">
     </a>
     3. 访问 HTTPS 地址
    </h4>
    <p>
     打开浏览器访问：（端口和localhost 根据项目运行ip和端口修改）
     <br/>
     https://localhost:8080
    </p>
    <ul>
     <li>
      浏览器应显示安全锁图标（无警告）。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_103">
     </a>
     常见问题解决
    </h3>
    <h4>
     <a id="1_choco__104">
     </a>
     1. choco 安装失败
    </h4>
    <ul>
     <li>
      确保使用管理员权限运行 PowerShell。
     </li>
     <li>
      检查网络是否允许下载脚本（某些企业网络可能拦截）。
     </li>
    </ul>
    <h4>
     <a id="2__108">
     </a>
     2. 证书生成路径错误
    </h4>
    <ul>
     <li>
      确认 localhost.pem 和 localhost-key.pem 在项目根目录。
     </li>
     <li>
      如果文件在其他位置，修改 vue(vite).config.js 中的路径。
     </li>
    </ul>
    <h4>
     <a id="3__112">
     </a>
     3. 浏览器仍提示不安全
    </h4>
    <ul>
     <li>
      确保运行了 mkcert -install。
     </li>
     <li>
      重启浏览器或清除缓存。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="__117">
     </a>
     步骤总结: 完整流程总结
    </h3>
    <ol>
     <li>
      安装 Chocolatey（如未安装）。
     </li>
     <li>
      通过 choco 安装 mkcert。
     </li>
     <li>
      生成并信任本地证书。
     </li>
     <li>
      配置 Vue 项目使用证书。
     </li>
     <li>
      启动 HTTPS 服务。
     </li>
    </ol>
    <p>
     通过以上步骤，即可在 Windows 上安全地通过 HTTPS 运行 Vue 项目。
    </p>
    <h3>
     <a id="_choco__126">
     </a>
     扩展：使用 choco 命令
    </h3>
    <p>
     安装 Chocolatey 后，你可以使用 choco 命令来安装、更新和管理软件包。
    </p>
    <h4>
     <a id="_128">
     </a>
     常用命令：
    </h4>
    <h5>
     <a id="_129">
     </a>
     安装软件包：
    </h5>
    <pre><code class="prism language-bash">choco <span class="token function">install</span> <span class="token operator">&lt;</span>package-name<span class="token operator">&gt;</span>
</code></pre>
    <p>
     例如，安装 git：
    </p>
    <pre><code class="prism language-bash">choco <span class="token function">install</span> <span class="token function">git</span>
</code></pre>
    <h5>
     <a id="_137">
     </a>
     升级软件包：
    </h5>
    <pre><code class="prism language-bash">choco upgrade <span class="token operator">&lt;</span>package-name<span class="token operator">&gt;</span>
</code></pre>
    <h5>
     <a id="_141">
     </a>
     卸载软件包：
    </h5>
    <pre><code class="prism language-bash">choco uninstall <span class="token operator">&lt;</span>package-name<span class="token operator">&gt;</span>
</code></pre>
    <h5>
     <a id="_145">
     </a>
     搜索软件包：
    </h5>
    <pre><code class="prism language-bash">choco search <span class="token operator">&lt;</span>keyword<span class="token operator">&gt;</span>
</code></pre>
    <h5>
     <a id="_149">
     </a>
     列出已安装的软件包：
    </h5>
    <pre><code class="prism language-bash">choco list --local-only
</code></pre>
    <h4>
     <a id="_OpenSSL_153">
     </a>
     示例：安装 OpenSSL
    </h4>
    <p>
     如果你需要安装 OpenSSL（例如用于生成 SSL 证书），可以使用以下命令：
    </p>
    <pre><code class="prism language-bash">choco <span class="token function">install</span> openssl
</code></pre>
    <p>
     安装完成后，你可以通过以下命令验证是否安装成功：
    </p>
    <pre><code class="prism language-bash">openssl version
</code></pre>
    <h4>
     <a id="_Chocolatey_162">
     </a>
     更新 Chocolatey
    </h4>
    <p>
     如果需要更新 Chocolatey 本身，可以运行以下命令：
    </p>
    <pre><code class="prism language-bash">choco upgrade chocolatey
</code></pre>
    <h4>
     <a id="_Chocolatey_167">
     </a>
     卸载 Chocolatey
    </h4>
    <p>
     如果你不再需要 Chocolatey，可以通过以下命令卸载：
    </p>
    <pre><code class="prism language-bash">choco uninstall chocolatey
</code></pre>
    <h4>
     <a id="_172">
     </a>
     注意事项
    </h4>
    <ul>
     <li>
      Chocolatey 默认会将软件包安装到 C:\ProgramData\chocolatey\lib 目录。
     </li>
     <li>
      安装某些软件包时，可能需要管理员权限。
     </li>
     <li>
      如果你在使用 choco 命令时遇到问题，可以尝试以管理员身份运行 PowerShell 或 CMD。
     </li>
    </ul>
    <hr/>
    <p>
     通过 Chocolatey，你可以更方便地管理和安装 Windows 上的软件包，包括开发工具、实用程序等。如果你经常在 Windows 上开发，Chocolatey 是一个非常实用的工具。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6a61736f6e5f72656e79752f:61727469636c652f64657461696c732f313436323337363036" class_="artid" style="display:none">
 </p>
</div>


