---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333938303534372f:61727469636c652f64657461696c732f313436313231333637"
layout: post
title: "JavaWeb学习HTTP协议"
date: 2025-03-08 19:53:32 +08:00
description: "介绍了http协议的工作原理、特点、发展历程、请求和响应报文、响应状态码"
keywords: "JavaWeb学习——HTTP协议"
categories: ['Javaweb']
tags: ['网络协议', '学习', 'Javaweb', 'Java', 'Http']
artid: "146121367"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146121367
    alt: "JavaWeb学习HTTP协议"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146121367
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146121367
cover: https://bing.ee123.net/img/rand?artid=146121367
image: https://bing.ee123.net/img/rand?artid=146121367
img: https://bing.ee123.net/img/rand?artid=146121367
---

# JavaWeb学习——HTTP协议

## HTTP 协议

### 什么是 HTTP 协议

HTTP（
**超文本传输协议**
，HyperText Transfer Protocol）是用于在
**客户端**
（如浏览器）和
**服务器**
之间传输超文本（如网页、图片、视频等）的
**应用层协议**
。它是现代互联网数据通信的基础，支持从 Web 服务器传输超文本到本地浏览器的传送协议，几乎所有网页和应用都依赖 HTTP 进行交互。

### HTTP 工作原理

HTTP 遵循请求-响应模型，客户端（通常是 Web 浏览器）发送一个 HTTP 请求到服务器，服务器处理该请求后返回一个 HTTP 响应给客户端。这个过程可以概括为以下几个步骤：

1. **建立连接**
   ：客户端与服务器之间通过 TCP/IP 建立连接。在 HTTP/1.1之前，每个请求都需要重新建立连接；而 HTTP/1.1引入了持久连接，允许在一个 TCP 连接上传输多个请求和响应。
2. **发送请求消息**
   ：客户端向服务器发送请求消息，这通常包括请求行（指定请求方法如 GET、POST 等，请求的 URL 以及 HTTP 版本）、请求头部（提供关于请求的元数据，例如浏览器类型、接受的内容类型等）以及可选的请求体（对于 POST 请求，它包含要发送的数据）。
3. **处理请求并发送响应消息**
   ：服务器接收到请求后进行处理，并返回一个 HTTP 响应消息给客户端。响应消息包含状态行（显示 HTTP 版本、状态码及描述短语）、响应头部（提供关于响应的元数据，如内容类型、长度等）和响应体（所请求的内容，如HTML文档、图片等）。
4. **关闭或保持连接**
   ：根据使用的 HTTP 版本和配置，连接可能会被立即关闭或保持打开以供后续请求使用。

### HTTP 特点

* **无状态性**
  ：HTTP 本身是无状态协议，即每个请求都是独立的，服务器不会保存客户端的状态信息。然而，通过使用 Cookies、Session 等技术可以在一定程度上实现有状态的交互。
* **简单快速**
  ：客户端向服务器请求服务时，只需提供请求方法和路径即可，因此 HTTP 协议简单且高效。
* **灵活**
  ：HTTP 允许传输任意类型的数据对象，通过 Content-Type 标记来指示数据的类型。
* **安全性**
  ：尽管 HTTP 本身并不安全，但可以通过 SSL/TLS 加密升级为 HTTPS，从而确保数据的安全传输。

### HTTP 的发展历程

#### HTTP/0.9

蒂姆伯纳斯李是一位英国计算机科学家，也是万维网的发明者。他在1989年创建了单行 HTTP 协议，它只是返回一个网页，这个协议在1991年被命名为 HTTP/0.9。

#### HTTP/1.0

1996年，HTTP/1.0 发布。该规范是显著扩大，并且支持三种请求方法：get，head 和 post。

HTTP/1.0 相对于 HTTP/0.9 的改进如下：

* 每个请求都附加了 HTTP 版本。
* 在响应开始时发送状态代码。
* 请求和响应都包含 HTTP 报文头。
* 内容类型能够传输 HTTP 文件以外的文档。

但是，HTTP/1.0 不是官方标准。

#### HTTP/1.1

HTTP 的第一个标准化版本 HTTP/1.1 （RFC 2068）于1997年初发布，支持七种请求方法：options，get，head，post，put，delete 和 trace。

HTTP/1.1 是 HTTP/1.0 的增强：

* 虚拟主机允许从单个 IP 地址提供多个域。
* 持久连接和流水线连接允许 Web 浏览器通过单个持久连接发送多个请求。
* 缓存支持节省了宽带并使响应速度更快。

HTTP/1.1 在接下来的15年左右非常稳定。

在此期间，出现了 HTTPS（安全超文本传输协议）。它是使用 SSL/TLS 进行安全加密通信的 HTTP 的安全版本。

#### HTTP/2

由 IETF 在2015年发布，HTTP/2 旨在提高 web 性能，减少延迟，增加安全性，使 web 应用更加快速、高效和可靠。

* 多路复用：HTTP/2 允许同时发送多个请求和响应，而不是像 HTTP/1.1 一样只能一个一个地处理，这样可以减少延迟，提高效率，提高网络吞吐量。
* 二进制传输：HTTP/2 使用二进制协议，与 HTTP/1.1 使用的文本协议不同，二进制协议可以更快地解析，更有效地传输数据，减少了传输过程中的开销和延迟。
* 头部压缩：HTTP/2 使用 HPACK 算法对 HTTP 头部进行压缩，减少了头部传输的数据量，从而减少了网络延迟。
* 服务器推送：HTTP/2 支持服务器推送，允许服务器在客户端请求之前推送资源，以提高性能。
* 改进的安全性：HTTP/2 默认使用 TLS（Transport Layer Security）加密传输数据，提高了安全性。
* 兼容 HTTP/1.1：HTTP/2 可以与 HTTP/1.1 共存，服务器可以同时支持 HTTP/1.1 和 HTTP/2，如果客户端不支持 HTTP/2，服务器可以回退到 HTTP/1.1。

#### HTTP/3

于2021年5月27日发布，HTTP/3 是一种新的、快速、可靠以及安全的协议，适用于所有形式的设备。HTTP/3 没有使用 TCP，而是使用谷歌在2012年开发的新协议 QUIC。

HTTP/3 是继 HTTP/1.1 和 HTTP/2 之后的第三次重大修订。

HTTP/3 带来了革命性的变化，以提高 web 性能和安全性，设置 HTTP/3 网站需要服务器和浏览器支持。

目前，谷歌云、Cloudflare 和 Fastly 支持 HTTP/3。Chrome、Firefox、Edge、Opera 和一些移动浏览器支持 HTTP/3。

### 请求和响应报文

#### 报文的格式

主体上分为报文首部和报文主体，中间空行隔开。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/cec52f4ee7c94631bcc9e262681abb5e.png#pic_center)

报文首部可以继续细分为“行”和“头”。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/e983492aa02147c488143e994c6c949b.png#pic_center)

#### 请求报文

客户端发送给服务端的报文。

##### 请求报文格式

* 请求首行（
  **请求行**
  ）；GET/POST 资源路径?参数 HTTP/1.1
* 请求头信息（
  **请求头**
  ）。
* 空行。
* 请求体；
  **POST请求才有请求体**
  。

> 浏览器按住F12可以打开浏览器的开发者工具，点击网络就可以查看请求数据包

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/d5d059180b1140438d9c0b8148ada6ff.png#pic_center)

##### form 表单发送 get 请求特点

* 由于请求参数在请求首行中已经携带了，所以没有请求体，也没有请求空行。
* 请求参数拼接在 url 地址中，地址栏可见
  `url?key1=value1&key2=value2`
  ，不安全。
* 参数在地址栏中携带，有大小限制（一般限制为4k），只能携带纯文本。
* get 请求参数只能上传文本数据。
* 没有请求体，所以封装和解析快，效率高，浏览器默认提交的请求都是 get 请求，例如：地址栏输入回车，超链接，表单默认的提交方式等。

##### 查看 get 请求行、请求头、请求体

* 请求行组成部分：
  + 请求方式 get
  + 访问服务器的资源路径?参数1=值1&参数2=值2……
  + 协议/版本，例如：HTTP/1.1

```
GET /05_web_tomcat/login_success.html?username=admin&password=123456 HTTP/1.1

```

* 请求头：

  + `Host`
    ：主机虚拟地址。
  + `Connection`
    ：控制网络连接，值为
    `keep-alive`
    时为长连接。
  + `Upgrade-Insecure-Requests`
    ：请求协议的自动升级（HTTP 的请求，如果服务器是 HTTPS 的，浏览器会自动将请求协议升级为 HTTPS）。
  + `User-Agent`
    ：用户系统信息。
  + `Accept`
    ：浏览器支持的文件类型。
  + `Referer`
    ：当前页面的上一个页面的路径。
  + `Accept-Encoding`
    ：浏览器支持的压缩格式。
  + `Accept-Language`
    ：浏览器支持的语言。
* 请求空行
* 请求体

  + get 请求数据不放在请求体里。

##### form 表单发送 post 请求特点

* post 请求有请求体，而 get 请求没有请求体。
* post 请求数据在请求体中携带，请求体数据大小没有限制，可以用来上传所有内容（文件、文本等）。
* 只能使用 post 请求上传文件。
* post 请求报文多路和请求体相关的配置（请求头）。
* 地址栏参数不可见，相对安全。
* post 效率比 get 低。
* post 请求要求将 form 标签的 method 属性设置为 post。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/7bcd27a43395437195b4597f034d649e.png#pic_center)

##### 查看 post 请求行、请求头、请求体

* 请求行组成部分：

  + 请求方式 post
  + 访问服务器的资源路径
  + 协议/版本，例如：HTTP/1.1

```
POST /05_web_tomcat/login_success.html HTTP/1.1

```

* 请求头
* 请求空行
* 请求体

```
username=admin&password=123456

```

#### 响应报文

服务端返回给客户端的报文。

##### 响应报文格式

* 响应首行（
  **响应行**
  ）：协议/版本 状态码 状态码描述。
* 响应头信息（
  **响应头**
  ）。
* 空行。
* 响应体。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/544d1e5f430e4e44a470d3212395e20d.png#pic_center)

* 响应行组成部分
  + 协议/版本 HTTP/1.1
  + 响应状态码
  + 状态描述 OK （缺省）

```
HTTP/1.1 200 OK

```

* 响应头
  + `Server`
    ：服务器的版本信息。
  + `Accept-Ranges`
    ：客户端服务器是否允许范围请求，即客户端可以请求资源的某个部分而不是整个资源，值为
    `bytes`
    时，表示服务器支持按字节范围请求资源。
  + `Content-Type`
    ：响应体数据的类型。
  + `Content-Length`
    ：响应体内容的字节数。
  + `Date`
    ：响应的时间。
  + `Last-Mondified`
    ：提供文档最后修改的时间，可用于验证缓存的有效性。
* 响应体

> 常见的响应状态码

* 200：请求成功，浏览器会把响应体内容（通常为 html）显示在浏览器中。
* 302：重定向，表示服务器要求浏览器重新再发一个请求，服务器会发送一个响应头 Location 指定新请求的 url 地址。
* 304：使用了本地缓存。
* 404：请求的资源没有找到，说明客户端错误的请求了不存在的资源。
* 405：请求的方法不允许。
* 500：请求资源找到了，但服务器内部出现了错误。

### 响应的状态码

HTTP 响应状态码是服务器对客户端请求的响应结果的一种标准化表示，它由三位数字组成，分为五类，每类都有一个共同的起始数字，具体如下：

1. **1xx（信息性状态码）**
   ：指示请求已接收，继续处理。
   * `100 Continue`
     ：表明请求的初始部分已经被接收，客户端应继续发送剩余部分。
   * `101 Switching Protocols`
     ：服务器根据客户端的请求切换协议。
2. **2xx（成功状态码）**
   ：表示请求已被成功接收、理解和接受。
   * `200 OK`
     ：标准的成功响应，表明请求成功并且信息包含在响应中。
   * `201 Created`
     ：请求成功且服务器创建了新的资源。
   * `204 No Content`
     ：请求成功但响应报文中不包含实体的主体部分。
3. **3xx（重定向状态码）**
   ：需要采取进一步操作以完成请求。
   * `301 Moved Permanently`
     ：请求的资源已被永久移动到新位置，并且未来对该资源的任何引用都应该使用本响应返回的URI。
   * `302 Found`
     ：与301类似，但是它是临时性的重定向。
   * `304 Not Modified`
     ：如果客户端执行了条件 GET 请求且该页面自上次访问以来未被修改，则服务器会返回此状态码。
4. **4xx（客户端错误状态码）**
   ：请求包含语法错误或无法完成请求。
   * `400 Bad Request`
     ：服务器无法理解请求的格式，客户端应当修改请求后再试。
   * `401 Unauthorized`
     ：当前请求需要用户验证。
   * `403 Forbidden`
     ：服务器理解请求但拒绝执行。
   * `404 Not Found`
     ：请求的资源在服务器上不存在。
   * `405 Method Not Allowed`
     ：请求方法对指定资源不适用。
5. **5xx（服务器错误状态码）**
   ：服务器遇到错误，无法完成有效请求。
   * `500 Internal Server Error`
     ：服务器遇到了未知情况，阻止了它完成请求。
   * `501 Not Implemented`
     ：服务器不具备完成请求的功能。例如，服务器既不识别请求方法也不支持其对应的资源类型。
   * `502 Bad Gateway`
     ：作为网关或代理工作的服务器尝试执行请求时，从上游服务器接收到无效响应。
   * `503 Service Unavailable`
     ：由于临时维护或者过载，服务器当前无法处理请求。
   * `504 Gateway Timeout`
     ：作为网关或代理工作的服务器未能及时从上游服务器获得响应。

每个状态码都提供了关于请求过程中的特定信息，帮助开发人员和系统管理员诊断问题并优化应用性能。理解这些状态码对于有效的 Web 开发至关重要。