---
layout: post
title: "Vue3Fragment"
date: 2025-03-09 09:06:46 +0800
description: "Vue 3 的​Fragment特性通过支持多根组件，解决了 Vue 2 的单根限制问题，使代码更简洁、结构更灵活。需要严格 HTML 语义的结构（如表格、列表）。减少冗余 DOM 层级以优化性能。动态布局和条件渲染多元素。使用时需注意属性继承、过渡动画等细节，结合 Vue 3 的其他特性（如 v-bind=“$attrs”、provide/inject）可充分发挥其优势。"
keywords: "Vue3——Fragment"
categories: ['Vue']
tags: ['前端框架', '前端', 'Vue', 'Javascript']
artid: "146111436"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146111436
    alt: "Vue3Fragment"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146111436
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146111436
cover: https://bing.ee123.net/img/rand?artid=146111436
image: https://bing.ee123.net/img/rand?artid=146111436
img: https://bing.ee123.net/img/rand?artid=146111436
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Vue3——Fragment
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="Fragment_2">
     </a>
     一、Fragment的核心意义
    </h2>
    <h3>
     <a id="1_Vue2_3">
     </a>
     1. 解决Vue2的单根限制问题
    </h3>
    <ul>
     <li>
      <strong>
       Vue 2 的限制：
      </strong>
      每个组件模板必须有且仅有一个根元素。若需要多个同级元素，必须用一个
      <div>
       或 包裹，导致冗余的 DOM 层级。
      </div>
     </li>
     <li>
      ​
      <strong>
       Vue 3 的改进：
      </strong>
      支持多根组件，直接在模板中编写多个根级元素，无需包裹容器。
     </li>
    </ul>
    <h3>
     <a id="2__DOM__7">
     </a>
     2. 减少不必要的 DOM 嵌套
    </h3>
    <p>
     **示例: ** 在Vue2中，以下代码会报错：
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>templete</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>templete</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     必须改为：
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>templete</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>templete</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <strong>
      Vue3的 Fragment:
     </strong>
     直接允许上述写法（多根的写法），减少一层
    </p>
    <div>
     ，提升性能和代码简洁性
    </div>
    <p>
    </p>
    <h3>
     <a id="3__27">
     </a>
     3. 语义化和结构化
    </h3>
    <p>
     <strong>
      严格 HTML 结构场景：
     </strong>
     例如在
     <code>
      &lt;table&gt;、&lt;ul&gt;
     </code>
     等标签内部，直接渲染
     <code>
      &lt;tr&gt;、&lt;li&gt;
     </code>
     等子元素，避免包裹元素破坏语义。
    </p>
    <h2>
     <a id="Fragment__30">
     </a>
     二、Fragment 的实现原理
    </h2>
    <p>
     Vue 3 通过 ​
     <strong>
      虚拟 DOM 的改进
     </strong>
     支持多根节点：
    </p>
    <ol>
     <li>
      <strong>
       虚拟节点（VNode）的扁平化
      </strong>
      <br/>
      Vue 3 的编译器会将多个根级元素编译为一个 ​片段虚拟节点​（Fragment VNode），在渲染时自动处理为同级 DOM 节点。
     </li>
     <li>
      <strong>
       Patch算法的优化
      </strong>
      <br/>
      Diff 算法能够识别并高效更新多个根节点，不会因多根结构导致性能下降。
     </li>
    </ol>
    <h2>
     <a id="Fragment__38">
     </a>
     三、Fragment 使用方式
    </h2>
    <h3>
     <a id="1__40">
     </a>
     1. 基本用法
    </h3>
    <p>
     直接在模板中编写多个根元素：
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>内容段落 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>内容段落 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h3>
     <a id="2__49">
     </a>
     2. 结合条件渲染
    </h3>
    <p>
     通过 v-if 和 v-else 控制多根元素的显示：
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isLoading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>加载中...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DataChart</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DataTable</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h3>
     <a id="3__61">
     </a>
     3. 动态组件
    </h3>
    <p>
     多根组件可以与
     <code>
      &lt;component :is&gt;
     </code>
     结合使用：
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ComponentA</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dynamicComponent<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h2>
     <a id="_70">
     </a>
     四、实际应用场景
    </h2>
    <h3>
     <a id="1__72">
     </a>
     1. 列表/表格组件
    </h3>
    <p>
     场景：渲染多个
    </p>
    <ul>
     <li>
      或 ，无需包裹元素。
     </li>
     <li>
      <p>
      </p>
      <pre><code class="prism language-html"><span class="token comment">&lt;!-- ListGroup.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
      <h3>
       <a id="2__85">
       </a>
       2. 布局组件
      </h3>
      <p>
       场景：并排显示侧边栏和主内容。
      </p>
      <pre><code class="prism language-html"><span class="token comment">&lt;!-- Layout.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Sidebar</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MainContent</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
      <h3>
       <a id="3__96">
       </a>
       3. 语义化标签
      </h3>
      <p>
       场景：避免破坏 HTML 语义结构。
      </p>
      <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>页眉<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>主体内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>页脚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
      <h2>
       <a id="_107">
       </a>
       五、注意事项
      </h2>
      <h3>
       <a id="1__109">
       </a>
       1. 属性继承问题
      </h3>
      <ul>
       <li>
        <strong>
         问题：
        </strong>
        多根组件不会自动集成父组件传递的
        <code>
         class
        </code>
        、
        <code>
         style
        </code>
        或自定义属性。
       </li>
       <li>
        <strong>
         解决方案：
        </strong>
        显示绑定
        <code>
         $attr
        </code>
        到特定子元素。
       </li>
      </ul>
      <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$attrs<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- 继承属性 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AnotherComponent</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
      <h3>
       <a id="2__120">
       </a>
       2. 过渡动画的限制
      </h3>
      <ul>
       <li>
        <strong>
         问题：
        </strong>
        <code>
         &lt;transition&gt;
        </code>
        或
        <code>
         &lt;keep-alive&gt;
        </code>
        需要单根元素才能生效。
       </li>
       <li>
        <strong>
         解决方案：
        </strong>
        包裹一层
        <code>
         &lt;transition&gt;
        </code>
        或改用 CSS 动画。
       </li>
      </ul>
      <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>单根元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
      <h3>
       <a id="3__132">
       </a>
       3. 响应式数据
      </h3>
      <ul>
       <li>
        <strong>
         问题：
        </strong>
        多个根元素间共享响应式数据时，需通过
        <code>
         provide/inject
        </code>
        或全局状态管理（如
        <code>
         Pinia
        </code>
        ）。
       </li>
      </ul>
      <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref<span class="token punctuation">,</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ComponentA</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ComponentB</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre>
      <h2>
       <a id="_147">
       </a>
       六、与其他框架对比
      </h2>
      <h3>
       <a id="1_React__Fragment_148">
       </a>
       1. ​React 的 Fragment
      </h3>
      <ul>
       <li>
        <strong>
         相似性：
        </strong>
        React 通过
        <code>
         &lt;React.Fragment&gt;
        </code>
        或
        <code>
         &lt;&gt;...&lt;/&gt;
        </code>
        语法支持多根节点。
       </li>
       <li>
        ​
        <strong>
         差异：
        </strong>
        Vue 3 的
        <code>
         Fragment
        </code>
        是隐式的，无需手动声明。
       </li>
      </ul>
      <h3>
       <a id="2_Vue_2__template__151">
       </a>
       2. ​Vue 2 的 标签
      </h3>
      <ul>
       <li>
        ​
        <strong>
         Vue 2：
        </strong>
        使用 包裹多元素，但不会渲染为 DOM 节点。
       </li>
       <li>
        <strong>
         Vue 3：
        </strong>
        直接支持多根元素，行为更直观。
       </li>
      </ul>
      <h2>
       <a id="_155">
       </a>
       七、性能影响
      </h2>
      <ul>
       <li>
        <strong>
         无额外开销：
        </strong>
        <code>
         Fragment
        </code>
        在虚拟 DOM 层处理，不会增加实际 DOM 节点。
       </li>
       <li>
        <strong>
         ​优化场景：
        </strong>
        减少冗余的包裹元素，可能提升渲染性能。
       </li>
      </ul>
      <h2>
       <a id="_159">
       </a>
       八、总结
      </h2>
      <p>
       Vue 3 的
       <code>
        ​Fragment
       </code>
       特性通过支持多根组件，解决了 Vue 2 的单根限制问题，使代码更简洁、结构更灵活。它在以下场景中尤其有用：
      </p>
      <ul>
       <li>
        需要严格 HTML 语义的结构（如表格、列表）。
       </li>
       <li>
        减少冗余 DOM 层级以优化性能。
       </li>
       <li>
        动态布局和条件渲染多元素。
        <br/>
        使用时需注意属性继承、过渡动画等细节，结合 Vue 3 的其他特性（如 v-bind=“$attrs”、provide/inject）可充分发挥其优势。
       </li>
      </ul>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f37343131343431372f:61727469636c652f64657461696c732f313436313131343336" class_="artid" style="display:none">
 </p>
</div>


