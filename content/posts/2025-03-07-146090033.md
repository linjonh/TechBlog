---
layout: post
title: "Centos7安装nginx"
date: 2025-03-07 13:06:21 +0800
description: "nginx 不仅支持 http 协议，还支持 https（即在ssl协议上传输http），所以需要在 Centos 安装 OpenSSL 库。#pcre是一个perl库，包括perl兼容的正则表达式库，nginx的http模块使用pcre来解析正则表达式，所以需要安装pcre库。#zlib库提供了很多种压缩和解压缩方式nginx使用zlib对http包的内容进行gzip，所以需要安装。#安装 nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境。如果运行中就kill -9 进程ID。"
keywords: "Centos7安装nginx"
categories: ['未分类']
tags: ['运维', '服务器', 'Linux']
artid: "146090033"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146090033
    alt: "Centos7安装nginx"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146090033
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146090033
cover: https://bing.ee123.net/img/rand?artid=146090033
image: https://bing.ee123.net/img/rand?artid=146090033
img: https://bing.ee123.net/img/rand?artid=146090033
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Centos7安装nginx
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     检查是否安装过
    </p>
    <p>
     <img alt="" height="169" src="https://i-blog.csdnimg.cn/direct/8294c5e4a636496289fb7ddf05d4174f.png" width="1047"/>
    </p>
    <p>
     <img alt="" height="95" src="https://i-blog.csdnimg.cn/direct/32accadfaec142e293b04a0dbf3e0ea9.png" width="1047"/>
    </p>
    <p>
     如果运行中就kill -9 进程ID
    </p>
    <p>
     如果存在就rm -rf 文件名
    </p>
    <ul>
     <li>
      安装依赖
     </li>
    </ul>
    <blockquote>
     <p>
      #安装 nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境
      <br/>
      yum install gcc-c++
     </p>
     <p>
      <br/>
      #pcre是一个perl库，包括perl兼容的正则表达式库，nginx的http模块使用pcre来解析正则表达式，所以需要安装pcre库
      <br/>
      yum install -y pcre pcre-devel
     </p>
     <p>
      <br/>
      #zlib库提供了很多种压缩和解压缩方式nginx使用zlib对http包的内容进行gzip，所以需要安装
      <br/>
      yum install -y zlib zlib-devel
     </p>
     <p>
      <br/>
      #nginx 不仅支持 http 协议，还支持 https（即在ssl协议上传输http），所以需要在 Centos 安装 OpenSSL 库
      <br/>
      yum install -y openssl openssl-devel
     </p>
    </blockquote>
    <ul>
     <li>
      下载nginx
     </li>
    </ul>
    <p>
     <a href="https://nginx.org/en/download.html" rel="nofollow" title="nginx: download">
      nginx: download
     </a>
    </p>
    <p>
     <img alt="" height="629" src="https://i-blog.csdnimg.cn/direct/871fe249ccbd4a89920d8a675235680b.png" width="603"/>
    </p>
    <p>
     通过SSH工具上传
    </p>
    <p>
     或者直接wget下载，右键复制下载链接
    </p>
    <p>
     <a href="https://nginx.org/download/nginx-1.24.0.tar.gz" rel="nofollow" title="https://nginx.org/download/nginx-1.24.0.tar.gz">
      https://nginx.org/download/nginx-1.24.0.tar.gz
     </a>
    </p>
    <ul>
     <li>
      解压
     </li>
    </ul>
    <p>
     tar -zxvf nginx-1.24.0.tar.gz
    </p>
    <p>
     进入根目录，配置安装目录
    </p>
    <p>
     make /nginx
    </p>
    <p>
     ./configure --prefix=/nginx
    </p>
    <ul>
     <li>
      编译安装
     </li>
    </ul>
    <p>
     先编译make，再安装make install
    </p>
    <ul>
     <li>
      开放端口
     </li>
    </ul>
    <p>
     firewall-cmd --zone=public --add-port=80/tcp --permanent
     <br/>
     firewall-cmd --reload
    </p>
    <ul>
     <li>
      启动nginx
     </li>
    </ul>
    <p>
     <img alt="" height="362" src="https://i-blog.csdnimg.cn/direct/e714e393d6824c0b88fa97471f3319d4.png" width="1047"/>
    </p>
    <p>
     <img alt="" height="293" src="https://i-blog.csdnimg.cn/direct/8601a2cd333f47b3bb16073cadcf1cc7.png" width="915"/>
    </p>
    <ul>
     <li>
      配置开机自启
     </li>
    </ul>
    <p>
     vim /etc/systemd/system/nginx.service
    </p>
    <p>
     或者
    </p>
    <p>
     vim /usr/lib/systemd/system/nginx.service
    </p>
    <pre><code>[Unit]
Description=Nginx Server
After=nginx.service

[Service]
User=root
Group=root
Type=forking
ExecStart=/nginx/sbin/nginx -c /nginx/conf/nginx.conf
ExecStop=/nginx/sbin/nginx -s quit
ExecReload=/nginx/sbin/nginx -s reload
Restart=on-failure
PrivateTmp=true

[Install]
WantedBy=multi-user.target
</code></pre>
    <p>
     重载
    </p>
    <p>
     systemctl daemon-reload
     <br/>
     systemctl start nginx.service;ps -ef | grep nginx
     <br/>
     systemctl enable nginx.service
     <br/>
    </p>
    <p>
     用yarn install后yarn build生成dish文件夹，压缩dish为dish.zip，通过ssh工具传到生产环境，通过unzip工具解压到nginx/html
    </p>
    <p>
     然后vim /nginx/conf/nginx/conf（这个路径要看自己的）
    </p>
    <pre><code class="hljs">server {
        listen       8091;
        server_name  localhost;

        #charset koi8-r;
        #开启gizp压缩
        gzip on;
        #&gt;=100字节的文件进行gizp压缩
        gzip_min_length 100;
        #指定允许被压缩的MIME文件类型
        gzip_types text/plain text/css application/xml application/javascript
        #有的客户端不支持gizp压缩，提高兼容性
        gzip_vary on;

        #access_log  logs/host.access.log  main;

        location / {
            root   /nginx/html;
            index  index.html index.htm;
        }
}</code></pre>
    <p>
     开放8091端口，并重启nginx
    </p>
    <p>
     此时就能访问
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f6c6b6c616c6d712f:61727469636c652f64657461696c732f313436303930303333" class_="artid" style="display:none">
 </p>
</div>


