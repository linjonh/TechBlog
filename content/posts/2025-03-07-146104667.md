---
layout: post
title: "青少年编程与数学-02-010-C程序设计基础-30课题操作符重载"
date: 2025-03-07 20:42:30 +0800
description: "本文深入探讨了C++中操作符重载的概念、规则、语法及应用场景。操作符重载允许为自定义类型定义操作符行为，提高代码可读性和简洁性。可重载操作符包括算术、赋值、关系、流、下标和函数调用等，但不能改变操作符的优先级、结合性或操作数个数，也不能创建新操作符。重载形式有成员函数和非成员函数两种。"
keywords: "青少年编程与数学 02-010 C++程序设计基础 30课题、操作符重载"
categories: ['编程与数学', '第02阶段']
tags: ['青少年编程', '编程与数学', '开发语言', 'C']
artid: "146104667"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146104667
    alt: "青少年编程与数学-02-010-C程序设计基础-30课题操作符重载"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146104667
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146104667
cover: https://bing.ee123.net/img/rand?artid=146104667
image: https://bing.ee123.net/img/rand?artid=146104667
img: https://bing.ee123.net/img/rand?artid=146104667
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     青少年编程与数学 02-010 C++程序设计基础 30课题、操作符重载
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <blockquote>
     <p>
      课题摘要:本文深入探讨了C++中操作符重载的概念、规则、语法及应用场景。操作符重载允许为自定义类型定义操作符行为，提高代码可读性和简洁性。可重载操作符包括算术、赋值、关系、流、下标和函数调用等，但不能改变操作符的优先级、结合性或操作数个数，也不能创建新操作符。重载形式有成员函数和非成员函数两种。应用场景涵盖数学运算、容器类、输入输出、比较操作、函数对象、智能指针、自定义迭代器和类型转换等。合理使用操作符重载可使代码更直观、易于维护，但需注意保持语义一致性和避免滥用。
     </p>
    </blockquote>
    <hr/>
    <h2>
     <a id="_6">
     </a>
     一、重载
    </h2>
    <p>
     在C++中，
     <strong>
      重载（Overloading）
     </strong>
     允许在同一作用域内定义多个同名函数或操作符，只要它们的参数列表不同。重载的目的是提高代码的可读性和灵活性。C++支持两种主要的重载形式：
     <strong>
      函数重载
     </strong>
     和
     <strong>
      操作符重载
     </strong>
     。
    </p>
    <hr/>
    <h3>
     <a id="1_Function_Overloading_12">
     </a>
     1. 函数重载（Function Overloading）
    </h3>
    <p>
     函数重载是指在同一作用域内定义多个同名函数，但这些函数的参数列表（参数的类型、数量或顺序）必须不同。
    </p>
    <h4>
     <a id="_16">
     </a>
     规则：
    </h4>
    <ol>
     <li>
      函数名必须相同。
     </li>
     <li>
      参数列表必须不同（类型、数量或顺序）。
     </li>
     <li>
      返回类型可以相同也可以不同，但仅返回类型不同不足以构成重载。
     </li>
    </ol>
    <h4>
     <a id="_21">
     </a>
     注意事项：
    </h4>
    <ul>
     <li>
      如果函数名和参数列表完全相同，仅返回类型不同，会导致编译错误。
     </li>
     <li>
      默认参数可能会影响函数重载的解析，需谨慎使用。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="2_Operator_Overloading_27">
     </a>
     2. 操作符重载（Operator Overloading）
    </h3>
    <p>
     操作符重载允许为用户自定义类型（如类或结构体）定义操作符的行为。通过重载操作符，可以使自定义类型的对象像内置类型一样使用操作符。
    </p>
    <h4>
     <a id="_31">
     </a>
     规则：
    </h4>
    <ol>
     <li>
      只能重载C++中已有的操作符，不能创建新的操作符。
     </li>
     <li>
      至少有一个操作数是用户自定义类型（类或结构体）。
     </li>
     <li>
      不能改变操作符的优先级和结合性。
     </li>
     <li>
      部分操作符不能被重载（如
      <code>
       ::
      </code>
      ,
      <code>
       .*
      </code>
      ,
      <code>
       ?:
      </code>
      ,
      <code>
       sizeof
      </code>
      等）。
     </li>
    </ol>
    <h4>
     <a id="_37">
     </a>
     语法：
    </h4>
    <pre><code class="prism language-cpp">返回类型 <span class="token keyword">operator</span>操作符<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 操作符的实现</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_46">
     </a>
     总结
    </h3>
    <ul>
     <li>
      函数重载和操作符重载是C++中强大的特性，能够提高代码的可读性和灵活性。
     </li>
     <li>
      函数重载通过参数列表的差异实现同名函数的多态性。
     </li>
     <li>
      操作符重载允许为用户自定义类型定义操作符的行为，使其更接近内置类型的使用方式。
     </li>
     <li>
      合理使用重载可以显著提升代码质量，但需注意避免滥用和语义不一致的问题。
     </li>
    </ul>
    <h2>
     <a id="_52">
     </a>
     二、操作符重载
    </h2>
    <p>
     在C++中，
     <strong>
      操作符重载（Operator Overloading）
     </strong>
     允许为用户自定义类型（如类或结构体）定义操作符的行为。通过重载操作符，可以使自定义类型的对象像内置类型一样使用操作符，从而提高代码的可读性和简洁性。
    </p>
    <hr/>
    <h3>
     <a id="1__60">
     </a>
     1. 操作符重载的基本概念
    </h3>
    <h4>
     <a id="_62">
     </a>
     什么是操作符重载？
    </h4>
    <p>
     操作符重载是指为自定义类型定义操作符的行为。例如，可以为自定义的
     <code>
      Complex
     </code>
     类重载
     <code>
      +
     </code>
     操作符，使得两个
     <code>
      Complex
     </code>
     对象可以直接相加。
    </p>
    <h4>
     <a id="_65">
     </a>
     可重载的操作符
    </h4>
    <p>
     C++中大部分操作符都可以重载，但以下操作符
     <strong>
      不能重载
     </strong>
     ：
    </p>
    <ul>
     <li>
      作用域解析操作符
      <code>
       ::
      </code>
     </li>
     <li>
      成员访问操作符
      <code>
       .
      </code>
     </li>
     <li>
      成员指针访问操作符
      <code>
       .*
      </code>
     </li>
     <li>
      条件操作符
      <code>
       ?:
      </code>
     </li>
     <li>
      <code>
       sizeof
      </code>
      操作符
     </li>
     <li>
      <code>
       typeid
      </code>
      操作符
     </li>
    </ul>
    <h4>
     <a id="_74">
     </a>
     操作符重载的两种形式
    </h4>
    <ol>
     <li>
      <strong>
       成员函数形式
      </strong>
      ：将操作符重载为类的成员函数。
     </li>
     <li>
      <strong>
       非成员函数形式
      </strong>
      ：将操作符重载为全局函数（通常声明为类的友元函数）。
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="2__80">
     </a>
     2. 操作符重载的语法
    </h3>
    <h4>
     <a id="_82">
     </a>
     成员函数形式
    </h4>
    <pre><code class="prism language-cpp">返回类型 <span class="token keyword">operator</span>操作符<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 操作符的实现</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_89">
     </a>
     非成员函数形式
    </h4>
    <pre><code class="prism language-cpp">返回类型 <span class="token keyword">operator</span>操作符<span class="token punctuation">(</span>参数<span class="token number">1</span><span class="token punctuation">,</span> 参数<span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 操作符的实现</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="3__98">
     </a>
     3. 常用操作符重载示例
    </h3>
    <h4>
     <a id="1_____100">
     </a>
     (1) 算术操作符重载（
     <code>
      +
     </code>
     ,
     <code>
      -
     </code>
     ,
     <code>
      *
     </code>
     ,
     <code>
      /
     </code>
     ）
    </h4>
    <h5>
     <a id="_102">
     </a>
     成员函数形式
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">double</span> real<span class="token punctuation">;</span>
    <span class="token keyword">double</span> imag<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">double</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">real</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">imag</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 重载 + 操作符</span>
    Complex <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">Complex</span><span class="token punctuation">(</span>real <span class="token operator">+</span> other<span class="token punctuation">.</span>real<span class="token punctuation">,</span> imag <span class="token operator">+</span> other<span class="token punctuation">.</span>imag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重载 - 操作符</span>
    Complex <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">Complex</span><span class="token punctuation">(</span>real <span class="token operator">-</span> other<span class="token punctuation">.</span>real<span class="token punctuation">,</span> imag <span class="token operator">-</span> other<span class="token punctuation">.</span>imag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="_124">
     </a>
     非成员函数形式
    </h5>
    <pre><code class="prism language-cpp">Complex <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> c1<span class="token punctuation">,</span> <span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> c2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">Complex</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">getReal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> c2<span class="token punctuation">.</span><span class="token function">getReal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c1<span class="token punctuation">.</span><span class="token function">getImag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> c2<span class="token punctuation">.</span><span class="token function">getImag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="2__133">
     </a>
     (2) 赋值操作符重载（
     <code>
      =
     </code>
     ）
    </h4>
    <p>
     赋值操作符通常重载为成员函数，用于实现深拷贝。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span><span class="token operator">*</span> data<span class="token punctuation">;</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">size</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重载赋值操作符</span>
    MyArray<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> MyArray<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token operator">&amp;</span>other<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 处理自我赋值</span>

        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span> <span class="token comment">// 释放原有资源</span>
        size <span class="token operator">=</span> other<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> other<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h4>
     <a id="3_____165">
     </a>
     (3) 关系操作符重载（
     <code>
      ==
     </code>
     ,
     <code>
      !=
     </code>
     ,
     <code>
      &lt;
     </code>
     ,
     <code>
      &gt;
     </code>
     ）
    </h4>
    <h5>
     <a id="_167">
     </a>
     成员函数形式
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 重载 == 操作符</span>
    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> x <span class="token operator">==</span> other<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> other<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重载 != 操作符</span>
    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h4>
     <a id="4___190">
     </a>
     (4) 流操作符重载（
     <code>
      &lt;&lt;
     </code>
     ,
     <code>
      &gt;&gt;
     </code>
     ）
    </h4>
    <p>
     流操作符通常重载为非成员函数，并声明为类的友元函数。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">double</span> real<span class="token punctuation">;</span>
    <span class="token keyword">double</span> imag<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">double</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">real</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">imag</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 声明友元函数</span>
    <span class="token keyword">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">friend</span> istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 重载 &lt;&lt; 操作符</span>
ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    os <span class="token operator">&lt;&lt;</span> <span class="token string">"("</span> <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">.</span>real <span class="token operator">&lt;&lt;</span> <span class="token string">" + "</span> <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">.</span>imag <span class="token operator">&lt;&lt;</span> <span class="token string">"i)"</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> os<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 重载 &gt;&gt; 操作符</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter real part: "</span><span class="token punctuation">;</span>
    is <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">.</span>real<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter imaginary part: "</span><span class="token punctuation">;</span>
    is <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
    <span class="token keyword">return</span> is<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="5__226">
     </a>
     (5) 下标操作符重载（
     <code>
      []
     </code>
     ）
    </h4>
    <p>
     下标操作符通常重载为成员函数，用于访问类的内部数组。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span><span class="token operator">*</span> data<span class="token punctuation">;</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">size</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重载 [] 操作符</span>
    <span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> index <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token function">out_of_range</span><span class="token punctuation">(</span><span class="token string">"Index out of range"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h4>
     <a id="6__253">
     </a>
     (6) 函数调用操作符重载（
     <code>
      ()
     </code>
     ）
    </h4>
    <p>
     函数调用操作符重载允许对象像函数一样被调用。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Adder</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Adder add<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出: 7</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="4__274">
     </a>
     4. 操作符重载的限制
    </h3>
    <ol>
     <li>
      <strong>
       不能改变操作符的优先级和结合性
      </strong>
      ：重载的操作符保持原有的优先级和结合性。
     </li>
     <li>
      <strong>
       不能改变操作符的操作数个数
      </strong>
      ：例如，
      <code>
       +
      </code>
      操作符始终是二元操作符。
     </li>
     <li>
      <strong>
       不能创建新的操作符
      </strong>
      ：只能重载C++中已有的操作符。
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="5__282">
     </a>
     5. 操作符重载的最佳实践
    </h3>
    <ol>
     <li>
      <strong>
       保持语义一致性
      </strong>
      ：重载的操作符应保持其原有的语义，避免引起混淆。
     </li>
     <li>
      <strong>
       优先使用成员函数形式
      </strong>
      ：对于需要访问类私有成员的操作符，优先使用成员函数形式。
     </li>
     <li>
      <strong>
       处理自我赋值
      </strong>
      ：在重载赋值操作符时，确保正确处理自我赋值的情况。
     </li>
     <li>
      <strong>
       避免滥用操作符重载
      </strong>
      ：过度使用操作符重载可能导致代码难以理解和维护。
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="6__291">
     </a>
     6. 总结
    </h3>
    <ul>
     <li>
      操作符重载允许为用户自定义类型定义操作符的行为。
     </li>
     <li>
      操作符可以重载为成员函数或非成员函数（通常声明为友元函数）。
     </li>
     <li>
      常用操作符重载包括算术操作符、赋值操作符、关系操作符、流操作符、下标操作符和函数调用操作符。
     </li>
     <li>
      操作符重载应保持语义一致性，并避免滥用。
     </li>
    </ul>
    <p>
     通过合理使用操作符重载，可以使自定义类型的对象更直观、更易于使用。
    </p>
    <h2>
     <a id="_300">
     </a>
     三、应用场景
    </h2>
    <p>
     操作符重载在C++中有广泛的应用场景，主要用于增强代码的可读性、简洁性和直观性。以下是一些常见的应用场景：
    </p>
    <hr/>
    <h3>
     <a id="1__306">
     </a>
     1.
     <strong>
      数学运算
     </strong>
    </h3>
    <p>
     为自定义的数学类型（如复数、矩阵、向量等）重载算术操作符（
     <code>
      +
     </code>
     ,
     <code>
      -
     </code>
     ,
     <code>
      *
     </code>
     ,
     <code>
      /
     </code>
     等），使它们可以像内置类型一样进行运算。
    </p>
    <h4>
     <a id="_309">
     </a>
     示例：复数运算
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">double</span> real<span class="token punctuation">;</span>
    <span class="token keyword">double</span> imag<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">double</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">real</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">imag</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 重载 + 操作符</span>
    Complex <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">Complex</span><span class="token punctuation">(</span>real <span class="token operator">+</span> other<span class="token punctuation">.</span>real<span class="token punctuation">,</span> imag <span class="token operator">+</span> other<span class="token punctuation">.</span>imag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重载 * 操作符</span>
    Complex <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">Complex</span><span class="token punctuation">(</span>real <span class="token operator">*</span> other<span class="token punctuation">.</span>real <span class="token operator">-</span> imag <span class="token operator">*</span> other<span class="token punctuation">.</span>imag<span class="token punctuation">,</span>
                       real <span class="token operator">*</span> other<span class="token punctuation">.</span>imag <span class="token operator">+</span> imag <span class="token operator">*</span> other<span class="token punctuation">.</span>real<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Complex <span class="token function">c1</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Complex <span class="token function">c2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Complex c3 <span class="token operator">=</span> c1 <span class="token operator">+</span> c2<span class="token punctuation">;</span>  <span class="token comment">// 使用重载的 + 操作符</span>
    Complex c4 <span class="token operator">=</span> c1 <span class="token operator">*</span> c2<span class="token punctuation">;</span>  <span class="token comment">// 使用重载的 * 操作符</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="2__342">
     </a>
     2.
     <strong>
      容器类
     </strong>
    </h3>
    <p>
     为自定义的容器类（如动态数组、链表、栈、队列等）重载下标操作符（
     <code>
      []
     </code>
     ），使其可以像数组一样访问元素。
    </p>
    <h4>
     <a id="_345">
     </a>
     示例：动态数组
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span><span class="token operator">*</span> data<span class="token punctuation">;</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">size</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重载 [] 操作符</span>
    <span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> index <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token function">out_of_range</span><span class="token punctuation">(</span><span class="token string">"Index out of range"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    MyArray <span class="token function">arr</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 使用重载的 [] 操作符</span>
    arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="3__376">
     </a>
     3.
     <strong>
      输入输出
     </strong>
    </h3>
    <p>
     为自定义类型重载流操作符（
     <code>
      &lt;&lt;
     </code>
     和
     <code>
      &gt;&gt;
     </code>
     ），使其可以直接通过
     <code>
      cin
     </code>
     和
     <code>
      cout
     </code>
     进行输入输出。
    </p>
    <h4>
     <a id="_379">
     </a>
     示例：复数输入输出
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">double</span> real<span class="token punctuation">;</span>
    <span class="token keyword">double</span> imag<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">double</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">real</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">imag</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 声明友元函数</span>
    <span class="token keyword">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">friend</span> istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 重载 &lt;&lt; 操作符</span>
ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    os <span class="token operator">&lt;&lt;</span> <span class="token string">"("</span> <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">.</span>real <span class="token operator">&lt;&lt;</span> <span class="token string">" + "</span> <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">.</span>imag <span class="token operator">&lt;&lt;</span> <span class="token string">"i)"</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> os<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 重载 &gt;&gt; 操作符</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> Complex<span class="token operator">&amp;</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter real part: "</span><span class="token punctuation">;</span>
    is <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">.</span>real<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter imaginary part: "</span><span class="token punctuation">;</span>
    is <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
    <span class="token keyword">return</span> is<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Complex c<span class="token punctuation">;</span>
    cin <span class="token operator">&gt;&gt;</span> c<span class="token punctuation">;</span>  <span class="token comment">// 使用重载的 &gt;&gt; 操作符</span>
    cout <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">;</span> <span class="token comment">// 使用重载的 &lt;&lt; 操作符</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="4__419">
     </a>
     4.
     <strong>
      比较操作
     </strong>
    </h3>
    <p>
     为自定义类型重载关系操作符（
     <code>
      ==
     </code>
     ,
     <code>
      !=
     </code>
     ,
     <code>
      &lt;
     </code>
     ,
     <code>
      &gt;
     </code>
     ,
     <code>
      &lt;=
     </code>
     ,
     <code>
      &gt;=
     </code>
     ），使其可以直接进行比较。
    </p>
    <h4>
     <a id="_422">
     </a>
     示例：点比较
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 重载 == 操作符</span>
    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> x <span class="token operator">==</span> other<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> other<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重载 &lt; 操作符</span>
    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> x <span class="token operator">&lt;</span> other<span class="token punctuation">.</span>x <span class="token operator">||</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> other<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;</span> other<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Point <span class="token function">p1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Point <span class="token function">p2</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p1 <span class="token operator">==</span> p2<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1 == p2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p1 <span class="token operator">&lt;</span> p2<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1 &lt; p2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="5__453">
     </a>
     5.
     <strong>
      函数对象（仿函数）
     </strong>
    </h3>
    <p>
     通过重载函数调用操作符（
     <code>
      ()
     </code>
     ），使对象可以像函数一样被调用。这种对象称为
     <strong>
      函数对象
     </strong>
     或
     <strong>
      仿函数
     </strong>
     。
    </p>
    <h4>
     <a id="_456">
     </a>
     示例：加法器
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Adder</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Adder add<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出: 7</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="6__474">
     </a>
     6.
     <strong>
      智能指针
     </strong>
    </h3>
    <p>
     为自定义的智能指针类重载解引用操作符（
     <code>
      *
     </code>
     ）和成员访问操作符（
     <code>
      -&gt;
     </code>
     ），使其可以像普通指针一样使用。
    </p>
    <h4>
     <a id="_477">
     </a>
     示例：简单智能指针
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">SmartPointer</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    T<span class="token operator">*</span> ptr<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">SmartPointer</span><span class="token punctuation">(</span>T<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ptr</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">SmartPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">delete</span> ptr<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 重载 * 操作符</span>
    T<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 重载 -&gt; 操作符</span>
    T<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> ptr<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    SmartPointer<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">ptr</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>ptr <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 输出: 10</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="7__504">
     </a>
     7.
     <strong>
      自定义迭代器
     </strong>
    </h3>
    <p>
     为自定义的容器类重载迭代器操作符（
     <code>
      ++
     </code>
     ,
     <code>
      --
     </code>
     ,
     <code>
      *
     </code>
     ,
     <code>
      -&gt;
     </code>
     等），使其可以像标准库中的迭代器一样使用。
    </p>
    <h4>
     <a id="_507">
     </a>
     示例：简单迭代器
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> data<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 定义迭代器类</span>
    <span class="token keyword">class</span> <span class="token class-name">Iterator</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span><span class="token operator">:</span>
        <span class="token keyword">int</span><span class="token operator">*</span> ptr<span class="token punctuation">;</span>

    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token function">Iterator</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ptr</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

        <span class="token comment">// 重载 ++ 操作符</span>
        Iterator<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token operator">++</span>ptr<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 重载 * 操作符</span>
        <span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">// 重载 != 操作符</span>
        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Iterator<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> ptr <span class="token operator">!=</span> other<span class="token punctuation">.</span>ptr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    Iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    Iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span>data <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    MyArray arr<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> arr<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span> <span class="token comment">// 输出: 0 1 2 3 4 5 6 7 8 9</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="8__557">
     </a>
     8.
     <strong>
      自定义类型转换
     </strong>
    </h3>
    <p>
     通过重载类型转换操作符，使自定义类型可以隐式或显式地转换为其他类型。
    </p>
    <h4>
     <a id="_560">
     </a>
     示例：转换为布尔类型
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyBool</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">bool</span> value<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyBool</span><span class="token punctuation">(</span><span class="token keyword">bool</span> v <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">value</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 重载 bool 类型转换操作符</span>
    <span class="token keyword">operator</span> <span class="token keyword">bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    MyBool <span class="token function">b</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 隐式转换为 bool</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b is true"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_586">
     </a>
     总结
    </h3>
    <p>
     操作符重载的应用场景非常广泛，主要包括：
    </p>
    <ol>
     <li>
      数学运算（如复数、矩阵、向量等）。
     </li>
     <li>
      容器类（如动态数组、链表等）。
     </li>
     <li>
      输入输出（如自定义类型的流操作）。
     </li>
     <li>
      比较操作（如自定义类型的比较）。
     </li>
     <li>
      函数对象（仿函数）。
     </li>
     <li>
      智能指针。
     </li>
     <li>
      自定义迭代器。
     </li>
     <li>
      自定义类型转换。
     </li>
    </ol>
    <p>
     通过合理使用操作符重载，可以使代码更加直观、简洁和易于维护。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34303037313538352f:61727469636c652f64657461696c732f313436313034363637" class_="artid" style="display:none">
 </p>
</div>


