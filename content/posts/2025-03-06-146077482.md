---
layout: post
title: "fastapimysql实现问卷调查系统"
date: 2025-03-06 18:44:33 +0800
description: "我计划用fastapi+python，实现多表查询，并写成接口，在postman里面请求访问。"
keywords: "问卷调查系统api"
categories: ['Typescript']
tags: ['Mysql', 'Fastapi', 'Android']
artid: "146077482"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146077482
    alt: "fastapimysql实现问卷调查系统"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146077482
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146077482
cover: https://bing.ee123.net/img/rand?artid=146077482
image: https://bing.ee123.net/img/rand?artid=146077482
img: https://bing.ee123.net/img/rand?artid=146077482
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     fastapi+mysql实现问卷调查系统
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     说明：
     <br/>
     我计划用fastapi+python，实现多表查询，并写成接口，在postman里面请求访问
     <br/>
     step1:
    </p>
    <pre><code class="prism language-sql">
<span class="token comment">-- 1. 问卷表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> survey <span class="token punctuation">(</span>
                        id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
                        title <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                        created_at <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 2. 问题表（包含题型）</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> question <span class="token punctuation">(</span>
                          id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
                          survey_id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                          content <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                          <span class="token keyword">type</span> <span class="token keyword">ENUM</span><span class="token punctuation">(</span><span class="token string">'single_choice'</span><span class="token punctuation">,</span> <span class="token string">'multiple_choice'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                          <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>survey_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> survey<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 3. 选项表（用于单选/多选题）</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>option<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
                          id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
                          question_id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                          content <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                          <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>question_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> question<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 4. 用户表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>
                      id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
                      username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 5. 答案表（统一存储所有类型答案）</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> answer <span class="token punctuation">(</span>
                        id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
                        user_id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                        question_id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                        option_id <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                        answer_text <span class="token keyword">TEXT</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
                        created_at <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
                        <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token keyword">user</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>question_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> question<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>option_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>option<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入问卷</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> survey <span class="token punctuation">(</span>title<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
                               <span class="token punctuation">(</span><span class="token string">'消费者满意度调查'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                               <span class="token punctuation">(</span><span class="token string">'产品使用习惯调查'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 插入问题（前3题属于问卷1）</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> question <span class="token punctuation">(</span>survey_id<span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
                                                    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'您对产品的满意度如何？'</span><span class="token punctuation">,</span> <span class="token string">'single_choice'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'您通过哪些渠道了解我们？'</span><span class="token punctuation">,</span> <span class="token string">'multiple_choice'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'请提出改进建议'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                    <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'您每天使用产品的频率？'</span><span class="token punctuation">,</span> <span class="token string">'single_choice'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 插入选项（问题1有4个选项，问题2有4个选项，问题4有3个选项）</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>option<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>question_id<span class="token punctuation">,</span> content<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
                                                <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'非常满意'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'满意'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'一般'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'不满意'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'互联网广告'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'朋友推荐'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'社交媒体'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'其他'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'1-3次'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'4-6次'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'6次以上'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 插入用户</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
                                <span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 插入答案（模拟不同用户的回答）</span>
<span class="token comment">-- 用户1的回答</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> answer <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> question_id<span class="token punctuation">,</span> option_id<span class="token punctuation">,</span> answer_text<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
                                                                      <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                                      <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                                      <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'增加更多功能'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> answer <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> question_id<span class="token punctuation">,</span> option_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 用户2的回答</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> answer <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> question_id<span class="token punctuation">,</span> option_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
                                                         <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 用户3的回答</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> answer <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> question_id<span class="token punctuation">,</span> option_id<span class="token punctuation">,</span> answer_text<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
                                                                      <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                                      <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                                      <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'服务态度很好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 1. 查询单选问题选项统计</span>
<span class="token keyword">SELECT</span>
    o<span class="token punctuation">.</span>content <span class="token keyword">AS</span> <span class="token string">'选项内容'</span><span class="token punctuation">,</span>
    <span class="token function">COUNT</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'选择次数'</span>
<span class="token keyword">FROM</span> question q
         <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>option<span class="token punctuation">`</span></span> o <span class="token keyword">ON</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>question_id
         <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> answer a <span class="token keyword">ON</span> o<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>option_id <span class="token operator">AND</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>question_id
<span class="token keyword">WHERE</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> o<span class="token punctuation">.</span>id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>


<span class="token comment"># 2. 查询多选题选项统计</span>
<span class="token keyword">SELECT</span>
    o<span class="token punctuation">.</span>content <span class="token keyword">AS</span> <span class="token string">'选项内容'</span><span class="token punctuation">,</span>
    <span class="token function">COUNT</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'被选次数'</span>
<span class="token keyword">FROM</span> question q
         <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>option<span class="token punctuation">`</span></span> o <span class="token keyword">ON</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>question_id
         <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> answer a <span class="token keyword">ON</span> o<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>option_id <span class="token operator">AND</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>question_id
<span class="token keyword">WHERE</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment">-- 查询问题ID=2的多选题</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> o<span class="token punctuation">.</span>id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 查询文本题反馈内容</span>
<span class="token keyword">SELECT</span>
    u<span class="token punctuation">.</span>username <span class="token keyword">AS</span> <span class="token string">'用户'</span><span class="token punctuation">,</span>
    a<span class="token punctuation">.</span>answer_text <span class="token keyword">AS</span> <span class="token string">'反馈内容'</span>
<span class="token keyword">FROM</span> answer a
         <span class="token keyword">JOIN</span> <span class="token keyword">user</span> u <span class="token keyword">ON</span> a<span class="token punctuation">.</span>user_id <span class="token operator">=</span> u<span class="token punctuation">.</span>id
<span class="token keyword">WHERE</span> a<span class="token punctuation">.</span>question_id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 按问卷统计整体回答率</span>


<span class="token keyword">SELECT</span>
    s<span class="token punctuation">.</span>title <span class="token keyword">AS</span> <span class="token string">'问卷标题'</span><span class="token punctuation">,</span>
    <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> CONCAT<span class="token punctuation">(</span>a<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'实际回答数'</span><span class="token punctuation">,</span>
    <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> q<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'理论最大回答数'</span><span class="token punctuation">,</span>
    <span class="token function">ROUND</span><span class="token punctuation">(</span>
            <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> CONCAT<span class="token punctuation">(</span>a<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span>
            <span class="token punctuation">(</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> q<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> u<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span>
            <span class="token number">2</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'回答率(%)'</span>
<span class="token keyword">FROM</span> survey s
         <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> question q <span class="token keyword">ON</span> s<span class="token punctuation">.</span>id <span class="token operator">=</span> q<span class="token punctuation">.</span>survey_id
         <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> <span class="token keyword">user</span> u
         <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> answer a <span class="token keyword">ON</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>question_id <span class="token operator">AND</span> u<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>user_id
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s<span class="token punctuation">.</span>id<span class="token punctuation">;</span>





<span class="token comment"># 5. 按用户统计答题记录</span>
<span class="token keyword">SELECT</span>
    u<span class="token punctuation">.</span>username <span class="token keyword">AS</span> <span class="token string">'用户名'</span><span class="token punctuation">,</span>
    s<span class="token punctuation">.</span>title <span class="token keyword">AS</span> <span class="token string">'问卷标题'</span><span class="token punctuation">,</span>
    <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> a<span class="token punctuation">.</span>question_id<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'已答问题数'</span><span class="token punctuation">,</span>
    <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> q<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'总问题数'</span><span class="token punctuation">,</span>
    <span class="token function">ROUND</span><span class="token punctuation">(</span>
            <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> a<span class="token punctuation">.</span>question_id<span class="token punctuation">)</span> <span class="token operator">/</span>
            <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> q<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span>
            <span class="token number">2</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'完成率(%)'</span>
<span class="token keyword">FROM</span> <span class="token keyword">user</span> u
         <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> survey s
         <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> question q <span class="token keyword">ON</span> s<span class="token punctuation">.</span>id <span class="token operator">=</span> q<span class="token punctuation">.</span>survey_id
         <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> answer a <span class="token keyword">ON</span> u<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>user_id <span class="token operator">AND</span> q<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>question_id
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span> s<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre>
    <p>
     step2:C:\Users\Administrator\PycharmProjects\FastAPIProject\main.py
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> fastapi <span class="token keyword">import</span> FastAPI<span class="token punctuation">,</span> HTTPException
<span class="token keyword">import</span> pymysql<span class="token punctuation">.</span>cursors
app <span class="token operator">=</span> FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 数据库连接配置</span>
DB_CONFIG <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'host'</span><span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
    <span class="token string">'user'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
    <span class="token string">'password'</span><span class="token punctuation">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>
    <span class="token string">'db'</span><span class="token punctuation">:</span> <span class="token string">'db_spring'</span><span class="token punctuation">,</span>
    <span class="token string">'charset'</span><span class="token punctuation">:</span> <span class="token string">'utf8mb4'</span><span class="token punctuation">,</span>
    <span class="token string">'cursorclass'</span><span class="token punctuation">:</span> pymysql<span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>DictCursor
<span class="token punctuation">}</span>
<span class="token comment"># 查询数据库的函数</span>
<span class="token keyword">def</span> <span class="token function">query_database</span><span class="token punctuation">(</span>query<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        connection <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token operator">**</span>DB_CONFIG<span class="token punctuation">)</span>
        <span class="token keyword">with</span> connection<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>query<span class="token punctuation">,</span> params<span class="token punctuation">)</span>
            result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
        connection<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> result
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">raise</span> HTTPException<span class="token punctuation">(</span>status_code<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> detail<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 1. 查询单选问题选项统计</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/single_choice_stats/{question_id}"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get_single_choice_stats</span><span class="token punctuation">(</span>question_id<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    query <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
    SELECT
        o.content AS option_content,
        COUNT(a.id) AS selection_count
    FROM question q
             JOIN `option` o ON q.id = o.question_id
             LEFT JOIN answer a ON o.id = a.option_id AND q.id = a.question_id
    WHERE q.id = %s
    GROUP BY o.id
    ORDER BY COUNT(a.id) DESC;
    """</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> query_database<span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token punctuation">(</span>question_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token string">"data"</span><span class="token punctuation">:</span> data<span class="token punctuation">}</span>
    <span class="token keyword">except</span> HTTPException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"message"</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">}</span>
<span class="token comment"># 2. 查询多选题选项统计</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/multiple_choice_stats/{question_id}"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get_multiple_choice_stats</span><span class="token punctuation">(</span>question_id<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    query <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
    SELECT
        o.content AS option_content,
        COUNT(a.id) AS selected_count
    FROM question q
             JOIN `option` o ON q.id = o.question_id
             LEFT JOIN answer a ON o.id = a.option_id AND q.id = a.question_id
    WHERE q.id = %s
    GROUP BY o.id
    ORDER BY COUNT(a.id) DESC;
    """</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> query_database<span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token punctuation">(</span>question_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token string">"data"</span><span class="token punctuation">:</span> data<span class="token punctuation">}</span>
    <span class="token keyword">except</span> HTTPException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"message"</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">}</span>
<span class="token comment"># 3. 查询文本题反馈内容</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/text_feedback/{question_id}"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get_text_feedback</span><span class="token punctuation">(</span>question_id<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    query <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
    SELECT
        u.username AS user,
        a.answer_text AS feedback_content
    FROM answer a
             JOIN user u ON a.user_id = u.id
    WHERE a.question_id = %s;
    """</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> query_database<span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token punctuation">(</span>question_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token string">"data"</span><span class="token punctuation">:</span> data<span class="token punctuation">}</span>
    <span class="token keyword">except</span> HTTPException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"message"</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">}</span>


 <span class="token comment"># 4. 按问卷统计整体回答率</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/survey_response_rate/{survey_id}"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get_survey_response_rate</span><span class="token punctuation">(</span>survey_id<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    query <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
    SELECT
        s.title AS survey_title,
        COUNT(DISTINCT CONCAT(a.user_id, '-', q.id)) AS actual_responses,
        COUNT(DISTINCT q.id) * COUNT(DISTINCT u.id) AS theoretical_max_responses,
        ROUND(
            COUNT(DISTINCT CONCAT(a.user_id, '-', q.id)) /
            (COUNT(DISTINCT q.id) * COUNT(DISTINCT u.id)) * 100,
            2
        ) AS response_rate
    FROM survey s
    LEFT JOIN question q ON s.id = q.survey_id
    CROSS JOIN user u
    LEFT JOIN answer a ON q.id = a.question_id AND u.id = a.user_id
    WHERE s.id = %s
    GROUP BY s.id;
    """</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> query_database<span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token punctuation">(</span>survey_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token string">"data"</span><span class="token punctuation">:</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">if</span> data <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token keyword">except</span> HTTPException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"message"</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">}</span>
<span class="token comment"># 5. 按用户统计答题记录</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/user_response_stats/{user_id}"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get_user_response_stats</span><span class="token punctuation">(</span>user_id<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    query <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
    SELECT
        s.title AS survey_title,
        COUNT(DISTINCT a.question_id) AS answered_questions,
        COUNT(DISTINCT q.id) AS total_questions,
        ROUND(
            COUNT(DISTINCT a.question_id) /
            COUNT(DISTINCT q.id) * 100,
            2
        ) AS completion_rate
    FROM user u
    CROSS JOIN survey s
    LEFT JOIN question q ON s.id = q.survey_id
    LEFT JOIN answer a ON u.id = a.user_id AND q.id = a.question_id
    WHERE u.id = %s
    GROUP BY u.id, s.id;
    """</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> query_database<span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token string">"data"</span><span class="token punctuation">:</span> data<span class="token punctuation">}</span>
    <span class="token keyword">except</span> HTTPException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"message"</span><span class="token punctuation">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">}</span>
<span class="token comment"># 启动应用</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> uvicorn
    uvicorn<span class="token punctuation">.</span>run<span class="token punctuation">(</span>app<span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">8000</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     step3:
    </p>
    <pre><code class="prism language-bash">http://localhost:8000/single_choice_stats/1
<span class="token punctuation">{<!-- --></span>
    <span class="token string">"status"</span><span class="token builtin class-name">:</span> <span class="token string">"success"</span>,
    <span class="token string">"data"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"非常满意"</span>,
            <span class="token string">"selection_count"</span><span class="token builtin class-name">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"满意"</span>,
            <span class="token string">"selection_count"</span><span class="token builtin class-name">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"一般"</span>,
            <span class="token string">"selection_count"</span><span class="token builtin class-name">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"不满意"</span>,
            <span class="token string">"selection_count"</span><span class="token builtin class-name">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     step4:
    </p>
    <pre><code class="prism language-bash">http://localhost:8000/multiple_choice_stats/1
<span class="token punctuation">{<!-- --></span>
    <span class="token string">"status"</span><span class="token builtin class-name">:</span> <span class="token string">"success"</span>,
    <span class="token string">"data"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"非常满意"</span>,
            <span class="token string">"selected_count"</span><span class="token builtin class-name">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"满意"</span>,
            <span class="token string">"selected_count"</span><span class="token builtin class-name">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"一般"</span>,
            <span class="token string">"selected_count"</span><span class="token builtin class-name">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"option_content"</span><span class="token builtin class-name">:</span> <span class="token string">"不满意"</span>,
            <span class="token string">"selected_count"</span><span class="token builtin class-name">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     step5:
    </p>
    <pre><code class="prism language-bash">http://localhost:8000/text_feedback/1
<span class="token punctuation">{<!-- --></span>
    <span class="token string">"status"</span><span class="token builtin class-name">:</span> <span class="token string">"success"</span>,
    <span class="token string">"data"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"user"</span><span class="token builtin class-name">:</span> <span class="token string">"张三"</span>,
            <span class="token string">"feedback_content"</span><span class="token builtin class-name">:</span> null
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"user"</span><span class="token builtin class-name">:</span> <span class="token string">"李四"</span>,
            <span class="token string">"feedback_content"</span><span class="token builtin class-name">:</span> null
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"user"</span><span class="token builtin class-name">:</span> <span class="token string">"王五"</span>,
            <span class="token string">"feedback_content"</span><span class="token builtin class-name">:</span> null
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     step6:
    </p>
    <pre><code class="prism language-bash">http://localhost:8000/survey_response_rate/1
<span class="token punctuation">{<!-- --></span>
    <span class="token string">"status"</span><span class="token builtin class-name">:</span> <span class="token string">"success"</span>,
    <span class="token string">"data"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"survey_title"</span><span class="token builtin class-name">:</span> <span class="token string">"消费者满意度调查"</span>,
        <span class="token string">"actual_responses"</span><span class="token builtin class-name">:</span> <span class="token number">8</span>,
        <span class="token string">"theoretical_max_responses"</span><span class="token builtin class-name">:</span> <span class="token number">9</span>,
        <span class="token string">"response_rate"</span><span class="token builtin class-name">:</span> <span class="token number">88.89</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     step7:
    </p>
    <pre><code class="prism language-bash">http://localhost:8000/user_response_stats/1
<span class="token punctuation">{<!-- --></span>
    <span class="token string">"status"</span><span class="token builtin class-name">:</span> <span class="token string">"success"</span>,
    <span class="token string">"data"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"survey_title"</span><span class="token builtin class-name">:</span> <span class="token string">"消费者满意度调查"</span>,
            <span class="token string">"answered_questions"</span><span class="token builtin class-name">:</span> <span class="token number">3</span>,
            <span class="token string">"total_questions"</span><span class="token builtin class-name">:</span> <span class="token number">3</span>,
            <span class="token string">"completion_rate"</span><span class="token builtin class-name">:</span> <span class="token number">100.0</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"survey_title"</span><span class="token builtin class-name">:</span> <span class="token string">"产品使用习惯调查"</span>,
            <span class="token string">"answered_questions"</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,
            <span class="token string">"total_questions"</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,
            <span class="token string">"completion_rate"</span><span class="token builtin class-name">:</span> <span class="token number">100.0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     end
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6366383833332f:61727469636c652f64657461696c732f313436303737343832" class_="artid" style="display:none">
 </p>
</div>


