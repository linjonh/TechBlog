---
layout: post
title: "Prompt优化-COTCOD"
date: 2025-03-12 09:22:49 +0800
description: "COT（Chain of Thought）是一种通过引导大语言模型（LLM）生成逐步推理过程来提升复杂任务解决能力的技术。明确要求模型扮演特定角色（如科学家、程序员），并设定其职业背景、目标动机，可提升回答的专业性与一致性。我的应用场景：在RAG等系统中，与大模型交互的中间步骤，有需要大模型判断的节点。：最近你接了一个财务侵占的官司，涉案金额5xxx元，你是受害人的辩护律师。：指令、背景信息、补充数据（要求）、输出格式、（其他限制条件）：输出内容要有数据准备、模型训练、模型管理和服务管理4大流程。"
keywords: "Prompt优化 COT/COD"
categories: ['未分类']
tags: ['人工智能', 'Prompt']
artid: "146196089"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146196089
    alt: "Prompt优化-COTCOD"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146196089
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146196089
cover: https://bing.ee123.net/img/rand?artid=146196089
image: https://bing.ee123.net/img/rand?artid=146196089
img: https://bing.ee123.net/img/rand?artid=146196089
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Prompt优化 COT/COD
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h4>
     <a id="_1">
     </a>
     基本的方法论框架
    </h4>
    <p>
     <strong>
      基础要素
     </strong>
     ：指令、背景信息、补充数据（要求）、输出格式、（其他限制条件）
    </p>
    <blockquote>
     <p>
      有时背景信息较长，限制信息可能会失效，可以最后再写一个限制信息。
     </p>
    </blockquote>
    <p>
     <strong>
      例如：
     </strong>
    </p>
    <p>
     <strong>
      大模型用来画思维导图
     </strong>
    </p>
    <blockquote>
     <p>
      <strong>
       指令
      </strong>
      ： 帮我写一个模型训练的思维导图。
      <br/>
      <strong>
       背景信息
      </strong>
      ：千帆ModelBuilder训练流程为框架。
      <br/>
      <strong>
       补充数据
      </strong>
      ：思维导图为横版展示。
      <br/>
      <strong>
       输出格式
      </strong>
      ：输出内容要有数据准备、模型训练、模型管理和服务管理4大流程。
     </p>
    </blockquote>
    <p>
     <strong>
      大模型担任律师
     </strong>
    </p>
    <blockquote>
     <p>
      <strong>
       能力与角色
      </strong>
      ：你现在是一个资深律师。
      <br/>
      <strong>
       背景信息
      </strong>
      ：最近你接了一个财务侵占的官司，涉案金额5xxx元，你是受害人的辩护律师。
      <br/>
      <strong>
       指令
      </strong>
      ： 请帮忙出一个法律公告，警示被告尽快偿还非法侵占的财务。
      <br/>
      <strong>
       输出风格
      </strong>
      ：公告内容要严谨严肃专业。
      <br/>
      <strong>
       输出范围
      </strong>
      ：公告内容不宜超过800字。
     </p>
    </blockquote>
    <h4>
     <a id="COT__COD_26">
     </a>
     COT / COD
    </h4>
    <p>
     <strong>
      Chain of Thought（思维链）
     </strong>
    </p>
    <blockquote>
     <p>
      COT（Chain of Thought）是一种通过引导大语言模型（LLM）生成逐步推理过程来提升复杂任务解决能力的技术。其核心在于让模型模仿人类分步骤思考的思维链，将问题分解为多个中间推理环节，最终推导出答案
     </p>
     <p>
      技术特点：
      <br/>
      结构化推理：通过示例或指令要求模型展示“解题过程”，例如数学问题中的分步计算；
      <br/>
      可解释性增强：中间步骤的输出便于用户理解模型逻辑，提升信任度；
      <br/>
      适用场景：数学推理、符号逻辑、复杂问答等需要多步验证的任务
     </p>
    </blockquote>
    <ul>
     <li>
      添加“请逐步思考”“分三步论证”等指令，引导模型展示完整推理路径。测试显示该方法可使数学题准确率提升
     </li>
    </ul>
    <p>
     <strong>
      Chain of Draft（草稿链）
     </strong>
    </p>
    <blockquote>
     <p>
      COD（Chain of Draft）是COT的高效演化版本，其核心是
      <strong>
       仅保留推理中的关键步骤
      </strong>
      ，通过极简的中间表达（如公式、符号）降低计算成本。
     </p>
     <p>
      技术特点：
      <br/>
      极简输出：每个推理步骤仅用5个词以内表达，例如“20-12=8→答案8”；
      <br/>
      效率优势：相比COT减少80%的Token使用量，延迟降低40%-76%；
      <br/>
      适用场景：实时交互（客服、语音助手）、资源受限环境（手机、IoT设备）
     </p>
    </blockquote>
    <p>
     我的应用场景：在RAG等系统中，与大模型交互的中间步骤，有需要大模型判断的节点。
    </p>
    <p>
     例如：我需要让视觉大模型判断是否已经打开了某个APP。
    </p>
    <pre><code class="prism language-python"><span class="token punctuation">{<!-- --></span>
            <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"system"</span><span class="token punctuation">,</span>
            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token triple-quoted-string string">"""你是一个移动应用识别专家。
            请根据提供的移动应用屏幕截图判断目标应用是否匹配。
            在分析过程中，请逐步思考，但每个步骤的描述尽量简洁（不超过10个字）。
            使用分隔符“####”来区分思考过程与最终答案。
            最终只需回答“是”或“否”。"""</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      Prompt
     </strong>
     拆解：
    </p>
    <ol>
     <li>
      提供角色
     </li>
     <li>
      在分析过程中，请逐步思考
     </li>
     <li>
      每个思考步骤不超过10个字
     </li>
     <li>
      也可以添加要识别APP的背景信息，如盒马：盒马是一家线上买菜平台
     </li>
    </ol>
    <p>
     <strong>
      使用通义千问2.5-VL-72B：
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/img_convert/edd0f46c12cd5eff86126010d4c1ead0.png#pic_center"/>
    </p>
    <pre><code class="prism language-python"><span class="token number">1.</span> COD
<span class="token punctuation">{<!-- --></span>
            <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"system"</span><span class="token punctuation">,</span>
            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token triple-quoted-string string">"""你是一个移动应用识别专家。
            请根据提供的移动应用屏幕截图判断目标应用是否匹配。
            在分析过程中，请逐步思考，但每个步骤的描述尽量简洁（不超过10个字）。
            使用分隔符“####”来区分思考过程与最终答案。
            最终只需回答“是”或“否”。"""</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span>
            <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span>
            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token triple-quoted-string string">"""请分析这个屏幕截图，判断它是否属于盒马APP的页面。
						盒马APP：盒马是一家线上买菜平台。"""</span>
<span class="token punctuation">}</span>

回复：搜索框有水果促销信息<span class="token comment">####是</span>

<span class="token number">2.</span> COT
<span class="token punctuation">{<!-- --></span>
            <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"system"</span><span class="token punctuation">,</span>
            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token triple-quoted-string string">"""你是一个移动应用识别专家。
            请根据提供的移动应用屏幕截图判断目标应用是否匹配。
            在分析过程中，请逐步思考。
            使用分隔符“####”来区分思考过程与最终答案。
            最终只需回答“是”或“否”。"""</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span>
            <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span>
            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token triple-quoted-string string">"""请分析这个屏幕截图，判断它是否属于盒马APP的页面。
						盒马APP：盒马是一家线上买菜平台。"""</span>
<span class="token punctuation">}</span>

回复：
从屏幕截图中可以看到以下特征：
页面顶部显示了“星宝店”，这是盒马APP中常见的店铺名称。
页面中部有多个分类标签，如“水果鲜花”、“蔬菜豆制品”、“肉禽蛋品”等，这些分类与盒马APP的食品分类一致。
页面底部有“分类”、“盒马小镇”、“购物车”和“我的”等标签，这些标签也是盒马APP的标准导航栏。
页面整体设计风格和布局与盒马APP非常相似。
综合以上分析，可以判断这个屏幕截图属于盒马APP的页面。
是
</code></pre>
    <h4>
     <a id="COT__COD_123">
     </a>
     COT / COD对比
    </h4>
    <p>
     <img alt="image-20250310103518349" src="https://i-blog.csdnimg.cn/img_convert/e99636cad4c12cebb3015399d25c259d.png"/>
    </p>
    <p>
     对大模型在数据集
     <code>
      GSM8K
     </code>
     上对测试，可发现COD的准确率几乎和COT相同。
    </p>
    <p>
     但在所需Token、延迟时间上，COD有明显的优势。
    </p>
    <p>
     <img alt="image-20250310103539497" src="https://i-blog.csdnimg.cn/img_convert/b94e50e09ad293c66b76687c6e0f0d59.png"/>
    </p>
    <p>
     例如：
    </p>
    <p>
     <strong>
      问题：
     </strong>
     <em>
      杰森有20个棒棒糖。他给了丹尼一些。现在他还剩下12个。杰森给了丹尼多少个棒棒糖？
     </em>
    </p>
    <p>
     <strong>
      1.标准提示（直接答案）
     </strong>
    </p>
    <blockquote>
     <p>
      <strong>
       回复：
      </strong>
      <em>
       8
      </em>
     </p>
    </blockquote>
    <p>
     <strong>
      2.思维链（CoT）提示（逐步解释）
     </strong>
    </p>
    <blockquote>
     <p>
      <strong>
       回复：
      </strong>
     </p>
     <p>
      杰森一开始有20个棒棒糖。
     </p>
     <p>
      给了一些之后，他剩下12个。
     </p>
     <p>
      要找出他给了多少，我们做减法：20 - 12。
     </p>
     <p>
      这给出了
      <strong>
       8
      </strong>
      。
     </p>
    </blockquote>
    <p>
     <strong>
      3.草稿链（CoD）提示（简洁推理）
     </strong>
    </p>
    <blockquote>
     <p>
      <strong>
       回复：
      </strong>
      <em>
       20 - 12 = 8 → 最终答案：8.
      </em>
     </p>
    </blockquote>
    <p>
     <em>
      CoT是全面的，但可能过于繁琐。CoD去除了不必要的部分，保留清晰度的同时节省时间。
     </em>
    </p>
    <h4>
     <a id="_163">
     </a>
     其他优化点
    </h4>
    <h5>
     <a id="1__165">
     </a>
     1. 示例引导与少样本学习
    </h5>
    <ul>
     <li>
      提供3-5个输入输出示例，帮助模型快速掌握任务模式。如翻译任务可给出中英对照样例
     </li>
     <li>
      对于创意类任务，给出风格参考（如：“模仿鲁迅杂文风格写作”）
     </li>
     <li>
      对于文本分类，“样例：'CPU性能升级’→科技 样例2：'欧冠决赛’→体育 请分类：‘新型电池技术’”
     </li>
    </ul>
    <h5>
     <a id="2__173">
     </a>
     2. 角色设定与背景引导
    </h5>
    <p>
     明确要求模型扮演特定角色（如科学家、程序员），并设定其职业背景、目标动机，可提升回答的专业性与一致性。例如：“你是一名资深营养学家，需用通俗语言解释维生素C的作用”。
    </p>
    <ol>
     <li>
      科学解释场景
      <br/>
      “你是一位量子物理研究员，需用生活化比喻向中学生解释量子纠缠现象”
      <br/>
      → 输出会使用"如同心灵感应的粒子"等类比
     </li>
     <li>
      商业分析场景
      <br/>
      “作为麦肯锡咨询顾问，请用SWOT分析法评估新能源汽车市场”
      <br/>
      → 生成包含竞争优势、政策风险等维度的结构化报告
     </li>
    </ol>
    <h5>
     <a id="3__184">
     </a>
     3. 任务分解与步骤引导
    </h5>
    <ul>
     <li>
      <p>
       将复杂任务拆解为明确步骤，例如：“第一步分析数据特征→第二步建立模型→第三步验证结果”
      </p>
     </li>
     <li>
      <p>
       要求模型先展示推理过程再输出结论，可提升数学类问题的准确性
      </p>
     </li>
     <li>
      <p>
       活动策划：“1.确定主题→2.预算分配→3.流程设计→4.风险评估”。→ 生成包含时间轴、应急预案的方案
      </p>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353635333532352f:61727469636c652f64657461696c732f313436313936303839" class_="artid" style="display:none">
 </p>
</div>


