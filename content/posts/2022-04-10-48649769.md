---
layout: post
title: "网络架构云平台和微信公众号开发接入-基于嵌入式工程师的视觉"
date: 2022-04-10 22:28:21 +0800
description: "本文旨在为嵌入式开发工程师提供关于云和后端技术的基础知识，涵盖网络架构、服务器架构、业务引擎软件架构"
keywords: "开发者门户接入示意图"
categories: ['研发管理']
tags: ['网络架构', '微信公众平台开发', '云平台', 'Mvc', 'Apache']
artid: "48649769"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=48649769
    alt: "网络架构云平台和微信公众号开发接入-基于嵌入式工程师的视觉"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=48649769
featuredImagePreview: https://bing.ee123.net/img/rand?artid=48649769
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     网络架构、云平台和微信公众号开发接入--基于嵌入式工程师的视觉
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       云与后端相关的技术似乎并不属于嵌入式和物联智能硬件开发工程师的范畴，但是嵌入式开发工程师有必要认识成熟的网络架构和相关的云技术，以拓展自己在系统架构方面的视野。大数据分析是物联网背后的核心价值，物联智能硬件是物联大系统的终端，开发工程师不仅要深入精通物联技术，也应该去理解大系统，甚至整个生态领域的相关技术。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       作为嵌入式开发工程师，也许并不需要熟悉云和后端的技术开发，但至少要对其中用到的技术和接口有一定的认识。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px; color:rgb(62,62,62)">
      一、网络架构
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px; color:rgb(62,62,62)">
      <span style="white-space:pre">
      </span>
      常见的网络架构分为C/S
     </span>
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      和B/S两种模式。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       1. C/S
      </span>
      <span style="color:rgb(62,62,62)">
       是客户端/
      </span>
      服务器模式，典型应用如QQ客户端、百度云管家等；B/S则是浏览器/服务器模式，典型的应用就是门户网站、银行业务系统等。两种模式的优点和缺点都显而易见。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       2. C/S
      </span>
      <span style="color:rgb(62,62,62)">
       交互性强、网络通信量低、响应速度快，很多处理都集中在本地客户端完成，是胖客户端/
      </span>
      瘦服务器。但是其是针对性开发，不利于变更和扩展。C/S通信编程基于TCP/IP层的socket编程，或者基于对socket的封装类。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       3. B/S
      </span>
      <span style="color:rgb(62,62,62)">
       方式分布性强、升级维护方便、开发简单、总体成本低，本地只需要安装一个通用的浏览器即可，是瘦客户端/
      </span>
      胖服务器。但其有数据安全性问题、对服务器要求过高、数据传输速度慢。B/S的通信是基于HTTP协议。随着网页脚本技术的提高，B/S也逐渐增强本地浏览器端的处理能力，以减轻服务器的负荷。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       4.
      </span>
      <span style="color:rgb(62,62,62)">
       以上分析都是基于对PC
      </span>
      端网络架构的思考，但是在移动互联网上却有截然不同的体验。以门户新闻网站而言，在PC领域是以B/S方式来呈现的，但是如果将其直接移植到手机和平板端，会因为屏幕尺寸的差异使得用户体验变差，尽管在服务器端可以通过获取终端的个性化参数来进行适配，但总体体验是远不上APP客户端来展现的，所以我们在手机看到的是新浪新闻、网易新闻等等客户端。在移动互联网领域，应该考虑的是更多的垂直服务，而不是大而全的产品。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px; color:rgb(62,62,62)">
      二、服务器架构
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px; color:rgb(62,62,62)">
      <span style="white-space:pre">
      </span>
      接下来以B/S
     </span>
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      架构为例来分析服务器端的架构。示意图如下：
     </span>
    </p>
    <p align="center">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <img alt="" src="https://img-blog.csdn.net/20150921100036008?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center">
       </img>
      </span>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       1.
      </span>
      <span style="color:rgb(62,62,62)">
       用户浏览器来访问业务系统，如银行业务，浏览器是直接跟WEB
      </span>
      页面服务器交互的。WEB服务器一般会部署apache（或者tomcat），而业务系统的网页（如html，php）则通过apache服务转为HTTP协议通信给用户。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       2.
      </span>
      <span style="color:rgb(62,62,62)">
       业务系统不同的业务页面由业务引擎来进行控制和处理，业务引擎还会访问数据库，另外还需要将处理结果的页面视图通过WEB
      </span>
      向用户展示。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       3.
      </span>
      <span style="color:rgb(62,62,62)">
       如果数据访问量不大，我们一般可以认为WEB
      </span>
      是一台服务器，业务引擎是一台服务器，数据库和服务是一台服务器。如果数据量大，那WEB前面可能还有负载均衡服务器，业务引擎和数据库可能是服务器集群。如果是超大型数据，如大数据，那传统的oracle根本就不管用，要用到分布式文件系统，如Hadoop里面的HDFS。当然，如果数据量很小，一台服务器装下三者也可以。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      三、后端软件架构
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       以上分析是基于部署视图对整个系统的理解。在一般的软件业务系统中，web
      </span>
      服务使用apache（开源），数据库服务用Mysql（开源）等，都是成熟的软件产品，或者我们可以认为它们是一种软件工具。在实现业务系统中，我们能做的是去高效利用apache和mysql，而业务实现的核心是业务引擎的实现。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       业务引擎是应用系统的核心，应用系统上成熟的模型是MVC
      </span>
      模型。M是模型，是对数据库应用接口的封装，业务引擎即通过M模型的接口来访问数据库的业务数据；V是视图，是应用根据数据处理的结果而整合的页面，最终会通过WEB推向用户的浏览器；而C则是控制，即业务引擎的核心，其根据用户的交互来进行有针对的数据处理。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       用户的交互最终都会通过HTTP
      </span>
      协议来传送，而HTTP有两种方式，类似编程中的函数的参数传递，一种是GET的方式，即在网页的访问地址后面加上参数来传递；另一种是POST方式，不出现在访问地址后面，而是出现在消息体中。MVC的控制器会根据参数的不同来区分不同的子业务请求，并将它们交给对应的数据处理引擎来处理。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       业务引擎的开发一般都是用解释性语言来开发，如php
      </span>
      ，JSP，asp等等。中小型系统常用apache+php+Mysql这种组合，另外就是tomcat+jsp+mysql.
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      四、云平台
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       云平台并不是什么神秘的技术，对于应用者而言，云技术能给我们带来极大的便利和成本优势。我们来想象一下，一个公司如果只在广州办公，它开发的产品系统是服务全国，如果它只是在自己的公司架设服务器，但全国各地用户访问的IP
      </span>
      包都要在网络上跋山涉水来到广州，北方的用户的体验肯定很差。假设淘宝的服务器都在杭州，那11.11的抢购，我们在广州怎么抢得过杭州的。因为租赁云平台来假设分布式的服务平台是大型系统的不二选择，有人可能会想，这些公司可以在全国各地租机房买服务器放着啊，成本呢？而且用户的访问也有峰值和周期性，360的抢票虽然牛掰，但如果不是过年，也没多少人用吧。平时买那么多服务器就为了过年抢一抢多浪费，肯定比不上过年有针对性地租用云资源来得便宜。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       简单地说，对于一般用户来说，云平台就是提供在看不见的地方提供虚拟服务器主机（CPU
      </span>
      、内存、硬盘）和数据库、WEB服务（apache）等资源。对于云平台的提供商，那才是虚拟集群技术人才的聚居地，咱们不去讨论了。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       目前，国内有阿里云、新浪云和百度云等知名云平台。新浪云对于体验用户是免费的（php
      </span>
      免费，java是收费的）。对于初学者，可以考虑申请新浪云来进行技术开发。
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       各种云的申请和创建云应用的过程都比较简单。以新浪云为例简单说明一下，详细的例程可以百度得到。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       1.
      </span>
      <span style="color:rgb(62,62,62)">
       注册新浪微博账号，两者是绑定的。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       2.
      </span>
      <span style="color:rgb(62,62,62)">
       以新浪账号登陆新浪云计算中心。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       3.
      </span>
      <span style="color:rgb(62,62,62)">
       在新浪SAE
      </span>
      上创建新应用，如图：
     </span>
    </p>
    <p align="center">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <img alt="" src="https://img-blog.csdn.net/20150921100052490?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center">
       </img>
      </span>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       这个时候可以通过二级域名来访问了，即意味着你拥有了云平台的主机资源和apache
      </span>
      服务和php脚本解释引擎。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       4.
      </span>
      <span style="color:rgb(62,62,62)">
       编辑或者上传代码（php
      </span>
      语言开发）
     </span>
    </p>
    <p align="left" style="text-align:center">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <img alt="" src="https://img-blog.csdn.net/20150921100114555?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center">
       <br/>
      </img>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      五、微信公众平台开发接入
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       微信公众平台的后台管理有两种模式，一种是常规的模式，即由微信官方提供的后台菜单功能来进行管理，如用户管理、群发、交互回复等等；另一种是开发者模式，即由公众号的运营商自行开发后端，来对关注该公众号的用户提供服务，如自动回复、地理信息服务、移动支付等等。微信硬件服务也属于开发者模式，由微信硬件的厂商提供后端进行支持，详细的架构可以参考《
      </span>
      <span style="color:blue">
       物联网架构场景技术分析
      </span>
      <span style="color:rgb(62,62,62)">
       》一文。开发者模式给微信公众号注入了强大的生命力，有第三方创造力的加入，使得微信公众服务大放异彩，也可以预见基于微信的物联网会推到物联网大幅前进。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       第三方后端服务假设在云前述的云平台基础上，只要按照微信提供的接口即可以接入微信公众平台。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       1.
      </span>
      <span style="color:rgb(62,62,62)">
       先使用token
      </span>
      来验证第三方主机方的存在。
     </span>
    </p>
    <p align="left">
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
      <span style="color:rgb(62,62,62)">
       <span style="white-space:pre">
       </span>
       2.
      </span>
      <span style="color:rgb(62,62,62)">
       第三方服务按照微信的接口来提供服务。目录微信公众号提供消息服务、对话服务、移动支付、硬件服务、地理信息、图像音频等方面的接口。详细请参考微信官方资料。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       本文从大的宏观网络架构一步一步深入到所谓微观的微信后台接入，希望对你有所启发。
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       1、讲述C/S和B/S网络架构
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       2、从部署视图理解（S）服务器架构，包含web、业务引擎、数据库
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       3、从开发视图理解业务引擎的软件架构
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       4、云平台提供服务器资源（web服务、数据库服务、主机资源），申请免费云
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       5、云平台实现微信公众平台开发接入
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <span style="white-space:pre">
       </span>
       作为嵌入式开发工程师，不用对未知领域有所畏惧，只要付出足够的努力，一切都能在掌握之中！
      </span>
     </span>
    </p>
    <p align="left">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       敬请关注微信公众号：嵌入式企鹅圈，获取更多嵌入式和物联网开发相关技术原创分享。
      </span>
     </span>
    </p>
    <p align="left" style="text-align:center">
     <span style="color:rgb(62,62,62)">
      <span style="font-family:'Microsoft YaHei'; font-size:14px">
       <img alt="" src="https://img-blog.csdn.net/20150921100247063?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center">
        <br/>
       </img>
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:'Microsoft YaHei'; font-size:14px">
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f7975657169616e5f73637574:2f61727469636c652f64657461696c732f3438363439373639" class_="artid" style="display:none">
 </p>
</div>


