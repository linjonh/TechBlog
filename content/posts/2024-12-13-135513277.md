---
arturl_encode: "6874747073:3a2f2f626c6f672e6373646e2e6e65742f646664673334352f:61727469636c652f64657461696c732f313335353133323737"
layout: post
title: "java.net.ConnectException-Connection-refused-connectå·²è§£å†³"
date: 2024-12-13 12:43:04 +08:00
description: "æ–‡ç« è®²è¿°äº†åœ¨å°†SpringBootåº”ç”¨ä¸RabbitMQé›†æˆæ—¶é‡"
keywords: "connectexception: connection refused: connect"
categories: ['Java']
tags: ['å¼€å‘è¯­è¨€', 'ä¸­é—´ä»¶', 'Spring', 'Spring', 'Rabbitmq', 'Net', 'Java', 'Cloud', 'Boot']
artid: "135513277"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=135513277
    alt: "java.net.ConnectException-Connection-refused-connectå·²è§£å†³"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=135513277
featuredImagePreview: https://bing.ee123.net/img/rand?artid=135513277
---

# java.net.ConnectException: Connection refused: connectå·²è§£å†³

> **ğŸ¥šä»Šæ—¥é¸¡æ±¤ğŸ¥š**
>
> è¦æœ‰æœ€æœ´ç´ çš„ç”Ÿæ´»å’Œæœ€é¥è¿œçš„æ¢¦æƒ³ï¼Œå³ä½¿æ˜å¤©å¤©å¯’åœ°å†»ï¼Œå±±é«˜æ°´è¿œï¼Œè·¯è¿œé©¬äº¡ã€‚
>
> â€”â€” ã€Šæ«ã€‹
>
> **é‡è§é—®é¢˜è«ç€æ€¥ï¼Œç€æ€¥ä¹Ÿæ²¡ç”¨~ğŸ˜¶â€ğŸŒ«ï¸**
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/1af7781ce3b1223bd03b2b65c1457b9f.gif)

**ç›®å½•**

ğŸ§‚
[1.ä»¤äººå‘éº»çš„é—®é¢˜](#1.%E4%BB%A4%E4%BA%BA%E5%8F%91%E9%BA%BB%E7%9A%84%E9%97%AE%E9%A2%98)

ğŸ¥
[2.æ€è·¯åˆ†æ](#2.%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90%C2%A0)

ğŸ¥“
[3.è¿›å…¥ç™½çƒ­åŒ–](#3.%E8%BF%9B%E5%85%A5%E7%99%BD%E7%83%AD%E5%8C%96%C2%A0)

ğŸ§‡
[4.å…¨æ–¹ä½ç“¦è§£å¯¹æ‰‹](#4.%E5%85%A8%E6%96%B9%E4%BD%8D%E7%93%A6%E8%A7%A3%E5%AF%B9%E6%89%8B)

---

## 1.ä»¤äººå‘éº»çš„é—®é¢˜

**åœ¨Streamæ•´åˆRabbitmqæ—¶ï¼Œçˆ†ä¸‹é¢é”™è¯¯ï¼š**

**java.net.ConnectException: Connection refused: connect**

```vbnet

org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection refused: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:62) ~[spring-rabbit-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:510) ~[spring-rabbit-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:751) ~[spring-rabbit-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:215) ~[spring-rabbit-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2085) ~[spring-rabbit-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2058) ~[spring-rabbit-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2038) ~[spring-rabbit-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.amqp.RabbitHealthIndicator.getVersion(RabbitHealthIndicator.java:49) ~[spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.amqp.RabbitHealthIndicator.doHealthCheck(RabbitHealthIndicator.java:44) ~[spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:82) ~[spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:81) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:38) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:108) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateHealth(HealthEndpointSupport.java:119) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:105) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:83) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:70) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:75) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:65) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282) [spring-core-5.2.2.RELEASE.jar:5.2.2.RELEASE]
	at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:77) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:121) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:96) [spring-boot-actuator-2.2.2.RELEASE.jar:2.2.2.RELEASE]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819) [na:1.8.0_152]
	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801) [na:1.8.0_152]
	at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468) [na:1.8.0_152]
	at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76) [na:1.8.0_152]
	at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309) [na:1.8.0_152]
	at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401) [na:1.8.0_152]
	at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829) [na:1.8.0_152]
	at sun.reflect.GeneratedMethodAccessor115.invoke(Unknown Source) ~[na:na]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357) [na:1.8.0_152]
	at sun.rmi.transport.Transport$1.run(Transport.java:200) [na:1.8.0_152]
	at sun.rmi.transport.Transport$1.run(Transport.java:197) [na:1.8.0_152]
	at java.security.AccessController.doPrivileged(Native Method) [na:1.8.0_152]
	at sun.rmi.transport.Transport.serviceCall(Transport.java:196) [na:1.8.0_152]
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568) [na:1.8.0_152]
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826) [na:1.8.0_152]
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683) [na:1.8.0_152]
	at java.security.AccessController.doPrivileged(Native Method) [na:1.8.0_152]
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682) [na:1.8.0_152]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_152]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_152]
	at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_152]
Caused by: java.net.ConnectException: Connection refused: connect
```

## 2.æ€è·¯åˆ†æ

**è¯´æˆ‘çš„rabbitmqè¿æ¥ä¸ä¸Šï¼Œå»é…ç½®æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°æ²¡å•¥å¤§é—®é¢˜**

**IPï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œç«¯å£å·éƒ½å»åˆï¼Œè€Œä¸”webç•Œé¢ä¹Ÿèƒ½è¿›å…¥**

![](https://i-blog.csdnimg.cn/blog_migrate/5c15f9dbdd3e467bdb3a73fbcbd751b6.png)

## 3.è¿›å…¥ç™½çƒ­åŒ–

**ç”±äºrabbitmqé»˜è®¤ç”¨æˆ·rootæ˜¯åªèƒ½å…è®¸æœ¬åœ°
*ä¸»æœºlocalhostè¿æ¥çš„ï¼Œè€Œ*
æˆ‘çš„rabbitmqæ˜¯åœ¨è™šæ‹Ÿæœºä¸Šä»¥
[docker](https://so.csdn.net/so/search?q=docker&spm=1001.2101.3001.7020 "docker")
åˆ›å»ºçš„ï¼Œå±äºè¿œç¨‹è®¿é—®ï¼Œå› æ­¤è¿æ¥æŠ¥é”™ã€‚**

* **åœ¨webé¡µé¢æ·»åŠ æ–°ç”¨æˆ·**

![](https://i-blog.csdnimg.cn/blog_migrate/a9fcb89a63ebf3c3dc3b4c98f77cd546.png)

* **é…ç½®æ–°åŠ çš„ç”¨æˆ·ä¿¡æ¯**

![](https://i-blog.csdnimg.cn/blog_migrate/4849ab362509b8521ba6038b8047e3bd.png)

ä½†æ˜¯å‘ç°è¿˜æ˜¯ä¸è¡Œ~ï¼Œæ‰€ä»¥ä¸æ˜¯ç”¨æˆ·çš„åŸå› ~

## 4.å…¨æ–¹ä½ç“¦è§£å¯¹æ‰‹

```Groovy
server:
  port: 8801

spring:
  application:
    name: cloud-stream-provider
  cloud:
    stream:
      binders: # åœ¨æ­¤å¤„é…ç½®è¦ç»‘å®šçš„rabbitmqçš„æœåŠ¡ä¿¡æ¯ï¼›
        defaultRabbit: # è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºäºbindingæ•´åˆ
          type: rabbit # æ¶ˆæ¯ç»„ä»¶ç±»å‹
          environment: # è®¾ç½®rabbitmqçš„ç›¸å…³çš„ç¯å¢ƒé…ç½®
            spring:
              rabbitmq:
                host: 192.168.20.129
                port: 5672
                username: xz
                password: 123456
      bindings: # æœåŠ¡çš„æ•´åˆå¤„ç†
        output: # è¿™ä¸ªåå­—æ˜¯ä¸€ä¸ªé€šé“çš„åç§°
          destination: studyExchange # è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°å®šä¹‰
          content-type: application/json # è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡ä¸ºjsonï¼Œæ–‡æœ¬åˆ™è®¾ç½®â€œtext/plainâ€
          binder: defaultRabbit # è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“è®¾ç½®

eureka:
  client: # å®¢æˆ·ç«¯è¿›è¡ŒEurekaæ³¨å†Œçš„é…ç½®
    service-url:
      defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka,http://eureka7003.com:7003/eureka
  instance:
    lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯30ç§’ï¼‰
    lease-expiration-duration-in-seconds: 5 # å¦‚æœç°åœ¨è¶…è¿‡äº†5ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰
    instance-id: send-8801.com  # åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§°
    prefer-ip-address: true     # è®¿é—®çš„è·¯å¾„å˜ä¸ºIPåœ°å€
```

> * **å¦‚æœä½ æ˜¯ç”¨çš„**
>
>   **å…¶ä»–æœåŠ¡å™¨ä¸Š**
>
>   **çš„rabbitmqï¼Œæ¯”å¦‚æˆ‘æ˜¯åœ¨Linuxä¸Šç”¨dockerç›´æ¥æ‹‰å»çš„ï¼ŒæŒ‰ä¸Šé¢é…ç½®æ–¹å¼çš„è¯ï¼Œå¯åŠ¨æ—¶ä¼š**
>
>   **è¯•å›¾è¿æ¥ä¸¤æ¬¡**
>
>   **rabbitmqã€‚**
> * **ç¨‹åº**
>
>   **ç¬¬ä¸€æ¬¡**
>
>   **è¯•å›¾è¿æ¥è®¿é—®çš„å°±æ˜¯**
>
>   **application.ymlä¸­é…ç½®çš„åœ°å€**
>
>   **,æ­¤æ—¶å·²ç»è®¢é˜…æˆåŠŸäº†**
>   ï¼Œ
>   **ä½†æ˜¯ç¨‹åºè¿˜ä¼šåœ¨ä¹‹åè¿›è¡Œ**
>
>   **ç¬¬äºŒæ¬¡**
>
>   **è¿æ¥,æ­¤æ—¶è®¿é—®çš„åœ°å€å°±æ˜¯**
>
>   **localhost:5672**
>
> **åœ¨æˆ‘çš„ç¯å¢ƒä¸­,æˆ‘**
>
> **æœ¬åœ°æ²¡æœ‰rabbitmqç¯å¢ƒ**
>
> **,æ‰€ä»¥ç›´æ¥æŠ¥IOExceptionæ‰€ä»¥,å¦‚æœæ˜¯ä½¿ç”¨çš„è‡ªå·±çš„æœåŠ¡å™¨æ¥é…ç½®,åˆ™éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚**

ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶ï¼š

```Groovy
server:
  port: 8801

spring:
  application:
    name: cloud-stream-provider
  rabbitmq:
    host: 192.168.20.129
    port: 5672
    username: root
    password: 123456
  cloud:
    stream:
      binders:
        defaultRabbit:
          type: rabbit
      bindings:
        output:
          destination: studyExchange
          content-type: application/json
          binder: defaultRabbit

eureka:
  client: # å®¢æˆ·ç«¯è¿›è¡ŒEurekaæ³¨å†Œçš„é…ç½®
    service-url:
      defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka,http://eureka7003.com:7003/eureka
  instance:
    lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯30ç§’ï¼‰
    lease-expiration-duration-in-seconds: 5 # å¦‚æœç°åœ¨è¶…è¿‡äº†5ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰
    instance-id: send-8801.com  # åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§°
    prefer-ip-address: true     # è®¿é—®çš„è·¯å¾„å˜ä¸ºIPåœ°å€
```

**è‡³æ­¤ä½ å·²ç»javaåŠŸåŠ›å·²è‡´å¤§æˆ~**

![](https://i-blog.csdnimg.cn/blog_migrate/8f10a847e3280c193bf55ee3c3b83fbd.gif)