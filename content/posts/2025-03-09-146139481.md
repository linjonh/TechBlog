---
layout: post
title: "Linux一键美化命令行,一键安装zsh终端插件"
date: 2025-03-09 22:03:55 +0800
description: "一键安装zsh，不需要输几行命令"
keywords: "Linux一键美化命令行，一键安装zsh终端插件"
categories: ['未分类']
tags: ['美化', '服务器', 'Linux', 'Bash']
artid: "146139481"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146139481
    alt: "Linux一键美化命令行,一键安装zsh终端插件"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146139481
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146139481
cover: https://bing.ee123.net/img/rand?artid=146139481
image: https://bing.ee123.net/img/rand?artid=146139481
img: https://bing.ee123.net/img/rand?artid=146139481
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Linux一键美化命令行，一键安装zsh终端插件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     zsh应该是很多人第一个用的Linux终端美化软件
     <br/>
     但是其安装略微复杂，让人有些困扰
     <img alt="907a27.png)" src="https://i-blog.csdnimg.cn/direct/2b24909864094835895e67e82e2eeda7.png">
      <br/>
      所以我花了两天写了
      <strong>
       一键安装脚本
      </strong>
      ，实测运行后直接安装好
     </img>
    </p>
    <p>
     适用于Ubuntu、Debian、Red Hat、macOS等系统
     <br/>
     直接安装好zsh 以及常用插件
     <br/>
     autojump 跳转插件
     <br/>
     zsh-syntax-highlighting 语法高亮
     <br/>
     zsh-autosuggestions 自动建议
     <br/>
     zsh-completions 自动补全
    </p>
    <h3>
     <a id="_10">
     </a>
     脚本
    </h3>
    <p>
     先在自己的目录创建一个sh文件，输入
    </p>
    <pre><code class="prism language-bash"><span class="token function">nano</span> ./install_zsh.sh
</code></pre>
    <p>
     复制以下内容，粘贴进去后
     <br/>
     按
     <code>
      ctrl+x
     </code>
     然后按y，回车，保存
    </p>
    <pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 安装Linux美化版命令行</span>

<span class="token comment"># 安装依赖和前置工具</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> <span class="token function">zsh</span> <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"正在安装 Zsh..."</span>
    <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">zsh</span> <span class="token operator">||</span> <span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">zsh</span> <span class="token operator">||</span> brew <span class="token function">install</span> <span class="token function">zsh</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> <span class="token function">git</span> <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"正在安装 Git..."</span>
    <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">git</span> <span class="token operator">||</span> <span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">git</span> <span class="token operator">||</span> brew <span class="token function">install</span> <span class="token function">git</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> <span class="token function">curl</span> <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"正在安装 curl..."</span>
    <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">curl</span> <span class="token operator">||</span> <span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">curl</span> <span class="token operator">||</span> brew <span class="token function">install</span> <span class="token function">curl</span>
<span class="token keyword">fi</span>

<span class="token comment"># 安装 Oh My Zsh（如未安装）</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">"<span class="token variable">${<!-- --><span class="token environment constant">HOME</span>}</span>/.oh-my-zsh"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"正在安装 Oh My Zsh..."</span>
    <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://gitee.com/pocmon/ohmyzsh/raw/master/tools/install.sh<span class="token variable">)</span></span>"</span> <span class="token string">""</span> <span class="token parameter variable">--unattended</span>
<span class="token keyword">fi</span>

<span class="token comment"># 修复路径变量（使用绝对路径）</span>
<span class="token assign-left variable">ZSH_CUSTOM</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${ZSH_CUSTOM<span class="token operator">:-</span>${<!-- --><span class="token environment constant">HOME</span>}</span>/.oh-my-zsh/custom}"</span>

<span class="token comment"># 单独安装 autojump（目录跳转）二进制插件</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> autojump <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"正在安装 autojump..."</span>
    <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> autojump <span class="token operator">||</span> <span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> autojump <span class="token operator">||</span> brew <span class="token function">install</span> autojump
<span class="token keyword">fi</span>

<span class="token comment"># 安装常用插件</span>
<span class="token assign-left variable">plugins</span><span class="token operator">=</span><span class="token punctuation">(</span>
    mirrors/zsh-syntax-highlighting      <span class="token comment"># 语法高亮</span>
    mirrors/zsh-autosuggestions          <span class="token comment"># 自动建议</span>
    yuhldr/zsh-completions               <span class="token comment"># 自动补全</span>
<span class="token punctuation">)</span>

<span class="token comment"># 安装其他插件</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">plugin</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">${plugins<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>"</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token assign-left variable">plugin_name</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${plugin<span class="token operator">##</span>*<span class="token operator">/</span>}</span>"</span>  <span class="token comment"># 提取插件名，去掉可能的路径前缀</span>
    <span class="token assign-left variable">plugin_dir</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${ZSH_CUSTOM}</span>/plugins/<span class="token variable">${plugin_name}</span>"</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">"<span class="token variable">$plugin_dir</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"正在安装插件: <span class="token variable">$plugin_name</span>"</span>
        <span class="token comment"># 将 GitHub 替换为 Gitee 镜像源</span>
        <span class="token function">git</span> clone <span class="token string">"https://gitee.com/<span class="token variable">${plugin}</span>.git"</span> <span class="token string">"<span class="token variable">$plugin_dir</span>"</span> <span class="token parameter variable">--depth</span> <span class="token number">1</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"已安装<span class="token variable">${plugin_name}</span>"</span>
        <span class="token assign-left variable">plugins_list</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token string">"<span class="token variable">$plugin_name</span>"</span><span class="token punctuation">)</span> <span class="token comment">#储存插件列表</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment"># 安装 Powerlevel10k 主题</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">"<span class="token variable">${ZSH_CUSTOM}</span>/themes/powerlevel10k"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"正在安装主题: Powerlevel10k"</span>
    <span class="token comment"># 将 GitHub 替换为 Gitee 镜像源</span>
    <span class="token function">git</span> clone <span class="token parameter variable">--depth</span><span class="token operator">=</span><span class="token number">1</span> <span class="token string">"https://gitee.com/romkatv/powerlevel10k.git"</span> <span class="token string">"<span class="token variable">${ZSH_CUSTOM}</span>/themes/powerlevel10k"</span>
<span class="token keyword">fi</span>

<span class="token comment"># 配置 .zshrc</span>
<span class="token builtin class-name">echo</span> <span class="token string">"正在优化 .zshrc 配置..."</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> ~/.zshrc <span class="token comment">#写入配置</span></span>
export ZSH="\<span class="token variable">${<!-- --><span class="token environment constant">HOME</span>}</span>/.oh-my-zsh"
ZSH_THEME="powerlevel10k/powerlevel10k"
plugins=(<span class="token variable"><span class="token variable">$(</span><span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${plugins_list<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>"</span><span class="token variable">)</span></span>)

# 加载插件前初始化补全系统
fpath+=(\<span class="token variable">${ZSH_CUSTOM}</span>/plugins/zsh-completions/src)
autoload -U compinit &amp;&amp; compinit

# 加载核心框架
source \<span class="token variable">$ZSH</span>/oh-my-zsh.sh

# 加载插件
source \<span class="token variable">${ZSH_CUSTOM}</span>/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source \<span class="token variable">${ZSH_CUSTOM}</span>/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh

# 加载 autojump
[ -f /usr/share/autojump/autojump.sh ] &amp;&amp; source /usr/share/autojump/autojump.sh
[ -f /opt/homebrew/etc/profile.d/autojump.sh ] &amp;&amp; source /opt/homebrew/etc/profile.d/autojump.sh

# 自动应用p10k配置
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
EOF</span>

<span class="token comment">#设置为开机启动</span>
<span class="token function">sudo</span> chsh <span class="token parameter variable">-s</span> /bin/zsh
<span class="token builtin class-name">echo</span> <span class="token string">"已设置zsh为默认终端"</span>

<span class="token builtin class-name">echo</span> <span class="token string">"-------------------"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"安装完成！请运行以下命令："</span>
<span class="token builtin class-name">echo</span> <span class="token string">"zsh                     启动zsh(初次进入会设置主题)"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"source ~/.zshrc         导入配置"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"p10k configure          进入主题设置"</span>
</code></pre>
    <h3>
     <a id="_116">
     </a>
     使用方法
    </h3>
    <p>
     按
     <code>
      ctrl+x
     </code>
     按y 回车，保存为.sh文件后，用bash以管理员模式运行脚本
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">bash</span> ./install_zsh.sh
</code></pre>
    <p>
     <strong>
      然后就成功啦！
     </strong>
    </p>
    <p>
     接着会进入主题配置页面
     <br/>
     比如第一个是，问能不能正确显示这个菱形
     <br/>
     一步一步往下选择喜欢的配置就好，或者一直按1或y
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7d98ba22422f45a283373e0a899e2651.png"/>
    </p>
    <p>
     参考：
     <a href="https://www.haoyep.com/posts/zsh-config-oh-my-zsh/" rel="nofollow">
      zsh 安装与配置，使用 oh-my-zsh 美化终端
     </a>
    </p>
    <p>
     —————
     <br/>
     更新
     <br/>
     2025/3/10：修复插件加载，增加自动设置为默认终端
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031303238303033302f:61727469636c652f64657461696c732f313436313339343831" class_="artid" style="display:none">
 </p>
</div>


