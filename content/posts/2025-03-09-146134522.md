---
layout: post
title: "算法-之-堆"
date: 2025-03-09 16:46:17 +0800
description: "算法 之 堆"
keywords: "算法 之 堆"
categories: ['蓝桥杯', '算法']
tags: ['蓝桥杯', '算法']
artid: "146134522"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146134522
    alt: "算法-之-堆"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146134522
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146134522
cover: https://bing.ee123.net/img/rand?artid=146134522
image: https://bing.ee123.net/img/rand?artid=146134522
img: https://bing.ee123.net/img/rand?artid=146134522
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     算法 之 堆
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <ul>
     <li>
      堆的好处，每次弹出和装入堆，时间复杂度都是
      <code>
       logn
      </code>
     </li>
     <li>
      支持多个优先级排序，只要你的元素是元组，那么第一个优先级就是
      <code>
       第一个元素
      </code>
      ，第二个优先级就是
      <code>
       第二个元素
      </code>
      ，以此类推
     </li>
     <li>
      堆：分为小堆和大堆，
      <code>
       但是python中只有小堆的用法，也就是heapq只能支持小堆，如果想用大堆，将元素全部取反即可
      </code>
     </li>
     <li>
      基本操作：
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">import</span> heapq
<span class="token comment"># 默认是小堆</span>
hea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment"># 弹出并返回堆中的最小值，如果堆为空，则不允许弹出</span>
heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>hea<span class="token punctuation">)</span>
<span class="token comment"># 往堆中加入元素，并维护为小堆</span>
num <span class="token operator">=</span> <span class="token number">1</span>
heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span>num<span class="token punctuation">)</span>
<span class="token comment"># 这里比价好玩的是，判断堆是否为空，其实我们只用判断len(hea)是否等于0</span>
</code></pre>
    <h2>
     <a id="_18">
     </a>
     基础
    </h2>
    <h3>
     <a id="1046_21">
     </a>
     1046.最后一块石头的重量
    </h3>
    <p>
     <a href="https://leetcode.cn/problems/last-stone-weight/description/" rel="nofollow">
      1046.最后一块石头的重量
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1716418aa1694417bed079bd6bf2efee.png"/>
    </p>
    <ul>
     <li>
      使用的是大堆，所以要把元素取反
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">import</span> heapq
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">lastStoneWeight</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> stones<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token comment"># 经典的堆的问题</span>
        <span class="token comment"># 但是这个是小根堆，得转化为负数才行</span>
        hea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> stones<span class="token punctuation">:</span>
            heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span><span class="token operator">-</span>i<span class="token punctuation">)</span>
        <span class="token keyword">while</span> <span class="token builtin">len</span><span class="token punctuation">(</span>hea<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
            y <span class="token operator">=</span> <span class="token operator">-</span>heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>hea<span class="token punctuation">)</span>
            x <span class="token operator">=</span> <span class="token operator">-</span>heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>hea<span class="token punctuation">)</span>
            <span class="token keyword">if</span> x <span class="token operator">==</span> y <span class="token punctuation">:</span>
                <span class="token keyword">continue</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span>x<span class="token operator">-</span>y<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>hea<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>hea<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span>heappop<span class="token punctuation">(</span>hea<span class="token punctuation">)</span>

</code></pre>
    <h3>
     <a id="3264KI_55">
     </a>
     3264.K次乘运算后的最终数组I
    </h3>
    <p>
     <a href="https://leetcode.cn/problems/final-array-state-after-k-multiplication-operations-i/" rel="nofollow">
      3264.K次乘运算后的最终数组I
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5ce1f9ef0db54542a49dda33a0cb7d2f.png"/>
    </p>
    <ul>
     <li>
      入堆的元素，
      <code>
       (nums[i],i)
      </code>
      ,也就是要记录这个下标
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">import</span> heapq
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">getFinalState</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> multiplier<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># 找最小值的类型</span>
        <span class="token comment"># 并且还是有顺序的</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        hea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>
            num<span class="token punctuation">,</span>i <span class="token operator">=</span> heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>hea<span class="token punctuation">)</span>
            num <span class="token operator">*=</span> multiplier
            nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> num
            heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> nums

</code></pre>
    <h3>
     <a id="K_83">
     </a>
     选出和最大的K个元素
    </h3>
    <p>
     <a href="https://leetcode.cn/contest/weekly-contest-440/problems/choose-k-elements-with-maximum-sum/" rel="nofollow">
      选出和最大的K个元素
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4cffe1d6752143fda68e13d57c212752.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e86a96940bc149408e8c7f1a50b99863.png"/>
    </p>
    <ul>
     <li>
      观察时间复杂度，发现这个如果是直接暴力的话，时间复杂度是
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         o 
         
        
          ( 
         
         
         
           n 
          
         
           2 
          
         
        
          ) 
         
        
       
         o(n^2)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1.0641em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            n
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8141em;">
               <span class="" style="top: -3.063em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  2
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
      ,肯定是超标的，但是如果排序的话，就会破坏掉原本的一个对应的关系，所以考虑绑在一起，然后使用堆来维护
      <code>
       空间为k
      </code>
      的一个和值
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">import</span> heapq
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findMaxSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># 有几个关键点，一个就是得保留先前的下标，还有就是得匹配nums1 和 nums2 ,然后按照nums1进行排序</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums1<span class="token punctuation">)</span>
        <span class="token comment"># 时间消耗在这里 nlogn</span>
        newnums <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>nums1<span class="token punctuation">,</span>nums2<span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>n
        <span class="token comment"># 这样后面可以直接替换</span>
        hea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>k
        <span class="token comment"># 现在的任务应该是首先处理一下，就是与当前的元素相同的话，就要先处理</span>
        l <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token comment"># 使用一个变量记录当前的堆的和</span>
        s <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> n<span class="token punctuation">:</span>
            <span class="token comment"># 处理完一个元素，然后向后面查找相同的元素，然后再一起加入堆</span>
            ans<span class="token punctuation">[</span>newnums<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> s
            r <span class="token operator">=</span> l<span class="token operator">+</span><span class="token number">1</span>
            <span class="token keyword">if</span> r <span class="token operator">&gt;=</span> n<span class="token punctuation">:</span>
                <span class="token keyword">break</span>
            <span class="token comment"># 处理元素相同的情况</span>
            <span class="token keyword">while</span> r <span class="token operator">&lt;</span> n <span class="token keyword">and</span> newnums<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> newnums<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                ans<span class="token punctuation">[</span>newnums<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">[</span>newnums<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
                r<span class="token operator">+=</span><span class="token number">1</span>
            <span class="token comment"># 需要往这个hea里面加入 r - l 个元素</span>
            <span class="token keyword">if</span> r <span class="token operator">&gt;=</span> n<span class="token punctuation">:</span>
                <span class="token keyword">break</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 每一次操作就是 logk的时间复杂度</span>
                tmp <span class="token operator">=</span> heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>hea<span class="token punctuation">)</span>
                s <span class="token operator">-=</span> tmp
                <span class="token keyword">if</span> tmp <span class="token operator">&lt;</span> newnums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span>newnums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    s <span class="token operator">+=</span> newnums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span>tmp<span class="token punctuation">)</span>
                    s <span class="token operator">+=</span> tmp
            l <span class="token operator">=</span> r
        <span class="token keyword">return</span> ans
       
</code></pre>
    <h3>
     <a id="2406_137">
     </a>
     2406.将区间分为最少组数
    </h3>
    <p>
     <a href="https://leetcode.cn/problems/divide-intervals-into-minimum-number-of-groups/description/" rel="nofollow">
      2406.将区间分为最少组数
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f7e6c78a2ef94c89a22ae12b58354914.png"/>
    </p>
    <ul>
     <li>
      可以看到这个分组的顺序与现在的
      <code>
       排列是无关
      </code>
      的，所以我们考虑
      <code>
       首先按照区间的左端点进行升序排序
      </code>
     </li>
     <li>
      考虑实际的分组的模拟操作，我们发现
      <code>
       需要找到当前所有分组当中，右端点最小的区间
      </code>
      ，如果当前的
      <code>
       left&lt;这个最小的right
      </code>
      ，那么我们就需要重新开一个新的组，如果
      <code>
       left&gt;这个最小的right
      </code>
      ，那么我们就可以更新这个
      <code>
       right
      </code>
      ,考虑使用
      <code>
       堆
      </code>
      维护
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">import</span> heapq
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minGroups</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> intervals<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token comment"># 可以看到这个划分与实际的挑选的顺序无关，所以我们可以进行先排序处理</span>
        intervals<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key <span class="token operator">=</span> <span class="token keyword">lambda</span> x <span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment"># 接下来就要进行遍历，找到一种数据结构，可以找到最小值并且还能更新的</span>
        <span class="token comment"># 那就考虑使用最小堆</span>
        hea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> left<span class="token punctuation">,</span>right <span class="token keyword">in</span> intervals<span class="token punctuation">:</span>
            <span class="token keyword">if</span> hea <span class="token keyword">and</span> left <span class="token operator">&gt;</span> hea<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>hea<span class="token punctuation">)</span>
                heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span>right<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hea<span class="token punctuation">,</span>right<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>hea<span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="_163">
     </a>
     重排元素
    </h2>
    <h3>
     <a id="_767_165">
     </a>
     [模版题] 767.重构字符串
    </h3>
    <p>
     <a href="https://leetcode.cn/problems/reorganize-string/" rel="nofollow">
      767.重构字符串
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a10feef9bde24c93a7f26058089b60fe.png"/>
    </p>
    <p>
     <a href="https://leetcode.cn/problems/reorganize-string/solutions/2779462/tan-xin-gou-zao-pai-xu-bu-pai-xu-liang-c-h9jg/" rel="nofollow">
      灵神讲解
     </a>
    </p>
    <ul>
     <li>
      总的来说直接参透这个模版即可，模版的功能：就是可以用于构造相邻的元素不同的序列
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">reorganizeString</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        <span class="token comment"># 如果长度是奇数，那么相同的数量不能超过 n//2 + 1</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        a <span class="token operator">=</span> Counter<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token punctuation">)</span>
        m <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> m <span class="token operator">&gt;</span> n <span class="token operator">-</span> m <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">""</span>
        ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token operator">*</span>n
        i <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> ch<span class="token punctuation">,</span>cnt <span class="token keyword">in</span> a<span class="token punctuation">:</span>
            <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">:</span>
                ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ch
                i <span class="token operator">+=</span> <span class="token number">2</span>
                <span class="token keyword">if</span> i <span class="token operator">&gt;=</span>n<span class="token punctuation">:</span>
                    i <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment"># 从奇数下标开始填</span>
        <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>ans<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="1054_196">
     </a>
     1054.距离相等的条形码
    </h3>
    <p>
     <a href="https://leetcode.cn/problems/distant-barcodes/description/" rel="nofollow">
      1054.距离相等的条形码
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/460f96ecce60444b88e6b2d4df406c0f.png"/>
    </p>
    <ul>
     <li>
      模版题目，减少了可行性的判断
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">rearrangeBarcodes</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> barcodes<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>barcodes<span class="token punctuation">)</span>
        ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>n
        a <span class="token operator">=</span> Counter<span class="token punctuation">(</span>barcodes<span class="token punctuation">)</span><span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token punctuation">)</span>
        i <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> num <span class="token punctuation">,</span>cnt <span class="token keyword">in</span> a<span class="token punctuation">:</span>
            <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">:</span>
                ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> num
                i<span class="token operator">+=</span><span class="token number">2</span>
                <span class="token keyword">if</span> i <span class="token operator">&gt;=</span> n<span class="token punctuation">:</span>
                    <span class="token comment"># 从奇数开始</span>
                    i <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> ans

</code></pre>
    <h2>
     <a id="K_221">
     </a>
     第K大/小元素
    </h2>
    <h2>
     <a id="_225">
     </a>
     反悔堆
    </h2>
    <h3>
     <a id="LCP30_228">
     </a>
     LCP.30魔塔游戏
    </h3>
    <p>
     <a href="https://leetcode.cn/problems/p0NxJO/description/" rel="nofollow">
      LCP.30魔塔游戏
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a7242d9ba17d42618a3fdd082a05974c.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/30994d684c6a47bda581cf8bcd6b49cb.png"/>
     </img>
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> heapq
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">magicTower</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token comment"># 首先判断能否去？其实就统计总和是否》=0即可。</span>
        <span class="token comment"># 在可以到达的时候，最多调整次数为负数的次数</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
        <span class="token comment"># 可以到达</span>
        <span class="token comment"># 其实可以统计一个数的左边最小的负数,包含当前的数</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        cur <span class="token operator">=</span> <span class="token number">1</span>
        hp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        ans <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token comment"># 使用小根堆进行存储当前的负数的情况</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 负数的话就加入</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>hp<span class="token punctuation">,</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment"># 无论正负，都加入cur</span>
            cur<span class="token operator">+=</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token comment"># 如果栈中还有元素，并且当前没有血量,就弹出反悔最小的负数</span>
            <span class="token keyword">while</span> hp <span class="token keyword">and</span> cur <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                p <span class="token operator">=</span> heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>hp<span class="token punctuation">)</span>
                ans<span class="token operator">+=</span><span class="token number">1</span>
                cur<span class="token operator">+=</span><span class="token builtin">abs</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
        <span class="token keyword">return</span> ans

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f37343835303636312f:61727469636c652f64657461696c732f313436313334353232" class_="artid" style="display:none">
 </p>
</div>


