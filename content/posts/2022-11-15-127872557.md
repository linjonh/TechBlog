---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33333030353131372f:61727469636c652f64657461696c732f313237383732353537"
layout: post
title: "SpringBooté¡¹ç›®æ‰“åŒ…æ—¶é…ç½®æ–‡ä»¶åŒºåˆ†æ—¥å¸¸æµ‹è¯•é¢„å‘æ­£å¼ç¯å¢ƒ"
date: 2022-11-15 20:58:09 +08:00
description: "æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨SpringBooté¡¹ç›®ä¸­é…ç½®å¤šä¸ªç¯å¢ƒï¼ŒåŒ…æ‹¬æ—¥å¸¸ã€æµ‹è¯•ã€é¢„å‘å’Œæ­£å¼ç¯å¢ƒï¼Œé€šè¿‡åˆ›å»º"
keywords: "springbootä¸åŒç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶æ€ä¹ˆåŒºåˆ†"
categories: ['è¿ç»´ç›¸å…³']
tags: ['Spring', 'Spring', 'Java', 'Boot']
artid: "127872557"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=127872557
    alt: "SpringBooté¡¹ç›®æ‰“åŒ…æ—¶é…ç½®æ–‡ä»¶åŒºåˆ†æ—¥å¸¸æµ‹è¯•é¢„å‘æ­£å¼ç¯å¢ƒ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=127872557
featuredImagePreview: https://bing.ee123.net/img/rand?artid=127872557
---

# SpringBooté¡¹ç›®æ‰“åŒ…æ—¶é…ç½®æ–‡ä»¶åŒºåˆ†æ—¥å¸¸ã€æµ‹è¯•ã€é¢„å‘ã€æ­£å¼ç¯å¢ƒ

## å‰è¨€ğŸŠ

åœ¨æˆ‘ä»¬å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œä¸€èˆ¬æœ‰å››å¥—ç¯å¢ƒï¼šæ—¥å¸¸ã€æµ‹è¯•ã€é¢„å‘ã€æ­£å¼ã€‚æ—¥å¸¸ç¯å¢ƒä½œä¸ºæˆ‘ä»¬å¼€å‘ç¯å¢ƒï¼›æµ‹è¯•ç¯å¢ƒç»™æµ‹è¯•åŒå­¦æµ‹è¯•åŠŸèƒ½ï¼›é¢„å‘ç¯å¢ƒç»™æ­£å¼ç¯å¢ƒå‘å¸ƒæ—¶æä¾›å‡†å¤‡ï¼›æ­£å¼ç¯å¢ƒåˆ™æ˜¯ç¨³å®šçš„ç”Ÿäº§ç¯å¢ƒã€‚
  
è¿™å››å¥—ç¯å¢ƒï¼Œæ•°æ®åº“ã€ä¸­é—´ä»¶ä»¥åŠå…¶ä»–ä¸€äº›é…ç½®å¤šå¤šå°‘å°‘éƒ½æœ‰ä¸€äº›ä¸åŒï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬åªç”¨ä¸€ä¸ªapplicationé…ç½®æ–‡ä»¶çš„è¯è‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ï¼Œ
`ä¸€èˆ¬çš„åšæ³•æ˜¯å‡†å¤‡4ä¸ªé…ç½®æ–‡ä»¶ï¼Œç”¨æ¥åŒºåˆ†4ä¸ªç¯å¢ƒï¼Œæ¯ä¸ªæ–‡ä»¶å¡«å…¥çš„é…ç½®å†…å®¹äº’ä¸å¹²æ‰°ï¼Œç„¶ååœ¨é¡¹ç›®æ‰“åŒ…çš„æ—¶å€™æŒ‡å®šæ–‡ä»¶å³å¯ã€‚`

å¦‚ä¸‹å›¾ï¼š
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/f3d80c10cfad22b43d34b1891bd346c8.png)

## å…·ä½“åšæ³•

### 1. åˆ›å»º5ä¸ªé…ç½®æ–‡ä»¶

è¿™5ä¸ªé…ç½®æ–‡ä»¶åˆ†åˆ«ä¸ºï¼š

* application.properties
* application-daily.properties
* application-test.properties
* application-pre.properties
* application-publish.properties

é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/ba1e744ad1a208c84612b9ab241490f3.png)

è¿™é‡Œå¯èƒ½æœ‰åŒå­¦æœ‰ç–‘æƒ‘ï¼Œæ—¢ç„¶æœ‰äº†4ä¸ªç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œä¸ºå•¥è¿˜è¦æœ‰
**application.properties**
è¿™ä¸ªæ–‡ä»¶ï¼Ÿ
  
`è¿™é‡Œçš„application.propertiesæˆ‘ä»¬å¯ä»¥å½“åšæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶å®¹å™¨ï¼Œå®ƒå¯ä»¥å°†å…¶ä»–é…ç½®æ–‡ä»¶çš„å†…å®¹åŠ åˆ°è¿™é‡Œæ¥ã€‚è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯å› ä¸ºSpringBooté¡¹ç›®å¯åŠ¨çš„æ—¶å€™åªè®¤è¯†application.propertiesæ–‡ä»¶ï¼Œä¸è®¤è¯†å…¶ä»–å››ä¸ªã€‚`

### 2. åœ¨pom.xmlæ–‡ä»¶ä¸­å¦‚ä¸‹é…ç½®

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.7.5</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>
    <groupId>com.example</groupId>
    <artifactId>SpringBoot-config</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>SpringBoot-config</name>
    <description>Demo project for Spring Boot</description>
    <properties>
        <java.version>1.8</java.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <!-- æ·»åŠ å››ä¸ªç¯å¢ƒçš„å˜é‡ï¼Œå˜é‡åä¸ºenvironment -->
    <profiles>
        <profile>
            <id>daily</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <environment>daily</environment>
            </properties>
        </profile>
        <profile>
            <id>test</id>
            <properties>
                <environment>test</environment>
            </properties>
        </profile>
        <profile>
            <id>pre</id>
            <properties>
                <environment>pre</environment>
            </properties>
        </profile>
        <profile>
            <id>publish</id>
            <properties>
                <environment>publish</environment>
            </properties>
        </profile>
    </profiles>

    <!-- æŒ‡å®šæ‰“åŒ…æ’ä»¶ï¼Œä»¥åŠè§£å‹è·¯å¾„ -->
    <build>
        <finalName>springbootconfig</finalName>
        <resources>
            <resource>
                <!-- æŒ‡å®šé…ç½®æ–‡ä»¶æ‰€åœ¨çš„resourceç›®å½• -->
                <directory>src/main/resources</directory>
                <includes>
                    <include>application.properties</include>
                    <include>application-${environment}.properties</include>
                </includes>
                <filtering>true</filtering>
            </resource>
            <resource>
                <directory>src/main/resources</directory>
                <includes>
                    <include>logback.xml</include>
                </includes>
                <filtering>false</filtering>
            </resource>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>false</filtering>
                <excludes>
                    <exclude>*.xml</exclude>
                    <exclude>*.properties</exclude>
                </excludes>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <version>2.1.13.RELEASE</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <mainClass>com.example.springbootconfig.SpringBootConfigApplication</mainClass>
                </configuration>
            </plugin>
            <!-- è§£å‹fat jaråˆ°target/${project-name}ç›®å½• -->
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <configuration>
                            <tasks>
                                <unzip
                                        src="${project.build.directory}/${project.build.finalName}.${project.packaging}"
                                        dest="${project.build.directory}/springbootconfig"/>
                            </tasks>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>

    </build>
</project>

```

**è¿™é‡Œæˆ‘çš„é…ç½®æœ‰3ä¸ªéƒ¨åˆ†ï¼Œç›´æ¥å¤åˆ¶æˆ‘è¿™ä¸ªæ–‡ä»¶çš„åŒå­¦è¦æ³¨æ„äº†ã€‚**

#### ç¬¬ä¸€éƒ¨åˆ†

```xml
<!-- æ·»åŠ å››ä¸ªç¯å¢ƒçš„å˜é‡ï¼Œå˜é‡åä¸ºenvironment -->
    <profiles>
        <profile>
            <id>daily</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <environment>daily</environment>
            </properties>
        </profile>
        <profile>
            <id>test</id>
            <properties>
                <environment>test</environment>
            </properties>
        </profile>
        <profile>
            <id>pre</id>
            <properties>
                <environment>pre</environment>
            </properties>
        </profile>
        <profile>
            <id>publish</id>
            <properties>
                <environment>publish</environment>
            </properties>
        </profile>
    </profiles>

```

> è¿™ä¸ªéƒ¨åˆ†å¯ä»¥ç›´æ¥å¤åˆ¶ã€‚è¿™é‡Œè®¾ç½®environmentå˜é‡ï¼Œå®ƒçš„å€¼ä¸€å…±æœ‰4ä¸ªå³dailyã€testã€preã€publishï¼Œé€šè¿‡activeByDefaultæ ‡ç­¾è®¾ç½®dailyä¸ºé»˜è®¤é…ç½®ã€‚

#### ç¬¬äºŒéƒ¨åˆ†

```xml
<resources>
    <resource>
        <!-- æŒ‡å®šé…ç½®æ–‡ä»¶æ‰€åœ¨çš„resourceç›®å½• -->
        <directory>src/main/resources</directory>
        <includes>
            <include>application.properties</include>
            <include>application-${environment}.properties</include>
        </includes>
        <filtering>true</filtering>
    </resource>
    <resource>
        <directory>src/main/resources</directory>
        <includes>
            <include>logback.xml</include>
        </includes>
        <filtering>false</filtering>
    </resource>
    <resource>
        <directory>src/main/resources</directory>
        <filtering>false</filtering>
        <excludes>
            <exclude>*.xml</exclude>
            <exclude>*.properties</exclude>
        </excludes>
    </resource>
</resources>

```

> è¿™ä¸ªéƒ¨åˆ†ä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶ã€‚è¿™é‡Œé…ç½®æ˜¯æŒ‡å®šæ‰“åŒ…é‚£äº›ç±»å‹çš„æ–‡ä»¶ï¼Œ
> `æœ‰æ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå‘ç°æœ‰äº›æ–‡ä»¶ä¸ç®¡æ€ä¹ˆæ‰“åŒ…éƒ½æ²¡æ³•æ‰“åˆ°jaråŒ…é‡Œé¢å»ï¼Œå…¶å®å°±æ˜¯è¿™ä¸ªåœ°æ–¹æ²¡æœ‰é…ç½®ï¼Œé»˜è®¤ç»™è¿‡æ»¤æ‰äº†ã€‚`

#### ç¬¬ä¸‰éƒ¨åˆ†

```xml
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.1</version>
        <configuration>
            <source>1.8</source>
            <target>1.8</target>
            <encoding>utf-8</encoding>
        </configuration>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-source-plugin</artifactId>
        <version>2.2</version>
        <executions>
            <execution>
                <id>attach-sources</id>
                <goals>
                    <goal>jar</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <finalName>${project.build.finalName}</finalName>
        </configuration>
    </plugin>
    <plugin>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-maven-plugin</artifactId>
        <version>2.1.13.RELEASE</version>
        <executions>
            <execution>
                <goals>
                    <goal>repackage</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <mainClass>com.example.springbootconfig.SpringBootConfigApplication</mainClass>
        </configuration>
    </plugin>
</plugins>

```

> è¿™ä¸ªéƒ¨åˆ†è¦æ³¨æ„åé¢çš„mainClassï¼Œè¿™é‡Œè¦å†™ä½ ä»¬è‡ªå·±çš„ç±»è·¯å¾„ï¼Œä¸è¦æé”™äº†ã€‚è¿™é‡ŒæŒ‡å®šäº†æ‰“åŒ…å’Œè§£å‹çš„æ’ä»¶å’Œæ–‡ä»¶è·¯å¾„ï¼Œè¿˜æœ‰å¯åŠ¨ç±»ã€‚è¿™é‡Œçš„æ’ä»¶ä¸€ä¸ªéƒ½ä¸èƒ½å°‘ä¸”è·¯å¾„ä¸è¦é…ç½®é”™è¯¯ï¼Œå¦åˆ™æœ‰å¯èƒ½ä¼šå‡ºç°æ‰“åŒ…å¤±è´¥æˆ–è€…å¯åŠ¨æ—¶æ‰¾ä¸åˆ°å¯åŠ¨ç±»

### 3. åœ¨application.propertiesä¸­åŠ å…¥ç¯å¢ƒå˜é‡

**application.properties**
æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªé…ç½®ï¼š
`spring.profiles.active`
ã€‚æŒ‡å®šå®ƒå°±å¯ä»¥æŒ‡å®šå½“å‰è¿è¡Œçš„ç¯å¢ƒï¼Œé…ç½®å¦‚ä¸‹ï¼š

```properties
spring.application.name=SpringBoot-config
server.port=8080
management.server.port=8081
spring.mvc.view.prefix=/
spring.mvc.view.suffix=.html

#é€šè¿‡é…ç½®çš„æ–¹å¼æ¿€æ´»ç¯å¢ƒ
spring.profiles.active=@environment@ 

```

å¦‚æœè¿™ä¸ªæ—¶å€™ä½ æ˜¯ä½¿ç”¨çš„æ˜¯ideaå¼€å‘å·¥å…·ï¼Œé‚£ä¹ˆåœ¨å³ä¾§çš„mavenæ’ä»¶ä¸­å°±å·²ç»å¯ä»¥çœ‹åˆ°è¿™å‡ ä¸ªç¯å¢ƒäº†ï¼š
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/4695e75bbdae3a51476e3118585a9993.png)
  
å½“ç„¶æ²¡æœ‰ideaå¼€å‘å·¥å…·çš„åŒå­¦ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ç›´æ¥ä½¿ç”¨æ‰“åŒ…æŒ‡ä»¤å°±å¯ä»¥äº†

> æ—¥å¸¸ç¯å¢ƒæ‰“åŒ…æŒ‡ä»¤
>   
> mvn clean package -Dmaven.test.skip=true -P=daily

> æµ‹è¯•ç¯å¢ƒæ‰“åŒ…æŒ‡ä»¤
>   
> mvn clean package -Dmaven.test.skip=true -P=test

> é¢„å‘ç¯å¢ƒæ‰“åŒ…æŒ‡ä»¤
>   
> mvn clean package -Dmaven.test.skip=true -P=pre

> æ­£å¼ç¯å¢ƒæ‰“åŒ…æŒ‡ä»¤
>   
> mvn clean package -Dmaven.test.skip=true -P=publish

æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å¦‚ä¸‹ï¼š
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/bc73587151e994388e6e016d6bdec48b.png)
  
è¿™é‡Œå°±ä¼šå‡ºç°ä½ æƒ³è¦æŒ‡å®šç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œapplication.propertiesä¸­çš„environmentå˜é‡ä¹Ÿä¼šè¢«æ›¿æ¢ä¸º

```properties
spring.application.name=SpringBoot-config
server.port=8080
management.server.port=8081
spring.mvc.view.prefix=/
spring.mvc.view.suffix=.html

#ç¯å¢ƒæ¿€æ´»
spring.profiles.active=publish 

```

å¹³æ—¶ç›´æ¥è¿è¡Œçš„æ—¶å€™å°±ä¼šé»˜è®¤ä½¿ç”¨æ—¥å¸¸ç¯å¢ƒé…ç½®è¿è¡Œã€‚