---
layout: post
title: "全方位-JVM-调优参数详解"
date: 2025-03-12 15:39:53 +0800
description: "本文全面列举了JVM调优参数，涵盖内存管理、垃圾回收、JIT编译、线程、性能监控与诊断及其他方面。内存管理涉及堆、方法区、直接内存等配置；垃圾回收包含各类回收器及相关特定参数；JIT编译关乎代码优化；线程参数可调整栈空间等；性能监控与诊断提供丰富日志及工具支持；还有其他实用参数。这些参数对优化Java应用性能至关重要，需依据具体场景合理调整，以提升应用响应速度、吞吐量及资源利用率 。"
keywords: "全方位 JVM 调优参数详解"
categories: ['未分类']
tags: ['Jvm']
artid: "146206894"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146206894
    alt: "全方位-JVM-调优参数详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146206894
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146206894
cover: https://bing.ee123.net/img/rand?artid=146206894
image: https://bing.ee123.net/img/rand?artid=146206894
img: https://bing.ee123.net/img/rand?artid=146206894
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     全方位 JVM 调优参数详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_JVM__0">
     </a>
     全方位 JVM 调优参数详解
    </h2>
    <p>
     JVM 的调优对于 Java 应用的性能至关重要。以下为你详细列举各类 JVM 调优参数，希望能满足你对“所有”参数的需求。
    </p>
    <h3>
     <a id="_4">
     </a>
     一、内存管理参数
    </h3>
    <h4>
     <a id="_6">
     </a>
     堆内存参数
    </h4>
    <p>
     •
     <strong>
      堆初始大小与最大值
     </strong>
     <br/>
     ◦
     <code>
      -Xms
     </code>
     ：设置 JVM 启动时堆内存的初始大小。如
     <code>
      -Xms1g
     </code>
     表示初始堆内存为 1GB。
     <br/>
     ◦
     <code>
      -Xmx
     </code>
     ：设置堆内存的最大可分配大小。例如
     <code>
      -Xmx4g
     </code>
     ，即堆内存最大可达 4GB。
     <br/>
     •
     <strong>
      年轻代参数
     </strong>
     <br/>
     ◦
     <code>
      -Xmn
     </code>
     ：设置新生代（Young Generation）的大小。例如
     <code>
      -Xmn512m
     </code>
     表示新生代大小为 512MB。
     <br/>
     ◦
     <code>
      -XX:NewSize
     </code>
     和
     <code>
      -XX:MaxNewSize
     </code>
     ：分别单独设置新生代的初始大小和最大大小，功能与
     <code>
      -Xmn
     </code>
     类似，但可分别配置。
     <br/>
     ◦
     <code>
      -XX:SurvivorRatio
     </code>
     ：设置 Eden 区与每个 Survivor 区的大小比例，默认值为 8 。例如
     <code>
      -XX:SurvivorRatio=6
     </code>
     ，Eden 区与单个 Survivor 区比例为 6:1。
     <br/>
     ◦
     <code>
      -XX:TargetSurvivorRatio
     </code>
     ：设置 Survivor 区的目标使用率，默认值为 50% 。当 Survivor 区的使用率达到该值时，存活对象会被晋升到老年代。
     <br/>
     ◦
     <code>
      -XX:MaxTenuringThreshold
     </code>
     ：设置对象在新生代中经历多少次 GC 后晋升到老年代，默认值为 15 。例如
     <code>
      -XX:MaxTenuringThreshold=10
     </code>
     。
     <br/>
     •
     <strong>
      老年代参数
     </strong>
     <br/>
     ◦
     <code>
      -XX:OldSize
     </code>
     和
     <code>
      -XX:MaxOldSize
     </code>
     ：分别设置老年代的初始大小和最大大小。
    </p>
    <h4>
     <a id="_19">
     </a>
     方法区（元空间）参数
    </h4>
    <p>
     •
     <code>
      -XX:MetaspaceSize
     </code>
     ：设置元空间的初始大小。例如
     <code>
      -XX:MetaspaceSize=256m
     </code>
     。
     <br/>
     •
     <code>
      -XX:MaxMetaspaceSize
     </code>
     ：设置元空间的最大大小。如
     <code>
      -XX:MaxMetaspaceSize=1g
     </code>
     。
     <br/>
     •
     <code>
      -XX:MinMetaspaceFreeRatio
     </code>
     和
     <code>
      -XX:MaxMetaspaceFreeRatio
     </code>
     ：分别设置元空间在 GC 后最小和最大空闲比例，默认值分别为 40% 和 70% 。当元空间的空闲比例低于
     <code>
      MinMetaspaceFreeRatio
     </code>
     或高于
     <code>
      MaxMetaspaceFreeRatio
     </code>
     时，会触发相应的 GC 操作。
    </p>
    <h4>
     <a id="_24">
     </a>
     直接内存参数
    </h4>
    <p>
     •
     <code>
      -XX:MaxDirectMemorySize
     </code>
     ：设置直接内存的最大大小。如果不指定，默认与
     <code>
      -Xmx
     </code>
     相同。例如
     <code>
      -XX:MaxDirectMemorySize=512m
     </code>
     。
    </p>
    <h4>
     <a id="_27">
     </a>
     堆外内存相关
    </h4>
    <p>
     •
     <code>
      -XX:NativeMemoryTracking
     </code>
     ：开启本地内存跟踪功能，可设置为
     <code>
      summary
     </code>
     （仅跟踪总体内存使用情况）或
     <code>
      detail
     </code>
     （跟踪详细的内存分配信息），如
     <code>
      -XX:NativeMemoryTracking=detail
     </code>
     。但开启此功能会增加一定的性能开销。
    </p>
    <h3>
     <a id="GC_30">
     </a>
     二、垃圾回收（GC）相关参数
    </h3>
    <h4>
     <a id="_32">
     </a>
     垃圾回收器通用参数
    </h4>
    <p>
     •
     <code>
      -XX:+UseSerialGC
     </code>
     ：启用串行垃圾回收器。
     <br/>
     •
     <code>
      -XX:+UseParallelGC
     </code>
     ：启用并行垃圾回收器。
     <br/>
     •
     <code>
      -XX:+UseConcMarkSweepGC
     </code>
     ：启用 CMS 垃圾回收器（JDK 9 及以后废弃）。
     <br/>
     •
     <code>
      -XX:+UseG1GC
     </code>
     ：启用 G1 垃圾回收器。
    </p>
    <h4>
     <a id="_38">
     </a>
     串行垃圾回收器参数
    </h4>
    <p>
     •
     <code>
      -XX:ParallelGCThreads
     </code>
     ：设置串行 GC 的线程数，默认值为 1（单线程）。
    </p>
    <h4>
     <a id="_41">
     </a>
     并行垃圾回收器参数
    </h4>
    <p>
     •
     <code>
      -XX:ParallelGCThreads
     </code>
     ：设置并行 GC 的工作线程数，默认根据 CPU 核心数自动调整。
     <br/>
     •
     <code>
      -XX:MaxGCPauseMillis
     </code>
     ：设置并行 GC 期望的最大停顿时间（仅作为参考）。
     <br/>
     •
     <code>
      -XX:GCTimeRatio
     </code>
     ：设置并行 GC 的吞吐量目标，默认值为 99 ，表示 GC 时间与应用运行时间的比例为 1:99 。
    </p>
    <h4>
     <a id="CMS__46">
     </a>
     CMS 垃圾回收器参数
    </h4>
    <p>
     •
     <code>
      -XX:CMSInitiatingOccupancyFraction
     </code>
     ：设置 CMS 在老年代占用率达到多少时开始回收，默认值为 68% 。
     <br/>
     •
     <code>
      -XX:+UseCMSInitiatingOccupancyOnly
     </code>
     ：只依据
     <code>
      CMSInitiatingOccupancyFraction
     </code>
     触发 CMS 回收。
     <br/>
     •
     <code>
      -XX:+CMSScavengeBeforeRemark
     </code>
     ：在 CMS 重新标记前进行一次 Minor GC，减少重新标记时的对象数量。
     <br/>
     •
     <code>
      -XX:+CMSParallelInitialMarkEnabled
     </code>
     ：开启 CMS 并行初始标记阶段。
     <br/>
     •
     <code>
      -XX:+CMSClassUnloadingEnabled
     </code>
     ：启用 CMS 对永久代（或元空间）中类的卸载功能。
    </p>
    <h4>
     <a id="G1__53">
     </a>
     G1 垃圾回收器参数
    </h4>
    <p>
     •
     <code>
      -XX:MaxGCPauseMillis
     </code>
     ：设置 G1 期望的最大 GC 停顿时间。
     <br/>
     •
     <code>
      -XX:InitiatingHeapOccupancyPercent
     </code>
     ：设置触发并发标记周期的堆占用率阈值，默认值为 45% 。
     <br/>
     •
     <code>
      -XX:ConcGCThreads
     </code>
     ：设置 G1 并发 GC 线程数。
     <br/>
     •
     <code>
      -XX:G1HeapRegionSize
     </code>
     ：设置 G1 中每个 Region 的大小，可选值为 1MB、2MB、4MB、8MB、16MB、32MB 等，默认根据堆大小自动选择。
     <br/>
     •
     <code>
      -XX:G1ReservePercent
     </code>
     ：设置堆中保留空间的百分比，用于降低晋升失败的概率，默认值为 10% 。
    </p>
    <h4>
     <a id="ZGC_JDK_11__60">
     </a>
     ZGC 垃圾回收器参数（JDK 11 及以后）
    </h4>
    <p>
     •
     <code>
      -XX:+UseZGC
     </code>
     ：启用 ZGC 垃圾回收器。
     <br/>
     •
     <code>
      -XX:ZCollectionInterval
     </code>
     ：设置 ZGC 自动触发垃圾回收的时间间隔（单位：秒）。
     <br/>
     •
     <code>
      -XX:ZAllocationSpikeTolerance
     </code>
     ：设置 ZGC 对内存分配尖峰的容忍度。
    </p>
    <h4>
     <a id="Shenandoah_JDK_12__65">
     </a>
     Shenandoah 垃圾回收器参数（JDK 12 及以后）
    </h4>
    <p>
     •
     <code>
      -XX:+UseShenandoahGC
     </code>
     ：启用 Shenandoah 垃圾回收器。
     <br/>
     •
     <code>
      -XX:ShenandoahGCHeuristics
     </code>
     ：设置 Shenandoah 的垃圾回收策略，如
     <code>
      adaptive
     </code>
     、
     <code>
      compact
     </code>
     等。
    </p>
    <h3>
     <a id="JIT__69">
     </a>
     三、JIT 编译相关参数
    </h3>
    <p>
     •
     <code>
      -XX:CompileThreshold
     </code>
     ：设置方法调用次数达到多少后触发 JIT 编译，默认值为 10000 次。
     <br/>
     •
     <code>
      -XX:+TieredCompilation
     </code>
     ：启用分层编译。
     <br/>
     •
     <code>
      -XX:CICompilerCount
     </code>
     ：设置 JIT 编译器的线程数量。
     <br/>
     •
     <code>
      -XX:InterpreterProfilePercentage
     </code>
     ：设置解释器执行时进行热点探测的比例，默认值为 33% 。
     <br/>
     •
     <code>
      -XX:OnStackReplacePercentage
     </code>
     ：设置栈上替换（OSR）编译的触发比例，默认值为 933 。
    </p>
    <h3>
     <a id="_76">
     </a>
     四、线程相关参数
    </h3>
    <p>
     •
     <code>
      -Xss
     </code>
     ：设置每个线程的栈空间大小。例如
     <code>
      -Xss1m
     </code>
     表示每个线程栈大小为 1MB。
     <br/>
     •
     <code>
      -XX:ThreadStackSize
     </code>
     ：与
     <code>
      -Xss
     </code>
     功能相同，用于设置线程栈大小。
     <br/>
     •
     <code>
      -XX:ActiveProcessorCount
     </code>
     ：手动指定 JVM 可使用的处理器数量。
    </p>
    <h3>
     <a id="_81">
     </a>
     五、性能监控与诊断参数
    </h3>
    <h4>
     <a id="_83">
     </a>
     日志打印相关
    </h4>
    <p>
     •
     <code>
      -XX:+PrintGCDetails
     </code>
     ：打印详细的 GC 日志。
     <br/>
     •
     <code>
      -XX:+PrintGCDateStamps
     </code>
     ：在 GC 日志中添加时间戳。
     <br/>
     •
     <code>
      -XX:+PrintTenuringDistribution
     </code>
     ：打印对象年龄分布信息。
     <br/>
     •
     <code>
      -XX:+PrintHeapAtGC
     </code>
     ：在每次 GC 前后打印堆内存使用情况。
     <br/>
     •
     <code>
      -XX:+PrintClassHistogram
     </code>
     ：在发生
     <code>
      Ctrl+C
     </code>
     中断或 Full GC 时打印类直方图信息。
     <br/>
     •
     <code>
      -XX:+PrintFlagsFinal
     </code>
     ：打印所有 JVM 参数的最终值。
    </p>
    <h4>
     <a id="_91">
     </a>
     性能监控工具相关
    </h4>
    <p>
     •
     <code>
      -XX:+UnlockCommercialFeatures -XX:+FlightRecorder
     </code>
     ：启用 Java Flight Recorder（JFR），需商业许可（OpenJDK 11 及以后版本对 JFR 进行了开源）。
     <br/>
     •
     <code>
      -XX:StartFlightRecording
     </code>
     ：设置 JFR 的启动参数，如
     <code>
      -XX:StartFlightRecording=name=myrecording,settings=profile
     </code>
     。
     <br/>
     •
     <code>
      -Dcom.sun.management.jmxremote
     </code>
     ：开启 JMX 功能，用于远程监控和管理 JVM。
     <br/>
     •
     <code>
      -Dcom.sun.management.jmxremote.port
     </code>
     ：指定 JMX 连接的端口号。
     <br/>
     •
     <code>
      -Dcom.sun.management.jmxremote.authenticate
     </code>
     ：是否启用 JMX 认证。
     <br/>
     •
     <code>
      -Dcom.sun.management.jmxremote.ssl
     </code>
     ：是否启用 JMX SSL 加密。
    </p>
    <h4>
     <a id="_99">
     </a>
     其他监控参数
    </h4>
    <p>
     •
     <code>
      -XX:+PerfDisableSharedMem
     </code>
     ：禁用性能计数器共享内存，避免因共享内存竞争导致的性能问题。
     <br/>
     •
     <code>
      -XX:+UnlockDiagnosticVMOptions -XX:+LogCompilation
     </code>
     ：开启 JIT 编译日志记录。
    </p>
    <h3>
     <a id="_103">
     </a>
     六、其他参数
    </h3>
    <p>
     •
     <code>
      -XX:+UseLargePages
     </code>
     ：启用大页内存支持。
     <br/>
     •
     <code>
      -XX:+DisableExplicitGC
     </code>
     ：禁止显式调用
     <code>
      System.gc()
     </code>
     触发 Full GC。
     <br/>
     •
     <code>
      -XX:+AlwaysPreTouch
     </code>
     ：在 JVM 启动时将堆内存的所有页都分配到物理内存中。
     <br/>
     •
     <code>
      -XX:+UseNUMA
     </code>
     ：启用 NUMA 架构优化。
     <br/>
     •
     <code>
      -XX:+UseAdaptiveSizePolicy
     </code>
     ：启用自适应大小策略，JVM 会根据应用的运行情况自动调整堆内存大小和相关参数。
     <br/>
     •
     <code>
      -XX:ReservedCodeCacheSize
     </code>
     ：设置 JIT 编译代码缓存的大小，默认值为 48MB 。例如
     <code>
      -XX:ReservedCodeCacheSize=128m
     </code>
     。
    </p>
    <p>
     这仍然不是绝对的“所有”参数，JVM 的参数体系非常庞大且复杂，不同版本可能会有新增或调整的参数。但上述列表涵盖了日常调优和性能分析中常见的大部分参数。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6b616c6c65323032312f:61727469636c652f64657461696c732f313436323036383934" class_="artid" style="display:none">
 </p>
</div>


