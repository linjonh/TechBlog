---
layout: post
title: "java的事件监听"
date: 2021-03-01 11:30:41 +0800
description: "絮絮叨叨进行过Java图形界面编程的同学会发现，各种控件的点击、打开、关闭等操作，都注册了对应的事件"
keywords: "java监听事件和处理事件"
categories: ['设计模式']
tags: ['Java']
artid: "114256713"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=114256713
    alt: "java的事件监听"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=114256713
featuredImagePreview: https://bing.ee123.net/img/rand?artid=114256713
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     java的事件监听
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1__0">
     </a>
     1. 絮絮叨叨
    </h3>
    <ul>
     <li>
      进行过Java图形界面编程的同学会发现，各种控件的点击、打开、关闭等操作，都注册了对应的事件监听器，并可以根据不同的事件执行不同操作。
     </li>
     <li>
      例如，同样是button，点击
      <code>
       关闭
      </code>
      可以直接关闭窗口；点击
      <code>
       登录
      </code>
      可以在后台实现用户名、密码的校验，并根据校验结果执行不同的操作。
     </li>
     <li>
      在上面的例子中：button是事件源，点击操作是事件，事件发生后，根据事件执行不同的操作（关闭窗口、校验用户名及密码），这是监听器的行为。
     </li>
    </ul>
    <p>
     总结起来
    </p>
    <ul>
     <li>
      事件源：执行某些操作时，产生事件；事件源中注册了监听器，将产生的事件传给监听器，由监听器处理事件
     </li>
     <li>
      事件：由事件源执行某些操作时产生，事件中包含事件源，这样监听器可以根据事件源执行特定的处理操作
     </li>
     <li>
      监听器：很多事件的处理方法，根据事件或事件源，执行不同操作
     </li>
    </ul>
    <h3>
     <a id="2__9">
     </a>
     2. 自己的理解
    </h3>
    <ul>
     <li>
      事件的监听、处理流程：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f24412b57718263674d7e98e194eee86.png"/>
     </li>
     <li>
      事件源、事件、监听器之间的关系：
      <ul>
       <li>
        事件源通过事件监听器注册方法，为自身添加事件监听器
       </li>
       <li>
        事件监听器中，实现了事件的handler方法：根据传入的事件或事件的事件源，执行具体操作
       </li>
       <li>
        事件源的某个动作，将（主动）触发事件监听器的handler方法处理事件
        <br/>
        <img src="https://i-blog.csdnimg.cn/blog_migrate/c4a4def20a8fbecb8bd1d10921b468b5.png" width="70%"/>
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="3__18">
     </a>
     3. 编程示例
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        事件源：
       </strong>
       事件监听器注册方法 + 具体操作，触发事件监听器的handler方法
      </p>
      <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>vivo<span class="token punctuation">.</span>lucy<span class="token punctuation">.</span>listener</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AnimalListener</span> animalListener<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addAnimalListener</span><span class="token punctuation">(</span><span class="token class-name">AnimalListener</span> animalListener<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>animalListener <span class="token operator">=</span> animalListener<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"event source: Trigger event —— "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">" will eat!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        animalListener<span class="token punctuation">.</span><span class="token function">eatEventHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AnimalEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Animal</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 为事件源添加监听器</span>
        <span class="token class-name">AnimalListener</span> listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnimalListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dog<span class="token punctuation">.</span><span class="token function">addAnimalListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 触发事件，会被事件监听器监听到</span>
        dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        事件：
       </strong>
       继承Java自带的EventObject，自己只修改了其构造方法，打印了一些信息。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>vivo<span class="token punctuation">.</span>lucy<span class="token punctuation">.</span>listener</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EventObject</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnimalEvent</span> <span class="token keyword">extends</span> <span class="token class-name">EventObject</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">AnimalEvent</span><span class="token punctuation">(</span><span class="token class-name">Object</span> source<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">)</span> source<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"event: Generate event —— "</span> <span class="token operator">+</span> animal<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is eating!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        事件监听器：
       </strong>
       实现Java自带的EventListener，创建事件handler（入参为具体的事件）
      </p>
      <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>vivo<span class="token punctuation">.</span>lucy<span class="token punctuation">.</span>listener</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EventListener</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EventObject</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnimalListener</span> <span class="token keyword">implements</span> <span class="token class-name">EventListener</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eatEventHandler</span><span class="token punctuation">(</span><span class="token class-name">EventObject</span> eventObject<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 从事件中获取事件源</span>
        <span class="token class-name">Animal</span> source <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">)</span> eventObject<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 打印事件源的名称</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"listener: Get event —— "</span> <span class="token operator">+</span> source<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is eating!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       执行结果如下：
       <br/>
       <img src="https://i-blog.csdnimg.cn/blog_migrate/735aec51537a4998cafcbd3c4e2f0479.png" width="60%"/>
      </p>
     </li>
     <li>
      <p>
       虽然事件、事件源、监听器环环相扣，但是自己更喜欢按照下面的步骤实现事件监听
      </p>
      <ul>
       <li>
        定义事件：事件中将包含事件源（可以通过构造函数设置）
       </li>
       <li>
        定义监听器：监听器中有事件的handler方法，用于处理对应的事件
       </li>
       <li>
        定义事件源：包含监听器注册方法、具体的操作（生成事件，触发监听器的handler方法）
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="4__98">
     </a>
     4. 关于事件监听器
    </h3>
    <ul>
     <li>
      <p>
       EventListener是一个没有抽象方法的接口，一般JDK中的监听器接口是存在抽象方法的。
      </p>
     </li>
     <li>
      <p>
       在为事件源注册监听器时，需要创建匿名类并实现对应的抽象方法。
      </p>
     </li>
     <li>
      <p>
       例如，为java swing中的按钮注册监听器的代码如下
      </p>
      <pre><code class="prism language-java">button1<span class="token punctuation">.</span><span class="token function">addActionListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ActionListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ActionEvent</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        label<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"按钮被单击了 "</span><span class="token operator">+</span><span class="token punctuation">(</span>clicks<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" 次"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031343435343533382f:61727469636c652f64657461696c732f313134323536373133" class_="artid" style="display:none">
 </p>
</div>


