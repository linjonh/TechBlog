---
layout: post
title: "MongoDB-数据导出与导入实战指南附完整命令"
date: 2025-03-13 06:47:55 +0800
description: "在 MongoDB 运维中，数据备份与恢复是核心操作。检查目标 MongoDB 服务是否运行，防火墙是否放行端口（如。的路径），工具会自动识别子目录中的数据库。工具，演示如何通过命令行导出和导入数据，正常输出应包含子目录（以数据库名命名）及。：目标数据库连接字符串（密码 Xdsdsu。（密码中若包含特殊字符必须转义）。确认用户名、密码及转义符是否正确。：URI 中包含多个节点地址和。：导出数据存储路径，默认生成。：必须指定备份文件根目录（即。：连接字符串，需注意 %40。，确保自动故障转移。"
keywords: "MongoDB 数据导出与导入实战指南（附完整命令）"
categories: ['未分类']
tags: ['数据库', 'Mongodb']
artid: "146220864"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146220864
    alt: "MongoDB-数据导出与导入实战指南附完整命令"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146220864
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146220864
cover: https://bing.ee123.net/img/rand?artid=146220864
image: https://bing.ee123.net/img/rand?artid=146220864
img: https://bing.ee123.net/img/rand?artid=146220864
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     MongoDB 数据导出与导入实战指南（附完整命令）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h5>
     <strong>
      1. 场景说明
     </strong>
    </h5>
    <p>
     在 MongoDB 运维中，数据备份与恢复是核心操作。本文使用
     <code>
      mongodump
     </code>
     和
     <code>
      mongorestore
     </code>
     工具，演示如何通过命令行导出和导入数据，
     <strong>
      解决副本集连接、路径指定等关键问题
     </strong>
     。
    </p>
    <hr/>
    <h5>
     <strong>
      2. 数据导出（mongodump）
     </strong>
    </h5>
    <h6>
     <strong>
      2.1 导出命令详解
     </strong>
    </h6>
    <pre><code class="language-bash">mongodump --uri="mongodb://root:Dsy%40123@dds-uf66dd9c38f2a41756-pub.mongodb.rds.aliyuncs.com:3717,dds-uf66dg9c38f2a42679-pub.mongodb.rds.aliyuncs.com:3717/admin?maxPoolSize=20&amp;minPoolSize=1&amp;replicaSet=mgset-70730161" --out=/Volumes/work/mongo</code></pre>
    <ul>
     <li>
      <p>
       <strong>
        参数解析
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          --uri
         </code>
         ：连接字符串
        </p>
       </li>
       <li>
        <p>
         <code>
          --out
         </code>
         ：导出数据存储路径，默认生成
         <code>
          dump
         </code>
         文件夹，此处指定为
         <code>
          /Volumes/work/mongo
         </code>
         。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <h6>
     <strong>
      2.2 验证导出结果
     </strong>
    </h6>
    <pre><code class="language-bash"># 查看备份文件结构
ls /Volumes/work/mongo</code></pre>
    <ul>
     <li>
      <p>
       正常输出应包含子目录（以数据库名命名）及
       <code>
        .bson
       </code>
       和
       <code>
        .metadata.json
       </code>
       文件。
      </p>
     </li>
    </ul>
    <h5>
     <strong>
      3. 数据导入（mongorestore）
     </strong>
    </h5>
    <h6>
     <strong>
      3.1 导入命令详解
     </strong>
    </h6>
    <pre>mongorestore --uri="mongodb://admin:Xdsdsu%40123@143.223.43.130:217/admin" /Volumes/work/mongo</pre>
    <ul>
     <li>
      <p>
       <strong>
        参数解析
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          --uri
         </code>
         ：目标数据库连接字符串
        </p>
       </li>
       <li>
        <p>
         <strong>
          末尾路径
         </strong>
         ：必须指定备份文件根目录（即
         <code>
          mongodump --out
         </code>
         的路径），工具会自动识别子目录中的数据库。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <strong>
      4. 常见问题 FAQ
     </strong>
    </h5>
    <p>
     <strong>
      Q1：导入时提示
      <code>
       Failed: error connecting to DB server
      </code>
     </strong>
    </p>
    <ul>
     <li>
      <p>
       检查目标 MongoDB 服务是否运行，防火墙是否放行端口（如
       <code>
        27017
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       确认用户名、密码及转义符是否正确。
      </p>
     </li>
    </ul>
    <p>
     <strong>
      Q2：如何仅导入指定数据库或集合？
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        导入单个数据库
       </strong>
       ：在路径后追加数据库目录名：
      </p>
      <pre><code class="language-bash">mongorestore --uri="..." /Volumes/work/mongo/&lt;database_name&gt;</code></pre>
     </li>
     <li>
      <p>
       <strong>
        导入单个集合
       </strong>
       ：添加
       <code>
        --nsInclude
       </code>
       参数：
      </p>
      <pre><code class="language-bash">mongorestore --uri="..." --nsInclude=&lt;database_name&gt;.&lt;collection_name&gt; /Volumes/work/mongo</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      Q3：备份文件过大，如何压缩？
     </strong>
    </p>
    <ul>
     <li>
      <p>
       导出时添加
       <code>
        --gzip
       </code>
       ：
      </p>
      <pre><code class="language-bash">mongodump --uri="..." --gzip --out=/path/to/dump</code></pre>
     </li>
     <li>
      <p>
       导入时自动解压：
      </p>
      <pre><code class="language-bash">mongorestore --uri="..." --gzip /path/to/dump</code></pre>
     </li>
    </ul>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33373637353231392f:61727469636c652f64657461696c732f313436323230383634" class_="artid" style="display:none">
 </p>
</div>


