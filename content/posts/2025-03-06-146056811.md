---
arturl_encode: "68747470733a2f:2f626c6f672e6373646e2e6e65742f636f66666565776f6f2f:61727469636c652f64657461696c732f313436303536383131"
layout: post
title: "004-用DeepSeek搞定复杂的需求分析和设计"
date: 2025-03-06 02:08:28 +0800
description: "我希望DS从这些原始需求开始，分析和设计出一份逻辑完整、标准化、高规格的以微服务架构为目标的需求规格说明书出来。结果可以说是相当惊艳！它所生成的需求分析和设计相当靠谱！我仅用不到三个小时，就让DS生成了这份需求规格说明书。"
keywords: "004-用DeepSeek搞定复杂的需求分析和设计"
categories: ['未分类']
tags: ['需求分析', '软件工程', '规格说明书', '微服务', '人工智能', 'Ai']
artid: "146056811"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146056811
    alt: "004-用DeepSeek搞定复杂的需求分析和设计"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146056811
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146056811
cover: https://bing.ee123.net/img/rand?artid=146056811
image: https://bing.ee123.net/img/rand?artid=146056811
img: https://bing.ee123.net/img/rand?artid=146056811
---

# 004-用DeepSeek搞定复杂的需求分析和设计

在前面的文章中，我声称AI能够成为驱动企业数字化的大脑。到底行不行呢？为了验证我心中的这一论断，我决定从需求分析开始，验证AI是否能够担任一个靠谱的需求分析师。

### 1. 一个需求分析案例

我找到了几年前一个小商品市场管理项目的原始需求，相当粗糙，仅有几份需求会谈的会议纪要、几张Excel报表样表、零散的接口说明和若干UI设计图。没有流程图、没有用户场景、没有用例分析……所有信息都是散乱的。

我希望DS从这些原始需求开始，分析和设计出一份逻辑完整、标准化、高规格的以微服务架构为目标的需求规格说明书出来。结果可以说是
**相当惊艳！**
它所生成的需求分析和设计
**相当靠谱！**
先看下面完全由DS生成的完整的需求规格说明书目录，包含了微服务架构设计要求的几乎所有细节：

```
XX小商品市场管理项目需求规格说明书 
一、原始需求
二、微服务识别（表一） 
三、业务对象设计（表二.1至表二.5） 
  表二.1：商户业务对象设计 
  表二.2：支付订单业务对象设计 
  表二.3：库存事务业务对象设计 
  表二.4：统计维度业务对象设计 
  表二.5：安全策略业务对象设计 
四、微服务标准结构设计（表三.1至表三.5） 
  表三.1：商户管理微服务标准结构设计 
  表三.2：支付处理微服务标准结构设计 
  表三.3：库存管理微服务标准结构设计 
  表三.4：报表管理微服务标准结构设计 
  表三.5：权限管理微服务标准结构设计 
五、微服务接口设计（表四.1至表四.5） 
  表四.1：商户管理微服务接口设计 
  表四.2：支付处理微服务接口设计 
  表四.3：库存管理微服务接口设计 
  表四.4：报表管理微服务接口设计 
  表四.5：权限管理微服务接口设计 
六、配置服务设计（表五） 
	表五：配置服务清单 
七、微服务依赖关系分析（表六） 
	表六：微服务依赖关系 
八、用户场景映射设计（表七） 
	表七：用户场景映射 
九、单元测试用例设计（表八） 
	表八：单元测试用例 
十、功能测试用例设计（表九） 
	表九：功能测试用例 
十一、微服务分层建议（表十） 
	表十：微服务分层建议 
十二、微服务设计优化（表十一） 
	表十一：微服务设计优化 
十三、AI智能检查报告（表十二） 
	表十二：AI智能检查报告 
```

我仅用不到三个小时，就让DS生成了这份需求规格说明书。当然，我之前花了几天时间将一整套我称之为乐高城模式的企业架构设计方法喂给了它，又花了几天时间“调教”，让它学会了需求分析的方法和步骤，并以规定的模板输出结果。

DS的需求分析和微服务设计在我看来十分满意，已经做到了最好，出现偏差和缺漏的原因在于需求质量太差，缺失了太多信息并有矛盾。我将DS的设计成果给当年负责此项目的设计师看，问他这份设计是否靠谱，他看了之后给我的回复就四个字“
**相当靠谱**
”，另加一句感叹“
**AI太强，他没想到的AI都想到了**
”。

### 2. 举两个的例子。

#### 示例一： **只要调教得当，DS会成为一个“聪明又守规矩”的六边形战士。**

在这个例子中，我只发送了这样一条简单的指令：

```
很好，请执行WLD-P001的指令2
```

注：WLD-P001是我喂给DS的需求分析设计的步骤，“指令2”表示让它从原始需求中识别业务实体。

下面的例子是DS的思考过程，可以看到，它在试图严格地遵守《R001需求分析指南》，《R002需求规格说明书模板》，还要遵循我喂给它的《乐高城的方法论》，这是它
**守规矩**
的表现。同时，它又会根据行业规范思考原始需求中缺失的信息，自主地试图补充完整缺失的业务流程，这又是它
**聪明**
的表现。

```
已深度思考（用时 110.6 秒）

好的，我现在需要处理用户关于执行WLD-P001的指令2的请求。首先，我要确认指令2的具体内容。根据之前的参考内容，WLD-P001的指令2是“识别业务实体：请依据‘乐高城知识库’中的方法，分析小商品市场管理项目业务需求，执行R001‘第一步：微服务识别’的‘任务1.1：识别业务实体’，直到‘-任务结束-’标志。”

接下来，我需要查阅相关的规范和模板，特别是R001指南中的任务1.1步骤。根据用户提供的参考资料，R001的“任务1.1：识别业务实体”包括以下步骤：分析业务需求、提取业务实体、智能补充业务实体、定义业务实体、检查并输出结果。这里的业务实体需要从需求文档中提取，并且可能需要根据行业规范补充额外的实体。

用户提供的参考资料中，小商品市场管理项目的需求文档已经识别出5个核心业务实体：商户、支付订单、库存事务、统计维度、安全策略。但是根据乐高城的方法论，可能还需要进行智能补充。例如，交易流水、财务结算等可能作为补充实体。

我需要确保输出的表格符合R002模板中的表一.1的要求，包括业务实体的中文名、英文名、属性、规则等。同时每个实体需要标注来源（需求或智能补充）。此外，需要确保所有原始需求中的实体都被覆盖，没有遗漏，并进行验证。

现在需要检查是否有遗漏的实体。根据WR001文档和BC系列文件，是否有其他实体未被提及。例如，可能有摊位编码、库存预警、支付终端等补充实体需要考虑。

接下来，生成符合要求的Markdown表格，包含所有已识别和补充的业务实体，确保每个字段正确，如数据类型、规则要求、属性来源等。同时，确保脚注正确引用来源文档，如WR001、BC001等。

过程中需要确认参考资料中的例子是否匹配用户提供的小商品市场项目的数据。例如，商户管理中的电子档案存管来自BC002，支付接口的安全规范来自BC001等。

最后，验证生成的内容是否符合所有步骤和规范，尤其是R001任务1.1的输出要求和R002的模板格式，确保没有遗漏任何步骤或字段。
```

下面是DS的识别成果，关键是脚注部分为识别项标记出了来源参考，有原始需求文档，有基础方法论，也有它自己的推理。就这严密程度，人工无论如何也做不到。这又反过来证明高质量的原始需求将会让DS做出极高质量的需求分析和设计。

```

```markdown
# 小商品市场项目需求规格说明书（续）[^1]

---

## 二、业务实体识别（表一.1）

**字段**:
- **业务实体**: 根据需求识别出的业务实体，例如用户、商品、订单 [^1]。
- **英文名**: 业务实体的英文名称，例如`User` [^1]。
- **业务含义描述**: 业务实体在需求中的业务含义 [^1]。
- **业务规则**: 业务实体在需求中要遵循的业务规则 [^1]。
- **数据规则**: 业务实体在需求中要遵循的数据规则 [^1]。
- **业务操作**: 在需求中识别出的对业务实体的操作[^1]。
- **提取来源**: 标志业务实体的识别来源，从需求中识别标记为“需求文档”，AI智能补充的标记为“智能补充” [^1]。

### 执行步骤：
**第一步：业务实体识别**（基于R001任务1.1规范）[^2]

```markdown
### 表一.1：业务实体清单
| 中文名称       | 英文名称          | 业务含义                                                                 | 业务规则                                                                 | 数据规则                     | 业务操作                     | 提取来源   |
|-----------------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|------------------------------|------------------------------|------------|
| 商户           | Merchant          | 管理摊位编号分配/状态变更                                                | 1. 摊位编码按ORG+4位流水生成<br>2. 状态机包括待入驻/激活/停用三态[^3]   | merchant_code唯一性约束      | 创建商户/更新商户状态        | 需求文档   |
| 支付订单       | PaymentOrder      | 处理银联二维码支付交易流程                                               | 1. 需完成RSA3072签名校验<br>2. 交易流水号全局唯一[^4]                    | amount必须≥0.01元            | 创建订单/T+1分账清算         | 需求文档   |
| 库存事务       | InventoryTx       | 记录虚拟库存采购销售变动                                                 | 1. 每笔支付生成两条事务（进/销）<br>2. 日终自动匹配抵消[^5]             | tx_type限定为PURCHASE/SALE   | 生成事务/执行库存结算        | 需求文档   |
| 统计维度       | ReportDimension   | 支撑11类经营分析报表的底层数据维度                                        | 1. 包含时间/商户/品类/支付方式四维度<br>2. 支持动态组合查询[^6]          | 维度值需建立数据字典         | 维度配置/报表数据聚合        | 需求文档   |
| 安全策略       | SecurityPolicy    | 控制商户-摊位-市场三级数据访问权限                                        | 1. 支持实时权限生效<br>2. 访问日志保留≥180天[^7]                         | policy_id需加密存储          | 角色创建/权限策略绑定       | 需求文档   |
| 交易流水       | TransactionFlow   | 记录所有支付操作的原始交易凭证                                            | 1. 流水号遵循YYMMDD+8位序列规则<br>2. 交易记录不可篡改[^8]               | flow_no严格递增              | 流水生成/交易凭证查询        | 智能补充   |
| 财务结算       | FinancialSettle   | 处理商户分账资金清算与对账                                                | 1. T+1自动发起清算<br>2. 异常订单需人工复核[^9]                          | 结算金额精度保留小数点后两位 | 清算执行/异常订单冲正        | 智能补充   |

**完整性验证**（依据B217业务实体识别规范）[^10]
1. 主业务实体覆盖度验证：WR001需求文档中所有功能模块（商户/支付/库存/报表/权限）均建立对应业务实体
2. 规则映射率验证：BC001支付规范、BC003报表规则等外部规范要求均体现于业务实体规则定义
3. 智能补充率验证：新增2个业务实体（交易流水/财务结算）完善支付清算闭环流程
```

[^1]: 执行WLD-P001指令2规范（路径：./需求文档/process/WLD-P001-AI智能需求分析过程.md） 
[^2]: 遵循R001任务1.1步骤定义（路径：./需求规范/R001.md 第一步）
[^3]: 来源于WR001第2.1章商户管理规则
[^4]: 引用BC001接口规范第3.2节安全条款
[^5]: WR001库存关联规则第4章+BC003库存处理建议
[^6]: BC003报表维度配置说明附表A
[^7]: 基于B230权限模型第5章审计规范
[^8]: 智能补充依据银联支付平台交易流水标准
[^9]: 智能补充参照B215金融结算核心模型
[^10]: 验证依据B217标准化检测流程第8节
```

**执行过程说明：**
1. **需求分析**：遍历WR001需求文档五大功能模块（商户/支付/库存/报表/权限），识别出5个主业务实体
2. **规范映射**：通过BC系列接口文档补充数据规则定义（如金额精度、编码规则等）
3. **智能扩展**：根据金融支付行业规范补充交易流水和财务结算实体，完善业务闭环
4. **属性溯源**：标注各属性来源，区分来自需求文档或AI扩展，确保可追溯性
5. **规则校验**：将BC001安全规范、WR001库存规则等外部要求转化为结构化业务规则
```

#### 示例二：DS对高阶架构方法的理解力秒杀大部分架构师

在对识别出的微服务进行分层治理设计的架构方法部分，我仅花了十几分钟训练它。本不抱什么什么希望，没想到它给出的分层建议相当不俗，让我惊叹的是它居然准确理解并引用了分层治理方法论里的方法里的扩展策略。

![](https://i-blog.csdnimg.cn/direct/c7ead8c0b140475693275c1d7be9cd64.png)

DS对架构方法的理解能力真是超凡脱俗。

最后说点大家关心的话题，根据今天的展示成果，AI会替换掉需求分析师和架构师么？我的结论是:

1. **会替换掉一大部分**
   ：那些只会遵照指南和模板工作人很危险。AI需求分析和设计非常靠谱，逻辑严密，面面俱到，效率惊人，人工无论如何也做不到。
2. **会升级一小部分人**
   ：那些深刻掌握软件工程方法，能够根据项目特性和要求定制规范、流程和模板，并且深入理解，知道怎么训练AI并与之协作的人。

---

**我的探索还会进行下去，敬请收藏+关注，与我一起拥抱AI。**