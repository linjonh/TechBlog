---
layout: post
title: "自学嵌入式第29天-epollsqlite3"
date: 2025-03-07 20:19:05 +0800
description: "create table 表名(列名1 数据类型， 列名2  数据类型， ....)；：只在状态变化时通知一次，适合高性能场景，但需要确保一次性处理完所有数据，否则可能丢失事件。select * from 表名 where 列名 like \"%梅\"；update 表名 set 列名=新值，列名=新值 where 条件；select * from 表名 where 列名 关系运算符 值；select * from 表名 order by 列名 DESC；select 列名1，列名2  from 表名；"
keywords: "自学嵌入式第29天-----epoll、sqlite3"
categories: ['未分类']
tags: ['运维', '网络', '服务器']
artid: "146104211"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146104211
    alt: "自学嵌入式第29天-epollsqlite3"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146104211
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146104211
cover: https://bing.ee123.net/img/rand?artid=146104211
image: https://bing.ee123.net/img/rand?artid=146104211
img: https://bing.ee123.net/img/rand?artid=146104211
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     自学嵌入式第29天-----epoll、sqlite3
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     1.
     <strong>
      正确选择触发模式（ET 和 LT）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        水平触发（LT）
       </strong>
       ：默认模式，只要文件描述符处于就绪状态，
       <code>
        epoll_wait
       </code>
       会持续通知。适合大多数场景，编程简单。
      </p>
     </li>
     <li>
      <p>
       <strong>
        边缘触发（ET）
       </strong>
       ：只在状态变化时通知一次，适合高性能场景，但需要确保一次性处理完所有数据，否则可能丢失事件。
      </p>
     </li>
     <li>
      <p>
       <strong>
        注意
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         在 ET 模式下，必须循环读取或写入数据，直到返回
         <code>
          EAGAIN
         </code>
         或
         <code>
          EWOULDBLOCK
         </code>
         。
        </p>
       </li>
       <li>
        <p>
         如果未处理完数据，
         <code>
          epoll_wait
         </code>
         不会再通知，可能导致事件丢失。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     2.
     <strong>
      正确处理事件
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        事件类型
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          EPOLLIN
         </code>
         ：数据可读。
        </p>
       </li>
       <li>
        <p>
         <code>
          EPOLLOUT
         </code>
         ：数据可写。
        </p>
       </li>
       <li>
        <p>
         <code>
          EPOLLERR
         </code>
         ：发生错误。
        </p>
       </li>
       <li>
        <p>
         <code>
          EPOLLHUP
         </code>
         ：对端关闭连接。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        注意
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         必须处理
         <code>
          EPOLLERR
         </code>
         和
         <code>
          EPOLLHUP
         </code>
         事件，否则可能导致程序异常。
        </p>
       </li>
       <li>
        <p>
         在
         <code>
          EPOLLIN
         </code>
         事件中，确保读取所有数据（特别是在 ET 模式下）。
        </p>
       </li>
       <li>
        <p>
         在
         <code>
          EPOLLOUT
         </code>
         事件中，避免频繁触发（可以通过动态添加/删除
         <code>
          EPOLLOUT
         </code>
         事件来优化）。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     3.
     <strong>
      文件描述符管理
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        添加/修改/删除文件描述符
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         使用
         <code>
          epoll_ctl
         </code>
         的
         <code>
          EPOLL_CTL_ADD
         </code>
         、
         <code>
          EPOLL_CTL_MOD
         </code>
         和
         <code>
          EPOLL_CTL_DEL
         </code>
         操作。
        </p>
       </li>
       <li>
        <p>
         确保文件描述符有效，避免重复添加或遗漏删除。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        注意
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         文件描述符关闭后，必须从
         <code>
          epoll
         </code>
         实例中删除，否则可能导致未定义行为。
        </p>
       </li>
       <li>
        <p>
         在多线程环境中，文件描述符的管理需要加锁保护。
        </p>
        <hr/>
        <p>
         sqlite3：
        </p>
        <p>
         sqlite3 xxx.db
         <br/>
         1.  sqlite的命令
         <br/>
         .help   查询手册
         <br/>
         .tables   查看数据库中的表
         <br/>
         .headers on/off  打开/关闭表头
         <br/>
         .mode column   设置左对齐
         <br/>
         .quit           退出数据库
        </p>
        <p>
         2.  sqlite支持的SQL（结构化序列语言）语言
        </p>
        <p>
         数据类型：
         <br/>
         INTEGER ： 整形
         <br/>
         REAL：浮点型
         <br/>
         TEXT：文本字符串类型
         <br/>
         NULL ：空
        </p>
        <p>
         1. 创建一张表
         <br/>
         create table 表名(列名1 数据类型， 列名2  数据类型， ....)；
        </p>
        <p>
         2. 插入表格
         <br/>
         insert into 表名 values(值1， 值2， 值3, ...);
        </p>
        <p>
         3. 查询数据库中的表
         <br/>
         <br/>
         查询表中的所有数据：
         <br/>
         select * from 表名；
         <br/>
         <br/>
         查找指定列：
         <br/>
         select 列名1，列名2  from 表名；
        </p>
        <p>
         条件查找：
         <br/>
         select * from 表名 where 列名 关系运算符 值；
         <br/>
         关系运算符：
         <br/>
         =
         <br/>
         &gt;
         <br/>
         &lt;
         <br/>
         !=
         <br/>
         &gt;=
         <br/>
         &lt;=
         <br/>
         or  (||)
         <br/>
         and (&amp;&amp;)
         <br/>
         <br/>
         模糊查找：
         <br/>
         select * from 表名 where 列名 like "%梅"；
         <br/>
         <br/>
         % ： 可以匹配多个字符
         <br/>
         _  :   只能匹配一个字符
         <br/>
         <br/>
         有序查找：
         <br/>
         升序查找：
         <br/>
         select * from 表名 order by 列名 ASC；
         <br/>
         <br/>
         降序查找：
         <br/>
         select * from 表名 order by 列名 DESC；
        </p>
        <p>
         4. 删除数据
         <br/>
         delete from 表名 where 条件；
         <br/>
         <br/>
         5. 修改数据
         <br/>
         update 表名 set 列名=新值，列名=新值 where 条件；
         <br/>
         <br/>
         6.  删除表
         <br/>
         drop table 表名；
        </p>
        <p>
         <br/>
         3. sqlite提供的C API接口
        </p>
       </li>
      </ul>
     </li>
    </ul>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38303138333639332f:61727469636c652f64657461696c732f313436313034323131" class_="artid" style="display:none">
 </p>
</div>


