---
layout: post
title: "创建加密sqlite数据库"
date: 2025-01-06 06:45:47 +0800
description: "http://blog.csdn.net/xjbx/article/details/2712236设"
keywords: "sqlite3带密码新建"
categories: ['未分类']
tags: ['Sqlite', 'C']
artid: "57076236"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=57076236
  alt: "创建加密sqlite数据库"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=57076236
featuredImagePreview: https://bing.ee123.net/img/rand?artid=57076236
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     创建加密sqlite数据库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     http://blog.csdn.net/xjbx/article/details/2712236
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     设置下密码就可以了
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     http://bbs.csdn.net/topics/380018685
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     编译为静态库，并具备加密功能？
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     CppSQLite3U
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     最近在做一个winform的程序，考虑用
     <a href="http://www.sqlite.org/" rel="nofollow noopener noreferrer" style="color:navy; text-decoration:none" target="_blank">
      Sqlite
     </a>
     的数据库，小巧而实用，比Access强多了，不过需要加密，不过free版本没有实现加密，有一些c++的实现：比如：
     <a href="http://www.sqlite.com.cn/MySqlite/3/253.Html" rel="nofollow noopener noreferrer" style="color:navy; text-decoration:none" target="“_blank”">
      http://www.sqlite.com.cn/MySqlite/3/253.Html
     </a>
     和
     <a href="http://www.cppblog.com/niewenlong/archive/2007/06/01/25261.html" rel="nofollow noopener noreferrer" style="color:navy; text-decoration:none" target="_blank">
      http://www.cppblog.com/niewenlong/archive/2007/06/01/25261.html
     </a>
     。不过，鉴于我对c++不是很精通，于是就采用了
     <a href="http://sqlite.phxsoftware.com/" rel="nofollow noopener noreferrer" style="color:navy; text-decoration:none" target="_blank">
      ADO.NET 2.0 SQLite Data Provider
     </a>
     这样可以直接利用它来创建一个
     <a href="http://www.watch-life.net/net-tip/sqlite-encrypted.html" rel="nofollow noopener noreferrer" style="color:navy; text-decoration:none" target="_blank">
      加密的sqlite数据库
     </a>
     。
     <br/>
     有关c#代码如下：
     <br/>
     1、创建空的sqlite数据库。
    </p>
    <div class="code" style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:13px">
     <br/>
     //数据库名的后缀你可以直接指定，甚至没有后缀都可以
     <p style="line-height:1.5; margin:10px auto">
      //方法一：创建一个空sqlite数据库，用IO的方式
     </p>
     <p style="line-height:1.5; margin:10px auto">
      FileStream fs = File.Create("c://test.db");
     </p>
     <p style="line-height:1.5; margin:10px auto">
      //方法二：用SQLiteConnection
     </p>
     <p style="line-height:1.5; margin:10px auto">
      SQLiteConnection.CreateFile("c://test.db");
     </p>
     <p style="line-height:1.5; margin:10px auto">
     </p>
    </div>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     创建的数据库是个0字节的文件。
    </p>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     2、创建加密的空sqlite数据库
    </p>
    <div class="code" style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:13px">
     <br/>
     //创建一个密码为password的空的sqlite数据库
     <p style="line-height:1.5; margin:10px auto">
      SQLiteConnection.CreateFile（"c://test2.db");
     </p>
     <p style="line-height:1.5; margin:10px auto">
      SQLiteConnection cnn = new SQLiteConnection("Data Source=c://test2.db");
     </p>
     <p style="line-height:1.5; margin:10px auto">
      SQLiteConnection cnn = new SQLiteConnection("Data Source=D://test2.db");
     </p>
     <p style="line-height:1.5; margin:10px auto">
      cnn.Open();
     </p>
     <p style="line-height:1.5; margin:10px auto">
      cnn.ChangePassword("password");
     </p>
    </div>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     3、给未加密的数据库加密
    </p>
    <div class="code" style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:13px">
     <br/>
     SQLiteConnection cnn = new SQLiteConnection("Data Source=c://test.db");
     <p style="line-height:1.5; margin:10px auto">
      cnn.Open();
     </p>
     <p style="line-height:1.5; margin:10px auto">
      cnn.ChangePassword("password");
     </p>
    </div>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     4、打开加密sqlite数据库
    </p>
    <div class="code" style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:13px">
     <p style="line-height:1.5; margin:10px auto">
      //方法一
     </p>
     <p style="line-height:1.5; margin:10px auto">
      SQLiteConnection cnn = new SQLiteConnection("Data Source=c://test2.db");
     </p>
     <p style="line-height:1.5; margin:10px auto">
      cnn.SetPassword("password");
     </p>
     <p style="line-height:1.5; margin:10px auto">
      cnn.Open();
     </p>
     <p style="line-height:1.5; margin:10px auto">
      //方法二
     </p>
     <p style="line-height:1.5; margin:10px auto">
      SQLiteConnectionStringBuilder builder = new SQLiteConnectionStringBuilder();
     </p>
     <p style="line-height:1.5; margin:10px auto">
      builder.DataSource = @"c:/test.db";
     </p>
     <p style="line-height:1.5; margin:10px auto">
      builder.Password = @"password";
     </p>
     <p style="line-height:1.5; margin:10px auto">
      SQLiteConnection cnn = new SQLiteConnection(builder.ConnectionString);
     </p>
     <p style="line-height:1.5; margin:10px auto">
      cnn .Open();
     </p>
    </div>
    <p style="font-size:13px; line-height:1.5; margin:10px auto; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif">
     注：
     <br/>
     A、因为加密的函数是利用windows api，故加密后的数据库只能适用在windows平台，加密的方式是整体文件加密。
     <br/>
     B、加密的算法是
     <a href="http://www.google.cn/search?complete=1&amp;hl=zh-CN&amp;newwindow=1&amp;q=rc4&amp;btnG=Google+%E6%90%9C%E7%B4%A2&amp;meta=&amp;aq=f" rel="nofollow noopener noreferrer" style="color:navy; text-decoration:none" target="_blank">
      RC4
     </a>
     ，如果你想采用别的加密算法来加密，请参考ADO.NET 2.0 SQLite Data Provider 的源码来修改。
     <br/>
     c、相关sqlite数据库操作类似ADO.NET 2.0。详见ADO.NET 2.0 SQLite Data Provider的帮助文档。
     <br/>
     c、ADO.NET 2.0 SQLite Data Provider 版本为：1.0.53.0 ，SQLite版本 : 3.6.0。
     <br/>
     d、开发环境为vs2008。
    </p>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f726b6f68756d616e:2f61727469636c652f64657461696c732f3537303736323336" class_="artid" style="display:none">
 </p>
</div>
