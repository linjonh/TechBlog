---
arturl_encode: "6874747073:3a2f2f626c6f672e6373646e2e6e65742f74797573746c692f:61727469636c652f64657461696c732f313436323836313231"
layout: post
title: "以太网-MAC-帧格式"
date: 2025-03-15 21:57:37 +08:00
description: "的时间，IFG 的最小值是 96 bit time，即在媒介中发送 96 位原始数据所需要的时间，在不同媒介中 IFG 的最小值是不一样的。不管 10M/100M/1000M 的以太网，两帧之间最少要有 96bit time，IFG 的最少间隔时间。帧间隙的时间就是网络设备和组件在接收一帧之后，需要短暂的时间来恢复并为接收下一帧做准备。，它规定了以太网传输数据的帧结构，我们可以把以太网 MAC层理解成高速公路，我们必须遵循它的规则才能在上面通行，以太网 MAC 层帧格式如下图所示。以太网技术的正式标准是。"
keywords: "以太网 MAC 帧格式"
categories: ['计算机网络']
tags: ['以太网帧间隔', '以太网帧格式', '以太网Mac', 'Mtu']
artid: "146286121"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146286121
    alt: "以太网-MAC-帧格式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146286121
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146286121
cover: https://bing.ee123.net/img/rand?artid=146286121
image: https://bing.ee123.net/img/rand?artid=146286121
img: https://bing.ee123.net/img/rand?artid=146286121
---

# 以太网 MAC 帧格式

> 本文为笔者学习以太网对网上资料
> `归纳整理所做的笔记`
> ，文末均附有参考链接，如侵权，请联系删除。

### 以太网 MAC 帧格式

以太网技术的正式标准是
`IEEE 802.3`
，它规定了以太网传输数据的帧结构，我们可以把以太网 MAC层理解成高速公路，我们必须遵循它的规则才能在上面通行，以太网 MAC 层帧格式如下图所示
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ccb12bf252eb44baa83b9eb2a7030c0a.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/70bf3d4d156f4032bc54bbbf93432b1a.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6480ff3a9f7e4f66844cec59d90bdfe1.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/0671a94a4fa947be8b6062f0b1913a8e.png)
  
以太网传输数据时按照上面的顺序从头到尾依次被发送和接收，我们下面进一步解释各个区域

* 前导码（Preamble）：为了实现底层数据的正确阐述，物理层使用 7 个字节同步码（0 和 1 交替（55- 55-55-55-55-55-55））实现数据的同步。
* 帧起始界定符（SFD，Start Frame Delimiter）：使用 1 个字节的 SFD（固定值为 0xd5）来表示一帧的开始，即后面紧跟着传输的就是以太网的帧头。
* 目的 MAC 地址：即接收端物理 MAC 地址，占用 6 个字节。MAC 地址从应用上可分为单播地址、组播地址和广播地址。单播地址：第一个字节的最低位为 0，比如 00-00-00-11-11-11，一般用于标志唯一的设备；组播地址：第一个字节的最低位为 1，比如 01-00-00-11-11-11，一般用于标志同属一组的多个设备；广播地址：所有 48bit 全为 1，即 FF-FF-FF-FF-FF-FF，它用于标志同一网段中的所有设备。
* 源 MAC 地址：即发送端物理 MAC 地址，占用 6 个字节。
* 长度/类型：上图中的长度/类型具有两个意义，
  + 当这两个字节的值小于 1536（十六进制为 0x0600）时，代表该以太网中数据段的长度；
  + 如果这两个字节的值大于 1536，则表示该以太网中的数据属于哪个上层协议，
    - 例如 0x0800 代表 IP 协议（网际协议）
    - 0x0806 代表 ARP 协议（地址解析协议）等。
* 数据：以太网中的数据段长度最小 46 个字节，最大 1500 个字节。最大值 1500 称为以太网的最大传输单元（MTU，Maximum Transmission Unit），之所以限制最大传输单元是因为在多个计算机的数据帧排队等待传输时，如果某个数据帧太大的话，那么其它数据帧等待的时间就会加长，导致体验变差，这就像一个十字路口的红绿灯，你可以让绿灯持续亮一小时，但是等红灯的人一定不愿意的。另外还要考虑网络I/O 控制器缓存区资源以及网络最大的承载能力等因素，因此最大传输单元是由各种综合因素决定的。为了避免增加额外的配置，通常以太网的有效数据字段小于 1500 个字节。
* 填充域，由于协议要求整个 MAC 数据包的长度至少为 64 字节(接收到的数据包如果少于 64 字节会被认为发生冲突，数据包被自动丢弃)，当数据段的字节少于 46 字节时，在填充域会自动填上无效数据，以使数据包符合长度要求。
* 帧检验序列（FCS，Frame Check Sequence）：为了确保数据的正确传输，在数据的尾部加入了 4 个字节的循环冗余校验码（CRC 校验）来检测数据是否传输错误。CRC 数据校验从以太网帧头开始即不包含前导码和帧起始界定符。通用的 CRC 标准有 CRC-8、CRC-16、CRC-32、CRC-CCIT，其中在网络通信系统中应用最广泛的是 CRC-32 标准。

### 以太网帧间隔

以太网相邻两帧之间的时间间隔，即帧间隙（IFG，InterpacketGap）。帧间隙的时间就是网络设备和组件在接收一帧之后，需要短暂的时间来恢复并为接收下一帧做准备的时间，IFG 的最小值是 96 bit time，即在媒介中发送 96 位原始数据所需要的时间，在不同媒介中 IFG 的最小值是不一样的。不管 10M/100M/1000M 的以太网，两帧之间最少要有 96bit time，IFG 的最少间隔时间

计算方法如下：

* 10Mbit/s 最小时间为：96\*100ns = 9600ns；
* 100Mbit/s 最小时间为：96\*10ns = 960ns；
* 1000Mbit/s 最小时间为：96\*1ns = 96ns。

### 参考

* https://blog.csdn.net/yindq1220/article/details/138027595
* 正点原子《开拓者之FPGA开发指南V3.2》
* LwIP应用开发实战指南—基于STM32