---
layout: post
title: "责任链模式策略模式在项目中的实践"
date: 2025-03-07 14:31:21 +0800
description: "【代码】责任链模式+策略模式在项目中的实践。"
keywords: "责任链模式+策略模式在项目中的实践"
categories: ['未分类']
tags: ['数据库', 'Sql', 'Redis', 'Mysql', 'Java']
artid: "146095246"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146095246
    alt: "责任链模式策略模式在项目中的实践"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146095246
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146095246
cover: https://bing.ee123.net/img/rand?artid=146095246
image: https://bing.ee123.net/img/rand?artid=146095246
img: https://bing.ee123.net/img/rand?artid=146095246
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     责任链模式+策略模式在项目中的实践
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     <strong>
      1. 责任链模式实现分析
     </strong>
    </h4>
    <h5>
     <strong>
      核心组件
     </strong>
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         IProcessRule
        </code>
        接口
       </strong>
      </p>
      <ul>
       <li>
        定义责任链节点行为：
        <code>
         filter
        </code>
        （过滤逻辑）和
        <code>
         next
        </code>
        （获取下一节点）。
       </li>
       <li>
        符合责任链的“处理-传递”模式。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         AbstractProcessRule
        </code>
        抽象类
       </strong>
      </p>
      <ul>
       <li>
        实现公共逻辑：处理链式调用（若当前规则过滤后仍有多个候选，继续调用下一个规则）。
       </li>
       <li>
        子类只需实现
        <code>
         doFilter
        </code>
        方法，聚焦具体规则逻辑，符合
        <strong>
         模板方法模式
        </strong>
        。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        具体规则类（如
        <code>
         DistanceRule
        </code>
        ）
       </strong>
      </p>
      <ul>
       <li>
        继承
        <code>
         AbstractProcessRule
        </code>
        ，实现
        <code>
         doFilter
        </code>
        方法，例如按距离排序。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <strong>
      责任链执行流程
     </strong>
    </h5>
    <pre><code>// 示例：构建责任链
IProcessRule chain = new DistanceRule(new ScoreRule(new CapacityRule(null)));

// 执行过滤
List&lt;ServeProviderDTO&gt; candidates = chain.filter(providers);
</code></pre>
    <ol>
     <li>
      调用
      <code>
       DistanceRule.doFilter()
      </code>
      按距离排序。
     </li>
     <li>
      若结果数量 &gt;1，调用
      <code>
       ScoreRule.doFilter()
      </code>
      按评分排序。
     </li>
     <li>
      若仍 &gt;1，调用
      <code>
       CapacityRule.doFilter()
      </code>
      按接单能力排序。
     </li>
     <li>
      最终返回唯一候选或最终列表。
     </li>
    </ol>
    <hr/>
    <h4>
     <strong>
      2. 策略模式与责任链的结合
     </strong>
    </h4>
    <h5>
     <strong>
      策略模式的角色
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       策略接口
      </strong>
      ：定义派单策略的入口方法（如
      <code>
       DispatchStrategy#dispatch
      </code>
      ）。
     </li>
     <li>
      <strong>
       具体策略类
      </strong>
      ：每个策略对应一组责任链规则。例如：
      <pre><code>public class PriorityDistanceStrategy implements DispatchStrategy {
    private IProcessRule ruleChain;

    public PriorityDistanceStrategy() {
        // 策略1的规则链：距离 → 评分
        ruleChain = new DistanceRule(new ScoreRule(null));
    }

    @Override
    public ServeProviderDTO dispatch(List&lt;ServeProviderDTO&gt; providers) {
        List&lt;ServeProviderDTO&gt; result = ruleChain.filter(providers);
        return CollUtils.isEmpty(result) ? null : result.get(0);
    }
}
</code></pre>
     </li>
    </ul>
    <h5>
     <strong>
      扩展性优势
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       新增策略
      </strong>
      ：创建新类（如
      <code>
       CapacityFirstStrategy
      </code>
      ）并定义其规则链。
     </li>
     <li>
      <strong>
       新增规则
      </strong>
      ：继承
      <code>
       AbstractProcessRule
      </code>
      实现新逻辑，无需修改已有代码。
     </li>
    </ul>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37333736323631322f:61727469636c652f64657461696c732f313436303935323436" class_="artid" style="display:none">
 </p>
</div>


