---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34363034343336362f:61727469636c652f64657461696c732f313332383830393832"
layout: post
title: "Unity-SteamVR-å¼€å‘æ•™ç¨‹ç”¨æ‘‡æ†è§¦æ‘¸æ¿æ§åˆ¶äººç‰©æŒç»­ç§»åŠ¨2.x-ä»¥ä¸Šç‰ˆæœ¬"
date: 2023-09-16 15:40:39 +08:00
description: "æŒç»­ç§»åŠ¨æ˜¯ VR å¼€å‘ä¸­çš„ä¸€ä¸ªå¸¸ç”¨åŠŸèƒ½ã€‚ä¸€èˆ¬æ˜¯ç”¨æˆ·æ¨åŠ¨æ‰‹æŸ„æ‘‡æ†ï¼Œæˆ–è€…è§¦æ‘¸æ‰‹æŸ„è§¦æ‘¸æ¿ï¼Œæ¥æ§åˆ¶äººç‰©æŒç»­åœ°"
keywords: "steamvrç§»åŠ¨"
categories: ['Unity', 'Steamvr']
tags: ['æ¸¸æˆå¼•æ“', 'Unity']
artid: "132880982"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=132880982
    alt: "Unity-SteamVR-å¼€å‘æ•™ç¨‹ç”¨æ‘‡æ†è§¦æ‘¸æ¿æ§åˆ¶äººç‰©æŒç»­ç§»åŠ¨2.x-ä»¥ä¸Šç‰ˆæœ¬"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=132880982
featuredImagePreview: https://bing.ee123.net/img/rand?artid=132880982
---

# Unity SteamVR å¼€å‘æ•™ç¨‹ï¼šç”¨æ‘‡æ†/è§¦æ‘¸æ¿æ§åˆ¶äººç‰©æŒç»­ç§»åŠ¨ï¼ˆ2.x ä»¥ä¸Šç‰ˆæœ¬ï¼‰

#### æ–‡ç« ç›®å½•

* [ğŸ“•æ•™ç¨‹è¯´æ˜](#_5)
* [ğŸ“•åœºæ™¯æ­å»º](#_22)
* [ğŸ“•åˆ›å»ºç§»åŠ¨çš„åŠ¨ä½œ](#_35)
* [ğŸ“•ç§»åŠ¨è„šæœ¬](#_71)
* + [â­ç§»åŠ¨](#_128)
  + [â­å®æ—¶è°ƒæ•´ CharacterController çš„é«˜åº¦](#_CharacterController__163)
* [ğŸ“•å–æ¶ˆæ‰‹éƒ¨å’Œ CharacterController çš„ç¢°æ’](#_CharacterController__190)
* [ğŸ“•å–æ¶ˆæ‰‹éƒ¨æ¨¡å‹çš„æŠ–åŠ¨](#_237)

æŒç»­ç§»åŠ¨æ˜¯ VR å¼€å‘ä¸­çš„ä¸€ä¸ªå¸¸ç”¨åŠŸèƒ½ã€‚ä¸€èˆ¬æ˜¯ç”¨æˆ·æ¨åŠ¨æ‰‹æŸ„æ‘‡æ†ï¼Œæˆ–è€…è§¦æ‘¸æ‰‹æŸ„è§¦æ‘¸æ¿ï¼Œæ¥æ§åˆ¶äººç‰©æŒç»­åœ°ç§»åŠ¨ã€‚Unity SteamVR æ’ä»¶ä¸­åªæä¾›äº†ä¼ é€çš„ç§»åŠ¨åŠŸèƒ½ï¼Œè€Œæ²¡æœ‰ç”¨æ‘‡æ†æˆ–è§¦æ‘¸æ¿æ§åˆ¶äººç‰©æŒç»­ç§»åŠ¨çš„åŠŸèƒ½ã€‚å› æ­¤ï¼ŒæŒç»­ç§»åŠ¨çš„åŠŸèƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±å¼€å‘ã€‚

---

## ğŸ“•æ•™ç¨‹è¯´æ˜

ä½¿ç”¨çš„ Unity ç‰ˆæœ¬ï¼š 2021.3.5

ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼šWindows 11

ä½¿ç”¨çš„è®¾å¤‡ï¼šMeta Quest 2

SteamVR ç‰ˆæœ¬ï¼š2.7.3

å› ä¸ºæˆ‘ç”¨çš„æ˜¯ Quest æ‰‹æŸ„ï¼Œæ‰€ä»¥æˆ‘ä¼šç”¨ Quest æ‰‹æŸ„çš„æ‘‡æ†æ§åˆ¶äººç‰©ç§»åŠ¨ã€‚è€Œåƒ Htc Vive æ‰‹æŸ„ä¸Šåªæœ‰è§¦æ‘¸æ¿ Touchpadï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨å’Œæ‘‡æ†æ˜¯ä¸€æ ·çš„ã€‚

æœ€ç»ˆå®ç°çš„æ•ˆæœï¼šèƒ½é€šè¿‡æ‘‡æ†æ§åˆ¶äººç‰©æŒç»­ç§»åŠ¨ï¼Œäººç‰©èƒ½ä¸å…¶ä»–ç‰©ä½“æœ‰ç¢°æ’ï¼Œèƒ½ä¸Šé˜¶æ¢¯ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/505f6df19820e0efd8d2c6c6ca75d343.gif)

---

## ğŸ“•åœºæ™¯æ­å»º

æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåœºæ™¯ï¼Œåˆ é™¤åŸæœ¬åœºæ™¯ä¸­çš„ Main Cameraï¼Œåœ¨åœºæ™¯ä¸­æ”¾ç½®ä¸€ä¸ªå¹³é¢ï¼Œç„¶åç”¨æ–¹å—åˆ¶ä½œä¸€ä¸ªé˜¶æ¢¯ï¼Œç”¨äºåç»­çš„æµ‹è¯•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ª VR ä¸­ä»£è¡¨ç©å®¶è‡ªå·±çš„ç‰©ä½“ã€‚æˆ‘å¯ä»¥æ‰“å¼€ Assets/SteamVR/InteractionSystem/Core æ–‡ä»¶å¤¹ï¼Œå°† Player ç‰©ä½“æ‹–å…¥åœºæ™¯ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/3c7363706904422d39b01e4e2ea14836.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/02059a6c0145fe462c489a06df4f03c5.png)

ä¹Ÿè®¸ä½ ä¹‹å‰ä¼šåœ¨ Assets/SteamVR/Prefabs æ–‡ä»¶å¤¹ä¸‹çœ‹åˆ°ä¸€ä¸ª [CameraRig] é¢„åˆ¶ä½“ï¼Œå®ƒä¹Ÿèƒ½ä»£è¡¨ VR ä¸­çš„ç©å®¶è‡ªå·±ï¼Œèƒ½å¤Ÿè¿½è¸ªå¤´æ˜¾å’Œæ‰‹æŸ„çš„ä½ç½®å’Œæ—‹è½¬è§’åº¦ã€‚ä½†æ˜¯ Player è¿™ä¸ªé¢„åˆ¶ä½“ç›¸å½“äºåŠŸèƒ½æ›´åŠ ä¸°å¯Œçš„ [CameraRig]ï¼Œå› æ­¤ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ Player è¿™ä¸ªé¢„åˆ¶ä½“ã€‚

---

## ğŸ“•åˆ›å»ºç§»åŠ¨çš„åŠ¨ä½œ

SteamVR çš„è¾“å…¥ç³»ç»Ÿæ˜¯åŸºäºåŠ¨ä½œçš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­åˆ¤æ–­åŠ¨ä½œæ˜¯å¦å‘ç”Ÿï¼Œæˆ–è€…è·å–åŠ¨ä½œè¿”å›çš„å€¼ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®åŠ¨ä½œå’Œè®¾å¤‡æŒ‰é”®çš„ç»‘å®šå…³ç³»ï¼Œè¾“å…¥ç³»ç»Ÿçš„è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹ï¼š
[Unity SteamVR å¼€å‘æ•™ç¨‹ï¼šSteamVR Input è¾“å…¥ç³»ç»Ÿï¼ˆ2.x ä»¥ä¸Šç‰ˆæœ¬ï¼‰](https://blog.csdn.net/qq_46044366/article/details/132718085)
ã€‚

æˆ‘ä»¬å¯ä»¥æ‰“å¼€ Unity ç¼–è¾‘å™¨èœå•æ çš„ Windows/SteamVR Input çª—å£ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/54c04aa60b8e8168f92c302ba43c593c.png)

ç„¶åç‚¹å‡» Open Binding UI æ‰“å¼€åŠ¨ä½œæŒ‰é”®ç»‘å®šç•Œé¢ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/20e9f548c086a05b7290dc977929b437.png)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/f94413bb16f50ecca24fec851e647982.png)

æˆ‘ä»¬åœ¨åœºæ™¯ä¸­é»˜è®¤ä¼šæ¿€æ´» default è¿™ä¸ªåŠ¨ä½œé›†ã€‚ç„¶è€Œè¿™ä¸ªåŠ¨ä½œé›†é‡Œå¹¶æ²¡æœ‰ç»‘å®šæ‘‡æ†ç›¸å…³çš„åŠ¨ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªæ‘‡æ†ç§»åŠ¨ç›¸å…³çš„åŠ¨ä½œï¼Œå¹¶ä¸”å°†å®ƒä¸æ‘‡æ†é”®è¿›è¡Œç»‘å®šã€‚

åœ¨ VR æ¸¸æˆä¸­ï¼Œç»å¸¸æ˜¯ä¸€åªæ‰‹æ§åˆ¶ç§»åŠ¨ï¼Œå¦ä¸€åªæ‰‹æ§åˆ¶è½¬å‘ã€‚è½¬å‘ä¸€èˆ¬æ˜¯å°†æ‰‹æŸ„æ‘‡æ†å‘å·¦æˆ–è€…å‘å³æ¨åŠ¨æ¥è§¦å‘ã€‚SteamVR é»˜è®¤çš„è¾“å…¥é…ç½®æ˜¯ä¸¤åªæ‰‹éƒ½èƒ½è½¬å‘ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å–æ¶ˆå…¶ä¸­ä¸€åªæ‰‹çš„è½¬å‘ç»‘å®šã€‚é‚£ä¹ˆæˆ‘è§„å®šä¸€ä¸‹ï¼Œåœ¨æœ¬ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä½¿ç”¨å·¦æ‘‡æ†è¿›è¡ŒæŒç»­ç§»åŠ¨ï¼Œå³æ‘‡æ†è¿›è¡Œè½¬å‘ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å–æ¶ˆå‹¾é€‰é•œåƒæ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥ä¸ºå·¦å³æ‰‹æŸ„åˆ†åˆ«ç»‘å®šåŠ¨ä½œã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/a4d4fc71599ead634b647be741d68a15.png)

ç„¶ååˆ é™¤å·¦æ‰‹æŸ„ä¸Š snapturnright å’Œ snapturnleft çš„æŒ‰é”®ç»‘å®šï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/acef474a1dad81eadaa55f56aeb1499e.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åœ¨ default åŠ¨ä½œé›†ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ¨ä½œï¼Œç”¨æ¥è¡¨ç¤ºæˆ‘ä»¬çš„æ‘‡æ†ç§»åŠ¨ã€‚å›åˆ° SteamVR Input çª—å£ï¼Œæ–°é”®ä¸€ä¸ª Vector2 ç±»å‹çš„åŠ¨ä½œã€‚å› ä¸ºæ‘‡æ†æ¨å‘çš„ä½ç½®æ˜¯ç”¨ä¸€ä¸ªäºŒç»´å‘é‡æ¥è¡¨ç¤ºã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/a549a8b1170a41ab2b25777006b13268.png)

ç„¶åæ‰“å¼€ Binding UIï¼Œå°† MovePlayer åŠ¨ä½œä¸å·¦æ‘‡æ†ä½ç½®è¿›è¡Œç»‘å®šï¼ˆè®°å¾—å–æ¶ˆé•œåƒæ¨¡å¼ï¼‰ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/12431370ea2f784839b4febbeb60b906.png)

ç°åœ¨ï¼Œæˆ‘ä»¬çš„ Vector2 ç±»å‹çš„åŠ¨ä½œå°±å’Œå·¦æ‰‹æŸ„æ‘‡æ†ç»‘å®šæˆåŠŸäº†ã€‚

---

## ğŸ“•ç§»åŠ¨è„šæœ¬

æˆ‘ä»¬æ–°å»ºä¸€ä¸ªè„šæœ¬ï¼Œç„¶åæŒ‚è½½åˆ° Player ç‰©ä½“ä¸Šï¼š

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using Valve.VR;
using Valve.VR.InteractionSystem;

public class ContinousMoveController : MonoBehaviour
{
    [SerializeField] private SteamVR_Action_Vector2 moveAction;
    [SerializeField] private float speed = 1;
    [SerializeField] private float gravity = 9.81f;
    [SerializeField] private float minHeight = 0;
    [SerializeField] private float maxHeight = float.PositiveInfinity;
    [SerializeField] private CharacterController characterController;
    void Start() 
    {
        if(characterController == null)
        {
            characterController = GetComponent<CharacterController>();  
        }
    }

    void Update()
    {
        HandleHeight();
        Move();
    }
    private void Move()
    {
        if(moveAction.axis.magnitude > 0.1f)
        {
            Vector3 direction = Player.instance.hmdTransform.TransformDirection(new Vector3(moveAction.axis.x, 0, moveAction.axis.y));            
            characterController.Move(speed * Time.deltaTime * Vector3.ProjectOnPlane(direction, Vector3.up) - new Vector3(0, gravity, 0) * Time.deltaTime);
        }
        
    }
    private void HandleHeight()
    {       
        float headHeight = Mathf.Clamp(Player.instance.hmdTransform.position.y, minHeight, maxHeight);
        characterController.height = headHeight;

        Vector3 newCenter = Player.instance.transform.InverseTransformPoint(Player.instance.hmdTransform.position);
        newCenter.y = characterController.height / 2 + characterController.skinWidth;
        characterController.center = newCenter;
    }
}



```

ç„¶åå°† CharacterController ç»„ä»¶æŒ‚è½½åˆ° Player ç‰©ä½“ä¸Šï¼Œå‚æ•°è®¾ç½®å¯ä»¥å‚è€ƒæˆ‘çš„ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/5c38d0ccc8d53a04a398a5a2116673a1.png)

### â­ç§»åŠ¨

è§£é‡Šä¸€ä¸‹æ ¸å¿ƒæ–¹æ³• Moveï¼š

é¦–å…ˆæˆ‘ä»¬äººç‰©çš„ç§»åŠ¨é€‰æ‹©ç”¨ CharactrrController ç¢°æ’ä½“çš„ Move æ–¹æ³•æ¥ç§»åŠ¨ï¼Œå› ä¸ºäººç‰©æ·»åŠ ä¸Š CharactrrController åï¼Œå¯ä»¥ä¸åœºæ™¯ä¸­çš„å…¶ä»–ç‰©ä½“å‘ç”Ÿç¢°æ’ï¼Œæ¯”å¦‚ç¢°åˆ°ä¸€å µå¢™ä¼šå¡ä½ï¼Œæˆ–è€…æ‹¥æœ‰ä¸Šå°é˜¶çš„åŠŸèƒ½ã€‚è¿™æ ·èº«ä½“åœ¨ç§»åŠ¨çš„è¿‡ç¨‹ä¸­å°±ä¸ä¼šç©¿è¿‡å…¶ä»–ç¢°æ’ä½“ã€‚å¹¶ä¸” CharacterController ç»„ä»¶æ‹¥æœ‰ä¸€ä¸ª Move æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºç§»åŠ¨èº«ä½“ã€‚

Move æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªç§»åŠ¨å‘é‡ã€‚å› ä¸ºç§»åŠ¨ç›¸å½“äºä¸€æ®µè·ç¦»ï¼Œæ‰€ä»¥ç§»åŠ¨çš„è·ç¦»å¯ä»¥çœ‹ä½œç§»åŠ¨é€Ÿåº¦Ã—ç§»åŠ¨æ—¶é—´Ã—ç§»åŠ¨æ–¹å‘ã€‚ç§»åŠ¨æ–¹å‘å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç è·å–ï¼š

```csharp
 Vector3 direction = Player.instance.hmdTransform.TransformDirection(new Vector3(moveAction.axis.x, 0, moveAction.axis.y));  

```

Player å°±æ˜¯åŸæœ¬æŒ‚è½½åœ¨ Player ç‰©ä½“ä¸Šçš„ Player è„šæœ¬ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/af87540f4a7b693a0d3256fda0793644.png)

é€šè¿‡ Player.instance.hmdTransform å¯ä»¥è·å–å¤´éƒ¨ç›¸æœºçš„ä½ç½®ã€‚TransformDirection æ–¹æ³•å¯ä»¥å°†ç›¸å¯¹äºæŒ‡å®šå¯¹è±¡è‡ªèº«åæ ‡ç³»çš„æ–¹å‘å‘é‡è½¬æ¢ä¸ºç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»æ–¹å‘å‘é‡ï¼Œå³ä¸€ä¸ªç‰©ä½“è‡ªå·±åæ ‡ç³»çš„ direction æ–¹å‘ï¼Œç›¸å½“äºä¸–ç•Œåæ ‡ç³»çš„ä»€ä¹ˆæ–¹å‘ã€‚æˆ‘ä»¬çš„æŒç»­ç§»åŠ¨åŠŸèƒ½ä¸€èˆ¬æ˜¯ç›¸å¯¹äºè‡ªå·±çš„å¤´éƒ¨ç§»åŠ¨ï¼Œå› ä¸ºç§»åŠ¨çš„è¾“å…¥åŸæœ¬æ˜¯ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä¸‹çš„å‘é‡ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ TransformDirection æ–¹æ³•å°†ç§»åŠ¨è¾“å…¥è½¬æ¢ä¸ºç›¸å¯¹äºç©å®¶å¤´éƒ¨çš„æ–¹å‘ï¼Œå…¶ç»“æœæ˜¯ç”¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä¸€ä¸ªå‘é‡æ¥è¡¨ç¤ºã€‚æ¯”å¦‚å¤´éƒ¨çœ‹å‘å³è¾¹ï¼Œç„¶åå‘å‰æ¨åŠ¨æ‘‡æ†ï¼Œè¿™æ—¶å€™äººç‰©è¦æœç€å¤´éƒ¨çœ‹å‘çš„å³ä¾§ç§»åŠ¨ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸‹å›¾ç†è§£ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/c293664d506dbeed3f29ccc87397308f.png)

ä½†æ˜¯å› ä¸ºæˆ‘ä»¬è¦é™åˆ¶ç©å®¶åœ¨æ°´å¹³é¢ä¸Šå‰åå·¦å³ç§»åŠ¨ï¼Œè€Œå¤´çœ‹å‘çš„æ–¹å‘å¯ä»¥æ˜¯ä»»ä¸€æ–¹å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨ä»¥ä¸‹ä»£ç å¯¹ç§»åŠ¨æ–¹å‘è¿›è¡Œé™åˆ¶ï¼š

```csharp
Vector3.ProjectOnPlane(direction, Vector3.up)

```

è¿™ä¸ªæ–¹æ³•å¯ä»¥å°†å°†å‘é‡æŠ•å½±åˆ°ç”±æ³•çº¿å®šä¹‰çš„å¹³é¢ä¸Šï¼ˆæ³•çº¿ä¸è¯¥å¹³é¢æ­£äº¤ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å°±æŠŠç§»åŠ¨æ–¹å‘é™åˆ¶åœ¨äº†æ°´å¹³é¢ä¸Šã€‚ProjectOnPlane æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¹³é¢çš„æ³•å‘é‡ï¼Œæ‰€ä»¥ç”¨ Vector3.up è¡¨ç¤ºåˆé€‚ã€‚

åœ¨ CharacterController çš„ Move æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥çš„ç§»åŠ¨å‘é‡å‡å»äº†ä¸€ä¸ª new Vector3(0, gravity, 0) \* Time.deltaTimeï¼Œè¿™æ˜¯ä¸ºäº†æ¨¡æ‹Ÿé‡åŠ›ï¼Œè®©ç©å®¶åœ¨èƒ½å¤Ÿä»é«˜å¤„è½ä¸‹ã€‚

è„šæœ¬å†™å®Œåï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Inspector é¢æ¿ä¸­å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/ce4830aa67db52ff51d837794128f971.png)

### â­å®æ—¶è°ƒæ•´ CharacterController çš„é«˜åº¦

ç§»åŠ¨è„šæœ¬ä¸­è¿˜æœ‰ä¸ª HandleHeight æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºå®æ—¶è°ƒæ•´ CharacterController çš„é«˜åº¦ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬çš„ CharacterController çš„é«˜åº¦æ˜¯ä¸å˜çš„ï¼Œæ¯”å¦‚æ¸¸æˆä¸­æœ‰ä¸€ä¸ªæ¯”è¾ƒçŸ®çš„æ´ï¼ŒæŒ‰ç…§ç°å®ç”Ÿæ´»ä¸­çš„å¸¸è¯†ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¹²ä¸‹æ¥èµ°è¿‡å»ï¼Œä½†æ˜¯æ¸¸æˆä¸­äººç‰©çš„ç¢°æ’ç”± CharacterController å†³å®šï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç°å®ä¸­è¹²ä¸‹è€Œæ¸¸æˆä¸­çš„ CharacterController é«˜åº¦ä¸å˜çš„è¯ï¼Œæˆ‘ä»¬åœ¨æ¸¸æˆä¸­è¿˜æ˜¯è¿‡ä¸äº†æ´ï¼Œäººç‰©ä¼šå› ä¸º CharacterController çš„é«˜åº¦å¡åœ¨æ´å¤–ã€‚

å› æ­¤æˆ‘ä»¬å¸Œæœ›æ¯”å¦‚åœ¨ç°å®ä¸­è¹²ä¸‹ï¼Œæ¸¸æˆä¸­äººç‰©çš„ CharacterController çš„é«˜åº¦ä¼šéšä¹‹å˜ä½ã€‚ä¹Ÿå°±æ˜¯
**CharacterController çš„é«˜åº¦ä¼šéšç€å¤´éƒ¨ç›¸æœºçš„é«˜åº¦å˜åŒ–è€Œå˜åŒ–**
ã€‚

```csharp
private void HandleHeight()
    {       
        float headHeight = Mathf.Clamp(Player.instance.hmdTransform.position.y, minHeight, maxHeight);
        characterController.height = headHeight;

        Vector3 newCenter = Player.instance.transform.InverseTransformPoint(Player.instance.hmdTransform.position);
        newCenter.y = characterController.height / 2 + characterController.skinWidth;
        characterController.center = newCenter;
    }

```

é¦–å…ˆå°† CharacterController çš„é«˜åº¦è®¾ä¸ºä¸å¤´éƒ¨ç›¸æœºä¸€æ ·ï¼Œæœ€å°é«˜åº¦å’Œæœ€å¤§é«˜åº¦å¯ä»¥è‡ªå·±åœ¨ Inspector é¢æ¿å®šä¹‰ã€‚

ä½†æ˜¯å› ä¸ºè°ƒæ•´ CharacterController çš„é«˜åº¦ä¼šè®© CharacterController çš„ä¸¤å¤´éƒ½è¿›è¡Œä¼¸ç¼©ï¼Œæ‰€ä»¥è¿˜è¦è°ƒæ•´å®ƒçš„ center è®©å®ƒä¸äººç‰©åŒ¹é…ã€‚

é¦–å…ˆæˆ‘ä»¬è¦è®© CharacterController çš„ä¸­å¿ƒä½ç½®å’Œå¤´éƒ¨ç›¸æœºä½ç½®åŒ¹é…ã€‚å› ä¸ºæ­¤æ—¶çš„ CharacterController çš„ center æ˜¯ç›¸å¯¹äºç©å®¶è§’è‰²çš„å±€éƒ¨åæ ‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦å¾—åˆ°å¤´éƒ¨ç›¸æœºç›¸å¯¹äºç©å®¶è§’è‰²çš„å±€éƒ¨åæ ‡ï¼Œåˆ©ç”¨ InverseTransformPoint æ–¹æ³•å°†å¤´éƒ¨ç›¸æœºçš„ä½ç½®ä»ä¸–ç•Œåæ ‡ç³»è½¬æ¢ä¸ºç›¸å¯¹äºç©å®¶è§’è‰²çš„å±€éƒ¨åæ ‡ç³»ã€‚ç„¶åè°ƒæ•´ center çš„é«˜åº¦ï¼Œç›¸å½“äºå¤´éƒ¨ç›¸æœºé«˜åº¦çš„ä¸€åŠåŠ ä¸Š CharacterController çš„ skinWidthã€‚skinWidthè¡¨ç¤ºè§’è‰²æ§åˆ¶å™¨çš„çš®è‚¤å®½åº¦ã€‚çš®è‚¤å®½åº¦æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†ç¢°æ’çš„è¾¹ç•ŒåŒºåŸŸï¼ŒåŠ ä¸Šå center çš„é«˜åº¦æ›´åŠ å‡†ç¡®ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/72269cb79eb91446fdce4e980b5b5007.gif)

å¯ä»¥çœ‹åˆ° CharacterController çš„é«˜åº¦å’Œä¸­å¿ƒä½ç½®ä¼šåœ¨æ¸¸æˆè¿è¡Œè¿‡ç¨‹ä¸­æ ¹æ®å¤´éƒ¨ç›¸æœºçš„ä½ç½®è€Œæ”¹å˜ã€‚

---

## ğŸ“•å–æ¶ˆæ‰‹éƒ¨å’Œ CharacterController çš„ç¢°æ’

å¦‚æœè¿™æ—¶å€™è¿è¡Œä»£ç ï¼Œä½ ä¼šå‘ç°æ‰‹éƒ¨å’Œèº«ä½“ï¼ˆCharacterControllerï¼‰äº§ç”Ÿäº†ç¢°æ’ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Player è¿™ä¸ªç‰©ä½“çš„ Layer è®¾ä¸º Playerï¼ˆæˆ–è€…ä»»æ„ä¸€ä¸ªä½ å–œæ¬¢çš„åå­—ï¼‰

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/c4b6089c5770a12d3aa2e86683e2560d.png)

åªéœ€è¦å°†æŒ‚è½½äº† CharacterController çš„ç‰©ä½“çš„ Layer è®¾ä¸º Player å°±è¡Œã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/fb72bfea1cbc9dcec9a6dfd50b178c11.png)

ç„¶ååœ¨ Assets/SteamVR/InteractionSystem/Core/Prefabs æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° HandColliderLeft å’Œ HandColliderRight é¢„åˆ¶ä½“ã€‚è¿™ä¸¤ä¸ªç‰©ä½“ä¼šåœ¨æ¸¸æˆè¿è¡Œçš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºï¼Œä½œä¸ºæ‰‹éƒ¨çš„ç¢°æ’ä½“ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/eebafd6f3748b4eb3c7cca96d7f269f6.png)

æ¸¸æˆè¿è¡Œæ—¶è‡ªåŠ¨æ·»åŠ ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/968c798aa46f05aa96fed612ad8f345f.png)

è¿™ä¸¤ä¸ªç‰©ä½“çš„å®ä¾‹åŒ–æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¿›è¡Œçš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ‰¾åˆ° Player ç‰©ä½“çš„å­ç‰©ä½“ LeftHand æˆ–è€… RightHandï¼Œè¿™ä¸¤ä¸ªç‰©ä½“ä¸ŠæŒ‚è½½äº† HandPhysics è„šæœ¬ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/5a66025272352505b040b6eb178a75cf.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/47dfe305303e9a414074a1b95a3af16e.png)

æˆ‘ä»¬å¯ä»¥æ‰“å¼€ HandPhysics è„šæœ¬ï¼Œçœ‹çœ‹æºç ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/b6fa98d3880b4120ba46cf3777d382e1.png)

å¯ä»¥çœ‹åˆ°åœ¨ Start æ–¹æ³•ä¸­å°±é€šè¿‡ Instantiate æ–¹æ³•å®ä¾‹åŒ–äº† Hand Collider çš„ Prefab é¢„åˆ¶ä½“ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ‰‹éƒ¨ç¢°æ’ä½“çš„é¢„åˆ¶ä½“ï¼ˆHandColliderLeft å’Œ HandColliderRightï¼‰çš„ Layer è®¾ä¸º Handï¼ˆéšä¾¿å–ä¸€ä¸ªåå­—å°±è¡Œï¼‰ï¼Œè¿™æ¬¡éœ€è¦é€‰æ‹© Yesï¼Œå› ä¸ºæ‰‹éƒ¨ç¢°æ’ä½“æ‰€æœ‰çš„å­ç‰©ä½“éƒ½ä¸èƒ½ä¸ CharacterController å‘ç”Ÿç¢°æ’ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/e6df594d17394e28c081157d7dbb7c02.png)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/b88efd61b4371331928355f82bd1419d.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/5ed89ce064cea01e32f095aa9a2c2683.png)

ç„¶åæ‰“å¼€ç¼–è¾‘å™¨èœå•æ çš„ Edit/Project Settingsï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/e98754e2db16a70d927ab2b270fb3b15.png)

æ‰¾åˆ° Physicsï¼Œå–æ¶ˆå‹¾é€‰ Player å’Œ Hand ä¹‹é—´çš„äº¤å‰ç‚¹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/e4d179c4cb83aa4da6a188e5d21879cf.png)

è¿™æ ·ï¼ŒLayer æ˜¯ Player çš„ç‰©ä½“å’Œ Layer æ˜¯ Hand çš„ç‰©ä½“å°±ä¸ä¼šå‘ç”Ÿç¢°æ’ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰‹éƒ¨çš„ç¢°æ’ä½“ä¸ä¼šä¸ CharacterController å‘ç”Ÿç¢°æ’ã€‚æˆ‘ä»¬ä¸ºæ‰‹éƒ¨ç¢°æ’ä½“å•ç‹¬è®¾ç½®ä¸€ä¸ª Hand Layer æ˜¯å› ä¸ºæˆ‘ä»¬å¸Œæœ›æ‰‹ä¸æ‰‹ä¹‹é—´å¯ä»¥å‘ç”Ÿç¢°æ’ï¼Œä½†æ˜¯æ‰‹å’Œ CharacterController ä¸èƒ½å‘ç”Ÿç¢°æ’ã€‚

## ğŸ“•å–æ¶ˆæ‰‹éƒ¨æ¨¡å‹çš„æŠ–åŠ¨

ä½†æ˜¯è¿™ä¸ªæ—¶å€™å¦‚æœè¿è¡Œç¨‹åºï¼Œä½ å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šæœ‰æ—¶å€™ç§»åŠ¨æˆ–è€…è½¬å‘æ—¶æ‰‹éƒ¨æ¨¡å‹ä¼šæœ‰æŠ–åŠ¨çš„ç°è±¡ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/2ad3ea2c7788edc1f56ae21bb674b74d.gif)

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦æ‰¾åˆ° HandColliderLeft å’Œ HandColliderRight é¢„åˆ¶ä½“ï¼Œ
**å–æ¶ˆå‹¾é€‰ Rigidbody ç»„ä»¶ä¸Šçš„ Use gravityï¼Œç„¶åå°† Interpolate é€‰é¡¹è®¾ä¸º Interpolate**
ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/2144143d85b6cb032d9e5a546177561e.png)

é‡è¦çš„æ˜¯è¿™ä¸ª Interpolate æ’å€¼é€‰é¡¹ã€‚å®ƒå¯ä»¥å¹³æ»‘æ¶ˆé™¤å›ºå®šå¸§ç‡è¿è¡Œç‰©ç†å¯¼è‡´çš„ç°è±¡ã€‚å› ä¸ºåœ¨ Unity ä¸­ï¼Œç‰©ç†çš„è®¡ç®—é€šå¸¸æ˜¯ä»¥å›ºå®šçš„æ—¶é—´æ­¥é•¿è¿›è¡Œæ›´æ–°ï¼Œç„¶ååº”ç”¨çš„å®é™…å¸§ç‡æ˜¯ä¸ä¸€å®šçš„ã€‚å½“ç‰©ç†è®¡ç®—å’Œåº”ç”¨å®é™…å¸§ç‡ä¸åŒæ­¥æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡å‡ºç°è§†è§‰æŠ–åŠ¨ã€‚è€Œ Interpolate æ’å€¼è¿ç®—å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šè§£å†³æŠ–åŠ¨é—®é¢˜ã€‚ï¼ˆUnity å®˜æ–¹è¯´æ˜ï¼š
<https://docs.unity.cn/2023.2/Documentation/Manual/rigidbody-interpolation.html>
ï¼‰

æœ€ç»ˆæ•ˆæœï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/505f6df19820e0efd8d2c6c6ca75d343.gif)