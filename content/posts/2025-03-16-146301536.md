---
layout: post
title: "五子棋小游戏-简单开发版"
date: 2025-03-16 21:24:53 +0800
description: "开发一个基于 Pygame 库的简易五子棋小游戏，一起交流~"
keywords: "五子棋小游戏-简单开发版"
categories: ['小游戏开发']
tags: ['小游戏', '五子棋', 'Python', 'Pygame']
artid: "146301536"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146301536
    alt: "五子棋小游戏-简单开发版"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146301536
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146301536
cover: https://bing.ee123.net/img/rand?artid=146301536
image: https://bing.ee123.net/img/rand?artid=146301536
img: https://bing.ee123.net/img/rand?artid=146301536
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     五子棋小游戏-简单开发版
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、需求分析
    </h2>
    <p>
     开发一个基于 Pygame 库的五子棋小游戏，允许两名玩家在棋盘上轮流落子，当有一方达成五子连珠时游戏结束，显示获胜信息，并提供退出游戏和重新开始游戏的操作选项。
    </p>
    <p>
     1.棋盘显示 ：
    </p>
    <p>
     显示一个 15x15 的五子棋棋盘，棋盘背景为木头淡黄色，网格线为黑色。
    </p>
    <p>
     2.落子操作 ：
    </p>
    <p>
     玩家通过鼠标点击棋盘上的交叉点来落子，黑子和白子轮流交替落子。
    </p>
    <p>
     只有在空的交叉点上才能落子。
    </p>
    <p>
     3.胜负判断 ：
    </p>
    <p>
     每次落子后，检查是否有五子连珠的情况（横向、纵向、正斜向、反斜向）。
    </p>
    <p>
     如果有一方达成五子连珠，则判定该方获胜。
    </p>
    <p>
     4.游戏结束处理 ：
    </p>
    <p>
     游戏结束时，在屏幕中央显示获胜信息（如“Player 1 Win!” 或 “Player 2 Win!”）。
    </p>
    <p>
     同时显示操作提示，告知玩家可以按 “Q” 键退出游戏，按 “N” 键重新开始游戏。
    </p>
    <p>
     显示一个半透明的黑色提示框，将获胜信息和操作提示包含在内。
    </p>
    <p>
     5.重新开始和退出 ：
    </p>
    <p>
     游戏结束后，玩家可以按 “Q” 键退出游戏，按 “N” 键重新开始游戏。
    </p>
    <p>
     重新开始游戏时，清空棋盘，重置当前玩家为黑子先手。
    </p>
    <p>
    </p>
    <h2>
     二、关键模块
    </h2>
    <p>
     1. 常量定义
    </p>
    <p>
     定义游戏中使用的各种常量，如棋盘大小、网格大小、窗口尺寸、颜色、字体等。
    </p>
    <p>
     2. 初始化
    </p>
    <p>
     初始化 Pygame 库。
    </p>
    <p>
     创建游戏窗口。
    </p>
    <p>
     初始化棋盘状态。
    </p>
    <p>
     3. 绘制模块
    </p>
    <p>
     绘制棋盘：使用木头淡黄色填充屏幕，并绘制黑色的网格线。
    </p>
    <p>
     绘制棋子：根据棋盘状态，在相应位置绘制黑子和白子。
    </p>
    <p>
     4. 胜负判断
    </p>
    <p>
     检查当前落子位置是否形成五子连珠，分别从横向、纵向、正斜向、反斜向四个方向进行检查。
    </p>
    <p>
     5. 游戏控制
    </p>
    <p>
     处理鼠标点击事件，实现落子操作。
    </p>
    <p>
     处理键盘事件，实现退出游戏和重新开始游戏的功能。
    </p>
    <p>
     控制游戏的主循环，更新游戏状态。 6. 提示信息显示模块
    </p>
    <p>
     在游戏结束时，显示获胜信息和操作提示，并绘制半透明的提示框。
    </p>
    <h2>
     三、完整代码
    </h2>
    <pre><code class="language-python">import pygame
import sys

# 初始化 Pygame
pygame.init()

# 定义常量
BOARD_SIZE = 15
GRID_SIZE = 40
WINDOW_WIDTH = GRID_SIZE * (BOARD_SIZE + 1)
WINDOW_HEIGHT = GRID_SIZE * (BOARD_SIZE + 1)
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
# 定义木头淡黄色
WOOD_COLOR = (205, 133, 63) 
BLUE = (0, 0, 255)
FONT = pygame.font.Font(None, 36)  

# 创建游戏窗口
screen = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("五子棋小游戏")

# 初始化棋盘
board = [[0] * BOARD_SIZE for _ in range(BOARD_SIZE)]

# 绘制棋盘
def draw_board():
    # 使用木头淡黄色填充屏幕
    screen.fill(WOOD_COLOR)  
    for i in range(BOARD_SIZE):
        pygame.draw.line(screen, BLACK, (GRID_SIZE, GRID_SIZE * (i + 1)), (GRID_SIZE * BOARD_SIZE, GRID_SIZE * (i + 1)), 2)
        pygame.draw.line(screen, BLACK, (GRID_SIZE * (i + 1), GRID_SIZE), (GRID_SIZE * (i + 1), GRID_SIZE * BOARD_SIZE), 2)

# 绘制棋子
def draw_pieces():
    for i in range(BOARD_SIZE):
        for j in range(BOARD_SIZE):
            if board[i][j] == 1:
                pygame.draw.circle(screen, BLACK, (GRID_SIZE * (j + 1), GRID_SIZE * (i + 1)), 18)
            elif board[i][j] == 2:
                pygame.draw.circle(screen, WHITE, (GRID_SIZE * (j + 1), GRID_SIZE * (i + 1)), 18)

# 检查是否有五子连珠
def check_win(x, y, player):
    directions = [(1, 0), (0, 1), (1, 1), (1, -1)]
    for dx, dy in directions:
        count = 1
        # 正向检查
        for i in range(1, 5):
            new_x = x + i * dx
            new_y = y + i * dy
            if 0 &lt;= new_x &lt; BOARD_SIZE and 0 &lt;= new_y &lt; BOARD_SIZE and board[new_x][new_y] == player:
                count += 1
            else:
                break
        # 反向检查
        for i in range(1, 5):
            new_x = x - i * dx
            new_y = y - i * dy
            if 0 &lt;= new_x &lt; BOARD_SIZE and 0 &lt;= new_y &lt; BOARD_SIZE and board[new_x][new_y] == player:
                count += 1
            else:
                break
        if count &gt;= 5:
            return True
    return False

# 重置游戏状态
def reset_game():
    global board, current_player, game_over
    board = [[0] * BOARD_SIZE for _ in range(BOARD_SIZE)]
    current_player = 1
    game_over = False

# 显示获胜信息和操作提示
def show_winner_info(player):
    winner_text = FONT.render(f"Player {player} Win!", True, WHITE)
    prompt_text = FONT.render("Press Q to Quit, Press N to Restart", True, WHITE)

    # 创建半透明的矩形框
    winner_rect = winner_text.get_rect(center=(WINDOW_WIDTH // 2, WINDOW_HEIGHT // 2 - 30))
    prompt_rect = prompt_text.get_rect(center=(WINDOW_WIDTH // 2, WINDOW_HEIGHT // 2 + 30))

    # 调整内边距以确保提示框足够大
    padding = 30
    combined_width = max(winner_rect.width, prompt_rect.width) + 2 * padding
    combined_height = winner_rect.height + prompt_rect.height + 3 * padding
    rect = pygame.Rect(winner_rect.x - padding, winner_rect.y - padding, combined_width, combined_height)
    rect.center = (WINDOW_WIDTH // 2, WINDOW_HEIGHT // 2)

    # 创建一个带有透明度的表面
    surface = pygame.Surface((rect.width, rect.height), pygame.SRCALPHA)
    surface.fill((0, 0, 0, 128))  # 半透明黑色

    screen.blit(surface, (rect.x, rect.y))
    screen.blit(winner_text, (rect.centerx - winner_rect.width // 2, rect.centery - winner_rect.height - padding // 2))
    screen.blit(prompt_text, (rect.centerx - prompt_rect.width // 2, rect.centery + padding // 2))
    pygame.display.flip()

# 主游戏循环
current_player = 1
game_over = False
while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
        elif event.type == pygame.MOUSEBUTTONDOWN and not game_over:
            x, y = event.pos
            col = (x - GRID_SIZE // 2) // GRID_SIZE
            row = (y - GRID_SIZE // 2) // GRID_SIZE
            if 0 &lt;= col &lt; BOARD_SIZE and 0 &lt;= row &lt; BOARD_SIZE and board[row][col] == 0:
                board[row][col] = current_player
                if check_win(row, col, current_player):
                    print(f"Player {current_player} Win!")
                    # 先显示最后一个子
                    draw_board()
                    draw_pieces()
                    pygame.display.flip()
                    # 显示获胜信息和操作提示
                    show_winner_info(current_player)
                    game_over = True
                    # 进入等待状态，直到用户按下 Q 或者 N 键
                    while game_over:
                        for inner_event in pygame.event.get():
                            if inner_event.type == pygame.QUIT:
                                pygame.quit()
                                sys.exit()
                            elif inner_event.type == pygame.KEYDOWN:
                                if inner_event.key == pygame.K_q:
                                    pygame.quit()
                                    sys.exit()
                                elif inner_event.key == pygame.K_n:
                                    reset_game()
                                    game_over = False
                current_player = 3 - current_player  # 切换玩家
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_q:
                pygame.quit()
                sys.exit()
            elif event.key == pygame.K_n:
                reset_game()

    if not game_over:
        draw_board()
        draw_pieces()
        pygame.display.flip()
</code></pre>
    <h2>
     四、代码运行方式
    </h2>
    <h3>
     1.代码运行环境
    </h3>
    <p>
     Python 3.x
    </p>
    <p>
     Pygame 库
    </p>
    <pre><code class="language-python">pip install pygame</code></pre>
    <h3>
     2.运行代码
    </h3>
    <p>
     将上述代码保存为 gobang_game.py 文件，然后在终端中运行以下命令：
    </p>
    <pre><code class="language-python">python gobang_game.py</code></pre>
    <h3>
     3.游戏操作说明
    </h3>
    <p>
     游戏开始后，黑子先手，玩家通过鼠标点击棋盘上的交叉点落子。
     <br/>
     当有一方达成五子连珠时，游戏结束，屏幕中央会显示获胜信息和操作提示。
     <br/>
     按 “Q” 键退出游戏，按 “N” 键重新开始游戏。
    </p>
    <h3>
     4.游戏画面
    </h3>
    <p>
     <img alt="" height="1336" src="https://i-blog.csdnimg.cn/direct/c2a52c93fb4049cf87af74e296e349e6.png" width="1280"/>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e637364:6e2e6e65742f686568655f736f66745f656e67696e6565722f:61727469636c652f64657461696c732f313436333031353336" class_="artid" style="display:none">
 </p>
</div>


