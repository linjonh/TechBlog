---
layout: post
title: "JavaEEIOC和DI"
date: 2025-03-16 17:11:51 +0800
description: "了解IOC的五大类注解和@Bean方法注解，了解DI三种常用的依赖注入方法"
keywords: "【JavaEE】IOC和DI"
categories: ['未分类']
tags: ['Java', 'Ee', 'Android']
artid: "146293776"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146293776
    alt: "JavaEEIOC和DI"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146293776
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146293776
cover: https://bing.ee123.net/img/rand?artid=146293776
image: https://bing.ee123.net/img/rand?artid=146293776
img: https://bing.ee123.net/img/rand?artid=146293776
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【JavaEE】IOC和DI
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <br/>
    <em>
     <strong>
      博客结尾附有此篇博客的全部代码！！！
     </strong>
    </em>
    <p>
    </p>
    <h2>
     <a id="IOC_2">
     </a>
     一、认识IOC
    </h2>
    <blockquote>
     <p>
      Spring IoC（Inversion of Control，控制反转）是Spring框架的核心概念之一，它是一种设计原则，用于实现对象之间的解耦和依赖关系管理。
     </p>
    </blockquote>
    <p>
     什么是控制反转呢？
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4102b244f5af467ab266df54df1f5807.png#pic_center">
      <br/>
      举个例子：以上面造车为例，汽车Run（）起来需要依赖于车身（Framework），而车身依赖于底盘（Bottom），底盘依赖于轮胎（Tire）
      <br/>
      代码实现：
     </img>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        car<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Framework</span> framework<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Framework</span> framework<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Car init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Car is running"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java">
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Framework</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Bottom</span> bottom<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Bottom</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Framework init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bottom</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Tire</span> tire<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Tire</span> tire <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Bottom init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tire</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> color<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> size<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"彩色"</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"color:"</span><span class="token operator">+</span>color<span class="token operator">+</span><span class="token string">",size:"</span><span class="token operator">+</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
    <p>
     这段代码我们发现，它的耦合性太高了，如果我们想要自己设置轮胎大小和颜色，我们就需要将整个程序的代码改一遍。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bottom</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Tire</span> tire<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">,</span><span class="token class-name">Integer</span> size<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Tire</span> tire <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Bottom init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tire</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> color<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> size<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">,</span> <span class="token class-name">Integer</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"color:"</span><span class="token operator">+</span>color<span class="token operator">+</span><span class="token string">",size:"</span><span class="token operator">+</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
    <p>
     解决方案：
     <br/>
     这里我们可以将轮胎，底盘和车身外包给其他公司，他们根据客户的需要制造出零件，我们负责组装。
     <br/>
     实现代码：我们将创建子类的方式，改为传递注入
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Tire</span> tire <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token string">"红色"</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bottom</span> bottom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span>tire<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Framework</span> framework <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span>bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span>framework<span class="token punctuation">)</span><span class="token punctuation">;</span>
        car<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span>  <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Framework</span> framework<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token class-name">Framework</span> framework<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>framework <span class="token operator">=</span> framework<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Car init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Car is running"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Framework</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Bottom</span> bottom<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span><span class="token class-name">Bottom</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> bottom<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Framework init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bottom</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Tire</span> tire<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span><span class="token class-name">Tire</span> tire<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tire <span class="token operator">=</span> tire<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Bottom init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tire</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> color<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> size<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">,</span> <span class="token class-name">Integer</span> size <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"color:"</span><span class="token operator">+</span>color<span class="token operator">+</span><span class="token string">",size:"</span><span class="token operator">+</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8b04fcbc5a5a4831a58828f44779613f.png#pic_center"/>
    </p>
    <blockquote>
     <p>
      通过实现程序我们发现：类的创建顺序是反的，传统代码是 Car 控制并创建了Framework，Framework 创建并创建了Bottom，依次往下，⽽改进之后的控制权发⽣的反转，不再是使⽤⽅对象创建并控制依赖对象了，⽽是把依赖对象注⼊将当前对象中，依赖对象的控制权不再由当前类来控制。
     </p>
    </blockquote>
    <p>
     这样的话, 即使依赖类发⽣任何改变，当前类都是不受影响的，这就是典型的控制反转，也就是 IoC 的实现思想。
    </p>
    <blockquote>
     <p>
      Spring IOC的核心思想：
      <strong>
       将对象的创建和依赖关系的管理从代码中分离出来，交给一个专门的外部容器（如Spring容器）来完成
      </strong>
     </p>
    </blockquote>
    <h2>
     <a id="DI_158">
     </a>
     二、认识DI
    </h2>
    <p>
     DI：Dependency Injection(依赖注⼊)
    </p>
    <blockquote>
     <p>
      DI是实现IoC（Inversion of Control，控制反转）的一种具体技术手段。它的核心思想是通过外部机制（如框架或容器）将依赖关系注入到对象中，而不是由对象自己去创建或查找依赖。这样可以降低对象之间的耦合度，提高代码的可维护性和可测试性。
     </p>
    </blockquote>
    <p>
     依赖注入的核心思想是：由外部机制（如Spring容器）负责创建依赖对象（如B），并将依赖对象注入到需要它的对象（如A）中
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3a038e315a404d6db24c1a62d988441f.png#pic_center"/>
    </p>
    <h2>
     <a id="IOC_166">
     </a>
     三、详解IOC
    </h2>
    <blockquote>
     <p>
      Spring 是⼀个 IoC（控制反转）容器，作为容器, 那么它就具备两个最基础的功能：
      <br/>
      • 存
      <br/>
      • 取
      <br/>
      Spring 容器管理的主要是对象, 这些对象, 我们称之为"
      <strong>
       Bean
      </strong>
      ". 我们把这些对象交由Spring管理, 由Spring来负责对象的创建和销毁.我们程序只需要告诉Spring, 哪些需要存, 以及如何从Spring中取出对象。
     </p>
    </blockquote>
    <h4>
     <a id="31_Bean_173">
     </a>
     3.1 Bean的存储
    </h4>
    <p>
     Bean在上面我们也说了，就是Spring管理起来的对象。
    </p>
    <p>
     实现将对象交给Spring管理，
     <br/>
     共有两类注解类型可以：
    </p>
    <ol>
     <li>
      类注解：@Controller、@Service、@Repository、@Component、@Configuration.
     </li>
     <li>
      ⽅法注解：@Bean.
     </li>
    </ol>
    <h4>
     <a id="32_Controller_182">
     </a>
     3.2 @Controller（控制器存储）
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ControllerDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">controllerMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"controllerMethod"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="33_Bean_192">
     </a>
     3.3 获取Bean的方法
    </h4>
    <p>
     从Spring容器中获取Bean对象：
    </p>
    <ol>
     <li>
      先获取Spring上下⽂对象
     </li>
     <li>
      从Spring上下⽂中获取对象
     </li>
    </ol>
    <p>
     Spring提供的方法：
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/30dcc6a082894586b66ea0f5a7b6af8a.png#pic_center">
      <br/>
      传Bean对象名注意：
     </img>
    </p>
    <ol>
     <li>
      如果Bean对象名是大驼峰，则改成小驼峰 （ControllerMethod–&gt;controllerMethod）
     </li>
     <li>
      如果Bean 对象前两个单词是大写的，则Bean对象名不变(COntrollerMethod–&gt;COntrollerMethod)
     </li>
    </ol>
    <h5>
     <a id="_202">
     </a>
     通过类名获得
    </h5>
    <pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//获取Spring上下文对象</span>
        <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span>
                <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//从Spring上下文获取Bean对象</span>
        <span class="token class-name">ControllerDemo</span> bean <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">ControllerDemo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">controllerMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d3c2e3cb94b64b76a14e7560cdd5df23.png#pic_center"/>
    </p>
    <h5>
     <a id="Bean_216">
     </a>
     通过Bean对象名称
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">ControllerDemo</span> bean1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ControllerDemo</span><span class="token punctuation">)</span>context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"controllerDemo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean1<span class="token punctuation">.</span><span class="token function">controllerMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     返回的Bean 对象类型是Object，这里需要自己强转一下。
     <br/>
     演示一下类名前两个字母都为大写：
    </p>
    <pre><code class="prism language-java"><span class="token class-name">HElloController</span> bean3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HElloController</span><span class="token punctuation">)</span>context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"HElloController"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean3<span class="token punctuation">.</span><span class="token function">controllerMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/096ee7f19d7a4005b6308809ac978a74.png#pic_center">
      <br/>
      当将类名第二个字母改为小写会报错误：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4e87e3177195431f8a7fc0fade12c463.png#pic_center"/>
     </img>
    </p>
    <h5>
     <a id="Bean_232">
     </a>
     通过Bean对象名称和类名
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">ControllerDemo</span> bean2 <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"controllerDemo"</span><span class="token punctuation">,</span> <span class="token class-name">ControllerDemo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean2<span class="token punctuation">.</span><span class="token function">controllerMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="34_Service_238">
     </a>
     3.4 @Service（服务存储）
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServiceDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">ServiceMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Service Method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token class-name">ServiceDemo</span> bean <span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">ServiceDemo</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"serviceDemo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">bean<span class="token punctuation">.</span></span>ServiceMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="35_Repository_253">
     </a>
     3.5 @Repository（仓库存储）
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RepositoryDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">RepositoryMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"RepositoryMethod"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token class-name">RepositoryDemo</span> bean2 <span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">RepositoryDemo</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"repositoryDemo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">bean2<span class="token punctuation">.</span></span>RepositoryMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="36_Component_268">
     </a>
     3.6 @Component（组件存储）
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComponentDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">ComponentMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ComponentMethod"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token class-name">ComponentDemo</span> bean1 <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">ComponentDemo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">bean1<span class="token punctuation">.</span></span>ComponentMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="37_Configuration_283">
     </a>
     3.7 @Configuration（配置存储)
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigurationDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">ConfigurationMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConfigurationMethod"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token class-name">ConfigurationDemo</span> bean3 <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationDemo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">bean3<span class="token punctuation">.</span></span>ConfigurationMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="38__298">
     </a>
     3.8 五大类注释的对比
    </h4>
    <ul>
     <li>
      @Controller代表控制层。接收参数返回响应，
      <em>
       <strong>
        控制层一定要使用@Controller
       </strong>
      </em>
     </li>
     <li>
      @Service代表服务层。专门用于标记服务层组件的注解。通常用于业务逻辑层。
     </li>
     <li>
      @Repository代表数据层。专门用于标记数据访问层组件的注解。通常用于DAO（数据访问对象）层。
     </li>
     <li>
      @Configuration代表配置层。
     </li>
     <li>
      @Component代表组件层。通用的注解，用于将类标记为Spring管理的组件。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/643f656ccc09402ab4ad8ffcca20616a.png#pic_center"/>
      <br/>
      这五大注解都是Spring的组件（组件（Component）是一个泛指，它通常用于描述任何由Spring IoC容器管理的对象）
     </li>
    </ul>
    <h4>
     <a id="39__Bean_306">
     </a>
     3.9 ⽅法注解 @Bean
    </h4>
    <p>
     类注解是添加到某个类上的， 但是存在两个问题:
    </p>
    <ol>
     <li>
      使⽤外部包⾥的类, 没办法添加类注解
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>thirdparty</span><span class="token punctuation">;</span>
<span class="token comment">//这个是第三方库，你不能进行修改</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThirdPartyService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Service performed by ThirdPartyService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//用过Bean注解将第三方库中ThirdPartyService实例交给Spring管理</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>thirdparty<span class="token punctuation">.</span></span><span class="token class-name">ThirdPartyService</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThirdPartyConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ThirdPartyService</span> <span class="token function">thirdPartyService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ThirdPartyService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      ⼀个类, 需要多个对象, ⽐如多个数据源
     </li>
    </ol>
    <blockquote>
     <p>
      当一个应用需要连接多个数据源时，可能需要同一个接口的多个实现。如果使用类注解，Spring容器会为每个标记了相同注解的类创建一个Bean，但无法区分这些Bean。
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">User</span> bean <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     @Bean注解需要搭配五大类注解使用，否则会出现错误！
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f01698c587074999a8af9de7de66da61.png#pic_center"/>
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"user1"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"user2"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2d2d7b244d0046009cca4dbbce61756a.png#pic_center"/>
    </p>
    <h2>
     <a id="_397">
     </a>
     四、扫描路径
    </h2>
    <p>
     使用@ComponentScan注解：
     <br/>
     当我们将启动类放到demo2包下，发现刚才执行的代码报错：
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0aac58f133ce4ff1bff5405f54b77f38.png#pic_center"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/12c98d3739fa43318600e1b902def620.png#pic_center"/>
     <br/>
     这里我们通过@ComponentScan指定Spring扫描com.abcdefg.springioc这个路径下的包。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5485a0ea3a924933b1c986999a0629d2.png#pic_center"/>
    </p>
    <h2>
     <a id="DI_404">
     </a>
     五、DI详解
    </h2>
    <p>
     依赖注⼊是⼀个过程，是指IoC容器在创建Bean时, 去提供运⾏时所依赖的资源，⽽资源指的就是对象。
     <br/>
     简单来说：就是将实例的对象取出，放入到某个类的属性中。
     <br/>
     创建依赖注入的三种方法：
    </p>
    <ul>
     <li>
      属性注⼊(Field Injection)
     </li>
     <li>
      构造⽅法注⼊(Constructor Injection)
     </li>
     <li>
      Setter 注⼊(Setter Injection)
      <br/>
      @Autowired注解是实现依赖注入 的一种常用方式。
     </li>
    </ul>
    <h4>
     <a id="51__412">
     </a>
     5.1 属性注入
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"demo1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//属性注入</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Demo1</span> demo1<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        demo1<span class="token punctuation">.</span><span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"demo2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocApplication</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//获取Spring上下文对象</span>
        <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span>
                <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Demo2</span> bean <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Demo2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="52__445">
     </a>
     5.2 构造方法注入
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg2<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"无参的demo1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">String</span> msg2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg2 <span class="token operator">=</span> msg2<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"两个参数的demo1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"一个参数的demo1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"demo1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Demo1</span> demo1<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">Demo2</span><span class="token punctuation">(</span><span class="token class-name">Demo1</span> demo1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>demo1 <span class="token operator">=</span> demo1<span class="token punctuation">;</span><span class="token comment">//无参的demo1这段话会在这里打印出来</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Demo2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        demo1<span class="token punctuation">.</span><span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果会发现，虽然我们给了三个构造函数，但是@Autowired还是会调用无参的构造函数。
    </p>
    <p>
     当我们注掉无参的构造函数，这段代码就会报错！
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ec975da683b345eb9ea02381127675ca.png#pic_center"/>
     <br/>
     如果我们想使用有参的构造函数，则需要给我们想使用的构造函数前面加上@Autowired，他就会调用我们想使用的构造函数。
     <br/>
     这里的话，上述代码就不能作为演示了，因为msg和msg2是我们定义的基本数据类型，@Autowired不支持基本数据类型注入。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7839cd35a14e46858926ed4cabd95675.png#pic_center"/>
    </p>
    <p>
     所以这里我用已经注入到Spring容器中的类来演示。
    </p>
    <pre><code class="prism language-java">    <span class="token comment">//构造方法注入</span>
    <span class="token keyword">private</span> <span class="token class-name">ControllerDemo</span> controller<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ComponentDemo</span> component<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token class-name">ControllerDemo</span> controller<span class="token punctuation">,</span> <span class="token class-name">ComponentDemo</span> component<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>controller <span class="token operator">=</span> controller<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token class-name">ControllerDemo</span> controller<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>controller <span class="token operator">=</span> controller<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"demo1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        controller<span class="token punctuation">.</span><span class="token function">controllerMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">component<span class="token punctuation">.</span></span>ComponentMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="53_setter_520">
     </a>
     5.3 setter方法注入
    </h4>
    <pre><code class="prism language-java">        <span class="token keyword">private</span> <span class="token class-name">ControllerDemo</span> controller<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ComponentDemo</span> component<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setController</span><span class="token punctuation">(</span><span class="token class-name">ControllerDemo</span> controller<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>controller <span class="token operator">=</span> controller<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setComponent</span><span class="token punctuation">(</span><span class="token class-name">ComponentDemo</span> component<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"demo1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        controller<span class="token punctuation">.</span><span class="token function">controllerMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">component<span class="token punctuation">.</span></span>ComponentMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="54_Autowired_540">
     </a>
     5.4 @Autowired存在问题
    </h4>
    <ul>
     <li>
      <strong>
       属性注⼊
      </strong>
     </li>
    </ul>
    <p>
     优点:
    </p>
    <ol>
     <li>
      简洁，使⽤⽅便；
     </li>
    </ol>
    <p>
     缺点:
    </p>
    <ol>
     <li>
      只能⽤于 IoC 容器，如果是⾮ IoC 容器不可⽤，并且只有在使⽤的时候才会出现NPE（空指针异常）
     </li>
     <li>
      不能注⼊⼀个Final修饰的属性
     </li>
    </ol>
    <ul>
     <li>
      <strong>
       构造函数注⼊(Spring 4.X推荐)
      </strong>
     </li>
    </ul>
    <p>
     优点:
    </p>
    <ol>
     <li>
      可以注⼊final修饰的属性
     </li>
     <li>
      注⼊的对象不会被修改
     </li>
     <li>
      依赖对象在使⽤前⼀定会被完全初始化，因为依赖是在类的构造⽅法中执⾏的，⽽构造⽅法是在类加载阶段就会执⾏的⽅法.
     </li>
     <li>
      通⽤性好,构造⽅法是JDK⽀持的, 所以更换任何框架,他都是适⽤的
     </li>
    </ol>
    <p>
     缺点:
    </p>
    <ol>
     <li>
      注⼊多个对象时, 代码会⽐较繁琐
     </li>
    </ol>
    <ul>
     <li>
      <strong>
       Setter注⼊(Spring 3.X推荐)
      </strong>
     </li>
    </ul>
    <p>
     优点:
    </p>
    <ol>
     <li>
      ⽅便在类实例之后, 重新对该对象进⾏配置或者注⼊
     </li>
    </ol>
    <p>
     缺点:
    </p>
    <ol>
     <li>
      不能注⼊⼀个Final修饰的属性
     </li>
     <li>
      注⼊对象可能会被改变, 因为setter⽅法可能会被多次调⽤,就有被修改的⻛险
     </li>
    </ol>
    <p>
     解决方法:
    </p>
    <ul>
     <li>
      @Primary
     </li>
     <li>
      @Qualifier
     </li>
     <li>
      @Resource
      <br/>
      当我们注入对象User对象：
     </li>
    </ul>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"user1"</span><span class="token punctuation">,</span><span class="token string">"hahh"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"user2"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"demo2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1c21c637bc064f47a8c04b894fe592a7.png#pic_center"/>
     <br/>
     修改方法：
    </p>
    <ol>
     <li>
      加入@Primary注解（package org.springframework.context.annotation）
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1cea7ed36ef14889954f16848644810c.png#pic_center"/>
     </li>
     <li>
      使用@Qualifier注解（package org.springframework.beans.factory.annotation）
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cd14c4bf22b441b68548f3b3207e8057.png#pic_center"/>
     </li>
     <li>
      使用@Resource（package jakarta.annotation）
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0a286584357e4c28bbe91838091c6583.png#pic_center"/>
     </li>
    </ol>
    <h5>
     <a id="Autowird__Resource_615">
     </a>
     @Autowird 与 @Resource的区别
    </h5>
    <ul>
     <li>
      @Autowired 是spring框架提供的注解，而@Resource是JDK提供的注解
     </li>
     <li>
      @Autowired 默认是按照类型注入，而@Resource是按照名称注入.相比于 @Autowired 来说，@Resource 支持更多的参数设置，例如name设置，根据名称获取 Bean.
     </li>
    </ul>
    <p>
     <a href="https://gitee.com/songhang_C/java-homework/commit/58698ade7d13d7d75b1e2f7de6bb991aac5d9e50" rel="nofollow">
      此篇博客的全部代码！！！
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330335f37373533353736322f:61727469636c652f64657461696c732f313436323933373736" class_="artid" style="display:none">
 </p>
</div>


