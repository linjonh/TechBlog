---
layout: post
title: "先电云平台搭建教程"
date: 2021-04-25 19:11:27 +0800
description: "本文包括使用VMware建立Linux虚拟机和openstack及云平台建立主机1.使用VMware"
keywords: "xiandian发布云主机步骤"
categories: ['云计算']
tags: ['Openstack', 'Linux', 'Centos']
artid: "116098227"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=116098227
    alt: "先电云平台搭建教程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=116098227
featuredImagePreview: https://bing.ee123.net/img/rand?artid=116098227
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     先电云平台搭建教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     刚开始写，大佬勿喷！！
    </p>
    <h3>
     <a id="1VMwareLinux_1">
     </a>
     1.使用VMware创建Linux虚拟机
    </h3>
    <h3>
     <a id="_centos_2">
     </a>
     第一步 安装centos
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ae241bfb9c52658d8a6daa37fa584388.png#pic_center">
      <img alt="1" src="https://i-blog.csdnimg.cn/blog_migrate/70c4a440cd9f55448c5664c448496722.png#pic_center">
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/52aa14de5587e62e92c7a6386f970c83.png#pic_center">
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7a07314a5f8adbee9cd31c7eaae95fba.png#pic_center">
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8e844715e6c543abbf495ae6cb2047a8.png#pic_center">
          <br/>
          <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/79783d3064ac2cd4a4c3226539838045.png#pic_center"/>
         </img>
        </img>
       </img>
      </img>
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5edadac398857964527cf3838f971415.png#pic_center">
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5bfdc2ced5b63a7a532ca80177e6ff2f.png#pic_center">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d9521d9eaac788e96975a888d54a3ccd.png#pic_center"/>
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6ca8e5641a72eb535dc5dca122ef5a7d.png#pic_center"/>
       <br/>
       可以按照这样设置即可
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f1f64c59dfb5cfde808857036b050c3c.png#pic_center"/>
       <br/>
       将两张网卡都打开
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dd312af92f718cdc7a71f3b842536023.png#pic_center"/>
       <br/>
       密码这里由于设置得比较简单，所以确定的时候需要点两次完成
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/939001d000b2b4215e3225b314d47859.png#pic_center"/>
       <br/>
       需要注意的是compute节点的空间需要给予大一点
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c828a70347dc0100575a18b191318f7d.png#pic_center"/>
       <br/>
       安装完成之后就可以开机配置网卡了
      </img>
     </img>
    </p>
    <h3>
     <a id="__20">
     </a>
     第二步 重命名，配置网卡
    </h3>
    <p>
     先重命名
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/392e64e25139f4944d5809aba4c3ab26.png#pic_center"/>
     <br/>
     compute节点重命名
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ef3fdf0ed48154b55eed5b52747820d8.png"/>
    </p>
    <p>
     接下来就是配置网卡
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8c9ab15c77d8ca88c536d3e13e36ea46.png"/>
     <br/>
     命令记不住没关系，学会善用tab键补全，同时使用tab也可以保证命令的正确率
     <br/>
     controller节点
     <br/>
     需要将BOOTPROTO=dhcp改为BOOTPROTO=static
     <br/>
     也就是将动态IP改为静态
     <br/>
     ONBOOT=no改为ONBOOT=yes
     <br/>
     其他如图
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c8c528ba9a0b2f7bb6cbcdf889674b95.png"/>
     <br/>
     controller第二张网卡
     <br/>
     第二张网卡需要设置为200网段
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b3140bc6b34fea5bbdde5884900a1e04.png"/>
     <br/>
     设置完成后就可以重启网卡了
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/76a138be8667f76b60dd5dacdf640935.png"/>
     <br/>
     compute节点的网卡设置（其实和controller的设置差不多一样的）
     <br/>
     第一张网卡
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f4f27a65246b5f9002183cde36481f16.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fcf51708d6617ced6b9fe369be99f723.png"/>
     <br/>
     compute第二张网卡
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9d3fc4b9310aa9517fafa0617e1c6acc.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/66cf1b4f246b50c05417d3e1190e98f6.png"/>
     <br/>
     然后照例重启网卡
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/aa65579e3495eac22141367de930ba97.png"/>
     <br/>
     现在就可以连接CRT了
     <br/>
     <strong>
      为了方便区分，这里controller节点的背景是绿色的
      <br/>
      compute节点的是泛白色的
     </strong>
     <br/>
     连接之前可以使用 ip add 查看ip地址
    </p>
    <h3>
     <a id="_CRT_53">
     </a>
     第三步 使用CRT上传镜像
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/89c3597b7f4942459f421dda42aa1a5e.png"/>
     <br/>
     <em>
      上传镜像过程较长，可以上传的时候进行yum源的配置
     </em>
     <br/>
     <strong>
      1.controller节点:
     </strong>
     <br/>
     需要在controller节点中进行yum源备份
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/433b440a4be2b1e10febbea5b3547d63.png"/>
     <br/>
     备份后编辑yum源
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7134f8ff02e93a62e4f63f527582bf60.png"/>
     <br/>
     yum源示例
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a3102874a2f80cd89b715899fb0d99b8.png"/>
     <br/>
     <strong>
      2.compute节点:
     </strong>
     <br/>
     一样先备份yum源后再编辑
     <br/>
     <em>
      先用第一条命令备份yum源后再用第二条命令编辑yum源
     </em>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/afc2e53600e3cef2ff7268d01de6a7ef.png"/>
     <br/>
     compute的yum源示例:
     <br/>
     要注意的是这里ftp://后面的ip地址是controller节点第一张网卡的ip地址
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/552c461c67f2f0e9a0ce088cd7226e22.png"/>
     <br/>
     完成后就看挂载镜像完成没有
     <br/>
     <strong>
      挂载镜像
     </strong>
     <br/>
     <em>
      只需要在controller节点做
     </em>
     <br/>
     CRT中的镜像传输完成之后就可以挂载了
     <br/>
     <strong>
      1.挂载centos的镜像
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/35f28f9f9486fb3e112605fa4824fbee.png"/>
     <br/>
     <strong>
      2.挂载iaas的镜像
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/364b82e4862b1d5b304baa751b300a5f.png"/>
    </p>
    <h3>
     <a id="_ftp_78">
     </a>
     第四步 搭建ftp
    </h3>
    <p>
     这个只需要在controller节点做
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fe5c621e3b97b6f3f87a08b38dc51efa.png"/>
     <br/>
     编辑ftp文件
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/64f72925ab9c0bab3320568a67519a74.png"/>
     <br/>
     在里面添加这一段代码，可以在任意位置添加
    </p>
    <pre><code class="prism language-c">anon_root<span class="token operator">=</span><span class="token operator">/</span>opt<span class="token operator">/</span>
</code></pre>
    <p>
     效果如下图
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/55458bd7715932b37fd0265332d539de.png"/>
     <br/>
     然后开启ftp服务
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/74da6c07f3a2bbffc96f22f3738381ae.png"/>
    </p>
    <h3>
     <a id="_selinux_90">
     </a>
     第五步 配置防火墙及修改selinux
    </h3>
    <p>
     controller和compute两个节点都需要做
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ce8567ae2e1190d73838a09a7ffa7623.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fdf1aaa474ac7f8fb0bd9c1ed0dead31.png"/>
     <br/>
     修改配置中的
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ff6eeb2ee5e7b25422d1633279ba38e5.png"/>
     <br/>
     将它改为
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f5ac9120945a3ea723b872b3e88eef30.png"/>
     <br/>
     改完之后就执行命令然后查看一下
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2b310f5c4e1c75c03954b29083d7bd5d.png"/>
    </p>
    <h3>
     <a id="_yum_100">
     </a>
     第六步 验证yum源
    </h3>
    <p>
     清除缓存 controller节点和compute节点都需要做
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b2d1b0ea4dbc0938b4ff06b077c9f846.png"/>
    </p>
    <h3>
     <a id="_iaasxiandian_103">
     </a>
     第七步 安装iaas-xiandian
    </h3>
    <p>
     controller和compute节点都做
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dcab6ca05df922d136da02629ddbf9a8.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/303c7ad721b331ed4a84b5072905cab0.png"/>
     <br/>
     下面的命令用于替换openrc.sh里面开头的所有#号
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b82bce53c4d0b4033f1e4bbab1c50575.png"/>
     <br/>
     下面命令用于填充所有的PASS=
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5757fa5a80ce92a6c3c215432c82fb97.png"/>
     <br/>
     完成之后保存退出后再次进入openrc.sh进行完整编辑
     <br/>
     controller和compute节点都做 示例如下:
     <br/>
     需要注意我这里的
     <em>
      <strong>
       192.168.100.30
      </strong>
     </em>
     为
     <em>
      <strong>
       controller
      </strong>
     </em>
     节点的第一张网卡的ip地址
     <br/>
     <em>
      <strong>
       192.168.100.70
      </strong>
     </em>
     则是
     <em>
      <strong>
       compute
      </strong>
     </em>
     节点的第一张网卡的ip地址
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/437e51882406b6f74f39b62877c6566a.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ed47117f2842d1725d17d422d86c8e3e.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/da57c77d16c66c8545d6c14ad53064e2.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/622f2bb315858c36af0297160f13a05a.png"/>
     <br/>
     需要注意的是在compute节点的这一行的ip地址需要修改为compute的第一张网卡的IP地址，即
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f8092635a5408f713e0e7e3826134bc4.png"/>
     <br/>
     controller的则为
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/707e56d8f7dc4b4ff475d391f029bc7f.png"/>
    </p>
    <h3>
     <a id="__123">
     </a>
     第八步 跑脚本
    </h3>
    <p>
     *跑脚本时，需要注意是否报ERROR，如果报错则需要排错，排错的过程耐人寻味
     <br/>
     在跑完第一个脚本后会提示reboot，这个时候只需要Crtl+d即可，然后重新连接
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fca310061b55b294822ace83dfe7b2fa.png"/>
     <br/>
     <mark>
      所有脚本跑完后，打开浏览器输入http://(controller节点的ip)/dashboard
     </mark>
     <br/>
     用我的做为示例：controller的ip为192.168.100.30 所以就是 http://192.168.100.30/dashboard
     <br/>
     不出意外的话是可以进入像下图一样的界面的
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/28cc0154176977add303c418fdd5b9f0.png"/>
     <br/>
     然后依次输入配置好的账户 用户名就是admin 在安装的时候写进去的，以及密码000000
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c6e731e424af23f6bbbc0bfbce9b3bc4.png"/>
     <br/>
     如果和下图一样则表示成功完成
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/07d3c7f57c918824f6c92bc9753e354f.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f79616e6768616f6368656e313132322f:61727469636c652f64657461696c732f313136303938323237" class_="artid" style="display:none">
 </p>
</div>


