---
layout: post
title: "第五章-PHP函数"
date: 2025-03-16 16:03:54 +0800
description: "字符串/数组操作：处理数据的基础工具。文件系统：读写文件和目录管理。日期时间：时间处理与格式化。数据库：MySQLi和PDO操作。错误处理：调试与异常捕获。JSON：数据序列化与解析。注意事项根据PHP版本选择函数（如PHP8新增的字符串函数）。操作文件或数据库时注意路径和SQL注入安全。使用最新函数（如替代md5()加密）。这个项目实现了以下功能使用文件包含（include）实现了公共头部和底部使用自定义函数进行数据验证和文件操作使用基本语法（条件判断、循环、表单处理等）"
keywords: "第五章-PHP函数"
categories: ['未分类']
tags: ['开发语言', 'Php']
artid: "146296597"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146296597
    alt: "第五章-PHP函数"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146296597
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146296597
cover: https://bing.ee123.net/img/rand?artid=146296597
image: https://bing.ee123.net/img/rand?artid=146296597
img: https://bing.ee123.net/img/rand?artid=146296597
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     第五章-PHP函数
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="PHP_0">
     </a>
     PHP函数
    </h2>
    <h3>
     <a id="_2">
     </a>
     一，函数的基本概念
    </h3>
    <p>
     函数（Function）是 PHP 中用于封装可重用代码的核心工具。通过函数，可以将复杂逻辑模块化，提高代码的可读性、复用性和可维护性。
    </p>
    <h4>
     <a id="_6">
     </a>
     <strong>
      一、函数的定义与语法
     </strong>
    </h4>
    <h5>
     <a id="1__8">
     </a>
     1.
     <strong>
      基本语法
     </strong>
    </h5>
    <p>
     PHP 函数通过
     <code>
      function
     </code>
     关键字定义，语法如下：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> 函数名<span class="token punctuation">(</span>参数<span class="token number">1</span><span class="token punctuation">,</span> 参数<span class="token number">2</span> <span class="token operator">=</span> 默认值<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 返回类型 <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 逻辑代码</span>
    <span class="token keyword">return</span> 值<span class="token punctuation">;</span> <span class="token comment">// 可选</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      示例
     </strong>
     ：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 输出 15 (5 + 10)</span>
<span class="token keyword">echo</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 10 (3 + 7)</span>
</code></pre>
    <h5>
     <a id="2__29">
     </a>
     2.
     <strong>
      关键组成部分
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       参数
      </strong>
      ：
      <ul>
       <li>
        支持默认值（如
        <code>
         $b = 10
        </code>
        ）。
       </li>
       <li>
        可指定类型（如
        <code>
         int $a
        </code>
        ，PHP 7+ 支持标量类型声明）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       返回值
      </strong>
      ：
      <ul>
       <li>
        使用
        <code>
         return
        </code>
        返回结果，若未指定则默认返回
        <code>
         null
        </code>
        。
       </li>
       <li>
        PHP 7+ 支持返回类型声明（如
        <code>
         : int
        </code>
        ）。
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="3__38">
     </a>
     3.
     <strong>
      匿名函数（闭包）
     </strong>
    </h5>
    <p>
     匿名函数没有名称，常用于回调或赋值给变量：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$greet</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello, <span class="token interpolation"><span class="token variable">$name</span></span>!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token variable">$greet</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello, Alice!</span>
</code></pre>
    <h5>
     <a id="4_PHP_74_49">
     </a>
     4.
     <strong>
      箭头函数（PHP 7.4+）
     </strong>
    </h5>
    <p>
     简化匿名函数语法，自动捕获外部变量：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$multiplier</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token variable">$double</span> <span class="token operator">=</span> <span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token variable">$x</span> <span class="token operator">*</span> <span class="token variable">$multiplier</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：10</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_61">
     </a>
     <strong>
      二、函数的命名规范
     </strong>
    </h4>
    <p>
     良好的命名规范能显著提升代码可读性。以下是 PHP 函数的常见命名规则：
    </p>
    <h5>
     <a id="1__65">
     </a>
     1.
     <strong>
      命名风格
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        驼峰式（camelCase）
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">getUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        下划线式（snake_case）
       </strong>
       （传统风格）：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_user_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2__79">
     </a>
     2.
     <strong>
      命名原则
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        清晰表达功能
       </strong>
       ：
       <br/>
       函数名应明确描述其作用，如
       <code>
        calculateTotalPrice()
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        使用动词
       </strong>
       ：
       <br/>
       函数通常表示一个动作，如
       <code>
        createUser()
       </code>
       、
       <code>
        validateEmail()
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        布尔函数
       </strong>
       ：
       <br/>
       以
       <code>
        is
       </code>
       、
       <code>
        has
       </code>
       、
       <code>
        can
       </code>
       开头，返回布尔值：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">isValidEmail</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3__94">
     </a>
     3.
     <strong>
      避免的命名
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       无意义名称
      </strong>
      ：如
      <code>
       doSomething()
      </code>
      、
      <code>
       process()
      </code>
      。
     </li>
     <li>
      <strong>
       与内置函数冲突
      </strong>
      ：如
      <code>
       array()
      </code>
      、
      <code>
       echo()
      </code>
      。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_101">
     </a>
     <strong>
      三、函数的调用与作用域
     </strong>
    </h4>
    <h5>
     <a id="1__103">
     </a>
     1.
     <strong>
      调用方式
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       直接调用：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       动态调用（可变函数）：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$funcName</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"add"</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$funcName</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等同于 add(3, 5)</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2__118">
     </a>
     2.
     <strong>
      变量作用域
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        局部变量
       </strong>
       ：函数内部定义的变量仅在函数内有效。
      </p>
     </li>
     <li>
      <p>
       <strong>
        全局变量
       </strong>
       ：需通过
       <code>
        global
       </code>
       或
       <code>
        $GLOBALS
       </code>
       访问：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$globalVar</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-definition function">showGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">global</span> <span class="token variable">$globalVar</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token variable">$globalVar</span><span class="token punctuation">;</span> <span class="token comment">// 输出 100</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_134">
     </a>
     <strong>
      四、最佳实践
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        单一职责原则
       </strong>
       <br/>
       一个函数只完成一个任务。
      </p>
      <pre><code class="prism language-php"><span class="token comment">// 错误示例：混合功能</span>
<span class="token keyword">function</span> <span class="token function-definition function">processUser</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">validate</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">saveToDatabase</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 正确示例：拆分功能</span>
<span class="token keyword">function</span> <span class="token function-definition function">validateUser</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-definition function">saveUser</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        参数与返回值
       </strong>
      </p>
      <ul>
       <li>
        参数尽量不超过 3 个，复杂数据可用数组或对象封装。
       </li>
       <li>
        使用类型声明（PHP 7+）提升代码健壮性。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        错误处理
       </strong>
      </p>
      <ul>
       <li>
        验证输入参数，避免函数内部崩溃。
       </li>
      </ul>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">divide</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">float</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$b</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidArgumentException</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"除数不能为0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">/</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_172">
     </a>
     <strong>
      五、总结
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th align="left">
        <strong>
         核心要点
        </strong>
       </th>
       <th align="left">
        <strong>
         说明
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <strong>
         定义语法
        </strong>
       </td>
       <td align="left">
        <code>
         function 函数名(参数): 返回类型 { ... }
        </code>
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         命名规范
        </strong>
       </td>
       <td align="left">
        动词开头，清晰表达功能（如
        <code>
         calculateTotal()
        </code>
        ）
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         参数与返回值
        </strong>
       </td>
       <td align="left">
        类型声明、默认值、异常处理
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         作用域管理
        </strong>
       </td>
       <td align="left">
        局部变量、全局变量、闭包捕获
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h3>
     <a id="_183">
     </a>
     二，实际参数与形式参数
    </h3>
    <p>
     在 PHP 函数中，**形式参数（形参）
     <strong>
      和
     </strong>
     实际参数（实参）**是函数参数传递的两个核心概念。它们的区别与联系直接决定了函数如何接收和处理数据。
    </p>
    <hr/>
    <h4>
     <a id="1_Formal_Parameters_189">
     </a>
     <strong>
      1. 形式参数（Formal Parameters）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：
      <br/>
      形式参数是函数
      <strong>
       定义时声明的参数
      </strong>
      ，用于接收外部传入的值，是函数内部的局部变量。
     </li>
     <li>
      <strong>
       位置
      </strong>
      ：
      <br/>
      出现在函数声明的小括号中，例如
      <code>
       function sum($a, $b)
      </code>
      中的
      <code>
       $a
      </code>
      和
      <code>
       $b
      </code>
      。
     </li>
     <li>
      <strong>
       作用
      </strong>
      ：
      <ul>
       <li>
        作为占位符，定义函数需要接收的数据类型和数量。
       </li>
       <li>
        仅在函数体内有效，与外部变量无关（除非使用引用传递）。
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <strong>
      示例
     </strong>
     ：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">calculateTotal</span><span class="token punctuation">(</span><span class="token variable">$price</span><span class="token punctuation">,</span> <span class="token variable">$quantity</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// $price 和 $quantity 是形式参数</span>
    <span class="token keyword">return</span> <span class="token variable">$price</span> <span class="token operator">*</span> <span class="token variable">$quantity</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="2_Actual_Parameters_209">
     </a>
     <strong>
      2. 实际参数（Actual Parameters）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：
      <br/>
      实际参数是函数
      <strong>
       调用时传递的具体值或变量
      </strong>
      ，用于为形式参数提供实际数据。
     </li>
     <li>
      <strong>
       位置
      </strong>
      ：
      <br/>
      出现在函数调用的小括号中，例如
      <code>
       sum(3, 5)
      </code>
      中的
      <code>
       3
      </code>
      和
      <code>
       5
      </code>
      。
     </li>
     <li>
      <strong>
       作用
      </strong>
      ：
      <ul>
       <li>
        将外部数据传递给函数。
       </li>
       <li>
        可以是字面量（如数字、字符串）、变量或表达式。
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <strong>
      示例
     </strong>
     ：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$itemPrice</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token variable">$itemCount</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// 调用 calculateTotal 函数，传递实际参数</span>
<span class="token variable">$total</span> <span class="token operator">=</span> <span class="token function">calculateTotal</span><span class="token punctuation">(</span><span class="token variable">$itemPrice</span><span class="token punctuation">,</span> <span class="token variable">$itemCount</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// $itemPrice 和 $itemCount 是实际参数</span>
</code></pre>
    <hr/>
    <h4>
     <a id="3__232">
     </a>
     <strong>
      3. 关键区别与联系
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th align="left">
        <strong>
         特性
        </strong>
       </th>
       <th align="left">
        <strong>
         形式参数
        </strong>
       </th>
       <th align="left">
        <strong>
         实际参数
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <strong>
         定义位置
        </strong>
       </td>
       <td align="left">
        函数声明时定义
       </td>
       <td align="left">
        函数调用时传递
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         作用域
        </strong>
       </td>
       <td align="left">
        仅在函数体内有效
       </td>
       <td align="left">
        可以是全局变量或局部变量
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         数据来源
        </strong>
       </td>
       <td align="left">
        由实际参数赋值
       </td>
       <td align="left">
        来自函数外部
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         生命周期
        </strong>
       </td>
       <td align="left">
        函数执行时创建，结束后销毁
       </td>
       <td align="left">
        独立于函数存在
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="4__243">
     </a>
     <strong>
      4. 参数传递方式
     </strong>
    </h4>
    <p>
     PHP 默认采用
     <strong>
      按值传递
     </strong>
     ，但也可通过引用传递修改外部变量。
    </p>
    <ol>
     <li>
      <p>
       <strong>
        按值传递
       </strong>
       （默认）：
      </p>
      <ul>
       <li>
        形式参数是实际参数的副本，函数内修改不影响外部变量。
       </li>
      </ul>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">increment</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$num</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"函数内: <span class="token interpolation"><span class="token variable">$num</span></span>"</span><span class="token punctuation">;</span> <span class="token comment">// 输出 6</span>
<span class="token punctuation">}</span>

<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token function">increment</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"函数外: <span class="token interpolation"><span class="token variable">$value</span></span>"</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 5（未改变）</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        按引用传递
       </strong>
       ：
      </p>
      <ul>
       <li>
        使用
        <code>
         &amp;
        </code>
        符号，形式参数与实际参数指向同一内存地址，函数内修改会影响外部变量。
       </li>
      </ul>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">incrementRef</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$num</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$num</span><span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token function">incrementRef</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$value</span><span class="token punctuation">;</span> <span class="token comment">// 输出 6</span>
</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="5__278">
     </a>
     <strong>
      5. 默认参数与可变参数
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        默认参数
       </strong>
       ：
       <br/>
       形式参数可设置默认值，调用时若未传递实参则使用默认值。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Guest"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello, <span class="token interpolation"><span class="token variable">$name</span></span>!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 输出：Hello, Guest!</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出：Hello, Alice!</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        可变参数（可变长度参数列表）
       </strong>
       ：
       <br/>
       使用
       <code>
        ...
       </code>
       或
       <code>
        func_get_args()
       </code>
       接收任意数量的实参。
      </p>
      <pre><code class="prism language-php"><span class="token comment">// PHP 5.6+ 使用 ... 语法</span>
<span class="token keyword">function</span> <span class="token function-definition function">sum</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token variable">$numbers</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 6</span>
</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="6_PHP_7_305">
     </a>
     <strong>
      6. 类型约束（PHP 7+）
     </strong>
    </h4>
    <p>
     形式参数可指定类型，强制实参必须匹配类型，提升代码健壮性：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">divide</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">float</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$b</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidArgumentException</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"除数不能为0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">/</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 3.333...</span>
<span class="token comment">// divide("10", 3); // 类型错误：期望 int，传递了字符串</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_323">
     </a>
     <strong>
      总结
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       形式参数
      </strong>
      是函数定义的“占位符”，决定函数如何接收数据。
     </li>
     <li>
      <strong>
       实际参数
      </strong>
      是调用函数时传递的具体数据，决定函数处理的内容。
     </li>
     <li>
      <strong>
       按值传递
      </strong>
      与
      <strong>
       按引用传递
      </strong>
      决定了数据修改是否影响外部变量。
     </li>
     <li>
      <strong>
       类型约束
      </strong>
      和
      <strong>
       默认参数
      </strong>
      可增强代码的可靠性和灵活性。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_332">
     </a>
     三，参数处理
    </h3>
    <p>
     PHP 函数参数处理是编写灵活且健壮代码的核心技能之一。以下是 PHP 中参数处理的主要方式、规则及最佳实践：
    </p>
    <hr/>
    <h4>
     <a id="1__338">
     </a>
     <strong>
      1. 参数传递方式
     </strong>
    </h4>
    <p>
     PHP 支持两种参数传递方式：
    </p>
    <h6>
     <a id="_342">
     </a>
     <strong>
      按值传递（默认）
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：函数内部修改参数不会影响外部变量。
      </p>
     </li>
     <li>
      <p>
       <strong>
        定义与使用
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <strong>
          语法
         </strong>
         ：在函数定义时为参数指定默认值，调用时若未传递该参数则使用默认值。
        </p>
        <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Guest"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello, <span class="token interpolation"><span class="token variable">$name</span></span>!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 输出：Hello, Guest!</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello, Alice!</span>
</code></pre>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        规则与限制
       </strong>
      </p>
      <ol>
       <li>
        <p>
         <strong>
          参数顺序
         </strong>
         ：
         <br/>
         <strong>
          默认参数必须放在非默认参数之后
         </strong>
         ，否则会导致语法错误。
        </p>
        <pre><code class="prism language-php"><span class="token comment">// 正确：默认参数在后</span>
<span class="token keyword">function</span> <span class="token function-definition function">example</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token variable">$c</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token comment">// 错误：非默认参数在默认参数之后</span>
<span class="token keyword">function</span> <span class="token function-definition function">wrong</span><span class="token punctuation">(</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span> <span class="token comment">// 编译错误</span>
</code></pre>
       </li>
       <li>
        <p>
         <strong>
          灵活调用
         </strong>
         ：
         <br/>
         PHP 8.0+ 支持
         <strong>
          命名参数
         </strong>
         ，允许跳过中间参数直接为指定参数赋值。
        </p>
        <pre><code class="prism language-php"><span class="token function">example</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token argument-name">c</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// PHP 8.0+：$a=1, $b=2（默认）, $c=5</span>
</code></pre>
       </li>
      </ol>
     </li>
    </ul>
    <h6>
     <a id="_378">
     </a>
     <strong>
      按引用传递
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：通过
       <code>
        &amp;
       </code>
       符号声明参数，函数内部修改直接影响外部变量。
      </p>
     </li>
     <li>
      <p>
       <strong>
        定义与使用
       </strong>
      </p>
      <ul>
       <li>
        <p>
         <strong>
          语法
         </strong>
         ：在参数前添加
         <code>
          &amp;
         </code>
         ，使函数内部修改直接影响外部变量。
        </p>
        <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">increment</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$num</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$num</span><span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token function">increment</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$value</span><span class="token punctuation">;</span> <span class="token comment">// 输出：6</span>
</code></pre>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        规则与限制
       </strong>
      </p>
      <ol>
       <li>
        <p>
         <strong>
          实参必须为变量
         </strong>
         ：
         <br/>
         引用传递要求实参必须是已定义的变量，不能是字面量或表达式结果。
        </p>
        <pre><code class="prism language-php"><span class="token function">increment</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 错误：Cannot pass literal as reference</span>
<span class="token function">increment</span><span class="token punctuation">(</span><span class="token variable">$x</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 错误：表达式结果无法传递</span>
</code></pre>
       </li>
       <li>
        <p>
         <strong>
          默认值与引用冲突
         </strong>
         ：
         <br/>
         <strong>
          引用参数无法设置字面量默认值
         </strong>
         ，因为引用必须绑定到变量。
        </p>
        <pre><code class="prism language-php"><span class="token comment">// 错误示例</span>
<span class="token keyword">function</span> <span class="token function-definition function">refWithDefault</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$var</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span> <span class="token comment">// 编译错误</span>
</code></pre>
       </li>
      </ol>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="2__416">
     </a>
     <strong>
      2. 默认参数值
     </strong>
    </h4>
    <p>
     为参数设置默认值，调用时可选传递：
    </p>
    <h6>
     <a id="_420">
     </a>
     <strong>
      语法规则
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       默认参数必须放在参数列表末尾。
      </p>
     </li>
     <li>
      <p>
       <strong>
        正确示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Guest"</span><span class="token punctuation">,</span> <span class="token variable">$greeting</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Hello"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$greeting</span></span>, <span class="token interpolation"><span class="token variable">$name</span></span>!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello, Guest!</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        错误示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">errorExample</span><span class="token punctuation">(</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token comment">// 编译错误：非默认参数在默认参数后</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="PHP_8__439">
     </a>
     <strong>
      PHP 8+ 命名参数
     </strong>
    </h6>
    <p>
     允许跳过中间参数，直接指定参数名赋值：
    </p>
    <pre><code class="prism language-php"><span class="token function">greet</span><span class="token punctuation">(</span><span class="token argument-name">greeting</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">"Hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hi, Guest!</span>
</code></pre>
    <hr/>
    <h4>
     <a id="3__449">
     </a>
     <strong>
      3. 可变数量参数
     </strong>
    </h4>
    <p>
     处理不确定数量的参数输入：
    </p>
    <h6>
     <a id="PHP_55__453">
     </a>
     <strong>
      传统方式（PHP 5.5 及以下）
     </strong>
    </h6>
    <p>
     使用
     <code>
      func_get_args()
     </code>
     获取参数数组：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$args</span> <span class="token operator">=</span> <span class="token function">func_get_args</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 6</span>
</code></pre>
    <h6>
     <a id="PHP_56_465">
     </a>
     <strong>
      可变参数语法（PHP 5.6+）
     </strong>
    </h6>
    <p>
     使用
     <code>
      ...
     </code>
     操作符：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">sum</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token variable">$numbers</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 6</span>
</code></pre>
    <h6>
     <a id="_476">
     </a>
     <strong>
      类型约束可变参数
     </strong>
    </h6>
    <p>
     限制可变参数的类型：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">sumInts</span><span class="token punctuation">(</span><span class="token keyword type-declaration">int</span> <span class="token operator">...</span><span class="token variable">$numbers</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">sumInts</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "3" 转换为整数 3</span>
</code></pre>
    <hr/>
    <h4>
     <a id="4_PHP_7_489">
     </a>
     <strong>
      4. 类型声明（PHP 7+）
     </strong>
    </h4>
    <p>
     增强参数和返回值的类型安全：
    </p>
    <h6>
     <a id="_493">
     </a>
     <strong>
      标量类型约束
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       支持
       <code>
        int
       </code>
       ,
       <code>
        string
       </code>
       ,
       <code>
        float
       </code>
       ,
       <code>
        bool
       </code>
       等类型。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 5</span>
<span class="token keyword">echo</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"2"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 字符串 "2" 转换为整数 2</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="_505">
     </a>
     <strong>
      严格模式
     </strong>
    </h6>
    <p>
     在文件顶部声明
     <code>
      declare(strict_types=1);
     </code>
     强制类型检查：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-definition function">strictAdd</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">strictAdd</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"2"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错：期望 int，传递了字符串</span>
</code></pre>
    <hr/>
    <h4>
     <a id="5_PHP_71_519">
     </a>
     <strong>
      5. 参数解构（PHP 7.1+）
     </strong>
    </h4>
    <p>
     从数组或对象中解构参数：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">printCoordinates</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$x</span><span class="token punctuation">,</span> <span class="token variable">$y</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"X: <span class="token interpolation"><span class="token variable">$x</span></span>, Y: <span class="token interpolation"><span class="token variable">$y</span></span>"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$point</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">printCoordinates</span><span class="token punctuation">(</span><span class="token variable">$point</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：X: 3, Y: 5</span>
</code></pre>
    <hr/>
    <h4>
     <a id="6__533">
     </a>
     <strong>
      6. 最佳实践
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        避免滥用引用传递
       </strong>
       <br/>
       仅在需要函数内部修改外部变量时使用引用，否则优先按值传递。
      </p>
     </li>
     <li>
      <p>
       <strong>
        合理设置默认值
       </strong>
       <br/>
       默认参数应提供合理的后备值，避免
       <code>
        null
       </code>
       陷阱：
      </p>
      <pre><code class="prism language-php"><span class="token comment">// 错误：默认值 null 可能导致逻辑漏洞</span>
<span class="token keyword">function</span> <span class="token function-definition function">logMessage</span><span class="token punctuation">(</span><span class="token variable">$message</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$message</span> <span class="token operator">===</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token variable">$message</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"No message"</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        优先使用类型声明
       </strong>
       <br/>
       PHP 7+ 的类型约束能显著减少类型错误：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">safeDivide</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">float</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$b</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidArgumentException</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"除数不能为0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">/</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        命名参数提升可读性
       </strong>
       <br/>
       PHP 8+ 的命名参数使代码更清晰：
      </p>
      <pre><code class="prism language-php"><span class="token function">setUser</span><span class="token punctuation">(</span><span class="token argument-name">name</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">,</span> <span class="token argument-name">age</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 明确参数含义</span>
</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_568">
     </a>
     <strong>
      总结
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th align="left">
        <strong>
         特性
        </strong>
       </th>
       <th align="left">
        <strong>
         说明
        </strong>
       </th>
       <th align="left">
        <strong>
         适用场景
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        按值传递
       </td>
       <td align="left">
        默认方式，安全无副作用
       </td>
       <td align="left">
        大多数场景
       </td>
      </tr>
      <tr>
       <td align="left">
        按引用传递
       </td>
       <td align="left">
        需显式声明
        <code>
         &amp;
        </code>
        ，直接修改外部变量
       </td>
       <td align="left">
        需要函数内部修改外部数据时
       </td>
      </tr>
      <tr>
       <td align="left">
        默认参数
       </td>
       <td align="left">
        必须放在参数列表末尾
       </td>
       <td align="left">
        可选参数的函数
       </td>
      </tr>
      <tr>
       <td align="left">
        可变参数
       </td>
       <td align="left">
        使用
        <code>
         ...
        </code>
        或
        <code>
         func_get_args()
        </code>
       </td>
       <td align="left">
        处理不确定数量的输入
       </td>
      </tr>
      <tr>
       <td align="left">
        类型声明
       </td>
       <td align="left">
        强制参数和返回值类型（PHP 7+）
       </td>
       <td align="left">
        提升代码健壮性
       </td>
      </tr>
      <tr>
       <td align="left">
        命名参数
       </td>
       <td align="left">
        明确参数含义（PHP 8+）
       </td>
       <td align="left">
        跳过可选参数或增强可读性
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h3>
     <a id="_581">
     </a>
     四，函数体结构
    </h3>
    <p>
     PHP 函数通过
     <code>
      function
     </code>
     关键字定义，其核心由
     <strong>
      函数体
     </strong>
     和
     <strong>
      返回值
     </strong>
     组成。合理的函数体设计与返回值处理是编写可维护、高效代码的关键。
    </p>
    <hr/>
    <h5>
     <a id="_587">
     </a>
     <strong>
      一、函数体
     </strong>
    </h5>
    <p>
     函数体是位于
     <code>
      {}
     </code>
     内的代码块，包含函数的核心逻辑。其结构特点如下：
    </p>
    <h6>
     <a id="1__591">
     </a>
     <strong>
      1. 基本语法
     </strong>
    </h6>
    <pre><code class="prism language-php"><span class="token keyword">function</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span><span class="token punctuation">:</span> 返回类型声明 <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 函数体逻辑</span>
    <span class="token keyword">return</span> 返回值<span class="token punctuation">;</span> <span class="token comment">// 可选</span>
<span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="2__600">
     </a>
     <strong>
      2. 变量作用域
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        局部变量
       </strong>
       ：函数内定义的变量仅在函数体内有效。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$localVar</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 局部变量</span>
    <span class="token keyword">echo</span> <span class="token variable">$localVar</span><span class="token punctuation">;</span> <span class="token comment">// 有效</span>
<span class="token punctuation">}</span>
<span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$localVar</span><span class="token punctuation">;</span> <span class="token comment">// 报错：未定义变量</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        全局变量
       </strong>
       ：需通过
       <code>
        global
       </code>
       或
       <code>
        $GLOBALS
       </code>
       访问。
      </p>
      <pre><code class="prism language-php"><span class="token variable">$globalVar</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-definition function">showGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">global</span> <span class="token variable">$globalVar</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token variable">$globalVar</span><span class="token punctuation">;</span> <span class="token comment">// 输出 5</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="3__623">
     </a>
     <strong>
      3. 函数执行流程
     </strong>
    </h6>
    <ul>
     <li>
      <strong>
       顺序执行
      </strong>
      ：代码从上到下执行，直到遇到
      <code>
       return
      </code>
      或函数结束。
     </li>
     <li>
      <strong>
       <code>
        return
       </code>
       的作用
      </strong>
      ：
      <ul>
       <li>
        终止函数执行，立即返回结果。
       </li>
       <li>
        未显式
        <code>
         return
        </code>
        时，函数默认返回
        <code>
         null
        </code>
        。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h5>
     <a id="_632">
     </a>
     <strong>
      二、返回值处理
     </strong>
    </h5>
    <h6>
     <a id="1__634">
     </a>
     <strong>
      1. 基本返回
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        单值返回
       </strong>
       ：使用
       <code>
        return
       </code>
       返回单个值。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 8</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        无返回值
       </strong>
       ：函数默认返回
       <code>
        null
       </code>
       。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">logMessage</span><span class="token punctuation">(</span><span class="token variable">$msg</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"日志：<span class="token interpolation"><span class="token variable">$msg</span></span>"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">logMessage</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// $result 为 null</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="2_PHP_7_654">
     </a>
     <strong>
      2. 返回类型声明（PHP 7+）
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        强制指定返回类型
       </strong>
       ：避免类型不一致问题。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">divide</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">float</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">/</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 3.333...</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        严格模式
       </strong>
       ：使用
       <code>
        declare(strict_types=1);
       </code>
       禁用自动类型转换。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-definition function">strictDivide</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token keyword type-hint">int</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">float</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">/</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">strictDivide</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"10"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错：参数类型不匹配</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="3__675">
     </a>
     <strong>
      3. 多返回值模拟
     </strong>
    </h6>
    <p>
     PHP 不支持直接返回多个值，但可通过以下方式实现：
    </p>
    <ul>
     <li>
      <p>
       <strong>
        返回数组
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Alice'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$user</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Alice</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        返回对象
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$age</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-definition function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Bob'</span><span class="token punctuation">;</span>
    <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">age</span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span> <span class="token comment">// Bob</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        引用返回（不推荐）
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token operator">&amp;</span><span class="token function">getReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token variable">$value</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$ref</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token function">getReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// $ref 是 $value 的引用</span>
<span class="token variable">$ref</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">getReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 11（原值被修改）</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="4__voidPHP_71_718">
     </a>
     <strong>
      4. 返回
      <code>
       void
      </code>
      （PHP 7.1+）
     </strong>
    </h6>
    <p>
     明确表示函数无返回值：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">noReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"无返回值"</span><span class="token punctuation">;</span>
    <span class="token comment">// return; 可选，但不能返回任何值</span>
<span class="token punctuation">}</span>
<span class="token function">noReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h5>
     <a id="_732">
     </a>
     <strong>
      三、函数体设计最佳实践
     </strong>
    </h5>
    <h6>
     <a id="1__734">
     </a>
     <strong>
      1. 单一职责原则
     </strong>
    </h6>
    <p>
     一个函数只做一件事：
    </p>
    <pre><code class="prism language-php"><span class="token comment">// 错误：混合验证与保存</span>
<span class="token keyword">function</span> <span class="token function-definition function">processUser</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">validEmail</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"邮箱无效"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">saveToDatabase</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 正确：拆分职责</span>
<span class="token keyword">function</span> <span class="token function-definition function">validateUser</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* 验证逻辑 */</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-definition function">saveUser</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* 数据库操作 */</span> <span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="2__752">
     </a>
     <strong>
      2. 错误处理
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        抛出异常
       </strong>
       ：遇到不可恢复错误时终止执行。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">loadFile</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"文件不存在"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        返回错误码或
        <code>
         null
        </code>
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">findUser</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 查询数据库...</span>
    <span class="token keyword">return</span> <span class="token variable">$user</span> <span class="token operator">??</span> <span class="token constant">null</span><span class="token punctuation">;</span> <span class="token comment">// 未找到返回 null</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="3__774">
     </a>
     <strong>
      3. 避免副作用
     </strong>
    </h6>
    <p>
     函数应专注于计算或操作，而非修改外部状态：
    </p>
    <pre><code class="prism language-php"><span class="token comment">// 错误：修改全局变量</span>
<span class="token variable">$counter</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-definition function">incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">global</span> <span class="token variable">$counter</span><span class="token punctuation">;</span>
    <span class="token variable">$counter</span><span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 正确：通过返回值传递状态</span>
<span class="token keyword">function</span> <span class="token function-definition function">increment</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$num</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$counter</span> <span class="token operator">=</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token variable">$counter</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h5>
     <a id="_795">
     </a>
     <strong>
      四、常见错误与调试
     </strong>
    </h5>
    <h6>
     <a id="1__797">
     </a>
     <strong>
      1. 未捕获的返回值
     </strong>
    </h6>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 忘记 return</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 null（而非 8）</span>
</code></pre>
    <h6>
     <a id="2__807">
     </a>
     <strong>
      2. 类型不匹配
     </strong>
    </h6>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string double-quoted-string">"10"</span><span class="token punctuation">;</span> <span class="token comment">// PHP 自动转换为 10（严格模式下报错）</span>
<span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="3__815">
     </a>
     <strong>
      3. 引用返回陷阱
     </strong>
    </h6>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token operator">&amp;</span><span class="token function">getArrayRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$arr</span><span class="token punctuation">;</span> <span class="token comment">// 返回局部变量的引用（危险！）</span>
<span class="token punctuation">}</span>
<span class="token variable">$ref</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token function">getArrayRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// $ref 指向已销毁的数组</span>
</code></pre>
    <hr/>
    <h5>
     <a id="_827">
     </a>
     <strong>
      五、总结
     </strong>
    </h5>
    <table>
     <thead>
      <tr>
       <th align="left">
        <strong>
         关键点
        </strong>
       </th>
       <th align="left">
        <strong>
         说明
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <strong>
         函数体结构
        </strong>
       </td>
       <td align="left">
        包含局部变量、逻辑代码，通过
        <code>
         return
        </code>
        终止执行并返回结果
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         返回值设计
        </strong>
       </td>
       <td align="left">
        支持单值、数组、对象，类型声明提升安全性，
        <code>
         void
        </code>
        明确无返回值
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         最佳实践
        </strong>
       </td>
       <td align="left">
        单一职责、错误处理、避免副作用
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         调试技巧
        </strong>
       </td>
       <td align="left">
        检查
        <code>
         return
        </code>
        遗漏、类型约束、避免无效引用
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h3>
     <a id="_838">
     </a>
     五，变量作用域
    </h3>
    <h4>
     <a id="Local_Variables_840">
     </a>
     一、局部变量（Local Variables）
    </h4>
    <p>
     <strong>
      定义
     </strong>
    </p>
    <p>
     在函数内部声明的变量称为
     <strong>
      局部变量
     </strong>
     ，其作用域仅限于声明它的函数内部。
    </p>
    <p>
     <strong>
      特点
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       作用域限制
      </strong>
      ：
      <br/>
      只能在函数内部访问，函数外部无法直接访问局部变量。
     </li>
     <li>
      <strong>
       生命周期
      </strong>
      ：
      <br/>
      函数调用时创建，函数执行完毕后销毁。
     </li>
     <li>
      <strong>
       独立性
      </strong>
      ：
      <br/>
      不同函数中的同名局部变量互不影响。
     </li>
    </ol>
    <p>
     <strong>
      示例
     </strong>
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">exampleFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$localVar</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"I am a local variable"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token variable">$localVar</span><span class="token punctuation">;</span> <span class="token comment">// 输出：I am a local variable</span>
<span class="token punctuation">}</span>

<span class="token function">exampleFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// echo $localVar; // 报错：Undefined variable（无法访问）</span>
</code></pre>
    <hr/>
    <h4>
     <a id="Global_Variables_869">
     </a>
     二、全局变量（Global Variables）
    </h4>
    <p>
     <strong>
      定义
     </strong>
    </p>
    <p>
     在函数外部声明的变量称为
     <strong>
      全局变量
     </strong>
     ，作用域为当前脚本的全局范围，但默认无法直接在函数内部访问。
    </p>
    <p>
     <strong>
      访问方式
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       <code>
        global
       </code>
       关键字
      </strong>
      ：
      <br/>
      在函数内部声明一个全局变量，使其在函数内可用。
     </li>
     <li>
      <strong>
       <code>
        $GLOBALS
       </code>
       超全局数组
      </strong>
      ：
      <br/>
      直接通过
      <code>
       $GLOBALS
      </code>
      数组访问或修改全局变量。
     </li>
    </ol>
    <p>
     <strong>
      示例
     </strong>
    </p>
    <pre><code class="prism language-php"><span class="token variable">$globalVar</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"I am global"</span><span class="token punctuation">;</span> <span class="token comment">// 全局变量</span>

<span class="token keyword">function</span> <span class="token function-definition function">accessGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">global</span> <span class="token variable">$globalVar</span><span class="token punctuation">;</span>      <span class="token comment">// 声明为全局变量</span>
    <span class="token keyword">echo</span> <span class="token variable">$globalVar</span><span class="token punctuation">;</span>        <span class="token comment">// 输出：I am global</span>
    
    <span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'globalVar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Modified by GLOBALS"</span><span class="token punctuation">;</span> <span class="token comment">// 直接修改全局变量</span>
<span class="token punctuation">}</span>

<span class="token function">accessGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$globalVar</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Modified by GLOBALS</span>
</code></pre>
    <h5>
     <a id="_898">
     </a>
     注意事项
    </h5>
    <ul>
     <li>
      滥用全局变量会导致代码耦合性高、难以调试。
     </li>
     <li>
      优先通过参数传递和返回值在函数间传递数据。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="Superglobals_905">
     </a>
     三、超全局变量（Superglobals）
    </h4>
    <p>
     <strong>
      定义
     </strong>
    </p>
    <p>
     PHP 预定义的一组特殊全局变量，作用域为
     <strong>
      所有代码范围
     </strong>
     （包括函数、类内部），无需显式声明即可访问。
    </p>
    <p>
     <strong>
      常见超全局变量
     </strong>
    </p>
    <table>
     <thead>
      <tr>
       <th align="left">
        变量名
       </th>
       <th align="left">
        用途
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <code>
         $_GET
        </code>
       </td>
       <td align="left">
        获取 URL 查询参数（GET 请求）
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         $_POST
        </code>
       </td>
       <td align="left">
        获取表单提交数据（POST 请求）
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         $_SESSION
        </code>
       </td>
       <td align="left">
        操作会话数据（需先启动会话）
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         $_COOKIE
        </code>
       </td>
       <td align="left">
        读取客户端 Cookie
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         $_SERVER
        </code>
       </td>
       <td align="left">
        获取服务器和请求信息
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         $_FILES
        </code>
       </td>
       <td align="left">
        获取上传文件信息
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         $_REQUEST
        </code>
       </td>
       <td align="left">
        合并 GET、POST、COOKIE 数据
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         $_ENV
        </code>
       </td>
       <td align="left">
        读取环境变量
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      示例
     </strong>
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">processForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'username'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string single-quoted-string">'Guest'</span><span class="token punctuation">;</span> <span class="token comment">// 直接访问超全局变量</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello, <span class="token interpolation"><span class="token variable">$username</span></span>!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 假设用户提交了 username=Alice</span>
<span class="token function">processForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello, Alice!</span>
</code></pre>
    <p>
     <strong>
      安全性注意
     </strong>
    </p>
    <ul>
     <li>
      <p>
       超全局变量（如
       <code>
        $_GET
       </code>
       、
       <code>
        $_POST
       </code>
       ）可能包含用户输入，需严格过滤：
      </p>
      <p>
       php
      </p>
      <p>
       复制
      </p>
      <pre><code class="prism language-php"><span class="token variable">$cleanInput</span> <span class="token operator">=</span> <span class="token function">filter_input</span><span class="token punctuation">(</span><span class="token constant">INPUT_POST</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span> <span class="token constant">FILTER_SANITIZE_EMAIL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="Static_Variables_950">
     </a>
     四、静态变量（Static Variables）
    </h4>
    <p>
     <strong>
      定义
     </strong>
    </p>
    <p>
     在函数内部使用
     <code>
      static
     </code>
     关键字声明的变量，其值在函数多次调用之间保留。
    </p>
    <p>
     <strong>
      特点
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       生命周期
      </strong>
      ：脚本执行期间持续存在，但仅在声明它的函数内可访问。
     </li>
     <li>
      <strong>
       初始化
      </strong>
      ：仅在第一次函数调用时初始化。
     </li>
    </ul>
    <p>
     <strong>
      示例
     </strong>
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token variable">$count</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 静态变量</span>
    <span class="token variable">$count</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Count: <span class="token interpolation"><span class="token variable">$count</span></span>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Count: 1</span>
<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Count: 2</span>
<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Count: 3</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_use__977">
     </a>
     五、闭包（匿名函数）与
     <code>
      use
     </code>
     关键字
    </h4>
    <p>
     <strong>
      定义
     </strong>
    </p>
    <p>
     匿名函数（闭包）可以捕获外部作用域的变量，但需通过
     <code>
      use
     </code>
     关键字显式声明。
    </p>
    <p>
     <strong>
      示例
     </strong>
    </p>
    <pre><code class="prism language-php"><span class="token variable">$externalVar</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Hello"</span><span class="token punctuation">;</span>

<span class="token variable">$anonymousFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$externalVar</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token variable">$externalVar</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token variable">$anonymousFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <strong>
      注意事项
     </strong>
    </p>
    <ul>
     <li>
      <p>
       默认通过
       <code>
        use
       </code>
       传递的是变量的值（拷贝），若需修改外部变量，需传递引用：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$num</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$func</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$num</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$num</span><span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token variable">$func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$num</span><span class="token punctuation">;</span> <span class="token comment">// 输出：2</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="__1010">
     </a>
     六 ，
     <strong>
      在函数内访问全局变量
     </strong>
    </h4>
    <p>
     <strong>
      方法一：
      <code>
       global
      </code>
      关键字
     </strong>
    </p>
    <ul>
     <li>
      <p>
       在函数内部使用
       <code>
        global
       </code>
       声明后，可访问全局变量。
      </p>
      <pre><code class="prism language-php"><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$b</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function-definition function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">global</span> <span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
    <span class="token variable">$b</span> <span class="token operator">=</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span> <span class="token comment">// 修改全局变量$b的值</span>
<span class="token punctuation">}</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$b</span><span class="token punctuation">;</span> <span class="token comment">// 输出3</span>
</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      方法二：
      <code>
       $GLOBALS
      </code>
      超全局数组
     </strong>
    </p>
    <ul>
     <li>
      <p>
       直接通过
       <code>
        $GLOBALS['varName']
       </code>
       访问或修改全局变量。
      </p>
      <pre><code class="prism language-php"><span class="token variable">$x</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function-definition function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'x'</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$x</span><span class="token punctuation">;</span> <span class="token comment">// 输出11</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_1044">
     </a>
     七、作用域对比表
    </h4>
    <table>
     <thead>
      <tr>
       <th align="left">
        <strong>
         变量类型
        </strong>
       </th>
       <th align="left">
        <strong>
         作用域
        </strong>
       </th>
       <th align="left">
        <strong>
         生命周期
        </strong>
       </th>
       <th align="left">
        <strong>
         访问方式
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        局部变量
       </td>
       <td align="left">
        函数内部
       </td>
       <td align="left">
        函数执行期间
       </td>
       <td align="left">
        直接访问
       </td>
      </tr>
      <tr>
       <td align="left">
        全局变量
       </td>
       <td align="left">
        脚本全局（函数外）
       </td>
       <td align="left">
        脚本执行结束前
       </td>
       <td align="left">
        <code>
         global
        </code>
        或
        <code>
         $GLOBALS
        </code>
       </td>
      </tr>
      <tr>
       <td align="left">
        超全局变量
       </td>
       <td align="left">
        所有作用域
       </td>
       <td align="left">
        脚本执行结束前
       </td>
       <td align="left">
        直接访问（如
        <code>
         $_POST
        </code>
        ）
       </td>
      </tr>
      <tr>
       <td align="left">
        静态变量
       </td>
       <td align="left">
        函数内部
       </td>
       <td align="left">
        脚本执行结束前
       </td>
       <td align="left">
        <code>
         static
        </code>
        声明
       </td>
      </tr>
      <tr>
       <td align="left">
        闭包捕获的变量
       </td>
       <td align="left">
        匿名函数内部（通过
        <code>
         use
        </code>
        ）
       </td>
       <td align="left">
        依赖外部变量作用域
       </td>
       <td align="left">
        显式传递（值或引用）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="_1056">
     </a>
     八、最佳实践
    </h4>
    <ol>
     <li>
      <strong>
       避免全局变量
      </strong>
      ：优先使用参数传递和返回值。
     </li>
     <li>
      <strong>
       过滤超全局变量
      </strong>
      ：使用
      <code>
       filter_input()
      </code>
      或
      <code>
       htmlspecialchars()
      </code>
      防止安全漏洞。
     </li>
     <li>
      <strong>
       慎用静态变量
      </strong>
      ：仅在需要跨调用保留状态时使用（如计数器）。
     </li>
     <li>
      <strong>
       闭包的变量捕获
      </strong>
      ：明确使用
      <code>
       use
      </code>
      传递所需变量，避免内存泄漏。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_1065">
     </a>
     九、常见问题
    </h4>
    <ol>
     <li>
      函数内部能访问外部同名变量吗？
     </li>
    </ol>
    <ul>
     <li>
      不能，除非显式声明为
      <code>
       global
      </code>
      或通过
      <code>
       use
      </code>
      传递。
     </li>
    </ul>
    <ol start="2">
     <li>
      如何让函数修改全局变量？
     </li>
    </ol>
    <ul>
     <li>
      使用
      <code>
       global
      </code>
      或
      <code>
       $GLOBALS
      </code>
      。
     </li>
    </ul>
    <ol start="3">
     <li>
      静态变量和全局变量的区别？
     </li>
    </ol>
    <ul>
     <li>
      静态变量仅在函数内可访问，全局变量在整个脚本中可访问。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_1081">
     </a>
     六，可变函数
    </h3>
    <p>
     在PHP中，可变函数（Variable Functions）允许通过变量名动态调用函数。这一特性提供了代码的灵活性，但需谨慎使用以避免安全隐患。以下是详细解析：
    </p>
    <hr/>
    <h4>
     <a id="1__1087">
     </a>
     <strong>
      1. 基本概念
     </strong>
    </h4>
    <p>
     可变函数是指将函数名存储为字符串变量，通过变量加括号
     <code>
      $var()
     </code>
     的形式调用函数。PHP会解析变量的值作为函数名，并执行对应的函数。
    </p>
    <p>
     <strong>
      示例
     </strong>
     ：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello, World!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$func</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'greet'</span><span class="token punctuation">;</span>
<span class="token variable">$func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello, World!</span>
</code></pre>
    <hr/>
    <h4>
     <a id="2__1104">
     </a>
     <strong>
      2. 语法与参数传递
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        调用带参数的函数
       </strong>
       <br/>
       直接向可变函数传递参数，参数需按顺序匹配。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$operation</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'add'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$operation</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：8</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="3__1120">
     </a>
     <strong>
      3. 动态调用类方法
     </strong>
    </h4>
    <p>
     可变函数可用于调用对象的方法或静态方法，需注意方法的作用域（public/protected/private）。
    </p>
    <p>
     <strong>
      对象方法调用
     </strong>
    </p>
    <pre><code class="prism language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">Calculator</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">multiply</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">,</span> <span class="token variable">$y</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token variable">$x</span> <span class="token operator">*</span> <span class="token variable">$y</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Calculator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$method</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'multiply'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$obj</span><span class="token operator">-&gt;</span><span class="token variable">$method</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：20</span>
</code></pre>
    <p>
     <strong>
      静态方法调用
     </strong>
    </p>
    <pre><code class="prism language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">Math</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">square</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token variable">$n</span> <span class="token operator">*</span> <span class="token variable">$n</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$staticMethod</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Math::square'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$staticMethod</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：16</span>

<span class="token comment">// 或使用数组形式</span>
<span class="token variable">$callable</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'Math'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'square'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token variable">$callable</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：16</span>
</code></pre>
    <hr/>
    <h4>
     <a id="4__1157">
     </a>
     <strong>
      4. 安全性与验证
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        检查函数是否存在
       </strong>
       <br/>
       使用
       <code>
        function_exists()
       </code>
       或
       <code>
        method_exists()
       </code>
       避免调用未定义的函数。
      </p>
      <pre><code class="prism language-php"><span class="token variable">$functionName</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'unknownFunction'</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">function_exists</span><span class="token punctuation">(</span><span class="token variable">$functionName</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$functionName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"函数不存在！"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        避免用户输入直接作为函数名
       </strong>
       <br/>
       未过滤的用户输入可能导致代码注入。
      </p>
      <pre><code class="prism language-php"><span class="token comment">// 危险示例（勿用）：</span>
<span class="token variable">$userInput</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'action'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$userInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 若用户传入"exec"等危险函数名，后果严重</span>

<span class="token comment">// 安全做法：</span>
<span class="token variable">$allowed</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'safeAction1'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'safeAction2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$userInput</span><span class="token punctuation">,</span> <span class="token variable">$allowed</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$userInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="5__1189">
     </a>
     <strong>
      5. 与匿名函数（闭包）结合
     </strong>
    </h4>
    <p>
     可变函数也可调用通过
     <code>
      create_function()
     </code>
     或匿名函数定义的闭包。
    </p>
    <pre><code class="prism language-php"><span class="token variable">$closure</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hi, <span class="token interpolation"><span class="token variable">$name</span></span>!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token variable">$func</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'closure'</span><span class="token punctuation">;</span>
<span class="token variable">$func</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Alice'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hi, Alice!</span>
</code></pre>
    <hr/>
    <h4>
     <a id="6__1204">
     </a>
     <strong>
      6. 回调函数中的应用
     </strong>
    </h4>
    <p>
     可变函数常用于需要回调的场景，如
     <code>
      array_map()
     </code>
     、
     <code>
      usort()
     </code>
     等。
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">upper</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$strings</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'apple'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'banana'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$callback</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'upper'</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_map</span><span class="token punctuation">(</span><span class="token variable">$callback</span><span class="token punctuation">,</span> <span class="token variable">$strings</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：['APPLE', 'BANANA']</span>
</code></pre>
    <hr/>
    <h4>
     <a id="7__1220">
     </a>
     <strong>
      7. 注意事项
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        方法可见性
       </strong>
       <br/>
       若尝试调用私有或受保护的方法，会触发错误。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">Secret</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">function</span> <span class="token function-definition function">hidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Secret!"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Secret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$method</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'hidden'</span><span class="token punctuation">;</span>
<span class="token variable">$obj</span><span class="token operator">-&gt;</span><span class="token variable">$method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错：Cannot access private method</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        变量解析顺序
       </strong>
       <br/>
       若变量与函数同名，优先调用函数。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Function called"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token variable">$test</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'test'</span><span class="token punctuation">;</span>
<span class="token variable">$test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正确：输出"Function called"</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        性能考量
       </strong>
       <br/>
       动态调用比直接调用稍慢，但在大多数场景下影响可忽略。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="8__1251">
     </a>
     <strong>
      8. 典型应用场景
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        路由分发
       </strong>
       ：根据URL参数动态调用控制器方法。
      </p>
      <pre><code class="prism language-php"><span class="token variable">$controller</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$action</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'action'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string single-quoted-string">'index'</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">method_exists</span><span class="token punctuation">(</span><span class="token variable">$controller</span><span class="token punctuation">,</span> <span class="token variable">$action</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$controller</span><span class="token operator">-&gt;</span><span class="token variable">$action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        插件系统
       </strong>
       ：动态加载并调用插件函数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        工厂模式
       </strong>
       ：根据条件创建不同类的实例。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_1269">
     </a>
     <strong>
      总结
     </strong>
    </h4>
    <p>
     可变函数为PHP提供了强大的动态调用能力，但需遵循以下最佳实践：
    </p>
    <ol>
     <li>
      <strong>
       严格验证
      </strong>
      ：确保调用的函数或方法存在且安全。
     </li>
     <li>
      <strong>
       避免直接用户输入
      </strong>
      ：防止代码注入漏洞。
     </li>
     <li>
      <strong>
       明确作用域
      </strong>
      ：注意类方法的可见性。
     </li>
     <li>
      <strong>
       合理使用
      </strong>
      ：在需要灵活性的场景（如框架、回调）中使用，避免过度复杂化代码。
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="_1280">
     </a>
     七，匿名函数
    </h3>
    <p>
     在PHP中，匿名函数（Anonymous Functions），也称为闭包（Closures），是一种没有显式名称的函数，可以直接赋值给变量、作为参数传递或从其他函数返回。它们特别适合需要动态定义行为的场景（如回调、事件处理等）。以下是详细解析：
    </p>
    <hr/>
    <h4>
     <a id="1__1286">
     </a>
     <strong>
      1. 基本语法
     </strong>
    </h4>
    <p>
     匿名函数通过
     <code>
      function () use (...) { ... }
     </code>
     定义，可捕获外部变量。
     <br/>
     示例：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$greet</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello, <span class="token interpolation"><span class="token variable">$name</span></span>!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token variable">$greet</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Hello, Alice!</span>
</code></pre>
    <hr/>
    <h4>
     <a id="2__1301">
     </a>
     <strong>
      2. 捕获外部变量
     </strong>
    </h4>
    <h5>
     <a id="use__1303">
     </a>
     <strong>
      <code>
       use
      </code>
      关键字
     </strong>
    </h5>
    <p>
     匿名函数默认无法访问外部作用域的变量，需通过
     <code>
      use
     </code>
     显式捕获。
    </p>
    <ul>
     <li>
      <strong>
       按值捕获
      </strong>
      （默认）：复制变量当前值。
     </li>
     <li>
      <strong>
       按引用捕获
      </strong>
      （
      <code>
       &amp;
      </code>
      ）：引用变量，修改会影响外部作用域。
     </li>
    </ul>
    <p>
     示例：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$prefix</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"User: "</span><span class="token punctuation">;</span>

<span class="token comment">// 按值捕获</span>
<span class="token variable">$func1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$prefix</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token variable">$prefix</span> <span class="token operator">.</span> <span class="token variable">$name</span><span class="token punctuation">;</span> <span class="token comment">// 输出：User: Alice</span>
    <span class="token variable">$prefix</span> <span class="token operator">=</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">;</span> <span class="token comment">// 修改不影响外部变量</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token variable">$func1</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$prefix</span><span class="token punctuation">;</span> <span class="token comment">// 仍为 "User: "</span>

<span class="token comment">// 按引用捕获</span>
<span class="token variable">$func2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$prefix</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$prefix</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"ID: "</span><span class="token punctuation">;</span> <span class="token comment">// 修改会影响外部变量</span>
    <span class="token keyword">echo</span> <span class="token variable">$prefix</span> <span class="token operator">.</span> <span class="token variable">$name</span><span class="token punctuation">;</span> <span class="token comment">// 输出：ID: Bob</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token variable">$func2</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Bob"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$prefix</span><span class="token punctuation">;</span> <span class="token comment">// 变为 "ID: "</span>
</code></pre>
    <hr/>
    <h4>
     <a id="3__1334">
     </a>
     <strong>
      3. 作为参数传递
     </strong>
    </h4>
    <p>
     匿名函数常用于回调场景，如
     <code>
      array_map
     </code>
     、
     <code>
      usort
     </code>
     等。
     <br/>
     示例：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$numbers</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 使用匿名函数作为回调</span>
<span class="token variable">$squared</span> <span class="token operator">=</span> <span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$n</span> <span class="token operator">*</span> <span class="token variable">$n</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$squared</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：[1, 4, 9, 16]</span>
</code></pre>
    <hr/>
    <h4>
     <a id="4__1352">
     </a>
     <strong>
      4. 返回匿名函数
     </strong>
    </h4>
    <p>
     函数可以返回一个匿名函数，闭包会保留其定义时的上下文。
     <br/>
     示例：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">createMultiplier</span><span class="token punctuation">(</span><span class="token variable">$factor</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$factor</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token variable">$n</span> <span class="token operator">*</span> <span class="token variable">$factor</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$double</span> <span class="token operator">=</span> <span class="token function">createMultiplier</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：10</span>
</code></pre>
    <hr/>
    <h4>
     <a id="5__1370">
     </a>
     <strong>
      5. 与对象结合
     </strong>
    </h4>
    <h5>
     <a id="_1372">
     </a>
     <strong>
      绑定闭包到对象
     </strong>
    </h5>
    <p>
     通过
     <code>
      bindTo
     </code>
     方法，可以将闭包绑定到特定对象，访问其私有/受保护成员。
     <br/>
     示例：
    </p>
    <pre><code class="prism language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Anonymous"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$getUserName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将闭包绑定到 $user 对象，并赋予访问私有属性的权限</span>
<span class="token variable">$boundClosure</span> <span class="token operator">=</span> <span class="token variable">$getUserName</span><span class="token operator">-&gt;</span><span class="token function">bindTo</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$boundClosure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：Anonymous</span>
</code></pre>
    <hr/>
    <h4>
     <a id="6__1394">
     </a>
     <strong>
      6. 立即执行匿名函数
     </strong>
    </h4>
    <p>
     通过
     <code>
      (function () { ... })();
     </code>
     语法，匿名函数可以定义后立即执行。
     <br/>
     示例：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token variable">$result</span><span class="token punctuation">;</span> <span class="token comment">// 输出：8</span>
</code></pre>
    <hr/>
    <h4>
     <a id="7_PHP_81_1409">
     </a>
     <strong>
      7. 静态匿名函数（PHP 8.1+）
     </strong>
    </h4>
    <p>
     PHP 8.1 引入了静态匿名函数，禁止捕获外部变量，提升性能。
     <br/>
     示例：
    </p>
    <pre><code class="prism language-php"><span class="token variable">$staticClosure</span> <span class="token operator">=</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 无法使用 use 捕获外部变量</span>
    <span class="token keyword">return</span> <span class="token string double-quoted-string">"Static closure"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h4>
     <a id="8__1423">
     </a>
     <strong>
      8. 实际应用场景
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        回调处理
       </strong>
       <br/>
       如事件监听、数组操作的回调。
      </p>
      <pre><code class="prism language-php"><span class="token variable">$users</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"Bob"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">array_walk</span><span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Processing <span class="token interpolation"><span class="token variable">$name</span></span>\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        延迟执行
       </strong>
       <br/>
       将逻辑封装为闭包，稍后调用。
      </p>
      <pre><code class="prism language-php"><span class="token variable">$task</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Task executed at "</span> <span class="token operator">.</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2秒后执行</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        策略模式
       </strong>
       <br/>
       动态选择算法逻辑。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">calculate</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">,</span> <span class="token variable">$strategy</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$strategy</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$addition</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">,</span> <span class="token variable">$y</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token variable">$x</span> <span class="token operator">+</span> <span class="token variable">$y</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token variable">$subtraction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">,</span> <span class="token variable">$y</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token variable">$x</span> <span class="token operator">-</span> <span class="token variable">$y</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token variable">$addition</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 输出：15</span>
<span class="token keyword">echo</span> <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token variable">$subtraction</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：5</span>
</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="9__1463">
     </a>
     <strong>
      9. 注意事项
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        变量生命周期
       </strong>
       <br/>
       闭包会延长捕获变量的生命周期，直到闭包被销毁。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">createClosure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Sensitive Info"</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$closure</span> <span class="token operator">=</span> <span class="token function">createClosure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// $data 不会被释放，直到 $closure 销毁</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        避免循环引用
       </strong>
       <br/>
       若闭包捕获了自身所在对象的引用（如
       <code>
        $this
       </code>
       ），会导致内存泄漏。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">Example</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">leak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token variable">$closure</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
            <span class="token comment">// 隐式捕获 $this</span>
            <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">prop</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$closure</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// $closure 持有 $this 的引用，导致对象无法释放</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        性能优化
       </strong>
       <br/>
       频繁创建闭包可能影响性能，需权衡灵活性与效率。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_1499">
     </a>
     <strong>
      总结
     </strong>
    </h4>
    <p>
     匿名函数为PHP提供了强大的函数式编程能力，支持：
    </p>
    <ul>
     <li>
      动态定义行为
     </li>
     <li>
      封装上下文状态
     </li>
     <li>
      实现高阶函数（函数作为参数或返回值）
     </li>
    </ul>
    <p>
     合理使用闭包可以简化代码结构，但需注意：
    </p>
    <ul>
     <li>
      <strong>
       变量捕获规则
      </strong>
      （
      <code>
       use
      </code>
      的作用）
     </li>
     <li>
      <strong>
       内存管理
      </strong>
      （避免循环引用）
     </li>
     <li>
      <strong>
       安全性
      </strong>
      （避免闭包暴露敏感数据）
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_1515">
     </a>
     八，伪类型
    </h3>
    <p>
     在PHP中，
     <strong>
      伪类型（Pseudo-types）
     </strong>
     并非实际存在的数据类型，而是用于函数参数或返回值的文档化标注，帮助开发者理解函数的行为和预期输入/输出。它们通常出现在官方文档或IDE的类型提示中，但在运行时不会被PHP引擎强制校验。
    </p>
    <hr/>
    <h4>
     <a id="1_mixed_1521">
     </a>
     1.
     <strong>
      <code>
       mixed
      </code>
      （混合类型）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：参数或返回值可以是任意类型（如
       <code>
        string
       </code>
       、
       <code>
        int
       </code>
       、
       <code>
        array
       </code>
       、
       <code>
        object
       </code>
       等）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        常见场景
       </strong>
       ：函数接受多种类型输入，或返回值的类型不确定。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @param mixed $input 可接受任意类型参数
 * @return mixed 可能返回任意类型
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">processInput</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token variable">$input</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="2_number_1544">
     </a>
     2.
     <strong>
      <code>
       number
      </code>
      （数值类型）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：参数或返回值是整数（
       <code>
        int
       </code>
       ）或浮点数（
       <code>
        float
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        常见场景
       </strong>
       ：数学计算函数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <p>
       php
      </p>
      <p>
       复制
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @param number $a 第一个操作数
 * @param number $b 第二个操作数
 * @return number 计算结果
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">multiply</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span> <span class="token variable">$b</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$a</span> <span class="token operator">*</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="3_callback_1569">
     </a>
     3.
     <strong>
      <code>
       callback
      </code>
      （回调类型）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：参数必须是可调用的结构（如函数名、闭包、对象方法数组等）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        PHP 替代类型提示
       </strong>
       ：PHP 5.4+ 支持
       <code>
        callable
       </code>
       类型提示。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <p>
       php
      </p>
      <p>
       复制
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @param callable $callback 合法的回调函数
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">executeCallback</span><span class="token punctuation">(</span><span class="token keyword type-hint">callable</span> <span class="token variable">$callback</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 调用示例</span>
<span class="token function">executeCallback</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 闭包</span>
<span class="token function">executeCallback</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'strtoupper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 函数名</span>
<span class="token function">executeCallback</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$obj</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'method'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 对象方法</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="4_arrayobject_1597">
     </a>
     4.
     <strong>
      <code>
       array|object
      </code>
      （数组或对象）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：参数或返回值可以是数组或对象。
      </p>
     </li>
     <li>
      <p>
       <strong>
        PHP 替代方案
       </strong>
       ：PHP 8.0+ 支持联合类型
       <code>
        array|object
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @param array|object $data 输入数据
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">processData</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 处理数组</span>
    <span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token function">is_object</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 处理对象</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="5_void_1620">
     </a>
     5.
     <strong>
      <code>
       void
      </code>
      （无返回值）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：函数不返回任何值（或隐式返回
       <code>
        null
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        PHP 类型提示
       </strong>
       ：PHP 7.1+ 支持
       <code>
        void
       </code>
       返回类型声明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @return void
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">logMessage</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'log.txt'</span><span class="token punctuation">,</span> <span class="token variable">$message</span><span class="token punctuation">,</span> <span class="token constant">FILE_APPEND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="6_resource_1639">
     </a>
     6.
     <strong>
      <code>
       resource
      </code>
      （资源类型）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：参数或返回值是PHP资源句柄（如文件句柄、数据库连接等）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        注意
       </strong>
       ：
       <code>
        resource
       </code>
       是PHP实际类型，但在某些文档中可能被归类为伪类型。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @param resource $fileHandle 打开的文件句柄
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">closeFile</span><span class="token punctuation">(</span><span class="token variable">$fileHandle</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$fileHandle</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="7__1658">
     </a>
     7.
     <strong>
      <code>
       ...
      </code>
      （可变参数）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：函数接受任意数量的参数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        PHP 语法
       </strong>
       ：使用
       <code>
        ...
       </code>
       运算符实现可变参数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @param mixed ...$numbers 任意数量的数值参数
 * @return float 平均值
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">average</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">float</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$sum</span> <span class="token operator">=</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$sum</span> <span class="token operator">/</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$numbers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">average</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 2</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="8_iterable_1680">
     </a>
     8.
     <strong>
      <code>
       iterable
      </code>
      （可迭代类型）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        含义
       </strong>
       ：参数或返回值是数组或实现了
       <code>
        Traversable
       </code>
       接口的对象（如生成器）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        PHP 类型提示
       </strong>
       ：PHP 7.1+ 支持
       <code>
        iterable
       </code>
       类型提示。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token comment">/**
 * @param iterable $list 可遍历的数据集
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">iterateItems</span><span class="token punctuation">(</span><span class="token keyword type-hint">iterable</span> <span class="token variable">$list</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$list</span> <span class="token keyword">as</span> <span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_vs__1701">
     </a>
     <strong>
      伪类型 vs. 实际类型
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th align="left">
        伪类型
       </th>
       <th align="left">
        PHP 实际类型/替代方案
       </th>
       <th align="left">
        支持版本
       </th>
       <th>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <code>
         mixed
        </code>
       </td>
       <td align="left">
        无直接替代，需手动检查类型
       </td>
       <td align="left">
        -
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         number
        </code>
       </td>
       <td align="left">
        <code>
         int
        </code>
        或
        <code>
         float
        </code>
       </td>
       <td align="left">
        -
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         callback
        </code>
       </td>
       <td align="left">
        <code>
         callable
        </code>
        类型提示
       </td>
       <td align="left">
        PHP 5.4+
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td align="left">
        `array
       </td>
       <td align="left">
        object`
       </td>
       <td align="left">
        联合类型 `array
       </td>
       <td>
        object`
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         void
        </code>
       </td>
       <td align="left">
        <code>
         void
        </code>
        返回类型声明
       </td>
       <td align="left">
        PHP 7.1+
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         ...
        </code>
       </td>
       <td align="left">
        可变参数语法
        <code>
         ...$args
        </code>
       </td>
       <td align="left">
        PHP 5.6+
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="_1714">
     </a>
     <strong>
      最佳实践
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        优先使用类型声明
       </strong>
       ：
       <br/>
       在PHP 7+ 中尽量使用
       <code>
        int
       </code>
       、
       <code>
        string
       </code>
       、
       <code>
        callable
       </code>
       等实际类型提示，代替伪类型文档标注。
      </p>
     </li>
     <li>
      <p>
       <strong>
        伪类型用于文档补充
       </strong>
       ：
       <br/>
       当参数或返回值的类型无法用单一类型描述时（如
       <code>
        mixed
       </code>
       ），用伪类型在PHPDoc中说明。
      </p>
     </li>
     <li>
      <p>
       <strong>
        严格验证输入
       </strong>
       ：
       <br/>
       若使用伪类型（如
       <code>
        mixed
       </code>
       ），在函数内部需手动校验参数类型，避免运行时错误。
      </p>
      <pre><code class="prism language-php"><span class="token keyword">function</span> <span class="token function-definition function">handleMixed</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidArgumentException</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Invalid input type"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        利用IDE支持
       </strong>
       ：
       <br/>
       PHPDoc中的伪类型（如
       <code>
        @return array|object
       </code>
       ）能为IDE（如PhpStorm）提供代码提示。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_1738">
     </a>
     <strong>
      总结
     </strong>
    </h4>
    <p>
     伪类型是PHP类型系统的补充工具，主要用于：
    </p>
    <ul>
     <li>
      <strong>
       提高代码可读性
      </strong>
      ：明确函数参数和返回值的预期类型。
     </li>
     <li>
      <strong>
       兼容旧版本
      </strong>
      ：在PHP 8.0之前的版本中描述复杂类型（如联合类型）。
     </li>
     <li>
      <strong>
       灵活标注
      </strong>
      ：处理无法用单一类型描述的场景。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_1748">
     </a>
     九，常用系统函数
    </h3>
    <h4>
     <a id="_1750">
     </a>
     一、字符串处理函数
    </h4>
    <h5>
     <a id="1_strlenstring_1752">
     </a>
     1.
     <strong>
      <code>
       strlen($string)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：获取字符串长度（字节数，非字符数）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：5</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_mb_strlenstring_encoding_1762">
     </a>
     2.
     <strong>
      <code>
       mb_strlen($string, $encoding)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：获取多字节字符串的字符数（如中文）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">mb_strlen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"你好"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：2</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_substrstring_start_length_1772">
     </a>
     3.
     <strong>
      <code>
       substr($string, $start, $length)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：截取字符串的子串。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Hello World"</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出："World"</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="4_str_replacesearch_replace_string_1782">
     </a>
     4.
     <strong>
      <code>
       str_replace($search, $replace, $string)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：替换字符串中的内容。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"apple"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"orange"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"I love apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出："I love orange"</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="5_explodedelimiter_string_limit_1792">
     </a>
     5.
     <strong>
      <code>
       explode($delimiter, $string, $limit)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：按分隔符将字符串拆分为数组。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">","</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"a,b,c,d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果：["a", "b", "c", "d"]</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="6_implodeglue_array_1802">
     </a>
     6.
     <strong>
      <code>
       implode($glue, $array)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：将数组元素连接为字符串。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">implode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"-"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"2023"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"08"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"01"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出："2023-08-01"</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="7_trimstring_characters_1812">
     </a>
     7.
     <strong>
      <code>
       trim($string, $characters)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：去除字符串两端的空白或指定字符。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"  Hello  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出："Hello"</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="8_strposhaystack_needle_1822">
     </a>
     8.
     <strong>
      <code>
       strpos($haystack, $needle)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：查找子串首次出现的位置（区分大小写）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">strpos</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Hello World"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：6</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="9_strtolowerstring__strtoupperstring_1832">
     </a>
     9.
     <strong>
      <code>
       strtolower($string)
      </code>
      /
      <code>
       strtoupper($string)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：转换字符串为全小写或全大写。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出："HELLO"</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="10_htmlspecialcharsstring_flags_1842">
     </a>
     10.
     <strong>
      <code>
       htmlspecialchars($string, $flags)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：转义HTML特殊字符，防止XSS攻击。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"&lt;script&gt;alert('xss')&lt;/script&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出转义后的字符串</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="11_PHP8_1852">
     </a>
     11.
     <strong>
      PHP8新增函数
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         str_contains($haystack, $needle)
        </code>
       </strong>
       ：检查字符串是否包含子串。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         str_starts_with($haystack, $needle)
        </code>
       </strong>
       ：检查字符串是否以某子串开头。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         str_ends_with($haystack, $needle)
        </code>
       </strong>
       ：检查字符串是否以某子串结尾。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">str_contains</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Hello World"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：true</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_1868">
     </a>
     二、数组处理函数
    </h4>
    <h5>
     <a id="1_countarray_1870">
     </a>
     1.
     <strong>
      <code>
       count($array)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：获取数组元素数量。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：3</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_array_mapcallback_array_1880">
     </a>
     2.
     <strong>
      <code>
       array_map($callback, $array)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：对数组每个元素应用回调函数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$nums</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$squared</span> <span class="token operator">=</span> <span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token variable">$n</span> <span class="token operator">*</span> <span class="token variable">$n</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">$nums</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果：[1, 4, 9]</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_array_filterarray_callback_1891">
     </a>
     3.
     <strong>
      <code>
       array_filter($array, $callback)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：过滤数组中满足条件的元素。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$nums</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$even</span> <span class="token operator">=</span> <span class="token function">array_filter</span><span class="token punctuation">(</span><span class="token variable">$nums</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token variable">$n</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果：[2, 4]</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="4_array_mergearray1_array2_1902">
     </a>
     4.
     <strong>
      <code>
       array_merge($array1, $array2)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：合并多个数组。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$arr1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"a"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token variable">$arr2</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"c"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$arr1</span><span class="token punctuation">,</span> <span class="token variable">$arr2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果：["a", "b", "c"]</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="5_array_key_existskey_array_1913">
     </a>
     5.
     <strong>
      <code>
       array_key_exists($key, $array)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：检查数组中是否存在指定键名。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">array_key_exists</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"name"</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：true</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="6_in_arrayvalue_array_1924">
     </a>
     6.
     <strong>
      <code>
       in_array($value, $array)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：检查值是否存在于数组中。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$fruits</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"apple"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"banana"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">in_array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"apple"</span><span class="token punctuation">,</span> <span class="token variable">$fruits</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：true</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="7_sortarray__rsortarray_1935">
     </a>
     7.
     <strong>
      <code>
       sort($array)
      </code>
      /
      <code>
       rsort($array)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：对数组进行升序/降序排序（修改原数组）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$nums</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token variable">$nums</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果：[1, 2, 3]</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="8_array_uniquearray_1945">
     </a>
     8.
     <strong>
      <code>
       array_unique($array)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：移除数组中的重复值。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$nums</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_unique</span><span class="token punctuation">(</span><span class="token variable">$nums</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果：[1, 2, 3]</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="9_array_columnarray_column_key_1956">
     </a>
     9.
     <strong>
      <code>
       array_column($array, $column_key)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：提取多维数组中的某一列。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$users</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"name"</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"name"</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">"Bob"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_column</span><span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果：["Alice", "Bob"]</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="10_PHP81_1967">
     </a>
     10.
     <strong>
      PHP8.1新增函数
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         array_is_list($array)
        </code>
       </strong>
       ：检查数组是否为索引数组（键名从0连续递增）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">array_is_list</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"a"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"b"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"c"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：true</span>
<span class="token keyword">echo</span> <span class="token function">array_is_list</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">"a"</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：false</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_1980">
     </a>
     三、文件系统函数
    </h4>
    <h5>
     <a id="1_file_get_contentsfilename_1982">
     </a>
     1.
     <strong>
      <code>
       file_get_contents($filename)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：读取文件内容到字符串。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"data.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_file_put_contentsfilename_data_1992">
     </a>
     2.
     <strong>
      <code>
       file_put_contents($filename, $data)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：将字符串写入文件。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"log.txt"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"New log entry"</span><span class="token punctuation">,</span> <span class="token constant">FILE_APPEND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_fopenfilename_mode__fclosehandle_2002">
     </a>
     3.
     <strong>
      <code>
       fopen($filename, $mode)
      </code>
      /
      <code>
       fclose($handle)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：打开/关闭文件句柄。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$file</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"data.csv"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$line</span> <span class="token operator">=</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">echo</span> <span class="token variable">$line</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="4_is_filepath__is_dirpath_2014">
     </a>
     4.
     <strong>
      <code>
       is_file($path)
      </code>
      /
      <code>
       is_dir($path)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：检查路径是否为文件或目录。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">is_file</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/path/to/file.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：true</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="5_mkdirpathname_mode_2024">
     </a>
     5.
     <strong>
      <code>
       mkdir($pathname, $mode)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：创建目录。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"new_folder"</span><span class="token punctuation">,</span> <span class="token number">0755</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建权限为755的目录</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="6_unlinkfilename_2034">
     </a>
     6.
     <strong>
      <code>
       unlink($filename)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：删除文件。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"old_file.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="7_scandirdirectory_2044">
     </a>
     7.
     <strong>
      <code>
       scandir($directory)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：列出目录中的文件和子目录。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code>$files = scandir("/path/to/dir");
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="8_realpathpath_2054">
     </a>
     8.
     <strong>
      <code>
       realpath($path)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：返回规范化的绝对路径。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">realpath</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"../file.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出完整路径</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_2066">
     </a>
     四、日期与时间函数
    </h4>
    <h5>
     <a id="1_dateformat_timestamp_2068">
     </a>
     1.
     <strong>
      <code>
       date($format, $timestamp)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：格式化时间戳为日期字符串。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Y-m-d H:i:s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：2023-08-01 14:30:00</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_time_2078">
     </a>
     2.
     <strong>
      <code>
       time()
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：获取当前时间戳（秒数）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：1690885800</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_strtotimetime_string_2088">
     </a>
     3.
     <strong>
      <code>
       strtotime($time_string)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：将日期字符串解析为时间戳。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"next Monday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出下周一的时间戳</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="4_DateTime__2098">
     </a>
     4.
     <strong>
      <code>
       DateTime
      </code>
      类（面向对象风格）
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$date</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"2023-08-01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$date</span><span class="token operator">-&gt;</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"+1 day"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$date</span><span class="token operator">-&gt;</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Y-m-d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：2023-08-02</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="MySQLi_2110">
     </a>
     五、数据库操作（MySQLi）
    </h4>
    <h5>
     <a id="1_mysqli_connecthost_user_password_database_2112">
     </a>
     1.
     <strong>
      <code>
       mysqli_connect($host, $user, $password, $database)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：连接MySQL数据库。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$conn</span> <span class="token operator">=</span> <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"localhost"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"root"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"password"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"my_db"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_mysqli_queryconn_sql_2122">
     </a>
     2.
     <strong>
      <code>
       mysqli_query($conn, $sql)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：执行SQL查询。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"SELECT * FROM users"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_mysqli_fetch_assocresult_2132">
     </a>
     3.
     <strong>
      <code>
       mysqli_fetch_assoc($result)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：从结果集中获取一行作为关联数组。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysqli_fetch_assoc</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">echo</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="4_mysqli_prepareconn_sql_2142">
     </a>
     4.
     <strong>
      <code>
       mysqli_prepare($conn, $sql)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：预处理SQL语句（防SQL注入）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$stmt</span> <span class="token operator">=</span> <span class="token function">mysqli_prepare</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"INSERT INTO users (name) VALUES (?)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">mysqli_stmt_bind_param</span><span class="token punctuation">(</span><span class="token variable">$stmt</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"s"</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">mysqli_stmt_execute</span><span class="token punctuation">(</span><span class="token variable">$stmt</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_2156">
     </a>
     六、错误处理
    </h4>
    <h5>
     <a id="1_error_reportinglevel_2158">
     </a>
     1.
     <strong>
      <code>
       error_reporting($level)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：设置错误报告级别。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token constant">E_ALL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_trycatch_2168">
     </a>
     2.
     <strong>
      <code>
       try...catch
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：捕获异常。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 可能抛出异常的代码</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Error: "</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_set_error_handlercallback_2182">
     </a>
     3.
     <strong>
      <code>
       set_error_handler($callback)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：自定义错误处理函数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token function">set_error_handler</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$errno</span><span class="token punctuation">,</span> <span class="token variable">$errstr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Error: <span class="token interpolation"><span class="token variable">$errstr</span></span>"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="JSON_2196">
     </a>
     七、JSON处理
    </h4>
    <h5>
     <a id="1_json_encodevalue_options_2198">
     </a>
     1.
     <strong>
      <code>
       json_encode($value, $options)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：将PHP值转换为JSON字符串。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"age"</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：{"name":"Alice","age":30}</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_json_decodejson_assoc_2209">
     </a>
     2.
     <strong>
      <code>
       json_decode($json, $assoc)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：解析JSON字符串为PHP对象或数组。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$json</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'{"name":"Alice","age":30}'</span><span class="token punctuation">;</span>
<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$json</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 对象形式</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$json</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 数组形式</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_2223">
     </a>
     八、数学函数
    </h4>
    <h5>
     <a id="1_randmin_max_2225">
     </a>
     1.
     <strong>
      <code>
       rand($min, $max)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：生成指定范围的随机整数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：42</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_roundnumber_precision_2235">
     </a>
     2.
     <strong>
      <code>
       round($number, $precision)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：四舍五入到指定小数位。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.14159</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：3.14</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_ceilnumber__floornumber_2245">
     </a>
     3.
     <strong>
      <code>
       ceil($number)
      </code>
      /
      <code>
       floor($number)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：向上/向下取整。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token keyword">echo</span> <span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">3.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：4</span>
<span class="token keyword">echo</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">3.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：3</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_2258">
     </a>
     九、其他常用函数
    </h4>
    <h5>
     <a id="1_headerheader_2260">
     </a>
     1.
     <strong>
      <code>
       header($header)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：发送HTTP头部信息。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Location: https://example.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重定向</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_filter_varvalue_filter_2270">
     </a>
     2.
     <strong>
      <code>
       filter_var($value, $filter)
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：过滤变量（如验证邮箱）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token variable">$email</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"user@example.com"</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_EMAIL</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Valid email"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_session_start_2283">
     </a>
     3.
     <strong>
      <code>
       session_start()
      </code>
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：启动会话（Session）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-php"><span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"user"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"Alice"</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_2296">
     </a>
     总结
    </h4>
    <p>
     PHP的系统函数覆盖了开发中的核心需求，包括：
    </p>
    <ul>
     <li>
      <strong>
       字符串/数组操作
      </strong>
      ：处理数据的基础工具。
     </li>
     <li>
      <strong>
       文件系统
      </strong>
      ：读写文件和目录管理。
     </li>
     <li>
      <strong>
       日期时间
      </strong>
      ：时间处理与格式化。
     </li>
     <li>
      <strong>
       数据库
      </strong>
      ：MySQLi和PDO操作。
     </li>
     <li>
      <strong>
       错误处理
      </strong>
      ：调试与异常捕获。
     </li>
     <li>
      <strong>
       JSON
      </strong>
      ：数据序列化与解析。
     </li>
    </ul>
    <p>
     <strong>
      注意事项
     </strong>
     ：
    </p>
    <ol>
     <li>
      根据PHP版本选择函数（如PHP8新增的字符串函数）。
     </li>
     <li>
      操作文件或数据库时注意路径和SQL注入安全。
     </li>
     <li>
      使用最新函数（如
      <code>
       password_hash()
      </code>
      替代
      <code>
       md5()
      </code>
      加密）。
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="PHP_2315">
     </a>
     PHP项目练习：学生信息管理系统
    </h3>
    <h4>
     <a id="1_2317">
     </a>
     1.项目结构：
    </h4>
    <pre><code class="prism language-markdown">/student_manager
│  index.php         // 首页显示学生列表
│  add.php          // 添加学生页面
│  functions.php    // 公共函数文件
│  config.php       // 配置文件
└─includes/         // 包含文件目录
     header.php     // 头部公共文件
     footer.php     // 底部公共文件
</code></pre>
    <h4>
     <a id="2configphp_2330">
     </a>
     2.config.php（配置文件，数据库信息配置）
    </h4>
    <pre><code>&lt;?php
// 学生数据存储文件
define('STUDENT_FILE', 'students.txt');
// 站点标题
define('SITE_TITLE', '学生信息管理系统');
?&gt;
</code></pre>
    <h4>
     <a id="3functionsphp_2341">
     </a>
     3.functions.php（公共函数文件）
    </h4>
    <pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 保存学生信息到文件</span>
<span class="token keyword">function</span> <span class="token function-definition function">saveStudent</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$students</span> <span class="token operator">=</span> <span class="token function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$students</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">;</span>
    <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token constant">STUDENT_FILE</span><span class="token punctuation">,</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$students</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取所有学生信息</span>
<span class="token keyword">function</span> <span class="token function-definition function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token constant">STUDENT_FILE</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token constant">STUDENT_FILE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 验证表单输入</span>
<span class="token keyword">function</span> <span class="token function-definition function">validateInput</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$input</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="4includesheaderphp_2369">
     </a>
     4.includes/header.php（公共头部）
    </h4>
    <pre><code class="prism language-php"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string double-quoted-string">"zh-CN"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string double-quoted-string">"UTF-8"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token constant">SITE_TITLE</span> <span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
        body <span class="token punctuation">{<!-- --></span> font<span class="token operator">-</span>family<span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> sans<span class="token operator">-</span>serif<span class="token punctuation">;</span> max<span class="token operator">-</span>width<span class="token punctuation">:</span> <span class="token number">800</span>px<span class="token punctuation">;</span> margin<span class="token punctuation">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span> padding<span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        table <span class="token punctuation">{<!-- --></span> width<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span> border<span class="token operator">-</span>collapse<span class="token punctuation">:</span> collapse<span class="token punctuation">;</span> margin<span class="token operator">-</span>top<span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        th<span class="token punctuation">,</span> td <span class="token punctuation">{<!-- --></span> border<span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token comment">#ddd; padding: 8px; text-align: left; }</span>
        th <span class="token punctuation">{<!-- --></span> background<span class="token operator">-</span>color<span class="token punctuation">:</span> <span class="token comment">#f2f2f2; }</span>
        <span class="token operator">.</span>error <span class="token punctuation">{<!-- --></span> color<span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token constant">SITE_TITLE</span> <span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">"index.php"</span><span class="token operator">&gt;</span>学生列表<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span> <span class="token operator">|</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string double-quoted-string">"add.php"</span><span class="token operator">&gt;</span>添加学生<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>hr<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="5includesfooterphp_2394">
     </a>
     5.includes/footer.php（公共底部）
    </h4>
    <pre><code class="prism language-php">    <span class="token operator">&lt;</span>hr<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>footer<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&amp;</span>copy<span class="token punctuation">;</span> <span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y'</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">&gt;</span> 学生信息管理系统<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>footer<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="6indexphp_2405">
     </a>
     6.index.php（首页）
    </h4>
    <pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 包含配置文件和公共函数</span>
<span class="token keyword">require_once</span> <span class="token string single-quoted-string">'config.php'</span><span class="token punctuation">;</span>
<span class="token keyword">require_once</span> <span class="token string single-quoted-string">'functions.php'</span><span class="token punctuation">;</span>

<span class="token comment">// 包含头部</span>
<span class="token keyword">include</span> <span class="token string single-quoted-string">'includes/header.php'</span><span class="token punctuation">;</span>

<span class="token comment">// 获取所有学生信息</span>
<span class="token variable">$students</span> <span class="token operator">=</span> <span class="token function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>学生列表<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$students</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>table<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>学号<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>姓名<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>专业<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>年级<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$students</span> <span class="token keyword">as</span> <span class="token variable">$student</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$student</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$student</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$student</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'major'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$student</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'grade'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">endforeach</span><span class="token punctuation">;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">else</span> <span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>暂无学生信息<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">endif</span><span class="token punctuation">;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">include</span> <span class="token string single-quoted-string">'includes/footer.php'</span><span class="token punctuation">;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="7addphp_2446">
     </a>
     7.add.php（添加学生页面）
    </h4>
    <pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">require_once</span> <span class="token string single-quoted-string">'config.php'</span><span class="token punctuation">;</span>
<span class="token keyword">require_once</span> <span class="token string single-quoted-string">'functions.php'</span><span class="token punctuation">;</span>

<span class="token variable">$error</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'REQUEST_METHOD'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string single-quoted-string">'POST'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 获取并验证表单数据</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
    <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
    <span class="token variable">$major</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'major'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
    <span class="token variable">$grade</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'grade'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">validateInput</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">validateInput</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 保存学生信息</span>
        <span class="token function">saveStudent</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$id</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token variable">$name</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'major'</span> <span class="token operator">=&gt;</span> <span class="token variable">$major</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'grade'</span> <span class="token operator">=&gt;</span> <span class="token variable">$grade</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 重定向到首页</span>
        <span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Location: index.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">exit</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token variable">$error</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"学号和姓名不能为空！"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">include</span> <span class="token string single-quoted-string">'includes/header.php'</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>添加新学生<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$error</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">"error"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token variable">$error</span> <span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">endif</span><span class="token punctuation">;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>form method<span class="token operator">=</span><span class="token string double-quoted-string">"post"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>学号：<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">"text"</span> name<span class="token operator">=</span><span class="token string double-quoted-string">"id"</span> required<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>姓名：<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">"text"</span> name<span class="token operator">=</span><span class="token string double-quoted-string">"name"</span> required<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>专业：<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">"text"</span> name<span class="token operator">=</span><span class="token string double-quoted-string">"major"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>年级：<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">"text"</span> name<span class="token operator">=</span><span class="token string double-quoted-string">"grade"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string double-quoted-string">"submit"</span><span class="token operator">&gt;</span>添加学生<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">include</span> <span class="token string single-quoted-string">'includes/footer.php'</span><span class="token punctuation">;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="_2513">
     </a>
     总结
    </h4>
    <p>
     <strong>
      这个项目实现了以下功能
     </strong>
     ：
    </p>
    <ol>
     <li>
      使用文件包含（include）实现了公共头部和底部
     </li>
     <li>
      使用自定义函数进行数据验证和文件操作
     </li>
     <li>
      使用基本语法（条件判断、循环、表单处理等）
     </li>
     <li>
      使用文件存储代替数据库（students.txt）
     </li>
     <li>
      实现了学生信息的添加和显示功能
     </li>
    </ol>
    <p>
     <strong>
      主要知识点应用
     </strong>
     ：
    </p>
    <ul>
     <li>
      文件包含：通过include语句实现页面模块化
     </li>
     <li>
      函数：自定义了saveStudent(), getStudents(), validateInput()等函数
     </li>
     <li>
      基本语法：使用了if/else条件判断、foreach循环、表单处理等
     </li>
     <li>
      超全局变量：POST、_SERVER的使用
     </li>
     <li>
      文件操作：file_put_contents和file_get_contents的使用
     </li>
     <li>
      JSON数据格式的编码和解码
     </li>
    </ul>
    <p>
     <strong>
      学生可以在此基础上扩展以下功能
     </strong>
     ：
    </p>
    <ol>
     <li>
      编辑学生信息
     </li>
     <li>
      删除学生信息
     </li>
     <li>
      添加更多字段（如联系方式、成绩等）
     </li>
     <li>
      增加分页功能
     </li>
     <li>
      添加搜索功能
     </li>
     <li>
      增加用户登录验证功能
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f7a686f6e677975656b616e673832302f:61727469636c652f64657461696c732f313436323936353937" class_="artid" style="display:none">
 </p>
</div>


