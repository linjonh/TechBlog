---
layout: post
title: "C枚举Enum详解"
date: 2025-03-12 21:56:52 +0800
description: "枚举是一组命名整型常量。枚举类型是使用 enum 关键字声明的。C# 枚举是值类型。换句话说，枚举包含自己的值，且不能继承或传递继承。"
keywords: "C#枚举(Enum)详解"
categories: ['基础从入门到精通', 'C']
tags: ['开发语言', 'Winform', 'C', '.Net']
artid: "146215856"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146215856
    alt: "C枚举Enum详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146215856
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146215856
cover: https://bing.ee123.net/img/rand?artid=146215856
image: https://bing.ee123.net/img/rand?artid=146215856
img: https://bing.ee123.net/img/rand?artid=146215856
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C#枚举(Enum)详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <strong>
      在 C# 中，‌枚举（Enum）‌ 是一种值类型，用于定义一组命名的常量值，提高代码的可读性和可维护性。以下是枚举的核心概念、用法和最佳实践：
     </strong>
    </p>
    <hr/>
    <p>
     <strong>
      ‌1. 枚举的核心特性‌
     </strong>
    </p>
    <ul>
     <li>
      类型安全‌：避免使用魔法数字（如 0, 1），用语义化的名称代替。
     </li>
     <li>
      值类型‌：存储在栈上，默认基础类型为 int，但可显式指定其他整型（如 byte, short）。
     </li>
     <li>
      不可继承‌：枚举本身不能派生其他类型。
     </li>
     <li>
      ‌组合支持‌：通过 Flags 特性实现位标志（Bit Flags）的按位操作。
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      ‌2. 枚举的声明语法‌
     </strong>
    </p>
    <pre><code class="prism language-csharp"><span class="token comment">// 默认基础类型为 int</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Color</span>
<span class="token punctuation">{<!-- --></span>
    Red<span class="token punctuation">,</span>    <span class="token comment">// 默认值为 0</span>
    Green<span class="token punctuation">,</span>  <span class="token comment">// 值为 1</span>
    Blue    <span class="token comment">// 值为 2</span>
<span class="token punctuation">}</span>
<span class="token comment">// 显式指定基础类型和值</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">FileAccess</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">byte</span></span>
<span class="token punctuation">{<!-- --></span>
    Read <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    Write <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    ReadWrite <span class="token operator">=</span> Read <span class="token operator">|</span> Write
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <p>
     <strong>
      ‌3. 枚举的常见用法‌
     </strong>
     <br/>
     ‌(1) 基础用法‌
    </p>
    <pre><code class="prism language-csharp"><span class="token class-name">Color</span> color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 输出: Red</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 输出: 0</span>
</code></pre>
    <p>
     ‌(2) 位标志（Flags）‌
    </p>
    <pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Flags</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Permissions</span>
<span class="token punctuation">{<!-- --></span>
    None <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    Read <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    Write <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    Execute <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    All <span class="token operator">=</span> Read <span class="token operator">|</span> Write <span class="token operator">|</span> Execute
<span class="token punctuation">}</span>
<span class="token comment">// 组合多个权限</span>
<span class="token class-name">Permissions</span> userPermissions <span class="token operator">=</span> Permissions<span class="token punctuation">.</span>Read <span class="token operator">|</span> Permissions<span class="token punctuation">.</span>Write<span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>userPermissions<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出: Read, Write</span>
<span class="token comment">// 检查权限</span>
<span class="token class-name"><span class="token keyword">bool</span></span> canWrite <span class="token operator">=</span> userPermissions<span class="token punctuation">.</span><span class="token function">HasFlag</span><span class="token punctuation">(</span>Permissions<span class="token punctuation">.</span>Write<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
    <p>
     ‌(3) 枚举与字符串转换‌
    </p>
    <pre><code class="prism language-csharp"><span class="token comment">// 枚举转字符串</span>
<span class="token class-name"><span class="token keyword">string</span></span> colorName <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// "Green"</span>

<span class="token comment">// 字符串转枚举</span>
<span class="token class-name">Color</span> parsedColor<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token string">"Blue"</span><span class="token punctuation">,</span> <span class="token keyword">out</span> parsedColor<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>parsedColor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Blue</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     ‌(4) 遍历枚举值‌
    </p>
    <pre><code class="prism language-csharp"><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">Color</span> color <span class="token keyword">in</span> Enum<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      ‌4. 枚举的底层原理‌
     </strong>
    </p>
    <ul>
     <li>
      默认值分配‌：第一个枚举值默认为 0，后续值依次递增。
     </li>
     <li>
      显式赋值‌：可手动指定任意整数值（允许重复，但需谨慎）。
     </li>
     <li>
      ‌内存占用‌：基础类型决定大小（如 byte 占用 1 字节，int 占用 4 字节）。
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      ‌5. 枚举的最佳实践‌
     </strong>
    </p>
    <ul>
     <li>
      语义化命名‌：用明确的名称（如 OrderStatus.Pending）代替数字。
     </li>
     <li>
      ‌避免重复值‌：重复值可能导致逻辑歧义。
     </li>
     <li>
      优先使用 Flags‌：需要组合多个选项时，使用 [Flags] 特性。
     </li>
     <li>
      ‌处理无效值‌：用 Enum.IsDefined 检查值是否合法：
     </li>
    </ul>
    <pre><code class="prism language-csharp"><span class="token class-name">t</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Color</span> color <span class="token operator">=</span> <span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <p>
     <strong>
      ‌6. 枚举 vs 常量 vs 类‌
     </strong>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        特性
       </th>
       <th>
        枚举（Enum）
       </th>
       <th>
        常量（const）
       </th>
       <th>
        类（Class）
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        ‌类型安全‌
       </td>
       <td>
        ✅
       </td>
       <td>
        ❌（仅数值替换）
       </td>
       <td>
        ✅
       </td>
      </tr>
      <tr>
       <td>
        ‌可组合性‌
       </td>
       <td>
        ✅（通过 Flags）
       </td>
       <td>
        ❌
       </td>
       <td>
        ✅（通过属性或方法）
       </td>
      </tr>
      <tr>
       <td>
        ‌语义明确性‌
       </td>
       <td>
        ✅
       </td>
       <td>
        ❌（需注释说明意义）
       </td>
       <td>
        ✅
       </td>
      </tr>
      <tr>
       <td>
        ‌内存占用‌
       </td>
       <td>
        小
       </td>
       <td>
        （值类型）
       </td>
       <td>
        无（编译时替换）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <strong>
      ‌7. 常见问题‌
     </strong>
     <br/>
     如何获取枚举的所有名称和值？‌
    </p>
    <pre><code class="prism language-csharp"><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> name <span class="token keyword">in</span> Enum<span class="token punctuation">.</span><span class="token function">GetNames</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Red, Green, Blue</span>
<span class="token punctuation">}</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">value</span> <span class="token keyword">in</span> Enum<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0, 1, 2</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     如何处理未定义的枚举值？‌
    </p>
    <pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">int</span></span> invalidValue <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Enum<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Color</span><span class="token punctuation">)</span><span class="token punctuation">,</span> invalidValue<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 有效值处理</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 无效值处理（如抛出异常或默认值）</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      如何扩展枚举？‌
     </strong>
     <br/>
     枚举不支持继承，但可通过以下方式扩展：
    </p>
    <ul>
     <li>
      新增枚举值‌（需谨慎，可能破坏现有代码）。
     </li>
     <li>
      使用 Enum 的扩展方法：
     </li>
    </ul>
    <pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ColorExtensions</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsPrimary</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Color</span> color<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> color <span class="token operator">==</span> Color<span class="token punctuation">.</span>Red <span class="token operator">||</span> color <span class="token operator">==</span> Color<span class="token punctuation">.</span>Green <span class="token operator">||</span> color <span class="token operator">==</span> Color<span class="token punctuation">.</span>Blue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <p>
     <strong>
      ‌8.常用的应用场景‌
     </strong>
    </p>
    <ul>
     <li>
      状态码‌：如 HttpStatusCode.OK、OrderStatus.Shipped。
     </li>
     <li>
      选项配置‌：如 FontStyle.Bold | FontStyle.Italic。
     </li>
     <li>
      ‌类型分类‌：如 LogLevel.Error、DeviceType.Mobile。
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      通过合理使用枚举，可以显著提升代码的可读性和健壮性。
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f70755f79755f68756e5f6a696e2f:61727469636c652f64657461696c732f313436323135383536" class_="artid" style="display:none">
 </p>
</div>


