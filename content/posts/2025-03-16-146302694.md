---
layout: post
title: "KubernetesService-的类型有哪些ClusterIPNodePort-和-LoadBalancer-的区别"
date: 2025-03-16 22:13:54 +0800
description: "类型访问范围适用场景是否支持外部访问使用场景例子ClusterIP集群内部访问集群内服务间的通信否微服务之间的内部通信NodePort集群内外访问，外部通过 Node IP 和端口访问需要从集群外部访问服务是测试环境或开发环境中访问服务集群内外访问，提供外部负载均衡器从外部访问服务，需要高可用、负载均衡是生产环境中需要外部访问的 Web 应用外部 DNS 名称映射将外部服务映射为 Kubernetes 内部服务是访问外部的数据库或 API 服务。"
keywords: "【Kubernetes】Service 的类型有哪些？ClusterIP、NodePort 和 LoadBalancer 的区别？"
categories: ['未分类']
tags: ['容器', '云原生', 'Kubernetes']
artid: "146302694"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146302694
    alt: "KubernetesService-的类型有哪些ClusterIPNodePort-和-LoadBalancer-的区别"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146302694
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146302694
cover: https://bing.ee123.net/img/rand?artid=146302694
image: https://bing.ee123.net/img/rand?artid=146302694
img: https://bing.ee123.net/img/rand?artid=146302694
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Kubernetes】Service 的类型有哪些？ClusterIP、NodePort 和 LoadBalancer 的区别？
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <ul>
     <li>
      在 Kubernetes 中，
      <code>
       Service
      </code>
      是一种抽象的方式，用于将一组 Pod 进行连接并暴露给外部或集群内部访问。
     </li>
     <li>
      它的主要目的是通过提供稳定的 IP 地址和端口来允许其他服务或客户端与一组 Pod 进行通信。
     </li>
    </ul>
    <h4>
     <a id="Service__3">
     </a>
     Service 类型
    </h4>
    <p>
     Kubernetes 中
     <code>
      Service
     </code>
     有四种主要类型，分别是：
    </p>
    <ol>
     <li>
      <strong>
       ClusterIP
      </strong>
      (默认类型)
     </li>
     <li>
      <strong>
       NodePort
      </strong>
     </li>
     <li>
      <strong>
       LoadBalancer
      </strong>
     </li>
     <li>
      <strong>
       ExternalName
      </strong>
     </li>
    </ol>
    <h4>
     <a id="_12">
     </a>
     各种类型的区别
    </h4>
    <h5>
     <a id="1_ClusterIP_14">
     </a>
     1.
     <strong>
      ClusterIP
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       作用
      </strong>
      ：这是默认的
      <code>
       Service
      </code>
      类型，主要用于集群内部的访问。它为
      <code>
       Service
      </code>
      分配一个集群内的 IP 地址。
     </li>
     <li>
      <strong>
       访问范围
      </strong>
      ：仅限于 Kubernetes 集群内部的其他 Pod 可以访问该 Service，不能从外部直接访问。
     </li>
     <li>
      <strong>
       适用场景
      </strong>
      ：用于集群内部服务之间的通信，例如微服务架构中的内部通信。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>app
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="2_NodePort_33">
     </a>
     2.
     <strong>
      NodePort
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       作用
      </strong>
      ：通过为每个 Node 分配一个端口号（
      <code>
       NodePort
      </code>
      ）来暴露 Service，从而可以通过集群中任意 Node 的 IP 和指定端口访问 Service。
     </li>
     <li>
      <strong>
       访问范围
      </strong>
      ：可以从集群外部通过
      <code>
       &lt;NodeIP&gt;:&lt;NodePort&gt;
      </code>
      的方式访问服务。通常会与
      <code>
       ClusterIP
      </code>
      配合使用，前者处理集群内部流量，后者则暴露端口给外部。
     </li>
     <li>
      <strong>
       适用场景
      </strong>
      ：适用于需要从外部访问 Kubernetes 集群内服务的场景，比如开发测试环境。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>app
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30007</span>  <span class="token comment"># 端口号通常在 30000-32767 之间</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="3_LoadBalancer_53">
     </a>
     3.
     <strong>
      LoadBalancer
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       作用
      </strong>
      ：为
      <code>
       Service
      </code>
      提供一个外部负载均衡器（例如 AWS ELB、GCP Load Balancer 等）。当使用
      <code>
       LoadBalancer
      </code>
      类型时，Kubernetes 会自动请求云服务提供商来创建一个负载均衡器并将流量转发到集群中的
      <code>
       Service
      </code>
      。
     </li>
     <li>
      <strong>
       访问范围
      </strong>
      ：可以通过外部负载均衡器的 IP 地址或域名访问集群中的 Service。
     </li>
     <li>
      <strong>
       适用场景
      </strong>
      ：适用于需要高可用、可伸缩、并且从外部可以访问的服务，如生产环境中的 Web 应用。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>app
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="4_ExternalName_72">
     </a>
     4.
     <strong>
      ExternalName
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       作用
      </strong>
      ：通过一个 CNAME 记录，将
      <code>
       Service
      </code>
      映射到外部的 DNS 名称。这意味着该
      <code>
       Service
      </code>
      不会指向集群内的 Pod，而是指向外部的某个 DNS 记录。
     </li>
     <li>
      <strong>
       访问范围
      </strong>
      ：用于从 Kubernetes 集群内部访问外部服务。
     </li>
     <li>
      <strong>
       适用场景
      </strong>
      ：适用于需要将外部服务映射到集群内部的场景，例如访问外部的数据库或 API 服务。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ExternalName
  <span class="token key atrule">externalName</span><span class="token punctuation">:</span> example.com  <span class="token comment"># 外部 DNS 名称</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="ClusterIPNodePort__LoadBalancer__87">
     </a>
     总结：ClusterIP、NodePort 和 LoadBalancer 的区别
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        类型
       </th>
       <th>
        访问范围
       </th>
       <th>
        适用场景
       </th>
       <th>
        是否支持外部访问
       </th>
       <th>
        使用场景例子
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         ClusterIP
        </strong>
       </td>
       <td>
        集群内部访问
       </td>
       <td>
        集群内服务间的通信
       </td>
       <td>
        否
       </td>
       <td>
        微服务之间的内部通信
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         NodePort
        </strong>
       </td>
       <td>
        集群内外访问，外部通过 Node IP 和端口访问
       </td>
       <td>
        需要从集群外部访问服务
       </td>
       <td>
        是
       </td>
       <td>
        测试环境或开发环境中访问服务
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         LoadBalancer
        </strong>
       </td>
       <td>
        集群内外访问，提供外部负载均衡器
       </td>
       <td>
        从外部访问服务，需要高可用、负载均衡
       </td>
       <td>
        是
       </td>
       <td>
        生产环境中需要外部访问的 Web 应用
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         ExternalName
        </strong>
       </td>
       <td>
        外部 DNS 名称映射
       </td>
       <td>
        将外部服务映射为 Kubernetes 内部服务
       </td>
       <td>
        是
       </td>
       <td>
        访问外部的数据库或 API 服务
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="_96">
     </a>
     小结
    </h4>
    <ul>
     <li>
      <strong>
       ClusterIP
      </strong>
      ：只限内部访问，适合内部服务通信。
     </li>
     <li>
      <strong>
       NodePort
      </strong>
      ：允许外部通过指定端口访问集群，适合开发测试环境。
     </li>
     <li>
      <strong>
       LoadBalancer
      </strong>
      ：提供外部负载均衡器，适合生产环境。
     </li>
     <li>
      <strong>
       ExternalName
      </strong>
      ：通过外部 DNS 名称访问服务，适合连接外部资源。
     </li>
    </ul>
    <hr/>
    <p>
     <a href="https://github.com/0voice">
      https://github.com/0voice
      <br/>
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37343238323932362f:61727469636c652f64657461696c732f313436333032363934" class_="artid" style="display:none">
 </p>
</div>


