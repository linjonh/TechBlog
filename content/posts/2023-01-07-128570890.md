---
layout: post
title: "云原生一基础概念-容器-Kubernets"
date: 2023-01-07 00:47:30 +0800
description: "云原生基础知识-容器与kubernet_云原生 容器"
keywords: "云原生 容器"
categories: ['笔记']
tags: ['云原生']
artid: "128570890"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=128570890
    alt: "云原生一基础概念-容器-Kubernets"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=128570890
featuredImagePreview: https://bing.ee123.net/img/rand?artid=128570890
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【云原生】一、基础概念-容器-Kubernets
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-kimbie-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        云原生
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_2" rel="nofollow">
          云原生历程
         </a>
        </li>
        <li>
         <a href="#_4" rel="nofollow">
          云原生技术范畴
         </a>
        </li>
        <li>
         <a href="#_6" rel="nofollow">
          云原生与传统部署
         </a>
        </li>
        <li>
         <a href="#_9" rel="nofollow">
          云原生关键技术
         </a>
        </li>
        <li>
         <a href="#vsvsServerless_11" rel="nofollow">
          传统vs微服务vsServerless
         </a>
        </li>
        <li>
         <a href="#Serverless_13" rel="nofollow">
          Serverless
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_17" rel="nofollow">
        容器
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_22" rel="nofollow">
          分层复用模式
         </a>
        </li>
        <li>
         <a href="#_24" rel="nofollow">
          容器运行
         </a>
        </li>
        <li>
         <a href="#_26" rel="nofollow">
          构建镜像
         </a>
        </li>
        <li>
         <a href="#moby_38" rel="nofollow">
          容器引擎架构-moby
         </a>
        </li>
        <li>
         <a href="#VM_40" rel="nofollow">
          容器和VM之间的差异
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#Kubernetes_44" rel="nofollow">
        Kubernetes
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_51" rel="nofollow">
          调度
         </a>
        </li>
        <li>
         <a href="#_54" rel="nofollow">
          自动恢复
         </a>
        </li>
        <li>
         <a href="#_57" rel="nofollow">
          水平伸缩
         </a>
        </li>
        <li>
         <a href="#_60" rel="nofollow">
          总架构
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#Master_62" rel="nofollow">
            Master架构
           </a>
          </li>
          <li>
           <a href="#Node_71" rel="nofollow">
            Node架构
           </a>
          </li>
          <li>
           <a href="#Podkubernet_75" rel="nofollow">
            Pod一个kubernet架构
           </a>
          </li>
          <li>
           <a href="#Volume_77" rel="nofollow">
            Volume
           </a>
          </li>
          <li>
           <a href="#Deployment_79" rel="nofollow">
            Deployment
           </a>
          </li>
          <li>
           <a href="#Service_81" rel="nofollow">
            Service
           </a>
          </li>
          <li>
           <a href="#Namespace_84" rel="nofollow">
            Namespace
           </a>
          </li>
          <li>
           <a href="#API_86" rel="nofollow">
            API
           </a>
          </li>
          <li>
           <a href="#APILabel_88" rel="nofollow">
            API-Label
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_90" rel="nofollow">
          实验
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#MinKube_91" rel="nofollow">
            安装MinKube
           </a>
          </li>
          <li>
           <a href="#_93" rel="nofollow">
            部署命令
           </a>
          </li>
          <li>
           <a href="#_95" rel="nofollow">
            常用命令
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     云原生
    </h2>
    <h3>
     <a id="_2">
     </a>
     云原生历程
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ee7b70f0fbadb45897465b1863c258f3.png"/>
    </p>
    <h3>
     <a id="_4">
     </a>
     云原生技术范畴
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1c52c95a5ae95dd5ecca18a5f5a410ef.png"/>
    </p>
    <h3>
     <a id="_6">
     </a>
     云原生与传统部署
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ba428cf376eaf935fec7854e11f56cd4.png"/>
    </p>
    <h3>
     <a id="_9">
     </a>
     云原生关键技术
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0eb4cfde208e5d52c70522ff06c2b157.png"/>
    </p>
    <h3>
     <a id="vsvsServerless_11">
     </a>
     传统vs微服务vsServerless
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7d242944df0d790d8d53f3401a8359ce.png"/>
    </p>
    <h3>
     <a id="Serverless_13">
     </a>
     Serverless
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5624b6277b3e31d218561295cebf089a.png"/>
    </p>
    <h2>
     <a id="_17">
     </a>
     容器
    </h2>
    <p>
     容器，是一个视图隔离、资源可限制、独立文件系统的进程集合,
     <br/>
     视图隔离-如能看见部分进程;独立主机名 等等;
     <br/>
     控制资源使用率：如2G内存大小: CPU 使用个数等等
    </p>
    <h3>
     <a id="_22">
     </a>
     分层复用模式
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c7208c78755f90b0a0bf29235d89c494.png"/>
    </p>
    <h3>
     <a id="_24">
     </a>
     容器运行
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/21a919778571a6efb3cb644969cf94c3.png"/>
    </p>
    <h3>
     <a id="_26">
     </a>
     构建镜像
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5b9984f9139e7551a49163df0141f746.png"/>
     <br/>
     <strong>
      ## 容器生命周期
      <br/>
      单进程模型
     </strong>
    </p>
    <ul>
     <li>
      Init 进程生命周期 = 容器生命周期
     </li>
     <li>
      运行期间可运行exec 执行运维操作
     </li>
    </ul>
    <p>
     <strong>
      数据持久化
     </strong>
    </p>
    <ul>
     <li>
      独立于容器的生命周期
     </li>
     <li>
      数据卷 -docker volume vs bind
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/40cbf82913db098de21a3909ba21e50e.png"/>
    </p>
    <h3>
     <a id="moby_38">
     </a>
     容器引擎架构-moby
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4062b5d89a0cb2d4c5c3a618ad57c0a2.png"/>
    </p>
    <h3>
     <a id="VM_40">
     </a>
     容器和VM之间的差异
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6726f2b25b1b8eaac61cd69235fb7339.png"/>
    </p>
    <h2>
     <a id="Kubernetes_44">
     </a>
     Kubernetes
    </h2>
    <ul>
     <li>
      Kubernetes 源于希腊语，意为“舵手”或“飞行员
     </li>
     <li>
      k8s 是通过将8个字母“Kubernete” 替换为8而导出的缩写
     </li>
     <li>
      工业级容器编排平台
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f80f3338b01b82ed8aadbdf2e433f264.png"/>
    </p>
    <h3>
     <a id="_51">
     </a>
     调度
    </h3>
    <p>
     根据容器大小、计算资源、把容器分布到不同机器
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fbf3fa1b936e4d2d0c40ccfc29ce8cb7.png"/>
    </p>
    <h3>
     <a id="_54">
     </a>
     自动恢复
    </h3>
    <p>
     机器故障，自动将容器分布到健康的机器上。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/918bcc6b4a332c1177f7dca5cfe862c6.png"/>
    </p>
    <h3>
     <a id="_57">
     </a>
     水平伸缩
    </h3>
    <p>
     如果黄颜色业务忙碌，自动将黄颜色容器负载均衡到其他机器上。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9e1412039c04147a079b5f13a7cfa4d8.png"/>
    </p>
    <h3>
     <a id="_60">
     </a>
     总架构
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/039628823811f5bd8e0034d488a5e0f1.png"/>
    </p>
    <h4>
     <a id="Master_62">
     </a>
     Master架构
    </h4>
    <ul>
     <li>
      CLI控制端命令
     </li>
     <li>
      API Server：所有组建与其建立连接，用于组建间的消息的传送
     </li>
     <li>
      Controller：控制水平伸缩、恢复的功能
     </li>
     <li>
      Scheduler:调度器，控制容器调度
     </li>
     <li>
      etcd:资源管理存储
     </li>
     <li>
      Node:节点
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/56d3347a6f73f924e33986f9a4b62ba5.png"/>
     </li>
    </ul>
    <h4>
     <a id="Node_71">
     </a>
     Node架构
    </h4>
    <ul>
     <li>
      Node:包括多个Pod
     </li>
     <li>
      Pod:运行一个或多个容器,最小的调度以及资源单元。由一个或者多个容器组成。定义容器运行的方式Command、环境变量等提供给容器共享的运行环境(网络、进程空间)
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6f990bb83bce0df3575556c90a64e61a.png"/>
     </li>
    </ul>
    <h4>
     <a id="Podkubernet_75">
     </a>
     Pod一个kubernet架构
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4c434431bd6378a03064fdfd6c101fbf.png"/>
    </p>
    <h4>
     <a id="Volume_77">
     </a>
     Volume
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/686296574201f51dfe21577e812a6d39.png"/>
    </p>
    <h4>
     <a id="Deployment_79">
     </a>
     Deployment
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a0bf402c99a13b3775493649e8186e95.png"/>
    </p>
    <h4>
     <a id="Service_81">
     </a>
     Service
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/559a4dc6f801a931aad93ce0c5b41978.png"/>
    </p>
    <h4>
     <a id="Namespace_84">
     </a>
     Namespace
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2b0f234a053a2b6781e0e08ebab921b8.png"/>
    </p>
    <h4>
     <a id="API_86">
     </a>
     API
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c438c1f125012ad18a6687e5becadcd8.png"/>
    </p>
    <h4>
     <a id="APILabel_88">
     </a>
     API-Label
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0c80e3912a2bfc3d9e990a2db6e6e9e7.png"/>
    </p>
    <h3>
     <a id="_90">
     </a>
     实验
    </h3>
    <h4>
     <a id="MinKube_91">
     </a>
     安装MinKube
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/529bf3ffe3db98c23803b5cdcb74be22.png"/>
    </p>
    <h4>
     <a id="_93">
     </a>
     部署命令
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a98b2734c92326596facb7076e8e5314.png"/>
    </p>
    <h4>
     <a id="_95">
     </a>
     常用命令
    </h4>
    <pre><code class="prism language-powershell"><span class="token comment"># 查看状态</span>
minikube status
<span class="token comment"># 获取node</span>
kubectl get nodes
<span class="token comment"># 获取deployments</span>
kubectl get deployments
<span class="token comment"># 实时查看deployments</span>
kubectl get <span class="token operator">--</span>watch deployments
<span class="token comment"># 根据deployment.yaml部署</span>
kubectl apply <span class="token operator">-</span>f deployment<span class="token punctuation">.</span>yaml
<span class="token comment"># 查看已经部署</span>
kubectl describe deployment nginx-deployment
<span class="token comment"># 删除</span>
kubectl delete deployment nginx-deployment
</code></pre>
    <p>
     <strong>
      deployments.yml
     </strong>
    </p>
    <pre><code class="prism language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment"># tells deployment to run 2 pods matching the template</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.14.2
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f6d696c6b5f616e645f62726561642f:61727469636c652f64657461696c732f313238353730383930" class_="artid" style="display:none">
 </p>
</div>


