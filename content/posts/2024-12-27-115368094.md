---
layout: post
title: "MyBatis-Plus入门案例查询数据库中所有记录"
date: 2024-12-27 17:58:23 +0800
description: "MyBatis-Plus在MyBatis的基础上只做增强，不做改变，目的是为了简化开发，提高效率。本"
keywords: "mybatisplus 查询表中所有数据"
categories: ['热门框架技术']
tags: ['后端', 'Plus']
artid: "115368094"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=115368094
    alt: "MyBatis-Plus入门案例查询数据库中所有记录"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=115368094
featuredImagePreview: https://bing.ee123.net/img/rand?artid=115368094
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     MyBatis-Plus入门案例：查询数据库中所有记录
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      MyBatis-Plus在MyBatis的基础上只做增强，不做改变，目的是为了
      <code>
       简化开发，提高效率
      </code>
      。本专栏六篇文章围绕MyBatis-Plus的常用技术点，结合springboot，实现了对数据库记录的CRUD操作，其他文章请参考：
     </p>
     <ul>
      <li>
       <a href="https://guoqianliang.blog.csdn.net/article/details/115368094" rel="nofollow">
        《MyBatis-Plus入门案例：查询数据库中所有记录》
       </a>
      </li>
      <li>
       <a href="https://guoqianliang.blog.csdn.net/article/details/115371164" rel="nofollow">
        《MyBatis-Plus添加：常用主键策略的分析及实现》
       </a>
      </li>
      <li>
       <a href="https://guoqianliang.blog.csdn.net/article/details/115375711" rel="nofollow">
        《MyBatis-Plus更新：自动填充与乐观锁的实现》
       </a>
      </li>
      <li>
       <a href="https://guoqianliang.blog.csdn.net/article/details/115380296" rel="nofollow">
        《MyBatis-Plus查询：批量、条件、分页查询的实现》
       </a>
      </li>
      <li>
       <a href="https://guoqianliang.blog.csdn.net/article/details/115382349" rel="nofollow">
        《MyBatis-Plus删除：物理删除与逻辑删除的实现》
       </a>
      </li>
      <li>
       <a href="https://guoqianliang.blog.csdn.net/article/details/115389489" rel="nofollow">
        《MyBatis-Plus高级查询：条件构造器的实现》
       </a>
      </li>
     </ul>
     <hr/>
     <p>
      作者：Hudie
      <br/>
      个人公众号/CSDN博客：编程一只蝶
      <br/>
      项目已开源至gitee：
      <a href="https://gitee.com/guo-qianliang/mybatis-plus-test" rel="nofollow">
       https://gitee.com/guo-qianliang/mybatis-plus-test
      </a>
      <br/>
      项目已开源至github：
      <a href="https://github.com/Guoqianliang/mybatis-plus-test">
       https://github.com/Guoqianliang/mybatis-plus-test
      </a>
     </p>
    </blockquote>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#MyBatisPlus_20" rel="nofollow">
        MyBatis-Plus入门案例：查询数据库中所有记录
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1_21" rel="nofollow">
          步骤1：创建数据库和表
         </a>
        </li>
        <li>
         <a href="#2springboot_46" rel="nofollow">
          步骤2：创建springboot工程并引入依赖
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#1_springboot_48" rel="nofollow">
            (1) 创建springboot工程
           </a>
          </li>
          <li>
           <a href="#2_User_52" rel="nofollow">
            (2) 创建User实体类
           </a>
          </li>
          <li>
           <a href="#3_mybatisplusmysql_66" rel="nofollow">
            (3) 引入mybatis-plus和mysql的依赖
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#4_89" rel="nofollow">
          步骤4：配置数据库信息
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_jdbc_110" rel="nofollow">
            ✔ 探讨关于jdbc版本的选择问题
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#5BaseMapper_113" rel="nofollow">
          步骤5：继承BaseMapper接口(核心)
         </a>
        </li>
        <li>
         <a href="#_117" rel="nofollow">
          开始测试
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#sql_137" rel="nofollow">
        流程分析：通过日志查看底层sql源码
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="MyBatisPlus_20">
     </a>
     MyBatis-Plus入门案例：查询数据库中所有记录
    </h2>
    <h3>
     <a id="1_21">
     </a>
     步骤1：创建数据库和表
    </h3>
    <p>
     首先在数据库中创建名为
     <code>
      MyBatis_plus
     </code>
     的数据库。然后在该数据库中创建一张user用户表，并添加几行数据：
    </p>
    <pre><code class="prism language-sql"><span class="token comment">// 创建user表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">USER</span>
<span class="token punctuation">(</span>
    id <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'主键ID'</span><span class="token punctuation">,</span>
    NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
    age <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span>
    email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'邮箱'</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-sql"><span class="token comment">// 向user表添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">USER</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> age<span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Jone'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'test1@qq.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'test2@qq.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">'test3@qq.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Sandy'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">'test4@qq.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'Billie'</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'test5@qq.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="创建好的User表" src="https://i-blog.csdnimg.cn/blog_migrate/072bf4d5c96ea2c92f200cc03aa26a71.png"/>
    </p>
    <h3>
     <a id="2springboot_46">
     </a>
     步骤2：创建springboot工程并引入依赖
    </h3>
    <h4>
     <a id="1_springboot_48">
     </a>
     (1) 创建springboot工程
    </h4>
    <p>
     使用Spring Initializr创建springboot工程，这里设置
     <code>
      mybatis-plus-test
     </code>
     为工程名。
     <br/>
     <img alt="设置GAV坐标" src="https://i-blog.csdnimg.cn/blog_migrate/5c75d6d9d87bee39969cdd761756198b.png">
      本次实验使用
      <code>
       springboot2.2.1版本
      </code>
      。
      <br/>
      <img alt="引入springboot2.2.1倚赖" src="https://i-blog.csdnimg.cn/blog_migrate/9d5151999c125f22a567e06e9957aa29.png"/>
     </img>
    </p>
    <h4>
     <a id="2_User_52">
     </a>
     (2) 创建User实体类
    </h4>
    <blockquote>
     <p>
      另外，需要在项目中创建User实体类与数据库中的User表对应：
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> Long id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> Integer age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="3_mybatisplusmysql_66">
     </a>
     (3) 引入mybatis-plus和mysql的依赖
    </h4>
    <blockquote>
     <p>
      下面的pom代码中，给出了3个依赖，分别是mybatis-plus、mysql驱动、lombok。其中的lombok必须配合插件使用，主要是为了简化实体类的编写，因为其可以通过注解来自动生成getter和setter方法。
     </p>
    </blockquote>
    <pre><code class="prism language-xml">        <span class="token comment">&lt;!--mybatis-plus--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql依赖--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--lombok用来简化实体类(自动生成getter和setter方法)--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h3>
     <a id="4_89">
     </a>
     步骤4：配置数据库信息
    </h3>
    <p>
     在
     <code>
      application.properties
     </code>
     配置文件中添加数据库相关配置：
    </p>
    <blockquote>
     <p>
      spring boot 2.0（内置jdbc5驱动）配置方式，本项目不使用。
     </p>
    </blockquote>
    <pre><code class="prism language-java">#mysql数据库连接
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">=</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">[</span>ip地址<span class="token punctuation">]</span><span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>mybatis_plus<span class="token operator">?</span>characterEncoding<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&amp;</span>useSSL<span class="token operator">=</span><span class="token boolean">false</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>root
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token punctuation">[</span>xxxx<span class="token punctuation">]</span>
</code></pre>
    <blockquote>
     <p>
      spring boot 2.1及以上（内置jdbc8驱动），本项目使用springboot2.2.1，所以选择这种配置方式。
     </p>
    </blockquote>
    <pre><code class="prism language-java">spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">=</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">[</span>ip地址<span class="token punctuation">]</span><span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>mybatis_plus<span class="token operator">?</span>serverTimezone<span class="token operator">=</span>GMT<span class="token operator">%</span><span class="token number">2</span>B8
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>root
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token punctuation">[</span>xxxx<span class="token punctuation">]</span>
</code></pre>
    <h4>
     <a id="_jdbc_110">
     </a>
     ✔ 探讨关于jdbc版本的选择问题
    </h4>
    <p>
     jdbc8.0版本的jdbc驱动的url需要添加
     <code>
      ?serverTimezone=GMT%2B8
     </code>
     后缀，否则会出现报错。另外，在jdbc8.0中也建议使用
     <code>
      com.mysql.cj.jdbc.Driver
     </code>
     这个驱动来代替com.mysql.jdbc.Driver，否则可能会出现运行报错的情况。
    </p>
    <h3>
     <a id="5BaseMapper_113">
     </a>
     步骤5：继承BaseMapper接口(核心)
    </h3>
    <p>
     继承
     <code>
      BaseMapper
     </code>
     接口后，无需编写 mapper.xml 文件，即可获得CRUD功能。
    </p>
    <p>
     <img alt="自定义接口继承BaseMapper" src="https://i-blog.csdnimg.cn/blog_migrate/4eea211cf0db6584e25b770cce919ec5.png"/>
    </p>
    <h3>
     <a id="_117">
     </a>
     开始测试
    </h3>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">MybatisPlusTestApplicationTests</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> UserMapper userMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     上面这条查询语句执行后，成功遍历出了数据库中的信息：
     <br/>
     <img alt="遍历出数据库表中所有信息" src="https://i-blog.csdnimg.cn/blog_migrate/f184bc7f46cc8575319278ad220ff130.png"/>
    </p>
    <h2>
     <a id="sql_137">
     </a>
     流程分析：通过日志查看底层sql源码
    </h2>
    <p>
     通过配置下面一条语句，可以实现，在执行时显示底层sql源码的功能，便于后期排查问题，了解即可。
    </p>
    <pre><code class="prism language-sql"><span class="token comment"># 查看mybatis日志</span>
mybatis<span class="token operator">-</span>plus<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>log<span class="token operator">-</span>impl<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>logging<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>StdOutImpl
</code></pre>
    <p>
     <img alt="含有日志的输出信息" src="https://i-blog.csdnimg.cn/blog_migrate/bb05d1b6394e2192930a8fcb0cab084f.png"/>
    </p>
    <p>
     至此，MyBatis-Plus入门案例之查询数据库中所有记录的操作就完成了！可以发现，我们即没有写sql语句也没有写xml配置文件，只是让接口继承了Basemapper，然后直接调用了方法而已。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333639313035382f:61727469636c652f64657461696c732f313135333638303934" class_="artid" style="display:none">
 </p>
</div>


