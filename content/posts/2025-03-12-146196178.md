---
layout: post
title: "Spring-Boot-约定大于配置实现自定义配置"
date: 2025-03-12 09:23:14 +0800
description: "Spring Boot 是一个基于 Spring 框架的快速开发框架，它的核心理念之一是 **“约定大于配置”**。这意味着 Spring Boot 提供了许多默认配置，开发者只需要关注自己的业务逻辑，而不需要手动配置大量的细节。然而，在某些情况下，我们可能需要自定义配置来满足特定的需求。本文将介绍如何在 Spring Boot 中实现自定义配置，并通过实现接口和添加 `@Configuration` 注解来完成这一过程。"
keywords: "Spring Boot 约定大于配置：实现自定义配置"
categories: ['Java']
tags: ['后端', 'Spring', 'Java', 'Boot']
artid: "146196178"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146196178
    alt: "Spring-Boot-约定大于配置实现自定义配置"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146196178
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146196178
cover: https://bing.ee123.net/img/rand?artid=146196178
image: https://bing.ee123.net/img/rand?artid=146196178
img: https://bing.ee123.net/img/rand?artid=146196178
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Spring Boot 约定大于配置：实现自定义配置
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="Spring_Boot__5">
     </a>
     Spring Boot 约定大于配置：实现自定义配置
    </h2>
    <h3>
     <a id="_7">
     </a>
     引言
    </h3>
    <p>
     Spring Boot 是一个基于 Spring 框架的快速开发框架，它的核心理念之一是
     <strong>
      “约定大于配置”
     </strong>
     。这意味着 Spring Boot 提供了许多默认配置，开发者只需要关注自己的业务逻辑，而不需要手动配置大量的细节。然而，在某些情况下，我们可能需要自定义配置来满足特定的需求。本文将介绍如何在 Spring Boot 中实现自定义配置，并通过实现接口和添加
     <code>
      @Configuration
     </code>
     注解来完成这一过程。
    </p>
    <hr/>
    <h3>
     <a id="1_Spring_Boot__13">
     </a>
     1. Spring Boot 的约定大于配置
    </h3>
    <p>
     Spring Boot 的“约定大于配置”理念体现在以下几个方面：
    </p>
    <ul>
     <li>
      <strong>
       自动配置
      </strong>
      ：Spring Boot 根据项目的依赖自动配置应用程序。例如，如果项目中引入了
      <code>
       spring-boot-starter-web
      </code>
      ，Spring Boot 会自动配置 Tomcat 和 Spring MVC。
     </li>
     <li>
      <strong>
       默认配置
      </strong>
      ：Spring Boot 提供了许多默认配置，例如默认的端口号是
      <code>
       8080
      </code>
      ，默认的静态资源路径是
      <code>
       classpath:/static
      </code>
      等。
     </li>
     <li>
      <strong>
       简化配置
      </strong>
      ：通过
      <code>
       application.properties
      </code>
      或
      <code>
       application.yml
      </code>
      文件，开发者可以轻松覆盖默认配置。
     </li>
    </ul>
    <p>
     这种设计大大减少了开发者的配置工作量，使得开发者可以更专注于业务逻辑的实现。
    </p>
    <hr/>
    <h3>
     <a id="2__25">
     </a>
     2. 自定义配置的需求
    </h3>
    <p>
     尽管 Spring Boot 提供了许多默认配置，但在实际开发中，我们可能需要自定义一些配置。例如：
    </p>
    <ul>
     <li>
      自定义 Bean 的加载顺序。
     </li>
     <li>
      自定义某些组件的初始化逻辑。
     </li>
     <li>
      根据环境变量动态加载配置。
     </li>
    </ul>
    <p>
     为了实现这些需求，Spring Boot 提供了灵活的扩展机制，允许开发者通过实现接口和添加注解来自定义配置。
    </p>
    <hr/>
    <h3>
     <a id="3__37">
     </a>
     3. 实现自定义配置的步骤
    </h3>
    <p>
     在 Spring Boot 中，实现自定义配置通常需要以下步骤：
    </p>
    <ol>
     <li>
      <strong>
       实现
       <code>
        WebMvcConfigurer
       </code>
       或其他相关接口
      </strong>
      ：根据需求选择合适的接口。
     </li>
     <li>
      <strong>
       添加
       <code>
        @Configuration
       </code>
       注解
      </strong>
      ：将自定义配置类标记为 Spring 的配置类。
     </li>
     <li>
      <strong>
       重写接口方法
      </strong>
      ：在配置类中重写接口的方法，实现自定义逻辑。
     </li>
    </ol>
    <p>
     下面通过一个具体的示例来演示如何实现自定义配置。
    </p>
    <hr/>
    <h3>
     <a id="4__Spring_MVC__49">
     </a>
     4. 示例：自定义 Spring MVC 配置
    </h3>
    <p>
     假设我们需要自定义 Spring MVC 的配置，例如添加一个拦截器或修改静态资源路径。可以通过以下步骤实现：
    </p>
    <h4>
     <a id="41__53">
     </a>
     4.1 创建自定义配置类
    </h4>
    <p>
     首先，创建一个类并实现
     <code>
      WebMvcConfigurer
     </code>
     接口。
     <code>
      WebMvcConfigurer
     </code>
     是 Spring MVC 提供的接口，用于自定义 MVC 配置。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">InterceptorRegistry</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebMvcConfigurer</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span> <span class="token comment">// 标记为配置类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomWebMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 添加自定义拦截器</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拦截所有请求</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 自定义静态资源路径</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/static/**"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"classpath:/custom-static/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="42__81">
     </a>
     4.2 创建自定义拦截器
    </h4>
    <p>
     在上面的配置类中，我们添加了一个自定义拦截器。拦截器的实现如下：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">HandlerInterceptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CustomInterceptor: 请求被拦截"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 继续执行后续逻辑</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="43__102">
     </a>
     4.3 测试自定义配置
    </h4>
    <p>
     启动 Spring Boot 应用程序后，访问任意路径，控制台会输出
     <code>
      CustomInterceptor: 请求被拦截
     </code>
     ，说明拦截器已生效。同时，静态资源路径也会被映射到
     <code>
      classpath:/custom-static/
     </code>
     。
    </p>
    <hr/>
    <h3>
     <a id="5__108">
     </a>
     5. 其他自定义配置场景
    </h3>
    <p>
     除了自定义 Spring MVC 配置外，Spring Boot 还支持许多其他自定义配置场景。以下是一些常见的示例：
    </p>
    <h4>
     <a id="51__112">
     </a>
     5.1 自定义数据源配置
    </h4>
    <p>
     通过实现
     <code>
      DataSourceInitializer
     </code>
     接口，可以自定义数据源的初始化逻辑。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDataSourceConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 自定义数据源配置</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HikariDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="52__Spring_Security__131">
     </a>
     5.2 自定义 Spring Security 配置
    </h4>
    <p>
     通过继承
     <code>
      WebSecurityConfigurerAdapter
     </code>
     类，可以自定义 Spring Security 的配置。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span><span class="token class-name">EnableWebSecurity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span><span class="token class-name">WebSecurityConfigurerAdapter</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/public/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="6__155">
     </a>
     6. 总结
    </h3>
    <p>
     Spring Boot 的“约定大于配置”理念极大地简化了开发流程，但在实际项目中，我们仍然需要根据需求自定义配置。通过实现相关接口（如
     <code>
      WebMvcConfigurer
     </code>
     ）并添加
     <code>
      @Configuration
     </code>
     注解，开发者可以灵活地扩展和定制 Spring Boot 的默认行为。
    </p>
    <p>
     自定义配置的核心步骤如下：
    </p>
    <ol>
     <li>
      选择合适的接口（如
      <code>
       WebMvcConfigurer
      </code>
      ）。
     </li>
     <li>
      创建配置类并添加
      <code>
       @Configuration
      </code>
      注解。
     </li>
     <li>
      重写接口方法，实现自定义逻辑。
     </li>
    </ol>
    <p>
     希望本文能帮助你更好地理解 Spring Boot 的自定义配置机制，并在实际项目中灵活运用！
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34363134363731382f:61727469636c652f64657461696c732f313436313936313738" class_="artid" style="display:none">
 </p>
</div>


