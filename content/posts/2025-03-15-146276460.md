---
layout: post
title: "数据库的基本知识"
date: 2025-03-15 18:08:59 +0800
description: "数据库是用于存储和管理数据的系统，常见类型包括关系型数据库（如MySQL、PostgreSQL）和非关系型数据库（如MongoDB）。在SQL中，数据表的创建使用 CREATE TABLE 语句，插入数据用 INSERT INTO，查询数据常用 SELECT。数据查询涉及七个重要关键词：SELECT（查询）、FROM（指定表）、WHERE（筛选条件）、GROUP BY（分组）、HAVING（筛选分组）、ORDER BY（排序）和 JOIN（连接表）。"
keywords: "数据库的基本知识"
categories: ['数据库']
tags: ['数据库', 'Sql', 'Oracle']
artid: "146276460"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146276460
    alt: "数据库的基本知识"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146276460
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146276460
cover: https://bing.ee123.net/img/rand?artid=146276460
image: https://bing.ee123.net/img/rand?artid=146276460
img: https://bing.ee123.net/img/rand?artid=146276460
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     数据库的基本知识
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     一、创建数据库和数据表
    </h2>
    <h3>
     <a id="11__2">
     </a>
     1.1 创建数据库相关代码
    </h3>
    <pre><code class="prism language-sql"><span class="token comment">#创建数据库相关代码</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> test<span class="token punctuation">;</span>  <span class="token comment">-- 创建名为test的数据库</span>
<span class="token keyword">show</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> test<span class="token punctuation">;</span> <span class="token comment">-- 查看创建好的数据库</span>
<span class="token keyword">show</span> <span class="token keyword">DATABASES</span><span class="token punctuation">;</span>   <span class="token comment">-- 查看所有的数据库列表</span>
<span class="token keyword">use</span> test<span class="token punctuation">;</span>  <span class="token comment">-- 使用创建好的数据库</span>
<span class="token keyword">drop</span> <span class="token keyword">DATABASE</span> test<span class="token punctuation">;</span> <span class="token comment">-- 删除数据库</span>
</code></pre>
    <h3>
     <a id="12__11">
     </a>
     1.2 创建数据表
    </h3>
    <p>
     数据库是由多个数据表构成的，每张数据表中存储着不同的字段，每个字段由不同的字段名和记录构成，并且每个字段有自己的数据结构和约束条件。
     <br/>
     在之前创建的test数据库中，创建一个员工信息表emp。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        部门ID
       </th>
       <th>
        部门名称
       </th>
       <th>
        员工数
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        p01
       </td>
       <td>
        财务部
       </td>
       <td>
        20
       </td>
      </tr>
      <tr>
       <td>
        p02
       </td>
       <td>
        销售部
       </td>
       <td>
        100
       </td>
      </tr>
      <tr>
       <td>
        p03
       </td>
       <td>
        运营部
       </td>
       <td>
        40
       </td>
      </tr>
     </tbody>
    </table>
    <pre><code class="prism language-sql"><span class="token comment">-- 使用test数据库</span>
<span class="token keyword">use</span> test<span class="token punctuation">;</span>
<span class="token comment">-- 创建员工信息表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
			depid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			depname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			peoplecount <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			
<span class="token comment">-- 查看表是否创建成功</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span>
<span class="token comment">-- 删除数据表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> emp
</code></pre>
    <h3>
     <a id="13__32">
     </a>
     1.3 约束条件
    </h3>
    <p>
     约束是在表上强制执行的数据检验规则，用来保证创建的表的数据完整和正确。
     <br/>
     mysql数据库常用的约束条件：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        约束条件
       </th>
       <th>
        说明
       </th>
       <th>
        语法
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        PRIMARY KEY
       </td>
       <td>
        主键约束
       </td>
       <td>
        字段名 数据类型 PRIMARY KEY
       </td>
      </tr>
      <tr>
       <td>
        NOT NULL
       </td>
       <td>
        非空约束
       </td>
       <td>
        字段名 数据类型 NOT NULL
       </td>
      </tr>
      <tr>
       <td>
        UNIQUE
       </td>
       <td>
        唯一约束
       </td>
       <td>
        字段名 数据类型 UNIQUE
       </td>
      </tr>
      <tr>
       <td>
        AUTO_INCREMENT
       </td>
       <td>
        自增字段
       </td>
       <td>
        字段名 数据类型 AUTO_INCREMENT
       </td>
      </tr>
      <tr>
       <td>
        DEFAULT
       </td>
       <td>
        默认值
       </td>
       <td>
        字段名 数据类型 DEFAULT 默认值
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="131__42">
     </a>
     1.3.1 主键约束
    </h4>
    <p>
     主键，一列（或一组列），其值能够唯一区分表中每个行。主键约束：保证表中每行记录都不重复。
     <br/>
     主键，又称为"主码”，是数据表中一列或多列的组合。 主键的作用就是用来表示一个特定的行，没有主键，更新或者删除表中特定的行会比较困难，因为没有安全的方法保证只涉及相关的行。 使用主键，能够惟一地标识表中的一条记录，并且可以结合外键来 定义不同数据表之间的关系，还可以加快数据库查询的速度。
     <br/>
     原则上，表中的任何列都可以作为主键，只需要满足以下条件：
    </p>
    <ul>
     <li>
      任何两行都不具有相同的主键值（唯一）
     </li>
     <li>
      每个行都必须具有一个主键值，且主键值不允许NULL值（非空）
     </li>
    </ul>
    <p>
     主键分为两种类型:单字段主键和多字段主键。对于单字段主键，主键通常定义在表的一列上，比如:对于下面的员工表来说部门ID就可以作为主键。对于多字段主键，必须保证构成主键的所有列值的组合是唯一的(单个列值可以不唯一)。
    </p>
    <pre><code class="prism language-sql"><span class="token comment"># 主键约束</span>
<span class="token comment">-- 单字段主键</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
			depid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
			depname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			peoplecount <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- drop table emp		</span>
<span class="token comment">-- 多字段主键</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
			depid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
			depname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			peoplecount <span class="token keyword">int</span><span class="token punctuation">,</span>
			<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>depid<span class="token punctuation">,</span>depname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="132__65">
     </a>
     1.3.2 非空约束
    </h4>
    <p>
     非空约束，指的是字段的值不能为空。语法：字段名 字段类型 not null
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
			depid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
			depname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span>
			peoplecount <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="133__73">
     </a>
     1.3.3 唯一性约束
    </h4>
    <p>
     唯一性约束，要求该列的值必须是唯一的，语法：字段名 数据类型 unique；
    </p>
    <ul>
     <li>
      允许为空，但只能出现一个空值；
     </li>
     <li>
      一个表中可以有多个字段声明为唯一值；
     </li>
     <li>
      唯一约束确保数据表的一列或几列不出现重复值
     </li>
    </ul>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
			depid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
			depname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span>
			peoplecount <span class="token keyword">int</span> <span class="token keyword">unique</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <table>
     <thead>
      <tr>
       <th>
        异同点
       </th>
       <th>
        主键
       </th>
       <th>
        唯一键
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        不同点
       </td>
       <td>
        设置为主键的字段不能为NULL
       </td>
       <td>
        可以为NULL
       </td>
      </tr>
      <tr>
       <td>
        不同点
       </td>
       <td>
        一张表有且仅有一个主键
       </td>
       <td>
        可以有多个唯一键
       </td>
      </tr>
      <tr>
       <td>
        相同点
       </td>
       <td>
        设置为主键的字段值不能重复
       </td>
       <td>
        唯一键字段值不能重复
       </td>
      </tr>
      <tr>
       <td>
        相同点
       </td>
       <td>
        构造为主键的字段可以是多个
       </td>
       <td>
        唯一键字段值可以是多个
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="134__92">
     </a>
     1.3.4 默认约束
    </h4>
    <p>
     默认约束，指定某个字段的默认值。如果新插入一条记录时没有为默认约束字段赋值，那么系统就回自动为这个字段赋值为默认约束设定的值。语法：字段名 数据类型 default 默认值
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
			depid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
			depname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">DEFAULT</span> <span class="token string">'-'</span> <span class="token punctuation">,</span>
			peoplecount <span class="token keyword">int</span> <span class="token keyword">unique</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="135__101">
     </a>
     1.3.5 自增字段
    </h4>
    <p>
     自增字段：一个表只能有一个自增字段，自增字段必须为主键的一部分，默认情况下从1开始自增。
     <br/>
     创建含有各种约束条件的数据表
    </p>
    <pre><code class="prism language-sql"><span class="token comment"># 创建一个含有各种约束条件的数据表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> exp <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
				  fname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
				  math <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span>
				  minmax <span class="token keyword">float</span> <span class="token keyword">unique</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="14__111">
     </a>
     1.4 手工建表
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> fruits<span class="token punctuation">(</span>
					f_id <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
					s_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span>
					f_name <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					f_price <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
					<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>f_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> fruits<span class="token punctuation">(</span>f_id<span class="token punctuation">,</span>s_id<span class="token punctuation">,</span>f_name<span class="token punctuation">,</span>f_price<span class="token punctuation">)</span> <span class="token keyword">values</span> 
				<span class="token punctuation">(</span><span class="token string">"a1"</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token string">"apple"</span><span class="token punctuation">,</span><span class="token number">5.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token punctuation">(</span><span class="token string">"a2"</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token string">"orange"</span><span class="token punctuation">,</span><span class="token number">10.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a75ef7cc2d6d46fdb59b72e5b225e179.png"/>
    </p>
    <h2>
     <a id="_124">
     </a>
     二、数据查询功能
    </h2>
    <h3>
     <a id="21_sql_7_125">
     </a>
     2.1 sql 查询的7个关键词
    </h3>
    <p>
     在实际工作中，使用最多的就是数据库的查询功能了，在数据查询过程中，通常会用到以下7个核心关键词：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">&lt;</span>select_list<span class="token operator">&gt;</span>
<span class="token keyword">from</span> <span class="token operator">&lt;</span>table_list<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">where</span> <span class="token operator">&lt;</span>where_condition<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token operator">&lt;</span>group_by_list<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">having</span> <span class="token operator">&lt;</span>having_condition<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token operator">&lt;</span>order_by_list<span class="token operator">&gt;</span> <span class="token keyword">asc</span><span class="token operator">|</span><span class="token keyword">desc</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">limit</span> <span class="token operator">&lt;</span>limit_number<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre>
    <p>
     其中，select 和 from 两个关键词时必选项，也就是说，只要是数据查询功能，都需要使用这两个关键词，其他的关键词，可以根据查询实际情况有针对性的选择和使用。
     <br/>
     二手房数据：链接：https://pan.quark.cn/s/586cf3750a24
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> second_hand_houses<span class="token punctuation">(</span>
							frame <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
							ftype <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
							size <span class="token keyword">int</span><span class="token punctuation">,</span>
							region <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
							floor <span class="token keyword">int</span><span class="token punctuation">,</span>
							drection <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
							bulit_data <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
							price_unit <span class="token keyword">int</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="211_select_149">
     </a>
     2.1.1 select
    </h4>
    <p>
     select主要作用是告诉数据库，在提取数据时需要选择的字段名称。这里的字段名称可以是数据表已经有的名称，也可以是依据已有名称衍生出来的名称。
    </p>
    <h4>
     <a id="212_from_151">
     </a>
     2.1.2 from
    </h4>
    <p>
     from主要作用就是告诉数据库，在提取数据时需要选择的数据源（数据表）名称，通常select和from两个关键词一起使用
    </p>
    <h4>
     <a id="213_where_153">
     </a>
     2.1.3 where
    </h4>
    <pre><code class="prism language-sql"><span class="token comment">#查询北京所有2室1厅的二手房信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> second_hand_houses <span class="token keyword">where</span> ftype <span class="token operator">=</span> <span class="token string">'2室1厅'</span>

<span class="token comment">#查询朝阳区房价单价在10000以上的二手房名称，户型，面积，朝向，楼层</span>
<span class="token keyword">select</span> frame<span class="token punctuation">,</span>ftype<span class="token punctuation">,</span>size<span class="token punctuation">,</span>drection<span class="token punctuation">,</span>floor
<span class="token keyword">from</span> second_hand_houses
<span class="token keyword">where</span> region <span class="token operator">=</span><span class="token string">'朝阳区'</span>
<span class="token operator">and</span> price_unit<span class="token operator">&gt;</span><span class="token number">50000</span>
</code></pre>
    <h4>
     <a id="214_group_by_164">
     </a>
     2.1.4 group by
    </h4>
    <p>
     主要用于统计时的分组操作，通常和聚合函数一起搭配使用，主要有以下五种：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        聚合函数
       </th>
       <th>
        功能
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        count
       </td>
       <td>
        用于统计记录数
       </td>
       <td>
        函数内传递*，表示统计数据表的记录数；如果是某个字段，则统计字段的记录数，如果需要去重，需在字段前加关键字distinct
       </td>
      </tr>
      <tr>
       <td>
        sum
       </td>
       <td>
        用于数值型数据的求和
       </td>
       <td>
        需要注意的是变量求和之后，仍然具有业务含义
       </td>
      </tr>
      <tr>
       <td>
        avg
       </td>
       <td>
        用于数值型数据的均值计算
       </td>
       <td>
        同上
       </td>
      </tr>
      <tr>
       <td>
        min
       </td>
       <td>
        用于计算数值型数据的最小值
       </td>
       <td>
        -
       </td>
      </tr>
      <tr>
       <td>
        max
       </td>
       <td>
        用于计算数值型数据的最大值
       </td>
       <td>
        -
       </td>
      </tr>
     </tbody>
    </table>
    <pre><code class="prism language-sql"><span class="token comment">#查询各地区下二手房数量、总的可居住面积、最大单价</span>
<span class="token keyword">select</span> region<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> counts<span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token keyword">as</span> tot_size<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>price_unit<span class="token punctuation">)</span> <span class="token keyword">as</span> max_price
<span class="token keyword">from</span> second_hand_houses
<span class="token keyword">group</span> <span class="token keyword">by</span> region

<span class="token comment">#查询各地区下每年二手房数量、总的可居住面积、最大单价</span>
<span class="token keyword">select</span> region<span class="token punctuation">,</span>bulit_data<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> counts<span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token keyword">as</span> tot_size<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>price_unit<span class="token punctuation">)</span> <span class="token keyword">as</span> max_price
<span class="token keyword">from</span> second_hand_houses
<span class="token keyword">group</span> <span class="token keyword">by</span> region<span class="token punctuation">,</span>bulit_data
</code></pre>
    <h4>
     <a id="215_having_184">
     </a>
     2.1.5 having
    </h4>
    <p>
     HAVING 用于对分组（GROUP BY）后的结果进行过滤。它通常与聚合函数（如 COUNT、SUM、AVG、MAX、MIN 等）一起使用，用于筛选满足条件的分组。
     <br/>
     与 WHERE 的区别：
    </p>
    <ul>
     <li>
      WHERE：在分组之前过滤数据，作用于单行记录。
     </li>
     <li>
      HAVING：在分组之后过滤数据，作用于分组结果。
     </li>
    </ul>
    <pre><code class="prism language-sql"><span class="token comment">#按照地区、户型、楼层和阳台朝向分组统计东城区、朝阳区二手房的平均单价和总数量</span>
<span class="token keyword">select</span> region<span class="token punctuation">,</span>ftype<span class="token punctuation">,</span>floor<span class="token punctuation">,</span>drection<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>price_unit<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_price<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> counts
<span class="token keyword">from</span> second_hand_houses
<span class="token keyword">where</span> region <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">"东城区"</span><span class="token punctuation">,</span><span class="token string">"朝阳区"</span><span class="token punctuation">)</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> region<span class="token punctuation">,</span>ftype<span class="token punctuation">,</span>floor<span class="token punctuation">,</span>drection
<span class="token keyword">having</span> avg_price <span class="token operator">&gt;</span><span class="token number">50000</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="216_order_by_197">
     </a>
     2.1.6 order by
    </h4>
    <p>
     用于对查询结果进行排序。你可以指定一个或多个字段，并选择升序（ASC，默认）或降序（DESC）排列。
    </p>
    <pre><code class="prism language-sql"><span class="token comment">#按面积降序，单价升序的方式查询所有2室1厅的二手房信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> second_hand_houses
<span class="token keyword">where</span> ftype <span class="token operator">=</span><span class="token string">"2室1厅"</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> size <span class="token keyword">desc</span><span class="token punctuation">,</span>price_unit
</code></pre>
    <h4>
     <a id="217_limit_205">
     </a>
     2.1.7 limit
    </h4>
    <p>
     用于限定查询返回的记录行数，可以选择返回前几行，中间几行，或者是末尾几行，需要注意的是这个关键词后面最多可以写两个整数型的值：
     <br/>
     limit n：表示返回查询结果的前n行
     <br/>
     limit m,n：表示从第m+1行开始，连续返回n行的数据
    </p>
    <pre><code class="prism language-sql"><span class="token comment">#查询建筑时间最悠久的前5套二手房</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> second_hand_houses
<span class="token keyword">order</span> <span class="token keyword">by</span> bulit_data
<span class="token keyword">limit</span> <span class="token number">5</span>

<span class="token comment">#查询出东城区，1980年建的二手房，并且单价在2-3名</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> second_hand_houses
<span class="token keyword">where</span> region <span class="token operator">=</span><span class="token string">"丰台区"</span> <span class="token operator">and</span> bulit_data <span class="token operator">=</span> <span class="token string">"2008"</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> price_unit <span class="token keyword">desc</span>
<span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span>   
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031323132313732312f:61727469636c652f64657461696c732f313436323736343630" class_="artid" style="display:none">
 </p>
</div>


