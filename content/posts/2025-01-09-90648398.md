---
layout: post
title: "C单元测试及NUnit的基本用法"
date: 2025-01-09 21:05:16 +0800
description: "单元测试单元测试（Unit Testing）是针对程序弄块（软件设计的最小单位）来进行正确性检验的测"
keywords: "c# nunit"
categories: ['C']
tags: ['单元测试', 'Nunit', 'C']
artid: "90648398"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=90648398
    alt: "C单元测试及NUnit的基本用法"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=90648398
featuredImagePreview: https://bing.ee123.net/img/rand?artid=90648398
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【C#】单元测试及NUnit的基本用法
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-github-gist" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="_0">
     </a>
     单元测试
    </h4>
    <p>
     单元测试（Unit Testing）是针对程序弄块（软件设计的最小单位）来进行正确性检验的测试工作。单元测试通常由软件开发人员编写，用于确保他们了所写的代码匹配软件需求和遵循开发目标。
    </p>
    <p>
     单元测试的优点：
    </p>
    <ol>
     <li>
      适应变更。允许程序员在未来重构代码，并确保模块依然工作正确。
     </li>
     <li>
      简化集成。采用自底向上的测试路径，消除程序单元的不可靠，使集成测试变得更简单。
     </li>
     <li>
      文档记录。借助于查看单元测试提供的功能和单元测试中如何使用程序单元，开发人员可以直观的理解程序单元的基础API。
     </li>
     <li>
      表达设计。在测试驱动开发的软件实践中，单元测试可以取代正式的设计。开发人员编写单元测试用于展示软件需求或者软件缺陷，然后，开发人员遵循测试要求编写最简单的代码去满足它，直到测试得以通过。
     </li>
    </ol>
    <h4>
     <a id="NUnit_9">
     </a>
     NUnit测试框架
    </h4>
    <p>
     .Net平台下有多种测试工具，
     <a href="www.nunit.org" rel="nofollow">
      NUnit
     </a>
     为C#开发的开源测试框架，广泛用于.Net平台的单元测试和回归测试中。
    </p>
    <p>
     详细的使用方法可以参考：
     <a href="https://github.com/nunit/docs/wiki">
      https://github.com/nunit/docs/wiki
     </a>
    </p>
    <p>
     下面介绍在Visual Studio中的最轻量级的使用方法。
    </p>
    <h5>
     <a id="1_16">
     </a>
     1.安装
    </h5>
    <p>
     在Visual Studio菜单栏 “工具——&gt;扩展和更新——&gt;联机”，搜索“nunit”，结果如下。安装
     <code>
      NUnit 3 Test Adapter
     </code>
     、
     <code>
      NUnit VS Templates
     </code>
     和
     <code>
      Test Generator NUnit extension
     </code>
     三个扩展。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f5c2bf6dfb8c4e3895271d8c5e5b383a.png"/>
    </p>
    <h5>
     <a id="2_20">
     </a>
     2.创建测试项目
    </h5>
    <p>
     一开始需要在已有的解决方案中创建新的测试项目，因为不想把任何测试与生产的代码一起发布。菜单栏点击“文件 ——&gt; 添加 ——&gt; 新建项目 ——&gt; Visual C# ——&gt; 测试”。
    </p>
    <p>
     在项目的引用栏中添加
     <code>
      nunit.framework
     </code>
     引用。
    </p>
    <p>
     以类为单位创建测试文件，对于MVP的设计模式，可以对View的接口进行Mock，可以参考教程
     <a href="https://www.developerfusion.com/article/145904/an-introduction-to-testing-with-the-modelviewpresenter-pattern-for-web-forms-development/" rel="nofollow">
      An Introduction to testing with the Model-View-Presenter pattern for Web Forms Development
     </a>
     。
    </p>
    <p>
     典型的测试文件格式如下所示。
    </p>
    <pre><code class="prism language-csharp"><span class="token keyword">namespace</span> JMelt<span class="token punctuation">.</span>Tests
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">using</span> JMelt<span class="token punctuation">.</span>Models<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token class-name">TestFixture</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMyCustom</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">[</span><span class="token class-name">SetUp</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//这里写运行每一个测试用例时需要初始化的代码</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// 测试 custom.ini 配置信息的读取</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token punctuation">[</span><span class="token class-name">Test</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">TestReadIniFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">var</span> length <span class="token operator">=</span> MyCustom<span class="token punctuation">.</span>CustomConfig<span class="token punctuation">.</span>Count<span class="token punctuation">;</span>
            Assert<span class="token punctuation">.</span><span class="token function">That</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> Is<span class="token punctuation">.</span><span class="token function">EqualTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"custom.ini read error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      属性解释：
     </strong>
    </p>
    <blockquote>
     <p>
      <code>
       [TestFixture]
      </code>
      : 标识测试类。
      <br/>
      <code>
       [SetUp]
      </code>
      : 标识测试用例初始化函数，每个测试用例运行都会执行一次。
      <br/>
      <code>
       [Test]
      </code>
      : 标识测试用例。
      <br/>
      <code>
       [TearDown]
      </code>
      : 标识测试用例资源释放函数。
     </p>
    </blockquote>
    <h5>
     <a id="3_59">
     </a>
     3.运行测试
    </h5>
    <p>
     在菜单栏打开“测试 ——&gt; 窗口 ——&gt; 测试资源管理器”，在测试资源管理器中可以运行所有的测试用例。
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        参考资料
       </strong>
      </em>
     </p>
     <ol>
      <li>
       <a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95" rel="nofollow">
        https://zh.wikipedia.org/wiki/单元测试
       </a>
      </li>
      <li>
       <a href="https://www.cnblogs.com/zwt-blog/p/5788222.html" rel="nofollow">
        https://www.cnblogs.com/zwt-blog/p/5788222.html
       </a>
      </li>
      <li>
       <a href="http://www.51testing.com/html/54/n-3725154.html" rel="nofollow">
        http://www.51testing.com/html/54/n-3725154.html
       </a>
      </li>
      <li>
       <a href="https://github.com/nunit/docs/wiki/NUnit-Documentation">
        https://github.com/nunit/docs/wiki/NUnit-Documentation
       </a>
      </li>
     </ol>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3430363636303238:2f61727469636c652f64657461696c732f3930363438333938" class_="artid" style="display:none">
 </p>
</div>


