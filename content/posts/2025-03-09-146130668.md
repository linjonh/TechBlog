---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323437393432312f:61727469636c652f64657461696c732f313436313330363638"
layout: post
title: "å‰ç«¯-å‘åç«¯ä¼ æ•°æ®,åˆ¤æ–­é—®é¢˜æ‰€åœ¨çš„è°ƒè¯•è¿‡ç¨‹"
date: 2025-03-09 18:06:21 +0800
description: "ç†æ¸…æ¶æ„ï¼švueæ–‡ä»¶ä¸­ï¼ˆç•Œé¢ï¼‰â€”â€”è°ƒç”¨å‡½æ•°jsæ–‡ä»¶ä¸­ï¼ˆapiäº¤äº’ï¼‰â€”â€”å®šä¹‰å‡½æ•°ï¼Œå¹¶å‘åç«¯å‘é€ post è¯·æ±‚nodeåç«¯ä¸­ï¼ˆå¤„ç†ï¼‰â€”â€”æ¥æ”¶ post è¯·æ±‚ï¼Œå¹¶è¿›è¡Œå¤„ç†åœ¨é‡Œè°ƒç”¨saveToFileè¦æ±‚ï¼šè°ƒç”¨çš„ä¼ å…¥çš„æ•°æ®æ˜¯jsä¿®æ”¹ï¼Œåœ¨é‡Œï¼Œå…ˆæ‰“å°textğŸš€texttextfetchè‹¥å‘ç° text çš„æ ¼å¼æ˜¯content:Proxyç”¨é€”ï¼šæŠŠå“åº”å¼æ•°æ® ref([])å³Proxyï¼Œè½¬ä¸ºæ™®é€šæ•°ç»„ã€‚è¿™æ ·æ‰å¯ä»¥è¿›è¡Œè§£æã€‚NetworkNetworkï¼ˆç½‘ç»œï¼‰saveHeadersï¼ˆè¯·æ±‚å¤´ï¼‰"
keywords: "å‰ç«¯ | å‘åç«¯ä¼ æ•°æ®ï¼Œåˆ¤æ–­é—®é¢˜æ‰€åœ¨çš„è°ƒè¯•è¿‡ç¨‹"
categories: ['ç¼–ç¨‹æŠ¥é”™', 'ç¼–ç¨‹ä¸­çš„é”™è¯¯æ€»ç»“', 'Vue']
tags: ['å‰ç«¯', 'Vue', 'Javascript']
artid: "146130668"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146130668
    alt: "å‰ç«¯-å‘åç«¯ä¼ æ•°æ®,åˆ¤æ–­é—®é¢˜æ‰€åœ¨çš„è°ƒè¯•è¿‡ç¨‹"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146130668
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146130668
cover: https://bing.ee123.net/img/rand?artid=146130668
image: https://bing.ee123.net/img/rand?artid=146130668
img: https://bing.ee123.net/img/rand?artid=146130668
---

# å‰ç«¯ | å‘åç«¯ä¼ æ•°æ®ï¼Œåˆ¤æ–­é—®é¢˜æ‰€åœ¨çš„è°ƒè¯•è¿‡ç¨‹

---

ç†æ¸…æ¶æ„ï¼š

vueæ–‡ä»¶ä¸­ï¼ˆç•Œé¢ï¼‰â€”â€”
**è°ƒç”¨**

å‡½æ•°

jsæ–‡ä»¶ä¸­ï¼ˆapiäº¤äº’ï¼‰â€”â€”
**å®šä¹‰**

å‡½æ•°ï¼Œå¹¶å‘åç«¯
**å‘é€ post è¯·æ±‚**

nodeåç«¯ä¸­ï¼ˆå¤„ç†ï¼‰â€”â€”
**æ¥æ”¶ post è¯·æ±‚**

ï¼Œå¹¶è¿›è¡Œ
**å¤„ç†**

### 

---

### **1. åœ¨ vue æ–‡ä»¶ä¸­ï¼Œåœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰ å…ˆæ‰“å°ä¼ å…¥çš„æ•°æ®**

åœ¨
`ChatView.vue`
é‡Œè°ƒç”¨
`saveToFile`
ä¹‹å‰ï¼Œå…ˆæ‰“å°è¦ä¼ å…¥çš„ userMessageÂ çš„æ•°æ®æ ¼å¼ï¼š

```javascript
const sendMessage = async () => {
  
  console.log("è°ƒç”¨ saveToFile ä¹‹å‰ï¼Œç”¨æˆ·è¾“å…¥ï¼š", userMessage); // æŸ¥çœ‹ä¼ å…¥çš„æ•°æ®æ ¼å¼

  await saveToFile(userMessage); // è°ƒç”¨ä¿å­˜å‡½æ•°
}
```

è¦æ±‚ï¼šè°ƒç”¨çš„ä¼ å…¥çš„æ•°æ®æ˜¯

---

### **2. åœ¨ `js` æ–‡ä»¶ä¸­ï¼Œæ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®**

ä¿®æ”¹
`deepseek.js`
ï¼Œåœ¨
`saveToFile()`
é‡Œï¼Œå…ˆæ‰“å°
`text`
çš„å†…å®¹ä»¥åŠç±»å‹ ç”¨äºåˆ¤æ–­æ¥å—åˆ°çš„æ•°æ®ï¼š

```javascript
export const saveToFile = async (text) => {
  console.log("deepseek.js æ”¶åˆ°çš„ text:", text); // ç¡®ä¿æ•°æ®ä¼ é€’æ­£ç¡®
  console.log("text çš„ç±»å‹:", typeof text); // ç¡®ä¿æ˜¯å­—ç¬¦ä¸²

  try {
    const response = await fetch("http://localhost:3000/save", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ content: text }), // å‘é€ JSON æ ¼å¼æ•°æ®
    });

    console.log("è¯·æ±‚è¿”å› response:", response); // æŸ¥çœ‹è¯·æ±‚ç»“æœ

    if (!response.ok) {
      throw new Error("æœåŠ¡å™¨è¿”å›é”™è¯¯ï¼š" + response.status);
    }

    console.log("ä¿å­˜æˆåŠŸ");
  } catch (error) {
    console.error("å­˜æ¡£å¤±è´¥:", error);
  }
};

```

ğŸš€
**ä½œç”¨**
ï¼š

* ç¡®ä¿
  `text`
  çš„æ•°æ®æ ¼å¼æ­£ç¡®ã€‚
* `console.log("text çš„ç±»å‹:", typeof text);`
  **ç¡®ä¿
  `text`
  æ˜¯å­—ç¬¦ä¸²**
  ã€‚
* `console.log("è¯·æ±‚è¿”å› response:", response);`
  æŸ¥çœ‹
  `fetch`
  è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚

> è‹¥å‘ç° text çš„æ ¼å¼æ˜¯
> **content:
> Proxy**
> ï¼Œåˆ™åœ¨console.logä¹‹å‰æ·»åŠ ï¼š
>
> ```javascript
> // è§£æcontentArrayä¸ºæ–‡æœ¬æ ¼å¼ â€”â€”> æŠŠå“åº”å¼æ•°æ® ref([])å³Proxy è½¬ä¸ºæ™®é€šæ•°ç»„
>
> Â  Â  const normalArray = JSON.parse(JSON.stringify(contentArray.value || contentArray));
> Â  Â  const text = JSON.stringify({ content: normalArray });
> ```
>
> ç”¨é€”ï¼š
>
> æŠŠå“åº”å¼æ•°æ® ref([])å³Proxyï¼Œè½¬ä¸ºæ™®é€šæ•°ç»„
> ã€‚è¿™æ ·æ‰å¯ä»¥è¿›è¡Œè§£æã€‚
>
> ä»£ç å¦‚å›¾ï¼š
>
> ![](https://i-blog.csdnimg.cn/direct/26ac095242f44471bef04b81749a139d.png)

> **çŸ¥è¯†ç‚¹ï¼š**
>
> **JSON.stringify() â€”â€” å¯¹è±¡â†’jsonå­—ç¬¦ä¸²**
>
> **JSON.parse() â€”â€” jsonå­—ç¬¦ä¸²â†’jså¯¹è±¡**

---

### **3. åœ¨æµè§ˆå™¨ `Network` é¢æ¿æŸ¥çœ‹è¯·æ±‚æ•°æ®**

1. æ‰“å¼€
   **æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12 æˆ– Ctrl+Shift+Iï¼‰**
2. åˆ‡æ¢åˆ°
   **Networkï¼ˆç½‘ç»œï¼‰**
   é¢æ¿
3. æ‰¾åˆ°
   `save`
   è¯·æ±‚ï¼Œç‚¹å‡»åæŸ¥çœ‹ï¼š
   * **Headersï¼ˆè¯·æ±‚å¤´ï¼‰**
     â†’ ç¡®ä¿

     `Content-Type: application/json`
   * **Request Payloadï¼ˆè¯·æ±‚æ•°æ®ï¼‰**
     â†’
     ç¡®ä¿
     `body`

     é‡Œæ˜¯
     `{ "content": "ä½ çš„æ•°æ®" }`

---

### **4. åœ¨ `server.js` ä¸­æŸ¥çœ‹è¯·æ±‚æ•°æ®**

ä¿®æ”¹
`server.js`
ï¼Œåœ¨
`POST /save`
é‡Œæ‰“å°æ”¶åˆ°çš„æ•°æ®ï¼š

```javascript
const express = require("express");
const cors = require("cors");
const fs = require("fs");

const app = express();
app.use(cors());
app.use(express.json()); // ç¡®ä¿èƒ½è§£æ JSON æ•°æ®

app.post("/save", (req, res) => {
  console.log("åç«¯æ¥æ”¶åˆ°çš„æ•°æ®:", req.body); // æ‰“å°è¯·æ±‚å†…å®¹

  const content = req.body.content;
  console.log("æ ¼å¼åŒ–åçš„ content:", content); // ç¡®ä¿æ˜¯å­—ç¬¦ä¸²

  fs.appendFile("conversation.txt", content + "\n", (err) => {
    if (err) {
      console.error("å†™å…¥æ–‡ä»¶å¤±è´¥:", err);
      return res.status(500).json({ error: "å†™å…¥å¤±è´¥" });
    }
    res.json({ message: "å†™å…¥æˆåŠŸ" });
  });
});

app.listen(3000, () => {
  console.log("æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000");
});

```

ğŸš€
**ä½œç”¨**
ï¼š

* `console.log(
  "åç«¯æ¥æ”¶åˆ°çš„æ•°æ®:
  ", req.body)
  ;`
  ç¡®ä¿å‰ç«¯ä¼ é€’çš„ JSON æ ¼å¼æ­£ç¡®ã€‚
* `console.log("æ ¼å¼åŒ–åçš„ content:", content)
  ;`
  ç¡®ä¿
  **`content`
  æ˜¯å­—ç¬¦ä¸²**
  ã€‚
* `fs.appendFile`
  æŠŠ
  `content`
  è¿½åŠ å†™å…¥
  `conversation.txt`
  ï¼Œæ¯æ¡ä¿¡æ¯æ¢è¡Œå­˜å‚¨ã€‚

---

### **5. ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®**

å¦‚æœ
`deepseek.jsï¼ˆapiäº¤äº’çš„jsï¼‰`
é‡Œ
`console.log("text ç±»å‹:", typeof text);`


å‘ç°
`text`
ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥ç”¨ï¼š

```javascript
const textString = JSON.stringify(text, null, 2);  // æ ¼å¼åŒ– JSON
console.log("æ ¼å¼åŒ–åçš„ text:", textString);

```

è¿™æ ·ä½ å¯ä»¥æ›´å®¹æ˜“å‘ç°é—®é¢˜ã€‚

> ### **`çŸ¥è¯†ç‚¹ï¼š JSON.stringify(req.body, null, 2)`**
>
> **`JSON.stringify(req.bodyï¼‰å¯¹è±¡â†’jsonå­—ç¬¦ä¸²`**
>
> **`JSON.stringify(req.body, null, 2)`**
> æ˜¯ä¸€ä¸ªå¸¸è§çš„ JavaScript ä»£ç ç‰‡æ®µï¼Œä¸»è¦ç”¨äºå°†å¯¹è±¡
> `req.body`
> **åºåˆ—åŒ–ä¸ºæ ¼å¼åŒ–çš„ JSON å­—ç¬¦ä¸²**
> ï¼Œä¾¿äºäººç±»é˜…è¯»æˆ–è°ƒè¯•ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š
>
> ---
>
> #### **1. ä»£ç ç»“æ„**
>
> ```
> JSON.stringify(value, replacer, space)
> ```
>
> * **`value`**
>   : éœ€
>   **è¦åºåˆ—åŒ–çš„å¯¹è±¡**
>   ï¼ˆè¿™é‡Œæ˜¯
>   `req.body`
>   ï¼Œé€šå¸¸æ¥è‡ª HTTP è¯·æ±‚çš„è¯·æ±‚ä½“ï¼Œå¦‚ POST/PUT è¯·æ±‚çš„ JSON æ•°æ®ï¼‰ã€‚
> * **`replacer`**
>   : å¯é€‰å‚æ•°ï¼Œç”¨äº
>   **è¿‡æ»¤æˆ–è½¬æ¢**
>   å±æ€§ã€‚æ­¤å¤„è®¾ä¸º
>   `null`
>   ï¼Œè¡¨ç¤ºä¸è¿›è¡Œè¿‡æ»¤æˆ–ä¿®æ”¹ã€‚
> * **`space`**
>   : å¯é€‰å‚æ•°ï¼ŒæŒ‡å®š
>   **ç¼©è¿›çš„ç©ºæ ¼æ•°æˆ–å­—ç¬¦ä¸²**
>   ã€‚æ­¤å¤„è®¾ä¸º
>   `2`
>   ï¼Œè¡¨ç¤ºç”¨
>   **2 ä¸ªç©ºæ ¼**
>   ç¼©è¿›æ ¼å¼åŒ–è¾“å‡ºã€‚
>
> ---
>
> #### **2. ä½œç”¨**
>
> ##### **æ ¸å¿ƒåŠŸèƒ½**
>
> * å°†
>   `req.body`
>   ï¼ˆé€šå¸¸æ˜¯ JavaScript å¯¹è±¡ï¼‰è½¬æ¢ä¸º
>   **æ ¼å¼åŒ–çš„ JSON å­—ç¬¦ä¸²**
>   ã€‚
> * ä¾‹å¦‚ï¼ŒåŸå§‹å¯¹è±¡ï¼š
>
>   ```
>   { name: "Alice", age: 30, address: { city: "Shanghai" } }
>   ```
>
>   ä¼šè¢«è½¬æ¢ä¸ºï¼š
>
>   ```
>   {
>     "name": "Alice",
>     "age": 30,
>     "address": {
>       "city": "Shanghai"
>     }
>   }
>   ```
>
> ##### **å…³é”®ç‰¹ç‚¹**
>
> 1. **ç¾åŒ–è¾“å‡º**
>    ï¼ˆPretty-Printï¼‰:
>
>    * `space: 2`
>      ä¼šä¸º JSON å­—ç¬¦ä¸²æ·»åŠ æ¢è¡Œå’Œç¼©è¿›ï¼ˆ2 ä¸ªç©ºæ ¼ï¼‰ï¼Œä½¿æ•°æ®ç»“æ„æ›´æ¸…æ™°ã€‚
>    * é€‚åˆæ—¥å¿—è®°å½•ã€è°ƒè¯•è¾“å‡ºæˆ–ç›´æ¥å±•ç¤ºç»™ç”¨æˆ·ã€‚
> 2. **ä¿ç•™å®Œæ•´æ•°æ®**
>    ï¼ˆä¸è¿‡æ»¤ï¼‰:
>
>    * `replacer: null`
>      è¡¨ç¤ºä¸ä¿®æ”¹æˆ–è¿‡æ»¤ä»»ä½•å±æ€§ï¼Œæ‰€æœ‰å¯åºåˆ—åŒ–çš„å±æ€§éƒ½ä¼šè¢«ä¿ç•™ã€‚
> 3. **å…¼å®¹æ€§**
>    :
>
>    * è‡ªåŠ¨å¤„ç†
>      `Date`
>      ã€
>      `undefined`
>      ã€
>      `å‡½æ•°`
>      ç­‰ç±»å‹ï¼ˆéµå¾ª
>      `JSON.stringify`
>      çš„é»˜è®¤è§„åˆ™ï¼‰ã€‚
>
> ---
>
> #### **3. å…¸å‹ä½¿ç”¨åœºæ™¯**
>
> ##### **(1) æ—¥å¿—è®°å½•**
>
> å°†è¯·æ±‚ä½“å†…å®¹è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶æˆ–æ§åˆ¶å°ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜ï¼š
>
> ```
> console.log(JSON.stringify(req.body, null, 2));
> // è¾“å‡ºï¼š
> // {
> //   "username": "alice",
> //   "action": "login"
> // }
> ```
>
> ##### **(2) API å“åº”**
>
> å‘å®¢æˆ·ç«¯è¿”å›æ ¼å¼åŒ–çš„ JSON æ•°æ®ï¼ˆå¦‚è°ƒè¯•æ¥å£æ—¶ï¼‰ï¼š
>
> ```
> res.send(JSON.stringify(req.body, null, 2));
> ```
>
> ##### **(3) å­˜å‚¨æ•°æ®**
>
> å°†è¯·æ±‚ä½“ä¿å­˜åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“ï¼ˆæ ¼å¼åŒ–çš„ JSON æ›´æ˜“ç»´æŠ¤ï¼‰ï¼š
>
> ```
> fs.writeFileSync("request.json", JSON.stringify(req.body, null, 2));
> ```

---

### ä¾‹å­â€”â€”æ§åˆ¶å°çš„æ˜¾ç¤º

![](https://i-blog.csdnimg.cn/direct/a944b6450ea4437b91010ea4fd5306f9.png)

---

### **æœ€ç»ˆæ£€æŸ¥ç‚¹**

* **ChatView.vue**
  â†’
  `console.log`

  ç¡®ä¿
  `saveToFile`
  ä¼ å…¥æ­£ç¡®çš„å†…å®¹ã€‚
* **deepseek.js**
  â†’

  `console.log`

  ç¡®ä¿
  `text`

  æ˜¯å­—ç¬¦ä¸²
  ï¼Œå¹¶æ‰“å°
  `fetch`
  è¯·æ±‚çš„
  `response`
  ã€‚
* **Network é¢æ¿**

  â†’ æ£€æŸ¥è¯·æ±‚
  `Headers`

  å’Œ
  `Request Payload`
  ï¼Œç¡®ä¿æ ¼å¼æ­£ç¡®ã€‚
* **server.js**
  â†’
  `console.log`

  ç¡®ä¿åç«¯æ”¶åˆ°çš„ JSON æ­£ç¡®
  ï¼Œ
  `fs.appendFile`
  æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚

---

âœ… è¿™æ ·ï¼Œä½ å°±å¯ä»¥å®Œæ•´è·Ÿè¸ª Vue ç»„ä»¶ã€deepseek.jsã€fetch è¯·æ±‚ã€server.js ä¹‹é—´çš„æ•°æ®æµï¼Œå¹¶æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼ ğŸš€

ä¸»è¦æ˜¯é€šè¿‡
**è¾“å‡ºå’Œæ£€æŸ¥networké¢æ¿**
è¿›è¡Œè°ƒè¯•ï¼ŒæŸ¥çœ‹
**æ§åˆ¶å°ç»“æœå’Œnodeç»ˆç«¯çš„ç»“æœ**
ï¼Œæ¥ä¿®æ”¹ä»£ç ï¼Œæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚