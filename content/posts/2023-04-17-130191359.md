---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34363338323134312f:61727469636c652f64657461696c732f313330313931333539"
layout: post
title: "å¾®ä¿¡å°ç¨‹åº-eval-æ›¿ä»£æ•°å­¦è¿ç®—æ”¯æŒå°æ•°ç‚¹,æ”¯æŒuniapp,æœ€æ–°å®Œå…¨å¯ç”¨ç‰ˆ"
date: 2023-04-17 01:34:50 +08:00
description: "æœ€è¿‘æœ‰ä¸ªå¼€å‘è®¡ç®—å™¨çš„éœ€æ±‚ï¼Œæƒ³ç€ç”¨evalå¾ˆæ–¹ä¾¿        =ï¼Œ=        å°ç¨‹åºè¿˜ç»™ç¦ç”¨äº†"
keywords: "å°ç¨‹åº eval"
categories: ['æœªåˆ†ç±»']
tags: ['å¾®ä¿¡å°ç¨‹åº', 'å°ç¨‹åº', 'App']
artid: "130191359"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=130191359
  alt: "å¾®ä¿¡å°ç¨‹åº-eval-æ›¿ä»£æ•°å­¦è¿ç®—æ”¯æŒå°æ•°ç‚¹,æ”¯æŒuniapp,æœ€æ–°å®Œå…¨å¯ç”¨ç‰ˆ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=130191359
featuredImagePreview: https://bing.ee123.net/img/rand?artid=130191359
---

# å¾®ä¿¡å°ç¨‹åº eval æ›¿ä»£ï¼ˆæ•°å­¦è¿ç®—ï¼‰æ”¯æŒå°æ•°ç‚¹ï¼Œæ”¯æŒuniappï¼Œæœ€æ–°å®Œå…¨å¯ç”¨ç‰ˆï¼

æœ€è¿‘æœ‰ä¸ªå¼€å‘è®¡ç®—å™¨çš„éœ€æ±‚ï¼Œæƒ³ç€ç”¨evalå¾ˆæ–¹ä¾¿Â Â Â Â Â Â Â Â =ï¼Œ=Â  Â  Â  Â  å°ç¨‹åºè¿˜ç»™ç¦ç”¨äº†ã€‚

åŽ»ç½‘ä¸ŠåŽ»æœ æ²¡æœ‰æ‰¾åˆ°å¥½ç”¨çš„è§£å†³åŠžæ³•ï¼ˆeval5 å¤ªå¤§äº†ï¼Œä¸ä¼˜é›…ï¼‰ã€‚çªç„¶æƒ³åˆ°åœ¨å¤§ä¸€çœ‹ç®—æ³•ä¹¦æ—¶ æœ‰ä¸€ä¸ªå®žçŽ°è®¡ç®—æœºçš„ä¾‹å­ è¯ä¸å¤šè¯´ä¸Šä»£ç Â  ï¼šï¼‰

GitHubåœ°å€ ï¼š
[https://github.com/hzbnb/eval-math](https://github.com/hzbnb/eval-math "https://github.com/hzbnb/eval-math")
( ç‚¹ä¸ªstar æ–¹ä¾¿ä»¥åŽæ‰¾åˆ°å­¦ä¹ ï½ž ðŸ˜

çº¯jså®žçŽ°å…¼å®¹æ€§æžå¼º æ”¯æŒå„è·¨å¹³å°æ¡†æž¶ ï¼ˆuniapp ï¼Œç­‰ï¼‰

#### ä½¿ç”¨æ–¹æ³•ï¼š

```javascript
	import {evalMath} from "./eval-math.js";
    
    evalMath("(1.5+1)*2*4"); // 20
```

#### æ ¸å¿ƒä»£ç ï¼š

```javascript
export const evalMath = (expression)=> {
    // å°†è¡¨è¾¾å¼è½¬æ¢ä¸ºæ ‡è®°æ•°ç»„
    const tokens = expression.match(/[+\-*/()]|[-+]?(\d+(\d*)?|\d+)/g);

    // å®šä¹‰æ“ä½œæ•°å’Œæ“ä½œç¬¦çš„å †æ ˆ
    const operands = [];
    const operators = [];

    // å®šä¹‰ä¼˜å…ˆçº§æ˜ å°„
    const precedence = {
        "+": 1,
        "-": 1,
        "*": 2,
        "/": 2,
    };

    // å¤„ç†æ¯ä¸ªæ ‡è®°
    for (const token of tokens) {
        if (/^[\d]+$/.test(token)) {
            // å¦‚æžœæ ‡è®°æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå°†å…¶ä½œä¸ºæ“ä½œæ•°åŽ‹å…¥å †æ ˆ
            operands.push(Number(token));
        } else if (/^[+\-*/]$/.test(token)) {
            // å¦‚æžœæ ‡è®°æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå°†å…¶ä¸Žå †æ ˆä¸­çš„æ“ä½œç¬¦è¿›è¡Œæ¯”è¾ƒï¼Œ
            // å¹¶æ ¹æ®ä¼˜å…ˆçº§å°†æ“ä½œç¬¦å¼¹å‡ºå¹¶åº”ç”¨äºŽæ“ä½œæ•°
            while (
                operators.length > 0 &&
                precedence[operators[operators.length - 1]] >= precedence[token]
            ) {
                const operator = operators.pop();
                const operand2 = operands.pop();
                const operand1 = operands.pop();
                operands.push(applyOperator(operand1, operand2, operator));
            }
            operators.push(token);
        } else if (token === "(") {
            // å¦‚æžœæ ‡è®°æ˜¯å·¦æ‹¬å·ï¼Œå°†å…¶åŽ‹å…¥æ“ä½œç¬¦å †æ ˆ
            operators.push(token);
        } else if (token === ")") {
            // å¦‚æžœæ ‡è®°æ˜¯å³æ‹¬å·ï¼Œå°†å †æ ˆä¸­çš„æ“ä½œç¬¦å¼¹å‡ºå¹¶åº”ç”¨äºŽæ“ä½œæ•°ï¼Œç›´åˆ°æ‰¾åˆ°å·¦æ‹¬å·ä¸ºæ­¢
            while (operators[operators.length - 1] !== "(") {
                const operator = operators.pop();
                const operand2 = operands.pop();
                const operand1 = operands.pop();
                operands.push(applyOperator(operand1, operand2, operator));
            }
            operators.pop(); // å¼¹å‡ºå·¦æ‹¬å·
        }
    }

    // å¤„ç†å †æ ˆä¸­å‰©ä½™çš„æ“ä½œç¬¦
    while (operators.length > 0) {
        const operator = operators.pop();
        const operand2 = operands.pop();
        const operand1 = operands.pop();
        operands.push(applyOperator(operand1, operand2, operator));
    }

    // è¿”å›žæœ€ç»ˆç»“æžœ
    return operands[0];

}

function applyOperator(operand1, operand2, operator) {
switch (operator) {
case "+":
return operand1 + operand2;
case "-":
return operand1 - operand2;
case "_":
return operand1 _ operand2;
case "/":
return operand1 / operand2;
}
}

// ä½¿ç”¨ç¤ºä¾‹
// console.log(evalMath("(1.5+1)*2*4"));

```

####