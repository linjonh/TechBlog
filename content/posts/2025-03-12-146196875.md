---
layout: post
title: "sap-webapi接口"
date: 2025-03-12 09:46:00 +0800
description: "webapi"
keywords: "sap webapi接口"
categories: ['未分类']
tags: ['开发语言', 'Lua']
artid: "146196875"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146196875
    alt: "sap-webapi接口"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146196875
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146196875
cover: https://bing.ee123.net/img/rand?artid=146196875
image: https://bing.ee123.net/img/rand?artid=146196875
img: https://bing.ee123.net/img/rand?artid=146196875
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     sap webapi接口
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-left:0; margin-right:0">
     接到任务说学一下创建api接口，所以记录一下
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="118" src="https://i-blog.csdnimg.cn/direct/a9d034285bd34d7185d479c62b8b7bf5.png" width="117"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     web api的概念：
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="177" src="https://i-blog.csdnimg.cn/direct/a0f10e416ec64b408ee1b57427588d79.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     调用外部web api还没弄，到时再说，这次只记录SAP 发布web api
    </p>
    <p style="margin-left:0; margin-right:0">
     事务码 se24 创建类
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="201" src="https://i-blog.csdnimg.cn/direct/555b8ede4b8d40a18c975ab32bcfa3fa.png" width="453"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="354" src="https://i-blog.csdnimg.cn/direct/e1acb6b9e52d43828fb59bf21a5a8ea7.png" width="402"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     在INTERFACE中输入IF_HTTP_EXTENSION
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="153" src="https://i-blog.csdnimg.cn/direct/24b8f41b33dc4bdab1173f99b2011f80.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     在methods输入 GET和POST
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="165" src="https://i-blog.csdnimg.cn/direct/24994ede55144d78b4ebebf74b6b9f23.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     双击第一栏的IF_HTTP_EXTENSION~HANDLE_REQUEST，进入代码编辑页面
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="188" src="https://i-blog.csdnimg.cn/direct/bacb26a52b064d6cbf364e9a51aee50c.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     输入自己编辑的代码，
    </p>
    <p style="margin-left:0; margin-right:0">
     METHOD if_http_extension~handle_request.
     <br/>
     DATA: lv_method TYPE string.
     <em>
      "
     </em>
     <em>
      显式声明变量
     </em>
     <br/>
     lv_method = server-&gt;request-&gt;get_method( ).
     <em>
      "
     </em>
     <em>
      赋值操作
     </em>
     <br/>
     <br/>
     CASE lv_method.
     <br/>
     <br/>
     WHEN 'GET'.
     <br/>
     me-&gt;get( server ).
     <br/>
     <br/>
     WHEN 'POST'.
     <br/>
     me-&gt;post( server ).
     <br/>
     <br/>
     WHEN OTHERS.
     <br/>
     server-&gt;response-&gt;set_status( code = 405 reason = '请求方法不支持请联系管理员' ).
     <br/>
     <br/>
     ENDCASE.
     <br/>
     <br/>
     <em>
      * lv_verb is http method such as GET, POST etc
     </em>
     <br/>
     DATA lv_verb TYPE string .
     <br/>
     DATA lv_json TYPE string .
     <br/>
     <br/>
     lv_json = '{"value": [{"ID": 0,"Name": "Food"},{"ID": 1, "Name": "Beverages"}, {"ID": 2, "Name": "Electronics"}]}'.
     <br/>
     <br/>
     <em>
      * Only handles GET method
     </em>
     <br/>
     lv_verb = server-&gt;request-&gt;get_header_field( name = '~request_method' ).
     <br/>
     <br/>
     CHECK lv_verb = 'GET'.
     <br/>
     server-&gt;response-&gt;set_status( code = 200 reason = 'Ok' ).
     <br/>
     server-&gt;response-&gt;set_content_type( 'application/json' ).
     <br/>
     server-&gt;response-&gt;set_cdata( data = lv_json ).
     <br/>
     ENDMETHOD.
    </p>
    <p style="margin-left:0; margin-right:0">
     这里不编写代码的话之后测试接口会报错
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="154" src="https://i-blog.csdnimg.cn/direct/aa09e10157d64472b15235c1d7e18d57.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     选择第二栏的get，再点击parameters，加上server
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="179" src="https://i-blog.csdnimg.cn/direct/43579ce2dfd2408f83072a308da505f2.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="125" src="https://i-blog.csdnimg.cn/direct/6ee0ff13058d4b5abc77a4c1269bec3a.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     同样的步骤给post也加上
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="153" src="https://i-blog.csdnimg.cn/direct/1dc7d49efbfe40a4bea5e4cd3ad78174.png" width="553"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     不然会之前程序那里会报错
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="56" src="https://i-blog.csdnimg.cn/direct/0a767002a56e41a8b4958320b364bf2d.png" width="579"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     点击保存后激活
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="26" src="https://i-blog.csdnimg.cn/direct/a56a4a9d43dc42868dfec8562f1efacf.png" width="89"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     事务码SICF
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="243" src="https://i-blog.csdnimg.cn/direct/98d9f0b4de614e47a177d4b6170cf085.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     创建服务并激活
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="55" src="https://i-blog.csdnimg.cn/direct/8865ef532164479aacab3a2ff1eadbf5.png" width="449"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="312" src="https://i-blog.csdnimg.cn/direct/bdfd3d5344b74c9992c3ff0d5e42185a.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     填写描述
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="124" src="https://i-blog.csdnimg.cn/direct/e1b86286704f470caf0eb813367cfebf.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     输入登录数据，如果不维护，系统对接则需要传入这些数据
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="146" src="https://i-blog.csdnimg.cn/direct/5f7a9566d429411087b49e9e55005c97.png" width="375"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     在处理器清单这填写刚刚创建的类
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="148" src="https://i-blog.csdnimg.cn/direct/ca14495d49344e3abc5e3e7c3e68a33f.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     点击保存，回到刚刚的页面
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="25" src="https://i-blog.csdnimg.cn/direct/f359221450ed439190643829d951b350.png" width="86"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     激活服务
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="193" src="https://i-blog.csdnimg.cn/direct/7b3fbf4674654ff5a80dc89a20a69159.png" width="330"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     测试服务
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="204" src="https://i-blog.csdnimg.cn/direct/ea864987ddfc465eafdca9c7400f5bdd.png" width="340"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     数据就这么水灵灵地出来了
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="100" src="https://i-blog.csdnimg.cn/direct/b5fcee61ff5d43b4a0e3670be1b211d8.png" width="554"/>
    </p>
    <p style="margin-left:0; margin-right:0">
     注：注意传参是parameters 还是body，SAP目前是在parameters。如果想放在body，还需要测试
    </p>
    <p style="margin-left:0; margin-right:0">
     注：可参考生产系统的类ZCL_REST_IF_SD02
    </p>
    <p style="margin-left:0; margin-right:0">
     注：测试软件Postman
    </p>
    <p style="margin-left:0; margin-right:0">
     <img alt="" height="121" src="https://i-blog.csdnimg.cn/direct/9415de8ae03845c5a7012061bd1475bc.png" width="119"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f6d697261636c656d6f6f6e6279756c2f:61727469636c652f64657461696c732f313436313936383735" class_="artid" style="display:none">
 </p>
</div>


