---
layout: post
title: "华为设备接口配置和管理"
date: 2025-09-09T19:44:41+0800
description: "2、自动协商，有三种工作模式，全双工（同一时间能双向传输数据），半双工（同一时间只能单向传输数据），自动协商的双工模式（网络设备通过协议自动检测，协商最优秀的全双工模式）二层的Eth-trunk和三层的Eth-Trunk具体的区别是三层的上面可以配置ip地址实现三层通信，二层不能配置IP地址。二层的端口聚合是指交换机和交换机之间做的端口聚合，同时交换机和路由器之间也可以创建二层端口聚合。端口聚合将两个端口划分为一个逻辑端口，这样能突破端口的限制，增加冗余备份。端口聚合分为二层的端口聚合和三层的端口聚合。"
keywords: "华为设备接口配置和管理"
categories: ['未分类']
tags: ['网络']
artid: "151369031"
arturl: "https://blog.csdn.net/qinfengbanjiu/article/details/151369031"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151369031
    alt: "华为设备接口配置和管理"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151369031
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151369031
cover: https://bing.ee123.net/img/rand?artid=151369031
image: https://bing.ee123.net/img/rand?artid=151369031
img: https://bing.ee123.net/img/rand?artid=151369031
---



# 华为设备接口配置和管理

combo接口

一般的交换机和路由器上面使用的都是combo接口

1、是一个复合端口，有光接口还有电接口，

2、自动协商，有三种工作模式，全双工（同一时间能双向传输数据），半双工（同一时间只能单向传输数据），自动协商的双工模式（网络设备通过协议自动检测，协商最优秀的全双工模式）

交换机端口模式

三层交换机端口默认是二层的，如果想要把这个二层的接口变成三层的，要在命令行中输入 no switchport

网络接口也能按照速率来划分

**1****：Ethernet（以太网）：10M端口速率传输  RJ45双绞线    简写为e**

**2****：FastEthernet（快速以太网）100M速率传输  RJ45双绞线  简写为Fa**

**3****：GigbitEthernet（千兆以太网）1000M速率传输 RJ45接口/SPF接口  简写为G**

**4****：10GigbitEthernet（万兆以太网）10000M速率传输 SPF+接口  简写为10G**

**5****：40GigbitEthernet（万兆以太网）40000M速率传输 40GSPF+接口  简写为40G**

**6****：100GigbitEthernet（万兆以太网）100000M速率传输100GSPF+接口  简写为100G**

华为的端口聚合（EthTrunking）

端口聚合将两个端口划分为一个逻辑端口，这样能突破端口的限制，增加冗余备份

端口聚合的分类

端口聚合分为二层的端口聚合和三层的端口聚合

二层的端口聚合是指交换机和交换机之间做的端口聚合，同时交换机和路由器之间也可以创建二层端口聚合

三层的端口聚合指的是路由器和路由器之间创建Eth-trunk

二层的Eth-trunk和三层的Eth-Trunk具体的区别是三层的上面可以配置ip地址实现三层通信，二层不能配置IP地址

Eth-Trunk 可以实现m根链路传输流量，n根链路做备份

Eth-Trunk最大支持8根物理链路

链路聚合使用的是lacp协议

lacp静态协商的二层Eth-Trunk的配置命令

Lacb 链路集合控制协议**（link aggregation control protocoal）这是链路集合的通用协议，任何一个厂商都支持这个协议**

另外还有一个协议pagp（port aggergation control protocal）端口聚合协议，这是思科自己的私有协议

```

1.创建虚拟的eth-trunk
[LSW1]interface eth-trunk 1
防止环路
[LSW1-Eth-Trunk1]bpdu enable
确定接口模式
[LSW1-Eth-Trunk1]mode lacp-static
2.把物理接口加入到eth-trunk虚拟接口中
[LSW1]interface e0/0/3
[LSW1-Ethernet0/0/3]Eth-trunk 1
3.查看eth-trunk逻辑接口中是否有物理接口
Dis eth-trunk 1

```

设置m根流量n根链路做备份

```

1.接下来调低sw1的优先级，默认优先级为32768，现在调为100，目的让交换机1成为主设备0 
[LSW1]lacp priority 100
这样lsw1就成为了主设备
[LSW1-Eth-Trunk1]int eth-trunk 1
[LSW1-Eth-Trunk1]max active-linknumber 2
查看端口中每一个eth-trunk状态，查看eth-trunk成员
[LSW1]display trunkmembership eth-trunk 1
```

故障排查

**1.****使用两台pc机连续ping**

**PC>ping 192.168.1.20 -t**

**2.****然后将其中一个端口关掉**

**3.****看丢包**

**4.****使用命令查看端口状态**

**[LSW1]display trunkmembership eth-trunk 1**

**5.****现在将被关闭的端口激活，发现他仍然没有被选中**

**6.****只有在两个端口有一个down掉的情况下，才被选中**



