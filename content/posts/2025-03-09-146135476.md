---
layout: post
title: "Python实现网络通信Socket模块与TCPIP协议全解析"
date: 2025-03-09 17:39:43 +0800
description: "在互联网时代，网络编程是每个开发者都值得掌握的核心技能之一。从网页浏览到即时聊天，再到物联网设备之间的通信，网络编程无处不在。作为Python学习旅程的第23天，我们将迈入网络编程的世界，探索其基础知识。本文将从TCP/IP协议的基本概念讲起，逐步深入到使用Python的socket模块实现网络通信，并通过实际代码带你编写客户端和服务器端程序。无论你是初学者还是有一定经验的开发者，这篇文章都将为你提供清晰的知识框架和实用的代码示例。让我们一起开启这场网络编程的探索之旅吧！"
keywords: "Python实现网络通信：Socket模块与TCP/IP协议全解析"
categories: ['Python']
tags: ['网络', '编程', '开发语言', '人工智能', 'Tcp', 'Socket', 'Python']
artid: "146135476"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146135476
    alt: "Python实现网络通信Socket模块与TCPIP协议全解析"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146135476
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146135476
cover: https://bing.ee123.net/img/rand?artid=146135476
image: https://bing.ee123.net/img/rand?artid=146135476
img: https://bing.ee123.net/img/rand?artid=146135476
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Python实现网络通信：Socket模块与TCP/IP协议全解析
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="Langchain_2">
     </a>
     Langchain系列文章目录
    </h2>
    <p>
     <a href="https://blog.csdn.net/Kiradzy/article/details/144973054?spm=1001.2014.3001.5501">
      01-玩转LangChain：从模型调用到Prompt模板与输出解析的完整指南
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145063066?spm=1001.2014.3001.5501">
      02-玩转 LangChain Memory 模块：四种记忆类型详解及应用场景全覆盖
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145143465">
      03-全面掌握 LangChain：从核心链条构建到动态任务分配的实战指南
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145277111?spm=1001.2014.3001.5501">
      04-玩转 LangChain：从文档加载到高效问答系统构建的全程实战
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145383291?spm=1001.2014.3001.5501">
      05-玩转 LangChain：深度评估问答系统的三种高效方法（示例生成、手动评估与LLM辅助评估）
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145438477">
      06-从 0 到 1 掌握 LangChain Agents：自定义工具 + LLM 打造智能工作流！
     </a>
    </p>
    <h2>
     <a id="python_11">
     </a>
     python系列文章目录
    </h2>
    <p>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145869326">
      01-Python 基础语法入门：从变量到输入输出，零基础也能学会！
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145883474?spm=1001.2014.3001.5501">
      02-Python 流程控制终极指南：if-else 和 for-while深度解析
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145897303?spm=1001.2014.3001.5501">
      03-Python 列表与元组全攻略：从新手到高手的必备指南
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145911256?spm=1001.2014.3001.5501">
      04-Python 字典与集合：从入门到精通的全面解析
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145912222?spm=1001.2014.3001.5501">
      05-Python函数入门指南：从定义到应用
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145912299?spm=1001.2014.3001.5501">
      06-Python 函数高级特性：从默认参数到闭包的全面解析
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145912540?spm=1001.2014.3001.5501">
      07-Python 模块与包：从零到自定义的全面指南
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145912631?spm=1001.2014.3001.5501">
      08-Python异常处理：从入门到精通的实用指南
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145912684?spm=1001.2014.3001.5501">
      09-Python 文件操作：从零基础到日志记录实战
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145912832?spm=1001.2014.3001.5501">
      10-Python面向对象编程入门：从类与对象到方法与属性
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145913015?spm=1001.2014.3001.5501">
      11-Python类的方法与属性：从入门到进阶的全面解析
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145913149?spm=1001.2014.3001.5501">
      12-Python继承与多态：提升代码复用与灵活性的关键技术
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145913244?spm=1001.2014.3001.5501">
      13-掌握Python魔法方法：如何用__add__和__len__自定义类的行为
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/145913392?spm=1001.2014.3001.5501">
      14-python面向对象编程总结：从基础到进阶的 OOP 核心思想与设计技巧
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146039792?spm=1001.2014.3001.5501">
      15-掌握 Python 高级特性：深入理解迭代器与生成器
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146060307?spm=1001.2014.3001.5501">
      16-用 Python 装饰器提升效率：日志与权限验证案例
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146077987?spm=1001.2014.3001.5501">
      17-再也不怕资源泄漏！Python 上下文管理器，with语句全攻略
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146086075?spm=1001.2014.3001.5501">
      18-Python 标准库必备模块：math、random、os、json 全解析
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146098727?spm=1001.2014.3001.5501">
      19-Python 性能优化：从入门到精通的实用指南
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146099184?spm=1001.2014.3001.5501">
      20-Python内存管理与垃圾回收全解析
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146113626?spm=1001.2014.3001.5501">
      21-Python 代码调试与测试：从 pdb 到 TDD 的全面指南
     </a>
     <br/>
     <a href="https://blog.csdn.net/Kiradzy/article/details/146128015?spm=1001.2014.3001.5501">
      22-Python 代码风格终极指南：从 PEP 8 到最佳实践全解析
     </a>
     <br/>
     23-Python实现网络通信：Socket模块与TCP/IP协议全解析
    </p>
    <hr/>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_42">
     </a>
     前言
    </h2>
    <p>
     在互联网时代，网络编程是每个开发者都值得掌握的核心技能之一。从网页浏览到即时聊天，再到物联网设备之间的通信，网络编程无处不在。作为Python学习旅程的第23天，我们将迈入网络编程的世界，探索其基础知识。本文将从TCP/IP协议的基本概念讲起，逐步深入到使用Python的
     <code>
      socket
     </code>
     模块实现网络通信，并通过实际代码带你编写客户端和服务器端程序。
    </p>
    <p>
     无论你是初学者还是有一定经验的开发者，这篇文章都将为你提供清晰的知识框架和实用的代码示例。让我们一起开启这场网络编程的探索之旅吧！
    </p>
    <hr/>
    <h2>
     <a id="TCPIP_50">
     </a>
     一、TCP/IP协议概述
    </h2>
    <p>
     网络编程的核心在于理解通信协议，而TCP/IP协议是互联网的基石。本节将带你了解它的基本概念和分层结构，帮助你建立网络通信的整体认知。
    </p>
    <h3>
     <a id="11_TCPIP_54">
     </a>
     1.1 什么是TCP/IP协议
    </h3>
    <p>
     TCP/IP协议全称“传输控制协议/网际协议”，是一组用于实现网络通信的协议集合。它定义了设备如何连接到网络，以及数据如何在设备间传输。简单来说，TCP/IP就像网络世界的“交通规则”，确保数据能够准确、高效地到达目的地。
    </p>
    <ul>
     <li>
      <strong>
       TCP（传输控制协议）
      </strong>
      ：负责数据的可靠传输，保证数据按顺序到达且不丢失。
     </li>
     <li>
      <strong>
       IP（网际协议）
      </strong>
      ：负责数据的寻址和路由，决定数据从哪里发到哪里。
     </li>
    </ul>
    <h3>
     <a id="12_TCPIP_61">
     </a>
     1.2 TCP/IP协议的分层结构
    </h3>
    <p>
     TCP/IP协议采用四层模型，每一层都有明确的功能。通过分层设计，网络通信变得模块化且易于理解。
    </p>
    <h4>
     <a id="121__65">
     </a>
     1.2.1 应用层
    </h4>
    <p>
     应用层是用户直接接触的部分，负责处理应用程序的通信需求。例如：
    </p>
    <ul>
     <li>
      <strong>
       HTTP
      </strong>
      ：浏览网页时使用。
     </li>
     <li>
      <strong>
       FTP
      </strong>
      ：传输文件时使用。
     </li>
     <li>
      <strong>
       SMTP
      </strong>
      ：发送邮件时使用。
     </li>
    </ul>
    <h4>
     <a id="122__72">
     </a>
     1.2.2 传输层
    </h4>
    <p>
     传输层确保数据的端到端传输，提供可靠性或高效性两种选择：
    </p>
    <ul>
     <li>
      <strong>
       TCP
      </strong>
      ：面向连接，保证数据完整，适用于需要高可靠性的场景（如文件下载）。
     </li>
     <li>
      <strong>
       UDP
      </strong>
      ：无连接，速度快但不保证数据到达，适用于实时性要求高的场景（如视频直播）。
     </li>
    </ul>
    <h4>
     <a id="123__78">
     </a>
     1.2.3 网络层
    </h4>
    <p>
     网络层负责数据的路由和转发，核心协议是IP。它为每台设备分配一个IP地址，并决定数据包的传输路径。
    </p>
    <h4>
     <a id="124__82">
     </a>
     1.2.4 链路层
    </h4>
    <p>
     链路层是最底层，负责将数据封装成帧并通过物理网络（如以太网或Wi-Fi）传输。它处理硬件相关的工作，如MAC地址。
    </p>
    <p>
     通过这四层的协作，TCP/IP协议让网络通信变得井然有序。如下图展示了其分层结构：
    </p>
    <div class="mermaid">
     <svg class="mermaid-svg" height="454" id="mermaid-svg-QZ3fnR34nmCQD2q2" viewbox="0 0 152.9875030517578 454" width="152.9875030517578" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-QZ3fnR34nmCQD2q2 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .error-icon{fill:#552222;}#mermaid-svg-QZ3fnR34nmCQD2q2 .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-QZ3fnR34nmCQD2q2 .marker{fill:#333333;stroke:#333333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .marker.cross{stroke:#333333;}#mermaid-svg-QZ3fnR34nmCQD2q2 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-QZ3fnR34nmCQD2q2 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .cluster-label text{fill:#333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .cluster-label span{color:#333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .label text,#mermaid-svg-QZ3fnR34nmCQD2q2 span{fill:#333;color:#333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .node rect,#mermaid-svg-QZ3fnR34nmCQD2q2 .node circle,#mermaid-svg-QZ3fnR34nmCQD2q2 .node ellipse,#mermaid-svg-QZ3fnR34nmCQD2q2 .node polygon,#mermaid-svg-QZ3fnR34nmCQD2q2 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-QZ3fnR34nmCQD2q2 .node .label{text-align:center;}#mermaid-svg-QZ3fnR34nmCQD2q2 .node.clickable{cursor:pointer;}#mermaid-svg-QZ3fnR34nmCQD2q2 .arrowheadPath{fill:#333333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-QZ3fnR34nmCQD2q2 .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-QZ3fnR34nmCQD2q2 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-QZ3fnR34nmCQD2q2 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-QZ3fnR34nmCQD2q2 .cluster text{fill:#333;}#mermaid-svg-QZ3fnR34nmCQD2q2 .cluster span{color:#333;}#mermaid-svg-QZ3fnR34nmCQD2q2 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-QZ3fnR34nmCQD2q2 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
       <g class="output">
        <g class="clusters">
        </g>
        <g class="edgePaths">
         <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;">
          <path class="path" d="M76.4937515258789,80L76.4937515258789,84.16666666666667C76.4937515258789,88.33333333333333,76.4937515258789,96.66666666666667,76.4937515258789,105C76.4937515258789,113.33333333333333,76.4937515258789,121.66666666666667,76.4937515258789,125.83333333333333L76.4937515258789,130" marker-end="url(#arrowhead150)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead150" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-B LE-C" id="L-B-C" style="opacity: 1;">
          <path class="path" d="M76.4937515258789,202L76.4937515258789,206.16666666666666C76.4937515258789,210.33333333333334,76.4937515258789,218.66666666666666,76.4937515258789,227C76.4937515258789,235.33333333333334,76.4937515258789,243.66666666666666,76.4937515258789,247.83333333333334L76.4937515258789,252" marker-end="url(#arrowhead151)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead151" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-C LE-D" id="L-C-D" style="opacity: 1;">
          <path class="path" d="M76.4937515258789,324L76.4937515258789,328.1666666666667C76.4937515258789,332.3333333333333,76.4937515258789,340.6666666666667,76.4937515258789,349C76.4937515258789,357.3333333333333,76.4937515258789,365.6666666666667,76.4937515258789,369.8333333333333L76.4937515258789,374" marker-end="url(#arrowhead152)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead152" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
        </g>
        <g class="edgeLabels">
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-A' L-LE-B" id="L-L-A-B">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-B' L-LE-C" id="L-L-B-C">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-C' L-LE-D" id="L-L-C-D">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
        </g>
        <g class="nodes">
         <g class="node default" id="flowchart-A-90" style="opacity: 1;" transform="translate(76.4937515258789,44)">
          <rect class="label-container" height="72" rx="0" ry="0" width="136.9875030517578" x="-68.4937515258789" y="-36">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-58.493751525878906,-26)">
            <foreignobject height="52" width="116.98750305175781">
             <div style="display: inline-block; white-space: nowrap;">
              应用层
              <br/>
              HTTP, FTP, SMTP
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-B-91" style="opacity: 1;" transform="translate(76.4937515258789,166)">
          <rect class="label-container" height="72" rx="0" ry="0" width="84.4625015258789" x="-42.23125076293945" y="-36">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32.23125076293945,-26)">
            <foreignobject height="52" width="64.4625015258789">
             <div style="display: inline-block; white-space: nowrap;">
              传输层
              <br/>
              TCP, UDP
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-C-93" style="opacity: 1;" transform="translate(76.4937515258789,288)">
          <rect class="label-container" height="72" rx="0" ry="0" width="68" x="-34" y="-36">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-24,-26)">
            <foreignobject height="52" width="48">
             <div style="display: inline-block; white-space: nowrap;">
              网络层
              <br/>
              IP
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-D-95" style="opacity: 1;" transform="translate(76.4937515258789,410)">
          <rect class="label-container" height="72" rx="0" ry="0" width="115.51250457763672" x="-57.75625228881836" y="-36">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-47.75625228881836,-26)">
            <foreignobject height="52" width="95.51250457763672">
             <div style="display: inline-block; white-space: nowrap;">
              链路层
              <br/>
              以太网, Wi-Fi
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
        </g>
       </g>
      </g>
     </svg>
    </div>
    <hr/>
    <h2>
     <a id="socket_97">
     </a>
     二、使用
     <code>
      socket
     </code>
     模块实现网络通信
    </h2>
    <p>
     Python提供了强大的
     <code>
      socket
     </code>
     模块，让我们能够轻松实现网络通信。本节将从
     <code>
      socket
     </code>
     的基本概念入手，逐步讲解它的用法。
    </p>
    <h3>
     <a id="21_socket_101">
     </a>
     2.1 什么是
     <code>
      socket
     </code>
    </h3>
    <p>
     <code>
      socket
     </code>
     （套接字）是网络通信的桥梁，可以看作是应用程序与网络之间的“插座”。通过
     <code>
      socket
     </code>
     ，程序可以发送和接收数据，实现设备间的通信。
    </p>
    <ul>
     <li>
      <strong>
       应用场景
      </strong>
      ：聊天软件、文件传输工具、Web服务器等都离不开
      <code>
       socket
      </code>
      。
     </li>
     <li>
      <strong>
       类型
      </strong>
      ：常见的有TCP socket（可靠传输）和UDP socket（快速传输）。
     </li>
    </ul>
    <h3>
     <a id="22_socket_108">
     </a>
     2.2 创建
     <code>
      socket
     </code>
     对象
    </h3>
    <p>
     在Python中，使用
     <code>
      socket
     </code>
     模块的
     <code>
      socket()
     </code>
     函数创建
     <code>
      socket
     </code>
     对象。需要指定地址族和套接字类型：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> socket

<span class="token comment"># 创建TCP socket (AF_INET表示IPv4，SOCK_STREAM表示TCP)</span>
sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <strong>
       地址族
      </strong>
      ：
      <code>
       AF_INET
      </code>
      表示IPv4，
      <code>
       AF_INET6
      </code>
      表示IPv6。
     </li>
     <li>
      <strong>
       类型
      </strong>
      ：
      <code>
       SOCK_STREAM
      </code>
      用于TCP，
      <code>
       SOCK_DGRAM
      </code>
      用于UDP。
     </li>
    </ul>
    <h3>
     <a id="23_socket_122">
     </a>
     2.3
     <code>
      socket
     </code>
     的基本方法
    </h3>
    <p>
     创建
     <code>
      socket
     </code>
     后，我们可以通过一系列方法实现通信。以下是常用的操作步骤：
    </p>
    <h4>
     <a id="231__126">
     </a>
     2.3.1 绑定地址和端口
    </h4>
    <p>
     服务器端需要将
     <code>
      socket
     </code>
     绑定到特定的IP地址和端口号，以便客户端可以找到它：
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 绑定到本机IP (127.0.0.1) 和端口8080</span>
sock<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <strong>
       参数
      </strong>
      ：一个元组，包含IP地址（字符串）和端口号（整数）。
     </li>
     <li>
      <strong>
       常见问题
      </strong>
      ：如果端口被占用，会抛出
      <code>
       OSError
      </code>
      ，可以尝试换一个端口。
     </li>
    </ul>
    <h4>
     <a id="232__138">
     </a>
     2.3.2 监听连接
    </h4>
    <p>
     绑定后，服务器端需要调用
     <code>
      listen()
     </code>
     开始监听客户端连接：
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 监听连接，5表示最大等待连接数</span>
sock<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="233__147">
     </a>
     2.3.3 接受连接
    </h4>
    <p>
     当客户端发起连接时，服务器使用
     <code>
      accept()
     </code>
     接受连接，返回一个新的
     <code>
      socket
     </code>
     对象和客户端地址：
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 接受连接</span>
client_sock<span class="token punctuation">,</span> client_addr <span class="token operator">=</span> sock<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"连接来自：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>client_addr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <strong>
       返回值
      </strong>
      ：
      <code>
       client_sock
      </code>
      用于与该客户端通信，
      <code>
       client_addr
      </code>
      是客户端的IP和端口。
     </li>
    </ul>
    <h4>
     <a id="234__159">
     </a>
     2.3.4 发送和接收数据
    </h4>
    <p>
     通信的核心是数据的发送和接收，使用
     <code>
      send()
     </code>
     和
     <code>
      recv()
     </code>
     方法：
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 发送数据 (数据需为字节类型)</span>
client_sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">b"Hello, client!"</span><span class="token punctuation">)</span>

<span class="token comment"># 接收数据 (1024表示最大接收字节数)</span>
data <span class="token operator">=</span> client_sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"收到数据：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <strong>
       注意
      </strong>
      ：发送数据前需编码（如
      <code>
       encode()
      </code>
      ），接收后需解码（如
      <code>
       decode()
      </code>
      ）。
     </li>
    </ul>
    <hr/>
    <h2>
     <a id="_176">
     </a>
     三、客户端与服务器端程序
    </h2>
    <p>
     掌握了
     <code>
      socket
     </code>
     的基本用法后，我们通过实际代码实现一个简单的客户端-服务器通信系统。服务器端接收消息并回显，客户端发送消息并显示响应。
    </p>
    <h3>
     <a id="31__180">
     </a>
     3.1 服务器端程序
    </h3>
    <p>
     服务器端程序负责监听连接并处理客户端请求。以下是完整实现：
    </p>
    <h4>
     <a id="311_socket_184">
     </a>
     3.1.1 创建服务器
     <code>
      socket
     </code>
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">import</span> socket

<span class="token comment"># 创建TCP socket</span>
server_sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="312__193">
     </a>
     3.1.2 绑定地址和端口
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># 绑定到本机8080端口</span>
server_sock<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="313__200">
     </a>
     3.1.3 监听连接
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># 开始监听</span>
server_sock<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"服务器启动，监听端口8080..."</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="314__208">
     </a>
     3.1.4 接受客户端连接
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 接受连接</span>
    client_sock<span class="token punctuation">,</span> client_addr <span class="token operator">=</span> server_sock<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"客户端 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>client_addr<span class="token punctuation">}</span></span><span class="token string"> 已连接"</span></span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="315__217">
     </a>
     3.1.5 处理客户端请求
    </h4>
    <pre><code class="prism language-python">    <span class="token comment"># 处理请求</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> client_sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>  <span class="token comment"># 客户端断开时data为空</span>
            <span class="token keyword">break</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"收到消息：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        client_sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">)</span>  <span class="token comment"># 回显消息</span>
    client_sock<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      完整代码
     </strong>
     ：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> socket

server_sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
server_sock<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
server_sock<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"服务器启动，监听端口8080..."</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    client_sock<span class="token punctuation">,</span> client_addr <span class="token operator">=</span> server_sock<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"客户端 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>client_addr<span class="token punctuation">}</span></span><span class="token string"> 已连接"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> client_sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>
            <span class="token keyword">break</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"收到消息：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        client_sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    client_sock<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      运行结果
     </strong>
     ：启动后，服务器会等待客户端连接，并回显收到的消息。
    </p>
    <h3>
     <a id="32__254">
     </a>
     3.2 客户端程序
    </h3>
    <p>
     客户端程序主动连接服务器，发送消息并接收响应。
    </p>
    <h4>
     <a id="321_socket_258">
     </a>
     3.2.1 创建客户端
     <code>
      socket
     </code>
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">import</span> socket

<span class="token comment"># 创建TCP socket</span>
client_sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="322__267">
     </a>
     3.2.2 连接服务器
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># 连接服务器</span>
client_sock<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="323__274">
     </a>
     3.2.3 发送数据
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># 发送消息</span>
client_sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">b"Hello, server!"</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="324__281">
     </a>
     3.2.4 接收数据
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># 接收响应</span>
data <span class="token operator">=</span> client_sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"服务器响应：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
client_sock<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      完整代码
     </strong>
     ：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> socket

client_sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
client_sock<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
client_sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">b"Hello, server!"</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> client_sock<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"服务器响应：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
client_sock<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      运行步骤
     </strong>
     ：
    </p>
    <ol>
     <li>
      先运行服务器端代码。
     </li>
     <li>
      再运行客户端代码，观察服务器端的输出和客户端的响应。
     </li>
    </ol>
    <p>
     <strong>
      常见问题排查
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       连接失败
      </strong>
      ：检查服务器是否已启动，IP和端口是否正确。
     </li>
     <li>
      <strong>
       数据乱码
      </strong>
      ：确保发送和接收时编码一致（如都用UTF-8）。
     </li>
    </ul>
    <hr/>
    <h2>
     <a id="_313">
     </a>
     四、总结
    </h2>
    <p>
     通过本篇文章，我们从TCP/IP协议的基础知识入手，了解了网络通信的原理；接着通过
     <code>
      socket
     </code>
     模块掌握了Python网络编程的基本方法；最后通过代码示例实现了客户端与服务器端的通信。这为你后续学习更复杂的网络编程奠定了基础。
    </p>
    <hr/>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f4b697261647a792f:61727469636c652f64657461696c732f313436313335343736" class_="artid" style="display:none">
 </p>
</div>


