---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f323430315f38343932353333352f:61727469636c652f64657461696c732f313338373836323937"
layout: post
title: "最全嵌入式文件系统详解_嵌入式-文件系统工作原理1,研发4面真题解析Golang岗"
date: 2024-12-29 11:23:20 +08:00
description: "Cramfs文件系统以压缩方式存储，在运行时解压缩，所以不支持应用"
keywords: "嵌入式文件系统"
categories: ['程序员']
tags: ['面试', '学习', 'Go']
artid: "138786297"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=138786297
    alt: "最全嵌入式文件系统详解_嵌入式-文件系统工作原理1,研发4面真题解析Golang岗"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=138786297
featuredImagePreview: https://bing.ee123.net/img/rand?artid=138786297
---

# 最全嵌入式文件系统详解\_嵌入式 文件系统工作原理(1)，研发4面真题解析（Golang岗）

![img](https://i-blog.csdnimg.cn/blog_migrate/8ec40d0673b74cfcf4f069608b8e4809.png)
  
![img](https://i-blog.csdnimg.cn/blog_migrate/5708fa766f5e6b9acfd1a18b484a1ff6.png)

**网上学习资料一大堆，但如果学到的知识不成体系，遇到问题时只是浅尝辄止，不再深入研究，那么很难做到真正的技术提升。**

**[需要这份系统化的资料的朋友，可以添加戳这里获取](https://bbs.csdn.net/topics/618658159)**

**一个人可以走的很快，但一群人才能走的更远！不论你是正从事IT行业的老鸟或是对IT行业感兴趣的新人，都欢迎加入我们的的圈子（技术交流、学习资源、职场吐槽、大厂内推、面试辅导），让我们一起学习成长！**

(1)日志结构文件系统并不采用本地更新的方式,而是采用异步更新的方式,即当某个数据块需要更新时,先找一个新块将新数据写入,再将旧块擦除。不过旧数据并不马上在闪存中擦除,而是以日志方式作为历史记录保存下来,这为文件系统的恢复操作打下了基础.

(2)不适合用于NAND闪存的主要是因为NAND闪存的容量一般较大,这样导致jffs为维护日志节点所占用的内存空间迅速增大,另外jffs文件系统在挂载时需要扫描整个FLASH的内容,以找出所有的日志节点,建立文件结构,对于大容量的NAND闪存会耗费大量时间.

**(2)yaffs：Yet Another Flash File System**
  
yaffs/yaffs2 是专门为 NAND Flash 设计的嵌入式文件系统。它是日志结构的文件系统，提供了损耗平衡和掉电保护，可以有效地避免意外掉电对文件系统一致性和完整性的影响，。与jffs2相比，它减少了一些功能(例如不支持数据压缩)，所以速度更快，挂载时间很短，对内存的占用较小。它是跨平台的文件系统，除了Linux和eCos，还支持WinCE, pSOS和ThreadX等。
  
yaffs/yaffs2 的优缺点如下：
  
**优点:**
  
专门针对 NAND Flash，软件结构得到优化，速度快。
  
使用硬件的 spare area 区域存储文件组织信息，启动时只需扫描组织信息，启动比较快。
  
采用多策略垃圾回收算法，能够提高垃圾回收的效率和公平性，达到损耗平衡的目的。
  
**缺点:**

没有采用压缩的文件格式。当包含的内容相同时， yaffs2 镜像文件要比 jffs2 镜像文件大。

**注意：**
  
yaffs与yaffs2的主要区别在于，前者仅支持小页(512 Bytes)NAND闪存，后者则可支持大页(2KB) NAND闪存。同时，yaffs2在内存空间占用、垃圾回收速度、读/写速度等方面均有大幅提升。与jffs2相比，它减少了一些功能(例如不支持数据压缩)，所以速度更快，挂载时间很短，对内存的占用较小。

**(3)Cramfs：Compressed ROM File System**
  
Cramfs是Linux的创始人 LinusTorvalds参与开发的一种只读的压缩文件系统。它也基于MTD驱动程序。在cramfs文件系统中，每一页(4KB)被单独压缩，可以随机页访问，其压缩比高达2:1,为嵌入式系统节省大量的Flash存储空间，使系统可通过更低容量的FLASH存储相同的文件，从而降低系统成本。
  
Cramfs文件系统以压缩方式存储，在运行时解压缩，所以不支持应用程序以XIP方式运行，所有的应用程序要求被拷到RAM里去运行，但这并不代表比Ramfs需求的RAM空间要大一点，因为Cramfs是采用分页压缩的方式存放档案，在读取档案时，不会一下子就耗用过多的内存空间，只针对目前实际读取的部分分配内存，尚没有读取的部分不分配内存空间，当我们读取的档案不在内存时，Cramfs文件系统自动计算压缩后的资料所存的位置，再即时解压缩到RAM中。另外，它的速度快，效率高，其只读的特点有利于保护文件系统免受破坏，提高了系统的可靠性。
  
由于以上特性，Cramfs在嵌入式系统中应用广泛。
**但是它的只读属性同时又是它的一大缺陷，使得用户无法对其内容对进扩充**
。Cramfs映像通常是放在Flash中，但是也能放在别的文件系统里，使用loopback 设备可以把它安装别的文件系统里。

**(4)Romfs**
  
传统型的Romfs文件系统是一种简单的、紧凑的、只读的文件系统，不支持动态擦写保存，按顺序存放数据，因而支持应用程序以XIP(eXecute In Place，片内运行)方式运行，在系统运行时，节省RAM空间。uClinux系统通常采用Romfs文件系统。
  
其他文件系统：fat/fat32也可用于实际嵌入式系统的扩展存储器(例如PDA,Smartphone, 数码相机等的SD卡)，这主要是为了更好的与Windows桌面操作系统相兼容。ext2也可以作为嵌入式Linux的文件系统，不过将它用于 FLASH闪存会有诸多弊端。

**(二)基于RAM的文件系统**

**(1)Ramdisk**

Ramdisk是将一部分固定大小的内存当作分区来使用。它并非一个实际的文件系统，而是一种将实际的文件系统装入内存的机制，并且可以作为根文件系统。将一些经常被访问而又不会更改的文件（如只读的根文件系统）通过Ramdisk放在内存中，可以明显地提高系统的性能。
  
在Linux的启动阶段，initrd提供了一套机制，可以将内核映像和根文件系统一起载入内存。

**(2)ramfs/tmpfs**
  
Ramfs是LinusTorvalds开发的一种基于内存的文件系统，工作于虚拟文件系统(VFS)层，不能格式化，可以创建多个，在创建时可以指定其最大能使用的内存大小。(实际上，VFS本质上可看成一种内存文件系统，它统一了文件在内核中的表示方式，并对磁盘文件系统进行缓冲。)
  
Ramfs/tmpfs文件系统把所有的文件都放在RAM中，所以读/写操作发生在RAM中，可以用ramfs/tmpfs来存储一些临时性或经常要修改的数据，例如/tmp和/var目录，这样既避免了对Flash存储器的读写损耗，也提高了数据读写速度。
  
**R\*\*\*\*amfs/tmpfs相对于传统的Ramdisk的不同之处主要在于：不能格式化，文件系统大小可随所含文件内容大小变化**
。
  
Tmpfs的一个缺点是当系统重新引导时会丢失所有数据。

**(三)网络文件系统NFS (Network File System)**

NFS是由Sun开发并发展起来的一项在不同机器、不同操作系统之间通过网络共享文件的技术。在嵌入式Linux系统的开发调试阶段，可以利用该技术在主机上建立基于NFS的根文件系统，挂载到嵌入式设备，可以很方便地修改根文件系统的内容。

以上讨论的都是基于存储设备的文件系统(memory-basedfile system)，它们都可用作Linux的根文件系统。实际上，Linux还支持逻辑的或伪文件系统(logical orpseudo file system)，例如procfs(proc文件系统)，用于获取系统信息，以及devfs(设备文件系统)和sysfs，用于维护设备文件。

参考文档：

https://blog.csdn.net/firstlai/article/details/50631278

http://blog.chinaunix.net/uid-26833883-id-4574720.html

---

> -----------------------------------------------2022.08.28-----------------------------------------------
>   
> 本博客将停止更新
>
> 新的文章内容和附件工程文件
>
> 已更新在博客首页和：
>
> 公众号 : liwen01
>
> 感恩关注，谢谢~

![img](https://i-blog.csdnimg.cn/blog_migrate/6c5153ee4b64ccb88b761730fd2a5a80.png)
  
![img](https://i-blog.csdnimg.cn/blog_migrate/b5765c0ac47cb3aff09f5d6a8dba9282.png)
  
![img](https://i-blog.csdnimg.cn/blog_migrate/8ce56f84f63a7b052c514034dd9c4048.png)

**既有适合小白学习的零基础资料，也有适合3年以上经验的小伙伴深入学习提升的进阶课程，涵盖了95%以上Go语言开发知识点，真正体系化！**

**由于文件比较多，这里只是将部分目录截图出来，全套包含大厂面经、学习笔记、源码讲义、实战项目、大纲路线、讲解视频，并且后续会持续更新**

**[如果你需要这些资料，可以戳这里获取](https://bbs.csdn.net/topics/618658159)**

，全套包含大厂面经、学习笔记、源码讲义、实战项目、大纲路线、讲解视频，并且后续会持续更新\*\*

**[如果你需要这些资料，可以戳这里获取](https://bbs.csdn.net/topics/618658159)**