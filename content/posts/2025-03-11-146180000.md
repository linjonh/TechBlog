---
layout: post
title: "Java设计模式之装饰者模式"
date: 2025-03-11 15:36:27 +0800
description: "装饰者模式（Decorator Pattern）是一种结构型设计模式，允许动态地向对象添加额外的职责。它通过将对象包装在装饰者类中，以提供比继承更灵活的扩展功能方式。假设咖啡店销售多种饮料（如浓缩咖啡、黑咖啡），并允许添加多种调料（如牛奶、摩卡、糖）。：多层装饰可能导致对象链较长，不易追踪问题。：继承组件接口，并持有一个组件对象的引用。：扩展装饰者抽象类，添加具体的装饰功能。：定义被装饰对象和装饰者的共同接口。：通过多个装饰者类灵活组合不同功能。：在运行时添加或修改对象的行为。：实现组件接口的基础对象。"
keywords: "Java设计模式之装饰者模式"
categories: ['Java']
tags: ['设计模式', '装饰器模式', 'Java']
artid: "146180000"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146180000
    alt: "Java设计模式之装饰者模式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146180000
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146180000
cover: https://bing.ee123.net/img/rand?artid=146180000
image: https://bing.ee123.net/img/rand?artid=146180000
img: https://bing.ee123.net/img/rand?artid=146180000
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java设计模式之装饰者模式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     装饰者模式（Decorator Pattern）是一种结构型设计模式，允许动态地向对象添加额外的职责。它通过将对象包装在装饰者类中，以提供比继承更灵活的扩展功能方式。
    </p>
    <h4>
     <strong>
      1. 核心角色
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        组件接口（Component）
       </strong>
       ：定义被装饰对象和装饰者的共同接口。
      </p>
     </li>
     <li>
      <p>
       <strong>
        具体组件（Concrete Component）
       </strong>
       ：实现组件接口的基础对象。
      </p>
     </li>
     <li>
      <p>
       <strong>
        装饰者抽象类（Decorator）
       </strong>
       ：继承组件接口，并持有一个组件对象的引用。
      </p>
     </li>
     <li>
      <p>
       <strong>
        具体装饰者（Concrete Decorator）
       </strong>
       ：扩展装饰者抽象类，添加具体的装饰功能。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      2. 应用场景
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        动态扩展对象功能
       </strong>
       ：在运行时添加或修改对象的行为。
      </p>
     </li>
     <li>
      <p>
       <strong>
        替代多重继承
       </strong>
       ：避免因继承层次过深导致的类爆炸问题。
      </p>
     </li>
     <li>
      <p>
       <strong>
        组合功能
       </strong>
       ：通过多个装饰者类灵活组合不同功能。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <strong>
      3. 代码示例：咖啡店订单系统
     </strong>
    </h4>
    <p>
     假设咖啡店销售多种饮料（如浓缩咖啡、黑咖啡），并允许添加多种调料（如牛奶、摩卡、糖）。
    </p>
    <p>
     <strong>
      步骤1：定义组件接口（饮料）
     </strong>
     <img alt="" height="112" src="https://i-blog.csdnimg.cn/direct/288b7028c85544959ce85e71a11a9d9b.png" width="939"/>
    </p>
    <p>
     <strong>
      步骤2：实现具体组件（基础饮料）
     </strong>
     <img alt="" height="629" src="https://i-blog.csdnimg.cn/direct/ec36b8e1f9b44e34b6c8653c2e69b8c9.png" width="937"/>
    </p>
    <p>
     <strong>
      步骤3：定义装饰者抽象类
     </strong>
     <img alt="" height="266" src="https://i-blog.csdnimg.cn/direct/ab10cd05f72a450991f071a0f7937be8.png" width="940"/>
    </p>
    <p>
     <strong>
      步骤4：实现具体装饰者（调料）
     </strong>
     <img alt="" height="415" src="https://i-blog.csdnimg.cn/direct/3df51471874c4c7db921be2279e96fe1.png" width="939">
      <img alt="" height="425" src="https://i-blog.csdnimg.cn/direct/e367725be5e64afaaea37e2287785a0f.png" width="941">
       <img alt="" height="416" src="https://i-blog.csdnimg.cn/direct/c47b7fd2d87540f7b7807f297b39a1c9.png" width="937"/>
      </img>
     </img>
    </p>
    <p>
     <strong>
      步骤5：客户端使用
     </strong>
     <img alt="" height="539" src="https://i-blog.csdnimg.cn/direct/4b723970012f4496a6f4b9b77dc729f3.png" width="939"/>
    </p>
    <h5>
     <strong>
      输出结果
     </strong>
     <img alt="" height="94" src="https://i-blog.csdnimg.cn/direct/f3f4029e917d4b0ea41feafc430c3e26.png" width="939"/>
    </h5>
    <h4>
     <strong>
      4. 装饰者模式优缺点
     </strong>
    </h4>
    <h5>
     <strong>
      优点
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        灵活扩展
       </strong>
       ：动态添加功能，无需修改原有代码。
      </p>
     </li>
     <li>
      <p>
       <strong>
        避免类爆炸
       </strong>
       ：通过组合替代多层继承。
      </p>
     </li>
     <li>
      <p>
       <strong>
        符合开闭原则
       </strong>
       ：对扩展开放，对修改关闭。
      </p>
     </li>
    </ul>
    <h5>
     <strong>
      缺点
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        复杂性增加
       </strong>
       ：系统中可能出现大量小装饰者类。
      </p>
     </li>
     <li>
      <p>
       <strong>
        调试困难
       </strong>
       ：多层装饰可能导致对象链较长，不易追踪问题。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <strong>
      5. 装饰者模式 vs. 继承
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         装饰者模式
        </strong>
       </th>
       <th>
        <strong>
         继承
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         扩展方式
        </strong>
       </td>
       <td>
        动态组合（运行时）
       </td>
       <td>
        静态定义（编译时）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         灵活性
        </strong>
       </td>
       <td>
        高（可任意组合装饰者）
       </td>
       <td>
        低（需预先定义子类）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         类数量
        </strong>
       </td>
       <td>
        较多小类（每个功能一个装饰者）
       </td>
       <td>
        可能产生大量子类（组合爆炸）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <strong>
      6. 实际应用场景
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Java I/O 流
       </strong>
       ：如
       <code>
        BufferedReader
       </code>
       装饰
       <code>
        FileReader
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        GUI 组件
       </strong>
       ：为窗口添加滚动条、边框等动态效果。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Web 中间件
       </strong>
       ：为请求处理链添加日志、鉴权等功能。
      </p>
     </li>
    </ul>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6775616e78696e303230362f:61727469636c652f64657461696c732f313436313830303030" class_="artid" style="display:none">
 </p>
</div>


