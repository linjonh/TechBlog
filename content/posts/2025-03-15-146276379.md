---
layout: post
title: "基于传感器数据的城市空气质量预测与污染源分类"
date: 2025-03-15 11:13:20 +0800
description: "结合时间序列预测（回归）与污染源分类（多标签分类），使用公开API获取实时数据。"
keywords: "基于传感器数据的城市空气质量预测与污染源分类"
categories: ['未分类']
tags: ['数据挖掘', '分类', '人工智能']
artid: "146276379"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146276379
    alt: "基于传感器数据的城市空气质量预测与污染源分类"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146276379
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146276379
cover: https://bing.ee123.net/img/rand?artid=146276379
image: https://bing.ee123.net/img/rand?artid=146276379
img: https://bing.ee123.net/img/rand?artid=146276379
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     基于传感器数据的城市空气质量预测与污染源分类
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <hr/>
    <h4>
     <a id="_2">
     </a>
     <strong>
      项目名称：基于传感器数据的城市空气质量预测与污染源分类
     </strong>
    </h4>
    <p>
     <strong>
      创新点
     </strong>
     ：结合时间序列预测（回归）与污染源分类（多标签分类），使用公开API获取实时数据。
    </p>
    <hr/>
    <h4>
     <a id="_7">
     </a>
     <strong>
      项目目标
     </strong>
    </h4>
    <ol>
     <li>
      预测未来6小时的空气质量指数（AQI）。
     </li>
     <li>
      根据传感器数据判断可能的污染源类型（如工业排放、交通尾气、扬尘等）。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_13">
     </a>
     <strong>
      数据集来源
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       数据获取
      </strong>
      ：通过开放API实时抓取（如
      <code>
       OpenAQ
      </code>
      、
      <code>
       AirNow
      </code>
      或国内公开的城市空气质量平台）。
     </li>
     <li>
      <strong>
       特征示例
      </strong>
      ：
      <ul>
       <li>
        PM2.5、PM10、SO2、NO2、CO、O3的实时浓度
       </li>
       <li>
        气象数据（温度、湿度、风速、风向）
       </li>
       <li>
        时间戳（小时级）
       </li>
       <li>
        地理位置（可选，需脱敏）
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_23">
     </a>
     <strong>
      技术实现步骤
     </strong>
    </h4>
    <h5>
     <a id="1__25">
     </a>
     <strong>
      1. 环境准备
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token comment"># 安装依赖库（部分需根据API调整）</span>
pip install requests pandas numpy scikit<span class="token operator">-</span>learn xgboost plotly folium
</code></pre>
    <h5>
     <a id="2__31">
     </a>
     <strong>
      2. 数据获取与清洗
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 示例：从OpenAQ API获取数据（需替换为真实API密钥）</span>
<span class="token keyword">def</span> <span class="token function">fetch_air_quality</span><span class="token punctuation">(</span>city<span class="token operator">=</span><span class="token string">"Beijing"</span><span class="token punctuation">,</span> days<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"https://api.openaq.org/v2/measurements?city=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>city<span class="token punctuation">}</span></span><span class="token string">&amp;parameter=pm25&amp;date_from=2023-01-01&amp;limit=1000"</span></span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    data <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 转换为DataFrame并清洗</span>
    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">'timestamp'</span><span class="token punctuation">:</span> item<span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'local'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'pm25'</span><span class="token punctuation">:</span> item<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'latitude'</span><span class="token punctuation">:</span> item<span class="token punctuation">[</span><span class="token string">'coordinates'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'latitude'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'longitude'</span><span class="token punctuation">:</span> item<span class="token punctuation">[</span><span class="token string">'coordinates'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'longitude'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> data<span class="token punctuation">[</span><span class="token string">'results'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 处理缺失值</span>
    df<span class="token punctuation">[</span><span class="token string">'pm25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'pm25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> df

air_data <span class="token operator">=</span> fetch_air_quality<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>air_data<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <h5>
     <a id="3__58">
     </a>
     <strong>
      3. 特征工程
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token comment"># 时间特征提取</span>
air_data<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>air_data<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
air_data<span class="token punctuation">[</span><span class="token string">'hour'</span><span class="token punctuation">]</span> <span class="token operator">=</span> air_data<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>hour
air_data<span class="token punctuation">[</span><span class="token string">'day_of_week'</span><span class="token punctuation">]</span> <span class="token operator">=</span> air_data<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>dayofweek

<span class="token comment"># 添加滞后特征（用于时间序列预测）</span>
air_data<span class="token punctuation">[</span><span class="token string">'pm25_lag6'</span><span class="token punctuation">]</span> <span class="token operator">=</span> air_data<span class="token punctuation">[</span><span class="token string">'pm25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shift<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>  <span class="token comment"># 6小时前的PM2.5值</span>
air_data<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
    <h5>
     <a id="4__70">
     </a>
     <strong>
      4. 污染源分类（多标签分类）
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>ensemble <span class="token keyword">import</span> RandomForestClassifier

<span class="token comment"># 假设根据专家规则生成标签（此处为示例，需结合实际数据）</span>
<span class="token keyword">def</span> <span class="token function">assign_pollution_source</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> row<span class="token punctuation">[</span><span class="token string">'pm25'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">150</span> <span class="token keyword">and</span> row<span class="token punctuation">[</span><span class="token string">'no2'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">40</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'industry'</span>
    <span class="token keyword">elif</span> row<span class="token punctuation">[</span><span class="token string">'pm10'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token keyword">and</span> row<span class="token punctuation">[</span><span class="token string">'wind_speed'</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'dust'</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'traffic'</span>

<span class="token comment"># 加载真实数据后生成标签</span>
<span class="token comment"># air_data['source'] = air_data.apply(assign_pollution_source, axis=1)</span>

<span class="token comment"># 分类模型训练</span>
X <span class="token operator">=</span> air_data<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'pm25'</span><span class="token punctuation">,</span> <span class="token string">'pm10'</span><span class="token punctuation">,</span> <span class="token string">'no2'</span><span class="token punctuation">,</span> <span class="token string">'so2'</span><span class="token punctuation">,</span> <span class="token string">'wind_speed'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> air_data<span class="token punctuation">[</span><span class="token string">'source'</span><span class="token punctuation">]</span>
X_train<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>

clf <span class="token operator">=</span> RandomForestClassifier<span class="token punctuation">(</span><span class="token punctuation">)</span>
clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Classification Accuracy:"</span><span class="token punctuation">,</span> clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X_test<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <h5>
     <a id="5_AQI_96">
     </a>
     <strong>
      5. AQI预测（时间序列回归）
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">from</span> xgboost <span class="token keyword">import</span> XGBRegressor
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> mean_absolute_error

<span class="token comment"># 特征与目标</span>
features <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'pm25_lag6'</span><span class="token punctuation">,</span> <span class="token string">'hour'</span><span class="token punctuation">,</span> <span class="token string">'day_of_week'</span><span class="token punctuation">,</span> <span class="token string">'temperature'</span><span class="token punctuation">,</span> <span class="token string">'humidity'</span><span class="token punctuation">]</span>
target <span class="token operator">=</span> <span class="token string">'pm25'</span>

<span class="token comment"># 训练模型</span>
reg <span class="token operator">=</span> XGBRegressor<span class="token punctuation">(</span><span class="token punctuation">)</span>
reg<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">[</span>features<span class="token punctuation">]</span><span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>
predictions <span class="token operator">=</span> reg<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">[</span>features<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MAE:"</span><span class="token punctuation">,</span> mean_absolute_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> predictions<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <h5>
     <a id="6__113">
     </a>
     <strong>
      6. 可视化与部署
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token comment"># 使用Plotly动态展示预测结果</span>
<span class="token keyword">import</span> plotly<span class="token punctuation">.</span>express <span class="token keyword">as</span> px

fig <span class="token operator">=</span> px<span class="token punctuation">.</span>line<span class="token punctuation">(</span>x<span class="token operator">=</span>X_test<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token punctuation">[</span>y_test<span class="token punctuation">,</span> predictions<span class="token punctuation">]</span><span class="token punctuation">,</span> 
              labels<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'PM2.5'</span><span class="token punctuation">,</span> <span class="token string">'variable'</span><span class="token punctuation">:</span> <span class="token string">'Type'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              title<span class="token operator">=</span><span class="token string">"Real vs Predicted PM2.5"</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 部署为简单API（Flask示例）</span>
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> request<span class="token punctuation">,</span> jsonify

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/predict'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">predict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> request<span class="token punctuation">.</span>json
    prediction <span class="token operator">=</span> reg<span class="token punctuation">.</span>predict<span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">[</span><span class="token string">'features'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"predicted_aqi"</span><span class="token punctuation">:</span> prediction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_139">
     </a>
     <strong>
      项目亮点
     </strong>
    </h4>
    <ol>
     <li>
      <strong>
       数据原创性
      </strong>
      ：通过API实时获取数据，避免使用常见静态数据集。
     </li>
     <li>
      <strong>
       多任务学习
      </strong>
      ：同时解决回归（预测AQI）和分类（污染源识别）问题。
     </li>
     <li>
      <strong>
       实用价值
      </strong>
      ：可直接部署为空气质量预警系统。
     </li>
     <li>
      <strong>
       技术综合
      </strong>
      ：涵盖数据抓取、时间序列处理、多模型融合。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_147">
     </a>
     <strong>
      扩展方向
     </strong>
    </h4>
    <ul>
     <li>
      添加地理位置可视化（如用
      <code>
       folium
      </code>
      生成污染热力图）。
     </li>
     <li>
      结合LSTM模型提升时间序列预测精度。
     </li>
     <li>
      开发自动化的数据管道（如使用
      <code>
       Apache Airflow
      </code>
      定期更新数据）。
     </li>
     <li>
      增加异常检测模块识别传感器故障。
     </li>
    </ul>
    <hr/>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f77686331353339383330353832312f:61727469636c652f64657461696c732f313436323736333739" class_="artid" style="display:none">
 </p>
</div>


