---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f753031333536353133332f:61727469636c652f64657461696c732f313436323533373330"
layout: post
title: "LLaMA-Factory-è®­ç»ƒæ•°æ®é»˜è®¤ä½¿ç”¨-instructioninputoutput-ä¸‰ä¸ª-key"
date: 2025-03-14 11:45:14 +08:00
description: "LLaMA-Factory è®­ç»ƒæ•°æ®é»˜è®¤ä½¿ç”¨ instructionã€inputã€output ä¸‰ä¸ª keyã€‚âœ… ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®ï¼Œå¦åˆ™æ¨¡å‹æ— æ³•æ­£ç¡®å­¦ä¹ ã€‚âœ… å¦‚æœè¦è‡ªå®šä¹‰ keyï¼Œå»ºè®®ä¿®æ”¹ LLaMA-Factory çš„ä»£ç ï¼ˆä¸æ¨èï¼‰ï¼Œæˆ–ä¿æŒé»˜è®¤æ ¼å¼ã€‚âœ… æ•°æ®ç»“æ„è¦æ ¹æ®ä»»åŠ¡ç±»å‹è°ƒæ•´ï¼Œæ¯”å¦‚ï¼šé—®ç­”ã€é—²èŠï¼šinstruction + outputç¿»è¯‘ä»»åŠ¡ï¼šinstruction + input + outputä»£ç ç”Ÿæˆï¼šinstruction + outputæ–‡æœ¬æ‘˜è¦ï¼šinstructio"
keywords: "LLaMA-Factory è®­ç»ƒæ•°æ®é»˜è®¤ä½¿ç”¨ instructionã€inputã€output ä¸‰ä¸ª key"
categories: ['æ¨¡å‹å¾®è°ƒ']
tags: ['å¤§æ¨¡å‹å¾®è°ƒ', 'äººå·¥æ™ºèƒ½', 'Llama']
artid: "146253730"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146253730
    alt: "LLaMA-Factory-è®­ç»ƒæ•°æ®é»˜è®¤ä½¿ç”¨-instructioninputoutput-ä¸‰ä¸ª-key"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146253730
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146253730
cover: https://bing.ee123.net/img/rand?artid=146253730
image: https://bing.ee123.net/img/rand?artid=146253730
img: https://bing.ee123.net/img/rand?artid=146253730
---

# LLaMA-Factory è®­ç»ƒæ•°æ®é»˜è®¤ä½¿ç”¨ instructionã€inputã€output ä¸‰ä¸ª key

åœ¨ LLaMA-Factory è¿›è¡Œ SFTï¼ˆDirective supervision fine-tuning æŒ‡ä»¤ç›‘ç£å¾®è°ƒï¼‰æ—¶ï¼Œ
**è®­ç»ƒæ•°æ®çš„æ ¼å¼**
éå¸¸é‡è¦ï¼Œå› ä¸ºå¤§æ¨¡å‹ä¾èµ–æ ‡å‡†åŒ–çš„æ•°æ®ç»“æ„æ¥å­¦ä¹ 
**æŒ‡ä»¤-å“åº”**
æ¨¡å¼ã€‚

`identity.json`
æ–‡ä»¶çš„æ•°æ®é‡‡ç”¨äº†
**â€œinstructionâ€ã€â€œinputâ€ã€â€œoutputâ€**
è¿™ä¸‰ä¸ª keyï¼Œå®ƒä»¬çš„ä½œç”¨å¦‚ä¸‹ï¼š

| **Key** | **ä½œç”¨** | **ç¤ºä¾‹** |
| --- | --- | --- |
| **â€œinstructionâ€** | ä»£è¡¨ç”¨æˆ·ç»™ AI çš„æŒ‡ä»¤ï¼ˆé—®é¢˜æˆ–ä»»åŠ¡æè¿°ï¼‰ã€‚ | `"instruction": "Who are you?"` |
| **â€œinputâ€** | å¯é€‰ï¼Œè¡¨ç¤ºæä¾›ç»™ AI çš„é¢å¤–è¾“å…¥ä¿¡æ¯ã€‚ | `"input": ""` ï¼ˆå¦‚æœä¸éœ€è¦é¢å¤–è¾“å…¥ï¼Œå¯ä»¥ç•™ç©ºï¼‰ |
| **â€œoutputâ€** | æœŸæœ› AI ç”Ÿæˆçš„å›ç­”ï¼ˆAI çš„ç†æƒ³è¾“å‡ºï¼‰ã€‚ | `"output": "I am { {name}}, an AI assistant developed by { {author}}."` |

---

### **1. LLaMA-Factory è®­ç»ƒæ•°æ®çš„æ ¼å¼è¦æ±‚**

å¦‚æœä½ è¦æ¢ç”¨è‡ªå·±çš„æ•°æ®é›†ï¼Œæ ¼å¼åº”è¯¥ç¬¦åˆ
**ä»¥ä¸‹ JSON ç»“æ„**
ï¼š

identity.jsonæ–‡ä»¶

```json
[
  {
    "instruction": "è¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚",
    "input": "",
    "output": "æˆ‘æ˜¯Llama-Chineseï¼Œç”±LLaMA Factoryå¼€å‘ã€‚æˆ‘å¯ä»¥å¸®åŠ©æ‚¨å›ç­”é—®é¢˜ã€æä¾›ä¿¡æ¯å’Œè¿›è¡Œå¯¹è¯ã€‚"
  },
  {
    "instruction": "ç¿»è¯‘ä¸‹é¢çš„å¥å­ï¼š",
    "input": "Hello, how are you?",
    "output": "ä½ å¥½ï¼Œä½ æ€ä¹ˆæ ·ï¼Ÿ"
  },
  {
    "instruction": "è¯·ç”¨Pythonå†™ä¸€ä¸ªè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‡½æ•°ã€‚",
    "input": "",
    "output": "```python\ndef fibonacci(n):\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n```"
  }
]

```

#### **æ ¼å¼è¦æ±‚**

1. **JSON æ ¼å¼çš„æ•°ç»„**
   ï¼Œæ¯ä¸ªæ•°æ®ç‚¹æ˜¯ä¸€ä¸ªå­—å…¸
   `{}`
   ã€‚
2. **å¿…é¡»åŒ…å«
   `instruction`
   å’Œ
   `output`**
   ï¼Œ
   `input`
   å¯é€‰ã€‚
3. **`instruction`
   æ˜¯ç»™ AI çš„æŒ‡ä»¤ï¼Œ
   `output`
   æ˜¯æœŸæœ›çš„ AI è¾“å‡º**
   ã€‚
4. **`input`
   åªæœ‰åœ¨é¢å¤–ä¿¡æ¯éœ€è¦æä¾›æ—¶æ‰å¡«**
   ï¼ˆä¾‹å¦‚æœºå™¨ç¿»è¯‘ä»»åŠ¡ï¼‰ã€‚

---

### **2. ä½ å¯ä»¥ä½¿ç”¨å“ªäº› keyï¼Ÿå¦‚ä½•è®©å¤§æ¨¡å‹æ­£ç¡®å­¦ä¹ ï¼Ÿ**

#### **(1) åŸºç¡€çš„ä¸‰å…ƒç»“æ„**

* **æœ€é€šç”¨çš„æ ¼å¼**
  ï¼š

  ```json
  {
    "instruction": "è¯·ç¿»è¯‘è¿™å¥è¯ï¼š",
    "input": "The weather is great today.",
    "output": "ä»Šå¤©å¤©æ°”å¾ˆå¥½ã€‚"
  }

  ```
* é€‚ç”¨äºï¼š
  **å¯¹è¯æ•°æ®ã€ç¿»è¯‘ã€é—®ç­”ä»»åŠ¡**
  ã€‚

---

#### **(2) åªæœ‰ `instruction` å’Œ `output`**

* å¦‚æœä»»åŠ¡ä¸éœ€è¦é¢å¤–è¾“å…¥ï¼Œå¯ä»¥çœç•¥
  `input`
  ï¼š

  ```json
  {
    "instruction": "å†™ä¸€ä¸ªPythonå‡½æ•°ï¼Œè®¡ç®—å¹³æ–¹æ•°ã€‚",
    "output": "```python\ndef square(x):\n    return x * x\n```"
  }

  ```
* é€‚ç”¨äºï¼š
  **ä»£ç ç”Ÿæˆã€å¼€æ”¾æ€§é—®é¢˜ã€ä¸€èˆ¬é—®ç­”ä»»åŠ¡**
  ã€‚

---

#### **(3) åªæœ‰ `input` å’Œ `output` ï¼ˆæå°‘æ•°æƒ…å†µï¼‰**

* æŸäº›ä»»åŠ¡
  `instruction`
  å¯ä»¥çœç•¥ï¼š

  ```json
  {
    "input": "What is the capital of France?",
    "output": "Paris"
  }

  ```
* é€‚ç”¨äºï¼š
  **éƒ¨åˆ†é—®ç­”ä»»åŠ¡ã€æ— æ˜ç¡®æŒ‡ä»¤çš„æƒ…å†µ**
  ã€‚
* ä½†åœ¨ LLaMA-Factory é‡Œï¼Œ
  **é€šå¸¸
  `instruction`
  æ˜¯å¿…é¡»çš„**
  ï¼Œæ‰€ä»¥ä¸å»ºè®®è¿™ä¹ˆåšã€‚

---

### **3. å¦‚ä½•è‡ªå®šä¹‰æ•°æ®é›† keyï¼Ÿ**

å¦‚æœä½ æƒ³æ”¹ key çš„åå­—ï¼Œæ¯”å¦‚ä½ æƒ³ç”¨
`"query"`
ä»£æ›¿
`"instruction"`
ï¼Œé‚£ä½ éœ€è¦
**åœ¨
`LLaMA-Factory`
é‡Œä¿®æ”¹è§£æä»£ç **
ï¼Œå¦åˆ™æ¨¡å‹ä¸ä¼šæ­£ç¡®è¯†åˆ«ä½ çš„æ•°æ®ã€‚

ä½†
**æœ€ç®€å•çš„åšæ³•**
æ˜¯
**ä¿æŒ
`instruction`
ã€
`input`
ã€
`output`
è¿™ä¸‰ä¸ª key**
ï¼Œå› ä¸º LLaMA-Factory é»˜è®¤æ”¯æŒè¿™ç§æ ¼å¼ï¼Œä¸éœ€è¦é¢å¤–ä¿®æ”¹ä»£ç ã€‚

---

### **4. å¦‚ä½•ç¡®è®¤ä½ çš„æ•°æ®æ ¼å¼æ­£ç¡®ï¼Ÿ**

åœ¨
**è®­ç»ƒä¹‹å‰**
ï¼Œå¯ä»¥ç”¨ Python ä»£ç æ£€æŸ¥ JSON æ ¼å¼ï¼š

```python
import json

with open("your_dataset.json", "r", encoding="utf-8") as f:
    dataset = json.load(f)

for sample in dataset[:3]:  # åªæ£€æŸ¥å‰3æ¡æ•°æ®
    assert "instruction" in sample, "æ•°æ®ç¼ºå°‘ instruction å­—æ®µ"
    assert "output" in sample, "æ•°æ®ç¼ºå°‘ output å­—æ®µ"
    print(sample)

```

å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜æ ¼å¼æ­£ç¡®ã€‚

---

### **5. å…¶ä»–æ•°æ®æ ¼å¼ç¤ºä¾‹**

#### **(1) ç¿»è¯‘ä»»åŠ¡**

```json
[
  {
    "instruction": "è¯·æŠŠä»¥ä¸‹æ–‡æœ¬ç¿»è¯‘æˆæ³•è¯­ã€‚",
    "input": "Hello, how are you?",
    "output": "Bonjour, comment Ã§a va?"
  }
]

```

é€‚ç”¨äº
**æœºå™¨ç¿»è¯‘å¾®è°ƒ**
ã€‚

---

#### **(2) ä»£ç ç”Ÿæˆä»»åŠ¡**

```json
[
  {
    "instruction": "å†™ä¸€ä¸ª Python å‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯ç´ æ•°ã€‚",
    "input": "",
    "output": "```python\ndef is_prime(n):\n    if n < 2:\n        return False\n    for i in range(2, int(n ** 0.5) + 1):\n        if n % i == 0:\n            return False\n    return True```"
  }
]

```

é€‚ç”¨äº
**ä»£ç ç”Ÿæˆæ¨¡å‹å¾®è°ƒ**
ã€‚

---

#### **(3) æ–‡æœ¬æ‘˜è¦ä»»åŠ¡**

```json
[
  {
    "instruction": "è¯·æ€»ç»“ä»¥ä¸‹æ–‡ç« çš„ä¸»è¦å†…å®¹ã€‚",
    "input": "æœ€è¿‘äººå·¥æ™ºèƒ½æŠ€æœ¯å–å¾—äº†é‡å¤§çªç ´ï¼Œè®¸å¤šå…¬å¸å¼€å§‹æŠ•å…¥å¤§è§„æ¨¡æ¨¡å‹çš„ç ”ç©¶ã€‚",
    "output": "äººå·¥æ™ºèƒ½æŠ€æœ¯å‘å±•è¿…é€Ÿï¼Œå…¬å¸çº·çº·åŠ å¤§å¯¹å¤§æ¨¡å‹çš„æŠ•å…¥ã€‚"
  }
]

```

é€‚ç”¨äº
**æ–‡æœ¬æ‘˜è¦å¾®è°ƒ**
ã€‚

---

### **6. æ€»ç»“**

âœ…
**LLaMA-Factory è®­ç»ƒæ•°æ®é»˜è®¤ä½¿ç”¨
`instruction`
ã€
`input`
ã€
`output`
ä¸‰ä¸ª key**
ã€‚
  
âœ…
**ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®ï¼Œå¦åˆ™æ¨¡å‹æ— æ³•æ­£ç¡®å­¦ä¹ **
ã€‚
  
âœ…
**å¦‚æœè¦è‡ªå®šä¹‰ keyï¼Œå»ºè®®ä¿®æ”¹ LLaMA-Factory çš„ä»£ç ï¼ˆä¸æ¨èï¼‰**
ï¼Œæˆ–ä¿æŒé»˜è®¤æ ¼å¼ã€‚
  
âœ…
**æ•°æ®ç»“æ„è¦æ ¹æ®ä»»åŠ¡ç±»å‹è°ƒæ•´**
ï¼Œæ¯”å¦‚ï¼š

* é—®ç­”ã€é—²èŠï¼š
  `instruction`
  +
  `output`
* ç¿»è¯‘ä»»åŠ¡ï¼š
  `instruction`
  +
  `input`
  +
  `output`
* ä»£ç ç”Ÿæˆï¼š
  `instruction`
  +
  `output`
* æ–‡æœ¬æ‘˜è¦ï¼š
  `instruction`
  +
  `input`
  +
  `output`

ğŸ’¡
**ç»“è®ºï¼šå¦‚æœä½ æƒ³æ¢æ•°æ®é›†ï¼Œåªéœ€è¦ç”¨
`instruction`
ã€
`input`
ã€
`output`
ç»“æ„ç»„ç»‡æ•°æ®ï¼Œå¹¶æ›¿æ¢å†…å®¹ï¼Œå°±å¯ä»¥ç›´æ¥ç”¨äº LLaMA-Factory è®­ç»ƒï¼**
ğŸš€