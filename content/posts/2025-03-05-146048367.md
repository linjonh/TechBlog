---
layout: post
title: "elk单机版安装"
date: 2025-03-05 17:22:53 +0800
description: "完成上述步骤后，就可以通过访问`http://localhost:5601`在浏览器中打开Kibana界面，进行日志分析等操作。3. 安装完成后，配置`JAVA_HOME`环境变量。1. 检查系统是否已安装Java，如果未安装则需要安装Java 11或更高版本。### 安装Elasticsearch。### 安装Logstash。"
keywords: "elk单机版安装"
categories: ['未分类']
tags: ['运维', 'Jenkins']
artid: "146048367"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146048367
    alt: "elk单机版安装"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146048367
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146048367
cover: https://bing.ee123.net/img/rand?artid=146048367
image: https://bing.ee123.net/img/rand?artid=146048367
img: https://bing.ee123.net/img/rand?artid=146048367
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     elk单机版安装
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     在CentOS上单机搭建ELK 8.17的步骤如下：
    </p>
    <p>
     ### 安装Java环境
     <br/>
     1. 检查系统是否已安装Java，如果未安装则需要安装Java 11或更高版本。可以使用以下命令检查Java版本：
     <br/>
     ```bash
     <br/>
     java -version
     <br/>
     ```
     <br/>
     2. 如果系统没有安装Java，可使用`yum`命令安装OpenJDK 11：
     <br/>
     ```bash
     <br/>
     sudo yum install java-11-openjdk-devel
     <br/>
     ```
     <br/>
     3. 安装完成后，配置`JAVA_HOME`环境变量。打开`/etc/profile`文件，在文件末尾添加以下内容：
     <br/>
     ```bash
     <br/>
     export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-11.0.11.0.9-1.el7_9.x86_64
     <br/>
     export PATH=$PATH:$JAVA_HOME/bin
     <br/>
     ```
     <br/>
     4. 使环境变量生效：
     <br/>
     ```bash
     <br/>
     source /etc/profile
     <br/>
     ```
    </p>
    <p>
     ### 安装Elasticsearch
     <br/>
     1. 下载Elasticsearch 8.17的RPM包，可以从[Elasticsearch官方下载页面](https://www.elastic.co/downloads/elasticsearch)获取下载链接，然后使用`wget`命令下载，例如：
     <br/>
     ```bash
     <br/>
     wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.17.3-x86_64.rpm
     <br/>
     ```
     <br/>
     2. 安装Elasticsearch：
     <br/>
     ```bash
     <br/>
     sudo rpm -ivh elasticsearch-8.17.3-x86_64.rpm
     <br/>
     ```
     <br/>
     3. 编辑Elasticsearch配置文件`/etc/elasticsearch/elasticsearch.yml`，进行如下配置：
     <br/>
     ```yaml
     <br/>
     cluster.name: my-elk-cluster
     <br/>
     node.name: node-1
     <br/>
     network.host: 127.0.0.1
     <br/>
     http.port: 9200
     <br/>
     discovery.type: single-node
     <br/>
     ```
     <br/>
     4. 启动Elasticsearch服务：
     <br/>
     ```bash
     <br/>
     sudo systemctl start elasticsearch
     <br/>
     ```
     <br/>
     5. 设置Elasticsearch开机自启：
     <br/>
     ```bash
     <br/>
     sudo systemctl enable elasticsearch
     <br/>
     ```
    </p>
    <p>
     ### 安装Logstash
     <br/>
     1. 下载Logstash 8.17的RPM包，从[Logstash官方下载页面](https://www.elastic.co/downloads/logstash)获取链接后使用`wget`下载，例如：
     <br/>
     ```bash
     <br/>
     wget https://artifacts.elastic.co/downloads/logstash/logstash-8.17.3-x86_64.rpm
     <br/>
     ```
     <br/>
     2. 安装Logstash：
     <br/>
     ```bash
     <br/>
     sudo rpm -ivh logstash-8.17.3-x86_64.rpm
     <br/>
     ```
     <br/>
     3. 创建一个Logstash配置文件，例如`/etc/logstash/conf.d/my-logstash.conf`，内容如下：
     <br/>
     ```conf
     <br/>
     input {
     <!-- -->
     <br/>
     file {
     <!-- -->
     <br/>
     path =&gt; "/var/log/messages"
     <br/>
     start_position =&gt; "beginning"
     <br/>
     }
     <br/>
     }
     <br/>
     filter {
     <!-- -->
     <br/>
     grok {
     <!-- -->
     <br/>
     match =&gt; { "message" =&gt; "%{SYSLOGTIMESTAMP:timestamp} %{SYSLOGHOST:host} %{DATA:program}(?:\[%{PID:pid}\])?: %{GREEDYDATA:message}" }
     <br/>
     }
     <br/>
     date {
     <!-- -->
     <br/>
     match =&gt; [ "timestamp", "MMM  d HH:mm:ss", "MMM dd HH:mm:ss" ]
     <br/>
     }
     <br/>
     }
     <br/>
     output {
     <!-- -->
     <br/>
     elasticsearch {
     <!-- -->
     <br/>
     hosts =&gt; ["http://localhost:9200"]
     <br/>
     index =&gt; "logstash-%{+YYYY.MM.dd}"
     <br/>
     }
     <br/>
     stdout {
     <!-- -->
     <br/>
     codec =&gt; rubydebug
     <br/>
     }
     <br/>
     }
     <br/>
     ```
     <br/>
     4. 启动Logstash服务：
     <br/>
     ```bash
     <br/>
     sudo systemctl start logstash
     <br/>
     ```
     <br/>
     5. 设置Logstash开机自启：
     <br/>
     ```bash
     <br/>
     sudo systemctl enable logstash
     <br/>
     ```
    </p>
    <p>
     ### 安装Kibana
     <br/>
     1. 下载Kibana 8.17的RPM包，从[Kibana官方下载页面](https://www.elastic.co/downloads/kibana)获取链接后使用`wget`下载，例如：
     <br/>
     ```bash
     <br/>
     wget https://artifacts.elastic.co/downloads/kibana/kibana-8.17.3-x86_64.rpm
     <br/>
     ```
     <br/>
     2. 安装Kibana：
     <br/>
     ```bash
     <br/>
     sudo rpm -ivh kibana-8.17.3-x86_64.rpm
     <br/>
     ```
     <br/>
     3. 编辑Kibana配置文件`/etc/kibana/kibana.yml`，进行如下配置：
     <br/>
     ```yaml
     <br/>
     server.port: 5601
     <br/>
     server.host: "127.0.0.1"
     <br/>
     elasticsearch.hosts: ["http://localhost:9200"]
     <br/>
     ```
     <br/>
     4. 启动Kibana服务：
     <br/>
     ```bash
     <br/>
     sudo systemctl start kibana
     <br/>
     ```
     <br/>
     5. 设置Kibana开机自启：
     <br/>
     ```bash
     <br/>
     sudo systemctl enable kibana
     <br/>
     ```
    </p>
    <p>
     完成上述步骤后，就可以通过访问`http://localhost:5601`在浏览器中打开Kibana界面，进行日志分析等操作。
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f68756f79756e7368656e38382f:61727469636c652f64657461696c732f313436303438333637" class_="artid" style="display:none">
 </p>
</div>


