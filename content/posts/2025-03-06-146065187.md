---
layout: post
title: "å¦‚ä½•ç”¨HTML5-Canvaså®ç°ç”µå­ç­¾ååŠŸèƒ½"
date: 2025-03-06 14:50:37 +0800
description: "æœ¬æ–‡è¯¦ç»†è®²è§£åŸºäºHTML5 Canvaså®ç°ç”µå­ç­¾ååŠŸèƒ½ã€‚é€šè¿‡JavaScriptç›‘å¬é¼ æ ‡/è§¦æ‘¸äº‹ä»¶ï¼Œç»“åˆCanvasè·¯å¾„ç»˜åˆ¶èƒ½åŠ›ï¼Œå®Œæˆç­¾åè½¨è¿¹çš„å®æ—¶æ¸²æŸ“ã€‚ä»£ç å…¼å®¹PCä¸ç§»åŠ¨ç«¯ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œæä¾›ç¬”è§¦æ ·å¼é…ç½®ã€é«˜æ¸…å±é€‚é… ç­‰åœºæ™¯æä¾›è½»é‡çº§å‰ç«¯è§£å†³æ–¹æ¡ˆã€‚"
keywords: "htmlæ•°å­—ç­¾å"
categories: ['å‰ç«¯', 'Javascript', '2025']
tags: ['å‰ç«¯', 'Javascript', 'Html', 'Html', 'Canva']
artid: "146065187"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146065187
    alt: "å¦‚ä½•ç”¨HTML5-Canvaså®ç°ç”µå­ç­¾ååŠŸèƒ½"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146065187
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146065187
cover: https://bing.ee123.net/img/rand?artid=146065187
image: https://bing.ee123.net/img/rand?artid=146065187
img: https://bing.ee123.net/img/rand?artid=146065187
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     å¦‚ä½•ç”¨HTML5 Canvaså®ç°ç”µå­ç­¾ååŠŸèƒ½âœï¸
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/0d39c3a024a643c2a5bbef84b47b8b23.gif#pic_center"/>
    </p>
    <blockquote>
     <p>
      ğŸ¤– ä½œè€…ç®€ä»‹ï¼šæ°´ç…®ç™½èœç‹ï¼Œä¸€ä½å‰ç«¯åŠé€€å¸ˆ ğŸ‘»
      <br/>
      ğŸ‘€ æ–‡ç« ä¸“æ ï¼š
      <a href="https://blog.csdn.net/weixin_45511682/category_12694415.html">
       å‰ç«¯ä¸“æ 
      </a>
      ï¼Œè®°å½•ä¸€ä¸‹å¹³æ—¶åœ¨åšå®¢å†™ä½œä¸­ï¼Œæ€»ç»“å‡ºçš„ä¸€äº›å¼€å‘æŠ€å·§å’ŒçŸ¥è¯†å½’çº³æ€»ç»“âœã€‚
      <br/>
      æ„Ÿè°¢æ”¯æŒğŸ’•ğŸ’•ğŸ’•
     </p>
    </blockquote>
    <p>
     ğŸ–Œï¸ç”µå­ç­¾åä½œä¸ºæ•°å­—åŒ–è½¬å‹çš„é‡è¦ç¯èŠ‚ï¼Œåœ¨å‰ç«¯å¯é€šè¿‡HTML5 Canvasè½»æ¾å®ç°ã€‚æœ¬æ–‡å°†ä»¥HTML Deç¤ºä¾‹ğŸ¨ï¼Œæ‰‹æŠŠæ‰‹å¸¦æ‚¨å®Œæˆä¸€ä¸ªç”µå­ç­¾ååŠŸèƒ½ã€‚
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_12">
     </a>
     ä¸€ã€å®ç°åŸç†ä¸æ ¸å¿ƒæŠ€æœ¯
    </h2>
    <p>
     é€šè¿‡HTML5 Canvasçš„2Dç»˜å›¾ä¸Šä¸‹æ–‡å®ç°è½¨è¿¹æ•æ‰ï¼Œç»“åˆäº‹ä»¶ç›‘å¬å¤„ç†å®Œæˆæ ¸å¿ƒç»˜åˆ¶åŠŸèƒ½ã€‚å…³é”®æŠ€æœ¯ç‚¹åŒ…æ‹¬ï¼š
    </p>
    <ol>
     <li>
      Canvasç»˜å›¾APIï¼šPathè·¯å¾„æ“ä½œ
     </li>
     <li>
      äº‹ä»¶ç³»ç»Ÿï¼šé¼ æ ‡/è§¦æ‘¸äº‹ä»¶ç»Ÿä¸€å¤„ç†
     </li>
     <li>
      æ–‡ä»¶å¯¼å‡ºï¼šCanvasè½¬Blobå¯¹è±¡
     </li>
    </ol>
    <h2>
     <a id="_19">
     </a>
     äºŒã€æ ¸å¿ƒä»£ç å®ç°è§£æ
    </h2>
    <h3>
     <a id="21__20">
     </a>
     2.1 ç”»å¸ƒåˆå§‹åŒ–
    </h3>
    <p>
     è®¾ç½®600x300ç”»å¸ƒå¹¶è·å–2Dä¸Šä¸‹æ–‡ï¼Œå»ºè®®æ ¹æ®å±å¹•å°ºå¯¸åŠ¨æ€è°ƒæ•´ç”»å¸ƒå¤§å°ã€‚
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="22__28">
     </a>
     2.2 ç”»ç¬”æ ·å¼é…ç½®
    </h3>
    <p>
     é€šè¿‡lineCapå’ŒlineJoinå®ç°è‡ªç„¶çš„æ‰‹å†™æ•ˆæœã€‚
    </p>
    <pre><code class="prism language-javascript">ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">'round'</span><span class="token punctuation">;</span> <span class="token comment">// åœ†è§’çº¿å¤´</span>
ctx<span class="token punctuation">.</span>lineJoin <span class="token operator">=</span> <span class="token string">'round'</span><span class="token punctuation">;</span> <span class="token comment">// åœ†è§’è¿æ¥</span>
</code></pre>
    <h3>
     <a id="23__37">
     </a>
     2.3 è®¾å¤‡å…¼å®¹å¤„ç†
    </h3>
    <p>
     é€šè¿‡UAæ£€æµ‹è‡ªåŠ¨åˆ‡æ¢è§¦æ‘¸/é¼ æ ‡äº‹ä»¶ï¼Œå®é™…é¡¹ç›®ä¸­å»ºè®®ä½¿ç”¨pointer eventså®ç°æ›´ä¼˜é›…çš„å…¼å®¹ã€‚
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> mobileStatus <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Mobile|Android|iPhone</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="24__43">
     </a>
     2.4 ç»˜åˆ¶é€»è¾‘å®ç°
    </h3>
    <h4>
     <a id="_44">
     </a>
     èµ·ç¬”ç›‘å¬ï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> pos <span class="token operator">=</span> mobileStatus <span class="token operator">?</span> event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> event<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span> pos<span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>mobileStatus <span class="token operator">?</span> <span class="token string">'touchmove'</span> <span class="token operator">:</span> <span class="token string">'mousemove'</span><span class="token punctuation">,</span> draw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_55">
     </a>
     ç§»åŠ¨ç»˜åˆ¶ï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> pos <span class="token operator">=</span> mobileStatus <span class="token operator">?</span> event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> event<span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span> pos<span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®æ—¶æ¸²æŸ“è·¯å¾„</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_64">
     </a>
     æ”¶ç¬”å¤„ç†ï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">closeDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> draw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="25__71">
     </a>
     2.5 åŠŸèƒ½æŒ‰é’®å®ç°
    </h3>
    <h4>
     <a id="_72">
     </a>
     æ¸…ç©ºç”»å¸ƒï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_80">
     </a>
     ä¿å­˜ç­¾åï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token parameter">blob</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_93">
     </a>
     å¯åŠ æ’¤é”€åŠŸèƒ½ï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> history <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// ç»˜åˆ¶æ—¶ä¿å­˜çŠ¶æ€</span>
history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>history<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    history<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>history<span class="token punctuation">[</span>history<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre>
    <h2>
     <a id="_110">
     </a>
     ä¸‰ã€æ³¨æ„äº‹é¡¹
    </h2>
    <ol>
     <li>
      æ€§èƒ½ä¼˜åŒ–ï¼šå¤§æ•°æ®é‡ç»˜åˆ¶å»ºè®®ä½¿ç”¨requestAnimationFrame
     </li>
     <li>
      è·¨åŸŸé—®é¢˜ï¼šè‹¥æ¶‰åŠå›¾ç‰‡åˆæˆéœ€è®¾ç½®crossOrigin=â€œanonymousâ€
     </li>
     <li>
      ç§»åŠ¨ç«¯é€‚é…ï¼šæ·»åŠ CSSæ ·å¼é˜²æ­¢è§¦æ‘¸æ»šåŠ¨
     </li>
    </ol>
    <pre><code class="prism language-html">canvas {
  touch-action: none;
  background: #f8f8f8;
}
</code></pre>
    <h2>
     <a id="_123">
     </a>
     å››ã€å®Œæ•´ä»£ç ç¤ºä¾‹
    </h2>
    <p>
    </p>
    <div class="inscode-box">
     <iframe allowfullscreen="allowfullscreen" frameborder="no" height="500px" sandbox="allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals" scrolling="no" src="https://inscode.csdn.net/@weixin_45511682/canvas-sign/embed" width="100%">
     </iframe>
    </div>
    <p>
    </p>
    <pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
            <span class="token selector">*</span> <span class="token punctuation">{<!-- --></span>
                <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">button</span> <span class="token punctuation">{<!-- --></span> 
                <span class="token property">padding</span><span class="token punctuation">:</span> 3px 5px<span class="token punctuation">;</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sign<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>å–æ¶ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ä¿å­˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>borderRadius <span class="token operator">=</span> <span class="token string">'5px'</span><span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'1px solid #a6a9ad'</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// é«˜æ¸…å±é€‚é…</span>
        <span class="token keyword">const</span> scale <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">600</span> <span class="token operator">*</span> scale<span class="token punctuation">;</span>
        canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span> <span class="token operator">*</span> scale<span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span>

        ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//çº¿å®½</span>
        ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'black'</span><span class="token punctuation">;</span> <span class="token comment">//çº¿é¢œè‰²</span>
        ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">'round'</span><span class="token punctuation">;</span> <span class="token comment">//çº¿æ¡çš„ç»“æŸç«¯ç‚¹æ ·å¼</span>
        ctx<span class="token punctuation">.</span>lineJoin <span class="token operator">=</span> <span class="token string">'round'</span><span class="token punctuation">;</span> <span class="token comment">//ä¸¤æ¡çº¿ç›¸äº¤æ—¶ï¼Œæ‰€åˆ›å»ºçš„æ‹è§’ç±»å‹</span>

		<span class="token comment">// æ£€æµ‹ç§»åŠ¨è®¾å¤‡</span>
        <span class="token keyword">const</span> mobileStatus <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Mobile|Android|iPhone</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> <span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> offsetX<span class="token punctuation">,</span> offsetY<span class="token punctuation">,</span> pageX<span class="token punctuation">,</span> pageY <span class="token punctuation">}</span> <span class="token operator">=</span> mobileStatus
                <span class="token operator">?</span> event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                <span class="token operator">:</span> event<span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//èµ·å§‹ä¸€æ¡è·¯å¾„ï¼Œæˆ–é‡ç½®å½“å‰è·¯å¾„</span>
            ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>pageX<span class="token punctuation">,</span> pageY<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æŠŠè·¯å¾„ç§»åŠ¨åˆ°ç”»å¸ƒä¸­çš„æŒ‡å®šç‚¹ï¼Œä¸åˆ›å»ºçº¿æ¡</span>
            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>mobileStatus <span class="token operator">?</span> <span class="token string">'touchmove'</span> <span class="token operator">:</span> <span class="token string">'mousemove'</span><span class="token punctuation">,</span> draw<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> <span class="token function-variable function">draw</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> pageX<span class="token punctuation">,</span> pageY <span class="token punctuation">}</span> <span class="token operator">=</span> mobileStatus <span class="token operator">?</span> event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> event<span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>pageX<span class="token punctuation">,</span> pageY<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ·»åŠ ä¸€ä¸ªæ–°ç‚¹ï¼Œç„¶ååœ¨ç”»å¸ƒä¸­åˆ›å»ºä»è¯¥ç‚¹åˆ°æœ€åæŒ‡å®šç‚¹çš„çº¿æ¡</span>
            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ç»˜åˆ¶å·²å®šä¹‰çš„è·¯å¾„</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token function-variable function">cloaseDraw</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> draw<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>mobileStatus <span class="token operator">?</span> <span class="token string">'touchstart'</span> <span class="token operator">:</span> <span class="token string">'mousedown'</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>mobileStatus <span class="token operator">?</span> <span class="token string">'touchend'</span> <span class="token operator">:</span> <span class="token string">'mouseup'</span><span class="token punctuation">,</span> cloaseDraw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> <span class="token function-variable function">cancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åœ¨ç»™å®šçš„çŸ©å½¢å†…æ¸…é™¤æŒ‡å®šçš„åƒç´ </span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> <span class="token function-variable function">save</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">const</span> date <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                a<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>date<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                a<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
                a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                a<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>


</code></pre>
    <p>
     å®é™…é¡¹ç›®ä¸­éœ€ç»“åˆåç«¯å®ç°ç­¾åéªŒè¯ã€æ·»åŠ æ—¶é—´æˆ³ç­‰æ‰©å±•åŠŸèƒ½ã€‚å¯ç»§ç»­ä¸°å¯Œä»£ç é€»è¾‘ï¼š
    </p>
    <ol start="5">
     <li>
      æ·»åŠ Base64å¯¼å‡ºåŠŸèƒ½
     </li>
     <li>
      å®ç°ç¬”é”‹æ•ˆæœï¼ˆé€šè¿‡é€Ÿåº¦è®¡ç®—çº¿å®½ï¼‰
     </li>
     <li>
      æ·»åŠ æœ¬åœ°å­˜å‚¨è‡ªåŠ¨ä¿å­˜
     </li>
    </ol>
    <p>
     Canvasçš„ç»˜å›¾èƒ½åŠ›è¿˜èƒ½å»¶ä¼¸åº”ç”¨äºæ‰‹å†™ç¬”è®°ã€ç”µå­æ‰¹æ³¨ç­‰åœºæ™¯ã€‚
    </p>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/dd89a0e5fb7e4127bfc8f5845cd5b1a8.gif#pic_center">
      <br/>
      å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµ ğŸ‘ã€æ”¶è— ğŸ‘ å¹¶å…³æ³¨æˆ‘ï¼ğŸ‘€
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/8c3262cc0cbb4faa8d255526766834ae.gif#pic_center"/>
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353531313638322f:61727469636c652f64657461696c732f313436303635313837" class_="artid" style="display:none">
 </p>
</div>


