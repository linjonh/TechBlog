---
layout: post
title: "autodl下载hf-mirror数据"
date: 2025-03-16 14:16:54 +0800
description: "本文的需求是复现下载自动驾驶的transfuser：项目首页 - transfuser:[PAMI'23] TransFuser: Imitation with Transformer-Based Sensor Fusion for Autonomous Driving;"
keywords: "autodl下载hf-mirror数据"
categories: ['未分类']
tags: ['自动驾驶', '服务器', 'Transformer']
artid: "146294013"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146294013
    alt: "autodl下载hf-mirror数据"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146294013
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146294013
cover: https://bing.ee123.net/img/rand?artid=146294013
image: https://bing.ee123.net/img/rand?artid=146294013
img: https://bing.ee123.net/img/rand?artid=146294013
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     autodl下载hf-mirror数据
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
     背景
    </h3>
    <h4>
     使用工具
    </h4>
    <p>
     服务器：
     <a href="https://www.autodl.com/home" rel="nofollow" title="AutoDL算力云 | 弹性、好用、省钱。租GPU就上AutoDL">
      AutoDL算力云 | 弹性、好用、省钱。租GPU就上AutoDL
     </a>
    </p>
    <p>
     镜像数据集：
     <a href="https://hf-mirror.com/" rel="nofollow" title="HF-Mirror">
      HF-Mirror
     </a>
    </p>
    <h4>
     需求介绍
    </h4>
    <p>
     本文的需求是复现下载自动驾驶的transfuser：
    </p>
    <p>
     项目：
     <a href="https://gitcode.com/gh_mirrors/tr/transfuser" title="项目首页 - transfuser:[PAMI'23] TransFuser: Imitation with Transformer-Based Sensor Fusion for Autonomous Driving; [CVPR'21] Multi-Modal Fusion Transformer for End-to-End Autonomous Driving - GitCode">
      项目首页 - transfuser:[PAMI'23] TransFuser: Imitation with Transformer-Based Sensor Fusion for Autonomous Driving; [CVPR'21] Multi-Modal Fusion Transformer for End-to-End Autonomous Driving - GitCode
     </a>
    </p>
    <p>
     数据集：
     <a href="https://hf-mirror.com/datasets/mmahdavi/carla_1.8m/tree/main" rel="nofollow" title="mmahdavi/carla_1.8m at main">
      mmahdavi/carla_1.8m at main
     </a>
    </p>
    <h3>
     开始
    </h3>
    <h4>
     步骤0：准备
    </h4>
    <p>
     进入AutoDL的服务器，其中 autodl-tmp 是存放数据的，transfu
    </p>
    <p>
     <img alt="" height="649" src="https://i-blog.csdnimg.cn/direct/dd94bcdccd6f4c6baad0a523777b2e3b.png" width="1821"/>
    </p>
    <p>
     AutoDL学术资源加速：
    </p>
    <p>
     source /etc/network_turbo
    </p>
    <p>
     更新软件源列表：
    </p>
    <p>
     sudo apt update
    </p>
    <p>
     进入数据盘，准备下载数据：
    </p>
    <p>
     cd autodl-tmp/
    </p>
    <p>
     本次拟采用：hf-mirror 的方法三（基于
     <code>
      hfd
     </code>
     工具）下载数据集
     <a href="https://hf-mirror.com/datasets/mmahdavi/carla_1.8m/tree/main" rel="nofollow" title="mmahdavi/carla_1.8m">
      mmahdavi/carla_1.8m
     </a>
     ，需按照以下步骤操作：
    </p>
    <h4>
     <strong>
      步骤 1：下载并配置
      <code>
       hfd
      </code>
      工具
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        下载
        <code>
         hfd
        </code>
        脚本
       </strong>
       ：
      </p>
      <pre>wget https://hf-mirror.com/hfd/hfd.sh
chmod a+x hfd.sh  # 赋予执行权限</pre>
      <ul>
       <li>
        <p>
         这是
         <code>
          hfd
         </code>
         工具的官方脚本，支持高效下载8。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        设置镜像环境变量
       </strong>
       ：
      </p>
      <pre>export HF_ENDPOINT=https://hf-mirror.com  # 临时生效</pre>
      <ul>
       <li>
        <p>
         若需永久生效，可将此行写入
         <code>
          ~/.bashrc
         </code>
         或
         <code>
          ~/.zshrc
         </code>
         文件810。
        </p>
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <strong>
      步骤 2：下载
     </strong>
     <code>
      aria2
     </code>
    </h4>
    <p>
     <img alt="" height="680" src="https://i-blog.csdnimg.cn/direct/7ab3a05d2702429ba228869bcc380f77.png" width="1165"/>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        依赖安装
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         若使用
         <code>
          aria2
         </code>
         ，需提前安装：
        </p>
        <pre>sudo apt-get install aria2  # Ubuntu/Debian
</pre>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        权限问题
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         若下载目录需要权限（如
         <code>
          /root
         </code>
         ），需在命令前加
         <code>
          sudo
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ol>
    <p>
     <strong>
      步骤 3：执行下载命令
     </strong>
    </p>
    <p>
     <img alt="" height="577" src="https://i-blog.csdnimg.cn/direct/e5c48be6468c4ad495075c319cfde013.png" width="1354"/>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        下载数据集
       </strong>
       ：
      </p>
      <pre>./hfd.sh mmahdavi/carla_1.8m --dataset --tool aria2c -x 4
./hfd.sh mmahdavi/carla_1.8m --dataset --tool aria2c -x 4 --include "Scenario1.zip"  # 下载指定文件
</pre>
     </li>
     <li>
      说明
      <ul>
       <li>
        <p>
         <strong>
          参数说明
         </strong>
         ：
        </p>
        <ul>
         <li>
          <p>
           <code>
            --dataset
           </code>
           : 指定下载类型为数据集（默认是模型）8。
          </p>
         </li>
         <li>
          <p>
           <code>
            --tool aria2c
           </code>
           : 使用
           <code>
            aria2
           </code>
           多线程下载工具加速（需提前安装
           <code>
            aria2
           </code>
           ）8。
          </p>
         </li>
         <li>
          <p>
           <code>
            -x 4
           </code>
           : 指定并行下载线程数（建议设为 4-8）8。
          </p>
         </li>
        </ul>
       </li>
       <li>
        <p>
         <strong>
          若未安装
          <code>
           aria2
          </code>
         </strong>
         ，可省略
         <code>
          --tool
         </code>
         参数，默认使用
         <code>
          wget
         </code>
         ：
        </p>
        <pre>./hfd.sh mmahdavi/carla_1.8m --dataset</pre>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        指定下载目录
       </strong>
       （可选）：
      </p>
      <pre>./hfd.sh mmahdavi/carla_1.8m --dataset --local-dir ./carla_data</pre>
      <ul>
       <li>
        <p>
         <code>
          --local-dir
         </code>
         : 自定义本地存储路径（默认保存到当前目录）8。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        数据集完整性验证
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         下载完成后，检查目标目录中的文件是否完整：
        </p>
        <pre>ls -l ./carla_data  # 查看文件列表
du -sh ./carla_data # 查看总大小
</pre>
       </li>
      </ul>
     </li>
    </ol>
    <p>
     <strong>
      步骤4：解压文件
     </strong>
    </p>
    <p>
     确保系统已安装
     <code>
      unzip
     </code>
     ：
    </p>
    <pre># Ubuntu/Debian
sudo apt-get install unzip</pre>
    <p>
     直接解压到当前目录：
    </p>
    <pre>unzip Scenario1.zip</pre>
    <p>
     或指定解压到目标目录（如
     <code>
      scenario1_data
     </code>
     ）：
    </p>
    <pre>unzip Scenario1.zip -d scenario1_data</pre>
    <p>
    </p>
    <h3>
     下载结果
    </h3>
    <p>
     下载指定文件
    </p>
    <p>
     <img alt="" height="1411" src="https://i-blog.csdnimg.cn/direct/f562c49cbc514d179a928f3b3f1217e2.png" width="2488"/>
    </p>
    <p>
     下载全部文件
    </p>
    <p>
     <img alt="" height="1656" src="https://i-blog.csdnimg.cn/direct/e83d1239aa214adcbf157ab0a985987b.png" width="3294"/>
    </p>
    <p>
     解压数据
    </p>
    <p>
     <img alt="" height="753" src="https://i-blog.csdnimg.cn/direct/dd3dcdb2f48a46f8b8a32f269fe47f17.png" width="1794"/>
    </p>
    <p>
     <img alt="" height="763" src="https://i-blog.csdnimg.cn/direct/2cd5cb0340a34faa9f0ebd6dfb48cc78.png" width="1829"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f4b6174686572696e655f6a6176612f:61727469636c652f64657461696c732f313436323934303133" class_="artid" style="display:none">
 </p>
</div>


