---
layout: post
title: "LOWORDwParam-与-HIWORDwParam-详解"
date: 2025-03-13 17:46:00 +0800
description: "​。"
keywords: "hiword loword组合使用"
categories: ['从入门到精通', 'Visual', 'C', '2017']
tags: ['Win', 'Loword', 'Hiword']
artid: "146238289"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146238289
    alt: "LOWORDwParam-与-HIWORDwParam-详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146238289
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146238289
cover: https://bing.ee123.net/img/rand?artid=146238289
image: https://bing.ee123.net/img/rand?artid=146238289
img: https://bing.ee123.net/img/rand?artid=146238289
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     LOWORD(wParam) 与 HIWORD(wParam) 详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     书籍：《Visual C++ 2017从入门到精通》的2.3.8 Win32控件编程
    </p>
    <p>
     环境：visual studio 2022
    </p>
    <p>
     内容：【例2.29】模拟对话框
    </p>
    <p>
     说明：以下内容大部分来自腾讯元宝。
    </p>
    <p>
    </p>
    <h3>
     ​
     <strong>
      1. 基本概念与作用
     </strong>
    </h3>
    <p>
     <code>
      LOWORD
     </code>
     和
     <code>
      HIWORD
     </code>
     是 Windows API 中用于分解 32 位参数的宏，主要用于解析
     <code>
      wParam
     </code>
     或
     <code>
      lParam
     </code>
     的高低 16 位数据。其核心功能包括：
    </p>
    <ul>
     <li>
      ​
      <strong>
       数据拆分
      </strong>
      ：将 32 位整数拆分为低 16 位（
      <code>
       LOWORD
      </code>
      ）和高 16 位（
      <code>
       HIWORD
      </code>
      ），便于分别处理不同部分的信息。
     </li>
     <li>
      ​
      <strong>
       消息解析
      </strong>
      ：在 Windows 消息处理中，
      <code>
       wParam
      </code>
      和
      <code>
       lParam
      </code>
      常携带复合信息，通过这两个宏可快速提取关键参数（如控件 ID、通知码、坐标等）。
     </li>
    </ul>
    <h3>
     ​
     <strong>
      2. 宏定义与实现
     </strong>
    </h3>
    <ul>
     <li>
      <p>
       ​
       <strong>
        LOWORD
       </strong>
       <br/>
       宏定义：
      </p>
      <pre><code class="language-cpp">#define LOWORD(l) ((WORD)(l)) </code></pre>
      <p>
       作用：提取
       <code>
        l
       </code>
       的
       <span style="color:#fe2c24">
        低 16 位
       </span>
       （即右边的 16 位），结果为
       <code>
        WORD
       </code>
       类型（0~65535）。
      </p>
      示例：若
      <code>
       wParam = 0x12345678
      </code>
      ，则
      <code>
       LOWORD(wParam) = 0x5678
      </code>
      。
     </li>
     <li>
      <p>
       ​
       <strong>
        HIWORD
       </strong>
       <br/>
       宏定义：
      </p>
      <pre><code class="language-cpp">#define HIWORD(l) ((WORD)(((DWORD)(l) &gt;&gt; 16) &amp; 0xFFFF)) </code></pre>
      <p>
       作用：提取
       <code>
        l
       </code>
       的
       <span style="color:#fe2c24">
        高 16 位
       </span>
       （即左边的 16 位），结果为
       <code>
        WORD
       </code>
       类型。
      </p>
      示例：若
      <code>
       wParam = 0x12345678
      </code>
      ，则
      <code>
       HIWORD(wParam) = 0x1234
      </code>
      。
     </li>
    </ul>
    <hr/>
    <h3>
     ​
     <strong>
      3. 在消息处理中的应用
     </strong>
    </h3>
    <p>
     Windows 消息（如
     <code>
      WM_COMMAND
     </code>
     、
     <code>
      WM_MOUSEWHEEL
     </code>
     等）的
     <code>
      wParam
     </code>
     和
     <code>
      lParam
     </code>
     常通过这两个宏传递复合信息，典型场景包括：
    </p>
    <ol>
     <li>
      <p>
       ​**
       <code>
        WM_COMMAND
       </code>
       消息**
      </p>
      <ul>
       <li>
        ​
        <strong>
         LOWORD(wParam)
        </strong>
        ：控件 ID（如按钮、菜单项的标识符）。
       </li>
       <li>
        ​
        <strong>
         HIWORD(wParam)
        </strong>
        ：通知码（标识具体事件类型，如按钮点击
        <code>
         BN_CLICKED
        </code>
        ）。
        <br/>
        ​
        <strong>
         示例
        </strong>
        ：
       </li>
      </ul>
      <pre><code class="language-cpp">case WM_COMMAND:
    if (LOWORD(wParam) == IDOK) { // 按钮 ID 为 IDOK
        if (HIWORD(wParam) == BN_CLICKED) { // 通知码为点击事件
            // 处理确定按钮点击
        }
    }
    break;</code></pre>
     </li>
     <li>
      <p>
       ​**
       <code>
        WM_MOUSEWHEEL
       </code>
       消息**
      </p>
      <ul>
       <li>
        ​
        <strong>
         LOWORD(wParam)
        </strong>
        ：指示鼠标键及组合键状态（如
        <code>
         MK_CONTROL
        </code>
        ）。
       </li>
       <li>
        ​
        <strong>
         HIWORD(wParam)
        </strong>
        ：滚轮滚动量（120 表示向上滚动一行）。
        <br/>
        ​
        <strong>
         示例
        </strong>
        ：
       </li>
      </ul>
      <pre><code class="language-cpp">case WM_MOUSEWHEEL:
    int zDelta = HIWORD(wParam); // 获取滚动量
    if (LOWORD(wParam) &amp; MK_CONTROL) { // 检测是否按住 Ctrl 键
        // 按住 Ctrl 时的特殊处理
    }
    break;</code></pre>
     </li>
     <li>
      <p>
       ​
       <strong>
        滚动条消息（
        <code>
         WM_VSCROLL
        </code>
        /
        <code>
         WM_HSCROLL
        </code>
        ）​
       </strong>
      </p>
      <ul>
       <li>
        ​
        <strong>
         LOWORD(wParam)
        </strong>
        ：滚动操作类型（如
        <code>
         SB_THUMBTRACK
        </code>
        表示拖动滑块）。
       </li>
       <li>
        ​
        <strong>
         HIWORD(wParam)
        </strong>
        ：附加参数（如滚动步长）。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h3 style="background-color:transparent">
     ​
     <strong>
      4. 典型应用场景
     </strong>
    </h3>
    <ol>
     <li>
      <p>
       ​
       <strong>
        控件事件处理
       </strong>
       <br/>
       通过
       <code>
        LOWORD
       </code>
       和
       <code>
        HIWORD
       </code>
       快速定位控件 ID 和事件类型，避免手动位运算。
      </p>
      <pre><code class="language-cpp">case WM_COMMAND:
    if (HIWORD(wParam) == BN_CLICKED) {
        switch (LOWORD(wParam)) {
            case IDC_BUTTON1: // 处理按钮1点击
                break;
            case IDC_BUTTON2: // 处理按钮2点击
                break;
        }
    }
    break;</code></pre>
     </li>
     <li>
      <p>
       ​
       <strong>
        坐标解析
       </strong>
       <br/>
       在鼠标消息（如
       <code>
        WM_LBUTTONDOWN
       </code>
       ）中，
       <code>
        lParam
       </code>
       包含坐标信息，需通过
       <code>
        LOWORD
       </code>
       和
       <code>
        HIWORD
       </code>
       分离：
      </p>
      <pre><code class="language-cpp">case WM_LBUTTONDOWN:
    int x = LOWORD(lParam); // 客户区 X 坐标
    int y = HIWORD(lParam); // 客户区 Y 坐标
    break;</code></pre>
     </li>
     <li>
      <p>
       ​
       <strong>
        菜单与加速键
       </strong>
      </p>
      <ul>
       <li>
        ​
        <strong>
         菜单消息
        </strong>
        ：
        <code>
         LOWORD(wParam)
        </code>
        为菜单项 ID，
        <code>
         HIWORD
        </code>
        为选择标识。
       </li>
       <li>
        ​
        <strong>
         加速键
        </strong>
        ：
        <code>
         LOWORD(wParam)
        </code>
        为加速键 ID，
        <code>
         HIWORD
        </code>
        为标志（如
        <code>
         1
        </code>
        表示加速键）。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h3>
     ​
     <strong>
      5. 注意事项
     </strong>
    </h3>
    <ul>
     <li>
      ​
      <strong>
       数据范围
      </strong>
      ：
      <code>
       LOWORD
      </code>
      和
      <code>
       HIWORD
      </code>
      的结果均为
      <code>
       WORD
      </code>
      类型（0~65535），超出范围会导致截断。
     </li>
     <li>
      ​
      <strong>
       跨平台兼容性
      </strong>
      ：这两个宏是 Windows 特有实现，移植到其他系统需自行实现类似逻辑。
     </li>
     <li>
      ​
      <strong>
       消息类型差异
      </strong>
      ：不同消息的
      <code>
       wParam
      </code>
      和
      <code>
       lParam
      </code>
      含义不同，需结合具体消息类型解析。
     </li>
    </ul>
    <hr/>
    <p>
     ​
     <strong>
      总结
     </strong>
    </p>
    <p>
     <code>
      LOWORD
     </code>
     和
     <code>
      HIWORD
     </code>
     是 Windows 编程中解析消息参数的核心工具，通过拆分 32 位数据简化了控件交互、事件处理等场景的逻辑。开发者需根据具体消息类型，合理利用这两个宏提取关键信息，同时注意数据范围和跨平台限制。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f32303732353232312f:61727469636c652f64657461696c732f313436323338323839" class_="artid" style="display:none">
 </p>
</div>


