---
layout: post
title: "IOS兼容-uniapp-ios固定定位失效与刘海屏的坑"
date: 2025-03-14 14:32:02 +0800
description: "fixed在某些情况下可能导致容器内的子元素的1px边框线消失，即使使用z-index也无法解决。解决方法：可以使用translateZ属性来解决ios下，fixed定位的容器内不能带有input等可以唤起键盘的元素。解决方法： 在input聚焦唤起键盘时会去掉fixed定位状态，改为absolute。尽量不要在可滚动的容器内包含fixed定位的子元素且ios不支持onresize事件。"
keywords: "IOS兼容 - uniapp ios固定定位失效与刘海屏的坑"
categories: ['未分类']
tags: ['Ios', 'Cocoa', 'App']
artid: "130990368"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=130990368
    alt: "IOS兼容-uniapp-ios固定定位失效与刘海屏的坑"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=130990368
featuredImagePreview: https://bing.ee123.net/img/rand?artid=130990368
cover: https://bing.ee123.net/img/rand?artid=130990368
image: https://bing.ee123.net/img/rand?artid=130990368
img: https://bing.ee123.net/img/rand?artid=130990368
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     IOS兼容 - uniapp ios固定定位失效与刘海屏的坑
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     问题描述
    </h2>
    <p>
     uniapp 一套代码，打包之后安卓可以正常显示版本号，IOS不可以
     <br/>
     错误现象：IOS只有滚动到屏幕底部才能看到版本号
    </p>
    <h2>
     <a id="_3">
     </a>
     原因分析：
    </h2>
    <blockquote>
     <p>
      <code>
       IOS
      </code>
      设计更希望屏幕跟随着用户滚动而滚动，所以无法实现相对浏览器窗口的固定定位。
      <br/>
      <code>
       IOS
      </code>
      实现的功能是相对最近的允许滚动的元素定位，且不能遮罩滚动元素的兄弟吉父元素的兄弟元素。
     </p>
    </blockquote>
    <p>
     <strong>
      一般情况：
     </strong>
     <br/>
     固定定位是相对于浏览器窗口，且可以使页面中的某个元素不随浏览器的滚动而消失
    </p>
    <p>
     <strong>
      IOS固定定位
     </strong>
     <br/>
     固定定位相对于滚动元素，且可以随着屏幕滚动而消失
     <br/>
     IOS的固定定位等同于它是
     <code>
      相对滚动元素
     </code>
     固定位置（类似于absolute定位）
    </p>
    <h2>
     <a id="_13">
     </a>
     解决方案：
    </h2>
    <blockquote>
     <p>
      如果需要浏览器的窗口定位，需要保证当前父元素不能添加滚动样式，才可实现固定定位。
     </p>
    </blockquote>
    <p>
     将需要固定（position:fixed）的元素放在拥有滚动元素的外面即可，例如旋转transform/滚动条/轮播图scroll-view组件等等。
    </p>
    <p>
     方案一：直接看成absolete定位，相对body作为父元素，使用绝对定位定位进行定位（较为繁杂）
    </p>
    <p>
     方案二：隔离处理
     <br/>
     将需要滚动的主体和固定的部分，分别用两个容器去写即可。
    </p>
    <pre><code class="prism language-javascript"> <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'warper'</span><span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'main'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"bottom"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre>
    <pre><code class="prism language-javascript">css部分
<span class="token punctuation">.</span>main<span class="token punctuation">{<!-- --></span>
      overflow<span class="token operator">-</span>y<span class="token operator">:</span> scroll<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">.</span>bottom<span class="token punctuation">{<!-- --></span> 
    <span class="token literal-property property">position</span><span class="token operator">:</span>fixed<span class="token punctuation">;</span>
    <span class="token literal-property property">bottom</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      总结：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       fixed在某些情况下可能导致容器内的子元素的1px边框线消失，即使使用z-index也无法解决。
       <br/>
       解决方法：可以使用translateZ属性来解决
      </p>
     </li>
     <li>
      <p>
       ios下，fixed定位的容器内不能带有input等可以唤起键盘的元素。
       <br/>
       解决方法： 在input聚焦唤起键盘时会去掉fixed定位状态，改为absolute。
      </p>
     </li>
     <li>
      <p>
       尽量不要在可滚动的容器内包含fixed定位的子元素且ios不支持onresize事件
      </p>
     </li>
    </ol>
    <p>
     参考文章：https://blog.csdn.net/surui0419/article/details/128082238
     <br/>
     https://blog.csdn.net/weixin_34357887/article/details/88016424
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e63:73646e2e6e65742f70696b617169755f6b6f6d6f726562692f:61727469636c652f64657461696c732f313330393930333638" class_="artid" style="display:none">
 </p>
</div>


