---
layout: post
title: "LeetCodeçƒ­é¢˜-100238.-é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯"
date: 2025-08-26T07:56:54+0800
description: "ä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨ã€‚ä½¿ç”¨å‰ç¼€å’Œåç¼€æ•°ç»„å¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™ä¸ºO(n)ç›´æ¥è®¡ç®—æ¯ä¸ªä½ç½®çš„ä¹˜ç§¯éœ€è¦O(nÂ²)æ—¶é—´ã€‚æœ€ç»ˆç»“æœ = å·¦è¾¹ä¹˜ç§¯ Ã— å³è¾¹ä¹˜ç§¯ã€‚ï¼Œå»æ‰æ¯ä¸ªä½ç½®è‡ªèº«åå¾—åˆ°æ­£ç¡®ç»“æœã€‚ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ã€‚é¿å…äº†é‡å¤è®¡ç®—ï¼Œæé«˜äº†æ•ˆç‡ã€‚æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚"
keywords: "LeetCodeçƒ­é¢˜ 100â€”â€”238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯"
categories: ['åˆ†æ²»']
tags: ['èŒåœºå’Œå‘å±•', 'ç®—æ³•', 'Leetcode']
artid: "150842467"
arturl: "https://blog.csdn.net/2401_83177222/article/details/150842467"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=150842467
    alt: "LeetCodeçƒ­é¢˜-100238.-é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=150842467
featuredImagePreview: https://bing.ee123.net/img/rand?artid=150842467
cover: https://bing.ee123.net/img/rand?artid=150842467
image: https://bing.ee123.net/img/rand?artid=150842467
img: https://bing.ee123.net/img/rand?artid=150842467
---



# LeetCodeçƒ­é¢˜ 100â€”â€”238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯



---

## é¢˜ç›®ï¼š

[238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/product-of-array-except-self/description/?envType=study-plan-v2&envId=top-100-liked "238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰")

> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `nums`ï¼Œè¿”å› æ•°ç»„Â `answer`Â ï¼Œå…¶ä¸­Â `answer[i]`Â ç­‰äºÂ `nums`Â ä¸­é™¤Â `nums[i]`Â ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯Â ã€‚
>
> é¢˜ç›®æ•°æ®Â **ä¿è¯**Â æ•°ç»„Â `nums`ä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨Â Â **32 ä½**Â æ•´æ•°èŒƒå›´å†…ã€‚
>
> è¯·Â **ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œ**ä¸”åœ¨Â `O(n)`Â æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,2,3,4]
è¾“å‡º: [24,12,8,6]

```

**ç¤ºä¾‹ 2:**

> ```
> è¾“å…¥: nums = [-1,1,0,-3,3]
> è¾“å‡º: [0,0,9,0,0]
> ```

## å›¾æ–‡è§£æï¼š

![](https://i-blog.csdnimg.cn/direct/fe61d80b177a45e3b5fe2b83dc00d6c7.png)

#### **æ ¸å¿ƒæ€æƒ³ï¼šåˆ†æ²»æ€æƒ³**

å°†é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š

1. **å·¦è¾¹æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯**ï¼ˆå‰ç¼€ç§¯ï¼‰
2. **å³è¾¹æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯**ï¼ˆåç¼€ç§¯ï¼‰

æœ€ç»ˆç»“æœ = å·¦è¾¹ä¹˜ç§¯ Ã— å³è¾¹ä¹˜ç§¯

#### **ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**

* ç›´æ¥è®¡ç®—æ¯ä¸ªä½ç½®çš„ä¹˜ç§¯éœ€è¦O(nÂ²)æ—¶é—´
* ä½¿ç”¨å‰ç¼€å’Œåç¼€æ•°ç»„å¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™ä¸ºO(n)
* é¿å…äº†é‡å¤è®¡ç®—ï¼Œæé«˜äº†æ•ˆç‡

### ğŸ“Š ç¤ºä¾‹æ¼”ç¤º

å‡è®¾Â `nums = [1, 2, 3, 4]`

#### **æ­¥éª¤1ï¼šè®¡ç®—å‰ç¼€ç§¯æ•°ç»„ l**

```
i=0: l[0] = 1
i=1: l[1] = l[0] Ã— nums[0] = 1 Ã— 1 = 1
i=2: l[2] = l[1] Ã— nums[1] = 1 Ã— 2 = 2  
i=3: l[3] = l[2] Ã— nums[2] = 2 Ã— 3 = 6
l = [1, 1, 2, 6]
```

#### **æ­¥éª¤2ï¼šè®¡ç®—åç¼€ç§¯æ•°ç»„ r**

```
i=3: r[3] = 1
i=2: r[2] = r[3] Ã— nums[3] = 1 Ã— 4 = 4
i=1: r[1] = r[2] Ã— nums[2] = 4 Ã— 3 = 12
i=0: r[0] = r[1] Ã— nums[1] = 12 Ã— 2 = 24
r = [24, 12, 4, 1]
```

#### **æ­¥éª¤3ï¼šåˆå¹¶ç»“æœ**

```
ret[0] = l[0] Ã— r[0] = 1 Ã— 24 = 24
ret[1] = l[1] Ã— r[1] = 1 Ã— 12 = 12
ret[2] = l[2] Ã— r[2] = 2 Ã— 4 = 8
ret[3] = l[3] Ã— r[3] = 6 Ã— 1 = 6
ret = [24, 12, 8, 6]
```

éªŒè¯ï¼šç¡®å®Â `1Ã—2Ã—3Ã—4=24`ï¼Œå»æ‰æ¯ä¸ªä½ç½®è‡ªèº«åå¾—åˆ°æ­£ç¡®ç»“æœã€‚

## ä»£ç å®ç°ï¼š

```
class Solution {
    /**
     * è®¡ç®—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ é™¤è‡ªèº«å¤–å…¶ä»–å…ƒç´ çš„ä¹˜ç§¯
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆè¾“å‡ºæ•°ç»„ä¸è®¡å…¥ç©ºé—´å¤æ‚åº¦æ—¶ä¸ºO(1)ï¼‰
     * 
     * @param nums è¾“å…¥æ•°ç»„
     * @return ç»“æœæ•°ç»„ï¼Œå…¶ä¸­ret[i] = nums[0] Ã— nums[1] Ã— ... Ã— nums[i-1] Ã— nums[i+1] Ã— ... Ã— nums[n-1]
     */
    public int[] productExceptSelf(int[] nums) {
        int n = nums.length;
        
        // å‰ç¼€ç§¯æ•°ç»„ï¼šl[i] è¡¨ç¤ºnums[0]åˆ°nums[i-1]çš„ä¹˜ç§¯
        // l[0] = 1 (å› ä¸º0å‰é¢æ²¡æœ‰å…ƒç´ )
        // l[1] = nums[0]
        // l[2] = nums[0] Ã— nums[1]
        // ...
        // l[i] = nums[0] Ã— nums[1] Ã— ... Ã— nums[i-1]
        int[] l = new int[n];
        
        // åç¼€ç§¯æ•°ç»„ï¼šr[i] è¡¨ç¤ºnums[i+1]åˆ°nums[n-1]çš„ä¹˜ç§¯
        // r[n-1] = 1 (å› ä¸ºn-1åé¢æ²¡æœ‰å…ƒç´ )
        // r[n-2] = nums[n-1]
        // r[n-3] = nums[n-2] Ã— nums[n-1]
        // ...
        // r[i] = nums[i+1] Ã— nums[i+2] Ã— ... Ã— nums[n-1]
        int[] r = new int[n];
        
        // åˆå§‹åŒ–è¾¹ç•Œå€¼
        l[0] = 1;          // ç¬¬ä¸€ä¸ªå…ƒç´ çš„å‰ç¼€ç§¯ä¸º1ï¼ˆç©ºä¹˜ç§¯ï¼‰
        r[n - 1] = 1;      // æœ€åä¸€ä¸ªå…ƒç´ çš„åç¼€ç§¯ä¸º1ï¼ˆç©ºä¹˜ç§¯ï¼‰
        
        // è®¡ç®—å‰ç¼€ç§¯ï¼šä»å·¦åˆ°å³éå†
        // å¯¹äºæ¯ä¸ªä½ç½®iï¼Œl[i] = l[i-1] Ã— nums[i-1]
        for (int i = 1; i < n; i++) {
            l[i] = l[i - 1] * nums[i - 1];
        }
        
        // è®¡ç®—åç¼€ç§¯ï¼šä»å³åˆ°å·¦éå†
        // å¯¹äºæ¯ä¸ªä½ç½®iï¼Œr[i] = r[i+1] Ã— nums[i+1]
        for (int i = n - 2; i >= 0; i--) {
            r[i] = r[i + 1] * nums[i + 1];
        }
        
        // åˆ›å»ºç»“æœæ•°ç»„
        int[] ret = new int[n];
        
        // åˆå¹¶å‰ç¼€ç§¯å’Œåç¼€ç§¯å¾—åˆ°æœ€ç»ˆç»“æœ
        // ret[i] = l[i] Ã— r[i] = (å‰ç¼€ç§¯) Ã— (åç¼€ç§¯)
        // = (nums[0]Ã—...Ã—nums[i-1]) Ã— (nums[i+1]Ã—...Ã—nums[n-1])
        for (int i = 0; i < n; i++) {
            ret[i] = l[i] * r[i];
        }
        
        return ret;
    }
}
```



