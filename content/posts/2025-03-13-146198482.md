---
layout: post
title: "Redis-zset类型"
date: 2025-03-13 13:22:19 +0800
description: "本篇文章我们就redis的value的类型zset类型进行简单的介绍，以及其相关命令和应用场景。"
keywords: "Redis--zset类型"
categories: ['Redis']
tags: ['缓存', '数据库', 'Redis']
artid: "146198482"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146198482
    alt: "Redis-zset类型"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146198482
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146198482
cover: https://bing.ee123.net/img/rand?artid=146198482
image: https://bing.ee123.net/img/rand?artid=146198482
img: https://bing.ee123.net/img/rand?artid=146198482
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Redis--zset类型
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <h2 id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80" name="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80">
     一、引言
    </h2>
    <p>
     本篇文章我们就redis的value的类型zset类型进行简单的介绍，以及其相关命令和应用场景。
    </p>
    <h2 id="%E4%BA%8C%E3%80%81%E4%BB%8B%E7%BB%8D" name="%E4%BA%8C%E3%80%81%E4%BB%8B%E7%BB%8D">
     二、介绍
    </h2>
    <p>
     zset：有序集合，zset中的member引入了一个
     <span style="color:#fe2c24">
      <strong>
       属性score
      </strong>
     </span>
     ，浮点类型，排序的时候就是按照
     <strong>
      <span style="color:#fe2c24">
       分数的大小
      </span>
     </strong>
     进行升序/降序的排序。
    </p>
    <h2 id="%E4%B8%89%E3%80%81%E5%91%BD%E4%BB%A4" name="%E4%B8%89%E3%80%81%E5%91%BD%E4%BB%A4">
     三、命令
    </h2>
    <h3 id="1.zadd" name="1.zadd">
     1.zadd
    </h3>
    <p>
     zadd：往有序集合中添加元素和分数，对于有序集合来说，即可通过member来找到score，也可以通过score来找到匹配的member。
    </p>
    <p>
     zadd key[NX|XX ]  [GT | LT] [ CH ] [INCR] socre member [score member ...]
    </p>
    <p>
     XX：更新当前存在的，不存在就操作失败
    </p>
    <p>
     NX：添加新的，对于已经存在的就操作失败
    </p>
    <p>
     LT：对于已经存在的，如果新的分数比当前
     <span style="color:#fe2c24">
      <strong>
       分数小
      </strong>
     </span>
     就更新
    </p>
    <p>
     GT：对于已经存在的，如果新的分数比当前
     <span style="color:#fe2c24">
      <strong>
       分数大
      </strong>
     </span>
     就更新
    </p>
    <p>
     CH：zadd返回的是本次添加的元素，指定这个选项之后就会包含本次更新的元素个数
    </p>
    <p>
     INCR：对现有分数进行一个数值操作
    </p>
    <p>
     Zset添加元素的时间复杂度是O(logN)
    </p>
    <p>
     zset内部实际用的就是升序排序的
    </p>
    <p>
     <img alt="" height="67" src="https://i-blog.csdnimg.cn/direct/9c40c1fcc4544eb0836c8fea4cd8d122.png" width="790"/>
    </p>
    <h3 id="2.zrange%EF%BC%8Czrevrange%EF%BC%8Czrangebyscore" name="2.zrange%EF%BC%8Czrevrange%EF%BC%8Czrangebyscore">
     2.zrange，zrevrange，zrangebyscore
    </h3>
    <p>
     zrange：查看元素的详情
    </p>
    <p>
     <img alt="" height="118" src="https://i-blog.csdnimg.cn/direct/0c996555fb454a9a9fba686ab2cb929c.png" width="627"/>
    </p>
    <p>
     <img alt="" height="205" src="https://i-blog.csdnimg.cn/direct/fd8b320587a44e479d9ec94fb88dae22.png" width="615"/>
    </p>
    <p>
     zrevrange：默认是升序排序，使用zrevrange变成降序排序
    </p>
    <p>
     <img alt="" height="207" src="https://i-blog.csdnimg.cn/direct/7ee3d8faad19417fbe2c40477cfde112.png" width="730"/>
    </p>
    <p>
     zrangebyscore：按照分数查找元素
    </p>
    <p>
     <img alt="" height="122" src="https://i-blog.csdnimg.cn/direct/b4b96d2f96d1417a8c6abaeb2f7426a1.png" width="626"/>
    </p>
    <h3 id="3.zcard%EF%BC%8Czcount" name="3.zcard%EF%BC%8Czcount">
     3.zcard，zcount
    </h3>
    <p>
     zcard：获取元素个数  时间复杂度：O(1)
    </p>
    <p>
     <img alt="" height="63" src="https://i-blog.csdnimg.cn/direct/0469aa009e80462dbfd6cf3bd7c442ee.png" width="421"/>
    </p>
    <p>
     zcount：返回分数在min和max之间的元素个数  时间复杂度：O(logN)
    </p>
    <p>
     <img alt="" height="51" src="https://i-blog.csdnimg.cn/direct/a02201d995eb4a08ba3a1e30a6944ef1.png" width="538"/>
    </p>
    <h3 id="4.zpopmax%EF%BC%8Cbzpopmax%EF%BC%8Czpopmin%EF%BC%8Cbzpopmin" name="4.zpopmax%EF%BC%8Cbzpopmax%EF%BC%8Czpopmin%EF%BC%8Cbzpopmin">
     4.zpopmax，bzpopmax，zpopmin，bzpopmin
    </h3>
    <p>
     zpopmax：删除并返回分数最高的元素   时间复杂度：O(logN * M)
    </p>
    <p>
     <img alt="" height="89" src="https://i-blog.csdnimg.cn/direct/3a0a85b922b84ffc88ff1ac2f9a15d33.png" width="430"/>
    </p>
    <p>
     bzpopmax：阻塞版本的zpopmax，可以设置超时时间，
     <span style="color:#fe2c24">
      <strong>
       没有元素才阻塞
      </strong>
     </span>
     。时间复杂度：O(logN)
    </p>
    <p>
     zpopmin：删除并返回分数最低的元素
    </p>
    <p>
     <img alt="" height="150" src="https://i-blog.csdnimg.cn/direct/6304248c0c544f2794c9fd2c1170e079.png" width="431"/>
    </p>
    <p>
     bzpopmin：阻塞版本的zpopmin，可以设置超时时间，
     <span style="color:#fe2c24">
      <strong>
       没有元素才阻塞
      </strong>
     </span>
     。时间复杂度：O(logN)
    </p>
    <h3 id="5.zrank%2Czrevrank%2Czscore" name="5.zrank%2Czrevrank%2Czscore">
     5.zrank,zrevrank,zscore
    </h3>
    <p>
     zrank：返回指定元素的排名，升序   时间复杂度：O(logN)
    </p>
    <p>
     <img alt="" height="52" src="https://i-blog.csdnimg.cn/direct/9d33fcbcd0884b9aa7ed17563f2c8733.png" width="496"/>
    </p>
    <p>
     zrevrank：返回指定元素的排名，降序
    </p>
    <p>
     <img alt="" height="66" src="https://i-blog.csdnimg.cn/direct/85b8f7db8b2041d99d55a643d531099b.png" width="573"/>
    </p>
    <p>
     zscore：获取元素对应的分数   时间复杂度：O(1)
    </p>
    <p>
     <img alt="" height="68" src="https://i-blog.csdnimg.cn/direct/3d7ace1e6e944ceb9fc08ddc60fa46b6.png" width="492"/>
    </p>
    <h3 id="6.zrem%EF%BC%8Czremrangebyrank%EF%BC%8Czremrangebyscore%C2%A0" name="6.zrem%EF%BC%8Czremrangebyrank%EF%BC%8Czremrangebyscore%C2%A0">
     6.zrem，zremrangebyrank，zremrangebyscore
    </h3>
    <p>
     zrem:删除元素       时间复杂度：O(logN * M)
    </p>
    <p>
     <img alt="" height="58" src="https://i-blog.csdnimg.cn/direct/7312acf160934664854dda2aebccc234.png" width="420"/>
    </p>
    <p>
     zremrangebyrank:范围删除
    </p>
    <p>
     <img alt="" height="59" src="https://i-blog.csdnimg.cn/direct/84a7ba2e93c2404eb3854c4d09aea0bb.png" width="652"/>
    </p>
    <p>
     zremrangebyscore：根据分数删除
    </p>
    <p>
     <img alt="" height="56" src="https://i-blog.csdnimg.cn/direct/0a9170561f5e4d859fb629ff51a3bd05.png" width="656"/>
    </p>
    <h3 id="7.zincrby" name="7.zincrby">
     7.zincrby
    </h3>
    <p>
     zincrby：增加分数   返回增加之后的分数值
    </p>
    <p>
     <img alt="" height="61" src="https://i-blog.csdnimg.cn/direct/008a51be32664a1e914762a9fbd8e421.png" width="569"/>
    </p>
    <h3 id="8.zinterstore" name="8.zinterstore">
     8.zinterstore
    </h3>
    <p>
     zinterscore：求交集，将结果保存到另一个key中   时间复杂度：O(N*K)+O(M*log(M))  近似看作O(M*log(M))
    </p>
    <p>
     zinterstore dest keynums key key2 weights 2 3
    </p>
    <h3 id="9.zunionstore" name="9.zunionstore">
     9.zunionstore
    </h3>
    <p>
     和上一个命令类似，只是这个是求并集
    </p>
    <h2 id="%E5%9B%9B%E3%80%81%E5%86%85%E9%83%A8%E7%BC%96%E7%A0%81" name="%E5%9B%9B%E3%80%81%E5%86%85%E9%83%A8%E7%BC%96%E7%A0%81">
     四、内部编码
    </h2>
    <h3 id="1.ziplist%EF%BC%88%E5%8E%8B%E7%BC%A9%E5%88%97%E8%A1%A8%EF%BC%89" name="1.ziplist%EF%BC%88%E5%8E%8B%E7%BC%A9%E5%88%97%E8%A1%A8%EF%BC%89">
     1.ziplist（压缩列表）
    </h3>
    <p>
     如果有序集合中的元素较少，或者单个元素的体积较小，此时使用ziplist进行存储
    </p>
    <h3 id="2.skiplist%EF%BC%88%E8%B7%B3%E8%A1%A8%EF%BC%89" name="2.skiplist%EF%BC%88%E8%B7%B3%E8%A1%A8%EF%BC%89">
     2.skiplist（跳表）
    </h3>
    <p>
     元素较多，或者元素体积较大。
    </p>
    <p>
     跳表是一个复杂的链表   查询一个元素的时间复杂度是O(logN)  更擅长按照范围获取元素
    </p>
    <h2 id="%E4%BA%94%E3%80%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" name="%E4%BA%94%E3%80%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">
     五、应用场景
    </h2>
    <h3 id="1.%E6%8E%92%E8%A1%8C%E6%A6%9C%E7%B3%BB%E7%BB%9F" name="1.%E6%8E%92%E8%A1%8C%E6%A6%9C%E7%B3%BB%E7%BB%9F">
     1.排行榜系统
    </h3>
    <h3 id="2.%E8%BF%9B%E8%A1%8C%E5%8A%A0%E6%9D%83%E6%8E%92%E8%A1%8C" name="2.%E8%BF%9B%E8%A1%8C%E5%8A%A0%E6%9D%83%E6%8E%92%E8%A1%8C">
     2.进行加权排行
    </h3>
    <p>
     利用相关操作对某种特性进行加权计算再进行排行
    </p>
    <h2 id="%E5%85%AD%E3%80%81%E6%80%BB%E7%BB%93" name="%E5%85%AD%E3%80%81%E6%80%BB%E7%BB%93">
     六、总结
    </h2>
    <p>
     本篇文章，简单介绍了value的类型zset类型的相关命令，内部编码以及应用场景，下一篇文章咱们将补充一些其他不常见的类型，感谢观看！
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37343831353138332f:61727469636c652f64657461696c732f313436313938343832" class_="artid" style="display:none">
 </p>
</div>


