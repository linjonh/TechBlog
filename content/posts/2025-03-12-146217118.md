---
layout: post
title: "AGI大模型4编程调用-OpenAI-API"
date: 2025-03-12 23:53:03 +0800
description: "在语⾳交互场景中，⽤户的输⼊是语⾳信号，system 需要将其转换为⽂本，然后⽣成响应。在图像交互场景中，⽤户的输⼊是图像数据，system 需要识别图像内容，并根据其⽣成响应。然后，根据⽤户的意图和需求，system 使⽤相应的机器学习算法和数据存储来⽣成助⼿。当⽤户输⼊⼀个查询或请求时，system 使⽤这些模型来理解⽤户的意图，并⽣成相应的响应。System 的⽬标是理解⽤户的意图和需求，并根据这些信息⽣成合适的响应。助⼿可以是⽂本、语⾳、图像等形式，其⽬标是满⾜⽤户的请求，提供所需的信息或服务。"
keywords: "AGI大模型（4）：编程调用 OpenAI API"
categories: ['Agi']
tags: ['服务器', 'Java', 'Agi']
artid: "146217118"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146217118
    alt: "AGI大模型4编程调用-OpenAI-API"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146217118
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146217118
cover: https://bing.ee123.net/img/rand?artid=146217118
image: https://bing.ee123.net/img/rand?artid=146217118
img: https://bing.ee123.net/img/rand?artid=146217118
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     AGI大模型（4）：编程调用 OpenAI API
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     1 代码演示
    </h4>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     官⽅⽂档：https://platform.openai.com/docs/api-reference
    </p>
    <p>
     <strong>
      1.1 安装模块
     </strong>
    </p>
    <pre><code># Mac电脑把pip换成pip3
pip install openai
pip install python-dotenv</code></pre>
    <p>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      1.2 示例代码
     </strong>
    </p>
    <pre><code>from openai import OpenAI
from dotenv import load_dotenv
load_dotenv()
# 初始化 OpenAI 服务。
client = OpenAI()
# 消息格式
messages = [
 {
 "role": "system",
 "content": "你是AI助⼿⼩于，是⼤模型课堂的助教。这⻔课每周三、五上课。"
 },
 {
 "role": "user",
 "content": "哪天有课？"
 },
]
# 调⽤ GPT-3.5
chat_completion = client.chat.completions.create(
 model="gpt-3.5-turbo",
 messages=messages
)
# 输出回复
print(chat_completion.choices[0].message.content)</code></pre>
    <p>
    </p>
    <p>
     <strong>
      1.3 新建环境变量文件.env文件
     </strong>
    </p>
    <pre><code>OPENAI_API_KEY="你的key"
OPENAI_BASE_URL="openai的url"</code></pre>
    <p>
     结果如下：
    </p>
    <p>
     <img alt="" height="190" src="https://i-blog.csdnimg.cn/direct/78b3d4ffb72940159a3c988fd70dbbe3.png" width="982"/>
    </p>
    <p>
    </p>
    <h4 style="margin-left:0.0001pt; margin-right:0px; text-align:justify">
     2 OpenAI中的⻆⾊理解
    </h4>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      2.1 system（系统）
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     在 OpenAI 的技术框架中，system 代表了整个系统或应⽤程序。System 的⽬标是理解⽤户的意图和需求，并根据这些信息⽣成合适的响应。
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     System 的核⼼组件是预训练的 NLP 模型，如 GPT-3。这些模型通过在海量⽂本数据上进⾏训练，学习到了丰富的语⾔知识和理解能⼒。当⽤户输⼊⼀个查询或请求时，system 使⽤这些模型来理解⽤户的意图，并⽣成相应的响应。
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      2.2 user（⽤户）
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     user 代表了与系统交互的⽤户。⽤户可以是⼈类⽤户，也可以是其他系统或应⽤程序。User 的⽬标是向 system 发送请求，获取所需的信息或服务。
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     User 的输⼊可以采⽤多种形式，如⽂本、语⾳、图像等。在⽂本交互场景中，⽤户通常输⼊⼀个查询或问题，system 需要根据这个输⼊⽣成合适的响应。在语⾳交互场景中，⽤户的输⼊是语⾳信号，system 需要将其转换为⽂本，然后⽣成响应。在图像交互场景中，⽤户的输⼊是图像数据，system 需要识别图像内容，并根据其⽣成响应。
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      2.3 assistant（助⼿）
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     assistant 代表了 system ⽣成的响应。助⼿可以是⽂本、语⾳、图像等形式，其⽬标是满⾜⽤户的请求，提供所需的信息或服务。
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     assistant 的⽣成过程包括多个步骤。⾸先，system 使⽤预训练的 NLP 模型来理解⽤户的意图。然后，根据⽤户的意图和需求，system 使⽤相应的机器学习算法和数据存储来⽣成助⼿。最后，system 将助⼿以合适的形式返回给⽤户。
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
    </p>
    <h4 style="margin-left:0.0001pt; margin-right:0px; text-align:justify">
     3 OpenAI国内购买使用
    </h4>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     地址：https://ai-yyds.com/
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     ⾃主选择！⽆需翻墙就可以使⽤
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
    </p>
    <h4 style="margin-left:0.0001pt; margin-right:0px; text-align:justify">
     4 国产⼤模型API调用
    </h4>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      4.1 DeepSeek
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      API地址：
     </strong>
     https://platform.deepseek.com/usage
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      接⼝⽂档：
     </strong>
     https://api-docs.deepseek.com/zh-cn/
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      API Keys申请地址：
     </strong>
     https://platform.deepseek.com/api_keys
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      示例代码
     </strong>
    </p>
    <pre><code>from openai import OpenAI
from dotenv import load_dotenv
load_dotenv()
import os
deepseek_api_key = os.getenv("DEEPSEEK_API_KEY")
client = OpenAI(api_key=deepseek_api_key, base_url="https://api.deepseek.com")
response = client.chat.completions.create(
 model="deepseek-chat",
 messages=[
 {"role": "system", "content": "You are a helpful assistant"},
 {"role": "user", "content": "Hello"},
 ],
 stream=False
)
print(response.choices[0].message.content)</code></pre>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      .env文件
     </strong>
    </p>
    <pre><code>DEEPSEEK_API_KEY="你的key"</code></pre>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      结果如下：
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <img alt="" height="159" src="https://i-blog.csdnimg.cn/direct/292fd401ef3742e4b26b5f72f6c66f11.png" width="920"/>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      4.2 阿⾥云通义千问
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:left">
     <strong>
      地址：
     </strong>
     https://help.aliyun.com/zh/model-studio/getting-started/what-ismodel-studio
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:left">
     <strong>
      如何获取API Key：
     </strong>
     https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:left">
     <strong>
      示例代码：
     </strong>
    </p>
    <pre><code>import os
from dotenv import load_dotenv
load_dotenv()
from openai import OpenAI
client = OpenAI(
 # 若没有配置环境变量，请⽤百炼API Key将下⾏替换为：api_key="sk-xxx",
 api_key=os.getenv("DASHSCOPE_API_KEY"), # 如何获取API Key：https://hel
p.aliyun.com/zh/model-studio/developer-reference/get-api-key
 base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
)
completion = client.chat.completions.create(
 model="qwen-plus", # 模型列表：https://help.aliyun.com/zh/model-studio/
getting-started/models
 messages=[
 {'role': 'system', 'content': 'You are a helpful assistant.'},
 {'role': 'user', 'content': '你是谁？'}
 ]
)
print(completion.choices[0].message.content)</code></pre>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      4.3 智普清⾔
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      地址：
     </strong>
     https://bigmodel.cn/console/overview
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      API Keys申请：
     </strong>
     https://bigmodel.cn/usercenter/proj-mgmt/apikeys
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      代码示例
     </strong>
    </p>
    <pre><code>from openai import OpenAI
from dotenv import load_dotenv
load_dotenv()
import os
client = OpenAI(
 api_key=os.getenv("ZHIPUAI_API_KEY"),
 base_url="https://open.bigmodel.cn/api/paas/v4/"
)
completion = client.chat.completions.create(
 model="glm-4-flash", 
 messages=[ 
 {"role": "system", "content": "你是⼀个聪明且富有创造⼒的⼩说作家"}, 
 {"role": "user", "content": "请你作为童话故事⼤王，写⼀篇短篇童话故事，故
事的主题是要永远保持⼀颗善良的⼼，要能够激发⼉童的学习兴趣和想象⼒，同时也能够帮助⼉童更
好地理解和接受故事中所蕴含的道理和价值观。"}
 ],
 top_p=0.7,
 temperature=0.9
)
print(completion.choices[0].message)</code></pre>
    <p>
    </p>
    <p>
     <strong>
      4.4 kimi
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      API申请地址：
     </strong>
     https://platform.moonshot.cn/console/api-keys
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      ⽂档地址：
     </strong>
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     https://platform.moonshot.cn/docs/api/chat#%E5%85%AC%E5%BC%80%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%9C%B0%E5%9D%80
    </p>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     <strong>
      代码示例
     </strong>
    </p>
    <pre><code>from openai import OpenAI
from dotenv import load_dotenv
load_dotenv()
import os
client = OpenAI(
 api_key = os.getenv("MOONSHOT_API_KEY"),
 base_url = "https://api.moonshot.cn/v1",
)
completion = client.chat.completions.create(
 model = "moonshot-v1-8k",
 messages = [
 {"role": "system", "content": "你是 Kimi，由 Moonshot AI 提供的⼈⼯智
能助⼿，你更擅⻓中⽂和英⽂的对话。你会为⽤户提供安全，有帮助，准确的回答。同时，你会拒绝
⼀切涉及恐怖主义，种族歧视，⻩⾊暴⼒等问题的回答。Moonshot AI 为专有名词，不可翻译成其
他语⾔。"},
 {"role": "user", "content": "你好，我叫李雷，1+1等于多少？"}
 ],
 temperature = 0.3,
)
print(completion.choices[0].message.content)</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031333933383537382f:61727469636c652f64657461696c732f313436323137313138" class_="artid" style="display:none">
 </p>
</div>


