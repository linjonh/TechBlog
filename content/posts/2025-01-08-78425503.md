---
layout: post
title: "手机Android音视频采集与直播推送,实现单兵移动监控类应用"
date: 2025-01-08 10:44:33 +0800
description: "最新手机采集推送直播监控以及EasyDarwin开源流媒体平台的版本及代码：EasyDarwin 开"
keywords: "单兵音视频系统功能"
categories: ['视频技术', '物联网', '手机开发']
tags: ['无标签']
artid: "78425503"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=78425503
    alt: "手机Android音视频采集与直播推送,实现单兵移动监控类应用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=78425503
featuredImagePreview: https://bing.ee123.net/img/rand?artid=78425503
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     手机Android音视频采集与直播推送，实现单兵、移动监控类应用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:18px; color:rgb(255,0,0)">
      最新手机采集推送直播监控以及EasyDarwin开源流媒体平台的版本及代码：
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
    </p>
    <ul style='color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <li>
      <span style="font-size:18px; color:rgb(255,0,0)">
       EasyDarwin 开源流媒体云平台：
       <a href="https://github.com/easydarwin" rel="noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
        https://github.com/easydarwin
       </a>
      </span>
     </li>
     <li>
      <span style="font-size:18px; color:rgb(255,0,0)">
       EasyClient 开源流媒体平台客户端：
       <a href="http://fir.im/EasyClient" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
        http://fir.im/EasyClient
       </a>
      </span>
     </li>
     <li>
      <span style="font-size:18px; color:rgb(255,0,0)">
       EasyCamera 安卓手机单兵监控端：
       <a href="http://fir.im/EasyCamera" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
        http://fir.im/EasyCamera
       </a>
      </span>
     </li>
    </ul>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      恰逢2014 Google I/O大会，不难看出安卓在Google的推进以及本身的开放性作用下，已经快延生到生活的各个方面了，从安卓智能手机、平板，到可穿戴的Android Ware、眼镜、手表、再到Android汽车、智能家居、电视，甚至最近看新闻，日本出的几款机器人都是Android系统的，再把目光放回监控行业，传统监控中的移动终端设备，例如：单兵设备、手持设备、车载终端设备，包括家庭监控中用到的智能设备，都可以用Android系统替代了，不仅开发容易，而且易扩展，设备也更加智能了。
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <img alt="" src="https://img-blog.csdn.net/20140626230611062?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGllamlhc2h1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" style="border:none; max-width:100%; max-height:100%">
       <br/>
      </img>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <strong>
       图 - Android在手持设备中的应用
      </strong>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <strong>
       <br/>
      </strong>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      一步一步来，我们先实现Android手机的音视频采集与上传的实时监控功能。Google Code上有一个开源项目：
      <strong>
       <a href="http://code.google.com/p/spydroid-ipcamera/" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
        spydroid-ipcamera
       </a>
      </strong>
      ，spydroid能在Android手机中建立一个精简的HTTP Server和RTSP Server，功能类似于一般的IpCamera，既能够通过网页访问摄像机并修改监控配置，还能通过http或者rtsp协议，获取监控的实时音视频，而且从其代码结构中，可以看出，spydroid已经实现了RTSPServer、RTSPClient、RTP、RTCP、H264、AAC...等等功能，总之，咱们需要的Utility都已经具备了，只要将这些功能组合到一块就能实现咱们要的直播需求了。
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <img alt="" src="https://img-blog.csdn.net/20140626232118984?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGllamlhc2h1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" style="border:none; max-width:100%; max-height:100%">
       <br/>
      </img>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <strong>
        图 - Android实现IPCamera的功能
       </strong>
      </span>
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <strong>
        <br/>
       </strong>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      在之前的博客“
      <a href="http://blog.csdn.net/xiejiashu/article/details/14103231" rel="noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       <strong>
        基于Darwin实现的分布式流媒体直播服务器系统
       </strong>
      </a>
      ”中，我们用Windows的摄像头和麦克风分别采集音视频数据，编码成H264和AAC，再用RTP打包，推送到Darwin流媒体服务器，实现直播。同样，我们参考EasyIpCamera的设计方法，App启动后，连接并保活至中心管理服务器，接收来自CMS的控制命令。采集安卓摄像头视频和mic声音，进行H264和AAC编码（这里我们只参考spydroid实现了硬编码，软编码在后续中将会更新进来，不过经过尝试，目前大部分Android音视频采集都支持硬编码），再通过RTSP和RTP，将实时音视频数据推送到流媒体服务器，并由流媒体服务器进行转发和分发，实现直播。
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <img alt="" height="477" src="https://img-blog.csdn.net/20140627064125968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGllamlhc2h1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" style="border:none; max-width:100%; max-height:100%" width="683">
       <br/>
      </img>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <strong>
        图 - Android接入EasyDSS
       </strong>
      </span>
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <strong>
        <br/>
       </strong>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      这里主要就是RTSP/RTP的推送过程，这个在之前的博客“
      <a href="http://blog.csdn.net/xiejiashu/article/details/8298583" rel="noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       <strong>
        基于DSS的先侦听后推送式流媒体转发
       </strong>
      </a>
      ”中详细描述了这个过程，具体的推送代码也可以参考live555的DarwinInjector类实现，咱们这里直接修改spydroid中的RTSPClient就可以实现ANNOUNCE/SETUP/PLAY/RTP过程了，具体流程源代码及协议流程也可以参考“
      <a href="http://blog.csdn.net/xiejiashu/article/details/9154617" rel="noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       <strong>
        用Darwin和live555实现的直播框架
       </strong>
      </a>
      ”中的描述。
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
     </span>
     <span style="font-size:18px">
      Android采集端下载：
      <a href="http://pan.baidu.com/s/1kTwrasB" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       http://pan.baidu.com/s/1kTwrasB
      </a>
      EasyDSS(Win)服务器下载：
      <a href="http://pan.baidu.com/s/1ntoFSSh" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       http://pan.baidu.com/s/1ntoFSSh
      </a>
      EasyDSS(Linux)服务器下载：
      <a href="http://pan.baidu.com/s/1c0b6bUo" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207)" target="_blank">
       http://pan.baidu.com/s/1c0b6bUo
      </a>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       使用方法与博客“
      </span>
      <a href="http://blog.csdn.net/xiejiashu/article/details/14103231" rel="noopener noreferrer" style="text-decoration:none; color:rgb(12,137,207); font-size:14px" target="_blank">
       <strong>
        基于Darwin实现的分布式流媒体直播服务器系统
       </strong>
      </a>
      <span style="font-size:14px">
       ”中EasyIpCamera的方法一致，只需要配置EasyDSS服务器CMS的地址和端口号，就可以接入到EasyDSS，后续所有流程与EasyIpCamera类似，只有当有客户端请求实时视频的时候才会推送音视频流，其他情况只与CMS连接保活，流媒体处于Idle状态。
      </span>
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <img alt="" height="600" src="https://img-blog.csdn.net/20140627112944625?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGllamlhc2h1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" style="border:none; max-width:100%; max-height:100%" width="360">
        <br/>
       </img>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <strong>
        图 - Android采集端配置界面
       </strong>
       <br/>
      </span>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <br/>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      实时效果：经过测试对吧，延时性与网络和手机的相关性很大，不同网络条件，不同手机硬件，可能对比出的延时效果不一样，用三星Glaxy3手机，在网络情况比较好的情况下，实时音视频的延时大概在1.3s（公网传输）左右：
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <img alt="" height="255" src="https://img-blog.csdn.net/20140627065507968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGllamlhc2h1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" style="border:none; max-width:602px; max-height:100%; height:auto" width="600">
      <br/>
     </img>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:14px">
      <strong>
       图 - 连续测试2'52'，延时1.35s
      </strong>
     </span>
     <br/>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:14px">
      <strong>
       <br/>
      </strong>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:14px">
      <strong>
       <img alt="" height="280" src="https://img-blog.csdn.net/20140627065909359?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveGllamlhc2h1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" style="border:none; max-width:100%; max-height:100%" width="600">
        <br/>
       </img>
      </strong>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px; text-align:center'>
     <span style="font-size:14px">
      <strong>
       <strong>
        <strong>
         图 - 连续测试9'17''，延时1.58s
        </strong>
       </strong>
       <br/>
      </strong>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      <br/>
     </span>
    </p>
    <p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:"microsoft yahei"; font-size:15px'>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <strong>
        未来还会继续扩展和优化Android实时音视频采集程序，包括加入录像、抓图、软编码、对讲、抖动控制、录像上传等等方面，欢迎大家共同交流和进步！
       </strong>
      </span>
     </span>
    </p>
    <div>
     <span style="font-size:13.5px">
      <span style="font-size:14px">
       <strong>
        <br/>
       </strong>
      </span>
     </span>
    </div>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f79656c696e303432:2f61727469636c652f64657461696c732f3738343235353033" class_="artid" style="display:none">
 </p>
</div>


