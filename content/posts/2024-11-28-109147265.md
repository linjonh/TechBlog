---
layout: post
title: å¾®ä¿¡å°ç¨‹åºè‡ªå®šä¹‰å¯¼èˆªæ -èƒ¶å›Šèœå•æŒ‰é’®é«˜åº¦å®Œç¾é€‚é…-åŸç†ç®€å•-èµ›è¿‡ä¸€äº›å¤§å‚çš„é€‚é…-å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘å¼ºè¿«ç—‡å•¦
date: 2024-11-28 14:16:30 +08:00
categories: ['å°ç¨‹åº']
tags: ['å°ç¨‹åº']
image:
    path: https://img-blog.csdnimg.cn/20201018171702593.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RQMTk5ODEwMTc=,size_16,color_FFFFFF,t_70
    alt: å¾®ä¿¡å°ç¨‹åºè‡ªå®šä¹‰å¯¼èˆªæ -èƒ¶å›Šèœå•æŒ‰é’®é«˜åº¦å®Œç¾é€‚é…-åŸç†ç®€å•-èµ›è¿‡ä¸€äº›å¤§å‚çš„é€‚é…-å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘å¼ºè¿«ç—‡å•¦
artid: 109147265
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=109147265
featuredImagePreview: https://bing.ee123.net/img/rand?artid=109147265
---

# å¾®ä¿¡å°ç¨‹åºè‡ªå®šä¹‰å¯¼èˆªæ  èƒ¶å›Šèœå•æŒ‰é’®é«˜åº¦å®Œç¾é€‚é… åŸç†ç®€å• èµ›è¿‡ä¸€äº›å¤§å‚çš„é€‚é… å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘å¼ºè¿«ç—‡å•¦

åœ¨è‡ªå®šä¹‰å°ç¨‹åºå¯¼èˆªæ æ—¶ï¼Œå³ä¸Šè§’çš„èƒ¶å›Šï¼ˆMenuButtonï¼‰åœ¨ä¸åŒæœºå‹æµ‹è¯•ï¼Œä¼šå‘ç°å¾ˆéš¾é€‚é…ã€‚

å®æµ‹ä¸­ ä¸åŒçš„æ‰‹æœºï¼Œèƒ¶å›Šé«˜åº¦ä¸ä¸€æ ·ã€çŠ¶æ€æ é«˜åº¦ä¸ä¸€æ ·ã€‚ä¸æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºçš„æƒ…å†µæ˜¯ä¸ä¸€æ ·çš„ã€‚

å®Œå…¨éœ€è¦æ ¹æ®æ‰‹æœºï¼ŒåŠ¨æ€çš„è®¡ç®—é«˜åº¦ã€‚

å…ˆçœ‹ä¸€äº›å°ç¨‹åºé¡¶éƒ¨å¯¼èˆªæ é€‚é…çš„æƒ…å†µ

![](https://i-blog.csdnimg.cn/blog_migrate/040501c581917ee957c0009f3cd03445.jpeg)

å›¾ä¸€ æŸå›¢ Â  Â Â å›¾äºŒ æŸä¹ Â  Â å›¾ä¸‰ æŸä¸œ Â  Â å›¾å›› æŸæ‹‰

ä¸Šå›¾é€‚é…åšçš„æœ€å¥½çš„æ˜¯æŸä¸œï¼Œä½†ä»”ç»†çœ‹ä»ä¼šæœ‰ä¸€ç‚¹é”™ä½ï¼Œä½†è¾“å…¥æ¡†çš„é¢œè‰²ï¼Œæ·¡åŒ–äº†è¿™ç§ä¸å’Œè°æ„Ÿã€‚

---

ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜å°±è¦ææ¸…æ¥šåŸç†

![](https://i-blog.csdnimg.cn/blog_migrate/7209dd862655215a4c71e5c56c18cb8b.png)

è¿™æ˜¯åœ¨æ²¡æœ‰è®¾ç½®è‡ªå®šä¹‰æ—¶çš„åŸç”Ÿå¯¼èˆªæ ï¼Œæˆ‘ä»¬å‘ç°æ•´ä½“çš„é«˜åº¦å°±æ˜¯
ï¼ˆçŠ¶æ€æ é«˜åº¦ + å¯¼èˆªæ é«˜åº¦ï¼‰

è€Œ
çŠ¶æ€æ é«˜åº¦
å¯ä»¥é€šè¿‡
wx.getSystemInfo(ï¼‰
è·å–ï¼Œç°åœ¨å°±åªç”¨è§£å†³å¯¼èˆªæ é«˜åº¦äº†

è§‚å¯Ÿå‘ç°ï¼Œèƒ¶å›Šé¡¶éƒ¨é«˜åº¦è·å¯¼èˆªæ é¡¶éƒ¨é«˜åº¦çš„é«˜åº¦å·® å’ŒÂ èƒ¶å›Šåº•éƒ¨é«˜åº¦è·å¯¼èˆªæ åº•éƒ¨é«˜åº¦çš„é«˜åº¦å·®ï¼Œæ˜¯ä¸€æ ·çš„

ä¹Ÿå°±æ˜¯è¯´
å¯¼èˆªæ é«˜åº¦ = èƒ¶å›Šé«˜åº¦ +ï¼ˆé«˜åº¦å·®ï¼‰x Â 2

è€Œ
èƒ¶å›Šä¿¡æ¯
å¯ä»¥é€šè¿‡
wx.getMenuButtonBoundingClientRect()
è·å–ï¼Œç°åœ¨å°±åªç”¨è§£å†³é«˜åº¦å·®äº†

wx.getMenuButtonBoundingClientRect()
ä¸­ä¹Ÿè¿”å›äº†èƒ¶å›Šé¡¶éƒ¨è·å±å¹•é¡¶éƒ¨è·ç¦»çš„ä¿¡æ¯ï¼ˆtopï¼‰

æ‰€ä»¥çŸ¥
é«˜åº¦å·® =Â èƒ¶å›Šé¡¶éƒ¨è·å±å¹•é¡¶éƒ¨è·ç¦» -Â çŠ¶æ€æ é«˜åº¦

---

ç”¨è¿™ä¸¤ä¸ªAPI æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„æ•°æ®

![](https://i-blog.csdnimg.cn/blog_migrate/177b1661dc53aa672524a326c987049a.png)

å¯¼èˆªæ æ•´ä½“é«˜åº¦ ä¼ªå‘†ğŸ

menu = wx.getMenuButtonBoundingClientRect()

system =Â wx.getSystemInfo

å¯¼èˆªæ é«˜åº¦ = menu.statusBarHeightÂ +Â menu.height + (menu.top -Â menu.statusBarHeight) \* 2

åˆ°æ­¤æˆ‘ä»¬å°±å®Œç¾è§£å†³äº†
å¯¼èˆªæ é«˜åº¦
çš„é—®é¢˜

è€Œ
å¯¼èˆªæ å†…å®¹
å°±æ˜¯

å†…å®¹æ ‡ç­¾çš„viewé«˜åº¦ç­‰äºmenu.heightå¹¶ä¸”å‚ç›´å±…ä¸­

---

æ•ˆæœ

![](https://i-blog.csdnimg.cn/blog_migrate/3832a5f5d8006d15b64947cd064dc003.png)

çœŸæœºæ•ˆæœ

![](https://i-blog.csdnimg.cn/blog_migrate/9c196c26056c8bd0cc2c9d567467eb5a.jpeg)

æœ€ç»ˆæ•ˆæœ

![](https://i-blog.csdnimg.cn/blog_migrate/691a602cd853e7234258e1480c712f88.png)

è®²å®Œäº† ä¸Šå‘†ğŸ

---

æ³¨ï¼š ä¸€èˆ¬éœ€å°†è‡ªå®šä¹‰å¯¼èˆªæ å•ç‹¬å‡ºæ¥ä¸ºç»„ä»¶

app.js Â å‘†ğŸ

```javascript
//app.js
App({
  globalData: {},
  onLaunch: function() {
    //è·å–ç³»ç»Ÿä¿¡æ¯
    wx.getSystemInfo({
      success: res => {
        this.system = res
      }
    })
    //è·å–èƒ¶å›Šä¿¡æ¯
    this.menu = wx.getMenuButtonBoundingClientRect()
    //æ‰“å°æ•°æ®
    console.log('ç³»ç»Ÿä¿¡æ¯', this.system)
    console.log('èƒ¶å›Šä¿¡æ¯', this.menu)
  }
})
```

ç»„ä»¶.jsÂ å‘†ğŸ

```javascript
//è·å–åº”ç”¨å®ä¾‹
const app = getApp()

Component({
  /**
   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨
   */
  properties: {
    //å¯¼èˆªæ é¢œè‰²
    navColor: {
      type: String,
      value: '#fff'
    }
  },

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®
   */
  data: {
    s: app.system.statusBarHeight, //çŠ¶æ€æ é«˜åº¦
    n: (app.menu.top - app.system.statusBarHeight) * 2 + app.menu.height, //å¯¼èˆªæ é«˜åº¦
    h: app.menu.height //èƒ¶å›Šé«˜åº¦
  }
})
```

ç»„ä»¶.wxml å‘†ğŸ

```html
<cover-view class='nav_box' style='background:{{navColor}}'>
  <cover-view style='height:{{s}}px' />
  <cover-view class='navBar' style='height:{{n}}px'>
    <cover-view class='content' style='height:{{h}}px'>

      <!-- å¯¼èˆªè‡ªå®šä¹‰å†…å®¹ -->
      <!-- 1. æ’æ§½ å¯åœ¨ä½¿ç”¨é¡µé¢æ’å…¥æ‰€éœ€å†…å®¹ -->
      <slot></slot>

      <!-- 2. é€‰æ‹©æ¸²æŸ“ å¯åœ¨jsé¡µé¢ è®¾ç½®æ¸²æŸ“typeå±æ€§ ä¸åŒåœºæ™¯ä¼ ä¸åŒå€¼ -->
      <block wx:if='{{type == 0}}'>
        å¯¼èˆªä¸€
      </block>
      <block wx:if='{{type == 1}}'>
        å¯¼èˆªäºŒ
      </block>
      <block  wx:else>
        å¯¼èˆªä¸‰
      </block>

    </cover-view>
  </cover-view>
</cover-view>
<view style='height:{{s+n}}px' /> <!-- æ³¨ï¼šå ä½ç”¨ -->
```

ç»„ä»¶. wxssÂ å‘†ğŸ

```css
.nav_box {
  position: fixed;
  width: 100%;
  font-size: 15px;
  z-index: 999;
}

.navBar {
  display: flex;
  align-items: center;
  padding: 0 10px;
}

.content {
  width: 100%;
  display: flex;
  align-items: center;
  background: green;
}
```

ç»„ä»¶ä½¿ç”¨é¡µé¢.json å‘†ğŸ

```javascript
{
  "navigationStyle": "custom", //è®¾ç½®è‡ªå®šä¹‰å¯¼èˆª
  "usingComponents": {
    "navBar": "../../ç»„ä»¶/navBar/navBar" //è‡ªå·±çš„è·¯å¾„
  }
}
```