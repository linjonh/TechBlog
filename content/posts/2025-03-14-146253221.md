---
layout: post
title: "分页查询的实现"
date: 2025-03-14 14:25:35 +0800
description: "本篇文章主要详细地讲解，在vue项目开发时，如何完成分页查询（包含前、后端）。"
keywords: "page page = new page(pagenum,pagesize);,这其中的pagesize是100000,但是实际生"
categories: ['毕业设计']
tags: ['分页查询', 'Pagination', 'Pagehelper']
artid: "146253221"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146253221
    alt: "分页查询的实现"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146253221
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146253221
cover: https://bing.ee123.net/img/rand?artid=146253221
image: https://bing.ee123.net/img/rand?artid=146253221
img: https://bing.ee123.net/img/rand?artid=146253221
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     分页查询的实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <h2 id="%E5%89%8D%E8%A8%80%C2%A0" name="%E5%89%8D%E8%A8%80%C2%A0">
     前言
    </h2>
    <blockquote>
     <p>
      前言：在vue项目开发时，分页查询是绕不开的一个环节。试想，假设我们的某张表有1000条数据，我们总不能一次性全部查询出来吧，那样页面就展示不开。正确的做法应该是将这1000条数据分好几个页面，我们查询时，就查询其中一页的数据。
     </p>
     <p>
      举例：我们将这1000条数据，分成100页，每页只显示10行数据，因此我们查询某一页时，只用展示10行数据即可。这样就解决了表格数据展示不开的问题。
     </p>
     <p class="img-center">
      <img alt="" height="520" src="https://i-blog.csdnimg.cn/direct/22f7127585a24e6bb5443e7d9c5b063f.png" width="929"/>
     </p>
     <p class="img-center">
      <img alt="" height="584" src="https://i-blog.csdnimg.cn/direct/d5b2174a94a24119be753fc7fabef4e2.png" width="831"/>
     </p>
    </blockquote>
    <h3 id="" name="">
    </h3>
    <h2 id="%E4%B8%80.%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0" name="%E4%B8%80.%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0">
     一.问题描述
    </h2>
    <blockquote>
     <p>
      我们为什么需要分页查询呢？原因如下：如下图，我们要展示一张表的全部记录时，如果不分页展示，直接就是一大篇，显得很臃肿，所以我们想做一个分页查询，选择不同的页码，来展示对应页码的数据。
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="595" src="https://i-blog.csdnimg.cn/direct/1c9b87fc4097462bb0fbb9c0228a9134.png" width="1319"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2 id="%E4%BA%8C.%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4" name="%E4%BA%8C.%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4">
     二.后端实现步骤
    </h2>
    <h3 id="2.1%E9%85%8D%E7%BD%AEPageHelper%E6%8F%92%E4%BB%B6" name="2.1%E9%85%8D%E7%BD%AEPageHelper%E6%8F%92%E4%BB%B6">
     2.1配置PageHelper插件
    </h3>
    <blockquote>
     <h4 id="%E2%91%A0%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96" name="%E2%91%A0%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96">
      ①导入依赖
     </h4>
     <p>
      (注意：springboot 3.x的项目，至少要用1.4.6版本的PageHelper插件)
     </p>
    </blockquote>
    <pre><code class="language-XML">&lt;!--分页查询插件pagehelper--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;
    &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.4.6&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
    <blockquote>
     <h4 id="%E2%91%A1%E5%9C%A8application.yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE" name="%E2%91%A1%E5%9C%A8application.yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE">
      ②在application.yml配置文件中添加相关配置
     </h4>
    </blockquote>
    <pre><code class="language-XML">pagehelper:
  helper-dialect: mysql
  reasonable: true
  support-methods-arguments: true
  params: count=countSql</code></pre>
    <blockquote>
     <p>
      解读上述配置项：
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="413" src="https://i-blog.csdnimg.cn/direct/75803a2c6a9240ecad3bf5ac27e2814e.png" width="609"/>
    </p>
    <blockquote>
     <p>
      经过以上两步，我们就成功配置好了PageHelper插件。
     </p>
    </blockquote>
    <h3 id="" name="">
    </h3>
    <h3 id="" name="">
    </h3>
    <h3 id="2.2%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%85%A5%E9%97%A8%E7%9A%84%E7%A8%8B%E5%BA%8F%EF%BC%8C%E4%BD%93%E9%AA%8C%E5%88%86%E9%A1%B5%E8%BF%87%E7%A8%8B" name="2.2%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%85%A5%E9%97%A8%E7%9A%84%E7%A8%8B%E5%BA%8F%EF%BC%8C%E4%BD%93%E9%AA%8C%E5%88%86%E9%A1%B5%E8%BF%87%E7%A8%8B">
     2.2编写一个入门的程序，体验分页过程
    </h3>
    <pre><code class="language-java">    //查询所有挂号记录
    public List&lt;Register&gt; queryAllRegister(String registerName) {
        /*return registerMapper.queryAllRegister(registerName);*/
        //1、必须在第一行开启分页查询
        PageHelper.startPage(1,3);//查询第1页，每页3条数据
        //2、获取原始查询结果
        List&lt;Register&gt; registers = registerMapper.queryAllRegister(registerName);
        //3、将原始查询结果进行分页
        PageInfo&lt;Register&gt; registerPageInfo = new PageInfo&lt;&gt;(registers);
        //3.1 获取分页后的对象集合
        List&lt;Register&gt; list = registerPageInfo.getList();
        //3.2 获取总行数
        long total = registerPageInfo.getTotal();
        //3.3 获取当前页码
        int pageNum = registerPageInfo.getPageNum();
        //3.4 获取总页数
        int pages = registerPageInfo.getPages();
        //3.5 获取每页的行数
        int pageSize = registerPageInfo.getPageSize();
        System.out.println("总行数" + total);
        System.out.println("获取当前页码" + pageNum);
        System.out.println("获取总页数" + pages);
        System.out.println("pageSize" + pageSize);
        //返回分页后的信息
        return list;
    }</code></pre>
    <blockquote>
     <p>
      注意：我们在该代码中，已经定死了就查询第1页数据，每页3条数据。
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="784" src="https://i-blog.csdnimg.cn/direct/1a7c411af98b43eba4829b7385025eb8.png" width="1035"/>
    </p>
    <blockquote>
     <p>
      运行效果：使用apifox发送请求，后端接口返回的数据如下。可见此时返回的结果就3条数据。
     </p>
    </blockquote>
    <blockquote>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "code": 200,
     </p>
     <p>
      "message": "ok",
     </p>
     <p>
      "data": [
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "id": 1,
     </p>
     <p>
      "number": "HIS-SJWK-0001",
     </p>
     <p>
      "registerName": "李秀英",
     </p>
     <p>
      "gender": 2,
     </p>
     <p>
      "idNumber": "131081197809232510",
     </p>
     <p>
      "birthday": "1978-09-23",
     </p>
     <p>
      "age": 47,
     </p>
     <p>
      "ageType": "岁",
     </p>
     <p>
      "homeAddress": "北京市朝阳区",
     </p>
     <p>
      "visitDate": "2025-03-12",
     </p>
     <p>
      "noon": "上午",
     </p>
     <p>
      "deptCategoryId": 1,
     </p>
     <p>
      "deptId": 1,
     </p>
     <p>
      "regisLeId": 1,
     </p>
     <p>
      "clinicId": 3,
     </p>
     <p>
      "settleId": 1,
     </p>
     <p>
      "isBook": "0",
     </p>
     <p>
      "registTime": "2025-03-09 12:37:09",
     </p>
     <p>
      "registerId": 2,
     </p>
     <p>
      "visitState": 1,
     </p>
     <p>
      "deptCategoryName": "外科",
     </p>
     <p>
      "deptName": "神经外科",
     </p>
     <p>
      "registName": "专家号",
     </p>
     <p>
      "clinicNickname": "孙明",
     </p>
     <p>
      "settleName": "自费",
     </p>
     <p>
      "registerNickname": "张敏",
     </p>
     <p>
      "deptCode": null
     </p>
     <p>
      },
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "id": 53,
     </p>
     <p>
      "number": "HIS-SJWK-0002",
     </p>
     <p>
      "registerName": "缴鸿剑",
     </p>
     <p>
      "gender": 1,
     </p>
     <p>
      "idNumber": "131081200209232510",
     </p>
     <p>
      "birthday": "2002-09-23",
     </p>
     <p>
      "age": 23,
     </p>
     <p>
      "ageType": "岁",
     </p>
     <p>
      "homeAddress": "河北省廊坊市霸州市胜芳镇",
     </p>
     <p>
      "visitDate": "2025-03-12",
     </p>
     <p>
      "noon": "上午",
     </p>
     <p>
      "deptCategoryId": 1,
     </p>
     <p>
      "deptId": 1,
     </p>
     <p>
      "regisLeId": 1,
     </p>
     <p>
      "clinicId": 3,
     </p>
     <p>
      "settleId": 1,
     </p>
     <p>
      "isBook": "0",
     </p>
     <p>
      "registTime": "2025-03-11 21:10:27",
     </p>
     <p>
      "registerId": 2,
     </p>
     <p>
      "visitState": 1,
     </p>
     <p>
      "deptCategoryName": "外科",
     </p>
     <p>
      "deptName": "神经外科",
     </p>
     <p>
      "registName": "专家号",
     </p>
     <p>
      "clinicNickname": "孙明",
     </p>
     <p>
      "settleName": "自费",
     </p>
     <p>
      "registerNickname": "张敏",
     </p>
     <p>
      "deptCode": null
     </p>
     <p>
      },
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "id": 54,
     </p>
     <p>
      "number": "HIS-SJWK-003",
     </p>
     <p>
      "registerName": "温霜降",
     </p>
     <p>
      "gender": 2,
     </p>
     <p>
      "idNumber": "131081199808262480",
     </p>
     <p>
      "birthday": "1998-08-26",
     </p>
     <p>
      "age": 27,
     </p>
     <p>
      "ageType": "岁",
     </p>
     <p>
      "homeAddress": "北京市朝阳区",
     </p>
     <p>
      "visitDate": "2025-03-13",
     </p>
     <p>
      "noon": "下午",
     </p>
     <p>
      "deptCategoryId": 1,
     </p>
     <p>
      "deptId": 1,
     </p>
     <p>
      "regisLeId": 2,
     </p>
     <p>
      "clinicId": 10,
     </p>
     <p>
      "settleId": 2,
     </p>
     <p>
      "isBook": "0",
     </p>
     <p>
      "registTime": "2025-03-11 23:18:52",
     </p>
     <p>
      "registerId": 2,
     </p>
     <p>
      "visitState": 1,
     </p>
     <p>
      "deptCategoryName": "外科",
     </p>
     <p>
      "deptName": "神经外科",
     </p>
     <p>
      "registName": "普通号",
     </p>
     <p>
      "clinicNickname": "赵小川",
     </p>
     <p>
      "settleName": "医保",
     </p>
     <p>
      "registerNickname": "张敏",
     </p>
     <p>
      "deptCode": null
     </p>
     <p>
      }
     </p>
     <p>
      ]
     </p>
     <p>
      }
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="264" src="https://i-blog.csdnimg.cn/direct/d640b2496f09445ab5ce97ada61593c0.png" width="611"/>
    </p>
    <p>
     可见此时数据库的表中，一共12行数据，每页3行数据，所以一共分了4页，我们查询的是第一页的数据。
    </p>
    <p>
    </p>
    <h3 id="2.3%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AAvo%EF%BC%8C%E7%94%A8%E6%9D%A5%E6%94%B6%E9%9B%86%E5%88%86%E9%A1%B5%E5%90%8E%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF" name="2.3%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AAvo%EF%BC%8C%E7%94%A8%E6%9D%A5%E6%94%B6%E9%9B%86%E5%88%86%E9%A1%B5%E5%90%8E%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF">
     2.3定义一个vo，用来收集分页后的所有信息
    </h3>
    <pre><code class="language-java">@Data
public class PageVo&lt;T&gt; {
    /* 分页相关的数据 */
    private long total;//总行数。举例：该表总共20行
    private int pageNum;//当前页码。举例：当前处于第3页
    private int pages;//总页数。举例：总共4页
    private int pageSize;//每页的行数。举例：每页5行
    /* 某一页的数据 */
    private List&lt;T&gt; data;//举例：第4页的全部数据

}
</code></pre>
    <h3 id="2.4%E4%BF%AE%E6%94%B9serviceImpl%E5%B1%82%E7%9A%84%E4%BB%A3%E7%A0%81" name="2.4%E4%BF%AE%E6%94%B9serviceImpl%E5%B1%82%E7%9A%84%E4%BB%A3%E7%A0%81">
     2.4修改serviceImpl层的代码
    </h3>
    <p class="img-center">
     <img alt="" height="830" src="https://i-blog.csdnimg.cn/direct/4b58474a254b44daa3b2513b1f36b1fb.png" width="1028"/>
    </p>
    <p>
     修改完了serviceImpl以后，别忘了修改service 接口的对应返回值。
    </p>
    <p>
     controller层也要修改下。
    </p>
    <p class="img-center">
     <img alt="" height="280" src="https://i-blog.csdnimg.cn/direct/a522fe60127a4d86ace9c35902984f04.png" width="1127"/>
    </p>
    <blockquote>
     <p>
      使用apifox发送请求，查看后端响应的数据：
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="778" src="https://i-blog.csdnimg.cn/direct/253b244144e04d1a924c74c764c3cdf2.png" width="969"/>
    </p>
    <p>
    </p>
    <h3 id="2.5%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AE%E5%BD%93%E5%89%8D%E9%A1%B5%E7%A0%81pageNum%E3%80%81%E6%AF%8F%E9%A1%B5%E8%A1%8C%E6%95%B0pageSize" name="2.5%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AE%E5%BD%93%E5%89%8D%E9%A1%B5%E7%A0%81pageNum%E3%80%81%E6%AF%8F%E9%A1%B5%E8%A1%8C%E6%95%B0pageSize">
     2.5动态设置当前页码pageNum、每页行数pageSize
    </h3>
    <p class="img-center">
     <img alt="" height="309" src="https://i-blog.csdnimg.cn/direct/d8cfc611d8cc4d30baee47e8e4544fd9.png" width="1030"/>
    </p>
    <blockquote>
     <p>
      也要修改controller层：
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="367" src="https://i-blog.csdnimg.cn/direct/c2442160d0ad46ff8516a11adac07b07.png" width="1159"/>
    </p>
    <blockquote>
     <p>
      使用apifox请求该接口，查看响应结果：
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="441" src="https://i-blog.csdnimg.cn/direct/953a9fffaaf6469698edfdca13f56492.png" width="1049"/>
    </p>
    <p class="img-center">
     <img alt="" height="478" src="https://i-blog.csdnimg.cn/direct/ea4451663a3046ba9bc90c163cdb808e.png" width="634"/>
    </p>
    <blockquote>
     <p>
      此时就实现了动态设置当前页码、每页行数的目标。
     </p>
    </blockquote>
    <p>
    </p>
    <h3 id="%E6%80%BB%E7%BB%93" name="%E6%80%BB%E7%BB%93" style="background-color:transparent">
     2.6总结
    </h3>
    <blockquote>
     <p>
      后端实现分页，说白了就两步：
     </p>
     <p>
      1、给后端接口，传入两个参数：①当前页码pageNum + ②每页行数 pageSize
     </p>
     <p>
      2、后端响应回一个分页pageVo，里面包含五个部分：①总行数total ②当前页码pageNum ③总页数pages ④每页行数pageSize ⑤当前页的对象集合。
     </p>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <h2 id="%E4%B8%89.%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4" name="%E4%B8%89.%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4">
     三.前端实现步骤
    </h2>
    <blockquote>
     <p>
      前端使用element-plus的分页组件Pagination来实现。
     </p>
    </blockquote>
    <h3 id="3.1%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AEpageInfo" name="3.1%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AEpageInfo">
     3.1定义数据pageInfo
    </h3>
    <p class="img-center">
     <img alt="" height="321" src="https://i-blog.csdnimg.cn/direct/4de6d8bbb850449f81d2fef0a1c123f5.png" width="435"/>
    </p>
    <h3 id="3.2%E7%BC%96%E5%86%99%E5%88%86%E9%A1%B5%E7%BB%84%E4%BB%B6Pagination" name="3.2%E7%BC%96%E5%86%99%E5%88%86%E9%A1%B5%E7%BB%84%E4%BB%B6Pagination">
     3.2编写分页组件Pagination
    </h3>
    <pre><code class="language-html">&lt;!-- 分页组件todo --&gt;
&lt;el-pagination style="margin-top: 10px;" background  :page-size="pageInfo.pageSize" layout="prev, pager, next, total" :total="pageInfo.total"  @change="changePageNumOrPageSize"/&gt;    </code></pre>
    <blockquote>
     <p>
      解读：
     </p>
     <p>
      ①background表示要显示按钮背景颜色。
     </p>
     <p>
      ②:page-size用来动态绑定每页行数
     </p>
     <p>
      ③layout="prev, pager, next, total"表示分页组件要显示上一页按钮、每页按钮、下一页按钮、总行数。
     </p>
     <p>
      ④:total表示动态绑定总行数。
     </p>
     <p>
      ⑤@change函数，是element-plus官方定的，表示当前页码pageNum、每页行数pageSize发生变化时，触发的函数，该函数内，自带两个参数newPageNum、newPageSize，即最新页码、最新每页行数，我们可以根据这两个值，进行后端查询，获取最新页的数据。
     </p>
    </blockquote>
    <h3 id="3.3%E7%BC%96%E5%86%99%40change%E5%87%BD%E6%95%B0" name="3.3%E7%BC%96%E5%86%99%40change%E5%87%BD%E6%95%B0">
     3.3编写@change函数
    </h3>
    <pre><code class="language-javascript">/* 当pageNum或者pageSize发生改变时，触发changePageNumOrPageSize */
const changePageNumOrPageSize = (newPageNum, newPageSize) =&gt; {
    //alert("当前页码：" + newPageNum + "当前每页面行数：" + newPageSize);
    //给当前页pageNum 和 每页行数pageSize赋值
    pageInfo.value.pageNum = newPageNum;
    pageInfo.value.pageSize = newPageSize;
    //重新进行分页查询
    doQueryAllRegister();
}</code></pre>
    <h3 id="%E5%B1%95%E7%A4%BA%E6%95%88%E6%9E%9C" name="%E5%B1%95%E7%A4%BA%E6%95%88%E6%9E%9C" style="background-color:transparent">
     3.4展示效果
    </h3>
    <p class="img-center">
     <img alt="" height="597" src="https://i-blog.csdnimg.cn/direct/f365f11a6aa645ceb40ee8f8e3c0e5ed.png" width="803"/>
    </p>
    <p class="img-center">
     <img alt="" height="590" src="https://i-blog.csdnimg.cn/direct/2e7344479a224ddd9ae87a3fb0271fea.png" width="929"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2 id="%E7%BB%93%E8%AF%AD" name="%E7%BB%93%E8%AF%AD">
     结语
    </h2>
    <blockquote>
     <p>
      以上就是分页查询的前、后端详解。
     </p>
    </blockquote>
    <blockquote>
     <p>
      无论多么复杂，始终中心思想就是：
     </p>
     <p>
      第一步：在前端，往后端分页查询接口传入两个参数，①当前页码pageNum ②每页行数pageSize
     </p>
     <p>
      第二步：后端会返回给前端一个分页响应体，里面包含了五部分，①总行数total ②当前页码pageNum ③总页数pages ④每页的行数pageSize ⑤当前页的对象集合。
     </p>
    </blockquote>
    <blockquote>
     <p>
      我们遵循中心思想，经过自己的慢慢调试，必定能完成分页查询这项任务，细枝末节需要自己亲自去品尝。
     </p>
    </blockquote>
    <p>
     喜欢本篇文章的话，可以留个免费的关注~~
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36333938313634342f:61727469636c652f64657461696c732f313436323533323231" class_="artid" style="display:none">
 </p>
</div>


