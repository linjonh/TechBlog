---
layout: post
title: "ios打包需要的证书及步骤"
date: 2025-03-12 10:26:48 +0800
description: "官网：https://developer.apple.com/account避免他人登录apple账号的方法：就是让他们发测试设备的udid，手动注册到账号下，然后再给他们导p12证书和描述文件iOS App Development\tiOS 开发版本签名（仅限 iOS App）"
keywords: "ios打包需要的证书及步骤"
categories: ['Ios']
tags: ['Macos', 'Ios', 'Cocoa']
artid: "146185199"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146185199
    alt: "ios打包需要的证书及步骤"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146185199
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146185199
cover: https://bing.ee123.net/img/rand?artid=146185199
image: https://bing.ee123.net/img/rand?artid=146185199
img: https://bing.ee123.net/img/rand?artid=146185199
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ios打包需要的证书及步骤
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      官网：https://developer.apple.com/account
      <br/>
      避免他人登录apple账号的方法：就是让他们发测试设备的udid，手动注册到账号下，然后再给他们导p12证书和描述文件
     </p>
    </blockquote>
    <p>
     iOS App Development iOS 开发版本签名（仅限 iOS App）
    </p>
    <table>
     <thead>
      <tr>
       <th>
        文件类型
       </th>
       <th>
        作用
       </th>
       <th>
        生成方式
       </th>
       <th>
        主要用途
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        CSR（.csr ）
       </td>
       <td>
        证书申请文件，生成 cer 证书
       </td>
       <td>
        由开发者在 Mac 生成
       </td>
       <td>
        用于申请 cer 证书
       </td>
      </tr>
      <tr>
       <td>
        cer 证书（.cer）
       </td>
       <td>
        开发/分发证书，用于签名
       </td>
       <td>
        Apple 生成
       </td>
       <td>
        代码签名应用
       </td>
      </tr>
      <tr>
       <td>
        p12 证书（.p12）
       </td>
       <td>
        包含 cer 证书和私钥
       </td>
       <td>
        由开发者导出
       </td>
       <td>
        共享证书、CI/CD
       </td>
      </tr>
      <tr>
       <td>
        描述文件（.mobileprovision）
       </td>
       <td>
        设备授权，配合证书使用
       </td>
       <td>
        Apple Developer 生成
       </td>
       <td>
        允许 iOS 设备安装应用
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="1_14">
     </a>
     1.总体步骤
    </h3>
    <p>
     ① 先在本地 生成 CSR 文件 ➝ ② 上传到 Apple ➝ ③ Apple 颁发证书（.cer）
     <br/>
     有 CSR，你就无法申请 Apple 证书，也无法进行 iOS/macOS 应用签名！
    </p>
    <h3>
     <a id="2_18">
     </a>
     2.打开钥匙串
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/691df5610b5c4f94963530d13ed9dc38.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/db4b2762528845678418f71171891e93.png">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/56ad4d0393c7478aa5e4aaf059d8fca4.png">
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b6c30f7100604d5da4577d611e749c64.png"/>
       </img>
      </img>
     </img>
    </p>
    <h3>
     <a id="3_CSRCertificate_Signing_Request_24">
     </a>
     3.生成 CSR（Certificate Signing Request，证书签名请求）文件
    </h3>
    <p>
     CSR（Certificate Signing Request，证书签名请求） 是一份请求文件，用于向证书颁发机构（CA，如 Apple）申请 SSL/TLS 证书或代码签名证书。
     <br/>
     它包含：
    </p>
    <p>
     公钥（public key）：用于加密数据
     <br/>
     私钥的签名（由本地生成，Apple 不会存储）
     <br/>
     申请者信息（公司名称、地区、邮箱等）
     <br/>
     在 iOS/macOS 开发中，CSR 文件主要用于：
    </p>
    <p>
     申请 开发/发行证书（Apple Development &amp; Distribution）
     <br/>
     申请 APNs 证书（推送通知）
     <br/>
     申请 Apple Pay 证书
     <br/>
     如何在 macOS 生成 CSR 文件
    </p>
    <h4>
     <a id="__1_Keychain_Access_37">
     </a>
     🔹 方法 1：使用 Keychain Access（钥匙串访问）
    </h4>
    <p>
     1️⃣ 打开 钥匙串访问（Keychain Access）
     <br/>
     2️⃣ 在顶部菜单栏选择 钥匙串访问 -&gt; 证书助理 -&gt; 从证书颁发机构请求证书
     <br/>
     3️⃣ 在弹出的窗口中填写：
    </p>
    <p>
     用户电子邮件（随便填，与 Apple ID 无关）
     <br/>
     常用名称（你的名字或公司名称）
     <br/>
     CA 电子邮件地址（留空！）
     <br/>
     选择 存储到磁盘（不要选择“CA 电子邮件”） 4️⃣ 点击 “继续”，会生成一个 .certSigningRequest 文件
     <br/>
     5️⃣ 上传到 Apple Developer 网站或 CA 机构，申请证书
    </p>
    <h4>
     <a id="__2_OpenSSL__OpenSSL__CSR_47">
     </a>
     🔹 方法 2：使用 OpenSSL（终端命令行） 如果你喜欢命令行，也可以用 OpenSSL 手动生成 CSR：
    </h4>
    <pre><code class="prism language-bash"><span class="token comment"># 生成私钥（2048 位）</span>
openssl genrsa <span class="token parameter variable">-out</span> my_private_key.key <span class="token number">2048</span>
</code></pre>
    <pre><code class="prism language-bash"><span class="token comment"># 生成 CSR 文件</span>
openssl req <span class="token parameter variable">-new</span> <span class="token parameter variable">-key</span> my_private_key.key <span class="token parameter variable">-out</span> my_csr.csr
</code></pre>
    <p>
     然后用 my_csr.csr 去申请证书。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/249ae3ff89a748e8b078b26984b3cf0c.png">
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1e780f5173594e01b927947bb81deed8.png">
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/068385e213bb48978957af562731f72d.png"/>
      </img>
     </img>
    </p>
    <h3>
     <a id="4_cer__61">
     </a>
     4.证书 .cer 申请流程
    </h3>
    <p>
     1️⃣ 在 macOS 生成 CSR 文件（通过 Keychain Access 或 OpenSSL）
     <br/>
     2️⃣ 提交 CSR 给 Apple（或其他证书机构）
     <br/>
     3️⃣ 证书机构颁发 .cer 证书（下载并导入 Keychain）
     <br/>
     4️⃣ 导出 .p12 证书（包含私钥，用于应用签名）
     <br/>
     5️⃣ 在 Xcode 或服务器中使用 .p12 进行代码签名
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/459bc28edb904ac88cdef572e7c81be1.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cd85c7cd47a3450a8e5fe31a008f2515.png"/>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f4124bc041604a12b861f578b819cef1.png"/>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1d9267427d0d4e90ad31397b3e8d1745.png"/>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cbdaf11ed0874c8a9388b6ed81b2e157.png"/>
     </img>
    </p>
    <h3>
     <a id="5p12_72">
     </a>
     5.导出p12证书
    </h3>
    <p>
     .p12 证书（PKCS#12 格式）用于 存储公钥、私钥和 Apple 证书，iOS/macOS 开发者 需要它来签名应用，如：
     <br/>
     ✅ 发布 iOS/macOS 应用（App Store / Ad Hoc）
     <br/>
     ✅ APNs 推送通知（Apple Push Notification Service）
     <br/>
     ✅ 签名企业应用（In-House 证书）
     <br/>
     💡 使用 Keychain Access（钥匙串访问）导出 .p12
    </p>
    <p>
     1️⃣ 打开钥匙串访问（Keychain Access）
    </p>
    <p>
     在 macOS 上，打开 钥匙串访问（Keychain Access）
     <br/>
     选择左上角的 登录（Login）钥匙串
     <br/>
     2️⃣ 找到你的开发者证书
    </p>
    <p>
     在 类别（Category）中选择 我的证书（My Certificates）
     <br/>
     找到 Apple Development: xxx 或 Apple Distribution: xxx（其中 xxx 是你的 Apple ID）
     <br/>
     3️⃣ 右键点击证书 -&gt; 导出
    </p>
    <p>
     右键点击 你的开发者证书（确保它带有私钥）
     <br/>
     选择 导出“xxx”…（Export “xxx”）
     <br/>
     4️⃣ 选择导出格式
    </p>
    <p>
     选择 “Personal Information Exchange (.p12)”
     <br/>
     点击 保存，并选择存放路径（比如桌面）
     <br/>
     5️⃣ 设置导出密码（可选）
    </p>
    <p>
     你可以输入密码保护 .p12 证书（如果要给别人用，建议加密码）
     <br/>
     ⚠️ 记住这个密码，使用 .p12 签名时需要输入！
     <br/>
     6️⃣ 输入 Mac 登录密码
    </p>
    <p>
     macOS 可能会提示你输入 Mac 的管理员密码，输入后点击 允许
     <br/>
     7️⃣ 导出成功，得到 .p12 证书文件 🎉
    </p>
    <h3>
     <a id="6p12_103">
     </a>
     6.双击安装p12
    </h3>
    <h3>
     <a id="7Provisioning_Profile_104">
     </a>
     7.安装描述文件（Provisioning Profile）
    </h3>
    <blockquote>
     <p>
      默认情况下，Xcode 会自动安装和管理描述文件（如果启用了自动管理签名）。
      <br/>
      手动管理签名时，需要自己下载和安装 .mobileprovision 文件。
     </p>
    </blockquote>
    <p>
     📌 Xcode 自动安装描述文件的情况
     <br/>
     如果你的 Apple 开发者账号已经正确配置，并且使用的是 “自动管理签名”（Automatically manage signing），Xcode 会自动下载并安装所需的描述文件（Provisioning Profile）。
    </p>
    <p>
     步骤：
    </p>
    <p>
     打开 Xcode，进入你的项目。
     <br/>
     选择项目（Project）-&gt; TARGETS -&gt; Signing &amp; Capabilities。
     <br/>
     勾选 “Automatically manage signing”（自动管理签名）。
     <br/>
     选择你的 Apple Developer Team（需要登录 Apple 开发者账号）。
     <br/>
     Xcode 会自动创建、更新或下载 合适的 Provisioning Profile。
     <br/>
     这种方式适用于：
    </p>
    <p>
     开发（Development）
     <br/>
     App Store 发布（App Store Distribution）
     <br/>
     Ad Hoc / Enterprise 分发（如果有相应权限）
     <br/>
     📌 什么时候需要手动安装描述文件？
     <br/>
     Xcode 不会自动安装描述文件 的情况：
    </p>
    <p>
     使用手动管理签名（未勾选 “Automatically manage signing”）。
     <br/>
     描述文件已过期（需要去 Apple Developer 重新下载）。
     <br/>
     Ad Hoc / 企业证书（Enterprise）分发，必须手动生成并安装 .mobileprovision 文件。
     <br/>
     使用第三方 CI/CD 工具（如 Fastlane），通常需要手动指定描述文件。
     <br/>
     手动安装的方法：
    </p>
    <p>
     在 Apple Developer 账号（Apple Developer）中下载 .mobileprovision 文件。
     <br/>
     双击 .mobileprovision 文件，Xcode 会自动识别并安装到本机。
     <br/>
     重启 Xcode，确保能正确读取新的描述文件。
    </p>
    <h3>
     <a id="8__135">
     </a>
     8.📌 什么时候需要用这些证书？
    </h3>
    <p>
     本地开发调试
    </p>
    <p>
     需要 Development 证书（.cer）+ 开发描述文件（.mobileprovision）。
     <br/>
     Ad Hoc / 内测分发
    </p>
    <p>
     需要 Distribution 证书（.cer）+ Ad Hoc 描述文件（.mobileprovision）+ p12 证书。
     <br/>
     App Store 上架
    </p>
    <p>
     需要 Distribution 证书（.cer）+ App Store 描述文件（.mobileprovision）+ p12 证书。
    </p>
    <h3>
     <a id="9__p12____145">
     </a>
     9.📌 为什么 p12 和 描述文件 必须一起使用？
    </h3>
    <p>
     p12 证书 负责 代码签名（确保代码来源可信）。
     <br/>
     描述文件（mobileprovision） 负责 设备授权（允许哪些设备安装）。
     <br/>
     没有 p12，Xcode 不能签名；没有描述文件，设备不能安装。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031303139343237312f:61727469636c652f64657461696c732f313436313835313939" class_="artid" style="display:none">
 </p>
</div>


