---
layout: post
title: "Qt-MainWindow简单例子文本编辑"
date: 2025-03-16 21:39:32 +0800
description: "使用Qt的Mainwindow实现文本编辑窗口"
keywords: "Qt MainWindow简单例子（文本编辑）"
categories: ['Qt']
tags: ['开发语言', 'Qt']
artid: "146301859"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146301859
    alt: "Qt-MainWindow简单例子文本编辑"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146301859
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146301859
cover: https://bing.ee123.net/img/rand?artid=146301859
image: https://bing.ee123.net/img/rand?artid=146301859
img: https://bing.ee123.net/img/rand?artid=146301859
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Qt MainWindow简单例子（文本编辑）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     使用Qt控件练习文本编辑窗口的创建。
    </p>
    <pre><code class="language-cpp">#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include &lt;QMainWindow&gt;
#include &lt;QLabel&gt;
#include &lt;QProgressBar&gt;

QT_BEGIN_NAMESPACE
namespace Ui {
class MainWindow;
}
QT_END_NAMESPACE

class MainWindow : public QMainWindow
{
    Q_OBJECT

private:
    QLabel* m_labFile;
    QProgressBar* m_proGressBar;
    QLabel* m_labInfo;
public:
    MainWindow(QWidget *parent = nullptr);
    ~MainWindow();

private slots:
    void on_actionFile_New_triggered();

    void on_actionFile_Open_triggered();

    void on_actionFile_Save_triggered();

    void on_textEdit_copyAvailable(bool b);

    void on_textEdit_selectionChanged();

    void on_actionFont_Bold_triggered(bool checked);

    void on_actionFont_Italic_triggered(bool checked);

    void on_actionFont_UnderLine_triggered(bool checked);

    void on_fontSize_changed(int fontSize);

    void on_font_changed(QFont font);

private:
    Ui::MainWindow *ui;
};
#endif // MAINWINDOW_H
</code></pre>
    <pre><code class="language-cpp">#include "mainwindow.h"
#include "ui_mainwindow.h"
#include &lt;QActionGroup&gt;
#include &lt;QSpinBox&gt;
#include &lt;QFontComboBox&gt;
#include &lt;QProgressBar&gt;

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
    , ui(new Ui::MainWindow)
{
    ui-&gt;setupUi(this);
    QActionGroup* action_group = new QActionGroup(this);
    action_group-&gt;addAction(ui-&gt;actionLang_Chinese);
    action_group-&gt;addAction(ui-&gt;actionLang_English);
    action_group-&gt;setExclusive(true);

    QSpinBox* spinFontSize = new QSpinBox(this);
    spinFontSize-&gt;setMaximum(50);
    spinFontSize-&gt;setMinimum(5);
    spinFontSize-&gt;setValue(ui-&gt;textEdit-&gt;font().pointSize());
    spinFontSize-&gt;setMinimumWidth(50);
    ui-&gt;toolBar-&gt;addWidget(spinFontSize);

    QFontComboBox* comboFontBox = new QFontComboBox;
    comboFontBox-&gt;setMinimumWidth(150);
    comboFontBox-&gt;setFont(ui-&gt;textEdit-&gt;font());
    ui-&gt;toolBar-&gt;addWidget(comboFontBox);
    ui-&gt;toolBar-&gt;addSeparator();
    ui-&gt;toolBar-&gt;addAction(ui-&gt;actionClose);

    m_labFile = new QLabel(this);
    m_labFile-&gt;setMinimumWidth(150);
    m_labFile-&gt;setText("文件名: ");
    ui-&gt;statusbar-&gt;addWidget(m_labFile);
    m_proGressBar = new QProgressBar(this);
    m_proGressBar-&gt;setMinimum(5);
    m_proGressBar-&gt;setMaximum(50);
    m_proGressBar-&gt;setValue(ui-&gt;textEdit-&gt;font().pointSize());
    ui-&gt;statusbar-&gt;addWidget(m_proGressBar);

    m_labInfo = new QLabel("PermanentWidget");
    ui-&gt;statusbar-&gt;addPermanentWidget(m_labInfo);

    connect(spinFontSize, &amp;QSpinBox::valueChanged, this, &amp;MainWindow::on_fontSize_changed);
    connect(comboFontBox, &amp;QFontComboBox::currentFontChanged, this, &amp;::MainWindow::on_font_changed);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_actionFile_New_triggered()
{
    ui-&gt;textEdit-&gt;clear();
    ui-&gt;textEdit-&gt;document()-&gt;setModified(false);
    m_labFile-&gt;setText("文件名：新建一个文件");
}

void MainWindow::on_actionFile_Open_triggered()
{
    m_labFile-&gt;setText("正在打开一个文件");
}

void MainWindow::on_actionFile_Save_triggered()
{
    ui-&gt;textEdit-&gt;document()-&gt;setModified(false);
    m_labFile-&gt;setText("已经保存一个文件");
}

void MainWindow::on_textEdit_copyAvailable(bool b)
{
    ui-&gt;actionEdit_Copy-&gt;setEnabled(b);
    ui-&gt;actionEdit_Cut-&gt;setEnabled(b);
    ui-&gt;actionEdit_Paste-&gt;setEnabled(ui-&gt;textEdit-&gt;canPaste());
}

void MainWindow::on_textEdit_selectionChanged()
{
    QTextCharFormat fmt = ui-&gt;textEdit-&gt;currentCharFormat();
    ui-&gt;actionFont_Bold-&gt;setChecked(fmt.font().bold());
    ui-&gt;actionFont_Italic-&gt;setChecked(fmt.font().italic());
    ui-&gt;actionFont_UnderLine-&gt;setChecked(fmt.font().underline());
}

void MainWindow::on_actionFont_Bold_triggered(bool checked)
{
    QTextCharFormat fmt = ui-&gt;textEdit-&gt;currentCharFormat();
    if(checked)
        fmt.setFontWeight(QFont::Bold);
    else
        fmt.setFontWeight(QFont::Normal);
    //fmt.font().setBold(checked);
    ui-&gt;textEdit-&gt;setCurrentCharFormat(fmt);
}

void MainWindow::on_actionFont_Italic_triggered(bool checked)
{
    QTextCharFormat fmt = ui-&gt;textEdit-&gt;currentCharFormat();
    // fmt.font().setItalic(checked);
    fmt.setFontItalic(checked);
    ui-&gt;textEdit-&gt;setCurrentCharFormat(fmt);
}

void MainWindow::on_actionFont_UnderLine_triggered(bool checked)
{
    QTextCharFormat fmt = ui-&gt;textEdit-&gt;currentCharFormat();
    // fmt.font().setUnderline(checked);
    fmt.setFontUnderline(checked);
    ui-&gt;textEdit-&gt;setCurrentCharFormat(fmt);
}

void MainWindow::on_fontSize_changed(int fontSize)
{
    QTextCharFormat fmt = ui-&gt;textEdit-&gt;currentCharFormat();
    fmt.setFontPointSize(fontSize);

    ui-&gt;textEdit-&gt;setCurrentCharFormat(fmt);
    m_proGressBar-&gt;setValue(fontSize);
}

void MainWindow::on_font_changed(QFont font)
{
    QTextCharFormat fmt = ui-&gt;textEdit-&gt;currentCharFormat();
    fmt.setFont(font);

    ui-&gt;textEdit-&gt;setCurrentCharFormat(fmt);
    m_labInfo-&gt;setText("字体名称 " + font.family());
}</code></pre>
    <pre><code class="language-cpp">#include "mainwindow.h"

#include &lt;QApplication&gt;

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
}
</code></pre>
    <p>
     <img alt="" height="1462" src="https://i-blog.csdnimg.cn/direct/368bc8757d5f4f4a8b0e2c41673517e5.png" width="2558"/>
    </p>
    <p>
     <img alt="" height="1095" src="https://i-blog.csdnimg.cn/direct/92588846c08e45f2bddf39e017d558d8.png" width="1045"/>
    </p>
    <p>
     <img alt="" height="944" src="https://i-blog.csdnimg.cn/direct/c637857d0cf44255927350a005850137.png" width="1200"/>
    </p>
    <p>
     <img alt="" height="943" src="https://i-blog.csdnimg.cn/direct/c874753c376644f09ffc10020677693b.png" width="1424"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f686f7531393937353431382f:61727469636c652f64657461696c732f313436333031383539" class_="artid" style="display:none">
 </p>
</div>


