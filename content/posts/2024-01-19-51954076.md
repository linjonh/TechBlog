---
layout: post
title: "AndroidMonkey压力测试与停止"
date: 2024-01-19 11:07:21 +0800
description: "一、Monkey 是什么？Monkey测试是Android自动化测试的一种手段。该工具用于进行压力测"
keywords: "android monkey stop"
categories: ['Android', 'Android']
tags: ['自动化测试', '压力测试', 'Android']
artid: "51954076"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=51954076
    alt: "AndroidMonkey压力测试与停止"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=51954076
featuredImagePreview: https://bing.ee123.net/img/rand?artid=51954076
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Android】Monkey压力测试与停止
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h5 id="一monkey-是什么">
     <strong>
      一、Monkey 是什么？
     </strong>
    </h5>
    <p>
     Monkey测试是Android自动化测试的一种手段。该工具用于进行压力测试，就是模拟用户的按键输入，触摸屏输入，手势输入等，看设备多长时间会出异常。 然后开发人员结合monkey 打印的日志 和系统打印的日志，结局测试中出现的问题。
    </p>
    <p>
     <br/>
    </p>
    <h5 id="二monkey命令">
     <strong>
      二、Monkey命令
     </strong>
    </h5>
    <p>
     1）. 标准的monkey 命令
     <br/>
     [adb shell] monkey [options] &lt; eventcount &gt; , 例如：
    </p>
    <blockquote>
     <p>
      adb shell monkey -v 500
     </p>
    </blockquote>
    <p>
     产生500次随机事件，作用在系统中所有activity（其实也不是所有的activity，而是包含 Intent.CATEGORY_LAUNCHER 或Intent.CATEGORY_MONKEY 的activity）。
     <br/>
     上面只是一个简单的例子，实际情况中通常会有很多的options 选项.
    </p>
    <p>
     2）. 四大类
    </p>
    <blockquote>
     <ul>
      <li>
       常用选项
      </li>
      <li>
       事件选项
      </li>
      <li>
       约束选项
      </li>
      <li>
       调试选项
      </li>
     </ul>
    </blockquote>
    <p>
     具体的命令解释可以看这里：
     <a href="http://www.jb51.net/article/48557.htm" rel="nofollow noopener noreferrer" target="_blank">
      android 压力测试命令monkey详解
     </a>
    </p>
    <p>
     <strong>
      一个简单的Monkey命令如下：
     </strong>
    </p>
    <blockquote>
     <p>
      adb shell monkey -p com.example.xystudy -s 500 -v 10000
     </p>
    </blockquote>
    <p>
     工作中为了保证测试数量的完整进行，我们一般不会在发生错误时立刻退出压力测试。monkey 测试命令如下：
    </p>
    <pre class="prettyprint"><code class="hljs java"><span class="hljs-javadoc">/**
 * monkey 作用的包：com.ckt.android.junit
 * 产生时间序列的种子值：500
 * 忽略程序崩溃、 忽略超时、 监视本地程序崩溃、 详细信息级别为2， 产生10000个事件 。
 */</span>
adb shell monkey -p com.xy.android.junit -s <span class="hljs-number">500</span> --ignore-crashes
--ignore-timeouts --monitor-<span class="hljs-keyword">native</span>-crashes -v -v <span class="hljs-number">10000</span> &gt; E:\monkey_log\java_monkey_log.txt
</code></pre>
    <p>
     对了，如果monkey事件无法触发，或出现这种情况
     <code>
      ** SYS_KEYS has no physical keys but with factor 2.0%.
     </code>
     <br/>
     在命令中加入
     <strong>
      –pct-syskeys 0
     </strong>
     ，如下：
    </p>
    <pre class="prettyprint"><code class="hljs avrasm">adb shell monkey -p <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.android</span><span class="hljs-preprocessor">.browser</span> --pct-syskeys <span class="hljs-number">0</span> -v <span class="hljs-number">500</span></code></pre>
    <p>
     <br/>
    </p>
    <h5 id="三强制停止monkey测试">
     <strong>
      三、强制停止Monkey测试
     </strong>
    </h5>
    <pre class="prettyprint"><code class="hljs tex">adb shell ps | awk '/com<span class="hljs-command">\.</span>android<span class="hljs-command">\.</span>commands<span class="hljs-command">\.</span>monkey/ <span class="hljs-special">{<!-- --></span> system("adb shell kill " <span class="hljs-formula">$2) <span class="hljs-special">}</span>'  
</span></code></pre>
    <p>
     <br/>
     <br/>
     <br/>
    </p>
    <h5 id="参考资料">
     【参考资料】
    </h5>
    <p>
     1、
     <a href="http://www.jb51.net/article/48557.htm" rel="nofollow noopener noreferrer" target="_blank">
      android 压力测试命令monkey详解
     </a>
     <br/>
     2、
     <a href="http://www.testwo.com/article/402" rel="nofollow noopener noreferrer" target="_blank">
      Monkey 的专项测试浅谈
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f75303130393833383831:2f61727469636c652f64657461696c732f3531393534303736" class_="artid" style="display:none">
 </p>
</div>


