---
layout: post
title: "HTTPDNS综合实验"
date: 2025-03-16 11:00:55 +0800
description: "1、学校内部的HTTP客户端可以正常通过域名www.baidu.com访问到百度网络中的HTTP服务器。2、学校内部网络基于192.168.1.0/24划分，PC1可以正常访问3.3.3.0/24网段，但是PC2不允许。3、学校内部网络使用静态路由，R1和R2之间两条链路进行浮动静态。4、运营商网络内部使用动态路由协议5、R2可以被telnet远程控制。"
keywords: "HTTP+DNS综合实验"
categories: ['未分类']
tags: ['网络协议', '网络']
artid: "146259854"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146259854
    alt: "HTTPDNS综合实验"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146259854
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146259854
cover: https://bing.ee123.net/img/rand?artid=146259854
image: https://bing.ee123.net/img/rand?artid=146259854
img: https://bing.ee123.net/img/rand?artid=146259854
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     HTTP+DNS综合实验
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、实验拓扑
    </h2>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/314929552ed6438f94db056ce18e2806.png"/>
    </p>
    <h2>
     二、实验要求
    </h2>
    <p>
     1、学校内部的HTTP客户端可以正常通过域名www.baidu.com访问到百度网络中的HTTP服务器。
    </p>
    <p>
     2、学校内部网络基于192.168.1.0/24划分，PC1可以正常访问3.3.3.0/24网段，但是PC2不允许。
    </p>
    <p>
     3、学校内部网络使用静态路由，R1和R2之间两条链路进行浮动静态。
    </p>
    <p>
     4、运营商网络内部使用动态路由协议
    </p>
    <p>
     5、R2可以被telnet远程控制
    </p>
    <h2>
     三、实验步骤
    </h2>
    <h3>
     1、实现学校内部网络互通
    </h3>
    <p>
     学校内部网段基于192.168.1.0/24进行划分，我们划分四个网段，划分的网段分别为：
    </p>
    <ul>
     <li>
      192.168.1.0/26（VLAN2）
     </li>
     <li>
      192.168.1.64/26（VLAN3）
     </li>
     <li>
      192.168.1.128/26（R1和R2）
     </li>
     <li>
      192.168.1.192/26（R1和R2）
     </li>
    </ul>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/dbf44504dc7d41a49637d6539652bf57.png"/>
    </p>
    <h4>
     （1）基本IP配置
    </h4>
    <p>
     PC1上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/39219406947e48c994c28893882b44c7.png"/>
    </p>
    <p>
     PC2上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/97d068e082f747efacd590e93f96dc55.png"/>
    </p>
    <p>
     HTTP客户端上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/90d462af02b443f194620ad606a4911a.png"/>
    </p>
    <p>
     R1上：
    </p>
    <p>
     其中子接口g0/0/0.1和g0/0/0.2分别作为vlan2和vlan3的网关。
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/3836713567a64aee9b01dd0d05479efd.png"/>
    </p>
    <p>
     R2上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/19acea74495446918eba24df0246a8f5.png"/>
    </p>
    <p>
     <strong>
      相关命令参考：
     </strong>
    </p>
    <pre><code># 进入接口配置IP地址
[R1]int g0/0/1
[R1-GigabitEthernet0/0/1]ip address 192.168.1.129 26

# 查看接口ip配置
[R1]display ip interface brief</code></pre>
    <h4>
     （2）配置VLAN
    </h4>
    <p>
     LSW1上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/8de3c2ec036d47f5b1a5710d5a0ebe30.png"/>
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/3b74a1ce0dfe4bbbaf6a4ebf3224d1d7.png"/>
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/6c48f33744cf4300ad8cbad40f8cd4a3.png"/>
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/99130f5d573842f492b31fdc74079825.png"/>
    </p>
    <p>
     R1上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/603b2f9ecddf42488f3760487c111c55.png"/>
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/b286f9cec3064f0b956f2166587baa73.png"/>
    </p>
    <p>
     <strong>
      相关命令参考：
     </strong>
    </p>
    <pre><code>[SW1]vlan 2 			//单个创建vlan
[SW2]vlan batch 2 3		//单个创建vlan
[SW2]vlan batch 20 to 30		//批量创建vlan20-30

[SW1]int e0/0/2	
[SW1-Ethernet0/0/2]port link-type access	//配置端口的链路模式
[SW1-Ethernet0/0/2]port default vlan 2		//将接口加入相应vlan

[SW1-Ethernet0/0/1]port link-type trunk	    //配置端口的链路模式
[SW1-Ethernet0/0/1]port trunk allow-pass vlan 2 3	//trunk干道上放行vlan

[R1]int g0/0/0.2		//创建子接口
[R1-GigabitEthernet0/0/0.2]ip add 192.168.1.254 24	//配置子接口地址，相当于网关
[R1-GigabitEthernet0/0/0.2]dot1q termination vid 2	//相当于把这个接口划分给相应的vlan了
[R1-GigabitEthernet0/0/0.2]arp broadcast enable		//开启ARP广播。

# 额外：三层交换机配置
[SW1]int vlanif 10
[SW1-Vlanif10]ip add 192.168.10.254 24
[SW1-Vlanif10]int vlanif 20
[SW1-Vlanif20]ip add 192.168.20.254 24</code></pre>
    <h4>
     （3）配置静态路由
    </h4>
    <p>
     这里配置了浮动路由。
    </p>
    <p>
     R1上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/5be74dc469544d73883a6e973d51a281.png"/>
    </p>
    <p>
     R2上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/0385debfb075419192d39236a9a1b364.png"/>
    </p>
    <p>
     <strong>
      相关命令参考：
     </strong>
    </p>
    <pre><code>[R1]ip route-static 192.168.1.64 27 192.168.1.2		//配置静态路由ip route-static 目的地址 子网掩码 下一跳地址
[R1]ip route-static 0.0.0.0 0 192.168.1.2		//配置缺省路由使得任何地址都能经过下一跳的地
[R1]ip route-static 192.168.1.32 27 NULL 0		//防环，做黑洞路由配置
[R5]ip route-static 192.168.1.0 24 192.168.1.21 preference 61	//设置路由优先级，优先级数字越小越优先
[R1]display ip routing-table		//查看路由表，后面可跟协议类型
[R1]tracert 5.5.5.5		//查看该主机到达5.5.5.5经过了哪些地址</code></pre>
    <h4>
     （4）测试
    </h4>
    <p>
     PC1 ping HTTP客户端
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/b1fa218cf87f4171882539004e2198ce.png"/>
    </p>
    <p>
     PC1 ping R2
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/9482c6885a7c4a76bc302d3e7f2c869d.png"/>
    </p>
    <h3>
     2、实现运营商公网互通
    </h3>
    <p>
     运营商划分五个网段，划分的网段分别为：
    </p>
    <ul>
     <li>
      100.0.1.0/24（DNS和R4）
     </li>
     <li>
      100.0.2.0/24（R3和R4）
     </li>
     <li>
      100.0.3.0/24（R2和R3）
     </li>
     <li>
      100.0.5.0/24（R3和R5）
     </li>
     <li>
      100.0.6.0/24（R5和R6）
     </li>
    </ul>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/4f6f967dcd48486aac837c1e60af41a1.png"/>
    </p>
    <p>
    </p>
    <h4>
     （1）基本IP配置
    </h4>
    <p>
     DNS服务器上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/0e1d826bf762447386a645d7e4d1f981.png"/>
    </p>
    <p>
     R4上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/060b795e2b6b4929ae4222d7237fd7dc.png"/>
    </p>
    <p>
     R3上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/bc2e13a1eeef419c9f90e042bd5a7686.png"/>
    </p>
    <p>
     R5上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/ef6b5673aae5474c80519b5ded66aedb.png"/>
    </p>
    <h4>
     （2）配置动态路由（OSPF）
    </h4>
    <p>
     这里我选择了OSPF协议。
    </p>
    <p>
     R4上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/59afcb41e4a9487d97aaaa8211a6ee76.png"/>
    </p>
    <p>
     R3上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/ad5618795d034a598cea57dda331ffe1.png"/>
    </p>
    <p>
     R5上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/58843cc5b2e142cab1fca1bafd53e93d.png"/>
    </p>
    <p>
     <strong>
      相关命令参考：
     </strong>
    </p>
    <pre><code>[R1]ospf 1 router-id 1.1.1.1		//配置ospf协议，配置router-id（一般按照主机型号配置）
[R1-ospf-1]area 0		//分配区域
[R1-ospf-1-area-0.0.0.0]network 192.168.1.32 0.0.0.0	//精确宣告（宣告地址），后面跟着反掩码
[R1-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.31	//网段宣告（宣告网段）
[R1]dis ospf peer		//查看邻居表
[R1]dis ospf peer brief		//查看邻居表（简洁）
[R1]dis ospf lsdb			//查看链路状态数据库表（目前用不到）
[R4-ospf-1]default-route-advertise always		//给区域内所有路由下发一条到达目的网段的默认路由（和rip的指令不同）
[R1-GigabitEthernet0/0/0]ospf dr-priority 0		//修改接口优先级，优先级为0，代表此接口失去了成为 DR或者BDR的资格，优先级高的获得DR资格。
[R1-GigabitEthernet0/0/0]ospf authentication-mode md5 1 cipher 12138		//接口认证
[R3-ospf-1-area-0.0.0.0]authentication-mode md5 1 cipher 12138		//区域认证，接口认证优于区域认证
[R3-ospf-1-area-0.0.0.0]abr-summary 192.168.1.0 255.255.255.128		//网段汇总


# 额外：RIP协议
[R1]rip 1		//配置rip协议
[R1-rip-1]version 2		//选择rip版本
[R1-rip-1]network 192.168.1.0		//宣告直连网段
[R1-rip-1]undo summary 		//关闭自动汇总
[r3-rip-1]default-route originate     //当前设备生成一条缺省路由或者将路由表中存在的缺省路由发送给邻居
[R1-GigabitEthernet0/0/0]rip authentication-mode md5 usual cipher 12345		//接口认证
[R1-GigabitEthernet0/0/0]rip summary-address 192.168.1.128 255.255.255.192	//接口汇总
</code></pre>
    <h4>
     （3）查看ospf路由表并测试
    </h4>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/858777db0b2d493ead4653135295c8a0.png"/>
    </p>
    <p>
     DNS ping R5：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/d8b183caf96f48a790f36873c31e2df2.png"/>
    </p>
    <h3>
     3、配置百度内部网络以及各不同网段之间的通信
    </h3>
    <p>
     百度内部网段基于192.168.2.0/24进行划分。
    </p>
    <h4>
     （1）基本IP配置
    </h4>
    <p>
     R2上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/2b8ede28ea3d4aeca07782efe07f3574.png"/>
    </p>
    <p>
     R6上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/1b3f6d2ec5fc455a94b1444899ed9f5c.png"/>
    </p>
    <p>
     HTTP服务端上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/dd97179855d14c53864a158301e6555a.png"/>
    </p>
    <h4>
     （2）配置NAT
    </h4>
    <p>
     这里选择都配置EASY IP，R6额外配置NAT server
    </p>
    <p>
     R2上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/025c66f1d334463497c32ef87f6f11c2.png"/>
    </p>
    <p>
     还需要配一条缺省：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/aa38ae6d8ffc4d8689f96cf598a1e104.png"/>
    </p>
    <p>
     R6上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/a3afdcd41d1049febe78e444cb1893f9.png"/>
    </p>
    <p>
     还需要一条缺省：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/22f611910e1a40078818024e74e1bf60.png"/>
    </p>
    <p>
     以及nat server：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/4fbcbbdc8aed4791b00a346b2fa66eaa.png"/>
    </p>
    <p>
     <strong>
      相关命令参考：
     </strong>
    </p>
    <pre><code>NAPT：
[R1]acl 2000
[R1-acl-basic-2000]rule permit source 192.168.1.0 0.0.0.255	//创建基本acl，允许该网段通过
[R1]nat address-group 1 100.1.1.3 100.1.1.254		//创建地址池，设置公网地址
[R1]interface g0/0/1
[R1-GigabitEthernet0/0/1]nat outbound 2000  address-group 1 	//接口上配置napt

EASY IP：
[R3]acl 2000
[R3-acl-basic-2000]rule permit source 192.168.1.0 0.0.0.255	//创建基本acl，允许该网段通过
[R3]interface g0/0/0
[R3-GigabitEthernet0/0]nat outbound 2000		//接口上配置 EASY IP

NAT SERVER：
[R1-GigabitEthernet0/0/1]nat server protocol tcp global current-interface 23 inside 192.168.1.2 23	//配置NAT SERVER，映射端口23</code></pre>
    <h4>
     （3）测试
    </h4>
    <p>
     PC1 ping R6：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/1f2e925f00a14941b5589159ab1a8cf4.png"/>
    </p>
    <h3>
     4、配置DNS和HTTP服务器
    </h3>
    <h4>
     （1）开启DNS和HTTP服务
    </h4>
    <p>
     DNS上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/0014a1579c0d4e97b5bb3e34d70e7297.png"/>
    </p>
    <p>
     HTTP服务端上：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/ec9e168721a0419aa59248064face957.png"/>
    </p>
    <h4>
     （2）测试
    </h4>
    <p>
     HTTP客户端配置DNS服务器后测试：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/148f039208e2496e893b3bdd7c2df4a4.png"/>
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/15b534c71fac4ce293b30254ff83dd54.png"/>
    </p>
    <h3>
     5、R2上配置telnet服务
    </h3>
    <h4>
     （1）开启telnet服务
    </h4>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/890c6c5c06e04bb5bf7e1367f2ba149d.png"/>
    </p>
    <p>
     <strong>
      相关命令参考：
     </strong>
    </p>
    <pre><code>[telnet server]aaa    //一种安全模式
[telnet server-aaa]local-user obboda privilege level 15 password cipher obboda123   //创建用户，授权、配置用户密码
[telnet server-aaa]local-user obboda service-type telnet //配置用户的服务类型
[telnet server]user-interface vty 0 4   //配置用户远程登录的数量
[telnet server-ui-vty0-4]authentication-mode aaa   //配置用户认证模式</code></pre>
    <h4>
     （2）测试
    </h4>
    <p>
     R1 telnet R2查看接口的IP配置：
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/9d900cfcc09f48b5a58344d5a13290cf.png"/>
    </p>
    <h3>
     6、禁止PC2访问3.3.3.0/24网段
    </h3>
    <p>
     在本次实验中，我将3.3.3.0/24的网段划分到了R3的环回接口上了。目前PC1和PC2都可以正常访问到3.3.3.3，所以我们需要配置ACL来过滤PC2地址的流量。因为是私网访问公网，所以我们应该在私网内配置。
    </p>
    <h4>
     （1）配置高级ACL
    </h4>
    <p>
     这里我们选择配置在R1上
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/630e7cd510414d7d95379a252047429e.png"/>
    </p>
    <h4>
     （2）应用到接口
    </h4>
    <p>
     这里我们选择在R1的进接口上
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/5c24ff6585c649ec9e02dbc03b008431.png"/>
    </p>
    <p>
     <strong>
      相关命令参考：
     </strong>
    </p>
    <pre><code># 高级ACL：
[R1]acl 3000
[R1-acl-adv-3000]rule deny tcp source 192.168.1.10 0.0.0.0 destination 192.168.2.2 0.0.0.0 destination-port eq 23	//配置acl

[R1]int g0/0/0
[R1-GigabitEthernet0/0/0]traffic-filter inbound acl 3000	//接口下发acl，对外部流入进来的流量做限制</code></pre>
    <h4>
     （3）测试
    </h4>
    <p>
     PC1 访问 3.3.3.0/24网段
     <img src="https://i-blog.csdnimg.cn/direct/307ab44f569147528aefb272d0f09cb2.png"/>
    </p>
    <p>
     PC2 访问 3.3.3.0/24网段
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/5082e462758b4005b9431109271bb481.png"/>
    </p>
    <p>
     PC2 访问 公网其它网段
    </p>
    <p>
     <img src="https://i-blog.csdnimg.cn/direct/5a0abdddc93c410b9fae751ab4b28664.png"/>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6f62626f64612f:61727469636c652f64657461696c732f313436323539383534" class_="artid" style="display:none">
 </p>
</div>


