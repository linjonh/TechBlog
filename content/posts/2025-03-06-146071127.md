---
layout: post
title: "我的两个医学数据分析技术思路"
date: 2025-03-06 16:47:43 +0800
description: "当拿到一份数据，可以先做预分析，如果得到的相关变量较多，就可以做预测模型，如果不够多，就可以考虑独立危险因素分析。个人感觉，数据分析类的研究关键在于数据，大样本，自己收集的，有特点的数据更容易做出有意义的研究。"
keywords: "我的两个医学数据分析技术思路"
categories: ['预测模型构建和评价', '有用的数据分析']
tags: ['数据挖掘', '数据分析', '大数据']
artid: "146071127"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146071127
    alt: "我的两个医学数据分析技术思路"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146071127
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146071127
cover: https://bing.ee123.net/img/rand?artid=146071127
image: https://bing.ee123.net/img/rand?artid=146071127
img: https://bing.ee123.net/img/rand?artid=146071127
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     我的两个医学数据分析技术思路
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     我的两个医学数据分析技术思路
    </h2>
    <p>
     从临床上获得的或者公共数据库数据这种属于观察性研究，是对临床诊疗过程中自然产生的数据进行分析而获得疾病发生发展的规律等研究成果。再细分，可以分为独立危险因素鉴定和预测模型构建两种。
    </p>
    <p>
     独立危险因素鉴定是一直以来的研究内容，目的是研究疾病预后的影响因素或者开发诊断指标，早期是通过统计学和逻辑回归模型等方法进行研究；而预测模型构建是后来出现的，把多个独立危险因素集中起来共同对疾病结局进行预测或者诊断疾病，达到更好地诊断和治疗疾病的目的。
    </p>
    <p>
     数据分析技术新的发展也给以上两部分内容带来了新的面貌，这里总结个人在这两方面的分析技术思路，供大家借鉴。
    </p>
    <h3>
     <a id="_6">
     </a>
     机器学习算法主导的独立危险因素鉴定
    </h3>
    <p>
     这里的机器学习主要是指xgboost等非线性模型，传统的是使用多因素逻辑回归作为独立危险因素鉴定的最终结果，线性模型事先假定变量之间的关系是线性的被认为可能造成了分析结果的不准确，所以现在用xgboost等非线性模型来克服这个缺点，但是非线性模型就没有象OR值这样能反映变量间关联强度的指标，等到SHAP分析这样可以解释模型的工具出现之后，机器学习算法主导的独立危险因素鉴定才形成套路。
     <br/>
     <strong>
      技术思路：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       变量信息表（传统的表1），展示变量的分布信息（平均值和标准差等）
      </p>
     </li>
     <li>
      <p>
       Boruta算法筛选变量，这是近年才流行的方法，微小的关联也能筛选出来，所以不担心遗漏有意义的变量。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b2b77ee46df3495b9e887ec700a67b5d.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       构建xgboost等非线性模型并展示模型效能，这里良好的模型性能代表所选择的变量与结局变量之间有良好的相关性，在这个前提下，后续的分析才是有价值的。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/554fa4d7033844cb8120e4251e4a6429.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       SHAP分析展示变量的整体贡献，可以选择排名靠前的变量或者所有的变量进行后续的分析；
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/df95b88cd9ed42f19fa82bd5069efb1b.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       SHAP分析展示单个变量随变量值变化其对结局变量贡献（某变量的SHAP值）的变化，结合立方样条曲线拟合确定关键的点（SHAP值为0时对应的点和shap值大于0的曲线上的拐点）
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6cdde2497e4044d1abf99ff38a6bfe84.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       SHAP分析展示变量间的交互作用，展示变量间的交互作用。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6ce68c03a0b84349a636e7a20c35f5f0.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       其它，可以加入传统的线性模型的分析方法以从不同方面展示独立危险因素；如果收集了同类变量，还可以比较同类变量之间与结局变量相关性的差异；如果得到的独立危险因素够多，可以进行预测模型的构建，否则也可以独立成文。
      </p>
     </li>
    </ol>
    <h3>
     <a id="_25">
     </a>
     临床预测模型构建（从数据到应用）
    </h3>
    <p>
     临床预测模型在这里不多介绍。
     <br/>
     <strong>
      技术思路：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       变量的展示（表1）
      </p>
     </li>
     <li>
      <p>
       Boruta，Lasso等方法选择变量，传统的通过单因素分析p值的半自动方法应该淘汰了。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2af52a2faca947eaab5ef8764a07ad8f.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       模型构建和评价，评价包括内部评价和外部评价，ROC曲线和校准曲线等我们已经耳熟能详的指标。这里可以是单个模型，也可以是相似结局的一组模型。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/84c2c37a4a6a47408e0385e7e2e8b468.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       SHAP分析等解释模型，这里以汇总结果为主，从整体评价变量对模型的贡献；
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8687a01d49904ef090e5df452f77a9b8.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       DCA分析，比较模型间的净收益以选择模型，或者变量间的净收益来评价变量；
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7b5f56426ab740898f23f0f57f32b031.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       构建列线图或者预测模型APP，如果是APP，推荐融入SHAP分析的个体评价，对单个预测结果进行解释，可以展示变量当前值对预测结果的贡献，在临床实践中可以解析为当前患者的病因是什么；
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/be4b5516e45246778c2e511212d43a07.png#pic_center"/>
      </p>
     </li>
     <li>
      <p>
       后续，确定后续的临床措施（预测模型阳性采取的检验或者治疗措施）并进行预测模型临床影响力评价（一般是随机对照试验）。
      </p>
     </li>
    </ol>
    <h3>
     <a id="_47">
     </a>
     最后
    </h3>
    <p>
     当拿到一份数据，可以先做预分析，如果得到的相关变量较多，就可以做预测模型，如果不够多，就可以考虑独立危险因素分析。
    </p>
    <p>
     个人感觉，数据分析类的研究关键在于数据，大样本，自己收集的，有特点的数据更容易做出有意义的研究。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f736b79736b79746f746f702f:61727469636c652f64657461696c732f313436303731313237" class_="artid" style="display:none">
 </p>
</div>


