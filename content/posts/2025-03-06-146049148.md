---
layout: post
title: "RabbitMQSpring-Boot-ç»“åˆ-RabbitMQ-å®Œæˆåº”ç”¨é—´çš„é€šä¿¡"
date: 2025-03-06 17:21:42 +0800
description: "Spring æ¡†æ¶ä¸ RabbitMQ çš„æ•´åˆä¸»è¦é€šè¿‡Â Spring AMQPï¼ˆAdvanced Message Queuing Protocolï¼‰æ¨¡å—å®ç°ï¼Œæä¾›äº†ä¾¿æ·çš„æ¶ˆæ¯é˜Ÿåˆ—å¼€å‘èƒ½åŠ›ã€‚@RabbitHandlerÂ æ³¨è§£ç”¨äºæ ‡è®°æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¼šæ ¹æ®æ¶ˆæ¯çš„ç±»å‹æ¥å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚å½“ä¸€ä¸ªæ¶ˆæ¯ç›‘å¬å™¨å®¹å™¨æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šæ ¹æ®æ¶ˆæ¯çš„ç±»å‹é€‰æ‹©åˆé€‚çš„Â @RabbitHandlerÂ æ³¨è§£çš„æ–¹æ³•æ¥å¤„ç†è¯¥æ¶ˆæ¯ã€‚Â "
keywords: "ã€RabbitMQã€‘Spring Boot ç»“åˆ RabbitMQ å®Œæˆåº”ç”¨é—´çš„é€šä¿¡"
categories: ['ä¸­é—´ä»¶ä¼ä¸šçº§ä¸­é—´ä»¶å‰–æ']
tags: ['å­¦ä¹ ', 'Spring', 'Spring', 'Rabbitmq', 'Rabbitmq', 'Boot']
artid: "146049148"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146049148
    alt: "RabbitMQSpring-Boot-ç»“åˆ-RabbitMQ-å®Œæˆåº”ç”¨é—´çš„é€šä¿¡"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146049148
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146049148
cover: https://bing.ee123.net/img/rand?artid=146049148
image: https://bing.ee123.net/img/rand?artid=146049148
img: https://bing.ee123.net/img/rand?artid=146049148
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ã€RabbitMQã€‘Spring Boot ç»“åˆ RabbitMQ å®Œæˆåº”ç”¨é—´çš„é€šä¿¡
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p class="img-center">
     <img alt="" height="140" src="https://img-blog.csdnimg.cn/direct/2b890d64512e4255b4419b4ec36be3a2.png" width="407"/>
    </p>
    <p class="img-center">
     <img alt="" height="80" src="https://img-blog.csdnimg.cn/direct/978cee77d6a54aa684bc0ab6be5a4023.png" width="640"/>
    </p>
    <p style="text-align:center">
     ğŸ”¥ä¸ªäººä¸»é¡µï¼š
     <a href="https://blog.csdn.net/2302_79806056?spm=1000.2115.3001.5343" title="ä¸­è‰è¯">
      ä¸­è‰è¯
     </a>
    </p>
    <p style="text-align:center">
     ğŸ”¥ä¸“æ ï¼š
     <a href="https://blog.csdn.net/2302_79806056/category_12906397.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=12906397&amp;sharerefer=PC&amp;sharesource=2302_79806056&amp;sharefrom=from_link" title="ã€ä¸­é—´ä»¶ã€‘ä¼ä¸šçº§ä¸­é—´ä»¶å‰–æ">
      ã€ä¸­é—´ä»¶ã€‘ä¼ä¸šçº§ä¸­é—´ä»¶å‰–æ
     </a>
    </p>
    <hr/>
    <p>
     Spring æ¡†æ¶ä¸ RabbitMQ çš„æ•´åˆä¸»è¦é€šè¿‡
     <strong>
      Spring AMQP
     </strong>
     ï¼ˆAdvanced Message Queuing Protocolï¼‰æ¨¡å—å®ç°ï¼Œæä¾›äº†ä¾¿æ·çš„æ¶ˆæ¯é˜Ÿåˆ—å¼€å‘èƒ½åŠ›ã€‚
    </p>
    <p>
     <img alt="" height="1321" src="https://i-blog.csdnimg.cn/direct/4b2b56f1d53844ceae6160e0e29f8487.png" width="2548"/>
    </p>
    <p>
     <strong>
      å¼•å…¥ä¾èµ–
     </strong>
    </p>
    <pre><code class="language-XML">    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;
            &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;</code></pre>
    <p>
     <strong>
      é…ç½®
     </strong>
    </p>
    <pre><code class="language-XML">#é…ç½®RabbitMQçš„åŸºæœ¬ä¿¡æ¯
spring:
 rabbitmq:
 host: 110.41.51.65
 port: 15673 #é»˜è®¤ä¸º5672
 username: study
 password: study
 virtual-host: bite #é»˜è®¤å€¼ä¸º

#æˆ–è€…ä»¥ä¸‹è¿™ç§æ–¹å¼
 rabbitmq:
   addresses: #amqp://username:password@Ip:port/virtual-host</code></pre>
    <h2 style="background-color:transparent">
     ä¸€ã€å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ï¼ˆWork Queueï¼‰
    </h2>
    <p>
     <strong>
      åœºæ™¯
     </strong>
     ï¼šå¤šä¸ªæ¶ˆè´¹è€…å…±äº«ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¶ˆæ¯è¢«è½®è¯¢åˆ†å‘ï¼ˆRound-Robinï¼‰ï¼Œç”¨äºä»»åŠ¡åˆ†å‘å’Œè´Ÿè½½å‡è¡¡ï¼ˆå¦‚è€—æ—¶ä»»åŠ¡å¤„ç†ï¼‰ã€‚
    </p>
    <p>
     <strong>
      producer
     </strong>
    </p>
    <pre><code class="language-java">@RestController
@RequestMapping("/producer")
public class ProducerController {
    @Autowired
    private RabbitTemplate rabbitTemplate;

    @RequestMapping("/work")
    public String work(){
        //ä½¿ç”¨å†…ç½®äº¤æ¢æœº RoutingKey å’Œé˜Ÿåˆ—åç§°ä¸€è‡´
        for (int i = 0; i &lt; 10; i++) {
            rabbitTemplate.convertAndSend("", Constants.WORK_QUEUE,"Hello World"+i);
        }
        return "OK";
    }
}
</code></pre>
    <p>
     <strong>
      <code>
       @RabbitListener
      </code>
     </strong>
     æ˜¯ Spring æ¡†æ¶ä¸­ç”¨äºç›‘å¬ RabbitMQ é˜Ÿåˆ—çš„æ³¨è§£ï¼Œé€šè¿‡ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œä»¥ä¾¿ä» RabbitMQ é˜Ÿåˆ—ä¸­æ¥æ”¶æ¶ˆæ¯ï¼ˆç›¸å½“äºæ¶ˆè´¹è€…ï¼‰ã€‚è¯¥æ³¨è§£æ”¯æŒå¤šç§å‚æ•°ç±»å‹ï¼Œè¿™äº›å‚æ•°ç±»å‹ä»£è¡¨äº†ä» RabbitMQ æ¥æ”¶åˆ°çš„æ¶ˆæ¯å’Œç›¸å…³ä¿¡æ¯ã€‚
    </p>
    <p>
     ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å‚æ•°ç±»å‹ï¼š
    </p>
    <ol>
     <li>
      <span style="color:#494949">
       <code>
        String
       </code>
       ï¼šè¿”å›æ¶ˆæ¯çš„å†…å®¹ã€‚
      </span>
     </li>
     <li>
      <span style="color:#494949">
       <code>
        Message
       </code>
       ï¼ˆ
       <code>
        org.springframework.amqp.core.Message
       </code>
       ï¼‰ï¼šSpring AMQP çš„ Message ç±»ï¼Œè¿”å›åŸå§‹çš„æ¶ˆæ¯ä½“ä»¥åŠæ¶ˆæ¯çš„å±æ€§ï¼Œå¦‚æ¶ˆæ¯ IDã€å†…å®¹ã€é˜Ÿåˆ—ä¿¡æ¯ç­‰ã€‚
      </span>
     </li>
     <li>
      <span style="color:#494949">
       <code>
        Channel
       </code>
       ï¼ˆ
       <code>
        com.rabbitmq.client.Channel
       </code>
       ï¼‰ï¼šRabbitMQ çš„é€šé“å¯¹è±¡ï¼Œå¯ä»¥ç”¨äºè¿›è¡Œæ›´é«˜çº§çš„æ“ä½œï¼Œå¦‚æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯ ã€‚
      </span>
     </li>
    </ol>
    <pre><code class="language-java">@Component
public class WorkListener {

    @RabbitListener(queues = Constants.WORK_QUEUE)
    public void queueListener1(Message message, Channel channel) {
        System.out.println("Listener1:["+Constants.WORK_QUEUE+"]"+message+",channel:"+channel);
    }

    @RabbitListener(queues = Constants.WORK_QUEUE)
    public void queueListener2(String message) {
        System.out.println("Listener2:["+Constants.WORK_QUEUE+"]"+message);
    }
}
</code></pre>
    <p>
     è§‚å¯Ÿæ§åˆ¶å°
    </p>
    <p>
     <img alt="" height="1081" src="https://i-blog.csdnimg.cn/direct/2875e12ac1504966a309e5114e0fdae5.png" width="2347"/>
    </p>
    <p>
     <strong>
      è½®è¯¢åˆ†å‘
     </strong>
     ï¼šé»˜è®¤æŒ‰é¡ºåºå°†æ¶ˆæ¯åˆ†å‘ç»™ä¸åŒæ¶ˆè´¹è€…ã€‚
    </p>
    <h2>
     äºŒã€å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPublish/Subscribeï¼‰
    </h2>
    <p>
     <strong>
      åœºæ™¯
     </strong>
     ï¼šæ¶ˆæ¯å¹¿æ’­åˆ°æ‰€æœ‰ç»‘å®šçš„é˜Ÿåˆ—ï¼ˆå¦‚æ—¥å¿—å¹¿æ’­ã€äº‹ä»¶é€šçŸ¥ï¼‰ï¼Œä½¿ç”¨
     <strong>
      Fanout äº¤æ¢æœº
     </strong>
     ã€‚
    </p>
    <p>
     <strong>
      å£°æ˜ä½¿ç”¨äº¤æ¢æœºå’Œé˜Ÿåˆ— å¹¶ç»‘å®š
     </strong>
    </p>
    <pre><code class="language-java">@Configuration
public class RabbitMQConfig {
    @Bean("fanoutQueue1")
    public Queue funoutQueue1() {
        return QueueBuilder.durable(Constants.FUNOUT_QUEUE1).build();
    }

    @Bean("fanoutQueue2")
    public Queue funoutQueue2() {
        return QueueBuilder.durable(Constants.FUNOUT_QUEUE2).build();
    }

    @Bean("funoutExchange")
    public FanoutExchange funoutExchange(){
        return ExchangeBuilder.fanoutExchange(Constants.FUNOUT_EXCHANGE).durable(true).build();
    }

    @Bean("funoutQueueBinding1")
    public Binding funoutQueueBinding1(@Qualifier("fanoutQueue1") Queue queue,@Qualifier("funoutExchange") FanoutExchange funoutExchange){
        return BindingBuilder.bind(queue).to(funoutExchange);
    }

    @Bean("funoutQueueBinding2")
    public Binding funoutQueueBinding2(@Qualifier("fanoutQueue2") Queue queue,@Qualifier("funoutExchange") FanoutExchange funoutExchange){
        return BindingBuilder.bind(queue).to(funoutExchange);
    }
}
</code></pre>
    <p>
     <strong>
      producer
     </strong>
    </p>
    <pre><code class="language-java">
@RestController
@RequestMapping("/producer")
public class ProducerController {
    @Autowired
    private RabbitTemplate rabbitTemplate;

    @RequestMapping("/funout")
    public String funout(){
        rabbitTemplate.convertAndSend(Constants.FUNOUT_EXCHANGE,"","Hello Spring funout");
        return "OK";
    }
}
</code></pre>
    <p>
     <strong>
      listener
     </strong>
    </p>
    <pre><code class="language-java">@Component
public class FunoutListener {

    @RabbitListener(queues = Constants.FUNOUT_QUEUE1)
    public void queueListener1(String message) {
        System.out.println("Listener1:["+Constants.FUNOUT_QUEUE1+"]"+message);
    }

    @RabbitListener(queues = Constants.FUNOUT_QUEUE2)
    public void queueListener2(String message) {
        System.out.println("Listener2:["+Constants.FUNOUT_QUEUE2+"]"+message);
    }
}
</code></pre>
    <blockquote>
     <p>
      åœ¨å®é™…å¼€å‘ä¹‹ä¸­ï¼Œä¸€ä¸ª listener ç›‘å¬ä¸€ä¸ª queue
     </p>
    </blockquote>
    <h2>
     ä¸‰ã€è·¯ç”±æ¨¡å¼ï¼ˆRoutingï¼‰
    </h2>
    <p>
     <strong>
      åœºæ™¯
     </strong>
     ï¼šæ ¹æ®
     <strong>
      è·¯ç”±é”®ï¼ˆRouting Keyï¼‰
     </strong>
     ç²¾å‡†åŒ¹é…ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šé˜Ÿåˆ—ï¼Œä½¿ç”¨
     <strong>
      Direct äº¤æ¢æœº
     </strong>
     ã€‚
    </p>
    <p>
     <strong>
      å£°æ˜ä½¿ç”¨äº¤æ¢æœºå’Œé˜Ÿåˆ— å¹¶ç»‘å®š
     </strong>
    </p>
    <pre><code class="language-java">@Configuration
public class RabbitMQConfig {
     //direct
    @Bean("directQueue1")
    public Queue directQueue1() {
        return QueueBuilder.durable(Constants.DIRECT_QUEUE1).build();
    }

    @Bean("directQueue2")
    public Queue directQueue2() {
        return QueueBuilder.durable(Constants.DIRECT_QUEUE2).build();
    }

    @Bean("directExchange")
    public DirectExchange directExchange(){
        return ExchangeBuilder.directExchange(Constants.DIRECT_EXCHANGE).durable(true).build();
    }

    @Bean("directQueueBinding1")
    public Binding directQueueBinding1(@Qualifier("directQueue1") Queue queue,@Qualifier("directExchange") DirectExchange directExchange){
        return BindingBuilder.bind(queue).to(directExchange).with("orange");
    }

    @Bean("directQueueBinding2")
    public Binding directQueueBinding2(@Qualifier("directQueue2") Queue queue,@Qualifier("directExchange") DirectExchange directExchange){
        return BindingBuilder.bind(queue).to(directExchange).with("black");
    }

    @Bean("directQueueBinding3")
    public Binding directQueueBinding3(@Qualifier("directQueue2") Queue queue,@Qualifier("directExchange") DirectExchange directExchange){
        return BindingBuilder.bind(queue).to(directExchange).with("orange");
    }
}
</code></pre>
    <p>
     <strong>
      producer
     </strong>
    </p>
    <pre><code class="language-java">
@RestController
@RequestMapping("/producer")
public class ProducerController {
    @Autowired
    private RabbitTemplate rabbitTemplate;

      @RequestMapping("/direct/{routingKey}")
    public String direct(@PathVariable String routingKey){
        rabbitTemplate.convertAndSend(Constants.DIRECT_EXCHANGE,routingKey,"Hello Spring direct "+routingKey);
        return "direct OK";
    }
}
</code></pre>
    <p>
     <strong>
      listener
     </strong>
    </p>
    <pre><code class="language-java">@Component
public class DirectListener {

    @RabbitListener(queues = Constants.DIRECT_QUEUE1)
    public void queueListener1(String message) {
        System.out.println("Listener1:["+Constants.DIRECT_QUEUE1+"]"+message);
    }

    @RabbitListener(queues = Constants.DIRECT_QUEUE2)
    public void queueListener2(String message) {
        System.out.println("Listener2:["+Constants.DIRECT_QUEUE2+"]"+message);
    }
}
</code></pre>
    <p>
     å¦‚æœæŸä¸€ä¸ªé˜Ÿåˆ—å³ç»‘å®šäº†blackå’Œorangeï¼Œå°†ä¼šåˆ†åˆ«å‘é€åˆ°é˜Ÿåˆ—
    </p>
    <p>
     <img alt="" height="489" src="https://i-blog.csdnimg.cn/direct/9c1cf2a7a0b54bcaa94d2de6e28f3318.png" width="1420"/>
    </p>
    <h2>
     å››ã€é€šé…ç¬¦æ¨¡å¼ï¼ˆTopicsï¼‰
    </h2>
    <p>
     <strong>
      åœºæ™¯
     </strong>
     ï¼šæ ¹æ®è·¯ç”±é”®çš„
     <strong>
      é€šé…ç¬¦è§„åˆ™
     </strong>
     åŒ¹é…é˜Ÿåˆ—ï¼Œä½¿ç”¨
     <strong>
      Topic äº¤æ¢æœº
     </strong>
     ï¼Œæ”¯æŒ
     <code>
      *
     </code>
     ï¼ˆåŒ¹é…ä¸€ä¸ªå•è¯ï¼‰å’Œ
     <code>
      #
     </code>
     ï¼ˆåŒ¹é…å¤šä¸ªå•è¯ï¼‰ã€‚
    </p>
    <p>
     Topics å’Œ Routing æ¨¡å¼çš„åŒºåˆ«æ˜¯:
    </p>
    <ol>
     <li>
      <span style="color:#494949">
       topics æ¨¡å¼ä½¿ç”¨çš„äº¤æ¢æœºç±»å‹ä¸º topic (Routing æ¨¡å¼ä½¿ç”¨çš„äº¤æ¢æœºç±»å‹ä¸º direct)
      </span>
     </li>
     <li>
      <span style="color:#494949">
       topic ç±»å‹çš„äº¤æ¢æœºåœ¨åŒ¹é…è§„åˆ™ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼ŒBinding Key æ”¯æŒé€šé…ç¬¦åŒ¹é…
      </span>
     </li>
    </ol>
    <p>
    </p>
    <p>
     <strong>
      å£°æ˜ä½¿ç”¨äº¤æ¢æœºå’Œé˜Ÿåˆ— å¹¶ç»‘å®š
     </strong>
    </p>
    <pre><code class="language-java">@Configuration
public class RabbitMQConfig {
      //TOPIC
    @Bean("topicExchange")
    public TopicExchange topicExchange(){
        return ExchangeBuilder.topicExchange(Constants.TOPIC_EXCHANGE).durable(true).build();
    }

    @Bean("topicQueue1")
    public Queue topicQueue1(){
        return QueueBuilder.durable(Constants.TOPIC_QUEUE1).build();
    }

    @Bean("topicQueue2")
    public Queue topicQueue2(){
        return QueueBuilder.durable(Constants.TOPIC_QUEUE2).build();
    }

    @Bean("topicQueueBinding1")
    public Binding topicQueueBinding1(@Qualifier("topicExchange")TopicExchange topicExchange,@Qualifier("topicQueue1") Queue topicQueue){
        return BindingBuilder.bind(topicQueue).to(topicExchange()).with("*.orange.*");
    }

    @Bean("topicQueueBinding2")
    public Binding topicQueueBinding2(@Qualifier("topicExchange")TopicExchange topicExchange,@Qualifier("topicQueue2") Queue topicQueue){
        return BindingBuilder.bind(topicQueue).to(topicExchange).with("*.*.rabbit");
    }

    @Bean("topicQueueBinding3")
    public Binding topicQueueBinding3(@Qualifier("topicExchange")TopicExchange topicExchange,@Qualifier("topicQueue2") Queue topicQueue){
        return BindingBuilder.bind(topicQueue).to(topicExchange).with("lazy.#");
    }
}
</code></pre>
    <p>
     <strong>
      producer
     </strong>
    </p>
    <pre><code class="language-java">
@RestController
@RequestMapping("/producer")
public class ProducerController {
    @Autowired
    private RabbitTemplate rabbitTemplate;

      @RequestMapping("/topic/{routingKey}")
    public String topic(@PathVariable String routingKey){
        rabbitTemplate.convertAndSend(Constants.TOPIC_EXCHANGE,routingKey,"Hello Spring topic "+routingKey);
        return "topic OK";
    }
}
</code></pre>
    <p>
     <strong>
      listener
     </strong>
    </p>
    <pre><code class="language-java">@Component
public class TopicListener {

    @RabbitListener(queues = Constants.TOPIC_QUEUE1)
    public void queueListener1(String message) {
        System.out.println("Listener1:["+Constants.TOPIC_QUEUE1+"]"+message);
    }

    @RabbitListener(queues = Constants.TOPIC_QUEUE2)
    public void queueListener2(String message) {
        System.out.println("Listener2:["+Constants.TOPIC_QUEUE2+"]"+message);
    }
}
</code></pre>
    <h2 style="background-color:transparent">
     äº”ã€å®Œæˆåº”ç”¨é€šä¿¡
    </h2>
    <p>
     SpringBoot æ•´åˆ RabbitMQ å®ç°åº”ç”¨é€šä¿¡æ˜¯å¾®æœåŠ¡/åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¸¸è§çš„å¼‚æ­¥è§£è€¦æ–¹æ¡ˆã€‚
    </p>
    <p>
     <strong>
      ä»¥æ­¤å›¾ä¸ºå®ä¾‹
     </strong>
    </p>
    <p class="img-center">
     <img alt="" height="161" src="https://i-blog.csdnimg.cn/direct/1d269c13aed245bc839eb02c18548ea6.png" width="564"/>
    </p>
    <p>
     <strong>
      è®¢å•ç³»ç»Ÿ
     </strong>
    </p>
    <pre><code class="language-java">@Configuration
public class RabbitMQConfig {
    @Bean("orderQueue")
    public Queue orderQueue() {
        return QueueBuilder.durable("order.create").build();
    }
}


@RestController
@RequestMapping("/order")
public class OrderController {
    @Autowired
    private RabbitTemplate rabbitTemplate;

    @RequestMapping("/create")
    public String create(){
        rabbitTemplate.convertAndSend("","order.create","è®¢å•ä¿¡æ¯ï¼Œè®¢å•IDï¼š"+ UUID.randomUUID());
        //è¿™é‡Œä»…ä»…æ˜¯æ¨¡æ‹Ÿæ¼”ç¤ºï¼Œå®é™…çš„ä¸‹å•æ“ä½œæ¯”è¾ƒå¤æ‚ï¼ŒåŒ…æ‹¬å‚æ•°çš„æ ¡éªŒï¼Œæ•°æ®åº“å­˜å‚¨ç­‰ç­‰ ä¸šåŠ¡ä»£ç çœç•¥
        return "ä¸‹å•æˆåŠŸ";
    }
}
</code></pre>
    <p>
     <strong>
      ç‰©æµç³»ç»Ÿ
     </strong>
    </p>
    <pre><code class="language-java">@Component
@RabbitListener(queues = "order.create")
public class OrderListener {
    @RabbitHandler
    //è¯¥æ³¨è§£æ ¹æ®æ‰€è¯†åˆ«çš„æ•°æ®ç±»å‹ä¸åŒè‡ªåŠ¨åˆ†é…ä¸åŒçš„æ–¹æ³•
    public void handleOrder(String orderInfo) {
        System.out.println("æ¥æ”¶åˆ°æ–°çš„è®¢å•æ¶ˆæ¯ï¼š"+orderInfo);
        //æ¥æ”¶åˆ°è®¢å•æ¶ˆæ¯åï¼Œè¿›è¡Œç›¸åº”çš„ä¸šåŠ¡å‡ºè·¯ ä»£ç çœç•¥
    }

    @RabbitHandler
    //åœ¨æ­¤å¤„ä¸ºæ–¹ä¾¿æ¼”ç¤ºæˆ‘ä»¬å°†order-service è®©æ­¤é¡¹ç›®åº”ç”¨
    //æ­£ç¡®çš„åšæ³•æ˜¯å°†OrderInfoæŠ½å–å‡ºæ¥å•ç‹¬ä½œä¸ºä¸€ä¸ªåŒ…ï¼Œä¸¤ä¸ªserviceéƒ½å¼•ç”¨è¿™ä¸ªåŒ…
    public void handleOrder2(OrderInfo orderInfo) {
        System.out.println("æ¥æ”¶åˆ°æ–°çš„è®¢å•æ¶ˆæ¯ï¼š"+orderInfo);
    }
}
</code></pre>
    <p>
     <strong>
      <code>
       @RabbitHandler
      </code>
     </strong>
     æ³¨è§£ç”¨äºæ ‡è®°æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¼šæ ¹æ®æ¶ˆæ¯çš„ç±»å‹æ¥å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚å½“ä¸€ä¸ªæ¶ˆæ¯ç›‘å¬å™¨å®¹å™¨æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šæ ¹æ®æ¶ˆæ¯çš„ç±»å‹é€‰æ‹©åˆé€‚çš„
     <code>
      @RabbitHandler
     </code>
     æ³¨è§£çš„æ–¹æ³•æ¥å¤„ç†è¯¥æ¶ˆæ¯ã€‚
    </p>
    <p>
     <strong>
      æµ‹è¯•ç»“æœ
     </strong>
    </p>
    <p>
     <img alt="" height="478" src="https://i-blog.csdnimg.cn/direct/8f2bdfba689d4cef848d7cb3ec9aadd5.png" width="1839"/>
    </p>
    <p>
     å½“åœ¨å‘é€çš„æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¸ºä¿è¯å¯¹è±¡çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬è¦ä¿è¯å¯¹è±¡å¯è¢«åºåˆ—åŒ–ï¼Œä¸”é€šè¿‡ Jackson2JsonMessageConverter å°†å…¶ä»åŸç”Ÿåºåˆ—åŒ–æ”¹ä¸ºJsonæ ¼å¼
    </p>
    <pre><code class="language-java">@Configuration
public class RabbitMQConfig {
    @Bean
    public Jackson2JsonMessageConverter messageConverter() {
        return new Jackson2JsonMessageConverter();
    }

    @Bean
    public RabbitTemplate rabbitTemplate(ConnectionFactory connectionFactory) {
        RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);
        rabbitTemplate.setMessageConverter(messageConverter());
        return rabbitTemplate;
    }
}
</code></pre>
    <blockquote>
     <p>
      å¯¹äºListenerï¼Œä¸ºä¿è¯åŒæ ·å…·æœ‰è§£è¯»jsonçš„èƒ½åŠ›ï¼Œä¹Ÿåº”è¯¥å»åŠ ä¸Šç›¸åŒçš„é…ç½®
     </p>
    </blockquote>
    <pre><code class="language-java">@Data
public class OrderInfo implements Serializable {//å®ç°åºåˆ—åŒ–æ¥å£
    private String orderId;
    private String name;
}
</code></pre>
    <p>
     å¯è§‚å¯Ÿç»“æœ
    </p>
    <p>
     <img alt="" height="883" src="https://i-blog.csdnimg.cn/direct/dc52eae97349459fb96a8b94a8f7453a.png" width="1296"/>
    </p>
    <hr/>
    <blockquote>
     <p>
      å¯¹æ—¶é—´çš„æ…·æ…¨ï¼Œå°±ç­‰äºæ…¢æ€§è‡ªæ€ã€‚â€”â€”å¥¥æ–¯ç‰¹æ´›å¤«æ–¯åŸº
     </p>
    </blockquote>
    <p>
     ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€ğŸ€
    </p>
    <p>
     ä»¥ä¸Šï¼Œå°±æ˜¯æœ¬æœŸçš„å…¨éƒ¨å†…å®¹å•¦ï¼Œè‹¥æœ‰é”™è¯¯ç–å¿½å¸Œæœ›å„ä½å¤§ä½¬åŠæ—¶æŒ‡å‡ºğŸ’
    </p>
    <p>
     åˆ¶ä½œä¸æ˜“ï¼Œå¸Œæœ›èƒ½å¯¹å„ä½æä¾›å¾®å°çš„å¸®åŠ©ï¼Œå¯å¦ç•™ä¸‹ä½ å…è´¹çš„èµå‘¢ğŸŒ¸
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330325f37393830363035362f:61727469636c652f64657461696c732f313436303439313438" class_="artid" style="display:none">
 </p>
</div>


