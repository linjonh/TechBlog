---
layout: post
title: "IHE-DICOM测试说明"
date: 2017-09-14 09:06:09 +0800
description: "1      测试人员要求...42      系统组成及软件安装...42.1       系统组"
keywords: "dicom ihe"
categories: ['Dicom']
tags: ['无标签']
artid: "8144614"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=8144614
    alt: "IHE-DICOM测试说明"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=8144614
featuredImagePreview: https://bing.ee123.net/img/rand?artid=8144614
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     IHE DICOM测试说明
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <br/>
    <p>
     <a href="#_Toc307320969" rel="nofollow">
      1
      <span style="color:windowtext">
      </span>
      测试人员要求
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320970" rel="nofollow">
      2
      <span style="color:windowtext">
      </span>
      系统组成及软件安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320971" rel="nofollow">
      2.1
      <span style="color:windowtext">
      </span>
      系统组成
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320972" rel="nofollow">
      2.2
      <span style="color:windowtext">
      </span>
      PC端软件列表
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320973" rel="nofollow">
      2.3
      <span style="color:windowtext">
      </span>
      软件安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320974" rel="nofollow">
      2.3.1
      <span style="color:windowtext">
      </span>
      SQL2000的安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       4
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320975" rel="nofollow">
      2.3.2
      <span style="color:windowtext">
      </span>
      Perl的安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       12
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320976" rel="nofollow">
      2.3.3
      <span style="color:windowtext">
      </span>
      JDK的安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320977" rel="nofollow">
      2.3.4
      <span style="color:windowtext">
      </span>
      Tomcat的安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320978" rel="nofollow">
      2.3.5
      <span style="color:windowtext">
      </span>
      JDBC的安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320979" rel="nofollow">
      2.3.6
      <span style="color:windowtext">
      </span>
      MESA的安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320980" rel="nofollow">
      2.3.7
      <span style="color:windowtext">
      </span>
      设置环境变量
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       13
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320981" rel="nofollow">
      2.3.8
      <span style="color:windowtext">
      </span>
      数据库的安装
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       14
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320982" rel="nofollow">
      2.3.9
      <span style="color:windowtext">
      </span>
      安装测试
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       14
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320983" rel="nofollow">
      3
      <span style="color:windowtext">
      </span>
      测试
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       14
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320984" rel="nofollow">
      3.1
      <span style="color:windowtext">
      </span>
      设置超声机器
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       15
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320985" rel="nofollow">
      3.2
      <span style="color:windowtext">
      </span>
      运行测试用例流程
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       16
      </span>
     </a>
    </p>
    <p>
     <a href="#_Toc307320986" rel="nofollow">
      3.3
      <span style="color:windowtext">
      </span>
      运行测试用例例子
      <span style="color:windowtext">
       ...
      </span>
      <span style="color:windowtext">
       16
      </span>
     </a>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a name="_Toc307320969">
     </a>
     <a name="_Toc103154253">
     </a>
     <a name="_Toc103141907">
     </a>
     <a name="_Toc103141671">
     </a>
     <a name="_Toc102638957">
      1  测试人员要求
     </a>
    </h2>
    <p>
     对仪器的调试只有经过严格培训并合格的人员方可进行，对系统进行测试后，应完整填写相关测试用例结果记录表。需要对dicom有一定了解。
    </p>
    <h2>
     <a name="_Toc307320970">
     </a>
     <a name="_Toc103154254">
     </a>
     <a name="_Toc103141908">
     </a>
     <a name="_Toc103141672">
     </a>
     <a name="_Toc102638958">
     </a>
     <a name="_Toc103154255">
     </a>
     <a name="_Toc103141909">
     </a>
     <a name="_Toc103141673">
     </a>
     <a name="_Toc102638959">
      2  系统组成
     </a>
     及软件安装
    </h2>
    <h3>
     <a name="_Toc307320971">
      2.1    系统组成
     </a>
    </h3>
    <p>
    </p>
    <p align="center">
     图2-1
    </p>
    <h3>
     2.2
     <a name="_Toc307320972">
      PC
     </a>
     端软件列表
    </h3>
    <p>
     操作系统：WindowsXP
    </p>
    <p>
     数据库软件：SQLServer 2000
    </p>
    <p>
     测试软件：IHE MESA测试平台
    </p>
    <p>
     其他软件：Perl，Java JDK，Tomcat
    </p>
    <h3>
     <a name="_Toc307320973">
      2.3   软件安装
     </a>
    </h3>
    <h4>
     <a name="_Toc307320974">
      2.3.1   SQL2000
     </a>
     的安装
    </h4>
    <p>
     安装包见SQLServer20004in1cn.iso，使用虚拟光驱打开。
    </p>
    <p>
     1)            安装SQL2000，选择“SQL Server 2000 简体中文个人版”；
    </p>
    <p>
     2)            选择“安装SQL Server 2000”—&gt;“安装数据库服务器”；
    </p>
    <p>
     3)            计算机名选择“本地计算机”,图2-2：
    </p>
    <p>
    </p>
    <p align="center">
     图2-2
    </p>
    <p>
     4)            选择“创建新的SQL Server实例，或安装客户端工具”，图2-3：
    </p>
    <p>
    </p>
    <p align="center">
     图2-3
    </p>
    <p>
     5)            出现用户信息填写提示，直接点击“下一步”，图2-4：
    </p>
    <p>
    </p>
    <p align="center">
     图2-4
    </p>
    <p>
     6)            安装定义选择“服务器和客户端工具”，图2-5：
    </p>
    <p>
    </p>
    <p align="center">
     图2-5
    </p>
    <p>
     7)            实例名选择“默认”安装，图2-6：
    </p>
    <p>
    </p>
    <p align="center">
     图2-6
    </p>
    <p>
     8)             安装类型选择“典型”安装，图2-7
    </p>
    <p>
    </p>
    <p align="center">
     图2-7
    </p>
    <p>
     9)            服务帐户选择“使用本地系统帐户”，图2-8：
    </p>
    <p>
    </p>
    <p align="center">
     图2-8
    </p>
    <p>
     10)           身份验证模式选择“混合模式”,sa登录密码设定为“masterkey”（不包含引号），图2-9：
    </p>
    <p>
    </p>
    <p align="center">
     图2-9
    </p>
    <p>
     11)          待出现安装成功界面，重启计算机。
    </p>
    <p>
     12)         安装SQL2000 SP4补丁，见SQL2000-KB884525-SP4-x86-CHS.EXE。
    </p>
    <p>
     13)         创建ctn用户，用户名为ctn,密码为ctn
    </p>
    <p>
     打开SQL Server的企业管理器。如图2-10；
    </p>
    <p>
    </p>
    <p align="center">
     图2-10
    </p>
    <p>
     在SQL Server的企业管理器，选择“登录”。如图2-11；
    </p>
    <p>
    </p>
    <p>
    </p>
    <p align="center">
     图2-11
    </p>
    <p>
     选择“登录”，点击右键选择“新建登录”，如图2-12；按照下图输入和选择，再点击“确定”按扭，再输入确认新密码为“ctn”，再点击“确定”按扭则完成ctn用户新建。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p align="center">
     图2-12
    </p>
    <p>
     14)         配置ODBC驱动
    </p>
    <p>
     打开在控制面版的管理工具，再打开“数据源 (ODBC)”， 如图2-13；
    </p>
    <p align="center">
    </p>
    <p align="center">
     图2-13
    </p>
    <p>
     再选择或者添加一个数据源，设置如下表
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p align="center">
         <strong>
          变量
         </strong>
        </p>
       </td>
       <td>
        <p align="center">
         <strong>
          值
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         名称
        </p>
       </td>
       <td>
        <p align="left">
         LocalServer
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         描述
        </p>
       </td>
       <td>
        <p align="left">
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         服务器
        </p>
       </td>
       <td>
        <p align="left">
         local
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p>
         SQL Server应该如何验证登录 ID的真伪
        </p>
       </td>
       <td>
        <p>
         使用用户输入登录 ID 和密码的 SQL Server验证
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         登录 ID
        </p>
       </td>
       <td>
        <p align="left">
         ctn
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         密码
        </p>
       </td>
       <td>
        <p align="left">
         ctn
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <h4>
     <a name="_Toc307320975">
      2.3.2   Perl
     </a>
     的安装
    </h4>
    <p>
     安装包为：ActivePerl-5.12.4.1205-MSWin32-x86-294981.msi，默认安装目录为D:\perl.
    </p>
    <h4>
     <a name="_Toc307320976">
      2.3.3   JDK
     </a>
     的安装
    </h4>
    <p>
     安装包为：jdk-6u6-windows-i586-p.exe，默认安装目录为D:\jdk1.6
    </p>
    <h4>
     <a name="_Toc307320977">
      2.3.4   Tomcat
     </a>
     的安装
    </h4>
    <p>
     安装包为：jakarta-tomcat-5.0.28.zip，只需解压到目录为D:\tomcat
    </p>
    <h4>
     <a name="_Toc307320978">
      2.3.5   JDBC
     </a>
     的安装
    </h4>
    <p>
     安装包为：sqlserver2000jdbcsericepack3.exe，默认安装。将C:\Program Files\MicrosoftSQL Server 2000 Driver for JDBC\lib中的msbase.jar，mssqlserver.jar， msutil.jar复制到D:\tomcat\common\lib
    </p>
    <h4>
     <a name="_Toc307320979">
      2.3.6   MESA
     </a>
     的安装
    </h4>
    <p>
     安装包为：mesa-14.0.0_w32-sql2008.zip，只需解压到目录为D:\mesa
    </p>
    <p>
     新建D:\mesa\storage目录，将MESA-storage-A_12_5_0.zip和MESA-storage-B_10_11_0.zip解压到D:\mesa\storage目录下
    </p>
    <h4>
     <a name="_Toc307320980">
      2.3.7   设置环境变量
     </a>
    </h4>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p align="center">
         <strong>
          变量
         </strong>
        </p>
       </td>
       <td>
        <p align="center">
         <strong>
          值
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         MESA_TARGET
        </p>
       </td>
       <td>
        <p align="left">
         D:\mesa
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         MESA_STORAGE
        </p>
       </td>
       <td>
        <p align="left">
         D:\mesa\storage
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         PATH
        </p>
       </td>
       <td>
        <p align="left">
         添加D:\mesa\bin;D:\Perl\site\bin;
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         JAVA_HOME
        </p>
       </td>
       <td>
        <p>
         D:\jdk1.6
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         JAR_DIRECTORY
        </p>
       </td>
       <td>
        <p align="left">
         D:\mesa\lib
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         MESA_SQL_LOGIN
        </p>
       </td>
       <td>
        <p align="left">
         ctn
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         MESA_SQL_PASSWORD
        </p>
       </td>
       <td>
        <p align="left">
         ctn
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         MESA_SQL_SERVER_NAME
        </p>
       </td>
       <td>
        <p align="left">
         windows机器名
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         SQL_ACCESS
        </p>
       </td>
       <td>
        <p align="left">
         LocalServer:ctn:ctn
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         MESA_OS
        </p>
       </td>
       <td>
        <p align="left">
         WINDOWS_NT
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <p>
    </p>
    <h4>
     <a name="_Toc307320981">
      2.3.8   数据库的安装
     </a>
    </h4>
    <p>
     要安装的数据有：
    </p>
    <p>
     adt, expmgr, exprcr. imgmgr, info_src
    </p>
    <p>
     mod1, mod2, ordfil, ordplc, pd_supplier
    </p>
    <p>
     rpt_manager, rpt_repos, syslog, wkstation, xref_mgr
    </p>
    <p>
     安装过程如下：
    </p>
    <p>
     在WINDOWS的“运行”里输入cmd，进入DOS模式；输入以下命令：
    </p>
    <p>
     d:
    </p>
    <p>
     cd D:\mesa\db
    </p>
    <pre>perl generate_create_scripts.pl</pre>
    <p>
     perl create_db.pl 127.0.0.1
    </p>
    <p>
     perl create_mesa_tables.pl ctn ctn 127.0.0.1
    </p>
    <p>
     cd D:\mesa\db\sqlfiles
    </p>
    <p>
     isql -S 127.0.0.1 -U ctn -P ctn -d info_src &lt; load_rid_data.sql
    </p>
    <p>
     isql -S 127.0.0.1 -U ctn -P ctn -d info_src &lt;  load_doc_reference.sql
    </p>
    <h4>
     <a name="_Toc307320982">
      2.3.9   安装测试
     </a>
    </h4>
    <p>
     在WINDOWS的“运行”里输入cmd，进入DOS模式；输入以下命令：
    </p>
    <p>
     d:
    </p>
    <p>
     d:\mesa\mesa_tests\common\actors\all
    </p>
    <pre>     perl 1/eval_1.pl</pre>
    <p>
     如果出现“pass”，则说明测试成功，否则请查看详细出错问题见D:\mesa\mesa_tests\common\actors\all\1\grade_1.txt
    </p>
    <h2>
     <a name="_Toc307320983">
      3  测试
     </a>
    </h2>
    <p>
     按照测试用例IHE-MESAAcquisition Modality Tests.htm、print_composer.pdf进行测试，IHE测试结果.doc为我们需要测试的用例。要将测试结果填写到IHE测试结果.doc中。
    </p>
    <p>
     下面将简单地介绍一下用：
    </p>
    <h3>
     <a name="_Toc307320984">
      3.1   设置超声机器
     </a>
    </h3>
    <p>
     具体见系统设置中DICOM
    </p>
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <p align="center">
         <strong>
          服务
         </strong>
        </p>
       </td>
       <td>
        <p align="center">
         <strong>
          IP
         </strong>
        </p>
       </td>
       <td>
        <p align="center">
         <strong>
          端口
         </strong>
        </p>
       </td>
       <td>
        <p align="center">
         <strong>
          AE
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         存储
        </p>
       </td>
       <td>
        <p align="left">
         安装软件PC的IP
        </p>
       </td>
       <td>
        <p align="left">
         2350
        </p>
       </td>
       <td>
        <p align="left">
         MESA_IMG_MGR
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         委托存储
        </p>
       </td>
       <td>
        <p align="left">
         安装软件PC的IP
        </p>
       </td>
       <td>
        <p align="left">
         2350
        </p>
       </td>
       <td>
        <p align="left">
         MESA_IMG_MGR
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         工作列
        </p>
       </td>
       <td>
        <p align="left">
         安装软件PC的IP
        </p>
       </td>
       <td>
        <p align="left">
         2250
        </p>
       </td>
       <td>
        <p align="left">
         MESA_MWL
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p align="left">
         MPPS
        </p>
       </td>
       <td>
        <p align="left">
         安装软件PC的IP
        </p>
       </td>
       <td>
        <p align="left">
         2350
        </p>
       </td>
       <td>
        <p align="left">
         MESA_IMG_MGR
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     打开D:\mesa\mesa_tests\rad\actors\mod\mod_test.cfg修改以下红色内容：
    </p>
    <p>
     MODALITY =
     <span style="color:red">
      US
     </span>
     (
     <span style="color:red">
      超声
     </span>
     <span style="color:red">
      )
     </span>
    </p>
    <p>
     TEST_MODALITY_HOST =
     <span style="color:red">
      10.0.0
     </span>
     <span style="color:red">
      .144(
     </span>
     <span style="color:red">
      超声机器
     </span>
     <span style="color:red">
      IP)
     </span>
    </p>
    <p>
     TEST_MODALITY_PORT =
     <span style="color:red">
      104 (
     </span>
     <span style="color:red">
      委托存储的端口
     </span>
     <span style="color:red">
      )
     </span>
    </p>
    <p>
     TEST_MODALITY_STATION =
     <span style="color:red">
      StationName(
     </span>
     <span style="color:red">
      超声机器名
     </span>
     <span style="color:red">
      )
     </span>
    </p>
    <p>
     <span style="color:red">
     </span>
    </p>
    <p>
     # This file contains configurationparameters for Acquisition Modality tests
    </p>
    <p>
     # Users should modify the values to matchparameters of their system.
    </p>
    <p>
     MODALITY =
     <span style="color:red">
      US
     </span>
    </p>
    <p>
     TEST_MODALITY_AE = MODALITY1
    </p>
    <p>
     TEST_MODALITY_HOST =
     <span style="color:red">
      10.0.0
     </span>
     <span style="color:red">
      .144
     </span>
    </p>
    <p>
     TEST_MODALITY_PORT =
     <span style="color:red">
      104
     </span>
    </p>
    <p>
     TEST_MODALITY_STATION =
     <span style="color:red">
      StationName
     </span>
    </p>
    <h3>
     <a name="_Toc307320985">
      3.2   运行测试用例流程
     </a>
    </h3>
    <p align="center">
    </p>
    <h3>
     <a name="_Toc307320986">
      3.3   运行测试用例例子
     </a>
    </h3>
    <p>
     以Modality Test 201: Unscheduled Case为例
    </p>
    <p>
     在测试2xx用例之前，要准备好测试数据（对于2xx每次只需运行一次），请先运行：
    </p>
    <p>
     perl scripts/reset_uids.pl
    </p>
    <p>
     perl 2xx/2xx.pl
    </p>
    <p>
     测试开始：
    </p>
    <p>
     cd D:\mesa\mesa_tests\rad\actors\mod
    </p>
    <p>
     scripts\start_mesa_servers.bat   //启动服务
    </p>
    <p>
     perl scripts/clear_img_mgr.pl   //清除记录
    </p>
    <p>
     //操作超声机器，新建病人，打图，发送dicom图像，关闭病人检查
    </p>
    <p>
     perl scripts/send_storage_commitment_nevents.pl  //提交commitment
    </p>
    <p>
    </p>
    <p>
     perl 201/eval_201.pl 4 MODALITY1 //测试结果对比
    </p>
    <p>
     scripts\stop_mesa_servers.bat  //停止服务
    </p>
    <br/>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f7a646831393832313032:352f61727469636c652f64657461696c732f38313434363134" class_="artid" style="display:none">
 </p>
</div>


