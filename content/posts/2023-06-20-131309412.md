---
layout: post
title: "vueelementUI-通用模板组件formbuttontable"
date: 2023-06-20 16:07:27 +0800
description: "该组件使用vue + elementUI进行开发包含form搜索栏、button按钮组、table列"
keywords: "element ui 模板"
categories: ['未分类']
tags: ['Vue', 'Javascript', 'Elementui']
artid: "131309412"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=131309412
  alt: "vueelementUI-通用模板组件formbuttontable"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=131309412
featuredImagePreview: https://bing.ee123.net/img/rand?artid=131309412
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     vue+elementUI 通用模板组件form+button+table
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     该组件使用vue + elementUI进行开发
     <br/>
     包含form搜索栏、button按钮组、table列表、render拓展
     <br/>
     先来看下效果
    </p>
    <p>
     <img alt="" height="959" src="https://i-blog.csdnimg.cn/blog_migrate/685f9145dba285cdea9df86d3bc6dd57.png" width="1200"/>
    </p>
    <h4>
     思路
    </h4>
    <p>
     模板包含 Form 搜索栏、Button 按钮组、Table 列表，通过父组件传值判断展示。
    </p>
    <p>
     搜索栏常用的包含 Input 输入框、select筛选框、时间选择器，那么我们可以写一个包含这几个元素的 Form 表单；
    </p>
    <p>
     Button 按钮组可以用 render，自行拓展比较灵活；
    </p>
    <p>
     Table 经常使用的有多选、序号、总计、排序，至于展示透传 formatter 处理，特殊情况可以使用 render 进行拓展。
    </p>
    <p>
     props
    </p>
    <pre><code>/**
* formList: [表单配置
* 补充释义：element: "input/select/datePicker" 输入框/筛选框/日期选择器
* 补充释义：dateType: "daterange/date" 日期选择器的类型：日期区间/单日
] 
* searchData: {} 搜索数据值
* btnGroup: [] 按钮组
* tableConfig: { 表格配置
*   height: '603' 表格高度
*   showSummary: false 总计
*   selection: false 多选
*   index: false 序号
*   total 列表总数
* }
* columnList: [] 表头配置
* tableList: [] 表格数据
* isShowPagination: true 是否展示分页
*
* $emit 方法
* @selectionChange 表格多选
* @getList 表格数据
* update:searchData 克隆searchDataClone改变时，更新父组件searchData
*/</code></pre>
    <h4>
     render 文件（新建文件 例如TemplateRender.js
    </h4>
    <pre><code>export default {
  functional: true,
  props: {
    render: Function,
    row: Object
  },
  render(h, params) {
    const query = {
      row: params.props.row
    };

    return params.props.render(h, query);

}
};</code></pre>
<p>
</p>
<h4 style="background-color:transparent;">
模板组件完整代码（新建文件 例如 TemplateTable.vue
</h4>
<pre><code class="hljs">&lt;template&gt;
&lt;div&gt;
&lt;!-- 搜索栏 --&gt;
&lt;el-form
v-if="formList.length &gt; 0"
:inline="true"
:model="searchDataClone"
ref="searchDataClone"
class="demo-form-inline device-wrapper"
&gt;
&lt;el-form-item
v-for="f in formList"
:key="f.prop"
:label="f.label"
:prop="f.prop"
&gt;
&lt;template&gt;
&lt;template v-if="f.element === 'input'"&gt;
&lt;el-input
clearable
v-model.trim="searchDataClone[f.prop]"
size="small"
&gt;&lt;/el-input&gt;
&lt;/template&gt;
&lt;template v-else-if="f.element === 'select'"&gt;
&lt;el-select
size="small"
v-model="searchDataClone[f.prop]"
placeholder="请选择"
:multiple="f.multiple || false"
&gt;
&lt;el-option label="不限" value v-if="f.selectAuto"&gt;&lt;/el-option&gt;
&lt;el-option
v-for="(s, i) in f.selectList"
:key="i"
:label="s[f.optionLabel] || s"
:value="s[f.optionValue] || i"
&gt;&lt;/el-option&gt;
&lt;/el-select&gt;
&lt;/template&gt;
&lt;template v-else-if="f.element === 'datePicker'"&gt;
&lt;!-- 日期区间 --&gt;
&lt;el-date-picker
v-if="f.dateType === 'daterange'"
type="daterange"
size="small"
v-model="searchDataClone[f.prop]"
:align="f.align || 'right'"
unlink-panels
range-separator="至"
start-placeholder="开始时间"
end-placeholder="结束时间"
value-format="yyyy-MM-dd"
:clearable="true"
&gt;
&lt;/el-date-picker&gt;
&lt;!-- 天 --&gt;
&lt;el-date-picker
v-if="f.dateType === 'date'"
type="date"
size="small"
v-model="searchDataClone[f.prop]"
placeholder="选择日期"
value-format="yyyy-MM-dd"
&gt;
&lt;/el-date-picker&gt;
&lt;!-- 月 --&gt;
&lt;el-date-picker
v-if="f.dateType === 'month'"
type="month"
size="small"
v-model="searchDataClone[f.prop]"
placeholder="选择月份"
value-format="yyyy-MM"
&gt;
&lt;/el-date-picker&gt;
&lt;/template&gt;
&lt;/template&gt;
&lt;/el-form-item&gt;
&lt;el-form-item&gt;
&lt;el-button type="primary" @click="goSearchList()"&gt;查询&lt;/el-button&gt;
&lt;el-button @click="resetForm('searchDataClone')"&gt;重置&lt;/el-button&gt;
&lt;el-button type="primary" v-if="isShowExport" @click="handleExport()"
&gt;导出&lt;/el-button
&gt;
&lt;/el-form-item&gt;
&lt;/el-form&gt;

    &lt;div class="tab-s"&gt;
      &lt;div class="marginBottom10"&gt;
        &lt;!-- 按钮组 --&gt;
        &lt;div v-if="btnGroup.length &gt; 0 &amp;&amp; btnGroup[0].render"&gt;
          &lt;!-- render 拓展 --&gt;
          &lt;template-render
            v-for="(item, idx) in btnGroup"
            :key="idx"
            :render="item.render"
          &gt;&lt;/template-render&gt;
        &lt;/div&gt;
        &lt;!-- 右侧list --&gt;
        &lt;div
          class="fontSize14"
          v-if="rightList.length &gt; 0 &amp;&amp; rightList[0].render"
        &gt;
          &lt;!-- render 拓展 --&gt;
          &lt;template-render
            v-for="(item, idx) in rightList"
            :key="idx"
            :render="item.render"
          &gt;&lt;/template-render&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;!--表格--&gt;
      &lt;el-table
        border
        class="my-table"
        style="width: 100%"
        :fit="true"
        :data="tableList"
        :height="tableConfig.height"
        :show-summary="tableConfig.showSummary"
        :summary-method="getSummaries"
        @selection-change="selectionChange"
      &gt;
        &lt;!-- 多选 --&gt;
        &lt;el-table-column
          v-if="tableConfig.selection"
          type="selection"
        &gt;&lt;/el-table-column&gt;
        &lt;!-- 序号 --&gt;
        &lt;el-table-column
          v-if="tableConfig.index"
          fixed
          label="序号"
          width="60"
          type="index"
          :index="pagerIndex"
          show-overflow-tooltip
        &gt;&lt;/el-table-column&gt;
        &lt;!-- 表头循环 --&gt;
        &lt;el-table-column
          v-for="(item, index) in columnList"
          :key="index"
          :prop="item.prop"
          :label="item.label"
          :width="item.width"
          :fixed="item.fixed"
          :sortable="item.sortable"
          show-overflow-tooltip
        &gt;
          &lt;template slot-scope="scope"&gt;
            &lt;template v-if="!item.render"&gt;
              &lt;!-- 处理后显示 --&gt;
              &lt;template v-if="item.formatter"&gt;
                {<!-- -->{ item.formatter(scope.row, item) }}
              &lt;/template&gt;
              &lt;!-- 直接显示 --&gt;
              &lt;template v-else&gt;
                {<!-- -->{ scope.row[item.prop] }}
              &lt;/template&gt;
            &lt;/template&gt;
            &lt;!-- render 拓展 --&gt;
            &lt;template v-else&gt;
              &lt;template-render
                :render="item.render"
                :row="scope.row"
              &gt;&lt;/template-render&gt;
            &lt;/template&gt;
          &lt;/template&gt;
        &lt;/el-table-column&gt;
      &lt;/el-table&gt;
      &lt;!-- 分页 --&gt;
      &lt;div class="block" v-if="isShowPagination"&gt;
        &lt;!-- 这里可以用element的分页 --&gt;
        &lt;t-pager
          @currentChange="goSearchList"
          :page-size="page.pageSize"
          :currentPage="page.pageNum"
          :total="tableConfig.total"
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;

&lt;/div&gt;
&lt;/template&gt;

&lt;script type="text/ecmascript-6"&gt;
import PagerTmixin from "@/mixins/twoPagerMixin";// 分页方法，可以直接用 element 的分页
import TemplateRender from "@/components/TemplateRender";

export default {
name: 'template-table',
mixins: [PagerTmixin],
props: {
formList: {//表单配置
type: Array,
default: () =&gt; {
return [];
},
},
searchData: {//搜索数据值
type: Object,
default: () =&gt; {
return {};
},
},
isShowExport: {//是否显示导出按钮
type: Boolean,
default: () =&gt;{
return false;
}
},
btnGroup: {//按钮组
type: Array,
default: () =&gt; {
return [];
},
},
rightList: {//右侧 list
type: Array,
default: () =&gt; {
return [];
},
},
tableConfig: {//表格配置
type: Object,
default: () =&gt; {
return {
height: "603",
showSummary: false,
selection: false,
index: false
};
},
},
columnList: {//表头配置
type: Array,
default: () =&gt; {
return [];
},
},
tableList: {//表格数据
type: Array,
default: () =&gt; {
return [];
},
},
isShowPagination: {//是否展示分页
type: Boolean,
default: true
}
},
components: {
TemplateRender,
},
data() {
return {
searchDataClone: {},
};
},
created() {
// 克隆父组件传入的 searchData
this.searchDataClone = JSON.parse(JSON.stringify(this.searchData));
},
methods: {
// 表格多选
selectionChange(e) {
this.$emit("selectionChange", e);
},
// 表格总计
getSummaries(param) {
// 父组件总计传值
if (this.tableConfig.summariesList) {
return this.tableConfig.summariesList;
}
// 默认总计
const { columns, data } = param;
const sums = [];
columns.forEach((column, index) =&gt; {
if (index === 0) {
sums[index] = "总价";
return;
}
const values = data.map((item) =&gt; Number(item[column.property]));
if (!values.every((value) =&gt; isNaN(value))) {
sums[index] = values.reduce((prev, curr) =&gt; {
const value = Number(curr);
if (!isNaN(value)) {
return prev + curr;
} else {
return prev;
}
}, 0);
sums[index] = sums[index].toFixed(2);
} else {
sums[index] = "";
}
});

      return sums;
    },
    // 分页
    pagerIndex(index) {
      return (this.page.pageNum - 1) * this.page.pageSize + index + 1;
    },
    // 搜索
    goSearchList(par) {
      // 更新父组件searchData
      this.$emit("update:searchData", this.searchDataClone);
      // 不需要分页的情况
      if(!this.isShowPagination){
        // 表格数据
        this.$emit("getList");
        return
      }
      // 需要分页的情况
      if (par &amp;&amp; par.pageNum) {
        this.page.pageNum = par.pageNum;
        this.page.page = par.pageNum;
      } else {
        this.page.pageNum = 1;
        this.page.page = 1;
      }
      if (par &amp;&amp; par.pageSize) {
        this.page.pageSize = par.pageSize;
      } else {
        this.page.pageSize = 30;
      }
      // 表格数据
      this.$emit("getList");
    },
    // 重置
    resetForm(formName) {
      this.$refs[formName].resetFields();
      this.goSearchList();
    },
    // 导出
    handleExport(){
      this.$emit('handleExport')
    }

},
};
&lt;/script&gt;

&lt;style lang="less" scoped&gt;
.marginBottom10 {
margin-bottom: 10px;
display: flex;
justify-content: space-between;
align-items: center;
}
.colorBlue {
color: #409eff;
cursor: pointer;
margin-right: 8px;
}
.fontSize14 {
font-size: 14px;
}
&lt;/style&gt;
</code></pre>
<h4 style="background-color:transparent;">
父组件引用模板组件和传值（新建文件 例如 exampleTable.vue
</h4>
<pre><code>&lt;template&gt;
&lt;div class="page"&gt;
&lt;!-- 搜索 按钮组 表格 组件 --&gt;
&lt;table-template
:formList="formList"
:searchData.sync="searchData"
:btnGroup="btnGroup"
:tableConfig="tableConfig"
:columnList="columnList"
:tableList="tableList"
@selectionChange="selectionChange"
@getList="getList"
&gt;&lt;/table-template&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script type="text/ecmascript-6"&gt;
import TableTemplate from "@/components/TemplateTable.vue";

export default {
components: {
TableTemplate,
},
data() {
return {
//头部搜索
searchData: {
name1: "",
name2: "",
addr: "",
time1: [],
time2: [],
},
// form
formList: [
{
label: "名称 1",
prop: "name1",
element: "input",
},
{
label: "筛选",
prop: "addr",
element: "select",
selectAuto: true,
optionLabel: "label",
optionValue: "value",
selectList: [
{
value: "1",
label: "黄金糕",
},
{
value: "2",
label: "双皮奶",
},
],
},
{
label: "名称 2",
prop: "name2",
element: "input",
},
{
label: "日期选择 1",
prop: "time1",
element: "datePicker",
dateType: "daterange",
},
{
label: "日期选择 2",
prop: "time2",
element: "datePicker",
dateType: "date",
},
],
// btn
btnGroup: [
{
render: (h) =&gt; {
let group = [];
//此处可以通过逻辑判断来添加按钮
if (true) {
group.push(
&lt;el-button
type="primary"
class="el-icon-circle-plus btn-add"
onClick={() =&gt; {
this.openPositionModle();
}}
&gt;
添加栏目
&lt;/el-button&gt;
);
}
//此处可以通过逻辑判断来添加按钮
if (false) {
group.push(
&lt;el-button
type="primary"
disabled={!this.sels || this.sels.length === 0}
onClick={() =&gt; {
this.openPositionModle();
}}
&gt;
批量添加
&lt;/el-button&gt;
);
}
return group;
},
},
],
// table components
tableConfig: {
selection: true,
index: true,
showSummary: true,
summariesList: ["总计", "", "", "", "", "", "", "", "15", "0.3"],
total: 2,
},
columnList: [
{
prop: "name",
label: "名称",
width: "120",
},
{
prop: "type",
label: "类型",
formatter: (row, column) =&gt; {
switch (row.type) {
case 1:
return "周一";
case 2:
return "周二";
}
},
},
{
prop: "img",
label: "图片",
render: (h, { row }) =&gt; {
return [
&lt;el-image
style="width: 100px; height: 100px"
src={row.img}
&gt;&lt;/el-image&gt;,
];
},
},
{
prop: "status",
label: "状态",
render: (h, { row }) =&gt; {
// 实现方式 1
const elem1 = h("el-switch", {
props: {
value: row.status,
activeValue: 1,
inactiveValue: 0,
},
attrs: {},
on: {
change: (e) =&gt; {
this.handleStatus(e, row);
},
},
});
// 实现方式 2
const elem2 = [
&lt;el-switch
value={row.status}
active-value={1}
inactive-value={0}
onChange={(e) =&gt; {
this.handleStatus(e, row);
}}
&gt;&lt;/el-switch&gt;,
];
return elem2;
},
},
{
prop: "addr",
label: "筛选",
width: 200,
render: (h, { row }) =&gt; {
let options = [
{
value: 1,
label: "item 1",
},
{
value: 2,
label: "item 2",
},
];
const elem = [
&lt;el-select v-model={row.addr}&gt;
{options.map((v, i) =&gt; {
return (
&lt;el-option
key={i}
label={v.label}
value={v.value}
&gt;&lt;/el-option&gt;
);
})}
&lt;/el-select&gt;,
];
return elem;
},
},
{
prop: "checked",
label: "复选框",
width: 200,
render: (h, { row }) =&gt; {
const elem = [
&lt;el-checkbox-group v-model={row.checked}&gt;
&lt;el-checkbox label={1} disabled&gt;
item 1
&lt;/el-checkbox&gt;
&lt;el-checkbox label={2} disabled&gt;
item 2
&lt;/el-checkbox&gt;
&lt;/el-checkbox-group&gt;,
];
return elem;
},
},
{
prop: "sort",
label: "排序",
sortable: true,
},
{
prop: "count",
label: "计数",
},
{
label: "操作",
width: 200,
fixed: "right",
render: (h, { row }) =&gt; {
const group = [
&lt;el-tooltip content="编辑" placement="top" effect="dark"&gt;
&lt;i
class="el-icon-edit"
onClick={() =&gt; {
this.openPositionModle();
}}
&gt;&lt;/i&gt;
&lt;/el-tooltip&gt;,
&lt;el-tooltip content="删除" placement="top" effect="dark"&gt;
&lt;i
class="el-icon-delete"
onClick={() =&gt; {
this.hanleDelete();
}}
&gt;&lt;/i&gt;
&lt;/el-tooltip&gt;
];
return group;
},
},
],
tableList: [
{
name: "我是一号",
img: "https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",
type: 1,
status: 1,
addr: 2,
checked: [1],
count: 0.1,
sort: 8,
},
{
name: "我是二号",
img: "https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",
type: 2,
status: 2,
addr: 1,
checked: [2],
count: 0.2,
sort: 7,
},
],
sels: [], //批量选择
};
},
created() {
this.getList();
this.searchData = Object.assign(this.searchData, this.$route.query);
  },
  methods: {
    // 批量选择
    selectionChange(e) {
      this.sels = e;
    },
    async getList(page) {
      let par = Object.assign({}, page, this.searchData);
      let res = await appTitleListFun(par);
      this.total = res.total;
      this.list = res.items;
      // this.$refs.list.bodyWrapper.scrollTop = 0;
},
// 更改状态
handleStatus(e, row) {
this.$message.success("修改成功");
    },
    // 添加/编辑
    openPositionModle(row = {}) {
        this.$message.success("添加成功");
},
// 删除
hanleDelete(row = {}) {
this.$confirm("确认删除此条信息?", "提示", {
        confirmButtonText: "确定",
        cancelButtonText: "取消",
        type: "warning",
      })
        .then((c) =&gt; {
          if (c === "confirm") {
            this.getDel(row.id);
          }
        })
        .catch((err) =&gt; {
          console.log(err);
        });
    },
    getDel(id) {
      this.$message.success("删除成功");
},
},
};
&lt;/script&gt;
</code></pre>
<p>
</p>

   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f6a697566616e313837322f:61727469636c652f64657461696c732f313331333039343132" class_="artid" style="display:none">
 </p>
</div>
