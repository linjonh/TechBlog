---
layout: post
title: "Linux下安装elasticsearchElasticsearch-7.17.23"
date: 2025-03-06 18:27:13 +0800
description: "Elasticsearch 是一个分布式的搜索和分析引擎，能够以近乎实时的速度存储、搜索和分析大量数据。它被广泛应用于日志分析、全文搜索、应用程序监控等场景。本文将带你一步步在 Linux 系统上安装 Elasticsearch 7.17.23 版本，并完成基本的配置，为后续的使用打下基础。如何在 Linux 系统上下载和安装 Elasticsearch 7.17.23如何配置 Elasticsearch 的基本参数如何启动和停止 Elasticsearch 服务。"
keywords: "Linux下安装elasticsearch（Elasticsearch 7.17.23）"
categories: ['未分类']
tags: ['搜索引擎', '大数据', 'Elasticsearch']
artid: "146044821"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146044821
    alt: "Linux下安装elasticsearchElasticsearch-7.17.23"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146044821
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146044821
cover: https://bing.ee123.net/img/rand?artid=146044821
image: https://bing.ee123.net/img/rand?artid=146044821
img: https://bing.ee123.net/img/rand?artid=146044821
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Linux下安装elasticsearch（Elasticsearch 7.17.23）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
    </p>
    <p>
     Elasticsearch 是一个分布式的搜索和分析引擎，能够以近乎实时的速度存储、搜索和分析大量数据。它被广泛应用于日志分析、全文搜索、应用程序监控等场景。
    </p>
    <p>
     本文将带你一步步在 Linux 系统上安装 Elasticsearch 7.17.23 版本，并完成基本的配置，为后续的使用打下基础。
    </p>
    <p>
     <strong>
      你将学到：
     </strong>
    </p>
    <ul>
     <li>
      <p>
       如何在 Linux 系统上下载和安装 Elasticsearch 7.17.23
      </p>
     </li>
     <li>
      <p>
       如何配置 Elasticsearch 的基本参数
      </p>
     </li>
     <li>
      <p>
       如何启动和停止 Elasticsearch 服务
      </p>
     </li>
     <li>
      <p>
       如何验证 Elasticsearch 是否安装成功
      </p>
     </li>
    </ul>
    <p>
     <strong>
      准备工作：
     </strong>
    </p>
    <ul>
     <li>
      <p>
       一台运行 Linux 系统的服务器
      </p>
     </li>
     <li>
      <p>
       确保服务器上已经安装了 Java 8 或更高版本
      </p>
     </li>
     <li>
      <p>
       以 root 用户或具有 sudo 权限的用户身份登录
      </p>
     </li>
    </ul>
    <p>
     <strong>
      接下来，我们将按照以下步骤进行安装：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        下载 Elasticsearch 7.17.23 安装包
       </strong>
      </p>
     </li>
     <li>
      <p>
       <strong>
        解压安装包并配置环境变量
       </strong>
      </p>
     </li>
     <li>
      <p>
       <strong>
        修改 Elasticsearch 配置文件
       </strong>
      </p>
     </li>
     <li>
      <p>
       <strong>
        启动 Elasticsearch 服务
       </strong>
      </p>
     </li>
     <li>
      <p>
       <strong>
        验证 Elasticsearch 是否安装成功
       </strong>
      </p>
     </li>
    </ol>
    <h2>
     1.
     <strong>
      下载 Elasticsearch 7.17.23 安装包
     </strong>
    </h2>
    <p>
     <a href="https://www.elastic.co/downloads/past-releases/elasticsearch-7-17-23" rel="nofollow" title="Elasticsearch 7.17.23 | Elastic">
      Elasticsearch 7.17.23 | Elastic
     </a>
    </p>
    <p>
     直接在官方下载对应安装包。
    </p>
    <h2>
     2.
     <strong>
      解压安装包并配置环境变量
     </strong>
    </h2>
    <p>
     把安装包上传到服务器后，拷贝到/usr/local目录下，执行解压命令：
    </p>
    <pre><code class="language-bash">tar -xzf elasticsearch-7.3.2-linux-x86_64.tar.gz
</code></pre>
    <p>
     由于ES不允许用root账号启动，这里需要创建用户，例如：elastic
    </p>
    <p>
     创建过程如下：
    </p>
    <pre><code class="language-bash">sudo useradd -m -d /home/elastic -s /bin/bash elastic
sudo passwd elastic  # 设置密码
sudo chown -R elastic:elastic /usr/local/elasticsearch-7.17.23</code></pre>
    <p>
     切换elastic账号
    </p>
    <pre><code class="language-bash">su - elastic</code></pre>
    <h2>
     <strong>
      3.修改 Elasticsearch 配置文件
     </strong>
    </h2>
    <p>
     <strong>
      进入
     </strong>
     <strong>
      Elasticsearch目录：
     </strong>
    </p>
    <pre><code class="language-bash">cd /usr/local/elasticsearch/config</code></pre>
    <p>
     例如：
    </p>
    <p>
     <img alt="" height="90" src="https://i-blog.csdnimg.cn/direct/ecbeccbabffe466996c40105cacc486f.png" width="2134"/>
    </p>
    <p>
     开始修改配置文件elasticsearch.yml:
    </p>
    <p>
     <img alt="" height="860" src="https://i-blog.csdnimg.cn/direct/ff4ac53a6b4748b6a6e44ac3ccdef2a3.png" width="1245"/>
    </p>
    <p>
     <img alt="" height="787" src="https://i-blog.csdnimg.cn/direct/ee3691fb4f684fa2b63be2a975428c80.png" width="892"/>
    </p>
    <p>
     记得自己创建好对应路径的文件夹分配好权限！！！！
    </p>
    <pre><code class="language-bash">sudo chown -R elastic:elastic /usr/local/elasticsearch/
sudo chmod -R 755 /usr/local/elasticsearch/</code></pre>
    <p>
     修改配置文件jvm.options：
    </p>
    <p>
     <img alt="" height="461" src="https://i-blog.csdnimg.cn/direct/c4cb85286ac34ddfa9fd5d5ac4d834d8.png" width="915"/>
    </p>
    <h2>
     <strong>
      4.启动 Elasticsearch 服务
     </strong>
    </h2>
    <p>
     <strong>
      执行以下命令。如果不报错，则跳转到第五点看结果。
     </strong>
    </p>
    <pre><code class="language-bash">/usr/local/elasticsearch-7.17.23/bin/elasticsearch -d</code></pre>
    <h2>
     5.如何验证 Elasticsearch 是否安装成功
    </h2>
    <p>
     <strong>
      一切正常的情况下，配置完成后，运行
     </strong>
     <strong>
      ：
     </strong>
     curl -X GET "localhost:9200"，出现如下图，则表示安装完成！
    </p>
    <p>
     <img alt="" height="701" src="https://i-blog.csdnimg.cn/direct/a449525a7a3b49b4b039a60d73bedb18.png" width="892"/>
    </p>
    <p>
     但是，肯定不会有正常情况
    </p>
    <p>
     我们来说一下常见的错误：
    </p>
    <p>
     （1）如果系统配置的是jdk8，启动会出现jdk版本不匹配等错误，如下：
    </p>
    <pre><code class="language-XML">warning: usage of JAVA_HOME is deprecated, use ES_JAVA_HOME
Future versions of Elasticsearch will require Java 11; your Java version from [/usr/local/java/jdk1.8.0_144/jre] does not meet this requirement. Consider switching to a distribution of Elasticsearch with a bundled JDK. If you are already using a distribution with a bundled JDK, ensure the JAVA_HOME environment variable is not set.
warning: usage of JAVA_HOME is deprecated, use ES_JAVA_HOME
Future versions of Elasticsearch will require Java 11; your Java version from [/usr/local/java/jdk1.8.0_144/jre] does not meet this requirement. Consider switching to a distribution of Elasticsearch with a bundled JDK. If you are already using a distribution with a bundled JDK, ensure the JAVA_HOME environment variable is not set.</code></pre>
    <p>
     解决办法就是，修改jdk指向路径，默认使用es自带的JDK，找到文件
    </p>
    <p>
     /usr/local/elasticsearch-7.17.23/bin下的：elasticsearch-env编辑，
    </p>
    <pre><code class="language-bash">vim elasticsearch-env</code></pre>
    <p>
     注释掉一部分配置，如下图：
    </p>
    <p>
     <img alt="" height="782" src="https://i-blog.csdnimg.cn/direct/c705306d00994fed8146856f6567f036.png" width="1077"/>
    </p>
    <p>
     这样就解决jdk问题了。这个是常见问题。。另外还有几个不常见的：
    </p>
    <p>
     （1）
     <strong>
      两项系统限制值过低
     </strong>
     ，需要调整
     <code>
      max file descriptors
     </code>
     和
     <code>
      vm.max_map_count
     </code>
    </p>
    <p>
     错误信息如下：
    </p>
    <pre><code class="language-XML">ERROR: [2] bootstrap checks failed. You must address the points described in the following [2] lines before starting Elasticsearch.
bootstrap check failure [1] of [2]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]
bootstrap check failure [2] of [2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]
ERROR: Elasticsearch did not exit normally - check the logs at /usr/local/elasticsearch/logs/my-cluster.log</code></pre>
    <p>
     直接切换root账号调整：
    </p>
    <pre><code class="language-bash">sudo vi /etc/security/limits.conf</code></pre>
    <p>
     在文件末尾添加以下两行：
    </p>
    <pre><code class="language-bash">elastic soft nofile 65535
elastic hard nofile 65535</code></pre>
    <p>
     退出保存！解决
    </p>
    <p>
     （2）
     <code>
      vm.max_map_count
     </code>
     的值太低，错误信息如下：
    </p>
    <pre><code class="language-bash">ERROR: [1] bootstrap checks failed. You must address the points described in the following [1] lines before starting Elasticsearch.
bootstrap check failure [1] of [1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]
ERROR: Elasticsearch did not exit normally - check the logs at /usr/local/elasticsearch/logs/my-cluster.log</code></pre>
    <p>
     切换root,编辑sysctl.conf
    </p>
    <pre><code class="language-bash"> vi /etc/sysctl.conf</code></pre>
    <p>
     添加：vm.max_map_count=262144
    </p>
    <p>
     保存退出！解决！！
    </p>
    <p>
     最后，我们得给es配置个密码吧，有密码才像那么一回事！
    </p>
    <p>
     设置密码方式有三种，我们选择最稳妥的通过
     <code>
      elasticsearch-setup-passwords
     </code>
     工具设置密码
    </p>
    <p>
     修改配置文件
    </p>
    <pre><code class="language-bash">sudo vi /usr/local/elasticsearch-7.17.23/config/elasticsearch.yml</code></pre>
    <p>
     新增一下内容：
    </p>
    <pre><code class="language-bash">http.cors.enabled: true
http.cors.allow-origin: "*"
http.cors.allow-headers: Authorization
xpack.security.enabled: true
xpack.security.transport.ssl.enabled: true
</code></pre>
    <p>
     如图：
    </p>
    <p>
     <img alt="" height="265" src="https://i-blog.csdnimg.cn/direct/748507acabd449afbec906a5b5f6ae19.png" width="1289"/>
    </p>
    <p>
     运行命令：
    </p>
    <pre><code class="language-bash">/usr/local/elasticsearch-7.17.23/bin/elasticsearch-setup-passwords interactive</code></pre>
    <p>
     提示是否设置密码。如图：
    </p>
    <p>
     <img alt="" height="176" src="https://i-blog.csdnimg.cn/direct/6b39639e7f274f5d9526867561c21ed3.png" width="2071"/>
    </p>
    <p>
     会让设置很多账号的密码：
    </p>
    <p>
     <img alt="" height="808" src="https://i-blog.csdnimg.cn/direct/16f345e18fa347348efb75e169b86712.png" width="936"/>
    </p>
    <p>
     依次输入密码。建议同一个密码！
    </p>
    <p>
     修改完成后，重启es服务！大功告成。。
    </p>
   </div>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f74733937372f:61727469636c652f64657461696c732f313436303434383231" class_="artid" style="display:none">
 </p>
</div>


