---
layout: post
title: "åœ¨k8sä¸­éƒ¨ç½²Jenkinsçš„å®è·µæŒ‡å—"
date: 2025-03-06 11:10:30 +0800
description: "æœ¬æ–‡æ—¨åœ¨æ·±å…¥æ¢è®¨å¦‚ä½•åœ¨Kubernetesï¼ˆK8sï¼‰é›†ç¾¤ä¸­é«˜æ•ˆéƒ¨ç½²Jenkinsï¼Œä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„å¼€æºè‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œå®ƒæ”¯æŒæŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰æµç¨‹ã€‚éšç€DevOpsæ–‡åŒ–çš„å…´èµ·ï¼ŒJenkinsä½œä¸ºCI/CDç®¡é“çš„æ ¸å¿ƒç»„ä»¶ï¼Œå…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§åœ¨å¿«é€Ÿè¿­ä»£å’Œéƒ¨ç½²è½¯ä»¶çš„è¿‡ç¨‹ä¸­æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚æœ¬æ–‡å°†ä¸ºè¯»è€…æä¾›ä¸€ä¸ªä»é›¶å¼€å§‹çš„å®æˆ˜æ•™ç¨‹ï¼Œå¸®åŠ©ä»–ä»¬åœ¨K8sç¯å¢ƒä¸­æ­å»ºå¹¶è¿è¡ŒJenkinsã€‚æ–‡ç« é¦–å…ˆæ¦‚è¿°äº†Jenkinsçš„åŸºæœ¬æ¦‚å¿µåŠå…¶åœ¨CI/CDæµç¨‹ä¸­çš„ä½œç”¨ï¼Œéšåä»‹ç»äº†Kubernetesè¿™ä¸€å®¹å™¨ç¼–æ’å¹³å°çš„ä¼˜åŠ¿ï¼Œä»¥åŠä¸ºä½•"
keywords: "åœ¨ã€k8sã€‘ä¸­éƒ¨ç½²Jenkinsçš„å®è·µæŒ‡å—"
categories: ['æœªæ¥å·²æ¥äº‘åŸç”Ÿä¹‹æ—…', 'Kubernetes']
tags: ['è¿ç»´', 'å®¹å™¨', 'äº‘åŸç”Ÿ', 'Kubernetes', 'Jenkins', 'Ci']
artid: "146060495"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146060495
    alt: "åœ¨k8sä¸­éƒ¨ç½²Jenkinsçš„å®è·µæŒ‡å—"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146060495
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146060495
cover: https://bing.ee123.net/img/rand?artid=146060495
image: https://bing.ee123.net/img/rand?artid=146060495
img: https://bing.ee123.net/img/rand?artid=146060495
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     åœ¨ã€k8sã€‘ä¸­éƒ¨ç½²Jenkinsçš„å®è·µæŒ‡å—
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p class="img-center" style="margin-left:0; text-align:center">
     <img alt="" height="1080" src="https://i-blog.csdnimg.cn/blog_migrate/b0f938161dd437d90d5261dddac76e15.jpeg" width="1200"/>
    </p>
    <p style="text-align:center">
     ğŸ‡æ˜æ˜è·Ÿä½ è¯´è¿‡ï¼š
     <span contenteditable="false" tabindex="-1">
      <a href="https://blog.csdn.net/weixin_53269650?spm=1011.2415.3001.5343" rel="noopener noreferrer" target="_blank" title="ä¸ªäººä¸»é¡µ">
       ä¸ªäººä¸»é¡µ
      </a>
     </span>
    </p>
    <p style="text-align:center">
     ğŸ…ä¸ªäººä¸“æ ï¼š
     <span contenteditable="false" tabindex="-1">
      <a href="https://blog.csdn.net/weixin_53269650/category_12563985.html" rel="noopener noreferrer" target="_blank" title="ã€ŠKubernetesèˆªçº¿å›¾ï¼šä»èˆ¹é•¿åˆ°K8sæŒèˆµè€…ã€‹">
       ã€ŠKubernetesèˆªçº¿å›¾ï¼šä»èˆ¹é•¿åˆ°K8sæŒèˆµè€…ã€‹
      </a>
     </span>
     ğŸ…
    </p>
    <p style="text-align:center">
     ğŸ”–è¡Œè·¯æœ‰è‰¯å‹ï¼Œä¾¿æ˜¯å¤©å ‚ğŸ”–
    </p>
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <h2 id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80" name="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80">
     ä¸€ã€å¼•è¨€
    </h2>
    <h3 id="1%E3%80%81Jenkins%E7%AE%80%E4%BB%8B" name="1%E3%80%81Jenkins%E7%AE%80%E4%BB%8B">
     1ã€Jenkinsç®€ä»‹
    </h3>
    <blockquote>
     <p>
      Jenkins æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äº
      <span style="color:#fe2c24">
       æŒç»­é›†æˆï¼ˆContinuous Integration, CIï¼‰å’ŒæŒç»­äº¤ä»˜ï¼ˆContinuous Delivery, CDï¼‰
      </span>
      ã€‚å®ƒç”±Sun Microsystemsçš„å‰å‘˜å·¥åœ¨2004å¹´å·¦å³å¼€å‘ï¼Œæœ€åˆå‘½åä¸ºHudsonã€‚åæ¥ç”±äºä¸€äº›å•†æ ‡äº‰è®®ï¼Œé¡¹ç›®æ”¹åä¸ºJenkinsï¼Œå¹¶ä¸”è¿…é€Ÿæˆä¸ºæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²è½¯ä»¶é¡¹ç›®çš„æµè¡Œå·¥å…·ã€‚
     </p>
    </blockquote>
    <p>
     <strong>
      Jenkinsçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       æŒç»­é›†æˆä¸æŒç»­äº¤ä»˜ï¼š
      </strong>
      Jenkinså¯ä»¥è‡ªåŠ¨ç›‘æ§ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­çš„ä»£ç å˜æ›´ï¼Œè§¦å‘æ„å»ºè¿‡ç¨‹ï¼Œè¿è¡Œæµ‹è¯•ï¼Œå¹¶æ ¹æ®ç»“æœå†³å®šæ˜¯å¦éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚è¿™æœ‰åŠ©äºå¿«é€Ÿå‘ç°é›†æˆé—®é¢˜å¹¶ç¼©çŸ­å¼€å‘å‘¨æœŸã€‚
     </li>
     <li>
      <strong>
       æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼š
      </strong>
      Jenkinsæ‹¥æœ‰åºå¤§çš„æ’ä»¶åº“ï¼Œæ”¯æŒå‡ ä¹æ‰€æœ‰ç°ä»£è½¯ä»¶å¼€å‘ä¸­å¯èƒ½ç”¨åˆ°çš„å·¥å…·å’ŒæŠ€æœ¯ï¼Œæ¯”å¦‚Gitã€Mavenã€Gradleç­‰ã€‚
     </li>
     <li>
      <strong>
       æ˜“äºæ‰©å±•ï¼š
      </strong>
      ç”±äºJenkinsæ˜¯åŸºäºJavaç¼–å†™çš„ï¼Œå› æ­¤å®ƒéå¸¸çµæ´»ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™è‡ªå®šä¹‰è„šæœ¬æˆ–æ’ä»¶æ¥æ‰©å±•å…¶åŠŸèƒ½ã€‚
     </li>
     <li>
      <strong>
       åˆ†å¸ƒå¼æ„å»ºï¼š
      </strong>
      Jenkinsæ”¯æŒé€šè¿‡â€œä¸»ä»â€æ¶æ„è¿›è¡Œåˆ†å¸ƒå¼æ„å»ºï¼Œå…è®¸å°†æ„å»ºä»»åŠ¡åˆ†é…ç»™å¤šä¸ªèŠ‚ç‚¹ï¼Œä»¥æé«˜æ•ˆç‡å’Œèµ„æºåˆ©ç”¨ç‡ã€‚
     </li>
     <li>
      <strong>
       å›¾å½¢åŒ–ç•Œé¢ï¼š
      </strong>
      Jenkinsæä¾›äº†ç›´è§‚çš„Webç•Œé¢ï¼Œä½¿å¾—é…ç½®å’Œç®¡ç†CI/CDæµç¨‹å˜å¾—ç®€å•ã€‚
     </li>
     <li>
      <strong>
       Pipelineå³ä»£ç ï¼š
      </strong>
      Jenkins Pipelineæ˜¯ä¸€ä¸ªç‰¹æ€§é›†ï¼Œå®ƒå…è®¸ç”¨æˆ·å®šä¹‰å…¶CI/CDæµç¨‹ä¸ºä»£ç çš„å½¢å¼ï¼ˆé€šå¸¸ä½¿ç”¨Groovyè¯­è¨€ï¼‰ï¼Œè¿™æ ·å¯ä»¥å°†å…¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œå¹¶ä¸å…¶ä»–å›¢é˜Ÿæˆå‘˜å…±äº«ã€‚
     </li>
     <li>
      <strong>
       å®‰å…¨æ€§ï¼š
      </strong>
      Jenkinsæä¾›äº†ä¸€äº›å®‰å…¨ç‰¹æ€§å’Œè®¤è¯æœºåˆ¶ï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚
     </li>
     <li>
      <strong>
       ç¤¾åŒºå’Œæ”¯æŒï¼š
      </strong>
      ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒJenkinsæœ‰ä¸€ä¸ªæ´»è·ƒçš„ç¤¾åŒºï¼Œæä¾›æ–‡æ¡£ã€è®ºå›è®¨è®ºä»¥åŠç¬¬ä¸‰æ–¹æœåŠ¡å’Œæ”¯æŒã€‚
     </li>
    </ol>
    <p>
    </p>
    <div contenteditable="false" tabindex="-1">
     <p class="img-center">
      <img alt="" height="702" src="https://i-blog.csdnimg.cn/direct/df3fd79ecbf44367a4b8339d0e9ff89f.png" width="1390">
       <span title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥æ”¹å˜å°ºå¯¸">
        â€‹
       </span>
      </img>
     </p>
    </div>
    <h3 id="2%E3%80%81k8s%E7%AE%80%E4%BB%8B" name="2%E3%80%81k8s%E7%AE%80%E4%BB%8B">
     2ã€k8sç®€ä»‹
    </h3>
    <blockquote>
     <p>
      <span style="color:#fe2c24">
       Kubernetesï¼ˆé€šå¸¸ç®€å†™ä¸ºK8sï¼‰
      </span>
      æ˜¯ä¸€ä¸ªå¼€æºå¹³å°ï¼Œç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºã€‚å®ƒæœ€åˆç”±Googleè®¾è®¡å¹¶å¼€å‘ï¼Œå¹¶äº2014å¹´æèµ ç»™äº†äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰ã€‚Kubernetesæä¾›äº†å¼ºå¤§çš„æœºåˆ¶æ¥ç®¡ç†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„åº”ç”¨ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨ç‰©ç†æœºæˆ–è™šæ‹Ÿæœºé›†ç¾¤ä¸Šè¿è¡Œã€‚
     </p>
    </blockquote>
    <p>
     <strong>
      ç‰¹æ€§
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       è‡ªåŠ¨åŒ–å®¹å™¨ç¼–æ’ï¼š
      </strong>
      è‡ªåŠ¨é‡å¯å¤±è´¥çš„å®¹å™¨ã€æ›¿æ¢å’Œé‡æ–°è°ƒåº¦å®¹å™¨ã€æ°´å¹³æ‰©å±•å®¹å™¨ç­‰ã€‚
     </li>
     <li>
      <strong>
       è‡ªæˆ‘ä¿®å¤ï¼š
      </strong>
      å¦‚æœæŸä¸ªèŠ‚ç‚¹æ•…éšœï¼ŒKubernetesä¼šè‡ªåŠ¨å°†è¯¥èŠ‚ç‚¹ä¸Šçš„å·¥ä½œè´Ÿè½½è¿ç§»åˆ°å…¶ä»–å¥åº·çš„èŠ‚ç‚¹ä¸Šã€‚
     </li>
     <li>
      <strong>
       æ¨ªå‘æ‰©å±•ï¼š
      </strong>
      é€šè¿‡ç®€å•çš„å‘½ä»¤ã€ç”¨æˆ·ç•Œé¢æˆ–è€…åŸºäºCPUä½¿ç”¨æƒ…å†µè‡ªåŠ¨è°ƒæ•´åº”ç”¨çš„è§„æ¨¡ã€‚
     </li>
     <li>
      <strong>
       æœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡ï¼š
      </strong>
      æ— éœ€ä¿®æ”¹ä»£ç å³å¯å®ç°æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼ŒKubernetesä¸ºå®¹å™¨æä¾›äº†è‡ªå·±çš„IPåœ°å€ä»¥åŠä¸€ä¸ªDNSåç§°ï¼Œå¹¶ä¸”å¯ä»¥è´Ÿè½½å‡è¡¡åˆ†é…åˆ°å®¹å™¨ä¸Šã€‚
     </li>
     <li>
      <strong>
       è‡ªåŠ¨å‘å¸ƒä¸å›æ»šï¼š
      </strong>
      é€æ­¥å‘å¸ƒæ–°çš„ç‰ˆæœ¬ï¼ŒåŒæ—¶ç›‘è§†åº”ç”¨å¥åº·çŠ¶å†µï¼Œå¦‚æœ‰é—®é¢˜åˆ™è‡ªåŠ¨å›æ»šæ›´æ”¹ã€‚
     </li>
     <li>
      <strong>
       å¯†é’¥ä¸é…ç½®ç®¡ç†ï¼š
      </strong>
      è®©æ‚¨å¯ä»¥è½»æ¾åœ°ç®¡ç†å’Œåˆ†å‘å¯†ç ã€OAuthä»¤ç‰Œå’Œå…¶ä»–æ•æ„Ÿæ•°æ®ï¼Œè€Œæ— éœ€é‡å»ºé•œåƒã€‚
     </li>
    </ol>
    <p>
     <span contenteditable="false" tabindex="-1">
      <img alt="" height="823" src="https://i-blog.csdnimg.cn/direct/0a1b342db9b342d389235b2756f2cd5e.png" width="1599">
       <span title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥æ”¹å˜å°ºå¯¸">
        â€‹
       </span>
      </img>
     </span>
    </p>
    <h3 id="3%E3%80%81%E4%BB%80%E4%B9%88%E5%9C%A8k8s%E4%B8%AD%E9%83%A8%E7%BD%B2Jenkins" name="3%E3%80%81%E4%BB%80%E4%B9%88%E5%9C%A8k8s%E4%B8%AD%E9%83%A8%E7%BD%B2Jenkins">
     3ã€ä»€ä¹ˆåœ¨k8sä¸­éƒ¨ç½²Jenkins
    </h3>
    <blockquote>
     <p>
      åœ¨Kubernetesï¼ˆç®€ç§°K8sï¼‰ä¸­éƒ¨ç½²Jenkinsï¼Œå¯ä»¥å¸¦æ¥è®¸å¤šå¥½å¤„ï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›éœ€è¦é«˜æ•ˆã€å¯æ‰©å±•å’Œå¯é çš„
      <span style="color:#fe2c24">
       æŒç»­é›†æˆ/æŒç»­äº¤ä»˜ï¼ˆCI/CDï¼‰
      </span>
      æµç¨‹çš„ä¼ä¸šæˆ–å›¢é˜Ÿã€‚
     </p>
    </blockquote>
    <p>
     <strong>
      <span style="background-color:#ffd7b9">
       1. åŠ¨æ€èµ„æºç®¡ç†
      </span>
     </strong>
    </p>
    <ul>
     <li>
      æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€å®¶é¤å…ï¼Œæœ‰æ—¶å€™å®¢äººå¾ˆå¤šï¼Œæœ‰æ—¶å€™å®¢äººå¾ˆå°‘ã€‚å¦‚æœæ¯æ¬¡å®¢äººéƒ½å¾ˆå¤šæ—¶ï¼Œä½ éƒ½éœ€è¦ä¸´æ—¶é›‡ä½£æ›´å¤šçš„æœåŠ¡å‘˜ï¼Œè€Œå½“å®¢äººå°‘æ—¶åˆå¾—è§£é›‡ä»–ä»¬ï¼Œè¿™æ ·ä¸ä»…éº»çƒ¦è¿˜æµªè´¹èµ„æºã€‚è€Œåœ¨Kubernetesä¸­éƒ¨ç½²Jenkinså°±åƒæ˜¯æœ‰ä¸€ä¸ªæ™ºèƒ½ç®¡ç†ç³»ç»Ÿï¼Œå®ƒå¯ä»¥æ ¹æ®å½“å‰çš„å·¥ä½œè´Ÿè½½è‡ªåŠ¨è°ƒæ•´æ‰€éœ€çš„æœåŠ¡å‘˜æ•°é‡ï¼ˆå³Jenkinsæ„å»ºèŠ‚ç‚¹ï¼‰ã€‚å½“æœ‰å¾ˆå¤šæ„å»ºä»»åŠ¡æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¢åŠ æ›´å¤šâ€œæœåŠ¡å‘˜â€æ¥å¸®å¿™ï¼›åä¹‹ï¼Œåˆ™å‡å°‘â€œæœåŠ¡å‘˜â€ï¼Œä»è€Œæ›´æœ‰æ•ˆåœ°åˆ©ç”¨èµ„æºã€‚
     </li>
    </ul>
    <p>
     <strong>
      <span style="background-color:#ffd7b9">
       2. æé«˜å¯é æ€§å’Œå®¹é”™èƒ½åŠ›
      </span>
     </strong>
    </p>
    <ul>
     <li>
      å¦‚æœä½ çš„é¤å…åªæœ‰ä¸€ä¸ªå¨æˆ¿ï¼Œä¸€æ—¦è¿™ä¸ªå¨æˆ¿å‡ºç°é—®é¢˜ï¼Œæ•´ä¸ªé¤å…å°±æ— æ³•æ­£å¸¸è¿è¥äº†ã€‚åŒæ ·ï¼Œåœ¨ä¼ ç»Ÿè®¾ç½®ä¸‹ï¼Œå¦‚æœJenkinsä¸»èŠ‚ç‚¹å‡ºç°æ•…éšœï¼Œæ‰€æœ‰çš„æ„å»ºä»»åŠ¡éƒ½ä¼šåœæ­¢ã€‚ä½†åœ¨Kubernetesç¯å¢ƒä¸­ï¼Œå³ä½¿ä¸€ä¸ªèŠ‚ç‚¹å‡ºé—®é¢˜ï¼Œå…¶ä»–å¥åº·çš„èŠ‚ç‚¹å¯ä»¥ç«‹å³æ¥ç®¡å·¥ä½œï¼Œç¡®ä¿æœåŠ¡ä¸é—´æ–­ã€‚
     </li>
    </ul>
    <p>
     <strong>
      <span style="background-color:#ffd7b9">
       3. å¿«é€Ÿå“åº”å˜åŒ–
      </span>
     </strong>
    </p>
    <ul>
     <li>
      å‡è®¾ä½ çš„é¤å…çªç„¶æ¥åˆ°ä¸€ä¸ªå¤§å‹å®´ä¼šè®¢å•ï¼Œä½ éœ€è¦å¿«é€Ÿå‡†å¤‡å¥½é¢å¤–çš„é£Ÿç‰©å’ŒæœåŠ¡ã€‚æœ‰äº†Kubernetesçš„å¸®åŠ©ï¼ŒJenkinså¯ä»¥è¿…é€Ÿæ‰©å±•å…¶å¤„ç†èƒ½åŠ›ï¼Œå°±åƒç¬é—´å¢åŠ äº†å¤šä¸ªå¨æˆ¿ä¸€æ ·ï¼Œä»¥åº”å¯¹çªå¦‚å…¶æ¥çš„å¤§é‡å·¥ä½œã€‚å®Œæˆåï¼Œè¿˜å¯ä»¥å¿«é€Ÿç¼©å‡è§„æ¨¡ï¼ŒèŠ‚çœæˆæœ¬ã€‚
     </li>
    </ul>
    <p>
     <strong>
      <span style="background-color:#ffd7b9">
       4. ç»Ÿä¸€ç¯å¢ƒ
      </span>
     </strong>
    </p>
    <ul>
     <li>
      æ— è®ºæ˜¯åœ¨å®¶ä¸­å‡†å¤‡é£Ÿç‰©è¿˜æ˜¯åœ¨å•†ä¸šå¨æˆ¿é‡Œçƒ¹é¥ªï¼Œä¿æŒä¸€è‡´çš„é£Ÿè°±å’Œåšæ³•æ˜¯éå¸¸é‡è¦çš„ã€‚å°†Jenkinséƒ¨ç½²åˆ°Kubernetesä¸Šï¼Œæ„å‘³ç€ä½ å¯ä»¥ç¡®ä¿å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒå°½å¯èƒ½åœ°ç›¸ä¼¼ï¼Œé¿å…ç”±äºç¯å¢ƒå·®å¼‚å¯¼è‡´çš„é—®é¢˜ã€‚
     </li>
    </ul>
    <p>
     <span contenteditable="false" tabindex="-1">
      <img alt="" height="789" src="https://i-blog.csdnimg.cn/direct/797e8ef28570441ca3dc7e7e9e6c8fba.png" width="1518">
       <span title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥æ”¹å˜å°ºå¯¸">
        â€‹
       </span>
      </img>
     </span>
    </p>
    <h2 id="%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" name="%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">
     äºŒã€å‡†å¤‡å·¥ä½œ
    </h2>
    <h3 id="1%E3%80%81%E5%87%86%E5%A4%87k8s%E9%9B%86%E7%BE%A4" name="1%E3%80%81%E5%87%86%E5%A4%87k8s%E9%9B%86%E7%BE%A4">
     1ã€å‡†å¤‡k8sé›†ç¾¤
    </h3>
    <p>
     è¿™é‡Œæˆ‘ä»¬ç”¨çš„k8sç‰ˆæœ¬ä¸º 1.23.1ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„k8så‘è¡Œç‰ˆæœ¬ï¼Œå¦‚æœè¿˜æœªå®‰è£…k8sè¯·å‚è€ƒä¸‹é¢çš„æ–‡ç« ã€‚
    </p>
    <p>
     <a class="link-info" href="https://blog.csdn.net/weixin_53269650/article/details/135836786" title="ã€Šåœ¨Centosä¸­æ­å»º K8s 1.23 é›†ç¾¤è¶…è¯¦ç»†è®²è§£ã€‹">
      ã€Šåœ¨Centosä¸­æ­å»º K8s 1.23 é›†ç¾¤è¶…è¯¦ç»†è®²è§£ã€‹
     </a>
    </p>
    <p>
     <a class="link-info" href="https://blog.csdn.net/weixin_53269650/article/details/136840197" title="ã€Šæ·±åº¦è§£æï¼šKubernetes 1.28.2é›†ç¾¤å®‰è£…è¿‡ç¨‹ä¸­çš„å…³é”®æ­¥éª¤ã€‹">
      ã€Šæ·±åº¦è§£æï¼šKubernetes 1.28.2é›†ç¾¤å®‰è£…è¿‡ç¨‹ä¸­çš„å…³é”®æ­¥éª¤ã€‹
     </a>
    </p>
    <p>
     <img alt="" height="739" src="https://i-blog.csdnimg.cn/direct/dc664e4d64bc435185860a60e4fd018a.png" width="1159"/>
    </p>
    <h3 id="2%E3%80%81Jenkins%E5%AE%98%E6%96%B9%E9%95%9C%E5%83%8F%E7%89%88%E6%9C%AC%E4%BB%8B%E7%BB%8D" name="2%E3%80%81Jenkins%E5%AE%98%E6%96%B9%E9%95%9C%E5%83%8F%E7%89%88%E6%9C%AC%E4%BB%8B%E7%BB%8D">
     2ã€Jenkinså®˜æ–¹é•œåƒç‰ˆæœ¬ä»‹ç»
    </h3>
    <p>
     <span style="background-color:#ffd7b9">
      å®˜æ–¹é•œåƒçš„æ¨è
     </span>
    </p>
    <ul>
     <li>
      Jenkinså®˜æ–¹æ¨èä½¿ç”¨
      <span style="color:#fe2c24">
       <span style="background-color:#f3f3f4">
        jenkinsci/blueocean
       </span>
      </span>
      è¿™ä¸ªé•œåƒã€‚ä¸ç›´æ¥ä¸‹è½½Jenkinsçš„é•œåƒç›¸æ¯”ï¼ŒBlue Oceané•œåƒæä¾›äº†æ›´ä¸ºç°ä»£å’Œç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¾—Jenkinsçš„ä½¿ç”¨å’Œç®¡ç†å˜å¾—æ›´åŠ å®¹æ˜“ã€‚å› æ­¤ï¼Œå¯¹äºæ–°ç”¨æˆ·æˆ–è€…å¸Œæœ›ç®€åŒ–Jenkinsä½¿ç”¨çš„ç”¨æˆ·æ¥è¯´ï¼Œæ¨èä½¿ç”¨jenkinsci/blueoceané•œåƒã€‚
     </li>
    </ul>
    <p>
     <span style="background-color:#ffd7b9">
      é•œåƒç‰ˆæœ¬æ ‡ç­¾
     </span>
    </p>
    <p>
     Jenkinså®˜æ–¹é•œåƒåœ¨Docker Hubä¸Šæä¾›äº†å¤šä¸ªç‰ˆæœ¬æ ‡ç­¾ï¼Œä»¥ä¾¿ç”¨æˆ·é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç‰ˆæœ¬æ ‡ç­¾ï¼š
    </p>
    <ul>
     <li>
      <strong>
       latestï¼š
      </strong>
      è¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬çš„Jenkinsï¼ŒåŒ…æ‹¬æœ€æ–°çš„åŠŸèƒ½å’Œå®‰å…¨æ›´æ–°ã€‚ç„¶è€Œï¼Œç”±äºå®ƒæ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¯èƒ½å­˜åœ¨ä¸€äº›æœªçŸ¥çš„é—®é¢˜æˆ–ä¸ç¨³å®šå› ç´ ã€‚
     </li>
     <li>
      <strong>
       ltsï¼š
      </strong>
      è¡¨ç¤ºé•¿æœŸæ”¯æŒç‰ˆæœ¬çš„Jenkinsï¼Œé€šå¸¸æ›´ç¨³å®šä¸”ç»è¿‡æ›´å¤šçš„æµ‹è¯•ã€‚å®ƒé€‚åˆç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå› ä¸ºæä¾›äº†æ›´å¤šçš„å®‰å…¨æ›´æ–°å’Œç¨³å®šæ€§ä¿®å¤ã€‚
     </li>
     <li>
      <strong>
       å…·ä½“ç‰ˆæœ¬å·ï¼š
      </strong>
      ä¾‹å¦‚2.401.1ã€1.24.1-bcc31d32159fç­‰ï¼Œè¡¨ç¤ºç‰¹å®šç‰ˆæœ¬çš„Jenkinsã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ç‰¹å®šçš„ç‰ˆæœ¬å·ã€‚
     </li>
    </ul>
    <p>
     <img alt="" height="898" src="https://i-blog.csdnimg.cn/direct/f63192fa12d542e48df9635f47faae67.png" width="1647">
     </img>
    </p>
    <h3 id="3%E3%80%81Jenkins%E9%95%9C%E5%83%8F%E5%87%86%E5%A4%87" name="3%E3%80%81Jenkins%E9%95%9C%E5%83%8F%E5%87%86%E5%A4%87">
     3ã€Jenkinsé•œåƒå‡†å¤‡
    </h3>
    <p>
     è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„Jenkinsç‰ˆæœ¬ä¸º2.410ï¼Œé•œåƒæˆ‘æ”¾åœ¨ä¸ªäººèµ„æºä¸­äº†ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œä¸‹è½½æˆ–ä½¿ç”¨å…¶ä»–çš„å‘è¡Œç‰ˆæœ¬ã€‚
    </p>
    <p>
     ä¸Šä¼ è‡³workerèŠ‚ç‚¹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è§£å‹
    </p>
    <pre><code class="hljs">docker load -i jenkins-2.410.tar.gz</code></pre>
    <p>
     å¦‚æœk8sç‰ˆæœ¬å¤§äº1.23ï¼Œåˆ™æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤
    </p>
    <pre><code class="hljs">ctr -n=k8s.io images import jenkins2.410</code></pre>
    <h2 id="%E4%B8%89%E3%80%81%E5%9C%A8Kubernetes%E4%B8%AD%E9%83%A8%E7%BD%B2Jenkins" name="%E4%B8%89%E3%80%81%E5%9C%A8Kubernetes%E4%B8%AD%E9%83%A8%E7%BD%B2Jenkins">
     <strong>
      ä¸‰ã€åœ¨Kubernetesä¸­éƒ¨ç½²Jenkins
     </strong>
    </h2>
    <h3 id="1%E3%80%81%E5%87%86%E5%A4%87%E5%AD%98%E5%82%A8%E8%B5%84%E6%BA%90" name="1%E3%80%81%E5%87%86%E5%A4%87%E5%AD%98%E5%82%A8%E8%B5%84%E6%BA%90">
     <strong>
      1ã€å‡†å¤‡å­˜å‚¨èµ„æº
     </strong>
    </h3>
    <p>
     æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªPVCï¼Œå°†Jenkinsçš„æ•°æ®æŒä¹…åŒ–åˆ°å½“ä¸­ï¼Œä»¥å…podæ¼‚ç§»åˆ°å…¶ä»–èŠ‚ç‚¹åï¼Œå†å²æ•°æ®ä¸¢å¤±ã€‚
    </p>
    <p>
     ä¸‹é¢ç®€å•ä»‹ç»ä¸‹å¦‚ä½•åˆ›å»ºPVCï¼Œæ›´è¯¦ç»†çš„å¯ä»¥å‚è€ƒ
     <a class="link-info" href="https://blog.csdn.net/weixin_53269650/article/details/137505260" title="ã€Šk8s PVä¸PVCæŒä¹…åŒ–å­˜å‚¨è¯¦è§£ä¸å®é™…åº”ç”¨åˆ†äº«ã€‹">
      ã€Šk8s PVä¸PVCæŒä¹…åŒ–å­˜å‚¨è¯¦è§£ä¸å®é™…åº”ç”¨åˆ†äº«ã€‹
     </a>
     è¿™ç¯‡æ–‡ç« 
    </p>
    <p>
     é¦–å…ˆå‡†å¤‡ä¸€ä¸ªNFSå…±äº«ç›®å½•
    </p>
    <pre><code class="hljs">yum install nfs-utils -y
systemctl enable nfs --now
mkdir /data/jenkins -p
vim /etc/exports
# æ·»åŠ ä¸‹é¢çš„å†…å®¹
/data/jenkins *(rw,no_root_squash)
#ä¿å­˜ã€é€€å‡º
exportfs -arv</code></pre>
    <p>
     åˆ›å»ºä¸€ä¸ªåç§°ç©ºé—´ï¼Œç”¨äºéƒ¨ç½²Jenkins
    </p>
    <pre><code class="hljs">kubectl create namespace jenkins-k8s</code></pre>
    <p>
     ç¼–å†™pvçš„yamlæ–‡ä»¶
    </p>
    <pre><code class="hljs">apiVersion: v1
kind: PersistentVolume
metadata:
  name: jenkins-k8s-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
  - ReadWriteMany
  nfs:
    server: 192.168.40.181
    path: /data/jenkins</code></pre>
    <ul>
     <li>
      <span style="color:null">
       <strong>
        kind:
       </strong>
       PersistentVolumeï¼šå®šä¹‰äº†è¿™ä¸ªèµ„æºå¯¹è±¡çš„ç±»å‹æ˜¯ä¸€ä¸ªPersistentVolumeï¼ˆæŒä¹…å·ï¼‰ã€‚PersistentVolumeæ˜¯é›†ç¾¤ä¸­çš„ä¸€æ®µå­˜å‚¨ï¼Œå®ƒç‹¬ç«‹äºPodçš„ç”Ÿå‘½å‘¨æœŸè€Œå­˜åœ¨ã€‚
      </span>
     </li>
     <li>
      <span style="color:null">
       <strong>
        metadata:
       </strong>
       å¼€å§‹å…ƒæ•°æ®éƒ¨åˆ†ï¼Œè¿™é‡ŒåŒ…å«äº†èµ„æºå¯¹è±¡çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚
      </span>
      <ul>
       <li>
        <span style="color:null">
         <strong>
          <span id="cke_bm_57984C" style="display:none">
          </span>
          name: jenkins-k8s-pvï¼š
         </strong>
         ç»™è¿™ä¸ªPersistentVolumeæŒ‡å®šä¸€ä¸ªåç§°ï¼Œè¿™é‡Œæ˜¯jenkins-k8s-pvã€‚åœ¨Kubernetesé›†ç¾¤ä¸­ï¼Œæ¯ä¸ªèµ„æºå¯¹è±¡éƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚
        </span>
       </li>
      </ul>
     </li>
     <li>
      <span style="color:null">
       <strong>
        spec:ï¼š
       </strong>
       å¼€å§‹å®šä¹‰PersistentVolumeçš„å…·ä½“è§„æ ¼å’Œé…ç½®ã€‚
      </span>
      <ul>
       <li>
        <span style="color:null">
         <strong>
          <span id="cke_bm_58456C" style="display:none">
          </span>
          capacity:ï¼š
         </strong>
         å®šä¹‰äº†è¿™ä¸ªæŒä¹…å·çš„å®¹é‡ã€‚
        </span>
        <ul>
         <li>
          <span style="color:null">
           <strong>
            <span id="cke_bm_58617C" style="display:none">
            </span>
            <span id="cke_bm_58729C" style="display:none">
            </span>
            storage: 10Giï¼š
           </strong>
           æŒ‡å®šäº†æŒä¹…å·çš„å­˜å‚¨å¤§å°ä¸º10GiBï¼ˆGibibytesï¼‰ã€‚
          </span>
         </li>
        </ul>
       </li>
       <li>
        <span style="color:null">
         <strong>
          <span id="cke_bm_59439C" style="display:none">
          </span>
          accessModes:ï¼š
         </strong>
         æè¿°äº†æŒä¹…å·å¯ä»¥è¢«è®¿é—®çš„æ–¹å¼æˆ–æ¨¡å¼ã€‚
        </span>
       </li>
       <li>
        <span style="color:null">
         <strong>
          <span id="cke_bm_59923C" style="display:none">
          </span>
          - ReadWriteManyï¼š
         </strong>
         è¡¨ç¤ºè¿™ä¸ªå·å¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹åŒæ—¶ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ã€‚å…¶ä»–å¯èƒ½çš„è®¿é—®æ¨¡å¼åŒ…æ‹¬ReadWriteOnceï¼ˆåªèƒ½ç”±ä¸€ä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ï¼‰å’ŒReadOnlyManyï¼ˆå¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥åªè¯»æ–¹å¼æŒ‚è½½ï¼‰ã€‚
        </span>
       </li>
      </ul>
     </li>
     <li>
      <span style="color:null">
       <strong>
        nfs:ï¼š
       </strong>
       æŒ‡å®šäº†è¿™ä¸ªæŒä¹…å·ä½¿ç”¨NFSï¼ˆç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰ä½œä¸ºå…¶åç«¯å­˜å‚¨æœºåˆ¶ã€‚
      </span>
      <ul>
       <li>
        <span style="color:null">
         <strong>
          <span id="cke_bm_60088C" style="display:none">
          </span>
          server:
         </strong>
         192.168.40.181ï¼š
        </span>
        <span style="color:#fe2c24">
         æŒ‡å®šäº†NFSæœåŠ¡å™¨çš„IPåœ°å€ï¼Œè¿™é‡Œæ˜¯192.168.40.181ã€‚
        </span>
       </li>
       <li>
        <span style="color:null">
         <strong>
          <span id="cke_bm_60194C" style="display:none">
          </span>
          path:
         </strong>
         /data/jenkinsï¼šæŒ‡å®šäº†NFSæœåŠ¡å™¨ä¸Šå…±äº«çš„è·¯å¾„ï¼Œå³å®é™…å­˜å‚¨æ•°æ®çš„ä½ç½®ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯/data/jenkinsã€‚
        </span>
       </li>
      </ul>
     </li>
    </ul>
    <p>
     åˆ›å»ºPV
    </p>
    <pre><code class="hljs">kubectl  apply -f pv.yaml</code></pre>
    <p>
     <span style="display:none">
     </span>
     <img alt="" height="382" src="https://i-blog.csdnimg.cn/direct/bbdeed9bc4a34e3c8ab24c304627dc7e.png" width="1296">
      <span style="display:none">
      </span>
     </img>
    </p>
    <p>
     ç¼–å†™åˆ›å»ºPVCçš„yamlæ–‡ä»¶
    </p>
    <pre><code class="hljs">kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: jenkins-k8s-pvc
  namespace: jenkins-k8s
spec:
  resources:
    requests:
      storage: 10Gi
  accessModes:
  - ReadWriteMany</code></pre>
    <p>
     åˆ›å»ºPVC
    </p>
    <pre><code class="hljs">kubectl apply -f  pvc.yaml</code></pre>
    <p>
     <span style="display:none">
     </span>
     <img alt="" height="387" src="https://i-blog.csdnimg.cn/direct/3a85da94cb82473cb41b69c821bfafd5.png" width="1077">
      <span style="display:none">
      </span>
     </img>
    </p>
    <h3 id="2%E3%80%81%E5%87%86%E5%A4%87%E8%B4%A6%E5%8F%B7" name="2%E3%80%81%E5%87%86%E5%A4%87%E8%B4%A6%E5%8F%B7">
     2ã€å‡†å¤‡è´¦å·
    </h3>
    <p>
     åˆ›å»ºsaè´¦å·
    </p>
    <pre><code class="hljs">kubectl create sa jenkins-k8s-sa -n jenkins-k8s</code></pre>
    <p>
     è¿›è¡ŒRBACæˆæƒ
    </p>
    <pre><code class="hljs">kubectl create clusterrolebinding jenkins-k8s-sa-cluster -n jenkins-k8s  --clusterrole=cluster-admin --serviceaccount=jenkins-k8s:jenkins-k8s-sa</code></pre>
    <h3 id="3%E3%80%81%E9%83%A8%E7%BD%B2Jenkins" name="3%E3%80%81%E9%83%A8%E7%BD%B2Jenkins">
     3ã€éƒ¨ç½²Jenkins
    </h3>
    <p>
     å‡†å¤‡yamlæ–‡ä»¶
    </p>
    <pre><code class="hljs">kind: Deployment
apiVersion: apps/v1
metadata:
  name: jenkins
  namespace: jenkins-k8s
spec:
  replicas: 1
  selector:
    matchLabels:
      app: jenkins
  template:
    metadata:
      labels:
        app: jenkins
    spec:
      serviceAccount: jenkins-k8s-sa
      containers:
      - name: jenkins
        image:  jenkins/jenkins:2.410
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 8080
          name: web
          protocol: TCP
        - containerPort: 50000
          name: agent
          protocol: TCP
        resources:
          limits:
            cpu: 2000m
            memory: 2Gi
          requests:
            cpu: 500m
            memory: 512Mi
        livenessProbe:
          httpGet:
            path: /login
            port: 8080
          initialDelaySeconds: 60
          timeoutSeconds: 5
          failureThreshold: 12
        readinessProbe:
          httpGet:
            path: /login
            port: 8080
          initialDelaySeconds: 60
          timeoutSeconds: 5
          failureThreshold: 12
        volumeMounts:
        - name: jenkins-volume
          subPath: jenkins-home
          mountPath: /var/jenkins_home
      volumes:
      - name: jenkins-volume
        persistentVolumeClaim:
          claimName: jenkins-k8s-pvc</code></pre>
    <p>
     éƒ¨ç½²Jenkins
    </p>
    <pre><code class="hljs">kubectl apply -f jenkins-deployment.yaml</code></pre>
    <h3 id="4%E3%80%81%E5%88%9B%E5%BB%BAService" name="4%E3%80%81%E5%88%9B%E5%BB%BAService">
     4ã€åˆ›å»ºService
    </h3>
    <p>
     éƒ¨ç½²æˆåŠŸåï¼Œåˆ›å»ºä¸€ä¸ªserviceï¼Œä»¥ä¾›å¤–éƒ¨è®¿é—®
    </p>
    <p>
     ç¼–å†™yamlæ–‡ä»¶
    </p>
    <pre><code class="hljs">apiVersion: v1
kind: Service
metadata:
  name: jenkins-service
  namespace: jenkins-k8s
  labels:
    app: jenkins
spec:
  selector:
    app: jenkins
  type: NodePort
  ports:
  - name: web
    port: 8080
    targetPort: web
    nodePort: 30089
  - name: agent
    port: 50000
    targetPort: agent</code></pre>
    <p>
     åˆ›å»ºservice
    </p>
    <pre><code class="hljs">kubectl apply -f  service.yaml</code></pre>
    <h3 id="5%E3%80%81%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95" name="5%E3%80%81%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95">
     5ã€è®¿é—®æµ‹è¯•
    </h3>
    <p>
     æµè§ˆå™¨è¾“å…¥workerèŠ‚ç‚¹çš„IP+30089ç«¯å£ï¼Œå¦‚æœæ˜¾ç¤ºä¸‹é¢çš„é¡µé¢ï¼Œè¯æ˜éƒ¨ç½²æˆåŠŸ
    </p>
    <p>
     <span style="display:none">
     </span>
     <img alt="" height="1539" src="https://i-blog.csdnimg.cn/direct/08646395ff9043718dcebb22a8136faa.png" width="2571">
      <span style="display:none">
      </span>
     </img>
    </p>
    <blockquote>
     <p>
      ğŸ’•ğŸ’•ğŸ’•æ¯ä¸€æ¬¡çš„åˆ†äº«éƒ½æ˜¯ä¸€æ¬¡æˆé•¿çš„æ—…ç¨‹ï¼Œæ„Ÿè°¢æ‚¨çš„é™ªä¼´å’Œå…³æ³¨ã€‚å¸Œæœ›è¿™äº›å…³äºDockerçš„æ–‡ç« èƒ½é™ªä¼´æ‚¨èµ°è¿‡æŠ€æœ¯çš„ä¸€æ®µæ—…ç¨‹ï¼Œå…±åŒè§è¯æˆé•¿å’Œè¿›æ­¥ï¼ğŸ˜ºğŸ˜ºğŸ˜º
     </p>
     <p>
     </p>
     <p>
      ğŸ§¨ğŸ§¨ğŸ§¨è®©æˆ‘ä»¬ä¸€èµ·åœ¨æŠ€æœ¯çš„æµ·æ´‹ä¸­æ¢ç´¢å‰è¡Œï¼Œå…±åŒä¹¦å†™ç¾å¥½çš„æœªæ¥ï¼ï¼ï¼
     </p>
    </blockquote>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35333236393635302f:61727469636c652f64657461696c732f313436303630343935" class_="artid" style="display:none">
 </p>
</div>


