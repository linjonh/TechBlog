---
layout: post
title: "十七从0开始卷出一个新项目之瑞萨RZN2L定时器GPTDMA生成PWM的运动控制"
date: 2025-03-06 20:43:31 +0800
description: "rzn2l具备实现运动控制的重要资源，可实现1Mhz的效果例程仅提供GPT+DMA的使用。"
keywords: "十七、从0开始卷出一个新项目之瑞萨RZN2L定时器(GPT)+DMA生成PWM的运动控制"
categories: ['从0开始卷出一个新项目之瑞萨Rzn2L']
tags: ['脉冲型运动控制', '瑞萨Rzn2L', 'Gpt', 'Ethercat']
artid: "146079867"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146079867
    alt: "十七从0开始卷出一个新项目之瑞萨RZN2L定时器GPTDMA生成PWM的运动控制"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146079867
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146079867
cover: https://bing.ee123.net/img/rand?artid=146079867
image: https://bing.ee123.net/img/rand?artid=146079867
img: https://bing.ee123.net/img/rand?artid=146079867
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     十七、从0开始卷出一个新项目之瑞萨RZN2L定时器(GPT)+DMA生成PWM的运动控制
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、概述
    </h2>
    <ul>
     <li>
      <a href="https://mp.weixin.qq.com/s?__biz=MzkxNDQyMTU4Mg==&amp;mid=2247486162&amp;idx=1&amp;sn=0320f808fa81f87d0490db2b58b2b31e&amp;scene=21#wechat_redirect" rel="nofollow" title="嵌入式科普(34)通过对比看透DMA的本质">
       嵌入式科普(34)通过对比看透DMA的本质
      </a>
     </li>
     <li>
      <p>
       分享瑞萨RZN2L使用DMA生成PWM的运动控制的例程源码
      </p>
     </li>
     <li>
      <p>
       rzn2l必要的外设资源：
      </p>
      <ul>
       <li>
        <p>
         rzn2l拥有32-bit timer General PWM Timer (GPT) with 18 channels
        </p>
       </li>
       <li>
        <p>
         CPU、GPT最高频率400Mhz
        </p>
       </li>
       <li>
        <p>
         DMAC0 and DMAC1 8 channels + 8 channels
        </p>
       </li>
       <li>
        <p>
         还有cmt、cmtw、mtu3等其他定时器
        </p>
       </li>
       <li>
        <p>
         ESC控制器
        </p>
        <p>
        </p>
        <p class="img-center">
         <img alt="图片" height="564" src="https://i-blog.csdnimg.cn/img_convert/9d42ed7dd1bde75396c2aecd557f6b01.png" width="631"/>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <h2>
     二、工程源码
    </h2>
    <pre><code>__asm volatile ("cpsie i");

    g_timer0.p_api-&gt;open(g_timer0.p_ctrl, g_timer0.p_cfg);
    g_timer0.p_api-&gt;enable(g_timer0.p_ctrl);
    g_timer0.p_api-&gt;start(g_timer0.p_ctrl);

    g_transfer0.p_api-&gt;open(g_transfer0.p_ctrl, g_transfer0.p_cfg);

    g_transfer0_ctrl.p_cfg-&gt;p_info-&gt;p_src = (void*)&amp;buf_left[0];
    g_transfer0_ctrl.p_cfg-&gt;p_info-&gt;p_dest = (void*)&amp;g_timer0_ctrl.p_reg-&gt;GTPBR;//(void*)&amp;buf_des[0];//(void*)&amp;g_timer0_ctrl.p_reg-&gt;GTPBR;
    g_transfer0_ctrl.p_cfg-&gt;p_info-&gt;length = 40;
    g_transfer0.p_api-&gt;reconfigure(g_transfer0.p_ctrl, g_transfer0_ctrl.p_cfg-&gt;p_info);

    g_transfer0.p_api-&gt;enable(g_transfer0.p_ctrl);
    g_transfer0.p_api-&gt;softwareStart(g_transfer0.p_ctrl, (transfer_start_mode_t)0);
</code></pre>
    <h2>
     三、测试效果
    </h2>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="162" src="https://i-blog.csdnimg.cn/img_convert/e06b74951bd1c42869e4badb5771ae9a.png" width="865"/>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="331" src="https://i-blog.csdnimg.cn/img_convert/9e55f63f1a2b2e6a7dac6f6efa425743.jpeg" width="956"/>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="404" src="https://i-blog.csdnimg.cn/img_convert/070317e1cbabc62dace4b64edf0e2650.jpeg" width="1078"/>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="482" src="https://i-blog.csdnimg.cn/img_convert/b46a16b59f8ef712da5257f36a386ad2.png" width="1080"/>
    </p>
    <h2>
     四、总结
    </h2>
    <ul>
     <li>
      <p>
       rzn2l具备实现运动控制的重要资源，可实现1Mhz的效果
      </p>
     </li>
     <li>
      <p>
       例程仅提供GPT+DMA的使用
      </p>
     </li>
    </ul>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="294" src="https://i-blog.csdnimg.cn/img_convert/050fda2e7dd3e8288252a1ead44c52ee.jpeg" width="1043"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f636c3233343538333734352f:61727469636c652f64657461696c732f313436303739383637" class_="artid" style="display:none">
 </p>
</div>


