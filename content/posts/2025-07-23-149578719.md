---
layout: post
title: "网络基础17IRF实验H3C设备"
date: 2025-07-23T19:44:03+0800
description: "（本端奇数端口 → 对端偶数端口，本端奇数端口 → 对端偶数端口，如：可以irf-port 1/2连irf-port2/1，不能irf-port 1/1连irf-port 2/1），同端口组内绑定多链路需启用聚合。物理端口需交叉连接（本端奇数端口 → 对端偶数端口，如：可以irf-port 1/2连irf-port2/1，不能irf-port 1/1连irf-port 2/1）。IRF-Port 1/1 (绑定1/0/4) ↔ IRF-Port 2/1 (绑定2/0/5)"
keywords: "清除irf 配置 h3c"
categories: ['未分类']
tags: ['Irf']
artid: "149578719"
arturl: "https://blog.csdn.net/2301_76981288/article/details/149578719"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=149578719
    alt: "网络基础17IRF实验H3C设备"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=149578719
featuredImagePreview: https://bing.ee123.net/img/rand?artid=149578719
cover: https://bing.ee123.net/img/rand?artid=149578719
image: https://bing.ee123.net/img/rand?artid=149578719
img: https://bing.ee123.net/img/rand?artid=149578719
---



# 网络基础17：IRF实验（H3C设备）

![](https://i-operation.csdnimg.cn/images/cf31225e169b4512917b2e77694eb0a2.png)H3C设备IRF实验配置与验证

#### 一、实验目标

      将两台H3C交换机通过IRF技术堆叠成逻辑单一设备

#### 二、配置分步拆解

1. **修改成员编号**

   ```

   LSWE2:
   <H3C>system-view
   [H3C]irf member 1 renumber 2  # 将设备物理成员号从1改为2,LSW1不用改
   [H3C]quit
   <H3C>reboot                   # 重启生效新成员号
   ```

   **作用**：避免与成员1的默认编号冲突，重启后设备以`成员2`身份运行。
2. **关闭IRF物理端口**

   ```

   LSW1:
   [H3C]interface GigabitEthernet 1/0/4   //可以同时绑两个（多个）端口，我只绑了一个
   [H3C-If-range]shutdown # 关闭端口防止配置过程中的环路

   LSW2:
   [H3C]interface GigabitEthernet 2/0/5  
   [H3C-If-range]shutdown        # 关闭端口防止配置过程中的环路
   ```

   **注意**：端口命名格式为`成员号/槽位/端口`（`2/0/5`表示成员2的5端口）。
3. **绑定物理端口到IRF逻辑端口**

   ```

   LSW1:
   [H3C]irf-port 1/2 
   [H3C-irf-port2/1]port group interface GigabitEthernet 1/0/4 # 绑定物理端口

   LSW2:
   [H3C]irf-port 2/1                   # 创建IRF逻辑端口2/1（2号成员第一个IRF端口）
   [H3C-irf-port2/1]port group interface GigabitEthernet 2/0/5  # 绑定物理端口

   ```

   **关键点**：

   * `port group` 启用链路聚合提升带宽和可靠性（需确保对端设备相同配置）。
   * 物理端口需交叉连接（本端奇数端口 → 对端偶数端口，如：可以irf-port 1/2连irf-port2/1，不能irf-port 1/1连irf-port 2/1）。
4. **启用端口并保存配置**

   ```

   LSW1:
   [H3C]interface GigabitEthernet 1/0/4 
   [H3C-If-range]undo shutdown # 重新启用端口 
   [H3C-If-range]quit 
   [H3C]save # 保存配置（防止重启丢失） 
   [H3C]irf-port-configuration active # 激活IRF配置

   [H3C]interface GigabitEthernet 2/0/5
   [H3C-If-range]undo shutdown    # 重新启用端口
   [H3C-If-range]quit
   [H3C]save                       # 保存配置（防止重启丢失）
   [H3C]irf-port-configuration active  # 激活IRF配置
   ```

---

#### **完整连接示意图**

```

成员1 (原编号1)                 成员2 (新编号2)
IRF-Port 1/1 (绑定1/0/4) ↔ IRF-Port 2/1 (绑定2/0/5)

```

---

#### **注意事项**

1. **物理连接**

   * 使用光纤或高速线缆直连，确保端口速率匹配。
   * **必须交叉连接**（本端奇数端口 → 对端偶数端口，本端奇数端口 → 对端偶数端口，如：可以irf-port 1/2连irf-port2/1，不能irf-port 1/1连irf-port 2/1），同端口组内绑定多链路需启用聚合。
2. **配置顺序**

   * 成员1和成员2需**独立配置**（先分别修改成员编号并重启）。
   * 激活命令`irf-port-configuration active`需在**双机配置完成后同时执行**。
3. **验证命令**

   ```

   display irf topology  # 查看IRF拓扑状态
   display irf configuration  # 检查IRF端口绑定
   display link-aggregation verbose  # 验证聚合组状态
   display irf brief # 验证主备关系
   ```

**4. 验证**

```

       ![](https://i-blog.csdnimg.cn/direct/4ad64f566eb1490ca8d7d827b98c1d50.png)
```



