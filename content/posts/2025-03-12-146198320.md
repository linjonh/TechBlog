---
layout: post
title: "字节跳动-建筑物组合滑动窗口溢出问题"
date: 2025-03-12 12:23:35 +0800
description: "滑动窗口以及溢出问题"
keywords: "字节跳动 —— 建筑物组合(滑动窗口+溢出问题)"
categories: ['未分类']
tags: ['算法', '数据结构', 'Java']
artid: "146198320"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146198320
    alt: "字节跳动-建筑物组合滑动窗口溢出问题"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146198320
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146198320
cover: https://bing.ee123.net/img/rand?artid=146198320
image: https://bing.ee123.net/img/rand?artid=146198320
img: https://bing.ee123.net/img/rand?artid=146198320
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     字节跳动 —— 建筑物组合(滑动窗口+溢出问题)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <span style="color:#4da8ee">
      <strong>
       原题描述：
      </strong>
     </span>
    </p>
    <p>
     <img alt="" height="801" src="https://i-blog.csdnimg.cn/direct/e4bf73f0575f492f9546f4a5962ea483.png" width="1573"/>
    </p>
    <p>
     <img alt="" height="318" src="https://i-blog.csdnimg.cn/direct/36003cc9ee704ad58a13e61b7d818203.png" width="1286">
      <span style="color:#4da8ee">
       <strong>
        题目精炼
       </strong>
       ：
      </span>
     </img>
    </p>
    <p>
     给定N个建筑物的位置和一个距离D，选取3个建筑物作为埋伏点，找出所有可能的建筑物组合，使得每组中的建筑物之间的最大距离不超过D。最后，输出不同埋伏方案的数量并对99997867取模。
    </p>
    <p>
     <span style="color:#4da8ee">
      <strong>
       识别问题
      </strong>
      ：
     </span>
    </p>
    <p>
     由于此题的建筑物是一个单调递增的数组
     <span style="color:#fe2c24">
      （单调性）
     </span>
     ，并且使用
     <span style="color:#fe2c24">
      “同向双指针”
     </span>
     来维护一段区间，保证（
     <span style="color:#fe2c24">
      判断条件
     </span>
     ）：
    </p>
    <p>
     1）right - left +1 &gt;= 3
     <br/>
     2）buildings[right] - buildings[left] &lt;= D
     <br/>
     3）right &lt; buildings.length 或者 left &lt; buildings.lengrh - 2
    </p>
    <p>
     因此，我们可以使用“滑动窗口”来求解。
    </p>
    <p>
     <span style="color:#4da8ee">
      <strong>
       滑动窗口解题思路：
      </strong>
     </span>
    </p>
    <p>
     <span style="color:#fe2c24">
      1）左右指针初始化
     </span>
    </p>
    <pre><code class="language-java">int left = 0;
int right = 2;</code></pre>
    <p>
     <span style="color:#fe2c24">
      2）满足条件进窗口
     </span>
    </p>
    <p>
     注意，要先判断right是否小于数组长度，否则会越界
    </p>
    <pre><code class="language-java">while(right &lt; buildings.length &amp;&amp; buildings[right] - buildings[left] &lt;= D){
    right++;
}</code></pre>
    <p>
     <span style="color:#fe2c24">
      3）更新结果
     </span>
    </p>
    <p>
     此处涉及到求解组合数量问题，为了防止一段区间内，子集重复的问题，每次以buildings[left]为基准，在剩余的buildings中选取两个进行组合，公式为
    </p>
    <p style="text-align:center">
     <img alt="C(n, 2) = \binom{n}{2} = \frac{n!}{2!(n-2)!} = \frac{n(n-1)}{2}" class="mathcode" src="https://latex.csdn.net/eq?C%28n%2C%202%29%20%3D%20%5Cbinom%7Bn%7D%7B2%7D%20%3D%20%5Cfrac%7Bn%21%7D%7B2%21%28n-2%29%21%7D%20%3D%20%5Cfrac%7Bn%28n-1%29%7D%7B2%7D"/>
    </p>
    <p>
     但是，
     <span style="color:#4da8ee">
      此处涉及到两个很大的整数相乘，会出现溢出的问题，因此我们可以使用更大的整数类型，将n*(n-1)转换为long类型，并对每次累加后的结果%99997867 防止溢出。
     </span>
    </p>
    <pre><code class="language-java">int n = right - left - 1;
long p =((long)n *(n-1))&gt;&gt;1;
count =(count + p)%99997867;</code></pre>
    <p>
     当因为right&gt;=buildings.length而跳出循环时，说明此时没有更大的值了，收集完结果后要对right--，使得right始终停留在最右边界，从而可以继续判断，等待left缩小窗口
    </p>
    <pre><code class="language-java">if(right &gt;= buildings.length){
    right--;
}</code></pre>
    <p>
     <span style="color:#fe2c24">
      4）出窗口
     </span>
    </p>
    <pre><code class="language-java">left++;</code></pre>
    <p>
     其中，
     <span style="background-color:#f9eda6">
      进窗口，更新结果，出窗口是一个不断循环的过程
     </span>
     ，因此，最终代码为：
    </p>
    <pre><code class="language-java">import java.util.Scanner;
public class ByteDance_BuildingCombinations {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        int N = in.nextInt();
        int D = in.nextInt();
        int[] buildings = new int[N];
        for (int i = 0; i &lt; N; i++) {
            buildings[i] = in.nextInt();
        }
        long count = slide(buildings,D);

        System.out.println(count);
    }

    public static long slide(int[] buildings, int D){
        long count = 0;
        int left = 0;
        int right = 2;

        while(left &lt; buildings.length - 2){
            while(right &lt; buildings.length &amp;&amp; buildings[right] - buildings[left] &lt;= D){
                right++;
            }

            int n = right - left - 1;
            long p =((long)n *(n-1))&gt;&gt;1;
            count =(count + p)%99997867;

            if(right &gt;= buildings.length){
                right--;
            }
            left++;
        }
        return count;
    }
}</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38303234333332312f:61727469636c652f64657461696c732f313436313938333230" class_="artid" style="display:none">
 </p>
</div>


