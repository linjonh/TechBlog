---
layout: post
title: "java-jsonobject-转换_java-将JSONObject转换为JSONArray"
date: 2024-11-27 13:57:05 +0800
description: "这篇博客探讨了如何在Java中将从API获取的JSONObject转换为JSONArray。代码示例"
keywords: "java+jsonobject写入jsonarray"
categories: ['未分类']
tags: ['转换', 'Jsonobject', 'Java']
artid: "114427835"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=114427835
  alt: "java-jsonobject-转换_java-将JSONObject转换为JSONArray"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=114427835
featuredImagePreview: https://bing.ee123.net/img/rand?artid=114427835
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     java jsonobject 转换_java – 将JSONObject转换为JSONArray
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div style="font-size:16px;">
     <p>
      我目前正在学习一些使用JAVA的
     </p>
     <p>
      android编程.我的老师分享了这段代码,它将使用API​​,获取其
     </p>
     <p>
      JSON文件,并将其转换为
     </p>
     <p>
      JSONArray文件.然后,他将遍历该JSONArray并将它们放入ArrayList,然后将它们显示在一个活动上.
     </p>
     <p>
      问题是我正在使用的API会返回一个JSONObject文件,而我不知道如何正确地将其转换为JSONArray.
     </p>
     <p>
      import android.util.Log;
     </p>
     <p>
      import org.json.JSONArray;
     </p>
     <p>
      import org.json.JSONException;
     </p>
     <p>
      import org.json.JSONObject;
     </p>
     <p>
      import java.io.BufferedInputStream;
     </p>
     <p>
      import java.io.BufferedReader;
     </p>
     <p>
      import java.io.DataOutputStream;
     </p>
     <p>
      import java.io.IOException;
     </p>
     <p>
      import java.io.InputStream;
     </p>
     <p>
      import java.io.InputStreamReader;
     </p>
     <p>
      import java.io.UnsupportedEncodingException;
     </p>
     <p>
      import java.net.HttpURLConnection;
     </p>
     <p>
      import java.net.URL;
     </p>
     <p>
      import java.net.URLEncoder;
     </p>
     <p>
      import java.util.HashMap;
     </p>
     <p>
      public class JSONParser {
      <!-- -->
     </p>
     <p>
      String charset = "UTF-8";
     </p>
     <p>
      HttpURLConnection conn;
     </p>
     <p>
      DataOutputStream wr;
     </p>
     <p>
      StringBuilder result;
     </p>
     <p>
      URL urlObj;
     </p>
     <p>
      JSONArray jObj = null;
     </p>
     <p>
      StringBuilder sbParams;
     </p>
     <p>
      String paramsString;
     </p>
     <p>
      public JSONArray makeHttpRequest(String url, String method) {
      <!-- -->
     </p>
     <p>
      sbParams = new StringBuilder();
     </p>
     <p>
      if(method.equals("GET")){
      <!-- -->
     </p>
     <p>
      // request method is GET
     </p>
     <p>
      if (sbParams.length() != 0) {
      <!-- -->
     </p>
     <p>
      url += "?" + sbParams.toString();
     </p>
     <p>
      }
     </p>
     <p>
      try {
      <!-- -->
     </p>
     <p>
      urlObj = new URL(url);
     </p>
     <p>
      conn = (HttpURLConnection) urlObj.openConnection();
     </p>
     <p>
      conn.setDoOutput(false);
     </p>
     <p>
      conn.setRequestMethod("GET");
     </p>
     <p>
      conn.setRequestProperty("AccountKey", "pVU56+0hI26DNLeTzlU/Dw==");
     </p>
     <p>
      conn.setRequestProperty("UniqueUserId", "33c07f2f-b4c0-4151-acd3-e0829b303d2c");
     </p>
     <p>
      conn.setRequestProperty("accept", "application/json");
     </p>
     <p>
      conn.setConnectTimeout(15000);
     </p>
     <p>
      conn.connect();
     </p>
     <p>
      } catch (IOException e) {
      <!-- -->
     </p>
     <p>
      e.printStackTrace();
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      try {
      <!-- -->
     </p>
     <p>
      //Receive the response from the server
     </p>
     <p>
      InputStream in = new BufferedInputStream(conn.getInputStream());
     </p>
     <p>
      BufferedReader reader = new BufferedReader(new InputStreamReader(in));
     </p>
     <p>
      result = new StringBuilder();
     </p>
     <p>
      String line;
     </p>
     <p>
      while ((line = reader.readLine()) != null) {
      <!-- -->
     </p>
     <p>
      result.append(line);
     </p>
     <p>
      }
     </p>
     <p>
      Log.d("JSON Parser", "result: " + result.toString());
     </p>
     <p>
      } catch (IOException e) {
      <!-- -->
     </p>
     <p>
      // e.printStackTrace();
     </p>
     <p>
      }
     </p>
     <p>
      conn.disconnect();
     </p>
     <p>
      // try parse the string to a JSON object
     </p>
     <p>
      try {
      <!-- -->
     </p>
     <p>
      jObj = new JSONArray(result.toString());
     </p>
     <p>
      } catch (JSONException e) {
      <!-- -->
     </p>
     <p>
      Log.e("JSON Parser", "Error parsing data " + e.toString());
     </p>
     <p>
      }
     </p>
     <p>
      // return JSON Object
     </p>
     <p>
      return jObj;
     </p>
     <p>
      }
     </p>
     <p>
      }
     </p>
     <p>
      API URL及其自定义标头：
     </p>
     <p>
      URL: http://datamall2.mytransport.sg/ltaodataservice/TaxiAvailability
     </p>
     <p>
      包头中
     </p>
     <p>
      AccountKey: pVU56+0hI26DNLeTzlU/Dw==
     </p>
     <p>
      UniqueUserId: 33c07f2f-b4c0-4151-acd3-e0829b303d2c
     </p>
     <p>
      accept: application/json
     </p>
     <p>
      EDIT2：我使用它来获取带有自定义标头的原始数据.
     </p>
     <p>
      http://requestmaker.com/
     </p>
     <p>
      编辑：这是我得到的JSON.
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "odata.metadata": "http://datamall2.mytransport.sg/ltaodataservice/$metadata#TaxiAvailability",
     </p>
     <p>
      "value": [
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "Longitude": 103.84009,
     </p>
     <p>
      "Latitude": 1.35989
     </p>
     <p>
      },
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "Longitude": 103.84679,
     </p>
     <p>
      "Latitude": 1.35544
     </p>
     <p>
      },
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      "Longitude": 103.76928,
     </p>
     <p>
      "Latitude": 1.4419
     </p>
     <p>
      }
     </p>
     <p>
      ....
     </p>
     <p>
      ]
     </p>
     <p>
      }
     </p>
    </div>
   </div>
  </div>
  <div id="recommendDown">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33303531343030332f:61727469636c652f64657461696c732f313134343237383335" class_="artid" style="display:none">
 </p>
</div>
