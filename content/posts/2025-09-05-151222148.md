---
layout: post
title: "c工程如何提供http服务接口"
date: 2025-09-05T20:00:00+0800
description: "依赖：C++14 及以上；Boost（可选，仅 header）；OpenSSL（可选）。方案 B：cpp-httplib（Header-only，零依赖）特点：单头文件，仅依赖系统 libc；适合嵌入式/小工具。方案 A：Crow（Header-only，最简单）即可看到 JSON 返回。在 C++ 工程里给类似。下面是 2 种简单的方案。"
keywords: "c++工程如何提供http服务接口"
categories: ['百问', 'C']
tags: ['Http', 'C']
artid: "151222148"
arturl: "https://blog.csdn.net/melonbo/article/details/151222148"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151222148
    alt: "c工程如何提供http服务接口"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151222148
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151222148
cover: https://bing.ee123.net/img/rand?artid=151222148
image: https://bing.ee123.net/img/rand?artid=151222148
img: https://bing.ee123.net/img/rand?artid=151222148
---



# c++工程如何提供http服务接口



在 C++ 工程里给类似 `/index/api/` 的服务，基本步骤如下：

1. 选一个HTTP服务框架；
2. 起一条监听线程（或线程池）；
3. 把路径-处理函数注册进去；

下面是 2 种简单的方案。

---

方案 A：Crow（Header-only，最简单）

依赖：C++14 及以上；Boost（可选，仅 header）；OpenSSL（可选）。

```bash
# 1. 拉源码
git clone https://github.com/CrowCpp/Crow.git
cd Crow
# 2. 写 main.cpp

```

```cpp
#include "crow.h"

int main() {
    crow::SimpleApp app;

    CROW_ROUTE(app, "/index/api/")
    ([]() {
        crow::json::wvalue x;
        x["code"] = 200;
        x["msg"]  = "hello from /index/api/";
        return x;
    });

    // 支持 POST/PUT/DELETE 同理
    CROW_ROUTE(app, "/index/api/<int>")
    ([](int id){
        return crow::response(200, "got id=" + std::to_string(id));
    });

    app.port(8080).multithreaded().run();
}

```

```bash
g++ -std=c++17 main.cpp -lpthread -o server
./server

```

浏览器 `http://localhost:8080/index/api/` 即可看到 JSON 返回。

---

方案 B：cpp-httplib（Header-only，零依赖）

特点：单头文件，仅依赖系统 libc；适合嵌入式/小工具。

```cpp
#include "httplib.h"
using namespace httplib;

int main() {
    Server svr;

    svr.Get("/index/api/", [](const Request&, Response& res){
        res.set_content(R"({"code":200,"msg":"httplib ok"})", "application/json");
    });

    svr.listen("0.0.0.0", 8080);
}

```

编译同上，`g++ -std=c++17 httplib.cpp -lpthread -o server`。



