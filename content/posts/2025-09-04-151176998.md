---
layout: post
title: "Grafana-å¤šæŒ‡æ ‡ç›¸ä¹˜"
date: 2025-09-04T10:29:21+0800
description: "PromQLå¤šæŒ‡æ ‡ç›¸ä¹˜çš„å…³é”®åœ¨äºå‘é‡åŒ¹é…ã€‚å½“0.045 * h9_daily_income{coin=&amp;quot;nock&amp;quot;} * h9_pool_price_cny{coin=&amp;quot;nock&amp;quot;}æ˜¾ç¤º&amp;quot;No data&amp;quot;æ—¶ï¼Œé—®é¢˜å‡ºåœ¨æ ‡ç­¾ä¸åŒ¹é…ï¼ˆå¦‚instanceã€jobï¼‰ã€‚æœ€ä½³è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨on(coin)æ˜ç¡®æŒ‡å®šåŒ¹é…æ ‡ç­¾ï¼š0.045 * h9_daily_income{coin=&amp;quot;nock&amp;quot;} * on(coin) h9_pool_price"
keywords: "Grafana å¤šæŒ‡æ ‡ç›¸ä¹˜"
categories: ['Grafana']
tags: ['æ•°æ®å¯è§†åŒ–', 'å‘é‡åŒ¹é…', 'Promql', 'Grafana']
artid: "151176998"
arturl: "https://blog.csdn.net/u010953692/article/details/151176998"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151176998
    alt: "Grafana-å¤šæŒ‡æ ‡ç›¸ä¹˜"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151176998
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151176998
cover: https://bing.ee123.net/img/rand?artid=151176998
image: https://bing.ee123.net/img/rand?artid=151176998
img: https://bing.ee123.net/img/rand?artid=151176998
---



# Grafana å¤šæŒ‡æ ‡ç›¸ä¹˜



## PromQLä¸­å¤šæŒ‡æ ‡ç›¸ä¹˜

PromQLè¡¨è¾¾å¼ï¼š

```shell
0.045 * h9_daily_income{coin="nock"} * h9_pool_price_cny{coin="nock"}

```

### ğŸ“ˆ åŸºç¡€ï¼šå•æŒ‡æ ‡è¿ç®—

#### å¸¸æ•°ä¸æŒ‡æ ‡ç›¸ä¹˜

åœ¨PromQLä¸­ï¼Œå¸¸æ•°ä¸æŒ‡æ ‡çš„ä¹˜æ³•æ˜¯æœ€ç®€å•çš„è¿ç®—ï¼š

```shell
# âœ… ç®€å•æœ‰æ•ˆ
0.045 * h9_daily_income{coin="nock"}

```

### âš ï¸ æŒ‘æˆ˜ï¼šå¤šæŒ‡æ ‡ç›¸ä¹˜

#### åˆæ¬¡å°è¯•å¤±è´¥

```shell
# âŒ å¯èƒ½æ˜¾ç¤º "No data"
0.045 * h9_daily_income{coin="nock"} * h9_pool_price_cny{coin="nock"}

```

ä¸‰é‡ä¹˜æ³• âŒ æ˜¾ç¤ºï¼šâ€œNo dataâ€

#### é—®é¢˜æ ¹æº

é—®é¢˜å‡ºç°åœ¨**å‘é‡åŒ¹é…**ä¸Šã€‚PromQLè¦æ±‚å‚ä¸è¿ç®—çš„æ—¶é—´åºåˆ—å¿…é¡»èƒ½å¤Ÿæ­£ç¡®åŒ¹é…ï¼Œ  
**é—®é¢˜åˆ†æ**ï¼š

* âœ… `coin` æ ‡ç­¾åŒ¹é…
* âŒ `instance` æ ‡ç­¾ä¸åŒ¹é…
* âŒ `job` æ ‡ç­¾ä¸åŒ¹é…  
  ç»“æœï¼šé»˜è®¤åŒ¹é…å¤±è´¥ï¼Œè¿”å›ç©ºç»“æœã€‚

#### æ–¹æ¡ˆ1ï¼šon() æ˜ç¡®åŒ¹é…æ ‡ç­¾ â­â­â­â­â­

**æœ€æ¨èçš„è§£å†³æ–¹æ¡ˆ**ï¼š

```promql
0.045 * h9_daily_income{coin="nock"} * on(coin) h9_pool_price_cny{coin="nock"}

```

**å·¥ä½œåŸç†**ï¼š

* `on(coin)` å‘Šè¯‰PromQLåªåŸºäº `coin` æ ‡ç­¾è¿›è¡ŒåŒ¹é…
* å¿½ç•¥å…¶ä»–æ‰€æœ‰æ ‡ç­¾çš„å·®å¼‚
* ç¡®ä¿å…·æœ‰ç›¸åŒ `coin` å€¼çš„åºåˆ—èƒ½å¤Ÿå‚ä¸è¿ç®—



