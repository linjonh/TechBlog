---
layout: post
title: "Linux-è™šæ‹Ÿè¿›ç¨‹åœ°å€ç©ºé—´"
date: 2025-09-07T21:38:26+0800
description: "é¡µè¡¨æ˜¯è™šæ‹Ÿå†…å­˜ç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ˜¯è¿æ¥è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„â€œåœ°å›¾â€æˆ–â€œç¿»è¯‘å®˜â€ï¼›æ˜¯Kernelä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤çš„ä¸€ä¸ªæ˜ å°„è¡¨ï¼Œå®ƒè®°å½•äº†è¯¥è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜é¡µå¯¹åº”åˆ°ç‰©ç†å†…å­˜å¸§çš„æ˜ å°„å…³ç³»ç®€å•æ¥è¯´ï¼Œå®ƒçš„å·¥ä½œå°±æ˜¯å›ç­”è¿™ä¸ªé—®é¢˜ï¼šâ€œè¿™ä¸ªè¿›ç¨‹çœ‹åˆ°çš„è™šæ‹Ÿåœ°å€ Xï¼Œå®é™…ä¸Šåœ¨ç‰©ç†å†…å­˜çš„å“ªä¸ªåœ°æ–¹ï¼ŸOS ä¼šå°†è¿›ç¨‹ç‰©ç†åœ°å€éšè—èµ·æ¥ï¼Œæˆ‘ä»¬åªèƒ½è§‚æµ‹åˆ°è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ã€‚"
keywords: "Linux â€”â€” è™šæ‹Ÿè¿›ç¨‹åœ°å€ç©ºé—´"
categories: ['æœªåˆ†ç±»']
tags: ['è¿ç»´', 'è™šæ‹Ÿè¿›ç¨‹åœ°å€ç©ºé—´', 'æœåŠ¡å™¨', 'Linux', 'C']
artid: "151295162"
arturl: "https://blog.csdn.net/2401_87692970/article/details/151295162"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151295162
    alt: "Linux-è™šæ‹Ÿè¿›ç¨‹åœ°å€ç©ºé—´"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151295162
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151295162
cover: https://bing.ee123.net/img/rand?artid=151295162
image: https://bing.ee123.net/img/rand?artid=151295162
img: https://bing.ee123.net/img/rand?artid=151295162
---



# Linux â€”â€” è™šæ‹Ÿè¿›ç¨‹åœ°å€ç©ºé—´

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/fbb63a4c43e048c68e21997cac2d5f34.gif#pic_center)

---

**ğŸä¸ªäººä¸»é¡µï¼š**[å·¥è—¤æ–°ä¸€Â¹](https://blog.csdn.net/2401_87692970?type=lately)

**ğŸ”ç³»åˆ—ä¸“æ ï¼š**[C++é¢å‘å¯¹è±¡ï¼ˆç±»å’Œå¯¹è±¡ç¯‡ï¼‰](https://blog.csdn.net/2401_87692970/category_12916875.html?spm=1001.2014.3001.5482)

ğŸŒŸ**å¿ƒä¸­çš„å¤©ç©ºä¹‹åŸï¼Œç»ˆä¼šç…§äº®æˆ‘å‰æ–¹çš„è·¯**

**ğŸ‰æ¬¢è¿å¤§å®¶ç‚¹èµğŸ‘è¯„è®ºğŸ“æ”¶è—â­æ–‡ç« **

---

## è™šæ‹Ÿè¿›ç¨‹åœ°å€ç©ºé—´

**è™šæ‹Ÿåœ°å€ç©ºé—´** æ˜¯æŒ‡ä¸€ä¸ª **OS**ä¸ºæ¯ä¸ªè¿è¡Œä¸­çš„è¿›ç¨‹ï¼ˆç¨‹åºï¼‰æä¾›çš„**ä¸€ä¸ªæŠ½è±¡çš„ã€ç‹¬ç«‹çš„ã€è¿ç»­çš„é€»è¾‘åœ°å€èŒƒå›´**ã€‚è¿™ä¸ªç©ºé—´æ˜¯ **â€œè™šæ‹Ÿçš„â€**ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ç‰©ç†å†…å­˜ä¸­çœŸçš„æœ‰è¿™ä¹ˆä¸€å¤§å—è¿ç»­çš„åŒºåŸŸï¼Œè€Œæ˜¯é€šè¿‡ç¡¬ä»¶ï¼ˆ`MMU`ï¼Œå†…å­˜ç®¡ç†å•å…ƒï¼‰å’Œ `Kernel` çš„åä½œï¼Œ**å°†è™šæ‹Ÿåœ°å€æ˜ å°„åˆ°åˆ†æ•£çš„ç‰©ç†å†…å­˜é¡µä¸Š**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/513abce911df47b9bc98a500a1cb7d34.png)

---

### ä¸€ã€è™šæ‹Ÿåœ°å€ç©ºé—´ç»å…¸å¸ƒå±€

ä¸€ä¸ªè¿›ç¨‹çš„å…¸å‹å†…å­˜åœ°å€ç©ºé—´å¸ƒå±€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå®ƒè¢«åˆ’åˆ†ä¸ºå¤šä¸ªå…·æœ‰ä¸åŒæƒé™ï¼ˆè¯»ã€å†™ã€æ‰§è¡Œï¼‰çš„æ®µï¼ˆSegmentsï¼‰ï¼š

**ä»é«˜åœ°å€åˆ°ä½åœ°å€ï¼š**

1. **å†…æ ¸ç©ºé—´**ï¼ˆKernel Spaceï¼‰
   * é€šå¸¸ä½äºåœ°å€ç©ºé—´çš„æœ€é«˜å¤„ï¼ˆä¾‹å¦‚ï¼Œåœ¨32ä½Linuxä¸­ï¼Œ0x C000 0000ä»¥ä¸Šï¼‰ã€‚
   * å­˜æ”¾æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä»£ç ã€æ•°æ®å’Œæ•°æ®ç»“æ„ã€‚
   * æ‰€æœ‰è¿›ç¨‹å…±äº«**åŒä¸€ä»½**å†…æ ¸æ˜ å°„ã€‚ä½†è¿™æ®µç©ºé—´å—ä¿æŠ¤ï¼Œç”¨æˆ·æ€è¿›ç¨‹æ— æ³•ç›´æ¥è®¿é—®ï¼Œå¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼ˆSyscallï¼‰è¿›å…¥å†…æ ¸æ€æ‰èƒ½è®¿é—®ã€‚
2. **æ ˆ**ï¼ˆStackï¼‰
   * å‘ä¸‹å¢é•¿ï¼ˆå‘ä½åœ°å€æ–¹å‘ï¼‰ã€‚
   * ç”¨äºå­˜å‚¨**å±€éƒ¨å˜é‡**ã€**å‡½æ•°å‚æ•°**ã€**è¿”å›åœ°å€**ç­‰ã€‚
   * æ¯ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåœ¨æ ˆä¸Šåˆ†é…ä¸€ä¸ªæ–°çš„â€œæ ˆå¸§â€ã€‚
   * å®ƒçš„å¢é•¿æ˜¯è‡ªåŠ¨çš„ï¼Œä½†å¤§å°æœ‰é™ï¼ˆé€šå¸¸é»˜è®¤ä¸ºå‡ MBï¼‰ï¼Œæº¢å‡ºä¼šå¯¼è‡´â€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚
3. **å†…å­˜æ˜ å°„æ®µ**ï¼ˆMemory Mapping Segmentï¼‰
   * ç”¨äºæ˜ å°„æ–‡ä»¶æˆ–åŒ¿åå†…å­˜ã€‚
   * åŠ¨æ€é“¾æ¥åº“ï¼ˆå¦‚ `.so`ã€`.dll` æ–‡ä»¶ï¼‰å°±åŠ è½½åœ¨è¿™é‡Œã€‚
   * ä¹Ÿå¯ä»¥é€šè¿‡ `mmap()` ç³»ç»Ÿè°ƒç”¨åˆ›å»ºï¼Œç”¨äºå¤§å—å†…å­˜çš„åˆ†é…æˆ–è¿›ç¨‹é—´å…±äº«å†…å­˜ã€‚
4. **å †**ï¼ˆHeapï¼‰
   * å‘ä¸Šå¢é•¿ï¼ˆå‘é«˜åœ°å€æ–¹å‘ï¼‰ã€‚
   * ç”¨äº**åŠ¨æ€å†…å­˜åˆ†é…**ã€‚å½“ç¨‹åºå‘˜ä½¿ç”¨ `malloc()`ã€`new` ç­‰ç”³è¯·å†…å­˜æ—¶ï¼Œå†…å­˜å°±ä»è¿™é‡Œåˆ†é…ã€‚
   * å †çš„å¤§å°åªå—é™äºç³»ç»Ÿå¯ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡ï¼Œç®¡ç†ç”±ç¨‹åºå‘˜è´Ÿè´£ï¼ˆåˆ†é…å’Œé‡Šæ”¾ï¼‰ï¼Œ improper management leads to memory leaks.
5. **BSS æ®µ**ï¼ˆ.bssï¼‰
   * å­˜æ”¾**æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡**ã€‚
   * åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œå‰ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†æ­¤æ®µåˆå§‹åŒ–ä¸ºé›¶ã€‚
6. **æ•°æ®æ®µ**ï¼ˆ.dataï¼‰
   * å­˜æ”¾**å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡**ã€‚
7. **ä»£ç æ®µï¼ˆæ–‡æœ¬æ®µï¼‰**ï¼ˆ.textï¼‰
   * å­˜æ”¾ç¨‹åºçš„**æ‰§è¡Œä»£ç **ï¼ˆæœºå™¨æŒ‡ä»¤ï¼‰ã€‚
   * é€šå¸¸æ˜¯åªè¯»å’Œå¯æ‰§è¡Œçš„ï¼Œä»¥é˜²æ­¢ä»£ç è¢«æ„å¤–ä¿®æ”¹ã€‚
8. **ä¿ç•™åŒº**ï¼ˆReservedï¼‰
   * é€šå¸¸æ˜¯æœ€ä½åœ°å€çš„ä¸€æ®µç©ºé—´ï¼ˆä¾‹å¦‚ `0x0` åˆ° `0x400000`ï¼‰ï¼Œä¸å…è®¸è®¿é—®ï¼Œç”¨äºæ•æ‰ç©ºæŒ‡é’ˆç­‰é”™è¯¯ã€‚

---

**åœ°å€åŒºåŸŸåˆ†å¸ƒï¼š**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/af6c5f88b2d344d8b4a8e2647fcbd7d6.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/5df83152f6f54baeae5650c0ad02fb16.png)

---

**æ„Ÿå—è™šæ‹Ÿåœ°å€ï¼š**

**`fork()ï¼š`ä¸€æ¬¡è°ƒç”¨ï¼Œä¸¤æ¬¡è¿”å›**

è¿™æ˜¯ç†è§£ `fork()` æœ€å…³é”®ä¹Ÿæ˜¯æœ€åç›´è§‰çš„ä¸€ç‚¹ï¼š

* åœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œ`fork()` **è¿”å›æ–°åˆ›å»ºå­è¿›ç¨‹çš„è¿›ç¨‹IDï¼ˆPIDï¼‰**ï¼ˆä¸€ä¸ªå¤§äº0çš„æ•°ï¼‰ã€‚
* åœ¨å­è¿›ç¨‹ä¸­ï¼Œ`fork()` **è¿”å› 0**ã€‚
* **å¦‚æœåˆ›å»ºå¤±è´¥**ï¼ˆä¾‹å¦‚ç³»ç»Ÿèµ„æºä¸è¶³ï¼‰ï¼Œ`fork()` **è¿”å› -1**ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c8f5692138b64793986dc5023a2c5ebd.png)

---

è¿›ç¨‹å…·æœ‰ç‹¬ç«‹æ€§ï¼šæ•°æ®å±‚é¢ä¸Šï¼Œäº’ä¸å½±å“ï¼›æ­¤æ—¶å°±éœ€å†™æ—¶æ‹·è´ï¼Œå®ç°è¿›ç¨‹çš„ä¸ªæ€§åŒ–

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/7dae86ccf38c4f37aec58f791004c2dd.png)

ç›¸åŒåœ°å€ï¼Œè·å–ä¸åŒå˜é‡å€¼

---

### äºŒã€é¡µè¡¨

#### 2.1 æ ¸å¿ƒå®šä¹‰ï¼šä»€ä¹ˆæ˜¯é¡µè¡¨ï¼Ÿ

é¡µè¡¨æ˜¯è™šæ‹Ÿå†…å­˜ç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ˜¯è¿æ¥ **è™šæ‹Ÿåœ°å€** å’Œ **ç‰©ç†åœ°å€ **çš„â€œåœ°å›¾â€æˆ–â€œç¿»è¯‘å®˜â€ï¼›æ˜¯ `Kernel` ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤çš„ä¸€ä¸ª**æ˜ å°„è¡¨**ï¼Œå®ƒè®°å½•äº†è¯¥è¿›ç¨‹çš„**è™šæ‹Ÿå†…å­˜é¡µ**å¯¹åº”åˆ°**ç‰©ç†å†…å­˜å¸§**çš„**æ˜ å°„å…³ç³»**

ç®€å•æ¥è¯´ï¼Œå®ƒçš„å·¥ä½œå°±æ˜¯å›ç­”è¿™ä¸ªé—®é¢˜ï¼š

> â€œè¿™ä¸ªè¿›ç¨‹çœ‹åˆ°çš„è™šæ‹Ÿåœ°å€ Xï¼Œå®é™…ä¸Šåœ¨ç‰©ç†å†…å­˜çš„å“ªä¸ªåœ°æ–¹ï¼Ÿâ€

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/707c0a5d87894cdda084d527ae8205e8.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/6fa7db7e3b784798b73761a9a7a77226.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/bc4204b19a0643cf9e6b85f29b8d479f.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/3db4da1d3b954e62b78feaa2d66931aa.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b8555339290249be89af106d242dda92.png)

**OS ä¼šå°†è¿›ç¨‹ç‰©ç†åœ°å€éšè—èµ·æ¥ï¼Œæˆ‘ä»¬åªèƒ½è§‚æµ‹åˆ°è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€**

---

**è§£å†³å†å²é—ç•™é—®é¢˜ï¼š**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d9ff89e37180438c80daa0b463259777.png)

---

#### 2.2 ä¸ºä»€ä¹ˆéœ€è¦é¡µè¡¨ï¼Ÿ

é¡µè¡¨æ˜¯å®ç°**è™šæ‹Ÿåœ°å€ç©ºé—´**è¿™ä¸€æŠ½è±¡æ¦‚å¿µçš„æŠ€æœ¯åŸºç¡€ã€‚æ²¡æœ‰é¡µè¡¨ï¼Œè™šæ‹Ÿå†…å­˜å°±æ— æ³•å·¥ä½œã€‚å®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†ï¼š

1. **å®ç°åœ°å€ç¿»è¯‘**ï¼šå°†ç¨‹åºä½¿ç”¨çš„ **è™šæ‹Ÿåœ°å€è½¬æ¢** ä¸ºç¡¬ä»¶ä½¿ç”¨çš„ **ç‰©ç†åœ°å€**ã€‚
2. **å®æ–½å†…å­˜ä¿æŠ¤**ï¼šé€šè¿‡é¡µè¡¨é¡¹ä¸­çš„æƒé™ä½ï¼Œæ§åˆ¶è¿›ç¨‹å¯¹å†…å­˜çš„è®¿é—®ï¼ˆå¯è¯»ï¼Ÿå¯å†™ï¼Ÿå¯æ‰§è¡Œï¼Ÿï¼‰ã€‚
3. **æ”¯æŒâ€œæ¢å‡ºâ€åˆ°ç£ç›˜**ï¼šé€šè¿‡é¡µè¡¨é¡¹ä¸­çš„â€œå­˜åœ¨/ä¸å­˜åœ¨â€ä½ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥çŸ¥é“æŸé¡µæ˜¯å¦åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œå¦‚æœä¸åœ¨ï¼Œå®ƒçš„æ•°æ®å­˜æ”¾åœ¨ç¡¬ç›˜çš„å“ªä¸ªä½ç½®ã€‚

---

### ä¸‰ã€è™šæ‹Ÿåœ°å€ç©ºé—´

#### 3.1 è™šæ‹Ÿåœ°å€ç©ºé—´æ˜¯ä»€ä¹ˆï¼Ÿ

* **è™šæ‹Ÿåœ°å€ç©ºé—´æœ¬è´¨ä¸Šå°±æ˜¯ OS ç»™è¿›ç¨‹ç”»çš„ä¸€å¼ é¥¼ï¼ **ã€Šå¤§å¯Œç¿ä¾‹å­ã€‹ **è®©è¿›ç¨‹è¯¯ä»¥ä¸ºå…¶ç‹¬å æ•´ä¸ªå†…å­˜çš„ç›¸å…³èµ„æº**

ç”»å¤§é¥¼çš„ä½œç”¨ï¼šè®©æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºè‡ªå·±æœ‰ 4GBçš„ç‰©ç†å†…å­˜ç©ºé—´ï¼Œæˆ–è€…ï¼šè®©æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºè‡ªå·±åœ¨ç‹¬å ç‰©ç†å†…å­˜ç©ºé—´

**OS** ä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½ç”»äº†å¤§é¥¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦æŠŠè¿™å¼ å¤§é¥¼ç®¡ç†èµ·æ¥

---

#### 3.2 å¦‚ä½•ç®¡ç†è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Ÿ

**å…ˆæè¿°ï¼Œåœ¨ç»„ç»‡ï¼**

å°†æ‰€æœ‰çš„ **è™šæ‹Ÿè¿›ç¨‹åœ°å€ç©ºé—´**[é¥¼]ï¼Œç”¨**é“¾è¡¨**çš„æ–¹å¼ç®¡ç†èµ·æ¥ï¼›å› æ­¤ï¼Œå¯¹é¥¼çš„ç®¡ç†å°±è½¬åŒ–ä¸ºäº†å¯¹é“¾è¡¨çš„å¢åˆ æŸ¥æ”¹

**è™šæ‹Ÿåœ°å€ç©ºé—´æœ¬è´¨ï¼šKernelå½“ä¸­ä¸ºè¿›ç¨‹åˆ›å»ºçš„ç»“æ„ä½“å¯¹è±¡ï¼**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/4b38522aa4af41e7935371ff240e511b.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d56784f8cc8e44218fa64aefb68f65cc.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/de305b9301b64fb19201fd67ffc27341.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e3eab7a20afe40a1a5e2979c19214346.png)

---

#### 3.3 ä¸ºä»€ä¹ˆè¦æœ‰è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Ÿ

**1. å°†æ— /ä¹±åºçš„ç‰©ç†åœ°å€è½¬å˜ä¸ºæœ‰åºçš„è™šæ‹Ÿåœ°å€ï¼**

* **å¯¹ç”¨æˆ·ï¼ˆè¿›ç¨‹ï¼‰è€Œè¨€**ï¼šè™šæ‹Ÿåœ°å€ç©ºé—´æ˜¯è¿ç»­ä¸”æœ‰åºçš„
* **å¯¹ç³»ç»Ÿï¼ˆæ“ä½œç³»ç»Ÿï¼‰è€Œè¨€**ï¼šç‰©ç†å†…å­˜[å®Œå…¨éšæœºä¸”ä¸è¿ç»­]çš„åˆ†é…æ˜¯çµæ´»ä¸”æ··ä¹±çš„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/2de435ab6c3c47a5bc4dbbc2666f91e0.png)

---

**2. åœ°å€è½¬åŒ–è¿‡ç¨‹ä¸­å¯¹åœ°å€ä¸æ“ä½œè¿›è¡Œåˆæ³•æ€§åˆ¤å®šï¼Œè¿›è€Œä¿æŠ¤ç‰©ç†å†…å­˜ï¼**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/67bf0a3545954ca487571d220b02de75.png)

---

**a. ä»€ä¹ˆæ˜¯é‡æŒ‡é’ˆï¼Ÿ**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/7164c38ca75a419ca30da1ab559061b1.png)

---

**b. `char* str = â€œhello linux!â€; *str = â€˜Hâ€™ï¼›`ä¸ºä»€ä¹ˆåœ¨å­—ç¬¦å¸¸é‡åŒºå†™å…¥å°±ä¼šå´©æºƒï¼Ÿ**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/dcaa0484a6f74c1cabe32fe44d640af7.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/36e8e0849873465e905d29e2a31b7113.png)

---

**3. ç¼ºé¡µä¸­æ–­ ä¸ æŒ‰éœ€è°ƒé¡µ**

**ç¼ºé¡µä¸­æ–­æ˜¯æ“ä½œç³»ç»Ÿ â€œæ¬ºéª—â€ è¿›ç¨‹çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯å®ƒç®¡ç†å†…å­˜çš„å¾—åŠ›å·¥å…·**ï¼ˆç”»å¤§é¥¼ï¼‰

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/1bc99f31adb24d68aa1a1a4cb5177c7b.png)

---

**4. ä½¿è¿›ç¨‹ç®¡ç†ä¸å†…å­˜ç®¡ç†ï¼Œè¿›è¡Œä¸€å®šç¨‹åº¦çš„è§£è€¦åˆ**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b27549e5feec42329eeab3dfa50480f1.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/03a71d5e57f0420982814a602966c101.png)

**è¿›ç¨‹ç®¡ç† & å†…å­˜ç®¡ç† â€“â€”â€”> ç›´çº¿è„±é’©**

---

### å››ã€å·¥ä¸šç–‘é—®

#### a. åˆ›å»ºè¿›ç¨‹æ—¶ï¼Œæ˜¯å¦å¯ä»¥åªåˆ›å»º PCB/åœ°å€ç©ºé—´/é¡µè¡¨ï¼Ÿ

**æ ¸å¿ƒè§‚ç‚¹ï¼šæƒ°æ€§åŠ è½½ (Lazy Loading) ä¸æŒ‰éœ€è°ƒé¡µ (Demand Paging)**

é—®é¢˜èƒŒåéšè—ç€ä¸€ä¸ªå…³é”®æ€æƒ³ï¼š**ä¸ºä»€ä¹ˆè¦åœ¨è¿›ç¨‹ä¸€å¼€å§‹å°±æŠŠå®ƒå¯èƒ½æ°¸è¿œç”¨ä¸åˆ°çš„ä¸œè¥¿å…¨éƒ¨åŠ è½½å¥½å‘¢ï¼Ÿ** è¿™å¤ªæµªè´¹äº†â€¦.å®ƒä»¬éµå¾ª â€œæƒ°æ€§â€åŸåˆ™ï¼Œåªåœ¨çœŸæ­£éœ€è¦æ—¶æ‰åˆ†é…èµ„æºã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯é€šè¿‡ **ç¼ºé¡µä¸­æ–­ ** æ¥å®ç°çš„

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/655630d0ff5144b38679d2aaddee2577.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/0685742aa5ef4caa9fa646c8e6b43742.png)

---

#### b. åˆ›å»ºè¿›ç¨‹ç°æœ‰task_structï¼Œè¿˜æ˜¯å…ˆåŠ è½½æ•°æ®/ä»£ç 

ä¸€å®š**å…ˆæœ‰ç®¡ç†ç»“æ„**ï¼š `task_struct` å’Œ `mm_struct`ï¼Œç©ºé¡µè¡¨[è™šç‰©]ã€‚**æ»å**åŠ è½½ä»£ç å’Œæ•°æ®[å®ç‰©]ï¼Œå‘ç”Ÿåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ï¼Œç”±**ç¼ºé¡µä¸­æ–­æœºåˆ¶é©±åŠ¨**ã€‚å¹¶ä¸”ï¼Œ**åŠ è½½è¿‡ç¨‹æœ¬èº«ä¹Ÿæ˜¯ç”±è¿™äº›æ•°æ®ç»“æ„æŒ‡å¯¼**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/fcc31c9625e8470282c0d4c6ce95213d.png)

---

#### c. å¦‚ä½•ç†è§£è¿›ç¨‹æŒ‚èµ·ï¼Ÿ

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/1c56f32bf7b840ac94818f2eb3c31e7c.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/ca15293e6e574726ab986df6a01b017e.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e3b2f0bff3c9485f88ccb979130b4c14.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c65fe2b1247b4fa5afeb6504835f17c2.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/3927c3577a8a4c07b0885baee30a553f.png)

---

### äº”ã€è™šæ‹Ÿå†…å­˜ç®¡ç†

**è™šæ‹Ÿå†…å­˜ç®¡ç†æ˜¯ä¸€ç§å†…å­˜æŠ½è±¡æœºåˆ¶ã€‚**è™šæ‹Ÿå†…å­˜ç®¡ç†ç³»ç»Ÿçš„ä»»åŠ¡ï¼Œå°±æ˜¯**å°†è¿›ç¨‹ä½¿ç”¨çš„è¿™äº›è™šæ‹Ÿåœ°å€ï¼ˆVirtual Addressï¼‰åŠ¨æ€åœ°æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸Šçš„ç‰©ç†åœ°å€ï¼ˆPhysical Addressï¼‰ï¼Œæˆ–è€…å¿…è¦æ—¶æ˜ å°„åˆ°ç£ç›˜ä¸Šçš„äº¤æ¢ç©ºé—´ï¼ˆSwap Spaceï¼‰**

è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ç”±è®¡ç®—æœºçš„ **å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰** å’Œæ“ä½œç³»ç»Ÿå†…æ ¸å…±åŒå®Œæˆã€‚

---

æè¿° **Linux** ä¸‹è¿›ç¨‹çš„åœ°å€ç©ºé—´çš„æ‰€æœ‰çš„ä¿¡æ¯çš„ç»“æ„ä½“æ˜¯ `mm_struct` ï¼ˆå†…å­˜æè¿°ç¬¦ï¼‰ã€‚æ¯ä¸ªè¿›ç¨‹åªæœ‰â¼€ ä¸ª `mm_struct`ç»“æ„ï¼Œåœ¨æ¯ä¸ªè¿›ç¨‹çš„ `task_struct`ç»“æ„ä¸­ï¼Œæœ‰â¼€ä¸ªæŒ‡å‘è¯¥è¿›ç¨‹çš„ç»“æ„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/a1e99dbf0d534681b4d796b7f487a434.png)

```cpp
struct mm_struct
 {
	/*...*/
	struct vm_area_struct *mmap; /* æŒ‡å‘è™šæ‹ŸåŒºé—´(VMA)é“¾è¡¨ */        
	struct rb_root mm_rb; /* red_blackæ ‘ */                
	unsigned long task_size; /*å…·æœ‰è¯¥ç»“æ„ä½“çš„è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„â¼¤â¼©*/             
/*...*/
 // ä»£ç æ®µã€æ•°æ®æ®µã€å †æ ˆæ®µã€å‚æ•°æ®µåŠç¯å¢ƒæ®µçš„èµ·å§‹å’Œç»“æŸåœ°å€ã€‚

    unsigned long start_code, end_code, start_data, end_data;
	unsigned long start_brk, brk, start_stack;
	unsigned long arg_start, arg_end, env_start, env_end;
 /*...*/

```

---

* **Virtual Memory**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/a2afda78a58c46b08efaed6d64bb255b.png)

---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/8f3e1c2b0add4092b5c35f120a53ac23.png)

---

**è¿›ç¨‹å…·æœ‰ç‹¬ç«‹æ€§ï¼š**

1. **å†…æ ¸æ•°æ®ç»“æ„ç‹¬ç«‹ï¼**
2. **åŠ è½½è¿›å†…å­˜çš„ä»£ç å’Œæ•°æ®ç‹¬ç«‹ï¼**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c0601f669862400093cfb486615589e4.png)

---

**ç›®å‰ï¼Œæˆ‘ä»¬å¯¹äºè™šæ‹Ÿåœ°å€ç©ºé—´çš„ç†è§£åªèƒ½åšåˆ°å±€éƒ¨æ€§çš„é€»è¾‘è‡ªæ´½**

---

ğŸŒŸ **å„ä½çœ‹å®˜å¥½**ï¼Œ**æˆ‘æ˜¯[å·¥è—¤æ–°ä¸€Â¹å‘€~](https://blog.csdn.net/2401_87692970?type=lately)**

**ğŸŒˆ** **æ„¿å„ä½å¿ƒä¸­æ‰€æƒ³ï¼Œç»ˆæœ‰æ‰€è‡´ï¼**  
 ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/793fde0032ab48fb8073895672728ab6.gif#pic_center)



