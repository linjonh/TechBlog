---
layout: post
title: "错误记录-git-无法连接到github"
date: 2025-03-16 15:01:52 +0800
description: "按照这种方法, 调试之后, 果然, 用的是两套路径.报错, 大概是这样(这个不是我的报错), 重走一遍流程. 然而这次又不行了.上的回答的进行了文件权限的修改. 使。的时候, 环境中添加了一个名称为。命令. 这次成功了. 从其他的。我不禁怀疑, 它们用的是两套。之后, 依然可以正常执行.最终问题解决了. 无需用到。仓库, 但从本地怎么都。于是开始尝试各种方法.一开始尝试重新创建添加。不解. 删掉新建的各种。的评论中, 找到了调试。连接测试可以通过了.之后, 决定重新创建。可以正常连接, 但是。"
keywords: "错误记录: git 无法连接到github"
categories: ['错误记录']
tags: ['Github', 'Git']
artid: "146295233"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146295233
    alt: "错误记录-git-无法连接到github"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146295233
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146295233
cover: https://bing.ee123.net/img/rand?artid=146295233
image: https://bing.ee123.net/img/rand?artid=146295233
img: https://bing.ee123.net/img/rand?artid=146295233
---

# 错误记录: git 无法连接到github

## 错误记录: git 无法连接到github

今天, 新建了一个`github`仓库, 但从本地怎么都`push`不上去.并报错

    
    
    git@github.com: Permission denied (publickey).
    fatal: Could not read from remote repository.
    
    Please make sure you have the correct access rights
    and the repository exists.
    

于是开始尝试各种方法.

一开始尝试重新创建添加`ssh公钥`.

详见[github官方文档](https://docs.github.com/en/authentication/connecting-to-github-
with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)

然后按照[github troubleshooting-
ssh](https://docs.github.com/en/authentication/troubleshooting-ssh/error-
permission-denied-publickey)进行了`ssh`的连接测试.  
报错, 大概是这样(这个不是我的报错)

    
    
    Permissions 0777 for '/Users/username/.ssh/id_rsa' are too open.
    It is recommended that your private key files are NOT accessible by others.
    This private key will be ignored.
    

按照[stackoverflow](https://stackoverflow.com/questions/9270734/ssh-permissions-
are-too-open)上的回答的进行了文件权限的修改. 使`ssh`连接测试可以通过了.  
然而,`git`依然连接不上.

后来我尝试启动`ssh-agent`, 分表用`git-bash`和`powershell`开启了`ssh-agent`,并运行了`ssh-add`命令.
这次成功了. 从其他的`terminal`也可以正常`push`, 我执行`taskkill /f /im ssh-agent.exe`杀掉所有`ssh-
agent`之后, 依然可以正常执行.

不解. 删掉新建的各种`key pair`之后, 决定重新创建`key pair`, 重走一遍流程. 然而这次又不行了.  
这次的表现依然是, `ssh -T git@githb.com`可以正常连接, 但是`git`无法连接.

我不禁怀疑, 它们用的是两套`.ssh路径`.  
然后在[这篇回答](https://stackoverflow.com/questions/37518346/how-does-git-know-
which-ssh-key-to-use-for-its-operations)的评论中, 找到了调试`git`调用`ssh`的方法.  
按照这种方法, 调试之后, 果然, 用的是两套路径.  
在`git`调用`ssh`的时候, 环境中添加了一个名称为`HOME`的环境变量.
如[这个回答](https://stackoverflow.com/questions/84096/setting-the-default-ssh-key-
location)所言.

最终问题解决了. 无需用到`ssh-agent`服务  
然而, 为解决的两个问题是:

  1. 为什么之前可以用, 现在忽然就不能用了, 是我在什么时候修改了什么配置导致的?
  2. `git`为什么在调用`ssh`的时候, 会添加`HOME`环境变量, 该值是`git`从哪里获取的?



