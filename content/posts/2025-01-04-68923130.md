---
layout: post
title: "monkeyrunner简单使用及压力测试"
date: 2025-01-04 22:11:01 +0800
description: "monkeyrunner压力测试使用python脚本实现_monkey runner做压力测试"
keywords: "monkey runner做压力测试"
categories: ['Python']
tags: ['Python', 'Monkeyrunner']
artid: "68923130"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=68923130
    alt: "monkeyrunner简单使用及压力测试"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=68923130
featuredImagePreview: https://bing.ee123.net/img/rand?artid=68923130
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     monkeyrunner简单使用及压力测试
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     monkeyrunner简单使用：
    </h2>
    <div>
     <span style="white-space:pre">
     </span>
     <span style="font-size:18px">
      首先进入你的sdk目录的tools里面有一个monkeyrunner工具
     </span>
    </div>
    <div>
     <span style="font-size:18px">
      <img alt="" src="">
       <img alt="" src="">
        <img alt="" src="https://img-blog.csdn.net/20170412222507875?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYmFpZHVfMzU5MDQ4MjE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center">
         <br/>
        </img>
       </img>
      </img>
     </span>
    </div>
    <div>
     <span style="font-size:18px">
      <span style="white-space:pre">
      </span>
     </span>
    </div>
    <div>
     <span style="white-space:pre">
     </span>
     <span style="font-size:14px">
      进入cmd你的tools目录输入monkeyrunner
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <img alt="" src="">
       <img alt="" src="">
        <img alt="" src="https://img-blog.csdn.net/20170412222723876">
         <br/>
        </img>
       </img>
      </img>
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <span style="white-space:pre">
      </span>
     </span>
    </div>
    <div>
     <span style="white-space:pre">
     </span>
     <span style="font-size:14px">
      接下来我们连接设备操作
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <img alt="" src="">
       <img alt="" src="">
        <img alt="" src="https://img-blog.csdn.net/20170412223056272"/>
        <br/>
       </img>
      </img>
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <span style="white-space:pre">
      </span>
      这样我们就连接上一台设备，当然也可以我下面这样操作都是一样的
     </span>
    </div>
    <div>
     <img alt="" src="https://img-blog.csdn.net/20170412223308806"/>
     <br/>
    </div>
    <div>
     <span style="font-size:14px">
      <span style="white-space:pre">
      </span>
      下面我们来看看怎样安装和卸载apk
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      device.installPackage('D:/text/test.apk')  //安装apk
      <br/>
      device.startActivity(component='com.example.test/com.example.test.MainActivity') //启动这个apk(启动Activity)
      <br/>
      time.sleep(1)
      <br/>
      device.removePackage('com.example.test') //卸载apk
      <br/>
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <br/>
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <span style="white-space:pre">
      </span>
      写文件
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <span style="font-family:Verdana; font-size:14px; line-height:26px">
       file_object = open('D:\\text.txt', 'w+')
       <br/>
       file_object.write(time.asctime(time.localtime(time.time()))+'\n') //向text.txt写入时间
      </span>
      <br/>
     </span>
    </div>
    <div>
     <span style="font-size:14px">
      <span style="font-family:Verdana; font-size:14px; line-height:26px">
       <br/>
      </span>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <span style="white-space:pre">
      </span>
      字符串发送到键盘
     </span>
     <br/>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      device.type('字符串')
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <span style="white-space:pre">
      </span>
      唤醒设备屏幕（在设备屏幕上唤醒）
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      device.wake()
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <span style="white-space:pre">
      </span>
      在指定位置发送触摸事件（x,y的单位为像素）
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      device.touch(x,y,TouchPressType-触摸事件类型)
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <span style="white-space:pre">
      </span>
      发送到指定键的一个关键事件
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      device.press(参数1:键码,参数2:触摸事件类型)
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      <br/>
     </span>
    </div>
    <div>
     <span style="font-family:Verdana; font-size:14px; line-height:26px">
      下面是我的随机触摸500次的测试
     </span>
     <pre><code class="language-python">from com.android.monkeyrunner import MonkeyRunner,MonkeyDevice,MonkeyImage
import random
import time
import os
device=MonkeyRunner.waitForConnection()
if not device:
	print "Please connect a device to start!"
else:
	print "start test" 
#print time.asctime(time.localtime(time.time()))
file_object = open('c:\\text.txt', 'w+')
num = 0
while (num &lt; 500):
	x = random.randint(0,1280)
	y = random.randint(0,800)
	device.touch(x,y,"DOWN_AND_UP")
	print x
	print y
	MonkeyRunner.sleep(0.5)
	num += 1
	file_object.write(str("value:")+str(x)+' '+str(y)+'\n')
	file_object.write(str("num=")+str(num)+'\n')
	file_object.writelines(time.asctime(time.localtime(time.time()))+'\n')
	file_object.write('logcat -v time *:W ' + '\n')
file_object.close()</code></pre>
     <div>
      <br/>
     </div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f62616964755f3335393034383231:2f61727469636c652f64657461696c732f3638393233313330" class_="artid" style="display:none">
 </p>
</div>


