---
layout: post
title: "ç¬¬ä¸ƒè¯¾Pythonåçˆ¬æ”»é˜²æˆ˜HeadersIPä»£ç†ä¸éªŒè¯ç "
date: 2025-03-08 15:05:41 +0800
description: "è§£æå¦‚ä½•é€šè¿‡éšæœºUser-Agentç”Ÿæˆã€ä»£ç†IPæ± æ­å»ºä»¥åŠéªŒè¯ç è¯†åˆ«æ¥åº”å¯¹è¿™äº›åçˆ¬ç­–ç•¥ã€‚"
keywords: "ç¬¬ä¸ƒè¯¾ï¼šPythonåçˆ¬æ”»é˜²æˆ˜ï¼šHeaders/IPä»£ç†ä¸éªŒè¯ç "
categories: ['æœªåˆ†ç±»']
tags: ['å¼€å‘è¯­è¨€', 'Tcp', 'Python', 'Proxy', 'Ocr', 'Beautifulsoup']
artid: "146115843"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146115843
    alt: "ç¬¬ä¸ƒè¯¾Pythonåçˆ¬æ”»é˜²æˆ˜HeadersIPä»£ç†ä¸éªŒè¯ç "
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146115843
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146115843
cover: https://bing.ee123.net/img/rand?artid=146115843
image: https://bing.ee123.net/img/rand?artid=146115843
img: https://bing.ee123.net/img/rand?artid=146115843
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ç¬¬ä¸ƒè¯¾ï¼šPythonåçˆ¬æ”»é˜²æˆ˜ï¼šHeaders/IPä»£ç†ä¸éªŒè¯ç 
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     åœ¨çˆ¬è™«å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåçˆ¬è™«æœºåˆ¶æˆä¸ºäº†æˆ‘ä»¬å¿…é¡»é¢å¯¹çš„æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Pythonçˆ¬è™«ä¸­å¸¸è§çš„åçˆ¬æœºåˆ¶ï¼Œå¹¶è¯¦ç»†è§£æå¦‚ä½•é€šè¿‡éšæœºUser-Agentç”Ÿæˆã€ä»£ç†IPæ± æ­å»ºä»¥åŠéªŒè¯ç è¯†åˆ«æ¥åº”å¯¹è¿™äº›åçˆ¬ç­–ç•¥ã€‚æ–‡ç« å°†åŒ…å«å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨è¿™äº›æŠ€æœ¯ã€‚
    </p>
    <p style="text-align:center">
     <img alt="" height="248" src="https://i-blog.csdnimg.cn/direct/e9f3fde183bf41dca2da357362cc8dd8.png" width="441"/>
    </p>
    <h4>
     ä¸€ã€å¸¸è§åçˆ¬æœºåˆ¶è§£æ
    </h4>
    <h5>
     1.1 åŸºäºHeadersçš„åçˆ¬
    </h5>
    <p>
     è®¸å¤šç½‘ç«™é€šè¿‡æ£€æŸ¥è¯·æ±‚å¤´ï¼ˆHeadersï¼‰ä¸­çš„User-Agentå­—æ®µæ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥è‡ªçˆ¬è™«ã€‚å¦‚æœUser-Agentå­—æ®µä¸ç¬¦åˆé¢„æœŸï¼Œç½‘ç«™å¯èƒ½ä¼šæ‹’ç»æœåŠ¡æˆ–è¿”å›é”™è¯¯é¡µé¢ã€‚
    </p>
    <h5>
     1.2 åŸºäºIPçš„åçˆ¬
    </h5>
    <p>
     ä¸ºäº†é™åˆ¶çˆ¬è™«å¯¹ç½‘ç«™çš„è®¿é—®é¢‘ç‡ï¼Œç½‘ç«™é€šå¸¸ä¼šè®°å½•è®¿é—®è€…çš„IPåœ°å€ã€‚å½“æŸä¸ªIPåœ°å€åœ¨çŸ­æ—¶é—´å†…å‘é€å¤§é‡è¯·æ±‚æ—¶ï¼Œç½‘ç«™å¯èƒ½ä¼šæš‚æ—¶æˆ–æ°¸ä¹…å°ç¦è¯¥IPåœ°å€ã€‚
    </p>
    <h5>
     1.3 åŸºäºéªŒè¯ç çš„åçˆ¬
    </h5>
    <p>
     éªŒè¯ç æ˜¯ç½‘ç«™ç”¨æ¥åŒºåˆ†äººç±»ç”¨æˆ·å’Œè‡ªåŠ¨åŒ–è„šæœ¬çš„ä¸€ç§æœ‰æ•ˆæ‰‹æ®µã€‚å½“æ£€æµ‹åˆ°å¼‚å¸¸è®¿é—®æ¨¡å¼æ—¶ï¼Œç½‘ç«™å¯èƒ½ä¼šè¦æ±‚è®¿é—®è€…è¾“å…¥éªŒè¯ç ä»¥éªŒè¯å…¶èº«ä»½ã€‚
    </p>
    <h4>
     äºŒã€éšæœºUser-Agentç”Ÿæˆ
    </h4>
    <p>
     ä¸ºäº†ç»•è¿‡åŸºäºHeadersçš„åçˆ¬æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨éšæœºUser-Agentæ¥æ¨¡æ‹Ÿä¸åŒæµè§ˆå™¨çš„è®¿é—®è¯·æ±‚ã€‚Pythonä¸­çš„fake_useragentåº“å¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾å®ç°è¿™ä¸€ç‚¹ã€‚
    </p>
    <p>
     <strong>
      å®‰è£…å‘½ä»¤
     </strong>
    </p>
    <pre><code class="language-bash">pip install fake-useragent</code></pre>
    <p>
     <strong>
      ç¤ºä¾‹ä»£ç 
     </strong>
    </p>
    <pre><code class="language-python">import requests
from fake_useragent import UserAgent
 
# ç”Ÿæˆä¸€ä¸ªéšæœºçš„User-Agent
ua = UserAgent()
random_user_agent = ua.random
 
# è®¾ç½®è¯·æ±‚å¤´
headers = {
    'User-Agent': random_user_agent
}
 
# å‘é€è¯·æ±‚
response = requests.get('https://www.example.com', headers=headers)
print(response.text)</code></pre>
    <h4>
     ä¸‰ã€ä»£ç†IPæ± æ­å»ºå®æˆ˜
    </h4>
    <p>
     ä¸ºäº†ç»•è¿‡åŸºäºIPçš„åçˆ¬æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç†IPæ¥éšè—çœŸå®çš„IPåœ°å€ã€‚æ­å»ºä¸€ä¸ªä»£ç†IPæ± ï¼Œå¹¶éšæœºé€‰æ‹©ä»£ç†IPè¿›è¡Œè¯·æ±‚ï¼Œå¯ä»¥å¤§å¤§é™ä½è¢«å°ç¦çš„é£é™©ã€‚
    </p>
    <p>
     <strong>
      ç¤ºä¾‹ä»£ç 
     </strong>
    </p>
    <h5>
     3.1 çˆ¬å–ä»£ç†IP
    </h5>
    <p>
     é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸€äº›æä¾›å…è´¹ä»£ç†IPçš„ç½‘ç«™çˆ¬å–ä»£ç†IPä¿¡æ¯ã€‚
    </p>
    <pre><code class="language-python">import requests
from bs4 import BeautifulSoup
 
def get_proxy_ips():
    # æ›¿æ¢ä¸ºå®é™…ä»£ç†IPç½‘ç«™
    url = "https://www.example-proxy-website.com"
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
    }
    proxy_ips = []
    try:
        response = requests.get(url, headers=headers)
        if response.status_code == 200:
            soup = BeautifulSoup(response.text, 'html.parser')

            # å‡è®¾ä»£ç†IPä¿¡æ¯åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œé€šè¿‡æŸ¥æ‰¾è¡¨æ ¼è¡Œ(tr)æ¥è·å–æ•°æ®
            rows = soup.find_all('tr')

            # è·³è¿‡è¡¨å¤´è¡Œ
            for row in rows[1:]:
                cols = row.find_all('td')
                ip = cols[0].text
                port = cols[1].text
                proxy = f"{ip}:{port}"
                proxy_ips.append(proxy)
        return proxy_ips
    except requests.RequestException as e:
        print(f"è¯·æ±‚é”™è¯¯: {e}")
        return []
 
proxy_ips = get_proxy_ips()
print(proxy_ips)</code></pre>
    <h5>
     3.2 éªŒè¯ä»£ç†IP
    </h5>
    <p>
     çˆ¬å–åˆ°çš„ä»£ç†IPä¸ä¸€å®šéƒ½èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œå¯ç”¨æ€§éªŒè¯ã€‚
    </p>
    <pre><code class="language-python">def check_proxy(proxy):
    test_url = "https://www.baidu.com"
    
    # å¯ä»¥ä»£ç†çš„å­—å…¸æ•°æ®
    proxies = {
        "http": f"http://{proxy}",
        "https": f"https://{proxy}"
    }
    try:

        # æµ‹è¯•ä»£ç†åœ°å€
        response = requests.get(test_url, proxies=proxies, timeout=5)
        if response.status_code == 200:
            return True
        return False
    except requests.RequestException:
        return False
 
valid_proxy_ips = []
for proxy in proxy_ips:
    if check_proxy(proxy):
        valid_proxy_ips.append(proxy)

# è¾“å‡ºå¯ä»¥è¿›è¡Œä»£ç†çš„æ­£ç¡®åœ°å€
print(valid_proxy_ips)</code></pre>
    <h5>
     3.3 ä½¿ç”¨ä»£ç†IPè¿›è¡Œè¯·æ±‚
    </h5>
    <p>
     æœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨éªŒè¯é€šè¿‡çš„ä»£ç†IPæ¥å‘é€è¯·æ±‚ã€‚
    </p>
    <pre><code class="language-python">import random
 
# éšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„ä»£ç†IP
proxy = random.choice(valid_proxy_ips)
proxies = {
    "http": f"http://{proxy}",
    "https": f"https://{proxy}"
}
 
# è®¾ç½®è¯·æ±‚å¤´
headers = {
    'User-Agent': random_user_agent
}
 
# å‘é€è¯·æ±‚
response = requests.get('https://www.example.com', headers=headers, proxies=proxies)
print(response.text)</code></pre>
    <h4>
     å››ã€éªŒè¯ç è¯†åˆ«åŸºç¡€æ–¹æ¡ˆ
    </h4>
    <p>
     éªŒè¯ç è¯†åˆ«æ˜¯ç»•è¿‡åŸºäºéªŒè¯ç åçˆ¬æœºåˆ¶çš„å…³é”®ã€‚è™½ç„¶éªŒè¯ç è¯†åˆ«æŠ€æœ¯ç›¸å¯¹å¤æ‚ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›å¼€æºçš„
     <strong>
      OCR
     </strong>
     ï¼ˆæ–‡å­—è¯†åˆ«ï¼‰åº“æ¥å®ç°åŸºæœ¬çš„éªŒè¯ç è¯†åˆ«ã€‚
    </p>
    <p>
     <strong>
      ç¤ºä¾‹ä»£ç 
     </strong>
    </p>
    <h5>
     4.1 å®‰è£…å¿…è¦çš„åº“
    </h5>
    <p>
     ä»
     <a class="link-info" href="https://github.com/tesseract-ocr/tesseract" title="Tesseract-OCRå®˜ç½‘">
      Tesseract-OCRå®˜ç½‘
     </a>
     ä¸‹è½½å¹¶å®‰è£…
     <strong>
      Tesseract-OCR
     </strong>
    </p>
    <p>
     é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…Pillowå’Œpytesseractåº“ã€‚Pillowç”¨äºå›¾åƒå¤„ç†ï¼Œpytesseractæ˜¯Tesseract-OCRçš„Pythonæ¥å£ã€‚
    </p>
    <pre><code class="language-bash">pip install pillow pytesseract</code></pre>
    <p>
     <strong>
      æ³¨æ„ï¼š
     </strong>
     ä½ è¿˜éœ€è¦ä»Tesseract-OCRå®˜ç½‘ä¸‹è½½å¹¶å®‰è£…
     <strong>
      Tesseract-OCR
     </strong>
     ï¼Œå¹¶è®¾ç½®ç¯å¢ƒå˜é‡
     <strong>
      TESSDATA_PREFIX
     </strong>
     æŒ‡å‘åŒ…å«
     <strong>
      tessdata
     </strong>
     çš„ç›®å½•ã€‚
    </p>
    <h5>
     4.2 éªŒè¯ç è¯†åˆ«
    </h5>
    <p>
     å‡è®¾æˆ‘ä»¬å·²ç»ä¸‹è½½äº†ä¸€å¼ éªŒè¯ç å›¾ç‰‡captcha.jpgï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç è¿›è¡Œè¯†åˆ«ã€‚
    </p>
    <pre><code class="language-python">from PIL import Image
import pytesseract
 
# æ‰“å¼€éªŒè¯ç å›¾ç‰‡
image = Image.open('captcha.jpg')
 
# è¿›è¡ŒOCRè¯†åˆ«
text = pytesseract.image_to_string(image, lang='eng')
 
print('è¯†åˆ«ç»“æœ:', text)</code></pre>
    <p>
     è¯†åˆ«å®Œæˆä»¥åï¼Œæ ¹æ®å‰è¾¹å­¦ä¹ çš„å†…å®¹ï¼ŒæŠŠå›¾ç‰‡ä¸­çš„å†…å®¹å¡«å†™åˆ°è¾“å…¥æ¡†å³å¯
    </p>
    <h4>
     æ€»ç»“
    </h4>
    <p>
     æœ¬æ–‡é€šè¿‡è¯¦ç»†è§£æå¸¸è§çš„åçˆ¬æœºåˆ¶ï¼Œå¹¶æä¾›äº†éšæœºUser-Agentç”Ÿæˆã€ä»£ç†IPæ± æ­å»ºä»¥åŠéªŒè¯ç è¯†åˆ«çš„åŸºç¡€æ–¹æ¡ˆï¼Œå¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’Œåº”å¯¹Pythonçˆ¬è™«ä¸­çš„åçˆ¬æŒ‘æˆ˜ã€‚å¸Œæœ›è¿™äº›æŠ€æœ¯å’Œç¤ºä¾‹ä»£ç èƒ½å¯¹å¤§å®¶çš„çˆ¬è™«å¼€å‘æœ‰æ‰€å¸®åŠ©ã€‚
    </p>
    <p>
     <strong>
      å…³æ³¨æˆ‘ï¼ï¼ğŸ«µ
     </strong>
     æŒç»­ä¸ºä½ å¸¦æ¥Pythonç›¸å…³å†…å®¹ã€‚
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35373137393639362f:61727469636c652f64657461696c732f313436313135383433" class_="artid" style="display:none">
 </p>
</div>


