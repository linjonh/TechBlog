---
layout: post
title: "设计模式Python版-模板方法模式下"
date: 2025-03-13 17:03:17 +0800
description: "介绍了GOF模板方法模式的钩子方法，以及用Python实现模板方法模式的钩子方法的示例。"
keywords: "设计模式Python版 模板方法模式（下）"
categories: ['设计模式Python版']
tags: ['设计模式', '模板方法模式', 'Python']
artid: "146236119"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146236119
    alt: "设计模式Python版-模板方法模式下"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146236119
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146236119
cover: https://bing.ee123.net/img/rand?artid=146236119
image: https://bing.ee123.net/img/rand?artid=146236119
img: https://bing.ee123.net/img/rand?artid=146236119
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     设计模式Python版 模板方法模式（下）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="_4">
     </a>
     前言
    </h2>
    <p>
     GOF设计模式分三大类：
    </p>
    <ul>
     <li>
      <strong>
       创建型模式
      </strong>
      ：关注对象的创建过程，包括单例模式、简单工厂模式、工厂方法模式、抽象工厂模式、原型模式和建造者模式。
     </li>
     <li>
      <strong>
       结构型模式
      </strong>
      ：关注类和对象之间的组合，包括适配器模式、桥接模式、组合模式、装饰模式、外观模式、享元模式和代理模式。
     </li>
     <li>
      <strong>
       行为型模式
      </strong>
      ：关注对象之间的交互，包括职责链模式、命令模式、解释器模式、迭代器模式、中介者模式、备忘录模式、观察者模式、状态模式、策略模式、模板方法模式和访问者模式。
     </li>
    </ul>
    <p>
     接上一部分：
     <a href="https://blog.csdn.net/zljgzw/article/details/146210946">
      《设计模式Python版 模板方法模式（上）》
     </a>
    </p>
    <h2>
     <a id="_16">
     </a>
     一、模板方法模式的钩子方法
    </h2>
    <p>
     钩子方法的引入使得子类可以控制父类的行为
    </p>
    <ul>
     <li>
      最简单的钩子方法就是空方法
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre>
    <ul>
     <li>
      另一种钩子方法可以用于对其他方法进行约束，这种钩子方法通常返回一个boolean类型的值，即返回true或false，用来判断是否执行某一个基本方法。
     </li>
    </ul>
    <h2>
     <a id="_31">
     </a>
     二、模板方法模式的钩子方法示例
    </h2>
    <ul>
     <li>
      一个数据图表显示功能，该功能的实现包括以下步骤：
      <ul>
       <li>
        （1）从数据源获取数据。
       </li>
       <li>
        （2）将数据转换为XML格式。
       </li>
       <li>
        （3）以某种图表方式显示XML格式的数据。
       </li>
      </ul>
     </li>
     <li>
      该功能支持多种数据源和多种图表显示方式，但所有的图表显示操作都基于XML格式的数据，因此可能需要对数据进行转换。如果从数据源获取的数据已经是XML格式则无须转换。
     </li>
     <li>
      定义一个钩子方法is_not_xml_data() 来对数据转换方法进行控制。
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/19a0d645a42749da97143594ee084183.png"/>
    </p>
    <pre><code class="prism language-python"><span class="token triple-quoted-string string">"""模板方法模式：钩子方法示例"""</span>

<span class="token comment">### 抽象类</span>


<span class="token keyword">class</span> <span class="token class-name">DataViewer</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""数据图表显示"""</span>

    <span class="token keyword">def</span> <span class="token function">get_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""基本，抽象方法：获取数据"""</span>
        <span class="token keyword">raise</span> NotImplementedError

    <span class="token keyword">def</span> <span class="token function">convert_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""基本，具体方法：数据转换"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"将数据转换为XML格式。"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">display_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""基本，抽象方法：显示数据"""</span>
        <span class="token keyword">raise</span> NotImplementedError

    <span class="token keyword">def</span> <span class="token function">is_not_xml_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""钩子方法"""</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>

    <span class="token keyword">def</span> <span class="token function">process</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""模板方法"""</span>
        self<span class="token punctuation">.</span>get_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_not_xml_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>convert_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>display_data<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">### 具体子类</span>


<span class="token keyword">class</span> <span class="token class-name">BarChartViewer</span><span class="token punctuation">(</span>DataViewer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""柱状图"""</span>

    <span class="token keyword">def</span> <span class="token function">get_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"从 XML 文件中获取数据。"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">display_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"以柱状图显示数据。"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">is_not_xml_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""覆盖父类的钩子方法"""</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre>
    <ul>
     <li>
      客户端代码
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment">### 客户端代码</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    viewer<span class="token punctuation">:</span> DataViewer <span class="token operator">=</span> BarChartViewer<span class="token punctuation">(</span><span class="token punctuation">)</span>
    viewer<span class="token punctuation">.</span>process<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      输出结果
     </li>
    </ul>
    <pre><code class="prism language-sh">从 XML 文件中获取数据。
以柱状图显示数据。
</code></pre>
    <hr/>
    <p>
     您正在阅读的是《
     <strong>
      设计模式Python版
     </strong>
     》专栏！关注不迷路~
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f7a6c6a677a772f:61727469636c652f64657461696c732f313436323336313139" class_="artid" style="display:none">
 </p>
</div>


