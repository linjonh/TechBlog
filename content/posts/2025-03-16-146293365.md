---
layout: post
title: "MyBatis-ä¼ é€’å¤šä¸ªå‚æ•°çš„æ–¹å¼"
date: 2025-03-16 12:26:05 +08:00
description: "æ–¹å¼é€‚ç”¨åœºæ™¯ä»£ç ç®€æ´åº¦çµæ´»æ€§@Paramæ³¨è§£å°‘é‡å‚æ•°é«˜ä½Mapä¼ å‚å‚æ•°åŠ¨æ€å˜åŒ–ä¸­é«˜å®ä½“ç±»å°è£…å›ºå®šç»“æ„å‚æ•°é«˜ä½List/Arrayæ‰¹é‡æŸ¥è¯¢é«˜ä¸­XML é…åˆXML æ–¹å¼å‚æ•°ä¼ é€’ä½é«˜âœ…@Paramé€‚ç”¨äºå°‘é‡å‚æ•°ï¼Œç®€å•æ¸…æ™°ã€‚âœ…Mapé€‚ç”¨äºå‚æ•°åŠ¨æ€å˜åŒ–çš„æŸ¥è¯¢ã€‚âœ… å®ä½“ç±»é€‚ç”¨äºç»“æ„å›ºå®šçš„æŸ¥è¯¢ï¼Œæ¨èå°è£…å‚æ•°å¯¹è±¡ã€‚âœ…List/Arrayé€‚ç”¨äºæ‰¹é‡æŸ¥è¯¢ï¼Œä½†æ³¨æ„ SQL æ³¨å…¥é£é™©ã€‚âœ… XML æ–¹å¼é€‚ç”¨äºå¤æ‚ SQL å¤„ç†ï¼Œä½†å¯è¯»æ€§ç›¸å¯¹è¾ƒä½ã€‚"
keywords: "MyBatis ä¼ é€’å¤šä¸ªå‚æ•°çš„æ–¹å¼"
categories: ['Mybatis']
tags: ['å¼€å‘', 'åç«¯', 'Mybatis', 'Java']
artid: "146293365"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146293365
    alt: "MyBatis-ä¼ é€’å¤šä¸ªå‚æ•°çš„æ–¹å¼"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146293365
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146293365
cover: https://bing.ee123.net/img/rand?artid=146293365
image: https://bing.ee123.net/img/rand?artid=146293365
img: https://bing.ee123.net/img/rand?artid=146293365
---

# MyBatis ä¼ é€’å¤šä¸ªå‚æ•°çš„æ–¹å¼
åœ¨ MyBatis ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å‘ `mapper` ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œæ¯”å¦‚æŸ¥è¯¢æ¡ä»¶ã€åˆ†é¡µå‚æ•°ç­‰ã€‚ç„¶è€Œï¼Œç”±äº MyBatis
çš„å‚æ•°å¤„ç†æ–¹å¼è¾ƒä¸ºç‰¹æ®Šï¼Œç›´æ¥ä¼ é€’å¤šä¸ªå‚æ•°å¯èƒ½ä¼šå¯¼è‡´æ— æ³•è¯†åˆ«ã€‚æœ¬æ–‡å°†ä»‹ç»å‡ ç§å¸¸è§çš„æ–¹å¼æ¥ä¼ é€’å¤šä¸ªå‚æ•°ã€‚
* * *
### 1ï¸âƒ£ ä½¿ç”¨ `@Param` æ³¨è§£ï¼ˆæ¨èï¼‰
**ğŸ“Œ é€‚ç”¨åœºæ™¯ï¼šé€‚ç”¨äºå‚æ•°æ•°é‡è¾ƒå°‘ï¼Œä¸”å‚æ•°åç§°å›ºå®šçš„æƒ…å†µã€‚**
@Select("SELECT * FROM users WHERE name = #{name} AND age = #{age}")
List getUsersByNameAndAge(@Param("name") String name, @Param("age") int age);
ğŸ’¡ **è¯´æ˜** ï¼š
* `@Param("name")` è®© MyBatis è¯†åˆ« `name` è¿™ä¸ªå‚æ•°ï¼ŒSQL è¯­å¥ä¸­å¯ç›´æ¥ä½¿ç”¨ `#{name}`ã€‚
* é€‚ç”¨äº **å‚æ•°æ•°é‡è¾ƒå°‘ï¼Œä¸”å‚æ•°åç§°å›ºå®š** çš„æƒ…å†µã€‚
* * *
### 2ï¸âƒ£ ä½¿ç”¨ `Map` ä¼ é€’å‚æ•°
**ğŸ“Œ é€‚ç”¨åœºæ™¯ï¼šå‚æ•°åŠ¨æ€å˜åŒ–ï¼Œæˆ–è€…å‚æ•°æ•°é‡è¾ƒå¤šæ—¶ã€‚**
@Select("SELECT * FROM users WHERE name = #{name} AND age = #{age}")
List getUsersByMap(Map params);
**è°ƒç”¨ç¤ºä¾‹** ï¼š
Map paramMap = new HashMap<>();
paramMap.put("name", "Tom");
paramMap.put("age", 25);
mapper.getUsersByMap(paramMap);
ğŸ’¡ **è¯´æ˜** ï¼š
* ä½¿ç”¨ `Map` ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ å‚æ•°ã€‚
* SQL è¯­å¥ä¸­ä»ç„¶ä½¿ç”¨ `#{name}`ã€`#{age}` è¿›è¡Œå‚æ•°æ˜ å°„ã€‚
* * *
### 3ï¸âƒ£ ä½¿ç”¨å®ä½“ç±»å°è£…å‚æ•°
**ğŸ“Œ é€‚ç”¨åœºæ™¯ï¼šå‚æ•°è¾ƒå¤šä¸”ç»“æ„å›ºå®šæ—¶ï¼Œé€‚ç”¨äºå¯¹è±¡æŸ¥è¯¢ã€‚**
@Select("SELECT * FROM users WHERE name = #{name} AND age = #{age}")
List getUsersByEntity(User user);
**è°ƒç”¨ç¤ºä¾‹** ï¼š
User user = new User();
user.setName("Tom");
user.setAge(25);
mapper.getUsersByEntity(user);
ğŸ’¡ **è¯´æ˜** ï¼š
* é€‚ç”¨äºå‚æ•°å›ºå®šçš„æƒ…å†µï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§é«˜ã€‚
* ä½†æ˜¯ä¸é€‚ç”¨äºå‚æ•°å¯å˜çš„æŸ¥è¯¢éœ€æ±‚ã€‚
* * *
### 4ï¸âƒ£ ç›´æ¥ä½¿ç”¨ `List` æˆ– `Array`
**ğŸ“Œ é€‚ç”¨åœºæ™¯ï¼šæ‰¹é‡æŸ¥è¯¢ã€IN æŸ¥è¯¢ç­‰ã€‚**
@Select("SELECT * FROM users WHERE id IN (${ids})")
List getUsersByIds(@Param("ids") List ids);
**è°ƒç”¨ç¤ºä¾‹** ï¼š
List idList = Arrays.asList(1, 2, 3);
mapper.getUsersByIds(idList);
ğŸ’¡ **è¯´æ˜** ï¼š
* é€‚ç”¨äº **æ‰¹é‡æŸ¥è¯¢** ï¼Œä½†è¦æ³¨æ„ SQL æ³¨å…¥é£é™©ã€‚
* å¦‚æœ `IN` è¯­å¥ä¸­å‚æ•°è¾ƒå¤šï¼Œå»ºè®®ä½¿ç”¨ `foreach` æ–¹å¼å¤„ç†ï¼ˆXML æ–¹å¼ï¼‰ã€‚
* * *
### 5ï¸âƒ£ XML æ–¹å¼å¤„ç†å¤šä¸ªå‚æ•°ï¼ˆ`parameterType`ï¼‰
åœ¨ `mapper.xml` æ–‡ä»¶ä¸­ï¼ŒMyBatis å…è®¸ä½¿ç”¨ `parameterType` ä¼ é€’å¯¹è±¡å‚æ•°ã€‚
SELECT * FROM users WHERE name = #{name} AND age = #{age}
ğŸ’¡ **è¯´æ˜** ï¼š
* XML æ–¹å¼å¯ä»¥é…åˆ `Map`ã€å®ä½“ç±»ç­‰æ–¹å¼ä¼ é€’å¤šä¸ªå‚æ•°ã€‚
* åœ¨ `parameterType` ä¸­ä½¿ç”¨ `map` æ—¶ï¼Œå¯ä»¥åŠ¨æ€ä¼ é€’å‚æ•°ã€‚
* * *
### 6ï¸âƒ£ å¯¹æ¯”æ€»ç»“ ğŸ“Š
æ–¹å¼| é€‚ç”¨åœºæ™¯| ä»£ç ç®€æ´åº¦| çµæ´»æ€§
---|---|---|---
`@Param` æ³¨è§£| å°‘é‡å‚æ•°| é«˜| ä½
`Map` ä¼ å‚| å‚æ•°åŠ¨æ€å˜åŒ–| ä¸­| é«˜
å®ä½“ç±»å°è£…| å›ºå®šç»“æ„å‚æ•°| é«˜| ä½
`List/Array`| æ‰¹é‡æŸ¥è¯¢| é«˜| ä¸­
XML é…åˆ `parameterType`| XML æ–¹å¼å‚æ•°ä¼ é€’| ä½| é«˜
* * *
### 7ï¸âƒ£ æ€»ç»“ ğŸš€
âœ… `@Param` é€‚ç”¨äº **å°‘é‡å‚æ•°ï¼Œç®€å•æ¸…æ™°** ã€‚
âœ… `Map` é€‚ç”¨äº **å‚æ•°åŠ¨æ€å˜åŒ–çš„æŸ¥è¯¢** ã€‚
âœ… å®ä½“ç±»é€‚ç”¨äº **ç»“æ„å›ºå®šçš„æŸ¥è¯¢** ï¼Œæ¨èå°è£…å‚æ•°å¯¹è±¡ã€‚
âœ… `List/Array` é€‚ç”¨äº **æ‰¹é‡æŸ¥è¯¢** ï¼Œä½†æ³¨æ„ SQL æ³¨å…¥é£é™©ã€‚
âœ… XML æ–¹å¼é€‚ç”¨äº **å¤æ‚ SQL å¤„ç†** ï¼Œä½†å¯è¯»æ€§ç›¸å¯¹è¾ƒä½ã€‚