---
layout: post
title: "15JavaEE核心技术-JDBC和数据访问"
date: 2025-03-12 15:21:05 +0800
description: "详细讲解Javaee核心技术，jdbc，学会如何通过jdbc访问数据库"
keywords: "15、JavaEE核心技术 - JDBC和数据访问"
categories: ['未分类']
tags: ['数据库', 'Oracle', 'Ee']
artid: "146206205"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146206205
    alt: "15JavaEE核心技术-JDBC和数据访问"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146206205
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146206205
cover: https://bing.ee123.net/img/rand?artid=146206205
image: https://bing.ee123.net/img/rand?artid=146206205
img: https://bing.ee123.net/img/rand?artid=146206205
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     15、JavaEE核心技术 - JDBC和数据访问
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="JDBC_0">
     </a>
     四、JDBC和数据访问
    </h4>
    <h5>
     <a id="JDBC_2">
     </a>
     一、JDBC基础
    </h5>
    <p>
     <strong>
      1. 什么是JDBC？
     </strong>
    </p>
    <p>
     JDBC（Java Database Connectivity）是Java用于与数据库交互的API，允许Java程序执行SQL语句，访问、处理数据库中的数据。
    </p>
    <p>
     <strong>
      2. JDBC的作用
     </strong>
    </p>
    <ul>
     <li>
      提供统一的接口，连接不同的数据库。
     </li>
     <li>
      允许执行SQL语句，包括CRUD（增删改查）操作。
     </li>
     <li>
      支持事务管理，确保数据一致性。
     </li>
     <li>
      提供结果集处理，使得查询结果的处理更加灵活。
     </li>
    </ul>
    <p>
     <strong>
      3. JDBC的主要组件
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       JDBC驱动（JDBC Driver）
      </strong>
      ：用于连接特定数据库的软件组件，翻译JDBC调用为数据库特有的协议。
     </li>
     <li>
      <strong>
       连接（Connection）
      </strong>
      ：代表应用程序与数据库之间的会话，用于执行SQL语句。
     </li>
     <li>
      <strong>
       语句（Statement）
      </strong>
      ：用于执行SQL语句，返回结果集。
     </li>
     <li>
      <strong>
       结果集（ResultSet）
      </strong>
      ：存储查询返回的数据，允许逐行遍历和数据访问。
     </li>
     <li>
      <strong>
       事务管理（Transaction Management）
      </strong>
      ：管理数据库事务，确保操作的原子性、一致性、隔离性和持久性（ACID）。
     </li>
    </ul>
    <p>
     <strong>
      4. JDBC驱动类型
     </strong>
    </p>
    <ul>
     <li>
      类型1：JDBC-ODBC桥接器
      <ul>
       <li>
        通过ODBC驱动连接数据库，性能较差，主要用于旧系统。
       </li>
      </ul>
     </li>
     <li>
      类型2：本地API进程间通信
      <ul>
       <li>
        在客户端和数据库之间使用进程间通信，性能较好，依赖数据库特定的客户端库。
       </li>
      </ul>
     </li>
     <li>
      类型3：网络-中间件
      <ul>
       <li>
        通过中间件服务器连接数据库，适合Web应用，增强了安全性和管理能力。
       </li>
      </ul>
     </li>
     <li>
      类型4：纯Java驱动
      <ul>
       <li>
        直接通过TCP/IP连接数据库，纯Java实现，性能和安全性最佳。
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <strong>
      5. 使用JDBC的基本步骤
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       注册JDBC驱动
      </strong>
      ：使用
      <code>
       Class.forName()
      </code>
      加载驱动类。
     </li>
     <li>
      <strong>
       建立连接
      </strong>
      ：通过
      <code>
       DriverManager.getConnection()
      </code>
      获取连接。
     </li>
     <li>
      <strong>
       创建语句
      </strong>
      ：使用
      <code>
       Connection.createStatement()
      </code>
      创建Statement对象。
     </li>
     <li>
      <strong>
       执行SQL语句
      </strong>
      ：调用
      <code>
       Statement.execute()
      </code>
      或
      <code>
       executeQuery()
      </code>
      执行查询或更新。
     </li>
     <li>
      <strong>
       处理结果集
      </strong>
      ：遍历
      <code>
       ResultSet
      </code>
      获取查询结果。
     </li>
     <li>
      <strong>
       关闭资源
      </strong>
      ：确保关闭Statement、ResultSet和Connection，释放资源。
     </li>
    </ol>
    <pre><code class="prism language-Java">import java.sql.*;  

public class JdbcExample {  
    public static void main(String[] args) {  
        // 数据库连接URL  
        String url = "jdbc:mysql://localhost:3306/testdb";  
        // 用户名  
        String username = "root";  
        // 密码  
        String password = "password";  

        // 注册JDBC驱动  
        try {  
            Class.forName("com.mysql.cj.jdbc.Driver");  
        } catch (ClassNotFoundException e) {  
            System.out.println("无法加载JDBC驱动：");  
            e.printStackTrace();  
            return;  
        }  
        // 执行SELECT查询  
        String query = "SELECT * FROM users";  
        // try-with-resources，资源会在以下情况下自动关闭：1、正常执行完 try 块。2、发生异常时，虚拟机会确保资源被关闭。
        try (Connection conn = DriverManager.getConnection(url, username, password);  
             Statement stmt = conn.createStatement();  
             ResultSet rs = stmt.executeQuery(query)) {  

            System.out.println("连接数据库成功，执行查询：");  

            // 遍历结果集  
            while (rs.next()) {  
                int id = rs.getInt("id");  
                String name = rs.getString("name");  
                String email = rs.getString("email");  
                System.out.println("User ID: " + id + ", Name: " + name + ", Email: " + email);  
            }  

        } catch (SQLException e) {  
            System.out.println("数据库操作错误：");  
            e.printStackTrace();  
        }  
    }  
} 
</code></pre>
    <h5>
     <a id="_88">
     </a>
     二、连接池
    </h5>
    <p>
     <strong>
      1. 为什么需要连接池？
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       性能优化
      </strong>
      ：减少频繁创建和关闭连接的开销，提升响应速度。
     </li>
     <li>
      <strong>
       资源管理
      </strong>
      ：高效管理数据库连接，避免资源耗尽。
     </li>
     <li>
      <strong>
       扩展性
      </strong>
      ：支持更多的并发用户，提高系统吞吐量。
     </li>
    </ul>
    <p>
     <strong>
      2. 常见的连接池实现
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       HikariCP
      </strong>
      ：性能优异，配置简单，广泛使用。
     </li>
     <li>
      <strong>
       Apache DBCP
      </strong>
      ：稳定可靠，适合中小型应用。
     </li>
     <li>
      <strong>
       C3P0
      </strong>
      ：功能丰富，适合复杂应用，但性能相对较差。
     </li>
    </ul>
    <p>
     <strong>
      3. 使用HikariCP实现连接池
     </strong>
    </p>
    <p>
     <strong>
      步骤
     </strong>
     ：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        添加依赖
       </strong>
       ：在项目中引入HikariCP库。
      </p>
      <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.zaxxer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>HikariCP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>  
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        配置属性文件
       </strong>
       ：创建
       <code>
        hikari.properties
       </code>
       文件，配置连接参数。
      </p>
      <pre><code class="prism language-properties">dataSourceClassName= com.mysql.cj.jdbc.Driver  
dataSource.url=jdbc:mysql://localhost:3306/testdb  
dataSource.user=root  
dataSource.password=secret  
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        初始化HikariDataSource
       </strong>
       ：在应用启动时初始化连接池。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span><span class="token class-name">HikariConfig</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span><span class="token class-name">HikariDataSource</span></span><span class="token punctuation">;</span>  

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DatabaseConfig</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HikariDataSource</span> dataSource<span class="token punctuation">;</span>  
    
    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token class-name">HikariConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HikariConfig</span><span class="token punctuation">(</span><span class="token string">"/hikari.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HikariDataSource</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">return</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        获取连接
       </strong>
       ：在需要访问数据库时，从连接池获取连接。
      </p>
      <pre><code class="prism language-java"><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DatabaseConfig</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token comment">// 执行数据库操作  </span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        关闭连接池
       </strong>
       ：在应用关闭时，关闭连接池。
      </p>
      <pre><code class="prism language-java">dataSource<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre>
      <p>
       完整代码：
      </p>
     </li>
    </ol>
    <pre><code class="prism language-Java">import java.sql.*;  

public class HikariCPExample {  
    public static void main(String[] args) {  
        // 数据库连接信息  
        String DB_URL = "jdbc:mysql://localhost:3306/testdb";  
        String USERNAME = "root";  
        String PASSWORD = "password";  

        // HikariCP 配置  
        HikariConfig config = new HikariConfig();  
        config.setJdbcUrl(DB_URL);  
        config.setUsername(USERNAME);  
        config.setPassword(PASSWORD);  

        // 可选配置：连接池参数  
        config.setMinimumIdle(5);   // 最小空闲连接数  
        config.setMaximumPoolSize(10); // 最大连接池大小  
        config.setConnectionTimeout(30000); // 连接超时时间（毫秒）  
        config.setIdleTimeout(60000); // 空闲连接超时时间（毫秒）  

        // 创建 HikariDataSource  
        HikariDataSource dataSource = new HikariDataSource(config);  

        try {  
            // 获取连接  
            Connection conn = dataSource.getConnection();  

            // 执行查询  
            String query = "SELECT * FROM users";  
            try (PreparedStatement stmt = conn.prepareStatement(query)) {  
                try (ResultSet rs = stmt.executeQuery()) {  
                    System.out.println("连接数据库成功，执行查询：");  
                    // 遍历结果集  
                    while (rs.next()) {  
                        int id = rs.getInt("id");  
                        String name = rs.getString("name");  
                        String email = rs.getString("email");  
                        System.out.println("User ID: " + id + ", Name: " + name + ", Email: " + email);  
                    }  
                }  
            }  
        } catch (SQLException e) {  
            System.out.println("数据库操作错误：");  
            e.printStackTrace();  
        } finally {  
            // 关闭连接池  
            dataSource.close();  
        }  
    }  
}  
</code></pre>
    <p>
     <strong>
      4. 连接池的常用配置参数
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       connectionTimeout
      </strong>
      ：获取连接的超时时间，避免长时间等待。
     </li>
     <li>
      <strong>
       maximumPoolSize
      </strong>
      ：最大连接数，根据服务器能力和负载调整。
     </li>
     <li>
      <strong>
       minimumIdle
      </strong>
      ：保持的最少空闲连接数，提高响应速度。
     </li>
     <li>
      <strong>
       idleTimeout
      </strong>
      ：空闲连接的超时时间，避免资源浪费。
     </li>
     <li>
      <strong>
       poolName
      </strong>
      ：连接池名称，方便监控和管理。
     </li>
    </ul>
    <h5>
     <a id="_225">
     </a>
     三、事务管理与锁机制
    </h5>
    <p>
     <strong>
      1. 事务管理
     </strong>
    </p>
    <p>
     <strong>
      事务的特性（ACID）
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       原子性（Atomicity）
      </strong>
      ：事务中的操作要么全部执行，要么不执行。
     </li>
     <li>
      <strong>
       一致性（Consistency）
      </strong>
      ：事务前后，数据库保持一致的状态。
     </li>
     <li>
      <strong>
       隔离性（Isolation）
      </strong>
      ：多个事务间互不影响，避免数据不一致。
     </li>
     <li>
      <strong>
       持久性（Durability）
      </strong>
      ：事务提交后，结果永久保存。
     </li>
    </ul>
    <p>
     <strong>
      JDBC中的事务管理
     </strong>
     ：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        自动提交
       </strong>
       ：默认每个语句提交，可能导致性能问题。
      </p>
      <pre><code class="prism language-java">conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 默认值  </span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        手动事务管理
       </strong>
       ：显式控制事务的提交和回滚。
      </p>
      <pre><code class="prism language-java">conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开始事务  </span>
<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token comment">// 执行多个SQL语句  </span>
    conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 提交事务  </span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 回滚事务  </span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>  
    conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 恢复自动提交  </span>
<span class="token punctuation">}</span>  
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        保存点（Savepoint）
       </strong>
       ：在事务中设置保存点，部分回滚。
      </p>
      <pre><code class="prism language-java"><span class="token class-name">Savepoint</span> savePoint <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">setSavepoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token comment">// SQL操作1  </span>
    <span class="token comment">// SQL操作2  </span>
    conn<span class="token punctuation">.</span><span class="token function">releaseSavepoint</span><span class="token punctuation">(</span>savePoint<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span>savePoint<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre>
     </li>
    </ol>
    <p>
     <strong>
      2. 锁机制
     </strong>
    </p>
    <p>
     <strong>
      锁的类型
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       乐观锁
      </strong>
      ：假设多数情况下数据不会冲突，通过版本号或时间戳检测冲突。
     </li>
     <li>
      <strong>
       悲观锁
      </strong>
      ：假设数据会发生冲突，事先加锁，阻止其他事务访问。
     </li>
    </ul>
    <p>
     <strong>
      JDBC中的锁机制
     </strong>
     ：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        行级锁
       </strong>
       ：锁定特定行，允许并行访问。
      </p>
      <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>  
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        表级锁
       </strong>
       ：锁定整个表，限制并行访问。
      </p>
      <pre><code class="prism language-sql"><span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span> users <span class="token keyword">WRITE</span><span class="token punctuation">;</span>  
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        事务隔离级别
       </strong>
       ：通过设置隔离级别，控制数据读取的一致性。
      </p>
      <pre><code class="prism language-java">conn<span class="token punctuation">.</span><span class="token function">setTransactionIsolation</span><span class="token punctuation">(</span><span class="token class-name">Connection</span><span class="token punctuation">.</span><span class="token constant">TRANSACTION_READ_COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">// 隔离级别：  </span>
<span class="token comment">// TRANSACTION_READ_UNCOMMITTED：最低隔离  </span>
<span class="token comment">// TRANSACTION_READ_COMMITTED：提交读  </span>
<span class="token comment">// TRANSACTION_REPEATABLE_READ：可重复读  </span>
<span class="token comment">// TRANSACTION_SERIALIZABLE：最高隔离  </span>
</code></pre>
     </li>
    </ol>
    <p>
     <strong>
      4. 常见的并发问题
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       脏读（Dirty Read）
      </strong>
      ：事务读取了另一个未提交事务的修改。
     </li>
     <li>
      <strong>
       不可重复读（Non-repeatable Read）
      </strong>
      ：同一事务中，相同查询返回不同结果。
     </li>
     <li>
      <strong>
       幻读（Phantom Read）
      </strong>
      ：事务在特定条件下返回更多行，破坏一致性。
     </li>
    </ul>
    <h5>
     <a id="CRUD_309">
     </a>
     四、CRUD操作实践
    </h5>
    <p>
     <strong>
      1. 创建操作（Create）
     </strong>
    </p>
    <p>
     <strong>
      示例：添加用户
     </strong>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SQL</span> <span class="token operator">=</span> <span class="token string">"INSERT INTO users (name, email) VALUES (?, ?)"</span><span class="token punctuation">;</span>  
    
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DatabaseConfig</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
         <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token constant">SQL</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        
        pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        pstmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// 处理异常，可能回滚或记录日志  </span>
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
</code></pre>
    <p>
     <strong>
      注意事项
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       预编译语句（PreparedStatement）
      </strong>
      ：防止SQL注入，提高安全性。
     </li>
     <li>
      <strong>
       资源管理
      </strong>
      ：使用try-with-resources自动关闭连接和语句。
     </li>
    </ul>
    <p>
     <strong>
      2. 读取操作（Read）
     </strong>
    </p>
    <p>
     <strong>
      示例：查询用户列表
     </strong>
    </p>
    <pre><code class="prism language-Java">public List&lt;User&gt; getAllUsers() {  
    final String SQL = "SELECT * FROM users";  
    List&lt;User&gt; users = new ArrayList&lt;&gt;();  
    
    try (Connection conn = DatabaseConfig.getConnection();  
         Statement stmt = conn.createStatement();  
         ResultSet rs = stmt.executeQuery(SQL)) {  
        
        while (rs.next()) {  
            User user = new User();  
            user.setId(rs.getInt("id"));  
            user.setName(rs.getString("name"));  
            user.setEmail(rs.getString("email"));  
            users.add(user);  
        }  
        
    } catch (SQLException e) {  
        e.printStackTrace();  
        // 处理异常  
    }  
    return users;  
}  
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f32323931303235372f:61727469636c652f64657461696c732f313436323036323035" class_="artid" style="display:none">
 </p>
</div>


