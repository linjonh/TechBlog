---
layout: post
title: "记忆-lower_bound-和-upper_bound或你实现的-last_less_equal"
date: 2025-03-13 19:04:45 +0800
description: "通过理解函数的行为、记忆二分查找的条件和边界更新方式，以及通过模板和口诀进行强化，可以有效地记忆和的实现。多加练习和实际应用是巩固记忆的最佳方法！"
keywords: "记忆 `lower_bound` 和 `upper_bound`（或你实现的 `last_less_equal`）"
categories: ['未分类']
tags: ['算法', 'Less']
artid: "146239869"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146239869
    alt: "记忆-lower_bound-和-upper_bound或你实现的-last_less_equal"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146239869
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146239869
cover: https://bing.ee123.net/img/rand?artid=146239869
image: https://bing.ee123.net/img/rand?artid=146239869
img: https://bing.ee123.net/img/rand?artid=146239869
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     记忆 `lower_bound` 和 `upper_bound`（或你实现的 `last_less_equal`）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     记忆
     <code>
      lower_bound
     </code>
     和
     <code>
      upper_bound
     </code>
     （或你实现的
     <code>
      last_less_equal
     </code>
     ）函数的关键在于理解它们的行为和二分查找的逻辑。以下是一些记忆方法和技巧：
    </p>
    <hr/>
    <h4>
     <a id="1__4">
     </a>
     1.
     <strong>
      理解函数的行为
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         lower_bound
        </code>
       </strong>
       ：
       <br/>
       返回
       <strong>
        第一个不小于目标值的位置
       </strong>
       。
       <br/>
       记忆：
       <strong>
        “下界”
       </strong>
       ，即目标值的下限（第一个 ≥ 目标值的位置）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         upper_bound
        </code>
       </strong>
       （标准库）：
       <br/>
       返回
       <strong>
        第一个大于目标值的位置
       </strong>
       。
       <br/>
       记忆：
       <strong>
        “上界”
       </strong>
       ，即目标值的上限（第一个 &gt; 目标值的位置）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         last_less_equal
        </code>
       </strong>
       （你实现的
       <code>
        upper_bound
       </code>
       ）：
       <br/>
       返回
       <strong>
        最后一个小于或等于目标值的位置
       </strong>
       。
       <br/>
       记忆：
       <strong>
        “最后一个 ≤ 目标值的位置”
       </strong>
       。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="2__19">
     </a>
     2.
     <strong>
      记忆二分查找的条件
     </strong>
    </h4>
    <p>
     二分查找的核心是
     <code>
      if
     </code>
     条件，它决定了搜索范围的移动方向。可以通过以下方式记忆：
    </p>
    <h5>
     <a id="lower_bound__22">
     </a>
     <strong>
      <code>
       lower_bound
      </code>
      的条件：
     </strong>
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> target<span class="token punctuation">)</span> r <span class="token operator">=</span> mid<span class="token punctuation">;</span>
<span class="token keyword">else</span> l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      记忆：
      <strong>
       “找第一个 ≥ 目标值的位置”
      </strong>
      ，所以当
      <code>
       a[mid] &gt;= target
      </code>
      时，向左移动右边界。
     </li>
    </ul>
    <h5>
     <a id="upper_bound_29">
     </a>
     <strong>
      <code>
       upper_bound
      </code>
      （标准库）的条件：
     </strong>
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span> r <span class="token operator">=</span> mid<span class="token punctuation">;</span>
<span class="token keyword">else</span> l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      记忆：
      <strong>
       “找第一个 &gt; 目标值的位置”
      </strong>
      ，所以当
      <code>
       a[mid] &gt; target
      </code>
      时，向左移动右边界。
     </li>
    </ul>
    <h5>
     <a id="last_less_equal__36">
     </a>
     <strong>
      <code>
       last_less_equal
      </code>
      的条件：
     </strong>
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target<span class="token punctuation">)</span> l <span class="token operator">=</span> mid<span class="token punctuation">;</span>
<span class="token keyword">else</span> r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      记忆：
      <strong>
       “找最后一个 ≤ 目标值的位置”
      </strong>
      ，所以当
      <code>
       a[mid] &lt;= target
      </code>
      时，向右移动左边界。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="3__45">
     </a>
     3.
     <strong>
      记忆边界更新方式
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         lower_bound
        </code>
        和
        <code>
         upper_bound
        </code>
        （标准库）
       </strong>
       ：
       <br/>
       使用
       <code>
        r = mid
       </code>
       或
       <code>
        l = mid + 1
       </code>
       ，因为目标是找到
       <strong>
        第一个
       </strong>
       满足条件的位置。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         last_less_equal
        </code>
       </strong>
       ：
       <br/>
       使用
       <code>
        l = mid
       </code>
       或
       <code>
        r = mid - 1
       </code>
       ，因为目标是找到
       <strong>
        最后一个
       </strong>
       满足条件的位置。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="4__54">
     </a>
     4.
     <strong>
      记忆二分查找的取整方式
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         lower_bound
        </code>
        和
        <code>
         upper_bound
        </code>
        （标准库）
       </strong>
       ：
       <br/>
       使用
       <code>
        mid = l + (r - l) / 2
       </code>
       （向下取整），因为目标是找到
       <strong>
        第一个
       </strong>
       满足条件的位置。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         last_less_equal
        </code>
       </strong>
       ：
       <br/>
       使用
       <code>
        mid = l + (r - l + 1) / 2
       </code>
       （向上取整），因为目标是找到
       <strong>
        最后一个
       </strong>
       满足条件的位置。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="5__63">
     </a>
     5.
     <strong>
      记忆模板
     </strong>
    </h4>
    <p>
     将函数的行为和实现模板化，方便记忆：
    </p>
    <h5>
     <a id="lower_bound__66">
     </a>
     <strong>
      <code>
       lower_bound
      </code>
      模板：
     </strong>
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> target<span class="token punctuation">)</span> r <span class="token operator">=</span> mid<span class="token punctuation">;</span> <span class="token comment">// 向左移动</span>
        <span class="token keyword">else</span> l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>              <span class="token comment">// 向右移动</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> l<span class="token punctuation">;</span> <span class="token comment">// 返回第一个 &gt;= target 的位置</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="upper_bound_79">
     </a>
     <strong>
      <code>
       upper_bound
      </code>
      （标准库）模板：
     </strong>
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">upper_bound</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span> r <span class="token operator">=</span> mid<span class="token punctuation">;</span> <span class="token comment">// 向左移动</span>
        <span class="token keyword">else</span> l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>             <span class="token comment">// 向右移动</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> l<span class="token punctuation">;</span> <span class="token comment">// 返回第一个 &gt; target 的位置</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="last_less_equal__92">
     </a>
     <strong>
      <code>
       last_less_equal
      </code>
      模板：
     </strong>
    </h5>
    <pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">last_less_equal</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> mid <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 向上取整</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target<span class="token punctuation">)</span> l <span class="token operator">=</span> mid<span class="token punctuation">;</span> <span class="token comment">// 向右移动</span>
        <span class="token keyword">else</span> r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>              <span class="token comment">// 向左移动</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> l<span class="token punctuation">;</span> <span class="token comment">// 返回最后一个 &lt;= target 的位置</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="6__107">
     </a>
     6.
     <strong>
      记忆口诀
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         lower_bound
        </code>
       </strong>
       ：
       <br/>
       <strong>
        “找第一个 ≥ 目标值，向左移动右边界”
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         upper_bound
        </code>
        （标准库）
       </strong>
       ：
       <br/>
       <strong>
        “找第一个 &gt; 目标值，向左移动右边界”
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         last_less_equal
        </code>
       </strong>
       ：
       <br/>
       <strong>
        “找最后一个 ≤ 目标值，向右移动左边界”
       </strong>
       。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="7__119">
     </a>
     7.
     <strong>
      实际应用练习
     </strong>
    </h4>
    <p>
     通过实际应用加深记忆，例如：
    </p>
    <ul>
     <li>
      在有序数组中查找某个值的范围。
     </li>
     <li>
      在有序数组中查找插入位置。
     </li>
     <li>
      统计某个值的出现次数。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_127">
     </a>
     总结
    </h4>
    <p>
     通过理解函数的行为、记忆二分查找的条件和边界更新方式，以及通过模板和口诀进行强化，可以有效地记忆
     <code>
      lower_bound
     </code>
     、
     <code>
      upper_bound
     </code>
     和
     <code>
      last_less_equal
     </code>
     的实现。多加练习和实际应用是巩固记忆的最佳方法！
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38303039333630342f:61727469636c652f64657461696c732f313436323339383639" class_="artid" style="display:none">
 </p>
</div>


