---
layout: post
title: "SQL注入延时盲注"
date: 2025-09-10T23:55:39+0800
description: "摘要：本文介绍了SQL注入中常用的延时函数sleep(n)和条件判断函数if(condition,true,false)，以及字符串截取函数mid/substr/left。通过组合这些函数构造条件判断，利用页面响应时间差异进行盲注攻击。文章详细说明了如何通过延时判断数据库名和表名，并推荐使用ASCII码进行判断以避免引号转义问题，同时为后续自动化工具使用提供便利。最后给出了一个实际注入示例，通过判断表名字符的ASCII码值触发延时来获取信息。"
keywords: "【SQL注入】延时盲注"
categories: ['未分类']
tags: ['网络安全', '数据库', 'Sql']
artid: "151427587"
arturl: "https://blog.csdn.net/2302_80252080/article/details/151427587"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151427587
    alt: "SQL注入延时盲注"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151427587
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151427587
cover: https://bing.ee123.net/img/rand?artid=151427587
image: https://bing.ee123.net/img/rand?artid=151427587
img: https://bing.ee123.net/img/rand?artid=151427587
---



# 【SQL注入】延时盲注

**`sleep(n)`​**​: 核心延时函数。使数据库程序暂停 `n`秒。

![](https://i-blog.csdnimg.cn/direct/a18c44bbb9664a91b988a33ae5a6b405.png)

​**​`if(condition, true_expr, false_expr)`​**​: 条件判断函数。如果 `condition`为真，执行 `true_expr`，否则执行 `false_expr`。​**​用于将延时与判断条件绑定​**​。

![](https://i-blog.csdnimg.cn/direct/5ffcfe7b46944c3aab09fd68e566d387.png)

​**​`mid(a, b, c)`​**​: 字符串截取函数。从字符串 `a`的第 `b`位开始，截取 `c`个字符长度的子串。

![](https://i-blog.csdnimg.cn/direct/3f28f02060c24ab1a2d45f2643d1f2a2.png)

![](https://i-blog.csdnimg.cn/direct/1dedea07d5114da58cf3f91a7fce41ed.png)

**通过观察网页响应时间是否延迟了5秒，从而判断出数据库名字的第一个字母不是 'g'，这里返回5，不是g**

​**​`substr(a, b, c)`​**​: 功能同 `mid(a, b, c)`，字符串截取函数。

​**`left(a, b)`​**​: 字符串截取函数。从字符串 `a`的​**​左侧​**​截取前 `b`位

**`database()`​**​: 返回当前数据库的名称。

**`length(a)`​**​: 返回字符串 `a`的长度。

![](https://i-blog.csdnimg.cn/direct/1671fd6bdd2147fdbbe0faf91b068d18.png)

![](https://i-blog.csdnimg.cn/direct/cc225d781abf4846a68aa35ead1980d9.png)

#### 攻击原理：

通过组合上述函数，构造一个条件判断（如 `if(ascii(substr(database(),1,1))=100, sleep(5), 0)`），如果条件为真，则触发延时，从而根据页面的响应时间来判断猜测的数据是否正确。这是一种“盲注”手段，在无法直接看到查询结果时使用。

**如果当前数据库名的第一个字母是 't'，那么就让数据库睡眠0秒（不延迟）；否则，就睡眠5秒（产生明显延迟）。**

> ?id=1 and sleep(if(mid(database(),1,1)='t',0,5))

**在SQL注入过程中，推荐使用ASCII码进行判断。​**​​

1.**防止引号转义​**​：可以避免因单引号 `'`或双引号 `"`被应用程序转义或过滤而导致的注入失败，提高攻击的成功率和可靠性。

**2.方便工具使用​**​：为后续使用`sqlmap`等自动化注入工具提供便利，这些工具通常采用ASCII码值进行盲注判断，手动测试时采用同样方法可以保持一致。

**从当前数据库中查询第一张表的表名，并取出其第一个字符。如果这个字符的ASCII码等于116（即字符't'），那么就让数据库睡眠2秒；否则，就不睡眠。**

> select * from t1 where id=1 and if(ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))=116,sleep(2),0);



