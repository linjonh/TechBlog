---
layout: post
title: "pyQT学习笔记Qt常用组件与绘图类的使用指南"
date: 2025-03-16 18:12:33 +0800
description: "pyQT学习笔记——Qt常用组件与绘图类的使用指南"
keywords: "pyQT学习笔记——Qt常用组件与绘图类的使用指南"
categories: ['Qt']
tags: ['笔记', '学习', 'Pyqt']
artid: "146165788"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146165788
    alt: "pyQT学习笔记Qt常用组件与绘图类的使用指南"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146165788
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146165788
cover: https://bing.ee123.net/img/rand?artid=146165788
image: https://bing.ee123.net/img/rand?artid=146165788
img: https://bing.ee123.net/img/rand?artid=146165788
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     pyQT学习笔记——Qt常用组件与绘图类的使用指南
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="Size_Policy_3">
     </a>
     一、大小策略（Size Policy）
    </h3>
    <h4>
     <a id="11__5">
     </a>
     1.1 大小策略概述
    </h4>
    <p>
     大小策略是Qt中用于控制控件在布局中如何调整大小的机制。它决定了控件在水平和垂直方向上的行为。通过设置大小策略，可以实现控件的自适应布局，使界面更加灵活。
    </p>
    <h4>
     <a id="12__8">
     </a>
     1.2 具体参数
    </h4>
    <pre><code class="prism language-python">sizePolicy<span class="token punctuation">:</span> <span class="token punctuation">[</span>Preferred<span class="token punctuation">,</span> Preferred<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
</code></pre>
    <ul>
     <li>
      <p>
       <strong>
        水平策略
       </strong>
       ：
       <code>
        Preferred
       </code>
       <br/>
       控件会根据内容调整大小，但不会强制填充可用空间。如果布局中有额外空间，控件不会扩展；如果空间不足，控件会缩小到最小大小。
      </p>
     </li>
     <li>
      <p>
       <strong>
        垂直策略
       </strong>
       ：
       <code>
        Preferred
       </code>
       <br/>
       同水平策略，控件会根据内容调整大小，但不会强制填充可用空间。
      </p>
     </li>
     <li>
      <p>
       <strong>
        水平伸展
       </strong>
       ：
       <code>
        0
       </code>
       <br/>
       表示控件在水平方向上不会扩展以填充额外空间。
      </p>
     </li>
     <li>
      <p>
       <strong>
        垂直伸展
       </strong>
       ：
       <code>
        0
       </code>
       <br/>
       表示控件在垂直方向上不会扩展以填充额外空间。
      </p>
     </li>
    </ul>
    <h4>
     <a id="13__24">
     </a>
     1.3 其他常见策略
    </h4>
    <ul>
     <li>
      <strong>
       Fixed
      </strong>
      ：控件大小固定，无法调整。
     </li>
     <li>
      <strong>
       Minimum
      </strong>
      ：控件大小不能小于最小大小，但可以扩展。
     </li>
     <li>
      <strong>
       Maximum
      </strong>
      ：控件大小不能超过最大大小，但可以缩小。
     </li>
     <li>
      <strong>
       Expanding
      </strong>
      ：控件会尽可能扩展以填充可用空间。
     </li>
     <li>
      <strong>
       MinimumExpanding
      </strong>
      ：控件大小不能小于最小大小，但会尽可能扩展。
     </li>
    </ul>
    <h4>
     <a id="14__31">
     </a>
     1.4 伸展值的作用
    </h4>
    <p>
     伸展值用于控制多个控件在布局中分配额外空间的比例。例如，如果两个控件的水平伸展值分别为
     <code>
      1
     </code>
     和
     <code>
      2
     </code>
     ，则额外空间会按1:2的比例分配。
    </p>
    <h3>
     <a id="_34">
     </a>
     二、常用组件的使用
    </h3>
    <h4>
     <a id="21_QSpinBox__QComboBox_36">
     </a>
     2.1 QSpinBox 和 QComboBox
    </h4>
    <p>
     <code>
      QSpinBox
     </code>
     和
     <code>
      QComboBox
     </code>
     是Qt中常用的输入组件，分别用于数值输入和下拉选择框。
    </p>
    <h5>
     <a id="_39">
     </a>
     示例代码
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">from</span> PyQt5 <span class="token keyword">import</span> QtWidgets

<span class="token comment"># 创建一个窗口</span>
self<span class="token punctuation">.</span>win <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QWidget<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 创建一个 QSpinBox</span>
self<span class="token punctuation">.</span>win_spin_box <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QSpinBox<span class="token punctuation">(</span><span class="token punctuation">)</span>
self<span class="token punctuation">.</span>win_spin_box<span class="token punctuation">.</span>setRange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment"># 设置数值范围</span>
self<span class="token punctuation">.</span>win_spin_box<span class="token punctuation">.</span>setSingleStep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 设置步长</span>

<span class="token comment"># 创建一个 QComboBox</span>
self<span class="token punctuation">.</span>win_combo_box <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QComboBox<span class="token punctuation">(</span><span class="token punctuation">)</span>
self<span class="token punctuation">.</span>win_combo_box<span class="token punctuation">.</span>addItems<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"选项1"</span><span class="token punctuation">,</span> <span class="token string">"选项2"</span><span class="token punctuation">,</span> <span class="token string">"选项3"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 添加选项</span>
</code></pre>
    <h4>
     <a id="22_QDialog_56">
     </a>
     2.2 QDialog
    </h4>
    <p>
     <code>
      QDialog
     </code>
     是Qt中用于创建对话框的类，通常用于弹出提示框或输入框。
    </p>
    <h5>
     <a id="_59">
     </a>
     示例代码
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QMessageBox

<span class="token comment"># 弹出一个消息框</span>
QMessageBox<span class="token punctuation">.</span>information<span class="token punctuation">(</span>self<span class="token punctuation">.</span>win<span class="token punctuation">,</span> <span class="token string">"标题"</span><span class="token punctuation">,</span> <span class="token string">"这是一个消息框"</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="23_QTableView_67">
     </a>
     2.3 QTableView
    </h4>
    <p>
     <code>
      QTableView
     </code>
     是一个功能强大的表格组件，支持View-Model分离的设计方式。通过绑定自定义的
     <code>
      TableModel
     </code>
     ，可以实现复杂的数据展示。
    </p>
    <h5>
     <a id="_70">
     </a>
     示例代码
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QTableView
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QAbstractTableModel

<span class="token comment"># 创建一个自定义的TableModel</span>
<span class="token keyword">class</span> <span class="token class-name">MyTableModel</span><span class="token punctuation">(</span>QAbstractTableModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> header<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_data <span class="token operator">=</span> data
        self<span class="token punctuation">.</span>_header <span class="token operator">=</span> header

    <span class="token keyword">def</span> <span class="token function">rowCount</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parent<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_data<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">columnCount</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parent<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_header<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> index<span class="token punctuation">,</span> role<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> role <span class="token operator">==</span> QtCore<span class="token punctuation">.</span>Qt<span class="token punctuation">.</span>DisplayRole<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>_data<span class="token punctuation">[</span>index<span class="token punctuation">.</span>row<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>index<span class="token punctuation">.</span>column<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">headerData</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> section<span class="token punctuation">,</span> orientation<span class="token punctuation">,</span> role<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> role <span class="token operator">==</span> QtCore<span class="token punctuation">.</span>Qt<span class="token punctuation">.</span>DisplayRole<span class="token punctuation">:</span>
            <span class="token keyword">if</span> orientation <span class="token operator">==</span> QtCore<span class="token punctuation">.</span>Qt<span class="token punctuation">.</span>Horizontal<span class="token punctuation">:</span>
                <span class="token keyword">return</span> self<span class="token punctuation">.</span>_header<span class="token punctuation">[</span>section<span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>

<span class="token comment"># 使用 QTableView 绑定数据</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
header <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"列1"</span><span class="token punctuation">,</span> <span class="token string">"列2"</span><span class="token punctuation">,</span> <span class="token string">"列3"</span><span class="token punctuation">]</span>
model <span class="token operator">=</span> MyTableModel<span class="token punctuation">(</span>data<span class="token punctuation">,</span> header<span class="token punctuation">)</span>
table <span class="token operator">=</span> QTableView<span class="token punctuation">(</span><span class="token punctuation">)</span>
table<span class="token punctuation">.</span>setModel<span class="token punctuation">(</span>model<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="QPainter__107">
     </a>
     三、QPainter 类介绍
    </h3>
    <p>
     <code>
      QPainter
     </code>
     是Qt中用于图形绘制的类，支持绘制常见的几何形状（如圆、矩形、文本等），并支持颜色、旋转、平移等操作。
    </p>
    <h4>
     <a id="31_QPainter__111">
     </a>
     3.1 QPainter 的使用
    </h4>
    <p>
     所有
     <code>
      QWidget
     </code>
     类都继承了
     <code>
      paintEvent
     </code>
     方法，绘制代码需要在
     <code>
      paintEvent
     </code>
     方法中完成。
    </p>
    <h5>
     <a id="_114">
     </a>
     示例代码
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QWidget
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QPainter<span class="token punctuation">,</span> QPen
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Qt

<span class="token keyword">class</span> <span class="token class-name">MyWidget</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">paintEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> paintEvent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        painter <span class="token operator">=</span> QPainter<span class="token punctuation">(</span>self<span class="token punctuation">)</span>  <span class="token comment"># 创建 QPainter 对象</span>
        painter<span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>QPen<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>blue<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置画笔颜色和宽度</span>
        painter<span class="token punctuation">.</span>drawRect<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment"># 绘制矩形</span>
        painter<span class="token punctuation">.</span>drawEllipse<span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>  <span class="token comment"># 绘制椭圆</span>
        painter<span class="token punctuation">.</span>drawText<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token string">"Hello, QPainter!"</span><span class="token punctuation">)</span>  <span class="token comment"># 绘制文本</span>
</code></pre>
    <h4>
     <a id="32_QPainter__129">
     </a>
     3.2 QPainter 的功能
    </h4>
    <ul>
     <li>
      <strong>
       绘制形状
      </strong>
      ：矩形、椭圆、多边形等。
     </li>
     <li>
      <strong>
       设置颜色
      </strong>
      ：通过
      <code>
       QPen
      </code>
      和
      <code>
       QBrush
      </code>
      设置线条颜色和填充颜色。
     </li>
     <li>
      <strong>
       变换操作
      </strong>
      ：支持旋转、平移、缩放等操作。
     </li>
     <li>
      <strong>
       状态复位
      </strong>
      ：可以保存和恢复绘制状态。
     </li>
    </ul>
    <hr/>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f7a786a696179612f:61727469636c652f64657461696c732f313436313635373838" class_="artid" style="display:none">
 </p>
</div>


