---
layout: post
title: "AirSim代码解读日记2无人机初始化过程"
date: 2025-03-10 15:20:13 +0800
description: "airsim无人机初始化过程"
keywords: "AirSim代码解读日记（2）无人机初始化过程"
categories: ['Airsim']
tags: ['游戏引擎', '无人机']
artid: "146155323"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146155323
    alt: "AirSim代码解读日记2无人机初始化过程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146155323
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146155323
cover: https://bing.ee123.net/img/rand?artid=146155323
image: https://bing.ee123.net/img/rand?artid=146155323
img: https://bing.ee123.net/img/rand?artid=146155323
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     AirSim代码解读日记（2）无人机初始化过程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     1.在UE edit中把AAirSimGameMode设置为当前关卡游戏模式，运行游戏后UE会自动创建AAirSimGameMode对象，在
    </p>
    <pre><code class="prism language-cpp">AAirSimGameMode的构造函数中创建ASimHUD对象 。
HUDClass <span class="token operator">=</span> <span class="token class-name">ASimHUD</span><span class="token double-colon punctuation">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">AAirSimGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">AAirSimGameMode</span><span class="token punctuation">(</span><span class="token keyword">const</span> FObjectInitializer<span class="token operator">&amp;</span> ObjectInitializer<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">Super</span><span class="token punctuation">(</span>ObjectInitializer<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    DefaultPawnClass <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    HUDClass <span class="token operator">=</span> <span class="token class-name">ASimHUD</span><span class="token double-colon punctuation">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    common_utils<span class="token double-colon punctuation">::</span><span class="token class-name">Utils</span><span class="token double-colon punctuation">::</span><span class="token function">getSetLogger</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>GlobalASimLog<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//module loading is not allowed outside of the main thread, so we load the ImageWrapper module ahead of time.</span>
    <span class="token keyword">static</span> IImageWrapperModule<span class="token operator">&amp;</span> ImageWrapperModule <span class="token operator">=</span> FModuleManager<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">LoadModuleChecked</span><span class="token generic class-name"><span class="token operator">&lt;</span>IImageWrapperModule<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"ImageWrapper"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      ASimHUD的构造函数中先进行前期的初始化工作，包括AirSim setting文件的读取、UE配置文件的设置、创建前端界面、创建simmode、开启PRC服务。
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">ASimHUD</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">OnBeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initializeSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">loadLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Prevent a MavLink connection being established if changing levels</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>map_changed_<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token function">setUnrealEngineSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">createSimMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">createMainWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setupInputBindings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>simmode_<span class="token punctuation">)</span>
            simmode_<span class="token operator">-&gt;</span><span class="token function">startApiServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">LogMessageString</span><span class="token punctuation">(</span><span class="token string">"Error at startup: "</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> LogDebugLevel<span class="token double-colon punctuation">::</span>Failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//FGenericPlatformMisc::PlatformInit();</span>
        <span class="token comment">//FGenericPlatformMisc::MessageBoxExt(EAppMsgType::Ok, TEXT("Error at Startup"), ANSI_TO_TCHAR(ex.what()));</span>
        <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">ShowMessage</span><span class="token punctuation">(</span>EAppMsgType<span class="token double-colon punctuation">::</span>Ok<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Error at startup: "</span><span class="token punctuation">)</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     3.在createSimMode()中根据setting文件设置的模式创建对应的ASimMode对象。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">ASimHUD</span><span class="token double-colon punctuation">::</span><span class="token function">createSimMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>string simmode_name <span class="token operator">=</span> <span class="token class-name">AirSimSettings</span><span class="token double-colon punctuation">::</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>simmode_name<span class="token punctuation">;</span>

    FActorSpawnParameters simmode_spawn_params<span class="token punctuation">;</span>
    simmode_spawn_params<span class="token punctuation">.</span>SpawnCollisionHandlingOverride <span class="token operator">=</span> ESpawnActorCollisionHandlingMethod<span class="token double-colon punctuation">::</span>AdjustIfPossibleButAlwaysSpawn<span class="token punctuation">;</span>

    <span class="token comment">//spawn at origin. We will use this to do global NED transforms, for ex, non-vehicle objects in environment</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>simmode_name <span class="token operator">==</span> AirSimSettings<span class="token double-colon punctuation">::</span>kSimModeTypeMultirotor<span class="token punctuation">)</span>
        simmode_ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>ASimModeWorldMultiRotor<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>FVector<span class="token double-colon punctuation">::</span>ZeroVector<span class="token punctuation">,</span>
                                                                         FRotator<span class="token double-colon punctuation">::</span>ZeroRotator<span class="token punctuation">,</span>
                                                                         simmode_spawn_params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>simmode_name <span class="token operator">==</span> AirSimSettings<span class="token double-colon punctuation">::</span>kSimModeTypeCar<span class="token punctuation">)</span>
        simmode_ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>ASimModeCar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>FVector<span class="token double-colon punctuation">::</span>ZeroVector<span class="token punctuation">,</span>
                                                             FRotator<span class="token double-colon punctuation">::</span>ZeroRotator<span class="token punctuation">,</span>
                                                             simmode_spawn_params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>simmode_name <span class="token operator">==</span> AirSimSettings<span class="token double-colon punctuation">::</span>kSimModeTypeComputerVision<span class="token punctuation">)</span>
        simmode_ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>ASimModeComputerVision<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>FVector<span class="token double-colon punctuation">::</span>ZeroVector<span class="token punctuation">,</span>
                                                                        FRotator<span class="token double-colon punctuation">::</span>ZeroRotator<span class="token punctuation">,</span>
                                                                        simmode_spawn_params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">ShowMessage</span><span class="token punctuation">(</span>EAppMsgType<span class="token double-colon punctuation">::</span>Ok<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"SimMode is not valid: "</span><span class="token punctuation">)</span> <span class="token operator">+</span> simmode_name<span class="token punctuation">,</span> <span class="token string">"Error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">LogMessageString</span><span class="token punctuation">(</span><span class="token string">"SimMode is not valid: "</span><span class="token punctuation">,</span> simmode_name<span class="token punctuation">,</span> LogDebugLevel<span class="token double-colon punctuation">::</span>Failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     4.以创建为例ASimModeWorldMultiRotor，它的构造函数里并没有进一步初始化的内容，而是放在了BeginPlay()中，因为它的基类是AActor，所以这里重写了BeginPlay()方法，项目运行时UE自动调用。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">ASimModeWorldMultiRotor</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//let base class setup physics world</span>
    <span class="token function">initializeForPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     函数里执行的这两句都是它的父类ASimModeWorldBase的方法。ASimModeWorldMultiRotor本身只是重写了几个父类虚函数。initializeForPlay()用于初始化AirSim的物理引擎和物理世界，放到下节展开深究。
     <br/>
     现在先来看看ASimModeWorldBase的BeginPlay()，它又调用了它的父类ASimModeBase的BeginPlay()。
    </p>
    <pre><code class="prism language-cpp">
```cpp
<span class="token keyword">void</span> <span class="token class-name">ASimModeWorldBase</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     5.我们接着向下追代码，ASimModeBase::BeginPlay()的内容就丰富了，因为无论无人机还是无人车这些内容都得设置，所以放在基类比较合适。
     <br/>
     主要内容包括：生成玩家控制器APlayerController；
     <br/>
     改变世界坐标系的原点到玩家控制器位置；
     <br/>
     创建WorldSimApi（整个仿真对外的交互接口）；设置
     <br/>
     创建ApiProvider；
     <br/>
     设置更新时间类型；
     <br/>
     初始化无人机和相机；
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">ASimModeBase</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    debug_reporter_<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    debug_reporter_<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//get player start</span>
    <span class="token comment">//this must be done from within actor otherwise we don't get player start</span>
    TArray<span class="token operator">&lt;</span>AActor<span class="token operator">*</span><span class="token operator">&gt;</span> pawns<span class="token punctuation">;</span>
    <span class="token function">getExistingVehiclePawns</span><span class="token punctuation">(</span>pawns<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> have_existing_pawns <span class="token operator">=</span> pawns<span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    AActor<span class="token operator">*</span> fpv_pawn <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    <span class="token comment">// Grab player location</span>
    FTransform player_start_transform<span class="token punctuation">;</span>
    FVector player_loc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>have_existing_pawns<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        fpv_pawn <span class="token operator">=</span> pawns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        APlayerController<span class="token operator">*</span> player_controller <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">GetFirstPlayerController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fpv_pawn <span class="token operator">=</span> player_controller<span class="token operator">-&gt;</span><span class="token function">GetViewTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    player_start_transform <span class="token operator">=</span> fpv_pawn<span class="token operator">-&gt;</span><span class="token function">GetActorTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    player_loc <span class="token operator">=</span> player_start_transform<span class="token punctuation">.</span><span class="token function">GetLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Move the world origin to the player's location (this moves the coordinate system and adds</span>
    <span class="token comment">// a corresponding offset to all positions to compensate for the shift)</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">SetNewWorldOrigin</span><span class="token punctuation">(</span><span class="token function">FIntVector</span><span class="token punctuation">(</span>player_loc<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>OriginLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Regrab the player's position after the offset has been added (which should be 0,0,0 now)</span>
    player_start_transform <span class="token operator">=</span> fpv_pawn<span class="token operator">-&gt;</span><span class="token function">GetActorTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    global_ned_transform_<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">NedTransform</span><span class="token punctuation">(</span>player_start_transform<span class="token punctuation">,</span>
                                                 <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">GetWorldToMetersScale</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">GenerateAssetRegistryMap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> asset_map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    world_sim_api_<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">WorldSimApi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    api_provider_<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token keyword">new</span> msr<span class="token double-colon punctuation">::</span>airlib<span class="token double-colon punctuation">::</span><span class="token function">ApiProvider</span><span class="token punctuation">(</span>world_sim_api_<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">setLogMessagesVisibility</span><span class="token punctuation">(</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>log_messages_visible<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setupPhysicsLoopPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setupClockSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setStencilIDs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    record_tick_count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">setupInputBindings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">initializeTimeOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AirSimSettings<span class="token double-colon punctuation">::</span>TimeOfDaySetting tod_setting <span class="token operator">=</span> <span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tod_setting<span class="token punctuation">;</span>
    <span class="token function">setTimeOfDay</span><span class="token punctuation">(</span>tod_setting<span class="token punctuation">.</span>enabled<span class="token punctuation">,</span> tod_setting<span class="token punctuation">.</span>start_datetime<span class="token punctuation">,</span> tod_setting<span class="token punctuation">.</span>is_start_datetime_dst<span class="token punctuation">,</span> tod_setting<span class="token punctuation">.</span>celestial_clock_speed<span class="token punctuation">,</span> tod_setting<span class="token punctuation">.</span>update_interval_secs<span class="token punctuation">,</span> tod_setting<span class="token punctuation">.</span>move_sun<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">LogMessage</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"Press F1 to see help"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span> LogDebugLevel<span class="token double-colon punctuation">::</span>Informational<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setupVehiclesAndCamera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">FRecordingThread</span><span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>recording_setting<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span>
        <span class="token function">startRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    UWorld<span class="token operator">*</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>World<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">UWeatherLib</span><span class="token double-colon punctuation">::</span><span class="token function">initWeather</span><span class="token punctuation">(</span>World<span class="token punctuation">,</span> spawned_actors_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//UWeatherLib::showWeatherMenu(World);</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">GenerateActorMap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> scene_object_map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    loading_screen_widget_<span class="token operator">-&gt;</span><span class="token function">AddToViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    loading_screen_widget_<span class="token operator">-&gt;</span><span class="token function">SetVisibility</span><span class="token punctuation">(</span>ESlateVisibility<span class="token double-colon punctuation">::</span>Hidden<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>  
</code></pre>
    <p>
     在void ASimModeBase::setupVehiclesAndCamera()中主要初始化相机和无人机，相机部分后面再看。先看无人机，主要是两条语句：
     <br/>
     auto spawned_pawn = createVehiclePawn(vehicle_setting);
     <br/>
     auto vehicle_sim_api = createVehicleApi(vehicle_pawn);
     <br/>
     先创建FlyPawn，然后把FlyPawn作为参数传递给createVehicleApi生成无人机。
     <br/>
     在createVehiclePawn中使用了UE的LoadClass方法加载资源中的蓝图类，类名就是FlyPawn，之后使用SpawnActor生成。
    </p>
    <pre><code class="prism language-cpp">APawn<span class="token operator">*</span> <span class="token class-name">ASimModeBase</span><span class="token double-colon punctuation">::</span><span class="token function">createVehiclePawn</span><span class="token punctuation">(</span><span class="token keyword">const</span> AirSimSettings<span class="token double-colon punctuation">::</span>VehicleSetting<span class="token operator">&amp;</span> vehicle_setting<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//get UU origin of global NED frame</span>
    <span class="token keyword">const</span> FTransform uu_origin <span class="token operator">=</span> <span class="token function">getGlobalNedTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getGlobalTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// compute initial pose</span>
    FVector spawn_position <span class="token operator">=</span> uu_origin<span class="token punctuation">.</span><span class="token function">GetLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Vector3r settings_position <span class="token operator">=</span> vehicle_setting<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">VectorMath</span><span class="token double-colon punctuation">::</span><span class="token function">hasNan</span><span class="token punctuation">(</span>settings_position<span class="token punctuation">)</span><span class="token punctuation">)</span>
        spawn_position <span class="token operator">=</span> <span class="token function">getGlobalNedTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromGlobalNed</span><span class="token punctuation">(</span>settings_position<span class="token punctuation">)</span><span class="token punctuation">;</span>

    FRotator spawn_rotation <span class="token operator">=</span> <span class="token function">toFRotator</span><span class="token punctuation">(</span>vehicle_setting<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> uu_origin<span class="token punctuation">.</span><span class="token function">Rotator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>string vehicle_name <span class="token operator">=</span> vehicle_setting<span class="token punctuation">.</span>vehicle_name<span class="token punctuation">;</span>

    <span class="token comment">//spawn vehicle pawn</span>
    FActorSpawnParameters pawn_spawn_params<span class="token punctuation">;</span>
    pawn_spawn_params<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token function">FName</span><span class="token punctuation">(</span>vehicle_name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pawn_spawn_params<span class="token punctuation">.</span>SpawnCollisionHandlingOverride <span class="token operator">=</span>
        ESpawnActorCollisionHandlingMethod<span class="token double-colon punctuation">::</span>AdjustIfPossibleButAlwaysSpawn<span class="token punctuation">;</span>

    <span class="token keyword">auto</span> vehicle_bp_class <span class="token operator">=</span> <span class="token class-name">UAirBlueprintLib</span><span class="token double-colon punctuation">::</span><span class="token function">LoadClass</span><span class="token punctuation">(</span>
        <span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pawn_paths<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token function">getVehiclePawnPathName</span><span class="token punctuation">(</span>vehicle_setting<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pawn_bp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    APawn<span class="token operator">*</span> spawned_pawn <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>APawn<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">SpawnActor</span><span class="token punctuation">(</span>
        vehicle_bp_class<span class="token punctuation">,</span> <span class="token operator">&amp;</span>spawn_position<span class="token punctuation">,</span> <span class="token operator">&amp;</span>spawn_rotation<span class="token punctuation">,</span> pawn_spawn_params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    spawned_actors_<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>spawned_pawn<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> spawned_pawn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     createVehicleApi内容就比较精彩了，注释在代码上
    </p>
    <pre><code class="prism language-cpp">std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>PawnSimApi<span class="token operator">&gt;</span> <span class="token class-name">ASimModeBase</span><span class="token double-colon punctuation">::</span><span class="token function">createVehicleApi</span><span class="token punctuation">(</span>APawn<span class="token operator">*</span> vehicle_pawn<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">initializeVehiclePawn</span><span class="token punctuation">(</span>vehicle_pawn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//子类重写了这方法，实际执行pawn的initializeForBeginPlay</span>

    <span class="token comment">//create vehicle sim api，</span>
    <span class="token comment">//这部分是经纬度坐标到ue坐标转换，pawn的位置如果没在setting中设置，那么home_geopoint的位置就是OriginGeopoint</span>
    <span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> ned_transform <span class="token operator">=</span> <span class="token function">getGlobalNedTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> pawn_ned_pos <span class="token operator">=</span> ned_transform<span class="token punctuation">.</span><span class="token function">toLocalNed</span><span class="token punctuation">(</span>vehicle_pawn<span class="token operator">-&gt;</span><span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> home_geopoint <span class="token operator">=</span> msr<span class="token double-colon punctuation">::</span>airlib<span class="token double-colon punctuation">::</span><span class="token class-name">EarthUtils</span><span class="token double-colon punctuation">::</span><span class="token function">nedToGeodetic</span><span class="token punctuation">(</span>pawn_ned_pos<span class="token punctuation">,</span> <span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>origin_geopoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token function">vehicle_name</span><span class="token punctuation">(</span><span class="token function">TCHAR_TO_UTF8</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>vehicle_pawn<span class="token operator">-&gt;</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建生成无人机需要的数据的参数结构体</span>
    PawnSimApi<span class="token double-colon punctuation">::</span>Params <span class="token function">pawn_sim_api_params</span><span class="token punctuation">(</span>vehicle_pawn<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token function">getGlobalNedTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getVehiclePawnEvents</span><span class="token punctuation">(</span>vehicle_pawn<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getVehiclePawnCameras</span><span class="token punctuation">(</span>vehicle_pawn<span class="token punctuation">)</span><span class="token punctuation">,</span> pip_camera_class<span class="token punctuation">,</span> collision_display_template<span class="token punctuation">,</span> home_geopoint<span class="token punctuation">,</span> vehicle_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//这里子类重写了createVehicleSimApi方法</span>
    std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>PawnSimApi<span class="token operator">&gt;</span> vehicle_sim_api <span class="token operator">=</span> <span class="token function">createVehicleSimApi</span><span class="token punctuation">(</span>pawn_sim_api_params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span> vehicle_sim_api_p <span class="token operator">=</span> vehicle_sim_api<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span> vehicle_api <span class="token operator">=</span> <span class="token function">getVehicleApi</span><span class="token punctuation">(</span>pawn_sim_api_params<span class="token punctuation">,</span> vehicle_sim_api_p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取VehicleApiBase指针</span>
    <span class="token function">getApiProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insert_or_assign</span><span class="token punctuation">(</span>vehicle_name<span class="token punctuation">,</span> vehicle_api<span class="token punctuation">,</span> vehicle_sim_api_p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//给ApiProvider赋值，这个东西是个桥梁</span>

    <span class="token keyword">return</span> vehicle_sim_api<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="6">
     <li>
      createVehicleSimApi实际执行的是ASimModeWorldMultiRotor::createVehicleSimApi，创建MultirotorPawnSimApi智能指针，这个类的作用可看上节PawnSimApi的介绍，是个重要的交互类。之后执行vehicle_sim_api-&gt;initialize();
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">MultirotorPawnSimApi</span><span class="token double-colon punctuation">::</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">PawnSimApi</span><span class="token double-colon punctuation">::</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//create vehicle API</span>
    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>UnrealSensorFactory<span class="token operator">&gt;</span> sensor_factory <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>UnrealSensorFactory<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">getPawn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token function">getNedTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vehicle_params_ <span class="token operator">=</span> <span class="token class-name">MultiRotorParamsFactory</span><span class="token double-colon punctuation">::</span><span class="token function">createConfig</span><span class="token punctuation">(</span><span class="token function">getVehicleSetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sensor_factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vehicle_api_ <span class="token operator">=</span> vehicle_params_<span class="token operator">-&gt;</span><span class="token function">createMultirotorApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//setup physics vehicle</span>
    multirotor_physics_body_ <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">unique_ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>MultiRotor<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">MultiRotorPhysicsBody</span><span class="token punctuation">(</span>vehicle_params_<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vehicle_api_<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getKinematics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rotor_count_ <span class="token operator">=</span> multirotor_physics_body_<span class="token operator">-&gt;</span><span class="token function">wrenchVertexCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rotor_actuator_info_<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>rotor_count_<span class="token punctuation">,</span> <span class="token function">RotorActuatorInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    vehicle_api_<span class="token operator">-&gt;</span><span class="token function">setSimulatedGroundTruth</span><span class="token punctuation">(</span><span class="token function">getGroundTruthKinematics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getGroundTruthEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//initialize private vars</span>
    last_phys_pose_ <span class="token operator">=</span> <span class="token class-name">Pose</span><span class="token double-colon punctuation">::</span><span class="token function">nanPose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pending_pose_status_ <span class="token operator">=</span> PendingPoseStatus<span class="token double-colon punctuation">::</span>NonePending<span class="token punctuation">;</span>
    reset_pending_ <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    did_reset_ <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    rotor_states_<span class="token punctuation">.</span>rotors<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>rotor_count_<span class="token punctuation">,</span> <span class="token function">RotorParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//reset roll &amp; pitch of vehicle as multirotors required to be on plain surface at start</span>
    Pose pose <span class="token operator">=</span> <span class="token function">getPose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> pitch<span class="token punctuation">,</span> roll<span class="token punctuation">,</span> yaw<span class="token punctuation">;</span>
    <span class="token class-name">VectorMath</span><span class="token double-colon punctuation">::</span><span class="token function">toEulerianAngle</span><span class="token punctuation">(</span>pose<span class="token punctuation">.</span>orientation<span class="token punctuation">,</span> pitch<span class="token punctuation">,</span> roll<span class="token punctuation">,</span> yaw<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pose<span class="token punctuation">.</span>orientation <span class="token operator">=</span> <span class="token class-name">VectorMath</span><span class="token double-colon punctuation">::</span><span class="token function">toQuaternion</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> yaw<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPose</span><span class="token punctuation">(</span>pose<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     首先执行父类的voidPawnSimApi::initialize()，初始化kinematics_、environment_等变量，这两个变量是单例，存放姿态、位置数据，环境数据，其他地方使用的都是从这获取的指针。
     <br/>
     之后构建SimpleFlightQuadXParams（描述机架的参数），再执行vehicle_params_-&gt;createMultirotorApi()构建SimpleFlightApi
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">virtual</span> std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>MultirotorApiBase<span class="token operator">&gt;</span> <span class="token function">createMultirotorApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">unique_ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>MultirotorApiBase<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">SimpleFlightApi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> vehicle_setting_<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre>
    <p>
     这里就到飞控了，飞控里有包括固件和板子，apm和px4还包含mavlink通信部分，还有很多内容，这里不展开讲了。
     <br/>
     MultirotorPawnSimApi的initialize()还会构建MultiRotorPhysicsBody，这是无人机的刚体，之后在初始化引擎的时候会添加到物理世界中，进行动力学运动学计算。
    </p>
    <p>
     <img alt="无人机初始化过程图" src="https://i-blog.csdnimg.cn/direct/74a0b2c574a94e7da3f29eb5a0a07037.png#pic_center"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f6a69616e64616e79696469616e77642f:61727469636c652f64657461696c732f313436313535333233" class_="artid" style="display:none">
 </p>
</div>


