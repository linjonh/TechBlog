---
layout: post
title: "rust-rustå­¦ä¹ "
date: 2025-03-12 12:30:58 +0800
description: "âœ…ã€‚"
keywords: "[rust] rustå­¦ä¹ "
categories: ['Rust']
tags: ['å¼€å‘è¯­è¨€', 'å­¦ä¹ ', 'Rust']
artid: "146201669"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146201669
    alt: "rust-rustå­¦ä¹ "
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146201669
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146201669
cover: https://bing.ee123.net/img/rand?artid=146201669
image: https://bing.ee123.net/img/rand?artid=146201669
img: https://bing.ee123.net/img/rand?artid=146201669
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     [rust] rustå­¦ä¹ 
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="rust_0">
     </a>
     rustå­¦ä¹ 
    </h2>
    <h3>
     <a id="1__1">
     </a>
     1. é¡¹ç›®ç»„ç»‡ç»“æ„
    </h3>
    <h4>
     <a id="_3">
     </a>
     å·¥ç¨‹
    </h4>
    <pre><code># åˆ›å»ºä¸€ä¸ªå·¥ç¨‹
cargo new my-project
</code></pre>
    <h4>
     <a id="_9">
     </a>
     å·¥ä½œç©ºé—´
    </h4>
    <p>
     åœ¨
     <strong>
      Rust
     </strong>
     ä¸­ï¼Œ
     <strong>
      å·¥ä½œç©ºé—´ï¼ˆWorkspaceï¼‰
     </strong>
     æ˜¯ä¸€ä¸ª
     <strong>
      åŒ…å«å¤šä¸ª Rust é¡¹ç›®çš„å…±äº«ç¯å¢ƒ
     </strong>
     ï¼Œç”¨äºç®¡ç†å¤šä¸ª crateï¼ˆåº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€‚å®ƒå…è®¸å¤šä¸ª Rust é¡¹ç›®å…±äº«
     <code>
      Cargo.lock
     </code>
     ã€ä¾èµ–é¡¹å’Œ
     <code>
      target/
     </code>
     ç›®å½•ï¼Œæé«˜ç¼–è¯‘æ•ˆç‡ï¼Œå¹¶ä¸”é€‚ç”¨äº
     <strong>
      å¤šåŒ…ç®¡ç†ã€æ¨¡å—åŒ–å¼€å‘
     </strong>
     ã€‚
    </p>
    <hr/>
    <h3>
     <a id="__Rust__14">
     </a>
     <strong>
      ğŸ”¹ ä¸ºä»€ä¹ˆä½¿ç”¨ Rust å·¥ä½œç©ºé—´ï¼Ÿ
     </strong>
    </h3>
    <p>
     Rust å·¥ä½œç©ºé—´é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
    </p>
    <ol>
     <li>
      <p>
       <strong>
        ç®¡ç†å¤šä¸ªç›¸å…³çš„ crate
       </strong>
       ï¼ˆç±»ä¼¼äº monorepoï¼‰
      </p>
      <ul>
       <li>
        æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªä¸»ç¨‹åº
        <code>
         app
        </code>
        ï¼Œä½†
        <code>
         app
        </code>
        ä¾èµ–äº
        <code>
         lib1
        </code>
        å’Œ
        <code>
         lib2
        </code>
        ï¼Œå¯ä»¥ç”¨å·¥ä½œç©ºé—´ç®¡ç†å®ƒä»¬ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        å…±äº«ä¾èµ–
       </strong>
       ï¼Œå‡å°‘é‡å¤æ„å»ºï¼Œæé«˜ç¼–è¯‘é€Ÿåº¦ã€‚
      </p>
      <ul>
       <li>
        ä¾‹å¦‚
        <code>
         app
        </code>
        å’Œ
        <code>
         lib1
        </code>
        éƒ½ä¾èµ–
        <code>
         serde
        </code>
        ï¼ŒRust åªä¼šç¼–è¯‘ä¸€æ¬¡ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        ç»Ÿä¸€ç®¡ç†
        <code>
         Cargo.lock
        </code>
       </strong>
       ï¼Œä¿è¯æ‰€æœ‰ crate ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ã€‚
      </p>
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="__Rust__26">
     </a>
     <strong>
      ğŸ”¹ å¦‚ä½•åˆ›å»º Rust å·¥ä½œç©ºé—´ï¼Ÿ
     </strong>
    </h3>
    <h4>
     <a id="1__Rust__27">
     </a>
     <strong>
      1ï¸âƒ£ åˆ›å»ºä¸€ä¸ª Rust é¡¹ç›®
     </strong>
    </h4>
    <pre><code class="prism language-sh"><span class="token function">mkdir</span> my_workspace
<span class="token builtin class-name">cd</span> my_workspace
<span class="token function">cargo</span> new <span class="token parameter variable">--lib</span> lib1
<span class="token function">cargo</span> new <span class="token parameter variable">--lib</span> lib2
<span class="token function">cargo</span> new <span class="token parameter variable">--bin</span> app
</code></pre>
    <p>
     ä½ ä¼šå¾—åˆ°å¦‚ä¸‹ç›®å½•ç»“æ„ï¼š
    </p>
    <pre><code>my_workspace/
â”œâ”€â”€ Cargo.toml  # å·¥ä½œç©ºé—´çš„æ ¹ Cargo.toml
â”œâ”€â”€ lib1/
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ lib.rs
â”œâ”€â”€ lib2/
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ lib.rs
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main.rs
</code></pre>
    <hr/>
    <h4>
     <a id="2__Cargotoml_55">
     </a>
     <strong>
      2ï¸âƒ£ é…ç½®
      <code>
       Cargo.toml
      </code>
     </strong>
    </h4>
    <p>
     åœ¨
     <code>
      my_workspace/Cargo.toml
     </code>
     ï¼ˆæ ¹ç›®å½•ï¼‰ä¸­æ·»åŠ ï¼š
    </p>
    <pre><code class="prism language-toml">[workspace]
members = ["lib1", "lib2", "app"]
resolver = "2" # ä½¿ç”¨ Cargo v2 ä¾èµ–è§£æ
</code></pre>
    <p>
     è¿™æ ·ï¼ŒRust çŸ¥é“è¿™ 3 ä¸ªé¡¹ç›®å±äºåŒä¸€ä¸ªå·¥ä½œç©ºé—´ã€‚
    </p>
    <hr/>
    <h4>
     <a id="3__app__lib1__lib2_66">
     </a>
     <strong>
      3ï¸âƒ£ åœ¨
      <code>
       app
      </code>
      ä¾èµ–
      <code>
       lib1
      </code>
      å’Œ
      <code>
       lib2
      </code>
     </strong>
    </h4>
    <p>
     ä¿®æ”¹
     <code>
      app/Cargo.toml
     </code>
     ï¼š
    </p>
    <pre><code class="prism language-toml">[dependencies]
lib1 = { path = "../lib1" }
lib2 = { path = "../lib2" }
</code></pre>
    <p>
     åœ¨
     <code>
      app/src/main.rs
     </code>
     ï¼š
    </p>
    <pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">lib1<span class="token punctuation">::</span></span>hello<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">lib2<span class="token punctuation">::</span></span>world<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     åœ¨
     <code>
      lib1/src/lib.rs
     </code>
     ï¼š
    </p>
    <pre><code class="prism language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello from lib1!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     åœ¨
     <code>
      lib2/src/lib.rs
     </code>
     ï¼š
    </p>
    <pre><code class="prism language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"World from lib2!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="4__101">
     </a>
     <strong>
      4ï¸âƒ£ è¿è¡Œå·¥ä½œç©ºé—´
     </strong>
    </h4>
    <p>
     ä½ å¯ä»¥åœ¨
     <code>
      my_workspace/
     </code>
     ç›®å½•ä¸‹ç›´æ¥è¿è¡Œï¼š
    </p>
    <pre><code class="prism language-sh"><span class="token function">cargo</span> run <span class="token parameter variable">-p</span> app
</code></pre>
    <p>
     è¾“å‡ºï¼š
    </p>
    <pre><code>Hello from lib1!
World from lib2!
</code></pre>
    <p>
     ä½ ä¹Ÿå¯ä»¥
     <strong>
      ä¸€æ¬¡æ€§ç¼–è¯‘æ‰€æœ‰ crate
     </strong>
     ï¼š
    </p>
    <pre><code class="prism language-sh"><span class="token function">cargo</span> build
</code></pre>
    <hr/>
    <h3>
     <a id="__119">
     </a>
     <strong>
      ğŸ”¹ å·¥ä½œç©ºé—´çš„é¢å¤–åŠŸèƒ½
     </strong>
    </h3>
    <h4>
     <a id="__Cargolock_120">
     </a>
     <strong>
      âœ” å…±äº«
      <code>
       Cargo.lock
      </code>
     </strong>
    </h4>
    <p>
     æ‰€æœ‰ crate å…±äº«
     <code>
      Cargo.lock
     </code>
     ï¼Œä¿è¯ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬ï¼š
    </p>
    <pre><code>my_workspace/
â”œâ”€â”€ Cargo.lock  # ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ crate çš„ä¾èµ–
â”œâ”€â”€ ...
</code></pre>
    <h4>
     <a id="__workspacedependencies_128">
     </a>
     <strong>
      âœ” ä½¿ç”¨
      <code>
       workspace.dependencies
      </code>
     </strong>
    </h4>
    <p>
     å¦‚æœå¤šä¸ª crate éœ€è¦ç›¸åŒçš„ä¾èµ–é¡¹ï¼Œå¯ä»¥åœ¨æ ¹
     <code>
      Cargo.toml
     </code>
     ç»Ÿä¸€å£°æ˜ï¼š
    </p>
    <pre><code class="prism language-toml">[workspace.dependencies]
serde = "1.0"
</code></pre>
    <p>
     ç„¶åï¼Œåœ¨
     <code>
      lib1/Cargo.toml
     </code>
     å’Œ
     <code>
      lib2/Cargo.toml
     </code>
     è¿™æ ·å†™ï¼š
    </p>
    <pre><code class="prism language-toml">[dependencies]
serde = { workspace = true }
</code></pre>
    <p>
     è¿™æ ·å¯ä»¥ç¡®ä¿
     <code>
      lib1
     </code>
     å’Œ
     <code>
      lib2
     </code>
     ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„
     <code>
      serde
     </code>
     ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚
    </p>
    <hr/>
    <h3>
     <a id="__143">
     </a>
     <strong>
      ğŸ”¹ æ€»ç»“
     </strong>
    </h3>
    <p>
     âœ…
     <strong>
      Rust å·¥ä½œç©ºé—´
     </strong>
     é€‚ç”¨äº
     <strong>
      ç®¡ç†å¤šä¸ª crate
     </strong>
     ï¼Œä¼˜ç‚¹åŒ…æ‹¬ï¼š
    </p>
    <ul>
     <li>
      <strong>
       æé«˜ç¼–è¯‘æ•ˆç‡
      </strong>
      ï¼ˆå…±äº«
      <code>
       target/
      </code>
      ï¼‰
     </li>
     <li>
      <strong>
       ç»Ÿä¸€ä¾èµ–ç®¡ç†
      </strong>
      ï¼ˆå…±äº«
      <code>
       Cargo.lock
      </code>
      å’Œ
      <code>
       workspace.dependencies
      </code>
      ï¼‰
     </li>
     <li>
      <strong>
       æ¨¡å—åŒ–å¼€å‘
      </strong>
      ï¼ˆé€‚åˆ Monorepoï¼‰
     </li>
    </ul>
    <p>
     é€‚ç”¨äºï¼š
    </p>
    <ul>
     <li>
      <strong>
       å¤§å‹é¡¹ç›®ï¼ˆå¾®æœåŠ¡ã€å¤šç»„ä»¶ï¼‰
      </strong>
     </li>
     <li>
      <strong>
       åº“+CLI å·¥å…·
      </strong>
     </li>
     <li>
      <strong>
       æ¡†æ¶å¼€å‘ï¼ˆå¦‚ Web æ¡†æ¶ï¼‰
      </strong>
     </li>
    </ul>
    <p>
     ä½ æœ‰å…·ä½“çš„ Rust é¡¹ç›®éœ€æ±‚å—ï¼Ÿæˆ‘å¯ä»¥å¸®ä½ ä¼˜åŒ–å·¥ä½œç©ºé—´ç»“æ„ï¼ ğŸš€
    </p>
    <h3>
     <a id="2__156">
     </a>
     2. å¸¸ä½¿ç”¨çš„åº“
    </h3>
    <ul>
     <li>
      serde = { version = â€œ1.0â€, features = [â€œderiveâ€] } # åºåˆ—åŒ–æ”¯æŒ
     </li>
     <li>
      serde_json = â€œ1.0â€ # JSON åºåˆ—åŒ–
     </li>
     <li>
      tokio = { version = â€œ1.35â€, features = [â€œfullâ€] }
     </li>
     <li>
      axum = â€œ0.7.9â€
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33383733343437322f:61727469636c652f64657461696c732f313436323031363639" class_="artid" style="display:none">
 </p>
</div>


