---
layout: post
title: "要查看-SQLite-数据库中的所有表,可以通过查询-SQLite-的系统表-sqlite_master"
date: 2025-03-06 16:29:55 +0800
description: "每个 SQLite 数据库都包含一个名为 sqlite_master 的系统表。该表定义了数据库的模式，存储了数据库中所有表、索引、视图和触发器等对象的信息。通过查询 sqlite_master，您可以获取数据库结构的详细信息，例如列出所有表的名称。"
keywords: "sqlite查询数据库有那些表"
categories: ['数据库']
tags: ['数据库', 'Sqlite']
artid: "146073889"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146073889
    alt: "要查看-SQLite-数据库中的所有表,可以通过查询-SQLite-的系统表-sqlite_master"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146073889
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146073889
cover: https://bing.ee123.net/img/rand?artid=146073889
image: https://bing.ee123.net/img/rand?artid=146073889
img: https://bing.ee123.net/img/rand?artid=146073889
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     要查看 SQLite 数据库中的所有表，可以通过查询 SQLite 的系统表 sqlite_master
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     要查看 SQLite 数据库中的所有表，可以查询 SQLite 的系统表
     <code>
      sqlite_master
     </code>
     。
    </p>
    <p>
     每个 SQLite 数据库都包含一个名为 sqlite_master 的系统表。该表定义了数据库的模式，存储了数据库中所有表、索引、视图和触发器等对象的信息。
    </p>
    <p>
     通过查询 sqlite_master，可以获取数据库结构的详细信息，例如列出所有表的名称。其中存储了数据库对象的元数据，包括表的信息。以下是使用 Python 的
     <code>
      sqlite3
     </code>
     模块实现的方法：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        连接到数据库
       </strong>
       ：首先，确保您已经成功连接到 SQLite 数据库。
      </p>
     </li>
     <li>
      <p>
       <strong>
        创建游标对象
       </strong>
       ：使用连接对象的
       <code>
        cursor()
       </code>
       方法创建一个游标对象，用于执行 SQL 查询。
      </p>
     </li>
     <li>
      <p>
       <strong>
        查询所有表名
       </strong>
       ：执行查询
       <code>
        SELECT name FROM sqlite_master WHERE type='table' ORDER BY name;
       </code>
       ，以获取数据库中所有表的名称。
      </p>
     </li>
     <li>
      <p>
       <strong>
        获取查询结果
       </strong>
       ：使用游标的
       <code>
        fetchall()
       </code>
       方法获取查询结果，该方法返回一个包含所有表名的列表。
      </p>
     </li>
     <li>
      <p>
       <strong>
        关闭连接
       </strong>
       ：操作完成后，关闭游标和数据库连接。
      </p>
     </li>
    </ol>
    <p>
     以下是完整的示例代码：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> sqlite3

<span class="token comment"># 1. 连接到 SQLite 数据库</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'data/travel2.sqlite'</span><span class="token punctuation">)</span>

<span class="token comment"># 2. 创建游标对象</span>
cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 3. 查询所有表名</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT name FROM sqlite_master WHERE type='table' ORDER BY name;"</span><span class="token punctuation">)</span>

<span class="token comment"># 4. 获取查询结果</span>
tables <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 5. 输出所有表名</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"数据库中的表："</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> table <span class="token keyword">in</span> tables<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 6. 关闭游标和连接</span>
cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <strong>
      详细解释每行代码的含义和作用
     </strong>
     ：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         import sqlite3
        </code>
       </strong>
       ：导入 Python 的
       <code>
        sqlite3
       </code>
       模块，该模块提供了与 SQLite 数据库交互的接口。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         conn = sqlite3.connect('data/travel2.sqlite')
        </code>
       </strong>
       ：使用
       <code>
        sqlite3.connect()
       </code>
       方法连接到名为
       <code>
        data/travel2.sqlite
       </code>
       的 SQLite 数据库文件。如果该文件不存在，SQLite 将自动创建一个新的数据库文件。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         cursor = conn.cursor()
        </code>
       </strong>
       ：通过连接对象的
       <code>
        cursor()
       </code>
       方法创建一个
       <strong>
        游标对象
       </strong>
       。游标用于执行 SQL 语句并获取结果。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         cursor.execute("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name;")
        </code>
       </strong>
       ：执行一条 SQL 查询，选择
       <code>
        sqlite_master
       </code>
       表中所有类型为
       <code>
        'table'
       </code>
       的名称，并按名称排序。
       <code>
        sqlite_master
       </code>
       是 SQLite 的系统表，存储了数据库的元数据，包括表、索引、视图等的信息。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         tables = cursor.fetchall()
        </code>
       </strong>
       ：使用游标的
       <code>
        fetchall()
       </code>
       方法获取查询的所有结果。该方法返回一个包含元组的列表，每个元组代表一行数据。在此情况下，每个元组包含一个元素，即表名。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         print("数据库中的表：")
        </code>
       </strong>
       ：输出提示信息，表示接下来将列出数据库中的表。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         for table in tables:
        </code>
       </strong>
       ：遍历
       <code>
        tables
       </code>
       列表，每次迭代获取一个表名元组。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         print(table[0])
        </code>
       </strong>
       ：由于每个元组只有一个元素，即表名，因此使用
       <code>
        table[0]
       </code>
       获取表名并打印。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         cursor.close()
        </code>
       </strong>
       ：关闭
       <strong>
        游标对象
       </strong>
       ，释放与游标相关的资源。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         conn.close()
        </code>
       </strong>
       ：关闭数据库连接，释放与数据库连接相关的资源。
      </p>
     </li>
    </ol>
    <p>
     <strong>
      输出
     </strong>
     ：
    </p>
    <pre><code>数据库中的表：
aircrafts_data
airports_data
boarding_passes
bookings
car_rentals
flights
hotels
seats
ticket_flights
tickets
trip_recommendations
</code></pre>
    <p>
     上述输出显示了数据库中存在的表名，如
     <code>
      flights
     </code>
     、
     <code>
      passengers
     </code>
     和
     <code>
      tickets
     </code>
     。
    </p>
    <p>
     <strong>
      注意事项
     </strong>
     ：
    </p>
    <ul>
     <li>
      <p>
       确保数据库文件路径正确，且在运行脚本时具有适当的权限访问该文件。
      </p>
     </li>
     <li>
      <p>
       在执行数据库操作时，建议添加异常处理，以捕获并处理可能发生的错误。例如，可以使用
       <code>
        try...except
       </code>
       块来捕获并处理数据库连接错误或查询执行错误。
      </p>
     </li>
    </ul>
    <p>
     通过上述步骤，可以成功连接到 SQLite 数据库并列出其中的所有表。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031333536353133332f:61727469636c652f64657461696c732f313436303733383839" class_="artid" style="display:none">
 </p>
</div>


