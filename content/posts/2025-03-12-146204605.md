---
layout: post
title: "mysql安装与使用"
date: 2025-03-12 14:29:53 +0800
description: "安装mysql 8.0使用mysql注意事项配置mysql查看初始密码位置：查找配置文件：配置更改：4. mysql常用操作连接数据库：创建并导入数据库：分配指定数据库权限：分配备份数据库权限：导出数据库："
keywords: "mysql安装与使用"
categories: ['未分类']
tags: ['Mysql', 'Android', 'Adb']
artid: "146204605"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146204605
    alt: "mysql安装与使用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146204605
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146204605
cover: https://bing.ee123.net/img/rand?artid=146204605
image: https://bing.ee123.net/img/rand?artid=146204605
img: https://bing.ee123.net/img/rand?artid=146204605
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     mysql安装与使用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="mysql_0">
     </a>
     mysql安装与使用
    </h2>
    <ol>
     <li>
      <h3>
       <a id="mysql_2">
       </a>
       安装指定版本的mysql
      </h3>
      <pre><code class="prism language-sh"><span class="token comment"># 获得deb包</span>
<span class="token function">wget</span> https://dev.mysql.com/get/mysql-apt-config_0.8.12-1_all.deb
<span class="token comment"># 安装deb包(中间选择5.7)</span>
<span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> mysql-apt-config_0.8.12-1_all.deb
<span class="token comment"># 更新apt仓库缓存</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token comment"># 如果更新报错，缺少key，则运行下列语句，替换对应缺少的key</span>
<span class="token function">sudo</span> apt-key adv <span class="token parameter variable">--keyserver</span> keyserver.ubuntu.com --recv-keys 467B942D3A79BD29
<span class="token comment"># 更新后查看当前mysql的可安装版本</span>
<span class="token function">sudo</span> <span class="token function">apt-cache</span> policy mysql-server
<span class="token comment"># 安装 mysql5.7(安装过程需要配置输入 mysql root 的password)</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-f</span> mysql-client<span class="token operator">=</span><span class="token number">5.7</span>* mysql-community-server<span class="token operator">=</span><span class="token number">5.7</span>* mysql-server<span class="token operator">=</span><span class="token number">5.7</span>*

<span class="token comment"># 如果报错,先取消上面的安装</span>
<span class="token function">sudo</span> <span class="token function">apt</span> --fix-broken <span class="token function">install</span>
<span class="token comment"># 然后安装对应的依赖</span>
<span class="token comment"># 安装libmecab2</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libmecab2
<span class="token comment"># 安装libaio1</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libaio1
<span class="token comment"># 安装mysql-community-client</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mysql-community-client<span class="token operator">=</span><span class="token number">5.7</span>*
<span class="token comment"># 再次安装 mysql 5.7</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-f</span> mysql-client<span class="token operator">=</span><span class="token number">5.7</span>* mysql-community-server<span class="token operator">=</span><span class="token number">5.7</span>* mysql-server<span class="token operator">=</span><span class="token number">5.7</span>*
</code></pre>
     </li>
     <li>
      <h3>
       <a id="mysql_80_31">
       </a>
       安装mysql 8.0
      </h3>
      <pre><code class="prism language-sh"><span class="token comment"># 安装MySQL 8 只需这步（ubuntu22.04默认php版本为8.0）</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mysql-server <span class="token parameter variable">-y</span>
<span class="token comment"># 检查状态</span>
<span class="token function">sudo</span> systemctl status mysql
</code></pre>
     </li>
     <li>
      <h3>
       <a id="mysql_40">
       </a>
       配置mysql
      </h3>
      <ul>
       <li>
        <p>
         查看初始密码位置：
        </p>
        <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">cat</span> /etc/mysql/debian.cnf
</code></pre>
       </li>
       <li>
        <p>
         查找配置文件：
        </p>
        <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">find</span> / <span class="token parameter variable">-name</span> my.cnf
<span class="token function">sudo</span> <span class="token function">vim</span> /etc/mysql/mysql.conf.d/mysqld.cnf
</code></pre>
       </li>
       <li>
        <p>
         配置更改：
        </p>
        <pre><code class="prism language-ini">[mysqld]
#port=3306
# 服务端使用的字符集默认为utf8
character-set-server=utf8
# 时区配置
default-time-zone = '+08:00'
# 认证方式
default_authentication_plugin=mysql_native_password
# 连接地址
bind-address = 0.0.0.0
# 解决group_concant报错
sql_mode = STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION

[mysql]
# 设置mysql客户端默认字符集
default-character-set=utf8

[client]
default-character-set=utf8
# 客户端保存密码
user = backup_user
password = password
host = 127.0.0.1
# 容器中配置
#host = mysql-8.0
</code></pre>
       </li>
      </ul>
      <h3>
       <a id="4_mysql_85">
       </a>
       4. mysql常用操作
      </h3>
      <ul>
       <li>
        <p>
         连接数据库：
        </p>
        <pre><code class="prism language-bash"><span class="token comment"># 复制sql文件到容器(使用docker部署)</span>
<span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">cp</span> my_db.sql mysql-8.0:/
<span class="token comment"># 进入数据库容器(使用docker部署)</span>
<span class="token function">sudo</span> <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-8.0 <span class="token function">bash</span>
<span class="token comment"># 连接数据库</span>
mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre>
       </li>
       <li>
        <p>
         创建并导入数据库：
        </p>
        <pre><code class="prism language-sql"><span class="token comment">-- 创建数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> my_db <span class="token keyword">default</span> <span class="token keyword">character</span> <span class="token keyword">set</span> utf8 <span class="token keyword">collate</span> utf8_general_ci<span class="token punctuation">;</span>
<span class="token comment">-- 选择数据库</span>
<span class="token keyword">use</span> my_db<span class="token punctuation">;</span>
<span class="token comment">-- 导入sql文件</span>
source my_db<span class="token punctuation">.</span><span class="token keyword">sql</span><span class="token punctuation">;</span>
</code></pre>
       </li>
       <li>
        <p>
         分配指定数据库权限：
        </p>
        <pre><code class="prism language-sql"><span class="token comment">-- 创建数据库用户</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'my_db_user'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'strong_password'</span><span class="token punctuation">;</span>
<span class="token comment">-- 分配用户指定数据库权限</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> my_db<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'my_db_user'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token comment">-- 刷新权限</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre>
       </li>
       <li>
        <p>
         分配备份数据库权限：
        </p>
        <pre><code class="prism language-sql"><span class="token comment">-- 创建专用备份账号</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'backup_user'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'strong_password'</span><span class="token punctuation">;</span>
<span class="token comment">-- 授予基础权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">SHOW</span> <span class="token keyword">VIEW</span><span class="token punctuation">,</span> <span class="token keyword">TRIGGER</span><span class="token punctuation">,</span> <span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span><span class="token punctuation">,</span> PROCESS <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'backup_user'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token comment">-- 如果数据库含事件调度</span>
<span class="token keyword">GRANT</span> EVENT <span class="token keyword">ON</span> my_db<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'backup_user'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token comment">-- 刷新权限</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
       </li>
       <li>
        <p>
         导出数据库：
        </p>
        <pre><code class="prism language-bash"><span class="token comment"># 导出指定数据库</span>
<span class="token function">sudo</span> mysqldump <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span> my_db <span class="token operator">&gt;</span> ~/projectname.sql
<span class="token comment"># 导出容器中指定数据库</span>
<span class="token function">sudo</span> <span class="token function">docker</span> <span class="token builtin class-name">exec</span> mysql-8.0 mysqldump <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span> my_db <span class="token operator">&gt;</span> ~/my_db.sql
<span class="token comment"># 导出所有数据库</span>
<span class="token function">sudo</span> mysqldump <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span> --all-databases <span class="token operator">&gt;</span> ~/all-databases.sql
<span class="token comment"># 导出容器中所有数据库</span>
<span class="token function">sudo</span> <span class="token function">docker</span> <span class="token builtin class-name">exec</span> mysql-8.0 mysqldump <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>  --all-databases <span class="token operator">&gt;</span> ~/all-databases.sql
</code></pre>
       </li>
      </ul>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33353836313232372f:61727469636c652f64657461696c732f313436323034363035" class_="artid" style="display:none">
 </p>
</div>


