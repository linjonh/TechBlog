---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f5562756e7475546f7563682f:61727469636c652f64657461696c732f313436323438313537"
layout: post
title: "Elasticsearchè¯­ä¹‰æ–‡æœ¬-æ›´ç®€å•æ›´å¥½æ›´ç²¾ç‚¼æ›´å¼ºå¤§-8.18"
date: 2025-03-14 09:16:17 +0800
description: "æˆ‘ä»¬æœ€æ–°çš„ semantic_text è¿­ä»£å¸¦æ¥äº†å¤§é‡æ”¹è¿›ã€‚é™¤äº†ç®€åŒ– _source ä¸­çš„è¡¨ç¤ºä¹‹å¤–ï¼Œå…¶å¥½å¤„è¿˜åŒ…æ‹¬å‡å°‘å†—é•¿ç¨‹åº¦ã€æ›´é«˜æ•ˆçš„ç£ç›˜åˆ©ç”¨ç‡ä»¥åŠæ›´å¥½åœ°ä¸å…¶ä»– Elasticsearch åŠŸèƒ½é›†æˆã€‚ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨çªå‡ºæ˜¾ç¤ºæ¥æ£€ç´¢ä¸ä½ çš„æŸ¥è¯¢æœ€ç›¸å…³çš„å—ã€‚ä¹Ÿè®¸æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒç°åœ¨æ˜¯ä¸€ä¸ªæ­£å¼å‘çš„åŠŸèƒ½ï¼æˆ‘ä»¬åœ¨å­—æ®µç±»å‹ä¸Šç»å†äº†ä¸€æ®µæ¼«é•¿çš„æ—…ç¨‹ï¼Œè€Œè¿™ä¸€æœ€æ–°ç‰ˆæœ¬æ‰¿è¯ºè®©è¯­ä¹‰æœç´¢å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•ã€‚é™¤äº†åœ¨_sourceä¸­ç®€åŒ–ã€‚"
keywords: "Elasticsearchï¼šè¯­ä¹‰æ–‡æœ¬ - æ›´ç®€å•ã€æ›´å¥½ã€æ›´ç²¾ç‚¼ã€æ›´å¼ºå¤§ 8.18"
categories: ['Elasticsearch', 'Elastic', 'Ai']
tags: ['æ•°æ®åº“', 'æœç´¢å¼•æ“', 'å¤§æ•°æ®', 'å…¨æ–‡æ£€ç´¢', 'äººå·¥æ™ºèƒ½', 'Elasticsearch', 'Ai']
artid: "146248157"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146248157
    alt: "Elasticsearchè¯­ä¹‰æ–‡æœ¬-æ›´ç®€å•æ›´å¥½æ›´ç²¾ç‚¼æ›´å¼ºå¤§-8.18"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146248157
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146248157
cover: https://bing.ee123.net/img/rand?artid=146248157
image: https://bing.ee123.net/img/rand?artid=146248157
img: https://bing.ee123.net/img/rand?artid=146248157
---

# Elasticsearchï¼šè¯­ä¹‰æ–‡æœ¬ - æ›´ç®€å•ã€æ›´å¥½ã€æ›´ç²¾ç‚¼ã€æ›´å¼ºå¤§ 8.18

ä½œè€…ï¼šæ¥è‡ª Elastic
[Mike Pellegrini](https://www.elastic.co/search-labs/author/mike-pellegrini "Mike Pellegrini")

![](https://i-blog.csdnimg.cn/direct/bc1fbb13835a44e8a2b122c087a63530.webp)

æˆ‘ä»¬æœ€æ–°çš„ semantic\_text è¿­ä»£å¸¦æ¥äº†å¤§é‡æ”¹è¿›ã€‚é™¤äº†ç®€åŒ– \_source ä¸­çš„è¡¨ç¤ºä¹‹å¤–ï¼Œå…¶å¥½å¤„è¿˜åŒ…æ‹¬å‡å°‘å†—é•¿ç¨‹åº¦ã€æ›´é«˜æ•ˆçš„ç£ç›˜åˆ©ç”¨ç‡ä»¥åŠæ›´å¥½åœ°ä¸å…¶ä»– Elasticsearch åŠŸèƒ½é›†æˆã€‚ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨çªå‡ºæ˜¾ç¤ºæ¥æ£€ç´¢ä¸ä½ çš„æŸ¥è¯¢æœ€ç›¸å…³çš„å—ã€‚ä¹Ÿè®¸æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒç°åœ¨æ˜¯ä¸€ä¸ªæ­£å¼å‘çš„åŠŸèƒ½ï¼

æˆ‘ä»¬åœ¨
`semantic_text`
å­—æ®µç±»å‹ä¸Šç»å†äº†ä¸€æ®µæ¼«é•¿çš„æ—…ç¨‹ï¼Œè€Œè¿™ä¸€æœ€æ–°ç‰ˆæœ¬æ‰¿è¯ºè®©è¯­ä¹‰æœç´¢å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•ã€‚é™¤äº†åœ¨
`_source`
ä¸­ç®€åŒ–
`semantic_text`
çš„è¡¨ç¤ºå¤–ï¼Œå®ƒè¿˜å¸¦æ¥äº†å‡å°‘å†—ä½™ã€æ›´é«˜æ•ˆçš„ç£ç›˜åˆ©ç”¨ç‡ä»¥åŠæ›´å¥½çš„ Elasticsearch å…¶ä»–åŠŸèƒ½é›†æˆç­‰ä¼˜åŠ¿ã€‚ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨é«˜äº®åŠŸèƒ½æ¥æ£€ç´¢ä¸ä½ æŸ¥è¯¢æœ€ç›¸å…³çš„æ–‡æœ¬ç‰‡æ®µã€‚è€Œæœ€é‡è¦çš„æ˜¯ï¼Œå®ƒç°å·²æˆä¸ºä¸€ä¸ªæ­£å¼å‘å¸ƒçš„åŠŸèƒ½ï¼

## è¯­ä¹‰æœç´¢çš„æ¼”è¿›

å¤šå¹´æ¥ï¼Œæˆ‘ä»¬å¯¹è¯­ä¹‰æœç´¢çš„æ–¹æ³•ä¸æ–­å‘å±•ï¼Œç›®æ ‡æ˜¯è®©å®ƒå°½å¯èƒ½ç®€å•ã€‚åœ¨
`semantic_text`
å­—æ®µç±»å‹æ¨å‡ºä¹‹å‰ï¼Œæ‰§è¡Œè¯­ä¹‰æœç´¢éœ€è¦æ‰‹åŠ¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

* é…ç½®æ˜ å°„ä»¥å…¼å®¹ä½ çš„åµŒå…¥å‘é‡ã€‚
* é…ç½®ä¸€ä¸ªæ‘„å–ç®¡é“ï¼Œä»¥ä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹ç”ŸæˆåµŒå…¥å‘é‡ã€‚
* ä½¿ç”¨è¯¥ç®¡é“æ¥æ‘„å–ä½ çš„æ–‡æ¡£ã€‚
* åœ¨æŸ¥è¯¢æ—¶ä½¿ç”¨ç›¸åŒçš„æœºå™¨å­¦ä¹ æ¨¡å‹ä¸ºæŸ¥è¯¢æ–‡æœ¬ç”ŸæˆåµŒå…¥å‘é‡ã€‚

[å½“æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§è®¾ç½®ä¸º â€œç®€å•â€](https://elasticstack.blog.csdn.net/article/details/134473784 "å½“æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§è®¾ç½®ä¸º â€œç®€å•â€")
ï¼Œä½†æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥è®©å®ƒå˜å¾—æ›´ç®€å•ã€‚äºæ˜¯ï¼Œ
`semantic_text`
è¯ç”Ÿäº†ã€‚

## åˆå§‹é˜¶æ®µ

æˆ‘ä»¬åœ¨ Elasticsearch 8.15 ä¸­å¼•å…¥äº†
`semantic_text`
ï¼Œç›®æ ‡æ˜¯ç®€åŒ–è¯­ä¹‰æœç´¢ã€‚å¦‚æœä½ å¯¹
`semantic_text`
è¿˜ä¸ç†Ÿæ‚‰ï¼Œå»ºè®®å…ˆé˜…è¯»æˆ‘ä»¬çš„
[åŸå§‹åšå®¢æ–‡ç« ](https://elasticstack.blog.csdn.net/article/details/139957669 "åŸå§‹åšå®¢æ–‡ç« ")
ï¼Œä»¥äº†è§£æˆ‘ä»¬çš„æ–¹æ³•èƒŒæ™¯ã€‚

æˆ‘ä»¬æœ€åˆå°†
`semantic_text`
ä½œä¸º Beta åŠŸèƒ½å‘å¸ƒï¼Œæ˜¯æœ‰å……åˆ†ç†ç”±çš„ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ‰ä¸€å¥å¹¿ä¸ºæµä¼ çš„çœŸç†ï¼šè®©æŸæ ·ä¸œè¥¿å˜å¾—ç®€å•ï¼Œå¾€å¾€æ˜¯æå…¶å›°éš¾çš„ï¼Œ
`semantic_text`
ä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨å®ƒçš„èƒŒåï¼Œæœ‰è®¸å¤šå¤æ‚çš„ç»„ä»¶ååŒå·¥ä½œï¼Œä»¥å®ç°è¿™ç§ â€œé­”æ³•èˆ¬â€ çš„è¯­ä¹‰æœç´¢ä½“éªŒã€‚æˆ‘ä»¬å¸Œæœ›èŠ±æ—¶é—´ç¡®ä¿è¿™äº›ç»„ä»¶æ­£ç¡®æ— è¯¯ï¼Œç„¶åå†å°†è¯¥åŠŸèƒ½æ­£å¼æ¨å‡ºã€‚äº‹å®è¯æ˜ï¼Œè¿™æ®µæ—¶é—´çš„æŠ•å…¥æ˜¯å€¼å¾—çš„ â€”â€” æˆ‘ä»¬åœ¨æœ€åˆçš„æ–¹æ³•ä¸Šè¿›è¡Œäº†å¤šæ¬¡è¿­ä»£ï¼Œå¢åŠ äº†æ–°åŠŸèƒ½ï¼Œå¹¶ä¼˜åŒ–äº†å­˜å‚¨ï¼Œä½¿
`semantic_text`
å˜å¾—æ›´ç®€å•ã€æ›´ç²¾ç‚¼ï¼Œå¹¶ä¸”æ›´å…·é•¿æœŸå¯ç»´æŠ¤æ€§ã€‚

æˆ‘ä»¬æœ€åˆçš„å®ç°ä¾èµ–äºä¿®æ”¹
`_source`
æ¥å­˜å‚¨æ¨ç†ç»“æœã€‚è¿™å¯¼è‡´
`semantic_text`
å­—æ®µå…·æœ‰ç›¸å¯¹å¤æ‚çš„å­å­—æ®µç»“æ„ï¼š

```
GET test-index/_doc/doc1
{
  "_index": "test-sparse",
  "_id": "doc1",
  "_source": {
    "infer_field": {
      "text": "these are not the droids you're looking for. He's free to go around",
      "inference": {
        "inference_id": "my-elser-endpoint",
        "model_settings": {
          "task_type": "sparse_embedding"
        },
        "chunks": [
          {
            "text": "these are not the droids you're looking for. He's free to go around",
            "embeddings": {
              "##oid": 1.9103845,
              "##oids": 1.768872,
              "free": 1.693662,
              "dr": 1.6103356,
              "around": 1.4376559,
              "these": 1.1396849

              â€¦
            }
          }
        ]
      }
    }
  }
}
```

è¿™ç§ç»“æ„å¸¦æ¥äº†ä¸€äº›é—®é¢˜ï¼š

* **è¿‡äºå†—é•¿ã€‚**
  é™¤äº†åŸå§‹å€¼å¤–ï¼Œå®ƒè¿˜åŒ…å«å…ƒæ•°æ®å’Œæ–‡æœ¬åˆ†ç‰‡ä¿¡æ¯ï¼Œä½¿ API å“åº”æ—¢éš¾ä»¥é˜…è¯»ï¼Œåˆæ¯”å®é™…éœ€è¦çš„æ›´å¤§ã€‚
* **å¢åŠ äº†ç£ç›˜ä¸Šçš„ç´¢å¼•å¤§å°ã€‚**
  ç”±äºåµŒå…¥å‘é‡å¯èƒ½éå¸¸å¤§ï¼Œå®ƒä»¬å®é™…ä¸Šè¢«å­˜å‚¨äº†ä¸¤æ¬¡ï¼šä¸€æ¬¡ç”¨äº Lucene ç´¢å¼•ä»¥æ”¯æŒæ£€ç´¢ï¼Œå¦ä¸€æ¬¡å­˜å‚¨åœ¨
  `_source`
  ä¸­ã€‚è¿™æå¤§åœ°å½±å“äº†
  `semantic_text`
  åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šçš„å¯æ‰©å±•æ€§ã€‚
* **ç®¡ç†èµ·æ¥ä¸å¤Ÿç›´è§‚ã€‚**
  åŸå§‹æä¾›çš„æ–‡æœ¬å€¼å­˜å‚¨åœ¨
  `text`
  å­å­—æ®µä¸­ï¼Œå› æ­¤éœ€è¦ç‰¹æ®Šå¤„ç†æ‰èƒ½åœ¨åç»­æ“ä½œä¸­è·å–è¯¥å€¼ã€‚è¿™å¯¼è‡´
  `semantic_text`
  å­—æ®µçš„è¡Œä¸ºä¸æ–‡æœ¬å­—æ®µæ—ä¸­çš„å…¶ä»–å­—æ®µä¸ä¸€è‡´ï¼Œä»è€Œå¸¦æ¥äº†ä¸€ç³»åˆ—å¤æ‚çš„è¿é”ååº”ï¼Œä½¿å¾—å®ƒæ›´éš¾é›†æˆåˆ°æ›´é«˜çº§çš„å·¥ä½œæµä¸­ã€‚

## è¯­ä¹‰æ–‡æœ¬å³æ–‡æœ¬

æˆ‘ä»¬çš„æ”¹è¿›ç‰ˆæœ¬ä¼˜é›…åœ°è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œé€šè¿‡ä¼˜åŒ–
`semantic_text`
åœ¨
`_source`
ä¸­çš„è¡¨ç¤ºæ–¹å¼ï¼Œä½¿å…¶æ›´åŠ ç®€æ´ã€‚ä¸å…¶åœ¨
`semantic_text`
å­—æ®µå†…ç›´æ¥å­˜å‚¨å…ƒæ•°æ®å’Œæ–‡æœ¬åˆ†ç‰‡ä¿¡æ¯çš„å¤æ‚å­å­—æ®µç»“æ„ï¼Œæˆ‘ä»¬ç°åœ¨æ”¹ç”¨ä¸€ä¸ª
**éšè—çš„å…ƒå­—æ®µï¼ˆmetafieldï¼‰**
æ¥å¤„ç†è¿™äº›å†…å®¹ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦ä¿®æ”¹
`_source`
æ¥å­˜å‚¨æ¨ç†ç»“æœã€‚

ä»å®é™…æ•ˆæœæ¥çœ‹ï¼Œè¿™ä¸€æ”¹è¿›æ„å‘³ç€ä½ æäº¤ç”¨äºç´¢å¼•çš„æ–‡æ¡£
`_source`
ï¼Œåœ¨æ£€ç´¢æ—¶ä¾ç„¶ä¼šä»¥ç›¸åŒçš„
`_source`
è¿”å›ï¼Œä¸ä¼šå†è¢«é¢å¤–ä¿®æ”¹æˆ–æ‰©å±•ã€‚

```
GET test-index/_doc/doc1
{
  "_index": "test-sparse",
  "_id": "doc1",
  "_source": {
    "infer_field": "these are not the droids you're looking for. He's free to go around"
  }
}
```

## ç»“æ„ç®€åŒ–å¸¦æ¥çš„å˜åŒ–

ä½ ä¼šæ³¨æ„åˆ°ï¼Œ
`_source`
ç»“æ„ä¸­ä¸å†åŒ…å«
`text`
æˆ–
`inference`
ä¹‹ç±»çš„å­å­—æ®µã€‚ç°åœ¨ï¼Œ
`_source`
ä¿æŒä¸ç´¢å¼•æ—¶æä¾›çš„å†…å®¹å®Œå…¨ä¸€è‡´ï¼Œå˜å¾—æ›´åŠ ç®€å•ï¼

> ğŸš¨
> **æ³¨æ„**
> ï¼šå¦‚æœä½ çš„ä»£ç ä¾èµ–äºè§£æ
> `semantic_text`
> å­—æ®µåœ¨æœç´¢ç»“æœæˆ–
> [Get API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-get.html "Get API")
> è¿”å›å€¼ä¸­çš„å­å­—æ®µç»“æ„ï¼Œè¿™å°†æ˜¯ä¸€ä¸ª
> **ç ´åæ€§å˜æ›´**
> ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ä»¥å‰è§£æçš„æ˜¯
> `infer_field.text`
> å­å­—æ®µçš„å€¼ï¼Œä½ éœ€è¦æ›´æ–°ä»£ç ï¼Œä½¿å…¶æ”¹ä¸ºè§£æ
> `infer_field`
> çš„å€¼ã€‚æˆ‘ä»¬å°½åŠ›é¿å…ç ´åæ€§å˜æ›´ï¼Œä½†ç”±äº
> `_source`
> ç»“æ„è°ƒæ•´è€Œç§»é™¤å­å­—æ®µç»“æ„ï¼Œè¿™æ¬¡å˜æ›´ä¸å¯é¿å…ã€‚

#### è¿™ä¸€ç®€åŒ–å¸¦æ¥çš„ä¸»è¦ä¼˜åŠ¿ï¼š

* **æ›´æ˜“ä½¿ç”¨ã€‚**
  ä¸å†éœ€è¦è§£æå¤æ‚çš„å­å­—æ®µç»“æ„æ¥è·å–åŸå§‹æ–‡æœ¬å€¼ï¼Œç›´æ¥è¯»å–å­—æ®µå€¼å³å¯ã€‚
* **å‡å°‘å†—ä½™ã€‚**
  å…ƒæ•°æ®å’Œæ–‡æœ¬åˆ†ç‰‡ä¿¡æ¯ä¸ä¼šå†å¹²æ‰° API å“åº”ï¼Œä½¿å…¶æ›´åŠ ç®€æ´ã€‚
* **æé«˜ç£ç›˜åˆ©ç”¨ç‡ã€‚**
  åµŒå…¥å‘é‡ä¸å†å­˜å‚¨åœ¨
  `_source`
  ä¸­ï¼Œå‡å°‘äº†å­˜å‚¨å ç”¨ã€‚
* **æ›´å¥½çš„é›†æˆæ€§ã€‚**
  ä½¿
  `semantic_text`
  æ›´å¥½åœ°æ”¯æŒ Elasticsearch å…¶ä»–åŠŸèƒ½ï¼Œå¦‚å¤šå­—æ®µï¼ˆmulti-fieldsï¼‰ã€æ–‡æ¡£çš„éƒ¨åˆ†æ›´æ–°ï¼ˆpartial updatesï¼‰ä»¥åŠé‡æ–°ç´¢å¼•ï¼ˆreindexingï¼‰ã€‚

è®©æˆ‘ä»¬ç¨å¾®æ‰©å±•ä¸€ä¸‹æœ€åä¸€ç‚¹ï¼Œå› ä¸ºå®ƒæ¶µç›–äº†å‡ ä¸ªé¢†åŸŸã€‚é€šè¿‡è¿™ç§ç®€åŒ–ï¼Œsemantic\_text å­—æ®µç°åœ¨å¯ä»¥ç”¨ä½œ
[multi-fields](https://www.elastic.co/guide/en/elasticsearch/reference/current/multi-fields.html "multi-fields")
çš„æºå’Œç›®æ ‡

```
PUT multi-field-source-example-index
{
  "mappings": {
    "properties": {
      "inference": {
        "type": "semantic_text",
        "fields": {
          "text": {
            "type": "text"
           }
        }
      }
    }
  }
}

PUT multi-field-target-example-index
{
  "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "fields": {
          "inference": {
            "type": "semantic_text"
           }
        }
      }
    }
  }
}
```

`semantic_text`
å­—æ®µç°åœ¨è¿˜æ”¯æŒé€šè¿‡
[Bulk API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html "Bulk API")
è¿›è¡Œéƒ¨åˆ†æ–‡æ¡£æ›´æ–°ï¼š

```
PUT partial-update-example-index
{
  "mappings": {
    "properties": {
      "inference": {
        "type": "semantic_text"
      },
      "source_field": {
        "type": "text",
        "copy_to": "inference"
      }
    }
  }
}

POST my-index/_doc/1
{
  "inference": "a test value",
  "source_field": "another test value"
}

POST my-index/_bulk
{ "update": {"_id": "1"} }
{ "doc": {"source_field": "a different test value"} }
```

ç°åœ¨ï¼Œä½ å¯ä»¥å°†æ•°æ®é‡æ–°ç´¢å¼•åˆ°ä½¿ç”¨ä¸åŒ
`inference_id`
çš„
`semantic_text`
å­—æ®µä¸­ã€‚

```
PUT source-index
{
  "mappings": {
    "properties": {
      "inference": {
        "type": "semantic_text",
        "inference_id": "my-elser-endpoint"
      }
    }
  }
}

PUT dest-index
{
  "mappings": {
    "properties": {
      "inference": {
        "type": "semantic_text",
        "inference_id": "my-e5-endpoint"
      }
    }
  }
}

POST dest-index/_doc/1
{
  "inference": "a test value"
}

POST _reindex
{
  "source": {
    "index": "source-index"
  },
  "dest": {
    "index": "dest-index"
  }
}
```

## è¯­ä¹‰é«˜äº®ï¼ˆSemantic Highlightingï¼‰

`semantic_text`
æœ€å—æ¬¢è¿çš„åŠŸèƒ½è¯·æ±‚ä¹‹ä¸€ï¼Œå°±æ˜¯èƒ½å¤Ÿåœ¨å­—æ®µå†…æ£€ç´¢æœ€ç›¸å…³çš„æ–‡æœ¬ç‰‡æ®µã€‚è¿™ä¸€åŠŸèƒ½å¯¹äº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰åº”ç”¨è‡³å…³é‡è¦ã€‚æ­¤å‰ï¼Œæˆ‘ä»¬ï¼ˆéå®˜æ–¹åœ°ï¼‰é€šè¿‡
`inner_hits`
æä¾›äº†ä¸€äº›ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼Œä½†ç°åœ¨æˆ‘ä»¬å†³å®šæ·˜æ±°
`inner_hits`
ï¼Œè½¬è€Œé‡‡ç”¨æ›´ç²¾ç®€çš„æ–¹æ¡ˆï¼š
**é«˜äº®ï¼ˆhighlightingï¼‰**
ã€‚

é«˜äº®æ˜¯ä¸€ç§å¸¸è§çš„
**è¯æ³•æœç´¢æŠ€æœ¯**
ï¼Œé€šå¸¸ç”¨äºæ–‡æœ¬å­—æ®µã€‚ç”±äº
`semantic_text`
å±äºæ–‡æœ¬å­—æ®µå®¶æ—ï¼Œå› æ­¤å°†é«˜äº®æŠ€æœ¯é€‚é…åˆ°
`semantic_text`
æ˜¯åˆç†çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ–°å¢äº†
**è¯­ä¹‰é«˜äº®ï¼ˆsemantic highlighterï¼‰**
ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ æ£€ç´¢ä¸æŸ¥è¯¢æœ€ç›¸å…³çš„æ–‡æœ¬ç‰‡æ®µï¼š

```
PUT highlighting-index
{
  "mappings": {
    "properties": {
      "inference": {
        "type": "semantic_text"
      }
    }
  }
}

POST highlighting-index/_doc/1
{
  "inference": ["Yosemite is one of the most popular national parks in the USA", "Park visitors should dispose of their trash properly in bear-proof trash bins to avoid attracting bears", "Bears are quite clever and curious though, so visitors should always be on the lookout for bear activity regardless"]
}

GET highlighting-index/_search
{
  "query": {
    "semantic": {
      "field": "inference",
      "query": "Where should I throw away my trash?"
    }
  },
  "highlight": {
    "fields": {
      "inference": {
        "order": "score",
        "number_of_fragments": 1
      }
    }
  }
}

{
    "took": 6,
    "timed_out": false,
    "_shards": {
        "total": 1,
        "successful": 1,
        "skipped": 0,
        "failed": 0
    },
    "hits": {
        "total": {
            "value": 1,
            "relation": "eq"
        },
        "max_score": 15.898441,
        "hits": [
            {
                "_index": "highlighting-index",
                "_id": "1",
                "_score": 15.898441,
                "_source": {
                    "inference": [
                        "Yosemite is one of the most popular national parks in the USA",
                        "Park visitors should dispose of their trash properly in bear-proof trash bins to avoid attracting bears",
                        "Bears are quite clever and curious though, so visitors should always be on the lookout for bear activity regardless"
                    ]
                },
                "highlight": {
                    "inference": [
                        "Park visitors should dispose of their trash properly in bear-proof trash bins to avoid attracting bears"
                    ]
                }
            }
        ]
    }
}


GET highlighting-index/_search
{
  "query": {
    "semantic": {
      "field": "inference",
      "query": "Are bears smart?"
    }
  },
  "highlight": {
    "fields": {
      "inference": {
        "order": "score",
        "number_of_fragments": 1
      }
    }
  }
}

{
    "took": 20,
    "timed_out": false,
    "_shards": {
        "total": 1,
        "successful": 1,
        "skipped": 0,
        "failed": 0
    },
    "hits": {
        "total": {
            "value": 1,
            "relation": "eq"
        },
        "max_score": 18.584934,
        "hits": [
            {
                "_index": "highlighting-index",
                "_id": "1",
                "_score": 18.584934,
                "_source": {
                    "inference": [
                        "Yosemite is one of the most popular national parks in the USA",
                        "Park visitors should dispose of their trash properly in bear-proof trash bins to avoid attracting bears",
                        "Bears are quite clever and curious though, so visitors should always be on the lookout for bear activity regardless"
                    ]
                },
                "highlight": {
                    "inference": [
                        "Bears are quite clever and curious though, so visitors should always be on the lookout for bear activity regardless"
                    ]
                }
            }
        ]
    }
}
```

è¯·å‚é˜…
[semantic\_text æ–‡æ¡£](https://www.elastic.co/guide/en/elasticsearch/reference/master/semantic-text.html#semantic-text-highlighting "semantic_text æ–‡æ¡£")
ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨é«˜äº®åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ã€‚

#### 

## **æ­£å¼ä¸Šçº¿**

éšç€
`_source`
è¡¨ç¤ºæ–¹å¼çš„è°ƒæ•´ï¼Œæˆ‘ä»¬ç°åœ¨æ­£å¼å®£å¸ƒ
`semantic_text`
**å·²æˆä¸ºæ­£å¼å‘å¸ƒçš„åŠŸèƒ½**
ğŸ‰ï¼è¿™æ„å‘³ç€æˆ‘ä»¬æ‰¿è¯ºä¸å†å¯¹è¯¥åŠŸèƒ½è¿›è¡Œç ´åæ€§æ›´æ”¹ï¼Œå¹¶æ­£å¼æ”¯æŒåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ä½œä¸ºç”¨æˆ·ï¼Œä½ å¯ä»¥æ”¾å¿ƒåœ°å°†
`semantic_text`
é›†æˆåˆ°ç”Ÿäº§å·¥ä½œæµä¸­ï¼ŒElastic ä¹Ÿå°†æŒç»­æä¾›æ”¯æŒï¼Œç¡®ä¿é•¿æœŸç¨³å®šæ€§ã€‚

#### 

## **ä» Beta è¿ç§»**

ä¸ºäº†ç¡®ä¿ä» Beta ç‰ˆæœ¬çš„å¹³ç¨³è¿ç§»ï¼Œæ‰€æœ‰åœ¨
**Elasticsearch 8.15 è‡³ 8.17 ç‰ˆæœ¬åˆ›å»ºçš„ç´¢å¼•**
ï¼Œæˆ–
**åœ¨ 1 æœˆ 30 æ—¥ä¹‹å‰åœ¨ Serverless ä¸­åˆ›å»ºçš„ç´¢å¼•**
ï¼Œä»å°†æŒ‰ç…§ Beta
`_source`
ç»“æ„è¿è¡Œã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬ä»å°†ä½¿ç”¨ Beta ç‰ˆæœ¬çš„
`_source`
è¡¨ç¤ºæ–¹å¼ã€‚

æˆ‘ä»¬å»ºè®®å°½æ—©è¿ç§»åˆ°æ­£å¼å‘å¸ƒç‰ˆæœ¬çš„
`_source`
ç»“æ„ã€‚ä½ å¯ä»¥é€šè¿‡
**é‡æ–°ç´¢å¼•ï¼ˆ
[reindexing](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html "reindexing")
ï¼‰åˆ°æ–°ç´¢å¼•**
æ¥å®Œæˆè¿ç§»ï¼š

```
PUT my-new-index
{
  "mappings": {
    "properties": {
      "inference": {
        "type": "semantic_text"
      }
    }
  }
}

POST _reindex
{
  "source": {
    "index": "my-old-index"
  },
  "dest": {
    "index": "my-new-index"
  },
  "script": {
    "source": "ctx._source.inference = ctx._source.inference.text"
  }
}
```

è¯·æ³¨æ„
`script`
å‚æ•°çš„ä½¿ç”¨ï¼Œå®ƒç”¨äºé€‚é…
`_source`
è¡¨ç¤ºæ–¹å¼çš„æ›´æ”¹ã€‚è¯¥è„šæœ¬ä¼šä»
`text`
å­å­—æ®µæå–å€¼ï¼Œå¹¶ç›´æ¥èµ‹ç»™
`semantic_text`
å­—æ®µã€‚

## **ç«‹å³å°è¯•**

è¿™äº›æ›´æ”¹å°†åœ¨
**Elasticsearch 8.18+**
ï¼ˆStack ç‰ˆï¼‰ä¸­æä¾›ï¼Œä½†å¦‚æœä½ æƒ³ç°åœ¨å°±ä½“éªŒï¼Œå®ƒä»¬å·²åœ¨
**Serverless**
ç‰ˆæœ¬ä¸­å¯ç”¨ã€‚æ­¤å¤–ï¼Œå®ƒä»¬è¿˜ä¸æˆ‘ä»¬åŒæœŸæ¨å‡ºçš„
**è¯­ä¹‰æœç´¢ç®€åŒ–**
æ–¹æ¡ˆå®Œç¾ç»“åˆã€‚ä½¿ç”¨è¿™ä¸¤è€…ï¼Œå¯ä»¥è®©ä½ çš„è¯­ä¹‰æœç´¢èƒ½åŠ›æ›´ä¸Šä¸€å±‚æ¥¼ï¼

ä½ å¯ä»¥é€šè¿‡
**[è‡ªåŠ©å¼ Search AI å®è·µè¯¾ç¨‹](https://www.elastic.co/demo-gallery/vector-search "è‡ªåŠ©å¼ Search AI å®è·µè¯¾ç¨‹")**
äº²è‡ªä½“éªŒå‘é‡æœç´¢ã€‚ç°åœ¨å°±
**å¼€å¯
[å…è´¹äº‘è¯•ç”¨](https://cloud.elastic.co/registration?onboarding_token=search&cta=cloudregistration&tech=trial&plcmt=cross%20module&pg=search-labs "å…è´¹äº‘è¯•ç”¨")**
ï¼Œæˆ–åœ¨
[æœ¬åœ°å®‰è£…](https://elasticstack.blog.csdn.net/article/details/143747798 "æœ¬åœ°å®‰è£…")
Elastic è¿›è¡Œå°è¯•ï¼

åŸæ–‡ï¼š
[Semantic Text: Simpler, better, leaner, stronger - Elasticsearch Labs](https://www.elastic.co/search-labs/blog/semantic-text-ga#try-it-out-yourself "Semantic Text: Simpler, better, leaner, stronger - Elasticsearch Labs")