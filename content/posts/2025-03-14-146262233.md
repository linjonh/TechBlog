---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35313034313234322f:61727469636c652f64657461696c732f313436323632323333"
layout: post
title: "MySQL-批量插入-vs-逐条插"
date: 2025-03-14 19:12:04 +0800
description: "批量插入：速度快，适合大数据量。逐条插入：灵活性高，适合小数据量或实时插入。根据你的需求选择合适的方式，能让你的程序跑得更快更高效！一句话总结：能批量插入就别逐条插，效率高得多！希望这篇文章对你有帮助！如果有问题，欢迎留言讨论~"
keywords: "MySQL 批量插入 vs 逐条插"
categories: ['Mysql']
tags: ['数据库', 'Mysql']
artid: "146262233"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146262233
    alt: "MySQL-批量插入-vs-逐条插"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146262233
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146262233
cover: https://bing.ee123.net/img/rand?artid=146262233
image: https://bing.ee123.net/img/rand?artid=146262233
img: https://bing.ee123.net/img/rand?artid=146262233
---

# MySQL 批量插入 vs 逐条插

## MySQL 插入数据：批量插入 vs 逐条插入，哪个更快？

在 MySQL 中，插入数据有两种常见方式：

1. **批量插入**
   ：一条 SQL 插入多条数据。
2. **逐条插入**
   ：每次插入一条数据。

这两种方式有什么区别？哪种更快？今天我们就来简单聊聊。

---

### 1. 批量插入：一次插多条

#### 示例代码

```sql
INSERT INTO users (name, age) VALUES 
('小明', 18),
('小红', 20),
('小刚', 22);

```

#### 优点

* **速度快**
  ：只需要执行一次 SQL，数据库开销小。
* **网络请求少**
  ：一次请求搞定多条数据，减少延迟。
* **锁占用时间短**
  ：对表的锁定时间更短，其他操作不会被阻塞太久。

#### 缺点

* **单次数据量过大**
  ：如果一次插入太多数据，可能会占用大量内存。
* **出错影响大**
  ：如果某条数据有问题，整批插入都会失败。

---

### 2. 逐条插入：一次插一条

#### 示例代码

```sql
INSERT INTO users (name, age) VALUES ('小明', 18);
INSERT INTO users (name, age) VALUES ('小红', 20);
INSERT INTO users (name, age) VALUES ('小刚', 22);

```

#### 优点

* **灵活性高**
  ：每条数据独立插入，某条失败不影响其他数据。
* **适合小数据量**
  ：数据量小的时候，操作简单直接。

#### 缺点

* **速度慢**
  ：每次插入都要执行 SQL，数据库开销大。
* **网络请求多**
  ：每次插入都需要一次网络请求，延迟高。
* **锁占用时间长**
  ：对表的锁定时间更长，可能影响其他操作。

---

### 3. 性能对比

#### 测试场景

* 插入 1000 条数据。

#### 测试结果

* **批量插入**
  ：耗时约 0.1 秒。
* **逐条插入**
  ：耗时约 5 秒。

#### 结论

批量插入的性能明显优于逐条插入，尤其是在数据量大的时候。

---

### 4. 什么时候用哪种方式？

#### 用批量插入

* 数据量大的时候（比如数据迁移、日志记录）。
* 需要快速插入大量数据的场景。

#### 用逐条插入

* 数据量小的时候。
* 需要保证每条数据独立性的场景（比如实时插入）。

---

### 5. 总结

* **批量插入**
  ：速度快，适合大数据量。
* **逐条插入**
  ：灵活性高，适合小数据量或实时插入。

根据你的需求选择合适的方式，能让你的程序跑得更快更高效！

---

**一句话总结**
：能批量插入就别逐条插，效率高得多！

---

希望这篇文章对你有帮助！如果有问题，欢迎留言讨论~