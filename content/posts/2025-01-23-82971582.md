---
layout: post
title: "小程序通过navigateToMiniProgram或者navigator实现小程序间传递大量文字信息"
date: 2025-01-23 15:59:09 +0800
description: "【小程序】通过navigateToMiniProgram或者navigator实现小程序间传递大量文"
keywords: "navigatetominiprogram"
categories: ['Rn']
tags: ['小程序间传递大量信息', '小程序跳小程序', 'Referrerinfo', 'Navigator', 'Navigatetominiprogram']
artid: "82971582"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=82971582
    alt: "小程序通过navigateToMiniProgram或者navigator实现小程序间传递大量文字信息"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=82971582
featuredImagePreview: https://bing.ee123.net/img/rand?artid=82971582
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【小程序】通过navigateToMiniProgram或者navigator实现小程序间传递大量文字信息
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="navigateToMiniProgramnavigator_0">
     </a>
     【小程序】通过navigateToMiniProgram或者navigator实现小程序间传递大量文字信息
    </h3>
    <blockquote>
     <p>
      有时候需要在小程序之间传递大量文字信息，如几百字甚至上千字的数据；亲测有如下两种方式可以实现。
     </p>
    </blockquote>
    <ol>
     <li>
      <strong>
       方式一 wx.navigateToMiniProgram
      </strong>
      <br/>
      <strong>
       注意：此方式官方已废弃，不再建议使用，但运行依然有效。
      </strong>
      <br/>
      代码如下：
     </li>
    </ol>
    <pre><code>发送端：

wx.navigateToMiniProgram({
          appId: 'wxcaeff85138f9****',
          extraData: {
            recommend: '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
              '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
              '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
              '斯里兰卡特色（高翘渔夫）+赠送《千与千寻》海滨小火车+康提舞表演' +
              '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
              '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
              '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n'
          },
          envVersion: 'develop'
        })
</code></pre>
    <blockquote>
     <p>
      <strong>
       注意：extraData为Object类型
      </strong>
     </p>
    </blockquote>
    <p>
     @1. 接收端可以存储到Storage中：
    </p>
    <pre><code>接收端：

app解析参数
onLaunch(options) {
    console.log('--wmb--poster--onlaunch--' + JSON.stringify(options))
    if(options &amp;&amp; options.referrerInfo.extraData &amp;&amp; options.referrerInfo.extraData.recommend){


      utils.storage.setStorageSync('recommend-f',options.referrerInfo.extraData.recommend)
    }
    console.log('--wmb--recommend--' + options.referrerInfo.extraData.recommend)
    this.testAsync()
  }
  
  page 使用参数
  let temp = utils.storage.getStorageSync('recommend-f')
       console.log('--wmb--temp' + JSON.stringify(temp))
       this.recommend = temp
       console.log('--wmb--recommend--' + this.recommend)
       this.$apply()
</code></pre>
    <p>
     @2. 还可以通过globalData保存到内存中：
    </p>
    <pre><code>App解析参数：
onShow(options) {
    console.log('--wmb--onshow--' + JSON.stringify(options))
    if (options &amp;&amp; options.referrerInfo &amp;&amp; options.referrerInfo.extraData &amp;&amp; options.referrerInfo.extraData.recommend) {
      this.globalData.recommend = options.referrerInfo.extraData.recommend
      // 保存数据到globalData中
    }
    console.log('--wmb--onshow--globalData.recommend--' + JSON.stringify(this.globalData.recommend))
  }

page使用参数：
      this.recommend = wepy.$instance.globalData.recommend
      // 使用globalData中的数据
      console.log('--wmb-onload-recommend--' + this.recommend)
      this.$apply()
</code></pre>
    <hr/>
    <pre><code>在App.onShow(options)方法中打印输出如下：

--app--onshow--{"path":"pages/index","query":{"productId":"210561493","p":"33333"},"scene":1037,"referrerInfo":{"appId":"wxcaeff****8f91239","extraData":{"recommend":"推荐理由是"}}}
</code></pre>
    <blockquote>
     <p>
      注意： 接收端需要在App中处理，可以在App.onLaunch()，App.onShow()中解析。
      <strong>
       建议在App.onShow()中解析
      </strong>
      。解析到的数据可以保存在内存中，也可以存储到Storage中。
      <strong>
       建议保存在内存中。
      </strong>
     </p>
    </blockquote>
    <ol start="2">
     <li>
      <strong>
       方式二 navigator组件
      </strong>
     </li>
    </ol>
    <p>
     代码如下：
    </p>
    <pre><code>&lt;navigator target="miniProgram" app-id="wxcaeff85138f9****" open-type="navigate" extra-data="{<!-- -->{extra}}" version="develop"&gt;跳转到海报&lt;/navigator&gt;
</code></pre>
    <p>
     data中定义extra:
    </p>
    <pre><code>extra: {
        recommend: 'start 两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '斯里兰卡特色（高翘渔夫）+赠送《千与千寻》海滨小火车+康提舞表演' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '斯里兰卡特色（高翘渔夫）+赠送《千与千寻》海滨小火车+康提舞表演' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '斯里兰卡特色（高翘渔夫）+赠送《千与千寻》海滨小火车+康提舞表演' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '斯里兰卡特色（高翘渔夫）+赠送《千与千寻》海滨小火车+康提舞表演' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '斯里兰卡特色（高翘渔夫）+赠送《千与千寻》海滨小火车+康提舞表演' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！\n' +
          '斯里兰卡特色（高翘渔夫）+赠送《千与千寻》海滨小火车+康提舞表演' +
          '两晚南部海滨免费升级入住5星酒店，享受印度洋海滨气息，饱览西南海岸线的美丽风景；\n' +
          '被马可波罗誉为“最美丽的海岛：古老神秘的国度、辉煌的寺庙、曲折的海岸线、原始质朴的南亚风情\n' +
          '米内日亚森林公园，近距离拍摄野生动物，和野生动物亲密接触！end \n'
      }
</code></pre>
    <blockquote>
     <p>
      <strong>
       注意：extra为Object类型
      </strong>
      ，接收端解析的代码不变。
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f6164617961626574746572:2f61727469636c652f64657461696c732f3832393731353832" class_="artid" style="display:none">
 </p>
</div>


