---
layout: post
title: "Go学习笔记Gin-路由"
date: 2025-03-06 15:04:04 +0800
description: "路由是URI到函数的映射。一个URI含:同时访问的时候，还需要指明HTTP METHOD，比如GETGET方法请求一个指定资源的表示形式. 使用GET的请求应该只被用于获取数据.（查询）POSTPOST方法用于将实体提交到指定的资源，通常会导致在服务器上的状态变化（新增）HEADHEAD方法请求一个与GET请求的响应相同的响应，但没有响应体.PUTPUT方法用请求有效载荷替换目标资源的所有当前表示DELETEDELETE方法删除指定的资源CONNECT。"
keywords: "Go学习笔记：Gin-路由"
categories: ['未分类']
tags: ['笔记', '学习', 'Golang']
artid: "146071051"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146071051
    alt: "Go学习笔记Gin-路由"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146071051
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146071051
cover: https://bing.ee123.net/img/rand?artid=146071051
image: https://bing.ee123.net/img/rand?artid=146071051
img: https://bing.ee123.net/img/rand?artid=146071051
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Go学习笔记：Gin-路由
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c65cc241f8ca4e2bb38933ce56266d8c.png"/>
    </p>
    <p>
     路由是URI到函数的映射。
    </p>
    <p>
     一个URI含:
     <code>
      http://localhost:8080/user/find?id=11
     </code>
    </p>
    <ul>
     <li>
      协议，比如http，https等
     </li>
     <li>
      ip端口或者域名，比如127.0.0.1:8080或者
      <code>
       www.test.com
      </code>
     </li>
     <li>
      path，比如 /path
     </li>
     <li>
      query，比如 ?query
     </li>
    </ul>
    <p>
     同时访问的时候，还需要指明HTTP METHOD，比如
    </p>
    <ul>
     <li>
      <p>
       GET
      </p>
      <p>
       GET方法请求一个指定资源的表示形式. 使用GET的请求应该只被用于获取数据.（查询）
      </p>
     </li>
     <li>
      <p>
       POST
      </p>
      <p>
       POST方法用于将实体提交到指定的资源，通常会导致在服务器上的状态变化（新增）
      </p>
     </li>
     <li>
      <p>
       HEAD
      </p>
      <p>
       HEAD方法请求一个与GET请求的响应相同的响应，但没有响应体.
      </p>
     </li>
     <li>
      <p>
       PUT
      </p>
      <p>
       PUT方法用请求有效载荷替换目标资源的所有当前表示
      </p>
     </li>
     <li>
      <p>
       DELETE
      </p>
      <p>
       DELETE方法删除指定的资源
      </p>
     </li>
     <li>
      <p>
       CONNECT
      </p>
      <p>
       CONNECT方法建立一个到由目标资源标识的服务器的隧道。
      </p>
     </li>
     <li>
      <p>
       OPTIONS
      </p>
      <p>
       OPTIONS方法用于描述目标资源的通信选项。
      </p>
     </li>
     <li>
      <p>
       TRACE
      </p>
      <p>
       TRACE方法沿着到目标资源的路径执行一个消息环回测试。
      </p>
     </li>
     <li>
      <p>
       PATCH
      </p>
      <p>
       PATCH方法用于对资源应用部分修改。
      </p>
     </li>
    </ul>
    <blockquote>
     <p>
      使用的时候，应该尽量遵循其语义
     </p>
    </blockquote>
    <h3>
     <a id="1_RESTful_API_54">
     </a>
     1. RESTful API规范
    </h3>
    <p>
     RESTful API 的规范建议我们使用特定的HTTP方法来对服务器上的资源进行操作。
    </p>
    <p>
     比如：
    </p>
    <ol>
     <li>
      GET，表示读取服务器上的资源 （查）
     </li>
     <li>
      POST，表示在服务器上创建资源 （增）
     </li>
     <li>
      PUT,表示更新或者替换服务器上的资源 （改）
     </li>
     <li>
      DELETE，表示删除服务器上的资源 （删）
     </li>
     <li>
      PATCH，表示更新/修改资源的一部分
     </li>
    </ol>
    <h3>
     <a id="2__66">
     </a>
     2. 请求方法
    </h3>
    <p>
     比如
    </p>
    <pre><code class="prism language-go">	r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/get"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"get"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	r<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/post"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"post"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	r<span class="token punctuation">.</span><span class="token function">DELETE</span><span class="token punctuation">(</span><span class="token string">"/delete"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"delete"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	r<span class="token punctuation">.</span><span class="token function">PUT</span><span class="token punctuation">(</span><span class="token string">"/put"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"put"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     如果想要支持所有：
    </p>
    <pre><code class="prism language-go">r<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span><span class="token string">"/any"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"any"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     如果想要支持其中的几种：
    </p>
    <pre><code class="prism language-go">   r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//数组 map list 结构体</span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{<!-- --></span>
			<span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"hello world"</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	r<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//数组 map list 结构体</span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{<!-- --></span>
			<span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"hello world"</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="3_URI_110">
     </a>
     3. URI
    </h3>
    <p>
     URI书写的时候，我们不需要关心scheme和authority这两部分，我们主要通过path和query两部分的书写来进行资源的定位。
    </p>
    <ul>
     <li>
      <p>
       静态url，比如
       <code>
        /hello
       </code>
       ，
       <code>
        /user/find
       </code>
      </p>
      <pre><code class="prism language-go">r<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/user/find"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       路径参数，比如
       <code>
        /user/find/:id
       </code>
      </p>
      <pre><code class="prism language-go">r<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/user/find/:id"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		param <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       模糊匹配，比如
       <code>
        /user/*path
       </code>
      </p>
      <pre><code class="prism language-go">r<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/user/*path"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		param <span class="token operator">:=</span> ctx<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>
		ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="4__141">
     </a>
     4. 处理函数
    </h3>
    <p>
     定义：
    </p>
    <pre><code class="prism language-go"><span class="token keyword">type</span> HandlerFunc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>Context<span class="token punctuation">)</span>
</code></pre>
    <p>
     通过上下文的参数，获取http的请求参数，响应http请求等。
    </p>
    <h3>
     <a id="5__151">
     </a>
     5. 分组路由
    </h3>
    <p>
     在进行开发的时候，我们往往要进行模块的划分，比如用户模块，以user开发，商品模块，以goods开头。
    </p>
    <p>
     或者进行多版本开发，不同版本之间路径是一致的，这种时候，就可以用到分组路由了。
    </p>
    <p>
     比如
    </p>
    <pre><code class="prism language-go">   ug <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">Group</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		ug<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"find"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"user find"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		ug<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"save"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"user save"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	gg <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">Group</span><span class="token punctuation">(</span><span class="token string">"/goods"</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		gg<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"find"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"goods find"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		gg<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"save"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			ctx<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"goods save"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34373131333936302f:61727469636c652f64657461696c732f313436303731303531" class_="artid" style="display:none">
 </p>
</div>


