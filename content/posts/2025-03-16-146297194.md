---
layout: post
title: "SpringBoot前后端不分离,前端如何解析后端返回html所携带的参数"
date: 2025-03-16 16:54:41 +0800
description: "如果。"
keywords: "SpringBoot前后端不分离，前端如何解析后端返回html所携带的参数"
categories: ['未分类']
tags: ['后端', '前端', 'Spring', 'Boot']
artid: "146297194"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146297194
    alt: "SpringBoot前后端不分离,前端如何解析后端返回html所携带的参数"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146297194
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146297194
cover: https://bing.ee123.net/img/rand?artid=146297194
image: https://bing.ee123.net/img/rand?artid=146297194
img: https://bing.ee123.net/img/rand?artid=146297194
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     SpringBoot前后端不分离，前端如何解析后端返回html所携带的参数
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     有一个SpringBoot实现的前后端不分离项目，当前端跳转某个界面时，比如下面的菜单树按钮，后端在返回页面menuTree.html时，还携带了一个参数角色roleId，以便打开菜单树，还要根据这个角色查询对应的分配授权的菜单树
    </p>
    <p>
     后端返回menuTree.html
    </p>
    <pre><code class="language-java">@GetMapping("/menu/menuTree")
    public String getMenuTree(Model model, @RequestParam(value = "roleId") Long roleId) {
        model.addAttribute("roleId",roleId);
        // 对应/WEB-INF/view/menuTree.html
        return "menuTree";
    }</code></pre>
    <p>
     前端menuTree.html
    </p>
    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html  lang="en" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
    &lt;title&gt;菜单&lt;/title&gt;
    &lt;link rel="stylesheet" type="text/css" href="/sbSecDemo/static/layui-v2.9.24/layui/css/layui.css" media="all"&gt;
	&lt;style&gt;
.layuimini-container {
    border: 1px solid #f2f2f2;
    border-radius: 5px;
    background-color: #ffffff
}

.layuimini-main {
    margin: 10px 10px 10px 10px;
}
&lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;


&lt;script type="text/javascript" src="/sbSecDemo/static/layui-v2.9.24/layui/layui.js"&gt;&lt;/script&gt;

&lt;div class="layuimini-container"&gt;
    &lt;div class="layuimini-main" STYLE="margin: 20px"&gt;
        &lt;div id="roleTree"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
    layui.use(['tree', 'util'], function () {
        var tree = layui.tree;
        var layer = layui.layer;
        var util = layui.util;
        const roleId = ${roleId};
        // 加载菜单树
        $.get('/sbSecDemo/menu/menuTreeList?roleId=' + ${roleId}, function (res) {
            tree.render({
                elem: '#roleTree',
                data: res.data,
                showCheckbox: true, // 是否显示复选框
                onlyIconControl: true,  // 是否仅允许节点左侧图标控制展开收缩
                id: 'roleTreeId',
                isJump: true, // 是否允许点击节点时弹出新窗口跳转
                edit: ['add', 'update', 'del'], // 开启节点的右侧操作图标
                operate: function (obj) {
                    var type = obj.type; // 操作类型：add、update、del
                    var data = obj.data;
                }, // 当前节点数据
                oncheck: function (obj) {
                    console.log(obj.data); // 获取选中节点
                    var data = obj.data;  //获取当前点击的节点数据
                    layer.msg('状态：' + obj.state + '&lt;br&gt;节点数据：' + JSON.stringify(data));
                }
            });
        });
    });
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
    <p>
     上述 const roleId = ${roleId};
     <br/>
     // 加载菜单树
     <br/>
     $.get('/sbSecDemo/menu/menuTreeList?roleId=' + ${roleId}, function (res) {}
    </p>
    <p>
     是拿不到roleId值的，会解析成http://localhost:8081/sbSecDemo/menu/menuTreeList?roleId=${roleId}
    </p>
    <p>
     改成下面就可以
    </p>
    <pre><code class="language-html"> const roleId = [[${roleId}]]; // Thymeleaf 渲染
        // 加载菜单树
        $.get('/sbSecDemo/menu/menuTreeList?roleId=' + roleId, function (res) {}</code></pre>
    <p>
     效果如下
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/de0f4eb328814df2ab1fcc0ea6174fbf.png"/>
    </p>
    <p style="text-align:center">
     <span style="color:#fe2c24">
      <strong>
       原因分析
      </strong>
     </span>
    </p>
    <hr/>
    <p>
     代码中
     <code>
      "${roleId}"
     </code>
     没有被正确解析，是因为
     <code>
      "${roleId}"
     </code>
     是模板引擎（如 Thymeleaf 或 JSP）的语法，而你在 JavaScript 中直接使用它时，浏览器会将其视为普通字符串，而不是动态值。
    </p>
    <p>
     要解决这个问题，你需要确保
     <code>
      roleId
     </code>
     的值能够正确传递到 JavaScript 中。以下是几种解决方案：
    </p>
    <h4>
     <strong>
      1. 通过后端渲染将
      <code>
       roleId
      </code>
      嵌入到 JavaScript 中
     </strong>
    </h4>
    <p>
     如果你使用的是模板引擎（如 Thymeleaf 或 JSP），可以将
     <code>
      roleId
     </code>
     直接渲染到 JavaScript 中。
    </p>
    <h5>
     Thymeleaf 示例：
    </h5>
    <pre><code class="language-html">&lt;script&gt;
    layui.use(function() {
        const roleId = [[${roleId}]]; // Thymeleaf 渲染
        $.get('/sbSecDemo/menu/menuTreeList?roleId=' + roleId, function(res) {
            console.log(res);
        });
    });
&lt;/script&gt;</code></pre>
    <h5>
     JSP 示例：
    </h5>
    <pre><code class="language-html">&lt;script&gt;
    layui.use(function() {
        const roleId = "${roleId}"; // JSP 渲染
        $.get('/sbSecDemo/menu/menuTreeList?roleId=' + roleId, function(res) {
            console.log(res);
        });
    });
&lt;/script&gt;</code></pre>
    <h4>
     <strong>
      2. 通过隐藏字段传递
      <code>
       roleId
      </code>
     </strong>
    </h4>
    <p>
     你可以在 HTML 中定义一个隐藏字段，将
     <code>
      roleId
     </code>
     存储在其中，然后在 JavaScript 中读取该字段的值。
    </p>
    <h5>
     HTML：
    </h5>
    <pre><code class="language-html">&lt;input type="hidden" id="roleId" value="${roleId}"&gt;

&lt;script&gt;
    layui.use(function() {
        const roleId = document.getElementById('roleId').value;
        $.get('/sbSecDemo/menu/menuTreeList?roleId=' + roleId, function(res) {
            console.log(res);
        });
    });
&lt;/script&gt;</code></pre>
    <h4>
     <strong>
      3. 通过 URL 参数解析
      <code>
       roleId
      </code>
     </strong>
    </h4>
    <p>
     如果
     <code>
      roleId
     </code>
     是通过 URL 参数传递的（例如
     <code>
      http://localhost:8081/menuTree?roleId=123
     </code>
     ），可以使用 JavaScript 解析 URL 参数。
    </p>
    <h5>
     JavaScript：
    </h5>
    <pre><code class="language-html">&lt;script&gt;
    layui.use(function() {
        // 解析 URL 参数
        function getQueryParam(name) {
            const query = window.location.search.substring(1);
            const params = query.split('&amp;');
            for (const param of params) {
                const [key, value] = param.split('=');
                if (key === name) {
                    return decodeURIComponent(value);
                }
            }
            return null;
        }

        const roleId = getQueryParam('roleId');
        if (roleId) {
            $.get('/sbSecDemo/menu/menuTreeList?roleId=' + roleId, function(res) {
                console.log(res);
            });
        } else {
            console.error('Role ID not found in URL');
        }
    });
&lt;/script&gt;</code></pre>
    <h4>
     <strong>
      4. 使用 AJAX 请求获取
      <code>
       roleId
      </code>
     </strong>
    </h4>
    <p>
     如果
     <code>
      roleId
     </code>
     需要通过 AJAX 请求从后端获取，可以单独发送一个请求来获取
     <code>
      roleId
     </code>
     ，然后再发送第二个请求。
    </p>
    <h5>
     JavaScript：
    </h5>
    <pre><code class="language-html">&lt;script&gt;
    layui.use(function() {
        // 先获取 roleId
        $.get('/sbSecDemo/getRoleId', function(roleId) {
            // 再发送请求
            $.get('/sbSecDemo/menu/menuTreeList?roleId=' + roleId, function(res) {
                console.log(res);
            });
        });
    });
&lt;/script&gt;</code></pre>
    <h4>
     <strong>
      总结
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       如果
       <code>
        roleId
       </code>
       是通过后端渲染的，确保使用模板引擎语法（如 Thymeleaf 的
       <code>
        [[${roleId}]]
       </code>
       或 JSP 的
       <code>
        ${roleId}
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       如果
       <code>
        roleId
       </code>
       是通过 URL 参数传递的，可以使用 JavaScript 解析 URL。
      </p>
     </li>
     <li>
      <p>
       如果
       <code>
        roleId
       </code>
       需要通过 AJAX 获取，可以分两步发送请求。
      </p>
     </li>
     <li>
      <p>
       如果
       <code>
        roleId
       </code>
       是固定的，可以通过隐藏字段传递。
      </p>
     </li>
    </ul>
    <p>
     根据你的具体场景选择合适的方式即可。如果仍有问题，请提供更多上下文信息，我会进一步协助你！
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33353638333534352f:61727469636c652f64657461696c732f313436323937313934" class_="artid" style="display:none">
 </p>
</div>


