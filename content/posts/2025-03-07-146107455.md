---
layout: post
title: "策略模式详解实现灵活多样的支付方式"
date: 2025-03-07 23:06:41 +0800
description: "策略模式通过定义一系列算法，使得这些算法可以互换使用，并且客户端可以在运行时选择不同的算法。通过使用策略模式，我们可以在不修改客户端代码的情况下轻松添加新的算法，实现了代码的开放-关闭原则（Open/Closed Principle）。策略模式在实际开发中非常有用，特别是在需要动态选择算法或行为的场景下。希望通过本文的介绍，您对策略模式有了更深入的理解，并能在实际项目中灵活应用。"
keywords: "多支付方式 策略"
categories: ['未分类']
tags: ['策略模式', 'Java']
artid: "146107455"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146107455
    alt: "策略模式详解实现灵活多样的支付方式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146107455
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146107455
cover: https://bing.ee123.net/img/rand?artid=146107455
image: https://bing.ee123.net/img/rand?artid=146107455
img: https://bing.ee123.net/img/rand?artid=146107455
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     策略模式详解：实现灵活多样的支付方式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_1">
     </a>
     多支付方式的实现：策略模式详解
    </h2>
    <p>
     策略模式（Strategy Pattern）是一种行为设计模式，它定义了一系列算法，并将每个算法封装起来，使它们可以互换使用。策略模式使得算法可以独立于使用它的客户端变化。本文将通过一个具体的业务场景来介绍策略模式，并给出相应的代码实现。
    </p>
    <h3>
     <a id="_5">
     </a>
     业务场景
    </h3>
    <p>
     我们以一个电商平台为例，该平台支持多种支付方式，包括信用卡支付、PayPal支付和比特币支付。我们希望在不修改客户端代码的情况下可以轻松添加新的支付方式。
    </p>
    <h3>
     <a id="_9">
     </a>
     策略模式结构
    </h3>
    <p>
     策略模式主要包括以下几个部分：
    </p>
    <ol>
     <li>
      策略接口（Strategy）：定义了算法的接口。
     </li>
     <li>
      具体策略（Concrete Strategy）：实现了策略接口的具体算法。
     </li>
     <li>
      上下文（Context）：使用策略对象。
     </li>
    </ol>
    <h3>
     <a id="_16">
     </a>
     类图
    </h3>
    <p>
     下面是策略模式的类图：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1becb9d2654046ba891681a7cfb13fa2.png#pic_center"/>
    </p>
    <h4>
     <a id="_22">
     </a>
     策略接口
    </h4>
    <p>
     首先，我们定义一个策略接口
     <code>
      PaymentStrategy
     </code>
     ，所有的支付方式都需要实现这个接口。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 定义支付策略接口</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentStrategy</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 支付方法，接受支付金额作为参数</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_33">
     </a>
     具体策略
    </h4>
    <p>
     接下来，我们实现几个具体的支付策略：信用卡支付、PayPal支付和比特币支付。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 信用卡支付策略的实现</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreditCardPayment</span> <span class="token keyword">implements</span> <span class="token class-name">PaymentStrategy</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> cardNumber<span class="token punctuation">;</span> <span class="token comment">// 信用卡号</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> cardHolderName<span class="token punctuation">;</span> <span class="token comment">// 持卡人姓名</span>

    <span class="token comment">// 构造函数初始化信用卡信息</span>
    <span class="token keyword">public</span> <span class="token class-name">CreditCardPayment</span><span class="token punctuation">(</span><span class="token class-name">String</span> cardNumber<span class="token punctuation">,</span> <span class="token class-name">String</span> cardHolderName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cardNumber <span class="token operator">=</span> cardNumber<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cardHolderName <span class="token operator">=</span> cardHolderName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 信用卡支付逻辑</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Paid "</span> <span class="token operator">+</span> amount <span class="token operator">+</span> <span class="token string">" using Credit Card."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token comment">// PayPal支付策略的实现</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PayPalPayment</span> <span class="token keyword">implements</span> <span class="token class-name">PaymentStrategy</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span> <span class="token comment">// PayPal账号邮箱</span>

    <span class="token comment">// 构造函数初始化PayPal账号</span>
    <span class="token keyword">public</span> <span class="token class-name">PayPalPayment</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// PayPal支付逻辑</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Paid "</span> <span class="token operator">+</span> amount <span class="token operator">+</span> <span class="token string">" using PayPal."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-java"><span class="token comment">// 比特币支付策略的实现</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BitcoinPayment</span> <span class="token keyword">implements</span> <span class="token class-name">PaymentStrategy</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> walletAddress<span class="token punctuation">;</span> <span class="token comment">// 比特币钱包地址</span>

    <span class="token comment">// 构造函数初始化比特币钱包地址</span>
    <span class="token keyword">public</span> <span class="token class-name">BitcoinPayment</span><span class="token punctuation">(</span><span class="token class-name">String</span> walletAddress<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>walletAddress <span class="token operator">=</span> walletAddress<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 比特币支付逻辑</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Paid "</span> <span class="token operator">+</span> amount <span class="token operator">+</span> <span class="token string">" using Bitcoin."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_93">
     </a>
     上下文
    </h4>
    <p>
     最后，我们需要一个上下文类
     <code>
      PaymentContext
     </code>
     ，它使用
     <code>
      PaymentStrategy
     </code>
     来进行支付。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 支付上下文类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentContext</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentStrategy</span> paymentStrategy<span class="token punctuation">;</span> <span class="token comment">// 当前使用的支付策略</span>

    <span class="token comment">// 设置支付策略</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPaymentStrategy</span><span class="token punctuation">(</span><span class="token class-name">PaymentStrategy</span> paymentStrategy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>paymentStrategy <span class="token operator">=</span> paymentStrategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 使用当前的支付策略进行支付</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">payAmount</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        paymentStrategy<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_114">
     </a>
     客户端代码
    </h4>
    <p>
     在客户端代码中，我们可以根据不同的支付方式来设置不同的策略。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">PaymentContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PaymentContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用信用卡支付</span>
        context<span class="token punctuation">.</span><span class="token function">setPaymentStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CreditCardPayment</span><span class="token punctuation">(</span><span class="token string">"1234-5678-9012-3456"</span><span class="token punctuation">,</span> <span class="token string">"John Doe"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">payAmount</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用PayPal支付</span>
        context<span class="token punctuation">.</span><span class="token function">setPaymentStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PayPalPayment</span><span class="token punctuation">(</span><span class="token string">"john.doe@example.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">payAmount</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用比特币支付</span>
        context<span class="token punctuation">.</span><span class="token function">setPaymentStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BitcoinPayment</span><span class="token punctuation">(</span><span class="token string">"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">payAmount</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_137">
     </a>
     测试结果
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c8ff1983214149a1ba6566bea847a47a.png"/>
    </p>
    <h3>
     <a id="_140">
     </a>
     总结
    </h3>
    <p>
     策略模式通过定义一系列算法，使得这些算法可以互换使用，并且客户端可以在运行时选择不同的算法。通过使用策略模式，我们可以在不修改客户端代码的情况下轻松添加新的算法，实现了代码的开放-关闭原则（Open/Closed Principle）。
    </p>
    <p>
     策略模式在实际开发中非常有用，特别是在需要动态选择算法或行为的场景下。希望通过本文的介绍，您对策略模式有了更深入的理解，并能在实际项目中灵活应用。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f37333435303332392f:61727469636c652f64657461696c732f313436313037343535" class_="artid" style="display:none">
 </p>
</div>


