---
layout: post
title: "Spring-Cloud-Alibaba快速入门03-OpenFeign"
date: 2025-09-10T23:12:39+0800
description: "本文介绍了Spring Cloud OpenFeign的使用方法，对比了Feign与OpenFeign的差异。通过代码示例演示了：（1）服务间远程调用的实现步骤，包括添加依赖、启用注解、定义Feign接口及调用流程；（2）调用第三方API的配置方式。文章强调OpenFeign的两种调用模式（指定URL或注册中心服务发现），并总结了声明式接口的编写规范。"
keywords: "Spring Cloud Alibaba快速入门03-OpenFeign"
categories: ['Springcloud']
tags: ['后端', 'Spring', 'Spring', 'Cloud', 'Boot']
artid: "151392980"
arturl: "https://blog.csdn.net/weixin_46425661/article/details/151392980"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151392980
    alt: "Spring-Cloud-Alibaba快速入门03-OpenFeign"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151392980
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151392980
cover: https://bing.ee123.net/img/rand?artid=151392980
image: https://bing.ee123.net/img/rand?artid=151392980
img: https://bing.ee123.net/img/rand?artid=151392980
---



# Spring Cloud Alibaba快速入门03-OpenFeign


[#王者杯·14天创作挑战营·第5期#](https://activity.csdn.net/writing?id=10949)

---

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/e42c93aff23544b994a78e657399651f.png)

## 前言

官网：https://docs.spring.io/spring-cloud-openfeign/reference/spring-cloud-openfeign.html#spring-cloud-feign  
 注意：OpenFeign 是一个声明式远程调用客户端；  
 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/80c860ab0196482d9514d7be815c7f84.png)

### Feign‌与OpenFeign的异同

‌Feign‌：由Netflix开发，是一个声明式HTTP客户端，通过接口和注解简化远程服务调用，内置Ribbon实现负载均衡，但原生不支持Spring MVC注解。‌‌  
 ‌OpenFeign‌：Spring Cloud团队在Feign基础上二次开发，完全兼容Feign API，新增对Spring MVC注解（如@RequestMapping）的支持，并深度集成Spring Cloud生态（如Eureka、Hystrix）。‌‌

## 代码示例

### 远程调用注册中心其他服务

#### 1.services加入依赖

```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-openfeign</artifactId>
</dependency>

```

#### 2.启动类中开启功能

```java
@EnableFeignClients //开启Feign远程调用功能
@SpringBootApplication
public class OrderApplication {
    public static void main(String[] args) {
        SpringApplication.run(OrderApplication.class, args);
    }
 }   

```

#### 3.order服务远程调用接口

```java
import com.qf.entity.Product;
import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;

//填写需要远程调用的服务
@FeignClient(value = "qf-service-product") // feign客户端
public interface ProductFeignClient {
    //mvc注解的两套使用逻辑
    //1、标注在Controller上，是接受这样的请求
    //2、标注在FeignClient上，是发送这样的请求
    @GetMapping("/product/{id}")
    Product getProductById(@PathVariable("id") Long id);
}

```

#### 4.order服务使用

```java
    @Autowired
    private ProductFeignClient productFeignClient;

    @Override
    public Order createOrder(Long userId, Long productId) {
//        Product product = getProductFromRemoteWithLoadBalanceAnnotation(productId);
        Product product = productFeignClient.getProductById(productId);
        Order order = new Order();
        order.setId(1L);
        order.setUserId(userId);
        order.setTotalAmount(new BigDecimal(100));
        order.setAddress("北京");
        order.setProductList(Arrays.asList(product));
        return order;
    }

```

注意：调用商品服务时会自动负载均衡  
 在openfeign中写的远程调用接口和在controller写接口的格式相同。

### 远程调用第三方接口代码示例

可以通过openFeign直接调用第三方接口

```java
import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.PostMapping;

/**
 * 调用第三方接口api
 */
@FeignClient(value = "test-client", url = "https://blog.csdn.net/weixin_46425661")
public interface TestFeignClient {


    @PostMapping("/article/details/151195266")
    String getDetails();
}

```

测试类

```java
@SpringBootTest
public class LoadBalancerTest {

    @Autowired
    private TestFeignClient testFeignClient;

    @Test
    void Test(){
        String details = testFeignClient.getDetails();
        System.out.println("details = " + details);
    }
}

```

## 总结

如果指定了url地址，所以会向该指定url发送请求。  
 如果没有指定url地址则，则openfeign自动连上注册中心，寻找对应的服务名对应的可访问列表  
 如何编写好OpenFeign声明式的远程调用接口？  
 • 业务API：直接复制对方Controller签名即可  
 • 第三方API：根据接口文档确定请求如何发

## 面试题：客户端负载均衡与服务端负载均衡区别

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/a988b81b4b2c44169eba7ba52fbaa8df.png)

---



