---
layout: post
title: "开源翻译软件LibreTranslate的离线Docker安装"
date: 2024-07-10 16:06:39 +0800
description: "免费和开源机器翻译API，完全自托管。与其他api不同，它不依赖于谷歌或Azure等专有提供商来执行"
keywords: "libretranslate docker"
categories: ['未分类']
tags: ['自动翻译', '机器翻译', '开源', '容器', 'Docker']
artid: "140319711"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=140319711
  alt: "开源翻译软件LibreTranslate的离线Docker安装"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=140319711
featuredImagePreview: https://bing.ee123.net/img/rand?artid=140319711
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     开源翻译软件LibreTranslate的离线Docker安装
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="DockerLibreTranslate_2">
     </a>
     为了实现内网环境下使用翻译工具需求，本文搭建了Docker环境下的LibreTranslate
    </h2>
    <p>
     具体思路是：借助有网环境构建Docker容器镜像，导入内网环境服务器中，恢复容器并运行，实现无外网访问。
     <br/>
     如果内网环境无Docker或完全无法上传压缩包，请忽略本文！
     <br/>
     <img alt="Alt" src="https://i-blog.csdnimg.cn/blog_migrate/2c5626d1121945cb84be5bc1cdd2de45.gif"/>
    </p>
    <h3>
     <a id="LibreTranslate_9">
     </a>
     LibreTranslate官方说明
    </h3>
    <p>
     免费和开源机器翻译API，完全自托管。与其他api不同，它不依赖于谷歌或Azure等专有提供商来执行翻译。相反，它的翻译引擎由开源的Argos Translate库提供支持。
     <a href="https://libretranslate.com/" rel="nofollow">
      在线试用
     </a>
    </p>
    <h3>
     <a id="GitHub_14">
     </a>
     GitHub
    </h3>
    <p>
     <a href="https://github.com/LibreTranslate/LibreTranslate">
      https://github.com/LibreTranslate/LibreTranslate
     </a>
    </p>
    <p>
     ps：也可下载笔者压缩好的mylibretranslate.tar文件，直接跳转到第四步使用
     <br/>
     百度网盘
     <br/>
     链接：https://pan.baidu.com/s/1h0LrLJu7WcFgPq-3qGFUgw
     <br/>
     提取码：awbe
    </p>
    <h3>
     <a id="LibreTranslateDocker_21">
     </a>
     一、在有网环境的服务器或虚拟机下启动LibreTranslate容器（需有Docker）
    </h3>
    <pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
   <span class="token parameter variable">--restart</span> unless-stopped <span class="token punctuation">\</span>
   <span class="token parameter variable">--name</span> libretranslate <span class="token punctuation">\</span>
   <span class="token parameter variable">-p</span> <span class="token number">5000</span>:5000 <span class="token punctuation">\</span>
   libretranslate/libretranslate <span class="token punctuation">\</span>
   --load-only en,zh
</code></pre>
    <p>
     –load-only en,zh 是指加载中文和英文模型，可根据需要更改
    </p>
    <h3>
     <a id="_32">
     </a>
     二、把容器构建为镜像
    </h3>
    <pre><code class="prism language-bash"><span class="token function">docker</span> commit <span class="token parameter variable">-m</span> <span class="token string">"libretranslate/mylibretranslate"</span> <span class="token parameter variable">-a</span>  <span class="token string">"mylibretranslate"</span> 容器id libretranslate/mylibretranslate:latest
</code></pre>
    <p>
     容器id替换为刚刚运行的容器
    </p>
    <h3>
     <a id="_39">
     </a>
     三、保存镜像到指定服务器目录
    </h3>
    <pre><code class="prism language-bash"><span class="token function">docker</span> save <span class="token parameter variable">-o</span> /data/mylibretranslate.tar libretranslate/mylibretranslate
</code></pre>
    <h3>
     <a id="mylibretranslatetar_45">
     </a>
     四、把刚刚压缩好的mylibretranslate.tar文件，传输到内网环境服务器，执行加载镜像命令
    </h3>
    <pre><code class="prism language-bash"><span class="token function">docker</span> load <span class="token operator">&lt;</span> mylibretranslate.tar
</code></pre>
    <h3>
     <a id="LibreTranslate_51">
     </a>
     五、此时可以使用构建好的镜像运行容器，使用自己的LibreTranslate服务了
    </h3>
    <pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
   <span class="token parameter variable">--restart</span> unless-stopped <span class="token punctuation">\</span>
   <span class="token parameter variable">--name</span> libretranslate <span class="token punctuation">\</span>
   <span class="token parameter variable">-p</span> <span class="token number">5000</span>:5000 <span class="token punctuation">\</span>
   libretranslate/mylibretranslate
</code></pre>
    <p>
     访问地址：
    </p>
    <pre><code class="prism language-bash">http://服务器ip:5000
</code></pre>
    <p>
     接口：
    </p>
    <pre><code class="prism language-bash"><span class="token function">curl</span> <span class="token parameter variable">--location</span> <span class="token parameter variable">--request</span> POST <span class="token string">'http://服务器ip:5000/translate'</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--header</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
--data-raw <span class="token string">'{
    "q": "翻译文本",
    "source": "auto",
    "target": "en",
    "format": "text",
    "alternatives": 3,
    "api_key": ""
}'</span>
</code></pre>
    <p>
     响应格式：
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"alternatives"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token string">"Translation of texts"</span>,
        <span class="token string">"Translation of Text"</span>,
        <span class="token string">"Translation"</span>
    <span class="token punctuation">]</span>,
    <span class="token string">"detectedLanguage"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"confidence"</span><span class="token builtin class-name">:</span> <span class="token number">90</span>,
        <span class="token string">"language"</span><span class="token builtin class-name">:</span> <span class="token string">"zh"</span>
    <span class="token punctuation">}</span>,
    <span class="token string">"translatedText"</span><span class="token builtin class-name">:</span> <span class="token string">"Translation of text"</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0ae9a0304e794747bad3447dfec32c7d.png#pic_center"/>
    </p>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333937373334332f:61727469636c652f64657461696c732f313430333139373131" class_="artid" style="display:none">
 </p>
</div>
