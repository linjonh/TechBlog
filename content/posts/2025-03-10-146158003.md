---
layout: post
title: "QT系列教程18-MVC结构之QItemSelectionModel模型介绍"
date: 2025-03-10 16:43:04 +0800
description: "QT MVC结构之QItemSelectionModel模型介绍"
keywords: "QT系列教程(18) MVC结构之QItemSelectionModel模型介绍"
categories: ['未分类']
tags: ['开发语言', 'Qt', 'Mvc']
artid: "146158003"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146158003
    alt: "QT系列教程18-MVC结构之QItemSelectionModel模型介绍"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146158003
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146158003
cover: https://bing.ee123.net/img/rand?artid=146158003
image: https://bing.ee123.net/img/rand?artid=146158003
img: https://bing.ee123.net/img/rand?artid=146158003
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     QT系列教程(18) MVC结构之QItemSelectionModel模型介绍
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     视频教程
    </h3>
    <p>
     <a href="https://www.bilibili.com/video/BV1FP4y1z75U/?vd_source=8be9e83424c2ed2c9b2a3ed1d01385e9" rel="nofollow">
      https://www.bilibili.com/video/BV1FP4y1z75U/?vd_source=8be9e83424c2ed2c9b2a3ed1d01385e9
     </a>
    </p>
    <h3>
     <a id="QItemSelectionModel_2">
     </a>
     QItemSelectionModel
    </h3>
    <p>
     Qt的MVC结构支持多个View共享同一个model，包括该model的选中状态等。我们可以通过设置QItemSelectionModel，来更改View的选中效果和显示效果。我们创建一个Qt Application项目，在MainWindow的头文件中添加一个
     <code>
      QTbaleView*
     </code>
     类型的成员 _table_view。然后在构造函数中为这个_table_view设置model
    </p>
    <pre><code class="prism language-cpp"><span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span>
    <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>MainWindow<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QStandardItemModel <span class="token operator">*</span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QStandardItemModel</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> row <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span> row<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> column <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> column <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> column<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            QStandardItem <span class="token operator">*</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QStandardItem</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"%1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>row<span class="token operator">*</span><span class="token number">4</span><span class="token operator">+</span>column<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            model<span class="token operator">-&gt;</span><span class="token function">setItem</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    _table_view <span class="token operator">=</span> <span class="token keyword">new</span> QTableView<span class="token punctuation">;</span>
    _table_view<span class="token operator">-&gt;</span><span class="token function">setModel</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCentralWidget</span><span class="token punctuation">(</span>_table_view<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     我们创建了一个QStandardItemModel对象，然后为其设置几个Item，最后将这个model设置到tableview中。
     <br/>
     我们可以为TableView设置选择的项目，接下来继续在构造函数中补充
    </p>
    <pre><code class="prism language-cpp">    <span class="token comment">//获取视图的项目选择模型</span>
    QItemSelectionModel <span class="token operator">*</span> selection_model <span class="token operator">=</span>  _table_view<span class="token operator">-&gt;</span><span class="token function">selectionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//定义左上角和右下角的索引</span>
    QModelIndex topLeft<span class="token punctuation">;</span>
    QModelIndex bottomRight<span class="token punctuation">;</span>
    <span class="token comment">//根据上面两个索引选择项目</span>
    <span class="token comment">//第1行1列</span>
    topLeft <span class="token operator">=</span> model<span class="token operator">-&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">QModelIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//第5行2列</span>
    bottomRight <span class="token operator">=</span> model<span class="token operator">-&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token function">QModelIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置选择区域</span>
    QItemSelection <span class="token function">selection</span><span class="token punctuation">(</span>topLeft<span class="token punctuation">,</span> bottomRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将选择的区域设置给选择模型, 设置 为选中状态</span>
    selection_model<span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span>selection<span class="token punctuation">,</span> QItemSelectionModel<span class="token double-colon punctuation">::</span>Select<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     我们从tableview中获取选择模型，然后从根节点下选择第1行1列作为左上索引，选择第5行2列作为右下索引。然后创建选择区域QItemSelection，最后将选择区域这只给选择模型。接下来为了我们为工具栏添加两个动作，为动作绑定两个槽函数，在MainWindow声明文件中添加两个函数的声明
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">getCurrentItemData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">toggleSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     在构造函数中将动作和槽函数绑定起来
    </p>
    <pre><code class="prism language-cpp">    ui<span class="token operator">-&gt;</span>mainToolBar<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token function">tr</span><span class="token punctuation">(</span><span class="token string">"当前项目"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>getCurrentItemData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>mainToolBar<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token function">tr</span><span class="token punctuation">(</span><span class="token string">"切换选择"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>toggleSelection<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     实现这两个槽函数, getCurrentItemData获取当前条目的数据信息，toggleSelection实现切换选择的条目
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">getCurrentItemData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   <span class="token keyword">auto</span> currentData <span class="token operator">=</span> _table_view<span class="token operator">-&gt;</span><span class="token function">selectionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">currentIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span><span class="token function">tr</span><span class="token punctuation">(</span><span class="token string">"当前项目的内容"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> currentData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">toggleSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//找到根节点下第0行0列的item的索引</span>
    QModelIndex topLeft <span class="token operator">=</span> _table_view<span class="token operator">-&gt;</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function">QModelIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//获取根节点下最大的行号</span>
    <span class="token keyword">auto</span> max_row <span class="token operator">=</span> _table_view<span class="token operator">-&gt;</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">rowCount</span><span class="token punctuation">(</span><span class="token function">QModelIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//获取根节点下最大的列号</span>
    <span class="token keyword">auto</span> max_column <span class="token operator">=</span> _table_view<span class="token operator">-&gt;</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">columnCount</span><span class="token punctuation">(</span><span class="token function">QModelIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//根据列号和行号获取最右下角的item的索引</span>
    QModelIndex bottomRight <span class="token operator">=</span> _table_view<span class="token operator">-&gt;</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">index</span><span class="token punctuation">(</span>max_row<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> max_column<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">QModelIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置选择区域</span>
    QItemSelection <span class="token function">curSelection</span><span class="token punctuation">(</span>topLeft<span class="token punctuation">,</span> bottomRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    _table_view<span class="token operator">-&gt;</span><span class="token function">selectionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span>curSelection<span class="token punctuation">,</span> QItemSelectionModel<span class="token double-colon punctuation">::</span>Toggle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     通过点击切换选择，可以实现选择区域的切换，因为我们设置选择的类型为Toggle，系统会将选中的变为取消选中，将取消选中的变为选中。
     <br/>
     切换前
     <br/>
     <img alt="https://cdn.llfc.club/1671529103099.jpg" src="https://i-blog.csdnimg.cn/img_convert/eb7a3da3d7ee515d3abb29128f7aca84.jpeg">
      <br/>
      切换后
      <br/>
      <img alt="https://cdn.llfc.club/1671529287147.jpg" src="https://i-blog.csdnimg.cn/img_convert/5e88ba1f51aecb63639de85d3280c588.jpeg">
       <br/>
       因为默认当前的条目是第1行1列，所以getCurrentItemData会打印他的信息。每一个model都有当前条目和选择条目两个属性。
      </img>
     </img>
    </p>
    <h3>
     <a id="_81">
     </a>
     捕获选择条目的变化
    </h3>
    <p>
     当我们点击鼠标选择一个条目时，当前条目就变为该条目，选择的条目也变为该条目。我们可以通过选择模型发出的selectionChanged信号，获取选择了那些条目的索引，以及取消选择了哪些条目的索引。我们可以通过currentChanged获取当前的条目索引以及变化之前的条目索引。现在MainWindow中添加两个槽函数的声明
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">updateSelection</span><span class="token punctuation">(</span><span class="token keyword">const</span> QItemSelection<span class="token operator">&amp;</span> selected<span class="token punctuation">,</span> <span class="token keyword">const</span> QItemSelection<span class="token operator">&amp;</span> deselected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">changeCurrent</span><span class="token punctuation">(</span><span class="token keyword">const</span> QModelIndex<span class="token operator">&amp;</span> current<span class="token punctuation">,</span> <span class="token keyword">const</span> QModelIndex<span class="token operator">&amp;</span> previous<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     两个槽函数的参数和信号的参数匹配。我们实现changeCurrent，当选择模型的当前索引变化时，打印变化前后的索引行号，列号。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">changeCurrent</span><span class="token punctuation">(</span><span class="token keyword">const</span> QModelIndex<span class="token operator">&amp;</span> current<span class="token punctuation">,</span> <span class="token keyword">const</span> QModelIndex<span class="token operator">&amp;</span> previous<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">tr</span><span class="token punctuation">(</span><span class="token string">"move(%1, %2) to (%3, %4)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>previous<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>previous<span class="token punctuation">.</span><span class="token function">column</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">column</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     然后我们实现选择模型的选择条目变化时更新条目的数据
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">updateSelection</span><span class="token punctuation">(</span><span class="token keyword">const</span> QItemSelection<span class="token operator">&amp;</span> selected<span class="token punctuation">,</span> <span class="token keyword">const</span> QItemSelection<span class="token operator">&amp;</span> deselected<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    QModelIndex index<span class="token punctuation">;</span>
    QModelIndexList list <span class="token operator">=</span> selected<span class="token punctuation">.</span><span class="token function">indexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//为现在的选择项目设置值</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        QString text <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"(%1, %2)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">column</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _table_view<span class="token operator">-&gt;</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setData</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    list <span class="token operator">=</span> deselected<span class="token punctuation">.</span><span class="token function">indexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">foreach</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        _table_view<span class="token operator">-&gt;</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setData</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在MainWindow的构造函数中添加信号和槽函数的链接
    </p>
    <pre><code class="prism language-cpp">    <span class="token comment">//选择模型的选择条目更改后触发updateSelection函数</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>selection_model<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QItemSelectionModel<span class="token double-colon punctuation">::</span>selectionChanged<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>updateSelection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//选择模型的当前项目更改后，关联changeCurrent函数</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>selection_model<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QItemSelectionModel<span class="token double-colon punctuation">::</span>currentChanged<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>changeCurrent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     点击某个条目，其他条目的数据都变为空，这个条目被选中，内容修改为行列号
     <br/>
     <img alt="https://cdn.llfc.club/1671530820828.jpg" src="https://i-blog.csdnimg.cn/img_convert/7d2940e79be6f40fba22eaa485311229.jpeg"/>
    </p>
    <h3>
     <a id="View_121">
     </a>
     多个View共享模型
    </h3>
    <p>
     MVC结构最大的好处就是可以通过多个View共享同一个model，这个model的选中状态改变时，多个View的显示效果一致。
     <br/>
     在构造函数中添加另一个QTableView
    </p>
    <pre><code class="prism language-cpp">    QTableView <span class="token operator">*</span> tableView2<span class="token punctuation">;</span>
    tableView2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTableView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tableView2<span class="token operator">-&gt;</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"tableView2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tableView2<span class="token operator">-&gt;</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tableView2<span class="token operator">-&gt;</span><span class="token function">setModel</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tableView2<span class="token operator">-&gt;</span><span class="token function">setSelectionModel</span><span class="token punctuation">(</span>selection_model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tableView2<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     可以看到两个View显示的选中状态是一致的
     <br/>
     <img alt="https://cdn.llfc.club/1671531054879.jpg" src="https://i-blog.csdnimg.cn/img_convert/a73a546455e6ba3a33dca53eb3502104.jpeg"/>
    </p>
    <h3>
     <a id="_135">
     </a>
     源码链接
    </h3>
    <p>
     源码链接
     <br/>
     <a href="https://gitee.com/secondtonone1/qt-learning-notes" rel="nofollow">
      https://gitee.com/secondtonone1/qt-learning-notes
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f7365636f6e64746f6e6f6e65312f:61727469636c652f64657461696c732f313436313538303033" class_="artid" style="display:none">
 </p>
</div>


