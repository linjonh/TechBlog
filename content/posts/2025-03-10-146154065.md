---
layout: post
title: "win10安装部署DB-gpt,坑多"
date: 2025-03-10 14:29:59 +0800
description: "安装：bin\\neo4j install-service （注意：要在neo4j的安装目录下进行）注意使用版本3.5.3.0，版本高了的，如果是windown系统按照，需要修改镜像地址改为官网，注意使用版本3.5.3.0，版本高了的，如果是windown系统按照，需要修改镜像地址改为官网，法一：通过控制台启动Neo4j程序（输入：neo4j.bat console）下载 安装 anaconda ，安装python开始。下载 安装 anaconda ，安装python开始。启动服务：neo4j start。"
keywords: "win10安装部署DB-gpt，坑多"
categories: ['未分类']
tags: ['数据库', 'Gpt']
artid: "146154065"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146154065
    alt: "win10安装部署DB-gpt,坑多"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146154065
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146154065
cover: https://bing.ee123.net/img/rand?artid=146154065
image: https://bing.ee123.net/img/rand?artid=146154065
img: https://bing.ee123.net/img/rand?artid=146154065
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     win10安装部署DB-gpt，坑多
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <a href="https://blog.csdn.net/u012269637/article/details/146177891" title="DB-GPT-0.7版本win11安装，最新版本，安装方式变更了-CSDN博客">
      DB-GPT-0.7版本win11安装，最新版本，安装方式变更了-CSDN博客
     </a>
    </p>
    <p>
     已经按照最新版本了，参考上面的链接，如果需要老版本的看下面的按照
    </p>
    <p>
     参考DB-GPT官网地址
     <br/>
     https://www.yuque.com/eosphoros/dbgpt-docs/qno7x8hmgyulbg80
     <br/>
     下载DB-GPT源码
     <br/>
     git clone https://github.com/eosphoros-ai/DB-GPT.git
     <br/>
     查看提交
     <br/>
     https://github.com/eosphoros-ai/DB-GPT/commits/main?author=fangyinc
    </p>
    <p>
     检出25年1月9号的提交，最新代码结构变化很大，官方文档起码一年无更新了
     <br/>
     git checkout -b dev926 f460b2f175a254d95cd197a2d2cb58e4df0b17d5
    </p>
    <p>
     安装conda
    </p>
    <p>
     下载 安装 anaconda ，安装python开始
     <br/>
     https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/?C=M&amp;O=D
     <br/>
     注意使用版本3.5.3.0，直接安装使用，无需任何修改、版本高了的，如果是windown系统安装，需要修改镜像地址改为官网，修改方法在后面，应该是最新的国内高校的镜像地址对win10不友好，默认都是linux安装
     <br/>
     安装 python=3.10的环境
     <br/>
     conda create -n dbgpt_env python=3.10
     <br/>
     <br/>
     激活环境
     <br/>
     conda activate dbgpt_env
    </p>
    <p>
     后面的代码都要在激活环境后执行
    </p>
    <p>
     <img alt="" height="45" src="https://i-blog.csdnimg.cn/direct/6cc4306e27f748aa93840cab5965b8a0.png" width="363"/>
    </p>
    <p>
     如果需要删除环境
     <br/>
     --conda env remove --name dbgpt_env
    </p>
    <p>
     //torch 会报错，先安装，激活后
     <br/>
     pip install torch
    </p>
    <p>
     //部署测试
     <br/>
     pip install -e ".[default]"
     <br/>
     //复制配置文件修改
     <br/>
     copy .env.template  .env
     <br/>
     windowns 的直接.env文件在项目根路径下面、直接修改
     <br/>
     主要是修改三个配置和数据库
    </p>
    <p>
     我用的是代理模式，
    </p>
    <p>
     <a href="https://cloud.siliconflow.cn/i/a0OQ2jmF" rel="nofollow" title="硅基流动统一登录">
      硅基流动统一登录
     </a>
    </p>
    <p>
     <img alt="" height="519" src="https://i-blog.csdnimg.cn/direct/b42ba7b359904640953e044a59295b27.png" width="369"/>
    </p>
    <p>
     邀请码 a0OQ2jmF
    </p>
    <p>
     可以注册一下，写上我的邀请码，官方送14元，可以用一段时间了
    </p>
    <p>
     <img alt="" height="681" src="https://i-blog.csdnimg.cn/direct/a90b49d38a8243f08e253e922d2e6668.png" width="1133"/>
    </p>
    <p>
     注册之后张贴密钥到下面
     <br/>
     LLM_MODEL=siliconflow_proxyllm
     <br/>
     PROXY_API_KEY=skXXXXX
     <br/>
     PROXY_SERVER_URL=https://api.siliconflow.cn/v1
     <br/>
     数据库默认sqlit，我换mysql了
     <br/>
     LOCAL_DB_TYPE=mysql
     <br/>
     LOCAL_DB_USER=root
     <br/>
     LOCAL_DB_PASSWORD=123456
     <br/>
     LOCAL_DB_HOST=127.0.0.1
     <br/>
     LOCAL_DB_PORT=3306
     <br/>
     LOCAL_DB_NAME=dbgpt
     <br/>
     //执行脚本，然后本地执行项目下面的脚本
     <br/>
     F:\dbgptt2024121\DB-GPT\assets\schema\dbgpt.sql
    </p>
    <p>
     运行服务之前需要下载嵌入模型和大模型，主要是嵌入模型，第一个
     <br/>
     项目根路径下面mkdir models cd models
     <br/>
     git clone https://www.modelscope.cn/Jerry0/text2vec-large-chinese.git
     <br/>
     git clone https://www.modelscope.cn/Qwen/Qwen2.5-14B-Instruct.git
    </p>
    <p>
     运行前将一下包挨个执行包升级，你直接运行也可以，报错缺什么补什么，最终这些都是要执行的
     <br/>
     pip install --upgrade pydantic  --这个版本也是大坑，开始回退代码到你们的B站视频的代码位置24年1月21号，这个版本是1.X的，后面安装过程需要升级到2.X，然后另外的包又只支持1.X，死循环了，没办法往前升级代码，直到25年1月9号的视频，也就是你们代码结构变更之前把，变更代码结构之后，项目安装问题更加多了
     <br/>
     pip install --upgrade chromadb
     <br/>
     pip install --upgrade fastapi
     <br/>
     pip install --upgrade spacy
     <br/>
     pip install --upgrade dbgpt
     <br/>
     set PYTHONPATH=F:\dbgptt2024121\DB-GPT
     <br/>
     pip install schedule
     <br/>
     pip install cryptography
     <br/>
     pip install  lyric-py--这个是大坑，一直报错 lyric，实际上是lyric-py，本人python 零基础
     <br/>
     pip install -r /requirements/dev-requirements.txt
     <br/>
     pip install openai
    </p>
    <p>
     运行服务
     <br/>
     python dbgpt/app/dbgpt_server.py
    </p>
    <p>
     <br/>
     //要是报错可能需要安装AI开发环境包
     <br/>
     pip install alembic
    </p>
    <p>
     运行成功访问
     <br/>
     http://192.168.15.23:5670/chat
    </p>
    <p>
     <img alt="" height="861" src="https://i-blog.csdnimg.cn/direct/edd5bf7c1f4d4f9cad2fd8abc9322b55.png" width="1388"/>
    </p>
    <p>
     <img alt="" height="775" src="https://i-blog.csdnimg.cn/direct/d83b37af8f8640cbaf54cc4a7c7d17fc.png" width="1859"/>
    </p>
    <p>
     生成的统计项只有50个，超过也不显示了
    </p>
    <p>
     知识库试了下，检索不出来，还不如之前我安装的
     <strong>
      <span style="color:#fe2c24">
       cherry studio
      </span>
     </strong>
    </p>
    <p>
     neo4j非必须按照，用于知识图谱，安装也用不了，我安装了3.X和4.X的版本，5.X的没试过，对应jdk8、11、和17
    </p>
    <p>
    </p>
    <p>
     最后想对DB-GPT的研发产品团队说句实话，因为纯中文在github上留言不了
    </p>
    <p>
     <strong>
      <span style="color:#fe2c24">
       现在AI这么火，知识库应用首当其冲，Char-DB本来是你们的强项，可是兼容性做得很差，我连接一个700表的mysql库，只能查到几张表，chardata应对大库也是无能为力，另外我们业务库是sql sqlser 2012的库、还有2016的版本的数据库添加都添加报错，虽说你们兼容很多库，却没有做相应的版本方言适配。尽管你们集成了很多功能，可是没有在Char-DB上面深入，起大早赶晚集的感觉，另外在你们github项目地址问题的回复不可以尽量双语吗，中国人不吭中国人，我英语不是很好，还要花更多时间找问题看问题，我安装win10版本的DB-GPT耗时两天，到处报错，官方文档也不更新，人也找不到，
      </span>
     </strong>
    </p>
    <p>
    </p>
    <p>
     启动neo4j
     <br/>
     NEOJ_HOME=E:\neo4j-community-3.5.31
     <br/>
     （3）配置path变量
     <br/>
     path=%NEO4J_HOME%\bin
     <br/>
     （4）启动服务
     <br/>
     法一：通过控制台启动Neo4j程序（输入：neo4j.bat console）
     <br/>
     法二：把Neo4j安装为服务
     <br/>
     安装：bin\neo4j install-service （注意：要在neo4j的安装目录下进行）
     <br/>
     卸载：bin\neo4j uninstall-service
     <br/>
     启动服务：neo4j start
     <br/>
     停止服务：neo4j stop
     <br/>
     重启服务：neo4j restart
     <br/>
     查询服务：neo4j status
     <br/>
     http://localhost:7474/browser/
     <br/>
     用户名:neo4j
     <br/>
     初始密码：neo4j
     <br/>
     ————————————————
    </p>
    <p>
     anaconda按照
    </p>
    <p>
     <br/>
     https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/
    </p>
    <p>
     下载 安装 anaconda ，安装python开始
     <br/>
     https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/?C=M&amp;O=D
     <br/>
     注意使用版本3.5.3.0，版本高了的，如果是windown系统按照，需要修改镜像地址改为官网，
    </p>
    <p>
     -- 查看conda版本
     <br/>
     conda --version
     <br/>
     检查版本兼容
     <br/>
     pip install pipdeptree
     <br/>
     pipdeptree
    </p>
    <p>
     # 1、查看环境列表：第一种写法
     <br/>
     conda env list
     <br/>
     <br/>
     # 2、查看环境列表：第二种写法
     <br/>
     conda info --envs
     <br/>
     <br/>
     # 3、查看conda的所有配置信息，默认配置
     <br/>
     conda config --show
    </p>
    <p>
     查看设置的本地镜像
     <br/>
     conda config --show default_channels
    </p>
    <p>
     修改设置清华镜像
     <br/>
     conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
     <br/>
     conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
     <br/>
     conda config --set show_channel_urls yes
    </p>
    <p>
     查看设置的本地镜像
     <br/>
     conda config --show channels
    </p>
    <p>
     --查看具体的安装日志
     <br/>
     conda create --name env_name38 python=3.8 --verbose
    </p>
    <p>
     <br/>
     检查版本
     <br/>
     python --version
    </p>
    <p>
     切换激活环境
     <br/>
     conda activate env_name38
    </p>
    <p>
     <br/>
     conda install numpy
    </p>
    <p>
     pip install requests
     <br/>
     删除
     <br/>
     conda env remove --name dbgpt_env
    </p>
    <p>
     如果退出
     <br/>
     conda deactivate
    </p>
    <p>
     可能报错
     <br/>
     https://developer.baidu.com/article/details/2800512
     <br/>
     https://blog.csdn.net/qq_42392337/article/details/127529243
    </p>
    <p>
     这个原因
     <br/>
     https://blog.csdn.net/qq_42392337/article/details/127529243
     <br/>
     还原管网
     <br/>
     conda config --remove-key channels
     <br/>
     conda config --add channels defaults
     <br/>
     conda config --add channels https://repo.anaconda.com/pkgs/main
     <br/>
     conda config --add channels https://repo.anaconda.com/pkgs/free
    </p>
    <p>
     <br/>
     channels:
     <br/>
     - https://repo.anaconda.com/pkgs/free
     <br/>
     - https://repo.anaconda.com/pkgs/main
     <br/>
     - defaults
     <br/>
     default_channels:
     <br/>
     - https://repo.anaconda.com/pkgs/main
     <br/>
     - https://repo.anaconda.com/pkgs/free
     <br/>
     - https://repo.anaconda.com/pkgs/r
     <br/>
     - https://repo.anaconda.com/pkgs/pro
     <br/>
     - https://repo.anaconda.com/pkgs/msys2
     <br/>
     <br/>
     <br/>
     下载 安装 anaconda ，安装python结束
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031323236393633372f:61727469636c652f64657461696c732f313436313534303635" class_="artid" style="display:none">
 </p>
</div>


