---
layout: post
title: "UI自动化测试-web端元素获取元素等待实践"
date: 2025-03-11 14:33:44 +0800
description: "Web UI自动化测试是一种软件测试方法，通过模拟用户行为，自动执行Web界面的各种操作，并验证操作结果是否符合预期，从而提高测试效率和准确性。"
keywords: "UI自动化测试 —— web端元素获取&元素等待实践！"
categories: ['软件测试', '自动化测试', '测试工程师']
tags: ['软件测试', '自动化测试', '测试工程师', '测试工具', 'Ui', 'Selenium', 'Pytest']
artid: "146178423"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146178423
    alt: "UI自动化测试-web端元素获取元素等待实践"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146178423
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146178423
cover: https://bing.ee123.net/img/rand?artid=146178423
image: https://bing.ee123.net/img/rand?artid=146178423
img: https://bing.ee123.net/img/rand?artid=146178423
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     UI自动化测试 —— web端元素获取&amp;元素等待实践！
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     <strong>
      前言
     </strong>
    </h2>
    <p>
     Web UI自动化测试是一种软件测试方法，通过模拟用户行为，自动执行Web界面的各种操作，并验证操作结果是否符合预期，从而提高测试效率和准确性。
    </p>
    <p>
     <strong>
      目的：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       确保Web应用程序的界面在不同环境(如不同浏览器、操作系统)下都能正常工作。
      </p>
     </li>
     <li>
      <p>
       验证应用程序的功能是否符合需求规格说明书。
      </p>
     </li>
     <li>
      <p>
       提高测试效率，减少重复劳动。
      </p>
     </li>
     <li>
      <p>
       提前发现潜在的缺陷，降低修复成本。
      </p>
     </li>
    </ol>
    <p>
     这里分享web端元素获取&amp;元素等待
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="30" src="https://i-blog.csdnimg.cn/blog_migrate/15f60edb9a30e93fa59a886c77f6b8fe.gif" width="92"/>
    </p>
    <h2>
     <em>
      <strong>
       01、元素获取
      </strong>
     </em>
    </h2>
    <p>
     为什么要学习获取元素信息的方法
    </p>
    <p>
     主要为了获取相关的信息进行断言，判断自动化用例最终的执行结果。
    </p>
    <p>
     获取元素常用的方法：
    </p>
    <ul>
     <li>
      <p>
       size 获取元素的大小 返回的是一个字典，里面包含 元素高度和宽度的值
      </p>
     </li>
     <li>
      <p>
       text 获取元素的文本内容
      </p>
     </li>
     <li>
      <p>
       get_attribute("attribute") 获取元素对应属性名称的属性值 ， attribute表示的是属性名
      </p>
     </li>
     <li>
      <p>
       is_displayed() 判断元素是否可见 返回值为true或者false
      </p>
     </li>
     <li>
      <p>
       is_enabled() 判断元素是否可用，返回值为true或者false
      </p>
     </li>
     <li>
      <p>
       is_selected() 判断复选框或者单选框是否被选中，返回值为true或者false
      </p>
     </li>
    </ul>
    <p>
     <strong>
      示例代码：
     </strong>
    </p>
    <pre><code># 导包</code><code>import time</code><code>from selenium import webdriver</code><code>from selenium.webdriver.common.by import By</code><code> </code><code># 实例化浏览器驱动</code><code>driver = webdriver.Chrome()</code><code> </code><code># 打开百度网站</code><code>driver.get("https://www.baidu.com")</code><code> </code><code># 最大化浏览器窗口</code><code>time.sleep(3)</code><code>driver.maximize_window()</code><code> </code><code># 获取百度输入框的大小</code><code>size = driver.find_element(By.CLASS_NAME, "s_ipt").size</code><code>print(size)</code><code> </code><code># 获取超链接"hao123网站"的文本内容</code><code>text = driver.find_element_by_link_text("hao123").text</code><code>print(text)</code><code> </code><code># 获取超链接"hao123网站"的地址</code><code>address = driver.find_element(By.LINK_TEXT, "hao123").get_attribute("href")</code><code>print(address)</code><code> </code><code># 判断文库超链接是否可见,默认是False</code><code>result = driver.find_element(By.XPATH, "//*[@class ='s-bri c-font-normal c-color-t'] ").is_displayed()</code><code>print("文库超链接可见：", result)</code><code> </code><code># 判端百度一下按钮是否可用,默认是False</code><code>result = driver.find_element(By.ID, "su").is_enabled()</code><code>print("'百度一下'按钮可用", result)</code><code> </code><code># 点击页面右上角【登录】按钮，进入登录页面</code><code>driver.find_element(By.ID, "s-top-loginbtn").click()</code><code> </code><code># 注意需要等待几秒等待元素出现，否则会报错</code><code>time.sleep(5)</code><code> </code><code># 判断页面中"阅读并接受"前的复选框是否选中</code><code>result = driver.find_element_by_css_selector(".pass-checkbox-input").is_selected()</code><code>print("页面中'阅读并接受'前的复选框已选中", result)</code><code> </code><code># 等待3S</code><code>time.sleep(3)</code><code> </code><code># 关闭浏览器窗口</code><code>driver.quit()</code></pre>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="25" src="https://i-blog.csdnimg.cn/blog_migrate/d0def2d0dde6fd47d1bb0bc24c540f89.png" width="39"/>
    </p>
    <p>
     <strong>
      02 元素等待
     </strong>
    </p>
    <p>
    </p>
    <p>
     元素等待是指在自动化测试过程中，为了等待某个元素出现或者满足某种条件而暂停脚本执行的一种技术。在定位页面元素时，如果没有找到该元素，会在指定时间内一直等待的过程。以下是常用的三种元素等待类型：
    </p>
    <ul>
     <li>
      <p>
       隐式等待：在一段时间内检查网页是否加载完成，如果加载完成，则进行下一步操作;如果在设置的时间内没有加载完成，则会报超时加载。
      </p>
     </li>
     <li>
      <p>
       显式等待：在指定的时间内等待某个特定元素的出现，如果该元素在指定时间内出现，则立即执行相应的操作;如果超过等待时间元素仍未出现，则抛出异常。
      </p>
     </li>
     <li>
      <p>
       强制等待：使用time.sleep()方法，使程序在指定的时间内暂停执行。但如果等待时间设置过短，元素可能还未加载完成，程序会报错;如果等待时间设置过长，会浪费时间，降低代码整体的运行效率。
      </p>
     </li>
    </ul>
    <p>
     2.1. 隐式等待
    </p>
    <p>
     概念：在查找元素时自动等待一定的时间，以确保元素已经加载完成。如果在定位过程中找到了元素，直接返回该元素，继续后面的操作，如果超过了指定时间，就会抛出 NoSuchElementException 异常。
    </p>
    <p>
     隐式等待实现方式:
    </p>
    <p>
     driver.implicitlty_wait(timeout) # timeout表示的是最长的等待时间 单位为S
    </p>
    <p>
     隐式等待的优点是简单易用，只需要设置一次，对所有的元素定位的方法都是有效的,不需要明确指定等待某个特定元素的出现。它适用于大多数情况，但在某些复杂的网页结构或网络延迟较高的情况下，可能需要使用显式等待来更精确地控制等待时间。
    </p>
    <p>
     代码示例：
    </p>
    <pre><code># 导包</code><code>import time</code><code>from selenium import  webdriver</code><code>from selenium.webdriver.common.by import By</code><code> </code><code># 实例化浏览器驱动</code><code>driver = webdriver.Chrome()</code><code> </code><code># 设置隐式等待时间为5秒</code><code>driver.implicitly_wait(5)</code><code> </code><code># 打开要百度网站</code><code>driver.get("https://www.baidu.com")</code><code> </code><code># 点击右上角"设置"，点击"搜索设置"</code><code>driver.find_element(By.ID, 's-usersetting-top').click()</code><code>driver.find_element_by_link_text("搜索设置").click()</code><code> </code><code># 注意下面这段代码，如果设置等待时间为0就会报错</code><code># 判断"全部语言"单选框是否被选中</code><code>driver.find_element_by_css_selector("[for = 'SL_0']").is_selected()</code><code> </code><code># 等待3S</code><code>time.sleep(3)</code><code> </code><code># 退出浏览器驱动</code><code>driver.quit()</code></pre>
    <p>
     2.2. 显示等待
    </p>
    <p>
     概念：显示等待是指在执行某个操作之前，等待特定条件的满足。例如定位指定元素时，如果能找到该元素，那么就直接返回该元素，如果找不到，那么每隔指定的时间再去定位该元素，如果超出最长等待时间，那么就抛出TimeOutException。
    </p>
    <p>
     其工作原理如下：
    </p>
    <ol>
     <li>
      <p>
       设置等待时间和条件：指定一个等待时间和一个条件，在规定时间内，每隔一段固定时间查看下条件是否成立。
      </p>
     </li>
     <li>
      <p>
       检查条件是否成立：如果条件在等待时间内成立，程序将继续执行;否则，将提示一个超时异常。
      </p>
     </li>
    </ol>
    <p>
     显示等待的实现：
    </p>
    <p>
     导入WebDriverWait等待类
    </p>
    <p>
     WebDriverWait(driver, timeout, poll_frequency=0.5).until(lambda x:x.find_element(By.ID, "userA"))
    </p>
    <ul>
     <li>
      <p>
       driver 指的是浏览器驱动对象
      </p>
     </li>
     <li>
      <p>
       timeout 表示的是最长等待时间
      </p>
     </li>
     <li>
      <p>
       poll_frequency 表示的是检测的间隔时间，默认是0.5
      </p>
     </li>
     <li>
      <p>
       until until方法跟上匿名函数来实现元素定位。
      </p>
     </li>
    </ul>
    <p>
     代码示例：
    </p>
    <pre><code># 导包</code><code>import time</code><code>from selenium import webdriver</code><code>from selenium.webdriver.common.by import By</code><code>from selenium.webdriver.support.wait import WebDriverWait</code><code> </code><code># 实例化浏览器驱动</code><code>driver = webdriver.Chrome()</code><code>driver.maximize_window()</code><code> </code><code># 打开测试网站</code><code>driver.get("https://www.baidu.com")</code><code> </code><code># 点击右上角"设置"</code><code>driver.find_element(By.ID, 's-usersetting-top').click()</code><code> </code><code># 点击"搜索设置"</code><code>driver.find_element_by_link_text("搜索设置").click()</code><code> </code><code># 显示等待判断"全部语言"单选框是否被选中</code><code># element = driver.find_element(By.CSS_SELECTOR, "[for = 'SL_0']").is_selected() 注意如果用这行代码代替下面一行代码，会报错</code><code>element = WebDriverWait(driver, 5, 0.5).until(lambda x: x.find_element(By.CSS_SELECTOR, "[for = 'SL_0']"))</code><code>result = element.is_selected()</code><code>print("'全部语言'单选框被选中：", result)</code><code> </code><code># 等待3S</code><code>time.sleep(3)</code><code> </code><code># 退出浏览器驱动</code><code>driver.quit()</code></pre>
    <p>
     2.3. 强制等待
    </p>
    <p>
     强制等待就是让代码休眠，不做任何的操作
    </p>
    <p>
     time.sleep(time) time单位为S
    </p>
    <p>
     常用的场景：
    </p>
    <p>
     在 UI 自动化中，一般在以下情况下可能需要使用强制等待：
    </p>
    <ul>
     <li>
      <p>
       网络延迟或加载缓慢：当网络连接较慢或页面加载时间较长时，元素可能需要一些时间才能完全显示或可用。在这种情况下，强制等待可以给系统一些时间来完成加载。
      </p>
     </li>
     <li>
      <p>
       不稳定的环境或外部因素：如果自动化测试在不稳定的环境中运行，例如网络连接不稳定或系统资源有限，强制等待可以提供一定的容错性，以确保操作有足够的时间完成。
      </p>
     </li>
     <li>
      <p>
       已知的固定时间延迟(某些操作可能具有已知的固定时间延迟)：
      </p>
     </li>
    </ul>
    <ol>
     <li>
      <p>
       例如在提交表单后等待服务器响应。在这种情况下，使用强制等待可以模拟这种延迟。
      </p>
     </li>
     <li>
      <p>
       当要获取元素的文本内容时，而元素的文本内容是需要通过后台接口请求并渲染的，此时，如果使用隐式等待或显示等待是没有办法获取到文本内容，所以需要使用强制等待。
      </p>
     </li>
     <li>
      <p>
       当要操作的元素已经存在，但是有其他的元素需要等待且与该操作的元素有业务关联，如果使用隐式等待或显示等待对该元素进行操作的话，是没有办法进行的，也需要使用强制等待。
      </p>
     </li>
    </ol>
    <p>
     <strong>
      代码示例(此代码仅为演示代码，场景需根据实际场景进行判断)：
     </strong>
    </p>
    <pre><code># 导包</code><code>import time</code><code>from selenium import webdriver</code><code>from selenium.webdriver.common.by import By</code><code> </code><code># 实例化浏览器驱动</code><code>driver = webdriver.Chrome()</code><code>driver.maximize_window()</code><code> </code><code># 打开测试网站</code><code>driver.get("https://www.baidu.com")</code><code> </code><code># 通过name定位到输入框并输入"新闻"</code><code>time.sleep(2)</code><code>element = driver.find_element(By.NAME, 'wd')</code><code>element.send_keys("新闻")</code><code> </code><code># 点击"百度一下"按钮：</code><code>element = driver.find_element(By.ID, 'su')</code><code>element.click()</code><code>time.sleep(3)</code><code> </code><code># 退出浏览器，释放资源</code><code>driver.quit()</code></pre>
    <p>
    </p>
    <p>
     <strong>
      最后感谢每一个认真阅读我文章的人，看着粉丝一路的上涨和关注，礼尚往来总是要有的，虽然不是什么很值钱的东西，如果你用得到的话可以直接拿走！
     </strong>
    </p>
    <p class="img-center">
     <img alt="" height="735" src="https://i-blog.csdnimg.cn/direct/a5e4e09138194ce09211cb0659fcbc6e.png" width="752"/>
    </p>
    <h4>
     软件测试面试文档
    </h4>
    <p>
     我们学习必然是为了找到高薪的工作，下面这些面试题是来自阿里、腾讯、字节等一线互联网大厂最新的面试资料，并且有字节大佬给出了权威的解答，刷完这一套面试资料相信大家都能找到满意的工作。
    </p>
    <p class="img-center">
     <img alt="" height="473" src="https://i-blog.csdnimg.cn/direct/7e9960343af44d43b2fe08ab3ee9721d.png" width="814"/>
    </p>
    <p class="img-center">
     <img alt="" height="151" src="https://i-blog.csdnimg.cn/direct/d4630e9ad2c9438d9ab9409e2999530b.png" width="451"/>
    </p>
    <p>
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34333337313639352f:61727469636c652f64657461696c732f313436313738343233" class_="artid" style="display:none">
 </p>
</div>


