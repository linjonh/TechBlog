---
layout: post
title: "蓝桥-动态规划-倒水"
date: 2025-03-14 19:29:02 +0800
description: "的方案，与当前最优值比较。的限制下，最大化总收益。确保每个物品只被处理一次。时，强制加上不选收益。（类似01背包优化）"
keywords: "【蓝桥】-动态规划-倒水"
categories: ['算法我一生之敌']
tags: ['算法', '动态规划']
artid: "146265576"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146265576
    alt: "蓝桥-动态规划-倒水"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146265576
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146265576
cover: https://bing.ee123.net/img/rand?artid=146265576
image: https://bing.ee123.net/img/rand?artid=146265576
img: https://bing.ee123.net/img/rand?artid=146265576
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【蓝桥】-动态规划-倒水
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr/>
    <h2 id="%C2%A0%E4%B8%80%E3%80%81%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%E2%80%8B%E7%BC%96%E8%BE%91" name="%C2%A0%E4%B8%80%E3%80%81%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%E2%80%8B%E7%BC%96%E8%BE%91">
     一、问题描述
    </h2>
    <p>
     <img alt="" height="574" src="https://i-blog.csdnimg.cn/direct/686d703f6ad24069b190aa3f82f45c5d.png" width="812"/>
    </p>
    <h2 name="%C2%A0%E4%B8%80%E3%80%81%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%E2%80%8B%E7%BC%96%E8%BE%91">
    </h2>
    <p>
     <img alt="" height="519" src="https://i-blog.csdnimg.cn/direct/aae995618a47464fbce65d2aeb9d6012.png" width="820"/>
    </p>
    <h2 id="%C2%A0%E4%BA%8C%E3%80%81%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF" name="%C2%A0%E4%BA%8C%E3%80%81%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF">
     二、解题思路
    </h2>
    <blockquote>
     <p>
      <span style="color:#fe2c24">
       <span style="background-color:#f9eda6">
        一个
       </span>
       <strong>
        <span style="background-color:#f9eda6">
         变种的01背包问题：
        </span>
       </strong>
      </span>
     </p>
     <p>
     </p>
     <ol>
      <li>
       <p>
        <strong>
         不选该物品
        </strong>
        ：获得固定收益
        <code>
         e
        </code>
       </p>
      </li>
      <li>
       <p>
        <strong>
         选择方案1
        </strong>
        ：消耗体积
        <code>
         a
        </code>
        ，获得价值
        <code>
         b
        </code>
       </p>
      </li>
      <li>
       <p>
        <strong>
         选择方案2
        </strong>
        ：消耗体积
        <code>
         c
        </code>
        ，获得价值
        <code>
         d
        </code>
       </p>
      </li>
     </ol>
     <p>
      目标是在背包容量
      <code>
       m
      </code>
      的限制下，最大化总收益。
     </p>
    </blockquote>
    <p>
     <img alt="" height="192" src="https://i-blog.csdnimg.cn/direct/b51f45003c56403a8a4156f28096756b.png" width="853"/>
    </p>
    <h2 id="%C2%A0%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81" name="%C2%A0%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81">
     三、完整代码
    </h2>
    <h3 id="%E4%BA%8C%E7%BB%B4dp" name="%E4%BA%8C%E7%BB%B4dp">
     二维dp
    </h3>
    <pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
using ll = long long;

const int N = 1010;
ll dp[N][N]; // dp[i][j] 表示前 i 个物品，容量为 j 时的最大价值
ll n, m, a, b, c, d, e;

int main() {
    cin &gt;&gt; n &gt;&gt; m; // 输入物品数量 n 和背包容量 m

    for (int i = 1; i &lt;= n; i++) {  // 遍历每个物品
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d &gt;&gt; e;
        
        for (int j = 0; j &lt;= m; j++) { 
            // 不选当前物品，继承上一个状态
            dp[i][j] = dp[i - 1][j] + e;  

            // 选方案1（需要容量 &gt;= a）
            if (j &gt;= a) 
                dp[i][j] = max(dp[i][j], dp[i - 1][j - a] + b);

            // 选方案2（需要容量 &gt;= c）
            if (j &gt;= c) 
                dp[i][j] = max(dp[i][j], dp[i - 1][j - c] + d);
        }
    }

    cout &lt;&lt; dp[n][m] &lt;&lt; '\n'; // 输出最大价值
    return 0;
}
</code></pre>
    <h3 id="%E4%BD%BF%E7%94%A8%E6%BB%9A%E5%8A%A8%E6%95%B0%E7%BB%84" name="%E4%BD%BF%E7%94%A8%E6%BB%9A%E5%8A%A8%E6%95%B0%E7%BB%84">
     使用滚动数组
    </h3>
    <pre><code class="language-cpp">#include&lt;bits/stdc++.h&gt;
using namespace std;
using ll = long long;
const int N = 1010;
ll dp[N], n, m, a, b, c, d, e;
int main(){
  cin &gt;&gt; n &gt;&gt; m;  // 输入物品数量n和背包容量m
  while(n -- ){   // 遍历每个物品
    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d &gt;&gt; e;  // 输入物品参数
    for(int i = m; i &gt;= 0; -- i) { // 逆向遍历背包容量
      // 处理三种决策
      if(i &gt;= a) 
        dp[i] = max(dp[i] + e, dp[i - a] + b); // 方案1 vs 不选
      if(i &gt;= c) 
        dp[i] = max(dp[i], dp[i - c] + d);     // 方案2 vs 当前最优
      if(i &lt; a) 
        dp[i] = dp[i] + e;                     // 无法选方案1，只能不选
    }
  }
  cout &lt;&lt; dp[m] &lt;&lt; '\n';  // 输出结果
  return 0;
}</code></pre>
    <hr/>
    <p>
     <strong>
      关键逻辑说明
     </strong>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        逆向遍历背包容量
       </strong>
       <br/>
       使用
       <code>
        for(int i = m; i &gt;= 0; -- i)
       </code>
       确保每个物品只被处理一次
       <strong>
        <span style="color:#fe2c24">
         （类似01背包优化）
        </span>
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        三种决策的优先级
       </strong>
      </p>
     </li>
    </ol>
    <blockquote>
     <p>
      <strong>
       方案1优先
      </strong>
      ：先尝试选择体积
      <code>
       a
      </code>
      的方案，更新
      <code>
       dp[i]
      </code>
      。
     </p>
     <p>
      <strong>
       方案2次优先
      </strong>
      ：再尝试选择体积
      <code>
       c
      </code>
      的方案，与当前最优值比较。
     </p>
     <p>
      <strong>
       强制不选
      </strong>
      ：当
      <code>
       i &lt; a
      </code>
      时，强制加上不选收益
      <code>
       e
      </code>
      。
     </p>
    </blockquote>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f37333730343236382f:61727469636c652f64657461696c732f313436323635353736" class_="artid" style="display:none">
 </p>
</div>


