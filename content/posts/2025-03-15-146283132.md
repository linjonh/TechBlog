---
layout: post
title: "ssh通过22端口无法连接服务器问题处理"
date: 2025-03-15 18:14:45 +0800
description: "sudo chmod 700 /var/empty/sshd       # 设置目录权限为 700（只有所有者可以读、写和执行）sudo chown root:root /var/empty/sshd  # 将目录的所有者和组更改为 root。/var/empty/sshd 所有权限必须是root，检查发现是www。启动失败——查看详细日志————非常重要，一定要查看日志，是什么原因？——————成功修改权限，再次启动sshd服务。# 若服务未启动，尝试重启。————成功，可以登录了！"
keywords: "ssh通过22端口无法连接服务器问题处理"
categories: ['未分类']
tags: ['服务器', 'Ssh', 'Linux']
artid: "146283132"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146283132
    alt: "ssh通过22端口无法连接服务器问题处理"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146283132
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146283132
cover: https://bing.ee123.net/img/rand?artid=146283132
image: https://bing.ee123.net/img/rand?artid=146283132
img: https://bing.ee123.net/img/rand?artid=146283132
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ssh通过22端口无法连接服务器问题处理
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     一，安全组开放22端口
    </h4>
    <p>
     root无法连接服务器，22端口也开放了，可能是防火墙开启了拦截。
    </p>
    <h4>
     <br/>
     二，检测防火墙状态
    </h4>
    <p>
     查看防火墙状态
     <br/>
     sudo firewall-cmd --state
    </p>
    <p>
     关闭防火墙
     <br/>
     sudo systemctl stop firewalld
    </p>
    <p>
     开启防火墙
     <br/>
     sudo systemctl start firewalld
    </p>
    <p>
     防火墙自启动
     <br/>
     sudo systemctl enable firewalld
     <br/>
     禁止防火墙自启动
     <br/>
     sudo systemctl disable firewalld
    </p>
    <p>
    </p>
    <h4>
     三，检测SSHD服务状态
    </h4>
    <p>
     <br/>
     # 查看SSH服务状态
     <br/>
     systemctl status sshd   # 或 service sshd status
     <br/>
     systemctl status sshd.service
    </p>
    <p>
     # 若服务未启动，尝试重启
     <br/>
     systemctl restart sshd   # 或 service sshd restart
    </p>
    <p>
     启动失败——查看详细日志————非常重要，一定要查看日志，是什么原因？
     <br/>
     journalctl -xe
    </p>
    <p>
     日志返回——
     <span style="color:#fe2c24">
      /var/empty/sshd
     </span>
     must be owned by root and not group or world-writableMar15
     <br/>
     意思是——
     <strong>
      <span style="color:#fe2c24">
       /var/empty/sshd 所有权限必须是root，检查发现是www
      </span>
     </strong>
     <br/>
     修改权限
     <br/>
     sudo chown root:root /var/empty/sshd  # 将目录的所有者和组更改为 root
     <br/>
     sudo chmod 700 /var/empty/sshd       # 设置目录权限为 700（只有所有者可以读、写和执行）
    </p>
    <p>
     ——————成功修改权限，再次启动sshd服务
    </p>
    <p>
     systemctl restart sshd
    </p>
    <p>
     ————成功，可以登录了！
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f32383534363535392f:61727469636c652f64657461696c732f313436323833313332" class_="artid" style="display:none">
 </p>
</div>


