---
layout: post
title: "04-初始化-fastgo-项目仓库"
date: 2025-03-11 23:54:20 +0800
description: "本节课详细介绍如何初始化一个 Go 项目仓库"
keywords: "04 | 初始化 fastgo 项目仓库"
categories: ['项目开发极速入门实战课', 'Go']
tags: ['开发语言', '云原生', 'Kubernetes', 'Golang', 'Ai']
artid: "146192165"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146192165
    alt: "04-初始化-fastgo-项目仓库"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146192165
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146192165
cover: https://bing.ee123.net/img/rand?artid=146192165
image: https://bing.ee123.net/img/rand?artid=146192165
img: https://bing.ee123.net/img/rand?artid=146192165
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     04 | 初始化 fastgo 项目仓库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      <strong>
       提示：
      </strong>
     </p>
     <ul>
      <li>
       所有体系课见专栏：
       <a href="https://blog.csdn.net/lnxfei/category_12907774.html">
        Go 项目开发极速入门实战课
       </a>
       ；
      </li>
      <li>
       欢迎加入我的训练营：
       <a href="https://konglingfei.com" rel="nofollow">
        云原生AI实战营
       </a>
       ，一个助力 Go 开发者在 AI 时代建立技术竞争力的实战营；
      </li>
      <li>
       本节课最终源码位于 fastgo 项目的
       <a href="https://github.com/onexstack/fastgo/tree/feature/s01">
        feature/s01
       </a>
       分支；
      </li>
      <li>
       更详细的课程版本见：
       <a href="https://konglingfei.com/cloudai/catalog/intermediate.html" rel="nofollow">
        Go 项目开发中级实战课
       </a>
       ：10 | 项目初始化（上）：如何初始化一个 Go 项目仓库？
      </li>
     </ul>
    </blockquote>
    <p>
     项目开发的第一步便是初始化一个项目目录，并根据
     <a href="https://github.com/golang-standards/project-layout">
      golang-standards/project-layout
     </a>
     目录规范，添加必要的目录及文件。
    </p>
    <p>
     本节课，来给你介绍下如何初始化一个 Go 项目。
    </p>
    <p>
     初始化一个 Go 项目，大概分为以下几步：
    </p>
    <ol>
     <li>
      创建项目目录；
     </li>
     <li>
      初始化目录为 Go 模块；
     </li>
     <li>
      初始化目录为 Git 仓库；
     </li>
     <li>
      创建需要的目录；
     </li>
     <li>
      创建 Hello World 程序。
     </li>
    </ol>
    <h3>
     <a id="font_stylecolorrgb37_41_51_1font_17">
     </a>
     步骤 1：创建项目目录
    </h3>
    <p>
     开发 Go 项目的第 1 步便是创建一个项目目录。现今 Go 模块管理都是用的 Go Modules。虽然，在使用 Go Modules 的情况下，不再需要设置
     <code>
      GOPATH
     </code>
     环境变量。但是为了提高项目的维护性，这里还是建议将项目放在
     <code>
      GOPATH
     </code>
     目录下。
    </p>
    <p>
     初始化项目目录，操作命令如下：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$GOPATH</span>/src/github.com/onexstack/fastgo <span class="token comment"># 创建项目目录</span>
$ <span class="token builtin class-name">cd</span> <span class="token variable">$GOPATH</span>/src/github.com/onexstack/fastgo <span class="token comment"># 进入到项目目录中</span>
$ <span class="token builtin class-name">echo</span> <span class="token string">"## fastgo 项目"</span> <span class="token operator">&gt;&gt;</span> README.md <span class="token comment"># 创建一个 README 文件，作为项目的第一个文件</span>
</code></pre>
    <h3>
     <a id="font_stylecolorrgb37_41_51_2__Go_font_28">
     </a>
     步骤 2： 初始化目录为 Go 模块
    </h3>
    <p>
     Go 项目都需要将目录初始化为一个 Go 模块。所以，这里我们需要将 fastgo 目录初始化为一个 Go 模块。初始化命令如下：
    </p>
    <pre><code class="prism language-bash">$ go mod init <span class="token comment"># 1. 初始化 Go 模块</span>
$ go work init <span class="token builtin class-name">.</span> <span class="token comment"># 2. 初始化 Go 工作区（仅限多模块管理场景），生成 go.work 文件  </span>
$ go work use <span class="token builtin class-name">.</span> <span class="token comment"># 添加当前模块到 Go 工作区</span>
</code></pre>
    <h3>
     <a id="font_stylecolorrgb37_41_51_3__Git_font_36">
     </a>
     步骤 3： 初始化目录为 Git 仓库
    </h3>
    <p>
     当前 Go 项目基本都是使用 Git 来管理项目源码的。所以，我们接下来还需要将目录初始化为一个 Git 仓库。
    </p>
    <p>
     初始化为 Git 仓库的第一步，就是在当前目录添加一个
     <code>
      .gitignore
     </code>
     文件，里面包含不期望 Git 跟踪的文件，例如：临时文件等。你可以使用生成工具
     <a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.toptal.com%2Fdevelopers%2Fgitignore" rel="nofollow">
      gitignore.io
     </a>
     来生成
     <code>
      .gitignore
     </code>
     ：
    </p>
    <pre><code class="prism language-git"># 备份文件
*.bak
*~

# Go 工作区文件。Go 项目开发中，不建议将 Go 工作区文件提交到代码仓库
go.work
go.work.sum

# 日志文件
*.log

# 自定义文件
/_output
</code></pre>
    <p>
     可以执行以下命令将 Go 项目仓库初始化为一个 Git 仓库：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">git</span> init <span class="token comment"># 初始化当前目录为 Git 仓库</span>
$ <span class="token function">git</span> config user.name 孔令飞 <span class="token comment"># 设置仓库级别用户名</span>
$ <span class="token function">git</span> config user.email colin404@foxmail.com <span class="token comment"># 设置仓库级别邮箱</span>
$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> credential.helper store <span class="token comment"># 永久保存凭据</span>
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> <span class="token comment"># 添加所有被 Git 追踪的文件到暂存区</span>
$ <span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/onexstack/miniblog <span class="token comment"># 将本地仓库与远程仓库相关联</span>
$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"feat: 第一次提交"</span> <span class="token comment"># 将暂存区内容添加到本地仓库中</span>
</code></pre>
    <p>
     之后，我们就可以在该目录下开发代码，并根据需要提交代码。提交后的源码目录内容如下：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">ls</span> <span class="token parameter variable">-A</span>
.git  .gitignore  go.mod  go.work  README.md
</code></pre>
    <h3>
     <a id="font_stylecolorrgb37_41_51_4_font_76">
     </a>
     步骤 4： 创建需要的目录
    </h3>
    <p>
     执行以下命令预创建需要的目录：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> cmd configs docs scripts
$ <span class="token function">ls</span> <span class="token parameter variable">-F</span>
cmd/  configs/  docs/  go.mod  go.work  README.md  scripts/
</code></pre>
    <p>
     提前创建一些符合目录规范的空目录可以起到一下 2 个作用：
    </p>
    <ul>
     <li>
      提前规划目录相当于提前规划未来的功能，将未来要实现的功能以目录的形式固化在项目仓库中，起到记录的作用；
     </li>
     <li>
      提前创建目录有利于后续文件按照功能存放在预先规划好的目录中，从而使项目更加规范。否则，不同开发者可能会根据各自的开发习惯，创建各种各样的目录结构和目录名称。
     </li>
    </ul>
    <p>
     因为 Git 默认不会追踪空目录，所以需要再空目录下创建 .keep 文件，创建命令如下：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">touch</span> configs/.keep docs/.keep scripts/.keep cmd/.keep
</code></pre>
    <h3>
     <a id="font_stylecolorrgb37_41_51_5__Hello_World_font_96">
     </a>
     步骤 5： 创建 Hello World 程序
    </h3>
    <p>
     创建
     <a href="https://github.com/onexstack/fastgo/tree/feature/s01/cmd/fg-apiserver">
      cmd/fg-apiserver/
     </a>
     目录（fg 是 fastgo 的简写）：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> cmd/fg-apiserver
</code></pre>
    <p>
     新建
     <a href="https://github.com/onexstack/fastgo/blob/feature/s01/cmd/fg-apiserver/main.go">
      cmd/fg-apiserver/main.go
     </a>
     ，内容如下：
    </p>
    <pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// Go 程序的默认入口函数。阅读项目代码的入口函数.</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     编译并运行，命令如下：
    </p>
    <pre><code class="prism language-bash">$ gofmt <span class="token parameter variable">-s</span> <span class="token parameter variable">-w</span> ./ <span class="token comment"># 格式化 Go 源码</span>
$ go build <span class="token parameter variable">-o</span> _output/fg-apiserver <span class="token parameter variable">-v</span> cmd/fg-apiserver/main.go <span class="token comment"># 编译 fg-apiserver 组件源码</span>
$ <span class="token function">ls</span> _output/ <span class="token comment"># _output 为二进制文件保存目录</span>
fg-apiserver
$ _output/fg-apiserver <span class="token comment"># 启动 fg-apiserver 组件</span>
Hello World<span class="token operator">!</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031313633343432312f:61727469636c652f64657461696c732f313436313932313635" class_="artid" style="display:none">
 </p>
</div>


