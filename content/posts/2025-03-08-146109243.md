---
layout: post
title: "å¯ç‹±å¯å›šçš„çˆ¬è™«ç³»åˆ—è¯¾ç¨‹-17lxmlæ¨¡å—çš„ä½¿ç”¨"
date: 2025-03-08 01:32:30 +0800
description: "lxml æ˜¯ Python è¯­è¨€ä¸­ç”¨äºå¤„ç† XML å’Œ HTML çš„åŠŸèƒ½æœ€ä¸°å¯Œä¸”æ˜“äºä½¿ç”¨çš„åº“ã€‚å®ƒåˆ©ç”¨XPathå°±å¯ä»¥å®ç°å¯¹XMLå’ŒHTMLè¿›è¡Œæ•°æ®è§£æã€‚XML æŒ‡å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ŒXML æ˜¯ä¸€ç§å¾ˆåƒHTMLçš„æ ‡è®°è¯­è¨€ã€‚ä½†æ˜¯ XML è¢«è®¾è®¡ç”¨æ¥ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼ŒHTML è¢«è®¾è®¡ç”¨æ¥æ˜¾ç¤ºæ•°æ®ã€‚å› ä¸º XML å’Œ HTML å¾ˆåƒï¼Œæ‰€ä»¥åªè®²å…¶ä¸­ä¸€ç§ï¼Œå¦ä¸€ç§å¤§å®¶ä¾¿å¯ä»¥å¾ˆç®€å•çš„èæ±‡è´¯é€šã€‚XMLé•¿è¿™ä¸ªæ ·å­ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±ç¼–å†™çš„ä¸€ä¸ª XML ç”¨ä¾‹ã€‚"
keywords: "å¯ç‹±å¯å›šçš„çˆ¬è™«ç³»åˆ—è¯¾ç¨‹ 17ï¼šlxmlæ¨¡å—çš„ä½¿ç”¨"
categories: ['çˆ¬è™«']
tags: ['çˆ¬è™«', 'Python']
artid: "146109243"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146109243
    alt: "å¯ç‹±å¯å›šçš„çˆ¬è™«ç³»åˆ—è¯¾ç¨‹-17lxmlæ¨¡å—çš„ä½¿ç”¨"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146109243
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146109243
cover: https://bing.ee123.net/img/rand?artid=146109243
image: https://bing.ee123.net/img/rand?artid=146109243
img: https://bing.ee123.net/img/rand?artid=146109243
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     å¯ç‹±å¯å›šçš„çˆ¬è™«ç³»åˆ—è¯¾ç¨‹ 17ï¼šlxmlæ¨¡å—çš„ä½¿ç”¨
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     åœ¨
     <a href="https://blog.csdn.net/weixin_42788769/article/details/135098591">
      å¯ç‹±å¯å›šçš„çˆ¬è™«ç³»åˆ—è¯¾ç¨‹ 07ï¼šBeautifulSoup4ï¼ˆbs4ï¼‰åº“çš„ä½¿ç”¨
     </a>
     ä¸­è®²åˆ°äº†ä½¿ç”¨ CSS é€‰æ‹©å™¨è¿›è¡Œæ•°æ®çš„çˆ¬å–ï¼Œå…¶å®è¿˜æœ‰å¦ä¸€ç§æ–¹å¼å¯ä»¥æ›´å¥½æ›´å¿«çš„æŠ“å–æ•°æ®ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ XPathï¼ˆXML è·¯å¾„è¯­è¨€ï¼‰ã€‚è‡³äº XPath å’Œ CSS é€‰æ‹©å™¨çš„åŒºåˆ«ï¼Œè¯·å¬æˆ‘å¨“å¨“é“æ¥ï¼š
    </p>
    <h3 id="zQUao">
     ä¸€ã€ä»€ä¹ˆæ˜¯lxml
    </h3>
    lxml æ˜¯ Python è¯­è¨€ä¸­ç”¨äºå¤„ç† XML å’Œ HTML çš„åŠŸèƒ½æœ€ä¸°å¯Œä¸”æ˜“äºä½¿ç”¨çš„åº“ã€‚å®ƒåˆ©ç”¨XPathå°±å¯ä»¥å®ç°å¯¹XMLå’ŒHTMLè¿›è¡Œæ•°æ®è§£æã€‚
    <h3 id="NGSvN">
     äºŒã€ä»€ä¹ˆæ˜¯XML
    </h3>
    XML æŒ‡å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ŒXML æ˜¯ä¸€ç§å¾ˆåƒHTMLçš„æ ‡è®°è¯­è¨€ã€‚ä½†æ˜¯ XML è¢«è®¾è®¡ç”¨æ¥ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼ŒHTML è¢«è®¾è®¡ç”¨æ¥æ˜¾ç¤ºæ•°æ®ã€‚
    <p>
     å› ä¸º XML å’Œ HTML å¾ˆåƒï¼Œæ‰€ä»¥åªè®²å…¶ä¸­ä¸€ç§ï¼Œå¦ä¸€ç§å¤§å®¶ä¾¿å¯ä»¥å¾ˆç®€å•çš„èæ±‡è´¯é€šã€‚
    </p>
    <p>
     XMLé•¿è¿™ä¸ªæ ·å­ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±ç¼–å†™çš„ä¸€ä¸ª XML ç”¨ä¾‹ã€‚
    </p>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>supermarket</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!--  è¿™æ˜¯ä¸€æ¡å¹³å¹³æ— å¥‡çš„æ³¨é‡Š  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>æ²ƒå°”ç›<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span><span class="token punctuation">&gt;</span></span>ä¸­å›½å››å·æˆéƒ½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>address</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>staffs</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span> <span class="token attr-name">sex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç”·<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å¼ ä¸‰<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span> <span class="token attr-name">sex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç”·<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>æå››<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>23<span class="token punctuation">"</span></span> <span class="token attr-name">gender</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¥³<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ç‹äº”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>staffs</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goods</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å•¤é…’
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>count</span><span class="token punctuation">&gt;</span></span>12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>count</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>é¥®æ–™
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>count</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>count</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>çŸ¿æ³‰æ°´<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>èŠ±ç”Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ç“œå­<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ç«è…¿è‚ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goods</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>supermarket</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h3 id="poxJK">
     ä¸‰ã€ä»€ä¹ˆæ˜¯XPath
    </h3>
    XPathæ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ï¼Œç”¨ XPath å†™å‡ºçš„è·¯å¾„è¡¨è¾¾å¼å¯ä»¥åœ¨ XML æ–‡æ¡£ä¸­è¿›è¡Œå¯¼èˆªã€‚
    <p>
     ä½¿ç”¨ XPath ç¼–å†™çš„è·¯å¾„è¡¨è¾¾å¼ï¼Œå’Œæˆ‘ä»¬å¸¸ä½¿ç”¨çš„ç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„éå¸¸ç›¸ä¼¼ã€‚é‚£ä¹ˆXPathçš„è¯­æ³•æ˜¯æ€æ ·çš„å‘¢ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ã€‚
    </p>
    <h3 id="jThvw">
     å››ã€XPathè¯­æ³•
    </h3>
    é¦–å…ˆå…ˆæ¥è¯´ä¸‹XPathéœ€è¦ç†è§£çš„æ¦‚å¿µï¼Œæœ‰æ ‘ã€èŠ‚ç‚¹ã€æ ¹èŠ‚ç‚¹ã€å…ƒç´ èŠ‚ç‚¹ã€å±æ€§èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹ã€‚
    <ul>
     <li>
      æ ‘ï¼šæ•´ä¸ªhtmlæˆ–è€…xmlæ–‡æ¡£ã€‚
     </li>
     <li>
      èŠ‚ç‚¹ï¼šæ ‘ç»“æ„ä¸­çš„æ¯ä¸ªéƒ¨åˆ†ï¼ˆæ ‡ç­¾ã€æ–‡æœ¬ã€å±æ€§ã€æ³¨é‡Šç­‰ï¼‰å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚
     </li>
     <li>
      æ ¹èŠ‚ç‚¹ï¼šæ ‘ç»“æ„ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯æ ¹èŠ‚ç‚¹ï¼ˆç½‘é¡µå¯¹åº”çš„æ ¹èŠ‚ç‚¹æ˜¯htmlæ ‡ç­¾ï¼‰ã€‚
     </li>
     <li>
      å…ƒç´ èŠ‚ç‚¹ï¼šä¸€ä¸ªæ ‡ç­¾å°±æ˜¯ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼š
      <code>
       &lt;name&gt;æ²ƒå°”ç›&lt;/name&gt;
      </code>
      ã€‚
     </li>
     <li>
      å±æ€§èŠ‚ç‚¹ï¼šæ ‡ç­¾å†…çš„ä¸€ä¸ªå±æ€§å°±æ˜¯ä¸€ä¸ªå±æ€§èŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼š
      <code>
       age="20"
      </code>
      ã€‚
     </li>
     <li>
      æ³¨é‡ŠèŠ‚ç‚¹ï¼šæ ‘ç»“æ„ä¸­çš„ä¸€ä¸ªæ³¨é‡Šå°±æ˜¯ä¸€ä¸ªæ³¨é‡ŠèŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼š
      <code>
       &lt;!-- è¿™æ˜¯ä¸€æ¡å¹³å¹³æ— å¥‡çš„æ³¨é‡Š --&gt;
      </code>
      ã€‚
     </li>
     <li>
      æ–‡æœ¬èŠ‚ç‚¹ï¼šæ ‡ç­¾å†…çš„æ–‡å­—å†…å®¹å°±æ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼š
      <code>
       æ²ƒå°”ç›
      </code>
      ã€‚
     </li>
    </ul>
    <p>
     è®°ä½è¿™äº›æ¦‚å¿µï¼Œå°±èƒ½å¾ˆå¥½çš„å»å¯»æ‰¾èŠ‚ç‚¹æå–å†…å®¹äº†ã€‚
    </p>
    <h3 id="qa3hc">
     äº”ã€è§£æ
    </h3>
    æˆ‘ä»¬éœ€è¦ä½¿ç”¨ lxml æ¨¡å—ä¸­çš„ etree åŒ…æä¾›çš„ XML æ–¹æ³•æˆ–è€… HTML æ–¹æ³•é’ˆå¯¹äºå­—ç¬¦ä¸²ç±»å‹çš„ XML æˆ–è€… HTML è¿›è¡Œè§£æï¼Œè¿”å›ä¸€ä¸ª _Element å¯¹è±¡ï¼Œé’ˆå¯¹ _Element å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ xpath æ–¹æ³•æ ¹æ®è·¯å¾„è¡¨è¾¾å¼è¿›è¡Œå¯¼èˆªã€‚
    <p>
     ï¼ˆ1ï¼‰å…ˆçœ‹ä¸€ä¸‹å¦‚ä½•è¿›è¡Œ XML æˆ– HTML çš„è§£æã€‚
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree

xmlStr <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
&lt;supermarket&gt;
	  &lt;!--  è¿™æ˜¯ä¸€æ¡å¹³å¹³æ— å¥‡çš„æ³¨é‡Š  --&gt;
    &lt;name&gt;æ²ƒå°”ç›&lt;/name&gt;
    &lt;address&gt;ä¸­å›½å››å·æˆéƒ½&lt;/address&gt;
    &lt;staffs&gt;
        &lt;name age="20" sex="ç”·"&gt;å¼ ä¸‰&lt;/name&gt;
        &lt;name age="30" sex="ç”·"&gt;æå››&lt;/name&gt;
        &lt;name age="23" gender="å¥³"&gt;ç‹äº”&lt;/name&gt;
    &lt;/staffs&gt;
    &lt;goods&gt;
        &lt;name price="8"&gt;å•¤é…’
            &lt;count&gt;12&lt;/count&gt;
        &lt;/name&gt;
        &lt;name price="3"&gt;é¥®æ–™
            &lt;count&gt;5&lt;/count&gt;
        &lt;/name&gt;
        &lt;name price="1" count="10"&gt;çŸ¿æ³‰æ°´&lt;/name&gt;
        &lt;name price="5"&gt;èŠ±ç”Ÿ&lt;/name&gt;
        &lt;name price="6"&gt;ç“œå­&lt;/name&gt;
        &lt;name price="2"&gt;ç«è…¿è‚ &lt;/name&gt;
    &lt;/goods&gt;
&lt;/supermarket&gt;
"""</span>

root <span class="token operator">=</span> etree<span class="token punctuation">.</span>XML<span class="token punctuation">(</span>xmlStr<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
<span class="token comment"># &lt;Element supermarket at 0x1047401c0&gt;</span>
</code></pre>
    <p>
     ä¸Šè¿°ä»£ç é€šè¿‡ etree ä¸­çš„ XMLæ–¹æ³•å°† XML æ–‡æ¡£è½¬åŒ–æˆäº†ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œä¸”å·²ç»å‘ŠçŸ¥æˆ‘ä»¬æ­¤å¤„çš„èŠ‚ç‚¹ä¸º supermarketã€‚
    </p>
    <p>
     ï¼ˆ2ï¼‰ç»§ç»­å‘ä¸‹çœ‹ï¼Œæˆ‘ä»¬å­¦ä¹  xpath è¯­æ³•æå–å…·ä½“å†…å®¹ã€‚
    </p>
    <p>
     å…ˆæ¥çœ‹xpathæ–¹æ³•çš„è¯­æ³•ï¼š
     <code>
      èŠ‚ç‚¹å¯¹è±¡.xpath(è·¯å¾„è¡¨è¾¾å¼)
     </code>
    </p>
    <p>
     è·¯å¾„è¡¨è¾¾å¼åˆ†ä¸ºç»å¯¹è·¯å¾„ã€ç›¸å¯¹è·¯å¾„ã€‚ä½†æ˜¯ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ‰€ä»¥åªéœ€è¦ç²¾é€šç›¸å¯¹è·¯å¾„å³å¯ã€‚
    </p>
    <ul>
     <li>
      ç»å¯¹è·¯å¾„ï¼šä¸ç®¡æ˜¯å“ªä¸ªèŠ‚ç‚¹å¯¹è±¡åœ¨è°ƒç”¨xpathæ–¹æ³•ï¼Œéƒ½æ˜¯ä»¥
      <code>
       /
      </code>
      å¼€å¤´ï¼Œç„¶åä»æ ¹èŠ‚ç‚¹å¼€å§‹ä¸€å±‚ä¸€å±‚å†™èµ·ï¼ŒèŠ‚ç‚¹å’ŒèŠ‚ç‚¹ä¹‹é—´ä½¿ç”¨ã€‚
     </li>
     <li>
      ç›¸å¯¹è·¯å¾„ï¼šå“ªä¸ªèŠ‚ç‚¹å¯¹è±¡åœ¨è°ƒç”¨xpathæ–¹æ³•ï¼Œè¿™ä¸ªèŠ‚ç‚¹å°±ä½¿ç”¨
      <code>
       .
      </code>
      è¡¨ç¤ºï¼Œç„¶åä»æ­¤å¤„ä¸€å±‚ä¸€å±‚å¼€å§‹å†™ã€‚
     </li>
    </ul>
    <p>
     æ³¨æ„ï¼šèŠ‚ç‚¹å’ŒèŠ‚ç‚¹ä¹‹é—´ä½¿ç”¨
     <code>
      /
     </code>
     é—´éš”ï¼Œè·¨è¶ŠèŠ‚ç‚¹è¦ä½¿ç”¨
     <code>
      //
     </code>
     ã€‚
    </p>
    <pre><code class="prism language-python"><span class="token comment"># é—®é¢˜ä¸€ï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„è·å–staffsèŠ‚ç‚¹ä¸‹çš„ä¸‰ä¸ªnameèŠ‚ç‚¹</span>
nameList <span class="token operator">=</span> root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nameList<span class="token punctuation">)</span>
<span class="token comment"># [&lt;Element name at 0x105551940&gt;, &lt;Element name at 0x105551980&gt;, &lt;Element name at 0x1055519c0&gt;]</span>
<span class="token comment"># ç»“æœä¸ºä¸Šè¿°æ³¨é‡Šï¼Œæ³¨æ„ï¼Œå› ä¸ºæ­¤å¤„çš„rootä¸ºsupermarketèŠ‚ç‚¹ï¼Œä¸‹ä¸€çº§ä¾¿æ˜¯staffsèŠ‚ç‚¹ï¼Œæ­¤å¤„ä½¿ç”¨çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰€ä»¥.è¡¨ç¤ºçš„ä¾¿æ˜¯supermarketèŠ‚ç‚¹</span>

<span class="token comment"># é—®é¢˜äºŒï¼šä½¿ç”¨ç»å¯¹è·¯å¾„è·å–staffsèŠ‚ç‚¹ä¸‹çš„ä¸‰ä¸ªnameèŠ‚ç‚¹</span>
nameList <span class="token operator">=</span> root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/supermarket/staffs/name'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nameList<span class="token punctuation">)</span>
<span class="token comment"># [&lt;Element name at 0x105551940&gt;, &lt;Element name at 0x105551980&gt;, &lt;Element name at 0x1055519c0&gt;]</span>

<span class="token comment"># é—®é¢˜ä¸‰ï¼šè·å–æ‰€æœ‰çš„nameèŠ‚ç‚¹</span>
nameList <span class="token operator">=</span> root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//name'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nameList<span class="token punctuation">)</span>
<span class="token comment"># [&lt;Element name at 0x105551a00&gt;, &lt;Element name at 0x105551940&gt;, &lt;Element name at 0x105551980&gt;, &lt;Element name at 0x1055519c0&gt;, &lt;Element name at 0x105551a40&gt;, &lt;Element name at 0x105551ac0&gt;, &lt;Element name at 0x105551b00&gt;, &lt;Element name at 0x105551b40&gt;, &lt;Element name at 0x105551b80&gt;, &lt;Element name at 0x105551a80&gt;]</span>
</code></pre>
    <p>
     åœ¨è·¯å¾„çš„æœ€åæ·»åŠ 
     <code>
      /text()
     </code>
     ï¼Œå¯ä»¥å¾—åˆ°æ­¤èŠ‚ç‚¹é‡Œé¢çš„å†…å®¹ï¼›æ·»åŠ 
     <code>
      /@å±æ€§å
     </code>
     ï¼Œå¯ä»¥å¾—åˆ°æ­¤èŠ‚ç‚¹ä¸­å±æ€§å¯¹åº”çš„å€¼ã€‚
    </p>
    <pre><code class="prism language-python">nameList <span class="token operator">=</span> root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name/text()'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nameList<span class="token punctuation">)</span>
<span class="token comment"># ['å¼ ä¸‰', 'æå››', 'ç‹äº”']</span>

sexList <span class="token operator">=</span> root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name/@sex'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>sexList<span class="token punctuation">)</span>
<span class="token comment"># ['ç”·', 'ç”·']</span>
</code></pre>
    <p>
     è°“è¯­ï¼Œåœ¨è·¯å¾„ä¸­éœ€è¦æ·»åŠ æ¡ä»¶çš„èŠ‚ç‚¹åé¢æ·»åŠ []ï¼Œåœ¨[]ä¸­å†™æ¡ä»¶ã€‚
    </p>
    <ul>
     <li>
      [N]ï¼šè¡¨ç¤ºè·å–ç¬¬Nä¸ªèŠ‚ç‚¹ï¼Œä»æ•°å­—1å¼€å§‹ã€‚
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># è·å–ç¬¬äºŒä¸ªå‘˜å·¥çš„å§“å</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[2]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['æå››']</span>
</code></pre>
    <ul>
     <li>
      [last()]ï¼šè¡¨ç¤ºè·å–æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># è·å–å€’æ•°ç¬¬äºŒä¸ªå‘˜å·¥çš„å§“å</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[last()-1]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['æå››']</span>
</code></pre>
    <ul>
     <li>
      position()ï¼šè·å–æŸäº›ä½ç½®çš„æ ‡ç­¾
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># è·å–å‰ä¸¤ä¸ªå‘˜å·¥çš„å¹´é¾„</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[position()&lt;=2]/@age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[position()&lt;3]/@age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['20', '30']</span>

<span class="token comment"># è·å–åä¸¤ä¸ªå‘˜å·¥çš„å¹´é¾„</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[position()&gt;=last()-1]/@age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[position()&gt;last()-2]/@age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['30', '23']</span>
</code></pre>
    <ul>
     <li>
      [@å±æ€§å]
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># è·å–æœ‰å¹´é¾„ä¿¡æ¯çš„å‘˜å·¥å§“å</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[@age]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['å¼ ä¸‰', 'æå››', 'ç‹äº”']</span>
</code></pre>
    <ul>
     <li>
      [@å±æ€§å=å±æ€§å€¼]
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># è·å–å±æ€§sex="ç”·"çš„å‘˜å·¥çš„å§“å</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name[@sex="ç”·"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['å¼ ä¸‰', 'æå››']</span>
</code></pre>
    <ul>
     <li>
      [å­æ ‡ç­¾å=å€¼]ã€[å­æ ‡ç­¾å&gt;å€¼]ç­‰
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># è·å–æœ‰countå­æ ‡ç­¾ä¸”æ ‡ç­¾å†…å®¹ç­‰äº12çš„çˆ¶æ ‡ç­¾çš„å†…å®¹</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./goods/name[count=12]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['å•¤é…’\n            ', '\n        ']</span>
</code></pre>
    <p>
     åˆ†æ”¯ï¼ˆ
     <strong>
      ï½œ
     </strong>
     ï¼‰ï¼šå°†å¤šä¸ªè·¯å¾„é€‰æ‹©å™¨ä½¿ç”¨
     <code>
      |
     </code>
     é—´éš”ï¼ŒåŒæ—¶è·å–å¤šä¸ªå…ƒç´ ã€‚
    </p>
    <pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name/text()|./staffs/name/@age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['20', 'å¼ ä¸‰', '30', 'æå››', '23', 'ç‹äº”']</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./staffs/name/text()|./staffs/name/@sex'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ['ç”·', 'å¼ ä¸‰', 'ç”·', 'æå››', 'ç‹äº”']</span>
</code></pre>
    <p>
     æ€»ç»“ï¼Œä¸CSSé€‰æ‹©å™¨ä¸€æ ·ï¼Œ
     <strong>
      XPathè·¯å¾„é€‰æ‹©å™¨ä¹Ÿéœ€è¦çµæ´»è¿ç”¨
     </strong>
     ã€‚
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323738383736392f:61727469636c652f64657461696c732f313436313039323433" class_="artid" style="display:none">
 </p>
</div>


