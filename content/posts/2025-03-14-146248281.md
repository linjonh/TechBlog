---
layout: post
title: "银河麒麟V10ServerSP3中Redis7源码编译与安装详细教程"
date: 2025-03-14 08:46:35 +0800
description: "银河麒麟V10ServerSP3中Redis7源码编译与安装详细教程"
keywords: "银河麒麟V10ServerSP3中Redis7源码编译与安装详细教程"
categories: ['未分类']
tags: ['银河麒麟', '国产操作系统', 'Redis', 'Redis', 'Kylinv']
artid: "146248281"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146248281
    alt: "银河麒麟V10ServerSP3中Redis7源码编译与安装详细教程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146248281
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146248281
cover: https://bing.ee123.net/img/rand?artid=146248281
image: https://bing.ee123.net/img/rand?artid=146248281
img: https://bing.ee123.net/img/rand?artid=146248281
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     银河麒麟V10ServerSP3中Redis7源码编译与安装详细教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="V10ServerSP3Redis7_0">
     </a>
     银河麒麟V10ServerSP3中Redis7源码编译与安装详细教程
    </h2>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="1__3">
     </a>
     1. 下载
    </h2>
    <p>
     <a href="https://redis.io/" rel="nofollow">
      官网
     </a>
    </p>
    <p>
     <a href="https://github.com/redis">
      github地址
     </a>
    </p>
    <p>
     <a href="https://codeload.github.com/redis/redis/tar.gz/refs/tags/7.4.1" rel="nofollow">
      github中Redis源码直接下载地址
     </a>
    </p>
    <p>
     本下载的版本为
     <code>
      redis-7.4.1.tar.gz
     </code>
    </p>
    <h2>
     <a id="2__13">
     </a>
     2. 安装过程
    </h2>
    <h3>
     <a id="1__15">
     </a>
     1. 解压
    </h3>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /opt/mysoftware/</span>
<span class="token punctuation">[</span>root@localhost mysoftware<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">4704</span>
drwxr-xr-x <span class="token number">2</span> root root       <span class="token number">27</span> <span class="token number">12</span>月  <span class="token number">5</span> 00:50 dm8
drwxr-xr-x <span class="token number">9</span>  <span class="token number">502</span> games     <span class="token number">186</span> <span class="token number">12</span>月  <span class="token number">5</span> 00:54 nginx-1.26.2
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">1244789</span> <span class="token number">12</span>月  <span class="token number">5</span> 00:51 nginx-1.26.2.tar.gz
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">3567859</span> <span class="token number">12</span>月  <span class="token number">5</span> 01:49 redis-7.4.1.tar.gz
<span class="token punctuation">[</span>root@localhost mysoftware<span class="token punctuation">]</span><span class="token comment"># tar -zxvf redis-7.4.1.tar.gz </span>
redis-7.4.1/
redis-7.4.1/.codespell/
redis-7.4.1/.codespell/.codespellrc
redis-7.4.1/.codespell/requirements.txt
redis-7.4.1/.codespell/wordlist.txt
redis-7.4.1/.gitattributes
redis-7.4.1/.github/
<span class="token punctuation">..</span><span class="token punctuation">..</span>. <span class="token comment"># 中间内容过多这里省略显示</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>.
redis-7.4.1/utils/req-res-validator/requirements.txt
redis-7.4.1/utils/speed-regression.tcl
redis-7.4.1/utils/srandmember/
redis-7.4.1/utils/srandmember/README.md
redis-7.4.1/utils/srandmember/showdist.rb
redis-7.4.1/utils/srandmember/showfreq.rb
redis-7.4.1/utils/systemd-redis_multiple_servers@.service
redis-7.4.1/utils/systemd-redis_server.service
redis-7.4.1/utils/tracking_collisions.c
redis-7.4.1/utils/whatisdoing.sh
<span class="token punctuation">[</span>root@localhost mysoftware<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <h3>
     <a id="2__50">
     </a>
     2. 编译源码
    </h3>
    <pre><code class="prism language-shell"><span class="token comment"># 1. 进入到解压后的源码目录</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /opt/mysoftware/redis-7.4.1/</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">280</span>
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">10420</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 00-RELEASENOTES
-rw-rw-r--  <span class="token number">1</span> root root     <span class="token number">51</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 BUGS
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">5023</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 CODE_OF_CONDUCT.md
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">7178</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 CONTRIBUTING.md
drwxrwxr-x  <span class="token number">8</span> root root    <span class="token number">133</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 deps
-rw-rw-r--  <span class="token number">1</span> root root     <span class="token number">11</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 INSTALL
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">37493</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 LICENSE.txt
-rw-rw-r--  <span class="token number">1</span> root root    <span class="token number">151</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 Makefile
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">6888</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 MANIFESTO
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">23845</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 README.md
-rw-rw-r--  <span class="token number">1</span> root root <span class="token number">108981</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 redis.conf
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">1805</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 REDISCONTRIBUTIONS.txt
-rwxrwxr-x  <span class="token number">1</span> root root    <span class="token number">279</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest
-rwxrwxr-x  <span class="token number">1</span> root root    <span class="token number">283</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest-cluster
-rwxrwxr-x  <span class="token number">1</span> root root   <span class="token number">1804</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest-moduleapi
-rwxrwxr-x  <span class="token number">1</span> root root    <span class="token number">285</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest-sentinel
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">1480</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 SECURITY.md
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">14700</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 sentinel.conf
drwxrwxr-x  <span class="token number">4</span> root root   <span class="token number">8192</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 src
drwxrwxr-x <span class="token number">11</span> root root    <span class="token number">199</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 tests
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">3628</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 TLS.md
drwxrwxr-x  <span class="token number">9</span> root root   <span class="token number">4096</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 utils
<span class="token comment">## 2. 执行 make 命令进行编译</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># make</span>
<span class="token builtin class-name">cd</span> src <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> all
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 进入目录“/opt/mysoftware/redis-7.4.1/src”
    CC Makefile.dep
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> redis-server redis-sentinel redis-cli redis-benchmark redis-check-rdb redis-check-aof *.o *.gcda *.gcno *.gcov redis.info <span class="token punctuation">..</span>.
<span class="token punctuation">(</span>cd <span class="token punctuation">..</span>/deps <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> distclean<span class="token punctuation">)</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: 进入目录“/opt/mysoftware/redis-7.4.1/deps”
<span class="token punctuation">(</span>cd hiredis <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> clean<span class="token punctuation">)</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">||</span> <span class="token boolean">true</span>
<span class="token punctuation">(</span>cd linenoise <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> clean<span class="token punctuation">)</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">||</span> <span class="token boolean">true</span>
<span class="token punctuation">(</span>cd lua <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> clean<span class="token punctuation">)</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">||</span> <span class="token boolean">true</span>
<span class="token punctuation">(</span>cd jemalloc <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> Makefile <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> distclean<span class="token punctuation">)</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">||</span> <span class="token boolean">true</span>
<span class="token punctuation">(</span>cd hdr_histogram <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> clean<span class="token punctuation">)</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">||</span> <span class="token boolean">true</span>
<span class="token punctuation">(</span>cd fpconv <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> clean<span class="token punctuation">)</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">||</span> <span class="token boolean">true</span>
<span class="token punctuation">(</span>rm <span class="token parameter variable">-f</span> .make-*<span class="token punctuation">)</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: 离开目录“/opt/mysoftware/redis-7.4.1/deps”
<span class="token punctuation">(</span>cd modules <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> clean<span class="token punctuation">)</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: 进入目录“/opt/mysoftware/redis-7.4.1/src/modules”
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> *.xo *.so
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: 离开目录“/opt/mysoftware/redis-7.4.1/src/modules”
<span class="token punctuation">(</span>cd <span class="token punctuation">..</span>/tests/modules <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> clean<span class="token punctuation">)</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: 进入目录“/opt/mysoftware/redis-7.4.1/tests/modules”
<span class="token punctuation">..</span><span class="token punctuation">..</span>.
<span class="token punctuation">..</span><span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
jemalloc version   <span class="token builtin class-name">:</span> <span class="token number">5.3</span>.0-0-g0
library revision   <span class="token builtin class-name">:</span> <span class="token number">2</span>

CONFIG             <span class="token builtin class-name">:</span> --disable-cxx --with-version<span class="token operator">=</span><span class="token number">5.3</span>.0-0-g0 --with-lg-quantum<span class="token operator">=</span><span class="token number">3</span> --disable-cache-oblivious --with-jemalloc-prefix<span class="token operator">=</span>je_ <span class="token assign-left variable">CFLAGS</span><span class="token operator">=</span> <span class="token assign-left variable">LDFLAGS</span><span class="token operator">=</span>
CC                 <span class="token builtin class-name">:</span> gcc
CONFIGURE_CFLAGS   <span class="token builtin class-name">:</span> <span class="token parameter variable">-std</span><span class="token operator">=</span>gnu11 <span class="token parameter variable">-Wall</span> <span class="token parameter variable">-Wextra</span> -Wsign-compare <span class="token parameter variable">-Wundef</span> -Wno-format-zero-length -Wpointer-arith -Wno-missing-braces -Wno-missing-field-initializers -Wno-missing-attributes <span class="token parameter variable">-pipe</span> <span class="token parameter variable">-g3</span> <span class="token parameter variable">-fvisibility</span><span class="token operator">=</span>hidden -Wimplicit-fallthrough <span class="token parameter variable">-O3</span> -funroll-loops
SPECIFIED_CFLAGS   <span class="token builtin class-name">:</span> 
EXTRA_CFLAGS       <span class="token builtin class-name">:</span> 
CPPFLAGS           <span class="token builtin class-name">:</span> <span class="token parameter variable">-D_GNU_SOURCE</span> <span class="token parameter variable">-D_REENTRANT</span>
CXX                <span class="token builtin class-name">:</span> 
CONFIGURE_CXXFLAGS <span class="token builtin class-name">:</span> 
SPECIFIED_CXXFLAGS <span class="token builtin class-name">:</span> 
EXTRA_CXXFLAGS     <span class="token builtin class-name">:</span> 
LDFLAGS            <span class="token builtin class-name">:</span> 
EXTRA_LDFLAGS      <span class="token builtin class-name">:</span> 
DSO_LDFLAGS        <span class="token builtin class-name">:</span> <span class="token parameter variable">-shared</span> -Wl,-soname,<span class="token variable"><span class="token variable">$(</span>@F<span class="token variable">)</span></span>
LIBS               <span class="token builtin class-name">:</span> <span class="token parameter variable">-lm</span>  <span class="token parameter variable">-pthread</span> <span class="token parameter variable">-ldl</span>
RPATH_EXTRA        <span class="token builtin class-name">:</span> 

XSLTPROC           <span class="token builtin class-name">:</span> /usr/bin/xsltproc
XSLROOT            <span class="token builtin class-name">:</span> /usr/share/sgml/docbook/xsl-stylesheets

PREFIX             <span class="token builtin class-name">:</span> /usr/local
BINDIR             <span class="token builtin class-name">:</span> /usr/local/bin
DATADIR            <span class="token builtin class-name">:</span> /usr/local/share
INCLUDEDIR         <span class="token builtin class-name">:</span> /usr/local/include
LIBDIR             <span class="token builtin class-name">:</span> /usr/local/lib
MANDIR             <span class="token builtin class-name">:</span> /usr/local/share/man

srcroot            <span class="token builtin class-name">:</span> 
abs_srcroot        <span class="token builtin class-name">:</span> /opt/mysoftware/redis-7.4.1/deps/jemalloc/
objroot            <span class="token builtin class-name">:</span> 
abs_objroot        <span class="token builtin class-name">:</span> /opt/mysoftware/redis-7.4.1/deps/jemalloc/

JEMALLOC_PREFIX    <span class="token builtin class-name">:</span> je_
JEMALLOC_PRIVATE_NAMESPACE
                   <span class="token builtin class-name">:</span> je_
install_suffix     <span class="token builtin class-name">:</span> 
malloc_conf        <span class="token builtin class-name">:</span> 
documentation      <span class="token builtin class-name">:</span> <span class="token number">1</span>
shared libs        <span class="token builtin class-name">:</span> <span class="token number">1</span>
static libs        <span class="token builtin class-name">:</span> <span class="token number">1</span>
autogen            <span class="token builtin class-name">:</span> <span class="token number">0</span>
debug              <span class="token builtin class-name">:</span> <span class="token number">0</span>
stats              <span class="token builtin class-name">:</span> <span class="token number">1</span>
experimental_smallocx <span class="token builtin class-name">:</span> <span class="token number">0</span>
prof               <span class="token builtin class-name">:</span> <span class="token number">0</span>
prof-libunwind     <span class="token builtin class-name">:</span> <span class="token number">0</span>
prof-libgcc        <span class="token builtin class-name">:</span> <span class="token number">0</span>
prof-gcc           <span class="token builtin class-name">:</span> <span class="token number">0</span>
fill               <span class="token builtin class-name">:</span> <span class="token number">1</span>
utrace             <span class="token builtin class-name">:</span> <span class="token number">0</span>
xmalloc            <span class="token builtin class-name">:</span> <span class="token number">0</span>
log                <span class="token builtin class-name">:</span> <span class="token number">0</span>
lazy_lock          <span class="token builtin class-name">:</span> <span class="token number">0</span>
cache-oblivious    <span class="token builtin class-name">:</span> <span class="token number">0</span>
cxx                <span class="token builtin class-name">:</span> <span class="token number">0</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token builtin class-name">cd</span> jemalloc <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> lib/libjemalloc.a
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: 进入目录“/opt/mysoftware/redis-7.4.1/deps/jemalloc”
gcc <span class="token parameter variable">-std</span><span class="token operator">=</span>gnu11 <span class="token parameter variable">-Wall</span> <span class="token parameter variable">-Wextra</span> -Wsign-compare <span class="token parameter variable">-Wundef</span> -Wno-format-zero-length -Wpointer-arith -Wno-missing-braces -Wno-missing-
<span class="token punctuation">..</span><span class="token punctuation">..</span>.
<span class="token punctuation">..</span><span class="token punctuation">..</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: 离开目录“/opt/mysoftware/redis-7.4.1/deps/jemalloc”
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: 离开目录“/opt/mysoftware/redis-7.4.1/deps”
    CC threads_mngr.o
    CC adlist.o
    CC quicklist.o
    CC ae.o
    CC anet.o
    CC dict.o
    CC ebuckets.o
    CC mstr.o
    CC kvstore.o
    CC server.o
    CC sds.o
    CC zmalloc.o
    CC lzf_c.o
    CC lzf_d.o
    CC pqsort.o
    CC zipmap.o
    CC sha1.o
    CC ziplist.o
    CC release.o
    CC networking.o
    CC util.o
    CC object.o
    CC db.o
    CC replication.o
    CC rdb.o
    CC t_string.o
    CC t_list.o
    CC t_set.o
    CC t_zset.o
    CC t_hash.o
    CC config.o
    CC aof.o
    CC pubsub.o
    CC multi.o
    CC debug.o
    CC sort.o
    CC intset.o
    CC syncio.o
    CC cluster.o
    CC cluster_legacy.o
    CC crc16.o
    CC endianconv.o
    CC slowlog.o
    CC eval.o
    CC bio.o
    CC rio.o
    CC rand.o
    CC memtest.o
    CC syscheck.o
    CC crcspeed.o
    CC crc64.o
    CC bitops.o
    CC sentinel.o
    CC notify.o
    CC setproctitle.o
    CC blocked.o
    CC hyperloglog.o
    CC latency.o
    CC sparkline.o
    CC redis-check-rdb.o
    CC redis-check-aof.o
    CC geo.o
    CC lazyfree.o
    CC module.o
    CC evict.o
    CC expire.o
    CC geohash.o
    CC geohash_helper.o
    CC childinfo.o
    CC defrag.o
    CC siphash.o
    CC rax.o
    CC t_stream.o
    CC listpack.o
    CC localtime.o
    CC lolwut.o
    CC lolwut5.o
    CC lolwut6.o
    CC acl.o
    CC tracking.o
    CC socket.o
    CC tls.o
    CC sha256.o
    CC timeout.o
    CC setcpuaffinity.o
    CC monotonic.o
    CC mt19937-64.o
    CC resp_parser.o
    CC call_reply.o
    CC script_lua.o
    CC script.o
    CC functions.o
    CC function_lua.o
    CC commands.o
    CC strl.o
    CC connection.o
    CC unix.o
    CC logreqres.o
    LINK redis-server
    INSTALL redis-sentinel
    CC redis-cli.o
    CC redisassert.o
    CC cli_common.o
    CC cli_commands.o
    LINK redis-cli
    CC redis-benchmark.o
    LINK redis-benchmark
    INSTALL redis-check-rdb
    INSTALL redis-check-aof

Hint: It<span class="token string">'s a good idea to run '</span><span class="token function">make</span> test' <span class="token punctuation">;</span><span class="token punctuation">)</span>

make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 离开目录“/opt/mysoftware/redis-7.4.1/src”
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <h3>
     <a id="3__285">
     </a>
     3. 测试编译结果（可选）
    </h3>
    <p>
     如果你想在安装前测试编译好的Redis是否正常工作，可以运行测试套件。
    </p>
    <pre><code class="prism language-shell">Last login: Thu Dec  <span class="token number">5</span> 01:53:01 <span class="token number">2024</span> from <span class="token number">192.168</span>.31.12
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /opt/mysoftware/redis-7.4.1/</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/opt/mysoftware/redis-7.4.1
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># make test</span>
<span class="token builtin class-name">cd</span> src <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token builtin class-name">test</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 进入目录“/opt/mysoftware/redis-7.4.1/src”
    CC Makefile.dep
    CC release.o
    LINK redis-server
    INSTALL redis-check-aof
    LINK redis-cli
    LINK redis-benchmark
Cleanup: may take some time<span class="token punctuation">..</span>. OK
Starting <span class="token builtin class-name">test</span> server at port <span class="token number">21079</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span> WARNING The following tests failed:

*** <span class="token punctuation">[</span>err<span class="token punctuation">]</span>: Active defrag - AOF loading <span class="token keyword">in</span> tests/unit/memefficiency.tcl
Expected <span class="token number">59</span> <span class="token operator">&lt;=</span> <span class="token number">40</span> <span class="token punctuation">(</span>context: <span class="token builtin class-name">type</span> <span class="token builtin class-name">eval</span> line <span class="token number">37</span> cmd <span class="token punctuation">{<!-- --></span>assert <span class="token punctuation">{<!-- --></span><span class="token variable">$max_latency</span> <span class="token operator">&lt;=</span> <span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">}</span> proc ::test<span class="token punctuation">)</span>
Cleanup: may take some time<span class="token punctuation">..</span>. OK
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: *** <span class="token punctuation">[</span>Makefile:476：test<span class="token punctuation">]</span> 错误 <span class="token number">1</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 离开目录“/opt/mysoftware/redis-7.4.1/src”
make: *** <span class="token punctuation">[</span>Makefile:6：test<span class="token punctuation">]</span> 错误 <span class="token number">2</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token comment"># 上面错误就是鄙视你的配置太低了，因为在虚拟机中测试的，不影响</span>
</code></pre>
    <h3>
     <a id="4_Redis_322">
     </a>
     4. 安装Redis
    </h3>
    <p>
     编译完成后，使用
     <code>
      make install
     </code>
     命令安装Redis。这将会把Redis二进制文件安装到系统的默认路径下
    </p>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /opt/mysoftware/redis-7.4.1/</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/opt/mysoftware/redis-7.4.1
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># make install</span>
<span class="token builtin class-name">cd</span> src <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 进入目录“/opt/mysoftware/redis-7.4.1/src”
    INSTALL redis-sentinel
    INSTALL redis-check-rdb

Hint: It<span class="token string">'s a good idea to run '</span><span class="token function">make</span> test' <span class="token punctuation">;</span><span class="token punctuation">)</span>

    INSTALL redis-server
    INSTALL redis-benchmark
    INSTALL redis-cli
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 离开目录“/opt/mysoftware/redis-7.4.1/src”
<span class="token punctuation">[</span>root@localhost redis-7.4
</code></pre>
    <h3>
     <a id="5__345">
     </a>
     5. 安装位置
    </h3>
    <p>
     Redis安装完成后在
     <code>
      /usr/local/bin/
     </code>
     目录下可查看
    </p>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># whereis redis</span>
redis:
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/bin/</span>
<span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">30296</span>
-rwxr-xr-x <span class="token number">1</span> root root  <span class="token number">7003992</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:28 redis-benchmark
lrwxrwxrwx <span class="token number">1</span> root root       <span class="token number">12</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:28 redis-check-aof -<span class="token operator">&gt;</span> redis-server
lrwxrwxrwx <span class="token number">1</span> root root       <span class="token number">12</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:28 redis-check-rdb -<span class="token operator">&gt;</span> redis-server
-rwxr-xr-x <span class="token number">1</span> root root  <span class="token number">7864432</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:28 redis-cli
lrwxrwxrwx <span class="token number">1</span> root root       <span class="token number">12</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:28 redis-sentinel -<span class="token operator">&gt;</span> redis-server
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">16148928</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:28 redis-server
<span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <h3>
     <a id="6__364">
     </a>
     6. 复制配置文件
    </h3>
    <p>
     Redis的配置文件在源码目录下可找到，如
     <code>
      redis.conf
     </code>
     与
     <code>
      sentinel.conf
     </code>
    </p>
    <ol>
     <li>
      查看源码下的配置文件
     </li>
    </ol>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /opt/mysoftware/redis-7.4.1/</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">284</span>
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">10420</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 00-RELEASENOTES
-rw-rw-r--  <span class="token number">1</span> root root     <span class="token number">51</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 BUGS
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">5023</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 CODE_OF_CONDUCT.md
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">7178</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 CONTRIBUTING.md
drwxrwxr-x  <span class="token number">8</span> root root    <span class="token number">201</span> <span class="token number">12</span>月  <span class="token number">5</span> 01:53 deps
-rw-rw-r--  <span class="token number">1</span> root root     <span class="token number">11</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 INSTALL
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">37493</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 LICENSE.txt
-rw-rw-r--  <span class="token number">1</span> root root    <span class="token number">151</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 Makefile
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">6888</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 MANIFESTO
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">23845</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 README.md
-rw-rw-r--  <span class="token number">1</span> root root <span class="token number">108981</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 redis.conf
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">1805</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 REDISCONTRIBUTIONS.txt
-rwxrwxr-x  <span class="token number">1</span> root root    <span class="token number">279</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest
-rwxrwxr-x  <span class="token number">1</span> root root    <span class="token number">283</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest-cluster
-rwxrwxr-x  <span class="token number">1</span> root root   <span class="token number">1804</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest-moduleapi
-rwxrwxr-x  <span class="token number">1</span> root root    <span class="token number">285</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 runtest-sentinel
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">1480</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 SECURITY.md
-rw-rw-r--  <span class="token number">1</span> root root  <span class="token number">14700</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 sentinel.conf
drwxrwxr-x  <span class="token number">4</span> root root  <span class="token number">12288</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:28 src
drwxrwxr-x <span class="token number">11</span> root root    <span class="token number">199</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 tests
-rw-rw-r--  <span class="token number">1</span> root root   <span class="token number">3628</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 TLS.md
drwxrwxr-x  <span class="token number">9</span> root root   <span class="token number">4096</span> <span class="token number">10</span>月  <span class="token number">3</span> 03:04 utils
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <ol start="2">
     <li>
      将配置文件复制到合适位置
     </li>
    </ol>
    <pre><code class="prism language-shell"><span class="token comment"># 1.在/opt目录下新建redis目录</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir redis</span>
<span class="token comment"># 2. 拷贝redis配置</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span><span class="token comment"># cp *.conf /opt/redis/</span>
<span class="token punctuation">[</span>root@localhost redis-7.4.1<span class="token punctuation">]</span>
<span class="token comment"># 3. 查看配置文件</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># cd redis/</span>
<span class="token punctuation">[</span>root@localhost redis<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">124</span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">108981</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:39 redis.conf
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">14700</span> <span class="token number">12</span>月  <span class="token number">5</span> <span class="token number">16</span>:39 sentinel.conf
<span class="token punctuation">[</span>root@localhost redis<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <h3>
     <a id="7_redisconf_416">
     </a>
     7. 修改redis.conf文件
    </h3>
    <blockquote>
     <p>
      根据你的需求编辑
      <code>
       /opt/redis/redis.conf
      </code>
      文件。例如，设置绑定的IP地址、端口号、是否作为守护进程运行等。
     </p>
     <p>
      Redis 4.0 及以上版本默认启用了保护模式（
      <code>
       protected-mode
      </code>
      ）。如果客户端尝试连接但没有提供密码，并且服务器正在监听非本地地址，则会拒绝连接。如果你确实需要远程访问，你应该禁用保护模式或者设置密码。要禁用保护模式，将
      <code>
       protected-mode
      </code>
      设置为
      <code>
       no
      </code>
      。
     </p>
    </blockquote>
    <pre><code class="prism language-shell"><span class="token comment"># redis.conf默认</span>
<span class="token builtin class-name">bind</span> <span class="token number">127.0</span>.0.1 -::1
protected-mode <span class="token function">yes</span>

<span class="token comment"># 修改后</span>
<span class="token comment"># bind 127.0.0.1 -::1 # 注释这一行</span>
protected-mode no <span class="token comment"># 这里将默认的yes改为no</span>
</code></pre>
    <h3>
     <a id="8_Redis_432">
     </a>
     8. 启动Redis服务
    </h3>
    <p>
     启动命令
     <code>
      redis-server /opt/redis/redis.conf
     </code>
    </p>
    <pre><code class="prism language-shell">

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># redis-server /opt/redis/redis.conf </span>
<span class="token number">54696</span>:C 05 Dec <span class="token number">2024</span> <span class="token number">16</span>:48:04.988 <span class="token comment"># WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.</span>
<span class="token number">54696</span>:C 05 Dec <span class="token number">2024</span> <span class="token number">16</span>:48:04.988 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
<span class="token number">54696</span>:C 05 Dec <span class="token number">2024</span> <span class="token number">16</span>:48:04.988 * Redis <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">7.4</span>.1, <span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token number">64</span>, <span class="token assign-left variable">commit</span><span class="token operator">=</span>00000000, <span class="token assign-left variable">modified</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token number">54696</span>, just started
<span class="token number">54696</span>:C 05 Dec <span class="token number">2024</span> <span class="token number">16</span>:48:04.988 * Configuration loaded
<span class="token number">54696</span>:M 05 Dec <span class="token number">2024</span> <span class="token number">16</span>:48:04.988 * monotonic clock: POSIX clock_gettime
                _._                                                  
           _.-`<span class="token variable"><span class="token variable">`</span>__ <span class="token string">''</span>-._                                             
      _.-<span class="token variable">`</span></span><span class="token variable"><span class="token variable">`</span>    <span class="token variable">`</span></span><span class="token builtin class-name">.</span>  <span class="token variable"><span class="token variable">`</span>_.  <span class="token string">''</span>-._           Redis Community Edition      
  .-<span class="token variable">`</span></span><span class="token variable"><span class="token variable">`</span> .-<span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span>  <span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token punctuation">\</span>/    _.,_ <span class="token string">''</span>-._     <span class="token number">7.4</span>.1 <span class="token punctuation">(</span>00000000/1<span class="token punctuation">)</span> <span class="token number">64</span> bit
 <span class="token punctuation">(</span>    '      ,       .-<span class="token variable">`</span></span>  <span class="token operator">|</span> <span class="token variable"><span class="token variable">`</span>,    <span class="token punctuation">)</span>     Running <span class="token keyword">in</span> standalone mode
 <span class="token operator">|</span><span class="token variable">`</span></span>-._<span class="token variable"><span class="token variable">`</span>-<span class="token punctuation">..</span>.-<span class="token variable">`</span></span> __<span class="token punctuation">..</span>.-.`<span class="token variable"><span class="token variable">`</span>-._<span class="token operator">|</span>'<span class="token variable">`</span></span> _.-<span class="token string">'|     Port: 6379
 |    `-._   `._    /     _.-'</span>    <span class="token operator">|</span>     PID: <span class="token number">54696</span>
  <span class="token variable"><span class="token variable">`</span>-._    <span class="token variable">`</span></span>-._  <span class="token variable"><span class="token variable">`</span>-./  _.-<span class="token string">'    _.-'</span>                                   
 <span class="token operator">|</span><span class="token variable">`</span></span>-._<span class="token variable"><span class="token variable">`</span>-._    <span class="token variable">`</span></span>-.__.-<span class="token string">'    _.-'</span>_.-<span class="token string">'|                                  
 |    `-._`-._        _.-'</span>_.-<span class="token string">'    |           https://redis.io       
  `-._    `-._`-.__.-'</span>_.-<span class="token string">'    _.-'</span>                                   
 <span class="token operator">|</span><span class="token variable"><span class="token variable">`</span>-._<span class="token variable">`</span></span>-._    <span class="token variable"><span class="token variable">`</span>-.__.-<span class="token string">'    _.-'</span>_.-'<span class="token operator">|</span>                                  
 <span class="token operator">|</span>    <span class="token variable">`</span></span>-._<span class="token variable"><span class="token variable">`</span>-._        _.-<span class="token string">'_.-'</span>    <span class="token operator">|</span>                                  
  <span class="token variable">`</span></span>-._    <span class="token variable"><span class="token variable">`</span>-._<span class="token variable">`</span></span>-.__.-<span class="token string">'_.-'</span>    _.-<span class="token string">'                                   
      `-._    `-.__.-'</span>    _.-<span class="token string">'                                       
          `-._        _.-'</span>                                           
              `-.__.-'                                               

<span class="token number">54696</span>:M 05 Dec <span class="token number">2024</span> <span class="token number">16</span>:48:04.990 * Server initialized
<span class="token number">54696</span>:M 05 Dec <span class="token number">2024</span> <span class="token number">16</span>:48:04.990 * Ready to accept connections tcp

</code></pre>
    <h3>
     <a id="9__468">
     </a>
     9. 客户端测试
    </h3>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># redis-cli</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">"v1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre>
    <h3>
     <a id="10__483">
     </a>
     10. 设置开机自启动
    </h3>
    <p>
     如果你希望Redis在系统启动时自动运行，可以创建一个systemd服务文件或使用其他初始化系统的方法。例如，创建一个名为
     <code>
      redis.service
     </code>
     的systemd服务文件并放置在
     <code>
      /etc/systemd/system/
     </code>
     目录下,
    </p>
    <ol>
     <li>
      查看
      <code>
       /etc/systemd/system下的问题就
      </code>
     </li>
    </ol>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost systemd<span class="token punctuation">]</span><span class="token comment"># cd /etc/systemd/system/</span>
<span class="token punctuation">[</span>root@localhost system<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">4</span>
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">31</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 bluetooth.target.wants
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">37</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:27 cron.service -<span class="token operator">&gt;</span> /usr/lib/systemd/system/crond.service
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">37</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:27 ctrl-alt-del.target -<span class="token operator">&gt;</span> /usr/lib/systemd/system/reboot.target
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">41</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 dbus-org.bluez.service -<span class="token operator">&gt;</span> /usr/lib/systemd/system/bluetooth.service
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">41</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 dbus-org.fedoraproject.FirewallD1.service -<span class="token operator">&gt;</span> /usr/lib/systemd/system/firewalld.service
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">44</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:28 dbus-org.freedesktop.ModemManager1.service -<span class="token operator">&gt;</span> /usr/lib/systemd/system/ModemManager.service
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">57</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 dbus-org.freedesktop.nm-dispatcher.service -<span class="token operator">&gt;</span> /usr/lib/systemd/system/NetworkManager-dispatcher.service
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">40</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:31 default.target -<span class="token operator">&gt;</span> /usr/lib/systemd/system/graphical.target
lrwxrwxrwx <span class="token number">1</span> root root   <span class="token number">39</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:28 display-manager.service -<span class="token operator">&gt;</span> /usr/lib/systemd/system/lightdm.service
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">32</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:27 getty.target.wants
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">88</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:35 graphical.target.wants
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span> <span class="token number">12</span>月  <span class="token number">4</span> <span class="token number">18</span>:12 multi-user.target.wants
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">48</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 network-online.target.wants
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">26</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 printer.target.wants
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">31</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 remote-fs.target.wants
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">48</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 sockets.target.wants
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">62</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 sysinit.target.wants
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">64</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 sysstat.service.wants
lrwxrwxrwx <span class="token number">1</span> root root    <span class="token number">9</span>  <span class="token number">3</span>月 <span class="token number">22</span>  <span class="token number">2022</span> timedatex.service -<span class="token operator">&gt;</span> /dev/null
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">33</span> <span class="token number">12</span>月  <span class="token number">3</span> <span class="token number">20</span>:29 timers.target.wants
<span class="token punctuation">[</span>root@localhost system<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <ol start="2">
     <li>
      注册Redis开机自启动服务
     </li>
    </ol>
    <p>
     新建
     <code>
      vim /etc/systemd/system/redis.service
     </code>
     ,内容如下
    </p>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Redis In-Memory Data Store
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">User</span><span class="token operator">=</span>root
<span class="token assign-left variable">Group</span><span class="token operator">=</span>root
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/bin/redis-server /opt/redis/redis.conf
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/usr/local/bin/redis-cli <span class="token function">shutdown</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>always

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre>
    <ol start="3">
     <li>
      启用服务
     </li>
    </ol>
    <pre><code class="prism language-shell"> systemctl <span class="token builtin class-name">enable</span> redis.service
 systemctl start redis.service
 
<span class="token punctuation">[</span>root@localhost system<span class="token punctuation">]</span><span class="token comment"># systemctl enable redis.service</span>
Created symlink /etc/systemd/system/multi-user.target.wants/redis.service → /etc/systemd/system/redis.service.
<span class="token punctuation">[</span>root@localhost system<span class="token punctuation">]</span><span class="token comment"># systemctl start redis.service</span>
<span class="token punctuation">[</span>root@localhost system<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <h2>
     <a id="3__552">
     </a>
     3. 开启远程访问
    </h2>
    <blockquote>
     <ol>
      <li>
       编辑
       <code>
        /opt/redis/redis.conf
       </code>
       文件
      </li>
      <li>
       修改绑定IP地址
      </li>
      <li>
       关闭保护模式
      </li>
      <li>
       设置密码(推荐)
      </li>
      <li>
       编辑完
       <code>
        redis.conf
       </code>
       文件后重启服务
      </li>
      <li>
       开放端口
      </li>
     </ol>
    </blockquote>
    <h3>
     <a id="1_redisconf_561">
     </a>
     1. 编辑redis.conf
    </h3>
    <ol>
     <li>
      redis7.4.1安装后，默认的配置如下
     </li>
    </ol>
    <pre><code class="prism language-shell"><span class="token comment"># redis.conf默认</span>
<span class="token builtin class-name">bind</span> <span class="token number">127.0</span>.0.1 -::1
protected-mode <span class="token function">yes</span>
<span class="token comment"># requirepass foobared</span>
</code></pre>
    <ol start="2">
     <li>
      配置可远程访问
     </li>
    </ol>
    <pre><code class="prism language-shell"><span class="token comment"># 注释此行，或改成 bind 0.0.0.0</span>
<span class="token comment"># bind 127.0.0.1 -::1</span>
<span class="token comment"># 将 protected-mode yes 改为如下</span>
protected-mode no
<span class="token comment"># 打开 requirepass foobared 注释，并设置密码为 myRedisDb123</span>
requirepass myRedisDb123
</code></pre>
    <h3>
     <a id="2__585">
     </a>
     2. 开启防火墙
    </h3>
    <pre><code class="prism language-shell"><span class="token comment"># 开放6379端口</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">6379</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment"># 重新加载防火墙</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre>
    <h3>
     <a id="3_596">
     </a>
     3.测试远程连接
    </h3>
    <p>
     从另一台机器上，使用 redis-cli 或其他Redis客户端工具测试连接。请记得替换 和 your_strong_password 为你自己的服务器IP和设置的密码。
    </p>
    <p>
     redis-cli连接命令
     <code>
      redis-cli -h &lt;host&gt; -p 6379 -a your_password
     </code>
    </p>
    <pre><code class="prism language-shell"><span class="token comment"># 如</span>
redis-cli <span class="token parameter variable">-h</span> <span class="token number">192.168</span>.31.100 <span class="token parameter variable">-p</span> <span class="token number">6379</span> <span class="token parameter variable">-a</span> myRedisDb123
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e63:73646e2e6e65742f7975616e6a696e7368656e676c6966652f:61727469636c652f64657461696c732f313436323438323831" class_="artid" style="display:none">
 </p>
</div>


