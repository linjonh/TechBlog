---
layout: post
title: "打包好的jar包,如何部署在服务器详细教程"
date: 2025-01-14 18:07:21 +0800
description: "在服务器上安装 JDK。将 JAR 包上传到服务器。使用java -jar或者通过systemd启动"
keywords: "jar包部署到服务器"
categories: ['项目案例', '环境配置', '服务部署']
tags: ['服务器', 'Python', 'Java', 'Jar']
artid: "142137586"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=142137586
    alt: "打包好的jar包,如何部署在服务器详细教程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=142137586
featuredImagePreview: https://bing.ee123.net/img/rand?artid=142137586
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     打包好的jar包，如何部署在服务器？——详细教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <ul>
          <li>
           <a href="#1__4" rel="nofollow">
            1. 准备工作
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_JDK_6" rel="nofollow">
              安装 JDK
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#2__JAR__31" rel="nofollow">
            2. 将 JAR 包上传到服务器
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_SCP__JAR__33" rel="nofollow">
              使用 SCP 将 JAR 包上传到服务器
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#3__JAR__43" rel="nofollow">
            3. 配置并运行 JAR 包
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_JAR__45" rel="nofollow">
              运行 JAR 包
             </a>
            </li>
            <li>
             <a href="#_61" rel="nofollow">
              查看服务状态
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#4__69" rel="nofollow">
            4. 配置防火墙
           </a>
          </li>
          <li>
           <a href="#5__85" rel="nofollow">
            5. 配置反向代理（可选）
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_Nginx_89" rel="nofollow">
              安装 Nginx
             </a>
            </li>
            <li>
             <a href="#_Nginx__102" rel="nofollow">
              配置 Nginx 反向代理
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#6__143" rel="nofollow">
            6. 设置服务开机启动
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_systemd__145" rel="nofollow">
              使用 `systemd` 创建服务
             </a>
            </li>
            <li>
             <a href="#_181" rel="nofollow">
              检查服务状态
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#_189" rel="nofollow">
            总结流程
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <p>
     要将
     <code>
      user-service
     </code>
     部署到服务器上并且使其他服务可以调用，通常需要以下几个步骤。使用的是一台 Linux 服务器，并且项目是 Spring Boot 应用程序。以下是详细的部署步骤：
    </p>
    <h4>
     <a id="1__4">
     </a>
     1. 准备工作
    </h4>
    <h5>
     <a id="_JDK_6">
     </a>
     安装 JDK
    </h5>
    <p>
     确保服务器上安装了 Java 运行环境（JDK）。可以通过以下命令检查：
    </p>
    <pre><code class="prism language-bash"><span class="token function">java</span> <span class="token parameter variable">-version</span>
</code></pre>
    <p>
     如果未安装 Java，可以执行以下命令来安装：
    </p>
    <p>
     <strong>
      Ubuntu/Debian 系统：
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-17-jdk
</code></pre>
    <p>
     <strong>
      CentOS 系统：
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum update
<span class="token function">sudo</span> yum <span class="token function">install</span> java-17-openjdk-devel
</code></pre>
    <p>
     安装完成后，检查 Java 安装是否成功：
    </p>
    <pre><code class="prism language-bash"><span class="token function">java</span> <span class="token parameter variable">-version</span>
</code></pre>
    <h4>
     <a id="2__JAR__31">
     </a>
     2. 将 JAR 包上传到服务器
    </h4>
    <h5>
     <a id="_SCP__JAR__33">
     </a>
     使用 SCP 将 JAR 包上传到服务器
    </h5>
    <p>
     你可以通过
     <code>
      scp
     </code>
     命令将 JAR 包上传到服务器。
    </p>
    <p>
     在本地终端中执行以下命令将 JAR 包上传：
    </p>
    <pre><code class="prism language-bash"><span class="token function">scp</span> /path/to/your/user-service.jar username@your-server-ip:/path/on/server/
</code></pre>
    <p>
     <code>
      /path/to/your/user-service.jar
     </code>
     是你本地 JAR 包的路径，
     <code>
      /path/on/server/
     </code>
     是服务器上存放 JAR 包的路径。
    </p>
    <h4>
     <a id="3__JAR__43">
     </a>
     3. 配置并运行 JAR 包
    </h4>
    <h5>
     <a id="_JAR__45">
     </a>
     运行 JAR 包
    </h5>
    <p>
     登录到服务器后，进入 JAR 包所在的目录，并使用
     <code>
      java -jar
     </code>
     命令运行 JAR 包。
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /path/on/server/
<span class="token function">java</span> <span class="token parameter variable">-jar</span> user-service.jar
</code></pre>
    <p>
     这将在前台启动服务。如果你想让服务在后台运行，并且在关闭终端后继续运行，可以使用
     <code>
      nohup
     </code>
     命令：
    </p>
    <pre><code class="prism language-bash"><span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> user-service.jar <span class="token operator">&gt;</span> user-service.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre>
    <p>
     这会将日志输出到
     <code>
      user-service.log
     </code>
     文件中，并在后台运行服务。
    </p>
    <h5>
     <a id="_61">
     </a>
     查看服务状态
    </h5>
    <p>
     你可以通过以下命令查看服务是否成功启动：
    </p>
    <pre><code class="prism language-bash"><span class="token function">tail</span> <span class="token parameter variable">-f</span> user-service.log
</code></pre>
    <p>
     如果服务启动成功，会看到 Spring Boot 启动的相关日志信息。
    </p>
    <h4>
     <a id="4__69">
     </a>
     4. 配置防火墙
    </h4>
    <p>
     如果服务器启用了防火墙，确保开放应用运行的端口。假设
     <code>
      user-service
     </code>
     运行在默认的
     <code>
      8080
     </code>
     端口，你可以使用以下命令开放该端口。
    </p>
    <p>
     <strong>
      Ubuntu/Debian 系统（使用
      <code>
       ufw
      </code>
      ）：
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> ufw allow <span class="token number">8080</span>/tcp
<span class="token function">sudo</span> ufw reload
</code></pre>
    <p>
     <strong>
      CentOS 系统（使用
      <code>
       firewalld
      </code>
      ）：
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--permanent</span> --add-port<span class="token operator">=</span><span class="token number">8080</span>/tcp
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre>
    <h4>
     <a id="5__85">
     </a>
     5. 配置反向代理（可选）
    </h4>
    <p>
     如果你想通过域名或子域名访问
     <code>
      user-service
     </code>
     ，可以配置 Nginx 作为反向代理。Nginx 将会转发外部请求到你的
     <code>
      user-service
     </code>
     。
    </p>
    <h5>
     <a id="_Nginx_89">
     </a>
     安装 Nginx
    </h5>
    <p>
     如果服务器上没有安装 Nginx，可以通过以下命令安装：
    </p>
    <p>
     <strong>
      Ubuntu/Debian 系统：
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nginx
</code></pre>
    <p>
     <strong>
      CentOS 系统：
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> nginx
</code></pre>
    <h5>
     <a id="_Nginx__102">
     </a>
     配置 Nginx 反向代理
    </h5>
    <p>
     编辑 Nginx 配置文件，创建一个反向代理配置：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/nginx/sites-available/user-service
</code></pre>
    <p>
     添加以下内容（假设你希望通过
     <code>
      http://your-domain.com
     </code>
     访问服务）：
    </p>
    <pre><code class="prism language-nginx">server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>
    <p>
     启用该配置：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /etc/nginx/sites-available/user-service /etc/nginx/sites-enabled/
</code></pre>
    <p>
     测试配置是否正确：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> nginx <span class="token parameter variable">-t</span>
</code></pre>
    <p>
     如果没有错误，重新加载 Nginx：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl reload nginx
</code></pre>
    <p>
     现在你可以通过
     <code>
      http://your-domain.com
     </code>
     访问你的
     <code>
      user-service
     </code>
     。
    </p>
    <h4>
     <a id="6__143">
     </a>
     6. 设置服务开机启动
    </h4>
    <h5>
     <a id="_systemd__145">
     </a>
     使用
     <code>
      systemd
     </code>
     创建服务
    </h5>
    <p>
     为了确保服务器重启后，
     <code>
      user-service
     </code>
     自动启动，可以创建一个
     <code>
      systemd
     </code>
     服务。
    </p>
    <ol>
     <li>
      创建
      <code>
       user-service
      </code>
      的服务文件：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/systemd/system/user-service.service
</code></pre>
    <ol start="2">
     <li>
      在文件中添加以下内容：
     </li>
    </ol>
    <pre><code class="prism language-ini">[Unit]
Description=User Service
After=network.target

[Service]
User=your-username
ExecStart=/usr/bin/java -jar /path/on/server/user-service.jar
SuccessExitStatus=143
StandardOutput=journal
StandardError=inherit
Restart=always

[Install]
WantedBy=multi-user.target
</code></pre>
    <p>
     确保路径和用户名正确替换为你服务器上的实际路径和用户。
    </p>
    <ol start="3">
     <li>
      保存后，执行以下命令使服务生效：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl start user-service
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> user-service
</code></pre>
    <h5>
     <a id="_181">
     </a>
     检查服务状态
    </h5>
    <p>
     你可以通过以下命令检查
     <code>
      user-service
     </code>
     是否运行：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl status user-service
</code></pre>
    <p>
     至此，
     <code>
      user-service
     </code>
     已成功在服务器上运行，并且设置为开机启动。其他服务可以通过
     <code>
      REST API
     </code>
     或直接引用该服务的 JAR 包来调用它。
    </p>
    <h4>
     <a id="_189">
     </a>
     总结流程
    </h4>
    <ol>
     <li>
      在服务器上安装 JDK。
     </li>
     <li>
      将 JAR 包上传到服务器。
     </li>
     <li>
      使用
      <code>
       java -jar
      </code>
      或者通过
      <code>
       systemd
      </code>
      启动服务。
     </li>
     <li>
      配置防火墙开放端口。
     </li>
     <li>
      （可选）使用 Nginx 配置反向代理。
     </li>
     <li>
      设置服务开机自动启动。
     </li>
    </ol>
    <p>
     这样就可以在服务器上成功部署
     <code>
      user-service
     </code>
     并提供对外服务。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34323633313738382f:61727469636c652f64657461696c732f313432313337353836" class_="artid" style="display:none">
 </p>
</div>


