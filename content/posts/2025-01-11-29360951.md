---
layout: post
title: "centos-6.5-设置FTP服务器-与客户机连接FTP服务器"
date: 2025-01-11 04:27:53 +0800
description: "服务器端_centos6.5 ftp"
keywords: "centos6.5 ftp"
categories: ['Linux']
tags: ['无标签']
artid: "29360951"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=29360951
    alt: "centos-6.5-设置FTP服务器-与客户机连接FTP服务器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=29360951
featuredImagePreview: https://bing.ee123.net/img/rand?artid=29360951
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     centos 6.5 设置FTP服务器 与客户机连接FTP服务器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <span style="font-size:24px">
      服务器端
     </span>
    </p>
    <p>
     1.yum install vsftp
    </p>
    <p>
     service vsftpd restart  (ftp服务端的进程是vsftpd)
     <br/>
    </p>
    <p>
     2.vsftpd服务器文件
    </p>
    <p>
     配置文件: /etc/vsftpd/vsftpd.conf
    </p>
    <p>
     服务器根目录:  /var/ftp/pub/
    </p>
    <p>
     <span style="font-size:16px">
     </span>
     <span style="font-family:SimSun; font-size:10px">
      vsftpd.ftpusers
     </span>
     <span style="font-family:SimSun; font-size:10px">
      <span style="font-size:16px">
       ：位于
      </span>
      <span style="font-size:16px">
       /etc
      </span>
      <span style="font-size:16px">
       目录下。它指定了哪些用户账户不能访问
      </span>
      <span style="font-size:16px">
       FTP
      </span>
      <span style="font-size:16px">
       服务器，例如
      </span>
      <span style="font-size:16px">
       root
      </span>
      <span style="font-size:16px">
       等。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       vsftpd.user_list
      </span>
      <span style="font-size:16px">
       ：位于
      </span>
      <span style="font-size:16px">
       /etc
      </span>
      <span style="font-size:16px">
       目录下。该文件里的用户账户在默认情况下也不能访问
      </span>
      <span style="font-size:16px">
       FTP
      </span>
      <span style="font-size:16px">
       服务器，仅当
      </span>
      <span style="font-size:16px">
       vsftpd.conf
      </span>
      <span style="font-size:16px">
       配置文件里启用
      </span>
      <span style="font-size:16px">
       userlist_enable=NO
      </span>
      <span style="font-size:16px">
       选项时才允许访问。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       vsftpd.conf
      </span>
      <span style="font-size:16px">
       ：位于
      </span>
      <span style="font-size:16px">
       /etc/vsftpd
      </span>
      <span style="font-size:16px">
       目录下。来自定义用户登录控制、用户权限控制、超时设置、服务器功能选项、服务器性能选项、服务器响应消息等
      </span>
      <span style="font-size:16px">
       FTP
      </span>
      <span style="font-size:16px">
       服务器的配置。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       (1)
      </span>
      <span style="font-size:16px">
       用户登录控制
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       anonymous_enable=YES
      </span>
      <span style="font-size:16px">
       ，允许匿名用户登录。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       no_anon_password=YES
      </span>
      <span style="font-size:16px">
       ，匿名用户登录时不需要输入密码。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       local_enable=YES
      </span>
      <span style="font-size:16px">
       ，允许本地用户登录。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       deny_email_enable=YES
      </span>
      <span style="font-size:16px">
       ，可以创建一个文件保存某些匿名电子邮件的黑名单，以防止这些人使用
      </span>
      <span style="font-size:16px">
       Dos
      </span>
      <span style="font-size:16px">
       攻击。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
       banned_email_file=/etc/vsftpd.banned_emails
      </span>
      <span style="font-size:16px">
       ，当启用
      </span>
      <span style="font-size:16px">
       deny_email_enable
      </span>
      <span style="font-size:16px">
       功能时，所需的电子邮件黑名单保存路径
      </span>
      <span style="font-size:16px">
       (
      </span>
      <span style="font-size:16px">
       默认为
      </span>
      <span style="font-size:16px">
       /etc/vsftpd.banned_emails)
      </span>
      <span style="font-size:16px">
       。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       (2)
      </span>
      <span style="font-size:16px">
       用户权限控制
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       write_enable=YES
      </span>
      <span style="font-size:16px">
       ，开启全局上传权限。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       local_umask=022
      </span>
      <span style="font-size:16px">
       ，本地用户的上传文件的
      </span>
      <span style="font-size:16px">
       umask
      </span>
      <span style="font-size:16px">
       设为
      </span>
      <span style="font-size:16px">
       022(
      </span>
      <span style="font-size:16px">
       系统默认是
      </span>
      <span style="font-size:16px">
       077
      </span>
      <span style="font-size:16px">
       ，一般都可以改为
      </span>
      <span style="font-size:16px">
       022)
      </span>
      <span style="font-size:16px">
       。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       anon_upload_enable=YES
      </span>
      <span style="font-size:16px">
       ，允许匿名用户具有上传权限，很明显，必须启用
      </span>
      <span style="font-size:16px">
       write_enable=YES
      </span>
      <span style="font-size:16px">
       ，才可以使用此项。同时我们还必须建立一个允许
      </span>
      <span style="font-size:16px">
       ftp
      </span>
      <span style="font-size:16px">
       用户可以读写的目录
      </span>
      <span style="font-size:16px">
       (
      </span>
      <span style="font-size:16px">
       前面说过，
      </span>
      <span style="font-size:16px">
       ftp
      </span>
      <span style="font-size:16px">
       是匿名用户的映射用户账号
      </span>
      <span style="font-size:16px">
       )
      </span>
      <span style="font-size:16px">
       。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       anon_mkdir_write_enable=YES
      </span>
      <span style="font-size:16px">
       ，允许匿名用户有创建目录的权利。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       chown_uploads=YES
      </span>
      <span style="font-size:16px">
       ，启用此项，匿名上传文件的属主用户将改为别的用户账户，注意，这里建议不要指定
      </span>
      <span style="font-size:16px">
       root
      </span>
      <span style="font-size:16px">
       账号为匿名上传文件的属主用户！
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       chown_username=whoever
      </span>
      <span style="font-size:16px">
       ，当启用
      </span>
      <span style="font-size:16px">
       chown_uploads=YES
      </span>
      <span style="font-size:16px">
       时，所指定的属主用户账号，此处的
      </span>
      <span style="font-size:16px">
       whoever
      </span>
      <span style="font-size:16px">
       自然要用合适的用户账号来代替。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       chroot_list_enable=YES
      </span>
      <span style="font-size:16px">
       ，可以用一个列表限定哪些本地用户只能在自己目录下活动，如果
      </span>
      <span style="font-size:16px">
       chroot_local_user=YES
      </span>
      <span style="font-size:16px">
       ，那么这个列表里指定的用户是不受限制的。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
       chroot_list_file=/etc/vsftpd.chroot_list
      </span>
      <span style="font-size:16px">
       ，如果
      </span>
      <span style="font-size:16px">
       chroot_local_user=YES
      </span>
      <span style="font-size:16px">
       ，则指定该列表
      </span>
      <span style="font-size:16px">
       (chroot_local_user)
      </span>
      <span style="font-size:16px">
       的保存路径
      </span>
      <span style="font-size:16px">
       (
      </span>
      <span style="font-size:16px">
       默认是
      </span>
      <span style="font-size:16px">
       /etc/vsftpd.chroot_list)
      </span>
      <span style="font-size:16px">
       。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       nopriv_user=ftpsecure
      </span>
      <span style="font-size:16px">
       ，指定一个安全用户账号，让
      </span>
      <span style="font-size:16px">
       FTP
      </span>
      <span style="font-size:16px">
       服务器用作完全隔离和没有特权的独立用户。这是
      </span>
      <span style="font-size:16px">
       vsftpd
      </span>
      <span style="font-size:16px">
       系统推荐选项。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       async_abor_enable=YES
      </span>
      <span style="font-size:16px">
       ，强烈建议不要启用该选项，否则将可能导致出错！
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       ascii_upload_enable=YES
      </span>
      <span style="font-size:16px">
       ；
      </span>
      <span style="font-size:16px">
       ascii_download_enable=YES
      </span>
      <span style="font-size:16px">
       ，默认情况下服务器会假装接受
      </span>
      <span style="font-size:16px">
       ASCⅡ
      </span>
      <span style="font-size:16px">
       模式请求但实际上是忽略这样的请求，启用上述的两个选项可以让服务器真正实现
      </span>
      <span style="font-size:16px">
       ASCⅡ
      </span>
      <span style="font-size:16px">
       模式的传输。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
       注意：启用
      </span>
      <span style="font-size:16px">
       ascii_download_enable
      </span>
      <span style="font-size:16px">
       选项会让恶意远程用户们在
      </span>
      <span style="font-size:16px">
       ASCⅡ
      </span>
      <span style="font-size:16px">
       模式下用“
      </span>
      <span style="font-size:16px">
       SIZE/big/file”
      </span>
      <span style="font-size:16px">
       这样的指令大量消耗
      </span>
      <span style="font-size:16px">
       FTP
      </span>
      <span style="font-size:16px">
       服务器的
      </span>
      <span style="font-size:16px">
       I/O
      </span>
      <span style="font-size:16px">
       资源。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
       这些
      </span>
      <span style="font-size:16px">
       ASCⅡ
      </span>
      <span style="font-size:16px">
       模式的设置选项分成上传和下载两个，这样我们就可以允许
      </span>
      <span style="font-size:16px">
       ASCⅡ
      </span>
      <span style="font-size:16px">
       模式的上传
      </span>
      <span style="font-size:16px">
       (
      </span>
      <span style="font-size:16px">
       可以防止上传脚本等恶意文件而导致崩溃
      </span>
      <span style="font-size:16px">
       )
      </span>
      <span style="font-size:16px">
       ，而不会遭受拒绝服务攻击的危险。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       (3)
      </span>
      <span style="font-size:16px">
       用户连接和超时选项
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       idle_session_timeout=600
      </span>
      <span style="font-size:16px">
       ，可以设定默认的空闲超时时间，用户超过这段时间不动作将被服务器踢出。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       data_connection_timeout=120
      </span>
      <span style="font-size:16px">
       ，设定默认的数据连接超时时间。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       (4)
      </span>
      <span style="font-size:16px">
       服务器日志和欢迎信息
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       dirmessage_enable=YES
      </span>
      <span style="font-size:16px">
       ，允许为目录配置显示信息，显示每个目录下面的
      </span>
      <span style="font-size:16px">
       message_file
      </span>
      <span style="font-size:16px">
       文件的内容。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       ftpd_banner=Welcometo blah FTP service
      </span>
      <span style="font-size:16px">
       ，可以自定义
      </span>
      <span style="font-size:16px">
       FTP
      </span>
      <span style="font-size:16px">
       用户登录到服务器所看到的欢迎信息。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       xferlog_enable=YES
      </span>
      <span style="font-size:16px">
       ，启用记录上传
      </span>
      <span style="font-size:16px">
       /
      </span>
      <span style="font-size:16px">
       下载活动日志功能。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       xferlog_file=/var/log/vsftpd.log
      </span>
      <span style="font-size:16px">
       ，可以自定义日志文件的保存路径和文件名，默认是
      </span>
      <span style="font-size:16px">
       /var/log/vsftpd.log
      </span>
      <span style="font-size:16px">
       。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       anonymous_enable=YES
      </span>
      <span style="font-size:16px">
       允许匿名登录
      </span>
      <span style="font-size:16px">
       local_enable=YES
      </span>
      <span style="font-size:16px">
       允许本地用户登录
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       write_enable=YES
      </span>
      <span style="font-size:16px">
       开放本地用户写权限
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       local_umask=022
      </span>
      <span style="font-size:16px">
       设置本地用户生成文件的掩码为
      </span>
      <span style="font-size:16px">
       022
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #anon_upload_enable=YES
      </span>
      <span style="font-size:16px">
       此项设置允许匿名用户上传文件
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #anon_mkdir_write_enable=YES
      </span>
      <span style="font-size:16px">
       开启匿名用户的写和创建目录的权限
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       dirmessage_enable=YES
      </span>
      <span style="font-size:16px">
       当切换到目录时，显示该目录下的
      </span>
      <span style="font-size:16px">
       .message
      </span>
      <span style="font-size:16px">
       隐藏文件的内容
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       xferlog_enable=YES
      </span>
      <span style="font-size:16px">
       激活上传和下载日志
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       connect_from_port_20=YES
      </span>
      <span style="font-size:16px">
       启用
      </span>
      <span style="font-size:16px">
       FTP
      </span>
      <span style="font-size:16px">
       数据端口的连接请求
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #chown_uploads=YES
      </span>
      <span style="font-size:16px">
       是否具有上传权限
      </span>
      <span style="font-size:16px">
       .
      </span>
      <span style="font-size:16px">
       用户由
      </span>
      <span style="font-size:16px">
       chown_username
      </span>
      <span style="font-size:16px">
       参数指定。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #chown_username=whoever
      </span>
      <span style="font-size:16px">
       指定拥有上传文件权限的用户。此参数与
      </span>
      <span style="font-size:16px">
       chown_uploads
      </span>
      <span style="font-size:16px">
       联用。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #xferlog_file=/var/log/vsftpd.log
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       xferlog_std_format=YES
      </span>
      <span style="font-size:16px">
       使用标准的
      </span>
      <span style="font-size:16px">
       ftpdxferlog
      </span>
      <span style="font-size:16px">
       日志格式
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #idle_session_timeout=600
      </span>
      <span style="font-size:16px">
       此设置将在用户会话空闲
      </span>
      <span style="font-size:16px">
       10
      </span>
      <span style="font-size:16px">
       分钟后被中断
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #data_connection_timeout=120
      </span>
      <span style="font-size:16px">
       将在数据连接空闲
      </span>
      <span style="font-size:16px">
       2
      </span>
      <span style="font-size:16px">
       分钟后被中断
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #ascii_upload_enable=YES
      </span>
      <span style="font-size:16px">
       启用上传的
      </span>
      <span style="font-size:16px">
       ASCII
      </span>
      <span style="font-size:16px">
       传输方式
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #ascii_download_enable=YES
      </span>
      <span style="font-size:16px">
       启用下载的
      </span>
      <span style="font-size:16px">
       ASCII
      </span>
      <span style="font-size:16px">
       传输方式
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #ftpd_banner=Welcometo blah FTP service
      </span>
      <span style="font-size:16px">
       设置用户连接服务器后显示消息
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #deny_email_enable=NO
      </span>
      <span style="font-size:16px">
       此参数默认值为
      </span>
      <span style="font-size:16px">
       NO
      </span>
      <span style="font-size:16px">
       。当值为
      </span>
      <span style="font-size:16px">
       YES
      </span>
      <span style="font-size:16px">
       时，拒绝使用
      </span>
      <span style="font-size:16px">
       banned_email_file
      </span>
      <span style="font-size:16px">
       参数指定文件中所列出的
      </span>
      <span style="font-size:16px">
       e-mail
      </span>
      <span style="font-size:16px">
       地址用户登录。
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #banned_email_file=/etc/vsftpd.banned_emails
      </span>
      <span style="font-size:16px">
       指定包含拒绝的
      </span>
      <span style="font-size:16px">
       e-mail
      </span>
      <span style="font-size:16px">
       地址的文件
      </span>
      <span style="font-size:16px">
       .
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #chroot_list_enable=YES
      </span>
      <span style="font-size:16px">
       设置本地用户登录后不能切换到自家目录以外的别的目录
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #chroot_list_file=/etc/vsftpd.chroot_list
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       #ls_recurse_enable=YES
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       pam_service_name=vsftpd
      </span>
      <span style="font-size:16px">
       设置
      </span>
      <span style="font-size:16px">
       PAM
      </span>
      <span style="font-size:16px">
       认证服务的配置文件名称，该文件存放在
      </span>
      <span style="font-size:16px">
       /etc/pam.d/
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       userlist_enable=YES
      </span>
      <span style="font-size:16px">
       此项配置
      </span>
      <span style="font-size:16px">
       /etc/vsftpd.user_list
      </span>
      <span style="font-size:16px">
       中指定的用户也不能访问服务器，若添加
      </span>
      <span style="font-size:16px">
       userlist_deny=No,
      </span>
      <span style="font-size:16px">
       则仅仅
      </span>
      <span style="font-size:16px">
       /etc/vsftpd.user_list
      </span>
      <span style="font-size:16px">
       文件中的用户可以访问，其他用户都不可以访问服务器。如过
      </span>
      <span style="font-size:16px">
       userlist_enable=NO,userlist_deny=YES,
      </span>
      <span style="font-size:16px">
       则指定使文件
      </span>
      <span style="font-size:16px">
       /etc/vsftpd.user_list
      </span>
      <span style="font-size:16px">
       中指定的用户不可以访问服务器，其他本地用户可以访问服务器。
      </span>
      <span style="font-size:16px">
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       listen=YES
      </span>
      <span style="font-size:16px">
       指明
      </span>
      <span style="font-size:16px">
       VSFTPD
      </span>
      <span style="font-size:16px">
       以独立运行方式启动
      </span>
      <span style="font-size:16px">
       <br/>
       <br/>
      </span>
      <span style="font-size:16px">
      </span>
      <span style="font-size:16px">
       tcp_wrappers=YES
      </span>
      <span style="font-size:16px">
       在
      </span>
      <span style="font-size:16px">
       VSFTPD
      </span>
      <span style="font-size:16px">
       中使用
      </span>
      <span style="font-size:16px">
       TCP_Wrappers
      </span>
      <span style="font-size:16px">
       远程访问控制机制，默认值为
      </span>
      <span style="font-size:16px">
       YES
      </span>
     </span>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     a. 建立FTP账户
    </p>
    <p>
     #adduser -d /tmp/test -g ftp -s /sbin/nologin test  //建立一个test用户，目录为/tmp/test, 不能用作登陆系统用
    </p>
    <p>
     #passwd test   //设置密码
    </p>
    <p>
     <br/>
    </p>
    <p>
     b.限制用户目录，不得改变目录到上级
    </p>
    <p>
     修改/etc/vsftpd/vsftpd.conf
    </p>
    <p>
     #chroot_list_enable=YES
     <br/>
    </p>
    <p>
     #chroot_list_file=/etc/vsftpd.chroot_list
    </p>
    <p>
     b1.注释去掉
    </p>
    <p>
     b2.新增一个文件 /etc/vsftpd/chroot_list
    </p>
    <p>
     内容写需要限制的用户名: test
    </p>
    <p>
     重启vsftpd
    </p>
    <p>
     <br/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     <span style="font-size:24px">
      客户端
     </span>
    </p>
    <p>
     1.安装ftp客户端
    </p>
    <p>
     yum install ftp
    </p>
    <p>
     ftp
     <br/>
    </p>
    <p>
     &gt; open  ftp_server_ip
    </p>
    <p>
     &gt;username
    </p>
    <p>
     &gt;passwd
    </p>
    <p>
     <br/>
    </p>
    <p>
     2.用浏览器连接的时候会出现oops 500 chroot.
    </p>
    <p>
     原因是是selinux的问题，它有一个叫做”Allow ftp to read/write in the user home directories” 的选项。
     <br/>
     使用如下命令 /usr/sbin/setsebool -P ftp_home_dir on  打开选项
    </p>
    <p>
     或者
     <span style="font-family:'Liberation Serif',serif">
      <span style="font-family:宋体,SimSun; color:#ff0000; font-size:16px">
       setsebool-P ftpd_disable_trans=1
      </span>
      <span style="font-family:宋体,SimSun; font-size:16px">
       <br/>
      </span>
     </span>
     <br/>
    </p>
    <p>
     vsftpd服务器常见错误: http://wenku.baidu.com/link?url=ekVgUTbq2-Ol9itQC6KSpWRuZd42b3d_TYFeqqWHfDi31Gb58aO-hQHv4luPS1PtG2f7IZaRqSKWoJinXq_eT4Ymty57cah-Wp9WVfzZ8pK
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f75303130333938303138:2f61727469636c652f64657461696c732f3239333630393531" class_="artid" style="display:none">
 </p>
</div>


