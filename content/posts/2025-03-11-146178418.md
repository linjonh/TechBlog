---
layout: post
title: "vue-自行封装组件,类似于el-tree组件结构"
date: 2025-03-11 16:31:23 +0800
description: "根据接口数据，拼凑出想要的数据结构。首先根据某一个字段进行数据分类，然后根据属性名对数据进行处理。"
keywords: "vue封装自定义组件"
categories: ['Vue']
tags: ['前端', 'Vue', 'Javascript']
artid: "146178418"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146178418
    alt: "vue-自行封装组件,类似于el-tree组件结构"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146178418
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146178418
cover: https://bing.ee123.net/img/rand?artid=146178418
image: https://bing.ee123.net/img/rand?artid=146178418
img: https://bing.ee123.net/img/rand?artid=146178418
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     vue 自行封装组件，类似于el-tree组件结构
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     背景：
    </h2>
    <blockquote>
     <p>
      接口返回是平面数组，需要经过分类处理，转成多维数组，以满足封装组件的数据结构。
     </p>
     <p>
      有用到
      <span style="color:#fe2c24">
       插件lodash
      </span>
      。
     </p>
     <p>
      import { groupBy, flattenDeep } from "lodash";
     </p>
    </blockquote>
    <h2>
     效果展示：
    </h2>
    <p>
     <img alt="" height="342" src="https://i-blog.csdnimg.cn/direct/6b1ffb76043c4fcaa1f5b0e04f37b5f0.png" width="249"/>
    </p>
    <p>
     处理数据：
    </p>
    <p>
     <img alt="" height="565" src="https://i-blog.csdnimg.cn/direct/f1fccd4263874ed8a7bf7f1986f2813b.png" width="715"/>
    </p>
    <p>
     对于接口返回的平面数组，转成我们期望的树形结构：
    </p>
    <h2>
     期望的数据结构：
    </h2>
    <p>
     <img alt="" height="567" src="https://i-blog.csdnimg.cn/direct/ec997e11abdf4bd0903002c2d88df3d3.png" width="629">
     </img>
    </p>
    <h2>
     <img alt="" height="398" src="https://i-blog.csdnimg.cn/direct/d4d5ec6ebea04086a38df0ed9c6bc169.png" width="916">
      数据结构转换思路：
     </img>
    </h2>
    <blockquote>
     <p>
      数据结构转换思路：把接口返回的数据按照字段areaName分组，得到一个对象；把对象的属性名和属性值分别处理，转成想要的结构。
     </p>
     <p>
      期望的结构：
     </p>
     <p>
      [
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      id: 0,
     </p>
     <p>
      name: "渡运88",
     </p>
     <p>
      lists: [
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      id: 0 - 0,
     </p>
     <p>
      name: "运输舱",
     </p>
     <p>
      value: "yunshucang",
     </p>
     <p>
      },
     </p>
     <p>
      {
      <!-- -->
     </p>
     <p>
      id: 0 - 1,
     </p>
     <p>
      name: "驾驶舱",
     </p>
     <p>
      value: "jiashicang",
     </p>
     <p>
      },
     </p>
     <p>
      ],
     </p>
     <p>
      },
     </p>
     <p>
      {},
     </p>
     <p>
      ...
     </p>
     <p>
      }
     </p>
    </blockquote>
    <h2>
     思路过程：
    </h2>
    <h3>
     按照某一个字段，分类数据：
    </h3>
    <blockquote>
     <p>
      console.log('resData&gt;&gt;&gt;',resData);
     </p>
     <p>
      const myModifyZonetype = groupBy(resData, "areaName"); //初步分类数据
     </p>
     <p>
      <img alt="" height="384" src="https://i-blog.csdnimg.cn/direct/ea3ef88053404ce3b487c3ee9991da8b.png" width="663"/>
     </p>
    </blockquote>
    <h3>
     获取所有属性：
    </h3>
    <blockquote>
     <p>
      Object.keys(myModifyZonetype)
     </p>
     <p>
      <img alt="" height="47" src="https://i-blog.csdnimg.cn/direct/56d3f03689b14b7987eff1345b33a40c.png" width="195">
      </img>
     </p>
    </blockquote>
    <h3>
     获取所有属性值：
    </h3>
    <blockquote>
     <p>
      let array = [];
     </p>
     <p>
      Object.keys(myModifyZonetype).forEach((key) =&gt; {
      <!-- -->
     </p>
     <p>
      array.push(myModifyZonetype[key])
     </p>
     <p>
      })
     </p>
     <p>
     </p>
     <p>
      <img alt="" height="278" src="https://i-blog.csdnimg.cn/direct/ae9ecca5b0bc40b19b6c5cd73aaed3e9.png" width="702"/>
     </p>
    </blockquote>
    <h3>
     获取总数：
    </h3>
    <blockquote>
     <p>
      let array = [];
     </p>
     <p>
      Object.keys(myModifyZonetype).forEach((key) =&gt; {
      <!-- -->
     </p>
     <p>
      array.push(myModifyZonetype[key])
     </p>
     <p>
      })
     </p>
     <p>
      const arrNum = flattenDeep(array);//多维数组转一维数组
     </p>
     <p>
      state.total = arrNum.length;
     </p>
     <p>
      <img alt="" height="126" src="https://i-blog.csdnimg.cn/direct/fd45f7fc79894b47b652765642e52391.png" width="790"/>
     </p>
    </blockquote>
    <h3>
     获取期望的数据结构：
    </h3>
    <blockquote>
     <p>
      let tempData = [];
     </p>
     <p>
      const _arr = Object.keys(myModifyZonetype).reduce((cre, pre) =&gt; {
      <!-- -->
     </p>
     <p>
      let item = myModifyZonetype[pre].map((item, index) =&gt; {
      <!-- -->
     </p>
     <p>
      return {
      <!-- -->
     </p>
     <p>
      id: item.pid,
     </p>
     <p>
      name: item.name,
     </p>
     <p>
      };
     </p>
     <p>
      });
     </p>
     <p>
      tempData.push({
      <!-- -->
     </p>
     <p>
      name: pre + "【" + item.length + "】",
     </p>
     <p>
      lists: item,
     </p>
     <p>
      });
     </p>
     <p>
      return tempData;
     </p>
     <p>
      }, []);
     </p>
     <p>
      console.log(_arr )
     </p>
     <p>
      <img alt="" height="454" src="https://i-blog.csdnimg.cn/direct/166c49ea9543494ea4960a3d665fb91c.png" width="327"/>
      <img alt="" height="342" src="https://i-blog.csdnimg.cn/direct/3843910ebee64c70b206d4724020818b.png" width="249"/>
     </p>
    </blockquote>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353032343435332f:61727469636c652f64657461696c732f313436313738343138" class_="artid" style="display:none">
 </p>
</div>


