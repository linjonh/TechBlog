---
layout: post
title: "华为云平台部署虚拟机-SinoDB"
date: 2022-01-14 11:22:20 +0800
description: "在日常运维中经常需要在华为云平台上部署虚拟机，涉及操作系统类型比较多，为了提高虚拟机部署效率，我们通"
keywords: "serviceom是什么"
categories: ['未分类']
tags: ['数据库', '华为', 'Linux', 'Centos']
artid: "122490305"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=122490305
  alt: "华为云平台部署虚拟机-SinoDB"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=122490305
featuredImagePreview: https://bing.ee123.net/img/rand?artid=122490305
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     华为云平台部署虚拟机-SinoDB
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       在日常运维中经常需要在华为云平台上部署虚拟机，涉及操作系统类型比较多，为了提高虚拟机部署效率，我们通常会把镜像文件做成虚拟机模版，下面是虚拟机模版创建及部署的过程，希望能给大家带来一些借鉴。
      </span>
     </span>
    </p>
    <h3 style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       一、注册镜像文件
      </span>
     </span>
    </h3>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       登录华为云SERVICEOM平台，点击“服务列表”--&gt;“镜像资源”
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/64f80fac4d830d46fb09e8ef4301ca62.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       点击“注册镜像”
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/0396a47f8e311e94f344b75b3ea72e2f.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       填写镜像的相关信息
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/f96e261013e216b61df4137754acb83a.png"/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/be3c51547017ac33394ad2509ae49c8d.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       注册成功之后，可以在管理镜像里找到镜像文件的名称。
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/8498b135ae586050beb9dbc1b947cfbd.png"/>
    </p>
    <h3 style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       二、创建虚拟机
      </span>
     </span>
    </h3>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/18fb1e8cfe8af518bf4e0bbb3d5f2e04.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/cc010314c34ae6cab17e4dbe6d5ffed6.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/2820adb4f9de720bb6ba18061653063c.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6ccfe242776f7e851ea2ad6b0eab00c5.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/1d9dbedbe3966350c764b6b7a374da24.png"/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/21d79a7981f7cff933960e630a6466db.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/347493a01db6bb8d0e354b53bec80b16.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ad98f1c6c79fdb3b342c7c8e5d14508a.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/3b365765ba3d60efe7e23c62e9eb92b4.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/d15181078aee69421c07c135ddd39c6d.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/5c01c2a9adac9e1c10b505c3e7a13836.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       等待完成。
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/fd98a8b3c7ab43157f6724f6b2cf2b4a.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       点击“服务列表”--&gt;“计算资源”
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/3baf50c95a92bfa325c1ad2ec913087d.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       查看创建好的虚拟机
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ef5143fc457df66b06b9047f52a6db51.png"/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/999cad74f908efe8c7a83727883d64e7.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       通过VNC的方式登录虚拟机
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/92b2d34ba754318be729023aa361523a.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       登录虚拟机后，开始安装操作系统
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/92db7a1317c19d1ecee33c0ec191c6e7.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       登录系统，安装UVP VMTools工具。
      </span>
     </span>
    </p>
    <h4 style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       1、在已安装的Linux虚拟机中，使用root帐户分别执行如下命令，将镜像文件虚拟机。
      </span>
     </span>
    </h4>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       mkdir -p /mnt/image-tools
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       mount /dev/sr1 /mnt/image-tools
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       mkdir -p /opt/image-tools
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       cp -r /mnt/image-tools/linux /opt/image-tools
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       cd /opt/image-tools/linux
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       chmod +x *.sh
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       umount /mnt/image-tools
      </span>
     </span>
    </p>
    <h4 style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       2、在Service OM界面卸载ISO文件。
      </span>
     </span>
    </h4>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       在弹出的ISO挂载框中，单击“卸载ISO”，卸载ISO文件。
      </span>
     </span>
    </p>
    <h4 style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       3、挂载并安装UVP VMTools
      </span>
     </span>
    </h4>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       在已登录的Service OM界面，单击已创建的镜像虚拟机名称，进入概要界面。单击界面右上角“更多 &gt; 挂载UVP VMTools”，使用root帐户在Linux虚拟机中执行如下命令，安装UVP VMTools。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       cd /opt/image-tools/linux
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       ./install-vmtools.sh
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       当出现以下回显时，表示UVP VMTools已安装成功。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       The UVP VMTools is installed successfully.
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       Reboot the system for the installation to take effect.
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       Successfully installed vmtools.
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       UVP VMTools的功能需重启虚拟机才能使用。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       在安装完毕UVP VMTools后，建议重启虚拟机。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       在已登录的Service OM界面，单击已创建的镜像虚拟机名称，进入概要界面。单击界面右上角“更多 &gt; 卸载UVP VMTools”。
      </span>
     </span>
    </p>
    <h4 style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       4、安装Cloud-Init
      </span>
     </span>
    </h4>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       执行如下命令，进入Cloud-Init安装目录并安装Cloud-Init。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       cd /opt/image-tools/linux
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       ./install-cloud-init.sh
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       安装完Cloud-Init后，请执行如下命令，查看是否安装成功。
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       cloud-init -v
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       回显如下类似信息（包含版本号），则表示安装成功：
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       /usr/bin/cloud-init 18.2
      </span>
     </span>
    </p>
    <h3 style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       三、部署华为云虚拟机
      </span>
     </span>
    </h3>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       登录华为云HUAWEI CLOUD Stack平台
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/9c56f1bb889eea384d9ad9f0aaca4439.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/8b1d31537ce9c5ada4ba4119b3695877.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       继续下拉
      </span>
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/4b4ab0ca27945875fde48a17b86b9644.png"/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/0dc05666d12d9110bf92662c70988aef.png"/>
    </p>
    <p>
     <br/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/96741d906414301396e4f64cfc803aba.png"/>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/f2e3d680d488fc372c014cc515118d4d.png"/>
    </p>
    <p style="margin-left:0;text-align:justify;">
    </p>
    <p style="margin-left:0;text-align:justify;">
     <span style="color:#121212;">
      <span style="background-color:#ffffff;">
       等待虚拟机申请完成后，就可以登录操作系统。
      </span>
     </span>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f53696e6f726567616c2f:61727469636c652f64657461696c732f313232343930333035" class_="artid" style="display:none">
 </p>
</div>
