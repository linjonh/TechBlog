---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333736343937342f:61727469636c652f64657461696c732f313436313533333338"
layout: post
title: "MySQL_04æ•°æ®åº“åŸºæœ¬æ“ä½œç”¨æˆ·ç®¡ç†-é…ç½®æ–‡ä»¶-è¿œç¨‹è¿æ¥-æ•°æ®åº“ä¿¡æ¯æŸ¥çœ‹åˆ›å»ºåˆ é™¤"
date: 2025-03-10 17:58:54 +08:00
description: "MySQLåŸºæ“ã€‚"
keywords: "ã€MySQL_04ã€‘æ•°æ®åº“åŸºæœ¬æ“ä½œï¼ˆç”¨æˆ·ç®¡ç†--é…ç½®æ–‡ä»¶--è¿œç¨‹è¿æ¥--æ•°æ®åº“ä¿¡æ¯æŸ¥çœ‹ã€åˆ›å»ºã€åˆ é™¤ï¼‰"
categories: ['Sql']
tags: ['æ•°æ®åº“', 'Mysql', 'Adb']
artid: "146153338"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146153338
    alt: "MySQL_04æ•°æ®åº“åŸºæœ¬æ“ä½œç”¨æˆ·ç®¡ç†-é…ç½®æ–‡ä»¶-è¿œç¨‹è¿æ¥-æ•°æ®åº“ä¿¡æ¯æŸ¥çœ‹åˆ›å»ºåˆ é™¤"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146153338
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146153338
cover: https://bing.ee123.net/img/rand?artid=146153338
image: https://bing.ee123.net/img/rand?artid=146153338
img: https://bing.ee123.net/img/rand?artid=146153338
---

# ã€MySQL_04ã€‘æ•°æ®åº“åŸºæœ¬æ“ä½œï¼ˆç”¨æˆ·ç®¡ç†--é…ç½®æ–‡ä»¶--è¿œç¨‹è¿æ¥--æ•°æ®åº“ä¿¡æ¯æŸ¥çœ‹ã€åˆ›å»ºã€åˆ é™¤ï¼‰

æœ¬æ–‡è¿œç¨‹è¿æ¥Ubuntuä¸»æœºä¸Šå®‰è£…çš„MySQL Serverï¼Œæœ‰äº›å†…å®¹å‰é¢ä¹Ÿè®²è¿‡ï¼Œå¯ä»¥çœ‹å†å²æ–‡ç« ã€‚

MySQLç‰ˆæœ¬ï¼š8.4.4 LTSã€‚

è½¯ä»¶ä½¿ç”¨
`Navicat`
ã€‚

å†å²æ–‡ç« ç‚¹å‡»ğŸ‘‰ï¼š
[SQL](https://blog.csdn.net/weixin_43764974/category_11122036.html)

ğŸˆâ€â¬›githubï¼š
<https://github.com/mysql>

ğŸ’»å®˜ç½‘ï¼š
<https://www.mysql.com>

ğŸŒç»´åŸºç™¾ç§‘ï¼š
<https://zh.wikipedia.org/wiki/MySQL>

> è¯­æ³•ç®€è¿°ï¼šSQLè¯­å¥ä½ çœ‹å•æ¬¡æ„æ€åŸºæœ¬å°±èƒ½æ˜ç™½ï¼Œè¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†è¿è¡Œæ—¶ä¼šå­—æ®µè½¬ä¸ºå¤§å†™ï¼Œå¤§å°å†™çœ‹ä½ å…¬å¸è§„èŒƒã€‚ä¸è¿‡è¡¨åè¿™ç§æ˜¯æœ‰å¤§å°å†™çš„å“¦ã€‚ä½ æœ€å¥½æŠŠç›¸å…³è¯­å¥çš„è‹±è¯­å•è¯è®°ä½ï¼Œå»æŸ¥æŸ¥ä»€ä¹ˆæ„æ€ï¼Œæ€ä¹ˆè¯»ã€‚

## ä¸€ã€MySQL ç”¨æˆ·ç®¡ç†

### 1.1 ç”¨æˆ·ç®¡ç†

#### 1.11 mysql.userè¡¨è¯¦è§£

MySQLçš„ç”¨æˆ·ä¿¡æ¯å’Œæƒé™é…ç½®å­˜å‚¨åœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®åº“ä¸­ï¼Œè¿™ä¸ªæ•°æ®åº“å«åš
`mysql`
æ•°æ®åº“ã€‚

mysql æ•°æ®åº“æ˜¯MySQLç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®åº“ä¹‹ä¸€ï¼Œç”¨äºå­˜å‚¨ä¸MySQLæœåŠ¡å™¨è¿è¡Œç›¸å…³çš„ç³»ç»Ÿä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ã€æƒé™è®¾ç½®ã€å…¨å±€å˜é‡ã€æ’ä»¶ä¿¡æ¯ç­‰ã€‚

ç”¨æˆ·ä¿¡æ¯ä¸»è¦å­˜å‚¨åœ¨
`mysql.user`
è¡¨ä¸­ã€‚
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/2bace468d92040629c8a640ea50d032e.png)

ç”¨æˆ·yunæ˜¯æˆ‘è‡ªå·±æ·»åŠ çš„ï¼ˆæˆ‘åˆ›å»ºçš„æ˜¯ä¸€ä¸ªç‰¹æƒç”¨æˆ·ï¼Œç”¨äºæ‰€æœ‰æƒé™ï¼‰ã€‚

å…¶ä»–å‡ ä¸ªæ˜¯é»˜è®¤çš„ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š

| ç”¨æˆ·å | ç”¨é€”æè¿° | æƒé™èŒƒå›´ |
| --- | --- | --- |
| **mysql.infoschema** | ç”¨äºè®¿é—® `information_schema` æ•°æ®åº“ï¼Œæä¾›æ•°æ®åº“å…ƒæ•°æ®çš„åªè¯»è§†å›¾ã€‚ | ä»…é™è®¿é—® `information_schema` ï¼Œæƒé™è¾ƒä½ï¼Œä¸»è¦ç”¨äºæŸ¥è¯¢å…ƒæ•°æ®ã€‚ |
| **mysql.session** | ä¾›MySQLå†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºæ’ä»¶å’Œå†…éƒ¨ä¼šè¯æ“ä½œã€‚ | ç”¨äºæœåŠ¡å™¨å†…éƒ¨ä»»åŠ¡ï¼Œå¦‚ç®¡ç†è¿æ¥å’Œä¼šè¯ï¼Œæƒé™ç”±MySQLå†…éƒ¨æ§åˆ¶ã€‚ |
| **mysql.sys** | ç”¨äº `sys` æ•°æ®åº“ï¼Œæä¾›æ€§èƒ½ç›‘æ§å’Œè¯Šæ–­å·¥å…·ã€‚ | ä»…é™è®¿é—® `sys` æ•°æ®åº“ï¼Œæƒé™è¾ƒä½ï¼Œç”¨äºæ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–ã€‚ |
| **`root`** | é»˜è®¤çš„è¶…çº§ç”¨æˆ·ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™ï¼Œç”¨äºæ•°æ®åº“ç®¡ç†å’Œé…ç½®ã€‚ | æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œå¯ä»¥æ‰§è¡Œä»»ä½•æ•°æ®åº“æ“ä½œï¼ŒåŒ…æ‹¬åˆ›å»ºã€åˆ é™¤ç”¨æˆ·å’Œæ•°æ®åº“ç­‰ã€‚ |

---

**userè¡¨å…±æœ‰51åˆ—ï¼Œå­˜å‚¨ç€æ¯ä¸ªç”¨æˆ·çš„å„ç§ä¿¡æ¯ã€æƒé™ç­‰å†…å®¹ï¼Œæœ¬æ–‡åˆ†ä¸º6å¤§ç±»æ¥è§£é‡Šï¼š**

**ï¼ˆ1ï¼‰ç”¨æˆ·åŸºæœ¬ä¿¡æ¯**

| **å­—æ®µå** | **å«ä¹‰** | **å­—æ®µå** | **å«ä¹‰** |
| --- | --- | --- | --- |
| `Host` | ç”¨æˆ·å…è®¸è¿æ¥çš„ä¸»æœºåœ°å€ï¼ˆå¦‚ `localhost` æˆ– `%` è¡¨ç¤ºä»»æ„ä¸»æœºï¼‰ã€‚ | `User` | ç”¨æˆ·åï¼Œç”¨äºæ ‡è¯†ç”¨æˆ·ã€‚ |
| `plugin` | è®¤è¯æ’ä»¶ç±»å‹ï¼ˆå¦‚ `caching_sha2_password` ï¼‰ã€‚ | `authentication_string` | ç”¨æˆ·çš„è®¤è¯å‡­æ®ï¼ˆå¯†ç å“ˆå¸Œå€¼ï¼‰ã€‚ |

rootç”¨æˆ·æœ€å¥½åªè¿è¡Œæœ¬æœºç™»å½•ï¼Œå³Hostä¸ºlocalhostæˆ–è€…127.0.0.1è¿™äº›ã€‚è€Œç‰¹å®šçš„ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸ºå…è®¸ç™»å½•çš„ipåœ°å€ï¼Œæˆ–è€…å…è®¸ä»»æ„ä¸»æœºè¿æ¥ã€‚

authentication_stringæ˜¯ç”¨æˆ·å¯†ç å“ˆå¸Œå€¼ï¼Œæ˜¯ç”±caching_sha2_passwordè¿™ç§æ’ä»¶ç”Ÿæˆçš„ï¼Œä½ æ— æ³•æŸ¥çœ‹çœŸå®å¯†ç ï¼Œåªèƒ½é€šè¿‡rootç”¨æˆ·ä¿®æ”¹å¯†ç ã€‚

---

**ï¼ˆ2ï¼‰æƒé™ç›¸å…³å­—æ®µ**

è¿™äº›æ˜¯å¯¹ç”¨æˆ·çš„æƒé™çš„æ¯”è¾ƒç²¾ç»†çš„æ§åˆ¶ã€‚è¿™äº›æƒé™é»˜è®¤åŸºæœ¬å…¨æ˜¯æ‹’ç»çš„ã€‚

| **å­—æ®µå** | **å«ä¹‰** | **å­—æ®µå** | **å«ä¹‰** |
| --- | --- | --- | --- |
| `Select_priv` | æ˜¯å¦å…è®¸æ‰§è¡Œ `SELECT` æŸ¥è¯¢ã€‚ | `Insert_priv` | æ˜¯å¦å…è®¸æ‰§è¡Œ `INSERT` æ’å…¥æ“ä½œã€‚ |
| `Update_priv` | æ˜¯å¦å…è®¸æ‰§è¡Œ `UPDATE` æ›´æ–°æ“ä½œã€‚ | `Delete_priv` | æ˜¯å¦å…è®¸æ‰§è¡Œ `DELETE` åˆ é™¤æ“ä½œã€‚ |
| `Create_priv` | æ˜¯å¦å…è®¸åˆ›å»ºæ•°æ®åº“æˆ–è¡¨ã€‚ | `Drop_priv` | æ˜¯å¦å…è®¸åˆ é™¤æ•°æ®åº“æˆ–è¡¨ã€‚ |
| `Reload_priv` | æ˜¯å¦å…è®¸æ‰§è¡Œ `FLUSH` æ“ä½œï¼ˆé‡æ–°åŠ è½½æƒé™è¡¨ï¼‰ã€‚ | `Shutdown_priv` | æ˜¯å¦å…è®¸å…³é—­MySQLæœåŠ¡å™¨ã€‚ |
| `Process_priv` | æ˜¯å¦å…è®¸æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„è¿›ç¨‹ï¼ˆå¦‚ `SHOW PROCESSLIST` ï¼‰ã€‚ | `File_priv` | æ˜¯å¦å…è®¸è¯»å†™æ–‡ä»¶ï¼ˆå¦‚ `LOAD DATA INFILE` ï¼‰ã€‚ |
| `Grant_priv` | æ˜¯å¦å…è®¸æˆäºˆå…¶ä»–ç”¨æˆ·æƒé™ã€‚ | `References_priv` | æ˜¯å¦å…è®¸åˆ›å»ºå¤–é”®çº¦æŸï¼ˆå·²å¼ƒç”¨ï¼‰ã€‚ |
| `Index_priv` | æ˜¯å¦å…è®¸åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•ã€‚ | `Alter_priv` | æ˜¯å¦å…è®¸ä¿®æ”¹è¡¨ç»“æ„ï¼ˆå¦‚ `ALTER TABLE` ï¼‰ã€‚ |
| `Show_db_priv` | æ˜¯å¦å…è®¸æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼ˆå¦‚ `SHOW DATABASES` ï¼‰ã€‚ | `Super_priv` | æ˜¯å¦æ‹¥æœ‰è¶…çº§æƒé™ï¼ˆå¦‚æ‰§è¡Œç®¡ç†å‘½ä»¤ï¼‰ã€‚ |
| `Create_tmp_table_priv` | æ˜¯å¦å…è®¸åˆ›å»ºä¸´æ—¶è¡¨ã€‚ | `Lock_tables_priv` | æ˜¯å¦å…è®¸é”å®šè¡¨ã€‚ |
| `Execute_priv` | æ˜¯å¦å…è®¸æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°ã€‚ | `Repl_slave_priv` | æ˜¯å¦å…è®¸ä½œä¸ºå¤åˆ¶ä»æœåŠ¡å™¨ã€‚ |
| `Repl_client_priv` | æ˜¯å¦å…è®¸æŸ¥è¯¢ä¸»æœåŠ¡å™¨æˆ–ä»æœåŠ¡å™¨çš„çŠ¶æ€ã€‚ | `Create_view_priv` | æ˜¯å¦å…è®¸åˆ›å»ºè§†å›¾ã€‚ |
| `Show_view_priv` | æ˜¯å¦å…è®¸æŸ¥çœ‹è§†å›¾å®šä¹‰ã€‚ | `Create_routine_priv` | æ˜¯å¦å…è®¸åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°ã€‚ |
| `Alter_routine_priv` | æ˜¯å¦å…è®¸ä¿®æ”¹æˆ–åˆ é™¤å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°ã€‚ | `Create_user_priv` | æ˜¯å¦å…è®¸åˆ›å»ºç”¨æˆ·ã€‚ |
| `Event_priv` | æ˜¯å¦å…è®¸åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤äº‹ä»¶ã€‚ | `Trigger_priv` | æ˜¯å¦å…è®¸åˆ›å»ºæˆ–åˆ é™¤è§¦å‘å™¨ã€‚ |
| `Create_tablespace_priv` | æ˜¯å¦å…è®¸åˆ›å»ºè¡¨ç©ºé—´ã€‚ | `Create_role_priv` | æ˜¯å¦å…è®¸åˆ›å»ºè§’è‰²ã€‚ |
| `Drop_role_priv` | æ˜¯å¦å…è®¸åˆ é™¤è§’è‰²ã€‚ |  |  |

---

**ï¼ˆ3ï¼‰SSL/TLSç›¸å…³å­—æ®µ**

ä¸»è¦ç”¨äºåŠ å¯†è¿æ¥ã€‚

| **å­—æ®µå** | **å«ä¹‰** | **å­—æ®µå** | **å«ä¹‰** |
| --- | --- | --- | --- |
| `ssl_type` | SSLè¿æ¥ç±»å‹ï¼ˆå¦‚ `ANY` ã€ `X509` ã€ `SPECIFIED` ï¼‰ã€‚ | `ssl_cipher` | ä½¿ç”¨çš„SSLåŠ å¯†ç®—æ³•ã€‚ |
| `x509_issuer` | X509è¯ä¹¦çš„é¢å‘è€…ä¿¡æ¯ã€‚ | `x509_subject` | X509è¯ä¹¦çš„ä¸»é¢˜ä¿¡æ¯ã€‚ |

---

**ï¼ˆ4ï¼‰èµ„æºé™åˆ¶ç›¸å…³å­—æ®µ**

| **å­—æ®µå** | **å«ä¹‰** | **å­—æ®µå** | **å«ä¹‰** |
| --- | --- | --- | --- |
| `max_questions` | æ¯å°æ—¶å…è®¸çš„æœ€å¤§æŸ¥è¯¢æ¬¡æ•°ã€‚ | `max_updates` | æ¯å°æ—¶å…è®¸çš„æœ€å¤§æ›´æ–°æ¬¡æ•°ã€‚ |
| `max_connections` | æ¯å°æ—¶å…è®¸çš„æœ€å¤§è¿æ¥æ¬¡æ•°ã€‚ | `max_user_connections` | ç”¨æˆ·åŒæ—¶å…è®¸çš„æœ€å¤§è¿æ¥æ•°ã€‚ |

---

**ï¼ˆ5ï¼‰å¯†ç ç®¡ç†ç›¸å…³å­—æ®µ**

é»˜è®¤éƒ½æ˜¯0ï¼Œè¡¨ç¤ºæ— é™åˆ¶ã€‚

| **å­—æ®µå** | **å«ä¹‰** | **å­—æ®µå** | **å«ä¹‰** |
| --- | --- | --- | --- |
| `password_expired` | å¯†ç æ˜¯å¦å·²è¿‡æœŸï¼ˆ `Y` æˆ– `N` ï¼‰ã€‚ | `password_last_changed` | å¯†ç æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚ |
| `password_lifetime` | å¯†ç çš„æœ‰æ•ˆæœŸï¼ˆå¤©æ•°ï¼‰ã€‚ | `Password_reuse_history` | å¯†ç é‡ç”¨å‰éœ€è¦æ›´æ”¹çš„æ¬¡æ•°ã€‚ |
| `Password_reuse_time` | å¯†ç é‡ç”¨å‰éœ€è¦ç­‰å¾…çš„å¤©æ•°ã€‚ | `Password_require_current` | ä¿®æ”¹å¯†ç æ—¶æ˜¯å¦éœ€è¦æä¾›å½“å‰å¯†ç ï¼ˆ `Y` æˆ– `N` ï¼‰ã€‚ |

---

**ï¼ˆ6ï¼‰å…¶ä»–å­—æ®µ**

| **å­—æ®µå** | **å«ä¹‰** | **å­—æ®µå** | **å«ä¹‰** |
| --- | --- | --- | --- |
| `account_locked` | è´¦æˆ·æ˜¯å¦è¢«é”å®šï¼ˆ `Y` æˆ– `N` ï¼‰ã€‚ | `User_attributes` | ç”¨æˆ·çš„é™„åŠ å±æ€§ï¼ˆä»¥JSONæ ¼å¼å­˜å‚¨ï¼‰ã€‚ |

#### 1.12 æ·»åŠ ç”¨æˆ·

> **æ‰§è¡Œæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ç”¨æˆ·ç­‰æ“ä½œï¼Œä½ å¿…é¡»æœ‰ç›¸å…³æƒé™æ‰è¡Œï¼Œrootç”¨æˆ·æœ‰æ‰€æœ‰æƒé™ã€‚æƒé™æ˜¯å¯¹mysql.userè¿™å¼ è¡¨çš„æƒé™ã€‚æœ‰CREATE USERæƒé™å¯ä»¥åˆ›å»ºç”¨æˆ·ï¼›æœ‰UPDATEå’ŒALTERæƒé™å¯ä»¥ä¿®æ”¹å…¶å®ƒç”¨æˆ·å±æ€§ï¼Œä»¥æ­¤ç±»æ¨ã€‚**

ä½¿ç”¨
`CREATE USER`
è¯­å¥åˆ›å»ºæ–°ç”¨æˆ·ï¼š

```sql
CREATE USER 'username'@'host' IDENTIFIED BY 'password';

```

* usernameï¼šç”¨æˆ·åã€‚
* hostï¼šå…è®¸è¿æ¥çš„ä¸»æœºï¼ˆå¦‚ localhost æˆ– % è¡¨ç¤ºæ‰€æœ‰ä¸»æœºï¼‰ã€‚
* passwordï¼šä½ çš„ç”¨æˆ·å¯†ç ã€‚

åˆ›å»ºæ— å¯†ç ç”¨æˆ·ï¼šå±ï¼Œä¸è¦è¿™ä¹ˆåš

```sql
CREATE USER 'newuser'@'localhost';

```

æ— å¯†ç ç”¨æˆ·ï¼Œè®¾ç½®å¯†ç ï¼š

```bash
ALTER USER 'newuser'@'localhost' IDENTIFIED BY 'your_password';

```

#### 1.13 ä¿®æ”¹ç”¨æˆ·æƒé™

**æƒé™ï¼š**
å³å‰é¢è®²çš„51ä¸ªå­—æ®µä¸­çš„æƒé™ç›¸å…³å­—æ®µï¼Œä¸è¦
`_priv`
ï¼ˆprivilegeï¼‰åç¼€ï¼Œä¸è¦ä¸‹åˆ’çº¿ï¼Œå…¨å¤§å†™ã€‚

å¦‚ï¼š

* åˆ—å
  `Select_priv`
  å¯¹åº”çš„æƒé™å°±æ˜¯ï¼š
  `SELECT`
  ï¼›
* `Create_view_priv`
  å°±æ˜¯
  `CREATE VIEW`
  ã€‚

---

ğŸ”¹ä½¿ç”¨
`GRANT`
è¯­å¥
**æˆäºˆ**
ç”¨æˆ·æƒé™ï¼š

```sql
GRANT æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å TO 'ç”¨æˆ·å'@'ä¸»æœºå';

```

* æƒé™åˆ—è¡¨ï¼šå¯ä»¥æ˜¯å…·ä½“çš„æƒé™ï¼ˆå¦‚ SELECTã€INSERTã€UPDATE ç­‰ï¼Œå¤šä¸ªæƒé™é€—å·åˆ†å‰²ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ ALL PRIVILEGESï¼ˆè¡¨ç¤ºæ‰€æœ‰æƒé™ï¼‰ã€‚
* æ•°æ®åº“å.è¡¨åï¼šæŒ‡å®šæƒé™ä½œç”¨çš„èŒƒå›´ã€‚å¯ä»¥ä½¿ç”¨
  *.*
  è¡¨ç¤ºæ‰€æœ‰æ•°æ®åº“å’Œè¡¨ï¼Œ
  `æ•°æ®åº“å.*`
  è¡¨ç¤ºæŸä¸ªæ•°æ®åº“çš„æ‰€æœ‰è¡¨ã€‚
* ç”¨æˆ·å@ä¸»æœºåï¼šæŒ‡å®šç”¨æˆ·å’Œå…è®¸è¿æ¥çš„ä¸»æœºï¼ˆå¦‚ â€˜test_userâ€™@â€˜localhostâ€™ï¼‰ã€‚

ä¾‹ï¼š
  
æˆäºˆç”¨æˆ· test_user å¯¹æ‰€æœ‰æ•°æ®åº“çš„æŸ¥è¯¢æƒé™ï¼š

```sql
GRANT SELECT ON *.* TO 'test_user'@'localhost';

```

ğŸ”¹ä½¿ç”¨
`REVOKE`
è¯­å¥
**æ’¤é”€**
æƒé™ï¼š

```bash
REVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å FROM 'ç”¨æˆ·å'@'ä¸»æœºå';

```

ğŸŸ¢ä¿®æ”¹æƒé™åéœ€è¦åˆ·æ–°æƒé™ä»¥ç”Ÿæ•ˆï¼š

```sql
FLUSH PRIVILEGES;

```

#### 1.14 åˆ é™¤ç”¨æˆ·

ä½¿ç”¨
`DROP USER`
è¯­å¥åˆ é™¤ç”¨æˆ·ï¼š

```sql
DROP USER 'username'@'host';

```

#### 1.15 å¯†ç é—®é¢˜

> **æ³¨æ„1.12èŠ‚è¯´çš„æƒé™é—®é¢˜ã€‚**

ğŸ”¹æ™®é€šç”¨æˆ·çš„å¯†ç ï¼š

ä¿®æ”¹å¯†ç ï¼šæ²¡å¯†ç å°±è®¾ç½®ï¼Œæœ‰ç§˜å¯†å°±æ˜¯ä¿®æ”¹

```bash
ALTER USER 'username'@'hostname' IDENTIFIED BY 'newpassword';

```

æœ‰å¯†ç çš„å¯ä»¥è®¾ç½®ä¸ºç©ºï¼Œå³æ— å¯†ç ï¼š

```sql
ALTER USER 'username'@'hostname' IDENTIFIED BY '';

```

è®°å¾—ï¼Œä¿®æ”¹å¯†ç ååˆ·æ–°æƒé™ï¼ˆåé¢ä¸å†é‡å¤ï¼‰ï¼š

```sql
FLUSH PRIVILEGES;

```

---

ğŸ”¹ root ç”¨æˆ·çš„å¯†ç  ï¼š

ï¼ˆ1ï¼‰ä¿®æ”¹ï¼šè·Ÿå‰é¢ä¸€æ ·

ä»¥rootç”¨æˆ·ç™»å½•ï¼Œç„¶åä¿®æ”¹å³å¯

```sql
ALTER USER 'root'@'localhost' IDENTIFIED BY 'æ–°å¯†ç ';

```

ï¼ˆ2ï¼‰
`å¿˜è®°å¯†ç `
ï¼š è¿™ä¸ªæ‰æ˜¯å¸¸è§æƒ…å†µ

å…ˆåœæ­¢mysqlæœåŠ¡ï¼š

```sql
sudo systemctl stop mysql

```

ä½¿ç”¨
`mysqladmin`
å·¥å…·ä¿®æ”¹å¯†ç ï¼š

```sql
mysqladmin -u root -p password 'æ–°å¯†ç '

```

åˆ·æ–°åå¯åŠ¨mysqlï¼š

```sqk
sudo systemctl start mysql

```

> æˆ–è€…ä»¥è·³è¿‡æƒé™éªŒè¯çš„æ–¹å¼å¯åŠ¨mysqlï¼ˆå…ˆå…³é—­ï¼‰ï¼šsudo mysqld_safe --skip-grant-tables &
>   
> ç™»å½•rootï¼šmysql -u root
>   
> æ”¹å¯†ç ï¼šALTER USER â€˜rootâ€™@â€˜localhostâ€™ IDENTIFIED BY â€˜new_passwordâ€™;
>   
> åˆ·æ–°ï¼šFLUSH PRIVILEGES;
>   
> é€€å‡ºï¼šEXIT;
>   
> åœæ­¢ï¼ˆåœæ­¢çš„æ˜¯ä»¥è·³è¿‡æƒé™æ£€æŸ¥æ–¹å¼å¯åŠ¨çš„mysqlï¼‰å’Œé‡å¯ï¼šsudo systemctl stop mysql
>   
> sudo systemctl start mysql

---

## äºŒã€MySQL é…ç½®æ–‡ä»¶

### 2.1 é…ç½®æ–‡ä»¶ä½ç½®

â˜˜ï¸
**ï¼ˆ1ï¼‰Windows**

é…ç½®æ–‡ä»¶é€šå¸¸ä½äºä»¥ä¸‹ä½ç½®ä¹‹ä¸€ï¼š

```bash
%basedir%\my.ini
%datadir%\my.ini
C:\ProgramData\MySQL\MySQL Server X.Y\my.iniï¼ˆX.Y æ˜¯ MySQL ç‰ˆæœ¬å·ï¼‰

```

è·å–ï¼šbasedirå’Œdatadirè·¯å¾„ï¼š

ç™»å½•mysqlï¼šæ­¤å¤„ å¤§å†™ -P 3360æ˜¯æˆ‘è®¾ç½®çš„mysqlç«¯å£ï¼Œé»˜è®¤æ˜¯3306ï¼Œå¦‚æœæ˜¯é»˜è®¤åªå€¼å°±ä¸ç”¨æŒ‡å®šè¿™ä¸ªå‚æ•°ã€‚

```sql
mysql -u root -p -P 3360

```

æ‰§è¡Œè¯­å¥ï¼š

```bash
SHOW VARIABLES LIKE 'basedir';
SHOW VARIABLES LIKE 'datadir';

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c323ca2aa31c4811a3187a590edd3403.png)

å¦‚ï¼Œæˆ‘çš„é…ç½®æ–‡ä»¶åœ¨datadirä¸‹é¢ï¼šä½¿ç”¨
`notepad++`
ã€è®°äº‹æœ¬ã€vscodeç­‰è½¯ä»¶å³å¯æ‰“å¼€æŸ¥çœ‹
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/32902ceab67b405e8017686fa94340b6.png)

â˜˜ï¸
**ï¼ˆ2ï¼‰Linux**

å‘½ä»¤ï¼š

```bash
mysql --help | grep 'my.cnf'

```

æœ‰3ä¸ªä½ç½®çš„é…ç½®æ–‡ä»¶ï¼š
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/308aeee669aa4912be8fcf42d9e325d0.png)

* /etc/my.cnfï¼šç³»ç»Ÿçº§åˆ«çš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œä¼˜å…ˆçº§æœ€ä½ã€‚
* /etc/mysql/my.cnfï¼šç‰¹å®š MySQL å®‰è£…çš„é…ç½®æ–‡ä»¶ï¼Œä¼˜å…ˆçº§ä¸­ç­‰ã€‚
* ~/.my.cnfï¼šç”¨æˆ·(Linux ç”¨æˆ·)çº§åˆ«çš„é…ç½®æ–‡ä»¶ï¼Œä¼˜å…ˆçº§æœ€é«˜ã€‚

---

ğŸ¤­å‰é¢çš„ç¬¬äºŒä¸ªé…ç½®æ–‡ä»¶ï¼šåœ¨
`Debian/Ubuntu`
ç³»ç»Ÿä¸­ï¼Œé€šå¸¸é‡‡ç”¨
**åˆ†ç‰‡å¼é…ç½®**
ï¼Œå³å°†é…ç½®åˆ†æ•£åˆ°å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿ç®¡ç†å’Œç»´æŠ¤ã€‚ä¸»è¦åŒ…æ‹¬ï¼š

* `/etc/mysql/my.cnf`
  ï¼šä¸»é…ç½®æ–‡ä»¶ï¼Œé€šå¸¸ä¼šåŒ…å«å¯¹å…¶ä»–é…ç½®æ–‡ä»¶çš„å¼•ç”¨ã€‚
* `/etc/mysql/mysql.conf.d/`
  ï¼šåŒ…å« MySQL æœåŠ¡å™¨çš„é…ç½®ç‰‡æ®µã€‚
  + `mysqld.cnf`
    ï¼šMySQL æœåŠ¡å™¨çš„ä¸»è¦é…ç½®ã€‚
* `/etc/mysql/conf.d/`
  ï¼šç”¨æˆ·å¯ä»¥æ·»åŠ è‡ªå®šä¹‰é…ç½®ç‰‡æ®µã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/281adc0cb8c24bf08d21bab205ab7b70.png)
  
ä¸Šå›¾æœ€ä¸‹é¢çš„ï¼š
`/etc/mysql/mysql.conf.d/mysqld.cnf`
çš„ä½œç”¨

`mysqld.cnf`
æ–‡ä»¶ä¸“é—¨ç”¨äºé…ç½® MySQL æœåŠ¡å™¨ï¼ˆ
`mysqld`
ï¼‰çš„è¡Œä¸ºã€‚å®ƒé€šå¸¸åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

* **æ•°æ®ç›®å½•**
  ï¼ˆ
  `datadir`
  ï¼‰
* **ç»‘å®šåœ°å€**
  ï¼ˆ
  `bind-address`
  ï¼‰
* **ç«¯å£**
  ï¼ˆ
  `port`
  ï¼‰
* **æ—¥å¿—æ–‡ä»¶è·¯å¾„**
  ï¼ˆå¦‚
  `log_error`
  ï¼‰
* **å­—ç¬¦é›†**
  ï¼ˆå¦‚
  `character-set-server`
  ï¼‰
* **å…¶ä»–æ€§èƒ½ç›¸å…³é…ç½®**
  ï¼ˆå¦‚
  `innodb_buffer_pool_size`
  ï¼‰

---

### 2.2 é…ç½®æ–‡ä»¶ç»“æ„

MySQL é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡‡ç”¨
`key = value`
çš„æ ¼å¼ã€‚

**é…ç½®æ–‡ä»¶åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ç”¨
`[section]`
æ ‡è¯†ã€‚**

å¸¸è§çš„éƒ¨åˆ†åŒ…æ‹¬ï¼š

* **[mysqld]**
  : MySQL æœåŠ¡å™¨çš„é…ç½®ã€‚
* **[client]**
  : å®¢æˆ·ç«¯å·¥å…·çš„é»˜è®¤é…ç½®ï¼ˆå¦‚
  `mysql`
  ã€
  `mysqladmin`
  ï¼‰ã€‚
* **[mysql]**
  :
  `mysql`
  å‘½ä»¤è¡Œå®¢æˆ·ç«¯çš„é…ç½®ã€‚
* **[mysqldump]**
  :
  `mysqldump`
  å·¥å…·çš„é…ç½®ã€‚
* **[server]**
  : æœåŠ¡å™¨ç›¸å…³çš„é…ç½®ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰ã€‚

ç¤ºä¾‹ï¼š

```sql
[mysqld]
datadir = /var/lib/mysql
socket = /var/lib/mysql/mysql.sock
port = 3306
user = mysql
max_connections = 200
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

[client]
port = 3306
socket = /var/lib/mysql/mysql.sock
default-character-set = utf8mb4

[mysql]
default-character-set = utf8mb4

```

### 2.3 å¸¸ç”¨é…ç½®å‚æ•°

â˜˜ï¸
**æœåŠ¡å™¨é…ç½® ([mysqld])**

* **datadir**
  : æ•°æ®ç›®å½•ï¼Œå­˜å‚¨æ•°æ®åº“æ–‡ä»¶çš„ä½ç½®ã€‚

  ```ini
  datadir = /var/lib/mysql

  ```
* **port**
  : MySQL æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯
  `3306`
  ï¼Œä½ ä¿®æ”¹äº†è¿™ä¸ªï¼Œè¿æ¥æ•°æ®åº“çš„æ—¶å€™å°±è¦ -P å‚æ•°æŒ‡å®šç«¯å£ï¼›æˆ–è€…åœ¨[client]é‡Œé¢å§ç«¯å£ä¹Ÿè®¾ç½®ä¸ºç›¸åŒçš„ï¼ˆæŒ‡çš„æ˜¯ä½ ç”¨æ¥è¿æ¥çš„ç”µè„‘çš„é…ç½®æ–‡ä»¶é‡Œé¢çš„[client]ï¼‰ã€‚

  ```ini
  port = 3306

  ```
* **bind-address**
  : æœåŠ¡å™¨ç»‘å®šçš„ IP åœ°å€ã€‚
  `0.0.0.0`
  è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ã€‚å¦‚æœåªå…è®¸å‡ ä¸ªipï¼Œç”¨é€—å·éš”å¼€ã€‚

  ```ini
  bind-address = 0.0.0.0

  ```
* **max_connections**
  : æœ€å¤§è¿æ¥æ•°ã€‚

  ```ini
  max_connections = 200

  ```
* **character-set-server**
  : æœåŠ¡å™¨é»˜è®¤å­—ç¬¦é›†ã€‚

  ```ini
  character-set-server = utf8mb4

  ```
* **collation-server**
  : æœåŠ¡å™¨é»˜è®¤æ’åºè§„åˆ™ã€‚

  ```ini
  collation-server = utf8mb4_unicode_ci

  ```
* **innodb_buffer_pool_size**
  : InnoDB ç¼“å†²æ± å¤§å°ï¼Œå»ºè®®è®¾ç½®ä¸ºç³»ç»Ÿå†…å­˜çš„ 50%-70%ã€‚

  ```ini
  innodb_buffer_pool_size = 1G

  ```
* **log_error**
  : é”™è¯¯æ—¥å¿—æ–‡ä»¶è·¯å¾„ã€‚

  ```ini
  log_error = /var/log/mysql/error.log

  ```
* **slow_query_log**
  : æ˜¯å¦å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ã€‚

  ```ini
  slow_query_log = 1
  slow_query_log_file = /var/log/mysql/slow.log
  long_query_time = 2

  ```

---

â˜˜ï¸
**å®¢æˆ·ç«¯é…ç½® ([client])**

* **port**
  : å®¢æˆ·ç«¯è¿æ¥æ—¶ä½¿ç”¨çš„é»˜è®¤ç«¯å£ã€‚

  ```ini
  port = 3306

  ```
* **socket**
  : å®¢æˆ·ç«¯è¿æ¥æ—¶ä½¿ç”¨çš„ Unix å¥—æ¥å­—æ–‡ä»¶è·¯å¾„ã€‚

  ```ini
  socket = /var/lib/mysql/mysql.sock

  ```
* **default-character-set**
  : å®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†ã€‚

  ```ini
  default-character-set = utf8mb4

  ```

â˜˜ï¸
**å¤‡ä»½é…ç½® ([mysqldump])**

* **max_allowed_packet**
  : å¤‡ä»½æ—¶å…è®¸çš„æœ€å¤§æ•°æ®åŒ…å¤§å°ã€‚

  ```ini
  max_allowed_packet = 64M

  ```

ğŸŸ¢ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯ MySQL æœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š

```bash
sudo systemctl restart mysql

```

å¦‚æœé…ç½®æ–‡ä»¶æœ‰è¯­æ³•é”™è¯¯ï¼ŒMySQL å¯èƒ½æ— æ³•å¯åŠ¨ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§ï¼š

```bash
mysqld --validate-config

```

æŸäº›å‚æ•°å¯ä»¥åœ¨ MySQL è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´ï¼Œæ— éœ€é‡å¯æœåŠ¡ï¼Œä»…é™æ­¤æ¬¡è¿è¡ŒæœŸé—´æœ‰æ•ˆä¾‹å¦‚ï¼š

```bash
SET GLOBAL max_connections = 300;

```

---

## ä¸‰ã€MySQLè¿œç¨‹è¿æ¥

ç°åœ¨å…¶å®æ²¡å•¥å¥½è®²çš„äº†ã€‚

1. ç”¨æˆ·çš„Hostè¦å…è®¸è¿œç¨‹ï¼Œå¦‚ %ï¼Œè€Œä¸æ˜¯localhostï¼›
2. é…ç½®æ–‡ä»¶é‡Œé¢çš„
   `ï¼šbind-address = 0.0.0.0`
3. æœåŠ¡å™¨æ”¾è¡Œmysqlä½¿ç”¨çš„ç«¯å£ã€‚

æœ¬ç³»åˆ—çš„ç¬¬äºŒç¯‡æ–‡ç« ä¹Ÿæœ‰è®²è§£ã€‚

## å››ã€æ•°æ®åº“çš„æŸ¥çœ‹ã€åˆ›å»ºã€åˆ é™¤

### 4.1 æŸ¥çœ‹æ•°æ®åº“

MySQLæ•°æ®åº“è¿æ¥æˆåŠŸä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨SQLè¯­å¥æ¥æŸ¥çœ‹å½“å‰æ‰€æœ‰å­˜åœ¨çš„æ•°æ®åº“ï¼Œæ˜¾ç¤ºçš„ä¸€äº›é»˜è®¤çš„æ•°æ®åº“æ˜¯åœ¨ MySQLå®‰è£…å®Œæˆä¹‹åï¼Œåœ¨å…¶ç›®å½• data è‡ªåŠ¨åˆ›å»ºçš„å‡ ä¸ªå¿…è¦çš„æ•°æ®åº“ï¼Œè¾“å…¥SQLè¯­å¥å¦‚ä¸‹ï¼š

```mysql
 SHOW DATABASES;

```

è¾“å‡ºï¼š
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/7b472a10e52b461fadcad6c98c4e6ee9.png)

è¿™ä¸ªå‘½ä»¤èµ·åˆ°ä¸€äº›å°ä½œç”¨ï¼Œå¯ä»¥å¸®åŠ©ä½ æŸ¥çœ‹åˆ›å»ºçš„æ•°æ®åº“æ˜¯å¦åˆ›å»ºæˆåŠŸï¼Œé€‰æ‹©ä½ åˆ›å»ºçš„æ•°æ®åº“ç­‰æ“ä½œã€‚

å½“ç„¶ä½¿ç”¨Navicatç­‰è½¯ä»¶ç›´æ¥å°±çœ‹åˆ°æ•°æ®åº“äº†ã€‚
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/aad98f24b34a4362b5278ea73099d035.png)

è¿™äº›æ•°æ®åº“æˆ‘åœ¨ç¬¬äºŒç¯‡è®²è¿‡äº†ï¼š
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/08d445e1f2824f0db61df618e84961f3.png)
  
åˆ‡æ¢åˆ°ç›®æ ‡æ•°æ®åº“ï¼š

```bash
USE æ•°æ®åº“å;

```

æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„è¡¨ï¼š

```bash
SHOW TABLES;

```

---

ğŸŸ¢ä½¿ç”¨
`SHOW TABLE STATUS`
æŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨çš„æ‘˜è¦ä¿¡æ¯ï¼š

```bash
SHOW TABLE STATUS FROM æ•°æ®åº“å;

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/89955d8d3a3846b1bd89922228f4cc8b.png)

### 4.2 åˆ›å»ºã€åˆ é™¤æ•°æ®åº“

åˆ›å»ºï¼š

```sql
CREATE DATABASE test;

```

åˆ é™¤ï¼š

```bash
DROP DATABASE test;

```

åˆ›å»ºæˆ–åˆ é™¤å‰å¯ä»¥å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼š

```bash
CREATE DATABASE if not  exists test;
DROP DATABASE IF EXISTS test;

```