---
layout: post
title: "MySQL_04数据库基本操作用户管理-配置文件-远程连接-数据库信息查看创建删除"
date: 2025-03-10 17:58:54 +0800
description: "MySQL基操。"
keywords: "【MySQL_04】数据库基本操作（用户管理--配置文件--远程连接--数据库信息查看、创建、删除）"
categories: ['Sql']
tags: ['数据库', 'Mysql', 'Adb']
artid: "146153338"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146153338
    alt: "MySQL_04数据库基本操作用户管理-配置文件-远程连接-数据库信息查看创建删除"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146153338
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146153338
cover: https://bing.ee123.net/img/rand?artid=146153338
image: https://bing.ee123.net/img/rand?artid=146153338
img: https://bing.ee123.net/img/rand?artid=146153338
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【MySQL_04】数据库基本操作（用户管理--配置文件--远程连接--数据库信息查看、创建、删除）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <p>
     本文远程连接Ubuntu主机上安装的MySQL Server，有些内容前面也讲过，可以看历史文章。
    </p>
    <p>
     MySQL版本：8.4.4 LTS。
    </p>
    <p>
     软件使用
     <code>
      Navicat
     </code>
     。
    </p>
    <p>
     历史文章点击👉：
     <a href="https://blog.csdn.net/weixin_43764974/category_11122036.html">
      SQL
     </a>
    </p>
    <p>
     🐈‍⬛github：
     <a href="https://github.com/mysql">
      https://github.com/mysql
     </a>
    </p>
    <p>
     💻官网：
     <a href="https://www.mysql.com" rel="nofollow">
      https://www.mysql.com
     </a>
    </p>
    <p>
     🌏维基百科：
     <a href="https://zh.wikipedia.org/wiki/MySQL" rel="nofollow">
      https://zh.wikipedia.org/wiki/MySQL
     </a>
    </p>
    <blockquote>
     <p>
      语法简述：SQL语句你看单次意思基本就能明白，语句不区分大小写，但运行时会字段转为大写，大小写看你公司规范。不过表名这种是有大小写的哦。你最好把相关语句的英语单词记住，去查查什么意思，怎么读。
     </p>
    </blockquote>
    <h2>
     <a id="MySQL__18">
     </a>
     一、MySQL 用户管理
    </h2>
    <h3>
     <a id="11__20">
     </a>
     1.1 用户管理
    </h3>
    <h4>
     <a id="111_mysqluser_22">
     </a>
     1.11 mysql.user表详解
    </h4>
    <p>
     MySQL的用户信息和权限配置存储在一个特殊的数据库中，这个数据库叫做
     <code>
      mysql
     </code>
     数据库。
    </p>
    <p>
     mysql 数据库是MySQL系统的核心数据库之一，用于存储与MySQL服务器运行相关的系统信息，其中包括用户账户信息、权限设置、全局变量、插件信息等。
    </p>
    <p>
     用户信息主要存储在
     <code>
      mysql.user
     </code>
     表中。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2bace468d92040629c8a640ea50d032e.png" width="700"/>
    </p>
    <p>
     用户yun是我自己添加的（我创建的是一个特权用户，用于所有权限）。
    </p>
    <p>
     其他几个是默认的，解释如下：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        用户名
       </th>
       <th>
        用途描述
       </th>
       <th>
        权限范围
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         mysql.infoschema
        </strong>
       </td>
       <td>
        用于访问
        <code>
         information_schema
        </code>
        数据库，提供数据库元数据的只读视图。
       </td>
       <td>
        仅限访问
        <code>
         information_schema
        </code>
        ，权限较低，主要用于查询元数据。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         mysql.session
        </strong>
       </td>
       <td>
        供MySQL内部使用，用于插件和内部会话操作。
       </td>
       <td>
        用于服务器内部任务，如管理连接和会话，权限由MySQL内部控制。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         mysql.sys
        </strong>
       </td>
       <td>
        用于
        <code>
         sys
        </code>
        数据库，提供性能监控和诊断工具。
       </td>
       <td>
        仅限访问
        <code>
         sys
        </code>
        数据库，权限较低，用于性能监控和优化。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         <code>
          root
         </code>
        </strong>
       </td>
       <td>
        默认的超级用户，拥有最高权限，用于数据库管理和配置。
       </td>
       <td>
        拥有所有权限，可以执行任何数据库操作，包括创建、删除用户和数据库等。
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <strong>
      user表共有51列，存储着每个用户的各种信息、权限等内容，本文分为6大类来解释：
     </strong>
    </p>
    <p>
     <strong>
      （1）用户基本信息
     </strong>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         Host
        </code>
       </td>
       <td>
        用户允许连接的主机地址（如
        <code>
         localhost
        </code>
        或
        <code>
         %
        </code>
        表示任意主机）。
       </td>
       <td>
        <code>
         User
        </code>
       </td>
       <td>
        用户名，用于标识用户。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         plugin
        </code>
       </td>
       <td>
        认证插件类型（如
        <code>
         caching_sha2_password
        </code>
        ）。
       </td>
       <td>
        <code>
         authentication_string
        </code>
       </td>
       <td>
        用户的认证凭据（密码哈希值）。
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     root用户最好只运行本机登录，即Host为localhost或者127.0.0.1这些。而特定的用户可以设置为允许登录的ip地址，或者允许任意主机连接。
    </p>
    <p>
     authentication_string是用户密码哈希值，是由caching_sha2_password这种插件生成的，你无法查看真实密码，只能通过root用户修改密码。
    </p>
    <hr/>
    <p>
     <strong>
      （2）权限相关字段
     </strong>
    </p>
    <p>
     这些是对用户的权限的比较精细的控制。这些权限默认基本全是拒绝的。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         Select_priv
        </code>
       </td>
       <td>
        是否允许执行
        <code>
         SELECT
        </code>
        查询。
       </td>
       <td>
        <code>
         Insert_priv
        </code>
       </td>
       <td>
        是否允许执行
        <code>
         INSERT
        </code>
        插入操作。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Update_priv
        </code>
       </td>
       <td>
        是否允许执行
        <code>
         UPDATE
        </code>
        更新操作。
       </td>
       <td>
        <code>
         Delete_priv
        </code>
       </td>
       <td>
        是否允许执行
        <code>
         DELETE
        </code>
        删除操作。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Create_priv
        </code>
       </td>
       <td>
        是否允许创建数据库或表。
       </td>
       <td>
        <code>
         Drop_priv
        </code>
       </td>
       <td>
        是否允许删除数据库或表。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Reload_priv
        </code>
       </td>
       <td>
        是否允许执行
        <code>
         FLUSH
        </code>
        操作（重新加载权限表）。
       </td>
       <td>
        <code>
         Shutdown_priv
        </code>
       </td>
       <td>
        是否允许关闭MySQL服务器。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Process_priv
        </code>
       </td>
       <td>
        是否允许查看其他用户的进程（如
        <code>
         SHOW PROCESSLIST
        </code>
        ）。
       </td>
       <td>
        <code>
         File_priv
        </code>
       </td>
       <td>
        是否允许读写文件（如
        <code>
         LOAD DATA INFILE
        </code>
        ）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Grant_priv
        </code>
       </td>
       <td>
        是否允许授予其他用户权限。
       </td>
       <td>
        <code>
         References_priv
        </code>
       </td>
       <td>
        是否允许创建外键约束（已弃用）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Index_priv
        </code>
       </td>
       <td>
        是否允许创建或删除索引。
       </td>
       <td>
        <code>
         Alter_priv
        </code>
       </td>
       <td>
        是否允许修改表结构（如
        <code>
         ALTER TABLE
        </code>
        ）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Show_db_priv
        </code>
       </td>
       <td>
        是否允许查看所有数据库（如
        <code>
         SHOW DATABASES
        </code>
        ）。
       </td>
       <td>
        <code>
         Super_priv
        </code>
       </td>
       <td>
        是否拥有超级权限（如执行管理命令）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Create_tmp_table_priv
        </code>
       </td>
       <td>
        是否允许创建临时表。
       </td>
       <td>
        <code>
         Lock_tables_priv
        </code>
       </td>
       <td>
        是否允许锁定表。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Execute_priv
        </code>
       </td>
       <td>
        是否允许执行存储过程或函数。
       </td>
       <td>
        <code>
         Repl_slave_priv
        </code>
       </td>
       <td>
        是否允许作为复制从服务器。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Repl_client_priv
        </code>
       </td>
       <td>
        是否允许查询主服务器或从服务器的状态。
       </td>
       <td>
        <code>
         Create_view_priv
        </code>
       </td>
       <td>
        是否允许创建视图。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Show_view_priv
        </code>
       </td>
       <td>
        是否允许查看视图定义。
       </td>
       <td>
        <code>
         Create_routine_priv
        </code>
       </td>
       <td>
        是否允许创建存储过程或函数。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Alter_routine_priv
        </code>
       </td>
       <td>
        是否允许修改或删除存储过程或函数。
       </td>
       <td>
        <code>
         Create_user_priv
        </code>
       </td>
       <td>
        是否允许创建用户。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Event_priv
        </code>
       </td>
       <td>
        是否允许创建、修改或删除事件。
       </td>
       <td>
        <code>
         Trigger_priv
        </code>
       </td>
       <td>
        是否允许创建或删除触发器。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Create_tablespace_priv
        </code>
       </td>
       <td>
        是否允许创建表空间。
       </td>
       <td>
        <code>
         Create_role_priv
        </code>
       </td>
       <td>
        是否允许创建角色。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Drop_role_priv
        </code>
       </td>
       <td>
        是否允许删除角色。
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <strong>
      （3）SSL/TLS相关字段
     </strong>
    </p>
    <p>
     主要用于加密连接。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         ssl_type
        </code>
       </td>
       <td>
        SSL连接类型（如
        <code>
         ANY
        </code>
        、
        <code>
         X509
        </code>
        、
        <code>
         SPECIFIED
        </code>
        ）。
       </td>
       <td>
        <code>
         ssl_cipher
        </code>
       </td>
       <td>
        使用的SSL加密算法。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         x509_issuer
        </code>
       </td>
       <td>
        X509证书的颁发者信息。
       </td>
       <td>
        <code>
         x509_subject
        </code>
       </td>
       <td>
        X509证书的主题信息。
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <strong>
      （4）资源限制相关字段
     </strong>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         max_questions
        </code>
       </td>
       <td>
        每小时允许的最大查询次数。
       </td>
       <td>
        <code>
         max_updates
        </code>
       </td>
       <td>
        每小时允许的最大更新次数。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         max_connections
        </code>
       </td>
       <td>
        每小时允许的最大连接次数。
       </td>
       <td>
        <code>
         max_user_connections
        </code>
       </td>
       <td>
        用户同时允许的最大连接数。
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <strong>
      （5）密码管理相关字段
     </strong>
    </p>
    <p>
     默认都是0，表示无限制。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         password_expired
        </code>
       </td>
       <td>
        密码是否已过期（
        <code>
         Y
        </code>
        或
        <code>
         N
        </code>
        ）。
       </td>
       <td>
        <code>
         password_last_changed
        </code>
       </td>
       <td>
        密码最后一次修改的时间。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         password_lifetime
        </code>
       </td>
       <td>
        密码的有效期（天数）。
       </td>
       <td>
        <code>
         Password_reuse_history
        </code>
       </td>
       <td>
        密码重用前需要更改的次数。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Password_reuse_time
        </code>
       </td>
       <td>
        密码重用前需要等待的天数。
       </td>
       <td>
        <code>
         Password_require_current
        </code>
       </td>
       <td>
        修改密码时是否需要提供当前密码（
        <code>
         Y
        </code>
        或
        <code>
         N
        </code>
        ）。
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <strong>
      （6）其他字段
     </strong>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
       <th>
        <strong>
         字段名
        </strong>
       </th>
       <th>
        <strong>
         含义
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         account_locked
        </code>
       </td>
       <td>
        账户是否被锁定（
        <code>
         Y
        </code>
        或
        <code>
         N
        </code>
        ）。
       </td>
       <td>
        <code>
         User_attributes
        </code>
       </td>
       <td>
        用户的附加属性（以JSON格式存储）。
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="112__125">
     </a>
     1.12 添加用户
    </h4>
    <blockquote>
     <p>
      <strong>
       执行添加、修改、删除用户等操作，你必须有相关权限才行，root用户有所有权限。权限是对mysql.user这张表的权限。有CREATE USER权限可以创建用户；有UPDATE和ALTER权限可以修改其它用户属性，以此类推。
      </strong>
     </p>
    </blockquote>
    <p>
     使用
     <code>
      CREATE USER
     </code>
     语句创建新用户：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'username'</span><span class="token variable">@'host'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'password'</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      username：用户名。
     </li>
     <li>
      host：允许连接的主机（如 localhost 或 % 表示所有主机）。
     </li>
     <li>
      password：你的用户密码。
     </li>
    </ul>
    <p>
     创建无密码用户：危，不要这么做
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'newuser'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     无密码用户，设置密码：
    </p>
    <pre><code class="prism language-bash">ALTER <span class="token environment constant">USER</span> <span class="token string">'newuser'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'your_password'</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="113__150">
     </a>
     1.13 修改用户权限
    </h4>
    <p>
     <strong>
      权限：
     </strong>
     即前面讲的51个字段中的权限相关字段，不要
     <code>
      _priv
     </code>
     （privilege）后缀，不要下划线，全大写。
    </p>
    <p>
     如：
    </p>
    <ul>
     <li>
      列名
      <code>
       Select_priv
      </code>
      对应的权限就是：
      <code>
       SELECT
      </code>
      ；
     </li>
     <li>
      <code>
       Create_view_priv
      </code>
      就是
      <code>
       CREATE VIEW
      </code>
      。
     </li>
    </ul>
    <hr/>
    <p>
     🔹使用
     <code>
      GRANT
     </code>
     语句
     <strong>
      授予
     </strong>
     用户权限：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">GRANT</span> 权限列表 <span class="token keyword">ON</span> 数据库名<span class="token punctuation">.</span>表名 <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'主机名'</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      权限列表：可以是具体的权限（如 SELECT、INSERT、UPDATE 等，多个权限逗号分割），也可以是 ALL PRIVILEGES（表示所有权限）。
     </li>
     <li>
      数据库名.表名：指定权限作用的范围。可以使用
      <em>
       .
      </em>
      表示所有数据库和表，
      <code>
       数据库名.*
      </code>
      表示某个数据库的所有表。
     </li>
     <li>
      用户名@主机名：指定用户和允许连接的主机（如 ‘test_user’@‘localhost’）。
     </li>
    </ul>
    <p>
     例：
     <br/>
     授予用户 test_user 对所有数据库的查询权限：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'test_user'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     🔹使用
     <code>
      REVOKE
     </code>
     语句
     <strong>
      撤销
     </strong>
     权限：
    </p>
    <pre><code class="prism language-bash">REVOKE 权限列表 ON 数据库名.表名 FROM <span class="token string">'用户名'</span>@<span class="token string">'主机名'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     🟢修改权限后需要刷新权限以生效：
    </p>
    <pre><code class="prism language-sql">FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="114__188">
     </a>
     1.14 删除用户
    </h4>
    <p>
     使用
     <code>
      DROP USER
     </code>
     语句删除用户：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'username'</span><span class="token variable">@'host'</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="115__197">
     </a>
     1.15 密码问题
    </h4>
    <blockquote>
     <p>
      <strong>
       注意1.12节说的权限问题。
      </strong>
     </p>
    </blockquote>
    <p>
     🔹普通用户的密码：
    </p>
    <p>
     修改密码：没密码就设置，有秘密就是修改
    </p>
    <pre><code class="prism language-bash">ALTER <span class="token environment constant">USER</span> <span class="token string">'username'</span>@<span class="token string">'hostname'</span> IDENTIFIED BY <span class="token string">'newpassword'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     有密码的可以设置为空，即无密码：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'username'</span><span class="token variable">@'hostname'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     记得，修改密码后刷新权限（后面不再重复）：
    </p>
    <pre><code class="prism language-sql">FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <p>
     🔹 root 用户的密码 ：
    </p>
    <p>
     （1）修改：跟前面一样
    </p>
    <p>
     以root用户登录，然后修改即可
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'新密码'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     （2）
     <code>
      忘记密码
     </code>
     ： 这个才是常见情况
    </p>
    <p>
     先停止mysql服务：
    </p>
    <pre><code class="prism language-sql">sudo systemctl stop mysql
</code></pre>
    <p>
     使用
     <code>
      mysqladmin
     </code>
     工具修改密码：
    </p>
    <pre><code class="prism language-sql">mysqladmin <span class="token operator">-</span>u root <span class="token operator">-</span>p password <span class="token string">'新密码'</span>
</code></pre>
    <p>
     刷新后启动mysql：
    </p>
    <pre><code class="prism language-sqk">sudo systemctl start mysql
</code></pre>
    <blockquote>
     <p>
      或者以跳过权限验证的方式启动mysql（先关闭）：sudo mysqld_safe --skip-grant-tables &amp;
      <br/>
      登录root：mysql -u root
      <br/>
      改密码：ALTER USER ‘root’@‘localhost’ IDENTIFIED BY ‘new_password’;
      <br/>
      刷新：FLUSH PRIVILEGES;
      <br/>
      退出：EXIT;
      <br/>
      停止（停止的是以跳过权限检查方式启动的mysql）和重启：sudo systemctl stop mysql
      <br/>
      sudo systemctl start mysql
     </p>
    </blockquote>
    <hr/>
    <h2>
     <a id="MySQL__263">
     </a>
     二、MySQL 配置文件
    </h2>
    <h3>
     <a id="21__265">
     </a>
     2.1 配置文件位置
    </h3>
    <p>
     ☘️
     <strong>
      （1）Windows
     </strong>
    </p>
    <p>
     配置文件通常位于以下位置之一：
    </p>
    <pre><code class="prism language-bash">%basedir%<span class="token punctuation">\</span>my.ini
%datadir%<span class="token punctuation">\</span>my.ini
C:<span class="token punctuation">\</span>ProgramData<span class="token punctuation">\</span>MySQL<span class="token punctuation">\</span>MySQL Server X.Y<span class="token punctuation">\</span>my.ini（X.Y 是 MySQL 版本号）
</code></pre>
    <p>
     获取：basedir和datadir路径：
    </p>
    <p>
     登录mysql：此处 大写 -P 3360是我设置的mysql端口，默认是3306，如果是默认只值就不用指定这个参数。
    </p>
    <pre><code class="prism language-sql">mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p <span class="token operator">-</span>P <span class="token number">3360</span>
</code></pre>
    <p>
     执行语句：
    </p>
    <pre><code class="prism language-bash">SHOW VARIABLES LIKE <span class="token string">'basedir'</span><span class="token punctuation">;</span>
SHOW VARIABLES LIKE <span class="token string">'datadir'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c323ca2aa31c4811a3187a590edd3403.png" width="500"/>
    </p>
    <p>
     如，我的配置文件在datadir下面：使用
     <code>
      notepad++
     </code>
     、记事本、vscode等软件即可打开查看
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/32902ceab67b405e8017686fa94340b6.png" width="500"/>
    </p>
    <p>
     ☘️
     <strong>
      （2）Linux
     </strong>
    </p>
    <p>
     命令：
    </p>
    <pre><code class="prism language-bash">mysql <span class="token parameter variable">--help</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'my.cnf'</span>
</code></pre>
    <p>
     有3个位置的配置文件：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/308aeee669aa4912be8fcf42d9e325d0.png" width="500"/>
    </p>
    <ul>
     <li>
      <p>
       /etc/my.cnf：系统级别的全局配置文件，优先级最低。
      </p>
     </li>
     <li>
      <p>
       /etc/mysql/my.cnf：特定 MySQL 安装的配置文件，优先级中等。
      </p>
     </li>
     <li>
      <p>
       ~/.my.cnf：用户(Linux 用户)级别的配置文件，优先级最高。
      </p>
     </li>
    </ul>
    <hr/>
    <p>
     🤭前面的第二个配置文件：在
     <code>
      Debian/Ubuntu
     </code>
     系统中，通常采用
     <strong>
      分片式配置
     </strong>
     ，即将配置分散到多个文件中，方便管理和维护。主要包括：
    </p>
    <ul>
     <li>
      <code>
       /etc/mysql/my.cnf
      </code>
      ：主配置文件，通常会包含对其他配置文件的引用。
     </li>
     <li>
      <code>
       /etc/mysql/mysql.conf.d/
      </code>
      ：包含 MySQL 服务器的配置片段。
      <ul>
       <li>
        <code>
         mysqld.cnf
        </code>
        ：MySQL 服务器的主要配置。
       </li>
      </ul>
     </li>
     <li>
      <code>
       /etc/mysql/conf.d/
      </code>
      ：用户可以添加自定义配置片段。
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/281adc0cb8c24bf08d21bab205ab7b70.png">
      <br/>
      上图最下面的：
      <code>
       /etc/mysql/mysql.conf.d/mysqld.cnf
      </code>
      的作用
     </img>
    </p>
    <p>
     <code>
      mysqld.cnf
     </code>
     文件专门用于配置 MySQL 服务器（
     <code>
      mysqld
     </code>
     ）的行为。它通常包含以下内容：
    </p>
    <ul>
     <li>
      <strong>
       数据目录
      </strong>
      （
      <code>
       datadir
      </code>
      ）
     </li>
     <li>
      <strong>
       绑定地址
      </strong>
      （
      <code>
       bind-address
      </code>
      ）
     </li>
     <li>
      <strong>
       端口
      </strong>
      （
      <code>
       port
      </code>
      ）
     </li>
     <li>
      <strong>
       日志文件路径
      </strong>
      （如
      <code>
       log_error
      </code>
      ）
     </li>
     <li>
      <strong>
       字符集
      </strong>
      （如
      <code>
       character-set-server
      </code>
      ）
     </li>
     <li>
      <strong>
       其他性能相关配置
      </strong>
      （如
      <code>
       innodb_buffer_pool_size
      </code>
      ）
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="22__338">
     </a>
     2.2 配置文件结构
    </h3>
    <p>
     MySQL 配置文件是一个文本文件，采用
     <code>
      key = value
     </code>
     的格式。
    </p>
    <p>
     <strong>
      配置文件分为多个部分，每个部分用
      <code>
       [section]
      </code>
      标识。
     </strong>
    </p>
    <p>
     常见的部分包括：
    </p>
    <ul>
     <li>
      <strong>
       [mysqld]
      </strong>
      : MySQL 服务器的配置。
     </li>
     <li>
      <strong>
       [client]
      </strong>
      : 客户端工具的默认配置（如
      <code>
       mysql
      </code>
      、
      <code>
       mysqladmin
      </code>
      ）。
     </li>
     <li>
      <strong>
       [mysql]
      </strong>
      :
      <code>
       mysql
      </code>
      命令行客户端的配置。
     </li>
     <li>
      <strong>
       [mysqldump]
      </strong>
      :
      <code>
       mysqldump
      </code>
      工具的配置。
     </li>
     <li>
      <strong>
       [server]
      </strong>
      : 服务器相关的配置（较少使用）。
     </li>
    </ul>
    <p>
     示例：
    </p>
    <pre><code class="prism language-sql"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
datadir <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql
socket <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
port <span class="token operator">=</span> <span class="token number">3306</span>
<span class="token keyword">user</span> <span class="token operator">=</span> mysql
max_connections <span class="token operator">=</span> <span class="token number">200</span>
<span class="token keyword">character</span><span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">-</span>server <span class="token operator">=</span> utf8mb4
collation<span class="token operator">-</span>server <span class="token operator">=</span> utf8mb4_unicode_ci

<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
port <span class="token operator">=</span> <span class="token number">3306</span>
socket <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
<span class="token keyword">default</span><span class="token operator">-</span><span class="token keyword">character</span><span class="token operator">-</span><span class="token keyword">set</span> <span class="token operator">=</span> utf8mb4

<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
<span class="token keyword">default</span><span class="token operator">-</span><span class="token keyword">character</span><span class="token operator">-</span><span class="token keyword">set</span> <span class="token operator">=</span> utf8mb4
</code></pre>
    <h3>
     <a id="23__373">
     </a>
     2.3 常用配置参数
    </h3>
    <p>
     ☘️
     <strong>
      服务器配置 ([mysqld])
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        datadir
       </strong>
       : 数据目录，存储数据库文件的位置。
      </p>
      <pre><code class="prism language-ini">datadir = /var/lib/mysql
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        port
       </strong>
       : MySQL 服务器监听的端口号，默认是
       <code>
        3306
       </code>
       ，你修改了这个，连接数据库的时候就要 -P 参数指定端口；或者在[client]里面吧端口也设置为相同的（指的是你用来连接的电脑的配置文件里面的[client]）。
      </p>
      <pre><code class="prism language-ini">port = 3306
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        bind-address
       </strong>
       : 服务器绑定的 IP 地址。
       <code>
        0.0.0.0
       </code>
       表示监听所有网络接口。如果只允许几个ip，用逗号隔开。
      </p>
      <pre><code class="prism language-ini">bind-address = 0.0.0.0
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        max_connections
       </strong>
       : 最大连接数。
      </p>
      <pre><code class="prism language-ini">max_connections = 200
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        character-set-server
       </strong>
       : 服务器默认字符集。
      </p>
      <pre><code class="prism language-ini">character-set-server = utf8mb4
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        collation-server
       </strong>
       : 服务器默认排序规则。
      </p>
      <pre><code class="prism language-ini">collation-server = utf8mb4_unicode_ci
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        innodb_buffer_pool_size
       </strong>
       : InnoDB 缓冲池大小，建议设置为系统内存的 50%-70%。
      </p>
      <pre><code class="prism language-ini">innodb_buffer_pool_size = 1G
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        log_error
       </strong>
       : 错误日志文件路径。
      </p>
      <pre><code class="prism language-ini">log_error = /var/log/mysql/error.log
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        slow_query_log
       </strong>
       : 是否启用慢查询日志。
      </p>
      <pre><code class="prism language-ini">slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2
</code></pre>
     </li>
    </ul>
    <hr/>
    <p>
     ☘️
     <strong>
      客户端配置 ([client])
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        port
       </strong>
       : 客户端连接时使用的默认端口。
      </p>
      <pre><code class="prism language-ini">port = 3306
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        socket
       </strong>
       : 客户端连接时使用的 Unix 套接字文件路径。
      </p>
      <pre><code class="prism language-ini">socket = /var/lib/mysql/mysql.sock
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        default-character-set
       </strong>
       : 客户端默认字符集。
      </p>
      <pre><code class="prism language-ini">default-character-set = utf8mb4
</code></pre>
     </li>
    </ul>
    <p>
     ☘️
     <strong>
      备份配置 ([mysqldump])
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        max_allowed_packet
       </strong>
       : 备份时允许的最大数据包大小。
      </p>
      <pre><code class="prism language-ini">max_allowed_packet = 64M
</code></pre>
     </li>
    </ul>
    <p>
     🟢修改配置文件后，需要重启 MySQL 服务以使更改生效：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl restart mysql
</code></pre>
    <p>
     如果配置文件有语法错误，MySQL 可能无法启动。可以通过以下命令检查配置文件的正确性：
    </p>
    <pre><code class="prism language-bash">mysqld --validate-config
</code></pre>
    <p>
     某些参数可以在 MySQL 运行时动态调整，无需重启服务，仅限此次运行期间有效例如：
    </p>
    <pre><code class="prism language-bash">SET GLOBAL max_connections <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h2>
     <a id="MySQL_485">
     </a>
     三、MySQL远程连接
    </h2>
    <p>
     现在其实没啥好讲的了。
    </p>
    <ol>
     <li>
      用户的Host要允许远程，如 %，而不是localhost；
     </li>
     <li>
      配置文件里面的
      <code>
       ：bind-address = 0.0.0.0
      </code>
     </li>
     <li>
      服务器放行mysql使用的端口。
     </li>
    </ol>
    <p>
     本系列的第二篇文章也有讲解。
    </p>
    <h2>
     <a id="_497">
     </a>
     四、数据库的查看、创建、删除
    </h2>
    <h3>
     <a id="41__499">
     </a>
     4.1 查看数据库
    </h3>
    <p>
     MySQL数据库连接成功之后，就可以使用SQL语句来查看当前所有存在的数据库，显示的一些默认的数据库是在 MySQL安装完成之后，在其目录 data 自动创建的几个必要的数据库，输入SQL语句如下：
    </p>
    <pre><code class="prism language-mysql"> SHOW DATABASES;
</code></pre>
    <p>
     输出：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7b472a10e52b461fadcad6c98c4e6ee9.png" width="200"/>
    </p>
    <p>
     这个命令起到一些小作用，可以帮助你查看创建的数据库是否创建成功，选择你创建的数据库等操作。
    </p>
    <p>
     当然使用Navicat等软件直接就看到数据库了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/aad98f24b34a4362b5278ea73099d035.png" width="300"/>
    </p>
    <p>
     这些数据库我在第二篇讲过了：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/08d445e1f2824f0db61df618e84961f3.png" width="800">
      <br/>
      切换到目标数据库：
     </img>
    </p>
    <pre><code class="prism language-bash">USE 数据库名<span class="token punctuation">;</span>
</code></pre>
    <p>
     查看当前数据库的表：
    </p>
    <pre><code class="prism language-bash">SHOW TABLES<span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <p>
     🟢使用
     <code>
      SHOW TABLE STATUS
     </code>
     查看数据库中所有表的摘要信息：
    </p>
    <pre><code class="prism language-bash">SHOW TABLE STATUS FROM 数据库名<span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/89955d8d3a3846b1bd89922228f4cc8b.png" width="700"/>
    </p>
    <h3>
     <a id="42__537">
     </a>
     4.2 创建、删除数据库
    </h3>
    <p>
     创建：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> test<span class="token punctuation">;</span>
</code></pre>
    <p>
     删除：
    </p>
    <pre><code class="prism language-bash">DROP DATABASE <span class="token builtin class-name">test</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     创建或删除前可以先判断是否存在：
    </p>
    <pre><code class="prism language-bash">CREATE DATABASE <span class="token keyword">if</span> not  exists <span class="token builtin class-name">test</span><span class="token punctuation">;</span>
DROP DATABASE IF EXISTS <span class="token builtin class-name">test</span><span class="token punctuation">;</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333736343937342f:61727469636c652f64657461696c732f313436313533333338" class_="artid" style="display:none">
 </p>
</div>


