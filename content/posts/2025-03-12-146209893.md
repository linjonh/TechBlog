---
layout: post
title: "解决ubuntujetpack系统下系统盘存储不够的"
date: 2025-03-12 17:13:54 +0800
description: "若仍有问题，可考虑扩展存储或迁移大文件到外置设备。此文件记录用户登录信息，"
keywords: "解决ubuntu（jetpack）系统下系统盘存储不够的"
categories: ['未分类']
tags: ['Linux']
artid: "146209893"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146209893
    alt: "解决ubuntujetpack系统下系统盘存储不够的"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146209893
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146209893
cover: https://bing.ee123.net/img/rand?artid=146209893
image: https://bing.ee123.net/img/rand?artid=146209893
img: https://bing.ee123.net/img/rand?artid=146209893
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     解决ubuntu（jetpack）系统下系统盘存储不够的
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     以下是可以安全清理的内容及操作步骤，按优先级和风险从低到高排序：
    </p>
    <hr/>
    <h4>
     <a id="1__4">
     </a>
     <strong>
      1. 清理日志文件（低风险）
     </strong>
    </h4>
    <h5>
     <a id="varlogsyslog_71G_5">
     </a>
     <strong>
      /var/log/syslog
     </strong>
     (7.1G)
    </h5>
    <pre><code class="prism language-bash"><span class="token comment"># 清空syslog文件（不删除文件本身）</span>
<span class="token function">sudo</span> truncate <span class="token parameter variable">-s</span> <span class="token number">0</span> /var/log/syslog

<span class="token comment"># 或限制syslog大小（编辑配置后重启）</span>
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/logrotate.d/rsyslog  <span class="token comment"># 修改 `size=100M` 等参数</span>
</code></pre>
    <h5>
     <a id="varloglastlog_166M_14">
     </a>
     <strong>
      /var/log/lastlog
     </strong>
     (166M)
    </h5>
    <p>
     此文件记录用户登录信息，
     <strong>
      不建议直接删除
     </strong>
     ，但可以压缩：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> /var/log/lastlog /var/log/lastlog.bak
<span class="token function">sudo</span> truncate <span class="token parameter variable">-s</span> <span class="token number">0</span> /var/log/lastlog
</code></pre>
    <h5>
     <a id="runlogjournal_128M_21">
     </a>
     <strong>
      /run/log/journal/
     </strong>
     下的128M日志文件
    </h5>
    <pre><code class="prism language-bash"><span class="token comment"># 清理旧的journal日志（保留最近7天）</span>
<span class="token function">sudo</span> journalctl --vacuum-time<span class="token operator">=</span>7d
</code></pre>
    <hr/>
    <h4>
     <a id="2_Snap_29">
     </a>
     <strong>
      2. 清理Snap缓存（低风险）
     </strong>
    </h4>
    <h5>
     <a id="varlibsnapdsnaps__varlibsnapdcache__30">
     </a>
     <strong>
      /var/lib/snapd/snaps/
     </strong>
     和
     <strong>
      /var/lib/snapd/cache/
     </strong>
     中的大文件
    </h5>
    <pre><code class="prism language-bash"><span class="token comment"># 删除旧版本snap包</span>
<span class="token function">sudo</span> snap list <span class="token parameter variable">--all</span> <span class="token operator">|</span> <span class="token function">grep</span> disabled <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1, $3}'</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> snap <span class="token function">rev</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">sudo</span> snap remove <span class="token variable">$snap</span> <span class="token parameter variable">--revision</span><span class="token operator">=</span><span class="token variable">$rev</span><span class="token punctuation">;</span> <span class="token keyword">done</span>

<span class="token comment"># 清理snap缓存</span>
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/snapd/cache/*
</code></pre>
    <hr/>
    <h4>
     <a id="3__41">
     </a>
     <strong>
      3. 清理用户缓存（低风险）
     </strong>
    </h4>
    <h5>
     <a id="VSCode_homexxxcachevscodecpptools_42">
     </a>
     <strong>
      VSCode缓存
     </strong>
     （路径
     <code>
      /home/xxx/.cache/vscode-cpptools/
     </code>
     ）
    </h5>
    <pre><code class="prism language-bash"><span class="token comment"># 删除所有IPCH缓存（VSCode会重新生成）</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> ~/.cache/vscode-cpptools/ipch/*
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> ~/.cache/vscode-cpptools/*.db
</code></pre>
    <h5>
     <a id="Minicondahomexxxminiconda3pkgs_49">
     </a>
     <strong>
      Miniconda缓存
     </strong>
     （
     <code>
      /home/xxx/miniconda3/pkgs/
     </code>
     ）
    </h5>
    <pre><code class="prism language-bash"><span class="token comment"># 清理conda包缓存（保留已安装包的依赖）</span>
conda clean <span class="token parameter variable">-p</span>    <span class="token comment"># 删除未使用的包</span>
conda clean <span class="token parameter variable">-a</span>    <span class="token comment"># 删除所有缓存（谨慎！）</span>
</code></pre>
    <hr/>
    <h4>
     <a id="4_CUDA_58">
     </a>
     <strong>
      4. 删除未使用的CUDA库（中风险）
     </strong>
    </h4>
    <h5>
     <a id="usrlocalcuda122__usrlibaarch64linuxgnu_a__59">
     </a>
     <strong>
      /usr/local/cuda-12.2/
     </strong>
     和
     <strong>
      /usr/lib/aarch64-linux-gnu/
     </strong>
     中的静态库（
     <code>
      .a
     </code>
     文件）
    </h5>
    <pre><code class="prism language-bash"><span class="token comment"># 删除静态库（动态库 `.so` 必须保留！）</span>
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> /usr/local/cuda-12.2/targets/aarch64-linux/lib/*.a
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> /usr/lib/aarch64-linux-gnu/libnvinfer_static.a
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> /usr/lib/aarch64-linux-gnu/libcudnn_*_static.a
</code></pre>
    <hr/>
    <h4>
     <a id="5__69">
     </a>
     <strong>
      5. 卸载未使用的软件（中风险）
     </strong>
    </h4>
    <h5>
     <a id="Chromium_Snap_70">
     </a>
     <strong>
      Chromium Snap包
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> snap remove chromium
</code></pre>
    <h5>
     <a id="Thunderbird_75">
     </a>
     <strong>
      Thunderbird邮件客户端
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> purge thunderbird
</code></pre>
    <h5>
     <a id="NVIDIA_NSight_Systems_80">
     </a>
     <strong>
      NVIDIA NSight Systems
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> purge nsight-systems
</code></pre>
    <hr/>
    <h4>
     <a id="6_Python_87">
     </a>
     <strong>
      6. 清理重复的Python环境（高风险）
     </strong>
    </h4>
    <h5>
     <a id="Minicondahomexxxminiconda3envs_88">
     </a>
     <strong>
      Miniconda环境
     </strong>
     （
     <code>
      /home/xxx/miniconda3/envs/
     </code>
     ）
    </h5>
    <pre><code class="prism language-bash"><span class="token comment"># 删除不再使用的虚拟环境</span>
conda <span class="token function">env</span> list
conda remove <span class="token parameter variable">--name</span> lane-det <span class="token parameter variable">--all</span>
</code></pre>
    <hr/>
    <h4>
     <a id="7__97">
     </a>
     <strong>
      7. 其他操作
     </strong>
    </h4>
    <h5>
     <a id="_98">
     </a>
     <strong>
      清理系统临时文件
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /tmp/*
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/tmp/*
</code></pre>
    <h5>
     <a id="_104">
     </a>
     <strong>
      检查磁盘空间
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">df</span> <span class="token parameter variable">-h</span>  <span class="token comment"># 查看整体空间</span>
<span class="token function">du</span> <span class="token parameter variable">-sh</span> /home/hud/*  <span class="token comment"># 检查用户目录</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_112">
     </a>
     <strong>
      注意事项
     </strong>
    </h4>
    <ol>
     <li>
      <strong>
       CUDA库清理
      </strong>
      ：确保只删除静态库（
      <code>
       .a
      </code>
      ），动态库（
      <code>
       .so
      </code>
      ）必须保留。
     </li>
     <li>
      <strong>
       Snap包管理
      </strong>
      ：优先使用
      <code>
       snap remove
      </code>
      而非直接删除文件。
     </li>
     <li>
      <strong>
       备份重要数据
      </strong>
      ：操作前建议备份关键配置文件（如
      <code>
       ~/.bashrc
      </code>
      ,
      <code>
       /etc/fstab
      </code>
      ）。
     </li>
     <li>
      <strong>
       重启验证
      </strong>
      ：清理后重启设备，检查关键服务是否正常。
     </li>
    </ol>
    <p>
     执行后预计可释放
     <strong>
      ~20GB以上
     </strong>
     空间。若仍有问题，可考虑扩展存储或迁移大文件到外置设备。
    </p>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33313633383533352f:61727469636c652f64657461696c732f313436323039383933" class_="artid" style="display:none">
 </p>
</div>


