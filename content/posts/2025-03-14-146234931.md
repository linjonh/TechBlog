---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36313632353338382f:61727469636c652f64657461696c732f313436323334393331"
layout: post
title: "11-Collectioné›†åˆMapé›†åˆåˆ†ç±»åŠŸèƒ½éå†åº•å±‚åŸç†,Streamæµè·å–ä¸­é—´æ–¹æ³•ç»ˆç»“æ–¹æ³•-é»‘é©¬Javaè§†é¢‘ç¬”è®°"
date: 2025-03-14 11:43:38 +0800
description: "Collectioné›†åˆã€Mapé›†åˆï¼šåˆ†ç±»ã€åŠŸèƒ½ã€éå†ã€åº•å±‚åŸç†ï¼ŒStreamæµï¼šè·å–ã€ä¸­é—´æ–¹æ³•ã€ç»ˆç»“æ–¹æ³• ï¼ˆé»‘é©¬Javaè§†é¢‘ç¬”è®°ï¼‰"
keywords: "11 Collectioné›†åˆã€Mapé›†åˆï¼šåˆ†ç±»ã€åŠŸèƒ½ã€éå†ã€åº•å±‚åŸç†ï¼ŒStreamæµï¼šè·å–ã€ä¸­é—´æ–¹æ³•ã€ç»ˆç»“æ–¹æ³• ï¼ˆé»‘é©¬Javaè§†é¢‘ç¬”è®°ï¼‰"
categories: ['æœªåˆ†ç±»']
tags: ['ç¬”è®°', 'Java', 'Idea']
artid: "146234931"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146234931
    alt: "11-Collectioné›†åˆMapé›†åˆåˆ†ç±»åŠŸèƒ½éå†åº•å±‚åŸç†,Streamæµè·å–ä¸­é—´æ–¹æ³•ç»ˆç»“æ–¹æ³•-é»‘é©¬Javaè§†é¢‘ç¬”è®°"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146234931
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146234931
cover: https://bing.ee123.net/img/rand?artid=146234931
image: https://bing.ee123.net/img/rand?artid=146234931
img: https://bing.ee123.net/img/rand?artid=146234931
---

# 11 Collectioné›†åˆã€Mapé›†åˆï¼šåˆ†ç±»ã€åŠŸèƒ½ã€éå†ã€åº•å±‚åŸç†ï¼ŒStreamæµï¼šè·å–ã€ä¸­é—´æ–¹æ³•ã€ç»ˆç»“æ–¹æ³• ï¼ˆé»‘é©¬Javaè§†é¢‘ç¬”è®°ï¼‰

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/ee0e0105e66d4ee7949ba1d846bfa059.png#pic_center)

### é›†åˆ

#### 1. è®¤è¯†é›†åˆ

ğŸ’¡å®¹å™¨ >> è£…æ•°æ®

ä½“ç³»ç»“æ„ï¼š

* **Collection å•åˆ—é›†åˆ**
  ï¼šæ¯ä¸ªå…ƒç´ ï¼ˆæ•°æ®ï¼‰åªåŒ…å«ä¸€ä¸ªå€¼
* **Map åŒåˆ—é›†åˆ**
  ï¼šæ¯ä¸ªå…ƒç´ åŒ…å«ä¸¤ä¸ªå€¼ï¼ˆé”®å€¼å¯¹ï¼‰

#### 2. Collectionå•åˆ—é›†åˆç‰¹ç‚¹

* **Listç³»åˆ—é›†åˆ**
  ï¼š
  + `ArrayList`
    ã€
    `LinekdList`
    ï¼šæ·»åŠ çš„å…ƒç´ æ˜¯
    **æœ‰åºã€å¯é‡å¤ã€æœ‰ç´¢å¼•**
* **Setç³»åˆ—é›†åˆ**
  ï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•
  + `HashSet`
    ï¼šæ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•
  + `LinkedHashSet`
    ï¼šæœ‰åºã€ä¸é‡å¤ã€æ— ç´¢å¼•
  + `TreeSet`
    ï¼šæŒ‰ç…§å¤§å°é»˜è®¤å‡åºæ’åºã€ä¸é‡å¤ã€æ— ç´¢å¼•

```java
public static void main(String[] args) {
    // ç›®æ ‡ï¼šææ¸…æ¥šCollectioné›†åˆçš„æ•´ä½“ç‰¹ç‚¹
    // 1ã€Listå®¶æ—çš„é›†åˆï¼šæœ‰åºã€å¯é‡å¤ã€æœ‰ç´¢å¼•
    List<String> list = new ArrayList<>();
    list.add("å¼ ä¸‰");
    list.add("æå››");
    list.add("ç‹äº”");
    System.out.println(list);   // [å¼ ä¸‰, æå››, ç‹äº”]
    System.out.println(list.get(0));    // å¼ ä¸‰

    // 2ã€Setå®¶æ—çš„é›†åˆï¼šæ— åºã€ä¸å¯é‡å¤ã€æ— ç´¢å¼•
    Set<String> set = new HashSet<>();
    set.add("å¼ ä¸‰");
    set.add("å¼ ä¸‰");
    set.add("æå››");
    set.add("ç‹äº”");
    System.out.println(set);    // [æå››, å¼ ä¸‰, ç‹äº”]
    System.out.println(set.contains("å¼ ä¸‰")); // true

}

```

#### 3. Collectionå•åˆ—é›†åˆçš„å¸¸ç”¨åŠŸèƒ½

* `Collection`
  ä½œä¸ºå•åˆ—é›†åˆçš„ç¥–å®—ï¼Œå®ƒè§„å®šçš„æ–¹æ³•ï¼ˆåŠŸèƒ½ï¼‰æ˜¯å…¨éƒ¨å•åˆ—é›†åˆéƒ½ä¼šç»§æ‰¿çš„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/10c876360aea44688eaa62b4abf5233f.png)

* `toArray`
  æ–¹æ³•çš„ä½¿ç”¨

```java
 public static void main(String[] args) {
        Collection<String> list = new ArrayList<>();
        list.add("å¼ ä¸‰");
        list.add("æå››");
        list.add("ç‹äº”");
        System.out.println(list);   // [å¼ ä¸‰, æå››, ç‹äº”]

        // æŠŠé›†åˆè½¬æ¢æˆæ•°ç»„ï¼štoArray() é»˜è®¤è½¬Objectæ•°ç»„
        Object[] arr = list.toArray();
        System.out.println(arr.getClass()); // class [Ljava.lang.Object;
        System.out.println(Arrays.toString(arr));   // [å¼ ä¸‰, æå››, ç‹äº”]

        // æŠŠé›†åˆè½¬æ¢æˆå­—ç¬¦ä¸²æ•°ç»„
        String[] arr2 = list.toArray(String[]::new);
     	// String[] arr2 = list.toArray(new String[0]);
/*      å®Œæ•´ä»£ç 
        String[] arr3 = list.toArray(new IntFunction<String[]>() {
            @Override
            public String[] apply(int value) {
                return new String[0];
            }
        });
*/
        System.out.println(arr2.getClass());    // class [Ljava.lang.String;
    }

```

â“ï¼šå…·ä½“è¯¢é—®aiç†è§£

#### 4. Collectionçš„éå†æ–¹å¼

##### 1ï¼‰è¿­ä»£å™¨éå† Iterator

* è¿­ä»£å™¨æ˜¯ç”¨æ¥éå†é›†åˆçš„ä¸“ç”¨æ–¹å¼ï¼ˆæ•°ç»„æ²¡æœ‰ï¼‰

â‘  å¾—åˆ°è¿™ä¸ªé›†åˆçš„è¿­ä»£å™¨å¯¹è±¡

â€‹ - åˆå§‹é»˜è®¤æŒ‡åœ¨ä¸‹æ ‡ä¸º0çš„ä½ç½®

â‘¡ ä½¿ç”¨ä¸€ä¸ª
`whileå¾ªç¯`
æ¥éå†

```java
// 1. è¿­ä»£å™¨éå†ï¼šIterator
Collection<String> list = new ArrayList<>();
list.add("å¼ ä¸‰");
list.add("æå››");
list.add("ç‹äº”");

// è·å–è¿­ä»£å™¨å¯¹è±¡
Iterator<String> it = list.iterator();
while(it.hasNext()){
    System.out.println(it.next());
}

```

##### 2ï¼‰å¢å¼ºforå¾ªç¯ï¼ˆforâ€¦eachéå†ï¼‰

* å³å¯ä»¥éå†æ•°ç»„ï¼Œä¹Ÿå¯ä»¥éå†é›†åˆ

  ```
  for (å…ƒç´ çš„æ•°æ®ç±»å‹ å˜é‡åï¼šæ•°ç»„æˆ–è€…é›†åˆ){ 
  }

  ```

```java
for (String s : list) {
    System.out.println(s);
}

```

##### 3ï¼‰Lambdaè¡¨è¾¾å¼ï¼šforEachï¼ˆï¼‰

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e2394a97ee534e9287db9492934525cd.png)

```java
// forEachæœ¬è´¨ä¸Šå°±æ˜¯forå¢å¼ºéå†
default void forEach(Consumer<? super T> action) {
    Objects.requireNonNull(action);
    for (T t : this) {
        action.accept(t);
    }
}

```

#### 5. ä¸‰ç§éå†æ–¹å¼çš„åŒºåˆ«

##### **5.1 å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜**

* å¦‚æœåœ¨
  **éå†é›†åˆçš„åŒæ—¶åˆå­˜åœ¨å¢åˆ é›†åˆå…ƒç´ çš„è¡Œä¸º**
  ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸šåŠ¡å¼‚å¸¸ï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¹‹ä¸ºå¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜

```java
// list = [å®å¤æ¸æ, æ¸æ, è¥¿æ´‹å‚, æ¸æå­, çº¢æ£]
// éœ€æ±‚1ï¼šåˆ é™¤å…¨éƒ¨æ¸æ
for(int i=0;i<list.size();i++){
    String name = list.get(i);
    System.out.println(name);    // åªæœ‰Listé›†åˆæ‰æœ‰ç´¢å¼•
    if(name.contains("æ¸æ"))
    {
        list.remove(i);
    }
}
System.out.println(list);       // [æ¸æ, è¥¿æ´‹å‚, çº¢æ£]

```

â“å¯ä»¥çœ‹åˆ°
`list`
é›†åˆä¸­æœ‰ä¸€ä¸ªé—æ¼çš„ï¼šè¿™æ˜¯å› ä¸ºåœ¨éå†åˆ°ä¸‹æ ‡ä¸º 0 çš„ â€ å®å¤æ¸æ â€œ æ—¶ï¼Œi = 0 ï¼Œæ­¤æ—¶ â€ æ¸æ â€œ ä¸‹æ ‡ä¸º 1ï¼Œif æ¡ä»¶è¯­å¥ä¸º true â†’ åˆ é™¤ä¸‹æ ‡ä¸º 0 çš„ â€ å®å¤æ¸æ â€œ ï¼Œâ€ æ¸æ â€ çš„ä¸‹æ ‡å˜ä¸º 0 ï¼Œâ€œ è¥¿æ´‹å‚ â€ çš„ä¸‹æ ‡å˜ä¸º 1 ï¼Œæ­¤æ—¶å¼€å§‹éå† i = 1 çš„å…ƒç´ ï¼Œä¸ä¼šéå†åˆ° â€œ æ¸æ â€ã€‚

é€šè¿‡éå†æ—¶è¾“å‡ºçš„ name ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå¹¶æ²¡æœ‰è¾“å‡º â€œ æ¸æ â€

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/fcef18c5da794403b6cf997b6b7444fd.png)

##### **5.2 ä¸€èˆ¬åº”å¯¹æ–¹æ¡ˆï¼š**

* åœ¨åˆ é™¤ä¹‹åè¿›è¡Œ
  `i--`
  ï¼ˆç¼–è¯‘å™¨ä¹Ÿä¼šç»™å‡ºè­¦å‘Šæç¤ºï¼‰

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/4dcb9eaf8194431285488e25ae7db823.png)

* å€’ç€éå†å¹¶åˆ é™¤\*\*ï¼ˆå‰æï¼šæ”¯æŒç´¢å¼•ï¼‰\*\*

```java
for(int i = list.size() - 1; i >= 0; i--){
    String name = list.get(i);
    System.out.println(name);
    if (name.contains("æ¸æ")) {
        list.remove(i);
    }
}

```

##### 5.3 â­æ–¹æ¡ˆä¸€ï¼šè¿­ä»£å™¨éå†å¹¶åˆ é™¤

ä½¿ç”¨è¿­ä»£å™¨æ¥åˆ é™¤ï¼Œè€Œä¸æ˜¯
`list`
é›†åˆåˆ é™¤ï¼ˆç”¨listé›†åˆåˆ é™¤è¿˜æ˜¯ä¼šå­˜åœ¨å¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼‰
  
è¿­ä»£å™¨å†…éƒ¨ä¼šè¿›è¡Œ
`i--`

```java
// è¿­ä»£å™¨éå†å¹¶åˆ é™¤
Iterator<String> it = list.iterator();

while(it.hasNext()){
    String name = it.next();
    System.out.println(name);
    if(name.contains("æ¸æ"))
    {
        it.remove();
    }
}
System.out.println(list);

```

âš ï¸å¦‚æœä½¿ç”¨è¿­ä»£å™¨éå†ï¼Œä½¿ç”¨é›†åˆæ–¹æ³•åˆ é™¤ >> æŠ¥é”™ï¼ï¼ï¼
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/34e03515389e4f17aec397a18dbc9375.png)
  
ğŸ¤”
**æŠ¥é”™åŸå› ï¼š
`modCount != expectedModCount`**
ï¼Œå¯ä»¥çœ‹åˆ°åå°
`modCount = 6ï¼ŒexpectedModCount = 5`
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/ba46a33e2e7345998dcf841f6c19368c.png)

###### ğŸ’¡ `modCount` å’Œ `expectedModCount` çš„ä½œç”¨

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/beb3c8ecc05f42adae5347bdd2d96b67.png)

##### 5.4 æ–¹æ¡ˆäºŒï¼šç”¨å¢å¼ºforå’ŒLambdaéƒ½æ²¡æœ‰åŠæ³•è§£å†³å¹¶å‘ä¿®æ”¹å¼‚å¸¸

* æ‹¿ä¸åˆ°è¿­ä»£å™¨
* åªé€‚åˆåšéå†ï¼Œä¸é€‚åˆåšéå†å¹¶ä¿®æ”¹æ“ä½œ

#### 6. Collection-Listé›†åˆï¼šæœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•

* `ArrayList`
  ï¼šæœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•
* `LinkedList`
  ï¼šæœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•

##### 1ï¼‰ LIsté›†åˆå› ä¸ºæ”¯æŒç´¢å¼•ï¼Œæ‰€ä»¥é™¤äº†ç»§æ‰¿äº†Collectionçš„åŠŸèƒ½å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šä¸ç´¢å¼•ç›¸å…³çš„æ–¹æ³•

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/53f4458aadfd46fcb58c5bfa3f007439.png)

```java
List<String> names = new ArrayList<>(); // å¤šæ€å¼•ç”¨

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/bab3b5e0902c42ecacb4b48f05a0dea7.png)

```java
List<String> names = new ArrayList<>();
// 1. æ·»åŠ å…ƒç´ ï¼šadd(E e)
names.add("å¼ ä¸‰");
names.add("æå››");
names.add("ç‹äº”");
System.out.println(names);

// æ ¹æ®ä¸‹æ ‡æ·»åŠ å…ƒç´ ï¼šadd(int index, E e)
names.add(1, "èµµå…­");
System.out.println(names);

// 2. è·å–å…ƒç´ ï¼šget(int index)
String name = names.get(1);
System.out.println(name);

// 3. ä¿®æ”¹å…ƒç´ ï¼šset(int index, E e)
names.set(1, "èµµå…­");
System.out.println(names);

// 4. åˆ é™¤å…ƒç´ ï¼šremove(int index)
names.remove(0);
System.out.println(names);

// 5. è·å–é•¿åº¦ï¼šsize()
int size = names.size();
System.out.println(size);

```

##### 2ï¼‰éå†æ–¹å¼

* forå¾ªç¯

```java
for (int i = 0; i < names.size(); i++) {
    String name2 = names.get(i);
    System.out.println(name2);
}

```

* è¿­ä»£å™¨

```java
Iterator<String> it = names.iterator();
while (it.hasNext()) {
    String name2 = it.next();
    System.out.println(name2);
}

```

* å¢å¼ºfor

```java
for (String name2 : names) {
    System.out.println(name2);
}

```

* lambdaè¡¨è¾¾å¼

```java
names.forEach(System.out::println);
 // System.out::println æ˜¯ä¸€ç§ å®ä¾‹æ–¹æ³•å¼•ç”¨ï¼Œå®ƒå¼•ç”¨äº† PrintStream ç±»çš„ println æ–¹æ³•ã€‚
// names.forEach(name2 -> System.out.println(name2));

```

##### 3ï¼‰ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼š

* `ArrayList`
  åŸºäº
  **æ•°ç»„**
  å­˜å‚¨æ•°æ®ï¼šè¿ç»­å­˜å‚¨åŒºåŸŸ -> æ ¹æ®
  **ç´¢å¼•æŸ¥è¯¢**
  æ•°æ®è¾ƒå¿«ï¼ŒæŸ¥è¯¢ä»»æ„æ•°æ®è€—æ—¶ä¸é“¾è¡¨æŸ¥è¯¢ç›¸åŒï¼›å¢åˆ æ•°æ®æ•ˆç‡ä½ï¼ˆæ‰©å®¹ã€è¿ç§»ç­‰ï¼‰
* `LinkedList`
  åŸºäº
  **åŒé“¾è¡¨**
  å­˜å‚¨æ•°æ®ï¼šæ•°æ®ç”±ç»“ç‚¹ç»„æˆï¼Œä¸€ä¸ªç»“ç‚¹åŒ…å«å½“å‰çš„æ•°æ®å€¼å’Œä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€ï¼ˆåŒé“¾è¡¨çš„ç»“ç‚¹åŒ…å«ä¸Šä¸€ä¸ªç»“ç‚¹åœ°å€å’Œä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€ï¼‰ï¼ŒæŸ¥è¯¢æ…¢ï¼ˆéœ€è¦ä»å¤´å¼€å§‹æ‰¾ï¼‰ï¼Œå¢åˆ ç›¸å¯¹å¿«ï¼ˆä¸ç”¨è¿ç§»å…¶ä»–æ•°æ®ï¼‰ï¼Œä½†å¯¹é¦–ä½å…ƒç´ è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„é€Ÿåº¦æ˜¯æå¿«çš„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e945fa278ed54386a16c7f3fb36cba6a.png)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/315073e9a7924583b7f5dca7c7c963a3.png)

##### 4ï¼‰LinkedList åº”ç”¨åœºæ™¯ï¼šåœ¨é¦–å°¾å¢åˆ å¿«

* è®¾è®¡
  **é˜Ÿåˆ—**
  ï¼šå…ˆè¿›å…ˆå‡ºï¼Œåè¿›åå‡º >>>
  **å°¾è¿›å¤´å‡º**
  + å…¥é˜Ÿï¼š
    `addLast`
  + å‡ºé˜Ÿï¼š
    `removeFirst`

```java
// ç›®æ ‡ï¼šç”¨LinkedListåšä¸€ä¸ªé˜Ÿåˆ—å¯¹è±¡
LinkedList<String> queue = new LinkedList<>();
// linkedlistç‹¬æœ‰åŠŸèƒ½ï¼Œç”¨listå¤šæ€å¼•ç”¨å¯èƒ½ä¼šä½¿ç”¨ä¸äº†
// å…¥é˜Ÿï¼šaddLast()ä»é˜Ÿå°¾å…¥é˜Ÿ
queue.addLast("å¼ ä¸‰");

// å‡ºé˜Ÿï¼šremoveFirst()ä»é˜Ÿé¦–å‡ºé˜Ÿ
String name = queue.removeFirst();

```

* è®¾è®¡
  **æ ˆ**
  ï¼šåè¿›å…ˆå‡ºï¼Œå…ˆè¿›åå‡º >>>
  **å¤´è¿›å¤´å‡º**
  + è¿›æ ˆï¼š
    `push`
  + å‡ºæ ˆï¼š
    `pop`

```java
// åšä¸€ä¸ªæ ˆ
LinkedList<String> stack = new LinkedList<>();
// å…¥æ ˆï¼šaddFirst()ä»é˜Ÿé¦–å…¥æ ˆ  push()
stack.addFirst("å¼ ä¸‰");
stack.push("æå››");

// å‡ºæ ˆï¼šremoveFirst()ä»é˜Ÿé¦–å‡ºæ ˆ  pop()
String name2 = stack.removeFirst();
System.out.println(name2);
String name3 = stack.pop();
System.out.println(name3);

```

#### 7. Collection-Setç³»åˆ—é›†åˆï¼šæ— åºï¼ˆæ·»åŠ é¡ºåºå’Œè·å–é¡ºåºä¸ä¸€è‡´ï¼‰ã€ä¸é‡å¤ã€æ— ç´¢å¼•

* `HashSet`
  ï¼šæ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•
* `LinkedHashSet`
  ï¼š
  **æœ‰åºï¼ˆå“ˆå¸Œè¡¨ï¼‰**
  ã€ä¸é‡å¤ã€æ— ç´¢å¼•
* `TreeSet`
  ï¼š
  **æ’åºï¼ˆçº¢é»‘æ ‘ï¼‰**
  ã€ä¸é‡å¤ã€æ— ç´¢å¼•

å…¶åŠŸèƒ½å°±æ˜¯
`Collection`
çš„åŠŸèƒ½ç»§æ‰¿è¿‡æ¥çš„ï¼Œå› ä¸ºæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰æ–°å¢çš„åŠŸèƒ½ã€‚

```java
// HashSetæ— åºä¸é‡å¤ã€æ— ç´¢å¼•
Set<String> set = new HashSet<>();
set.add("java");
set.add("java");
set.add("é¸¿è’™");
set.add("python");
set.add("æ–°åª’ä½“");
System.out.println(set);    // [python, java, é¸¿è’™, æ–°åª’ä½“]

// LinkedHashSetæœ‰åºä¸é‡å¤ã€æœ‰ç´¢å¼•
Set<String> set1 = new LinkedHashSet<>();
set1.add("java");
set1.add("java");
set1.add("é¸¿è’™");
set1.add("python");
set1.add("æ–°åª’ä½“");
System.out.println(set1);   // [java, é¸¿è’™, python, æ–°åª’ä½“]

// 2ã€åˆ›å»ºä¸€ä¸ªTreeSeté›†åˆï¼šæ’åºï¼ˆé»˜è®¤è¦å¤§å°å‡åºæ’åºï¼‰ã€ä¸é‡å¤ã€æ— ç´¢å¼•
Set<Double> set2 = new TreeSet<>();
set2.add(3.14);
set2.add(3.14);
set2.add(5.6);
set2.add(1.2);
System.out.println(set2);   // [1.2, 3.14, 5.6]

```

##### 7.1 HashSeté›†åˆçš„åº•å±‚åŸç†

[è¯¾ç¨‹é“¾æ¥](https://www.bilibili.com/video/BV1gb42177hm?spm_id_from=333.788.player.switch&vd_source=cf5602ef1b1b4cd7cf3874cffddc4eff&p=130)

###### 1ï¼‰å“ˆå¸Œå€¼

* ä¸€ä¸ªintç±»å‹çš„
  **éšæœºå€¼**
  ï¼Œjavaä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå“ˆå¸Œå€¼
* Javaä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œéƒ½å¯ä»¥è°ƒç”¨
  `Objectç±»`
  æä¾›çš„
  `hashCodeæ–¹æ³•`
  ï¼Œè¿”å›è¯¥å¯¹è±¡è‡ªå·±çš„å“ˆå¸Œå€¼
  + **public int hashCode()**

###### 2ï¼‰å¯¹è±¡å“ˆå¸Œå€¼çš„ç‰¹ç‚¹

* åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨
  `hashCodeï¼ˆï¼‰`
  æ–¹æ³•è¿”å›çš„å“ˆå¸Œå€¼æ˜¯ç›¸åŒçš„
* ä¸åŒçš„å¯¹è±¡ï¼Œä»–ä»¬çš„å“ˆå¸Œå€¼å¤§æ¦‚ç‡ä¸ç›¸ç­‰ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½ä¼šç›¸ç­‰ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰
  + int èŒƒå›´ (-21äº¿å¤š~21äº¿å¤š) vs åˆ›å»ºäº† 50äº¿ä¸ªå¯¹è±¡ >>> å°±ä¼šæœ‰é‡å¤çš„å“ˆå¸Œå€¼

###### 3ï¼‰åŸºäºå“ˆå¸Œè¡¨å­˜å‚¨æ•°æ® >>> æ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•

[å“ˆå¸Œè¡¨](https://blog.csdn.net/zy_dreamer/article/details/131036258)

###### å­˜å‚¨æ–¹å¼å˜åŒ–è¿‡ç¨‹ï¼šæ•°ç»„+é“¾è¡¨ >>> æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/576eefe49d30445a8d570d5bba1144bc.png)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e62c371b34554d078691914faf6f858a.png)

###### é»˜è®¤åŠ è½½å› å­

* æ•°æ®å¤ªå¤šæ—¶ï¼Œå“ˆå¸Œè¡¨ä¸­çš„é“¾è¡¨ä¼šå¾ˆé•¿ï¼Œè€Œé“¾è¡¨æŸ¥è¯¢æ•ˆç‡å¾ˆä½ï¼ˆéœ€è¦ä»å¤´å¼€å§‹æŸ¥æ‰¾ï¼‰ï¼Œæ‰€ä»¥åœ¨è¾¾åˆ°
  **åŠ è½½å› å­\*æ€»é•¿åº¦**
  ä¸ªå…ƒç´ æ—¶ï¼Œå¯¹å“ˆå¸Œè¡¨è¿›è¡Œæ‰©å®¹

###### 4ï¼‰çº¢é»‘æ ‘

[å…³äºé›†ä¸­æ’åºæ ‘çš„å…·ä½“å«ä¹‰](https://blog.csdn.net/qq_44918090/article/details/119966525)

å½“æ•°æ®å·²ç»æ’å¥½åºæ—¶ï¼Œä½¿ç”¨é“¾è¡¨å­˜å‚¨æ—¶çš„äºŒå‰æŸ¥æ‰¾æ ‘å°±ç›¸å½“äºä¸€ä¸ªå•é“¾è¡¨

â¬‡

å¹³è¡¡äºŒå‰æ ‘ï¼ˆå·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1ï¼‰

â¬‡

çº¢é»‘æ ‘ï¼ˆå¯ä»¥è‡ªå¹³è¡¡çš„äºŒå‰æ ‘ï¼‰

* å¢åˆ æ”¹æŸ¥æ•ˆç‡é«˜

###### 5ï¼‰ä¸ºä»€ä¹ˆæ€§èƒ½å¥½

æŸ¥/å­˜/æ”¹ï¼šåº•å±‚åŸºäºæ•°ç»„ï¼Œæ‹¿åˆ° hash å€¼åå°±èƒ½é€šè¿‡æ˜ å°„å…³ç³»ç®—å‡ºå…ƒç´ å­˜å‚¨çš„ä½ç½®

åˆ ï¼šæ‰¾åˆ°ä½ç½®åï¼Œç›´æ¥æŠ¹é™¤å³å¯ï¼Œä¸ç”¨è¿›è¡Œæ•°æ®è¿ç§»ç­‰æ“ä½œ

##### 7.2 â­HashSeté›†åˆå…ƒç´ çš„å»é‡æ“ä½œ -> è‡ªå®šä¹‰å¯¹è±¡

**éœ€æ±‚ï¼š**

* åˆ›å»ºä¸€ä¸ªå­˜å‚¨å­¦ç”Ÿå¯¹è±¡çš„é›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­¦ç”Ÿå¯¹è±¡

**è¦æ±‚ï¼š**

* å¤šä¸ªå­¦ç”Ÿå¯¹è±¡çš„æˆå‘˜å˜é‡å€¼ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¦æ±‚åªä¿ç•™ä¸€ä¸ª

**åˆ†æï¼š**

â‘  å®šä¹‰å­¦ç”Ÿç±»ã€åˆ›å»º
`HashSeté›†åˆ`
å¯¹è±¡ã€åˆ›å»ºå­¦ç”Ÿå¯¹è±¡

* å­¦ç”Ÿç±»

```java
public class Student {
    private String name;
    private int age;
    private int score;

    Student() {
    }

    Student(String name, int age, int score) {
        this.name = name;
        this.age = age;
        this.score = score;
    }

    @Override
    public String toString() {
        return "Student{" +
                "name='" + name + '\'' +
                ", age=" + age +
                ", score=" + score +
                '}'+ '\n';
    }
}

```

* åˆ›å»º
  `HashSeté›†åˆ`
  å¯¹è±¡ï¼Œå¹¶é€šè¿‡
  `Collectionså·¥å…·ç±»`
  æ‰¹é‡æ·»åŠ å­¦ç”Ÿæ•°æ®

```java
Student s1 = new Student("å°æ˜", 14, 90);
// ....

Set<Student> students = new HashSet<>();

// ä½¿ç”¨Collectionsé›†åˆå·¥å…·ç±»æ‰¹é‡æ·»åŠ æ•°æ®
Collections.addAll(students, s1, s2, s3, s4, s5);
System.out.println(students);

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/35bd75769b124a1ca4a4e0c9846b1199.png)

â‘¡åœ¨å­¦ç”Ÿç±»ä¸­
**é‡å†™ä¸¤ä¸ªæ–¹æ³• :
`hashCodeï¼ˆï¼‰å’Œequalsï¼ˆï¼‰`**
ï¼Œè‡ªåŠ¨ç”Ÿæˆå³å¯

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/eba705b55a454343909cd9532448df2d.png)

â‘¢ éå†é›†åˆï¼ˆå¢å¼ºforï¼‰

```java
for (Student student : students) {
    System.out.println(student);
}

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/4b35d01090884fc99060d8ee999b51cb.png)

###### æ€è€ƒğŸ¤”ğŸ¤”ğŸ¤”

* å¦‚æœåœ¨ç±»ä¸­ä½¿ç”¨äº† @Dataç­‰æ„é€ å™¨ï¼Œä¼šé»˜è®¤é‡å†™
  `hashCodeï¼ˆï¼‰`
  å’Œ
  `equalsï¼ˆï¼‰`
  æ–¹æ³•çš„
* ä¸ºä»€ä¹ˆè¿™äº›å¯¹è±¡åœ¨Seté›†åˆä¸­æ²¡æœ‰å»é‡ï¼Œéœ€è¦é‡å†™æ–¹æ³• ï¼Ÿ

  + åˆ›å»ºå¤šä¸ªå¯¹è±¡æ—¶ï¼Œè¿™å‡ ä¸ªå¯¹è±¡çš„
    `hashå€¼`
    æ˜¯ä¸åŒçš„ï¼ŒSetä¸ä¼šå¯¹å…¶è¿›è¡Œå»é‡
  + è¦ä½¿Seté›†åˆè®¤ä¸º2ä¸ªå†…å®¹ä¸€æ ·çš„å¯¹è±¡æ˜¯é‡å¤çš„ï¼Œå¿…é¡»é‡å†™å¯¹è±¡çš„
    `hashCode()`
    å’Œ
    `equals()`
    æ–¹æ³•

##### 7.3 LinkedHashSeté›†åˆçš„åº•å±‚åŸç†

* æœ‰åºã€ä¸é‡å¤ã€æ— ç´¢å¼•

åŸºäºå“ˆå¸Œè¡¨ï¼ˆæ•°ç»„ã€é“¾è¡¨ã€çº¢é»‘æ ‘ï¼‰å®ç°ï¼ŒåŸºäº
`LinkedHashMap`
ç¼–å†™çš„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d65fe4bc6c0c40d2ac45a3d9d4bd983d.png)

###### **æœ‰åº** â†’ æ¯ä¸ªå…ƒç´ éƒ½é¢å¤–çš„å¤šäº†ä¸€ä¸ª **åŒé“¾è¡¨** çš„æœºåˆ¶è®°å½•å®ƒå‰åå…ƒç´ çš„ä½ç½®

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/dbdf44d427324e8ca3e5f582a6d335fd.png)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d190cc8e767143f9a0425cf81a6f394b.png)

##### 7.4 TreeSeté›†åˆçš„åŸç†

åº•å±‚åŸºäºçº¢é»‘æ ‘å®ç°çš„æ’åº

* å¯¹äº
  **æ•°å€¼**
  ç±»å‹ï¼šä»å°åˆ°å¤§

```java
Set<Double> ts = new TreeSet<>();
Collections.addAll(ts, 3.14, 5.6, 1.2, 3.14);
System.out.println(ts);     // [1.2, 3.14, 5.6]

```

* å¯¹äº
  **å­—ç¬¦ä¸²**
  ç±»å‹ï¼šé¦–å­—ç¬¦çš„é¡ºåº

```java
Set<String> ts2 = new TreeSet<>();
Collections.addAll(ts2, "java", "c++", "python", "java");
System.out.println(ts2);    // [c++, java, python]

```

* **è‡ªå®šä¹‰ç±»å‹**
  ï¼šé»˜è®¤æ˜¯æ— æ³•æ’åºçš„ï¼Œä¸çŸ¥é“å¤§å°è§„åˆ™

  + å¯¹è±¡ç±»å®ç°
    `Comparableæ¯”è¾ƒæ¥å£`
    ï¼Œ
    **é‡å†™
    `CompareToæ–¹æ³•`**
    ï¼ŒæŒ‡å®šå¤§å°æ¯”è¾ƒè§„åˆ™

  ```java
  public class Student implements Comparable<Student>{
      private String name;
      private int age;
      private int score;

      @Override // é‡å†™compareToæ–¹æ³• ï¼šæŒ‰ç…§å¹´é¾„å‡åºæ’åº
      public int compareTo(Student o) {
          return this.age - o.age;
      }    
  }

  ```

  ```java
  Set<Student> ts3 = new TreeSet<>();

  Collections.addAll(ts3, new Student("å°æ˜", 18, 100),
          new Student("å°çº¢", 22, 99),
          new Student("å°åˆš", 20, 98),
          new Student("å°æ˜", 18, 100));
  System.out.println(ts3);

  ```

  + public TreeSet é›†åˆ
    **è‡ªå¸¦æ¯”è¾ƒå™¨
    `Comparatorå¯¹è±¡`
    ï¼ŒæŒ‡å®šæ¯”è¾ƒè§„åˆ™**

  ```java
  Set<Student> ts3 = new TreeSet<>(new Comparator<Student>() {
      @Override
      public int compare(Student o1, Student o2) {
          return o1.getAge() - o2.getAge();
      }
  });

  // ç®€åŒ–ï¼šSet<Student> ts3 = new TreeSet<>(Comparator.comparingInt(Student::getAge));

  ```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/a510345813864763bb82a38dbae6c906.png)

##### 7.5 ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆé›†åˆå‘¢ï¼Ÿ

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e2c57225ed974ed8906f1a8414c4fb9f.png)

#### 8. Mapé›†åˆï¼ˆé”®å€¼å¯¹é›†åˆï¼‰

```
{ key1 = value1 , key2 = value2....}

Map<K,V>

```

âš ï¸é”®ä¸é‡å¤ï¼Œå€¼å¯é‡å¤ï¼šä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼

**åœºæ™¯ï¼š**

* éœ€è¦å­˜å‚¨ä¸€ä¸€å¯¹åº”çš„æ•°æ®æ—¶

##### 8.1 Mapé›†åˆåˆ†ç±»

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/1e2fcac704644766aa091f0d8a962150.png)

```java
// HashMapæ— åºä¸é‡å¤ã€æ— ç´¢å¼•
Map<String,Integer> map =  new HashMap<>();
map.put("å«¦å¨¥",29);
map.put("ç´«éœ",31);
map.put("å¤ªç™½é‡‘æ˜Ÿ",33);
map.put("å¤ªç™½é‡‘æ˜Ÿ",33);
System.out.println(map);    // {å«¦å¨¥=29, å¤ªç™½é‡‘æ˜Ÿ=33, ç´«éœ=31}

// LinedHashMapæœ‰åºä¸é‡å¤ã€æ— ç´¢å¼•
Map<String,Integer> map2 =  new LinkedHashMap<>();
// Collectionsæ—¶Collectionçš„å·¥å…·ï¼Œä¸æ˜¯Mapçš„
map2.put("å«¦å¨¥",29);
map2.put("ç´«éœ",31);
map2.put("å¤ªç™½é‡‘æ˜Ÿ",33);
map2.put("å¤ªç™½é‡‘æ˜Ÿ",33);
System.out.println(map2);   // {å«¦å¨¥=29, ç´«éœ=31, å¤ªç™½é‡‘æ˜Ÿ=33}

// TreeMapï¼šæŒ‰ç…§é”®å¯æ’åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•
Map<String,Integer> map3 =  new TreeMap<>();
map3.put("å«¦å¨¥",29);
map3.put("ç´«éœ",31);
map3.put("å¤ªç™½é‡‘æ˜Ÿ",33);
System.out.println(map3);   // {å¤ªç™½é‡‘æ˜Ÿ=33, å«¦å¨¥=29, ç´«éœ=31}

```

##### 8.2 Mapé›†åˆçš„å¸¸ç”¨æ–¹æ³•

Mapæ˜¯åŒåˆ—é›†åˆçš„ç¥–å®—ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å…¨éƒ¨åŒåˆ—é›†åˆï¼ˆHashMap,LinkedHashMap,TreeMapï¼‰éƒ½å¯ä»¥ç»§æ‰¿çš„

![](https://i-blog.csdnimg.cn/direct/5e226ae4e0234d9796ce88b674c01aef.png)

```java
Map<String, Integer> map = new HashMap<>();
map.put("å«¦å¨¥",29);
map.put("ç´«éœ",31);
map.put("å¤ªç™½é‡‘æ˜Ÿ",33);
map.put("å¤ªç™½é‡‘æ˜Ÿ",33);
map.put(null,null);
System.out.println(map);    //{null=null, å«¦å¨¥=29, å¤ªç™½é‡‘æ˜Ÿ=33, ç´«éœ=31}

// get(key)ï¼šæ ¹æ®é”®è·å–å€¼
System.out.println(map.get("å«¦å¨¥"));  // 29
// getOrDefault(key, defaultValue)ï¼šæ ¹æ®é”®è·å–å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±è¿”å›é»˜è®¤å€¼
System.out.println(map.getOrDefault("ç™½éª¨ç²¾", 0)); // 0
// containsKey(key)ï¼šåˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰è¿™ä¸ªé”®
System.out.println(map.containsKey("å«¦å¨¥"));  // true
// containsValue(value)ï¼šåˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰è¿™ä¸ªå€¼
System.out.println(map.containsValue(33));  // true
// remove(key)ï¼šæ ¹æ®é”®åˆ é™¤é”®å€¼å¯¹
map.remove("å«¦å¨¥");
System.out.println(map);    // {null=null, å¤ªç™½é‡‘æ˜Ÿ=33, ç´«éœ=31}
// size()ï¼šè·å–é›†åˆé•¿åº¦
System.out.println(map.size()); // 3
// keySet()ï¼šè·å–æ‰€æœ‰çš„é”®
for (String key : map.keySet()) {
    System.out.println(key);    // null, å¤ªç™½é‡‘æ˜Ÿ, ç´«éœ
}
// values()ï¼šè·å–æ‰€æœ‰çš„å€¼
Collection<Integer> values = map.values();
System.out.println(values); // [null, 33, 31]
// clear()ï¼šæ¸…ç©ºé›†åˆ
map.clear();
System.out.println(map);    // {}
// isEmpty()ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º
System.out.println(map.isEmpty());  // true

```

##### 8.3 Mapé›†åˆçš„éå†æ–¹å¼

###### 1ï¼‰é”®æ‰¾å€¼

`keySet()`
æ–¹æ³•è·å–å…¨éƒ¨é”® >>>
`get()`
æ–¹æ³•é€šè¿‡éå†é”®æ‰¾å€¼

* æèµ·Mapé›†åˆçš„å…¨éƒ¨é”®åˆ°ä¸€ä¸ªSeté›†åˆä¸­
* éå†Seté›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªé”®
  + æ ¹æ®é”®å»æ‰¾å€¼

```java
Set<String> keys = map.keySet();	//è·å–å…¨éƒ¨é”®
for (String key : keys) {
    System.out.println(key + ":" + map.get(key));
}

```

###### 2ï¼‰é”®å€¼å¯¹

æŠŠ â€œ é”®å€¼å¯¹ â€ çœ‹æˆä¸€ä¸ªæ•´ä½“è¿›è¡Œéå†

ğŸ’¡Mapæä¾›çš„
`entrySet()`
æ–¹æ³• >>> å°†é”®å€¼å¯¹è½¬ä¸º
`Entryå¯¹è±¡`
ï¼Œå°†Mapè½¬ä¸ºSeté›†åˆ

![](https://i-blog.csdnimg.cn/direct/2cbd76119975412295c6b36c4a22c98c.png)

```java
// å°†Mapé›†åˆè½¬æ¢ä¸ºSeté›†åˆï¼ŒSeté›†åˆä¸­å­˜å‚¨çš„å…ƒç´ æ˜¯Map.Entryç±»å‹
Set<Map.Entry<String, Integer>> entries = map.entrySet();
for (Map.Entry<String, Integer> entry : entries) {
    System.out.println(entry.getKey() + ":" + entry.getValue());
}

```

###### 3ï¼‰Lambdaè¡¨è¾¾å¼

JDK 1.8 åçš„æ–°æŠ€æœ¯

![](https://i-blog.csdnimg.cn/direct/d6580f13ed3c43ba93d19e5411fa0a1f.png)

```java
map.forEach((key, value) -> {
    System.out.println(key + ":" + value);
});

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/f82c2a3aa3cc4c639e5e950f4ea69305.png)

æºç è§£æï¼šå†…éƒ¨é€šè¿‡å°†å…¶è½¬ä¸º
`entryå¯¹è±¡`
åéå†ï¼Œå†è½¬ä¸ºé”®å€¼å¯¹ä¼ ç»™é‡å†™çš„
`accept() æ–¹æ³•`

##### 8.4 Mapé›†åˆçš„å®ç°ç±»

###### 1ï¼‰HashMapé›†åˆçš„åº•å±‚åŸç†

7.1çš„
`Set`
é›†åˆçš„åº•å±‚æ˜¯åŸºäº
`Map`
å®ç°çš„ï¼Œåªæ˜¯Seté›†åˆä¸­çš„å…ƒç´ åªè¦é”®æ•°æ®ï¼Œä¸è¦å€¼æ•°æ®

###### 2ï¼‰LinkedHashMapçš„åº•å±‚åŸç†

`LinkedHashSet`
åº•å±‚åŸç†åŸºäº
`LinkedHashMap`
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/7daaa4a9a11544b0b3ccc94f59322d3a.png)

###### 3ï¼‰TreeMapçš„åº•å±‚åŸç†ï¼ŒåŒTreeSeté›†åˆ

* ç‰¹ç‚¹ï¼šä¸é‡å¤ã€æ— ç´¢å¼•ã€å¯æ’åºï¼ˆæŒ‰ç…§é”®çš„å¤§å°é»˜è®¤å‡åºæ’åºï¼Œåªèƒ½å¯¹é”®æ’åºï¼‰
* åŸç†ï¼š
  `TreeMap`
  è·Ÿ
  `TreeSet`
  é›†åˆçš„åº•å±‚åŸç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åŸºäºçº¢é»‘æ ‘å®ç°çš„æ’åº

**æ’åºæ–¹å¼**

* è®©ç±»å®ç°
  `Comparableæ¥å£`
  ï¼Œé‡å†™æ¯”è¾ƒè§„åˆ™ï¼ŒåŒTreeSet
* TreeMapé›†åˆæœ‰ä¸€ä¸ªæœ‰å‚æ•°æ„é€ å™¨ï¼Œæ”¯æŒæ„å»º
  `Comparatoræ¯”è¾ƒå™¨`
  å¯¹è±¡ï¼Œä»¥ä¾¿ç”¨æ¥æŒ‡å®šæ¯”è¾ƒè§„åˆ™

```java
// ä½¿ç”¨TreeMapçš„æ„é€ å™¨ä¼ å…¥æ¯”è¾ƒå™¨å¯¹è±¡,å¹¶ç®€åŒ–
// æŒ‰ç…§åˆ†æ•°å‡åº
Map<Student, String> studentMap = new TreeMap<>((o1, o2) -> o1.getScore() - o2.getScore());
//  Map<Student, String> studentMap = new TreeMap<>(Comparator.comparingInt(Student::getScore));

studentMap.put(new Student("å°æ˜", 18, 100), "åŒ—äº¬");
studentMap.put(new Student("å°çº¢", 19, 94), "ä¸Šæµ·");
studentMap.put(new Student("å°äº®", 22, 98), "å¹¿å·");
studentMap.put(new Student("å°ä¸½", 21, 95), "æ·±åœ³");
studentMap.put(new Student("å°å", 22, 96), "æ­¦æ±‰");
System.out.println(studentMap);

```

![](https://i-blog.csdnimg.cn/direct/71e47c4709ef4b13a41a84f199cfc7c4.png)

##### 8.5 Mapé›†åˆçš„æ¡ˆä¾‹-ç»Ÿè®¡æŠ•ç¥¨ä¿¡æ¯

**éœ€æ±‚**

* æŸä¸ªç­çº§80åå­¦ç”Ÿï¼Œç°åœ¨éœ€è¦ç»„ç»‡ç§‹æ¸¸æ´»åŠ¨ï¼Œç­é•¿æä¾›äº†å››ä¸ªæ™¯ç‚¹ä¾æ¬¡æ˜¯ï¼ˆAã€Bã€Cã€Dï¼‰ï¼Œæ¯ä¸ªå­¦ç”Ÿåªèƒ½é€‰æ‹©ä¸€ä¸ªæ™¯ç‚¹ï¼Œè¯·ç»Ÿè®¡å‡ºæœ€ç»ˆå“ªä¸ªæ™¯ç‚¹æƒ³å»çš„äººæ•°æœ€å¤š

**åˆ†æï¼š**

* å‡ºç°äº†ä¸€ ä¸€å¯¹åº”çš„æ•°æ® >>> é”®å€¼å¯¹å­˜å‚¨
* å°†80ä¸ªå­¦ç”Ÿé€‰æ‹©çš„æ•°æ®æ‹¿åˆ°ç¨‹åºä¸­å»
* å‡†å¤‡ä¸€ä¸ªMapé›†åˆç”¨äºå­˜å‚¨ç»Ÿè®¡çš„ç»“æœ
* éå†80ä¸ªå­¦ç”Ÿé€‰æ‹©çš„æ™¯ç‚¹ï¼Œæ¯éå†ä¸€ä¸ªæ™¯ç‚¹ï¼Œå°±çœ‹Mapé›†åˆä¸­æ˜¯å¦å­˜åœ¨è¯¥æ™¯ç‚¹ï¼Œä¸å­˜åœ¨å­˜å…¥"æ™¯ç‚¹ = 1"ï¼Œå­˜åœ¨åˆ™å…¶å¯¹åº”å€¼ + 1

```java
// å››ä¸ªæ™¯ç‚¹
String[] names = {"A", "B", "C", "D"};
// 80åå­¦ç”Ÿçš„æŠ•ç¥¨æ•°æ®ï¼šç”¨Listé›†åˆå­˜å‚¨
List<String> votes = new ArrayList<>();
Random r = new Random();
for (int i = 0; i < 80; i++) {
    int index = r.nextInt(names.length);    // éšæœºè·å–ç´¢å¼• 0 1 2 3
    votes.add(names[index]);
}

// æ•´ç†æŠ•ç¥¨ç»“æœï¼Œç”¨Mapé›†åˆå­˜å‚¨ç»Ÿè®¡ç»“æœ
Map<String,Integer> map = new HashMap<>();
for (String vote : votes) {
    if(map.containsKey(vote)){  // å¦‚æœMapé›†åˆä¸­åŒ…å«è¯¥æ™¯ç‚¹ï¼Œåˆ™å°†æŠ•ç¥¨äººæ•°åŠ 1
        map.put(vote, map.get(vote) + 1);
    }else{  // å¦‚æœMapé›†åˆä¸­ä¸åŒ…å«è¯¥æ™¯ç‚¹ï¼Œåˆ™å°†æŠ•ç¥¨äººæ•°è®¾ç½®ä¸º1
        map.put(vote, 1);
    }
}

```

* ç»Ÿè®¡æŠ•ç¥¨ç®€åŒ–ä»£ç 

```java
for (String vote : votes) {
//  map.put(vote, map.getOrDefault(vote, 0) + 1);
    map.put(vote, map.containsKey(vote) ? map.get(vote) + 1 : 1);
}

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/905e41b4c56f47949de448a2d7d72e7d.png)

---

### Streamæµ

ğŸ‘ç”¨äº
**æ“ä½œé›†åˆæˆ–è€…æ•°ç»„çš„æ•°æ®**

ğŸ’¡
**Streamæµå¤§é‡çš„ç»“åˆäº†
`Lambda`
çš„è¯­æ³•é£æ ¼æ¥ç¼–ç¨‹**
ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ€§èƒ½é«˜æ•ˆï¼Œ
**ä»£ç ç®€æ´ï¼Œå¯è¯»æ€§å¥½**

* å¤„ç†æ•°æ®çš„æ­¥éª¤

1ï¼‰å‡†å¤‡æ•°æ®æº

```java
List<String> list = new ArrayList<>();
Collections.addAll(list,"å¼ æ— å¿Œ","å‘¨èŠ·è‹¥","èµµæ•","å¼ å¼º","å¼ ä¸‰ä¸°");

```

2ï¼‰è·å–æ•°æ®æºçš„
`Streamæµ`

3ï¼‰è°ƒç”¨æµæ°´çº¿çš„å„ç§æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†

4ï¼‰è·å–å¤„ç†çš„ç»“æœ

```java
newList = list.stream()
        .filter(name -> name.startsWith("å¼ ")) // ä»¥â€œå¼ â€å¼€å¤´çš„ -> å§“å¼ çš„
        .filter(name -> name.length() == 3)		// åå­—æ˜¯ä¸‰ä¸ªå­—çš„
        .collect(Collectors.toList());		// æ”¶é›†æ–¹æ³•ï¼šå°†ç»“æœæµè½¬ä¸ºlisté›†åˆ

```

* å¯¹æ¯”ä¼ ç»Ÿæ–¹å¼

```java
List<String> newList = new ArrayList<>();
for (String name : list) {
    if (name.startsWith("å¼ ") && name.length() == 3) {
        newList.add(name);
    }
}
System.out.println(newList);

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/9a7a5e72e05b4256b93d8572c673a368.png)

#### 1. è·å–Streamæµ

* è·å–é›†åˆçš„Streamæµ

  + `Collection`
    æä¾›äº†è·å–å½“å‰é›†åˆå¯¹è±¡çš„
    `Streamæµ`
    çš„æ–¹æ³•

  ```java
  Collection<String> list = new ArrayList<>();
  Stream<String> s1 = list.stream();

  ```
* è·å–æ•°ç»„çš„Streamæµ

  + `Arraysç±»`
    æä¾›äº†è·å–å½“å‰æ•°ç»„çš„Streamæµçš„æ–¹æ³•

  ```java
  String[] arr = {"æ—é’éœ", "å¼ æ›¼ç‰", "ç‹ç¥–è“"};
  Stream<String> s5 = Arrays.stream(arr);
  System.out.println(s5.count());

  ```

  + `Streamç±»`
    æä¾›äº†è·å–å½“å‰æ¥æ”¶æ•°æ®çš„Streamæµçš„æ–¹æ³•

  ```java
  Stream<String> s6 = Stream.of(arr);
  Stream<String> s7 = Stream.of("æ—é’éœ", "å¼ æ›¼ç‰", "ç‹ç¥–è“");

  ```
* è·å–Mapé›†åˆçš„Streamæµ

  + è·å–é”®æµ

  ```java
  Stream<String> s2 = map.keySet().stream();

  ```

  + è·å–å€¼æµ

  ```java
   Stream<Integer> s3 = map.values().stream();

  ```

  + è·å–é”®å€¼æµï¼šå°†Mapé›†åˆè½¬ä¸ºSeté›†åˆï¼Œå†è·å–Streamæµ

  ```java
  Stream<Map.Entry<String, Integer>> s4 = map.entrySet().stream();

  ```

#### 2. å¸¸ç”¨ä¸­é—´æ–¹æ³•

ğŸ¤”ä½œä¸ºä¸­é—´æ–¹æ³•ï¼Œ
**è°ƒå®Œåä¼šè¿”å›æ–°æµ**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b0b0c7525fe14f0ba69b32e5bdb03625.png)

```java
ArrayList<Double> list = new ArrayList<>();
Collections.addAll(list, 1.2, 3.4, 5.6, 7.8, 9.0);
System.out.println(list);
// è¿‡æ»¤æ–¹æ³• filter()
list.stream()
        .filter(num -> num > 5)
        .forEach(System.out::println);
System.out.println("--------------------------------------------------");
// æ’åºæ–¹æ³• sorted() é»˜è®¤å‡åº  é™åºéœ€é‡å†™Comparatoræ¥å£çš„compareæ–¹æ³•
// ä»å¤§åˆ°å° ï¼š
Stream<Double> sorted1 =list.stream()
        .sorted((num1, num2) -> num2.compareTo(num1));
sorted1.forEach(System.out::println);
// ä»å°åˆ°å¤§
Stream<Double> sorted2 =list.stream()
        .sorted(Double::compareTo);  // è¿›ä¸€æ­¥ç®€åŒ–äº†çš„(num1, num2) -> num1.compareTo(num2) 
sorted2.forEach(System.out::println);
System.out.println("--------------------------------------------------");
// è·å–å‰å‡ ä¸ªå…ƒç´  limit()
list.stream()
        .limit(3)
        .forEach(System.out::println);
// è·³è¿‡å‰å‡ ä¸ªå…ƒç´  skip()
list.stream()
        .skip(3)
        .forEach(System.out::println);
System.out.println("--------------------------------------------------");
// å¯¹å…ƒç´ è¿›è¡ŒåŠ å·¥ï¼Œå¹¶è¿”å›å¯¹åº”çš„æ–°æµ map()
list.stream()
        .map(num -> num * 2)
        .forEach(System.out::println);
System.out.println("--------------------------------------------------");
// åˆå¹¶ä¸¤ä¸ªæµ concat()
Stream<Double> stream1 = list.stream();
Stream<Double> stream2 = Stream.of(1.2, 3.4, 5.6, 7.8, 9.0);
Stream<Double> stream3 = Stream.concat(stream1, stream2);
System.out.println(stream3.count());

```

#### 3. å¸¸ç”¨ç»ˆç»“æ–¹æ³•

ğŸ’¡
**ç»ˆç»“ï¼šä½¿ç”¨åä¸ä¼šè¿”å›æ–°çš„æµ**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/4e5b074d15f44041a11f2709e7ec651e.png)

##### 3.1 å¸¸ç”¨ç»ˆç»“æ–¹æ³•

åœ¨è·å–æœ€å¤§å€¼æ—¶ï¼Œè¿˜éœ€è¦é€šè¿‡
`get`
è·å–
`Optionalå¯¹è±¡`
ä¸­çš„å…ƒç´ 

```java
// 1ã€ç»Ÿè®¡æµä¸­å…ƒç´ çš„ä¸ªæ•°ï¼šcount()
ArrayList<Student> students = new ArrayList<>();
Collections.addAll(students, new Student("å¼ ä¸‰", 18, 100),
                             new Student("æå››", 22, 79),
                             new Student("ç‹äº”", 20, 80));
System.out.println(students.stream().count());  // 3
System.out.println("===========================================================");
// 2ã€è·å–æ­¤æµè¿ç®—åçš„æœ€å¤§å€¼å…ƒç´ ï¼šmax()
Optional<Student> max = students.stream().max((s1, s2) -> s1.getScore() - s2.getScore());
Student student = max.get();
System.out.println(student);    // Student{name='å¼ ä¸‰', age=18, score=100}

```

##### 3.2 æ”¶é›†Streamæµï¼š

æŠŠStreamæµæ“ä½œåçš„ç»“æœè½¬å›åˆ°é›†åˆæˆ–è€…æ•°ç»„ä¸­

âš ï¸æµåªèƒ½æ”¶é›†ä¸€æ¬¡

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b66fff9764834bc8b6af74b3cd02b0a1.png)

* `collect(Collector collector)`
  : æŠŠæµå¤„ç†åçš„ç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæŒ‡å®šçš„é›†åˆä¸­å»
  + `Collectors`
    åˆåˆ†ä¸º
    `toList()`
    ã€
    `toSet()`
    ã€
    `toMap()`

```java
ArrayList<String> names = new ArrayList<>();
Collections.addAll(names, "å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­", "å¼ æ— å¿Œ");
Stream<String> s1 = names.stream().filter(name -> name.startsWith("å¼ "));
// æ”¶é›†Streamæµåˆ°Seté›†åˆä¸­
Set<String> set = s1.collect(Collectors.toSet());
System.out.println(set);

// æ”¶é›†Streamæµåˆ°æ•°ç»„ä¸­
Stream<String> s2 = names.stream().filter(name -> name.startsWith("å¼ "));
Object[] arr = s2.toArray();	// æ³¨æ„è¿”å›ç±»å‹ä¸ºObject
System.out.println("æ•°ç»„ï¼š" + Arrays.toString(arr));

```

* `toArray()`
  æ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯
  `Object[]`
  , å› ä¸º
  `Stream`
  é»˜è®¤ä¸çŸ¥é“å…·ä½“çš„æ³›å‹ç±»å‹ï¼Œå› æ­¤åªèƒ½è¿”å›
  `Object[]`
* `Arrays.toString`
  å°†æ•°ç»„çš„å†…å®¹è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œä¾¿äºæ‰“å°å’Œè°ƒè¯•

```java
// æ”¶é›†åˆ°Mapé›†åˆä¸­
ArrayList<Student> students = new ArrayList<>();
Collections.addAll(students,
        new Student("å¼ ä¸‰", 18, 100),
        new Student("æå››", 22, 99),
        new Student("ç‹äº”", 20, 98),
        new Student("èµµå…­", 19, 97),
        new Student("å¼ æ— å¿Œ", 22, 96)
);

// ç®€åŒ–ï¼šMap<String,Integer> map = students.stream().collect(Collectors.toMap(Student::getName, Student::getAge));
Map<String, Integer> map = students.stream().collect(Collectors.toMap(new Function<Student, String>() {
          @Override
          public String apply(Student student) {
              return student.getName();
          }
      }, new Function<Student, Integer>() {
          @Override
          public Integer apply(Student student) {
              return student.getAge();
          }
      }
));

System.out.println(map);

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/64fedcdf062846b79b56212c4cb38ea1.png)