---
layout: post
title: "redisreids-客户端的连接Windows和mac"
date: 2025-03-16 09:29:46 +0800
description: "Redis服务器，在官网公开了使用的协议——RESP。任何一个第三方库都可以通过上述协议，来实现出一个和Redis服务器通信的客户端程序RedisJava生态中，封装了RESP协议，实现的Redis客户端是有很多的。我们这里使用的是jedis（这里提供的API和Redis命令高度一致）jedismaven</</</</"
keywords: "【redis】reids 客户端的连接（Windows和mac）"
categories: ['Redis']
tags: ['Windows', 'Redis', 'Macos']
artid: "146290813"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146290813
    alt: "redisreids-客户端的连接Windows和mac"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146290813
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146290813
cover: https://bing.ee123.net/img/rand?artid=146290813
image: https://bing.ee123.net/img/rand?artid=146290813
img: https://bing.ee123.net/img/rand?artid=146290813
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【redis】reids 客户端的连接（Windows和mac）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="Maven__2">
     </a>
     Maven 依赖
    </h2>
    <p>
     <code>
      Redis
     </code>
     服务器，在官网公开了使用的协议——
     <code>
      RESP
     </code>
     。任何一个第三方库都可以通过上述协议，来实现出一个和
     <code>
      Redis
     </code>
     服务器通信的客户端程序
    </p>
    <ul>
     <li>
      已经有很多大佬，做好了库，可以让我们直接调用，所以我们不必关注
      <code>
       Redis
      </code>
      协议的细节了
     </li>
    </ul>
    <p>
     <code>
      Java
     </code>
     生态中，封装了
     <code>
      RESP
     </code>
     协议，实现的
     <code>
      Redis
     </code>
     客户端是有很多的。我们这里使用的是
     <code>
      jedis
     </code>
     （这里提供的
     <code>
      API
     </code>
     和
     <code>
      Redis
     </code>
     命令高度一致）
    </p>
    <ul>
     <li>
      <code>
       jedis
      </code>
      可以通过
      <code>
       maven
      </code>
      下载
      <img alt="image.png" src="https://i-blog.csdnimg.cn/img_convert/7093b123ccf5379b83f2a9bab702d40a.png"/>
     </li>
    </ul>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h2>
     <a id="Windows__21">
     </a>
     Windows 环境下
    </h2>
    <p>
     <img alt="image.png" src="https://i-blog.csdnimg.cn/img_convert/d1a16601f623d57a4b2a353ef955e1a4.png"/>
    </p>
    <ul>
     <li>
      这样的操作，就需要通过云服务器的外网 IP 来访问到
      <code>
       Linux
      </code>
      服务器
     </li>
    </ul>
    <p>
     只修改外网 IP 还不够
    </p>
    <ul>
     <li>
      6397 端口，默认是被云服务器的
      <strong>
       防火墙给保护起来
      </strong>
      的（不能被外面访问）
      <ul>
       <li>
        防火墙保护起来了，别人进不去，我们自己也访问不了
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="_33">
     </a>
     端口处理
    </h3>
    <blockquote>
     <ul>
      <li>
       我们自己的电脑，好比小区里面的住宅楼，被
       <code>
        NAT
       </code>
       保护起来了。如果有人想偷东西，成本就非常高，先想办法进入小区，然后再想办法进入单元楼，再想办法进你家…
      </li>
      <li>
       云服务是有外网 IP 的，云服务器就相当于保留在大街上的门市房。有人想偷东西，成本就比较低了，只要想办法进你家就行
       <ul>
        <li>
         每给云服务器开放一个端口，就好比开放了一扇门。开的端口多了，门就多了，小偷进入的概率就更大了
        </li>
       </ul>
      </li>
     </ul>
    </blockquote>
    <p>
     直接在云服务器后台，把防火墙放开，不就行了吗？
    </p>
    <ul>
     <li>
      不行！！！（千万不要这么做）
     </li>
     <li>
      <code>
       Redis
      </code>
      的端口一旦公开到公网上，就特别容易被入侵（不出三天，就要被入侵）
     </li>
    </ul>
    <p>
     那要是我们给
     <code>
      Redis
     </code>
     换一个端口，是不是就安全了呢？
    </p>
    <ul>
     <li>
      掩耳盗铃，没用。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_50">
     </a>
     解决方法
    </h4>
    <p>
     现在不能开放
     <code>
      Redis
     </code>
     端口，但是我们又想要自己能通过外网访问，怎么办呢？
    </p>
    <ol>
     <li>
      让
      <code>
       Java
      </code>
      程序也在
      <code>
       Linux
      </code>
      上运行
     </li>
    </ol>
    <p>
     这就需要我们把自己的代码打成可执行的
     <code>
      jar
     </code>
     包，然后把
     <code>
      jar
     </code>
     包拷贝到
     <code>
      Linux
     </code>
     服务器上执行
    </p>
    <ol start="2">
     <li>
      配置
      <code>
       ssh
      </code>
      端口转发，把云服务器的
      <code>
       Redis
      </code>
      端口，映射到本地主机
     </li>
    </ol>
    <h5>
     <a id="_63">
     </a>
     端口转发
    </h5>
    <p>
     <img alt="image.png" src="https://i-blog.csdnimg.cn/img_convert/a37f06014984a8f8eb8bc577294895a1.png"/>
    </p>
    <p>
     <code>
      ssh
     </code>
     功能非常强大，其中很重要的特性，就是能够支持
     <strong>
      端口转发
     </strong>
     。相当于通过
     <code>
      ssh
     </code>
     的
     <code>
      22
     </code>
     端口，来传递其他端口的数据
    </p>
    <ul>
     <li>
      本身我们是需要通过
      <code>
       Windows
      </code>
      主机，访问云服务器的
      <code>
       6379
      </code>
      端口，于是就构造了一个特殊的
      <code>
       ssh
      </code>
      数据报，就把要访问
      <code>
       Redis
      </code>
      的请求，放到
      <code>
       ssh
      </code>
      数据报里
     </li>
    </ul>
    <hr/>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/5f62dd3de92ee9173dcc6d3675ddbaf8.png">
      <br/>
      这个数据就会通过
      <code>
       22
      </code>
      端口发给服务器，服务器的
      <code>
       ssh
      </code>
      服务器程序，就能够解析出上述的数据报，然后把数据报交给
      <code>
       6379
      </code>
      端口的程序（
      <code>
       ssh
      </code>
      起到了一个中介的效果）
     </img>
    </p>
    <p>
     一个
     <code>
      Linux
     </code>
     主机上，存在的服务器有很多，
     <code>
      ssh
     </code>
     也可能需要来给多个端口传递数据，这个时候，为了区分不同的端口，往往会把服务器的端口在本地用另外一个端口来进行表示
    </p>
    <p>
     <img alt="image.png" src="https://i-blog.csdnimg.cn/img_convert/5311ba33b9ea628eee19e5abb98cfb92.png"/>
    </p>
    <ul>
     <li>
      此时客户端的程序访问
      <code>
       127.0.0.1:8888
      </code>
      就相当于是访问
      <code>
       Linux
      </code>
      服务器的
      <code>
       6379
      </code>
      了
     </li>
     <li>
      访问本地端口，就相当于访问远程服务器上的端口
     </li>
    </ul>
    <hr/>
    <p>
     只需要进行简单的配置，后续就把云服务器的端口就当成一个本地的端口使用即可
    </p>
    <h2>
     <a id="mac__102">
     </a>
     mac 环境下
    </h2>
    <p>
     <img alt="image.png" src="https://i-blog.csdnimg.cn/img_convert/62f9e9cd740f56575d78b34512ab5f4d.png"/>
    </p>
    <ul>
     <li>
      此时客户端使用
      <code>
       127.0.0.1
      </code>
      这样的 IP 来连接
      <code>
       Redis
      </code>
      服务器即可
     </li>
    </ul>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Jedis</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">JedisPool</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisDemo</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token comment">// 连接到 Redis 服务器上  </span>
        <span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// 从 Redis 连接池中取一个连接出来  </span>
        <span class="token comment">// 连接用完之后要释放，此处的释放不一定是真的关闭 TCP 连接，而是将连接放回到池子里  </span>
        <span class="token comment">// 因为是在 try 后面的()里面进行取连接的，执行结束后会自动关闭  </span>
        <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
            <span class="token comment">// Redis 的各种命令，就对应到 Jedis 对象的各种方法  </span>
            <span class="token class-name">String</span> pong <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pong<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      这里的
      <code>
       URL
      </code>
      ，仅仅是当前开发阶段这么写，后续如果我们的程序要部署到云服务器，此时就得按照云服务器的事迹情况来写这里的 IP 和端口了
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f5965656561722f:61727469636c652f64657461696c732f313436323930383133" class_="artid" style="display:none">
 </p>
</div>


