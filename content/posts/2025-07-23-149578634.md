---
layout: post
title: "UniApp-X-ç½‘ç»œè¯·æ±‚é¿å‘æŒ‡å—ä»-JS-åˆ°-UTS-çš„-JSON-æ•°æ®å¤„ç†å…¨è§£æ"
date: 2025-07-23T18:19:29+0800
description: "æ‘˜è¦ï¼šUniAppXå¼€å‘ä¸­å¤„ç†JSONæ•°æ®æ—¶ï¼ŒUTSå¼ºç±»å‹ç‰¹æ€§è¦æ±‚å¼€å‘è€…æ”¹å˜JSä¹ æƒ¯ã€‚æœ¬æ–‡å¯¹æ¯”ä¸¤ç§ä¸»æµæ–¹æ¡ˆï¼š1ï¼‰UTSJSONObjecté€šè¿‡keypathè®¿é—®æ•°æ®ï¼Œå…¼å®¹JSä½†ç¼ºä¹ç±»å‹æç¤ºï¼›2ï¼‰type+æ³›å‹æ–¹æ¡ˆï¼Œé€šè¿‡å®šä¹‰æ•°æ®ç±»å‹å®ç°å¼ºç±»å‹æ ¡éªŒå’Œæ™ºèƒ½æç¤ºï¼Œæ¨èç”¨äºå›ºå®šæ•°æ®ç»“æ„ã€‚æ–‡ç« è¯¦ç»†æ¼”ç¤ºäº†ä¸¤ç§æ–¹å¼çš„å…·ä½“å®ç°ã€è½¬æ¢æ–¹æ³•åŠå®æˆ˜æ¡ˆä¾‹ï¼Œå¹¶æä¾›äº†ç±»å‹å®šä¹‰æŠ€å·§å’Œæ³¨æ„äº‹é¡¹ï¼Œå¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´ç¨³å®šé«˜æ•ˆçš„è·¨å¹³å°åº”ç”¨ã€‚"
keywords: "utsjsonobject"
categories: ['æœªåˆ†ç±»']
tags: ['å‰ç«¯', 'Vue', 'Uts', 'Uniappx', 'Uniapp', 'Javascript', 'App']
artid: "149578634"
arturl: "https://blog.csdn.net/2301_81518834/article/details/149578634"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=149578634
    alt: "UniApp-X-ç½‘ç»œè¯·æ±‚é¿å‘æŒ‡å—ä»-JS-åˆ°-UTS-çš„-JSON-æ•°æ®å¤„ç†å…¨è§£æ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=149578634
featuredImagePreview: https://bing.ee123.net/img/rand?artid=149578634
cover: https://bing.ee123.net/img/rand?artid=149578634
image: https://bing.ee123.net/img/rand?artid=149578634
img: https://bing.ee123.net/img/rand?artid=149578634
---



# UniApp X ç½‘ç»œè¯·æ±‚é¿å‘æŒ‡å—ï¼šä» JS åˆ° UTS çš„ JSON æ•°æ®å¤„ç†å…¨è§£æ



![](https://i-blog.csdnimg.cn/direct/faf21e4056dd4024bda4bacd98bc455d.png)

åœ¨ UniApp å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦é€šè¿‡Â `uni.request`Â è·å–æœåŠ¡å™¨è¿”å›çš„ JSON æ•°æ®ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°é¡µé¢æˆ–è¿›è¡Œé€»è¾‘å¤„ç†ã€‚

ä½†åœ¨Â **UniApp Xï¼ˆåŸºäº UTSï¼‰**Â ä¸­ï¼Œç”±äºå¼•å…¥äº†Â **å¼ºç±»å‹è¯­è¨€ç‰¹æ€§**ï¼Œå¤„ç† JSON æ•°æ®çš„æ–¹å¼ä¸ JS æœ‰æ˜æ˜¾ä¸åŒã€‚å¦‚æœä½ è¿˜åœç•™åœ¨ JS çš„å¼€å‘ä¹ æƒ¯ä¸­ï¼Œå¾ˆå®¹æ˜“è¸©å‘ã€‚

æœ¬æ–‡å°†å¸¦ä½ ä» JS çš„ JSON å¤„ç†æ–¹å¼å‡ºå‘ï¼Œé€æ­¥è¿‡æ¸¡åˆ° UTS çš„ä¸¤ç§ä¸»æµå¤„ç†æ–¹å¼ï¼š

1. âœ…Â **UTSJSONObjectï¼šå…¼å®¹ JS çš„çµæ´»æ–¹å¼**
2. âœ…Â **type + æ³›å‹ï¼šå¼ºç±»å‹æ¨èæ–¹æ¡ˆ**

---

### ğŸ§© ä¸€ã€JS ä¸­çš„ JSON å¤„ç†æ–¹å¼ï¼ˆå›é¡¾ï¼‰

åœ¨ JS ä¸­ï¼Œ`uni.request`Â è·å–çš„ JSON æ•°æ®å¯ä»¥ç›´æ¥ä½¿ç”¨Â `.å±æ€§å`Â çš„æ–¹å¼è®¿é—®ï¼š

```

uni.request({
  url: "https://example.com/api",
  success: (res) => {
    console.log(res.data.data[0].plugin_name);
  }
});

```

ä½†è¿™ç§æ–¹å¼åœ¨Â **UTS ä¸­ä¼šæŠ¥é”™**ï¼Œå› ä¸ºï¼š

> **UTS æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œres.data æ˜¯ any ç±»å‹ï¼Œä¸èƒ½å®‰å…¨è®¿é—®æœªå®šä¹‰çš„å±æ€§ã€‚**

---

### ğŸ› ï¸ äºŒã€UTS ä¸­å¤„ç† JSON çš„ä¸¤ç§æ–¹å¼

#### æ–¹å¼ä¸€ï¼šUTSJSONObjectï¼ˆå…¼å®¹ JS çš„çµæ´»æ–¹å¼ï¼‰

##### 1. åŸºæœ¬ç”¨æ³•ï¼šé€šè¿‡ä¸‹æ ‡è®¿é—®å±æ€§

```

uni.request({
  url: "https://example.com/api",
  success: (res) => {
    const data = res.data as UTSJSONObject;
    const pluginName = (data["data"] as UTSJSONObject[])[0]["plugin_name"];
    console.log(pluginName);
  }
});

```

##### 2. ä½¿ç”¨ keypath è®¿é—®æ·±å±‚å±æ€§ï¼ˆæ¨èï¼‰

UTSJSONObject æ”¯æŒ keypath å†™æ³•ï¼Œç©¿é€è®¿é—®åµŒå¥—å±æ€§ï¼š

```

const pluginName = data.getString("data[0].plugin_name");
console.log(pluginName); // è¾“å‡ºï¼šæ’ä»¶åç§°A

```

##### 3. å…¶ä»– keypath æ–¹æ³•

| æ–¹æ³•å | è¿”å›ç±»å‹ | è¯´æ˜ |
| --- | --- | --- |
| `getString(path: string)` | `string` | è·å–å­—ç¬¦ä¸² |
| `getNumber(path: string)` | `number` | è·å–æ•°å­— |
| `getBoolean(path: string)` | `boolean` | è·å–å¸ƒå°”å€¼ |
| `getJSON(path: string)` | `UTSJSONObject` | è·å–å¯¹è±¡ |
| `getArray(path: string)` | `UTSJSONObject[]` | è·å–æ•°ç»„ |
| `getAny(path: string)` | `any` | è·å–ä»»æ„ç±»å‹ |

> âš ï¸Â **ç¼ºç‚¹**ï¼šæ²¡æœ‰ç±»å‹æç¤ºã€éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»å‹è½¬æ¢ã€æ€§èƒ½ç•¥å·®ã€‚

---

#### æ–¹å¼äºŒï¼štype + æ³›å‹ï¼ˆå¼ºç±»å‹æ¨èæ–¹å¼ï¼‰

##### 1. å®šä¹‰æ•°æ®ç±»å‹ï¼ˆä½¿ç”¨ HBuilderX è‡ªåŠ¨ç”Ÿæˆï¼‰

å°†æœåŠ¡å™¨è¿”å›çš„ JSON æ•°æ®ç²˜è´´åˆ° HBuilderX çš„ JSON ç¼–è¾‘å™¨ä¸­ï¼Œå³é”®é€‰æ‹©Â **â€œè½¬ typeâ€**ï¼Œè‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰ã€‚

ä¾‹å¦‚æœåŠ¡å™¨è¿”å›å¦‚ä¸‹æ•°æ®ï¼š

```

{
  "code": 200,
  "desc": "",
  "data": [
    {
      "plugin_id": 123,
      "plugin_name": "æ’ä»¶åç§°A"
    }
  ]
}

```

ç”Ÿæˆçš„ç±»å‹ä¸ºï¼š

```

type Data = {
  plugin_id: number;
  plugin_name: string;
};

type IRootType = {
  code: number;
  desc: string;
  data: Data[];
};

```

##### 2. ä½¿ç”¨æ³›å‹è°ƒç”¨Â `uni.request`

```

uni.request<IRootType>({
  url: "https://example.com/api",
  success: (res) => {
    if (res.data && res.data.data.length > 0) {
      console.log(res.data.data[0].plugin_name); // ç›´æ¥ä½¿ç”¨ . æ“ä½œç¬¦
    }
  }
});

```

##### 3. æ³›å‹å†™æ³•è¯´æ˜

* âœ…Â **æ³›å‹å†™æ³•**ï¼š`uni.request<IRootType>(...)`ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨æœŸæœ›è¿”å›çš„æ•°æ®ç±»å‹ã€‚
* âœ…Â **æ•°ç»„ç±»å‹**ï¼šå¦‚æœÂ `res.data`Â æ˜¯æ•°ç»„ï¼Œåº”å†™ä¸ºÂ `uni.request<IRootType[]>(...)`
* âœ…Â **å®‰å…¨è®¿é—®**ï¼šä½¿ç”¨Â `?.`Â é˜²æ­¢ç©ºå€¼è®¿é—®é”™è¯¯ï¼Œå¦‚Â `res.data?.data`

---

### ğŸ§  ä¸‰ã€type ä¸æ³›å‹çš„å¸¸è§é—®é¢˜

#### 1. type è¦å†™åœ¨Â `export default`Â ä¹‹å‰

ä¸ºäº†åœ¨Â `data()`Â æˆ–Â `computed`Â ä¸­ä½¿ç”¨ç±»å‹å®šä¹‰ï¼Œå¿…é¡»æŠŠÂ `type`Â å†™åœ¨Â `export default`Â ä¹‹å‰ï¼š

```

type Data = {
  plugin_id: number;
  plugin_name: string;
};

export default {
  data() {
    return {
      dataList: [] as Data[]
    };
  }
};

```

#### 2. å±æ€§å¯èƒ½ç¼ºå¤±æ€ä¹ˆåŠï¼Ÿ

ä½¿ç”¨Â `?`Â è¡¨ç¤ºè¯¥å±æ€§å¯ä¸ºç©ºï¼š

```

type Data = {
  plugin_id: number;
  plugin_name?: string; // plugin_name å¯èƒ½ä¸å­˜åœ¨
  age: number | null; // age å¯ä¸º null
};

```

#### 3. æ³›å‹æ”¯æŒæƒ…å†µ

* âœ… å½“å‰ç‰ˆæœ¬æ”¯æŒä¼ å…¥Â `type`Â ä½œä¸ºæ³›å‹
* âŒ ä¸æ”¯æŒåŠ¨æ€æ³›å‹ï¼Œå¦‚å°†æ³›å‹ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’
* âœ… Web ç«¯ç›®å‰ä»…æ”¯æŒç±»å‹æ ¡éªŒï¼Œä¸æ”¯æŒå®ä¾‹åŒ–

---

### ğŸ“¦ å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šç½‘ç»œè¯·æ±‚ + æ•°æ®ç»‘å®š + åˆ†é¡µåŠ è½½

```

<template>
  <list-view style="flex: 1;" @scrolltolower="loadData">
    <template v-for="(item, index) in dataList" :key="index">
      <list-item style="flex-direction: row; padding: 10px;">
        <text>{{ item.plugin_name }}</text>
      </list-item>
    </template>
    <list-item v-if="loadingText">
      <text>{{ loadingText }}</text>
    </list-item>
  </list-view>
</template>

<script lang="uts">
  type Plugin = {
    plugin_id: number;
    plugin_name: string;
  };

  type ResponseType = {
    code: number;
    desc: string;
    data: Plugin[];
  };

  export default {
    data() {
      return {
        dataList: [] as Plugin[],
        loading: false,
        isEnded: false,
        currentPage: 1
      };
    },
    computed: {
      loadingText(): string {
        if (this.loading) return "åŠ è½½ä¸­...";
        if (this.isEnded) return "æ²¡æœ‰æ›´å¤šäº†";
        return "";
      }
    },
    onLoad() {
      this.loadData();
    },
    methods: {
      loadData() {
        if (this.loading || this.isEnded) return;
        this.loading = true;

        uni.request<ResponseType>({
          url: "https://example.com/api",
          data: {
            page: this.currentPage,
            pageSize: 10
          },
          success: (res) => {
            if (res.data?.data?.length) {
              this.dataList.push(...res.data.data);
              this.currentPage++;
            } else {
              this.isEnded = true;
            }
          },
          fail: (err) => {
            console.error("åŠ è½½å¤±è´¥", err);
          },
          complete: () => {
            this.loading = false;
          }
        });
      }
    }
  };
</script>

```

---

### ğŸ§ª äº”ã€UTS JSON å¤„ç†å¯¹æ¯”è¡¨

| ç‰¹æ€§ | UTSJSONObject | type + æ³›å‹ |
| --- | --- | --- |
| ç±»å‹æç¤º | âŒ æ—  | âœ… æœ‰ |
| ä»£ç å¯è¯»æ€§ | â¬‡ï¸ ç•¥å·® | âœ… å¥½ |
| ç±»å‹å®‰å…¨ | âŒ å¼± | âœ… å¼º |
| æ€§èƒ½è¡¨ç° | â¬‡ï¸ ç•¥å·® | âœ… å¥½ |
| ä½¿ç”¨éš¾åº¦ | âœ… ç®€å• | â¬‡ï¸ ç¨å¤æ‚ |
| é€‚ç”¨äººç¾¤ | åˆå­¦è€… | æœ‰ TS ç»éªŒè€… |
| æ¨èæŒ‡æ•° | â­â­â­ | â­â­â­â­â­ |

---

### ğŸ“Œ å…­ã€æ³¨æ„äº‹é¡¹

* âœ…Â `UTSJSONObject`Â é€‚ç”¨äºé”®ååŠ¨æ€æˆ–ç»“æ„ä¸ç¨³å®šçš„æ•°æ®
* âœ…Â `type + æ³›å‹`Â æ›´é€‚åˆç»“æ„å›ºå®šã€è¿½æ±‚ç±»å‹å®‰å…¨å’Œä»£ç æç¤ºçš„é¡¹ç›®
* âš ï¸Â `type`Â ä¸­å±æ€§åä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦å¦‚Â `:`ã€`-`ï¼Œå¦åˆ™éœ€æ‰‹åŠ¨å¤„ç†æˆ–æ”¹ç”¨Â `UTSJSONObject`
* âš ï¸ æ³›å‹ä¸æ”¯æŒåŠ¨æ€ä¼ å‚ï¼Œå°è£…Â `request`Â æ—¶å»ºè®®ä½¿ç”¨Â `UTSJSONObject`

---

### ğŸ§  æœ€åä¸€å¥è¯é€å¤§å®¶ï¼š

> **â€œä» JS åˆ° UTSï¼Œä¸æ˜¯è¯­æ³•çš„æ”¹å˜ï¼Œè€Œæ˜¯å¯¹æ•°æ®ç»“æ„ç†è§£çš„å‡åã€‚â€**  
> æŒæ¡å¥½ JSON æ•°æ®çš„å¤„ç†æ–¹å¼ï¼Œä½ å°±èƒ½åœ¨ UniApp X çš„ä¸–ç•Œé‡Œï¼Œå†™å‡ºæ›´ç¨³å®šã€æ›´é«˜æ•ˆã€æ›´è·¨å¹³å°çš„åº”ç”¨ï¼

---

å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è½¬å‘ç»™è¿˜åœ¨ä¸º UTS JSON é—®é¢˜å‘æ„çš„å°ä¼™ä¼´ï¼



