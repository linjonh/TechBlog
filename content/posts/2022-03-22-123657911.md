---
layout: post
title: "r语言-与python-r中python环境的创建"
date: 2022-03-22 12:58:56 +0800
description: "这篇博客介绍了如何在R中配置和利用conda环境安装及管理Python包，包括使用`reticula"
keywords: "r 语言 miniconda"
categories: ['未分类']
tags: ['R', 'Python']
artid: "123657911"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=123657911
  alt: "r语言-与python-r中python环境的创建"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=123657911
featuredImagePreview: https://bing.ee123.net/img/rand?artid=123657911
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     r语言 与python r中python环境的创建
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     #remotes::install_github(“rstudio/reticulate”)
     <br/>
     library(reticulate)
     <br/>
     use_condaenv(‘C:/Users/yll/AppData/Local/r-miniconda/envs/giotto_env/’)
    </p>
    <p>
     ‘’’
     <br/>
     conda_install(envname = “giotto_env” , packages=c(
     <br/>
     “pandas”, “python-igraph”, “networkx”, “python-louvain”, “leidenalg”, “scikit-learn”
     <br/>
     ), forge = TRUE, conda = “auto”, python_version = NULL)
    </p>
    <p>
     conda_install(envname = “giotto_env”,packages=“smfishHmrf”,
     <br/>
     forge = TRUE)
    </p>
    <p>
     conda_install(envname = “giotto_env”,packages=“dataclasses”,
     <br/>
     forge = TRUE)
     <br/>
     ‘’’
    </p>
    <p>
     Sys.setenv(RETICULATE_PYTHON = “C:/Users/yll/AppData/Local/r-miniconda/envs/giotto_env/python.exe”)
     <br/>
     library(reticulate)
     <br/>
     py_config()
    </p>
    <p>
     reticulate::py_config()
    </p>
    <p>
     #https://zhuanlan.zhihu.com/p/164507492
     <br/>
     #1、配置 Python 环境
     <br/>
     #有四种配置方式，具体查看官方教程
    </p>
    <h2>
     <a id="1Python_31">
     </a>
     1.直接指定Python执行程序
    </h2>
    <p>
     use_python()
    </p>
    <h2>
     <a id="2Python_conda_33">
     </a>
     2.指定Python conda环境
    </h2>
    <p>
     use_condaenv()
    </p>
    <h2>
     <a id="3Python_35">
     </a>
     3.指定Python虚拟环境
    </h2>
    <p>
     use_virtualenv()
    </p>
    <h2>
     <a id="4Python_miniconda_37">
     </a>
     4.指定Python miniconda环境
    </h2>
    <p>
     use_miniconda()
    </p>
    <h2>
     <a id="_40">
     </a>
     查看配置的环境
    </h2>
    <p>
     py_config()
    </p>
    <p>
     #miniconda 环境
     <br/>
     #如果不太懂如何配置 Python 环境，推荐一行代码安装 miniconda 环境，之后便可在 R 中执行 Python
    </p>
    <h2>
     <a id="miniconda_46">
     </a>
     安装miniconda环境
    </h2>
    <p>
     install_miniconda()
    </p>
    <h2>
     <a id="miniconda_49">
     </a>
     显示miniconda安装地址
    </h2>
    <p>
     miniconda_path()
    </p>
    <h2>
     <a id="miniconda_52">
     </a>
     更新miniconda环境
    </h2>
    <p>
     miniconda_update()
    </p>
    <p>
     #2、在 R 中调用 Python 模块
    </p>
    <h2>
     <a id="oslistdir_57">
     </a>
     调用os模块的listdir()函数
    </h2>
    <p>
     os &lt;- import(“os”)
     <br/>
     os$listdir("./")
    </p>
    <h2>
     <a id="seabornload_dataset_61">
     </a>
     调用seaborn模块的load_dataset()函数
    </h2>
    <h2>
     <a id="seaborn_62">
     </a>
     需要seaborn模块已安装
    </h2>
    <p>
     sns &lt;- import(“seaborn”)
     <br/>
     tips &lt;- sns$load_dataset(“tips”)
     <br/>
     print(head(tips))
    </p>
    <p>
     #在 R 中安装 python 模块
    </p>
    <h2>
     <a id="seaborn_69">
     </a>
     安装seaborn绘图库
    </h2>
    <h2>
     <a id="pip__Tpipconda_70">
     </a>
     pip = T指定从pip安装，默认从conda安装
    </h2>
    <p>
     py_install(“seaborn”, pip = T)
    </p>
    <h2>
     <a id="seaborn_73">
     </a>
     查看seaborn模块是否已安装
    </h2>
    <p>
     py_module_available(“seaborn”)
    </p>
    <p>
     #6、R 中运行 Python 代码片段
     <br/>
     py_run_string(“a = [1, 2, 3]; b = [2, 3, 4]; c = list(zip(a, b))”)
     <br/>
     a
    </p>
    <p>
     Sys.which(“python”)
     <br/>
     Sys.getenv()
     <br/>
     reticulate::use_condaenv(giotto_env)
     <br/>
     use_condaenv(“C:/Users/yll/AppData/Local/r-miniconda/envs/giotto_env”)
    </p>
    <p>
     reticulate::import(“leidenalg”)
     <br/>
     reticulate::import(“pillow”)
    </p>
    <p>
     reticulate::import(“pandas”)
    </p>
    <p>
     py_config()#安装的python版本环境查看，显示anaconda和numpy的详细信息。
     <br/>
     py_available()#[1] TRUE #检查您的系统是否安装过Python
     <br/>
     py_module_available(“leidenalg”)#检查“pandas”是否安装
    </p>
    <p>
     #查看python路径
     <br/>
     Sys.which(“python”)
     <br/>
     #“D:\ProgramData\Anaconda21\python.exe”
     <br/>
     ##这里我使用的conda，所以指定conda中的python
    </p>
    <p>
     #查看模块是否安装成功
     <br/>
     py_module_available(c(“pandas”,“leidenalg”))
    </p>
    <p>
     #查看是否安装python
     <br/>
     py_available(“pandas”)
     <br/>
     py_available(“leidenalg”)
     <br/>
     #[1] TRUE
    </p>
    <p>
     ###########
     <br/>
     #################################33333
     <br/>
     #https://www.jianshu.com/p/06dbd8dcc198
     <br/>
     getwd()
     <br/>
     path=“G:/silicosis/sicosis/gitto/”
     <br/>
     setwd(path)
     <br/>
     #查看python路径
     <br/>
     Sys.which(“python”)
     <br/>
     #“D:\ProgramData\Anaconda21\python.exe”
     <br/>
     ##这里我使用的conda，所以指定conda中的python
     <br/>
     library(reticulate)
     <br/>
     #创建conda环境
     <br/>
     conda_create(envname=‘myr-reticulate’,conda = “auto”,packages = “python”)
     <br/>
     ##envname指定创建环境的名称，conda指定conda可执行文件的路径，packages指定要安装或删除的包名称
    </p>
    <p>
     use_condaenv(“myr-reticulate”)
     <br/>
     use_condaenv(‘C:/Users/yll/AppData/Local/r-miniconda/envs/giotto_env/’)
    </p>
    <p>
     conda_install(envname = “giotto_env” , packages=c(
     <br/>
     “pandas”, “python-igraph”, “networkx”, “python-louvain”, “leidenalg”, “scikit-learn”
     <br/>
     ), forge = TRUE, conda = “auto”, python_version = NULL)
    </p>
    <p>
     conda_install(envname = “giotto_env”,packages=“smfishHmrf”,
     <br/>
     forge = TRUE)
     <br/>
     conda_install(envname = “giotto_env”,packages=“dataclasses”,
     <br/>
     forge = TRUE)
     <br/>
     #指定python路径
     <br/>
     use_python(“C:\Users\yll\AppData\Local\r-miniconda\envs\myr-reticulate\python.exe”,
     <br/>
     required = T)
    </p>
    <p>
     #指定环境路径
     <br/>
     #use_virtualenv(“C:\Users\yll\AppData\Local\r-miniconda\envs\myr-reticulate\”,
    </p>
    <h2>
     <a id="required__T_150">
     </a>
     required = T)
    </h2>
    <p>
     #安装模块 使用python安装
     <br/>
     #py_install(“smfishHmrf”, envname = “myr-reticulate”, method=“auto”)
    </p>
    <p>
     conda_install(envname = “myr-reticulate” , packages=c(
     <br/>
     “pandas”, “python-igraph”, “networkx”, “python-louvain”, “leidenalg”, “scikit-learn”
     <br/>
     ), forge = TRUE, conda = “auto”, python_version = NULL)
    </p>
    <p>
     conda_install(envname = “myr-reticulate”,packages=“smfishHmrf”,
     <br/>
     forge = TRUE)
     <br/>
     ##使用conda安装，也可也使用pip参数指定pip安装，还可以指定python版本，conda环境名称，路径以及其他功能
    </p>
    <p>
     #查看模块是否安装成功
     <br/>
     py_module_available(“leidenalg”)
     <br/>
     py_module_available(“pillow”)
     <br/>
     ##返回T or F
     <br/>
     py_available(“pandas”)
     <br/>
     py_available(“leidenalg”)
     <br/>
     conda_list()
    </p>
    <p>
     use_condaenv(“myr-reticulate”)
    </p>
    <p>
     package_version(“reticulate”)
     <br/>
     find.package(“reticulate”)
     <br/>
     sessionInfo(“reticulate”)
    </p>
    <p>
     ####查看r的版本
     <br/>
     r --version
     <br/>
     ####查看所有安装包的版本
     <br/>
     packinfo &lt;- installed.packages(fields = c(“Package”, “Version”))
     <br/>
     packinfo[,c(“Package”, “Version”)]
     <br/>
     ####查看r包本地的下载路径
     <br/>
     .libPaths()
    </p>
    <p>
     remotes::install_github(“rstudio/reticulate”)
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35323831333138352f:61727469636c652f64657461696c732f313233363537393131" class_="artid" style="display:none">
 </p>
</div>
