---
layout: post
title: "深入了解Text2SQL开源项目Chat2DBSQL-Chat-Wren-AI-Vanna"
date: 2024-12-12 14:20:33 +0800
description: "在数据驱动决策的时代，将自然语言查询转化为结构化查询语言（SQL"
keywords: "text2sql 开源"
categories: ['大模型Llm学习']
tags: ['开源', '人工智能', 'Text', 'Sql']
artid: "144395948"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=144395948
    alt: "深入了解Text2SQL开源项目Chat2DBSQL-Chat-Wren-AI-Vanna"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=144395948
featuredImagePreview: https://bing.ee123.net/img/rand?artid=144395948
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     深入了解Text2SQL开源项目（Chat2DB、SQL Chat 、Wren AI 、Vanna）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      深入了解Text2SQL开源项目（Chat2DB、SQL Chat 、Wren AI 、Vanna）
     </h4>
     <ul>
      <li>
       <a href="#_2" rel="nofollow">
        前言
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1Chat2DB_12" rel="nofollow">
          1.Chat2DB
         </a>
        </li>
        <li>
         <a href="#2SQL_Chat_50" rel="nofollow">
          2.SQL Chat
         </a>
        </li>
        <li>
         <a href="#3Wren_AI_74" rel="nofollow">
          3.Wren AI
         </a>
        </li>
        <li>
         <a href="#4Vanna_138" rel="nofollow">
          4.Vanna
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_2">
     </a>
     前言
    </h2>
    <p>
     在数据驱动决策的时代，将自然语言查询转化为结构化查询语言（SQL）的能力变得日益重要。无论是小型创业公司还是大型企业，都希望能够更轻松地从海量的数据中挖掘出有价值的见解。然而，对于那些不熟悉SQL或者数据库架构的用户来说，直接编写复杂的查询语句往往是一个巨大的挑战。正是为了解决这一问题，Text2SQL技术应运而生，它允许用户通过简单的自然语言描述来获取他们所需的数据库信息。
    </p>
    <p>
     近年来，随着人工智能和机器学习领域的迅速发展，Text2SQL技术也取得了显著的进步。多个开源项目如雨后春笋般涌现，它们致力于降低非技术人员与数据库交互的门槛，同时提高专业开发人员的工作效率。在这篇文章中，我们将深入探讨几个具有代表性的Text2SQL开源项目：Chat2DB、SQL Chat、Wren AI 和 Vanna。这些项目不仅展示了当前Text2SQL技术的最高水平，还预示了未来该领域可能的发展方向。
    </p>
    <p>
     在文章：
     <a href="https://blog.csdn.net/weixin_44733966/article/details/144349573?spm=1001.2014.3001.5501">
      Text2SQL（NL2sql）对话数据库：设计、实现细节与挑战
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44733966/article/details/144511974?spm=1001.2014.3001.5502">
      Text2SQL连接数据库的实践细节及示例代码
     </a>
    </p>
    <p>
     有更多的Text2SQL知识了解。
    </p>
    <h3>
     <a id="1Chat2DB_12">
     </a>
     1.Chat2DB
    </h3>
    <p>
     GitHub Star ：17.5k stars
     <br/>
     GitHub链接地址：
     <a href="https://github.com/CodePhiliaX/Chat2DB">
      https://github.com/CodePhiliaX/Chat2DB
     </a>
     <br/>
     可私有化部署。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4ed5cdc2d81948258276498c634a60c7.png"/>
    </p>
    <p>
     快速入门文档链接：
     <a href="https://chat2db-ai.com/resources/docs/start-guide/getting-started" rel="nofollow">
      https://chat2db-ai.com/resources/docs/start-guide/getting-started
     </a>
    </p>
    <p>
     <strong>
      功能:
     </strong>
    </p>
    <p>
     1.创建数据库连接
     <br/>
     数据库连接是使用Chat2DB的第一步，需要连接到你的数据库才能进行后续的操作。点击左侧的数据库连接，然后点击New connection，选择你使用的数据库，填写数据库连接信息，点击保存即可。
    </p>
    <p>
     2.创建 AI 数据集
     <br/>
     创建连接后，会有一个弹窗询问你是否需要设置 AI 数据集。设置 AI 数据集可以更好地帮助 AI 理解你的数据库表结构，生成更准确的答案。这也是 Chat2DB 的一大亮点。
    </p>
    <p>
     3.使用 Chat2DB 数据库开发
     <br/>
     连接成功后，可以双击连接或右键进入连接，然后可以在Chat2DB中进行数据库的增删改查操作，也可以使用AIGC能力，直接使用自然语言查询数据库，也可以使用SQL转自然语言。
    </p>
    <p>
     4.已支持的数据库：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a7d3aa061926415eaeb7f473a89f30e9.png"/>
    </p>
    <p>
     5.AI 生成报表
     <br/>
     AI自动生成报表系统能够根据用户的特定需求，自动从多个数据源中提取数据，并基于这些数据的特点和趋势生成高度定制化的报表。 这些报表不仅包含丰富的图表、表格以及汇总数据，还能够通过先进的分析算法提供深入的洞察，帮助用户更直观地理解数据背后的含义，从而支持高效决策。
    </p>
    <p>
     6.AI 对话
    </p>
    <ul>
     <li>
      AI建表
     </li>
     <li>
      AI 数据集
     </li>
     <li>
      AI SQL 优化
     </li>
     <li>
      AI SQL 转化
     </li>
     <li>
      RestAPI接口
     </li>
     <li>
      Excel 智能问答
     </li>
     <li>
      AI文本生成图表
     </li>
     <li>
      AI SQL 智能提示
     </li>
     <li>
      AI SQL 转自然语言
     </li>
     <li>
      AI 自然语言生成 SQL
     </li>
    </ul>
    <h3>
     <a id="2SQL_Chat_50">
     </a>
     2.SQL Chat
    </h3>
    <p>
     GitHub Star ：4.7k stars
     <br/>
     GitHub链接地址：
     <a href="https://github.com/sqlchat/sqlchat">
      https://github.com/sqlchat/sqlchat
     </a>
     <br/>
     支持本地部署
     <br/>
     SQL Chat 是一种基于聊天的 SQL 客户端，它使用自然语言与数据库通信，实现对数据库的查询、修改、添加和删除等操作。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0fae788bf5c047f4b8da218e4b477726.png">
      <br/>
      SQL Chat 是由 Next.js 构建的，它支持以下数据库，并将随着时间的推移支持更多:
     </img>
    </p>
    <ul>
     <li>
      MySQL
     </li>
     <li>
      PostgreSQL
     </li>
     <li>
      MSSQL
     </li>
     <li>
      TiDB Cloud
     </li>
    </ul>
    <p>
     <strong>
      功能：
     </strong>
    </p>
    <p>
     <strong>
      数据隐私保护
     </strong>
     ：所有数据库连接配置仅存储在本地浏览器中，用户可通过浏览器设置清除这些数据。确保了连接信息的安全性和隐私性。
     <br/>
     <strong>
      API交互限制
     </strong>
     ：仅有数据库模式信息被发送至OpenAI API，任何表数据均不上传，保障数据安全。
     <br/>
     <strong>
      数据库连接能力
     </strong>
     ：提供直接连接公网数据库的功能，便于用户即时查询。
     <br/>
     <strong>
      查询执行限定
     </strong>
     ：支持对连接的数据库执行查询操作，但限制于查询，不支持如INSERT等其他SQL操作。
     <br/>
     <strong>
      SQL优化建议
     </strong>
     ：能够根据提供的SQL语句给出常规优化建议，特别是对于复杂的长SQL语句有良好的分析能力。
     <br/>
     <strong>
      集成会话功能
     </strong>
     ：包含SQL查询执行认证的会话功能，增强用户体验。
     <br/>
     <strong>
      现有局限性
     </strong>
     ：目前会话功能仅限于SQL查询操作，若能扩展至全部SQL操作（包括写操作和DDL语句），将极大提升管理数据库的便利性。
    </p>
    <h3>
     <a id="3Wren_AI_74">
     </a>
     3.Wren AI
    </h3>
    <p>
     GitHub Star ：2.2k stars
     <br/>
     GitHub链接地址：
     <a href="https://github.com/Canner/WrenAI">
      https://github.com/Canner/WrenAI
     </a>
     <br/>
     支持本地部署
     <br/>
     Wren AI 是一个开源的 SQL AI 代理，它使数据、产品和业务团队能够通过聊天、内置精心设计的直观 UI 和 UX 以及与 Excel 和 Google 表格等工具无缝集成来获取见解。将
     <strong>
      RAG 与 LLM 结合
     </strong>
     使用以查询数据库.
    </p>
    <p>
     结合RAG（检索增强生成，Retrieval-Augmented Generation）和LLM（大语言模型，Large Language Models）以查询数据库是一个复杂的过程，涉及到多个技术和方法的融合。通过将这两个技术结合起来，可以提高信息检索和自然语言处理任务的效率和准确性。然而，正如你所指出的，这个过程在四个关键阶段面临着挑战：上下文收集、检索、SQL 生成和协作。下面是这些挑战的具体分析以及可能的解决方案，以便优化内容用于写博客。
    </p>
    <p>
     <strong>
      第1阶段：上下文收集挑战
     </strong>
     <br/>
     互操作性和数据链接
     <br/>
     挑战：不同来源的数据和元数据服务之间的互操作性，以及将数据与文档存储中的元数据相关联。
     <br/>
     解决方案：采用统一的数据模型和标准化接口来促进跨系统的信息交换。使用语义网技术如RDF（资源描述框架）和OWL（Web本体语言）可以帮助建立丰富的上下文关联。
    </p>
    <p>
     <strong>
      第2阶段：检索挑战
     </strong>
     <br/>
     向量存储优化和语义搜索精度
     <br/>
     挑战：优化向量存储以提高搜索效率，同时确保语义搜索能够准确理解查询意图。
     <br/>
     解决方案：利用先进的机器学习算法改进向量索引策略，并采用预训练的语言模型进行语义解析，以增强查询理解和结果排序。
    </p>
    <p>
     <strong>
      第3阶段：SQL生成挑战
     </strong>
     <br/>
     SQL查询的准确性和方言适应性
     <br/>
     挑战：生成符合语法且可执行的SQL查询，并适应不同数据库系统的特定SQL方言。
     <br/>
     解决方案：训练专门针对SQL生成的LLM，并集成对多种数据库系统的知识。可以考虑使用模板或模式匹配来辅助生成兼容的查询。
    </p>
    <p>
     <strong>
      第4阶段：协作挑战
     </strong>
     <br/>
     集体知识积累和访问控制
     <br/>
     挑战：有效整合用户反馈以改进系统性能，同时遵守组织的数据访问政策和隐私法规。
     <br/>
     解决方案：建立社区驱动的知识库平台，允许用户提交改进建议和错误报告。对于访问控制，应实施细粒度的权限管理机制，确保只有授权人员能访问敏感数据。
    </p>
    <p>
     <strong>
      功能：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       以任何语言处理数据
       <br/>
       Wren AI 会说您的语言，例如英语、德语、西班牙语、法语、日语、韩语、葡萄牙语、中文等。通过向 Wren AI 询问您的业务问题来解锁有价值的见解。它超越了表面的数据分析，揭示了有意义的信息，并简化了从潜在客户评分模板到客户细分的答案获取过程。
      </p>
     </li>
     <li>
      <p>
       具有精心设计的 UI/UX 的语义索引
       <br/>
       Wren AI 实施了语义引擎架构来提供您业务的 LLM 上下文;您可以轻松地在数据架构上建立一个逻辑表示层，以帮助 LLM 更多地了解您的业务环境。
      </p>
     </li>
     <li>
      <p>
       使用上下文生成 SQL 查询
       <br/>
       借助 Wren AI，您可以使用“建模定义语言”处理元数据、架构、术语、数据关系以及计算和聚合背后的逻辑，从而减少重复编码并简化数据联接。
      </p>
     </li>
     <li>
      <p>
       无需编写代码即可获得见解
       <br/>
       在 Wren AI 中开始新对话时，您的问题将用于查找最相关的表。从这些中，LLM 生成三个相关问题供用户选择。您还可以提出后续问题以获得更深入的见解。
      </p>
     </li>
     <li>
      <p>
       轻松导出和可视化您的数据
       <br/>
       Wren AI 提供无缝的端到端工作流程，使您能够轻松地将数据与 Excel 和 Google 表格等流行的分析工具连接起来。这样，您的见解仍然可以访问，从而可以使用您最熟悉的工具进行进一步分析。
      </p>
     </li>
    </ol>
    <p>
     Wren A开源的主要特点在于建立
     <strong>
      数据模型
     </strong>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/28a06bca198c426b996686fcf464299c.png"/>
    </p>
    <p>
     数据模型确实为数据库或信息系统中数据的结构和关系提供了一个概念框架，而Wren AI中的“模型”、“视图”以及“实体关系图（ERD）”等概念则是这一框架的具体实现形式。下面我们将详细解释这些组件如何在Wren AI环境中运作，并且它们是如何帮助用户更好地理解和操作数据的。
    </p>
    <p>
     <strong>
      - 模型
     </strong>
    </p>
    <p>
     在Wren AI中，“模型”不仅仅是指传统意义上的数据模型，它是一个更复杂的单元，集成了架构、元数据、关系、计算字段以及其他自定义语义信息。这意味着每个模型都不仅仅是数据的容器，而且是具有丰富描述的数据对象集合，能够表达数据之间的复杂关系和逻辑。通过这种方式，模型可以帮助人们和AI服务更深刻地理解数据的本质，从而提高数据分析和决策的质量。
    </p>
    <p>
     <strong>
      - 视图
     </strong>
    </p>
    <p>
     视图作为虚拟表，是Wren AI的一个重要特性，它允许用户基于一个或多个基础模型的数据创建定制化的展示。与实际存储数据的表不同，视图并不直接存储数据，而是根据预定义的查询动态生成结果集。这种机制不仅节省了存储空间，还提供了灵活性，让用户可以根据需要快速调整数据展示的方式。此外，通过“另存为视图”的功能，用户可以保存特定的查询结果，以便于日后重复使用或分享。
    </p>
    <ul>
     <li>
      <strong>
       实体关系图（ERD）
      </strong>
     </li>
    </ul>
    <p>
     实体关系图是在Wren AI的建模页面提供的可视化工具，用于直观地展示各个模型及其相互之间的关系。ERD以图形化的方式呈现了系统内的数据结构，使用户能够轻松识别数据元素之间的关联，如一对一、一对多或多对多的关系。在这个图表中，模型通常用蓝色块表示，而视图则用绿色块标识，这样的颜色区分有助于快速辨识不同的数据结构类型。ERD对于设计和理解复杂的数据模型特别有用，因为它能够清晰地揭示数据之间的联系，促进团队成员间的沟通和协作。
    </p>
    <p>
     总的来说，Wren AI通过其模型、视图和ERD等功能，为用户提供了一套强大的工具来管理和分析数据，确保数据能够被高效地组织起来以满足业务需求。这些特性共同作用，不仅提高了数据处理的效率，也增强了用户对数据的理解和掌控能力。
    </p>
    <h3>
     <a id="4Vanna_138">
     </a>
     4.Vanna
    </h3>
    <p>
     GitHub Star ：12.3k stars
     <br/>
     GitHub链接地址：
     <a href="https://github.com/vanna-ai/vanna">
      https://github.com/vanna-ai/vanna
     </a>
     <br/>
     支持本地部署
    </p>
    <p>
     Vanna 的核心是一个 Python 软件包，它使用检索增强来帮助您使用 LLM 为数据库生成准确的 SQL 查询。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2a0378f400d6422db41c0e78c984f2b7.png">
      <br/>
      Vanna 通过两个简单的步骤工作 -
      <strong>
       在数据上训练 RAG“模型
      </strong>
      ，然后提出问题，这些问题将返回 SQL 查询，这些查询可以设置为在向量数据库上自动运行。
     </img>
    </p>
    <p>
     <strong>
      训练 RAG“模型：
     </strong>
    </p>
    <p>
     数据包含建表语句、相关的SQL查询示例以及对表或字段的注释等文档信息。这些信息将被转化为向量形式（即进行Embedding），并存储在专门的向量库中。这些向量表示使得系统能够高效地理解和检索结构化数据的相关信息。
    </p>
    <p>
     <strong>
      问题处理与SQL生成：
     </strong>
    </p>
    <p>
     向Vanna提出一个问题时，系统会在向量库中搜索与该问题最相关的信息。
     <br/>
     检索到的相关信息会被传递给大型语言模型，它根据上下文生成适当的SQL查询。
     <br/>
     生成的SQL查询可以直接设置为自动执行，以在您的数据库上运行，从而快速获得所需的数据结果。
    </p>
    <p>
     <strong>
      选择 Vanna.AI 的原因可以归结为几个关键优势：
     </strong>
    </p>
    <ul>
     <li>
      <p>
       透明度与灵活性：Vanna Python包以及前端集成的开源性质意味着用户可以获得完整的代码透明度，并且可以根据自己的需求进行定制或修改。这对于那些希望在自己的基础设施上运行解决方案、保持对技术栈完全控制的企业尤其有吸引力。
      </p>
     </li>
     <li>
      <p>
       复杂数据集的高精度训练数据相关性：Vanna的性能直接与其所接收的训练数据量成正比。更多的训练数据能够提高模型对于大型复杂数据集的理解和处理能力，从而提升查询结果的准确性。这对于拥有大量历史数据或者需要处理复杂查询的企业来说是一个重要的卖点。
      </p>
     </li>
     <li>
      <p>
       数据隐私保护：Vanna 设计之初就考虑到了安全性，确保数据库内容不会被发送到 LLM（除非特定功能要求），并且元数据存储层仅能访问架构、文档和查询信息。这种设计极大地减少了敏感数据暴露的风险，符合严格的隐私法规和企业内部的安全政策。
      </p>
     </li>
     <li>
      <p>
       持续改进：随着用户的使用频率增加，Vanna的模型会通过不断添加新的训练数据来优化自身的性能。这意味着系统会随着时间推移变得更加智能和高效，无需人工干预即可自我调整以适应变化的数据模式。
      </p>
     </li>
     <li>
      <p>
       广泛的兼容性：Vanna 提供了对多种流行数据库如 Snowflake、BigQuery、Postgres等的原生支持，并且允许用户轻松创建自定义连接器以适配其他类型的数据库，支持多种大模型及向量数据库。
      </p>
     </li>
     <li>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3dd85c8be7b44342adbb54787cc4d10c.png"/>
      </p>
     </li>
     <li>
      <p>
       多样的展示方式：Vanna 支持从 Jupyter Notebook 到 Slackbot、Web 应用程序、Streamlit应用程序等多种前端展示形式，甚至可以集成到客户的 Web应用程序中。
      </p>
     </li>
    </ul>
    <p>
     <strong>
      运行原理：
     </strong>
    </p>
    <p>
     当你向Vanna提出问题时，系统将遵循一个优化的流程来确保提供准确且高效的SQL查询响应：
    </p>
    <ul>
     <li>
      系统首先会在训练数据中查找是否有过类似的提问记录。如果找到了相似的问题，它会使用那些已经被验证正确的SQL查询作为参考。
     </li>
     <li>
      若未找到匹配项，系统则会依据现有的数据定义语言（DDL）、相关文档或引导性查询来进行处理。
     </li>
     <li>
      接着，专门针对您架构定制的Vanna模型会基于上述信息生成相应的SQL查询。
     </li>
     <li>
      生成的SQL查询会被执行以验证其正确性和有效性。一旦通过验证，此查询就会被加入到训练数据集中，成为未来查询的一个可靠来源。
     </li>
     <li>
      如果SQL查询未能通过验证，则会有分析师介入，对查询进行修正，并将正确的版本纳入训练数据。
     </li>
    </ul>
    <p>
     通过这个不断迭代和学习的过程，Vanna逐渐加深了对您数据库模式的理解，从而能够更加精准地响应更多类型的问题，并随着时间推移不断提高其性能和准确性。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343733333936362f:61727469636c652f64657461696c732f313434333935393438" class_="artid" style="display:none">
 </p>
</div>


