---
layout: post
title: "hive-中各种参数"
date: 2025-03-11 15:49:48 +0800
description: "在 Apache Hive 中，参数（也称为配置属性）用于控制 Hive 的行为和性能。Hive 提供了丰富的参数来优化查询性能、管理资源和调试任务。作用：小表的大小阈值，超过该值则不转换为 Map Join。作用：每个 Reduce 任务处理的数据量。这些参数用于控制 Hive 任务的资源分配。作用：Map Join 中小表的大小阈值。作用：设置最大的 Reduce 任务数。这些参数用于控制查询的执行方式和性能。作用：Tez 任务的最大分组大小。作用：设置 Hive 的日志级别。"
keywords: "hive 中各种参数"
categories: ['未分类']
tags: ['数据仓库', 'Hive', 'Hadoop']
artid: "146181002"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146181002
    alt: "hive-中各种参数"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146181002
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146181002
cover: https://bing.ee123.net/img/rand?artid=146181002
image: https://bing.ee123.net/img/rand?artid=146181002
img: https://bing.ee123.net/img/rand?artid=146181002
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     hive 中各种参数
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     在 Apache Hive 中，参数（也称为配置属性）用于控制 Hive 的行为和性能。这些参数可以优化查询性能、调整资源使用、解决数据倾斜问题等。Hive 参数通常分为以下几类：
    </p>
    <hr/>
    <h3>
     <strong>
      1. 查询执行参数
     </strong>
    </h3>
    <p>
     这些参数用于控制查询的执行方式和性能。
    </p>
    <h4>
     <strong>
      1.1 MapReduce 相关参数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.reducers.bytes.per.reducer
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：256 MB（
         <code>
          256000000
         </code>
         ）
        </p>
       </li>
       <li>
        <p>
         作用：每个 Reduce 任务处理的数据量。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.reducers.bytes.per.reducer = 500000000;
         </code>
         （每个 Reducer 处理 500 MB 数据）
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.reducers.max
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：1009
        </p>
       </li>
       <li>
        <p>
         作用：设置最大的 Reduce 任务数。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.reducers.max = 2000;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.parallel
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          false
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否启用并行执行。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.parallel = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.dynamic.partition
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          false
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否启用动态分区。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.dynamic.partition = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.dynamic.partition.mode
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          strict
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：动态分区模式，
         <code>
          strict
         </code>
         表示必须指定至少一个静态分区，
         <code>
          nonstrict
         </code>
         表示可以完全动态分区。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.dynamic.partition.mode = nonstrict;
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <strong>
      1.2 聚合和倾斜优化参数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.map.aggr
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          true
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否在 Map 阶段进行聚合。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.map.aggr = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.groupby.skewindata
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          false
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否启用数据倾斜优化。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.groupby.skewindata = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.optimize.skewjoin
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          false
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否启用 Skew Join 优化。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.optimize.skewjoin = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <strong>
      1.3 Join 优化参数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.auto.convert.join
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          true
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否自动将小表转换为 Map Join。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.auto.convert.join = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.mapjoin.smalltable.filesize
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：25 MB（
         <code>
          25000000
         </code>
         ）
        </p>
       </li>
       <li>
        <p>
         作用：小表的大小阈值，超过该值则不转换为 Map Join。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.mapjoin.smalltable.filesize = 50000000;
         </code>
         （50 MB）
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      2. 资源管理参数
     </strong>
    </h3>
    <p>
     这些参数用于控制 Hive 任务的资源分配。
    </p>
    <h4>
     <strong>
      2.1 内存相关参数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.auto.convert.join.noconditionaltask.size
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：10 MB（
         <code>
          10000000
         </code>
         ）
        </p>
       </li>
       <li>
        <p>
         作用：Map Join 中小表的大小阈值。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.auto.convert.join.noconditionaltask.size = 20000000;
         </code>
         （20 MB）
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.tez.container.size
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：-1（未设置）
        </p>
       </li>
       <li>
        <p>
         作用：设置 Tez 容器的内存大小。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.tez.container.size = 4096;
         </code>
         （4 GB）
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <strong>
      2.2 并行度和任务数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.parallel.thread.number
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：8
        </p>
       </li>
       <li>
        <p>
         作用：并行执行的线程数。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.parallel.thread.number = 16;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.tez.grouping.max-size
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：1 GB（
         <code>
          1073741824
         </code>
         ）
        </p>
       </li>
       <li>
        <p>
         作用：Tez 任务的最大分组大小。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.tez.grouping.max-size = 2147483648;
         </code>
         （2 GB）
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      3. 数据存储和压缩参数
     </strong>
    </h3>
    <p>
     这些参数用于控制数据的存储格式和压缩方式。
    </p>
    <h4>
     <strong>
      3.1 存储格式
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.default.fileformat
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          TextFile
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：设置默认的文件存储格式。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.default.fileformat = ORC;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.compress.output
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          false
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否压缩输出数据。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.compress.output = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <strong>
      3.2 压缩参数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.exec.compress.intermediate
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          false
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否压缩中间数据。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.exec.compress.intermediate = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         mapreduce.map.output.compress.codec
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          org.apache.hadoop.io.compress.DefaultCodec
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：设置 Map 输出数据的压缩编解码器。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET mapreduce.map.output.compress.codec = org.apache.hadoop.io.compress.SnappyCodec;
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      4. 日志和调试参数
     </strong>
    </h3>
    <p>
     这些参数用于控制日志输出和调试信息。
    </p>
    <h4>
     <strong>
      4.1 日志级别
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.log.level
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          INFO
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：设置 Hive 的日志级别。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.log.level = DEBUG;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.querylog.location
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          /tmp/&lt;user&gt;
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：设置查询日志的存储位置。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.querylog.location = /var/log/hive/querylog;
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <strong>
      4.2 调试参数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.debug.localtask
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          false
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：是否启用本地任务调试。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.debug.localtask = true;
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      5. 其他常用参数
     </strong>
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         hive.fetch.task.conversion
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          minimal
         </code>
        </p>
       </li>
       <li>
        <p>
         作用：控制是否将简单查询转换为 Fetch 任务。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.fetch.task.conversion = more;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         hive.execution.engine
        </code>
       </strong>
       :
      </p>
      <ul>
       <li>
        <p>
         默认值：
         <code>
          mr
         </code>
         （MapReduce）
        </p>
       </li>
       <li>
        <p>
         作用：设置 Hive 的执行引擎。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          SET hive.execution.engine = tez;
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      总结
     </strong>
    </h3>
    <p>
     Hive 提供了丰富的参数来优化查询性能、管理资源和调试任务。常用的参数包括：
    </p>
    <ul>
     <li>
      <p>
       <strong>
        查询执行参数
       </strong>
       ：如
       <code>
        hive.exec.reducers.bytes.per.reducer
       </code>
       、
       <code>
        hive.groupby.skewindata
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        资源管理参数
       </strong>
       ：如
       <code>
        hive.tez.container.size
       </code>
       、
       <code>
        hive.exec.parallel.thread.number
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        存储和压缩参数
       </strong>
       ：如
       <code>
        hive.default.fileformat
       </code>
       、
       <code>
        hive.exec.compress.output
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        日志和调试参数
       </strong>
       ：如
       <code>
        hive.log.level
       </code>
       、
       <code>
        hive.debug.localtask
       </code>
       。
      </p>
     </li>
    </ul>
    <p>
     根据具体场景合理配置这些参数，可以显著提升 Hive 的性能和效率。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36333332323132322f:61727469636c652f64657461696c732f313436313831303032" class_="artid" style="display:none">
 </p>
</div>


