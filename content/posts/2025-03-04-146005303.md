---
layout: post
title: "代码随想录第五十天-图论理论基础"
date: 2025-03-04 10:31:52 +0800
description: "这篇我们将正式开始学习图论！在代码随想录中，图论相关的算法题目将统一使用ACM模式。为什么要使用ACM模式呢？"
keywords: "代码随想录第五十天| 图论理论基础"
categories: ['代码随想录算法训练营']
tags: ['算法', '图论', '动态规划', 'Java']
artid: "146005303"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146005303
    alt: "代码随想录第五十天-图论理论基础"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146005303
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146005303
cover: https://bing.ee123.net/img/rand?artid=146005303
image: https://bing.ee123.net/img/rand?artid=146005303
img: https://bing.ee123.net/img/rand?artid=146005303
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     代码随想录第五十天| 图论理论基础
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_1">
     </a>
     图论理论基础
    </h2>
    <p>
     这篇我们将正式开始学习图论！
     <br/>
     在代码随想录中，图论相关的算法题目将统一使用ACM模式。为什么要使用ACM模式呢？
    </p>
    <h3>
     <a id="_4">
     </a>
     图的基本概念
    </h3>
    <p>
     在二维坐标中，两点可以连成线，多个点连成的线就构成了图。
     <br/>
     当然，图也可以仅有一个节点，甚至没有节点（即为空图）。
    </p>
    <h3>
     <a id="_7">
     </a>
     图的种类
    </h3>
    <p>
     整体上，图一般分为
     <strong>
      有向图
     </strong>
     和
     <strong>
      无向图
     </strong>
     。
    </p>
    <ul>
     <li>
      <strong>
       有向图
      </strong>
      是指图中的边是有方向的。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/855df923df694e90a61ba374f440a3e8.png">
       -
       <strong>
        无向图
       </strong>
       是指图中的边没有方向。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/869a0094befd4c39b679740a5476ba8e.png"/>
      </img>
     </li>
    </ul>
    <p>
     此外，还有
     <strong>
      加权有向图
     </strong>
     和
     <strong>
      加权无向图
     </strong>
     ，即图中边是有权值的。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a897683decce4c44960c6f8c63f6ad1f.png"/>
    </p>
    <h3>
     <a id="_16">
     </a>
     度
    </h3>
    <ul>
     <li>
      在无向图中，一个节点的度是指有几条边连接该节点。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b3ef256cfcc048ef83f2f6163d07b18b.png"/>
     </li>
    </ul>
    <p>
     例如，在下面的无向图中，节点4的度为5，节点6的度为3。
    </p>
    <ul>
     <li>
      在有向图中，每个节点有出度和入度。
      <ul>
       <li>
        出度：从该节点出发的边的个数。
       </li>
       <li>
        入度：指向该节点的边的个数。
        <br/>
        例如，在下面的有向图中，节点3的入度为2，出度为1；节点1的入度为0，出度为2。
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2a0357a8e15648398dbccd83be34ab31.png"/>
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="_27">
     </a>
     连通性
    </h3>
    <p>
     在图中表示节点的连通情况，我们称之为连通性。
    </p>
    <h3>
     <a id="_30">
     </a>
     连通图
    </h3>
    <p>
     在无向图中，如果任何两个节点都是可以到达的，我们称之为
     <strong>
      连通图
     </strong>
     。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a8b04b2c23ac45d98329d693ab11bc45.png"/>
    </p>
    <p>
     如果有节点不能到达其他节点，则为
     <strong>
      非连通图
     </strong>
     。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/47ff0b6b04464981a20b4e558e25e5db.png"/>
    </p>
    <h3>
     <a id="_37">
     </a>
     强连通图
    </h3>
    <p>
     在有向图中，如果任何两个节点是可以相互到达的，我们称之为
     <strong>
      强连通图
     </strong>
     。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dd931db9101741dcb16e3e8c59d70ac6.png"/>
    </p>
    <h3>
     <a id="_41">
     </a>
     连通分量
    </h3>
    <p>
     在无向图中，极大连通子图称之为该图的一个
     <strong>
      连通分量
     </strong>
     。
     <br/>
     例如，在下面的无向图中，节点1、节点2、节点5构成的子图是该无向图的一个连通分量。
     <br/>
     同理，节点3、节点4、节点6构成的子图也是该无向图的一个连通分量。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/032fca6cfbd4497a8e52281a0c2b5c18.png"/>
    </p>
    <h3>
     <a id="_47">
     </a>
     强连通分量
    </h3>
    <p>
     在有向图中，极大强连通子图称之为该图的
     <strong>
      强连通分量
     </strong>
     。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b07bda47de4f448884367533436bed12.png"/>
    </p>
    <h3>
     <a id="_51">
     </a>
     图的构造
    </h3>
    <p>
     我们如何用代码来表示一个图呢？一般使用邻接表、邻接矩阵或者用类来表示。
    </p>
    <h4>
     <a id="_53">
     </a>
     邻接矩阵
    </h4>
    <p>
     邻接矩阵使用二维数组来表示图结构。其优点是表达方式简单，易于理解，检查任意两个顶点间是否存在边的操作非常快，适合稠密图。缺点是遇到稀疏图，会导致申请过大的二维数组造成空间浪费，且遍历边的时候需要遍历整个n*n矩阵，造成时间浪费。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7505581968f24f7aae4428bd7666d297.png"/>
    </p>
    <h4>
     <a id="_57">
     </a>
     邻接表
    </h4>
    <p>
     邻接表使用数组+链表的方式来表示。其优点是对于稀疏图的存储，只需要存储边，空间利用率高，遍历节点连接情况相对容易。缺点是检查任意两个节点间是否存在边，效率相对低，需要O(V)时间，V表示某节点连接其他节点的数量，且实现相对复杂，不易理解。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/83fd6eb5b3784e4db386b5effa58ed98.png"/>
    </p>
    <h3>
     <a id="_61">
     </a>
     图的遍历方式
    </h3>
    <p>
     图的遍历方式基本是两大类：
    </p>
    <ul>
     <li>
      深度优先搜索（dfs）
     </li>
     <li>
      广度优先搜索（bfs）
      <br/>
      在讲解二叉树章节的时候，其实就已经讲过这两种遍历方式。二叉树的递归遍历是dfs在二叉树上的遍历方式，而二叉树的层序遍历是bfs在二叉树上的遍历方式。
      <br/>
      dfs和bfs是一种搜索算法，可以在不同的数据结构上进行搜索。在二叉树章节里是在二叉树这样的数据结构上搜索。而在图论章节，则是在图（邻接表或邻接矩阵）上进行搜索。
     </li>
    </ul>
    <h2>
     <a id="_69">
     </a>
     深度优先搜索理论基础
    </h2>
    <h3>
     <a id="dfs__bfs__70">
     </a>
     dfs 与 bfs 区别
    </h3>
    <p>
     提到深度优先搜索（dfs），就不得不说和广度优先搜索（bfs）有什么区别。
     <br/>
     先来了解dfs的过程，很多录友可能对dfs（深度优先搜索），bfs（广度优先搜索）分不清。
     <br/>
     先给大家说一下两者大概的区别：
    </p>
    <ul>
     <li>
      dfs是可一个方向去搜，不到黄河不回头，直到遇到绝境了，搜不下去了，再换方向（换方向的过程就涉及到了回溯）。
     </li>
     <li>
      bfs是先把本节点所连接的所有节点遍历一遍，走到下一个节点的时候，再把连接节点的所有节点遍历一遍，搜索方向更像是广度，四面八方的搜索过程。
      <br/>
      当然以上讲的是，大体可以这么理解，接下来我们详细讲解dfs，（bfs在用单独一篇文章详细讲解）
     </li>
    </ul>
    <h3>
     <a id="dfs__77">
     </a>
     dfs 搜索过程
    </h3>
    <p>
     上面说道dfs是可一个方向搜，不到黄河不回头。那么我们来举一个例子。
     <br/>
     如图一，是一个无向图，我们要搜索从节点1到节点6的所有路径。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a744cf1686e14a71b2dfa849a3864863.png"/>
    </p>
    <p>
     那么dfs搜索的第一条路径是这样的：（假设第一次延默认方向，就找到了节点6），
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f1e78e513e4642faaa325122e937e329.png"/>
    </p>
    <p>
     此时我们找到了节点6，（遇到黄河了，是不是应该回头了），那么应该再去搜索其他方向了。如图三：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/639e9b8c41a94c53ab265727d05316d8.png"/>
    </p>
    <p>
     路径2撤销了，改变了方向，走路径3（红色线），接着也找到终点6。那么撤销路径2，改为路径3，在dfs中其实就是回溯的过程（这一点很重要，很多录友不理解dfs代码中回溯是用来干什么的）
     <br/>
     又找到了一条从节点1到节点6的路径，又到黄河了，此时再回头，下图图四中，路径4撤销（回溯的过程），改为路径5。
     <br/>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/02767c80c61f453fa156621bcb384744.png"/>
    </p>
    <p>
     又找到了一条从节点1到节点6的路径，又到黄河了，此时再回头，下图图五，路径6撤销（回溯的过程），改为路径7，路径8和路径7，路径9，结果发现死路一条，都走到了自己走过的节点。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b651069250ba4e9d931496669929b251.png"/>
    </p>
    <p>
     那么节点2所连接路径和节点3所链接的路径都走过了，撤销路径只能向上回退，去选择撤销当初节点4的选择，也就是撤销路径5，改为路径10。如图图六：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2a403c83685c4dde9e8ef4a83e83ad51.png"/>
    </p>
    <p>
     上图演示中，其实我并没有把所有的从节点1到节点6的dfs（深度优先搜索）的过程都画出来，那样太冗余了，但已经把dfs关键的地方都涉及到了，关键就两点：
    </p>
    <ul>
     <li>
      搜索方向，是认准一个方向搜，直到碰壁之后再换方向
     </li>
     <li>
      换方向是撤销原路径，改为节点链接的下一个路径，回溯的过程。
     </li>
    </ul>
    <h3>
     <a id="_100">
     </a>
     代码框架
    </h3>
    <p>
     正是因为dfs搜索可一个方向，并需要回溯，所以用递归的方式来实现是最方便的。
     <br/>
     很多录友对回溯很陌生，建议先看看代码随想录，回溯算法章节。
     <br/>
     有递归的地方就有回溯，那么回溯在哪里呢？
     <br/>
     就递归函数的下面，例如如下代码：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    处理节点
    <span class="token function">dfs</span><span class="token punctuation">(</span>图，选择的节点<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归</span>
    回溯，撤销处理结果
<span class="token punctuation">}</span>
</code></pre>
    <p>
     可以看到回溯操作就在递归函数的下面，递归和回溯是相辅相成的。
     <br/>
     在讲解二叉树章节的时候，二叉树的递归法其实就是dfs，而二叉树的迭代法，就是bfs（广度优先搜索）
     <br/>
     所以dfs，bfs其实是基础搜索算法，也广泛应用与其他数据结构与算法中。
     <br/>
     我们在回顾一下回溯法的代码框架：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>终止条件<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        存放结果<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>选择：本层集合中元素（树中节点孩子的数量就是集合的大小）<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        处理节点<span class="token punctuation">;</span>
        <span class="token function">backtracking</span><span class="token punctuation">(</span>路径，选择列表<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归</span>
        回溯，撤销处理结果
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     回溯算法，其实就是dfs的过程，这里给出dfs的代码框架：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>终止条件<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        存放结果<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>选择：本节点所连接的其他节点<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        处理节点<span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>图，选择的节点<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归</span>
        回溯，撤销处理结果
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     可以发现dfs的代码框架和回溯算法的代码框架是差不多的。
     <br/>
     下面我用深搜三部曲，来解读dfs的代码框架。
    </p>
    <h3>
     <a id="_145">
     </a>
     深搜三部曲
    </h3>
    <p>
     在二叉树递归讲解中，给出了递归三部曲。
     <br/>
     回溯算法讲解中，给出了回溯三部曲。
     <br/>
     其实深搜也是一样的，深搜三部曲如下：
    </p>
    <h4>
     <a id="_149">
     </a>
     确认递归函数，参数
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span>
</code></pre>
    <p>
     通常我们递归的时候，我们递归搜索需要了解哪些参数，其实也可以在写递归函数的时候，发现需要什么参数，再去补充就可以。
     <br/>
     一般情况，深搜需要二维数组数组结构保存所有路径，需要一维数组保存单一路径，这种保存结果的数组，我们可以定义一个全局变量，避免让我们的函数参数过多。
     <br/>
     例如这样：
    </p>
    <pre><code class="prism language-cpp">vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> result<span class="token punctuation">;</span> <span class="token comment">// 保存符合条件的所有路径</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> path<span class="token punctuation">;</span> <span class="token comment">// 起点到终点的路径</span>
<span class="token keyword">void</span> <span class="token function">dfs</span> <span class="token punctuation">(</span>图，目前搜索的节点<span class="token punctuation">)</span>  
</code></pre>
    <p>
     但这种写法看个人习惯，不强求。
    </p>
    <h4>
     <a id="_162">
     </a>
     确认终止条件
    </h4>
    <p>
     终止条件很重要，很多同学写dfs的时候，之所以容易死循环，栈溢出等等这些问题，都是因为终止条件没有想清楚。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>终止条件<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    存放结果<span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     终止添加不仅是结束本层递归，同时也是我们收获结果的时候。
     <br/>
     另外，其实很多dfs写法，没有写终止条件，其实终止条件写在了，下面dfs递归的逻辑里了，也就是不符合条件，直接不会向下递归。这里如果大家不理解的话，没关系，后面会有具体题目来讲解。
    </p>
    <h4>
     <a id="_172">
     </a>
     处理目前搜索节点出发的路径
    </h4>
    <p>
     一般这里就是一个for循环的操作，去遍历目前搜索节点所能到的所有节点。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span>选择：本节点所连接的其他节点<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    处理节点<span class="token punctuation">;</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span>图，选择的节点<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归</span>
    回溯，撤销处理结果
<span class="token punctuation">}</span>
</code></pre>
    <p>
     不少录友疑惑的地方，都是dfs代码框架中for循环里分明已经处理节点了，那么dfs函数下面为什么还要撤销的呢。
     <br/>
     如图七所示，路径2已经走到了目的地节点6，那么路径2是如何撤销，然后改为路径3呢？其实这就是回溯的过程，撤销路径2，走换下一个方向。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/388e7109a6df4a7190f59bae3a34f97e.png"/>
    </p>
    <h2>
     <a id="98__186">
     </a>
     98. 所有可达路径
    </h2>
    <h3>
     <a id="_187">
     </a>
     题目描述
    </h3>
    <p>
     给定一个有 n 个节点的有向无环图，节点编号从 1 到 n。请编写一个函数，找出并返回所有从节点 1 到节点 n 的路径。每条路径应以节点编号的列表形式表示。
    </p>
    <h3>
     <a id="_189">
     </a>
     输入描述
    </h3>
    <p>
     第一行包含两个整数 N，M，表示图中拥有 N 个节点，M 条边。
     <br/>
     后续 M 行，每行包含两个整数 s 和 t，表示图中的 s 节点与 t 节点中有一条路径。
    </p>
    <h3>
     <a id="_192">
     </a>
     输出描述
    </h3>
    <p>
     输出所有的可达路径，路径中所有节点之间空格隔开，每条路径独占一行，存在多条路径，路径输出的顺序可任意。如果不存在任何一条路径，则输出 -1。
     <br/>
     注意输出的序列中，最后一个节点后面没有空格！例如正确的答案是
     <code>
      1 3 5
     </code>
     ，而不是
     <code>
      1 3 5
     </code>
     ，5后面没有空格！
    </p>
    <h3>
     <a id="_195">
     </a>
     解题思路
    </h3>
    <p>
     我们可以使用深度优先搜索（DFS）来解决这个问题。以下是解题步骤：
    </p>
    <ol>
     <li>
      初始化一个结果列表
      <code>
       result
      </code>
      来存储所有从节点 1 到节点 n 的路径。
     </li>
     <li>
      初始化一个路径列表
      <code>
       path
      </code>
      来存储当前搜索路径。
     </li>
     <li>
      使用 DFS 遍历图，从节点 1 开始，直到到达节点 n。
     </li>
     <li>
      每当到达节点 n 时，将当前路径添加到结果列表中。
     </li>
     <li>
      在 DFS 过程中，如果当前节点有相邻节点，则将相邻节点添加到路径中，并继续搜索。
     </li>
     <li>
      搜索完成后，如果结果列表为空，则输出 -1；否则，按顺序输出所有路径。
      <br/>
      以下是使用邻接矩阵和邻接表两种方式实现的代码：
     </li>
    </ol>
    <h4>
     <a id="_204">
     </a>
     邻接矩阵
    </h4>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> graph<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> n<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>graph<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
                path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> s <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> t <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            graph<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> pa<span class="token operator">:</span>result<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>pa<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>pa<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pa<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>pa<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_247">
     </a>
     邻接表
    </h4>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LinkedList</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> graph<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> n<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> graph<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LinkedList</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            graph<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>m<span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> s <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> t <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            graph<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> pa<span class="token operator">:</span>result<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>pa<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>pa<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pa<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>pa<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这两种实现方式都可以解决问题，选择哪一种取决于具体的应用场景和个人偏好。邻接矩阵适用于节点数量较少的情况，而邻接表则适用于边较少的情况。
    </p>
    <h2>
     <a id="_296">
     </a>
     广度优先搜索理论基础
    </h2>
    <p>
     在深度优先搜索的讲解中，我们就讲过深度优先搜索和广度优先搜索的区别。
     <br/>
     广搜（bfs）是一圈一圈的搜索过程，和深搜（dfs）是一条路跑到黑然后再回溯。
    </p>
    <h3>
     <a id="_299">
     </a>
     广搜的使用场景
    </h3>
    <p>
     广搜的搜索方式就适合于解决两个点之间的最短路径问题。
     <br/>
     因为广搜是从起点出发，以起始点为中心一圈一圈进行搜索，一旦遇到终点，记录之前走过的节点就是一条最短路。
     <br/>
     当然，也有一些问题是广搜和深搜都可以解决的，例如岛屿问题，这类问题的特征就是不涉及具体的遍历方式，只要能把相邻且相同属性的节点标记上就行。（我们会在具体题目讲解中详细来说）
    </p>
    <h3>
     <a id="_303">
     </a>
     广搜的过程
    </h3>
    <p>
     上面我们提过，BFS是一圈一圈的搜索过程，但具体是怎么一圈一圈来搜呢。
     <br/>
     我们用一个方格地图，假如每次搜索的方向为上下左右（不包含斜上方），那么给出一个start起始位置，那么BFS就是从四个方向走出第一步。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6a439282f71c49efb52f6789ce82aefa.png"/>
    </p>
    <p>
     如果加上一个end终止位置，那么使用BFS的搜索过程如图所示：
     <br/>
     <img alt="图二" src="https://i-blog.csdnimg.cn/direct/b2ed3429f5b0471ca6ddbdcedc799f11.png"/>
    </p>
    <p>
     我们从图中可以看出，从start起点开始，是一圈一圈，向外搜索，方格编号1为第一步遍历的节点，方格编号2为第二步遍历的节点，第四步的时候我们找到终止点end。
     <br/>
     正是因为BFS一圈一圈的遍历方式，所以一旦遇到终止点，那么一定是一条最短路径。
     <br/>
     而且地图还可以有障碍，如图所示：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3b95f92b03d7491db3b024fda62e549a.png"/>
    </p>
    <p>
     在第五步，第六步我只把关键的节点染色了，其他方向周边没有去染色，大家只要关注关键地方染色的逻辑就可以。
     <br/>
     从图中可以看出，如果添加了障碍，我们是第六步才能走到end终点。
     <br/>
     只要BFS只要搜到终点一定是一条最短路径，大家可以参考上面的图，自己再去模拟一下。
    </p>
    <h3>
     <a id="_319">
     </a>
     代码框架
    </h3>
    <p>
     大家应该好奇，这一圈一圈的搜索过程是怎么做到的，是放在什么容器里，才能这样去遍历。
     <br/>
     很多网上的资料都是直接说用队列来实现。
     <br/>
     其实，我们仅仅需要一个容器，能保存我们要遍历过的元素就可以，那么用队列，还是用栈，甚至用数组，都是可以的。
     <br/>
     用队列的话，就是保证每一圈都是一个方向去转，例如统一顺时针或者逆时针。
     <br/>
     因为队列是先进先出，加入元素和弹出元素的顺序是没有改变的。
     <br/>
     如果用栈的话，就是第一圈顺时针遍历，第二圈逆时针遍历，第三圈有顺时针遍历。
     <br/>
     因为栈是先进后出，加入元素和弹出元素的顺序改变了。
     <br/>
     那么广搜需要注意转圈搜索的顺序吗？不需要！
     <br/>
     所以用队列，还是用栈都是可以的，但大家都习惯用队列了，所以下面的讲解用我也用队列来讲，只不过要给大家说清楚，并不是非要用队列，用栈也可以。
     <br/>
     下面给出广搜代码模板，该模板针对的就是，上面的四方格的地图：（详细注释）
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">int</span> dir<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 表示四个方向</span>
<span class="token comment">// grid 是地图，也就是一个二维数组</span>
<span class="token comment">// visited标记访问过的节点，不要重复访问</span>
<span class="token comment">// x,y 表示开始搜索节点的下标</span>
<span class="token keyword">void</span> <span class="token function">bfs</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> grid<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> visited<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    queue<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> que<span class="token punctuation">;</span> <span class="token comment">// 定义队列</span>
    que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 起始节点加入队列</span>
    visited<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 只要加入队列，立刻标记为访问过的节点</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 开始遍历队列里的元素</span>
        pair<span class="token operator">&lt;</span><span class="token keyword">int</span> <span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> cur <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从队列取元素</span>
        <span class="token keyword">int</span> curx <span class="token operator">=</span> cur<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
        <span class="token keyword">int</span> cury <span class="token operator">=</span> cur<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token comment">// 当前节点坐标</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 开始想当前节点的四个方向左右上下去遍历</span>
            <span class="token keyword">int</span> nextx <span class="token operator">=</span> curx <span class="token operator">+</span> dir<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> nexty <span class="token operator">=</span> cury <span class="token operator">+</span> dir<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 获取周边四个方向的坐标</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nextx <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> nextx <span class="token operator">&gt;=</span> grid<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> nexty <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> nexty <span class="token operator">&gt;=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>  <span class="token comment">// 坐标越界了，直接跳过</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>nextx<span class="token punctuation">]</span><span class="token punctuation">[</span>nexty<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 如果节点没被访问过</span>
                que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>nextx<span class="token punctuation">,</span> nexty<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 队列添加该节点为下一轮要遍历的节点</span>
                visited<span class="token punctuation">[</span>nextx<span class="token punctuation">]</span><span class="token punctuation">[</span>nexty<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 只要加入队列立刻标记，避免重复访问</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f5377656570696e675f526f626f742f:61727469636c652f64657461696c732f313436303035333033" class_="artid" style="display:none">
 </p>
</div>


