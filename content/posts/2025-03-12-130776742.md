---
layout: post
title: "经验UbuntuVMware-新建虚拟机后打开-SSH-服务在主机上安装vscode并连接配置-git-的-ssh"
date: 2025-03-12 09:26:13 +0800
description: "本文详细指导了在 VMware 的 Ubuntu 虚拟机中开启 SSH 服务，并通过 VSCode Remote-SSH 插件实现远程开发环境搭建。步骤包括安装 OpenSSH 服务器、配置防火墙规则；主机端安装 VSCode 及插件并连接虚拟机；最后完成 Git 的 SSH 认证配置，包含生成密钥对、添加平台公钥及用户信息设置。文中还提供了常见问题的解决方案（如网络配置错误、认证失败等），帮助读者快速实现安全高效的跨平台开发与代码管理。"
keywords: "【经验】Ubuntu｜VMware 新建虚拟机后打开 SSH 服务、在主机上安装vscode并连接、配置 git 的 ssh"
categories: ['科普']
tags: ['虚拟机', 'Vscode', 'Vmware', 'Ubuntu', 'Ssh']
artid: "130776742"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=130776742
    alt: "经验UbuntuVMware-新建虚拟机后打开-SSH-服务在主机上安装vscode并连接配置-git-的-ssh"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=130776742
featuredImagePreview: https://bing.ee123.net/img/rand?artid=130776742
cover: https://bing.ee123.net/img/rand?artid=130776742
image: https://bing.ee123.net/img/rand?artid=130776742
img: https://bing.ee123.net/img/rand?artid=130776742
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【经验】Ubuntu｜VMware 新建虚拟机后打开 SSH 服务、在主机上安装vscode并连接、配置 git 的 ssh
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     常常有人问VMware-Tools装了也复制粘贴不了怎么办，这个东西影响因素太多了，我总是建议直接用SSH连接虚拟机。但是之前一直都没有出教程，现在出一个简单的教程。
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_Ubuntu_VMware_SSH__VSCode__Git_SSH__3">
     </a>
     在 Ubuntu 虚拟机（VMware）中开启 SSH 服务、配置 VSCode 远程连接与 Git SSH 设置
    </h2>
    <p>
     在虚拟化环境中进行开发时，通过 SSH 连接远程服务器可以提升代码管理和协作效率。本文将指导您如何在 VMware 的 Ubuntu 虚拟机中启用 SSH 服务，并通过 VSCode 实现远程开发，最后完成 Git 的 SSH 配置。
    </p>
    <hr/>
    <h3>
     <a id="_VMware__Ubuntu_9">
     </a>
     一、新建 VMware 虚拟机并安装 Ubuntu
    </h3>
    <p>
     这一步的具体过程可直接看视频：
     <a href="https://www.bilibili.com/video/BV1du411d7ho/" rel="nofollow">
      ROS｜Ubuntu20.04安装ROS Noetic全过程（从VMware虚拟机安装开始）_哔哩哔哩_bilibili
     </a>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        创建虚拟机
       </strong>
      </p>
      <ul>
       <li>
        打开 VMware Workstation 或 Fusion
       </li>
       <li>
        点击
        <code>
         Create a New Virtual Machine
        </code>
        → 选择 Linux 发行版（Ubuntu）→ 指定镜像文件路径。
       </li>
       <li>
        配置 CPU、内存及硬盘容量，建议至少分配：
        <ul>
         <li>
          内存：2GB+
         </li>
         <li>
          硬盘：30GB SSD
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        安装 Ubuntu
       </strong>
      </p>
      <ul>
       <li>
        启动虚拟机后选择
        <code>
         Install Ubuntu
        </code>
        → 按照提示完成语言、键盘布局设置。
       </li>
       <li>
        选择
        <code>
         Erase disk and install
        </code>
        （格式化并全新安装）→ 设置用户名和密码。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="_Ubuntu__SSH__28">
     </a>
     二、在 Ubuntu 虚拟机中开启 SSH 服务
    </h3>
    <h4>
     <a id="_1_OpenSSH__30">
     </a>
     步骤 1：安装 OpenSSH 服务器
    </h4>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openssh-server <span class="token parameter variable">-y</span>
</code></pre>
    <h4>
     <a id="_2_SSH__35">
     </a>
     步骤 2：检查 SSH 状态
    </h4>
    <pre><code class="prism language-bash">systemctl status <span class="token function">ssh</span>
<span class="token comment"># 若未运行，执行启动命令：</span>
<span class="token function">sudo</span> systemctl start <span class="token function">ssh</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">ssh</span>    <span class="token comment"># 设置开机自启</span>
</code></pre>
    <h4>
     <a id="_3_UFW_43">
     </a>
     步骤 3：配置防火墙（如已启用 UFW）
    </h4>
    <p>
     默认不用管，因为通常都没启用防火墙，但也可以检查一下。
    </p>
    <p>
     允许 SSH 端口（默认22）：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> ufw allow <span class="token number">22</span>/tcp
<span class="token function">sudo</span> ufw status   <span class="token comment"># 查看规则是否生效</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_VSCode__55">
     </a>
     三、在主机上安装 VSCode 并连接虚拟机
    </h3>
    <h4>
     <a id="_1_VSCode_57">
     </a>
     步骤 1：下载并安装 VSCode
    </h4>
    <ul>
     <li>
      访问
      <a href="https://code.visualstudio.com/" rel="nofollow">
       VSCode 官网
      </a>
      下载对应系统的安装包。
     </li>
     <li>
      Windows 用户可通过微软商店安装。
     </li>
    </ul>
    <h4>
     <a id="_2_Remote__SSH__61">
     </a>
     步骤 2：安装 Remote - SSH 插件
    </h4>
    <ol>
     <li>
      打开 VSCode → 进入扩展市场，搜索
      <code>
       Remote - SSH
      </code>
      并安装。
     </li>
     <li>
      安装完成后，点击左下角的远程探索图标（电脑+箭头符号）。
     </li>
    </ol>
    <h4>
     <a id="_3_65">
     </a>
     步骤 3：连接虚拟机
    </h4>
    <ol>
     <li>
      <p>
       在命令行输入：
      </p>
      <pre><code>ssh 用户名@虚拟机IP地址
# 示例：
ssh ubuntu@192.168.1.100
</code></pre>
      <ul>
       <li>
        若提示首次连接，选择
        <code>
         Yes
        </code>
        添加主机密钥。
       </li>
       <li>
        输入之前设置的 Ubuntu 密码。
       </li>
      </ul>
     </li>
     <li>
      <p>
       成功后，VSCode 将切换到远程环境界面。您可以在虚拟机上直接开发代码，并保存在本地磁盘路径中。
      </p>
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="_Git__SSH__79">
     </a>
     四、配置 Git 的 SSH 认证
    </h3>
    <h4>
     <a id="_1_SSH__81">
     </a>
     步骤 1：生成 SSH 密钥对
    </h4>
    <p>
     在 Ubuntu 虚拟机中运行：
    </p>
    <pre><code class="prism language-bash">ssh-keygen <span class="token parameter variable">-t</span> ed25519 <span class="token parameter variable">-C</span> <span class="token string">"your_email@example.com"</span>
<span class="token comment"># 按回车接受默认路径（~/.ssh/id_ed25519）和空密码。</span>
</code></pre>
    <h4>
     <a id="_2_Git__88">
     </a>
     步骤 2：将公钥添加到 Git 平台
    </h4>
    <ol>
     <li>
      复制公钥内容：
      <pre><code class="prism language-bash"><span class="token function">cat</span> ~/.ssh/id_ed25519.pub
</code></pre>
     </li>
     <li>
      登录 GitHub/GitLab 等平台，进入
      <code>
       SSH Keys
      </code>
      页面粘贴公钥，并保存。
     </li>
    </ol>
    <h4>
     <a id="_3_Git__95">
     </a>
     步骤 3：配置 Git 用户信息
    </h4>
    <pre><code class="prism language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"Your Name"</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"your_email@example.com"</span>
</code></pre>
    <h4>
     <a id="_4_SSH__101">
     </a>
     步骤 4：测试 SSH 连接
    </h4>
    <p>
     尝试连接 Git 平台：
    </p>
    <pre><code class="prism language-bash"><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com    <span class="token comment"># 测试 GitHub 是否认证成功</span>
<span class="token comment"># 成功提示："Hi username! You've successfully authenticated..."</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_110">
     </a>
     五、常见问题与解决方案
    </h3>
    <ol>
     <li>
      <p>
       <strong>
        SSH 连接超时
       </strong>
      </p>
      <ul>
       <li>
        <p>
         检查 VMware 网络模式：确保虚拟机使用桥接网络（Bridged Mode）或主机仅能访问的 NAT。
        </p>
       </li>
       <li>
        <p>
         获取虚拟机 IP：
        </p>
        <pre><code class="prism language-bash"><span class="token function">ip</span> a <span class="token operator">|</span> <span class="token function">grep</span> inet    <span class="token comment"># 查看本机IP地址</span>
</code></pre>
       </li>
       <li>
        <p>
         主机防火墙是否阻止了22端口。
        </p>
       </li>
       <li>
        <p>
         更多详情参考：
         <a href="https://shandianchengzi.blog.csdn.net/article/details/132360266" rel="nofollow">
          【经验】VScode 远程 SSH 连接 Ubuntu 或 TrueNas 出错，Could not establish connection-CSDN博客
         </a>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        VSCode 连接失败
       </strong>
      </p>
      <ul>
       <li>
        <p>
         确认 SSH 服务已启动，且虚拟机的
         <code>
          sshd_config
         </code>
         文件中未禁用密码登录（
         <code>
          PasswordAuthentication yes
         </code>
         ）。
        </p>
       </li>
       <li>
        <p>
         更多详情参考：
         <a href="https://shandianchengzi.blog.csdn.net/article/details/132360266" rel="nofollow">
          【经验】VScode 远程 SSH 连接 Ubuntu 或 TrueNas 出错，Could not establish connection-CSDN博客
         </a>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        Git SSH 认证失败
       </strong>
      </p>
      <ul>
       <li>
        检查 SSH 密钥路径是否正确：
        <pre><code class="prism language-bash"><span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span>ssh-agent<span class="token variable">)</span></span>
ssh-add ~/.ssh/id_ed25519
</code></pre>
       </li>
       <li>
        确认 Git 平台的公钥与本地密钥对匹配。
       </li>
       <li>
        更多详情参考：
        <a href="https://shandianchengzi.blog.csdn.net/article/details/120441010" rel="nofollow">
         【经验】Git｜Windows下如何管理和部署多个Git账号的SSH密钥文件_windows identityfile git rsa-CSDN博客
        </a>
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="_139">
     </a>
     六、总结
    </h3>
    <p>
     通过本文，您已掌握以下技能：
    </p>
    <ul>
     <li>
      在 Ubuntu 虚拟机中部署 SSH 服务并配置防火墙。
     </li>
     <li>
      利用 VSCode 的 Remote-SSH 插件实现无缝远程开发。
     </li>
     <li>
      配置 Git 的 SSH 认证以安全地管理代码仓库。
     </li>
    </ul>
    <p>
     此方案适用于本地开发环境搭建、测试或轻量级项目协作，可显著提升跨平台开发效率。
    </p>
    <hr/>
    <p>
     <strong>
      提示：
     </strong>
     为确保安全性，请定期更新系统补丁，并限制非必要端口的开放。对于生产环境，建议使用更复杂的防火墙规则和密钥认证（而非密码登录）。
    </p>
    <blockquote>
     <p>
      本账号所有文章均为原创，欢迎转载，请注明文章出处：
      <a href="https://shandianchengzi.blog.csdn.net/article/details/130776742" rel="nofollow">
       https://shandianchengzi.blog.csdn.net/article/details/130776742
      </a>
      。百度和各类采集站皆不可信，搜索请谨慎鉴别。技术类文章一般都有时效性，本人习惯不定期对自己的博文进行修正和更新，因此请访问出处以查看本文的最新版本。
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34363130363238352f:61727469636c652f64657461696c732f313330373736373432" class_="artid" style="display:none">
 </p>
</div>


