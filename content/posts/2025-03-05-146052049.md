---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f427261645f50695474372f:61727469636c652f64657461696c732f313436303532303439"
layout: post
title: "ä¼ä¸šæ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„-Linux-æ“ä½œç³»ç»Ÿå‘½ä»¤æ•´ç†"
date: 2025-03-05 21:02:18 +08:00
description: "ç†Ÿç»ƒæŒæ¡ Linux å¸¸ç”¨å‘½ä»¤ï¼Œä¸ä»…èƒ½å¤§å¹…æå‡è¿ç»´æ•ˆç‡ï¼Œè¿˜èƒ½åœ¨ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ã€‚æŒç»­æ•´ç†ä¸­â€¦"
keywords: "ä¼ä¸šæ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„ Linux æ“ä½œç³»ç»Ÿå‘½ä»¤æ•´ç†"
categories: ['æœªåˆ†ç±»']
tags: ['è¿ç»´', 'æ“ä½œç³»ç»Ÿå‘½ä»¤', 'Linux']
artid: "146052049"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146052049
    alt: "ä¼ä¸šæ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„-Linux-æ“ä½œç³»ç»Ÿå‘½ä»¤æ•´ç†"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146052049
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146052049
cover: https://bing.ee123.net/img/rand?artid=146052049
image: https://bing.ee123.net/img/rand?artid=146052049
img: https://bing.ee123.net/img/rand?artid=146052049
---

# ä¼ä¸šæ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„ Linux æ“ä½œç³»ç»Ÿå‘½ä»¤æ•´ç†

## Linux æ“ä½œç³»ç»Ÿå‘½ä»¤æ•´ç†

åœ¨ä¼ä¸šçº§è¿ç»´ã€å¼€å‘å’Œæ—¥å¸¸å·¥ä½œä¸­ï¼ŒLinux å‘½ä»¤æ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒæŠ€èƒ½ã€‚ä¸è®ºæ˜¯æ—¥å¿—æ’æŸ¥ã€è¿›ç¨‹ç®¡ç†ï¼Œè¿˜æ˜¯é«˜æ•ˆè¿ç»´ä¼˜åŒ–ï¼ŒæŒæ¡è¿™äº›å‘½ä»¤éƒ½èƒ½è®©ä½ äº‹åŠåŠŸå€ï¼æœ¬ç¯‡æ–‡ç« æ•´ç†äº†è‡ªå·±åœ¨æ—¥å¸¸å·¥ä½œä¸­ç§¯ç´¯æœ€å¸¸ç”¨çš„ Linux å‘½ä»¤ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼

### Linux æŸ¥çœ‹ç›¸å…³å¸¸ç”¨å‘½ä»¤

#### æŸ¥çœ‹è¿æ¥æ•°

```bash
netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'

```

ç¤ºä¾‹

```
[root@centos ~]# netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'
ESTABLISHED 1075
FIN_WAIT2 1
TIME_WAIT 140

```

#### æŸ¥çœ‹ TCP è¿æ¥

```bash
netstat -n | grep tcp

```

ç¤ºä¾‹

```
[root@centos ~]# netstat -n | grep tcp
tcp        0      0 192.168.100.1:5432      192.168.100.233:59446     ESTABLISHED
...

```

#### æŸ¥çœ‹ç»Ÿè®¡ç«¯å£è¿æ¥æ•°

```bash
netstat -nat | grep -i "443" | wc -l

```

```bash
netstat -nat | grep -i "80" | wc -l

```

#### æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶å¤§å°

ç›´æ¥åœ¨ç›®å½•ä¸‹æ‰§è¡Œ

```bash
du -sh *

```

#### æŸ¥çœ‹å½“å‰æµé‡å¸¦å®½

```bash
nethogs

```

ç¤ºä¾‹

```
[root@centos ~]# nethogs
PID USER        PROGRAM 								DEV         SENT        RECEIVED     
22196 root  	sshd: root@pts/1 						eth0        0.521       0.053 KB/sec
1219  root 		/usr/local/qcloud/tat_agent/tat_agent 	eth0        0.011       0.011 KB/sec
10909 root      barad_agent 							eth0        0.000       0.000 KB/sec

```

#### æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶å¤§å°

```bash
ll -h /opt/data/backup/

```

ç¤ºä¾‹

```
[root@localhost ~]# ll -h /opt/data/backup/
æ€»ç”¨é‡ 631M
-rwxrwxr-x 1 root root 4.4M 8æœˆ  16 09:59 database.bak
-rwxrwxr-x 1 root root 627M 8æœˆ  16 09:59 web.tar.gz

```

### Linux ä¿®æ”¹ç›¸å…³å¸¸ç”¨å‘½ä»¤

#### Linux ä¿®æ”¹æ—¶é—´

ä¿®æ”¹å…·ä½“æ—¶é—´

```bash
date -s "2020-11-26 14:14:00"

```

ä¿®æ”¹æ—¥æœŸ

```bash
date -s "2020-11-26"

```

#### Linux ä¿®æ”¹ç”¨æˆ·å¯†ç 

root ä¿®æ”¹æ™®é€šç”¨æˆ·çš„å¯†ç 

```bash
sudo passwd user_name

```

ç„¶åè¿ç»­ä¸¤æ¬¡è¾“å…¥æ–°çš„ç”¨æˆ·å¯†ç å³å¯ï¼›

root æŸ¥çœ‹æ™®é€šç”¨æˆ·å¯†ç 

**å¯†ç æ˜¯æ— æ³•è¢«æŸ¥çœ‹çš„ï¼Œå³ä½¿æ˜¯ root ä¹Ÿä¸è¡Œ**
ï¼Œå› æ­¤æ™®é€šç”¨æˆ·è¦æ˜¯é—å¿˜äº†å¯†ç ï¼Œå¯ä»¥å‚ç…§ä¸Šä¸€æ­¥ï¼Œè®©ç®¡ç†å‘˜ä½¿ç”¨ root æƒé™ä¿®æ”¹å¯†ç ï¼Œç„¶åå†å°†æ–°å¯†ç å‘ŠçŸ¥æ™®é€šç”¨æˆ·ï¼›

æ™®é€šç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å¯†ç 

```bash
passwd

```

ç›´æ¥ä½¿ç”¨ä¸Šè¿°å‘½ä»¤ passwd å³å¯ï¼Œä¹‹åå®ƒä¼šè¦æ±‚ä½ è¾“å…¥åŸå…ˆçš„å¯†ç å’Œæ–°çš„å¯†ç ã€‚

#### Linux ç§ŸèµIPåœ°å€

åœ¨ä¼ä¸šç½‘ç»œç¯å¢ƒä¸­ï¼ŒLinux æœåŠ¡å™¨é€šå¸¸é€šè¿‡ DHCPï¼ˆDynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰ è·å– IP åœ°å€ã€‚å½“ç½‘ç»œå‘ç”Ÿå˜æ›´ï¼Œæˆ–è€…éœ€è¦æ‰‹åŠ¨ç»­ç§Ÿ/é‡æ–°è·å– IP åœ°å€æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¤„ç†ï¼š

```bash
dhclient 

```

å¦‚æœç½‘ç»œæœ‰å¼‚å¸¸æˆ–è€… dhclient æ— æ³•è§£å†³é—®é¢˜ï¼Œå¯ä»¥å°è¯• systemctl restart network.service å½»åº•é‡å¯ç½‘ç»œæœåŠ¡ï¼Œç¡®ä¿ IP åœ°å€é‡æ–°è·å–ã€‚

```bash
systemctl restart network.service

```

#### Linux ç½‘å¡æ–‡ä»¶ä½ç½®

ç¼–è¾‘ä»¥ä¸‹ç½‘å¡æ–‡ä»¶

```bash
/etc/sysconfig/network-scripts/ifcfg-ens33

```

#### Linux é…ç½®ç½‘å…³ç­‰ä¿¡æ¯

```
BOOTPROTO=static
ONBOOT=yes
IPADDR=192.168.1.100
NETMASK=255.255.192.0
GATEWAY=192.168.1.254
DNS1=66.13.26.69

```

#### Linux ä¿®æ”¹ç½‘ç»œåœ°å€é‡å¯æœåŠ¡

```bash
service network restart

```

### Linux å¸¸ç”¨ç³»åˆ—å‘½ä»¤

#### netstat å‘½ä»¤

##### æŸ¥çœ‹ç½‘ç»œç«¯å£æƒ…å†µï¼ˆLinux æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€ï¼‰

```bash
netstat -anutp

```

å‚æ•°å«ä¹‰ï¼š
  
-a æ˜¾ç¤ºæ‰€æœ‰
  
-n ä»¥ipå½¢å¼æ˜¾ç¤ºå½“å‰å»ºç«‹çš„æœ‰æ•ˆè¿æ¥å’Œç«¯å£
  
-u æ˜¾ç¤ºUDPåè®®
  
-t æ˜¾ç¤ºTCPåè®®
  
-p æ˜¾ç¤ºå¯¹åº”PIDä¸ç¨‹åºå

##### å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œè¿‡æ»¤

```bash
netstat -antup | grep 8443

```

æŸ¥è¯¢ç»“æœ

```
Protocol Recv-Q Send-Q	Local Address				Foregin Address				State		PID/Program name
tcp        0      0 	0.0.0.0:9443                0.0.0.0:*                   LISTEN      11641/nginx     
tcp        0      0 	:::9443                     :::*                        LISTEN      11641/nginx     
tcp       32      0 	::ffff:132.190.99.12:47728  ::ffff:132.190.99.12:9443   CLOSE_WAIT  23626/java

```

æŸ¥è¯¢è¿›ç¨‹ä¿¡æ¯

```
[root@localhost shell]# netstat -anp | grep 8443
tcp6       0      0 :::8443                 :::*                    LISTEN      10565/java

```

#### top å‘½ä»¤

top -p æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†æƒ…å†µ

```
$ top -p è¿›ç¨‹å·

```

```
[root@centos121 ~]# top -p 80897
top - 14:02:42 up 19 days, 22:29,  7 users,  load average: 1.17, 1.47, 1.49
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu0  :   6.2/0.0     6[|                    ]     %Cpu1  :   0.0/6.2     6[|                    ]
%Cpu2  :   0.0/6.7     7[|                    ]     %Cpu3  :   0.0/0.0     0[                     ]
%Cpu4  :   0.0/6.7     7[|                    ]     %Cpu5  :   0.0/6.7     7[|                    ]
%Cpu6  :   0.0/0.0     0[                     ]     %Cpu7  :   0.0/0.0     0[                     ]
GiB Mem : 72.1/31.2     [                     ]
GiB Swap:  3.5/15.7     [                     ]

   PID USER      PR  NI    VIRT    RES  %CPU  %MEM     TIME+ S COMMAND                                
 80897 kafka     20   0   14.3g   2.1g  40.0   6.7 314:22.60 S /opt/kafka/bin/java -Xmx2G -Xm+ 

```

#### ps å‘½ä»¤

```
[root@localhost ~]# ps -ef|grep Tomcat
root      2107     1 12  2021 ?        3-05:32:50 /usr/java/jdk1.8.0_134/jre/bin/java

```

#### lsof å‘½ä»¤

[é“¾æ¥](https://www.jianshu.com/p/a3aa6b01b2e1)

ä½¿ç”¨ -i æ˜¾ç¤ºæ‰€æœ‰è¿æ¥

#### tar å‘½ä»¤

è§£å‹å‘½ä»¤

```bash
tar -zxvf xxx.tar.gz

```

å‹ç¼©å‘½ä»¤

```bash
tar -cvf xxx.tar.gz ROOT/

```

#### curl å‘½ä»¤

[é“¾æ¥](http://www.ruanyifeng.com/blog/2019/09/curl-reference.html)

#### firewall-cmd é˜²ç«å¢™å‘½ä»¤

centos 7 ä½¿ç”¨ firewall-cmd ç›¸å…³å‘½ä»¤æ¥å…³é—­é˜²ç«å¢™

##### æŸ¥çœ‹å¼€æ”¾ç«¯å£

```bash
firewall-cmd --list-all

```

##### è®¾ç½®å¼€æ”¾çš„ç«¯å£å·

```bash
firewall-cmd --add-service=http --permanent
sudo firewall-cmd --add-port=80/tcp --permanent

```

##### é‡å¯é˜²ç«å¢™

```bash
firewall-cmd --reload

```

#### iptables é˜²ç«å¢™å‘½ä»¤

#### 

##### é˜²ç«å¢™æ”¾å¼€ 80 ç«¯å£

```
[root@localhost html]# /sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT
[root@localhost html]# /etc/init.d/iptables save
[root@localhost html]# /etc/init.d/iptables restart

```

##### æŸ¥çœ‹é˜²ç«å¢™ä¿¡æ¯

```
/etc/init.d/iptables status

```

##### å…³é—­é˜²ç«å¢™æœåŠ¡

```
/etc/init.d/iptables stop

```

##### åˆ é™¤ä¸€æ¡é˜²ç«å¢™è§„åˆ™

```bash
# æŸ¥æ‰¾æ‰€æœ‰è§„åˆ™
iptables -L INPUT --line-numbers

# åˆ é™¤ä¸€æ¡è§„åˆ™
iptables -D INPUT 11 #ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ª11æ˜¯è¡Œå·ï¼Œæ˜¯iptables -L INPUT --line-numbers æ‰€æ‰“å°å‡ºæ¥çš„è¡Œå·ï¼‰

```

```bash
[root@localhost etc]# iptables -L INPUT --line-numbers
Chain INPUT (policy ACCEPT)
num  target     prot opt source               destination         
1    ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:postgres
2    ACCEPT     all  --  anywhere             anywhere             state RELATED,ESTABLISHED

[root@localhost etc]# iptables -D INPUT 1

```

##### é‡å¯ iptables

```bash
service iptables save && service iptables restart

```

##### æŒ‡å®šå¼€æ”¾ IP å’Œç«¯å£

```bash
iptables -A INPUT -p tcp -s 192.168.137.1,192.168.137.102 --dport 22 -j ACCEPT

```

##### å¯¹æ‰€æœ‰ IP ç¦æ­¢è®¿é—® 22 ç«¯å£

```bash
iptables -A INPUT -p tcp --dport 22 -j REJECT

```

##### å¯¹æ‰€æœ‰ä¸»æœºå¼€æ”¾ 5432 ç«¯å£

```bash
/sbin/iptables -I INPUT -p tcp --dport 5432 -j ACCEPT

```

### ğŸ“¢ ç»“è¯­

ç†Ÿç»ƒæŒæ¡ Linux å¸¸ç”¨å‘½ä»¤ï¼Œä¸ä»…èƒ½å¤§å¹…æå‡è¿ç»´æ•ˆç‡ï¼Œè¿˜èƒ½åœ¨ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ã€‚æŒç»­æ•´ç†ä¸­â€¦