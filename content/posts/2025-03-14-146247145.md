---
layout: post
title: "STM32配套程序接线图"
date: 2025-03-14 04:57:16 +0800
description: "江协STM32程序配套接线图"
keywords: "STM32配套程序接线图"
categories: ['Stm']
tags: ['嵌入式硬件', '单片机', 'Stm']
artid: "146247145"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146247145
    alt: "STM32配套程序接线图"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146247145
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146247145
cover: https://bing.ee123.net/img/rand?artid=146247145
image: https://bing.ee123.net/img/rand?artid=146247145
img: https://bing.ee123.net/img/rand?artid=146247145
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     STM32配套程序接线图
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/e98df5a99596400f9fc4478ee7d252ad.jpeg"/>
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p style="text-align:center">
    </p>
    <p>
     <strong>
      1  工程模板
     </strong>
    </p>
    <p style="text-align:center">
     <strong>
      <img alt="" src="https://i-blog.csdnimg.cn/direct/32c7aa9f70c049caa495e723fc16257c.jpeg"/>
     </strong>
    </p>
    <p>
     <strong>
      2 LED闪烁
     </strong>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/d7302117836b40e8be89e009cbfd9ff1.jpeg"/>
    </p>
    <p>
     <strong>
      3LED流水灯
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/5c7ef5b1289a43c0bd02d9be812ae473.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      4蜂鸣器
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/0bc7c9de398d41a2999f89bdb95f0ec2.jpeg"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <strong>
      5按键控制LED
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/f3d8d2a2e1054ba4a4ac38cd98d03eb9.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      6光敏传感器控制蜂鸣器
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/a9b7cc97024944e49e87049ff4bce577.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      7OLED显示屏
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/15d36a2cd29b4b44ae8bdad9cf0672d0.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      8对射式红外传感器计次
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/a551bee548ef47f1b452e067ae3693f7.jpeg"/>
    </p>
    <p>
     <strong>
      9旋转编码器计次
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/16441a5af9ee4c0f89d6ec43255aa96c.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      10 定时器定时中断
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/5535ffa76f3c41c99980d191b93b000e.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      11定时器外部时钟
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/9f2359a1505446389adb75ea6fd306bf.jpeg"/>
    </p>
    <p>
     <strong>
      12PWM驱动LED呼吸灯
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/66abe511b842412eab51a986ba7e6ce9.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      13
     </strong>
     <strong>
      PWM驱动舵机
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/f33a9b46a6c9469e921437dcdd31600a.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      14
     </strong>
     <span style="color:#38d8f0">
      <strong>
       PWM驱动直流电机
      </strong>
     </span>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/a6443763ac824bdebe0b07b3929b8118.jpeg"/>
    </p>
    <p>
     <strong>
      15
      <span style="color:#4da8ee">
       输入捕获模式测频率
      </span>
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/4bdf1463090345b0acf3a4af2d57ecca.jpeg"/>
    </p>
    <p>
     <strong>
      16
      <span style="color:#ffd900">
       PWMI模式测频率占空比
      </span>
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/c12a643b658042419daeff7bc8fad927.jpeg"/>
    </p>
    <p>
     <strong>
      17
      <span style="color:#4da8ee">
       PWM测速
      </span>
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/1373cb08e06444d780682e19468c2054.jpeg"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <strong>
      18
      <span style="color:#4da8ee">
       AD单通道
      </span>
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/6fddda03e45e481f9de3a404ad7a774c.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      19
      <span style="color:#4da8ee">
       AD多通道
      </span>
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/5d1acda612bb425296a253c03caefdff.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      20
     </strong>
     <span style="color:#a2e043">
      <strong>
       DMA数据转运
      </strong>
     </span>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/3e9201ff18264d798eae9eed236f6ded.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      21
     </strong>
     串口发送
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/b0b3ca5b303f402d9c0c7246e5018cfa.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      22串口发送加接收
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/c1472343b055417f97c499f10635f2bb.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      23串口发送HEX数据包
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/6a2cc24c429746138ff63279a217e24e.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      24串口发送文本数据包
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/d38f65a60bcf4c7c9719072f613751cb.jpeg"/>
    </p>
    <p>
     <strong>
      25
     </strong>
     <strong>
      软件I2C读写MPU6050
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/683de25afa1349129c9a391999e3277f.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      26软件SPI读写W25Q64
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/1320a8d441a643c29fc687587d8870c0.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      27硬件SPI读写W25Q64
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/4f9c39d3571f4f44b73193f40d409164.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      28读写备份寄存器
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/480c5fabaf444657988d6ec159f4ffb4.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      29实时时钟
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/6e83ce73da1b4f08a37634d3039a4768.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      30修改主频
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/485c9b3cfdb94cf28dc90f6c3bb789f9.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      31
     </strong>
     <strong>
      睡眠模式+串口发送+接收
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/92c48316548f47e9abb7a63e9b1e9d4d.jpeg"/>
    </p>
    <p>
     <strong>
      32
     </strong>
     停止模式+对射式红外传感器计次
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/1f8d14f7b7fe463389d5e8713c18eaf6.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      33待机模式+实时时钟
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/334d655909674865b37f7dc47aec8073.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      34独立看门狗
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/de9050e0a229483b838e8a25f2ff1c28.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      35窗口看门狗
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/821bbae85aeb48c89ce9bdb78100ab19.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      36窗口看门狗
     </strong>
    </p>
    <p>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/b62d61c5f86c47738e33cd87448c958e.jpeg"/>
    </p>
    <p>
     <strong>
      37读写内部FLASH
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/461b39238111407dae6df87d0703ed3c.jpeg"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      38读写芯片ID
     </strong>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     旋转编码器计次
    </p>
    <p>
     include "stm32f10x.h"                  // Device header
     <br/>
     #include "Delay.h"
     <br/>
     #include "OLED.h"
     <br/>
     #include "Encoder.h"
    </p>
    <p>
     int16_t Num;            //定义待被旋转编码器调节的变量
    </p>
    <p>
     int main(void)
     <br/>
     {
     <!-- -->
     <br/>
     /*模块初始化*/
     <br/>
     OLED_Init();        //OLED初始化
     <br/>
     Encoder_Init();        //旋转编码器初始化
     <br/>
     <br/>
     /*显示静态字符串*/
     <br/>
     OLED_ShowString(1, 1, "Num:");            //1行1列显示字符串Num:
     <br/>
     <br/>
     while (1)
     <br/>
     {
     <!-- -->
     <br/>
     Num += Encoder_Get();                //获取自上此调用此函数后，旋转编码器的增量值，并将增量值加到Num上
     <br/>
     OLED_ShowSignedNum(1, 5, Num, 5);    //显示Num
     <br/>
     }
     <br/>
     }
    </p>
    <p>
    </p>
    <p>
     /********************OLED,H********************/
    </p>
    <p>
     #ifndef __OLED_H
     <br/>
     #define __OLED_H
    </p>
    <p>
     void OLED_Init(void);
     <br/>
     void OLED_Clear(void);
     <br/>
     void OLED_ShowChar(uint8_t Line, uint8_t Column, char Char);
     <br/>
     void OLED_ShowString(uint8_t Line, uint8_t Column, char *String);
     <br/>
     void OLED_ShowNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);
     <br/>
     void OLED_ShowSignedNum(uint8_t Line, uint8_t Column, int32_t Number, uint8_t Length);
     <br/>
     void OLED_ShowHexNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);
     <br/>
     void OLED_ShowBinNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);
    </p>
    <p>
     #endif
    </p>
    <p>
     /********************OLED,C********************/
    </p>
    <p>
     #include "stm32f10x.h"
     <br/>
     #include "OLED_Font.h"
    </p>
    <p>
     /*引脚配置*/
     <br/>
     #define OLED_W_SCL(x)        GPIO_WriteBit(GPIOB, GPIO_Pin_8, (BitAction)(x))//SCL PB8
     <br/>
     #define OLED_W_SDA(x)        GPIO_WriteBit(GPIOB, GPIO_Pin_9, (BitAction)(x))//SDA PB9
    </p>
    <p>
     /*引脚初始化*/
     <br/>
     void OLED_I2C_Init(void)
     <br/>
     {
     <!-- -->
     <br/>
     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);
     <br/>
     <br/>
     GPIO_InitTypeDef GPIO_InitStructure;
     <br/>
     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_OD;
     <br/>
     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
     <br/>
     GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;
     <br/>
     GPIO_Init(GPIOB, &amp;GPIO_InitStructure);
     <br/>
     GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
     <br/>
     GPIO_Init(GPIOB, &amp;GPIO_InitStructure);
     <br/>
     <br/>
     OLED_W_SCL(1);
     <br/>
     OLED_W_SDA(1);
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  I2C开始
     <br/>
     * @param  无
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_I2C_Start(void)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_W_SDA(1);
     <br/>
     OLED_W_SCL(1);
     <br/>
     OLED_W_SDA(0);
     <br/>
     OLED_W_SCL(0);
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  I2C停止
     <br/>
     * @param  无
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_I2C_Stop(void)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_W_SDA(0);
     <br/>
     OLED_W_SCL(1);
     <br/>
     OLED_W_SDA(1);
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  I2C发送一个字节
     <br/>
     * @param  Byte 要发送的一个字节
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_I2C_SendByte(uint8_t Byte)
     <br/>
     {
     <!-- -->
     <br/>
     uint8_t i;
     <br/>
     for (i = 0; i &lt; 8; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_W_SDA(!!(Byte &amp; (0x80 &gt;&gt; i)));
     <br/>
     OLED_W_SCL(1);
     <br/>
     OLED_W_SCL(0);
     <br/>
     }
     <br/>
     OLED_W_SCL(1);    //额外的一个时钟，不处理应答信号
     <br/>
     OLED_W_SCL(0);
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED写命令
     <br/>
     * @param  Command 要写入的命令
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_WriteCommand(uint8_t Command)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_I2C_Start();
     <br/>
     OLED_I2C_SendByte(0x78);        //从机地址
     <br/>
     OLED_I2C_SendByte(0x00);        //写命令
     <br/>
     OLED_I2C_SendByte(Command);
     <br/>
     OLED_I2C_Stop();
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED写数据
     <br/>
     * @param  Data 要写入的数据
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_WriteData(uint8_t Data)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_I2C_Start();
     <br/>
     OLED_I2C_SendByte(0x78);        //从机地址
     <br/>
     OLED_I2C_SendByte(0x40);        //写数据
     <br/>
     OLED_I2C_SendByte(Data);
     <br/>
     OLED_I2C_Stop();
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED设置光标位置
     <br/>
     * @param  Y 以左上角为原点，向下方向的坐标，范围：0~7
     <br/>
     * @param  X 以左上角为原点，向右方向的坐标，范围：0~127
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_SetCursor(uint8_t Y, uint8_t X)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_WriteCommand(0xB0 | Y);                    //设置Y位置
     <br/>
     OLED_WriteCommand(0x10 | ((X &amp; 0xF0) &gt;&gt; 4));    //设置X位置高4位
     <br/>
     OLED_WriteCommand(0x00 | (X &amp; 0x0F));            //设置X位置低4位
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED清屏
     <br/>
     * @param  无
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_Clear(void)
     <br/>
     {
     <br/>
     uint8_t i, j;
     <br/>
     for (j = 0; j &lt; 8; j++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_SetCursor(j, 0);
     <br/>
     for(i = 0; i &lt; 128; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_WriteData(0x00);
     <br/>
     }
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED显示一个字符
     <br/>
     * @param  Line 行位置，范围：1~4
     <br/>
     * @param  Column 列位置，范围：1~16
     <br/>
     * @param  Char 要显示的一个字符，范围：ASCII可见字符
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_ShowChar(uint8_t Line, uint8_t Column, char Char)
     <br/>
     {
     <br/>
     uint8_t i;
     <br/>
     OLED_SetCursor((Line - 1) * 2, (Column - 1) * 8);        //设置光标位置在上半部分
     <br/>
     for (i = 0; i &lt; 8; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_WriteData(OLED_F8x16[Char - ' '][i]);            //显示上半部分内容
     <br/>
     }
     <br/>
     OLED_SetCursor((Line - 1) * 2 + 1, (Column - 1) * 8);    //设置光标位置在下半部分
     <br/>
     for (i = 0; i &lt; 8; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_WriteData(OLED_F8x16[Char - ' '][i + 8]);        //显示下半部分内容
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED显示字符串
     <br/>
     * @param  Line 起始行位置，范围：1~4
     <br/>
     * @param  Column 起始列位置，范围：1~16
     <br/>
     * @param  String 要显示的字符串，范围：ASCII可见字符
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_ShowString(uint8_t Line, uint8_t Column, char *String)
     <br/>
     {
     <!-- -->
     <br/>
     uint8_t i;
     <br/>
     for (i = 0; String[i] != '\0'; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column + i, String[i]);
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED次方函数
     <br/>
     * @retval 返回值等于X的Y次方
     <br/>
     */
     <br/>
     uint32_t OLED_Pow(uint32_t X, uint32_t Y)
     <br/>
     {
     <!-- -->
     <br/>
     uint32_t Result = 1;
     <br/>
     while (Y--)
     <br/>
     {
     <!-- -->
     <br/>
     Result *= X;
     <br/>
     }
     <br/>
     return Result;
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED显示数字（十进制，正数）
     <br/>
     * @param  Line 起始行位置，范围：1~4
     <br/>
     * @param  Column 起始列位置，范围：1~16
     <br/>
     * @param  Number 要显示的数字，范围：0~4294967295
     <br/>
     * @param  Length 要显示数字的长度，范围：1~10
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_ShowNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length)
     <br/>
     {
     <!-- -->
     <br/>
     uint8_t i;
     <br/>
     for (i = 0; i &lt; Length; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column + i, Number / OLED_Pow(10, Length - i - 1) % 10 + '0');
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED显示数字（十进制，带符号数）
     <br/>
     * @param  Line 起始行位置，范围：1~4
     <br/>
     * @param  Column 起始列位置，范围：1~16
     <br/>
     * @param  Number 要显示的数字，范围：-2147483648~2147483647
     <br/>
     * @param  Length 要显示数字的长度，范围：1~10
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_ShowSignedNum(uint8_t Line, uint8_t Column, int32_t Number, uint8_t Length)
     <br/>
     {
     <!-- -->
     <br/>
     uint8_t i;
     <br/>
     uint32_t Number1;
     <br/>
     if (Number &gt;= 0)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column, '+');
     <br/>
     Number1 = Number;
     <br/>
     }
     <br/>
     else
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column, '-');
     <br/>
     Number1 = -Number;
     <br/>
     }
     <br/>
     for (i = 0; i &lt; Length; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column + i + 1, Number1 / OLED_Pow(10, Length - i - 1) % 10 + '0');
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED显示数字（十六进制，正数）
     <br/>
     * @param  Line 起始行位置，范围：1~4
     <br/>
     * @param  Column 起始列位置，范围：1~16
     <br/>
     * @param  Number 要显示的数字，范围：0~0xFFFFFFFF
     <br/>
     * @param  Length 要显示数字的长度，范围：1~8
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_ShowHexNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length)
     <br/>
     {
     <!-- -->
     <br/>
     uint8_t i, SingleNumber;
     <br/>
     for (i = 0; i &lt; Length; i++)
     <br/>
     {
     <!-- -->
     <br/>
     SingleNumber = Number / OLED_Pow(16, Length - i - 1) % 16;
     <br/>
     if (SingleNumber &lt; 10)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column + i, SingleNumber + '0');
     <br/>
     }
     <br/>
     else
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column + i, SingleNumber - 10 + 'A');
     <br/>
     }
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED显示数字（二进制，正数）
     <br/>
     * @param  Line 起始行位置，范围：1~4
     <br/>
     * @param  Column 起始列位置，范围：1~16
     <br/>
     * @param  Number 要显示的数字，范围：0~1111 1111 1111 1111
     <br/>
     * @param  Length 要显示数字的长度，范围：1~16
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_ShowBinNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length)
     <br/>
     {
     <!-- -->
     <br/>
     uint8_t i;
     <br/>
     for (i = 0; i &lt; Length; i++)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowChar(Line, Column + i, Number / OLED_Pow(2, Length - i - 1) % 2 + '0');
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * @brief  OLED初始化
     <br/>
     * @param  无
     <br/>
     * @retval 无
     <br/>
     */
     <br/>
     void OLED_Init(void)
     <br/>
     {
     <!-- -->
     <br/>
     uint32_t i, j;
     <br/>
     <br/>
     for (i = 0; i &lt; 1000; i++)            //上电延时
     <br/>
     {
     <!-- -->
     <br/>
     for (j = 0; j &lt; 1000; j++);
     <br/>
     }
     <br/>
     <br/>
     OLED_I2C_Init();            //端口初始化
     <br/>
     <br/>
     OLED_WriteCommand(0xAE);    //关闭显示
     <br/>
     <br/>
     OLED_WriteCommand(0xD5);    //设置显示时钟分频比/振荡器频率
     <br/>
     OLED_WriteCommand(0x80);
     <br/>
     <br/>
     OLED_WriteCommand(0xA8);    //设置多路复用率
     <br/>
     OLED_WriteCommand(0x3F);
     <br/>
     <br/>
     OLED_WriteCommand(0xD3);    //设置显示偏移
     <br/>
     OLED_WriteCommand(0x00);
     <br/>
     <br/>
     OLED_WriteCommand(0x40);    //设置显示开始行
     <br/>
     <br/>
     OLED_WriteCommand(0xA1);    //设置左右方向，0xA1正常 0xA0左右反置
     <br/>
     <br/>
     OLED_WriteCommand(0xC8);    //设置上下方向，0xC8正常 0xC0上下反置
    </p>
    <p>
     OLED_WriteCommand(0xDA);    //设置COM引脚硬件配置
     <br/>
     OLED_WriteCommand(0x12);
     <br/>
     <br/>
     OLED_WriteCommand(0x81);    //设置对比度控制
     <br/>
     OLED_WriteCommand(0xCF);
    </p>
    <p>
     OLED_WriteCommand(0xD9);    //设置预充电周期
     <br/>
     OLED_WriteCommand(0xF1);
    </p>
    <p>
     OLED_WriteCommand(0xDB);    //设置VCOMH取消选择级别
     <br/>
     OLED_WriteCommand(0x30);
    </p>
    <p>
     OLED_WriteCommand(0xA4);    //设置整个显示打开/关闭
    </p>
    <p>
     OLED_WriteCommand(0xA6);    //设置正常/倒转显示
    </p>
    <p>
     OLED_WriteCommand(0x8D);    //设置充电泵
     <br/>
     OLED_WriteCommand(0x14);
    </p>
    <p>
     OLED_WriteCommand(0xAF);    //开启显示
     <br/>
     <br/>
     OLED_Clear();                //OLED清屏
     <br/>
     }
    </p>
    <p>
     /**********************ENCODER,H****************************/
    </p>
    <p>
     #ifndef __ENCODER_H
     <br/>
     #define __ENCODER_H
    </p>
    <p>
     void Encoder_Init(void);
     <br/>
     int16_t Encoder_Get(void);
    </p>
    <p>
     #endif
     <br/>
     /***********************ENCODER,C***************************/
    </p>
    <p>
     #include "stm32f10x.h"                  // Device header
    </p>
    <p>
     /**
     <br/>
     * 函    数：编码器初始化
     <br/>
     * 参    数：无
     <br/>
     * 返 回 值：无
     <br/>
     */
     <br/>
     void Encoder_Init(void)
     <br/>
     {
     <!-- -->
     <br/>
     /*开启时钟*/
     <br/>
     RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM3, ENABLE);            //开启TIM3的时钟
     <br/>
     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);            //开启GPIOA的时钟
     <br/>
     <br/>
     /*GPIO初始化*/
     <br/>
     GPIO_InitTypeDef GPIO_InitStructure;
     <br/>
     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
     <br/>
     GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6 | GPIO_Pin_7;
     <br/>
     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
     <br/>
     GPIO_Init(GPIOA, &amp;GPIO_InitStructure);                            //将PA6和PA7引脚初始化为上拉输入
     <br/>
     <br/>
     /*时基单元初始化*/
     <br/>
     TIM_TimeBaseInitTypeDef TIM_TimeBaseInitStructure;                //定义结构体变量
     <br/>
     TIM_TimeBaseInitStructure.TIM_ClockDivision = TIM_CKD_DIV1;     //时钟分频，选择不分频，此参数用于配置滤波器时钟，不影响时基单元功能
     <br/>
     TIM_TimeBaseInitStructure.TIM_CounterMode = TIM_CounterMode_Up; //计数器模式，选择向上计数
     <br/>
     TIM_TimeBaseInitStructure.TIM_Period = 65536 - 1;               //计数周期，即ARR的值
     <br/>
     TIM_TimeBaseInitStructure.TIM_Prescaler = 1 - 1;                //预分频器，即PSC的值
     <br/>
     TIM_TimeBaseInitStructure.TIM_RepetitionCounter = 0;            //重复计数器，高级定时器才会用到
     <br/>
     TIM_TimeBaseInit(TIM3, &amp;TIM_TimeBaseInitStructure);             //将结构体变量交给TIM_TimeBaseInit，配置TIM3的时基单元
     <br/>
     <br/>
     /*输入捕获初始化*/
     <br/>
     TIM_ICInitTypeDef TIM_ICInitStructure;                            //定义结构体变量
     <br/>
     TIM_ICStructInit(&amp;TIM_ICInitStructure);                            //结构体初始化，若结构体没有完整赋值
     <br/>
     //则最好执行此函数，给结构体所有成员都赋一个默认值
     <br/>
     //避免结构体初值不确定的问题
     <br/>
     TIM_ICInitStructure.TIM_Channel = TIM_Channel_1;                //选择配置定时器通道1
     <br/>
     TIM_ICInitStructure.TIM_ICFilter = 0xF;                            //输入滤波器参数，可以过滤信号抖动
     <br/>
     TIM_ICInit(TIM3, &amp;TIM_ICInitStructure);                            //将结构体变量交给TIM_ICInit，配置TIM3的输入捕获通道
     <br/>
     TIM_ICInitStructure.TIM_Channel = TIM_Channel_2;                //选择配置定时器通道2
     <br/>
     TIM_ICInitStructure.TIM_ICFilter = 0xF;                            //输入滤波器参数，可以过滤信号抖动
     <br/>
     TIM_ICInit(TIM3, &amp;TIM_ICInitStructure);                            //将结构体变量交给TIM_ICInit，配置TIM3的输入捕获通道
     <br/>
     <br/>
     /*编码器接口配置*/
     <br/>
     TIM_EncoderInterfaceConfig(TIM3, TIM_EncoderMode_TI12, TIM_ICPolarity_Rising, TIM_ICPolarity_Rising);
     <br/>
     //配置编码器模式以及两个输入通道是否反相
     <br/>
     //注意此时参数的Rising和Falling已经不代表上升沿和下降沿了，而是代表是否反相
     <br/>
     //此函数必须在输入捕获初始化之后进行，否则输入捕获的配置会覆盖此函数的部分配置
     <br/>
     <br/>
     /*TIM使能*/
     <br/>
     TIM_Cmd(TIM3, ENABLE);            //使能TIM3，定时器开始运行
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * 函    数：获取编码器的增量值
     <br/>
     * 参    数：无
     <br/>
     * 返 回 值：自上此调用此函数后，编码器的增量值
     <br/>
     */
     <br/>
     int16_t Encoder_Get(void)
     <br/>
     {
     <!-- -->
     <br/>
     /*使用Temp变量作为中继，目的是返回CNT后将其清零*/
     <br/>
     int16_t Temp;
     <br/>
     Temp = TIM_GetCounter(TIM3);
     <br/>
     TIM_SetCounter(TIM3, 0);
     <br/>
     return Temp;
     <br/>
     }
     <br/>
     /*************************main.C*************************/
    </p>
    <p>
     #include "stm32f10x.h"                  // Device header
     <br/>
     #include "Delay.h"
     <br/>
     #include "OLED.h"
     <br/>
     #include "Timer.h"
     <br/>
     #include "Encoder.h"
    </p>
    <p>
     int16_t Speed;            //定义速度变量
    </p>
    <p>
     int main(void)
     <br/>
     {
     <!-- -->
     <br/>
     /*模块初始化*/
     <br/>
     OLED_Init();        //OLED初始化
     <br/>
     Timer_Init();        //定时器初始化
     <br/>
     Encoder_Init();        //编码器初始化
     <br/>
     <br/>
     /*显示静态字符串*/
     <br/>
     OLED_ShowString(1, 1, "Speed:");        //1行1列显示字符串Speed:
     <br/>
     <br/>
     while (1)
     <br/>
     {
     <!-- -->
     <br/>
     OLED_ShowSignedNum(1, 7, Speed, 5);    //不断刷新显示编码器测得的最新速度
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     /**
     <br/>
     * 函    数：TIM2中断函数
     <br/>
     * 参    数：无
     <br/>
     * 返 回 值：无
     <br/>
     * 注意事项：此函数为中断函数，无需调用，中断触发后自动执行
     <br/>
     *           函数名为预留的指定名称，可以从启动文件复制
     <br/>
     *           请确保函数名正确，不能有任何差异，否则中断函数将不能进入
     <br/>
     */
     <br/>
     void TIM2_IRQHandler(void)
     <br/>
     {
     <!-- -->
     <br/>
     if (TIM_GetITStatus(TIM2, TIM_IT_Update) == SET)        //判断是否是TIM2的更新事件触发的中断
     <br/>
     {
     <!-- -->
     <br/>
     Speed = Encoder_Get();                                //每隔固定时间段读取一次编码器计数增量值，即为速度值
     <br/>
     TIM_ClearITPendingBit(TIM2, TIM_IT_Update);            //清除TIM2更新事件的中断标志位
     <br/>
     //中断标志位必须清除
     <br/>
     //否则中断将连续不断地触发，导致主程序卡死
     <br/>
     }
     <br/>
     }
     <br/>
     //linking...
     <br/>
     //Program Size: Code=3648 RO-data=1788 RW-data=4 ZI-data=1636
     <br/>
     //".\Objects\Project.axf" - 0 Error(s), 0 Warning(s).
     <br/>
     //Build Time Elapsed:  00:00:09 2025 3 15
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f637a686169692f:61727469636c652f64657461696c732f313436323437313435" class_="artid" style="display:none">
 </p>
</div>


