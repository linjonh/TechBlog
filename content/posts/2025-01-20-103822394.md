---
layout: post
title: "CTSCTS-VerifyGTS测试以及GMS认证介绍"
date: 2025-01-20 17:31:28 +0800
description: "目录                    一、一些概念        二、GMS认证       "
keywords: "android gts 三个等级"
categories: ['Android']
tags: ['Gts', 'Gms', 'Cts']
artid: "103822394"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=103822394
    alt: "CTSCTS-VerifyGTS测试以及GMS认证介绍"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=103822394
featuredImagePreview: https://bing.ee123.net/img/rand?artid=103822394
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     CTS、CTS Verify、GTS测试以及GMS认证介绍
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <div class="postbody">
    </div>
    <div class="blogpost-body cnblogs-markdown" id="cnblogs_post_body">
     <div class="toc">
      <p class="toc-title">
       目录
      </p>
      <div class="toc-list">
       <ul>
        <li>
         <a href="#一一些概念" rel="nofollow">
          一、一些概念
         </a>
        </li>
        <li>
         <a href="#二gms认证" rel="nofollow">
          二、GMS认证
         </a>
         <ul>
          <li>
           <a href="#认证背景" rel="nofollow">
            2.1 认证背景
           </a>
          </li>
          <li>
           <a href="#gms认证目的" rel="nofollow">
            2.2 GMS认证目的
           </a>
          </li>
          <li>
           <a href="#gms认证要求" rel="nofollow">
            2.3 GMS认证要求
           </a>
          </li>
          <li>
           <a href="#gms认证流程" rel="nofollow">
            2.4 GMS认证流程
           </a>
          </li>
          <li>
           <a href="#mada协议申请流程" rel="nofollow">
            2.5 MADA协议申请流程
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#三cts测试" rel="nofollow">
          三、CTS测试
         </a>
         <ul>
          <li>
           <a href="#cts测试介绍" rel="nofollow">
            3.1 CTS测试介绍
           </a>
          </li>
          <li>
           <a href="#cts测试的目的" rel="nofollow">
            3.2 CTS测试的目的
           </a>
          </li>
          <li>
           <a href="#cts测试套件目录文档结构" rel="nofollow">
            3.4 CTS测试套件目录文档结构
           </a>
          </li>
          <li>
           <a href="#cts测试环境准备" rel="nofollow">
            3.5 CTS测试环境准备
           </a>
           <ul>
            <li>
             <a href="#测试环境" rel="nofollow">
              3.5.1 测试环境
             </a>
            </li>
            <li>
             <a href="#测试准备工作" rel="nofollow">
              3.5.2 测试准备工作
             </a>
            </li>
            <li>
             <a href="#手机端配置" rel="nofollow">
              3.5.3 手机端配置
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#cts测试流程" rel="nofollow">
            3.5 CTS测试流程
           </a>
          </li>
          <li>
           <a href="#查看测试结果" rel="nofollow">
            3.6 查看测试结果
           </a>
           <ul>
            <li>
             <a href="#测试结果存放路径" rel="nofollow">
              3.6.1 测试结果存放路径
             </a>
            </li>
            <li>
             <a href="#测试日志存放路径" rel="nofollow">
              3.6.2 测试日志存放路径
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
        <li>
         <a href="#四gts测试" rel="nofollow">
          四、GTS测试
         </a>
         <ul>
          <li>
           <a href="#gts测试介绍" rel="nofollow">
            4.1 GTS测试介绍
           </a>
          </li>
          <li>
           <a href="#gts授权级别" rel="nofollow">
            4.2 GTS授权级别
           </a>
          </li>
          <li>
           <a href="#gts测试结果展示" rel="nofollow">
            4.4 GTS测试结果展示
           </a>
           <ul>
            <li>
             <a href="#五获取gms认证" rel="nofollow">
              五、获取GMS认证
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
       </ul>
      </div>
     </div>
     <p>
      <font face="黑体" size="9">
       目录
      </font>
     </p>
     <h2 id="一一些概念">
      一、一些概念
     </h2>
     <p>
      <font color="blue" face="楷体" size="5">
       ①
       <strong>
        CTS测试
       </strong>
      </font>
     </p>
     <p>
      以自动化测试为基础，测试Android系统的兼容性；
     </p>
     <p>
      <font color="blue" face="楷体" size="5">
       ②
       <strong>
        CTS Verify
       </strong>
      </font>
     </p>
     <p>
      一个手工测试的apk，完成自动化测试无法完成的操作（锁屏、蓝牙、摄像头等）；
     </p>
     <p>
      <img alt="CTS Verify下载图标" src="https://i-blog.csdnimg.cn/blog_migrate/e75b886a68c421c2f1861a3bda31754d.png"/>
     </p>
     <p>
      <font color="blue" face="楷体" size="5">
       ③
       <strong>
        GTS
       </strong>
      </font>
     </p>
     <p>
      手机出口到国外，并且通过运营商出售，就i必须通过GTS测试；
     </p>
     <p>
      <font color="blue" face="楷体" size="5">
       ④
       <strong>
        GMS认证周期
       </strong>
      </font>
     </p>
     <p>
      手机通过CTS测试、CTS Verify以及GTS测试之后，就可以拿到GMS认证。但是GMS认证周期较长，一般需要3个月至半年。
     </p>
     <p>
      <font color="blue" face="楷体" size="5">
       ⑤
       <strong>
        MADA协议
       </strong>
      </font>
     </p>
     <p>
      全称Mobile Application Distribution Agreement（移动应用软件分发协议）。是谷歌和Android厂商之间签署的一个协议，根据该协议，手机厂商在推出采用Android设备前，必须预装所有Google应用，并且，要把Google Search、Google Play放在手机首屏，并以Google Search作为默认的搜索引擎。
     </p>
     <h2 id="二gms认证">
      二、GMS认证
     </h2>
     <h3 id="认证背景">
      2.1 认证背景
     </h3>
     <p>
      手机没有GMS认证，那么对于手机出口商而言，就没有了生产的产品走不了运营商通道，所以在欧美等由运营商主导的手机市场，GMS认证是十分必要的。但是没有GMS认证，Google也不会做限制，只是进不了运营商市场，第三世界市场，出于成本考虑（GMS认证需要收费），也就没装GMS认证。
     </p>
     <h3 id="gms认证目的">
      2.2 GMS认证目的
     </h3>
     <ol>
      <li>
       提高产品android系统的兼容性和稳定性
      </li>
      <li>
       授权Google的手机APP和服务
      </li>
      <li>
       授权使用Android LOGO
      </li>
      <li>
       产品可以进入欧美市场
      </li>
     </ol>
     <h3 id="gms认证要求">
      2.3 GMS认证要求
     </h3>
     <ol>
      <li>
       必须申请与Google签署MADA协议（网站操作）
      </li>
      <li>
       产品必须使用7.0以上的安卓版本
      </li>
      <li>
       产品必须依次通过CTS测试、CTS Verify测试以及GTS测试
      </li>
      <li>
       产品还可以通过CE、FCC、BT以及WIFI等硬件认证（这一部分不是GMS认证的硬性指标）
      </li>
     </ol>
     <h3 id="gms认证流程">
      2.4 GMS认证流程
     </h3>
     <ol>
      <li>
       申请谷歌MADA协议
      </li>
      <li>
       产品做硬件测试
      </li>
      <li>
       提交测试报告给谷歌审核
      </li>
      <li>
       获得谷歌认证授权
      </li>
     </ol>
     <h3 id="mada协议申请流程">
      2.5 MADA协议申请流程
     </h3>
     <pre class="flow"><code class="hljs php">st=&gt;start: 开始：https:<span class="hljs-comment">//www.android.com/certified/partners/</span>
op1=&gt;operation: 填写公司基本信息
op2=&gt;operation: 向谷歌发起MADA请求
cond=&gt;condition: 谷歌评估审核
e=&gt;end: 结束
st-&gt;op1-&gt;op2-&gt;cond
cond(yes)-&gt;e
cond(no)-&gt;op1</code></pre>
     <h2 id="三cts测试">
      三、CTS测试
     </h2>
     <h3 id="cts测试介绍">
      3.1 CTS测试介绍
     </h3>
     <p>
      CTS测试全称为系列兼容测试（Compatibility Test suite），CTS是为了测试手机是否符合google定义的兼容性规范（Compatibility Definition）。从而基于Android的应用程序能在基于同一个api版本的设备上面运行。通过CTS测试的设备可以获得Android的商标，并且享受Android Market的权限。
      <br/>
      CTS测试是一个基于
      <strong>
       uiautomator安卓原生自动化框架
      </strong>
      运行的自动化测试。通过CTS测试，保证系统的安全性和稳定性。
     </p>
     <h3 id="cts测试的目的">
      3.2 CTS测试的目的
     </h3>
     <p>
      由于Google系统的开源性，很多手机厂商基于安卓系统做出了深度优化，从而造成了安卓移动终端的碎片化，导致android终端的兼容性差的问题，严重影响用户体验。手机通过CTS测试，是市场得到了一个通过的规范：
     </p>
     <ol>
      <li>
       让App提供更好的用户体验，用户可以选择更多的适合自己设备的app
      </li>
      <li>
       让开发者设计更高质量的app
      </li>
      <li>
       通过CTS的设备可以运行Android market
      </li>
      <li>
       <p>
        CTS是免费的，很简单
       </p>
       <h3 id="cts测试运行原理">
        3.3 CTS测试运行原理
       </h3>
       <p>
        在pc端安装CTS测试套件，安装完成后，就可以通过连接到pc端的数据线将测试用户发送至手机上，完成测试用例的执行，并且把执行结果返回给PC端。CTS测试套件下载连接如下：
        <a class="uri" href="https://source.android.com/compatibility/cts/downloads" rel="nofollow">
         https://source.android.com/compatibility/cts/downloads
        </a>
       </p>
      </li>
     </ol>
     <p>
      <img alt="CTS测试原理" src="https://i-blog.csdnimg.cn/blog_migrate/e034a7232db32b6f094fd6a19159b768.png"/>
     </p>
     <p>
      需要下载文件有：
      <strong>
       对应手机系统、架构的的测试套件以及CTS Verify
      </strong>
      、
      <strong>
       Android Compatibility Defination Document(CDD)
      </strong>
      、
      <strong>
       Compatibility Test Suite(CTS) User Manual
      </strong>
      、
      <strong>
       CTS Media1.1
      </strong>
      （音视频资料）
     </p>
     <p>
      <img alt="下载文件展示" src="https://i-blog.csdnimg.cn/blog_migrate/248e8c5b25c3dcf227f3d53b9eb6355b.png"/>
     </p>
     <h3 id="cts测试套件目录文档结构">
      3.4 CTS测试套件目录文档结构
     </h3>
     <pre><code class="language-python"><code class="hljs">CTS目录结构
    -- docs
        -- logs 运行cs产生的log文件
        -- plans 运行计划
        -- results 测试结果
        -- testcases 测试用例配置
    -- respository
    -- resource 资源文件
    -- tools 运行工具</code></code></pre>
     <h3 id="cts测试环境准备">
      3.5 CTS测试环境准备
     </h3>
     <h4 id="测试环境">
      3.5.1 测试环境
     </h4>
     <p>
      <font color="blue" size="4">
       <strong>
        ① windows
       </strong>
      </font>
     </p>
     <p>
      windows环境，需要自己重写脚本
     </p>
     <ol>
      <li>
       电脑端配置JDK/SDK的环境
      </li>
      <li>
       将解压后的测试套件（文件名android-cts）拷贝至adt目录下的sdk目录
      </li>
     </ol>
     <p>
      <font color="blue" size="4">
       <strong>
        ② Linux（推荐64位UBUNTU 10.04）
       </strong>
      </font>
     </p>
     <p>
      一般来说，linux上运行较为稳定，所以手机厂商都是在linux端跑cts测试
     </p>
     <ol>
      <li>
       电脑端配置JDK/SDK的环境
      </li>
      <li>
       将测试套件解压至pc端/data目录下
      </li>
     </ol>
     <h4 id="测试准备工作">
      3.5.2 测试准备工作
     </h4>
     <ol>
      <li>
       下载需要进行测试的软件版本(ROM)
      </li>
      <li>
       插入可用的SIM卡（双开手机，需确保卡1有sim卡）
      </li>
      <li>
       写入合法的IMEI号（
       <strong>
        手机的身份证
       </strong>
       ，每一个手机都会有唯一的一个IMEI号）
      </li>
      <li>
       连接一个可翻墙的WIFI网络（可以使用
       <strong>
        香港专线
       </strong>
       ，网络比较稳定）
      </li>
     </ol>
     <h4 id="手机端配置">
      3.5.3 手机端配置
     </h4>
     <ol>
      <li>
       手机恢复出厂设置
      </li>
      <li>
       手机语言设置为英语
      </li>
      <li>
       手机需常亮并取消锁屏
      </li>
      <li>
       开启GPS
      </li>
      <li>
       开启USB调试后勾选stay awake和allow mock location
      </li>
      <li>
       安装CtsDeviceAdmin.apk（位于android-cts/repository/testcases），进入setting-&gt;security-&gt;device administrators的前两项
      </li>
      <li>
       确保手机SD卡有&gt;1G的存储空间
      </li>
      <li>
       确保手机没有谷歌账号或其他账号存在
      </li>
      <li>
       确保手机时间和日期设置正确（连接数据后，会自动更新时间，时区选择默认时区）
       <br/>
       ...（其余在CDD文档中有定义）
      </li>
     </ol>
     <h3 id="cts测试流程">
      3.5 CTS测试流程
     </h3>
     <ol>
      <li>
       手机和PC连接，打开USB调试模式，用adb devices检查是否连接好手机
      </li>
      <li>
       在/data进入android-cts/tools/目录，执行cts-tradefed脚本
       <strong>
        进入测试环境
       </strong>
      </li>
      <li>
       在测试环境中输入以下命令进行整体测试
      </li>
     </ol>
     <pre class="bash"><code class="hljs">run cts --plan CTS
或
run cts -c android.app.cts.SystemFeaturesTest</code></pre>
     <p>
      <strong>
       注意：
      </strong>
      CTS测试会持续10+个小时
     </p>
     <p>
      <strong>
       补充：
      </strong>
      CTS测试环境基本命令介绍
      <br/>
     </p>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <table>
      <thead align="center" face="黑体">
       <tr>
        <td>
         分类
        </td>
        <td>
         命令
        </td>
        <td>
         说明
        </td>
       </tr>
      </thead>
      <tbody align="center">
       <tr>
        <td rowspan="3">
         Host
        </td>
        <td>
         help
        </td>
        <td>
         基本命令帮助说明
        </td>
       </tr>
       <tr>
        <td>
         help all
        </td>
        <td>
         基本命令帮助说明
        </td>
       </tr>
       <tr>
        <td>
         exit
        </td>
        <td>
         退出控制台
        </td>
       </tr>
       <tr>
        <td rowspan="7">
         Run
        </td>
        <td>
         run cts --plan test_plan_name
        </td>
        <td>
         运行指定计划
        </td>
       </tr>
       <tr>
        <td>
         run cts --package/-p
        </td>
        <td>
         运行指定包
        </td>
       </tr>
       <tr>
        <td>
         run cts --class/-c [--method/-m]
        </td>
        <td>
         运行指定方法
        </td>
       </tr>
       <tr>
        <td>
         run cts --continue-session session_ID
        </td>
        <td>
         继续运行指定会话session_id
        </td>
       </tr>
       <tr>
        <td>
         run cts [options] --serial/-s device_ID
        </td>
        <td>
         运行指定设备
        </td>
       </tr>
       <tr>
        <td>
         run cts [options] --shards number_of_shards
        </td>
        <td>
         运行多个设备
        </td>
       </tr>
       <tr>
        <td>
         run cts --help/--help-all
        </td>
        <td>
         运行帮助
        </td>
       </tr>
       <tr>
        <td rowspan="4">
         List
        </td>
        <td>
         l/list d/devices
        </td>
        <td>
         列出连接的设备
        </td>
       </tr>
       <tr>
        <td>
         l/list packages
        </td>
        <td>
         列出所有测试包
        </td>
       </tr>
       <tr>
        <td>
         l/list p/plans
        </td>
        <td>
         列出所有测试计划
        </td>
       </tr>
       <tr>
        <td>
         l/list r/results
        </td>
        <td>
         列出已经保存的测试结果
        </td>
       </tr>
      </tbody>
     </table>
     <p>
     </p>
     <h3 id="查看测试结果">
      3.6 查看测试结果
     </h3>
     <h4 id="测试结果存放路径">
      3.6.1 测试结果存放路径
     </h4>
     <pre class="bash"><code class="hljs">android-cts/repository/results/testResult.xml</code></pre>
     <h4 id="测试日志存放路径">
      3.6.2 测试日志存放路径
     </h4>
     <pre class="bash"><code class="hljs">android-cts/repository/logs/</code></pre>
     <p>
      <img alt="日志文件展示" src="https://i-blog.csdnimg.cn/blog_migrate/c63da5cd8ef7efb7d1279e2e2f0e038a.png"/>
     </p>
     <h2 id="四gts测试">
      四、GTS测试
     </h2>
     <h3 id="gts测试介绍">
      4.1 GTS测试介绍
     </h3>
     <p>
      谷歌移动服务测试套件（Google Mobile Services Test Suite），谷歌移动服务提供了Search、 Search by Voice、Gmail、Contact Sync、 Calendar Sync、Talk、 Maps、 Steet View、 YouTube、 Android Market (Play store)等服务，当用户使用谷歌时，谷歌可以把各种广告嵌入到谷歌的服务中。
     </p>
     <h3 id="gts授权级别">
      4.2 GTS授权级别
     </h3>
     <p>
      根据GMS，谷歌对android手机给与不同程度的授权，把搭载android系统的手机厂商分为3个级别：
     </p>
     <ol>
      <li>
       免费使用Android系统，但不内嵌GMS
      </li>
      <li>
       内嵌部分GMS，但手机不能打上谷歌的商标
      </li>
      <li>
       <p>
        内嵌所有GMS服务，也可以使用谷歌商标。如果在android手机中内置有谷歌GMS服务的话，是等同被谷歌官方认证的产品
       </p>
       <h3 id="gts测试流程">
        4.3 GTS测试流程
       </h3>
       <p>
        GTS的环境安装、执行、报告分析这一系列操作和CTS类似，只是GTS必须连接VPN。
       </p>
       <h4 id="手机环境准备">
        4.3.1 手机环境准备
       </h4>
      </li>
      <li>
       刷好GMS版本的ROM包
      </li>
      <li>
       恢复手机出厂设置
      </li>
      <li>
       设置手机、连接外网
      </li>
      <li>
       插入SIM卡，打开移动数据
      </li>
      <li>
       打开蓝牙
      </li>
      <li>
       显示中睡眠时间显示最大
      </li>
      <li>
       竖屏
      </li>
      <li>
       语言选择英语
      </li>
      <li>
       键盘选择谷歌键盘
      </li>
      <li>
       打开定位、高精度
      </li>
      <li>
       安全中锁屏选择None
      </li>
      <li>
       时间将自动获取时间和日期关闭，选择太平洋时区、24小时制
      </li>
      <li>
       <p>
        在开发者模式中打开stay awake和USB debugging
       </p>
       <h4 id="执行gts测试">
        4.3.2 执行GTS测试
       </h4>
      </li>
      <li>
       开始全部GTS测试
      </li>
     </ol>
     <pre class="bash"><code class="hljs">run gts --plan GTS</code></pre>
     <ol>
      <li>
       单跑某一模块的GTS测试
      </li>
     </ol>
     <pre class="bash"><code class="hljs">run gts -plan <span class="hljs-string">'Module Name'</span> -t <span class="hljs-string">'class name'</span></code></pre>
     <ol>
      <li>
       接着某一次中断的gts测试跑
      </li>
     </ol>
     <pre class="bash"><code class="hljs">run gts --retry session_id
其中session_id可由lr查看</code></pre>
     <h3 id="gts测试结果展示">
      4.4 GTS测试结果展示
     </h3>
     <p>
      <img alt="GTS测试结果展示" src="https://i-blog.csdnimg.cn/blog_migrate/8cee54591344e79dd623180e4e2e6fd5.png"/>
     </p>
     <h4 id="五获取gms认证">
      五、获取GMS认证
     </h4>
     <p>
      通过GMS认证后，就可以申请到一个GMS的APK的包，可以将这些谷歌应用集成到手机系统里面。通过GMS认证的手机，可以在Googie play中看到如下内容：
     </p>
     <p>
      <img alt="GMS认证结果展示" src="https://i-blog.csdnimg.cn/blog_migrate/953cc32249b67dbd9c379120558a12e4.png"/>
     </p>
    </div>
    <div id="MySignature">
    </div>
    <div class="clear">
    </div>
    <div id="blog_post_info_block">
     <div id="BlogPostCategory">
     </div>
    </div>
    <p>
     <strong>
      关注公众号，获取更多开发必备知识
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f05801040c39a705d1d2a3d96ab331b6.jpeg"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34333830343038302f:61727469636c652f64657461696c732f313033383232333934" class_="artid" style="display:none">
 </p>
</div>


