---
layout: post
title: "DNS查询"
date: 2025-03-16 12:22:23 +0800
description: "DNS 查询分为和两种方式，它们在查询过程中有不同的行为和角色分工。在递归查询中，DNS 客户端（如浏览器或操作系统）将查询请求发送给本地 DNS 服务器，并期望本地 DNS 服务器解析域名，最终返回一个明确的答案（IP 地址或错误信息）。"
keywords: "DNS查询"
categories: ['未分类']
tags: ['计算机网络']
artid: "146293282"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146293282
    alt: "DNS查询"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146293282
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146293282
cover: https://bing.ee123.net/img/rand?artid=146293282
image: https://bing.ee123.net/img/rand?artid=146293282
img: https://bing.ee123.net/img/rand?artid=146293282
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     DNS查询
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="DNS_0">
     </a>
     <strong>
      DNS查询
     </strong>
    </h2>
    <p>
     DNS 查询分为
     <strong>
      递归查询
     </strong>
     和
     <strong>
      迭代查询
     </strong>
     两种方式，它们在查询过程中有不同的行为和角色分工。以下是它们的详细说明：
    </p>
    <hr/>
    <h4>
     <a id="1_Recursive_Query_8">
     </a>
     <strong>
      1. 递归查询（Recursive Query）
     </strong>
    </h4>
    <p>
     在递归查询中，DNS 客户端（如浏览器或操作系统）将查询请求发送给本地 DNS 服务器，并期望本地 DNS 服务器
     <strong>
      完全负责
     </strong>
     解析域名，最终返回一个明确的答案（IP 地址或错误信息）。
    </p>
    <h5>
     <a id="_12">
     </a>
     <strong>
      递归查询的特点
     </strong>
     ：
    </h5>
    <p>
     • 客户端只发送一次查询请求，等待本地 DNS 服务器返回最终结果。
     <br/>
     • 本地 DNS 服务器需要完成所有查询工作，包括与其他 DNS 服务器的交互。
     <br/>
     • 如果本地 DNS 服务器没有缓存结果，它会依次向根域名服务器、顶级域名服务器、权威域名服务器发起查询，直到找到答案。
    </p>
    <h5>
     <a id="_18">
     </a>
     <strong>
      递归查询的过程
     </strong>
     ：
    </h5>
    <ol>
     <li>
      客户端向本地 DNS 服务器发送递归查询请求，例如查询
      <code>
       www.example.com
      </code>
      的 IP 地址。
     </li>
     <li>
      本地 DNS 服务器检查自己的缓存，如果有结果则直接返回。
     </li>
     <li>
      如果没有缓存，本地 DNS 服务器依次向根域名服务器、顶级域名服务器、权威域名服务器发起查询。
     </li>
     <li>
      最终，本地 DNS 服务器将查询结果返回给客户端，并缓存结果以便后续使用。
     </li>
    </ol>
    <h5>
     <a id="_25">
     </a>
     <strong>
      递归查询的适用场景
     </strong>
     ：
    </h5>
    <p>
     • 客户端通常使用递归查询，因为它不需要关心复杂的查询过程，只需等待最终结果。
     <br/>
     • 本地 DNS 服务器（如 ISP 提供的 DNS 服务器）通常支持递归查询。
    </p>
    <hr/>
    <h4>
     <a id="2_Iterative_Query_32">
     </a>
     <strong>
      2. 迭代查询（Iterative Query）
     </strong>
    </h4>
    <p>
     在迭代查询中，DNS 服务器不会完全负责解析域名，而是返回一个
     <strong>
      参考信息
     </strong>
     （如下一级域名服务器的地址），让查询方继续向其他服务器发起查询。
    </p>
    <h5>
     <a id="_36">
     </a>
     <strong>
      迭代查询的特点
     </strong>
     ：
    </h5>
    <p>
     • 查询方需要主动向多个 DNS 服务器发起查询，直到找到最终答案。
     <br/>
     • 每个 DNS 服务器只返回自己知道的信息，而不是完全解析域名。
     <br/>
     • 查询方需要根据返回的参考信息，继续向下一级服务器发起查询。
    </p>
    <h5>
     <a id="_42">
     </a>
     <strong>
      迭代查询的过程
     </strong>
     ：
    </h5>
    <ol>
     <li>
      客户端向本地 DNS 服务器发送查询请求，例如查询
      <code>
       www.example.com
      </code>
      的 IP 地址。
     </li>
     <li>
      本地 DNS 服务器检查自己的缓存，如果有结果则直接返回。
     </li>
     <li>
      如果没有缓存，本地 DNS 服务器向根域名服务器发起查询。
     </li>
     <li>
      根域名服务器返回顶级域名服务器（如
      <code>
       .com
      </code>
      服务器）的地址。
     </li>
     <li>
      本地 DNS 服务器向顶级域名服务器发起查询。
     </li>
     <li>
      顶级域名服务器返回权威域名服务器（如
      <code>
       example.com
      </code>
      服务器）的地址。
     </li>
     <li>
      本地 DNS 服务器向权威域名服务器发起查询。
     </li>
     <li>
      权威域名服务器返回
      <code>
       www.example.com
      </code>
      的 IP 地址。
     </li>
     <li>
      本地 DNS 服务器将结果返回给客户端，并缓存结果以便后续使用。
     </li>
    </ol>
    <h5>
     <a id="_54">
     </a>
     <strong>
      迭代查询的适用场景
     </strong>
     ：
    </h5>
    <p>
     • DNS 服务器之间的查询通常使用迭代查询，因为这样可以分担查询负载，避免单一服务器承担所有查询任务。
     <br/>
     • 根域名服务器、顶级域名服务器和权威域名服务器通常只支持迭代查询。
    </p>
    <hr/>
    <h4>
     <a id="_vs__61">
     </a>
     <strong>
      递归查询 vs 迭代查询
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         递归查询
        </strong>
       </th>
       <th>
        <strong>
         迭代查询
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         查询方
        </strong>
       </td>
       <td>
        客户端（如浏览器）
       </td>
       <td>
        DNS 服务器
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         返回结果
        </strong>
       </td>
       <td>
        最终答案（IP 地址或错误信息）
       </td>
       <td>
        参考信息（下一级服务器地址）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         查询过程
        </strong>
       </td>
       <td>
        本地 DNS 服务器完成所有查询工作
       </td>
       <td>
        查询方需要主动向多个服务器发起查询
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         负载
        </strong>
       </td>
       <td>
        本地 DNS 服务器承担较大负载
       </td>
       <td>
        查询负载分散到多个服务器
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         适用场景
        </strong>
       </td>
       <td>
        客户端与本地 DNS 服务器之间的查询
       </td>
       <td>
        DNS 服务器之间的查询
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="DNS__73">
     </a>
     <strong>
      DNS 查询的完整过程
     </strong>
    </h4>
    <p>
     在实际的 DNS 查询中，递归查询和迭代查询通常会结合使用：
    </p>
    <ol>
     <li>
      客户端向本地 DNS 服务器发起
      <strong>
       递归查询
      </strong>
      。
     </li>
     <li>
      本地 DNS 服务器向根域名服务器发起
      <strong>
       迭代查询
      </strong>
      。
     </li>
     <li>
      根域名服务器返回顶级域名服务器的地址。
     </li>
     <li>
      本地 DNS 服务器向顶级域名服务器发起
      <strong>
       迭代查询
      </strong>
      。
     </li>
     <li>
      顶级域名服务器返回权威域名服务器的地址。
     </li>
     <li>
      本地 DNS 服务器向权威域名服务器发起
      <strong>
       迭代查询
      </strong>
      。
     </li>
     <li>
      权威域名服务器返回最终答案。
     </li>
     <li>
      本地 DNS 服务器将结果返回给客户端。
     </li>
    </ol>
    <hr/>
    <p>
     通过递归查询和迭代查询的结合，DNS 实现了高效、可靠的域名解析服务。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f37333039323639392f:61727469636c652f64657461696c732f313436323933323832" class_="artid" style="display:none">
 </p>
</div>


