---
layout: post
title: "1分钟看懂React的那些Hooks"
date: 2025-03-10 15:01:12 +0800
description: "一分钟看懂React的那些Hook's（持续更新中）"
keywords: "1分钟看懂React的那些Hook‘s"
categories: ['未分类']
tags: ['前端框架', '前端', 'React']
artid: "146154083"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146154083
    alt: "1分钟看懂React的那些Hooks"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146154083
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146154083
cover: https://bing.ee123.net/img/rand?artid=146154083
image: https://bing.ee123.net/img/rand?artid=146154083
img: https://bing.ee123.net/img/rand?artid=146154083
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     1分钟看懂React的那些Hook‘s
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="useEffect_0">
     </a>
     一、useEffect的五指山
    </h3>
    <h5>
     <a id="1state_1">
     </a>
     1.执行时机：组件初始化,组件更新（组件内state变化）
    </h5>
    <pre><code class="prism language-javascript"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre>
    <h5>
     <a id="2_7">
     </a>
     2.执行时机：组件初始化
    </h5>
    <pre><code class="prism language-javascript"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
</code></pre>
    <h5>
     <a id="3X_13">
     </a>
     3.执行时机：组件初始化，依赖的状态发生变化（X可多个）
    </h5>
    <pre><code class="prism language-javascript"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">X</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
</code></pre>
    <h5>
     <a id="4_20">
     </a>
     4.执行时机：组件卸载
    </h5>
    <pre><code class="prism language-javascript"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>组件卸载<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre>
    <h5>
     <a id="5X_30">
     </a>
     5.执行时机：组件卸载，依赖的状态发生变化（X可多个）
    </h5>
    <pre><code class="prism language-javascript"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//这里的X是新值</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>组件卸载<span class="token punctuation">)</span>
		<span class="token comment">//这里的X是旧值（上一次状态）</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">X</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
</code></pre>
    <h3>
     <a id="useLayoutEffect_41">
     </a>
     二、useLayoutEffect
    </h3>
    <h5>
     <a id="0_reactcommitcommit_jsDOMJSDOMJSDOMcommit_42">
     </a>
     0. react的commit意在把更新提交给浏览器，commit阶段： js修改DOM前，JS开始修改DOM，JS修改DOM后。commit阶段是同步的
    </h5>
    <h6>
     <a id="1JSDOM_43">
     </a>
     1.浏览器会在JS修改DOM后开始渲染。
    </h6>
    <h6>
     <a id="2useEffectuseEffectJSDOM_44">
     </a>
     2.浏览器渲染完毕useEffect执行，但是useEffect是在JS操作DOM前调用。
    </h6>
    <h6>
     <a id="3JSDOMuseLayoutEffect_45">
     </a>
     3.JS修改DOM之后useLayoutEffect执行。
    </h6>
    <h4>
     <a id="_useEffectuseLayoutEffectJSDOM_46">
     </a>
     使用场景： 在一些页面或样式需要默认值的时候，因为useEffect在页面渲染后执行，会导致页面重新渲染，此刻需要搬出useLayoutEffect，因为他在JS修改完DOM就开始执行了，然后再渲染页面的时候，就会给用户更好的体验。
    </h4>
    <h3>
     <a id="useState_47">
     </a>
     三、useState
    </h3>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span>setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token punctuation">)</span>

<span class="token comment">//使用 展示</span>
<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">//修改</span>
<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">//函数执行后，打印依然是0 （因为组件更新是异步的）</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="useMemo_62">
     </a>
     四、useMemo
    </h3>
    <h5>
     <a id="_63">
     </a>
     场景：父子组件，子组件包含大量计算或费时活动时。
    </h5>
    <h5>
     <a id="reactrender_64">
     </a>
     原因：在react中，父组件更新，会导致子组件重新render
    </h5>
    <h5>
     <a id="useMemo_65">
     </a>
     解决：使用useMemo监听子组件是否有更新或是否需要重新计算，达到一个类似缓存的功能，来实现性能优化。
    </h5>
    <h5>
     <a id="useMemo_66">
     </a>
     缺点：代码易读性差不好维护，useMemo本身也会消耗性能
    </h5>
    <h3>
     <a id="Reactmemo_68">
     </a>
     五、React.memo
    </h3>
    <h5>
     <a id="setStateRender_69">
     </a>
     原因：只要父组件进行了setState的操作，子组件就会重新进行Render的操作。
    </h5>
    <h5>
     <a id="_memo_70">
     </a>
     解决：子组件使用 memo
    </h5>
    <h5>
     <a id="Reactmemoprops_newfunctionmemouseMemouseCallback_71">
     </a>
     缺点：React.memo是对比子组件的props引用是否一致。（传入 new的对象或function，因为每次父组件会重新创建，会导致memo失效，
     <strong>
      ！！！但可使用useMemo、useCallback破解！！！
     </strong>
     ）
    </h5>
    <h3>
     <a id="useMemouseCallback_73">
     </a>
     六、useMemo和useCallback区别
    </h3>
    <h5>
     <a id="useMemo_74">
     </a>
     缓存数据（useMemo）
    </h5>
    <h5>
     <a id="useCallback_75">
     </a>
     缓存函数（useCallback）
    </h5>
    <h3>
     <a id="useRef_76">
     </a>
     六、useRef
    </h3>
    <h5>
     <a id="Dom_77">
     </a>
     获取Dom实例
    </h5>
    <h3>
     <a id="useContext_79">
     </a>
     七、useContext
    </h3>
    <h5>
     <a id="statesetStateprops_80">
     </a>
     场景，父子孙都需要用到state和setState，层层传递会很费时，需要频繁props存取
    </h5>
    <h5>
     <a id="1_81">
     </a>
     使用，1.
    </h5>
    <h6>
     <a id="1_createContextXXX_82">
     </a>
     1.父组件
     <code>
      createContext(XXX)
     </code>
    </h6>
    <h6>
     <a id="2ContextProviderContextProvider_83">
     </a>
     2.使用
     <code>
      &lt;Context.Provider&gt;{子组件}&lt;/Context.Provider&gt;
     </code>
     包裹子组件
    </h6>
    <h6>
     <a id="3___const__XXuseContestContext_84">
     </a>
     3. 子组件
     <code>
      const XX=useContest(Context)
     </code>
    </h6>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f4165706f726e2f:61727469636c652f64657461696c732f313436313534303833" class_="artid" style="display:none">
 </p>
</div>


