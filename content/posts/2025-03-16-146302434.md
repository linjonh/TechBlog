---
layout: post
title: "åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œ-COCO-SSD-MobileNet-ç›®æ ‡æ£€æµ‹å®Œæ•´æŒ‡å—"
date: 2025-03-16 21:59:32 +0800
description: "æ— è®ºæ˜¯è¯†åˆ«é—¨å£çš„å¿«é€’åŒ…è£¹ã€ç›‘æ§èŠ±å›­é‡Œçš„å°åŠ¨ç‰©ï¼Œè¿˜æ˜¯æ‰“é€ ä¸€ä¸ªæ™ºèƒ½å®‰é˜²ç³»ç»Ÿï¼Œç›®æ ‡æ£€æµ‹æŠ€æœ¯éƒ½èƒ½è®©ä½ çš„æ ‘è“æ´¾é¡¹ç›®å¦‚è™æ·»ç¿¼ã€‚æ— éœ€æ˜‚è´µçš„ç¡¬ä»¶ï¼Œåªéœ€ä¸€ä¸ªæ™®é€šçš„æ ‘è“æ´¾å’Œæ‘„åƒå¤´ï¼Œå³å¯å¼€å¯è®¡ç®—æœºè§†è§‰çš„å¥‡å¦™ä¹‹æ—…ï¼æ ‡å‡†å·ç§¯ vs æ·±åº¦å¯åˆ†ç¦»å·ç§¯ï¼ˆæ¥æºï¼šGoogle Researchï¼‰ï¼Œæ— éœ€å¤æ‚çš„åŒºåŸŸå»ºè®®æ­¥éª¤ã€‚é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ å·²ç»æˆåŠŸåœ¨æ ‘è“æ´¾ä¸Šéƒ¨ç½²äº†å®æ—¶ç›®æ ‡æ£€æµ‹ç³»ç»Ÿï¼æ˜¯è®¡ç®—æœºè§†è§‰é¢†åŸŸæœ€æƒå¨çš„æ•°æ®é›†ä¹‹ä¸€ï¼ŒåŒ…å«ã€‚COCOæ•°æ®é›†ç¤ºä¾‹å›¾åƒï¼ˆæ¥æºï¼šCOCOå®˜ç½‘ï¼‰ï¼šOpenCV ä¸æ”¯æŒæ‘„åƒå¤´çš„åƒç´ æ ¼å¼ã€‚ï¼šé¢„å¤„ç†ä¸åå¤„ç†çš„åæ ‡è½¬æ¢é”™è¯¯ã€‚"
keywords: "åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œ COCO-SSD MobileNet ç›®æ ‡æ£€æµ‹ï¼šå®Œæ•´æŒ‡å—"
categories: ['Ai']
tags: ['è®¡ç®—æœºè§†è§‰', 'ç›®æ ‡æ£€æµ‹', 'äººå·¥æ™ºèƒ½']
artid: "146302434"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146302434
    alt: "åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œ-COCO-SSD-MobileNet-ç›®æ ‡æ£€æµ‹å®Œæ•´æŒ‡å—"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146302434
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146302434
cover: https://bing.ee123.net/img/rand?artid=146302434
image: https://bing.ee123.net/img/rand?artid=146302434
img: https://bing.ee123.net/img/rand?artid=146302434
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œ COCO-SSD MobileNet ç›®æ ‡æ£€æµ‹ï¼šå®Œæ•´æŒ‡å—
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <hr/>
    <h2>
     <a id="_COCOSSD_MobileNet__3">
     </a>
     <strong>
      åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œ COCO-SSD MobileNet ç›®æ ‡æ£€æµ‹ï¼šå®Œæ•´æŒ‡å—
     </strong>
    </h2>
    <p>
     <img alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ " src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fmiro.medium.com%2Fmax%2F1400%2F1*QhCvUz6v3Q2jT4i4aQcZ5g.jpeg&amp;pos_id=img-qBUuat1q-1742133504895">
      <br/>
      <em>
       æ ‘è“æ´¾ + æ‘„åƒå¤´ + AI = æ— é™å¯èƒ½ï¼
      </em>
     </img>
    </p>
    <hr/>
    <h3>
     <a id="1__10">
     </a>
     <strong>
      1. å¼•è¨€ï¼šè®©æ ‘è“æ´¾æ‹¥æœ‰ã€Œè§†è§‰æ™ºèƒ½ã€
     </strong>
    </h3>
    <p>
     <strong>
      ä½ æ˜¯å¦æƒ³è¿‡ï¼Œè®©ä¸€å°ä¿¡ç”¨å¡å¤§å°çš„ç”µè„‘å®æ—¶ã€Œçœ‹æ‡‚ã€å‘¨å›´çš„ä¸–ç•Œï¼Ÿ
     </strong>
     <br/>
     æ— è®ºæ˜¯è¯†åˆ«é—¨å£çš„å¿«é€’åŒ…è£¹ã€ç›‘æ§èŠ±å›­é‡Œçš„å°åŠ¨ç‰©ï¼Œè¿˜æ˜¯æ‰“é€ ä¸€ä¸ªæ™ºèƒ½å®‰é˜²ç³»ç»Ÿï¼Œç›®æ ‡æ£€æµ‹æŠ€æœ¯éƒ½èƒ½è®©ä½ çš„æ ‘è“æ´¾é¡¹ç›®å¦‚è™æ·»ç¿¼ã€‚
    </p>
    <p>
     æœ¬æŒ‡å—å°†æ‰‹æŠŠæ‰‹æ•™ä½ ï¼š
     <strong>
      å¦‚ä½•åœ¨æ ‘è“æ´¾ä¸Šéƒ¨ç½² COCO-SSD MobileNet æ¨¡å‹ï¼Œé€šè¿‡æ‘„åƒå¤´å®ç°å®æ—¶ç›®æ ‡æ£€æµ‹
     </strong>
     ã€‚æ— éœ€æ˜‚è´µçš„ç¡¬ä»¶ï¼Œåªéœ€ä¸€ä¸ªæ™®é€šçš„æ ‘è“æ´¾å’Œæ‘„åƒå¤´ï¼Œå³å¯å¼€å¯è®¡ç®—æœºè§†è§‰çš„å¥‡å¦™ä¹‹æ—…ï¼
    </p>
    <hr/>
    <h3>
     <a id="2__COCOSSD_MobileNet_19">
     </a>
     <strong>
      2. ä¸ºä»€ä¹ˆé€‰æ‹© COCO-SSD MobileNetï¼Ÿ
     </strong>
    </h3>
    <h4>
     <a id="21__21">
     </a>
     <strong>
      2.1 ç›®æ ‡æ£€æµ‹æŠ€æœ¯çš„æ¼”è¿›
     </strong>
    </h4>
    <p>
     åœ¨æ·±å…¥æŠ€æœ¯ç»†èŠ‚å‰ï¼Œæˆ‘ä»¬å…ˆå¿«é€Ÿå›é¡¾ç›®æ ‡æ£€æµ‹çš„å‘å±•å²ï¼š
    </p>
    <table>
     <thead>
      <tr>
       <th>
        ç®—æ³•
       </th>
       <th>
        ç‰¹ç‚¹
       </th>
       <th>
        é€‚ç”¨åœºæ™¯
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         R-CNN
        </strong>
       </td>
       <td>
        é«˜ç²¾åº¦ï¼Œä½†é€Ÿåº¦ææ…¢
       </td>
       <td>
        å­¦æœ¯ç ”ç©¶
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Fast R-CNN
        </strong>
       </td>
       <td>
        é€Ÿåº¦æå‡ï¼Œä»ä¾èµ–GPU
       </td>
       <td>
        æœåŠ¡å™¨ç«¯åº”ç”¨
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Faster R-CNN
        </strong>
       </td>
       <td>
        å¼•å…¥åŒºåŸŸå»ºè®®ç½‘ç»œï¼ˆRPNï¼‰
       </td>
       <td>
        é«˜ç²¾åº¦éœ€æ±‚åœºæ™¯
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         YOLO
        </strong>
       </td>
       <td>
        å®æ—¶æ£€æµ‹ï¼Œç²¾åº¦é€‚ä¸­
       </td>
       <td>
        å®æ—¶ç›‘æ§
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         SSD
        </strong>
       </td>
       <td>
        é€Ÿåº¦ä¸ç²¾åº¦å¹³è¡¡
       </td>
       <td>
        ç§»åŠ¨ç«¯/åµŒå…¥å¼
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      SSDï¼ˆSingle Shot MultiBox Detectorï¼‰
     </strong>
     çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºï¼š
     <strong>
      å•æ¬¡å‰å‘ä¼ æ’­å³å¯å®Œæˆæ‰€æœ‰ç›®æ ‡çš„å®šä½å’Œåˆ†ç±»
     </strong>
     ï¼Œæ— éœ€å¤æ‚çš„åŒºåŸŸå»ºè®®æ­¥éª¤ã€‚è¿™ä½¿å¾—å®ƒåœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šè¡¨ç°å°¤ä¸ºå‡ºè‰²ã€‚
    </p>
    <h4>
     <a id="22_MobileNet_35">
     </a>
     <strong>
      2.2 MobileNetï¼šä¸ºç§»åŠ¨ç«¯è€Œç”Ÿçš„è½»é‡çº§ç½‘ç»œ
     </strong>
    </h4>
    <p>
     <strong>
      MobileNet
     </strong>
     çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨
     <strong>
      æ·±åº¦å¯åˆ†ç¦»å·ç§¯ï¼ˆDepthwise Separable Convolutionï¼‰
     </strong>
     æ›¿ä»£æ ‡å‡†å·ç§¯ã€‚è¿™ç§è®¾è®¡å°†è®¡ç®—é‡å‡å°‘äº†
     <strong>
      8-9å€
     </strong>
     ï¼Œè€Œç²¾åº¦ä»…ä¸‹é™çº¦
     <strong>
      1%
     </strong>
     ã€‚
    </p>
    <p>
     <img alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ " src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fmiro.medium.com%2Fmax%2F1400%2F1*_SUv4lTk6lD5qilGKYsnow.png&amp;pos_id=img-MaRqhbIp-1742133504898">
      <br/>
      <em>
       æ ‡å‡†å·ç§¯ vs æ·±åº¦å¯åˆ†ç¦»å·ç§¯ï¼ˆæ¥æºï¼šGoogle Researchï¼‰
      </em>
     </img>
    </p>
    <h4>
     <a id="23_COCO_80_42">
     </a>
     <strong>
      2.3 COCO æ•°æ®é›†ï¼šè¦†ç›–80ç±»å¸¸è§ç‰©ä½“
     </strong>
    </h4>
    <p>
     <strong>
      COCOï¼ˆCommon Objects in Contextï¼‰
     </strong>
     æ˜¯è®¡ç®—æœºè§†è§‰é¢†åŸŸæœ€æƒå¨çš„æ•°æ®é›†ä¹‹ä¸€ï¼ŒåŒ…å«
     <strong>
      80 ä¸ªæ—¥å¸¸ç‰©ä½“ç±»åˆ«
     </strong>
     ï¼Œä¾‹å¦‚ï¼š
    </p>
    <ul>
     <li>
      äººç‰©ï¼ˆpersonï¼‰
     </li>
     <li>
      äº¤é€šå·¥å…·ï¼ˆcar, bicycle, airplaneï¼‰
     </li>
     <li>
      åŠ¨ç‰©ï¼ˆdog, cat, horseï¼‰
     </li>
     <li>
      å®¶å…·ï¼ˆchair, sofa, bedï¼‰
     </li>
    </ul>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/835cd9d243f1a1a9cce3f6852ab17dec.jpeg">
      <br/>
      <em>
       COCOæ•°æ®é›†ç¤ºä¾‹å›¾åƒï¼ˆæ¥æºï¼šCOCOå®˜ç½‘ï¼‰
      </em>
     </img>
    </p>
    <h4>
     <a id="24__TensorFlow_Lite__54">
     </a>
     <strong>
      2.4 ä¸ºä½•é€‰æ‹©é‡åŒ–åçš„ TensorFlow Lite æ¨¡å‹ï¼Ÿ
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       æ¨¡å‹ä½“ç§¯æ›´å°
      </strong>
      ï¼šåŸå§‹æ¨¡å‹çº¦ 25MB â†’ é‡åŒ–åä»… 4.3MB
     </li>
     <li>
      <strong>
       æ¨ç†é€Ÿåº¦æ›´å¿«
      </strong>
      ï¼š8-bit æ•´æ•°è¿ç®—æ¯” 32-bit æµ®ç‚¹è¿ç®—å¿« 2-3 å€
     </li>
     <li>
      <strong>
       å†…å­˜å ç”¨æ›´ä½
      </strong>
      ï¼šé€‚åˆæ ‘è“æ´¾æœ‰é™çš„ RAMï¼ˆé€šå¸¸ 1GB/4GBï¼‰
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="3__62">
     </a>
     <strong>
      3. ç¡¬ä»¶ä¸è½¯ä»¶å‡†å¤‡
     </strong>
    </h3>
    <h4>
     <a id="31__64">
     </a>
     <strong>
      3.1 æ‰€éœ€ç¡¬ä»¶æ¸…å•
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        ç»„ä»¶
       </th>
       <th>
        æ¨èå‹å·
       </th>
       <th>
        å¤‡æ³¨
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        æ ‘è“æ´¾
       </td>
       <td>
        Raspberry Pi 4B (4GB)
       </td>
       <td>
        3B+ ä¹Ÿå¯è¿è¡Œï¼Œä½†å¸§ç‡è¾ƒä½
       </td>
      </tr>
      <tr>
       <td>
        æ‘„åƒå¤´
       </td>
       <td>
        Raspberry Pi Camera V2
       </td>
       <td>
        æˆ– USB æ‘„åƒå¤´ï¼ˆå¦‚ Logitech C920ï¼‰
       </td>
      </tr>
      <tr>
       <td>
        ç”µæºé€‚é…å™¨
       </td>
       <td>
        5V/3A USB-C
       </td>
       <td>
        ç¡®ä¿ç¨³å®šä¾›ç”µ
       </td>
      </tr>
      <tr>
       <td>
        æ•£çƒ­è£…ç½®
       </td>
       <td>
        æ•£çƒ­ç‰‡ + é£æ‰‡
       </td>
       <td>
        é¿å…é•¿æ—¶é—´é«˜è´Ÿè½½å¯¼è‡´è¿‡çƒ­
       </td>
      </tr>
      <tr>
       <td>
        å­˜å‚¨å¡
       </td>
       <td>
        32GB Class 10
       </td>
       <td>
        å»ºè®®ä½¿ç”¨ Raspberry Pi OS Lite
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="32__74">
     </a>
     <strong>
      3.2 è½¯ä»¶ç¯å¢ƒé…ç½®
     </strong>
    </h4>
    <h5>
     <a id="_1_Raspberry_Pi_OS_76">
     </a>
     <strong>
      æ­¥éª¤ 1ï¼šå®‰è£… Raspberry Pi OS
     </strong>
    </h5>
    <p>
     æ¨èä½¿ç”¨
     <strong>
      Raspberry Pi OS (64-bit) Lite
     </strong>
     ç‰ˆæœ¬ï¼Œæœ€å°åŒ–ç³»ç»Ÿèµ„æºå ç”¨ï¼š
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># ä½¿ç”¨ Raspberry Pi Imager å·¥å…·åˆ·å†™ç³»ç»Ÿ</span>
<span class="token comment"># ä¸‹è½½åœ°å€ï¼šhttps://www.raspberrypi.com/software/</span>
</code></pre>
    <h5>
     <a id="_2_85">
     </a>
     <strong>
      æ­¥éª¤ 2ï¼šå¯ç”¨æ‘„åƒå¤´æ¥å£
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> raspi-config
<span class="token comment"># é€‰æ‹© Interfacing Options â†’ Camera â†’ Enable</span>
</code></pre>
    <h5>
     <a id="_3_92">
     </a>
     <strong>
      æ­¥éª¤ 3ï¼šå®‰è£…å¿…è¦ä¾èµ–
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> upgrade <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> python3-opencv libatlas-base-dev
</code></pre>
    <h5>
     <a id="_4_Python__99">
     </a>
     <strong>
      æ­¥éª¤ 4ï¼šåˆ›å»º Python è™šæ‹Ÿç¯å¢ƒ
     </strong>
    </h5>
    <pre><code class="prism language-bash">python3 <span class="token parameter variable">-m</span> venv tflite-env
<span class="token builtin class-name">source</span> tflite-env/bin/activate
pip <span class="token function">install</span> <span class="token parameter variable">--upgrade</span> pip
pip <span class="token function">install</span> tflite-runtime numpy pillow
</code></pre>
    <p>
     <strong>
      æ³¨æ„
     </strong>
     ï¼šå¦‚æœä½¿ç”¨ USB æ‘„åƒå¤´æ—¶é‡åˆ°é—®é¢˜ï¼Œå¯å°è¯•ï¼š
    </p>
    <pre><code class="prism language-bash">pip uninstall opencv-python
pip <span class="token function">install</span> opencv-python-headless
</code></pre>
    <hr/>
    <h3>
     <a id="4__117">
     </a>
     <strong>
      4. æ¨¡å‹ä¸‹è½½ä¸è§£æ
     </strong>
    </h3>
    <h4>
     <a id="41__119">
     </a>
     <strong>
      4.1 ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹
     </strong>
    </h4>
    <pre><code class="prism language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/tflite_models <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/tflite_models
<span class="token function">wget</span> https://storage.googleapis.com/download.tensorflow.org/models/tflite/coco_ssd_mobilenet_v1_1.0_quant_2018_06_29.zip
<span class="token function">unzip</span> coco_ssd_mobilenet_v1_1.0_quant_2018_06_29.zip
</code></pre>
    <p>
     è§£å‹åçš„å…³é”®æ–‡ä»¶ï¼š
    </p>
    <ul>
     <li>
      <code>
       detect.tflite
      </code>
      ï¼šé‡åŒ–åçš„ TensorFlow Lite æ¨¡å‹
     </li>
     <li>
      <code>
       coco_labels.txt
      </code>
      ï¼šåŒ…å« 80 ä¸ªç±»åˆ«åç§°çš„æ ‡ç­¾æ–‡ä»¶
     </li>
    </ul>
    <h4>
     <a id="42__132">
     </a>
     <strong>
      4.2 æ¨¡å‹è¾“å…¥è¾“å‡ºåˆ†æ
     </strong>
    </h4>
    <p>
     ä½¿ç”¨
     <code>
      netron
     </code>
     å·¥å…·å¯è§†åŒ–æ¨¡å‹ç»“æ„ï¼š
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> netron
python <span class="token parameter variable">-m</span> netron detect.tflite
</code></pre>
    <ul>
     <li>
      <strong>
       è¾“å…¥
      </strong>
      ï¼š
      <code>
       300x300x3
      </code>
      çš„ RGB å›¾åƒï¼ˆuint8 ç±»å‹ï¼‰
     </li>
     <li>
      <strong>
       è¾“å‡º
      </strong>
      ï¼š
      <ul>
       <li>
        æ£€æµ‹æ¡†åæ ‡ï¼ˆ[ymin, xmin, ymax, xmax]ï¼‰
       </li>
       <li>
        ç±»åˆ«ç´¢å¼•
       </li>
       <li>
        ç½®ä¿¡åº¦åˆ†æ•°
       </li>
       <li>
        æ£€æµ‹æ•°é‡
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="5__152">
     </a>
     <strong>
      5. ç¼–å†™ç›®æ ‡æ£€æµ‹ç¨‹åº
     </strong>
    </h3>
    <h4>
     <a id="51__154">
     </a>
     <strong>
      5.1 å®Œæ•´ä»£ç è§£æ
     </strong>
    </h4>
    <p>
     åˆ›å»º
     <code>
      tflite_camera.py
     </code>
     æ–‡ä»¶ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> tflite_runtime<span class="token punctuation">.</span>interpreter <span class="token keyword">as</span> tflite
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image

<span class="token comment"># åˆå§‹åŒ–æ¨¡å‹</span>
model_path <span class="token operator">=</span> <span class="token string">"/home/pi/tflite_models/detect.tflite"</span>
interpreter <span class="token operator">=</span> tflite<span class="token punctuation">.</span>Interpreter<span class="token punctuation">(</span>model_path<span class="token operator">=</span>model_path<span class="token punctuation">)</span>
interpreter<span class="token punctuation">.</span>allocate_tensors<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># è·å–è¾“å…¥è¾“å‡ºå¼ é‡ä¿¡æ¯</span>
input_details <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_input_details<span class="token punctuation">(</span><span class="token punctuation">)</span>
output_details <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_output_details<span class="token punctuation">(</span><span class="token punctuation">)</span>
height <span class="token operator">=</span> input_details<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'shape'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
width <span class="token operator">=</span> input_details<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'shape'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>

<span class="token comment"># åŠ è½½ç±»åˆ«æ ‡ç­¾</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"/home/pi/tflite_models/coco_labels.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    labels <span class="token operator">=</span> <span class="token punctuation">[</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment"># æ‰“å¼€æ‘„åƒå¤´</span>
cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">preprocess_image</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""å›¾åƒé¢„å¤„ç†ï¼šè°ƒæ•´å°ºå¯¸ã€è½¬æ¢é¢œè‰²ç©ºé—´ã€å½’ä¸€åŒ–"""</span>
    image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span>
    image_rgb <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span>
    input_data <span class="token operator">=</span> np<span class="token punctuation">.</span>expand_dims<span class="token punctuation">(</span>image_rgb<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> input_data

<span class="token keyword">def</span> <span class="token function">draw_detections</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> boxes<span class="token punctuation">,</span> classes<span class="token punctuation">,</span> scores<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""åœ¨å›¾åƒä¸Šç»˜åˆ¶æ£€æµ‹æ¡†å’Œæ ‡ç­¾"""</span>
    frame_height<span class="token punctuation">,</span> frame_width <span class="token operator">=</span> frame<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> scores<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0.5</span><span class="token punctuation">:</span>  <span class="token comment"># ç½®ä¿¡åº¦é˜ˆå€¼è®¾ä¸º50%</span>
            ymin<span class="token punctuation">,</span> xmin<span class="token punctuation">,</span> ymax<span class="token punctuation">,</span> xmax <span class="token operator">=</span> boxes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            xmin <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> xmin <span class="token operator">*</span> frame_width<span class="token punctuation">)</span><span class="token punctuation">)</span>
            xmax <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>frame_width<span class="token punctuation">,</span> xmax <span class="token operator">*</span> frame_width<span class="token punctuation">)</span><span class="token punctuation">)</span>
            ymin <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> ymin <span class="token operator">*</span> frame_height<span class="token punctuation">)</span><span class="token punctuation">)</span>
            ymax <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>frame_height<span class="token punctuation">,</span> ymax <span class="token operator">*</span> frame_height<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token punctuation">(</span>xmin<span class="token punctuation">,</span> ymin<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>xmax<span class="token punctuation">,</span> ymax<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
            label <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>labels<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>classes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">int</span><span class="token punctuation">(</span>scores<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">%"</span></span>
            cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> label<span class="token punctuation">,</span> <span class="token punctuation">(</span>xmin<span class="token punctuation">,</span> ymin<span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> frame

<span class="token keyword">while</span> cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> ret<span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    
    <span class="token comment"># é¢„å¤„ç†</span>
    input_data <span class="token operator">=</span> preprocess_image<span class="token punctuation">(</span>frame<span class="token punctuation">)</span>
    
    <span class="token comment"># æ¨ç†</span>
    interpreter<span class="token punctuation">.</span>set_tensor<span class="token punctuation">(</span>input_details<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> input_data<span class="token punctuation">)</span>
    interpreter<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># è·å–ç»“æœ</span>
    boxes <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_tensor<span class="token punctuation">(</span>output_details<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    classes <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_tensor<span class="token punctuation">(</span>output_details<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    scores <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_tensor<span class="token punctuation">(</span>output_details<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    
    <span class="token comment"># ç»˜åˆ¶æ£€æµ‹ç»“æœ</span>
    frame <span class="token operator">=</span> draw_detections<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> boxes<span class="token punctuation">,</span> classes<span class="token punctuation">,</span> scores<span class="token punctuation">)</span>
    
    <span class="token comment"># æ˜¾ç¤º</span>
    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Real-Time Detection'</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span> <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>

cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="52__236">
     </a>
     <strong>
      5.2 å…³é”®ä»£ç è¯¦è§£
     </strong>
    </h4>
    <h5>
     <a id="_238">
     </a>
     <strong>
      å›¾åƒé¢„å¤„ç†
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       å°ºå¯¸è°ƒæ•´
      </strong>
      ï¼šæ¨¡å‹è¦æ±‚è¾“å…¥ä¸º 300x300 åƒç´ 
     </li>
     <li>
      <strong>
       é¢œè‰²ç©ºé—´è½¬æ¢
      </strong>
      ï¼šOpenCV é»˜è®¤ä½¿ç”¨ BGR æ ¼å¼ï¼Œéœ€è½¬æ¢ä¸º RGB
     </li>
     <li>
      <strong>
       ç»´åº¦æ‰©å±•
      </strong>
      ï¼šæ·»åŠ  batch ç»´åº¦ï¼ˆä» (300,300,3) â†’ (1,300,300,3)ï¼‰
     </li>
    </ul>
    <h5>
     <a id="_244">
     </a>
     <strong>
      æ¨ç†ç»“æœè§£æ
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       boxes
      </strong>
      ï¼šæ£€æµ‹æ¡†åæ ‡ï¼ˆå½’ä¸€åŒ–åˆ° 0~1 ä¹‹é—´ï¼‰
     </li>
     <li>
      <strong>
       classes
      </strong>
      ï¼šç±»åˆ«ç´¢å¼•ï¼ˆå¯¹åº”
      <code>
       coco_labels.txt
      </code>
      çš„è¡Œå·ï¼‰
     </li>
     <li>
      <strong>
       scores
      </strong>
      ï¼šç½®ä¿¡åº¦ï¼ˆ0~1 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼‰
     </li>
    </ul>
    <h5>
     <a id="_250">
     </a>
     <strong>
      åå¤„ç†æŠ€å·§
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       ç½®ä¿¡åº¦è¿‡æ»¤
      </strong>
      ï¼šä»…æ˜¾ç¤ºåˆ†æ•°é«˜äº 0.5 çš„æ£€æµ‹ç»“æœ
     </li>
     <li>
      <strong>
       åæ ‡è½¬æ¢
      </strong>
      ï¼šå°†å½’ä¸€åŒ–åæ ‡è½¬æ¢ä¸ºå®é™…åƒç´ åæ ‡
     </li>
     <li>
      <strong>
       è¾¹ç•Œæ£€æŸ¥
      </strong>
      ï¼šç¡®ä¿ç»˜åˆ¶æ—¶ä¸è¶…å‡ºå›¾åƒèŒƒå›´
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="6__258">
     </a>
     <strong>
      6. æ€§èƒ½ä¼˜åŒ–æŠ€å·§
     </strong>
    </h3>
    <h4>
     <a id="61_FPS_5__260">
     </a>
     <strong>
      6.1 æå‡å¸§ç‡ï¼ˆFPSï¼‰çš„ 5 ç§æ–¹æ³•
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        é™ä½è¾“å…¥åˆ†è¾¨ç‡
       </strong>
       <br/>
       ä¿®æ”¹æ¨¡å‹è¾“å…¥å°ºå¯¸ï¼ˆéœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼‰ï¼š
      </p>
      <pre><code class="prism language-python"><span class="token comment"># å°† 300x300 æ”¹ä¸º 192x192</span>
image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">192</span><span class="token punctuation">,</span> <span class="token number">192</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        ä½¿ç”¨å¤šçº¿ç¨‹å¤„ç†
       </strong>
       <br/>
       åˆ†ç¦»æ‘„åƒå¤´æ•è·å’Œæ¨¡å‹æ¨ç†çº¿ç¨‹ï¼š
      </p>
      <pre><code class="prism language-python"><span class="token keyword">from</span> threading <span class="token keyword">import</span> Thread

<span class="token keyword">class</span> <span class="token class-name">VideoStream</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>stream <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>grabbed<span class="token punctuation">,</span> self<span class="token punctuation">.</span>frame <span class="token operator">=</span> self<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>stopped <span class="token operator">=</span> <span class="token boolean">False</span>
    
    <span class="token keyword">def</span> <span class="token function">start</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>self<span class="token punctuation">.</span>update<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self
    
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">while</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>stopped<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>grabbed<span class="token punctuation">,</span> self<span class="token punctuation">.</span>frame <span class="token operator">=</span> self<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">read</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>frame
    
    <span class="token keyword">def</span> <span class="token function">stop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>stopped <span class="token operator">=</span> <span class="token boolean">True</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        å¯ç”¨ TensorFlow Lite XNNPACK åŠ é€Ÿ
       </strong>
       <br/>
       åœ¨åˆå§‹åŒ–æ¨¡å‹æ—¶æ·»åŠ å‚æ•°ï¼š
      </p>
      <pre><code class="prism language-python">interpreter <span class="token operator">=</span> tflite<span class="token punctuation">.</span>Interpreter<span class="token punctuation">(</span>
    model_path<span class="token operator">=</span>model_path<span class="token punctuation">,</span>
    experimental_delegates<span class="token operator">=</span><span class="token punctuation">[</span>tflite<span class="token punctuation">.</span>load_delegate<span class="token punctuation">(</span><span class="token string">'libXNNPACK.so'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        è¶…é¢‘æ ‘è“æ´¾ CPU
       </strong>
       <br/>
       ç¼–è¾‘
       <code>
        /boot/config.txt
       </code>
       ï¼š
      </p>
      <pre><code class="prism language-bash"><span class="token assign-left variable">over_voltage</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">arm_freq</span><span class="token operator">=</span><span class="token number">1750</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„æ‘„åƒå¤´é©±åŠ¨
       </strong>
       <br/>
       æ”¹ç”¨
       <code>
        libcamera
       </code>
       APIï¼š
      </p>
      <pre><code class="prism language-python">cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token string">'libcamerasrc ! video/x-raw,width=640,height=480 ! videoconvert ! appsink'</span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ol>
    <h4>
     <a id="62__Edge_TPU__318">
     </a>
     <strong>
      6.2 ä½¿ç”¨ Edge TPU åŠ é€Ÿ
     </strong>
    </h4>
    <p>
     å¦‚æœä½ æœ‰
     <strong>
      Google Coral USB Accelerator
     </strong>
     ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
    </p>
    <ol>
     <li>
      <p>
       å®‰è£… Edge TPU è¿è¡Œæ—¶ï¼š
      </p>
      <pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"deb https://packages.cloud.google.com/apt coral-edgetpu-stable main"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/coral-edgetpu.list
<span class="token function">curl</span> https://packages.cloud.google.com/apt/doc/apt-key.gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libedgetpu1-std
</code></pre>
     </li>
     <li>
      <p>
       ä¸‹è½½ Edge TPU å…¼å®¹æ¨¡å‹ï¼š
      </p>
      <pre><code class="prism language-bash"><span class="token function">wget</span> https://github.com/google-coral/edgetpu/raw/master/test_data/ssd_mobilenet_v2_coco_quant_postprocess_edgetpu.tflite
</code></pre>
     </li>
     <li>
      <p>
       ä¿®æ”¹ä»£ç åŠ è½½ Edge TPU æ¨¡å‹ï¼š
      </p>
      <pre><code class="prism language-python">interpreter <span class="token operator">=</span> tflite<span class="token punctuation">.</span>Interpreter<span class="token punctuation">(</span>
    model_path<span class="token operator">=</span><span class="token string">"ssd_mobilenet_v2_coco_quant_postprocess_edgetpu.tflite"</span><span class="token punctuation">,</span>
    experimental_delegates<span class="token operator">=</span><span class="token punctuation">[</span>tflite<span class="token punctuation">.</span>load_delegate<span class="token punctuation">(</span><span class="token string">'libedgetpu.so.1'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre>
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="7__345">
     </a>
     <strong>
      7. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
     </strong>
    </h3>
    <h4>
     <a id="Q1_VIDEOIO_ERROR_V4L2_Pixel_format_of_incoming_image_is_unsupported_347">
     </a>
     <strong>
      Q1ï¼šæ‘„åƒå¤´æ— æ³•æ‰“å¼€ï¼Œæç¤º
      <code>
       VIDEOIO ERROR: V4L2: Pixel format of incoming image is unsupported
      </code>
     </strong>
    </h4>
    <p>
     <strong>
      åŸå› 
     </strong>
     ï¼šOpenCV ä¸æ”¯æŒæ‘„åƒå¤´çš„åƒç´ æ ¼å¼
     <br/>
     <strong>
      è§£å†³
     </strong>
     ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token comment"># åœ¨ cv2.VideoCapture() åæ·»åŠ ä»¥ä¸‹ä»£ç </span>
cap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FOURCC<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>VideoWriter_fourcc<span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span><span class="token string">'J'</span><span class="token punctuation">,</span><span class="token string">'P'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
cap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FRAME_WIDTH<span class="token punctuation">,</span> <span class="token number">640</span><span class="token punctuation">)</span>
cap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FRAME_HEIGHT<span class="token punctuation">,</span> <span class="token number">480</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="Q21_FPS_358">
     </a>
     <strong>
      Q2ï¼šæ¨ç†é€Ÿåº¦æ…¢ï¼ˆ&lt;1 FPSï¼‰
     </strong>
    </h4>
    <p>
     <strong>
      ä¼˜åŒ–æ­¥éª¤
     </strong>
     ï¼š
    </p>
    <ol>
     <li>
      ç¡®è®¤ä½¿ç”¨ TensorFlow Lite è€Œéå®Œæ•´ç‰ˆ TensorFlow
     </li>
     <li>
      å…³é—­ä¸å¿…è¦çš„åå°è¿›ç¨‹ï¼š
      <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl disable bluetooth.service
<span class="token function">sudo</span> systemctl disable avahi-daemon.service
</code></pre>
     </li>
     <li>
      ä½¿ç”¨è½»é‡çº§çª—å£ç®¡ç†å™¨ï¼ˆå¦‚ LXDEï¼‰
     </li>
    </ol>
    <h4>
     <a id="Q3_369">
     </a>
     <strong>
      Q3ï¼šæ£€æµ‹æ¡†ä½ç½®åç§»
     </strong>
    </h4>
    <p>
     <strong>
      åŸå› 
     </strong>
     ï¼šé¢„å¤„ç†ä¸åå¤„ç†çš„åæ ‡è½¬æ¢é”™è¯¯
     <br/>
     <strong>
      æ£€æŸ¥ç‚¹
     </strong>
     ï¼š
    </p>
    <ul>
     <li>
      ç¡®ä¿è¾“å…¥å›¾åƒå°ºå¯¸ä¸æ¨¡å‹åŒ¹é…ï¼ˆ300x300ï¼‰
     </li>
     <li>
      åæ ‡åå½’ä¸€åŒ–æ—¶ä¹˜ä»¥çš„æ˜¯åŸå§‹å›¾åƒå°ºå¯¸è€Œéæ¨¡å‹è¾“å…¥å°ºå¯¸
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="8__378">
     </a>
     <strong>
      8. æ‹“å±•åº”ç”¨ï¼šä»åŸå‹åˆ°äº§å“
     </strong>
    </h3>
    <h4>
     <a id="_1_380">
     </a>
     <strong>
      æ¡ˆä¾‹ 1ï¼šæ™ºèƒ½é—¨é“ƒç³»ç»Ÿ
     </strong>
    </h4>
    <ul>
     <li>
      æ£€æµ‹åˆ°äººæ—¶æ‹ç…§ä¿å­˜
     </li>
     <li>
      é€šè¿‡ Telegram Bot å‘é€é€šçŸ¥
     </li>
     <li>
      ä½¿ç”¨ PIR ä¼ æ„Ÿå™¨é™ä½åŠŸè€—
     </li>
    </ul>
    <h4>
     <a id="_2_385">
     </a>
     <strong>
      æ¡ˆä¾‹ 2ï¼šé‡ç”ŸåŠ¨ç‰©ç›‘æµ‹
     </strong>
    </h4>
    <ul>
     <li>
      å¤ªé˜³èƒ½ä¾›ç”µ + 4G æ¨¡å—
     </li>
     <li>
      æ£€æµ‹åˆ°ç‰¹å®šç‰©ç§æ—¶è§¦å‘å½•åƒ
     </li>
     <li>
      æ•°æ®ä¸Šä¼ è‡³äº‘ç«¯åˆ†æ
     </li>
    </ul>
    <h4>
     <a id="_3_390">
     </a>
     <strong>
      æ¡ˆä¾‹ 3ï¼šå·¥ä¸šè´¨æ£€
     </strong>
    </h4>
    <ul>
     <li>
      å®šåˆ¶è®­ç»ƒæ¨¡å‹æ£€æµ‹äº§å“ç¼ºé™·
     </li>
     <li>
      é…åˆæœºæ¢°è‡‚è‡ªåŠ¨åˆ†æ‹£
     </li>
     <li>
      ç»Ÿè®¡ç”Ÿäº§æ•°æ®ç”ŸæˆæŠ¥è¡¨
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="9__397">
     </a>
     <strong>
      9. æ€»ç»“ä¸å±•æœ›
     </strong>
    </h3>
    <p>
     é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ å·²ç»æˆåŠŸåœ¨æ ‘è“æ´¾ä¸Šéƒ¨ç½²äº†å®æ—¶ç›®æ ‡æ£€æµ‹ç³»ç»Ÿï¼
     <strong>
      å…³é”®æ”¶è·
     </strong>
     ï¼š
    </p>
    <ul>
     <li>
      âœ… ç†è§£ COCO-SSD MobileNet çš„è½»é‡çº§è®¾è®¡ç†å¿µ
     </li>
     <li>
      âœ… æŒæ¡ TensorFlow Lite åœ¨åµŒå…¥å¼è®¾å¤‡çš„éƒ¨ç½²æµç¨‹
     </li>
     <li>
      âœ… å­¦ä¼šä¼˜åŒ–æ¨ç†æ€§èƒ½çš„å®ç”¨æŠ€å·§
     </li>
    </ul>
    <p>
     <strong>
      æœªæ¥æ¢ç´¢æ–¹å‘
     </strong>
     ï¼š
    </p>
    <ul>
     <li>
      <strong>
       æ¨¡å‹å¾®è°ƒï¼ˆFine-tuningï¼‰
      </strong>
      ï¼šä½¿ç”¨è‡ªå®šä¹‰æ•°æ®é›†æå‡ç‰¹å®šåœºæ™¯çš„æ£€æµ‹ç²¾åº¦
     </li>
     <li>
      <strong>
       å¤šæ¨¡å‹èåˆ
      </strong>
      ï¼šç»“åˆå§¿æ€ä¼°è®¡ã€è¯­ä¹‰åˆ†å‰²ç­‰æŠ€æœ¯
     </li>
     <li>
      <strong>
       è¾¹ç¼˜-äº‘ååŒ
      </strong>
      ï¼šåœ¨æœ¬åœ°æ‰§è¡Œå®æ—¶æ£€æµ‹ï¼Œäº‘ç«¯è¿›è¡Œå¤§æ•°æ®åˆ†æ
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      ğŸš€ ç°åœ¨ï¼Œæ‹¿èµ·ä½ çš„æ ‘è“æ´¾ï¼Œå¼€å¯è®¡ç®—æœºè§†è§‰çš„åˆ›é€ ä¹‹æ—…å§ï¼
     </strong>
     <br/>
     ä»»ä½•é—®é¢˜æˆ–åˆ›æ„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼ ğŸ˜ŠğŸ‘‹
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f496e746572766965775f54432f:61727469636c652f64657461696c732f313436333032343334" class_="artid" style="display:none">
 </p>
</div>


