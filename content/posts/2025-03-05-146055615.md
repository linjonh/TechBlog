---
layout: post
title: "uniapp-x-学习之-uts-语言快速入门"
date: 2025-03-05 23:55:36 +0800
description: "uts全称，是一门跨平台的、高性能的、强类型的现代编程语言。Web平台/小程序，编译为JavaScriptAndroid平台，编译为KotliniOS平台，编译Swift鸿蒙OS平台，编译为ArkTSuts采用了与ts基本一致的语法规范，支持绝大部分ES6 API。但为了跨端，uts进行了一些约束和特定平台的增补。过去在js引擎下运行支持的语法，大部分在uts的处理下也可以平滑的在kotlin和swift中使用。但有一些无法抹平，需要使用条件编译。和uni-app的条件编译类似，uts。"
keywords: "uniapp中uts语法"
categories: ['跨端开发Uniapp']
tags: ['学习', 'App']
artid: "146055615"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146055615
    alt: "uniapp-x-学习之-uts-语言快速入门"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146055615
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146055615
cover: https://bing.ee123.net/img/rand?artid=146055615
image: https://bing.ee123.net/img/rand?artid=146055615
img: https://bing.ee123.net/img/rand?artid=146055615
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     uniapp x 学习之 uts 语言快速入门
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="UTS__5">
     </a>
     一、UTS 介绍
    </h2>
    <p>
     <code>
      uts
     </code>
     全称
     <code>
      uni type script
     </code>
     ，是一门
     <strong>
      跨平台
     </strong>
     的、
     <strong>
      高性能
     </strong>
     的、
     <strong>
      强类型
     </strong>
     的现代编程语言。
    </p>
    <p>
     它可以被编译为不同平台的编程语言，如：
    </p>
    <ul>
     <li>
      Web平台/小程序，编译为
      <code>
       JavaScript
      </code>
     </li>
     <li>
      Android平台，编译为
      <code>
       Kotlin
      </code>
     </li>
     <li>
      iOS平台，编译
      <code>
       Swift
      </code>
     </li>
     <li>
      鸿蒙OS平台，编译为
      <code>
       ArkTS
      </code>
     </li>
    </ul>
    <p>
     <code>
      uts
     </code>
     采用了与
     <code>
      ts
     </code>
     基本一致的语法规范，支持绝大部分
     <code>
      ES6 API
     </code>
     。
    </p>
    <blockquote>
     <p>
      但为了跨端，
      <code>
       uts
      </code>
      进行了一些约束和特定平台的增补。
      <br/>
      过去在
      <code>
       js
      </code>
      引擎下运行支持的语法，大部分在
      <code>
       uts
      </code>
      的处理下也可以平滑的在
      <code>
       kotlin
      </code>
      和
      <code>
       swift
      </code>
      中使用。但有一些无法抹平，需要使用条件编译。
     </p>
    </blockquote>
    <p>
     和
     <strong>
      uni-app
     </strong>
     的条件编译类似，
     <code>
      uts
     </code>
     也支持条件编译。写在条件编译里的，可以调用平台特有的扩展语法。
    </p>
    <h2>
     <a id="_25">
     </a>
     二、用途和关系
    </h2>
    <p>
     <code>
      uts
     </code>
     是一门语言。也仅是一门语言，不包含
     <code>
      ui
     </code>
     框架。
    </p>
    <p>
     <code>
      uvue
     </code>
     是
     <code>
      DCloud
     </code>
     提供的跨平台的、基于
     <code>
      uts
     </code>
     的、使用
     <code>
      vue
     </code>
     方式的
     <code>
      ui
     </code>
     框架。
    </p>
    <p>
     <code>
      uts
     </code>
     相当于
     <code>
      js
     </code>
     ，
     <code>
      uvue
     </code>
     相当于
     <code>
      html
     </code>
     和
     <code>
      css
     </code>
     。它们类似于
     <code>
      v8
     </code>
     和
     <code>
      webkit
     </code>
     的关系，或者类似于
     <code>
      dart
     </code>
     和
     <code>
      flutter
     </code>
     的关系。
    </p>
    <p>
     <strong>
      <code>
       uts
      </code>
      这门语言，有2个用途：
     </strong>
    </p>
    <ol>
     <li>
      开发
      <strong>
       uni-app
      </strong>
      和
      <strong>
       uni-app x
      </strong>
      的原生扩展插件：因为
      <code>
       uts
      </code>
      可以调用所有原生能力。
      <br/>
      2.
      <code>
       uts
      </code>
      和
      <code>
       uvue
      </code>
      一起组合，开发原生级的项目，也就是
      <code>
       uni-app x
      </code>
      项目。
     </li>
    </ol>
    <blockquote>
     <p>
      <code>
       uts
      </code>
      可以在
      <code>
       uni-app
      </code>
      中使用，也可以在
      <code>
       uni-app x
      </code>
      中使用。
     </p>
    </blockquote>
    <p>
     <strong>
      主语言区分：
     </strong>
    </p>
    <ol>
     <li>
      在
      <strong>
       uni-app
      </strong>
      中，主编程语言是
      <code>
       js
      </code>
      。
      <code>
       uts
      </code>
      可以开发原生插件，包括API插件和组件插件。
     </li>
     <li>
      在
      <strong>
       uni-app x
      </strong>
      中，主编程语言是
      <code>
       uts
      </code>
      。不管是应用逻辑还是扩展插件，均使用
      <code>
       uts
      </code>
      编程。仅在Web平台和iOS的
      <code>
       js
      </code>
      驱动模式下可以使用
      <code>
       js
      </code>
      。
     </li>
    </ol>
    <p>
     可以通过表格更清晰的了解
     <code>
      uts
     </code>
     语言在
     <strong>
      uni-app
     </strong>
     和
     <strong>
      uni-app x
     </strong>
     下的编译关系。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/20ad83b2992d4a88844a6247b8f8cd2a.png">
      <br/>
      <strong>
       这里的概念解释是：
      </strong>
     </img>
    </p>
    <ul>
     <li>
      <code>
       uts
      </code>
      插件，指
      <code>
       uni_modules
      </code>
      目录下
      <code>
       utssdk
      </code>
      目录下的代码。
     </li>
     <li>
      除
      <code>
       uts
      </code>
      插件外，其他都属于 普通页面和脚本，包含
      <code>
       vue、nvue、uvue
      </code>
      等页面及单独的
      <code>
       uts
      </code>
      文件。
     </li>
     <li>
      在
      <strong>
       uni-app x
      </strong>
      的
      <strong>
       iOS
      </strong>
      平台，目前普通页面和脚本是编译为
      <code>
       js
      </code>
      的，而不是
      <code>
       Swift
      </code>
      。 这个策略主要是为了解决
      <code>
       windows
      </code>
      电脑开发
      <code>
       uni-app x
      </code>
      的问题。它并不影响性能，
      <code>
       uni-app x
      </code>
      的iOS通过优化解决了
      <code>
       js
      </code>
      性能问题。同时未来也会提供
      <code>
       js
      </code>
      驱动和
      <code>
       Swift
      </code>
      驱动双选。
     </li>
    </ul>
    <p>
     <strong>
      除了查阅表格，也可以简单的记3个原则：
     </strong>
    </p>
    <ol>
     <li>
      所有的
      <code>
       uts
      </code>
      插件，都会编译为原生语言。
     </li>
     <li>
      <code>
       web
      </code>
      和小程序上，原生语言就是
      <code>
       js
      </code>
      。
     </li>
     <li>
      <code>
       App
      </code>
      上，目前仅
      <code>
       uni-app x
      </code>
      的 ·Android· 平台会编译为原生语言，其他都编译为
      <code>
       js
      </code>
      。
     </li>
    </ol>
    <h2>
     <a id="_61">
     </a>
     三、类型声明
    </h2>
    <p>
     <code>
      js
     </code>
     是无类型的，
     <code>
      TypeScript
     </code>
     的
     <code>
      type
     </code>
     就是类型的意思，给
     <code>
      js
     </code>
     加上了类型。它的类型定义方式是在变量名后面通过加冒号和类型来进行定义。
    </p>
    <p>
     <code>
      uts
     </code>
     中声明变量可以用
     <code>
      let
     </code>
     或
     <code>
      const
     </code>
     ，详见下。
    </p>
    <h3>
     <a id="31_let_65">
     </a>
     3.1 变量定义（let）
    </h3>
    <p>
     声明一个可重新赋值的变量。语法
     <code>
      let [变量名] : [类型] = 值;
     </code>
     。
    </p>
    <blockquote>
     <p>
      相当于
      <strong>
       TypeScript
      </strong>
      中的
      <code>
       let
      </code>
      、
      <strong>
       kotlin
      </strong>
      中的
      <code>
       var
      </code>
      、
      <strong>
       swift
      </strong>
      中的
      <code>
       var
      </code>
      。
     </p>
    </blockquote>
    <pre><code class="prism language-js"><span class="token keyword">let</span> <span class="token literal-property property">str</span> <span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token comment">// 声明一个字符串变量</span>
str <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span> <span class="token comment">// 重新赋值</span>
</code></pre>
    <h3>
     <a id="32_const_74">
     </a>
     3.2 常量定义（const）
    </h3>
    <p>
     声明一个只读常量，只能为其赋值一次。语法
     <code>
      const [变量名] : [类型] = 值;
     </code>
     。
    </p>
    <blockquote>
     <p>
      相当于
      <strong>
       TypeScript
      </strong>
      中的
      <code>
       const
      </code>
      、
      <strong>
       kotlin
      </strong>
      中的
      <code>
       val
      </code>
      、
      <strong>
       swift
      </strong>
      中的
      <code>
       let
      </code>
      。
     </p>
    </blockquote>
    <pre><code class="prism language-js"><span class="token keyword">const</span> <span class="token literal-property property">str</span> <span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token comment">// 声明一个字符串常量</span>
str <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span> <span class="token comment">// 报错，不允许重新赋值</span>
</code></pre>
    <p>
     🌈
     <strong>
      注意事项：
     </strong>
    </p>
    <ul>
     <li>
      当前
      <code>
       uts
      </code>
      并未限制使用
      <code>
       var
      </code>
      来声明变量，但除非你知道你在做什么，否则不要轻易使用它，因为有不同平台差异：
      <ul>
       <li>
        编译至
        <strong>
         JavaScript
        </strong>
        平台时，等同于 JavaScript 平台的
        <code>
         var
        </code>
        。存在变量提升现象，具体参考
        <code>
         var
        </code>
        和
        <code>
         let
        </code>
        的区别
       </li>
       <li>
        编译至
        <strong>
         Kotlin
        </strong>
        平台时，等同于 Kotlin 平台的
        <code>
         var
        </code>
        （允许重新赋值）
       </li>
      </ul>
     </li>
     <li>
      swift 中
      <code>
       let
      </code>
      是定义常量，而
      <code>
       uts
      </code>
      和
      <code>
       ts
      </code>
      中，
      <code>
       let
      </code>
      是定义变量。注意勿混淆。
      <br/>
      类型定义的冒号，左右可以有一个空格，也可以没有空格。
      <code>
       let str:string 和 let str :
      </code>
     </li>
     <li>
      <code>
       string
      </code>
      和
      <code>
       let str :string
      </code>
      和
      <code>
       let str: string
      </code>
      都是合法的。
     </li>
    </ul>
    <h3>
     <a id="33__92">
     </a>
     3.3 变量命名规则
    </h3>
    <p>
     在
     <code>
      uts
     </code>
     中，使用变量名需要遵守一定的规则。
    </p>
    <ul>
     <li>
      变量名称可以包含数字和字母。
     </li>
     <li>
      除了下划线
      <code>
       _
      </code>
      外，不能包含其他特殊字符，包括空格。
     </li>
     <li>
      变量名不能以数字开头。
     </li>
    </ul>
    <h3>
     <a id="34__100">
     </a>
     3.4 方法参数及返回值类型定义
    </h3>
    <p>
     方法的参数、返回值，也通过冒号定义。
    </p>
    <p>
     如下示例，方法
     <code>
      test
     </code>
     ，有一个参数
     <code>
      score
     </code>
     ，是
     <code>
      number
     </code>
     类型，方法返回值类型为
     <code>
      boolean
     </code>
     类型。
    </p>
    <pre><code class="prism language-ts"><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>score<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>score<span class="token operator">&gt;=</span><span class="token number">60</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token number">61</span><span class="token punctuation">)</span> <span class="token comment">// 返回true</span>
</code></pre>
    <p>
     方法无返回值时，使用
     <code>
      :void
     </code>
     。
    </p>
    <pre><code class="prism language-ts"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x <span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span> y <span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> z <span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> y
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span>
	<span class="token comment">// 不需要return</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="35_vue_data_120">
     </a>
     3.5 vue data类型定义
    </h3>
    <p>
     <code>
      vue
     </code>
     选项式开发时，冒号被用于赋值，无法通过
     <code>
      let
     </code>
     、
     <code>
      const
     </code>
     和冒号来定义
     <code>
      data
     </code>
     数据的类型。
    </p>
    <p>
     此时可以使用字面量赋值自动推导；也可以使用
     <code>
      as
     </code>
     关键字来显式声明类型。
    </p>
    <pre><code class="prism language-ts"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"uts"</span><span class="token operator">&gt;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
				s1 <span class="token operator">:</span> <span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token comment">// 根据字面量推导为string</span>
				n1 <span class="token operator">:</span> <span class="token number">0</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token comment">// 这里其实可以根据字面量自动推导，as number写不写都行</span>
				n2<span class="token punctuation">,</span> <span class="token comment">// 不合法，必须指定类型</span>
				n3 <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token comment">// 不合法，uts不支持undefined，必须通过冒号初始化赋值，哪怕赋值为null，见下</span>
				n4 <span class="token operator">:</span> <span class="token keyword">null</span> <span class="token keyword">as</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token comment">// 合法。定义为可为null的数字，初始值是null，但在使用n4前必须为其赋值数字。（number | null）是一个或的写法，前后顺序没有关系。uts的联合类型只支持 |null 。</span>
				year<span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token comment">// 在data里，目前无法通过变量类型推导data项的类型，需使用 as 显式声明类型为number</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
    <blockquote>
     <p>
      🌈注意：述示例仅在 uni-app x 的
      <code>
       uvue
      </code>
      页面生效。老版 uni-app，即
      <code>
       js
      </code>
      引擎版，不支持在页面里写
      <code>
       uts
      </code>
      代码，只支持在
      <code>
       uts
      </code>
      插件里写
      <code>
       uts
      </code>
      代码。
     </p>
    </blockquote>
    <h2>
     <a id="_144">
     </a>
     四、设计思路
    </h2>
    <p>
     <code>
      uts
     </code>
     这门语言不是为了发明中国自己的语言而诞生的，它是为了寻找跨平台开发的最佳方案。
    </p>
    <p>
     跨平台有几种做法：
    </p>
    <ol>
     <li>
      利用一种各平台都支持的语言，比如js。之前的uni-app就是这么做的。
     </li>
     <li>
      把A平台的语言翻译成B、C、D平台的语言。比如kotlin编译为js。
     </li>
     <li>
      重新设计一门与各平台无关的语言，独立的规范，较重的运行时。比如dart。还有跨windows、mac、linux的java，也是这种思路。
     </li>
    </ol>
    <p>
     A翻译B、C、D其实是一条不归路。因为这些语言设计之初就是为了服务它自己的平台，所以A、B、C、D有很多无法兼容的设计，没办法顺畅翻译。想走这条路的产品也大多被扔进了垃圾桶。
    </p>
    <blockquote>
     <p>
      所以如果开发者期待
      <code>
       uts
      </code>
      完全兼容
      <code>
       ts
      </code>
      ，那就期待错了。
      <code>
       ts
      </code>
      直接翻译为
      <code>
       kotlin
      </code>
      、
      <code>
       swift
      </code>
      是不现实的。
     </p>
    </blockquote>
    <p>
     <strong>
      而全新语言，又会有几个问题：
     </strong>
    </p>
    <ol>
     <li>
      较重的运行时，会增大发行包体积、增加内存消耗、减缓运行性能。
     </li>
     <li>
      新语言与系统原生语言需要通信，通信耗时会造成性能损失。详见评测
      <br/>
      而uts的设计，不是上述3种方案中的某个，也完美的规避了上述3个方案的缺点。
     </li>
    </ol>
    <p>
     <code>
      uts
     </code>
     是全面了解
     <code>
      ts、kotlin、swift、arkts
     </code>
     等不同的语言后，全新设计的一套跨平台语言。
    </p>
    <p>
     它抽象了各个平台语言的共性，保证了跨平台的兼容，比如
     <code>
      uts
     </code>
     设计了
     <code>
      number
     </code>
     类型，并且通过编译 + 运行时的综合方案，在全平台实现了
     <code>
      number
     </code>
     。
    </p>
    <p>
     同时
     <code>
      uts
     </code>
     又支持各平台原生语言的所有特性，比如
     <code>
      kotlin
     </code>
     的
     <code>
      int
     </code>
     ，只不过这些特性的写法需要写条件编译，因为它们无法跨平台。
    </p>
    <p>
     由于编译为平台原生语言，所以
     <code>
      uts
     </code>
     天生没有跨语言通信成本，也不需要新语言较重的运行时，对包体积、内存占用、运行性能的影响非常小。
    </p>
    <blockquote>
     <p>
      所以
      <code>
       uts
      </code>
      被称为最佳的跨平台解决方案。
     </p>
    </blockquote>
    <p>
     但不容易兼得的是用户的历史习惯，
     <code>
      uts
     </code>
     在努力照顾
     <code>
      ts
     </code>
     开发者的习惯，尽可能贴近
     <code>
      ts
     </code>
     。
    </p>
    <ul>
     <li>
      只有在编译到浏览器或小程序等
      <code>
       js
      </code>
      环境时，开发者才能完全使用所有
      <code>
       ts
      </code>
      特性。
     </li>
     <li>
      编译为
      <code>
       kotlin
      </code>
      和
      <code>
       swift
      </code>
      时，开发者需要做好准备，学习
      <code>
       uts
      </code>
      的跨平台约束。
     </li>
    </ul>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f6d73733335393638313039312f:61727469636c652f64657461696c732f313436303535363135" class_="artid" style="display:none">
 </p>
</div>


