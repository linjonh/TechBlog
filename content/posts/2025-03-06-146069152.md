---
arturl_encode: "68747470:733a2f2f626c6f672e6373646e2e6e65742f41755f7573742f:61727469636c652f64657461696c732f313436303639313532"
layout: post
title: "ReactAxios"
date: 2025-03-06 21:55:28 +08:00
description: "axioså¯ä»¥åœ¨æµè§ˆå™¨å’Œnode.jsä¸¤è¾¹è·‘ï¼Œå¯ä»¥å‘æœåŠ¡ç«¯å‘èµ·ajaxè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥åœ¨node.jsé‡Œè¿è¡Œï¼Œå‘è¿œç«¯æœåŠ¡å‘é€httpè¯·æ±‚è·å–å¤±è´¥äº†ï¼ŒæŠ¥é”™404äº†æŸ¥äº†åŠå¤œå‘ç°å‰åç«¯ç«¯å£å·ä¸åŒæ¶‰å«Œè·¨åŸŸï¼ˆCORSï¼‰é—®é¢˜ï¼Œæ­¤æ—¶è¦ä¹ˆä¿®æ”¹å‰ç«¯ï¼Œè¦ä¹ˆä¿®æ”¹åç«¯ï¼Œæ¶ˆé™¤è·¨åŸŸé—®é¢˜æˆ‘é€‰æ‹©äº†æŠŠäºŒè€…ç«¯å£å·æ”¹æˆä¸€æ ·çš„ï¼Œå°±ä¸è·¨åŸŸäº†å¥½äº†ï¼Œç°åœ¨å˜æˆè¿™æ ·äº†ï¼ŒæŠ¥é”™è¿˜æ˜¯404GPTç”¨å®ƒæœ€åçš„æ³¢çº¹å‘Šè¯‰æˆ‘ï¼Œç”¨liver serverï¼Œä¼šè‡ªåŠ¨å¸®æˆ‘è¿è¡Œä¸€ä¸ªé™æ€æœåŠ¡å™¨å†æŠŠåç«¯ç«¯å£å·æ”¹ä¸ºå’Œå‰ç«¯ä¸€æ ·çš„å°±å¥½äº†è¿™ä¹ˆé‡è¦çš„ä¸œè¥¿ä¸ºä»€ä¹ˆæ²¡äººè¯´ï¼ï¼"
keywords: "React:Axios"
categories: ['React']
tags: ['Json', 'Ajax']
artid: "146069152"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146069152
    alt: "ReactAxios"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146069152
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146069152
cover: https://bing.ee123.net/img/rand?artid=146069152
image: https://bing.ee123.net/img/rand?artid=146069152
img: https://bing.ee123.net/img/rand?artid=146069152
---

# React:Axios

axioså¯ä»¥åœ¨æµè§ˆå™¨å’Œnode.jsä¸¤è¾¹è·‘ï¼Œå¯ä»¥å‘æœåŠ¡ç«¯å‘èµ·ajaxè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥åœ¨node.jsé‡Œè¿è¡Œï¼Œå‘è¿œç«¯æœåŠ¡å‘é€httpè¯·æ±‚

[Axiosä¸­æ–‡æ–‡æ¡£ | Axiosä¸­æ–‡ç½‘](https://www.axios-http.cn/ "Axiosä¸­æ–‡æ–‡æ¡£ | Axiosä¸­æ–‡ç½‘")

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>

</head>
<body>
    <script>
        console.log(axios)
        
    </script>
</body>
</html>
```

è·å–å¤±è´¥äº†ï¼ŒæŠ¥é”™404äº†

æŸ¥äº†åŠå¤œå‘ç°å‰åç«¯ç«¯å£å·ä¸åŒæ¶‰å«Œè·¨åŸŸï¼ˆCORSï¼‰é—®é¢˜ï¼Œæ­¤æ—¶è¦ä¹ˆä¿®æ”¹å‰ç«¯ï¼Œè¦ä¹ˆä¿®æ”¹åç«¯ï¼Œæ¶ˆé™¤è·¨åŸŸé—®é¢˜

æˆ‘é€‰æ‹©äº†æŠŠäºŒè€…ç«¯å£å·æ”¹æˆä¸€æ ·çš„ï¼Œå°±ä¸è·¨åŸŸäº†

```html
json-server --watch db.json --port 8080

```

å¥½äº†ï¼Œç°åœ¨å˜æˆè¿™æ ·äº†ï¼ŒæŠ¥é”™è¿˜æ˜¯404

![](https://i-blog.csdnimg.cn/direct/4d198c56d4e1457f9b771f01363a59b2.png)

GPTç”¨å®ƒæœ€åçš„æ³¢çº¹å‘Šè¯‰æˆ‘ï¼Œç”¨liver serverï¼Œä¼šè‡ªåŠ¨å¸®æˆ‘è¿è¡Œä¸€ä¸ªé™æ€æœåŠ¡å™¨

![](https://i-blog.csdnimg.cn/direct/9824dabbe36f42a7b10c245ab0142a73.png)

å†æŠŠåç«¯ç«¯å£å·æ”¹ä¸ºå’Œå‰ç«¯ä¸€æ ·çš„å°±å¥½äº†

![](https://i-blog.csdnimg.cn/direct/3476dac0ce53429487f6a28dc164b95b.png)

è¿™ä¹ˆé‡è¦çš„ä¸œè¥¿ä¸ºä»€ä¹ˆæ²¡äººè¯´ï¼ï¼

## axiosAPIæ¥å£

###### axiosï¼ˆé…ç½®ï¼‰

```html
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>axiosåŸºæœ¬ä½¿ç”¨</title>
    <link crossorigin="anonymous" href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
</head>
<body>
    <div class="container">
        <h2 class="page-header">åŸºæœ¬ä½¿ç”¨</h2>
        <button class="btn btn-primary"> å‘é€GETè¯·æ±‚ </button>
        <button class="btn btn-warning" > å‘é€POSTè¯·æ±‚ </button>
        <button class="btn btn-success"> å‘é€ PUT è¯·æ±‚ </button>
        <button class="btn btn-danger"> å‘é€ DELETE è¯·æ±‚ </button>
    </div>
    <script>
        //è·å–æŒ‰é’®
        const btns = document.querySelectorAll('button');
        //ç¬¬ä¸€ä¸ªæŒ‰é’®
btns[0].onclick=function(){
    //å‘é€ajaxè¯·æ±‚
    axios(
        {
            //è¯·æ±‚ç±»å‹ï¼šGET
            method:'GET',
            //è¯·æ±‚URLï¼Œæ³¨æ„ç«¯å£å·
            url:'http://localhost:52896'
        }).then(reponse=>{
            console.log(reponse)
            
        })
   
}
    </script>
</body>

</html>
```

ç‚¹å‡»getå‘é€è¯·æ±‚

![](https://i-blog.csdnimg.cn/direct/4c4593901d0148fba08cc93c9abf4fd4.png)

axiosæ˜¯åŸºäºpromiseçš„ï¼Œä»–çš„æ¯ä¸ªè¯·æ±‚ï¼ˆå¦‚
`get`
ã€
`post`
ã€
`put`
ç­‰ï¼‰éƒ½è¿”å›ä¸€ä¸ªpromiseï¼Œå› ä¸ºç›´æ¥è¿”å›çš„æ˜¯ä¸€ä¸ªpromise,æ‰€ä»¥åé¢å¯ä»¥ç›´æ¥æ¥thenæ¥å¤„ç†æˆåŠŸ/å¤±è´¥çš„å›è°ƒå‡½æ•°

axiosè¯·æ±‚æˆåŠŸåï¼Œä¼šå°†æœåŠ¡å™¨çš„å“åº”å°è£…æˆä¸€ä¸ª
**å“åº”å¯¹è±¡**
ï¼Œå¹¶ä¼ é€’ç»™
`.then()`
çš„å›è°ƒå‡½æ•°ã€‚

ç„¶åæŠŠreponseå½“ä½œä¸€ä¸ªaxioså°è£…çš„
**å“åº”å¯¹è±¡**
åšä¸ºå‚æ•°ä¼ å…¥å›è°ƒå‡½æ•°å†…

å¯ä»¥çœ‹è§å¼‚æ­¥è¯·æ±‚æˆåŠŸ

![](https://i-blog.csdnimg.cn/direct/45fcb1290fa947ca9865958be1f3caeb.png)

ä¸ºä»€ä¹ˆæˆ‘çš„æ‰“å¼€é‡Œé¢ä¸æ˜¯æ•°æ®

![](https://i-blog.csdnimg.cn/direct/7690b6220dc34beabd95e037bce8ada3.png)

åŸæ¥æ˜¯æˆ‘çš„urlé”™äº†

![](https://i-blog.csdnimg.cn/direct/2bb40ede29f54c87be9cc895e9f7ec1c.png)

è¿™ä¸‹å¯¹äº†

![](https://i-blog.csdnimg.cn/direct/c25f08e7e0634cdf9f2a09ac2cf1777d.png)

å¦‚æœåœ¨æµè§ˆå™¨é‡Œä¸€é—ªå°±è¿‡å»äº†ï¼Œéœ€è¦åœ¨æµè§ˆå™¨ä¿ç•™æ—¥å¿—

![](https://i-blog.csdnimg.cn/direct/9ae474a95e8349feb6e2a739b429513b.png)

axioså°±åƒå°è£…äº†ajaxçš„promise

## è¯·æ±‚æ–¹æ³•åˆ«å

ä¸ºæ–¹ä¾¿èµ·è§ï¼Œå·²ä¸ºæ‰€æœ‰å¸¸è§çš„è¯·æ±‚æ–¹æ³•æä¾›äº†åˆ«åã€‚

### axios.request(config)

```javascript
  btns[0].onclick=function(){ 
    axios.request({
        method:'GET',
        url:'http://localhost:52896/comments'
    }).then(response=>{
        console.log(response)
    })
}
```

![](https://i-blog.csdnimg.cn/direct/cfc43f1106f74c6fb9025b617faa3a52.png)

### axios.post(url[, data[, config]])

dataä¸ºè¯·æ±‚ä½“ï¼Œconfigæ˜¯å¯é€‰é€‰é¡¹

```javascript
btns[1].onclick=function(){
    axios.post(
        'http://localhost:52896/comments',
      {"body": "å–œå¤§æ™®å¥”",
      "postId": 2
    }
).then(response=>{
        console.log(response)
    })
}


```

![](https://i-blog.csdnimg.cn/direct/30dd3098ce354e0db5376a6ec18a1007.png)

## axioså“åº”å¯¹è±¡

æ¯æ¬¡å‘é€è¯·æ±‚ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªaxioså“åº”å¯¹è±¡ï¼Œè¿™æ˜¯å®ƒçš„å…·ä½“ç»“æ„

![](https://i-blog.csdnimg.cn/direct/97b5d123c59b48058a4d067805d2e982.png)

configæ˜¯é…ç½®å¯¹è±¡ ï¼Œé‡Œé¢åŒ…å«äº†è¯·æ±‚ç±»å‹ï¼Œè¯·æ±‚urlï¼Œè¯·æ±‚ä½“

![](https://i-blog.csdnimg.cn/direct/449ab62ea1e54db092206944f6435764.png)

dataæ˜¯å“åº”ä½“ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨è¿”å›çš„ç»“æœ

dataä¸ºä»€ä¹ˆæ˜¯ä¸ªå¯¹è±¡ï¼Ÿæ˜¯å› ä¸ºaxiosè‡ªåŠ¨å°†è¿”å›çš„jsonè½¬ä¸ºå¯¹è±¡ï¼Œæ–¹ä¾¿å¯¹ç»“æœè¿›è¡Œå¤„ç†

![](https://i-blog.csdnimg.cn/direct/ccafbd24a64944f28bcdf5bf54557751.png)

headersæ˜¯ç›¸åº”çš„å¤´ä¿¡æ¯

![](https://i-blog.csdnimg.cn/direct/60b6de6dff9e466da098589095f81f85.png)

requestä¿å­˜çš„æ˜¯åŸç”Ÿçš„Ajaxè¯·æ±‚å¯¹è±¡ ï¼Œaxioså‘é€Ajaxè¯·æ±‚éœ€è¦ç”¨åˆ°XMLHttpRequest

æ¯•ç«Ÿå®˜ç½‘è¯´äº†ğŸ‘‡

> Axios æ˜¯ä¸€ä¸ªåŸºäº
> *[promise](https://javascript.info/promise-basics "promise")*
> ç½‘ç»œè¯·æ±‚åº“ï¼Œä½œç”¨äº
> [node.js](https://nodejs.org/ "node.js")
> å’Œæµè§ˆå™¨ä¸­ã€‚ å®ƒæ˜¯
> *[isomorphic](https://www.lullabot.com/articles/what-is-an-isomorphic-application "isomorphic")*
> çš„(å³åŒä¸€å¥—ä»£ç å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨å’Œnode.jsä¸­)ã€‚åœ¨æœåŠ¡ç«¯å®ƒä½¿ç”¨åŸç”Ÿ node.js
> `http`
> æ¨¡å—, è€Œåœ¨å®¢æˆ·ç«¯ (æµè§ˆç«¯) åˆ™ä½¿ç”¨
> **XMLHttpRequests**
> ã€‚

ä¸‹é¢çš„200æ˜¯å“åº”çš„çŠ¶æ€ç ï¼ŒOKæ˜¯å“åº”çš„çŠ¶æ€å­—ç¬¦ä¸²

![](https://i-blog.csdnimg.cn/direct/c7b28d437084413fb36bce7eb30d4a53.png)

### Config

ä¸€äº›é…ç½®å¯¹è±¡çš„è¯´æ˜

```javascript
{
  //urlæ˜¯æŒ‡æ˜è¯·æ±‚è¦å‘ç»™è°ï¼Œå®Œæ•´çš„è¯·æ±‚åœ°å€
  url: '/user',

  // è®¾ç½®è¯·æ±‚ç±»å‹
  method: 'get', 

 // è®¾å®šurlçš„åŸºç¡€ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚çš„æ ¹è·¯å¾„
 //axioså†…éƒ¨ä¼šè‡ªåŠ¨å°†urlå’ŒbaseURLåšç»“åˆï¼Œè·å–æœ€ç»ˆçš„urlç»“æœ

 //ç®€åŒ–è¯·æ±‚è·¯å¾„ï¼Œå¯ä»¥åªå†™åé¢çš„è·¯å¾„ï¼Œä¸ç”¨å†™åŸŸåå’Œåè®®
  baseURL: 'https://some-domain.com/api/',


  //å¯¹è¯·æ±‚çš„æ•°æ®åšå¤„ç†ï¼Œå‘æœåŠ¡å™¨å‘é€å¤„ç†åçš„ç»“æœ
  transformRequest: [function (data, headers) {
    return data;
  }],

  //ä¹Ÿæ˜¯å¯¹è¯·æ±‚çš„æ•°æ®åšå¤„ç†ï¼Œå‘é€ç»™æœåŠ¡å™¨å¤„ç†åçš„ç»“æœ
    transformResponse: [function (data) {
    return data;
  }],

 //é…ç½®è¯·æ±‚å¤´ä¿¡æ¯ï¼Œåœ¨æŸäº›é¡¹ç›®è¿›è¡Œèº«ä»½æ ¡éªŒï¼Œå¯ä»¥åœ¨å¤´ä¿¡æ¯é‡Œè¿›è¡Œé…ç½®
  headers: {'X-Requested-With': 'XMLHttpRequest'},

//æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥å°†æ•°æ®ä»¥æŸ¥è¯¢å‚æ•°çš„å½¢å¼é™„åŠ åˆ°urlé‡Œ
//æœªä½¿ç”¨ params çš„ URL: https://api.example.com/data
//ä½¿ç”¨ params çš„ URL: https://api.example.com/data?name=John&age=30
params: {
    ID: 12345
  },

//å‚æ•°åºåˆ—åŒ–çš„é…ç½®é¡¹ï¼Œç”¨çš„ç›¸å¯¹è¾ƒå°‘ï¼Œå¯¹è¯·æ±‚çš„å‚æ•°åšåºåˆ—åŒ–ï¼Œå°† params å¯¹è±¡è½¬æ¢ä¸º URL æŸ¥è¯¢å­—ç¬¦ä¸²
 paramsSerializer: {
    encode?: (param: string): string => {  }, 
    serialize?: (params: Record<string, any>, options?: ParamsSerializerOptions ), 
    indexes: false  
  },

//è¶…æ—¶æ—¶é—´
 timeout: 1000, 
//è·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦æºå¸¦cookie
 withCredentials: false,

//å¯¹è¯·æ±‚è®¾ç½®ï¼Œä¸€ç§æ˜¯ajaxï¼Œä¸€ç§æ˜¯åœ¨node.jsé‡Œå‘é€http
  adapter: function (config) {
    /* ... */
  },

//è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œå¯¹è¯·æ±‚åŸºç¡€éªŒè¯
 auth: {
    username: 'janedoe',
    password: 's00pers3cret'
  },

//å¯¹å“åº”ä½“ç±»å‹çš„è®¾ç½®ï¼Œé»˜è®¤æ˜¯jsonï¼Œåœ¨è¿”å›çš„æ—¶å€™ä»jsonä¼šè½¬ä¸ºå¯¹è±¡
responseType: 'json',

//å“åº”ç»“æœçš„ç¼–ç 
 responseEncoding: 'utf8',

//è·¨åŸŸè¯·æ±‚ï¼Œå¯¹cookieçš„åå­—è¿›è¡Œè®¾ç½®
xsrfCookieName: 'XSRF-TOKEN',

//è®¾ç½®å¤´ä¿¡æ¯
xsrfHeaderName: 'X-XSRF-TOKEN',

//å®‰å…¨è®¾ç½®ï¼Œä¿è¯è¯·æ±‚æ¥è‡ªè‡ªå·±çš„å®¢æˆ·ç«¯ï¼Œä¿æŠ¤ä½œç”¨
 withXSRFToken: boolean | undefined | ((config: InternalAxiosRequestConfig) => boolean | undefined),

//ä¸Šä¼ çš„æ—¶å€™è¿›è¡Œå›è°ƒ
onUploadProgress: function ({loaded, total, progress, bytes, estimated, rate, upload = true}) {
  },

//ä¸‹è½½çš„æ—¶å€™è¿›è¡Œå›è°ƒ 
 onDownloadProgress: function ({loaded, total, progress, bytes, estimated, rate, download = true}) {
  },

//è®¾ç½®httpå“åº”çš„æœ€å¤§å°ºå¯¸
maxContentLength: 2000,

//è®¾ç½®è¯·æ±‚ä½“çš„æœ€å¤§å°ºå¯¸
  maxBodyLength: 2000,

//å¯¹å“åº”ç»“æœçš„æˆåŠŸåšè®¾ç½®
  validateStatus: function (status) {
    return status >= 200 && status < 300; // default
  },

//æœ€å¤§è·³è½¬æ¬¡æ•°ï¼Œå‘ä¸€ä¸ªæœåŠ¡å‘èµ·è¯·æ±‚åè¦è·³è½¬ï¼Œåšå®Œè·³è½¬æ˜¯å¦è¦ç»§ç»­è¯·æ±‚çš„æ¬¡æ•°é™åˆ¶
//ä¸€èˆ¬ç”¨åœ¨node.jsé‡Œï¼Œajaxé‡Œç”¨ä¸åˆ°
maxRedirects: 21, //é»˜è®¤å€¼

//
  beforeRedirect: (options, { headers }) => {
    if (options.hostname === "example.com") {
      options.auth = "user:password";
    }
  },
//è®¾ç½®socketæ–‡ä»¶çš„ä½ç½®
socketPath: null, 

//å¾ˆæœ‰ç”¨ï¼Œè®¾ç½®ä»£ç†ï¼Œç”¨åœ¨æœåŠ¡ç«¯
  proxy: {
    protocol: 'https',
    host: '127.0.0.1',
    // hostname: '127.0.0.1' // Takes precedence over 'host' if both are defined
    port: 9000,
    auth: {
      username: 'mikeymike',
      password: 'rapunz3l'
    }
  },

//å¯¹ajaxè¯·æ±‚å–æ¶ˆ
  cancelToken: new CancelToken(function (cancel) {
  }),

//å¯¹å“åº”ç»“æœæ˜¯å¦åšè§£å‹ï¼Œé»˜è®¤è§£å‹ï¼Œajaxç”¨ä¸äº†ï¼Œåœ¨nodeç”¨
decompress: true, // default

//httpAgentæ˜¯å¯¹å®¢æˆ·ç«¯è¿æ¥çš„è®¾ç½®
  httpAgent: new http.Agent({ keepAlive: true }),
  httpsAgent: new https.Agent({ keepAlive: true }),


}
```

## axiosçš„é»˜è®¤é…ç½®

æŠŠé‡å¤çš„è®¾ç½®é…åœ¨é»˜è®¤é‡Œï¼Œç®€åŒ–ä»£ç 

æ¯”å¦‚é…ç½®é»˜è®¤è·¯å¾„ï¼Œurlå¯ä»¥ä¸ç”¨å†™è¿™ä¹ˆé•¿ï¼›é…ç½®é»˜è®¤è¯·æ±‚

```javascript
      axios.default.method='GET'//è®¾ç½®é»˜è®¤çš„è¯·æ±‚ç±»å‹ä¸ºGET
        axios.default.baseURL='http://localhost:52896'
```

è®¾ç½®é»˜è®¤paramsï¼ŒæŠŠidåŠ åˆ°urlåé¢

```javascript
        axios.defaults.params={id:100}
        axios.defaults.timout=3000
```

![](https://i-blog.csdnimg.cn/direct/1e775f086ba048ad9bffa7518a5b9642.png)

## axiosåˆ›å»ºå®ä¾‹å¯¹è±¡å‘é€ajaxè¯·æ±‚

axios.create()æ¥å®ä¾‹åŒ–

```javascript
        //è·å–æŒ‰é’®
        const btns = document.querySelectorAll('button')
        //åˆ›å»ºå®ä¾‹å¯¹è±¡
const duanzi=axios.create(
    {
        baseURL:'https//api.apiopen.top',
        timeout:2000
    }
)
//è¿™é‡Œduanziä¸axioså¯¹è±¡åŠŸèƒ½å‡ è¿‘æ˜¯ä¸€æ ·çš„
console.log(duanzi)

```

æ‰“å°åˆ°æ§åˆ¶å°

![](https://i-blog.csdnimg.cn/direct/9a1b2cd2451f40939277d2856cd50f0f.png)

```javascript
//æ‹¿duanziå½“axiosä½¿ç”¨ï¼Œå› ä¸ºä»–æ˜¯axiosçš„å®ä¾‹åŒ–å¯¹è±¡
duanzi({
    url:'/getJoke',
}).then(reponse=>{
    console.log(reponse)
})

```

![](https://i-blog.csdnimg.cn/direct/0822ad5fc41d4d9c82a8b260894db66f.png)

ç”¨å®ä¾‹å¯¹è±¡ä½¿ç”¨è¯·æ±‚æ–¹æ³•

```javascript
duanzi.get('/getJoke').then(response=>{
    console.log(response.data)
})

```

![](https://i-blog.csdnimg.cn/direct/d1dfd518c2714493ae0303148488d140.png)

å¦‚æœæœ‰è·¨åŸŸçš„é—®é¢˜ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„é¡¹ç›®å¦‚æœä¸æ˜¯æ¥æºå•ä¸€çš„æœåŠ¡å™¨ï¼Œå°±å¯ä»¥åˆ›å»ºä¸¤ä¸ªå¯¹è±¡

```javascript
const duanzi=axios.create(
    {
        baseURL:'https://api.apiopen.top',
        timeout:2000
    }
)
const another=axios.create({
    baseURL:'https://b.cm',
    timeout:2000
})
```

## æ‹¦æˆªå™¨

æ‹¦æˆªå™¨çš„æœ¬è´¨æ˜¯ä¸€äº›å‡½æ•°

æ‹¦æˆªå™¨åˆ†ä¸ºè¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨

è¯·æ±‚æ‹¦æˆªå™¨å¯ä»¥åœ¨å‘é€è¯·æ±‚ä¹‹å‰ï¼Œç”¨å›è°ƒå‡½æ•°å¯¹è¯·æ±‚å†…å®¹å’Œå‚æ•°åšå¤„ç†ï¼Œå¦‚æœæ²¡é—®é¢˜åˆ™è¯·æ±‚æ­£å¸¸å‘é€ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œè¯·æ±‚å–æ¶ˆ

å“åº”æ‹¦æˆªå™¨å¯ä»¥åœ¨å¤„ç†ç»“æœä¹‹å‰å¤„ç†ï¼Œåšä¸€ä¸ªæé†’æˆ–è€…è®°å½•ï¼Œæˆ–è€…å¯¹æ•°æ®æ¥å£åšä¸€äº›æ ¼å¼åŒ–çš„å¤„ç†ï¼Œæœ‰é—®é¢˜äº¤ç”±æˆ‘ä»¬è‡ªå·±çš„å›è°ƒå‡½æ•°å¤„ç†ï¼Œåœ¨å“åº”æ‹¦æˆªå™¨é‡Œåšå¤„ç†

```javascript
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <title>Document</title>
  </head>
  <body>
    <script>
//å†…éƒ¨è¿˜æ˜¯promiseå®ç°çš„
      // è®¾ç½®è¯·æ±‚æ‹¦æˆªå™¨
      axios.interceptors.request.use(
        function (config) {
          console.log('è¯·æ±‚æ‹¦æˆªå™¨ æˆåŠŸ')
          return config
        },
        function (error) {
          console.log('è¯·æ±‚æ‹¦æˆªå™¨ å¤±è´¥')
          return Promise.reject(error)
        }
      )
 
      // è®¾ç½®ç›¸åº”æ‹¦æˆªå™¨
      axios.interceptors.response.use(
        function (response) {
          console.log('å“åº”æ‹¦æˆªå™¨æˆåŠŸ')
          return response
        },
        function (error) {
          console.log('å“åº”æ‹¦æˆªå™¨ å¤±è´¥')
          return Promise.reject(error)
        }
      )
      //å‘é€è¯·æ±‚
      axios({
        method:'GET',
        url:'https://localhost:3000/posts'
      }).then(response=>{
        console.log(response)
      }).catch(reason=>{
        console.log('è‡ªå®šä¹‰å¤±è´¥å›è°ƒ')
      })
    </script>
  </body>
</html>
```

![](https://i-blog.csdnimg.cn/direct/b66dc922e8464185afd9115ff88d866b.png)

è¯·æ±‚æ‹¦æˆªå™¨æ˜¯åè¿›å…¥çš„å…ˆæ‰§è¡Œï¼Œå“åº”æ‹¦æˆªå™¨æ˜¯å…ˆè¿›å…¥å…ˆæ‰§è¡Œ

![](https://i-blog.csdnimg.cn/direct/0c18e36a6e7d4b1d852d8d84634b581c.png)

åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­æˆ‘ä»¬å¯ä»¥ä¿®æ”¹configçš„é…ç½®ï¼š

```javascript
   axios.interceptors.request.use(
        function (config) {
          console.log('è¯·æ±‚æ‹¦æˆªå™¨ æˆåŠŸ2å· ')
            config.params={a:100}
          return config
        },
```

è¿”å›çš„æ•°æ®

![](https://i-blog.csdnimg.cn/direct/76dba603d4374f6da962ec822df7a3cb.png)

## axioså–æ¶ˆè¯·æ±‚

å‘é€ä¸€ä¸ªè¯·æ±‚

```javascript
const btns=document.querySelectorAll('button')

btns[0].onclick=function(){
    axios({
        method:'GET',
        url:'http://localhost:52896/posts'
    }).then(response=>{
       console.log(response)
        
    })
}
   
```

![](https://i-blog.csdnimg.cn/direct/e2936808a090499ba00bc1dc1941ddb0.png)

å¦‚ä½•å–æ¶ˆè¯·æ±‚

```javascript
const btns=document.querySelectorAll('button')
//å£°æ˜å…¨å±€å˜é‡
//cancelåˆå§‹å€¼æ˜¯null
let cancel=null
btns[0].onclick=function(){
    axios({
        method:'GET',
        url:'http://localhost:52896/posts',
        //1ã€æ·»åŠ é…ç½®å¯¹è±¡çš„å±æ€§
        cancelToken:new axios.CancelToken(function(c){
            //3ã€å°†cçš„å€¼èµ‹å€¼ç»™cancel
            cancel=c
        })
    }).then(response=>{
       console.log(response)
        
    })
}
btns[1].onclick=function(){
    cancel()
}
```

æŠŠå‘é€çš„æ—¶é—´å»¶è¿Ÿï¼Œå°±å¯ä»¥è®¡æ—¶å–æ¶ˆï¼Œæˆ–è€…æŠŠç½‘ç»œè°ƒæ…¢ç‚¹ï¼Œæˆ‘è¿™é‡Œæ˜¯slow 4g

![](https://i-blog.csdnimg.cn/direct/d73edb21624c4542b1a1e9ca23b1c2f3.png)

å¯ä»¥åœ¨å‘é€å®Œæˆå‰å–æ¶ˆ

å¦‚æœåœ¨å‘é€è¯·æ±‚å®Œæˆå‰å¤šæ¬¡ç‚¹å‡»å‘é€ï¼Œè®¾ç½®ä¸€ä¸ªè‡ªåŠ¨å–æ¶ˆä¸Šæ¬¡è¯·æ±‚çš„åŠŸèƒ½

```javascript
//è·å–æŒ‰é’®
const btns=document.querySelectorAll('button')
//å£°æ˜å…¨å±€å˜é‡
let cancel=null
btns[0].onclick=function(){

    //æ£€æµ‹ä¸Šä¸€æ¬¡è¯·æ±‚æ˜¯å¦å®Œæˆ
    if(cancel!==null){
        cancel()
    }
    axios({
        method:'GET',
        url:'http://localhost:52896/posts',
        //1ã€æ·»åŠ é…ç½®å¯¹è±¡çš„å±æ€§
        cancelToken:new axios.CancelToken(function(c){
            //3ã€å°†cçš„å€¼èµ‹å€¼ç»™cancel
            cancel=c
        })
    }).then(response=>{
       console.log(response)
        cancel=null
    })
}
btns[1].onclick=function(){
    cancel()
}
```

![](https://i-blog.csdnimg.cn/direct/b16b3e2a03c944ae927331de921ad0fb.png)

è¿˜æ¬ äº†ä¸€ç¯‡axiosæºç åˆ†æã€‚ã€‚ã€‚ä»¥åå†å­¦å§