---
layout: post
title: "C上位机开发从门外到门内3-3基于USB的设备管理系统"
date: 2025-03-16 10:29:25 +0800
description: "在工业自动化和实验室环境中，许多设备（如工业相机、测量仪器等）通过USB接口与计算机通信。本项目旨在开发一个基于USB的设备管理系统，能够控制外设、监测设备状态，并将相关数据存储到数据库中，以实现设备的集中管理和数据分析。"
keywords: "《C#上位机开发从门外到门内》3-3：基于USB的设备管理系统"
categories: ['上位机开发']
tags: ['数码相机', '开发语言', '单片机', '下位机', '上位机', 'C']
artid: "146291560"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146291560
    alt: "C上位机开发从门外到门内3-3基于USB的设备管理系统"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146291560
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146291560
cover: https://bing.ee123.net/img/rand?artid=146291560
image: https://bing.ee123.net/img/rand?artid=146291560
img: https://bing.ee123.net/img/rand?artid=146291560
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     《C#上位机开发从门外到门内》3-3：基于USB的设备管理系统
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6744f11d604043abbc02b3e569487321.png"/>
    </p>
    <p>
    </p>
    <br/>
    <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7567928b11dd4525b5245b1f3733561c.png">
     <p>
     </p>
     <h3>
      <a id="1__5">
      </a>
      <strong>
       1. 项目概述
      </strong>
     </h3>
     <p>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cb0a0dd94bc7408c95570074cf6bb069.png"/>
     </p>
     <h4>
      <a id="11__8">
      </a>
      <strong>
       1.1 项目背景
      </strong>
     </h4>
     <p>
      在工业自动化和实验室环境中，许多设备（如工业相机、测量仪器等）通过USB接口与计算机通信。本项目旨在开发一个基于USB的设备管理系统，能够控制外设、监测设备状态，并将相关数据存储到数据库中，以实现设备的集中管理和数据分析。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/78d39e1a1c404075b34bf77b90526204.png"/>
     </p>
     <h4>
      <a id="12__12">
      </a>
      <strong>
       1.2 项目目标
      </strong>
     </h4>
     <ol>
      <li>
       通过USB接口控制外设（如工业相机、测量设备）。
      </li>
      <li>
       实时监测设备状态（如连接状态、工作状态等）。
      </li>
      <li>
       将设备数据存储到数据库中，支持历史数据查询和分析。
      </li>
      <li>
       提供可视化界面，方便用户查看设备状态和数据。
      </li>
     </ol>
     <h4>
      <a id="13__18">
      </a>
      <strong>
       1.3 技术栈
      </strong>
     </h4>
     <ul>
      <li>
       <strong>
        通信协议
       </strong>
       ：USB协议（基于PyUSB库）
      </li>
      <li>
       <strong>
        编程语言
       </strong>
       ：Python（用于设备控制和数据存储）
      </li>
      <li>
       <strong>
        数据库
       </strong>
       ：SQLite/MySQL（用于数据存储）
      </li>
      <li>
       <strong>
        可视化工具
       </strong>
       ：PyQt/Tkinter（用于用户界面）
      </li>
      <li>
       <strong>
        硬件设备
       </strong>
       ：工业相机、测量仪器等USB设备。
      </li>
     </ul>
     <hr/>
     <h3>
      <a id="2__27">
      </a>
      <strong>
       2. 系统架构设计
      </strong>
     </h3>
     <h4>
      <a id="21__29">
      </a>
      <strong>
       2.1 系统架构图
      </strong>
     </h4>
     <pre><code>+-------------------+       +-------------------+       +-------------------+
|                   |       |                   |       |                   |
|  USB设备          |&lt;-----&gt;|  设备控制模块     |&lt;-----&gt;|  数据存储模块     |
|  (工业相机等)     |       |  (Python脚本)     |       |  (SQLite/MySQL)   |
|                   |       |                   |       |                   |
+-------------------+       +-------------------+       +-------------------+
                                |                           |
                                |                           |
                                v                           v
                        +-------------------+       +-------------------+
                        |                   |       |                   |
                        |  设备状态监测模块 |&lt;-----&gt;|  用户界面         |
                        |  (Python脚本)     |       |  (PyQt/Tkinter)   |
                        |                   |       |                   |
                        +-------------------+       +-------------------+
</code></pre>
     <h4>
      <a id="22__48">
      </a>
      <strong>
       2.2 模块功能
      </strong>
     </h4>
     <ol>
      <li>
       <p>
        <strong>
         设备控制模块
        </strong>
        ：
       </p>
       <ul>
        <li>
         通过USB接口与设备通信，发送控制指令（如拍照、测量等）。
        </li>
        <li>
         接收设备返回的数据（如图像、测量结果等）。
        </li>
       </ul>
      </li>
      <li>
       <p>
        <strong>
         设备状态监测模块
        </strong>
        ：
       </p>
       <ul>
        <li>
         实时监测设备的连接状态和工作状态。
        </li>
        <li>
         记录设备状态变化（如连接/断开、故障等）。
        </li>
       </ul>
      </li>
      <li>
       <p>
        <strong>
         数据存储模块
        </strong>
        ：
       </p>
       <ul>
        <li>
         将设备数据（如图像、测量结果）和状态信息存储到数据库中。
        </li>
        <li>
         支持实时数据写入和历史数据查询。
        </li>
       </ul>
      </li>
      <li>
       <p>
        <strong>
         用户界面
        </strong>
        ：
       </p>
       <ul>
        <li>
         提供图形化界面，方便用户查看设备状态和数据。
        </li>
        <li>
         支持设备控制和数据查询功能。
        </li>
       </ul>
      </li>
     </ol>
     <hr/>
     <h3>
      <a id="3__67">
      </a>
      <strong>
       3. 设备控制模块实现
      </strong>
     </h3>
     <h4>
      <a id="31_USB_69">
      </a>
      <strong>
       3.1 USB通信简介
      </strong>
     </h4>
     <p>
      USB（通用串行总线）是一种广泛使用的设备通信接口，支持热插拔和高速数据传输。通过PyUSB库，可以方便地与USB设备通信。
     </p>
     <h4>
      <a id="32__72">
      </a>
      <strong>
       3.2 设备控制流程
      </strong>
     </h4>
     <ol>
      <li>
       <p>
        <strong>
         初始化USB设备
        </strong>
        ：
       </p>
       <ul>
        <li>
         查找并连接目标USB设备。
        </li>
        <li>
         配置设备的通信参数（如端点、传输模式等）。
        </li>
       </ul>
      </li>
      <li>
       <p>
        <strong>
         发送控制指令
        </strong>
        ：
       </p>
       <ul>
        <li>
         根据设备协议，发送控制指令（如拍照、测量等）。
        </li>
        <li>
         接收设备返回的数据（如图像、测量结果等）。
        </li>
       </ul>
      </li>
      <li>
       <p>
        <strong>
         数据解析与处理
        </strong>
        ：
       </p>
       <ul>
        <li>
         解析设备返回的数据，转换为实际物理量（如图像、测量值等）。
        </li>
        <li>
         添加时间戳和数据标签。
        </li>
       </ul>
      </li>
     </ol>
     <h4>
      <a id="33__85">
      </a>
      <strong>
       3.3 代码实现
      </strong>
     </h4>
     <pre><code class="prism language-python"><span class="token keyword">import</span> usb<span class="token punctuation">.</span>core
<span class="token keyword">import</span> usb<span class="token punctuation">.</span>util

<span class="token comment"># 查找设备</span>
dev <span class="token operator">=</span> usb<span class="token punctuation">.</span>core<span class="token punctuation">.</span>find<span class="token punctuation">(</span>idVendor<span class="token operator">=</span><span class="token number">0x1234</span><span class="token punctuation">,</span> idProduct<span class="token operator">=</span><span class="token number">0x5678</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> dev <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"Device not found"</span><span class="token punctuation">)</span>

<span class="token comment"># 配置设备</span>
dev<span class="token punctuation">.</span>set_configuration<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 发送控制指令</span>
endpoint_out <span class="token operator">=</span> dev<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
endpoint_in <span class="token operator">=</span> dev<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

<span class="token comment"># 发送拍照指令</span>
dev<span class="token punctuation">.</span>write<span class="token punctuation">(</span>endpoint_out<span class="token punctuation">,</span> <span class="token string">b'\x01\x00\x00\x00'</span><span class="token punctuation">)</span>

<span class="token comment"># 读取图像数据</span>
data <span class="token operator">=</span> dev<span class="token punctuation">.</span>read<span class="token punctuation">(</span>endpoint_in<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Image data received:"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
</code></pre>
     <hr/>
     <h3>
      <a id="4__113">
      </a>
      <strong>
       4. 设备状态监测模块实现
      </strong>
     </h3>
     <h4>
      <a id="41__115">
      </a>
      <strong>
       4.1 设备状态监测流程
      </strong>
     </h4>
     <ol>
      <li>
       <p>
        <strong>
         设备连接状态监测
        </strong>
        ：
       </p>
       <ul>
        <li>
         定期检查设备是否连接。
        </li>
        <li>
         记录设备连接/断开事件。
        </li>
       </ul>
      </li>
      <li>
       <p>
        <strong>
         设备工作状态监测
        </strong>
        ：
       </p>
       <ul>
        <li>
         读取设备状态寄存器或状态码。
        </li>
        <li>
         记录设备工作状态（如空闲、运行、故障等）。
        </li>
       </ul>
      </li>
     </ol>
     <h4>
      <a id="42__124">
      </a>
      <strong>
       4.2 代码实现
      </strong>
     </h4>
     <pre><code class="prism language-python"><span class="token keyword">import</span> time

<span class="token keyword">def</span> <span class="token function">check_device_status</span><span class="token punctuation">(</span>dev<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 读取设备状态</span>
        status <span class="token operator">=</span> dev<span class="token punctuation">.</span>read<span class="token punctuation">(</span>endpoint_in<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> status<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">except</span> usb<span class="token punctuation">.</span>core<span class="token punctuation">.</span>USBError<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>  <span class="token comment"># 设备断开</span>

<span class="token comment"># 定期检查设备状态</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    status <span class="token operator">=</span> check_device_status<span class="token punctuation">(</span>dev<span class="token punctuation">)</span>
    <span class="token keyword">if</span> status <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Device disconnected"</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> status <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Device idle"</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> status <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Device running"</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> status <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Device error"</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre>
     <hr/>
     <h3>
      <a id="5__152">
      </a>
      <strong>
       5. 数据存储模块实现
      </strong>
     </h3>
     <h4>
      <a id="51__154">
      </a>
      <strong>
       5.1 数据库设计
      </strong>
     </h4>
     <ol>
      <li>
       <p>
        <strong>
         SQLite表结构
        </strong>
        ：
       </p>
       <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> device_data <span class="token punctuation">(</span>
    id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>
    device_id <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    data_type <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    data_value <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">timestamp</span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> device_status <span class="token punctuation">(</span>
    id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>
    device_id <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">status</span> <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">timestamp</span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </li>
      <li>
       <p>
        <strong>
         MySQL表结构
        </strong>
        ：
       </p>
       <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> device_data <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    device_id <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    data_type <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    data_value <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">timestamp</span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> device_status <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    device_id <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">status</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">timestamp</span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </li>
     </ol>
     <h4>
      <a id="52__191">
      </a>
      <strong>
       5.2 数据存储流程
      </strong>
     </h4>
     <ol>
      <li>
       <p>
        <strong>
         连接数据库
        </strong>
        ：
       </p>
       <ul>
        <li>
         使用Python的SQLite或MySQL客户端库连接数据库。
        </li>
       </ul>
      </li>
      <li>
       <p>
        <strong>
         写入数据
        </strong>
        ：
       </p>
       <ul>
        <li>
         将设备数据和状态信息插入到数据库中。
        </li>
       </ul>
      </li>
     </ol>
     <h4>
      <a id="53__198">
      </a>
      <strong>
       5.3 代码实现
      </strong>
     </h4>
     <h5>
      <a id="SQLite_199">
      </a>
      <strong>
       SQLite版本
      </strong>
     </h5>
     <pre><code class="prism language-python"><span class="token keyword">import</span> sqlite3

<span class="token comment"># 连接SQLite数据库</span>
conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'device_db.sqlite'</span><span class="token punctuation">)</span>
cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 插入设备数据</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"INSERT INTO device_data (device_id, data_type, data_value) VALUES (?, ?, ?)"</span><span class="token punctuation">,</span>
               <span class="token punctuation">(</span><span class="token string">"camera_1"</span><span class="token punctuation">,</span> <span class="token string">"image"</span><span class="token punctuation">,</span> <span class="token string">"image_data"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 插入设备状态</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"INSERT INTO device_status (device_id, status) VALUES (?, ?)"</span><span class="token punctuation">,</span>
               <span class="token punctuation">(</span><span class="token string">"camera_1"</span><span class="token punctuation">,</span> <span class="token string">"running"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 关闭连接</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
     <h5>
      <a id="MySQL_221">
      </a>
      <strong>
       MySQL版本
      </strong>
     </h5>
     <pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

<span class="token comment"># 连接MySQL数据库</span>
db <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
    host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
    user<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">,</span>
    password<span class="token operator">=</span><span class="token string">"password"</span><span class="token punctuation">,</span>
    database<span class="token operator">=</span><span class="token string">"device_db"</span>
<span class="token punctuation">)</span>

<span class="token comment"># 插入设备数据</span>
cursor <span class="token operator">=</span> db<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
sql <span class="token operator">=</span> <span class="token string">"INSERT INTO device_data (device_id, data_type, data_value) VALUES (%s, %s, %s)"</span>
values <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"camera_1"</span><span class="token punctuation">,</span> <span class="token string">"image"</span><span class="token punctuation">,</span> <span class="token string">"image_data"</span><span class="token punctuation">)</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> values<span class="token punctuation">)</span>
db<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 插入设备状态</span>
sql <span class="token operator">=</span> <span class="token string">"INSERT INTO device_status (device_id, status) VALUES (%s, %s)"</span>
values <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"camera_1"</span><span class="token punctuation">,</span> <span class="token string">"running"</span><span class="token punctuation">)</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> values<span class="token punctuation">)</span>
db<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 关闭连接</span>
db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
     <hr/>
     <h3>
      <a id="6__252">
      </a>
      <strong>
       6. 用户界面实现
      </strong>
     </h3>
     <h4>
      <a id="61__254">
      </a>
      <strong>
       6.1 界面设计
      </strong>
     </h4>
     <ol>
      <li>
       <strong>
        设备状态显示
       </strong>
       ：
       <ul>
        <li>
         显示设备的连接状态和工作状态。
        </li>
       </ul>
      </li>
      <li>
       <strong>
        设备控制按钮
       </strong>
       ：
       <ul>
        <li>
         提供拍照、测量等控制按钮。
        </li>
       </ul>
      </li>
      <li>
       <strong>
        数据展示区域
       </strong>
       ：
       <ul>
        <li>
         显示设备数据（如图像、测量结果）。
        </li>
       </ul>
      </li>
     </ol>
     <h4>
      <a id="62__262">
      </a>
      <strong>
       6.2 代码实现
      </strong>
     </h4>
     <h5>
      <a id="PyQt_263">
      </a>
      <strong>
       PyQt版本
      </strong>
     </h5>
     <pre><code class="prism language-python"><span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication<span class="token punctuation">,</span> QMainWindow<span class="token punctuation">,</span> QLabel<span class="token punctuation">,</span> QPushButton

<span class="token keyword">class</span> <span class="token class-name">DeviceManager</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 设备状态显示</span>
        self<span class="token punctuation">.</span>status_label <span class="token operator">=</span> QLabel<span class="token punctuation">(</span><span class="token string">"Device Status: Unknown"</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>status_label<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

        <span class="token comment"># 拍照按钮</span>
        self<span class="token punctuation">.</span>capture_button <span class="token operator">=</span> QPushButton<span class="token punctuation">(</span><span class="token string">"Capture Image"</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>capture_button<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>capture_button<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>capture_image<span class="token punctuation">)</span>

        <span class="token comment"># 窗口设置</span>
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"Device Manager"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">capture_image</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 拍照逻辑</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Capturing image..."</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>status_label<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"Device Status: Capturing"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    window <span class="token operator">=</span> DeviceManager<span class="token punctuation">(</span><span class="token punctuation">)</span>
    app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
     <h5>
      <a id="Tkinter_298">
      </a>
      <strong>
       Tkinter版本
      </strong>
     </h5>
     <pre><code class="prism language-python"><span class="token keyword">import</span> tkinter <span class="token keyword">as</span> tk

<span class="token keyword">class</span> <span class="token class-name">DeviceManager</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>root <span class="token operator">=</span> root
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 设备状态显示</span>
        self<span class="token punctuation">.</span>status_label <span class="token operator">=</span> tk<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>self<span class="token punctuation">.</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"Device Status: Unknown"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>status_label<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 拍照按钮</span>
        self<span class="token punctuation">.</span>capture_button <span class="token operator">=</span> tk<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"Capture Image"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>self<span class="token punctuation">.</span>capture_image<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>capture_button<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">capture_image</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 拍照逻辑</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Capturing image..."</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>status_label<span class="token punctuation">.</span>config<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">"Device Status: Capturing"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    root <span class="token operator">=</span> tk<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>
    app <span class="token operator">=</span> DeviceManager<span class="token punctuation">(</span>root<span class="token punctuation">)</span>
    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
     <hr/>
     <h3>
      <a id="7__329">
      </a>
      <strong>
       7. 系统部署与测试
      </strong>
     </h3>
     <h4>
      <a id="71__331">
      </a>
      <strong>
       7.1 部署环境
      </strong>
     </h4>
     <ul>
      <li>
       <strong>
        硬件
       </strong>
       ：工业相机、测量仪器等USB设备。
      </li>
      <li>
       <strong>
        软件
       </strong>
       ：Python 3.8、SQLite/MySQL、PyQt/Tkinter。
      </li>
     </ul>
     <h4>
      <a id="72__335">
      </a>
      <strong>
       7.2 测试流程
      </strong>
     </h4>
     <ol>
      <li>
       <strong>
        设备控制测试
       </strong>
       ：
       <ul>
        <li>
         验证设备控制指令是否正确执行。
        </li>
       </ul>
      </li>
      <li>
       <strong>
        状态监测测试
       </strong>
       ：
       <ul>
        <li>
         验证设备状态是否正确监测。
        </li>
       </ul>
      </li>
      <li>
       <strong>
        数据存储测试
       </strong>
       ：
       <ul>
        <li>
         验证数据是否成功写入数据库。
        </li>
       </ul>
      </li>
      <li>
       <strong>
        用户界面测试
       </strong>
       ：
       <ul>
        <li>
         验证界面功能是否正常。
        </li>
       </ul>
      </li>
     </ol>
     <hr/>
     <h3>
      <a id="8__347">
      </a>
      <strong>
       8. 总结
      </strong>
     </h3>
     <p>
      本项目通过USB接口实现了设备的控制、状态监测和数据存储，为工业设备和实验室仪器的集中管理提供了完整的解决方案。通过模块化设计和灵活的技术选型，系统具有良好的扩展性和可维护性，能够满足不同场景的需求。
     </p>
    </img>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f73697870702f:61727469636c652f64657461696c732f313436323931353630" class_="artid" style="display:none">
 </p>
</div>


