---
layout: post
title: "laravel-translate-属性过滤"
date: 2025-03-10 15:12:38 +0800
description: "如果你需要更复杂的逻辑，比如动态选择属性或者根据某些条件过滤属性，你可以创建一个自定义的翻译模型或者在现有的翻译模型中添加逻辑。例如，你可以扩展trait 并添加一个自定义的translate方法：根据你的具体需求，你可以选择以上方法中的一种或几种来对使用translate方法获取的属性进行过滤。每种方法都有其适用场景，例如简单过滤可以使用数组过滤或集合的onlyexcept方法，而更复杂的逻辑可以通过自定义翻译模型或调整查询构建器来实现。"
keywords: "laravel translate 属性过滤"
categories: ['未分类']
tags: ['服务器', '数据库', 'Java']
artid: "146155314"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146155314
    alt: "laravel-translate-属性过滤"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146155314
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146155314
cover: https://bing.ee123.net/img/rand?artid=146155314
image: https://bing.ee123.net/img/rand?artid=146155314
img: https://bing.ee123.net/img/rand?artid=146155314
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     laravel translate 属性过滤
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
    </p>
    <p>
     laravel translate 属性过滤
    </p>
    <p>
     在 Laravel 中，
     <code>
      translate
     </code>
     方法通常用于实现多语言支持，特别是在使用 Laravel 的本地化功能时。如果你想在使用
     <code>
      translate
     </code>
     方法时对某些属性进行过滤，有几种方法可以实现这一点。
    </p>
    <h4>
     1. 使用数组过滤
    </h4>
    <p>
     在调用
     <code>
      translate
     </code>
     方法之前，你可以先通过数组过滤你想要返回的属性。例如：
    </p>
    <pre></pre>
    <pre></pre>
    <p>
    </p>
    <p>
     <code>
      <code>
       $user = User::find(1);
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       $filteredAttributes = ['name', 'email']; // 只获取这些属性
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       $translatedAttributes = $user-&gt;translate('en', $filteredAttributes);
      </code>
     </code>
    </p>
    <h4>
     2. 自定义翻译模型
    </h4>
    <p>
     如果你需要更复杂的逻辑，比如动态选择属性或者根据某些条件过滤属性，你可以创建一个自定义的翻译模型或者在现有的翻译模型中添加逻辑。例如，你可以扩展
     <code>
      HasTranslations
     </code>
     trait 并添加一个自定义的
     <code>
      translate
     </code>
     方法：
    </p>
    <pre></pre>
    <pre></pre>
    <p>
    </p>
    <p>
     <code>
      <code>
       use Illuminate\Database\Eloquent\Model;
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       use Illuminate\Database\Eloquent\Collection;
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       class TranslatableModel extends Model
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       {
       <!-- -->
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       use \Illuminate\Database\Eloquent\SoftDeletes;
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       use \Spatie\Translatable\HasTranslations;
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       public function translate($locale, $attributes = null)
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       {
       <!-- -->
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       $translations = parent::translate($locale);
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       if ($attributes) {
       <!-- -->
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       return collect($translations)-&gt;only($attributes)-&gt;all();
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       }
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       return $translations;
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       }
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       }
      </code>
     </code>
    </p>
    <h4>
     3. 使用
     <code>
      only
     </code>
     和
     <code>
      except
     </code>
     方法
    </h4>
    <p>
     如果你使用的是 Laravel 的集合（Collection），你可以在调用
     <code>
      translate
     </code>
     方法后使用
     <code>
      only
     </code>
     或
     <code>
      except
     </code>
     方法来过滤属性：
    </p>
    <pre></pre>
    <pre></pre>
    <p>
    </p>
    <p>
     <code>
      <code>
       $user = User::find(1);
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       $translations = $user-&gt;translate('en'); // 获取所有翻译属性
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       $filteredTranslations = collect($translations)-&gt;only(['name', 'email']); // 只获取 'name' 和 'email'
      </code>
     </code>
    </p>
    <h4>
     4. 使用查询构建器（针对关系）
    </h4>
    <p>
     如果你是在处理模型的关系并且想要在查询时就过滤属性，可以使用
     <code>
      select
     </code>
     方法：
    </p>
    <pre></pre>
    <pre></pre>
    <p>
    </p>
    <p>
     <code>
      <code>
       $user = User::with(['translations' =&gt; function ($query) {
       <!-- -->
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       $query-&gt;where('locale', 'en')-&gt;select(['name', 'email']); // 仅选择 'name' 和 'email' 字段
      </code>
     </code>
    </p>
    <p>
     <code>
      <code>
       }])-&gt;find(1);
      </code>
     </code>
    </p>
    <h4>
     总结
    </h4>
    <p>
     根据你的具体需求，你可以选择以上方法中的一种或几种来对使用
     <code>
      translate
     </code>
     方法获取的属性进行过滤。每种方法都有其适用场景，例如简单过滤可以使用数组过滤或集合的
     <code>
      only
     </code>
     /
     <code>
      except
     </code>
     方法，而更复杂的逻辑可以通过自定义翻译模型或调整查询构建器来实现。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f776866313231353834373730362f:61727469636c652f64657461696c732f313436313535333134" class_="artid" style="display:none">
 </p>
</div>


