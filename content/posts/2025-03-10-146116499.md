---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f33383134383638302f:61727469636c652f64657461696c732f313436313136343939"
layout: post
title: "群晖DS223-Docker搭建为知笔记"
date: 2025-03-10 22:05:39 +08:00
description: "通过在群晖 Docker 中安装为知笔记，我们成功打造了一个安全、高效且个性化的个人笔记管理系统。从前期的准备工作，到一步步完成安装和配置，再到解决可能遇到的问题以及对系统进行优化拓展，每一个环节都让我们更加深入地了解了群晖 NAS 和为知笔记的强大功能。自己搭建为知笔记服务，不仅数据安全得到了保障，还能根据自身需求进行定制化设置，享受多端同步带来的便捷。希望大家都能动手尝试，将这一知识管理利器运用到工作和学习中，提升自己的效率和创造力。"
keywords: "群晖DS223 Docker搭建为知笔记"
categories: ['未分类']
tags: ['笔记', 'Eureka', 'Docker']
artid: "146116499"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146116499
    alt: "群晖DS223-Docker搭建为知笔记"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146116499
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146116499
cover: https://bing.ee123.net/img/rand?artid=146116499
image: https://bing.ee123.net/img/rand?artid=146116499
img: https://bing.ee123.net/img/rand?artid=146116499
---

# 群晖DS223 Docker搭建为知笔记

## 群晖DS223 Docker搭建为知笔记，打造你的专属知识宝库

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/46176b5a3adf49f083a7a646e77b3ca9.png#pic_center)

### 一、引言

在数字化信息爆炸的时代，笔记软件成为了我们管理知识、记录灵感的得力助手。为知笔记，作为一款专注于工作笔记和团队协作的云笔记产品，以其丰富的功能和便捷的使用体验，赢得了众多用户的青睐。它不仅支持常见的笔记记录、网页收藏等功能，还在团队协作方面有着出色的表现，能够满足不同场景下的知识管理需求。

而群晖（Synology），则是网络存储领域的佼佼者。其提供的 NAS（网络附加存储）设备，凭借简单的用户界面、长期的支持与定期更新、多功能性以及对移动设备的支持等特点，深受家庭和企业用户的喜爱 。通过群晖 NAS，我们可以轻松搭建起属于自己的私有云存储，实现数据的安全存储和便捷访问。

那么，当群晖遇上为知笔记，会碰撞出怎样的火花呢？将为知笔记安装在群晖的 Docker 环境中，我们就能够打造出一个完全属于自己的个人笔记系统。这不仅意味着数据将存储在本地，大大提高了数据的安全性，不用担心数据被第三方泄露或丢失；还可以根据自己的需求进行个性化定制，如调整服务器配置、设置访问权限等，让笔记系统更加贴合自己的使用习惯。

接下来，就让我们一步步深入了解如何在群晖 Docker 中安装为知笔记，开启高效知识管理的新篇章。

### 二、准备工作

#### （一）硬件与软件条件

**硬件要求**
：群晖 NAS 内存建议在 4GB 及以上，以确保系统能够稳定运行 Docker 以及为知笔记，避免因内存不足导致运行卡顿或报错。当然，如果您的使用场景较为复杂，如同时运行多个容器或处理大量数据，更高的内存配置将带来更好的体验 。

**软件要求**
：群晖系统版本需 DSM 6.2 及以上，新的系统版本通常会带来更好的兼容性和性能优化，为后续的安装和使用提供保障。此外，需要提前在群晖的套件中心中安装好 Docker 套件，它是我们运行容器的基础平台，就像是一个 “容器工厂”，负责创建、管理和运行各种容器。

#### （二）了解 Docker 相关概念

**Docker 镜像**
：可以把它想象成一个超级软件包，里面包含了运行某个应用程序所需要的一切，包括代码、运行时环境、系统工具、系统库和设置等 。它就如同一个精心准备的 “万能模板”，基于这个模板可以快速创建出多个相同的应用实例。例如，为知笔记的 Docker 镜像，就是将为知笔记服务器运行所需的所有组件都打包在一起，方便我们快速部署。

**Docker 容器**
：容器是由镜像启动的一个运行实例，是应用程序真正运行的地方。它可以看作是一个独立的 “小世界”，在这个 “小世界” 里，应用程序及其依赖项可以独立运行，与宿主机和其他容器相互隔离，互不干扰 。每个容器都有自己独立的文件系统、网络和进程空间，就像一个个独立的小房间，每个房间里都运行着不同的应用程序。

### 三、群晖 Docker 安装为知笔记步骤

#### （一）下载为知笔记镜像

打开群晖的 Docker 应用程序，进入 “注册表” 页面 。在搜索框中输入 “wiznote/wizserver”，即可找到为知笔记的官方镜像。点击 “下载” 按钮，选择最新版本进行下载。由于镜像文件可能较大，下载时间会根据您的网络速度有所不同，请耐心等待。在下载过程中，您可以在 “下载任务” 中查看下载进度。例如，我的网络速度大约是 100Mbps，下载这个镜像大概花费了 10 分钟左右，大家可以根据自己的网络情况预估一下时间 。

#### （二）创建本地数据目录

为了确保为知笔记的数据能够安全存储，我们需要在群晖的文件系统中创建专门的数据目录。打开群晖的 File Station 文件管理工具，进入到 docker 文件夹。在该文件夹下，依次创建两个新文件夹：wiz 和 data 。wiz 文件夹将用于存放为知笔记的相关配置文件和数据，而 data 文件夹则是专门用来存储笔记内容的地方。这就好比我们在现实生活中整理文件，为不同类型的文件创建不同的文件夹，方便管理和查找。创建完成后，确保这两个文件夹的权限设置正确，以便容器能够正常读写数据 。

#### （三）启动容器

启动为知笔记容器有两种常见的方法，一种是通过群晖的 Docker 图形界面进行操作，另一种是使用命令行。这里我们先介绍命令行的方式，这种方式更加灵活和高效，对于有一定技术基础的用户来说是个不错的选择。

打开群晖的 SSH 终端，使用管理员账号登录。在终端中输入以下命令来启动为知笔记容器：

```
docker run --name wiz -it -d \\

-v /volume1/docker/wiz/data:/wiz/storage \\

-v /etc/localtime:/etc/localtime \\

-p 8081:80 \\

-e SEARCH=true \\

wiznote/wizserver

```

下面来详细解释一下这个命令中各个参数的含义：

`--name wiz`
：为容器命名为 “wiz”，方便后续管理和识别。就像给一个人取名字一样，有了名字我们就能更方便地找到它。

`-it`
：这两个参数组合在一起，表示以交互模式运行容器，并且分配一个伪终端，这样我们就可以在容器内进行一些操作，比如查看日志等。

`-d`
：表示在后台运行容器，这样我们在关闭 SSH 终端后，容器依然能够继续运行，不会受到影响。

`-v /volume1/docker/wiz/data:/wiz/storage`
：这是一个数据卷挂载参数，它将群晖本地的
`/volume1/docker/wiz/data`
目录映射到容器内的
`/wiz/storage`
目录。其中，
`/volume1/docker/wiz/data`
是我们前面创建的数据目录，这样容器内产生的数据就会存储到群晖的这个目录下，实现数据的持久化存储，即使容器被删除，数据也不会丢失。

`-v /etc/localtime:/etc/localtime`
：这个参数是将群晖系统的本地时间同步到容器内，确保容器内的时间与群晖系统一致，避免因时间不一致导致的一些问题。

`-p 8081:80`
：这是端口映射参数，将容器内的 80 端口映射到群晖的 8081 端口。这样我们就可以通过访问群晖的 IP 地址加上 8081 端口来访问为知笔记服务，例如
`http://群晖IP:8081`
。前面的 8081 是群晖本地的端口，可以根据自己的需求进行修改，只要保证这个端口没有被其他程序占用即可；后面的 80 是容器内为知笔记服务默认使用的端口，不要随意更改。

`-e SEARCH=true`
：这是一个环境变量参数，用于开启为知笔记的全文检索功能。有了这个功能，我们就可以更方便地搜索笔记内容，提高查找效率。

如果您对命令行不太熟悉，也可以使用群晖 Docker 的图形界面来启动容器。在 Docker 应用程序中，找到下载好的 wiznote/wizserver 镜像，点击 “启动” 按钮。在弹出的配置窗口中，依次设置容器名称、端口映射、数据卷挂载等参数，这些参数的设置与命令行中的参数是对应的，按照前面的说明进行设置即可。设置完成后，点击 “应用” 并 “确定”，容器就会启动。

### 四、常见问题及解决办法

#### （一）端口冲突

在启动为知笔记容器时，如果提示端口被占用，比如我们设置的映射端口 8081 已经被其他程序占用，就需要修改映射端口 。以命令行方式为例，停止当前运行的为知笔记容器，使用
`docker stop wiz`
命令（这里的 “wiz” 是我们之前为容器命名的名称）。然后，重新启动容器并修改端口映射，假设将映射端口修改为 8082，命令如下：

```
docker run --name wiz -it -d \\

-v /volume1/docker/wiz/data:/wiz/storage \\

-v /etc/localtime:/etc/localtime \\

-p 8082:80 \\

-e SEARCH=true \\

wiznote/wizserver

```

修改完成后，通过浏览器访问为知笔记的地址也需要相应改变，从原来的
`http://群晖IP:8081`
变为
`http://群晖IP:8082`
。如果是通过群晖 Docker 图形界面启动的容器，在 “容器” 页面中找到为知笔记容器，点击 “设置”，在 “端口设置” 中修改映射端口即可 。

#### （二）数据备份与恢复

数据备份对于为知笔记来说至关重要，一旦数据丢失，可能会给我们的工作和学习带来极大的不便。为知笔记的数据存储在我们之前创建的本地数据目录中，即
`/volume1/docker/wiz/data`
目录（这里的
`/volume1`
根据实际情况可能会有所不同） 。

定期备份这个目录，可以确保数据的安全。备份方法很简单，我们可以使用群晖自带的 Hyper Backup 备份工具 。打开 Hyper Backup，点击 “新增”，选择 “文件夹”，然后选择
`/volume1/docker/wiz/data`
目录作为源文件夹，再选择备份的目标位置，比如外接的移动硬盘、其他网络存储设备或者群晖的另一块硬盘等 。设置好备份计划，如每天、每周或每月进行备份，这样就可以定期将为知笔记的数据备份到指定位置。

当需要恢复数据时，如果是数据丢失或损坏，我们可以将备份的数据复制回原来的数据目录 。假设我们之前将数据备份到了外接硬盘的
`backup/wizdata`
目录中，现在需要恢复数据，先停止为知笔记容器，然后使用命令
`cp -r /volume2/backup/wizdata/* /volume1/docker/wiz/data/`
（这里
`/volume2`
是外接硬盘的挂载点，根据实际情况修改），将备份的数据复制回原来的数据目录。复制完成后，重新启动为知笔记容器，数据就恢复到了备份时的状态 。

### 五、优化与拓展

#### （一）配置 https 访问

在互联网时代，数据安全至关重要。配置 https 访问能够为为知笔记的传输过程加密，有效防止数据被窃取或篡改，极大地提升了数据传输的安全性 。特别是当我们通过公网访问为知笔记时，https 就像给我们的数据穿上了一层坚固的铠甲，让我们不用担心数据在传输过程中被窥探或恶意修改 。

如果您使用的是群晖系统，可以利用群晖的反向代理服务器来配置 https 。具体步骤如下：

打开群晖的 “控制面板”，找到并进入 “Synology 应用程序门户” 。

在 “反向代理服务器” 选项中，点击 “添加” 按钮 。

在 “来源” 部分，协议选择 “HTTPS”，并输入您希望使用的端口号，比如常见的 443 端口 。

在 “目的地” 部分，输入群晖的内网 IP 地址，以及为知笔记容器映射的端口号，如前面设置的 8081 。

点击 “确定” 保存设置 。

另外，也可以使用 Nginx 来配置 https 。首先，需要在群晖的 Docker 中安装 Nginx 容器 。然后，在 Nginx 的配置文件中添加相关的 https 配置项，如证书路径、密钥路径等 。假设我们已经申请好了 SSL 证书，并将证书文件（.crt）和密钥文件（.key）放置在 Nginx 容器内的
`/etc/nginx/ssl`
目录下，以下是一个简单的 Nginx 配置示例：

```
server {

&#x20;   listen       443 ssl;

&#x20;   server\_name  your\_domain.com; # 替换为您的域名

&#x20;   ssl\_certificate /etc/nginx/ssl/your\_domain.crt;

&#x20;   ssl\_certificate\_key /etc/nginx/ssl/your\_domain.key;

&#x20;   location / {

&#x20;       proxy\_pass http://群晖IP:8081; # 替换为为知笔记的访问地址

&#x20;       proxy\_set\_header Host \$host;

&#x20;       proxy\_set\_header X-Real-IP \$remote\_addr;

&#x20;       proxy\_set\_header X-Forwarded-For \$proxy\_add\_x\_forwarded\_for;

&#x20;       proxy\_set\_header X-Forwarded-Proto \$scheme;

&#x20;   }

}

```

配置完成后，重启 Nginx 容器，就可以通过
<https://your_domain.com>
来安全访问为知笔记了 。

#### （二）与其他设备同步

为知笔记的一大优势就是支持多端同步，让我们可以在不同设备上随时随地访问和管理自己的笔记 。

在手机端，无论是 iOS 系统还是 Android 系统，都可以在应用商店中搜索 “为知笔记”，下载并安装官方客户端 。安装完成后，打开应用，输入在群晖上搭建的为知笔记服务器的地址（如 http:// 群晖 IP:8081 ，如果配置了 https 则为
<https://your_domain.com>
）以及您注册的账号和密码，即可登录并同步笔记 。

在电脑端，同样可以从为知笔记官网下载对应操作系统的客户端，如 Windows 版、Mac 版等 。安装完成后，在客户端的设置中找到 “服务器地址” 选项，输入群晖上为知笔记的访问地址，登录账号后，即可实现电脑端与群晖服务器上的笔记数据同步 。

通过多端同步功能，我们可以在手机上记录灵感，回到电脑前继续编辑；也可以在电脑上整理好资料，在外出时通过手机随时查看，真正实现了知识管理的无缝衔接，大大提高了我们的工作和学习效率 。

### 六、总结

通过在群晖 Docker 中安装为知笔记，我们成功打造了一个安全、高效且个性化的个人笔记管理系统。从前期的准备工作，到一步步完成安装和配置，再到解决可能遇到的问题以及对系统进行优化拓展，每一个环节都让我们更加深入地了解了群晖 NAS 和为知笔记的强大功能。

自己搭建为知笔记服务，不仅数据安全得到了保障，还能根据自身需求进行定制化设置，享受多端同步带来的便捷。希望大家都能动手尝试，将这一知识管理利器运用到工作和学习中，提升自己的效率和创造力。如果在安装过程中遇到任何问题，欢迎在评论区留言交流，让我们一起探索更多关于群晖和为知笔记的精彩玩法 。