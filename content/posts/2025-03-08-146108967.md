---
layout: post
title: "行为模式-中介者模式"
date: 2025-03-08 00:53:25 +0800
description: "5、在客户端创建需要中介者管理的基础构件，在创建一个具体的中介者对象并将需要中介者管理的基础构件以值传递的方式设置到中介者对象中。​\t1）实现设置函数将同事对象设置给中介者对象（这里可以在构造函数中进行初始化对象设置 ，也可以使用单独的设置函数进行设置）。4、实现具体的基础构件类，具体的基础构件类中需要实现发送消息通知的函数，并且需要将自己本身添加到中介对象。3、实现具体的中介者对象，在具体的中介者对象中添加一个管理同事对象的数据结构。2、创建同事对象的接口，在此对象中定义一个中介者引用对象。"
keywords: "行为模式---中介者模式"
categories: ['设计模式']
tags: ['中介者模式']
artid: "146108967"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146108967
    alt: "行为模式-中介者模式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146108967
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146108967
cover: https://bing.ee123.net/img/rand?artid=146108967
image: https://bing.ee123.net/img/rand?artid=146108967
img: https://bing.ee123.net/img/rand?artid=146108967
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     行为模式---中介者模式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     概念
    </h3>
    <p>
     中介者模式是一种行为模式， 他的核心思想是通过引入一个中介者对象，将多个对象之间的复杂交互逻辑统一管理。每个对象只需要与中介者通信，而不需要直接与其他对象交互，从而降低系统的耦合度。
    </p>
    <h3>
     <a id="_4">
     </a>
     适用场景
    </h3>
    <ol>
     <li>
      <strong>
       对象之间交互复杂
      </strong>
      ：当对象之间的交互逻辑复杂且难以维护时。
     </li>
     <li>
      <strong>
       减少依赖
      </strong>
      ：当需要减少对象之间的直接依赖时。
     </li>
     <li>
      <strong>
       集中管理交互
      </strong>
      ：当需要集中管理对象之间的交互逻辑时。
     </li>
    </ol>
    <h3>
     <a id="_10">
     </a>
     创建方式
    </h3>
    <p>
     1、创建一个中介者对象接口，在中介者对象接口中创建一个通知消息函数接口。创建其他的和构件交互的接口也可以。
    </p>
    <p>
     2、创建同事对象的接口，在此对象中定义一个中介者引用对象。
    </p>
    <p>
     3、实现具体的中介者对象，在具体的中介者对象中添加一个管理同事对象的数据结构。
    </p>
    <p>
     ​ 1）实现设置函数将同事对象设置给中介者对象（这里可以在构造函数中进行初始化对象设置 ，也可以使用单独的设置函数进行设置）。
    </p>
    <p>
     ​ 2）实现接口中的通知函数，并实现消息的推送。
    </p>
    <p>
     ​ 这里也可以直接在中介者类中创建和销毁组件对象。
    </p>
    <p>
     4、实现具体的基础构件类，具体的基础构件类中需要实现发送消息通知的函数，并且需要将自己本身添加到中介对象。
    </p>
    <p>
     5、在客户端创建需要中介者管理的基础构件，在创建一个具体的中介者对象并将需要中介者管理的基础构件以值传递的方式设置到中介者对象中。之后在操作基础构件的时候时候可以通过基础构建中设置的中介者来通知其他的基础构件。
    </p>
    <h3>
     <a id="_28">
     </a>
     类关系
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8bdf3db78ce54667b7177509de64b6fb.png#pic_center"/>
    </p>
    <h3>
     <a id="_31">
     </a>
     示例代码
    </h3>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ZhongJieZheMoShi.h"</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"欢迎东哥来到设计模式的世界!\n"</span><span class="token punctuation">;</span>

    IntermediaryBase<span class="token operator">*</span> intermediary <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcretizeIntermediary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    BaseComponent<span class="token operator">*</span> component1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcretizeCompent</span><span class="token punctuation">(</span><span class="token string">"一：你好，我是第一个好友"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    component1<span class="token operator">-&gt;</span><span class="token function">setIntermediary</span><span class="token punctuation">(</span>intermediary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    BaseComponent<span class="token operator">*</span> component2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcretizeCompent</span><span class="token punctuation">(</span><span class="token string">"二：你好，我是第二个好友"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    component2<span class="token operator">-&gt;</span><span class="token function">setIntermediary</span><span class="token punctuation">(</span>intermediary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    BaseComponent<span class="token operator">*</span> component3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcretizeCompent</span><span class="token punctuation">(</span><span class="token string">"三：你好，我是第三个好友"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    component3<span class="token operator">-&gt;</span><span class="token function">setIntermediary</span><span class="token punctuation">(</span>intermediary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    BaseComponent<span class="token operator">*</span> component4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcretizeCompent</span><span class="token punctuation">(</span><span class="token string">"四：你好，我是第四个好友"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    component4<span class="token operator">-&gt;</span><span class="token function">setIntermediary</span><span class="token punctuation">(</span>intermediary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    BaseComponent<span class="token operator">*</span> component5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcretizeCompent</span><span class="token punctuation">(</span><span class="token string">"五：大家好"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    component5<span class="token operator">-&gt;</span><span class="token function">setIntermediary</span><span class="token punctuation">(</span>intermediary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    component5<span class="token operator">-&gt;</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">//同事对象</span>
<span class="token keyword">class</span> <span class="token class-name">IntermediaryBase</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">BaseComponent</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">BaseComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">BaseComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">diaplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">setIntermediary</span><span class="token punctuation">(</span>IntermediaryBase<span class="token operator">*</span> intermediary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//中介者接口</span>
<span class="token keyword">class</span> <span class="token class-name">IntermediaryBase</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">IntermediaryBase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">IntermediaryBase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">addComponent</span><span class="token punctuation">(</span>BaseComponent<span class="token operator">*</span> component<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//具体中介者</span>
<span class="token keyword">class</span> <span class="token class-name">ConcretizeIntermediary</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">IntermediaryBase</span></span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">ConcretizeIntermediary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">ConcretizeIntermediary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m_Component<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			m_Component<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">diaplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">addComponent</span><span class="token punctuation">(</span>BaseComponent<span class="token operator">*</span> component<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		m_Component<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	vector<span class="token operator">&lt;</span>BaseComponent<span class="token operator">*</span><span class="token operator">&gt;</span> m_Component<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">//具体同事对象</span>
<span class="token keyword">class</span> <span class="token class-name">ConcretizeCompent</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">BaseComponent</span></span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">ConcretizeCompent</span><span class="token punctuation">(</span>string date<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> m_date <span class="token operator">=</span> date<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">ConcretizeCompent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"五：你好，我是第五个好友"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		m_intermediary<span class="token operator">-&gt;</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">diaplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> m_date <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">setIntermediary</span><span class="token punctuation">(</span>IntermediaryBase<span class="token operator">*</span> intermediary<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		m_intermediary <span class="token operator">=</span> intermediary<span class="token punctuation">;</span>
		intermediary<span class="token operator">-&gt;</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	IntermediaryBase<span class="token operator">*</span> m_intermediary<span class="token punctuation">;</span>
	string m_date<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre>
    <pre><code class="prism language-csharp">欢迎东哥来到设计模式的世界<span class="token operator">!</span>
五：你好，我是第五个好友
一：你好，我是第一个好友
二：你好，我是第二个好友
三：你好，我是第三个好友
四：你好，我是第四个好友
五：大家好
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34333831323836382f:61727469636c652f64657461696c732f313436313038393637" class_="artid" style="display:none">
 </p>
</div>


