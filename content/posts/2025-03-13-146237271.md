---
layout: post
title: "Flutter竖向步骤条,类似查看物流组件"
date: 2025-03-13 17:19:32 +0800
description: "步骤条，查看物流模板"
keywords: "Flutter：竖向步骤条，类似查看物流组件"
categories: ['Flutter']
tags: ['Flutter']
artid: "146237271"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146237271
    alt: "Flutter竖向步骤条,类似查看物流组件"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146237271
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146237271
cover: https://bing.ee123.net/img/rand?artid=146237271
image: https://bing.ee123.net/img/rand?artid=146237271
img: https://bing.ee123.net/img/rand?artid=146237271
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Flutter：竖向步骤条，类似查看物流组件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     工作中写到了一个类似步骤条的样式，记录一下， 抽空将其改成发货查看物流模板。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a2bfe6a2082d46ce94f874812c0da1b6.png"/>
    </p>
    <blockquote>
     <p>
      页面
     </p>
    </blockquote>
    <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token string">'package:dogex/common/index.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:ducafe_ui_core/ducafe_ui_core.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:get/get.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pull_to_refresh_flutter3/pull_to_refresh_flutter3.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:tdesign_flutter/tdesign_flutter.dart'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">'index.dart'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">NewsListPage</span> <span class="token keyword">extends</span> <span class="token class-name">GetView</span><span class="token operator">&lt;</span>NewsListController<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token function">NewsListPage</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 时间</span>
  Widget <span class="token function">_buildTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span>
      <span class="token function">TDImage</span><span class="token punctuation">(</span>assetUrl<span class="token operator">:</span> <span class="token string">'assets/img/home4.png'</span><span class="token punctuation">,</span><span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">48</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span><span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">48</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">SizedBox</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      TextWidget<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">'2/06'</span><span class="token punctuation">,</span><span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">,</span><span class="token literal-property property">weight</span><span class="token operator">:</span> FontWeight<span class="token punctuation">.</span>w600<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">SizedBox</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      TextWidget<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">'星期四'</span><span class="token punctuation">,</span><span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>color6C7481<span class="token punctuation">,</span><span class="token literal-property property">weight</span><span class="token operator">:</span> FontWeight<span class="token punctuation">.</span>w600<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 列表</span>
  Widget <span class="token function">_buildList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">SliverList</span><span class="token punctuation">(</span>
      <span class="token literal-property property">delegate</span><span class="token operator">:</span> <span class="token function">SliverChildBuilderDelegate</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>context<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token function">IntrinsicHeight</span><span class="token punctuation">(</span>
            <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span>
              <span class="token comment">// 左边圆圈</span>
              <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span>
                <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tight</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span><span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">border</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>AppTheme<span class="token punctuation">.</span>blockBgColor<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">clipRRect</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">Expanded</span><span class="token punctuation">(</span>
                  <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">TDDivider</span><span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span>
              <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token comment">// 右边文章内容</span>
              <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span>
                <span class="token comment">// 时间</span>
                TextWidget<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">'11:21'</span><span class="token punctuation">,</span><span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>color666<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">SizedBox</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// 标题</span>
                TextWidget<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">'美国两家律师事务所起诉Pump.fun'</span><span class="token punctuation">,</span><span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">SizedBox</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// 内容</span>
                TextWidget<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>
                  index <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span>
                  <span class="token string-property property">'金色财经报道，据 Cointelegraph 报道，Pump.fun 因涉嫌使用两家律师事务所的标志和名称而收到一封停止令，这两家律师事务所目前正在起诉该平台。美国律师事务所 Bunwick Law 在 X平台的声明中表示，该公司和 WolfPopper 已向 Pump.fun 发出了一封停止令，要求"立即删除"Dog Shit Going NoWhere(DOGSHIT2)和其他代币这些代币通过未经许可使用知识产权(包括其徽标和名称)"冒充了我们的公司"。据 Pump.fun称，多名用户以各种配置使用Burwick Law和Wolf Popper的名称和微标创建了代币。还有一些代币使用了Burwick Law员工和其在针对Pump.fun的诉讼中的一名客户的姓名和肖像。'</span>
                  <span class="token operator">:</span> <span class="token string">'其他内容'</span><span class="token punctuation">,</span>
                  <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>color999<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">SizedBox</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// 查看原文</span>
                TextWidget<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">'查看原文'</span><span class="token punctuation">,</span><span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>primaryBlue<span class="token punctuation">,</span><span class="token literal-property property">textAlign</span><span class="token operator">:</span> TextAlign<span class="token punctuation">.</span>end<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">650</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">SizedBox</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toColumn</span><span class="token punctuation">(</span>crossAxisAlignment<span class="token operator">:</span> CrossAxisAlignment<span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">650</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toRow</span><span class="token punctuation">(</span>mainAxisAlignment<span class="token operator">:</span> MainAxisAlignment<span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span><span class="token literal-property property">crossAxisAlignment</span><span class="token operator">:</span> CrossAxisAlignment<span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">childCount</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 主视图</span>
  Widget <span class="token function">_buildView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">CustomScrollView</span><span class="token punctuation">(</span>
      <span class="token literal-property property">slivers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">SizedBox</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sliverToBoxAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">_buildTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sliverToBoxAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sliverPaddingHorizontal</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">SizedBox</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sliverToBoxAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">_buildList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sliverPaddingHorizontal</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @override
  Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> GetBuilder<span class="token operator">&lt;</span>NewsListController<span class="token operator">&gt;</span><span class="token punctuation">(</span>
      <span class="token literal-property property">init</span><span class="token operator">:</span> <span class="token function">NewsListController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"news_list"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
          <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>pageBgColor<span class="token punctuation">,</span> <span class="token comment">// 自定义颜色</span>
          <span class="token literal-property property">appBar</span><span class="token operator">:</span> <span class="token function">TDNavBar</span><span class="token punctuation">(</span>
            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">44</span><span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'资讯'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">titleColor</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">,</span>
            <span class="token literal-property property">titleFontWeight</span><span class="token operator">:</span> FontWeight<span class="token punctuation">.</span>w600<span class="token punctuation">,</span>
            <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>navBgColor<span class="token punctuation">,</span>
            <span class="token literal-property property">screenAdaptation</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">useDefaultBack</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token literal-property property">leftBarItems</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token function">TDNavBarItem</span><span class="token punctuation">(</span>icon<span class="token operator">:</span> TDIcons<span class="token punctuation">.</span>chevron_left<span class="token punctuation">,</span> <span class="token literal-property property">iconSize</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token literal-property property">iconColor</span><span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">,</span><span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                Get<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token function">SmartRefresher</span><span class="token punctuation">(</span>
            <span class="token literal-property property">controller</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>refreshController<span class="token punctuation">,</span>
            <span class="token literal-property property">enablePullUp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启用上拉加载</span>
            <span class="token literal-property property">onRefresh</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>onRefresh<span class="token punctuation">,</span> <span class="token comment">// 下拉刷新回调</span>
            <span class="token literal-property property">onLoading</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>onLoading<span class="token punctuation">,</span> <span class="token comment">// 上拉加载回调</span>
            <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token function">SmartRefresherFooterWidget</span><span class="token punctuation">(</span>textColor<span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 底部加载更多组件</span>
            <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token function">SmartRefresherHeaderWidget</span><span class="token punctuation">(</span>textColor<span class="token operator">:</span> AppTheme<span class="token punctuation">.</span>colorfff<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 头部刷新组件</span>
            <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">_buildView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <blockquote>
     <p>
      控制器
     </p>
    </blockquote>
    <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token string">'package:get/get.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pull_to_refresh_flutter3/pull_to_refresh_flutter3.dart'</span><span class="token punctuation">;</span>
<span class="token comment">// import 'package:dogex/common/index.dart';</span>

<span class="token keyword">class</span> <span class="token class-name">NewsListController</span> <span class="token keyword">extends</span> <span class="token class-name">GetxController</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">NewsListController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 查看详情</span>
  <span class="token keyword">void</span> <span class="token function">goNewsDetail</span><span class="token punctuation">(</span><span class="token parameter">String id</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Get<span class="token punctuation">.</span><span class="token function">toNamed</span><span class="token punctuation">(</span><span class="token string">'/newsDetail'</span><span class="token punctuation">,</span><span class="token literal-property property">arguments</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">'id'</span><span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  List items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">/*
  * 分页
  * */</span>
  final RefreshController refreshController <span class="token operator">=</span> <span class="token function">RefreshController</span><span class="token punctuation">(</span>
    <span class="token literal-property property">initialRefresh</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// int _page = 1;</span>
  Future<span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token function">_loadNewsSell</span><span class="token punctuation">(</span>bool isRefresh<span class="token punctuation">)</span> async <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// var result = await HomeApi.noticesList(PageListReq(</span>
    <span class="token comment">//   pageNo:isRefresh ? 1:_page,</span>
    <span class="token comment">//   pageSize:20</span>
    <span class="token comment">// ));</span>
    <span class="token comment">// if(isRefresh){<!-- --></span>
    <span class="token comment">//   _page = 1;</span>
    <span class="token comment">//   items.clear();</span>
    <span class="token comment">// }</span>
    <span class="token comment">// if(result.isNotEmpty){<!-- --></span>
    <span class="token comment">//   _page++;</span>
    <span class="token comment">//   items.addAll(result);</span>
    <span class="token comment">// }</span>
    <span class="token comment">// // 是否是空</span>
    <span class="token comment">// return result.isEmpty;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 上拉载入新商品</span>
  <span class="token keyword">void</span> <span class="token function">onLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>items<span class="token punctuation">.</span>isNotEmpty<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 拉取数据是否为空 ? 设置暂无数据 ： 加载完成</span>
        <span class="token keyword">var</span> isEmpty <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">_loadNewsSell</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        isEmpty
            <span class="token operator">?</span> refreshController<span class="token punctuation">.</span><span class="token function">loadNoData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">:</span> refreshController<span class="token punctuation">.</span><span class="token function">loadComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        refreshController<span class="token punctuation">.</span><span class="token function">loadFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 加载失败</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      refreshController<span class="token punctuation">.</span><span class="token function">loadNoData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置无数据</span>
    <span class="token punctuation">}</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"news_list"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 下拉刷新</span>
  <span class="token keyword">void</span> <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">await</span> <span class="token function">_loadNewsSell</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      refreshController<span class="token punctuation">.</span><span class="token function">refreshCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      refreshController<span class="token punctuation">.</span><span class="token function">refreshFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"news_list"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>



  <span class="token function">_initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"news_list"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  @override
  <span class="token keyword">void</span> <span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @override
  <span class="token keyword">void</span> <span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    refreshController<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34303734353134332f:61727469636c652f64657461696c732f313436323337323731" class_="artid" style="display:none">
 </p>
</div>


