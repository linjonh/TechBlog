---
layout: post
title: "p10k-configure执行报错-powerlevel10kconfigp10k-lean.zsh-is-not-readable"
date: 2025-09-10T18:58:49+0800
description: "询问豆包，发现该变量定义在 Powerlevel10k 安装目录下的 powerlevel10k.zsh-theme 文件中（这是加载 Powerlevel10k 的入口脚本）。我移动了Powerlevel10k文件夹的位置，导致p10k configure命令找不到powerlevel10k文件夹的位置。由于 __p9k_root_dir 被定义为只读变量，直接unset删除或修改会受到限制。，表示powerlevel10k的家目录。的值没有跟着改变，导致找不到powerlevel10k。"
keywords: "p10k configure执行报错: ~/powerlevel10k/config/p10k-lean.zsh is not readable"
categories: ['未分类']
tags: ['Powerlevel']
artid: "151410338"
arturl: "https://blog.csdn.net/qq_43470425/article/details/151410338"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151410338
    alt: "p10k-configure执行报错-powerlevel10kconfigp10k-lean.zsh-is-not-readable"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151410338
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151410338
cover: https://bing.ee123.net/img/rand?artid=151410338
image: https://bing.ee123.net/img/rand?artid=151410338
img: https://bing.ee123.net/img/rand?artid=151410338
---



# p10k configure执行报错: ~/powerlevel10k/config/p10k-lean.zsh is not readable

`[ERROR] p10k configure: ~/powerlevel10k/config/p10k-lean.zsh is not readable`

## 背景

我移动了Powerlevel10k文件夹的位置，导致p10k configure命令找不到powerlevel10k文件夹的位置。  
 原来Powerlevel10k的位置：`~/powerlevel10k`  
 移动后Powerlevel10k的位置：`~/.oh-my-zsh/custom/themes/powerlevel10k`

## 0️⃣、错误原因

powerlevel10k设置了一个环境变量`__p9k_root_dir` ，表示powerlevel10k的家目录。手动移动目录后，`__p9k_root_dir`的值没有跟着改变，导致找不到powerlevel10k

## 1️⃣、解决方法

由于 __p9k_root_dir 被定义为只读变量，直接unset删除或修改会受到限制。以下是具体处理方法：

```shell
# 先取消只读属性（Zsh 特有）
typeset +r __p9k_root_dir
# 再删除变量
unset __p9k_root_dir
# 然后进入powerlevel10k文件夹，执行
source powerlevel10k.zsh-theme

# 查看是否修改成功
echo $__p9k_root_dir

# 删除配置缓存
rm -f ~/.p10k.zsh
# 清除 zsh 缓存（如果使用 zsh）
rm -f ~/.zcompdump*

# 继续修改oh-my-zsh
vim ~/.zshrc
# 在文件中添加或修改为新的加载路径：
ZSH_THEME="powerlevel10k/powerlevel10k"

# 然后重新加载配置并运行向导：
source ~/.zshrc
p10k configure

```

## 2️⃣、后记（问题排查流程）

1. 这里是`p10k configure`命令报错，首先使用命令查看`p10k`脚本内容：`wwhich p10k | grep "configure"`![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8da90d69a6234613bb23c27af2d54112.png)
2. 发现主要调用`p9k_configure`命令，继续跟踪该脚本：`which p9k_configure`  
    ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/a69b388ee6a04f8bb51edfb1d4d8c0d8.png)
3. 发现关键环境变量`__p9k_root_dir`，打印其内容`echo $__p9k_root_dir`，结果是移动前的路径`~/powerlevel10k`，确认就是这个变量导致的错误。
4. 询问豆包，发现该变量定义在 Powerlevel10k 安装目录下的 powerlevel10k.zsh-theme 文件中（这是加载 Powerlevel10k 的入口脚本）。
5. 在powerlevel10k.zsh-theme 文件中找到定义语句`(( $+__p9k_root_dir )) || typeset -gr __p9k_root_dir=${POWERLEVEL9K_INSTALLATION_DIR:-${${(%):-%x}:A:h}}`。这条语句可理解为：如果 `__p9k_root_dir` 变量尚未定义，则定义它并赋值；如果已定义，则什么都不做。
6. 问题原因找到了，Powerlevel10k文件移动前 `__p9k_root_dir` 被定义为`~/powerlevel10k`，移动后`__p9k_root_dir` 没有被删除，导致不能重新定义。
7. 所以删除`__p9k_root_dir` 变量，重新执行脚本就能更正`__p9k_root_dir` 的值。



