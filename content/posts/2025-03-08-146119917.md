---
layout: post
title: "redis全局命令setgetkeys"
date: 2025-03-08 18:00:33 +0800
description: "Redis 支持很多种数据结构。整体上来说，Redis 是键值对结构key固定就是字符串，value实际上会有多种类型字符串哈希表列表集合有序集合操作上面不同的数据结构，就会有不同的命令。而全局命令，就是可以搭配任意一个数据结构来使用的命令。"
keywords: "【redis】全局命令set、get、keys"
categories: ['Redis']
tags: ['缓存', '数据库', 'Redis']
artid: "146119917"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146119917
    alt: "redis全局命令setgetkeys"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146119917
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146119917
cover: https://bing.ee123.net/img/rand?artid=146119917
image: https://bing.ee123.net/img/rand?artid=146119917
img: https://bing.ee123.net/img/rand?artid=146119917
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【redis】全局命令set、get、keys
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_1">
     </a>
     生产环境
    </h2>
    <p>
     未来在工作中会涉及到的几个环境：
    </p>
    <ol>
     <li>
      办公环境（入职后，公司给你发个电脑）
     </li>
     <li>
      开发环境
      <ul>
       <li>
        有的时候，开发环境和办公环境是一个（一般做前端和做客户端）
       </li>
       <li>
        有的时候，开发环境是一个单独的服务器（一般做后端）
        <ol>
         <li>
          编译一次时间特别久，使用高性能的服务器，进行编译
         </li>
         <li>
          有的程序一启动要消耗很多的 CPU 和内存资源，办公电脑难以支撑
         </li>
         <li>
          有的程序比较依赖
          <code>
           Linux
          </code>
          ，在其他环境下搭不起来
         </li>
        </ol>
       </li>
      </ul>
     </li>
     <li>
      测试环境（测试工程师使用）
     </li>
     <li>
      线上环境/生产环境
      <ul>
       <li>
        上面三个环境统称“线下环境”，外界用户无法访问到的
       </li>
       <li>
        线上环境则是外界用户可以访问到的
       </li>
       <li>
        一旦生产环境上出现问题，一定会对用户的使用产生影响，就会直接影响到公司营收
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h2>
     <a id="Redis__20">
     </a>
     Redis 文档
    </h2>
    <p>
     通过
     <code>
      redis-cli
     </code>
     客户端和
     <code>
      redis
     </code>
     服务器交互，涉及到
     <strong>
      很多
     </strong>
     的
     <code>
      redis
     </code>
     命令（非常非常多）
    </p>
    <ol>
     <li>
      掌握常用命令（多操作练习）
     </li>
     <li>
      学会使用
      <code>
       Redis
      </code>
      的文档
      <img alt="image.png" src="https://i-blog.csdnimg.cn/img_convert/735838d3d6fadc1c493c902fa9ff087c.png"/>
     </li>
    </ol>
    <h2>
     <a id="_get__set_29">
     </a>
     最核心的两个命令 get 和 set
    </h2>
    <p>
     <code>
      Redis
     </code>
     是按照
     <strong>
      键值对
     </strong>
     的方式存储数据的
    </p>
    <ul>
     <li>
      <code>
       get
      </code>
      ：根据
      <code>
       key
      </code>
      来取
      <code>
       value
      </code>
     </li>
     <li>
      <code>
       set
      </code>
      ：把
      <code>
       key
      </code>
      和
      <code>
       value
      </code>
      存储进去
     </li>
    </ul>
    <hr/>
    <p>
     若想输入
     <code>
      Redis
     </code>
     命令，就先要进入
     <code>
      Redis
     </code>
     客户端
     <img alt="image.png|329" src="https://i-blog.csdnimg.cn/img_convert/ac05e04902887105d071e17f018fd0e4.png"/>
    </p>
    <h3>
     <a id="_41">
     </a>
     使用方法
    </h3>
    <pre><code class="prism language-redis">set key value
</code></pre>
    <p>
     <code>
      key
     </code>
     和
     <code>
      value
     </code>
     都必须是字符串（写数字也行，会把你的数字看成字符串）
     <br/>
     <img alt="image.png" src="https://i-blog.csdnimg.cn/img_convert/b77c26813599094feaf45ee7c91857a2.png"/>
    </p>
    <ul>
     <li>
      <code>
       redis
      </code>
      中的命令不区分大小写
     </li>
    </ul>
    <hr/>
    <pre><code class="prism language-redis">get key
</code></pre>
    <p>
     <img alt="image.png|362" src="https://i-blog.csdnimg.cn/img_convert/5495920b8e3f508f25a8767402f69233.png"/>
    </p>
    <ul>
     <li>
      <code>
       get
      </code>
      直接输入
      <code>
       key
      </code>
      就能得到
      <code>
       value
      </code>
     </li>
     <li>
      如果当前
      <code>
       key
      </code>
      不存在，就会返回
      <code>
       nil
      </code>
      （和
      <code>
       null/NULL
      </code>
      是一个意思）
     </li>
    </ul>
    <h2>
     <a id="_64">
     </a>
     全局命令
    </h2>
    <h3>
     <a id="_66">
     </a>
     定义
    </h3>
    <p>
     Redis 支持很多种数据结构。整体上来说，Redis 是
     <strong>
      键值对结构
     </strong>
     ，
     <code>
      key
     </code>
     固定就是字符串，
     <code>
      value
     </code>
     实际上会有多种类型
    </p>
    <ul>
     <li>
      字符串
     </li>
     <li>
      哈希表
     </li>
     <li>
      列表
     </li>
     <li>
      集合
     </li>
     <li>
      有序集合
      <br/>
      操作上面不同的数据结构，就会有不同的命令。
     </li>
    </ul>
    <p>
     而全局命令，就是
     <strong>
      可以搭配任意一个数据结构来使用的命令
     </strong>
    </p>
    <h3>
     <a id="keys_key_78">
     </a>
     keys——查询 key
    </h3>
    <p>
     用来查询当前服务器上匹配的
     <code>
      key
     </code>
     。
    </p>
    <p>
     通过一些特殊符号（通配符）来描述
     <code>
      key
     </code>
     的模样，匹配上述模样的
     <code>
      key
     </code>
     就能被查询出来
    </p>
    <ul>
     <li>
      就是帮助我们看一下，当前
      <code>
       Redis
      </code>
      上面有哪些
      <code>
       key
      </code>
     </li>
    </ul>
    <hr/>
    <p>
     语法：
    </p>
    <pre><code class="prism language-redis">keys pattern
</code></pre>
    <ul>
     <li>
      <code>
       pattern
      </code>
      ： 包含特殊符号的字符串。有的地方翻译成“样式”或者“模式”。存在的意义，是去描述另外的字符串长啥样的
     </li>
    </ul>
    <h4>
     <a id="pattern_94">
     </a>
     pattern
    </h4>
    <blockquote>
     <p>
      比如，你找女朋友的要求是：
     </p>
     <ul>
      <li>
       肤白
      </li>
      <li>
       貌美
      </li>
      <li>
       大长腿
       <br/>
       那这些条件就是
       <code>
        pattern
       </code>
       。又饿了这些条件之后，你就在你的追求者中进行遍历，看哪些符合这些条件，选出她们
      </li>
     </ul>
    </blockquote>
    <ul>
     <li>
      <code>
       ?
      </code>
      ：匹配任意
      <strong>
       一个
      </strong>
      字符，
      <code>
       hello
      </code>
      ，
      <code>
       hollo
      </code>
      ，
      <code>
       hxllo
      </code>
      …
     </li>
     <li>
      <code>
       *
      </code>
      ：匹配
      <strong>
       任意个
      </strong>
      字符，
      <code>
       heeeeelo
      </code>
      ，
      <code>
       hllo
      </code>
      …
     </li>
     <li>
      <code>
       [ae]
      </code>
      ：匹配
      <strong>
       指定
      </strong>
      字符，
      <code>
       hallo
      </code>
      和
      <code>
       hello
      </code>
     </li>
     <li>
      <code>
       [^e]
      </code>
      ：匹配
      <strong>
       除了指定字符
      </strong>
      的，
      <code>
       hallo
      </code>
      ，
      <code>
       hgllo
      </code>
      …
     </li>
     <li>
      <code>
       [a-b]
      </code>
      ：匹配 a-b 这个范围的，
      <code>
       hallo
      </code>
      ，
      <code>
       hbllo
      </code>
      <br/>
      <img alt="image.png|328" src="https://i-blog.csdnimg.cn/img_convert/cd0b92a0c7aefaf357e7e45dab94c211.png"/>
     </li>
    </ul>
    <p>
     <font color="#ff0000">
      注意事项
     </font>
     ：
     <br/>
     <code>
      keys
     </code>
     命令的时间复杂度是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        O 
        
       
         ( 
        
       
         N 
        
       
         ) 
        
       
      
        O(N)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          O
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal" style="margin-right: 0.109em;">
          N
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     ，所以，在生产环境上，一般都会
     <strong>
      禁止
     </strong>
     使用
     <code>
      keys
     </code>
     命令，尤其是大杀器
     <code>
      keys *
     </code>
    </p>
    <ul>
     <li>
      生产环境上的
      <code>
       key
      </code>
      可能会非常多，而我们的
      <code>
       Redis
      </code>
      是一个单线程服务器
     </li>
     <li>
      就可能导致执行
      <code>
       key *
      </code>
      实际爱你非常长，就使
      <code>
       Redis
      </code>
      服务器被阻塞了，无法给其他客户端提供服务
      <br/>
      这样的后果可能是灾难性的
     </li>
    </ul>
    <blockquote>
     <ul>
      <li>
       <code>
        Redis
       </code>
       经常被用于做
       <strong>
        缓存
       </strong>
       ，挡在
       <code>
        MySQL
       </code>
       面前，替
       <code>
        MySQL
       </code>
       负重前行。万一
       <code>
        Redis
       </code>
       被一个
       <code>
        keys *
       </code>
       阻塞住了，此时其他的查询
       <code>
        Redis
       </code>
       操作就超时了，此时这些请求就会直接查询数据库，
       <strong>
        突然一大波请求过来了，
        <code>
         MySQL
        </code>
        措手不及，就容易挂~
       </strong>
      </li>
      <li>
       整个系统就基本瘫痪了。
      </li>
      <li>
       如果你要是没有及时发现，及时恢复的话，年终奖妥妥就没了，更有甚者工作就没了
      </li>
     </ul>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f5965656561722f:61727469636c652f64657461696c732f313436313139393137" class_="artid" style="display:none">
 </p>
</div>


