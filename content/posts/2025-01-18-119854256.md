---
layout: post
title: "玩玩硬件esp8266驱动墨水屏"
date: 2025-01-18 10:10:54 +0800
description: "本项目是使用esp8266驱动点亮微雪家的2.13寸墨水屏代码教程 (随缘更新)在github地址上"
keywords: "esp8266 墨水屏"
categories: ['未分类']
tags: ['无标签']
artid: "119854256"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=119854256
  alt: "玩玩硬件esp8266驱动墨水屏"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=119854256
featuredImagePreview: https://bing.ee123.net/img/rand?artid=119854256
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【玩玩硬件】esp8266驱动墨水屏
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     本项目是使用esp8266驱动点亮微雪家的2.13寸墨水屏代码教程 (随缘更新)
     <br/>
     在
     <a href="https://github.com/Yakuho/esp8266toscreen">
      github地址
     </a>
     上排版比这里会好看很多, 觉得帮助到你能否点个star~
    </p>
    <h2>
     <a id="_3">
     </a>
     目录简介
    </h2>
    source: 源代码文件
    <ul>
     <li>
      font(8,12,16,20,24): 字体格式文件;数字代表字体大小
     </li>
     <li>
      epdpaint: 画布文件;矩形、线段、圆等绘图函数
     </li>
     <li>
      epdif: 引脚定义
     </li>
     <li>
      imagedata: 存放图片矩阵
     </li>
     <li>
      epd2in13_V2: 控制命令
     </li>
    </ul>
    docs: 文档图片文件
    <h2>
     <a id="_21">
     </a>
     前期物品准备
    </h2>
    需要准备的硬件物品
    <ul>
     <li>
      esp8266板子(屏幕24排线)
     </li>
     <li>
      24排线墨水屏
     </li>
     <li>
      老式安卓数据线
     </li>
    </ul>
    需要准备的软件以及代码
    <ul>
     <li>
      Arduino IDE
     </li>
    </ul>
    <h2>
     <a id="_40">
     </a>
     环境搭建
    </h2>
    <p>
     下面我们一起开始从零开始吧
    </p>
    <ol>
     <li>
      拿出一块esp8266板子插上老式安卓数据线至电脑USB插口
     </li>
     <li>
      打开电脑设备管理器，查看端口(COM和LPT)是否有设备，并记录下来
     </li>
    </ol>
    <ul>
     <li>
      寻找 端口(COM和LPT) 看是否被识别出端口如:-&gt; USB-SERIAL CH340(COM4)
     </li>
     <li>
      若电脑无法识别该端口，上搜索平台下载CH340驱动，安装以后基本上就能检测出端口了
     </li>
     <li>
      出现设备如上述USB-SERIAL CH340(COM4)即可进行下一步
     </li>
     <li>
      如果实在不行检查一下板子是不是烧了 (●’◡’●)
     </li>
    </ul>
    <ol start="4">
     <li>
      打开Arduino IDE
     </li>
    </ol>
    <ul>
     <li>
      依次点击 文件 -&gt; 首选项 -&gt; 找到附加开发板管理器网站
     </li>
     <li>
      输入网址 http://arduino.esp8266.com/stable/package_esp8266com_index.json
     </li>
     <li>
      依次点击 工具 -&gt; 开发板 -&gt; 开发板管理器 -&gt; 搜索esp -&gt; 安装
     </li>
    </ul>
    <ol start="5">
     <li>
      开发板定义文件安装完成
     </li>
    </ol>
    <ul>
     <li>
      在安装中有可能因为科学原因，下载失败等信息报错了使用科学方式重试
     </li>
     <li>
      重试还是不行以后，找到Arduino IDE下方的调试台，将调试文件翻上去顶上，找到文件地址手动下载
     </li>
     <li>
      从Arduino IDE依次点击 文件 -&gt; 首选项 从下方找到文件路径如 C:\Users\Yakuho\AppData\Local\Arduino15
     </li>
     <li>
      将下载的压缩包放至 C:\Users\Yakuho\AppData\Local\Arduino15\staging\packages 目录下
     </li>
     <li>
      重启Arduino IDE
     </li>
     <li>
      因为要下载多个安装包，后面出现下载失败，仍然手动下载，放在目录中直到全部下载完毕
     </li>
     <li>
      进行安装并无报错说明成功
     </li>
    </ul>
    <ol start="6">
     <li>
      选择开发板
     </li>
    </ol>
    <ul>
     <li>
      依次点击 工具 -&gt; 开发板 -&gt; Generic ESP8266 Module
     </li>
     <li>
      依次点击 工具 -&gt; 开发板 -&gt; Upload Speed -&gt; 115200 (按照板子参数进行设置, 一般都是115200这个波特率)
     </li>
     <li>
      依次点击 工具 -&gt; 开发板 -&gt; Flash Mode -&gt; QIO
     </li>
     <li>
      依次点击 工具 -&gt; 开发板 -&gt; Flash Frequency -&gt; 40MHz
     </li>
     <li>
      依次点击 工具 -&gt; 开发板 -&gt; Erase Flash -&gt; Only Sketch
     </li>
     <li>
      依次点击 工具 -&gt; 开发板 -&gt; 端口 -&gt; 在第2步查看到的那个端口
     </li>
    </ul>
    <h2>
     <a id="_68">
     </a>
     开始编程
    </h2>
    <p>
     以下编程都是基于Arduino IDE上进行, 该分支仅是要求点亮屏幕
    </p>
    <ol>
     <li>
      <p>
       在原代码目录下新建一个Ariduino文件 ****.ino
      </p>
     </li>
     <li>
      <p>
       导入头文件
      </p>
      <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;SPI.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"epd2in13_V2.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"epdpaint.h"</span></span>
Epd epd<span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       选择一块区域进行编程
      </p>
      <pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 此区域在硬件中只执行一次</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token comment">// 此区域在硬件中会重复执行</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
<li>
<p>
程序猿老规矩 打印一下 hello world
</p>
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;SPI.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"epd2in13_V2.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"epdpaint.h"</span></span>
Epd epd<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开启串行通信接口并设置通信波特率, 与环境搭建 5. 开发板选择中的 Upload Speed 一致</span>
epd<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 屏幕情况</span>
epd<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>FULL<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 屏幕刷新 FULL 全屏 PART 部分</span>
<span class="token keyword">int</span> all_pixel <span class="token operator">=</span> <span class="token number">104</span> <span class="token operator">_</span> <span class="token number">212</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布大小</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> image<span class="token punctuation">[</span>all_pixel<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布矩阵</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> all_pixel<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
image<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0Xff</span><span class="token punctuation">;</span> <span class="token comment">// 初始化画布矩阵 亮度为 255=0xff</span>
<span class="token punctuation">}</span>
Paint <span class="token function">paint</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">212</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化画布对象 width should be the multiple of 8</span>
paint<span class="token punctuation">.</span><span class="token function">SetRotate</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置画布旋转角度</span>
paint<span class="token punctuation">.</span><span class="token function">DrawStringAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"Hello world"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Font20<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出字符串</span>
<span class="token keyword">char</span> s<span class="token punctuation">,</span> e<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> paint<span class="token punctuation">.</span><span class="token function">GetWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 将矩阵与输出相匹配 否则会出现字体反转</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> paint<span class="token punctuation">.</span><span class="token function">GetHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
s <span class="token operator">=</span> image<span class="token punctuation">[</span>x <span class="token operator">+</span> y <span class="token operator">_</span> paint<span class="token punctuation">.</span><span class="token function">GetWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
e <span class="token operator">=</span> image<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token punctuation">(</span>paint<span class="token punctuation">.</span><span class="token function">GetHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> y<span class="token punctuation">)</span> <span class="token operator">*</span> paint<span class="token punctuation">.</span><span class="token function">GetWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
image<span class="token punctuation">[</span>x <span class="token operator">+</span> y <span class="token operator">*</span> paint<span class="token punctuation">.</span><span class="token function">GetWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
image<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token punctuation">(</span>paint<span class="token punctuation">.</span><span class="token function">GetHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> y<span class="token punctuation">)</span> <span class="token operator">*</span> paint<span class="token punctuation">.</span><span class="token function">GetWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
epd<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token comment">// 此区域在硬件中会重复执行</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
<li>
<p>
找到 Arduino IDE 依次点击 项目 -&gt; 上传, 观察下方控制台 安静等待 (ง •\_•)ง
</p>
<pre><code>项目使用了 272753 字节，占用了 (28%) 程序存储空间。最大为 958448 字节。
全局变量使用了 28272 字节，(34%)的动态内存，余留 53648 字节局部变量。最大为 81920 字节。
esptool.py v3.0
Serial port COM3
Connecting....
Chip is ESP8266EX
Features: WiFi
Crystal is 26MHz
MAC: 3c:71:bf:39:0a:28
Uploading stub...
Running stub...
Stub running...
Configuring flash size...
Auto-detected Flash size: 4MB
Flash params set to 0x0040
Compressed 276912 bytes to 201576...
Writing at 0x00000000... (7 %)
Writing at 0x00004000... (15 %)
Writing at 0x00008000... (23 %)
Writing at 0x0000c000... (30 %)
Writing at 0x00010000... (38 %)
Writing at 0x00014000... (46 %)
Writing at 0x00018000... (53 %)
Writing at 0x0001c000... (61 %)
Writing at 0x00020000... (69 %)
Writing at 0x00024000... (76 %)
Writing at 0x00028000... (84 %)
Writing at 0x0002c000... (92 %)
Writing at 0x00030000... (100 %)
Wrote 276912 bytes (201576 compressed) at 0x00000000 in 17.8 seconds (effective 124.5 kbit/s)...
Hash of data verified.

Leaving...
Hard resetting via RTS pin...
</code></pre>
</li>
<li>
<p>
若发现屏幕闪烁并输出 “Hello world”, 说明你成功入门了 (●’◡’●)
</p>
</li>
</ol>
<h2>
<a id="_168">
</a>
更多详细介绍
</h2>
<ol>
<li>
屏幕的输出方向
</li>
</ol>
<p>
不知道你是否注意到在 “Hello world” 代码中, 设置了一个屏幕方向代码如:
</p>
<pre><code class="prism language-c">paint<span class="token punctuation">.</span><span class="token function">SetRotate</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>
这是可以让屏幕旋转 90° 的函数, 并让坐标原点函数也会相应跟着旋转, 下面是图像方向与坐标原点之间的关系
</p>
<p>
这是可以让屏幕旋转 90° 的函数, 并让坐标原点函数也会相应跟着旋转, 下面是图像方向与坐标原点之间的关系
</p>
<ul>
<li>
<p>
paint.SetRotate(0)
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/af866e37a80a0fc00950d384764f25af.png"/>
</p>
</li>
<li>
<p>
paint.SetRotate(1)
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a08b44a5acbd7da72a40ea6abeda1249.png"/>
</p>
</li>
<li>
<p>
paint.SetRotate(2)
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c7bb37b2c8dcd1ad05515dd181de39ec.png"/>
</p>
</li>
<li>
<p>
paint.SetRotate(3)
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b13bc293b225c7f115aac73772209a76.png"/>
</p>
</li>
</ul>
<ol start="2">
<li>
屏幕的输出颜色以及像素组成
<br/>
本项目使用的 2.13 寸墨水屏中, 该墨水屏的像素矩阵大小为(212, 104), 控制屏幕输出, 有两种不同的输出代码:
<br/>
基于 epd 函数的输出
<pre><code class="prism language-c"> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>FULL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> all_pixel <span class="token operator">=</span> <span class="token number">104</span> <span class="token operator">_</span> <span class="token number">212</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布大小</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> image<span class="token punctuation">[</span>all_pixel<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布矩阵</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> all_pixel<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
image<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">;</span> <span class="token comment">// 将画布置为全黑</span>
<span class="token punctuation">}</span>
<span class="token comment">/_
这里可能会有疑惑为什么画布大小明明是 212 _ 104 为什么还要除 8
注意看下面的数组赋值, 每个数组赋值是 0x00, 表示一个数组元素是一个字节
即包含 8 比特的值, 正如所说的屏幕像素是由比特位决定的, 所以只需要 212 _ 104 / 8
_/</span>
Paint <span class="token function">paint</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">212</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span>paint<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
基于 paint 函数的输出
<pre><code class="prism language-c"> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>FULL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> all_pixel <span class="token operator">=</span> <span class="token number">104</span> <span class="token operator">_</span> <span class="token number">212</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布大小</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> image<span class="token punctuation">[</span>all_pixel<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布矩阵</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> all_pixel<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
image<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">;</span> <span class="token comment">// 将画布置为全黑</span>
<span class="token punctuation">}</span>
<span class="token comment">/_
在这里仍然需要使用比特形式初始化画布
但是初始化以后, 就可以使用 paint 去进行坐标点的绘图
这时的坐标点就是 212 _ 104
_/</span>
Paint <span class="token function">paint</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">212</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> <span class="token number">212</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> <span class="token number">104</span><span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
paint<span class="token punctuation">.</span><span class="token function">DrawPixel</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 逐个坐标进行显示</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
epd<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span>paint<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
微雪的 24 排线的墨水屏是有黑白红三种颜色的输出, 不用模式下的显示, 代码上也会有稍微的不同, 其中红色显示的比较特殊, 下面有两种模式的 Demo 代码:
<br/>
黑白输出模式
<pre><code class="prism language-c"> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>FULL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> all_pixel <span class="token operator">=</span> <span class="token number">104</span> <span class="token operator">_</span> <span class="token number">212</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布大小</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> image<span class="token punctuation">[</span>all_pixel<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布矩阵</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> all_pixel<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
image<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">;</span> <span class="token comment">// 将画布置为全黑</span>
<span class="token punctuation">}</span>
Paint <span class="token function">paint</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">212</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
paint<span class="token punctuation">.</span><span class="token function">SetRotate</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
paint<span class="token punctuation">.</span><span class="token function">DrawFilledCircle</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画一个白色实心圆</span>
epd<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span>paint<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
红色输出模式
<br/>
红色模式输出比较特殊, 必须先黑白输出模式, 然后将原来白色转红色, 原来黑色转白色
<pre><code class="prism language-c"> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>FULL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> all_pixel <span class="token operator">=</span> <span class="token number">104</span> <span class="token operator">_</span> <span class="token number">212</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布大小</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> image<span class="token punctuation">[</span>all_pixel<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 定义画布矩阵</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> all_pixel<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
image<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">;</span> <span class="token comment">// 将画布置为全黑</span>
<span class="token punctuation">}</span>
Paint <span class="token function">paint</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">212</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
paint<span class="token punctuation">.</span><span class="token function">SetRotate</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
paint<span class="token punctuation">.</span><span class="token function">DrawFilledCircle</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画一个黑色实心圆</span>
paint<span class="token punctuation">.</span><span class="token function">DrawFilledCircle</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画一个白色实心圆</span>
epd<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span>paint<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 先黑白模式输出</span>
epd<span class="token punctuation">.</span><span class="token function">Display_red</span><span class="token punctuation">(</span>paint<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 再红色模式输出</span>
epd<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必须 show 一次</span>
<span class="token comment">/_
最后的效果是底色是白色, 实心圆变成了红色
关于更多红色的还得深入探究才知道...
\*/</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
</ol>
<h2>
<a id="_286">
</a>
更多玩法
</h2>
<p>
使用图片输出到屏幕上
</p>
<ol>
<li>
<p>
设计图片(像素尺寸 212, 104), 设置想要横向还是纵向显示
</p>
</li>
<li>
<p>
使用 tools 里面的 Python 代码将图像转模 ()
</p>
<pre><code class="prism language-python"><span class="token comment"># path: 图片相对路径</span>
<span class="token comment"># rotage: 当前图片是设计在哪个角度显示的 (角度可参考上面 更多详细介绍 -&gt; 1. 屏幕的输出方向)</span>
<span class="token keyword">if</span> **name** <span class="token operator">==</span> <span class="token string">"**main**"</span><span class="token punctuation">:</span>
convert<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">'demo.png'</span><span class="token punctuation">,</span> rotage<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li>
<p>
将生成代码复制到 imagedata.cpp
</p>
<pre><code>#include "imagedata.h"
#include &lt;avr/pgmspace.h&gt;

unsigned char IMAGE_DATA[] PROGMEM = {
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
......
0xff, 0xff, 0xff, 0xff, };
</code></pre>
</li>
<li>
<p>
在 Arduino IDE 上传代码 输出图像
</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 此区域代码硬件只执行一次</span>
<span class="token punctuation">{<!-- --></span>
Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>FULL<span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span>IMAGE_DATA<span class="token punctuation">)</span><span class="token punctuation">;</span>
epd<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
<li>
<p>
输出效果
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/385e3163e2dd6949d3fd2989c144598a.png"/>
</p>
</li>
</ol>

   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34313836313730302f:61727469636c652f64657461696c732f313139383534323536" class_="artid" style="display:none">
 </p>
</div>
