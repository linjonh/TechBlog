---
layout: post
title: "C中的单例模式及具体应用示例"
date: 2025-03-14 14:23:23 +0800
description: "本文深入探讨了C++中的单例模式及其在机器人自主导航中的应用，特别是如何通过单例模式来管理地图数据。文章详细介绍了单例模式的基本结构、优缺点以及在多线程环境中的应用，强调了其在保证数据一致性和资源管理中的重要性。接着，文章通过一个实际的路径规划系统示例，展示了如何结合单例模式设计地图管理模块。该系统使用了广度优先搜索（BFS）算法来进行路径规划，并通过多线程实现地图更新和路径规划的并行处理。主要的代码模块包括地图管理类MapManager、路径规划类BFSPlanner、以及管理多线程操作。"
keywords: "C++中的单例模式及具体应用示例"
categories: ['运动规划和控制', 'C']
tags: ['规划', '机器人', '多线程', '单例模式', 'C', 'Bfs']
artid: "143088911"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143088911
    alt: "C中的单例模式及具体应用示例"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143088911
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143088911
cover: https://bing.ee123.net/img/rand?artid=143088911
image: https://bing.ee123.net/img/rand?artid=143088911
img: https://bing.ee123.net/img/rand?artid=143088911
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C++中的单例模式及具体应用示例
    </h1>
   </div>
   <div class="article-resource-info-box">
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <hr/>
    <h3>
     <a id="AI__4">
     </a>
     AI 摘要
    </h3>
    <blockquote>
     <p>
      本文深入探讨了C++中的单例模式及其在机器人自主导航中的应用，特别是如何通过单例模式来管理地图数据。文章详细介绍了单例模式的基本结构、优缺点以及在多线程环境中的应用，强调了其在保证数据一致性和资源管理中的重要性。
     </p>
     <p>
      接着，文章通过一个实际的路径规划系统示例，展示了如何结合单例模式设计地图管理模块。该系统使用了广度优先搜索（BFS）算法来进行路径规划，并通过多线程实现地图更新和路径规划的并行处理。主要的代码模块包括地图管理类
      <br/>
      <code>
       MapManager
      </code>
      、路径规划类
      <code>
       BFSPlanner
      </code>
      、以及
      <code>
       ProjectNode
      </code>
      管理多线程操作。通过 CMake
      <br/>
      构建系统，用户可以方便地配置和编译该项目。
     </p>
     <p>
      文章还提供了具体的实现代码，涵盖了地图更新、路径规划、C++单例模式的使用，以及多线程编程的技巧。通过这种方式，读者不仅能掌握 C++
      <br/>
      单例模式的实现，还能学到如何将其应用于实际的机器人导航与路径规划系统中。
     </p>
     <p>
      最后，文章提供了如何在 Ubuntu 系统中构建和运行该示例项目的详细步骤，包括项目的编译、执行以及展示了系统的运行效果。
     </p>
    </blockquote>
    <hr/>
    <ul>
     <li>
     </li>
    </ul>
    <h4>
     <a id="emspemsp__C_23">
     </a>
     C++中的单例模式是一种设计模式，确保一个类只有一个实例，并提供一个全局访问点。单例模式在很多情况下非常有用，例如在管理全局配置、日志系统、数据库连接等场景中。
    </h4>
    <ul>
     <li>
     </li>
    </ul>
    <hr/>
    <ul>
     <li>
     </li>
    </ul>
    <h3>
     <a id="C_28">
     </a>
     一、C++单例模式的简单介绍
    </h3>
    <p>
     –
    </p>
    <h4>
     <a id="1_32">
     </a>
     1、单例模式的结构
    </h4>
    <p>
     单例模式通常包含以下几个核心部分：
    </p>
    <ol>
     <li>
      <strong>
       私有构造函数
      </strong>
      ：构造函数私有化，防止外部创建实例。
     </li>
     <li>
      <strong>
       静态私有实例
      </strong>
      ：提供一个静态成员函数来创建或返回类的唯一实例。
     </li>
     <li>
      <strong>
       公共静态方法
      </strong>
      ：提供全局访问点，通常命名为
      <code>
       getInstance()
      </code>
      ，用于获取单例对象。
     </li>
     <li>
      <strong>
       删除复制构造函数和赋值运算符
      </strong>
      ：防止复制或赋值，以确保只有一个实例存在。
     </li>
    </ol>
    <h4>
     <a id="2_41">
     </a>
     2、优点
    </h4>
    <ol>
     <li>
      <strong>
       控制实例数量
      </strong>
      ：确保类只有一个实例，节省资源。
     </li>
     <li>
      <strong>
       全局访问
      </strong>
      ：提供一个全局访问点，方便管理状态或数据。
     </li>
     <li>
      <strong>
       延迟初始化
      </strong>
      ：可以在第一次使用时才创建实例（懒加载）。
     </li>
    </ol>
    <h4>
     <a id="3__47">
     </a>
     3、 缺点
    </h4>
    <ol>
     <li>
      <strong>
       隐藏依赖关系
      </strong>
      ：由于全局访问点，可能导致代码难以测试和维护，因为依赖关系不明显。
     </li>
     <li>
      <strong>
       多线程问题
      </strong>
      ：在多线程环境下需要特别小心，确保线程安全。
     </li>
     <li>
      <strong>
       难以扩展
      </strong>
      ：由于构造函数私有化，无法直接从其他类派生出子类。
     </li>
    </ol>
    <h4>
     <a id="4_55">
     </a>
     4、总结
    </h4>
    <h5>
     <a id="emspemsp___C_57">
     </a>
     C++中的单例模式是一种非常实用的设计模式，特别是在需要共享全局状态或资源时。通过确保只有一个实例存在，单例模式提供了一种有效的管理方法。在多线程环境中使用单例模式时，务必考虑线程安全性。
    </h5>
    <ul>
     <li>
     </li>
    </ul>
    <h4>
     <a id="5_61">
     </a>
     5、标志性的代码结构
    </h4>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">// 1. 私有化构造函数，禁止外部创建</span>
    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token comment">// 2. 禁止拷贝构造和赋值</span>
    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token keyword">const</span> Singleton<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>
    Singleton<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Singleton<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">// 3. 静态方法，提供全局唯一的访问点</span>
    <span class="token keyword">static</span> Singleton<span class="token operator">&amp;</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span>  <span class="token comment">// 4. 静态实例，延迟初始化，线程安全</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <ul>
     <li>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dc4456a92e2d4fde8194080ba86e0038.webp#pic_center"/>
    </p>
    <ul>
     <li>
     </li>
    </ul>
    <h3>
     <a id="C_90">
     </a>
     二、C++实现单例模式的具体应用示例
    </h3>
    <p>
     –
    </p>
    <h4>
     <a id="1_95">
     </a>
     1、应用示例——总体介绍
    </h4>
    <h5>
     <a id="emspemsp_Occupancy_Grid_98">
     </a>
     在机器人的自主导航中，机器人经常需要访问二维栅格地图（Occupancy Grid），包括随时间更新的障碍物信息、路径规划和定位模块对地图的查询。如果不同模块频繁读取地图信息而不加管理，可能会导致数据不一致或资源竞争问题。通过单例模式实现一个全局的地图管理类，可以确保数据一致性并简化代码、节省资源。
    </h5>
    <h5>
     <a id="emspemsp__100">
     </a>
     在我设计的应用示例中包含单例模式的地图管理、地图更新线程、规划线程三部分内容，再加上主节点，完整的文件路径结构如下：
    </h5>
    <pre><code class="prism language-cpp">C<span class="token operator">++</span>单例模式应用示例——BFS规划和地图更新<span class="token operator">/</span>
│
├── include<span class="token operator">/</span>
│   ├── bfs_planner<span class="token punctuation">.</span>h
│   ├── map_manager<span class="token punctuation">.</span>h
│   └── node<span class="token punctuation">.</span>h
│
├── src<span class="token operator">/</span>
│   ├── map<span class="token operator">/</span>
│   │   └── map_manager<span class="token punctuation">.</span>cpp
│   ├── node<span class="token operator">/</span>
│   │   ├── node_map<span class="token punctuation">.</span>cpp
│   │   ├── node_planner<span class="token punctuation">.</span>cpp
│   │   └── node<span class="token punctuation">.</span>cpp
│   └── planner<span class="token operator">/</span>
│       └── bfs_planner<span class="token punctuation">.</span>cpp
│
├── CMakeLists<span class="token punctuation">.</span>txt
</code></pre>
    <h5>
     <a id="_123">
     </a>
     以下是对每个文件的概括总结：
    </h5>
    <h5>
     <a id="include__125">
     </a>
     <strong>
      <code>
       include
      </code>
      文件夹
     </strong>
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         bfs_planner.h
        </code>
       </strong>
      </p>
      <ul>
       <li>
        该文件声明了
        <code>
         BFSPlanner
        </code>
        类，负责实现基于广度优先搜索（BFS）算法的路径规划。主要功能包括计算路径、打印路径、以及显示带路径和障碍物的地图。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         map_manager.h
        </code>
       </strong>
      </p>
      <ul>
       <li>
        该文件声明了
        <code>
         MapManager
        </code>
        类，用于管理地图数据。它提供获取当前地图、更新地图、打印地图及获取地图尺寸的功能，并通过互斥锁保证线程安全。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         node.h
        </code>
       </strong>
      </p>
      <ul>
       <li>
        该文件声明了
        <code>
         ProjectNode
        </code>
        类，负责管理项目的核心功能。它启动了两个线程：一个线程负责地图的更新，另一个线程负责路径规划。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <a id="src__135">
     </a>
     <strong>
      <code>
       src
      </code>
      文件夹
     </strong>
    </h5>
    <h6>
     <a id="map__136">
     </a>
     <strong>
      <code>
       map
      </code>
      文件夹
     </strong>
    </h6>
    <ol>
     <li>
      <strong>
       <code>
        map_manager.cpp
       </code>
      </strong>
      <ul>
       <li>
        该文件实现了
        <code>
         MapManager
        </code>
        类的方法。包括地图数据的随机更新（生成障碍物）、打印地图以及获取地图尺寸。通过线程安全的方式管理地图的更新和访问。
       </li>
      </ul>
     </li>
    </ol>
    <h6>
     <a id="node__140">
     </a>
     <strong>
      <code>
       node
      </code>
      文件夹
     </strong>
    </h6>
    <ol start="2">
     <li>
      <p>
       <strong>
        <code>
         node_map.cpp
        </code>
       </strong>
      </p>
      <ul>
       <li>
        该文件实现了与地图更新相关的线程。它模拟地图的随机更新，并定期打印更新后的地图。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         node_planner.cpp
        </code>
       </strong>
      </p>
      <ul>
       <li>
        该文件实现了路径规划的线程。它从
        <code>
         MapManager
        </code>
        获取地图数据，使用
        <code>
         BFSPlanner
        </code>
        进行路径计算，并打印计算结果。它循环执行路径规划，每两秒进行一次更新。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         node.cpp
        </code>
       </strong>
      </p>
      <ul>
       <li>
        该文件实现了
        <code>
         ProjectNode
        </code>
        类的构造和析构方法。它初始化了
        <code>
         BFSPlanner
        </code>
        实例并启动了地图更新线程和路径规划线程。
       </li>
      </ul>
     </li>
    </ol>
    <h6>
     <a id="planner__150">
     </a>
     <strong>
      <code>
       planner
      </code>
      文件夹
     </strong>
    </h6>
    <ol start="5">
     <li>
      <strong>
       <code>
        bfs_planner.cpp
       </code>
      </strong>
      <ul>
       <li>
        该文件实现了
        <code>
         BFSPlanner
        </code>
        类的路径规划功能。通过广度优先搜索算法计算从起点到终点的路径，并提供路径打印和带路径显示的地图输出。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <a id="_154">
     </a>
     <strong>
      其他
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         CMakeLists.txt
        </code>
       </strong>
      </p>
      <ul>
       <li>
        该文件是 CMake 构建系统的配置文件，定义了项目的构建规则。它指定了项目名称、C++标准版本、使用的线程库等，并列出了所有源文件以生成可执行文件。
       </li>
      </ul>
     </li>
     <li>
     </li>
    </ul>
    <h5>
     <a id="emspemsp__BFS_MapManager_BFSPlanner__ProjectNode__161">
     </a>
     总的来说，这个应用示例项目实现了一个基于 BFS 算法的路径规划系统。它通过多个模块协同工作，
     <code>
      MapManager
     </code>
     模拟并更新地图，
     <code>
      BFSPlanner
     </code>
     负责路径规划，而
     <code>
      ProjectNode
     </code>
     类管理整个流程，包括启动地图更新和路径规划的线程。整个系统通过多线程来模拟地图更新并实时计算路径，展示路径规划的过程。
    </h5>
    <hr/>
    <h4>
     <a id="2_168">
     </a>
     2、应用示例——主节点
    </h4>
    <h5>
     <a id="emspemsp_nodeh__nodecpp__ProjectNode_ProjectNode__171">
     </a>
     <code>
      node.h
     </code>
     和
     <code>
      node.cpp
     </code>
     这两个文件定义并实现了
     <code>
      ProjectNode
     </code>
     类的功能。
     <code>
      ProjectNode
     </code>
     类的作用是管理路径规划和地图更新的多线程操作。
    </h5>
    <h5>
     <a id="emspemsp_nodeh__174">
     </a>
     node.h :
    </h5>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">NODE_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NODE_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"map_manager.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"bfs_planner.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;chrono&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory&gt;</span>  <span class="token comment">// 引入 std::shared_ptr</span></span>

<span class="token keyword">namespace</span> Project <span class="token punctuation">{<!-- --></span>

<span class="token keyword">class</span> <span class="token class-name">ProjectNode</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    
    <span class="token function">ProjectNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token operator">~</span><span class="token function">ProjectNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Threads</span>
    <span class="token keyword">void</span> <span class="token function">mapThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">plannerThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>thread map_thread_<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>thread planner_thread_<span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    
    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>BFSPlanner<span class="token operator">&gt;</span> bfsplanner_<span class="token punctuation">;</span>  <span class="token comment">// BFSPlanner 的共享指针</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>  <span class="token comment">// namespace Project</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>  <span class="token comment">// NODE_H</span></span>

</code></pre>
    <h5>
     <a id="emspemsp_nodecpp__216">
     </a>
     node.cpp :
    </h5>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../../include/node.h"</span></span>

<span class="token keyword">namespace</span> Project <span class="token punctuation">{<!-- --></span>

<span class="token class-name">ProjectNode</span><span class="token double-colon punctuation">::</span><span class="token function">ProjectNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    bfsplanner_<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">BFSPlanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 使用 reset() 创建 BFSPlanner 实例</span>
    map_thread_ <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">thread</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ProjectNode<span class="token double-colon punctuation">::</span>mapThread<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    planner_thread_ <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">thread</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ProjectNode<span class="token double-colon punctuation">::</span>plannerThread<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">ProjectNode</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">ProjectNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    map_thread_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    planner_thread_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>  <span class="token comment">// namespace Project</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>

    Project<span class="token double-colon punctuation">::</span>ProjectNode Node<span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Starting Map Manager Simulation..."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="nodeh_255">
     </a>
     <strong>
      <code>
       node.h
      </code>
     </strong>
    </h5>
    <p>
     <code>
      node.h
     </code>
     文件定义了
     <code>
      ProjectNode
     </code>
     类的接口，主要功能是启动和管理两个线程：一个用于更新地图，另一个用于执行路径规划。
    </p>
    <h6>
     <a id="_259">
     </a>
     <strong>
      主要功能：
     </strong>
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         ProjectNode
        </code>
        构造函数
       </strong>
       ：
      </p>
      <ul>
       <li>
        构造函数初始化了
        <code>
         bfsplanner_
        </code>
        作为
        <code>
         BFSPlanner
        </code>
        类的共享指针。
        <code>
         BFSPlanner
        </code>
        是用于路径规划的核心类。
       </li>
       <li>
        同时，构造函数启动了两个线程：
        <code>
         map_thread_
        </code>
        用于地图更新，
        <code>
         planner_thread_
        </code>
        用于路径规划。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         ProjectNode
        </code>
        析构函数
       </strong>
       ：
      </p>
      <ul>
       <li>
        析构函数确保两个线程在对象销毁前都能正确地完成任务。通过调用
        <code>
         join()
        </code>
        方法等待线程结束，保证线程安全退出。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         mapThread
        </code>
        和
        <code>
         plannerThread
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        这两个函数定义了每个线程的行为，但在
        <code>
         node.cpp
        </code>
        中具体实现。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        成员变量
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         <code>
          bfsplanner_
         </code>
        </strong>
        ：一个
        <code>
         std::shared_ptr&lt;BFSPlanner&gt;
        </code>
        ，用于存储
        <code>
         BFSPlanner
        </code>
        类的实例，这个实例负责路径规划。
       </li>
       <li>
        <strong>
         <code>
          map_thread_
         </code>
         和
         <code>
          planner_thread_
         </code>
        </strong>
        ：两个
        <code>
         std::thread
        </code>
        类型的成员变量，分别表示用于地图更新和路径规划的线程。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <a id="nodecpp_275">
     </a>
     <strong>
      <code>
       node.cpp
      </code>
     </strong>
    </h5>
    <p>
     <code>
      node.cpp
     </code>
     文件实现了
     <code>
      ProjectNode
     </code>
     类的构造函数和析构函数，并创建了两个线程来分别执行地图更新和路径规划任务。
    </p>
    <h6>
     <a id="_279">
     </a>
     <strong>
      主要实现：
     </strong>
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         ProjectNode
        </code>
        构造函数
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         bfsplanner_.reset(new BFSPlanner())
        </code>
        ：这行代码创建了一个新的
        <code>
         BFSPlanner
        </code>
        实例，并将其指针赋给
        <code>
         bfsplanner_
        </code>
        。
        <code>
         reset()
        </code>
        方法用来保证指针指向一个新的实例。
       </li>
       <li>
        <code>
         map_thread_ = std::thread(&amp;ProjectNode::mapThread, this)
        </code>
        ：创建并启动地图更新线程，线程将调用
        <code>
         ProjectNode
        </code>
        类的
        <code>
         mapThread()
        </code>
        方法。
       </li>
       <li>
        <code>
         planner_thread_ = std::thread(&amp;ProjectNode::plannerThread, this)
        </code>
        ：创建并启动路径规划线程，线程将调用
        <code>
         ProjectNode
        </code>
        类的
        <code>
         plannerThread()
        </code>
        方法。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         ProjectNode
        </code>
        析构函数
       </strong>
       ：
      </p>
      <ul>
       <li>
        在析构函数中，调用
        <code>
         map_thread_.join()
        </code>
        和
        <code>
         planner_thread_.join()
        </code>
        等待两个线程完成任务后再退出。这保证了在
        <code>
         ProjectNode
        </code>
        对象销毁之前，所有线程的执行会正确结束。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         main
        </code>
        函数
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         main()
        </code>
        函数创建了一个
        <code>
         ProjectNode
        </code>
        对象并启动整个模拟过程。输出 “Starting Map Manager Simulation…” 用于标识模拟开始。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <a id="mapThread__plannerThread_292">
     </a>
     <strong>
      <code>
       mapThread
      </code>
      和
      <code>
       plannerThread
      </code>
     </strong>
    </h5>
    <p>
     虽然这两个线程函数在
     <code>
      node.h
     </code>
     中声明了，分别在
     <code>
      node_map.cpp
     </code>
     和
     <code>
      node_planner.cpp
     </code>
     中进行具体实现。
    </p>
    <ul>
     <li>
      <code>
       mapThread
      </code>
      负责定期调用
      <code>
       MapManager
      </code>
      来更新地图并打印更新后的地图。
     </li>
     <li>
      <code>
       plannerThread
      </code>
      负责定期获取地图信息，并使用
      <code>
       BFSPlanner
      </code>
      来计算路径。
     </li>
    </ul>
    <p>
     这两个线程循环执行，模拟一个实时更新的环境，其中一个线程在更新地图，而另一个线程在计算路径，确保整个过程并行进行。
    </p>
    <h5>
     <a id="emspemsp__nodeh_ProjectNode__nodecpp_ProjectNode__300">
     </a>
     总的来说，
     <strong>
      <code>
       node.h
      </code>
     </strong>
     ：定义了
     <code>
      ProjectNode
     </code>
     类，它启动并管理两个线程（地图更新线程和路径规划线程），并包含了与路径规划和地图管理相关的必要成员。
     <strong>
      <code>
       node.cpp
      </code>
     </strong>
     ：实现了
     <code>
      ProjectNode
     </code>
     的构造和析构函数，启动了两个线程，并确保它们在对象销毁时正确地退出。这两个文件的主要功能是通过多线程实现地图更新和路径规划的并行处理，从而模拟一个动态环境中的路径规划过程。
    </h5>
    <hr/>
    <h4>
     <a id="3_303">
     </a>
     3、单例模式的地图管理模块
    </h4>
    <h5>
     <a id="emspemsp_MapManagergetMapgetMapSizeupdateMapRandomprintMap_309">
     </a>
     结合第一部分的介绍，容易写出类似于如下结构的单例模式的地图管理类MapManager，除了单例模式的必要框架，还增加了获取当前地图数据的接口函数getMap()、获取地图大小的接口函数getMapSize()，方便规划模块调用，增加了随机更新地图的接口函数updateMapRandom()、打印地图的接口函数printMap（），方便地图更新模块对地图进行维护更新（真实应用时应该根据实时的传感器信息对地图进行更新维护，这里为了简化采用了随机更新）
    </h5>
    <h5>
     <a id="emspemsp_map_managerh__311">
     </a>
     map_manager.h :
    </h5>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">MAP_MANAGER_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAP_MANAGER_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mutex&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">namespace</span> Project <span class="token punctuation">{<!-- --></span>

<span class="token keyword">class</span> <span class="token class-name">MapManager</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">// 获取单例实例</span>
    <span class="token keyword">static</span> MapManager<span class="token operator">&amp;</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取当前地图数据</span>
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 模拟地图的更新</span>
    <span class="token keyword">void</span> <span class="token function">updateMapRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 打印地图</span>
    <span class="token keyword">void</span> <span class="token function">printMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取地图尺寸</span>
    std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">getMapSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">// 私有构造函数，禁止外部实例化</span>
    <span class="token function">MapManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 禁用拷贝构造和赋值运算符</span>
    <span class="token function">MapManager</span><span class="token punctuation">(</span><span class="token keyword">const</span> MapManager<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>
    MapManager<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> MapManager<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>
    <span class="token comment">// 地图数据</span>
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> current_map_<span class="token punctuation">;</span>
    <span class="token comment">// 线程安全的互斥锁</span>
    std<span class="token double-colon punctuation">::</span>mutex map_mutex_<span class="token punctuation">;</span>
    <span class="token comment">// 地图尺寸</span>
    <span class="token keyword">int</span> MAP_WIDTH_<span class="token punctuation">;</span>
    <span class="token keyword">int</span> MAP_HEIGHT_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>  <span class="token comment">// namespace Project</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>  <span class="token comment">// MAP_MANAGER_H</span></span>
</code></pre>
    <h5>
     <a id="emspemsp_map_managercpp_360">
     </a>
     函数定义在map_manager.cpp中，如下所示：
    </h5>
    <pre><code class="prism language-cpp">
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../../include/map_manager.h"</span></span>

<span class="token keyword">namespace</span> Project <span class="token punctuation">{<!-- --></span>

<span class="token comment">// 静态方法：获取 MapManager 的唯一实例</span>
MapManager<span class="token operator">&amp;</span> <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> MapManager instance<span class="token punctuation">;</span>  <span class="token comment">// C++11 保证静态局部变量线程安全</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 私有构造函数：初始化地图数据和尺寸</span>
<span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">MapManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token operator">:</span> <span class="token function">MAP_WIDTH_</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MAP_HEIGHT_</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 初始化地图尺寸</span>
    current_map_<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>MAP_WIDTH_ <span class="token operator">*</span> MAP_HEIGHT_<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 初始化为 10x10 的全 0 栅格地图</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取当前地图数据（加锁以确保线程安全）</span>
std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">lock</span><span class="token punctuation">(</span>map_mutex_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> current_map_<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取地图尺寸</span>
std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">getMapSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>MAP_HEIGHT_<span class="token punctuation">,</span> MAP_WIDTH_<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// 模拟地图更新（随机生成障碍物）</span>
<span class="token keyword">void</span> <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">updateMapRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">lock</span><span class="token punctuation">(</span>map_mutex_<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 确保线程安全</span>
    std<span class="token double-colon punctuation">::</span>random_device rd<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>mt19937 <span class="token function">gen</span><span class="token punctuation">(</span><span class="token function">rd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>uniform_int_distribution<span class="token operator">&lt;</span><span class="token operator">&gt;</span> <span class="token function">dis</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 生成范围为 [1, 10]</span>

    <span class="token comment">// 随机更新地图中的障碍物信息</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> cell <span class="token operator">:</span> current_map_<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1-7 为无障碍物点（70%），8-10 为障碍物点（30%）</span>
        cell <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">dis</span><span class="token punctuation">(</span>gen<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Map updated!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// 打印地图数据（使用 ANSI 转义序列实现彩色输出）</span>
<span class="token keyword">void</span> <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">printMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">lock</span><span class="token punctuation">(</span>map_mutex_<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 确保线程安全</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Current Map:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAP_HEIGHT_<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> MAP_WIDTH_<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> value <span class="token operator">=</span> current_map_<span class="token punctuation">[</span>i <span class="token operator">*</span> MAP_WIDTH_ <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 红色表示障碍物</span>
                std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\033[31mX \033[0m"</span><span class="token punctuation">;</span>  <span class="token comment">// 红色障碍物</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 绿色表示可通行区域</span>
                std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\033[32m. \033[0m"</span><span class="token punctuation">;</span>  <span class="token comment">// 绿色可通行区域</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token punctuation">}</span>  <span class="token comment">// namespace Project</span>

</code></pre>
    <p>
     –
    </p>
    <p>
     <code>
      map_manager.h
     </code>
     和
     <code>
      map_manager.cpp
     </code>
     是该项目中用于管理地图的文件。下面将详细介绍这两个文件中的程序。
    </p>
    <h5>
     <a id="map_managerh_446">
     </a>
     <strong>
      <code>
       map_manager.h
      </code>
     </strong>
    </h5>
    <p>
     <code>
      map_manager.h
     </code>
     是
     <code>
      MapManager
     </code>
     类的头文件，声明了该类的接口。
    </p>
    <h6>
     <a id="_449">
     </a>
     <strong>
      主要功能：
     </strong>
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         getInstance
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        这是一个静态方法，用于获取
        <code>
         MapManager
        </code>
        类的唯一实例。它通过静态局部变量实现单例模式，确保在整个程序运行过程中只有一个
        <code>
         MapManager
        </code>
        实例。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         getMap
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        返回当前的地图数据，类型为
        <code>
         std::vector&lt;int&gt;
        </code>
        ，它表示一个一维数组来存储地图的信息。这个方法使用了互斥锁 (
        <code>
         std::mutex
        </code>
        ) 来确保在多线程环境中线程安全。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         updateMapRandom
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        模拟地图的更新，随机生成障碍物。更新过程通过使用
        <code>
         std::random_device
        </code>
        和
        <code>
         std::uniform_int_distribution
        </code>
        随机决定地图上的每个位置是障碍物还是通路。该方法也使用互斥锁确保线程安全。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         printMap
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        打印地图数据。该方法根据
        <code>
         current_map_
        </code>
        的值打印地图，使用 ANSI 转义序列来着色输出。障碍物用红色 (
        <code>
         X
        </code>
        ) 表示，通行区域用绿色 (
        <code>
         .
        </code>
        ) 表示。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         getMapSize
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        获取地图的尺寸（高度和宽度）。该方法返回一个
        <code>
         std::pair&lt;int, int&gt;
        </code>
        ，分别表示地图的高度和宽度。
       </li>
      </ul>
     </li>
    </ol>
    <h6>
     <a id="_465">
     </a>
     <strong>
      私有成员：
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       <strong>
        <code>
         current_map_
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        一个
        <code>
         std::vector&lt;int&gt;
        </code>
        ，存储当前地图的数据，大小为
        <code>
         MAP_WIDTH_ * MAP_HEIGHT_
        </code>
        。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         map_mutex_
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        一个
        <code>
         std::mutex
        </code>
        ，用于确保对地图数据的访问是线程安全的。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         MAP_WIDTH_
        </code>
        和
        <code>
         MAP_HEIGHT_
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        地图的宽度和高度，默认初始化为 10。
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="map_managercpp_475">
     </a>
     <strong>
      <code>
       map_manager.cpp
      </code>
     </strong>
    </h5>
    <p>
     <code>
      map_manager.cpp
     </code>
     是
     <code>
      MapManager
     </code>
     类的实现文件，定义了该类的方法。
    </p>
    <h6>
     <a id="_478">
     </a>
     <strong>
      主要实现：
     </strong>
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         getInstance
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        使用静态局部变量
        <code>
         instance
        </code>
        实现单例模式，这样即使在多线程环境下，
        <code>
         MapManager
        </code>
        类的实例也能确保唯一性和线程安全。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         MapManager
        </code>
        构造函数
       </strong>
       ：
      </p>
      <ul>
       <li>
        构造函数初始化地图尺寸为 10x10，并将
        <code>
         current_map_
        </code>
        初始化为全 0，表示一个没有障碍物的地图。
        <code>
         current_map_
        </code>
        被扩展为
        <code>
         std::vector&lt;int&gt;
        </code>
        ，其大小为
        <code>
         MAP_WIDTH_ * MAP_HEIGHT_
        </code>
        。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         getMap
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        使用
        <code>
         std::lock_guard&lt;std::mutex&gt;
        </code>
        进行线程安全操作，确保对地图数据的访问不会受到其他线程干扰。返回当前地图的数据。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         updateMapRandom
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        随机生成一个地图，模拟障碍物的更新。每个地图单元的值要么是 0（表示通行），要么是 1（表示障碍物）。通过使用
        <code>
         std::random_device
        </code>
        和
        <code>
         std::mt19937
        </code>
        随机生成值，70% 的概率是通行区域（0），30% 的概率是障碍物（1）。每次更新后，打印 “Map updated!”。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         printMap
        </code>
       </strong>
       ：
      </p>
      <ul>
       <li>
        打印地图到控制台。使用 ANSI 转义序列打印不同颜色的字符：
        <ul>
         <li>
          <code>
           X
          </code>
          表示障碍物，红色显示。
         </li>
         <li>
          <code>
           .
          </code>
          表示通行区域，绿色显示。
         </li>
        </ul>
       </li>
       <li>
        打印时每一行表示地图的一行，使用
        <code>
         MAP_WIDTH_
        </code>
        和
        <code>
         MAP_HEIGHT_
        </code>
        计算并显示二维地图。
       </li>
      </ul>
     </li>
    </ol>
    <h6>
     <a id="_497">
     </a>
     <strong>
      线程安全
     </strong>
    </h6>
    <p>
     所有访问和修改地图的操作都使用
     <code>
      std::mutex
     </code>
     加锁，这确保了在多线程环境下，访问地图数据时不会发生竞争条件。
    </p>
    <h5>
     <a id="emspemsp_MapManager__getInstance_updateMapRandom__501">
     </a>
     总的来说
     <code>
      MapManager
     </code>
     类的作用是负责管理和操作地图数据。它提供了获取地图、更新地图和打印地图的方法，并且能够确保这些操作在多线程环境下是安全的。通过
     <code>
      getInstance
     </code>
     实现单例模式，确保地图管理器在整个程序中只有一个实例，避免了重复创建和内存浪费。
     <code>
      updateMapRandom
     </code>
     方法模拟了一个动态更新的地图，每次调用都会随机生成新的障碍物。
    </h5>
    <hr/>
    <ul>
     <li>
     </li>
    </ul>
    <h4>
     <a id="4_508">
     </a>
     4、地图更新线程
    </h4>
    <ul>
     <li>
     </li>
    </ul>
    <h5>
     <a id="emspemsp_node_mapcpp__ProjectNode__mapThread__512">
     </a>
     目前的地图更新线程较简单，直接调用地图管理模块提供的随机更新接口即可,
     <code>
      node_map.cpp
     </code>
     文件定义了
     <code>
      ProjectNode
     </code>
     类的
     <code>
      mapThread
     </code>
     方法，主要用于模拟读取地图数据和更新地图的过程。下
    </h5>
    <h5>
     <a id="emspemsp_node_mapcpp_514">
     </a>
     node_map.cpp：
    </h5>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../../include/node.h"</span></span>

<span class="token keyword">namespace</span> Project <span class="token punctuation">{<!-- --></span>

<span class="token comment">// 模拟模块 A：读取地图数据</span>
<span class="token keyword">void</span> <span class="token class-name">ProjectNode</span><span class="token double-colon punctuation">::</span><span class="token function">mapThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateMapRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">printMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>this_thread<span class="token double-colon punctuation">::</span><span class="token function">sleep_for</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>chrono<span class="token double-colon punctuation">::</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>  <span class="token comment">// namespace Project</span>
</code></pre>
    <h5>
     <a id="mapThread__535">
     </a>
     <strong>
      <code>
       mapThread
      </code>
      方法
     </strong>
    </h5>
    <p>
     <code>
      mapThread
     </code>
     是
     <code>
      ProjectNode
     </code>
     类中的一个线程执行函数，功能是周期性地更新地图并打印更新后的地图。
    </p>
    <h6>
     <a id="_539">
     </a>
     <strong>
      功能与实现：
     </strong>
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        循环执行：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         while (true)
        </code>
        使得该线程不断地执行，形成一个无限循环，直到线程被外部停止。这个线程每隔一段时间（5秒）执行一次地图更新。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        地图更新：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         MapManager::getInstance().updateMapRandom()
        </code>
        ：调用
        <code>
         MapManager
        </code>
        类的
        <code>
         updateMapRandom
        </code>
        方法来随机更新地图中的障碍物。此方法模拟了动态的环境，其中地图上的障碍物会在每个周期内随机变化。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        地图打印：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         MapManager::getInstance().printMap()
        </code>
        ：在更新地图后，调用
        <code>
         printMap
        </code>
        方法打印当前地图的状态。地图会被打印在控制台上，其中障碍物使用红色（
        <code>
         X
        </code>
        ）表示，通行区域使用绿色（
        <code>
         .
        </code>
        ）表示。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        线程休眠：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         std::this_thread::sleep_for(std::chrono::seconds(5))
        </code>
        ：在每次更新地图和打印地图之后，线程会休眠 5 秒，模拟一个定时更新地图的过程。这使得地图的更新不至于过于频繁，模拟环境变化的周期性。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <a id="emspemsp__mapThread__5_mapThread__553">
     </a>
     总的来说
     <code>
      mapThread
     </code>
     方法通过一个无限循环不断更新地图，打印地图，并在每次更新之间休眠 5 秒。这模拟了一个动态变化的地图环境，可以用于测试和验证路径规划算法。在多线程程序中，
     <code>
      mapThread
     </code>
     会在一个独立的线程中运行，确保地图更新过程不会阻塞主线程或其他任务的执行。
    </h5>
    <hr/>
    <ul>
     <li>
     </li>
    </ul>
    <h4>
     <a id="5_561">
     </a>
     5、规划线程
    </h4>
    <ul>
     <li>
     </li>
    </ul>
    <h5>
     <a id="emspemsp__plannerThread__BFSPlanner__planPath__2_bfs_plannercppBFSPlanner_BFSPlanner__BFS_isValid__565">
     </a>
     规划线程plannerThread 方法通过调用 BFSPlanner 的 planPath 方法实现路径规划，定期计算从起点到终点的路径。每次路径规划之后，打印路径规划结果，并每 2 秒休眠一次。目前仅在bfs_planner.cpp中提供了BFSPlanner 一种简单的规划器，感兴趣的小伙伴可自行添加其他规划器。BFSPlanner 类 使用广度优先搜索（BFS）算法来计算路径，并能打印出路径及包含路径和障碍物的地图。通过 isValid 确保搜索过程中只访问有效且可通行的区域。
    </h5>
    <h5>
     <a id="emspemsp__node_plannercpp_569">
     </a>
     node_planner.cpp
    </h5>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../../include/node.h"</span></span>

<span class="token keyword">namespace</span> Project <span class="token punctuation">{<!-- --></span>

<span class="token keyword">void</span> <span class="token class-name">ProjectNode</span><span class="token double-colon punctuation">::</span><span class="token function">plannerThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">// 获取当前地图</span>
        <span class="token keyword">auto</span> flat_map <span class="token operator">=</span> <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> mapsize<span class="token operator">=</span> <span class="token class-name">MapManager</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMapSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">grid</span><span class="token punctuation">(</span>mapsize<span class="token punctuation">.</span>first<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>mapsize<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将一维地图转换为二维地图</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mapsize<span class="token punctuation">.</span>first<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> mapsize<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> flat_map<span class="token punctuation">[</span>i <span class="token operator">*</span> mapsize<span class="token punctuation">.</span>second <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"[Path Planning Module] Calculating path..."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

        <span class="token comment">// 调用 planPath() 函数规划路径</span>
        <span class="token keyword">auto</span> path <span class="token operator">=</span> bfsplanner_ <span class="token operator">-&gt;</span> <span class="token function">planPath</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>mapsize<span class="token punctuation">.</span>second<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>  mapsize<span class="token punctuation">.</span>first<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 规划成功，打印成功日志</span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"[Path Planning Module] Path successfully found!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

            <span class="token comment">// 打印带路径的地图</span>
            bfsplanner_ <span class="token operator">-&gt;</span> <span class="token function">printMapWithPath</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> mapsize<span class="token punctuation">.</span>second <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>  mapsize<span class="token punctuation">.</span>first <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 规划失败，打印失败日志</span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"[Path Planning Module] Path planning failed. No path found!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 线程休眠 2 秒</span>
        std<span class="token double-colon punctuation">::</span>this_thread<span class="token double-colon punctuation">::</span><span class="token function">sleep_for</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>chrono<span class="token double-colon punctuation">::</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>  <span class="token comment">// namespace Project</span>

</code></pre>
    <h5>
     <a id="emspemsp__bfs_plannercpp_618">
     </a>
     bfs_planner.cpp
    </h5>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../../include/bfs_planner.h"</span></span>

<span class="token keyword">namespace</span> Project <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 判断给定的坐标是否在地图范围内且可通行</span>
    <span class="token keyword">bool</span> <span class="token class-name">BFSPlanner</span><span class="token double-colon punctuation">::</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> map<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;</span> MAP_WIDTH_<span class="token operator">&amp;&amp;</span> y <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;</span> MAP_HEIGHT_<span class="token operator">&amp;&amp;</span> map<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 打印路径</span>
    <span class="token keyword">void</span> <span class="token class-name">BFSPlanner</span><span class="token double-colon punctuation">::</span><span class="token function">printPath</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"[Path] "</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> coord <span class="token operator">:</span> path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> x <span class="token operator">=</span> coord<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
            <span class="token keyword">int</span> y <span class="token operator">=</span> coord<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"("</span> <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">", "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">") "</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 打印包含路径和障碍物的二维地图</span>
    <span class="token keyword">void</span> <span class="token class-name">BFSPlanner</span><span class="token double-colon punctuation">::</span><span class="token function">printMapWithPath</span><span class="token punctuation">(</span>
        <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> map<span class="token punctuation">,</span>
        <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> path<span class="token punctuation">,</span>
        std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> start<span class="token punctuation">,</span>
        std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> goal<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>


        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Map with Path:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>



        <span class="token comment">// 创建一个副本地图用于标记路径</span>
        std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;&gt;</span> <span class="token function">displayMap</span><span class="token punctuation">(</span>MAP_HEIGHT_<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>MAP_WIDTH_<span class="token punctuation">,</span> <span class="token char">' '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将障碍物标记为 'X'</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAP_HEIGHT_<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> MAP_WIDTH_<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    displayMap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'X'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 将路径点标记为 '.'</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> coord <span class="token operator">:</span> path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> x <span class="token operator">=</span> coord<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
            <span class="token keyword">int</span> y <span class="token operator">=</span> coord<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
            displayMap<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'.'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 标记起点为 'S' 和终点为 'G'</span>
        displayMap<span class="token punctuation">[</span>start<span class="token punctuation">.</span>first<span class="token punctuation">]</span><span class="token punctuation">[</span>start<span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'S'</span><span class="token punctuation">;</span>
        displayMap<span class="token punctuation">[</span>goal<span class="token punctuation">.</span>first<span class="token punctuation">]</span><span class="token punctuation">[</span>goal<span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'G'</span><span class="token punctuation">;</span>

        <span class="token comment">// 打印地图</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> row <span class="token operator">:</span> displayMap<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> cell <span class="token operator">:</span> row<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">switch</span> <span class="token punctuation">(</span>cell<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">case</span> <span class="token char">'X'</span><span class="token operator">:</span>
                        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\033[31m"</span> <span class="token operator">&lt;&lt;</span> cell <span class="token operator">&lt;&lt;</span> <span class="token string">" \033[0m"</span><span class="token punctuation">;</span>  <span class="token comment">// 红色障碍物</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token char">'.'</span><span class="token operator">:</span>
                        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\033[32m"</span> <span class="token operator">&lt;&lt;</span> cell <span class="token operator">&lt;&lt;</span> <span class="token string">" \033[0m"</span><span class="token punctuation">;</span>  <span class="token comment">// 绿色路径点</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token char">'S'</span><span class="token operator">:</span>
                        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\033[33m"</span> <span class="token operator">&lt;&lt;</span> cell <span class="token operator">&lt;&lt;</span> <span class="token string">" \033[0m"</span><span class="token punctuation">;</span>  <span class="token comment">// 黄色起点</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token char">'G'</span><span class="token operator">:</span>
                        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\033[36m"</span> <span class="token operator">&lt;&lt;</span> cell <span class="token operator">&lt;&lt;</span> <span class="token string">" \033[0m"</span><span class="token punctuation">;</span>  <span class="token comment">// 青色终点</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">default</span><span class="token operator">:</span>
                        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"  "</span><span class="token punctuation">;</span>  <span class="token comment">// 空格</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">// 使用 BFS 计算从起点到目标点的路径</span>
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token class-name">BFSPlanner</span><span class="token double-colon punctuation">::</span><span class="token function">planPath</span><span class="token punctuation">(</span>
        <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> map<span class="token punctuation">,</span>
        std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> start<span class="token punctuation">,</span>
        std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> goal<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>


        MAP_WIDTH_ <span class="token operator">=</span> map<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        MAP_HEIGHT_ <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> path<span class="token punctuation">;</span>

        <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> directions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;&gt;</span> <span class="token function">visited</span><span class="token punctuation">(</span>
            MAP_HEIGHT_<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>MAP_WIDTH_<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        std<span class="token double-colon punctuation">::</span>queue<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;&gt;</span> q<span class="token punctuation">;</span>

        <span class="token comment">// 初始化队列，从起点开始</span>
        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">{<!-- --></span>start<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        visited<span class="token punctuation">[</span>start<span class="token punctuation">.</span>first<span class="token punctuation">]</span><span class="token punctuation">[</span>start<span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">auto</span> front <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">auto</span> current <span class="token operator">=</span> front<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
            <span class="token keyword">auto</span> currentPath <span class="token operator">=</span> front<span class="token punctuation">.</span>second<span class="token punctuation">;</span>

            <span class="token comment">// 如果找到目标点，则返回路径</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> goal<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> currentPath<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 遍历四个方向</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> direction <span class="token operator">:</span> directions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">int</span> dx <span class="token operator">=</span> direction<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
                <span class="token keyword">int</span> dy <span class="token operator">=</span> direction<span class="token punctuation">.</span>second<span class="token punctuation">;</span>

                <span class="token keyword">int</span> nx <span class="token operator">=</span> current<span class="token punctuation">.</span>first <span class="token operator">+</span> dx<span class="token punctuation">;</span>
                <span class="token keyword">int</span> ny <span class="token operator">=</span> current<span class="token punctuation">.</span>second <span class="token operator">+</span> dy<span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> nx<span class="token punctuation">,</span> ny<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>visited<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    visited<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token keyword">auto</span> newPath <span class="token operator">=</span> currentPath<span class="token punctuation">;</span>
                    newPath<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>nx<span class="token punctuation">,</span> ny<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>nx<span class="token punctuation">,</span> ny<span class="token punctuation">)</span><span class="token punctuation">,</span> newPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"No path found!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>  <span class="token comment">// namespace Project</span>

</code></pre>
    <h5>
     <a id="node_plannercpp_773">
     </a>
     <strong>
      <code>
       node_planner.cpp
      </code>
     </strong>
    </h5>
    <p>
     <code>
      node_planner.cpp
     </code>
     文件实现了
     <code>
      ProjectNode
     </code>
     类的
     <code>
      plannerThread
     </code>
     方法，该方法用于路径规划。它主要完成了以下几个步骤：
    </p>
    <h6>
     <a id="_777">
     </a>
     <strong>
      功能与实现：
     </strong>
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        获取当前地图：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         auto flat_map = MapManager::getInstance().getMap();
        </code>
       </li>
       <li>
        从
        <code>
         MapManager
        </code>
        中获取当前地图数据。
        <code>
         flat_map
        </code>
        是一个一维的整数数组，表示地图的各个格子（0 表示通行区域，1 表示障碍物）。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        获取地图尺寸：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         std::pair&lt;int, int&gt; mapsize = MapManager::getInstance().getMapSize();
        </code>
       </li>
       <li>
        获取地图的宽度和高度，分别用于后续二维数组的创建。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        将一维地图转换为二维地图：
       </strong>
      </p>
      <ul>
       <li>
        创建一个二维数组
        <code>
         grid
        </code>
        ，大小为
        <code>
         mapsize.first
        </code>
        行和
        <code>
         mapsize.second
        </code>
        列。
       </li>
       <li>
        通过循环将一维的
        <code>
         flat_map
        </code>
        转换为二维的
        <code>
         grid
        </code>
        ，每个元素表示地图中的一个格子。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        调用路径规划：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         auto path = bfsplanner_-&gt;planPath(grid, {0, 0}, {mapsize.second - 1, mapsize.first - 1});
        </code>
       </li>
       <li>
        使用
        <code>
         bfsplanner_
        </code>
        （
        <code>
         BFSPlanner
        </code>
        类的实例）调用
        <code>
         planPath
        </code>
        方法进行路径规划。规划的起点是
        <code>
         (0, 0)
        </code>
        ，终点是地图的右下角
        <code>
         (mapsize.second - 1, mapsize.first - 1)
        </code>
        。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        打印路径规划结果：
       </strong>
      </p>
      <ul>
       <li>
        如果找到路径，打印成功消息，并调用
        <code>
         bfsplanner_-&gt;printMapWithPath
        </code>
        打印带路径的地图。
       </li>
       <li>
        如果没有找到路径，打印失败消息。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        线程休眠：
       </strong>
      </p>
      <ul>
       <li>
        <code>
         std::this_thread::sleep_for(std::chrono::seconds(2));
        </code>
       </li>
       <li>
        每次计算路径后，线程会休眠 2 秒，再进行下一次路径规划。这模拟了一个实时的路径规划过程。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <a id="bfs_plannercpp_803">
     </a>
     <strong>
      <code>
       bfs_planner.cpp
      </code>
     </strong>
    </h5>
    <p>
     <code>
      bfs_planner.cpp
     </code>
     文件实现了
     <code>
      BFSPlanner
     </code>
     类，它负责执行广度优先搜索（BFS）来计算路径，并打印包含路径的地图。
    </p>
    <h6>
     <a id="_807">
     </a>
     <strong>
      功能与实现：
     </strong>
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         isValid
        </code>
        方法：
       </strong>
      </p>
      <ul>
       <li>
        用于判断某个坐标是否在地图范围内并且该位置是否为通行区域（值为 0）。
       </li>
       <li>
        如果坐标有效且地图上该位置是通行的，返回
        <code>
         true
        </code>
        ，否则返回
        <code>
         false
        </code>
        。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         printPath
        </code>
        方法：
       </strong>
      </p>
      <ul>
       <li>
        打印路径中的每个坐标点。
       </li>
       <li>
        每个路径点格式为
        <code>
         (x, y)
        </code>
        ，路径中的所有点将被打印出来，形成一条路径。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         printMapWithPath
        </code>
        方法：
       </strong>
      </p>
      <ul>
       <li>
        打印包含路径和障碍物的地图。方法通过将障碍物标记为
        <code>
         'X'
        </code>
        、路径点标记为
        <code>
         '.'
        </code>
        ，起点标记为
        <code>
         'S'
        </code>
        ，终点标记为
        <code>
         'G'
        </code>
        来显示地图。
       </li>
       <li>
        使用颜色输出（通过 ANSI 转义序列），红色表示障碍物，绿色表示路径，黄色表示起点，青色表示终点。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         planPath
        </code>
        方法：
       </strong>
      </p>
      <ul>
       <li>
        执行广度优先搜索（BFS）来寻找从起点到终点的路径。
       </li>
       <li>
        使用队列
        <code>
         q
        </code>
        存储待处理的坐标及其路径。每个元素是一个包含坐标和路径的二元组。
       </li>
       <li>
        从起点开始，探索四个方向（上、下、左、右），将有效的且未被访问过的坐标加入队列。
       </li>
       <li>
        如果找到目标点，则返回从起点到目标点的路径。
       </li>
       <li>
        如果队列为空且未找到目标点，则表示没有路径可达，返回空路径。
       </li>
      </ul>
     </li>
    </ol>
    <h6>
     <a id="BFS__828">
     </a>
     <strong>
      BFS 算法细节：
     </strong>
    </h6>
    <ul>
     <li>
      <strong>
       队列存储路径：
      </strong>
      广度优先搜索使用队列来确保按层次逐步扩展路径。每次扩展一个新的节点时，都会将当前路径加入队列继续搜索。
     </li>
     <li>
      <strong>
       路径返回：
      </strong>
      一旦找到目标点，当前路径被返回。
     </li>
     <li>
      <strong>
       路径输出：
      </strong>
      找到的路径通过
      <code>
       printPath
      </code>
      和
      <code>
       printMapWithPath
      </code>
      方法显示在控制台上。
     </li>
    </ul>
    <h5>
     <a id="emspemsp___plannerThread__BFSPlanner__planPath__2_BFSPlanner__BFS_isValid__833">
     </a>
     总的来说，
     <strong>
      <code>
       plannerThread
      </code>
     </strong>
     方法通过调用
     <code>
      BFSPlanner
     </code>
     的
     <code>
      planPath
     </code>
     方法实现路径规划，定期计算从起点到终点的路径。每次路径规划之后，打印路径规划结果，并每 2 秒休眠一次。
     <strong>
      <code>
       BFSPlanner
      </code>
      类
     </strong>
     使用广度优先搜索（BFS）算法来计算路径，并能打印出路径及包含路径和障碍物的地图。通过
     <code>
      isValid
     </code>
     确保搜索过程中只访问有效且可通行的区域。整个过程通过两个线程实现并行操作：一个线程负责地图更新，另一个线程负责路径规划，模拟了一个实时的动态环境和路径规划系统。
    </h5>
    <hr/>
    <h4>
     <a id="6CMakeListstxt__837">
     </a>
     6、CMakeLists.txt 文件
    </h4>
    <h5>
     <a id="emspemsp_CMakeListstxt__CMake__839">
     </a>
     <code>
      CMakeLists.txt
     </code>
     文件是 CMake 构建系统的配置文件，指定了如何编译和链接项目中的源代码文件。下面是文件的详细内容及介绍
    </h5>
    <h5>
     <a id="emspemsp__CMakeListstxt__843">
     </a>
     CMakeLists.txt ：
    </h5>
    <pre><code class="prism language-cpp"># 最低 CMake 版本要求
<span class="token function">cmake_minimum_required</span><span class="token punctuation">(</span>VERSION <span class="token number">3.10</span><span class="token punctuation">)</span>

# 项目名称和版本
<span class="token function">project</span><span class="token punctuation">(</span>MapManagerProject VERSION <span class="token number">1.0</span> LANGUAGES CXX<span class="token punctuation">)</span>

# 设置 C<span class="token operator">++</span> 标准为 C<span class="token operator">++</span><span class="token number">11</span>
<span class="token function">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>
<span class="token function">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD_REQUIRED True<span class="token punctuation">)</span>

# 启用多线程支持
<span class="token function">find_package</span><span class="token punctuation">(</span>Threads REQUIRED<span class="token punctuation">)</span>

# 包含头文件目录
<span class="token function">include_directories</span><span class="token punctuation">(</span>include<span class="token punctuation">)</span>

# 添加所有的源文件
<span class="token function">set</span><span class="token punctuation">(</span>SOURCES
    src<span class="token operator">/</span>map<span class="token operator">/</span>map_manager<span class="token punctuation">.</span>cpp
    src<span class="token operator">/</span>planner<span class="token operator">/</span>bfs_planner<span class="token punctuation">.</span>cpp
    src<span class="token operator">/</span>node<span class="token operator">/</span>node<span class="token punctuation">.</span>cpp
    src<span class="token operator">/</span>node<span class="token operator">/</span>node_map<span class="token punctuation">.</span>cpp
    src<span class="token operator">/</span>node<span class="token operator">/</span>node_planner<span class="token punctuation">.</span>cpp
<span class="token punctuation">)</span>

# 生成可执行文件 map_simulation
<span class="token function">add_executable</span><span class="token punctuation">(</span>map_simulation $<span class="token punctuation">{<!-- --></span>SOURCES<span class="token punctuation">}</span><span class="token punctuation">)</span>

# 链接线程库
<span class="token function">target_link_libraries</span><span class="token punctuation">(</span>map_simulation PRIVATE Threads<span class="token double-colon punctuation">::</span>Threads<span class="token punctuation">)</span>

</code></pre>
    <h5>
     <a id="CMakeListstxt__880">
     </a>
     <strong>
      CMakeLists.txt 文件解析
     </strong>
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         cmake_minimum_required(VERSION 3.10)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        指定了 CMake 的最低版本要求为 3.10。CMake 版本 3.10 或更高版本是必需的才能正确地处理构建。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         project(MapManagerProject VERSION 1.0 LANGUAGES CXX)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        定义了项目的名称（
        <code>
         MapManagerProject
        </code>
        ）和版本（1.0）。
       </li>
       <li>
        <code>
         LANGUAGES CXX
        </code>
        表示项目是使用 C++ 编写的。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         set(CMAKE_CXX_STANDARD 11)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        设置项目使用的 C++ 标准为 C++11。通过
        <code>
         CMAKE_CXX_STANDARD
        </code>
        变量设置 C++ 编译标准为 11。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         set(CMAKE_CXX_STANDARD_REQUIRED True)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        强制要求 CMake 使用 C++11 标准进行编译。如果 C++11 编译器不可用，CMake 会报错。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         find_package(Threads REQUIRED)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        查找并配置线程库。这使得 CMake 能够处理多线程支持，并链接适当的线程库。在本项目中，CMake 需要找到线程库来支持多线程编程。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         include_directories(include)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        指定
        <code>
         include
        </code>
        目录为头文件搜索路径。CMake 会在这个目录下查找项目中的头文件。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         set(SOURCES ...)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        使用
        <code>
         set()
        </code>
        命令定义了一个名为
        <code>
         SOURCES
        </code>
        的变量，包含所有的源文件路径。项目中的所有源文件（例如
        <code>
         map_manager.cpp
        </code>
        、
        <code>
         bfs_planner.cpp
        </code>
        、
        <code>
         node.cpp
        </code>
        等）都被列出并包含在此变量中。
       </li>
       <li>
        这些源文件都在
        <code>
         src
        </code>
        目录下的子目录中，分别属于
        <code>
         map
        </code>
        、
        <code>
         planner
        </code>
        和
        <code>
         node
        </code>
        模块。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         add_executable(map_simulation ${SOURCES})
        </code>
       </strong>
      </p>
      <ul>
       <li>
        创建一个名为
        <code>
         map_simulation
        </code>
        的可执行文件，使用
        <code>
         SOURCES
        </code>
        变量中列出的所有源文件进行编译。
       </li>
       <li>
        CMake 会将这些源文件编译并链接成一个名为
        <code>
         map_simulation
        </code>
        的可执行文件。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         target_link_libraries(map_simulation PRIVATE Threads::Threads)
        </code>
       </strong>
      </p>
      <ul>
       <li>
        将线程库
        <code>
         Threads::Threads
        </code>
        链接到
        <code>
         map_simulation
        </code>
        可执行文件。
        <code>
         PRIVATE
        </code>
        关键字意味着只有目标文件（即
        <code>
         map_simulation
        </code>
        ）会链接到线程库，不会将其传播到其他目标。
       </li>
      </ul>
     </li>
    </ol>
    <h5>
     <a id="emspemsp_CMakeListstxt___C_C11____map_simulation___912">
     </a>
     总的来说，
     <code>
      CMakeLists.txt
     </code>
     文件配置了该项目的构建过程，主要步骤包括：- 设置项目名称、版本和 C++ 编译标准（C++11）。- 查找并链接线程库，以支持多线程。- 指定头文件搜索路径和源文件路径。- 编译源文件并生成一个名为
     <code>
      map_simulation
     </code>
     的可执行文件。- 确保多线程库能够在程序中正确链接。此配置文件能够有效地管理项目的构建过程，确保所有源文件被正确编译并链接，支持多线程操作。
    </h5>
    <hr/>
    <h3>
     <a id="_917">
     </a>
     三、具体应用示例的运行演示
    </h3>
    <h4>
     <a id="Ubuntu_920">
     </a>
     可以按照以下步骤在Ubuntu系统中运行该示例项目
    </h4>
    <h4>
     <a id="_1__923">
     </a>
     <strong>
      步骤 1: 克隆/复制项目文件
     </strong>
    </h4>
    <p>
     将完整的项目文件复制到 Ubuntu 系统上的某个目录。本文中以目录/home/gly/test/bfsmap为例
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4f724ff6ad214f57b2a57cbe0080dc51.png"/>
    </p>
    <h4>
     <a id="_2__930">
     </a>
     <strong>
      步骤 2: 创建构建目录并构建项目
     </strong>
    </h4>
    <p>
     在项目目录下执行以下命令来构建项目：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        进入项目根目录
       </strong>
       ：（具体路径根据个人实际情况修改）
      </p>
      <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /home/gly/test/bfsmap
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        创建构建目录
       </strong>
       ：
       <br/>
       通常建议在项目目录中创建一个
       <code>
        build
       </code>
       目录来存放构建文件：
      </p>
      <pre><code class="prism language-bash"><span class="token function">mkdir</span> build
<span class="token builtin class-name">cd</span> build
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        运行 CMake 配置项目
       </strong>
       ：
       <br/>
       使用 CMake 指定项目的根目录进行配置：
      </p>
      <pre><code class="prism language-bash">cmake <span class="token punctuation">..</span>
</code></pre>
     </li>
    </ol>
    <div align="center">
     <img src="https://i-blog.csdnimg.cn/direct/e0670e1755a04d8484566d4c2f948d82.png" width="100%">
      <div align="left">
      </div>
     </img>
    </div>
    <ol start="4">
     <li>
      <p>
       <strong>
        编译项目
       </strong>
       ：
       <br/>
       使用
       <code>
        make
       </code>
       编译项目：
      </p>
      <pre><code class="prism language-bash"><span class="token function">make</span>
</code></pre>
      <p>
       如果一切正常，CMake 会自动生成 Makefile 并使用它来编译源代码，生成可执行文件
       <code>
        map_simulation
       </code>
       。
      </p>
     </li>
    </ol>
    <div align="center">
     <img src="https://i-blog.csdnimg.cn/direct/3cfa6d4f970c49ecbb613cbf117f20e3.png" width="100%">
      <div align="left">
      </div>
     </img>
    </div>
    <h4>
     <a id="_3__974">
     </a>
     <strong>
      步骤 3: 运行项目
     </strong>
    </h4>
    <p>
     编译完成后，可以运行生成的可执行文件。
    </p>
    <ol>
     <li>
      <strong>
       运行可执行文件
      </strong>
      ：
      <pre><code class="prism language-bash">./map_simulation
</code></pre>
     </li>
    </ol>
    <h4>
     <a id="emspemsp__983">
     </a>
     运行示例如下所示：
    </h4>
    <p>
     <img alt="请添加图片描述" src="https://i-blog.csdnimg.cn/direct/353bc5d9b79c4d2dacb5c25fe5f6e66b.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9711396883144fcda343392d5777c4d2.gif#pic_center"/>
    </p>
    <p>
    </p>
    <div class="video">
     <iframe allowfullscreen="true" data-mediaembed="csdn" frameborder="0" id="0CXV1uNr-1741931902314" src="https://live.csdn.net/v/embed/468829" style="width:100%;height:100%;">
     </iframe>
     <p>
      bfsmap运行效果
     </p>
    </div>
    <p>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34343333393032392f:61727469636c652f64657461696c732f313433303838393131" class_="artid" style="display:none">
 </p>
</div>


