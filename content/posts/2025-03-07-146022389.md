---
layout: post
title: "anolis8.9-k8s1.32-node-二进制部署"
date: 2025-03-07 16:58:59 +0800
description: "k8s 1.32 的node节点部署"
keywords: "anolis8.9-k8s1.32-node-二进制部署"
categories: ['K']
tags: ['容器', '云原生', 'Kubernetes']
artid: "146022389"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146022389
    alt: "anolis8.9-k8s1.32-node-二进制部署"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146022389
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146022389
cover: https://bing.ee123.net/img/rand?artid=146022389
image: https://bing.ee123.net/img/rand?artid=146022389
img: https://bing.ee123.net/img/rand?artid=146022389
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     anolis8.9-k8s1.32-node-二进制部署
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、系统
    </h2>
    <p>
     # cat /etc/anolis-release
     <br/>
     Anolis OS release 8.9
    </p>
    <p>
     # uname -r
     <br/>
     5.10.134-18.an8.x86_64
    </p>
    <h2>
     二、从master上拷贝dockers及cri-docker相关文件
    </h2>
    <pre><code># groupadd docker
# mkdir /etc/docker

# scp -P 4033 root@192.168.7.201:/etc/systemd/system/containerd.service /etc/systemd/system/

# scp -P 4033 root@192.168.7.201:/etc/systemd/system/docker.service /etc/systemd/system/

# scp -P 4033 root@192.168.7.201:/etc/systemd/system/docker.socket /etc/systemd/system/

# scp -P 4033 root@192.168.7.201:/etc/docker/daemon.json /etc/docker/

# systemctl enable --now docker.socket &amp;&amp;  systemctl enable --now docker.service</code></pre>
    <h2>
     <img alt="" height="833" src="https://i-blog.csdnimg.cn/direct/bbeda322943b431c95d1c2845fe8d846.png" width="561"/>
    </h2>
    <pre><code># cp cri-dockerd/cri-dockerd /usr/bin/
# chmod +x /usr/bin/cri-dockerd 

# scp -P 4033 root@192.168.7.201:/usr/lib/systemd/system/cri-docker.service /usr/lib/systemd/system

# scp -P 4033 root@192.168.7.201:/usr/lib/systemd/system/cri-docker.socket /usr/lib/systemd/system

# systemctl daemon-reload ; systemctl enable --now cri-docker</code></pre>
    <h2>
     三、部署kubelet-从master上拷贝文件，需要清理不需要的文件
    </h2>
    <pre><code># scp -P 4033 -r root@192.168.7.201:/opt/kubernetes /opt

# cd /opt/kubernetes/bin
# rm -f kube-apiserver 
# rm -f kube-controller-manager
# rm -f kube-scheduler 

# cd /opt/kubernetes/cfg
# rm -f kube-controller-manager.*
# rm -f kube-apiserver.conf 
# rm -f kube-scheduler.*


# scp -P 4033 -r root@192.168.7.201:/usr/lib/systemd/system/kubelet.service /usr/lib/systemd/system/
# mkdir /var/log/kubernetes/logs -p
</code></pre>
    <h2>
    </h2>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <img alt="" height="45" src="https://i-blog.csdnimg.cn/direct/0f352a33e84d494981fa4912bfbee2fa.png" width="346"/>
    </h2>
    <p>
     <img alt="" height="37" src="https://i-blog.csdnimg.cn/direct/6bc831ed8404425e9269e09741c2af97.png" width="755"/>
    </p>
    <h2>
     四、kubelet
    </h2>
    <p>
     <img alt="" height="173" src="https://i-blog.csdnimg.cn/direct/11acb0e558e34884a11885a7539d2d0a.png" width="539"/>
    </p>
    <p>
     # systemctl daemon-reload
     <br/>
     # systemctl start kubelet
    </p>
    <p>
     master上授权
    </p>
    <p>
     <img alt="" height="188" src="https://i-blog.csdnimg.cn/direct/5a59e031dbca436696e3b305a710b9e0.png" width="1158"/>
    </p>
    <h2>
     五、kube-proxy
    </h2>
    <p>
     <img alt="" height="213" src="https://i-blog.csdnimg.cn/direct/9b00d56089344b05a9e6653b3c354895.png" width="432"/>
    </p>
    <pre><code># scp -P 4033 -r root@192.168.7.201:/usr/lib/systemd/system/kube-proxy.service /usr/lib/systemd/system/

# systemctl daemon-reload
# systemctl start kube-proxy.service</code></pre>
    <h2>
     六、注意
    </h2>
    <p>
     把 节点服务器的ip地址及hostname写入manster的hosts文件
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f74696e6774696e67303131392f:61727469636c652f64657461696c732f313436303232333839" class_="artid" style="display:none">
 </p>
</div>


