---
layout: post
title: "在WSL2-Ubuntu中安装CUDA12.8cuDNNAnacondaPytorch并验证安装"
date: 2025-03-07 11:13:04 +0800
description: "记录工作提示：整个过程最好先开启系统代理，也可以用镜像源，确保有官方发布的最新特性和官方库的完整和兼容性支持。期间下载会特别慢，需要在系统上先开启代理，然后WSL设置里打开网络模式“Mirrored”,以设置WSL自动使用主机上的代理网络。【WLS2怎么设置网络自动代理 - CSDN App】https://blog.csdn.net/u014451778/article/details/146073726?"
keywords: "在WSL2-Ubuntu中安装CUDA12.8、cuDNN、Anaconda、Pytorch并验证安装"
categories: ['未分类']
tags: ['运维', '人工智能', 'Virtualenv', 'Ubuntu', 'Pytorch', 'Python', 'Linux']
artid: "146075238"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146075238
    alt: "在WSL2-Ubuntu中安装CUDA12.8cuDNNAnacondaPytorch并验证安装"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146075238
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146075238
cover: https://bing.ee123.net/img/rand?artid=146075238
image: https://bing.ee123.net/img/rand?artid=146075238
img: https://bing.ee123.net/img/rand?artid=146075238
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     在WSL2-Ubuntu中安装CUDA12.8、cuDNN、Anaconda、Pytorch并验证安装
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     #记录工作
    </p>
    <p>
     提示：整个过程最好先开启系统代理，也可以用镜像源，确保有官方发布的最新特性和官方库的完整和兼容性支持。
    </p>
    <p>
     期间下载会特别慢，需要在系统上先开启代理，然后WSL设置里打开网络模式“Mirrored”,以设置WSL自动使用主机上的代理网络。
    </p>
    <blockquote>
     <p>
      【WLS2怎么设置网络自动代理 - CSDN App】https://blog.csdn.net/u014451778/article/details/146073726?sharetype=blog&amp;shareId=146073726&amp;sharerefer=APP&amp;sharesource=u014451778&amp;sharefrom=link
     </p>
    </blockquote>
    <p>
    </p>
    <h2>
     一、首先要先确保——windows系统中要正确安装了以下组件：
    </h2>
    <h3>
     （一）显卡驱动；
    </h3>
    <blockquote>
     <p>
      <a href="https://www.nvidia.cn/drivers/lookup/" rel="nofollow" title="下载 NVIDIA 官方驱动 | NVIDIA">
       下载 NVIDIA 官方驱动 | NVIDIA
      </a>
     </p>
    </blockquote>
    <h3>
     （二）Microsoft Visual Studio；
    </h3>
    <blockquote>
     <p>
      <a href="https://visualstudio.microsoft.com/zh-hans/downloads/" rel="nofollow" title="下载 Visual Studio Tools - 免费安装 Windows、Mac、Linux">
       下载 Visual Studio Tools - 免费安装 Windows、Mac、Linux
      </a>
     </p>
    </blockquote>
    <h3>
     （三）CUDA；
    </h3>
    <blockquote>
     <p>
      <a href="https://developer.nvidia.com/cuda-downloads?target_os=Windows" rel="nofollow" title="CUDA Toolkit 12.8 Downloads | NVIDIA Developer">
       CUDA Toolkit 12.8 Downloads | NVIDIA Developer
      </a>
     </p>
    </blockquote>
    <h3>
     （四）cuDNN；
    </h3>
    <blockquote>
     <p>
      <a href="https://developer.nvidia.com/cuda-downloads" rel="nofollow" title="CUDA Toolkit 12.8 Downloads | NVIDIA Developer">
       CUDA Toolkit 12.8 Downloads | NVIDIA Developer
      </a>
     </p>
    </blockquote>
    <h3>
     （五）正确安装WSL2-Ubuntu版本
    </h3>
    <p>
     要正常安装WSL2-Ubuntu版本，安装成功后打开ubuntu界面输出如下界面：
    </p>
    <blockquote>
     <p>
      <a href="https://learn.microsoft.com/zh-cn/windows/wsl/install" rel="nofollow" title="安装 WSL | Microsoft Learn">
       安装 WSL | Microsoft Learn
      </a>
     </p>
    </blockquote>
    <p class="img-center">
     <img alt="" height="992" src="https://i-blog.csdnimg.cn/direct/a86462d2c57b493c94f9e2ca4eee9c78.png" width="1887"/>
    </p>
    <p class="img-center">
     <img alt="" height="517" src="https://i-blog.csdnimg.cn/direct/b1bb190710ba405a8040f86d25aaee74.png" width="981"/>
    </p>
    <p class="img-center">
     <img alt="" height="630" src="https://i-blog.csdnimg.cn/direct/10d48f4c99b84663b4541edf174ce1ec.png" width="1117"/>
    </p>
    <p>
     该版本默认是安装的WSL2-Ubuntu 24.04版本 ，也可以选择其他的ubuntu版本进行安装。
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     二、在WSL2-Ubuntu系统中安装CUDA、cuDNN、Anaoconda
    </h2>
    <p>
     在windows系统中正确安装完必要组件后，然后才是在WSL2-Ubuntu中按照顺序安装 CUDA、cuDNN、Anaoconda。
    </p>
    <p>
     打开WSL2-Ubuntu，先安装CUDA、再安装cuDNN、最后是Anaconda（管理虚拟环境）
    </p>
    <p>
     只要windows系统配置好了显卡驱动，在WSL2中一般不必再另外安装linux驱动了。
    </p>
    <p>
     在安装前可以在WSL2-Ubuntu中使用以下命令进行验证与显卡的通信和驱动调用的情况：
    </p>
    <pre><code class="language-bash">nvidia-smi</code></pre>
    <p class="img-center">
     <img alt="" height="519" src="https://i-blog.csdnimg.cn/direct/13e4579ee5a84280af8ebc757a7486df.png" width="985"/>
    </p>
    <p>
    </p>
    <h3>
     （一）安装CUDA
    </h3>
    <p>
     打开CUDA官方网址&lt;建议“deb(network)”方式较为省事&gt;，完整复制全部命令粘贴进WSL2-Ubuntu终端中按回车键运行。
    </p>
    <blockquote>
     <p>
      <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network" rel="nofollow" title="CUDA Toolkit 12.8 Downloads | NVIDIA Developer">
       CUDA Toolkit 12.8 Downloads | NVIDIA Developer
      </a>
     </p>
    </blockquote>
    <p>
     选项如图所示：
    </p>
    <p>
     当然，也可以选WSL-Ubuntu这个选项更把稳。
    </p>
    <p class="img-center">
     <img alt="" height="1047" src="https://i-blog.csdnimg.cn/direct/d8c974f2c9b74a319866e6023983d931.png" width="1414"/>
    </p>
    <pre><code class="language-bash">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb
sudo dpkg -i cuda-keyring_1.1-1_all.deb
sudo apt-get update
sudo apt-get -y install cuda-toolkit-12-8</code></pre>
    <p>
    </p>
    <h4>
     1、复制图片/官网下边的全部命令，粘贴到WSL2-Ubuntu终端窗口中，按ENTER键（回车键）运行
    </h4>
    <p class="img-center">
     <img alt="" height="653" src="https://i-blog.csdnimg.cn/direct/61259800a69f422b86a1be78117bae44.png" width="1113"/>
    </p>
    <h4>
     2、过程中会要求输入密码，输入ubuntu密码即可。
    </h4>
    <p class="img-center">
     <img alt="" height="628" src="https://i-blog.csdnimg.cn/direct/a68fbf79711f4207b243c36fac2b5023.png" width="1113"/>
    </p>
    <h4>
     3、执行命令后会自动进行下载和安装：
    </h4>
    <p class="img-center">
     <img alt="" height="636" src="https://i-blog.csdnimg.cn/direct/fabb6467f7204a8598fd4430128201a8.png" width="1121"/>
    </p>
    <p class="img-center">
     <img alt="" height="632" src="https://i-blog.csdnimg.cn/direct/855f9daaa705491596d49ef0ec258ec5.png" width="1118"/>
    </p>
    <p>
    </p>
    <h4>
     4、安装结束后进行环境变量的编辑：
    </h4>
    <h4>
     a）我们可以按照下面的步骤来永久添加环境变量：
    </h4>
    <p>
     检查安装是否成功在配置环境变量之前，先确认 CUDA 是否正确安装。运行以下命令：ls /usr/local/cuda-12.8/bin/
    </p>
    <p>
     在 WSL2-Ubuntu 系统中，CUDA 12.8 通常安装在
     <code>
      /usr/local/cuda-12.8
     </code>
     目录下，这个目录包含了 CUDA 相关的各种组件，如
     <code>
      bin
     </code>
     （包含可执行文件，比如
     <code>
      nvcc
     </code>
     编译器就在这里面）、
     <code>
      lib64
     </code>
     （包含库文件）、
     <code>
      include
     </code>
     （包含头文件） 等。如果在安装过程中没有指定其他特殊路径，这就是默认的安装位置。我们可以通过以下命令来验证：
    </p>
    <pre><code class="language-bash">ls /usr/local/cuda-12.8</code></pre>
    <p>
     如果安装成功，我们会看到nvcc等工具的列表。如果没有看到这些文件，可能需要重新检查安装步骤。
    </p>
    <p class="img-center">
     <img alt="" height="95" src="https://i-blog.csdnimg.cn/direct/aecf7653ba5e4706bcbd39107b7e8153.png" width="1107"/>
    </p>
    <p>
     从我执行
     <code>
      ls /usr/local/cuda-12.8
     </code>
     后的输出结果来看，CUDA 12.8 似乎已经成功安装到了
     <code>
      /usr/local/cuda-12.8
     </code>
     目录下。
    </p>
    <p>
     接下来，我们需要将
     <code>
      /usr/local/cuda-12.8/bin
     </code>
     目录添加到系统的
     <code>
      PATH
     </code>
     环境变量中，以便系统能够找到
     <code>
      nvcc
     </code>
     等命令。
    </p>
    <h5>
     <br/>
     b） 配置环境变量环境变量的配置需要根据你的系统类型（Bash 或 Zsh）来操作。
    </h5>
    <h6>
     确认当前使用的 Shell
    </h6>
    <p>
     首先，确认你当前使用的 Shell 是 Bash 还是 Zsh。
    </p>
    <p>
     我们可以通过以下命令查看：
    </p>
    <pre><code class="language-bash">echo $SHELL</code></pre>
    <p>
     • 如果输出是   /bin/bash  ，则使用 Bash。
    </p>
    <p>
     • 如果输出是   /bin/zsh  ，则使用 Zsh。
    </p>
    <p class="img-center">
     <img alt="" height="71" src="https://i-blog.csdnimg.cn/direct/567ead9c7c2d46c5b58d54eca96b0157.png" width="367"/>
    </p>
    <h5>
     c）编辑环境变量配置文件
    </h5>
    <p>
    </p>
    <p>
     以下是常见的配置方法：
    </p>
    <h6>
     对于 Bash 用户
    </h6>
    <p>
     编辑   ~/.bashrc   文件，
    </p>
    <pre><code class="language-bash">nano ~/.bashrc</code></pre>
    <p>
     添加以下内容：
    </p>
    <pre><code class="language-bash">export PATH=/usr/local/cuda-12.8/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda-12.8/lib64:$LD_LIBRARY_PATH</code></pre>
    <p>
     • 按下   Ctrl + X  ，然后按   Y   确认保存，最后按   Enter   完成退出。
    </p>
    <p>
     保存文件后，运行以下命令使变量生效：
    </p>
    <pre><code class="language-bash">source ~/.bashrc</code></pre>
    <h6>
     对于 Zsh 用户
    </h6>
    <p>
     编辑   ~/.zshrc   文件，
    </p>
    <pre><code class="language-bash">nano ~/.bashrc
</code></pre>
    <p>
     添加相同的内容 :
    </p>
    <pre><code class="language-bash">export PATH=/usr/local/cuda-12.8/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda-12.8/lib64:$LD_LIBRARY_PATH
</code></pre>
    <p>
     保存文件后，运行以下命令使变量生效（选其一）：
    </p>
    <pre><code class="language-bash">source ~/.bashrc   # 如果是 Bash 用户
source ~/.zshrc    # 如果是 Zsh 用户
</code></pre>
    <h4>
     5. 验证环境变量
    </h4>
    <p>
     配置完成后，运行以下命令验证：
    </p>
    <pre><code class="language-bash">echo $PATH
</code></pre>
    <h4>
     6. 测试   nvcc
    </h4>
    <p>
     运行   nvcc -V  或nvcc --version
     <br/>
     ，检查输出是否正确。
    </p>
    <pre><code class="language-bash">nvcc -V</code></pre>
    <p>
     或者：
    </p>
    <pre><code class="language-bash">nvcc --version</code></pre>
    <p>
    </p>
    <p>
     如果配置正确，你会看到类似以下的输出：
    </p>
    <p>
    </p>
    <pre><code class="language-bash">love@AI:~$ ls /usr/local/cuda-12.8
DOCS      README  compute-sanitizer  extras  include  libnvvp           nvml  share  targets  version.json
EULA.txt  bin     doc                gds     lib64    nsightee_plugins  nvvm  src    tools
love@AI:~$ echo $SHELL
/bin/bash
love@AI:~$ nano ~/.bashrc
love@AI:~$ source ~/.bashrc
love@AI:~$ nvcc -V
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2025 NVIDIA Corporation
Built on Wed_Jan_15_19:20:09_PST_2025
Cuda compilation tools, release 12.8, V12.8.61
Build cuda_12.8.r12.8/compiler.35404655_0
love@AI:~$</code></pre>
    <p>
    </p>
    <p class="img-center">
     <img alt="" height="287" src="https://i-blog.csdnimg.cn/direct/33301fcfba254cb18bedc7aa037a7500.png" width="1019"/>
    </p>
    <p>
     至此，CUDA算是安装成功并得到验证。
    </p>
    <p>
    </p>
    <h4>
     7.驱动程序安装程序（建议）
    </h4>
    <p class="img-center">
     <img alt="" height="417" src="https://i-blog.csdnimg.cn/direct/44fbc8cc7ffb44a594ec5545e866d21b.png" width="1297"/>
    </p>
    <p>
     在官方CUDA安装命令下方，有以下命令选项，强烈建议在验证完CUDA安装正确后，再次运行以下命令（任选其一）以确保安装程序的未来兼容性。
    </p>
    <p>
     NVIDIA 驱动程序说明（选择一个选项）
    </p>
    <p>
     要安装 open kernel module 风格：
    </p>
    <pre><code class="language-bash">sudo apt-get install -y nvidia-open</code></pre>
    <p>
     要安装旧版内核模块风格：
    </p>
    <pre><code class="language-bash">sudo apt-get install -y cuda-drivers</code></pre>
    <p class="img-center">
     <img alt="" height="428" src="https://i-blog.csdnimg.cn/direct/a92a68c737dd40408867285e69891020.png" width="1102"/>
    </p>
    <p>
     NVIDIA 驱动程序提供了两种内核模块风格：open kernel module（开源内核模块）和旧版内核模块（proprietary kernel module，专有内核模块）。这两种风格的主要区别在于它们的许可证类型、支持的功能和兼容性。
    </p>
    <p>
     <br/>
     open kernel module 风格
    </p>
    <p>
     • 许可证：开源，通常采用 MIT/GPLv2 许可证。
    </p>
    <p>
     • 支持的 GPU 架构：支持 Turing 及以后的 GPU 架构。
    </p>
    <p>
     • 支持的功能：支持大多数 Linux GPU 驱动程序的功能，包括 CUDA、Vulkan、OpenGL、OptiX 和 X11。此外，还有一些功能是仅 open kernel modules 支持的，例如 NVIDIA Confidential Computing、Magnum IO GPUDirect Storage(GDS)、Heterogeneous Memory Management(HMM)、CPU affinity for GPU fault handlers 和 DMABUF support for CUDA allocations。
    </p>
    <p>
     • 兼容性：可能不支持所有旧版专有内核模块支持的特性，例如 NVIDIA virtual GPU(vGPU)、G-Sync on notebooks 和 Preserving video memory across power management events。
    </p>
    <p class="img-center">
     <img alt="" height="1284" src="https://i-blog.csdnimg.cn/direct/39f0f2dcab154081bcce295e9b6cfde4.png" width="1154"/>
    </p>
    <p>
    </p>
    <p>
     旧版内核模块风格
    </p>
    <p>
     • 许可证：专有，由 NVIDIA 提供。
    </p>
    <p>
     • 支持的 GPU 架构：支持 Maxwell、Pascal、Volta、Turing 和之后的 GPU 架构。
    </p>
    <p>
     • 支持的功能：支持所有 NVIDIA GPU 驱动程序的功能，包括那些可能在 open kernel modules 中尚未支持的特性。
    </p>
    <p>
     • 兼容性：通常更稳定，特别是在支持较旧的硬件和特定的企业级应用场景中。
    </p>
    <p>
     <br/>
     新手用户推荐
     <br/>
     对于新手用户，推荐安装open kernel module 风格的驱动程序，原因如下：
    </p>
    <p>
     • 开源：更透明，社区支持更广泛。
    </p>
    <p>
     • 更新：通常包含最新的功能和改进。
    </p>
    <p>
     • 兼容性：对于大多数现代应用和游戏来说，open kernel modules 提供的兼容性已经足够。
    </p>
    <p>
     然而，如果你有特定的需求，比如需要使用专有驱动程序中特有的功能，或者你的硬件较旧，可能需要旧版内核模块风格。
    </p>
    <p>
     在安装驱动程序之前，建议先阅读 NVIDIA 的官方文档，了解不同风格的详细区别和推荐使用场景。此外，确保我们的系统满足安装要求，并按照官方指南进行操作，以避免潜在的兼容性问题。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h3>
     （二）安装cuDNN
    </h3>
    <p>
     打开CUDA官方网址&lt;建议“deb(network)”方式较为省事&gt;，完整复制全部命令粘贴进WSL2-Ubuntu终端中按回车键运行。
    </p>
    <blockquote>
     <p>
      <a href="https://developer.nvidia.com/cudnn-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=24.04&amp;target_type=deb_network" rel="nofollow" title="cuDNN 9.8.0 Downloads | NVIDIA Developer">
       cuDNN 9.8.0 Downloads | NVIDIA Developer
      </a>
     </p>
    </blockquote>
    <p>
     选项如图所示：
    </p>
    <p class="img-center">
     <img alt="" height="972" src="https://i-blog.csdnimg.cn/direct/2e12a8b0f6ba4862a65b40ad317ecfde.png" width="1376"/>
    </p>
    <pre><code class="language-bash">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb
sudo dpkg -i cuda-keyring_1.1-1_all.deb
sudo apt-get update
sudo apt-get -y install cudnn</code></pre>
    <p>
    </p>
    <h4>
     1、复制图片/官网下边的全部命令，粘贴到WSL2-Ubuntu终端窗口中，按ENTER键运行
    </h4>
    <p class="img-center">
     <img alt="" height="91" src="https://i-blog.csdnimg.cn/direct/caba1cf3f9be47b2b5d1e6d59eb1e2c8.png" width="1097"/>
    </p>
    <h4>
     2、执行命令后会自动进行下载和安装：
    </h4>
    <p class="img-center">
     <img alt="" height="624" src="https://i-blog.csdnimg.cn/direct/2f0c6cce15f74b28bad4e678803ec4eb.png" width="1119"/>
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="" height="629" src="https://i-blog.csdnimg.cn/direct/92d7ea1c9d484651b8ba105b56b2fa2b.png" width="1112"/>
    </p>
    <h4>
     3、暂时性地验证 cuDNN 安装
    </h4>
    <p>
     此时，暂时性地验证 cuDNN 安装是否成功可以通过以下方法：
    </p>
    <p>
     检查文件路径的方法
     <br/>
     cuDNN 的库文件通常会被安装到`/usr/lib/x86_64-linux-gnu`或`/usr/local/cuda/lib64`目录下。你可以通过以下命令检查这些文件是否存在：
    </p>
    <pre><code class="language-bash">ls /usr/lib/x86_64-linux-gnu/libcudnn*</code></pre>
    <p>
     输出应该如下所示：
    </p>
    <pre><code class="language-bash">love@AI:~$ ls /usr/lib/x86_64-linux-gnu/libcudnn*
/usr/lib/x86_64-linux-gnu/libcudnn.so
/usr/lib/x86_64-linux-gnu/libcudnn.so.9
/usr/lib/x86_64-linux-gnu/libcudnn.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_adv.so
/usr/lib/x86_64-linux-gnu/libcudnn_adv.so.9
/usr/lib/x86_64-linux-gnu/libcudnn_adv.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_adv_static.a
/usr/lib/x86_64-linux-gnu/libcudnn_adv_static_v9.a
/usr/lib/x86_64-linux-gnu/libcudnn_cnn.so
/usr/lib/x86_64-linux-gnu/libcudnn_cnn.so.9
/usr/lib/x86_64-linux-gnu/libcudnn_cnn.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_cnn_static.a
/usr/lib/x86_64-linux-gnu/libcudnn_cnn_static_v9.a
/usr/lib/x86_64-linux-gnu/libcudnn_engines_precompiled.so
/usr/lib/x86_64-linux-gnu/libcudnn_engines_precompiled.so.9
/usr/lib/x86_64-linux-gnu/libcudnn_engines_precompiled.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_engines_precompiled_static.a
/usr/lib/x86_64-linux-gnu/libcudnn_engines_precompiled_static_v9.a
/usr/lib/x86_64-linux-gnu/libcudnn_engines_runtime_compiled.so
/usr/lib/x86_64-linux-gnu/libcudnn_engines_runtime_compiled.so.9
/usr/lib/x86_64-linux-gnu/libcudnn_engines_runtime_compiled.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_engines_runtime_compiled_static.a
/usr/lib/x86_64-linux-gnu/libcudnn_engines_runtime_compiled_static_v9.a
/usr/lib/x86_64-linux-gnu/libcudnn_graph.so
/usr/lib/x86_64-linux-gnu/libcudnn_graph.so.9
/usr/lib/x86_64-linux-gnu/libcudnn_graph.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_graph_static.a
/usr/lib/x86_64-linux-gnu/libcudnn_graph_static_v9.a
/usr/lib/x86_64-linux-gnu/libcudnn_heuristic.so
/usr/lib/x86_64-linux-gnu/libcudnn_heuristic.so.9
/usr/lib/x86_64-linux-gnu/libcudnn_heuristic.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_heuristic_static.a
/usr/lib/x86_64-linux-gnu/libcudnn_heuristic_static_v9.a
/usr/lib/x86_64-linux-gnu/libcudnn_ops.so
/usr/lib/x86_64-linux-gnu/libcudnn_ops.so.9
/usr/lib/x86_64-linux-gnu/libcudnn_ops.so.9.8.0
/usr/lib/x86_64-linux-gnu/libcudnn_ops_static.a
/usr/lib/x86_64-linux-gnu/libcudnn_ops_static_v9.a</code></pre>
    <p>
     从我的提供的输出结果来看，cuDNN 库文件已经成功安装在`
     <strong>
      /usr/lib/x86_64-linux-gnu
     </strong>
     `目录下，而不是`/usr/local/cuda/lib64`。这说明 cuDNN 的安装路径是正确的，并且系统已经正确配置了相关的库文件。
    </p>
    <p class="img-center">
     <img alt="" height="822" src="https://i-blog.csdnimg.cn/direct/a4b10e067f9a4c1798c072c8512ca98a.png" width="866"/>
    </p>
    <p>
     以下是验证结果解释：
    </p>
    <p>
     • cuDNN 库文件存在：
    </p>
    <p>
     • 我已经找到了多个 cuDNN 的动态链接库（如`libcudnn.so`、`libcudnn.so.9`、`libcudnn.so.9.8.0`）和静态库（如`libcudnn_adv_static.a`、`libcudnn_cnn_static_v9.a`等）。
    </p>
    <p>
     • 这些文件的存在表明 cuDNN 已正确安装。
    </p>
    <p>
     <br/>
     • CUDA 目录下没有 cuDNN 文件：
    </p>
    <p>
     • `/usr/local/cuda/lib64`目录下没有找到 cuDNN 文件，这是因为 cuDNN 的安装路径是`
     <strong>
      /usr/lib/x86_64-linux-gnu
     </strong>
     `，而不是`/usr/local/cuda`。
    </p>
    <p>
     • 这是正常的，因为 cuDNN 的安装路径通常由系统包管理器（如`apt`）决定，而不是手动安装到 CUDA 的目录下。
    </p>
    <p>
     小结：从我的输出结果来看，cuDNN 已正确安装在
     <strong>
      /usr/lib/x86_64-linux-gnu
     </strong>
     目录下。
    </p>
    <p>
    </p>
    <p>
     <strong>
      接下来我们将通过安装Anaconda之后，在与系统隔离的虚拟环境中安装Pytorch来完全地验证CUDA和cuDNN的安装是否正确。
     </strong>
    </p>
    <p>
     <br/>
    </p>
    <h3>
     （三）安装Anaconda
    </h3>
    <p>
     通过查询，截止2025年03月06日，最新版本Anaconda完整文件名为：Anaconda3-2024.10-1-Linux-x86_64.sh
    </p>
    <h4>
     1、通过以下命令下载和安装：
    </h4>
    <p>
     复制命令粘贴到WSL2-Ubuntu终端窗口中，按ENTER键运行
    </p>
    <pre><code class="language-bash">wget -P /tmp https://repo.anaconda.com/archive/Anaconda3-2024.10-1-Linux-x86_64.sh # 下载anaconda安装包至 /tmp 目录下
bash /tmp/Anaconda3-2024.10-1-Linux-x86_64.sh # 安装anaconda</code></pre>
    <p class="img-center">
     <img alt="" height="506" src="https://i-blog.csdnimg.cn/direct/e0776b97fd584bdeba07ff0930cee657.png" width="975"/>
    </p>
    <h4>
     2、执行命令后会自动进行下载完成后会进入安装步骤：
    </h4>
    <p>
     此时要点击ENTER键后一直按着不松开，来翻页阅读安装前协议
    </p>
    <p>
     <img alt="" height="507" src="https://i-blog.csdnimg.cn/direct/014a77bd771c47a3927dd332dcac13b1.png" width="974"/>
    </p>
    <p>
     继续按着ENTER键不松手，直到出现输入框才停止
     <img alt="" height="515" src="https://i-blog.csdnimg.cn/direct/cd2d132b2c464bbebe0d364637dbd7fa.png" width="977"/>
    </p>
    <p>
     一直按到出现输入框，按多了也没关系，不输入就不能继续
    </p>
    <p>
     <img alt="" height="510" src="https://i-blog.csdnimg.cn/direct/b01a6098c6f84a4881b9807885086d2f.png" width="977"/>
     用键盘手动输入“yes”，之后按ENTER回车键确认输入。然后进入到下边这个界面：
    </p>
    <p>
     <img alt="" height="510" src="https://i-blog.csdnimg.cn/direct/17d9135425074da09ee31e774ba1cd74.png" width="977"/>
     这会会询问安装位置，默认不修改则继续按一次ENTER键确认使用默认安装路径：
    </p>
    <p>
     <img alt="" height="512" src="https://i-blog.csdnimg.cn/direct/5361b9cbbf234f19a0914fac8e30bdc4.png" width="975"/>
    </p>
    <p>
     之后安装会询问:是否要集成到shell当中，自动进入默认虚拟环境？
    </p>
    <p>
     <img alt="" height="509" src="https://i-blog.csdnimg.cn/direct/7519cf83ba7d4d6987c8378b28e2b49b.png" width="973"/>
    </p>
    <p>
     建议输入“yes”
    </p>
    <p>
     <img alt="" height="510" src="https://i-blog.csdnimg.cn/direct/c67d3a5397544d199006fca99a49d695.png" width="979"/>
    </p>
    <p>
     此时安装完成。
    </p>
    <p>
     建议关闭终端，然后重新打开，看看是否自动进入默认的conda的base虚拟环境了：
    </p>
    <p>
     <img alt="" height="513" src="https://i-blog.csdnimg.cn/direct/aaf755fc3c0941e694994b3b1851ffb6.png" width="981"/>
     可以看到重新打开WSL2-Ubuntu终端后已自动激活base默认的Anaconda虚拟环境了。
    </p>
    <h4>
    </h4>
    <h4>
     3、验证Anaconda的安装
    </h4>
    <p>
     验证 Conda 安装是否成功可以通过以下几种方法。这些方法可以帮助你确认 Conda 是否正确安装，并且能够正常运行。
    </p>
    <p>
     <br/>
     方法 1：检查 Conda 版本
     <br/>
     运行以下命令来检查 Conda 的版本号。如果 Conda 安装成功，它会显示当前的版本信息：
    </p>
    <pre><code class="language-bash">conda --version</code></pre>
    <p>
     <br/>
     如果输出类似以下内容，则说明 Conda 安装成功：
    </p>
    <p class="img-center">
     <img alt="" height="287" src="https://i-blog.csdnimg.cn/direct/c34360d443f5435c8193861b7a1eca8c.png" width="639"/>
    </p>
    <p>
    </p>
    <p>
     <br/>
     如果没有输出，或者提示`conda: command not found`，则说明 Conda 没有正确安装，或者其路径没有被添加到系统的环境变量中。
    </p>
    <p>
     <br/>
     方法 2：检查 Conda 环境
     <br/>
     运行以下命令来查看当前的 Conda 环境列表：
    </p>
    <pre><code class="language-bash">conda env list</code></pre>
    <p>
     <br/>
     如果 Conda 安装成功，你会看到类似以下的输出，列出所有已创建的 Conda 环境：
    </p>
    <p class="img-center">
     <img alt="" height="295" src="https://i-blog.csdnimg.cn/direct/e49c102efffc4974aaa210a22ed039ef.png" width="422"/>
    </p>
    <p>
     <br/>
    </p>
    <p>
     方法 3：创建并激活新的 Conda 环境
     <br/>
     你可以创建一个新的 Conda 环境并激活它，以验证 Conda 的功能是否正常：
    </p>
    <p>
     <br/>
     • 创建新的环境：
    </p>
    <pre><code class="language-bash">conda create -n testenv python=3.9</code></pre>
    <p>
    </p>
    <p>
     • 激活环境：
    </p>
    <pre><code class="language-bash">conda activate testenv</code></pre>
    <p>
    </p>
    <p>
     • 检查当前环境：
    </p>
    <pre><code class="language-bash">conda info --envs</code></pre>
    <p>
     <br/>
     如果输出显示当前激活的环境是`testenv`，则说明 Conda 正常工作：
    </p>
    <p>
     <br/>
     # conda environments:
     <br/>
     #
     <br/>
     base                     /home/love/miniconda3
     <br/>
     testenv               *  /home/love/miniconda3/envs/testenv
     <br/>
     ```
    </p>
    <p>
     方法 4：安装并验证 Python 包
     <br/>
     在激活的 Conda 环境中，安装一个常用的 Python 包（如`numpy`），并验证其是否正常工作：
    </p>
    <p>
     <br/>
     • 安装包：
    </p>
    <pre><code class="language-bash"> conda install numpy</code></pre>
    <p>
    </p>
    <p>
     • 验证安装：
    </p>
    <pre><code class="language-bash"> python -c "import numpy; print(numpy.__version__)"</code></pre>
    <p>
     <br/>
     如果输出显示了`numpy`的版本号（例如`1.23.4`），则说明 Conda 和 Python 环境正常工作。
    </p>
    <p>
     <br/>
     方法 5：检查 Conda 配置
     <br/>
     运行以下命令来检查 Conda 的配置信息：
    </p>
    <pre><code class="language-bash">conda config --show</code></pre>
    <p>
    </p>
    <p>
     <br/>
     这将显示 Conda 的配置文件路径、默认环境路径、通道（channels）等信息。如果输出正常，说明 Conda 的配置文件没有问题。
    </p>
    <p>
     <br/>
     方法 6：检查 Conda 的初始化
     <br/>
     如果你在安装 Conda 后没有运行初始化命令，可能会导致`conda`命令无法正常使用。运行以下命令来初始化 Conda：
    </p>
    <pre><code class="language-bash">conda init</code></pre>
    <p>
     <br/>
     然后重新打开终端窗口，再次运行`conda --version`来验证。
    </p>
    <pre><code class="language-bash">conda --version</code></pre>
    <p>
     <br/>
     小结
     <br/>
     通过以上方法，你可以全面验证 Conda 是否正确安装并正常工作。如果在验证过程中遇到问题，请检查以下内容：
    </p>
    <p>
     • 确保 Conda 的安装路径已添加到系统的环境变量中。
    </p>
    <p>
     • 确保 Conda 初始化完成。
    </p>
    <p>
     • 如果仍然有问题，可以尝试重新安装 Conda。
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     三、安装Pytorch并验证CUDA12.8、cuDNN、Anaconda、Pytorch的安装
    </h2>
    <h3>
     （一）安装Pytorch
    </h3>
    <p class="img-center">
     <img alt="" height="582" src="https://i-blog.csdnimg.cn/direct/1e1f61483de744f38128560779daee18.png" width="717"/>
    </p>
    <p>
     我们就用默认的base环境来安装torch进行验证WSL2-Ubuntu的整个深度学习环境的搭建是否成功
    </p>
    <p class="img-center">
     <img alt="" height="367" src="https://i-blog.csdnimg.cn/direct/3e0408b683ac425e867b41fd48891314.png" width="861"/>
    </p>
    <p>
     目前CUDA12.8版本还不支持conda命令安装，今后torch官方会更新出conda包，我们就先用官方给的pip命令安装Preview (Nightly)版：
    </p>
    <p>
    </p>
    <pre><code class="language-bash">pip3 install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu128</code></pre>
    <p>
     <img alt="" height="1079" src="https://i-blog.csdnimg.cn/direct/ca309b8e76134ff58a4b02f5efb06a95.png" width="1427"/>
    </p>
    <p>
     过一会后安装完成：
     <img alt="" height="105" src="https://i-blog.csdnimg.cn/direct/ae4a42f4540c44aca9a1026bbfcbdd2f.png" width="974"/>
    </p>
    <p>
     接下来我们将用这个重要的深度学习库来验证之前的所有安装。
    </p>
    <p>
    </p>
    <p>
     （二）用Pytorch并验证CUDA12.8、cuDNN、Anaconda、Pytorch的安装
    </p>
    <p>
     先关闭WSL2-Ubuntu终端后，重新打开WSL2-Ubuntu终端；
    </p>
    <p>
     在WSL2-Ubuntu终端内输入“python”并回车调起python：
    </p>
    <pre><code class="language-python">python</code></pre>
    <p>
     <img alt="" height="519" src="https://i-blog.csdnimg.cn/direct/00464f39f5cd48f986cf49b8f5f6bcab.png" width="980"/>
    </p>
    <p>
     复制以下整段代理粘贴后按ENTER回车键支持验证：
    </p>
    <pre><code class="language-python">import torch  # 导入 PyTorch 库

print("PyTorch 版本：", torch.__version__)  # 打印 PyTorch 的版本号

# 检查 CUDA 是否可用，并设置设备（"cuda:0" 或 "cpu"）
device = torch.device("cuda:0" if torch.cuda.is_available() else "cpu")
print("设备：", device)  # 打印当前使用的设备
print("CUDA 可用：", torch.cuda.is_available())  # 打印 CUDA 是否可用
print("cuDNN 已启用：", torch.backends.cudnn.enabled)  # 打印 cuDNN 是否已启用

# 打印 PyTorch 支持的 CUDA 和 cuDNN 版本
print("支持的 CUDA 版本：", torch.version.cuda)
print("cuDNN 版本：", torch.backends.cudnn.version())

# 创建两个随机张量（默认在 CPU 上）
x = torch.rand(5, 3)
y = torch.rand(5, 3)

# 将张量移动到指定设备（CPU 或 GPU）
x = x.to(device)
y = y.to(device)

# 对张量进行逐元素相加
z = x + y

# 打印结果
print("张量 z 的值：")
print(z)  # 输出张量 z 的内容
</code></pre>
    <p>
     如果输出如下，则表明CUDA12.8、cuDNN、Anaconda、Pytorch全部安装成功！
    </p>
    <p>
     <img alt="" height="1158" src="https://i-blog.csdnimg.cn/direct/d517e07b6e424ad59aa3071d376b11e5.png" width="1131"/>
    </p>
    <p>
     从上边的输出来看，你已经成功地在 Python 中导入了 PyTorch，并且确认了 CUDA 和 cuDNN 的可用性。你的代码运行正常，并且 PyTorch 正在使用 GPU（`cuda:0`）进行计算。以下是对代码和输出的总结：
    </p>
    <pre><code class="language-python">(base) love@AI:~$ python
Python 3.12.7 | packaged by Anaconda, Inc. | (main, Oct  4 2024, 13:27:36) [GCC 11.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import torch  # 导入 PyTorch 库
"PyTorch 版本：", torch.__version__)  # 打印 PyTorch 的版本号

# 检查 CUDA 是否可用，并设置设备（"cuda:0" 或 "cpu"）
device = torch.device("cuda:0" if torch.cuda.is_available() else "cpu")
print("设备：", device)  # 打印当前使用的设备
print("CUDA 可用：", torch.cuda.is_available())  # 打印 CUDA 是否可用
print("cuDNN 已启用：", torch.backends.cudnn.enabled)  # 打印 cuDNN 是否已启用

# 打印 PyTorch 支持的 CUDA 和 cuDNN 版本
print("支持的 CUDA 版本：", torch.version.cuda)
print("cuDNN 版本：", torch.backends.cudnn.version())

# 创建两个随机张量（默认在 CPU 上）
x = torch.rand(5, 3)
y = torch.rand(5, 3)

# 将张量移动到指定设备（CPU 或 GPU）
x = x.to(device)
y = y.to(device)

# 对张量进行逐元素相加
z = x + y

# 打印结果
print("张量 z 的值：")
print(z)  # 输出张量 z 的内容&gt;&gt;&gt;
&gt;&gt;&gt; print("PyTorch 版本：", torch.__version__)  # 打印 PyTorch 的版本号
PyTorch 版本： 2.7.0.dev20250306+cu128
&gt;&gt;&gt;
&gt;&gt;&gt; # 检查 CUDA 是否可用，并设置设备（"cuda:0" 或 "cpu"）
&gt;&gt;&gt; device = torch.device("cuda:0" if torch.cuda.is_available() else "cpu")
&gt;&gt;&gt; print("设备：", device)  # 打印当前使用的设备
设备： cuda:0
&gt;&gt;&gt; print("CUDA 可用：", torch.cuda.is_available())  # 打印 CUDA 是否可用
CUDA 可用： True
&gt;&gt;&gt; print("cuDNN 已启用：", torch.backends.cudnn.enabled)  # 打印 cuDNN 是否已启用
cuDNN 已启用： True
&gt;&gt;&gt;
&gt;&gt;&gt; # 打印 PyTorch 支持的 CUDA 和 cuDNN 版本
&gt;&gt;&gt; print("支持的 CUDA 版本：", torch.version.cuda)
支持的 CUDA 版本： 12.8
&gt;&gt;&gt; print("cuDNN 版本：", torch.backends.cudnn.version())
cuDNN 版本： 90701
&gt;&gt;&gt;
&gt;&gt;&gt; # 创建两个随机张量（默认在 CPU 上）
&gt;&gt;&gt; x = torch.rand(5, 3)
&gt;&gt;&gt; y = torch.rand(5, 3)
&gt;&gt;&gt;
&gt;&gt;&gt; # 将张量移动到指定设备（CPU 或 GPU）
&gt;&gt;&gt; x = x.to(device)
&gt;&gt;&gt; y = y.to(device)
&gt;&gt;&gt;
&gt;&gt;&gt; # 对张量进行逐元素相加
&gt;&gt;&gt; z = x + y
&gt;&gt;&gt;
&gt;&gt;&gt; # 打印结果
&gt;&gt;&gt; print("张量 z 的值：")
张量 z 的值：
&gt;&gt;&gt; print(z)  # 输出张量 z 的内容
tensor([[0.8231, 0.9657, 1.3131],
        [0.8789, 1.4404, 0.8304],
        [0.8528, 1.3328, 1.9110],
        [1.0722, 0.6289, 1.4093],
        [1.1559, 0.8878, 0.5438]], device='cuda:0')
&gt;&gt;&gt;</code></pre>
    <p>
     <br/>
     ---
    </p>
    <p>
     代码运行结果：
     <br/>
     PyTorch 版本： 2.7.0.dev20250306+cu128
     <br/>
     设备： cuda:0
     <br/>
     CUDA 可用： True
     <br/>
     cuDNN 已启用： True
     <br/>
     支持的 CUDA 版本： 12.8
     <br/>
     cuDNN 版本： 90701
    </p>
    <p>
     ---
    </p>
    <p>
     关键信息：
    </p>
    <p>
     • PyTorch 版本：`2.7.0.dev20250306+cu128`
    </p>
    <p>
     • 这是一个开发版本（`dev`），并且是针对 CUDA 12.8 的版本。
    </p>
    <p>
     <br/>
     • 设备：`cuda:0`
    </p>
    <p>
     • 表示 PyTorch 已成功检测到 GPU，并将使用第一个 GPU 设备。
    </p>
    <p>
     <br/>
     • CUDA 和 cuDNN：
    </p>
    <p>
     • CUDA 可用：`True`，表示系统支持 CUDA，PyTorch 可以利用 GPU 加速。
    </p>
    <p>
     • cuDNN 已启用：`True`，表示 cuDNN 已启用，这有助于进一步加速深度学习任务。
    </p>
    <p>
     • 支持的 CUDA 版本：`12.8`，表示 PyTorch 支持 CUDA 12.8。
    </p>
    <p>
     • cuDNN 版本：`90701`（即 cuDNN 9.7.1）。
    </p>
    <p>
     <br/>
     ---
    </p>
    <p>
     如果我们遇到任何问题（例如 CUDA 不可用），请确保：
    </p>
    <p>
     • 检查 GPU 驱动和 CUDA 安装：
    </p>
    <p>
     • GPU 驱动是最新的。
    </p>
    <p>
     • 安装了正确版本的 CUDA 和 cuDNN。
    </p>
    <p>
     • PyTorch 版本与 CUDA 版本兼容。
    </p>
    <p>
     <br/>
     ---
    </p>
    <blockquote>
     <p>
      【Windows 11 中部署 Linux 项目 - CSDN App】https://blog.csdn.net/u014451778/article/details/144777265?sharetype=blog&amp;shareId=144777265&amp;sharerefer=APP&amp;sharesource=u014451778&amp;sharefrom=link
     </p>
    </blockquote>
    <p>
     <br/>
     至此，在Windosw系统上的WSL2-Ubuntu深度学习环境配置完成，可以在Windosw系统上优雅地借助Windosw的易用性和Linux系统的高效性进行项目部署和开发调试了。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031343435313737382f:61727469636c652f64657461696c732f313436303735323338" class_="artid" style="display:none">
 </p>
</div>


