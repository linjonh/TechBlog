---
layout: post
title: "ubuntu16bind9-搭建dns服务器"
date: 2023-08-31 18:32:55 +0800
description: "4：在/etc/bind/zones/路径下创建区文件，我这里创建的是db.tor.com，和前面定"
keywords: "ubuntu16+bind9 搭建dns服务器"
categories: ['未分类']
tags: ['服务器']
artid: "132608274"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=132608274
  alt: "ubuntu16bind9-搭建dns服务器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=132608274
featuredImagePreview: https://bing.ee123.net/img/rand?artid=132608274
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ubuntu16+bind9 搭建dns服务器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     需求：使用bind9搭建一台dns服务器，为其他服务器之间的访问提供dns解析服务
    </p>
    <blockquote>
     <p>
      dns服务器：192.168.xx.32
      <br/>
      web服务器：192.168.xx.31
      <br/>
      db服务器：192.168.xx.33
     </p>
    </blockquote>
    <h4>
     <a id="1bind9_6">
     </a>
     1：安装bind9
    </h4>
    <pre><code>apt install bind9
</code></pre>
    <h4>
     <a id="2bindetcbindnamedconflocal_12">
     </a>
     2：编辑bind配置文件（/etc/bind/named.conf.local）指定域的区块文件
    </h4>
    <pre><code>vim /etc/bind/named.conf.local
</code></pre>
    <p>
     添加下列内容
    </p>
    <pre><code>zone "tor.com"{                          # “tor.com”可以理解为监听区域，根据自己的域名设置
    type master;
    file "/etc/bind/zones/db.tor.com";   # 区文件路径（稍后在相应位置创建区文件就好，路径不必严格照搬）

}; # zone 可以定义多个
</code></pre>
<h4>
<a id="3etcbindzones_26">
</a>
3：进入/etc/bind/目录下，没有 zones 文件夹就创建。
</h4>
<h4>
<a id="4etcbindzones_27">
</a>
4：在/etc/bind/zones/路径下创建区文件
</h4>
<pre><code>cp /etc/bind/db.empty /etc/bind/zones/db.tor.com
</code></pre>
<p>
我这里创建的是 db.tor.com，和前面定义的路径匹配就行
</p>
<h4>
<a id="5_dbtorcom_34">
</a>
5：编辑区文件 db.tor.com
</h4>
<pre><code>; BIND reverse data file for empty rfc1918 zone
;
; DO NOT EDIT THIS FILE - it is used for multiple zones.
; Instead, copy it, edit named.conf, and use that copy.
;
$TTL 86400
@ IN SOA ns1.tor.com. admin.tor.com. (
1 ; Serial
604800 ; Refresh
86400 ; Retry
2419200 ; Expire
86400 ) ; Negative Cache TTL
;
@ IN NS localhost. #域名服务器
;tor.com IN NS 192.168.xx.32  
;@ IN A 127.0.0.1 #ipv4 地址
;@ IN AAAA ::1 #ipv6 地址

web IN A 192.168.xx.31 #提供 web 服务的服务器
db IN A 192.168.xx.33 #提供数据库服务的服务器
</code></pre>
<p>
SerialNumber ：每次编辑区文件后数字请自行+1，用于从服务器判断何时获取最新的区数据
<br/>
@：表示当前域
<br/>
NS：域名服务器
<br/>
“;”：注释
</p>
<h4>
<a id="6_namedconfoptions__63">
</a>
6：编辑 named.conf.options 文件
</h4>
<pre><code>vim named.conf.options
</code></pre>
<p>
设置监听端口（在 options 内加入）
</p>
<blockquote>
<p>
listen-on port 53 {127.0.0.1;192.168.xx.32; }; # 此处填写 ns1 的内网 IP 地址。仅在内网监听
</p>
</blockquote>
<h4>
<a id="7bind_73">
</a>
7：重启 bind 服务
</h4>
<pre><code>service bind9 restart
</code></pre>
<h4>
<a id="8dnsdns_79">
</a>
8：配置服务器 dns 指向 dns 服务器
</h4>
<p>
例如在角色为 web 的服务器上编辑 /etc/resolv.conf 文件，加入如下内容
</p>
<blockquote>
<p>
nameserver 192.168.xx.32 #dns 服务器地址
<br/>
search DHCP HOST
</p>
</blockquote>
<p>
保存退出，接下来在
<strong>
web
</strong>
服务器上
<code>
ping db.tor.com
</code>
就可以自动解析到角色为
<strong>
db
</strong>
的服务器地址
<br/>
也可以使用
<code>
nslookup db.tor.com
</code>
验证
</p>
<p>
<a href="https://blog.51cto.com/ylive/389892" rel="nofollow">
区文件配置说明参考
</a>
</p>
<p>
<a href="https://www.cnblogs.com/liyuanhong/articles/7400854.html" rel="nofollow">
bind9 配置说明
</a>
</p>
<p>
<a href="http://www.cnblogs.com/liyuanhong/articles/7353974.html" rel="nofollow">
dns 解析过程全解
</a>
</p>
<p>
<a href="https://www.cnblogs.com/liyuanhong/articles/7355153.html" rel="nofollow">
常用域名记录解释
</a>
</p>
<h3>
<a id="_98">
</a>
本文参考
</h3>
<p>
<a href="https://blog.csdn.net/lyhDream/article/details/77620932">
ubuntu 下配置 bind9 为局域网的 DNS 服务器
</a>
</p>
<p>
<a href="https://blog.csdn.net/w450093854/article/details/88357179">
ubuntu16.04 下搭建 bind9 记录
</a>
</p>
<h3>
<a id="PS_106">
</a>
PS:自由域
</h3>
<p>
<img alt="zone" src="https://i-blog.csdnimg.cn/blog_migrate/a7f1a58737e837f4c144cf686dea1902.png#pic_center">
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/764094e61e51ed683470778b2862bf3a.png#pic_center"/>
</img>
</p>

   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34343136373539352f:61727469636c652f64657461696c732f313332363038323734" class_="artid" style="display:none">
 </p>
</div>
