---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f4d696c6c65723737375f2f:61727469636c652f64657461696c732f313436323330383635"
layout: post
title: "101.åœ¨-Vue-3-OpenLayers-ä½¿ç”¨-declutter-é¿å…æ–‡å­—æ ‡ç­¾é‡å "
date: 2025-03-13 14:51:13 +0800
description: "åœ¨ä½¿ç”¨ OpenLayers è¿›è¡Œåœ°å›¾å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨åœ°å›¾ä¸Šæ·»åŠ ç‚¹ã€çº¿ã€åŒºåŸŸç­‰å›¾å½¢ï¼Œå¹¶ç»™å®ƒä»¬é™„åŠ æ–‡å­—æ ‡ç­¾ã€‚ä½†å½“åœ°å›¾ä¸Šçš„æ ‡æ³¨è¾ƒå¤šæ—¶ï¼Œæ–‡å­—æ ‡ç­¾å¯èƒ½ä¼šå‘ç”Ÿé‡å ï¼Œå¯¼è‡´ç”¨æˆ·æ— æ³•æ¸…æ™°åœ°æŸ¥çœ‹åœ°å›¾ä¿¡æ¯ã€‚æ˜¯ OpenLayers æä¾›çš„å¼ºå¤§åŠŸèƒ½ï¼Œèƒ½å¤Ÿè‡ªåŠ¨ä¼˜åŒ–åœ°å›¾æ ‡æ³¨ï¼Œä½¿å¾—åœ°å›¾æ•°æ®æ›´åŠ æ¸…æ™°å¯è¯»ã€‚é€‰é¡¹ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…æ–‡å­—æ ‡ç­¾çš„é‡å é—®é¢˜ã€‚ï¼ŒOpenLayers ä¼šè‡ªåŠ¨è°ƒæ•´æ ‡æ³¨çš„æ˜¾ç¤ºæ–¹å¼ï¼Œé¿å…æ–‡æœ¬æˆ–å›¾æ ‡é‡å åœ¨ä¸€èµ·ï¼Œæé«˜åœ°å›¾çš„å¯è¯»æ€§ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Vue ç»„ä»¶ï¼Œåœ¨å…¶ä¸­åˆå§‹åŒ– OpenLayers åœ°å›¾ï¼Œå¹¶ä½¿ç”¨ã€‚"
keywords: "101.åœ¨ Vue 3 + OpenLayers ä½¿ç”¨ declutter é¿å…æ–‡å­—æ ‡ç­¾é‡å "
categories: ['Openlayers']
tags: ['æ·±åº¦å­¦ä¹ ', 'å‰ç«¯', 'Vue', 'Openlayers', 'Javascript']
artid: "146230865"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146230865
    alt: "101.åœ¨-Vue-3-OpenLayers-ä½¿ç”¨-declutter-é¿å…æ–‡å­—æ ‡ç­¾é‡å "
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146230865
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146230865
cover: https://bing.ee123.net/img/rand?artid=146230865
image: https://bing.ee123.net/img/rand?artid=146230865
img: https://bing.ee123.net/img/rand?artid=146230865
---

# 101.åœ¨ Vue 3 + OpenLayers ä½¿ç”¨ declutter é¿å…æ–‡å­—æ ‡ç­¾é‡å 

### 

### **1. å‰è¨€**

åœ¨ä½¿ç”¨ OpenLayers è¿›è¡Œåœ°å›¾å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨åœ°å›¾ä¸Šæ·»åŠ ç‚¹ã€çº¿ã€åŒºåŸŸç­‰å›¾å½¢ï¼Œå¹¶ç»™å®ƒä»¬é™„åŠ æ–‡å­—æ ‡ç­¾ã€‚ä½†å½“åœ°å›¾ä¸Šçš„æ ‡æ³¨è¾ƒå¤šæ—¶ï¼Œæ–‡å­—æ ‡ç­¾å¯èƒ½ä¼šå‘ç”Ÿé‡å ï¼Œå¯¼è‡´ç”¨æˆ·æ— æ³•æ¸…æ™°åœ°æŸ¥çœ‹åœ°å›¾ä¿¡æ¯ã€‚

å¹¸è¿çš„æ˜¯ï¼ŒOpenLayers æä¾›äº†
`declutter`
é€‰é¡¹ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…æ–‡å­—æ ‡ç­¾çš„é‡å é—®é¢˜ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ Vue 3 + OpenLayers é¡¹ç›®ä¸­ä½¿ç”¨
`declutter`
ï¼Œå¹¶é€šè¿‡ç¤ºä¾‹ä»£ç å±•ç¤ºå¦‚ä½•æ·»åŠ å¸¦æœ‰æ—¶é—´æ ‡ç­¾çš„è½¨è¿¹ç‚¹ã€‚

---

### **2. `declutter` ä»‹ç»**

`declutter`
æ˜¯ OpenLayers
`VectorLayer`
ï¼ˆçŸ¢é‡å›¾å±‚ï¼‰çš„ä¸€ä¸ªå±æ€§ï¼Œä¸“é—¨ç”¨äºå¤„ç†æ ‡æ³¨ï¼ˆæ–‡æœ¬æˆ–å›¾æ ‡ï¼‰çš„é‡å é—®é¢˜ã€‚å¦‚æœ
`declutter: true`
ï¼ŒOpenLayers ä¼šè‡ªåŠ¨è°ƒæ•´æ ‡æ³¨çš„æ˜¾ç¤ºæ–¹å¼ï¼Œé¿å…æ–‡æœ¬æˆ–å›¾æ ‡é‡å åœ¨ä¸€èµ·ï¼Œæé«˜åœ°å›¾çš„å¯è¯»æ€§ã€‚

---

### **3. é¡¹ç›®ç¯å¢ƒ**

* **Vue 3 + Composition API**
* **OpenLayers**
* **Vite**

**å®‰è£… OpenLayers**

```javascript
npm install ol
```

---

### **4. ä»£ç å®ç°**

#### **4.1 åˆ›å»º Vue ç»„ä»¶**

æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Vue ç»„ä»¶ï¼Œåœ¨å…¶ä¸­åˆå§‹åŒ– OpenLayers åœ°å›¾ï¼Œå¹¶ä½¿ç”¨
`declutter`
é¿å…æ ‡æ³¨é‡å ã€‚

#### **å®Œæ•´ä»£ç **

```javascript
<!--
 * @Author: å½­éº’
 * @Date: 2025/3/13
 * @Email: 1062470959@qq.com
 * @Description: æ­¤æºç ç‰ˆæƒå½’å‰æª€è¿¦ä¿æ‰€æœ‰ï¼Œå¯ä¾›å­¦ä¹ å’Œå€Ÿé‰´æˆ–å•†ç”¨ã€‚
 -->
<template>
  <div class="container">
    <div class="w-full flex justify-center flex-wrap">
      <div class="font-bold text-[24px]">åœ¨Vue3ä¸­+OpenLayersä½¿ç”¨declutterï¼Œé¿å…æ–‡å­—æ ‡ç­¾é‡å </div>
    </div>
    <div id="vue-openlayers"></div>
  </div>
</template>

<script setup>
import "ol/ol.css";
import {onMounted, ref} from "vue";
import {Map, View} from "ol";
import Tile from "ol/layer/Tile";
import OSM from "ol/source/OSM";
import VectorLayer from "ol/layer/Vector";
import VectorSource from "ol/source/Vector";
import Style from "ol/style/Style";
import Icon from "ol/style/Icon";
import Text from "ol/style/Text";
import Fill from "ol/style/Fill";
import Stroke from "ol/style/Stroke";
import Feature from "ol/Feature";
import {Point, LineString} from "ol/geom";
import startPoint from "@/assets/OpenLayers/startPoint.png";
import endPoint from "@/assets/OpenLayers/endPoint.png";
import pointImg from "@/assets/OpenLayers/point.png";
const map = ref(null);
const trackSource = new VectorSource();
const markersData = ref([
  [111.44, 24.18, 1604627953],
  [112.26, 24.48, 1604714353],
  [113.96, 24.65, 1604800753],
  [113.44, 24.78, 1604887153],
  [113.44, 24.98, 1605059953],
  [113.54, 25.68, 1605146353],
]);

const setTrackStyle = (text, img) => {
  return [
    new Style({
      image: new Icon({
        src: img,
        anchor: [0.5, 0.5],
        scale: 0.2,
      }),
      text: new Text({
        font: "12px sans-serif",
        maxAngle: 30,
        offsetY: 20,
        text: text,
        fill: new Fill({color: "#fff"}),
        backgroundFill: new Fill({color: "rgba(255,0,0,0.6)"}),
        backgroundStroke: new Stroke({color: "rgba(255,0,0,0.6)", width: 8}),
      }),
    }),
  ];
};

const showTrace = (data) => {
  const lineFeature = new Feature(new LineString(data));
  lineFeature.setStyle(new Style({stroke: new Stroke({color: "#00f", width: 2})}));
  trackSource.addFeature(lineFeature);

  const features = [];
  data.forEach((point, index) => {
    let img;
    if (index === 0) img = startPoint;
    else if (index === data.length - 1) img = endPoint;
    else img = pointImg

    const feature = new Feature({
      geometry: new Point([point[0], point[1]]),
      data: point,
    });

    const time = new Date(point[2] * 1000).toISOString().split("T")[0];
    feature.setStyle(setTrackStyle(`æ—¶é—´: ${time}`, img));
    features.push(feature);
  });

  trackSource.addFeatures(features);
};

const initMap = () => {
  const OSMlayer = new Tile({source: new OSM()});
  const trackLayer = new VectorLayer({
    source: trackSource,
    declutter: true, // é¿å…æ ‡ç­¾é‡å 
  });

  map.value = new Map({
    target: "vue-openlayers",
    layers: [OSMlayer, trackLayer],
    view: new View({
      center: [113.448, 23.986],
      zoom: 7,
      projection: "EPSG:4326",
    }),
  });
};

onMounted(() => {
  initMap();
  showTrace(markersData.value);
});

</script>

<style scoped>
.container {
  width: 840px;
  height: 590px;
  margin: 50px auto;
  border: 1px solid #42B983;
}

#vue-openlayers {
  width: 800px;
  height: 470px;
  margin: 0 auto;
  border: 1px solid #42B983;
  position: relative;
}
</style>

```

---

### **5. ä»£ç è§£æ**

#### **5.1 `setTrackStyle` æ–¹æ³•**

è¯¥æ–¹æ³•ç”¨äºç»™è½¨è¿¹ç‚¹è®¾ç½®æ ·å¼ï¼š

* **å›¾æ ‡**
  ï¼šè®¾ç½®
  `Icon`
  ä½œä¸ºç‚¹çš„æ ‡è¯†
* **æ–‡æœ¬**
  ï¼šä½¿ç”¨
  `Text`
  ç»„ä»¶æ˜¾ç¤ºæ—¶é—´ï¼Œå¹¶è®¾ç½®
  `fill`
  ã€
  `backgroundFill`
  ç­‰å±æ€§
* **é¿å…é‡å **
  ï¼šOpenLayers é€šè¿‡
  `declutter`
  è‡ªåŠ¨å¤„ç†æ–‡å­—çš„å¸ƒå±€ï¼Œé˜²æ­¢å¤šä¸ªæ ‡æ³¨æŒ¤åœ¨ä¸€èµ·

#### **5.2 `showTrace` æ–¹æ³•**

* **ç»˜åˆ¶è½¨è¿¹çº¿è·¯**
  ï¼šä½¿ç”¨
  `LineString`
  åˆ›å»ºè½¨è¿¹çº¿
* **æ·»åŠ è½¨è¿¹ç‚¹**
  ï¼šéå†
  `markersData`
  æ•°æ®ï¼Œä¸ºæ¯ä¸ªç‚¹åˆ›å»º
  `Feature`
* **è®¾ç½®æ—¶é—´æ ‡ç­¾**
  ï¼šä½¿ç”¨
  `setTrackStyle`
  ç»™æ¯ä¸ªç‚¹æ·»åŠ æ—¶é—´ä¿¡æ¯

#### **5.3 `initMap` æ–¹æ³•**

* åˆ›å»ºåœ°å›¾å®ä¾‹
* æ·»åŠ 
  `OSM`
  ç“¦ç‰‡åœ°å›¾
* æ·»åŠ 
  `VectorLayer`
  ï¼ˆå¯ç”¨
  `declutter`
  ï¼‰

---

### **6. `declutter` å‰åæ•ˆæœå¯¹æ¯”**

åœ¨æœªå¯ç”¨
`declutter`
æ—¶ï¼Œå¤šä¸ªæ ‡æ³¨å¯èƒ½ä¼šé‡å åœ¨ä¸€èµ·ï¼Œå½±å“é˜…è¯»ï¼š

å¼€å¯
`declutter`
åï¼ŒOpenLayers ä¼šè‡ªåŠ¨ä¼˜åŒ–æ–‡æœ¬æ’å¸ƒï¼Œé˜²æ­¢æ–‡å­—å åŠ ï¼š

---

### **7. ç»“è®º**

æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨ Vue 3 + OpenLayers é¡¹ç›®ä¸­ä½¿ç”¨
`declutter`
é¿å…æ–‡å­—æ ‡ç­¾é‡å ã€‚
`declutter`
æ˜¯ OpenLayers æä¾›çš„å¼ºå¤§åŠŸèƒ½ï¼Œèƒ½å¤Ÿè‡ªåŠ¨ä¼˜åŒ–åœ°å›¾æ ‡æ³¨ï¼Œä½¿å¾—åœ°å›¾æ•°æ®æ›´åŠ æ¸…æ™°å¯è¯»ã€‚å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼

**å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç‚¹èµæ”¶è—æ”¯æŒï¼ğŸš€**
  
ğŸ“¢
**å…³æ³¨æˆ‘ï¼Œè·å–æ›´å¤šå‰ç«¯ & GIS å¼€å‘æŠ€å·§ï¼**