---
arturl_encode: "68747470733a2f2f626c6f67:2e6373646e2e6e65742f77656978696e5f3334313633353533:2f61727469636c652f64657461696c732f3932363035323031"
layout: post
title: "手把手教你架设电影服务器"
date: 2021-08-09 20:21:32 +08:00
description: "　　电影服务器确切的专有名词是：流媒体服务器。流媒体服务器的应用在企业的大型视频会议、影音培训；网络"
keywords: "电影资源服务器"
categories: ['未分类']
tags: ['操作系统']
artid: "92605201"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=92605201
  alt: "手把手教你架设电影服务器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=92605201
featuredImagePreview: https://bing.ee123.net/img/rand?artid=92605201
---

# 手把手教你架设电影服务器

电影服务器确切的专有名词是：流媒体服务器。流媒体服务器的应用在企业的大型视频会议、影音培训；网络的视频点播、广播、实况广播等等企业级的基于网络的媒体传播应用领域有很大的前途和广扩的应用价值。

在当今的流媒体服务器市场有两个“大腕”，一个是RealNetworks公司的
**Helix Server**
，另一个就是微软的
**Windows Media Services**
。RealNetworks的Helix Server优势在于兼容众多操作系统平台，因此在大型的提供电影点播的网站，也许会运行LINUX等操作系统，也就只能用RealNetworks的Helix Server。而微软的媒体服务器则是WINDOWS 2000或WINDOWS2003服务器版操作系统自带，基本是免费，当然它是一个服务器组件，它不会默认安装，得指定安装才行。

本文只介绍基于WINDOWS的流媒体服务器——Windows Media Services，因这是操作系统自带，配置相对方便，也更好用和容易管理，功能也很强大。两个WINDOWS服务器操作系统带的流媒体服务器版本也不同，后一个是最新的，它称为Windows Media Services 9系列（见图1），它最好运行在WINDOWS 2003服务器操作系统下。在本文我们也将在基于WINDOWS 2003操作系统，以WINDOWS MEDIA SERVICES 9系列为对象进行案例的介绍。

|  |
| --- |
|  |

|  |
| --- |
|  |

|  |
| --- |
| 778152_l.jpg |
| 图1 |

Windows Media Services 是微软提供的一种通过 Internet（互联网） 或 Intranet（内联网） 向客户端传输音频和视频内容的平台。客户端可以是使用播放机（例如 Windows Media Player）播放内容的PC计算机或设备（最终用户）；也可以是用于代理、缓存或重新分发内容的另一台运行 Windows Media Services媒体服务器。

Windows Media 服务器可从多种不同的“源”接收内容以进行发布。包括三种方式：

1.预先录制的存储在本地服务器上的内容，也可以从联网的文件服务器上提取；

2.可以使用数字录制设备（摄象机，话筒）记录实况，经编码器（编码软件）处理后发送到 Windows Media 服务器进行广播；

3.Windows Media Services 还可以重新广播从远程另一个Windows Media 服务器上的发布点传输过来的内容。

如果计划传输实况内容，则服务器将连接到支持媒体格式的编码软件（如 Windows Media 编码器）。你可以使用 Windows Media 编码器 9 系列（下载地：
[[url]http://www.microsoft.com/downloads/details.aspx?FamilyID=5691ba02-e496-465a-bba9-b2f1182cdf24&displaylang=zh-cn&Hash=C39WQB8[/url]](http://www.microsoft.com/downloads/details.aspx?Familyid=)
），Microsoft Producer for Microsoft Office PowerPoint 2003（下载地：
[[url]http://www.microsoft.com/downloads/details.aspx?FamilyID=1b3c76d5-fc75-4f99-94bc-784919468e73&displaylang=zh-cn[/url]](http://www.microsoft.com/downloads/details.aspx?Familyid=)
），Windows Movie Maker等，这些软件可以从微软公司的网站下载。

在介绍Windows media server的架设之前，让我们先来了解什么是“流媒体”（Stream Media）；什么是“单播”和“多播”；什么是“点播发布点”和“广播发布点”等一些专业技术和微软的专有术语。

**流媒体**

流媒体顾名思义，可以认为是流动的媒体，以连续流（数据包）的形式通过网络传递数字媒体。指的是影音等媒体文件被分解编码成数字信号象流水一样流向目的地，并在到达目的地时由播放器还原为图像或声音。这种方法在接收的同时呈现内容，从而可以连续地播放数据，而不必等待下载整个文件，流式处理的文件播放完后，它不会存储在计算机中。

**发布点**

发布点是Windows Media服务器使用来将客户端对媒体内容的访问请求转换为放置该内容的服务器上的物理路径（呈现给播放器的是一个网址，类似于网站的根目录）。发布点是网管人员用来标志某种类型的媒体服务的点，通过媒体服务器的控制界面，可以看到这些点的工作状态并随时管理。在客户端成功连接到发布点之后，Windows Media 服务器管理该连接并传输该内容，客户端通过连接到发布点而能访问来自服务器的内容流。有两种类型的发布点：“点播发布点”和“广播发布点”。一个 Windows Media 服务器可以配置为运行多个发布点，可以广播和点播同时存在。点播和广播有一些重要的区别。

（1）使用点播发布点

如果你希望由客户端来控制播放，可以操作播放器的播放、暂停、快进等功能，则使用点播发布点。这种类型的发布点最常用于以文件、播放列表或目录为源的内容。当客户端连接到该发布点时，将从头开始播放内容，最终用户可以使用播放机上的播放控件来暂停、快进、倒回、跳过播放列表中的项目或停止。只有当客户端已连接且可以接收流时，点播发布点才可以传输内容。从点播发布点传输的内容总是以单播流的形式传递。这种方式适用于媒体的点播服务，这也是电影服务器要采用的方式，也是本案要采用和重点介绍的方案。

（2）使用广播发布点

如果你希望在服务器上控制播放和传输内容，则使用广播发布点。这象是电台或电视台播放节目的方式，节目由服务器持续播放，你错过了就只能错过。这使用户有看电视节目的类似体验。它最常用于从编码器、远程服务器或其他广播发布点传递实况流。当客户端连接到广播发布点时，客户端就加入到已在传递的广播中。客户端可以启动和停止流，但不会停止服务器的广播，也不能暂停、快进、倒回或跳过。广播发布点也可以用来传输文件和文件播放列表，但是客户端播放机不能像控制点播那样控制播放。给用户的感觉象是在接收实况编码流广播，这样其实还不如采用点播发布点方式。

广播发布点在服务器端启动时立即传输，并一直继续，直到它被管理员停止或内容传输完。启动可以是由管理员来人工启动；也可以在连接第一个客户端时自动启动。这种方式适用于较适合于企业的视频会议和比如校园网中足球赛的实况网络直播等。

**单播和多播是流的传递方式**

（1）单播流是服务器和客户端之间建立的“一对一”连接，每个客户端都向服务器请求接收一个不同的流且只有那些请求流的客户端才接收流。以单播流方式传递内容时既可以用于建点播发布点又可以用于建广播发布点。单播流式传输也是 Windows Media 服务器用来传递内容的默认方法，默认处于启用状态。 实际上也是最常用的方式。

下图显示通过使用点播发布点以单播流方式传递内容的示例。（图2）

|  |
| --- |
| 778180_l.jpg |
| 图2 |

正如上图所示，在名为 Server1 的 Windows Media 服务器上有一个名为 TV1 的点播发布点。内容可在本地服务器或网络上的文件服务器上安置。您可以将特定“文件”、“目录”、“播放列表文件”作为来源。在上例中，发布点将存储在本地 Server1 上的播放列表文件作为来源。创建一个为用户提供指向内容的 URL。因为内容是以单播流方式传递的，所以每个播放机都有一个到 Server1 的唯一连接。

由于本案的电影服务器属于点播发布点，所以点播发布点在对Windows Media 服务器的设置中就没有单播和多播的选择，只会是系统默认的单播方式，服务器系统不用作另外的设置。

（2）多播流是指 Windows Media 服务器和接收流的客户端之间的一对多关系。利用多播流，服务器向网络上的一个D类多播 IP 地址传输流，客户端通过向该 IP 地址订阅来接收流。所有的客户端都接收相同的流。无论有多少个客户端接收流，服务器只向多播地址传输一个流。

使用多播流会节省网络带宽，对于带宽较低的广域网络可能非常有用，这种方式需要路由器的参与，非常适合于跨互联网的大型视频会议。以多播流方式传递内容时只能用建广播发布点。另外路由器必须已启用多播功能。

在网吧应用中，除了做电影、音乐的点播服务，也许我们也会有广播服务的需求，比如：需要在网络内实况转播电视足球赛。在建广播发布点时，会遇到服务器系统给出的以“单播”或者“多播”传递流的选择。对于局域网环境来说，带宽足够高，同时也没有专业路由器进行“多播”，所以应选择用“单播”来传递流。

在进行Windows Media Services服务器的设置之前，由于它不是默认安装，我们需要进行组件的安装。进入“控制面板”，点击“添加或删除程序”，点击“添加/删除Windows组件”，在“Windows组件向导”中选中“Windows Media Services”，插入WINDOWS2003安装盘，然后点击“下一步”进行安装。（图3）

|  |
| --- |
| 778198_l.jpg |
| 图3 点击看大图 |

在安装完Windows Media Services服务器以后，我们就可以开始设置媒体服务器了。进入Windows2003的“开始”—“程序”—“管理工具”—点击“Windows Media Services”就可以以打开媒体服务器的管理界面。

设置 Windows Media 服务器的基本步骤包括：添加和配置“发布点”。Windows Media 服务器可以配置两种类型的发布点：广播发布点和点播发布点。如果要传输编码器的实况内容，则选择广播发布点。如果打算传输媒体文件（扩展名为：.asf、.wma、.wmv、.mp3 和 .wsx）且希望允许用户控制内容的播放（例如，暂停、倒回或快进对播放器控制），则最好选择点播发布点，本案也就选择它。

本文接下来的小节将只集中介绍要实现网友所要求的建立电影服务器的所要进行的配置。

对于Windows Media 服务器的各种术语不是很熟悉的初级用户，Windows Media 服务器给我们提供了方便添加发布点的向导。即使是这样，对于初次使用微软的媒体服务器的人来说，仍然会对它的每一步的术语感到茫然。但是按照本文上面介绍的重要术语和对这个方案的实例介绍，我相信读者们应能弄出一个电影服务器来。

打开Windows Media 服务器以后，现在我们要使用“添加发布点向导”创建一个名字为“movie”的“点播发布点”。 操作步骤如下：

1． 在Windows Media 服务器主界面的左边栏的点击服务器图标，点击“发布点”，点击鼠标右键，出现的对话栏时，点击“添加发布点（向导）”，点击“下一步”。（图4、5）

|  |
| --- |
| 778214_l.jpg |
| 图4 点击看大图 |

|  |
| --- |
| 778223_l.jpg |
| 图5 点击看大图 |

2．添加发布点的名称，填入我们要的电影服务的名称“movie”。点击“下一步”。（图6）

|  |
| --- |
| 778224_l.jpg |
| 图6 点击看大图 |

3．出现了“内容类型”选择对话框，要我们选择将要发布的内容的类型。由于我们要发布的是存在本地服务器硬盘上的电影文件（当然是上文所提到的文件格式，若还不是，就需要各种媒体转换程序来进行转换了，比如：Windows media encoder 9），所以选择最后一个选项“目录中的文件”。点击“下一步”。（图7）

|  |
| --- |
| 778230_l.jpg |
| 图7 点击看大图  4．出现了“发布点类型”选择对话框。要选择“点播发布点”方案，选中它。点击“下一步”。（图8）  |  | | --- | | 778237_l.jpg | | 图8 点击看大图 |  5．出现了“目录位置”对话框，在这里要求我们给服务器指定媒体文件所在的目录。点击“浏览”，出现的对话框中在“数据源”处点击目录所在的硬盘符，在“位置”处点击所在的目录。然后，点击右边的“选择目录”就回到原来的对话框。这时我们还可以进一步点中“允许使用通配符”的复选钮。点击“下一步”。（图9）  |  | | --- | | 778249_l.jpg | | 图9 点击看大图 |  6．出现了“内容播放”对话框，这两个复选钮可随意选择。点击“下一步”。（图10）  |  | | --- | | 778251_l.jpg | | 图10 点击看大图  7．出现了“单播日志记录”对话框，这个复选钮也是随意选择。点击“下一步”。（图11）  |  | | --- | | 778259_l.jpg | | 图11 点击看大图 |  8．出现一个列出上述操作摘要的对话框。点击“下一步”。  9．到此基本完成添加发布点的工作。但是向导还提示我们可以进行进一步的创建发布点的“公告文件”，该文件为播放机提供在连接到 Windows Media 服务器接收内容时需要的信息。但是对于我们要建的电影服务器，要实现的是点播的功能，对目录中的文件进行一个个的精确访问，而公告文件是对整个目录的公告，显然不符合我们的要求。所以在这步，我们要点消“完成向导后”这个复选钮，迫使向导就此结束，不再进行后续操作。（图12）  |  | | --- | | 778261_l.jpg | | 图12 点击看大图 |  至此，我们创建的“movie”这个电影服务器的发布点已经完成。Movie发布点也出现在主界面的左边栏。接下来的配置发布点，相对于我们这个应用来说，其实很简单，只需点击Movie右边栏中的 “属性”选项卡，点击“类别”中的“常规”，再启用常规中的三个属性即可。（图13）  |  | | --- | | 778262_l.jpg | | 图13 点击看大图 | 接下来我们应测试一下这个发布点（电影服务器）是否已能正常工作。有两种测试方式：一是点击“源”这个选项卡，然后点击底下的那个播放器的图标，就可以测试流了。（图14、15）但是，在这里要提的是，你得先确保服务器已接入网络，要不然会弹出一个奇怪的出错，提示说：“windows media player无法播放该文件，请连接到Internet”，这个出错提示，对于初学者会来说会感到一脸茫然，感觉每一步都没有配错呀，怎么还会出错，很受打击。（图16）老实说，小酷对微软的这个出错提示很是有意见，不知者会不停地建发布点，没完没了，最后还是测试不通过，小酷曾深陷其中，因此有感而发。第二测试流的方式，当然是在网络上的一台客户机上访问这个发布点的URL地址了，如：[url]mms://LANSHAN/movie/[/url]。注意，LANSHAN是笔者这台服务器的名称，movie就是发布点名称了。    |  | | --- | | 778270_l.jpg | | 图14 点击看大图 |  |  | | --- | | 778273_l.jpg | | 图15 点击看大图 |  |  | | --- | | 778274_l.jpg | | 图16 点击看大图 |   在设置 Windows Media 服务器和要传输的内容之后，需要让用户知道该电影内容如何访问，若是单单给用户如[url]mms://LANSHAN/movie/[/url]这个链接，播放器将会随机打开播放目录中了任意一个电影，这样的结果并不符合我们点播电影的要求。所以，我们还是建议用精确的URL地址 来访问电影内容，也就是上面的地址最后面要加电影文件的文件名，如：[url]mms://LANSHAN/movie/[/url]大海啸DV拍摄合集1.wmv ，把这样的链接做成电影网页（也许可以从互联网找到第三方的电影网站源码，这样建网站更方便），让观众能看到电影片名的列表，点击打开这个精确的URL地址所对应的电影进行播放，真正做到点播操作。  **小结：** 电影服务器在大型网吧中的应用显得很重要，现在网吧都提供给网友观看电影的服务，但若在文件服务器开个电影文件的共享文件夹，让用户直接点击打开，这样会很耗费这个文件服务器的系统资源，严重的情况会使服务器当机。因此考虑用随手可得的微软的Windows Media 服务器来承担媒体的发布工作，就可以避免这种情况的发生。Windows Media 服务器当然也可以用来发布MP3音乐，这也是网吧中网友所喜爱的 | |

[原文链接点此处！](http://blog.chinaitlab.com/user1/179701/archives/2006/65582.html)

转载于:https://blog.51cto.com/wanyij/8626