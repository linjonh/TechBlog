---
layout: post
title: "Vue3安全新防线RSA加密密码的实现与优化指南"
date: 2025-03-07 08:55:03 +0800
description: "在数据安全日益受到重视的今天，前端加密技术已成为保护用户敏感信息（如密码、身份证号）的\"最后防线\"。本文将系统解析如何在Vue3项目中通过扩展。（PKCS#1 v1.5填充模式），超过限制需分段处理。通过计算字符编码长度动态截取字符串，确保每段加密后总长度不超过限制。库实现RSA长文本加密，并结合TypeScript构建类型安全的加密工具类，同时提供完整的代码实现与实战建议。"
keywords: "Vue3安全新防线：RSA加密密码的实现与优化指南"
categories: ['未分类']
tags: ['安全', '前端', 'Vue']
artid: "146085673"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146085673
    alt: "Vue3安全新防线RSA加密密码的实现与优化指南"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146085673
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146085673
cover: https://bing.ee123.net/img/rand?artid=146085673
image: https://bing.ee123.net/img/rand?artid=146085673
img: https://bing.ee123.net/img/rand?artid=146085673
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Vue3安全新防线：RSA加密密码的实现与优化指南
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_4">
     </a>
     引言
    </h3>
    <p>
     在数据安全日益受到重视的今天，前端加密技术已成为保护用户敏感信息（如密码、身份证号）的"最后防线"。本文将系统解析如何在Vue3项目中通过扩展
     <strong>
      JSEncrypt
     </strong>
     库实现RSA长文本加密，并结合TypeScript构建类型安全的加密工具类，同时提供完整的代码实现与实战建议。
    </p>
    <hr/>
    <h3>
     <a id="_9">
     </a>
     一、环境准备与库引入
    </h3>
    <h4>
     <a id="1__10">
     </a>
     1. 安装依赖
    </h4>
    <pre><code class="prism language-bash"><span class="token function">npm</span> <span class="token function">install</span> jsencrypt <span class="token parameter variable">--save</span>
<span class="token function">npm</span> <span class="token function">install</span> typescript @types/jsencrypt --save-dev
</code></pre>
    <h4>
     <a id="2__15">
     </a>
     2. 全局引入（推荐）
    </h4>
    <pre><code class="prism language-typescript"><span class="token comment">// main.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> JSEncrypt <span class="token keyword">from</span> <span class="token string">'jsencrypt'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$encrypt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSEncrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_29">
     </a>
     二、核心加密方法解析
    </h3>
    <h4>
     <a id="1__30">
     </a>
     1. 分段加密原理
    </h4>
    <p>
     RSA加密存在
     <strong>
      117字节长度限制
     </strong>
     （PKCS#1 v1.5填充模式），超过限制需分段处理。通过计算字符编码长度动态截取字符串，确保每段加密后总长度不超过限制。
    </p>
    <pre><code class="prism language-typescript"><span class="token comment">// 分段加密实现</span>
JSEncrypt<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">encryptLong</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> ct <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> byteNo <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token comment">// 计算分段点</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> c <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token number">0x010000</span><span class="token punctuation">)</span> byteNo <span class="token operator">+=</span> <span class="token number">4</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token number">0x000800</span><span class="token punctuation">)</span> byteNo <span class="token operator">+=</span> <span class="token number">3</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token number">0x000080</span><span class="token punctuation">)</span> byteNo <span class="token operator">+=</span> <span class="token number">2</span>
    <span class="token keyword">else</span> byteNo <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>byteNo <span class="token operator">%</span> <span class="token number">117</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">114</span> <span class="token operator">||</span> byteNo <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      bytes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      byteNo <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 分段加密</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bytes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> bytes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">const</span> end <span class="token operator">=</span> bytes<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
    ct <span class="token operator">+=</span> key<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 处理最后一段</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">[</span>bytes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> str<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    ct <span class="token operator">+=</span> key<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>bytes<span class="token punctuation">[</span>bytes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">bytesToHex</span><span class="token punctuation">(</span>ct<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_73">
     </a>
     三、工具类封装方案
    </h3>
    <h4>
     <a id="1__74">
     </a>
     1. 类型安全工具类
    </h4>
    <pre><code class="prism language-typescript"><span class="token comment">// src/utils/rsa.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> JSEncrypt <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'jsencrypt'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RSAUtil</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">private</span> encryptor<span class="token operator">:</span> JSEncrypt

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>encryptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSEncrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 加密密码（自动处理分段）
   * @param password 明文密码
   * @param publicKey 公钥
   */</span>
  <span class="token function">encrypt</span><span class="token punctuation">(</span>password<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> publicKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>encryptor<span class="token punctuation">.</span><span class="token function">setPublicKey</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">)</span>
    <span class="token keyword">const</span> encrypted <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>encryptor<span class="token punctuation">.</span><span class="token function">encryptLong</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">arrayBufferToBase64</span><span class="token punctuation">(</span>encrypted<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 解密密码（自动处理分段）
   * @param encrypted 密文
   * @param privateKey 私钥
   */</span>
  <span class="token function">decrypt</span><span class="token punctuation">(</span>encrypted<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> privateKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>encryptor<span class="token punctuation">.</span><span class="token function">setPrivateKey</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span>
    <span class="token keyword">const</span> decrypted <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>encryptor<span class="token punctuation">.</span><span class="token function">decryptLong</span><span class="token punctuation">(</span><span class="token function">base64ToArrayBuffer</span><span class="token punctuation">(</span>encrypted<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> decrypted<span class="token operator">?.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_112">
     </a>
     四、实战使用示例
    </h3>
    <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;input v-model="password" placeholder="输入密码" type="password"&gt;
    &lt;button @click="handleEncrypt"&gt;加密&lt;/button&gt;
    &lt;p&gt;加密结果：{<!-- -->{ encryptedPassword }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue'
import RSAUtil from '@/utils/rsa'

const password = ref('')
const encryptedPassword = ref('')
const rsaUtil = new RSAUtil()

const handleEncrypt = () =&gt; {
  const publicKey = `-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC8kGa1pSjbSYZVebtTRBLxBz5H
4i2p/llLCrEeQhta5kaQu/RnvuER4W8oDH3+3iuIYW4VQAzyqFpwuzjkDI+17t5t
0tyazyZ8JXw+KgXTxldMPEL95+qVhgXvwtihXC1c5oGbRlEDvDF6Sa53rcFVsYJ4
ehde/zUxo6UvS7UrBQIDAQAB-----END PUBLIC KEY-----`
  encryptedPassword.value = rsaUtil.encrypt(password.value, publicKey)
}
&lt;/script&gt;
</code></pre>
    <hr/>
    <h3>
     <a id="_143">
     </a>
     五、性能优化建议
    </h3>
    <ol>
     <li>
      <strong>
       缓存密钥实例
      </strong>
      ：避免重复创建JSEncrypt对象，建议使用单例模式
     </li>
     <li>
      <strong>
       批量加密处理
      </strong>
      ：合并多次加密请求为单次链式调用
     </li>
     <li>
      <strong>
       Web Worker加速
      </strong>
      ：将加密操作移出主线程处理
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="_150">
     </a>
     六、注意事项
    </h3>
    <ol>
     <li>
      <strong>
       密钥管理
      </strong>
      ：私钥必须严格保密，公钥可前端存储但需定期轮换
     </li>
     <li>
      <strong>
       编码规范
      </strong>
      ：加密前统一使用UTF-8编码，解密后处理Base64转码
     </li>
     <li>
      <strong>
       错误处理
      </strong>
      ：添加try-catch捕获异常，避免页面崩溃
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f48746d6c5f7675654a732f:61727469636c652f64657461696c732f313436303835363733" class_="artid" style="display:none">
 </p>
</div>


