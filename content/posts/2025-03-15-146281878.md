---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34303137383038322f:61727469636c652f64657461696c732f313436323831383738"
layout: post
title: "ç¬¬5ç« -æ„é€ ææ„æ‹·è´è¯­ä¹‰å­¦3å¯¹è±¡å¤åˆ¶è¯­æ„å­¦"
date: 2025-03-15 17:10:11 +0800
description: "å¦‚æœä¸å¯¹class pointæä¾›copy assignment operatorï¼Œå…‰æ˜¯ä¾èµ–é»˜è®¤çš„memberwise copyï¼Œç¼–è¯‘å™¨ä¸ä¼šäº§ç”Ÿå‡ºä¸€ä¸ªå®ä¾‹ï¼Œå› ä¸ºæ­¤classå·²ç»æœ‰äº†bitwise copyè¯­æ„ï¼Œæ‰€ä»¥implicit copy assignment operatorè¢«è§†ä¸ºæ¯«æ— ç”¨å¤„ï¼Œæ ¹æœ¬ä¸ä¼šåˆæˆå‡ºæ¥ã€‚å½“ä¸€ä¸ªclasså£°æ˜äº†ä»»ä½•virtual functionï¼ˆä¸€å®šä¸è¦æ‹·è´å³ç«¯class objectçš„vptråœ°å€ï¼Œå› ä¸ºä»–å¯èƒ½æ˜¯ä¸€ä¸ªderived class objectï¼‰æ—¶ã€‚"
keywords: "ç¬¬5ç«  æ„é€ ã€ææ„ã€æ‹·è´è¯­ä¹‰å­¦3ï¼šå¯¹è±¡å¤åˆ¶è¯­æ„å­¦"
categories: ['æ·±å…¥æ¢ç´¢Cå¯¹è±¡æ¨¡å‹']
tags: ['å¼€å‘è¯­è¨€', 'Java']
artid: "146281878"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146281878
    alt: "ç¬¬5ç« -æ„é€ ææ„æ‹·è´è¯­ä¹‰å­¦3å¯¹è±¡å¤åˆ¶è¯­æ„å­¦"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146281878
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146281878
cover: https://bing.ee123.net/img/rand?artid=146281878
image: https://bing.ee123.net/img/rand?artid=146281878
img: https://bing.ee123.net/img/rand?artid=146281878
---

# ç¬¬5ç«  æ„é€ ã€ææ„ã€æ‹·è´è¯­ä¹‰å­¦3ï¼šå¯¹è±¡å¤åˆ¶è¯­æ„å­¦

##### **ğŸ‰Â é‡ç‚¹ï¼šç¼–è¯‘å™¨ç”Ÿæˆæ„é€ å‡½æ•°çš„å››ç§æƒ…å†µï¼Œå¦‚ä½•é¿å…copy constructoråœ¨å­ç±»å¤šä¸ªè°ƒç”¨**

å½“æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªclass objectç»™å¦ä¸€ä¸ªclass objectæ—¶,é€šå¸¸æœ‰ä¸‰ç§é€‰æ‹©ï¼š

1. ä»€ä¹ˆéƒ½ä¸åšï¼Œå®æ–½é»˜è®¤çš„è¡Œä¸ºã€‚
2. æä¾›ä¸€ä¸ªexplicit copy assignment operatorã€‚
3. æ˜¾å¼åœ°æ‹’ç»æŒ‡å®šä¸€ä¸ªclass objectç»™å¦ä¸€ä¸ªclass object,å£°æ˜ä¸ºprivate(å¹¶ä¸”æ­¤æ—¶ä¸åŒå‡½æ•°çš„å®šä¹‰ï¼Œä¸€æ—¦æŸä¸ªmember functionæˆ–friendä¼å›¾å½±å“ä¸€ä»½æ‹·è´ï¼Œç¨‹åºé“¾æ¥æ—¶å°±ä¼šå¤±è´¥)ã€‚

åˆ©ç”¨Point classæ¥å¸®åŠ©è®¨è®ºï¼š

```cpp
class Point {
public:
    Point(float x = 0.0, float y = 0.0);
private:
    float _x, _y;
};
```

å¦‚æœä¸å¯¹class pointæä¾›copy assignment operatorï¼Œå…‰æ˜¯ä¾èµ–é»˜è®¤çš„memberwise copyï¼Œç¼–è¯‘å™¨ä¸ä¼šäº§ç”Ÿå‡ºä¸€ä¸ªå®ä¾‹ï¼Œå› ä¸ºæ­¤classå·²ç»æœ‰äº†bitwise copyè¯­æ„ï¼Œæ‰€ä»¥implicit copy assignment operatorè¢«è§†ä¸ºæ¯«æ— ç”¨å¤„ï¼Œæ ¹æœ¬ä¸ä¼šåˆæˆå‡ºæ¥ã€‚

**ä¸€ä¸ªclasså¯¹äºé»˜è®¤çš„copy assignment operatorï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œä¸ä¼šè¡¨ç°å‡ºbitwise copyè¯­æ„**

* å½“classå†…å«ä¸€ä¸ªclass objectï¼Œè€Œå…¶classæœ‰ä¸ªcopy assignment operatoræ—¶
* å½“ä¸€ä¸ªclassçš„base classæœ‰ä¸ªcopy assignment operatoræ˜¯
* å½“ä¸€ä¸ªclasså£°æ˜äº†ä»»ä½•virtual functionï¼ˆä¸€å®šä¸è¦æ‹·è´å³ç«¯class objectçš„vptråœ°å€ï¼Œå› ä¸ºä»–å¯èƒ½æ˜¯ä¸€ä¸ªderived class objectï¼‰æ—¶
* å½“ä¸€ä¸ªclassç»§æ‰¿è‡ªä¸€ä¸ªvirtual base classï¼ˆä¸è®ºbase classæœ‰æ²¡æœ‰copy operatorï¼‰æ—¶

å¦‚æœæ²¡æœ‰ä¸ºPoint3dè®¾å®šä¸€ä¸ªcopy assignment operatorï¼Œç¼–è¯‘å™¨å°±ä¼šä¸ºå…¶åˆæˆä¸€ä¸ªï¼š

```cpp
inline Point3d&
Point3d::operator=(point3d* this, const Point3d& p) {
    this->Point::operator=(p);  //base class operator=
    _z = p._z;  //memberwise copy
    return *this;
}
```

copy assignment operato
rç¼ºä¹ä¸€ä¸ªmember assignment list,ç±»ä¼¼äºæˆå‘˜åˆå€¼åˆ—
ï¼Œæ¯”å¦‚

```cpp
inline Point3d&
Point3d::operator=(const Point3d& p)
    : Point(p), _z(p._z) { }    //è¿™æ˜¯ä¸æ”¯æŒçš„ï¼Œåªèƒ½å†™æˆä¸Šé¢åˆæˆçš„å½¢å¼
```

ç¼ºå°‘ member assignment listï¼Œç¼–è¯‘å™¨ä¸€èˆ¬å°±æ²¡æœ‰åŠæ³•å‹æŠ‘ä¸Šå±‚ base class çš„ copy operator è¢«è°ƒç”¨ã€‚è¿˜æ˜¯è€ƒè™‘ä¹‹å‰çš„ç»§æ‰¿ä½“ç³»ï¼Œç±» Vertex è™šæ‹Ÿè‡ª Point ,å¹¶ä¸”ä» Point3d å’Œ Vertex æ´¾ç”Ÿå‡ºVertex3dã€‚åˆ™copy operator å¦‚ä¸‹ï¼š

```cpp
inline Vertex&
Vertex operator=(const Vertex& v) {
    this->Point::operator=(v);
    _next = v._next;
    return *this;
}
inline Vertex3d&
Vertex operator=(const Vertex3d& v) {
    this->Point::operator=(v);
    this->Point3d::operator=(v);
    this->Vertex::operator=(v);
    return *this;
}
```

ç¼–è¯‘å™¨å¦‚ä½•åœ¨ Point3d å’Œ Vertex çš„ copy assignment operator å‹åˆ¶ Point çš„ copy assignment operatorå‘¢ï¼Ÿconstructor ä¸­çš„è§£å†³åŠæ³•æ˜¯æ·»åŠ ä¸€ä¸ªé¢å¤–çš„å‚æ•° \_\_most\_derivedã€‚è§£å†³åŠæ³•æ˜¯ï¼šä¸ºcopy assignment operator æä¾›åˆ†å‘å‡½æ•°(split functions)ä»¥æ”¯æŒè¿™ä¸ª class ç§°ä¸º most-derived classæˆ–è€…æˆä¸ºä¸­é—´çš„ base classã€‚

å°½å¯èƒ½ä¸è¦å…è®¸ä¸€ä¸ª virtual base class çš„æ‹·è´æ“ä½œï¼Œæ›´è¿›ä¸€æ­¥ï¼Œä¸è¦åœ¨ä»»ä½• virtual base class ä¸­å£°æ˜æ•°æ®