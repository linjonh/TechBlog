---
layout: post
title: "centos-linux安装mysql8-重置密码-远程连接"
date: 2025-03-11 11:11:01 +0800
description: "从 MySQL 官方网站下载并安装 Yum 仓库配置文件。"
keywords: "centos linux安装mysql8 重置密码 远程连接"
categories: ['未分类']
tags: ['Linux', 'Centos']
artid: "146172899"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146172899
    alt: "centos-linux安装mysql8-重置密码-远程连接"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146172899
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146172899
cover: https://bing.ee123.net/img/rand?artid=146172899
image: https://bing.ee123.net/img/rand?artid=146172899
img: https://bing.ee123.net/img/rand?artid=146172899
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     centos linux安装mysql8 重置密码 远程连接
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1__MySQL_Yum__0">
     </a>
     1. 下载并安装 MySQL Yum 仓库
    </h3>
    <p>
     从 MySQL 官方网站下载并安装 Yum 仓库配置文件。
    </p>
    <pre><code class="prism language-java"># 下载<span class="token class-name">MySQL</span> <span class="token number">8.0</span>的<span class="token class-name">Yum</span>仓库包
wget https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>dev<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>com<span class="token operator">/</span>get<span class="token operator">/</span>mysql80<span class="token operator">-</span>community<span class="token operator">-</span>release<span class="token operator">-</span>el7<span class="token operator">-</span><span class="token number">5.</span>noarch<span class="token punctuation">.</span>rpm
# 安装<span class="token class-name">Yum</span>仓库包
sudo rpm <span class="token operator">-</span>ivh mysql80<span class="token operator">-</span>community<span class="token operator">-</span>release<span class="token operator">-</span>el7<span class="token operator">-</span><span class="token number">5.</span>noarch<span class="token punctuation">.</span>rpm
</code></pre>
    <h3>
     <a id="2__MySQL_80__9">
     </a>
     2. 启用 MySQL 8.0 仓库
    </h3>
    <p>
     Yum 仓库可能启用了其他版本的 MySQL，你需要确保启用的是 MySQL 8.0 仓库。
    </p>
    <pre><code class="prism language-java"># 查看可用的<span class="token class-name">MySQL</span>仓库列表
yum repolist all <span class="token operator">|</span> grep mysql
# 禁用<span class="token class-name">MySQL</span> <span class="token number">5.7</span>仓库（如果已启用）
sudo yum<span class="token operator">-</span>config<span class="token operator">-</span>manager <span class="token operator">--</span>disable mysql57<span class="token operator">-</span>community
# 启用<span class="token class-name">MySQL</span> <span class="token number">8.0</span>仓库
sudo yum<span class="token operator">-</span>config<span class="token operator">-</span>manager <span class="token operator">--</span>enable mysql80<span class="token operator">-</span>community
</code></pre>
    <h3>
     <a id="3__MySQL_Server_20">
     </a>
     3. 安装 MySQL Server
    </h3>
    <pre><code class="prism language-java">sudo yum install mysql<span class="token operator">-</span>server
</code></pre>
    <h3>
     <a id="4__MySQL__25">
     </a>
     4. 启动 MySQL 服务
    </h3>
    <pre><code class="prism language-java">sudo systemctl start mysqld
</code></pre>
    <h3>
     <a id="5__MySQL__30">
     </a>
     5. 检查 MySQL 服务状态
    </h3>
    <pre><code class="prism language-java">sudo systemctl status mysqld
</code></pre>
    <p>
     如果服务正在运行，你会看到类似如下输出：
     <br/>
     ● mysqld.service - MySQL Server
     <br/>
     Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)
     <br/>
     Active: active (running) since Tue 2025-03-11 14:20:30 CST; 1min 30s ago
     <br/>
     …
    </p>
    <h3>
     <a id="6__MySQL__40">
     </a>
     6. 设置 MySQL 开机自启
    </h3>
    <pre><code class="prism language-java">sudo systemctl enable mysqld
</code></pre>
    <h3>
     <a id="7__44">
     </a>
     7. 获取初始临时密码
    </h3>
    <p>
     在首次启动 MySQL 时，系统会生成一个临时密码，你需要使用该密码登录 MySQL 并进行后续配置。
    </p>
    <pre><code class="prism language-java">sudo grep 'temporary password' <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>log
</code></pre>
    <p>
     输出类似如下内容：
     <br/>
     2025-03-11T06:20:30.123456Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: AbcDef123!
     <br/>
     其中 AbcDef123! 就是你的初始临时密码。
    </p>
    <p>
     <mark>
      如果提示目录不存在之类的，点击跳转查看
     </mark>
     <br/>
     <a href="#target" rel="nofollow">
      点击跳转至目标位置
     </a>
    </p>
    <h3>
     <a id="8__MySQL_a_idupdatea_55">
     </a>
     8. 登录 MySQL 并修改密码
     <a id="update">
     </a>
    </h3>
    <p>
     使用初始临时密码登录 MySQL。
    </p>
    <pre><code class="prism language-java">mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
</code></pre>
    <p>
     输入临时密码后，你会进入 MySQL 命令行界面。接下来，你需要修改 root 用户的密码
    </p>
    <pre><code class="prism language-java"><span class="token operator">--</span> 修改root用户密码，这里将密码设置为<span class="token class-name">YourNewPassword</span>，你可以根据需要修改
<span class="token constant">ALTER</span> <span class="token constant">USER</span> <span class="token char">'root'</span>@'localhost' <span class="token constant">IDENTIFIED</span> <span class="token constant">BY</span> '<span class="token class-name">YourNewPassword</span>'<span class="token punctuation">;</span>
<span class="token operator">--</span> 刷新权限
<span class="token class-name">FLUSH</span> <span class="token constant">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="mysql_71">
     </a>
     开放mysql远程链接
    </h2>
    <h3>
     <a id="1__MySQL_72">
     </a>
     1. 登录 MySQL
    </h3>
    <pre><code class="prism language-java">mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p
</code></pre>
    <p>
     输入密码后回车，即可进入 MySQL 命令行界面。
    </p>
    <h3>
     <a id="2__79">
     </a>
     2. 创建允许远程访问的用户（可选）
    </h3>
    <p>
     如果你想使用特定的用户进行远程连接，可以创建一个新用户并赋予相应的权限。以下是创建用户并授予所有数据库权限的示例：
    </p>
    <pre><code class="prism language-java"><span class="token operator">--</span> 创建一个名为 'remote_user' 的用户，密码为 'your_password'，允许从任何主机连接
<span class="token constant">CREATE</span> <span class="token constant">USER</span> 'remote_user<span class="token char">'@'</span><span class="token operator">%</span>' <span class="token constant">IDENTIFIED</span> <span class="token constant">BY</span> 'your_password'<span class="token punctuation">;</span>
<span class="token operator">--</span> 授予该用户对所有数据库的所有权限
<span class="token constant">GRANT</span> <span class="token constant">ALL</span> <span class="token constant">PRIVILEGES</span> <span class="token constant">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span>* <span class="token constant">TO</span> 'remote_user<span class="token char">'@'</span><span class="token operator">%</span>' <span class="token constant">WITH</span> <span class="token class-name">GRANT</span> <span class="token constant">OPTION</span><span class="token punctuation">;</span>
<span class="token operator">--</span> 刷新权限使更改生效
<span class="token class-name">FLUSH</span> <span class="token constant">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     其中，‘%’ 表示允许从任何主机连接。如果你想限制连接的主机，可以将 ‘%’ 替换为具体的 IP 地址或域名。
    </p>
    <h3>
     <a id="3__MySQL__92">
     </a>
     3. 修改 MySQL 配置文件
    </h3>
    <p>
     编辑 MySQL 的配置文件 my.cnf 或 my.ini，通常位于 /etc 目录下。
    </p>
    <pre><code class="prism language-java">sudo vi <span class="token operator">/</span>etc<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf
</code></pre>
    <p>
     找到 bind-address 这一行（如果打开没有bind相关 可以自己插入下面代码），将其修改为允许远程连接的 IP 地址。如果你想允许所有 IP 地址连接，可以将其注释掉或设置为 0.0.0.0：
    </p>
    <pre><code class="prism language-java">#bind<span class="token operator">-</span>address <span class="token operator">=</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
bind<span class="token operator">-</span>address <span class="token operator">=</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span>
</code></pre>
    <p>
     !qw保存退出
    </p>
    <h3>
     <a id="4__MySQL__105">
     </a>
     4. 重启 MySQL 服务
    </h3>
    <pre><code class="prism language-java">sudo systemctl restart mysqld
</code></pre>
    <h3>
     <a id="5__110">
     </a>
     5. 配置防火墙
    </h3>
    <p>
     如果你使用的是 firewalld，可以使用以下命令开放端口：
    </p>
    <pre><code class="prism language-java">sudo firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>permanent <span class="token operator">--</span>add<span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token operator">/</span>tcp
sudo firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>reload
</code></pre>
    <p>
     如果你使用的是 iptables，可以使用以下命令开放端口：
    </p>
    <pre><code class="prism language-java">sudo iptables <span class="token operator">-</span><span class="token class-name">A</span> <span class="token constant">INPUT</span> <span class="token operator">-</span>p tcp <span class="token operator">--</span>dport <span class="token number">3306</span> <span class="token operator">-</span>j <span class="token constant">ACCEPT</span>
sudo service iptables save
</code></pre>
    <h3>
     <a id="6__123">
     </a>
     6. 验证远程连接
    </h3>
    <p>
     使用navicat可以测试连接
    </p>
    <h2>
     <a id="a_idtargeta_129">
     </a>
     跳过权限验证重置密码
     <a id="target">
     </a>
    </h2>
    <h4>
     <a id="1__MySQL__130">
     </a>
     1. 停止 MySQL 服务
    </h4>
    <pre><code class="prism language-java">sudo systemctl stop mysqld
</code></pre>
    <h4>
     <a id="2__MySQL_136">
     </a>
     2. 以跳过权限验证的方式启动 MySQL
    </h4>
    <p>
     由于 mysqld_safe 在 MySQL 8 中已被弃用，我们可以通过修改 systemd 配置来实现。
    </p>
    <pre><code class="prism language-java">sudo mkdir <span class="token operator">-</span>p <span class="token operator">/</span>etc<span class="token operator">/</span>systemd<span class="token operator">/</span>system<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>service<span class="token punctuation">.</span>d
sudo vi <span class="token operator">/</span>etc<span class="token operator">/</span>systemd<span class="token operator">/</span>system<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>service<span class="token punctuation">.</span>d<span class="token operator">/</span>override<span class="token punctuation">.</span>conf
</code></pre>
    <p>
     在打开的文件中添加以下内容：
    </p>
    <pre><code class="prism language-java"><span class="token punctuation">[</span><span class="token class-name">Service</span><span class="token punctuation">]</span>
<span class="token class-name">ExecStart</span><span class="token operator">=</span>
<span class="token class-name">ExecStart</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>mysqld <span class="token operator">--</span>skip<span class="token operator">-</span>grant<span class="token operator">-</span>tables <span class="token operator">--</span>skip<span class="token operator">-</span>networking
</code></pre>
    <p>
     <mark>
      注意：如果 mysqld 的实际路径不是 /usr/sbin/mysqld，需要根据实际情况修改。
     </mark>
    </p>
    <h4>
     <a id="3__systemd__MySQL__149">
     </a>
     3. 重新加载 systemd 配置并启动 MySQL 服务
    </h4>
    <pre><code class="prism language-java">sudo systemctl daemon<span class="token operator">-</span>reload
sudo systemctl start mysqld
</code></pre>
    <h4>
     <a id="4__MySQL_155">
     </a>
     4. 无需密码登录 MySQL
    </h4>
    <pre><code class="prism language-java">mysql <span class="token operator">-</span>u root
</code></pre>
    <h4>
     <a id="5__root__160">
     </a>
     5. 修改 root 用户密码
    </h4>
    <pre><code class="prism language-java"><span class="token operator">--</span> 刷新权限表
<span class="token class-name">FLUSH</span> <span class="token constant">PRIVILEGES</span><span class="token punctuation">;</span>
<span class="token operator">--</span> 修改密码
<span class="token constant">ALTER</span> <span class="token constant">USER</span> <span class="token char">'root'</span>@'localhost' <span class="token constant">IDENTIFIED</span> <span class="token constant">BY</span> '<span class="token class-name">YourNewPassword</span>'<span class="token punctuation">;</span>
<span class="token operator">--</span> 再次刷新权限
<span class="token class-name">FLUSH</span> <span class="token constant">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="6__170">
     </a>
     6. 恢复正常启动配置
    </h4>
    <p>
     删除或注释掉 /etc/systemd/system/mysqld.service.d/override.conf 中的内容，然后重新加载配置并重启 MySQL 服务。
    </p>
    <pre><code class="prism language-java">sudo systemctl daemon<span class="token operator">-</span>reload
sudo systemctl restart mysqld
</code></pre>
    <p>
     <a href="#update" rel="nofollow">
      回到修改密码
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353535393836322f:61727469636c652f64657461696c732f313436313732383939" class_="artid" style="display:none">
 </p>
</div>


