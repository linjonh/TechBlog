---
layout: post
title: "网络tcp协议tcp报头"
date: 2025-03-16 19:18:31 +0800
description: "tcp(传输控制协议)是一种面向字节流的传输层协议,相较于udp协议,tcp能保证传输数据的可靠性与准确性,tcp也是目前最常见的传输层协议。：随着网络通信的复杂性增加，可能需要引入新的控制标志来支持额外的协议行为。：保留位可以用于支持TCP协议的扩展，例如在某些特殊场景下，用于标记报文段的优先级或特殊处理需求。：保留位的存在为未来协议的扩展提供了灵活性，使得TCP能够在不完全重新设计协议的情况下引入新特性。注:保留6位和6位标记位是目前最普遍的写法,在我查资料时,发现有一些拓展情况,会在后文细说。"
keywords: "[网络][tcp协议]:tcp报头"
categories: ['未分类']
tags: ['网络', '服务器', 'Tcp']
artid: "144593510"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=144593510
    alt: "网络tcp协议tcp报头"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=144593510
featuredImagePreview: https://bing.ee123.net/img/rand?artid=144593510
cover: https://bing.ee123.net/img/rand?artid=144593510
image: https://bing.ee123.net/img/rand?artid=144593510
img: https://bing.ee123.net/img/rand?artid=144593510
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     [网络][tcp协议]:tcp报头
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <blockquote>
     <p>
      tcp(传输控制协议)是一种面向字节流的传输层协议,相较于udp协议,tcp能保证传输数据的可靠性与准确性,tcp也是目前最常见的传输层协议
     </p>
     <p>
      本文主要介绍tcp报头各个字段的含义与用途
     </p>
    </blockquote>
    <p>
    </p>
    <p>
     <img alt="" height="603" src="https://i-blog.csdnimg.cn/direct/928488ba633c45dd8100d4e0cb1c195a.png" width="975"/>
    </p>
    <blockquote>
     <p>
      注:保留6位和6位标记位是目前最普遍的写法,在我查资料时,发现有一些拓展情况,会在后文细说
     </p>
    </blockquote>
    <blockquote>
     <p>
      <strong>
       最简单的两个字段
      </strong>
      ,
     </p>
     <ul>
      <li>
       16位源端口号                                                                                                          即自身进程绑定的端口号
      </li>
      <li>
       16位目的端口号                                                                                                       即通信目标绑定的端口号
      </li>
     </ul>
     <p>
      <strong>
       两个与长度有关的
      </strong>
     </p>
     <ul>
      <li>
       四位首部长度                                                                                                           代表tcp报头长度,因为有选项的存在,tcp报头长度1不是固定的,1的首部长度代表4字节(1:4),4位首部长度最多是16,也就是说,tcp报头最多是64字节
      </li>
      <li>
       16位窗口大小                                                                                                           代表接收方缓存区的大小,因为tcp的读写使用了文件流,当传输大量数据时,可能会把对方的文件缓冲区打满导致传输失败,tcp的解决方案是,双方在通信时提前告知对方自己的缓冲区大小,让对方选择适合的大小进行传递
      </li>
     </ul>
     <p>
      <strong>
       两个序号
      </strong>
     </p>
     <ul>
      <li>
       32位序号                                                                                                                    tcp给每次发送的字节流的起的一个独一无二的序号,在实际情况中,tcp进行通信时会把大型文件拆成多个小字节包,每次发几个小包,这时序号就起到了一个保证可靠性和排序的作用,实际通信时,这个序号就是小字节包在大型文件的相对下标或者小文件包对应的指针
      </li>
      <li>
       32位应答序号                                                                                                             上一次收到的序号+1;tcp为了保证传输可靠性,会在每一次收到
       <u>
        <strong>
         请求
        </strong>
       </u>
       后先返回一个
       <u>
        <strong>
         应答,
        </strong>
       </u>
       表示我收到了。应答报头会把请求报头的序号+1作为自己的应答序号；相当于告诉请求方，我收到了应答序号之前的数据
      </li>
     </ul>
     <p>
      tcp为了减轻网络负担，有时会应答和请求一块发
     </p>
     <p>
      <strong>
       保留六位+六位标记位
      </strong>
     </p>
     <ul>
      <li>
       六位标记位代表                                                                                                             当前报头的具体类型，以下是ai生成的具体六位
       <ul>
        <li>
         <strong>
          URG（Urgent）
         </strong>
         ：紧急位，当URG=1时，表示该报文段包含紧急数据，需要优先处理。紧急指针字段在此标志位为1时才有效。
        </li>
        <li>
         <strong>
          ACK（Acknowledgement）
         </strong>
         ：确认位，当ACK=1时，表示确认号字段有效。TCP规定，在连接建立后所有传送的报文段都必须把ACK置1。
        </li>
        <li>
         <strong>
          PSH（Push）
         </strong>
         ：推送位，当PSH=1时，提示接收端应用程序立刻从TCP缓冲区把数据读走，而不是等到缓冲区满了再向上层传递。
        </li>
        <li>
         <strong>
          RST（Reset）
         </strong>
         ：重置连接位，当RST=1时，表示TCP连接出现了严重错误，必须释放连接，然后再重新建立连接。
        </li>
        <li>
         <strong>
          SYN（Synchronize）
         </strong>
         ：同步位，用于建立连接。
        </li>
        <li>
         <strong>
          FIN（Finish）
         </strong>
         ：结束位，标记数据是否发送完毕。当FIN=1时，表示数据已经发送完成，可以释放连接
        </li>
       </ul>
      </li>
      <li>
       保留6位                                                                                                                          可以理解为当初指定协议时，制作者认为6位标记位可能不够，未来可能会有一些新的，如今已经有3位在部分时候被使用
       <ul>
        <li>
         <p>
          <strong>
           扩展控制标志
          </strong>
          ：随着网络通信的复杂性增加，可能需要引入新的控制标志来支持额外的协议行为。例如，某些实验性协议可能会利用这些保留位来实现新的连接管理机制。
         </p>
        </li>
        <li>
         <p>
          <strong>
           协议扩展
          </strong>
          ：保留位可以用于支持TCP协议的扩展，例如在某些特殊场景下，用于标记报文段的优先级或特殊处理需求。
         </p>
        </li>
        <li>
         <p>
          <strong>
           未来协议兼容性
          </strong>
          ：保留位的存在为未来协议的扩展提供了灵活性，使得TCP能够在不完全重新设计协议的情况下引入新特性。
         </p>
        </li>
       </ul>
      </li>
      <li>
       <p>
        4位首部长度                                                                                                                 代表整个报头长度，1代表有4字节，tcp报头最长为64字节，4位首部长度最小为5
       </p>
      </li>
      <li>
       <p>
        16位窗口大小                                                                                                               代表我方网络可接受的一个适宜的文件大小
       </p>
      </li>
      <li>
       <p>
        16位校验和                                                                                                                   用于检测数据是否有误（不需要关心）
       </p>
      </li>
      <li>
       <p>
        16位紧急指针                                                                                                               用于描述当前文件的紧急行（不需要关心）
       </p>
      </li>
     </ul>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f6c32333435363738396d6d6d6d6d2f:61727469636c652f64657461696c732f313434353933353130" class_="artid" style="display:none">
 </p>
</div>


