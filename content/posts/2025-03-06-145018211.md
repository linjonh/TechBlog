---
layout: post
title: "中原银行从小机传统数据库升级为OceanBase通用服务器,30-系统成功上线OceanBase-DB大咖说十五"
date: 2025-03-06 14:35:47 +0800
description: "中原银行金融科技部数据团队负责人，吕春雷，主导了中原银行从“小机+传统数据库”升级为“OceanBase+通用服务器”的迁移过程，目前已经完成了 30 多套系统的上线，初战告捷。本期《DB 大咖说》，吕春雷老师将分享中原银行如何顺利完成这一数据库升级，帮助银行实现从封闭架构转向开放架构。"
keywords: "中原银行：从“小机+传统数据库”升级为“OceanBase+通用服务器”，30 +系统成功上线｜OceanBase DB大咖说（十五）"
categories: ['未分类']
tags: ['银行', '数据库', '传统数据库升级', 'Oceanbase']
artid: "145018211"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145018211
    alt: "中原银行从小机传统数据库升级为OceanBase通用服务器,30-系统成功上线OceanBase-DB大咖说十五"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145018211
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145018211
cover: https://bing.ee123.net/img/rand?artid=145018211
image: https://bing.ee123.net/img/rand?artid=145018211
img: https://bing.ee123.net/img/rand?artid=145018211
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     中原银行：从“小机+传统数据库”升级为“OceanBase+通用服务器”，30 +系统成功上线｜OceanBase DB大咖说（十五）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     OceanBase《DB 大咖说》第 15 期，我们邀请到了
     <strong>
      中原银行金融科技部数据团队负责人，吕春雷
     </strong>
     。本文为本期大咖说的精选。
    </p>
    <p>
     吕春雷是一位资历深厚的数据库专家，从传统制造企业、IT企业、甲骨文公司到中原银行，他在数据库技术与运维管理方面积累了丰富经验，这些经验在带领中原银行数据库团队从传统数据库向原生分布式数据库平稳升级的过程中起到了至关重要的作用。
    </p>
    <p>
     吕春雷认为，要在DBA的职业道路上持续进步，首要的是对数据库怀有源自心底的热爱与兴趣，这是推动DBA不断前行的永恒动力；其次，需保持坚持不懈的学习态度，它如同登山者的拐杖，帮助DBA不断超越自我；最后，还需具备对生产环境的深切敬畏，这份敬畏能确保DBA对工作保持高度的责任心。
    </p>
    <p>
     吕春雷正是将这三点贯穿在自己的工作中。在中原银行的数据库升级过程中，吕春雷是主要的技术负责人。
     <strong>
      他主导了中原银行从“小机+传统数据库”升级为“OceanBase+通用服务器”的迁移过程，目前已经完成了 30 多套系统的上线，初战告捷。
     </strong>
     本期《DB 大咖说》，吕春雷老师将分享中原银行如何顺利完成这一数据库升级，帮助银行实现从封闭架构转向开放架构。
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="1735026880" height="1200" src="https://i-blog.csdnimg.cn/img_convert/e009f23b6e40662a8c08a87b8ced20f1.png" width="1200"/>
    </p>
    <p>
     中原地区是华夏文明的发源地和经济中心，孕育了开封、洛阳、安阳等古都的辉煌历史，在中国文明版图中拥有超然的地位。
    </p>
    <p>
     中原银行就诞生在这样一片土地上。
     <strong>
      中原银行是河南省属城市商业银行，成立于 2014 年 12 月，拥有 18 家分行，2017 年 7 月在香港联交所主板挂牌上市，目前全行总资产突破 1.3 万亿、员工人数近 2 万名。
     </strong>
    </p>
    <p>
     2021 年年底，中原银行正式启动传统数据库升级，目前，已经先后将 30 多套 MySQL、Oracle 数据库上的应用系统成功升级到
     <a class="link-info" href="https://www.oceanbase.com/" rel="nofollow" title="OceanBase">
      OceanBase
     </a>
     数据库之上，为中原银行通过数据洞察客户、市场、业务，指导日常经营管理决策发挥了关键支撑作用。
    </p>
    <p>
    </p>
    <h3 id="一、业务面临挑战，数据库亟待升级">
     <strong>
      一、业务面临挑战，数据库亟待升级
     </strong>
    </h3>
    <p>
     升级之前，中原银行的数据库主要以 MySQL、Oracle 数据库为主，均属于传统集中式数据库。这些系统虽曾稳固支撑银行业务，但随着中原银行金融业务的成长，IT 系统交易并发量和数据量不断增长，传统集中式数据库无法快速扩展来满足系统对性能、容量的需求，迫切需要具备高扩展、高性能等关键特性的数据库支撑业务持续发展。
    </p>
    <p>
     同时，为了支撑中原银行的数字化转型战略，微服务和分布式架构先后得到了快速应用，基础软件如分布式中间件、分析型分布式数据库在行内均已部署，面向交易类的集中式数据库也已经成为转型瓶颈。
    </p>
    <p>
     而成本也是此次数据库升级的一个驱动力。此前的信息系统数据库采用“小型机+集中存储+ Oracle ”模式，IT 运营成本长期居高不下，且近年来部分重要信息系统面临重构，亟需在兼顾基础设施成本前提下，提高重构后系统整体的处理能力。
    </p>
    <p>
     另外，数据库作为关键基础软件之一，中原银行还需要在保证系统稳定运行前提下加快国产数据库升级进程，提高 IT 基础设施自主掌控能力。
    </p>
    <p>
     <strong>
      基于上述原因，2020 年 12 月，中原银行启动了新一代数据库选型工作，吕春雷作为中原银行数据库团队负责人，重点负责本次数据库选型。
     </strong>
    </p>
    <p>
     多年负责数据库运维工作的吕春雷深知其中的挑战。过去这些年，银行先后上线了大量的系统，应用类型复杂，包括自研类、外采类，还有为银行量身定制的系统，这些系统来自不同开发商，开发习惯和代码质量存在显著差异，导致升级工作非常复杂。
    </p>
    <p>
     “虽然银行有统一的开发规范和要求，但由于各开发商的能力及代码水平的不同，系统改造和数据库升级工作复杂度较高。特别是对于那些深度使用 Oracle 数据库特性的系统，可能涉及大量复杂 SQL 语句改写，这就更需要数据库原厂的大力支持。”吕春雷说。
    </p>
    <p>
     此外，对于深度绑定 Oracle 特性的系统改造，中原银行需要在保证系统稳定运行的前提下，探索成本更低的解决方案，以实现业务的可持续发展。
    </p>
    <p>
    </p>
    <h3>
     <strong>
      二、6 大项、79 小项测试，敲定 OceanBase
     </strong>
    </h3>
    <p>
     根据中原银行信息系统建设需求，结合中国人民银行的《分布式数据库技术金融应用规范技术架构》以及同业的选型经验，中原银行总结了选择数据库的核心要求：具备高稳定性、高可用、扩展性、运维性、高性能、兼容性六大特性，同时兼顾综合成本、工具平台和生态发展。
    </p>
    <p>
     <strong>
      “其中，稳定性和高可用是我们最为看重的两大要求。金融业务稳定是前提，特别是在出现故障时，比如机房级故障或者服务器级故障，必须有自愈机制，这样对应用的影响才会相对最小。”吕春雷说。
     </strong>
    </p>
    <p>
     其次是扩展性，需要有在线横向添加或删除节点的能力，以提高数据库性能、容量能力。吕春雷解释，扩展能力是考虑选择分布式数据库的重要原因之一。过去中原银行部署了 Oracle RAC，虽然可以通过扩容来提升存储和计算资源，但 Share everything 架构决定了 IO 处理能力无法有效扩展。
    </p>
    <p>
     根据数据库的选型要求，中原银行对国内领先的数据库产品开展了全方位测评工作，包括基础能力测试、性能测试、高可用能力、运维能力测试、兼容性测试、安全能力测试共 6 大项、79 小项的 POC 测试工作。在这场激烈的角逐中，OceanBase 凭借其在性能、高可用、运维效率等方面的良好表现脱颖而出，成为中原银行的最终选择。
    </p>
    <p>
     “OceanBase 不仅在性能、高可用、运维性等方面充分满足我们的需求。同时，在总体使用成本方面也具有优势。综合评定之后，我们最终选定了它。”吕春雷表示。
    </p>
    <p>
     除此外，吕春雷还提到中原银行非常看重的若干特性。如高度兼容 Oracle 和 MySQL，并提供自动迁移工具，支持迁移评估和反向同步以保障数据迁移安全，可支撑行业核心场景升级。此外 OceanBase 的透明水平扩展能力，让业务轻松实现扩缩容，其准内存处理架构助力系统保持高性能，保证最高能支持数千节点集群，单表行数轻松突破万亿级。
    </p>
    <p>
    </p>
    <h3 id="三、规范先行，技术赋能，国产升级迈进一大步">
     <strong>
      三、规范先行，技术赋能，国产升级迈进一大步
     </strong>
    </h3>
    <p>
     数据库选型只是数据库升级的第一步，数据的迁移和业务系统的重新上线才是项目组面临的真正考验。为此，中原银行制订了周密的数据库迁移计划，大体分为系统选择、改造分析、代码改造、测试、上线、分析总结等 6 个步骤。
    </p>
    <p>
     选择系统是第一步。吕春雷介绍，“我们认为，越是重要的信息系统面临安全性威胁风险越高，国产升级的紧迫性就更强。
     <strong>
      因此，在信息系统选择时，中原银行优先选择重要的业务系统，且并发需求较高的系统，比如面向互联网类系统、渠道类系统等。”
     </strong>
    </p>
    <p>
     在确定升级的信息系统之后，第二步是细致入微的评估工作。这项工作聚焦于 Oracle 特有语法的识别与适配，然后进行针对性改造。借助 OceanBase 迁移评估工具（OMA）进行全方位采集分析和评估诊断，全面扫描 SQL 语法、表结构及数据库对象，精准判断改造要点，简化改造流程。
    </p>
    <p>
     在完成代码的修改之后，需要按照要求完成各类测试和上线前演练，这项工作会反复进行直到满足上线要求后方可准备正式上线。
    </p>
    <p>
     <strong>
      正式上线分为两个阶段，第一阶段是数据迁移，第二阶段是数据校验。
     </strong>
     这部分工作借助 OceanBase 数据迁移工具（OMS）完成，它能实现全量+增量+分批校验+反向回写，完成迁移、校验和反写整个迁移过程。
    </p>
    <p>
     “金融行业所有变更都必须具备可回退的能力，因而非常看重反向回写功能，OMS 在整个迁移的链路中能自动完成数据类型转换、自动完成反向回写，让整个迁移过程非常顺畅。”吕春雷说。
    </p>
    <p>
     完成数据库的国产升级之后，还需要对系统性能进行监控和性能跟踪。虽然在正式上线之前已经做了充分的测试，但依然可能出现各种突发问题，比如性能抖动等问题。
    </p>
    <p>
     吕春雷介绍，OceanBase 运维管理工具(OCP)给这项工作带来了很多方便，OCP 可以对性能较差的 SQL 先进行限流，然后通过 hint 方式改变和绑定执行计划，保障信息系统快速恢复后再进行根因分析。
    </p>
    <p>
     当 OceanBase 正式上线之后，总结复盘的工作非常必要，包括上线前后性能和容量使用情况，以及上线过程中存在哪些问题、如何解决的，是否需要把对应的注意事项添加到规范中。吕春雷说，虽然每次上线都会做非常周密的准备，但上线后还是会出现一些突发的问题，借助 OceanBase 交付团队的大力支持，最终问题都得到了圆满高效解决。
    </p>
    <p>
     不过，他希望以后中原银行的数据库团队能独立解决问题。他说：“我们的要求是自己能做的尽量自己做，尽早具备自主运维能力，这样才算是真正的自主掌控。”
    </p>
    <p>
    </p>
    <h3>
     <strong>
      四、稳定运行近 2 年，各项收益显著
     </strong>
    </h3>
    <p>
     中原银行从 2021 年 12 月立项进行国产数据库升级，到 2022 年 11 月全栈国产 OceanBase 集群在中原银行正式上线，手机银行等业务投入使用，后来信贷系统、网联支付、支付系统等先后陆续上线，这期间还完成生产同城双中心集群切换演练。
    </p>
    <p>
     截至目前，OceanBase 以其卓越的性能与稳定性承载中原银行 30 余套信息系统的重任，其中重要信息系统占比高达 80%以上。这一成绩不仅是技术实力的展现，也是中原银行数字化转型决心的有力证明。
    </p>
    <p>
     随着越来越多的信息系统，尤其是众多关键业务系统迁移到 OceanBase 后，各项收益也开始逐渐显现。
    </p>
    <p>
     <strong>
      第一，性能。
     </strong>
     信息系统迁移至 OceanBase 数据库后，性能不低于升级之前。“考虑到之前的数据库是专有且昂贵的硬件设备，而现在的只是通用服务器，能保持性能一致其实已经是一个很大的进步。”吕春雷解释说。
    </p>
    <p>
     <strong>
      第二，成本。
     </strong>
     中原银行原来使用的是”小型机+集中存储+Oracle”的组合，现在用的是通用服务器，较传统架构具备成本优势。成本下降还体现在资源的高效利用上。现在 OceanBase 可以通过在不同的资源池之间灵活调配实现快速扩缩容，而无需重要业务系统长期分配高水位硬件资源。
    </p>
    <p>
     <strong>
      第三，运维效率。
     </strong>
     由于 OCP 提供了丰富的功能使得运维效率大幅提升。比如，现在进行生产系统的同城主备集群切换可以一键完成，6 秒就可以完成切换。这和集中式数据库形成鲜明对比；OceanBase 支持多租户，在一个集群里可以同时有 MySQL 租户和 Oracle 租户，可以采用统一的标准进行监控和管控。
    </p>
    <p>
     <strong>
      第四，稳定性。
     </strong>
     OceanBase 上线以来，运行相对比较平稳，即便面对服务器突发故障，也能迅速恢复，有力确保业务系统连续性不受影响，真正实现了业务对故障无感。
    </p>
    <p>
     回顾这几年的工作，吕春雷表示，近年来在数据库升级和数据库运维中积累的经验非常重要。随着国产升级浪潮的大步推进，中原银行的国产升级进程将显著加快，这些宝贵经验将帮助中原银行更为顺利地完成国产升级工作。
    </p>
    <p>
     他表示，接下来中原银行将推进更多系统向 OceanBase 的迁移，同时，他们还在探索如何更好地使用 OceanBase 的新特性，充分挖掘其潜能，帮助中原银行实现更大的业务价值。比如使用 OceanBase 的 HTAP 等功能、承接部分轻量级 AP 业务。
    </p>
    <p>
    </p>
    <h3 id="五、写在最后">
     <strong>
      五、写在最后
     </strong>
    </h3>
    <p>
     在当今这个 AI 大爆发、数据已经成为企业核心竞争力的时代，金融行业新一轮角逐已经展开。为了新一轮的变革，致力于成为一流城商行的中原银行一直在倡导“数据驱动的文化”，拥有高性能与高稳定性的 OceanBase 、及其丰富的周边工具正助力中原银行信息系统更好地服务业务目标，承担社会责任，助力中原银行的业务进一步高质量发展。
    </p>
    <p>
    </p>
    <hr/>
    <p>
     特别感谢林春对本期《DB 大咖说》的支持。林春老师是中国太平洋保险数智研究院首席数据库专家，有着丰富的金融核心系统数据库升级替换经验，也是DB 大咖说栏目的第二=三期嘉宾，可移步
     <a href="https://oceanbase.blog.csdn.net/article/details/138816754" rel="nofollow" title="《中国太保：先难后易，核心系统的数据库升级实践 | OceanBase 《DB大咖说》（三）》">
      《中国太保：先难后易，核心系统的数据库升级实践 | OceanBase 《DB大咖说》（三）》
     </a>
     进一步了解中国太保的数据库升级实践。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f4f6365616e426173654746424b2f:61727469636c652f64657461696c732f313435303138323131" class_="artid" style="display:none">
 </p>
</div>


