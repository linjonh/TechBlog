---
layout: post
title: "制作单机俄罗斯方块游戏总结一"
date: 2021-03-07 22:23:23 +0800
description: "序言      声明一下:本人是java初学者,所以这个游戏的代码大部分是由我买的>面的, 当然也有"
keywords: "俄罗斯方块游戏机制作心得体会"
categories: ['Java']
tags: ['游戏', 'Null', 'Java', 'Image', 'Class', 'Border']
artid: "6317085"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=6317085
    alt: "制作单机俄罗斯方块游戏总结一"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=6317085
featuredImagePreview: https://bing.ee123.net/img/rand?artid=6317085
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     制作单机俄罗斯方块游戏总结（一）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     序言
    </p>
    <p>
     声明一下:本人是java初学者,所以这个游戏的代码大部分是由我买的&lt;&lt;疯狂java实战演义 &gt;&gt;面的, 当然也有我自己的心血在里面.当初最初自己按照书上的思路做这个游戏(没有看作者的代码),走了不少的弯路.
    </p>
    <p>
     做完这个游戏,收获颇多,感觉有必要总结一下自己的学习心得和分享一下自己的一点儿经验.前面已经提到自己是个初学者,如果有不当之处和理解错误的地方.在所难免,真诚地希望看到此文的朋友给以指点和帮助,再此先谢过.(仅供互相交流)
    </p>
    <p>
     整个游戏总共花费了我两个多星期的时间,"坎坷"之路很多.中间兴奋过:仅仅因为自己实现一个功能或者理解了作者设计的思路和方案.有时又充满了迷茫,郁闷甚至打击:特别是那个空指针的错误自己始终找不到改正的方法.
    </p>
    <p>
     但不管怎么说自己是作出来了,呵呵,小有成就感(尽管90%的代码来源与书上)
    </p>
    <p>
     闲言少叙.下面开始说我的总结吧
    </p>
    <p>
    </p>
    <p>
     首先大家想必都玩过或者知道俄罗斯方块的游戏,该游戏的过程也就是几个
     <span style="color:#ff0000">
      不同形状
     </span>
     的
     <span style="color:#ff0000">
      方块
     </span>
     在
     <span style="color:#ff0000">
      游戏界面
      <span style="color:#000000">
       中实现
       <span style="color:#ff0000">
        下降, 左移, 右移,变化, 加速下降
       </span>
       的过程(注意游戏里那个田字格大方块不能发生变化)
      </span>
     </span>
    </p>
    <p>
    </p>
    <p>
     <span style="color:#ff0000">
      <span style="color:#000000">
       根据面向对象的思维方式,每个下降的
       <span style="color:#ff00ff">
        物快（后面成为大方块）
       </span>
       都应该抽象成一个对象，需要注意个是：下降的
       <span style="color:#ff00ff">
        大方块
       </span>
       是由四个
       <span style="color:#ff00ff">
        小方块
       </span>
       图片组成的，比如按个田字格的大方块，就是由四个小方块组成。这里把组成大方块的
       <span style="color:#ff00ff">
        小方块图片
       </span>
       也抽象为一个类Square.如下所示
      </span>
     </span>
    </p>
    <p>
     <span style="color:#ff0000">
      <span style="color:#000000">
       public class Square {
       <!-- -->
       <br/>
      </span>
     </span>
     <span style="color:#ff0000">
      <span style="color:#000000">
       <br/>
       /**
       <br/>
       * 初始化带有图片的方块的位置和该方块的图片，
       <br/>
       * @param image
       <br/>
       * @param beginX
       <br/>
       * @param beginY
       <br/>
       */
       <br/>
       public Square(Image image, int beginX, int beginY) {
       <!-- -->
       <br/>
       this.image = image;
       <br/>
       this.beginX = beginX;
       <br/>
       this.beginY = beginY;
       <br/>
       }
      </span>
     </span>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     //方块的图片
     <br/>
     private Image image;
     <br/>
     //方块开始出现的的横坐标
     <br/>
     private int beginX;
     <br/>
     //方块开始出现的纵坐标
     <br/>
     private int beginY;
     <br/>
     <br/>
     }
    </p>
    <p>
     大方块对象包括多个小方块，而这些小方块的不同位置使得大方块可产生不同的变化。每一个大方块都有多种变化，下面新建一个Piece表示大方块
    </p>
    <p>
    </p>
    <p>
     public class Piece {
     <!-- -->
     <br/>
     <br/>
     /*
     <br/>
     * 得到装着小方块的容器,进而通过迭代得到容器的各个小方块
     <br/>
     */
     <br/>
     public List&lt;Square&gt; getSquares() {
     <!-- -->
     <br/>
     return squares;
     <br/>
     }
    </p>
    <p>
     public void setSquares(List&lt;Square&gt; squares) {
     <!-- -->
     <br/>
     this.squares = squares;
     <br/>
     }
     <br/>
     <br/>
     <br/>
     //该打方块所包含的小方块
     <br/>
     private List&lt;Square&gt; squares;
     <br/>
     <br/>
     //该大方快的变化
     <br/>
     protected List&lt;List&lt;Square&gt;&gt; changes = new ArrayList&lt;List&lt;Square&gt;&gt;();
     <br/>
     <br/>
     //当前变化的索引（在changes集合中的索引
     <br/>
     protected int currentIndex;
     <br/>
     <br/>
     //每个小块的边长
     <br/>
     public final static int SQUARE_BORDER = 16;
     <br/>
     <br/>
     }
    </p>
    <p>
    </p>
    <p>
     真正的游戏中有
     <span style="color:#ff0000">
      七种
     </span>
     大方块，所以就需要创建七种大方块，在这里把Piece类作为父类，当创建某一个大方块时就需要新建类来继承Piece。在构造器里设置各个小方块的位置。例如我们下面创建一个
     <span style="color:#ff00ff">
      正方形
     </span>
     的大方块类
    </p>
    <p>
    </p>
    <p>
     public class Piece0 extends Piece {
     <!-- -->
    </p>
    <p>
     public Piece0(Image image) {
     <!-- -->
     <br/>
     //创建各个小方块，一个集合为一种变化
     <br/>
     List&lt;Square&gt; squares = new ArrayList&lt;Square&gt;();
     <br/>
     squares.add(new Square(image, 0, 0));
     <br/>
     squares.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares.add(new Square(image, image.getWidth(null), image.getHeight(null)));
     <br/>
     //加入到变化中
     <br/>
     super.changes.add(squares);
    </p>
    <p>
     //把唯一的一个变化添加到Piece对象中
     <br/>
     super.setSquares(squares);
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     由于正方形方块是没有变化的。因此在Piece对象中changes集合中只有一个元素。表示改大方块只有一种变化。在这里需要为Piece类提供一个setSquares(List&lt;Square&gt; square)方法，
    </p>
    <p>
     public void setSquares(List&lt;Square&gt; squares) {
     <!-- -->
     <br/>
     this.squares = squares;
     <br/>
     }
     <br/>
    </p>
    <p>
     类似的接下来创建剩下的六种大方块
    </p>
    <p>
     public class Piece1 extends Piece {
     <!-- -->
    </p>
    <p>
     public Piece1(Image image) {
     <!-- -->
     <br/>
     // 第一种变化
     <br/>
     List&lt;Square&gt; squares0 = new ArrayList&lt;Square&gt;();
     <br/>
     squares0.add(new Square(image, image.getWidth(null), image
     <br/>
     .getHeight(null)));
     <br/>
     squares0.add(new Square(image, 0, image.getHeight(null) * 2));
     <br/>
     squares0.add(new Square(image, image.getWidth(null), image
     <br/>
     .getHeight(null) * 2));
     <br/>
     squares0.add(new Square(image, image.getWidth(null) * 2, image
     <br/>
     .getHeight(null) * 2));
     <br/>
     // 第二种变化
     <br/>
     List&lt;Square&gt; squares1 = new ArrayList&lt;Square&gt;();
     <br/>
     squares1.add(new Square(image, 0, 0));
     <br/>
     squares1.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image
     <br/>
     .getHeight(null)));
     <br/>
     squares1.add(new Square(image, 0, image.getHeight(null) * 2));
     <br/>
     // 第三种变化
     <br/>
     List&lt;Square&gt; squares2 = new ArrayList&lt;Square&gt;();
     <br/>
     squares2.add(new Square(image, 0, 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null) * 2, 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null), image
     <br/>
     .getHeight(null)));
     <br/>
     // 第四种变化
     <br/>
     List&lt;Square&gt; squares3 = new ArrayList&lt;Square&gt;();
     <br/>
     squares3.add(new Square(image, image.getWidth(null), image
     <br/>
     .getHeight(null)));
     <br/>
     squares3.add(new Square(image, image.getWidth(null) * 2, 0));
     <br/>
     squares3.add(new Square(image, image.getWidth(null) * 2, image
     <br/>
     .getHeight(null)));
     <br/>
     squares3.add(new Square(image, image.getWidth(null) * 2, image
     <br/>
     .getHeight(null) * 2));
     <br/>
     super.changes.add(squares0);
     <br/>
     super.changes.add(squares1);
     <br/>
     super.changes.add(squares2);
     <br/>
     super.changes.add(squares3）；
    </p>
    <p>
     }
    </p>
    <p>
     }
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <img alt="" src="http://hi.csdn.net/attachment/201104/12/0_1302584907Z93b.gif">
      这是Picece1第一种变化
      <img alt="" src="http://hi.csdn.net/attachment/201104/12/0_1302586243cTVH.gif">
       这是Piece1的第二种变化
       <img alt="" src="http://hi.csdn.net/attachment/201104/12/0_1302586454Sp48.gif">
        这是Piece1第三种变化，
        <img alt="" src="http://hi.csdn.net/attachment/201104/12/0_1302586552J2U3.gif">
         这是Piece1的第四种变化
        </img>
       </img>
      </img>
     </img>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     所以类似的可以创建剩下的五种大方块的的的类（图片就不贴了）
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     public class Piece2 extends Piece {
     <!-- -->
    </p>
    <p>
     public Piece2(Image image) {
     <!-- -->
     <br/>
     //第一种变化
     <br/>
     List&lt;Square&gt; squares0 = new ArrayList&lt;Square&gt;();
     <br/>
     squares0.add(new Square(image, 0, 0));
     <br/>
     squares0.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares0.add(new Square(image, image.getWidth(null), image.getHeight(null)));
     <br/>
     squares0.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)));
     <br/>
     //第二种变化
     <br/>
     List&lt;Square&gt; squares1 = new ArrayList&lt;Square&gt;();
     <br/>
     squares1.add(new Square(image, image.getWidth(null)*2, 0));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image.getHeight(null)*2));
     <br/>
     super.changes.add(squares0);
     <br/>
     super.changes.add(squares1);
     <br/>
     }
    </p>
    <p>
     }
    </p>
    <p>
    </p>
    <p>
     public class Piece3 extends Piece {
     <!-- -->
    </p>
    <p>
     public Piece3(Image image) {
     <!-- -->
     <br/>
     //第一种变化
     <br/>
     List&lt;Square&gt; squares0 = new ArrayList&lt;Square&gt;();
     <br/>
     squares0.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares0.add(new Square(image, image.getWidth(null)*2, 0));
     <br/>
     squares0.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares0.add(new Square(image, image.getWidth(null), image.getHeight(null)));
     <br/>
     //     第二种变化
     <br/>
     List&lt;Square&gt; squares1 = new ArrayList&lt;Square&gt;();
     <br/>
     squares1.add(new Square(image, 0, 0));
     <br/>
     squares1.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image.getHeight(null)*2));
     <br/>
     super.changes.add(squares0);
     <br/>
     super.changes.add(squares1);
     <br/>
     }
    </p>
    <p>
     }
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     public class Piece4 extends Piece {
     <!-- -->
     <br/>
     <br/>
     public Piece4(Image image) {
     <!-- -->
     <br/>
     //第一种变化
     <br/>
     List&lt;Square&gt; squares0 = new ArrayList&lt;Square&gt;();
     <br/>
     squares0.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares0.add(new Square(image, 0, image.getHeight(null)*2));
     <br/>
     squares0.add(new Square(image, image.getWidth(null), image.getHeight(null)*2));
     <br/>
     squares0.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)*2));
     <br/>
     //第二种变化
     <br/>
     List&lt;Square&gt; squares1 = new ArrayList&lt;Square&gt;();
     <br/>
     squares1.add(new Square(image, 0, 0));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares1.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, 0, image.getHeight(null)*2));
     <br/>
     //第三种变化
     <br/>
     List&lt;Square&gt; squares2 = new ArrayList&lt;Square&gt;();
     <br/>
     squares2.add(new Square(image, 0, 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null)*2, 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)));
     <br/>
     //第四种变化
     <br/>
     List&lt;Square&gt; squares3 = new ArrayList&lt;Square&gt;();
     <br/>
     squares3.add(new Square(image, image.getWidth(null)*2, 0));
     <br/>
     squares3.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)));
     <br/>
     squares3.add(new Square(image, image.getWidth(null), image.getHeight(null)*2));
     <br/>
     squares3.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)*2));
     <br/>
     super.changes.add(squares0);
     <br/>
     super.changes.add(squares1);
     <br/>
     super.changes.add(squares2);
     <br/>
     super.changes.add(squares3);
     <br/>
     }
    </p>
    <p>
     <br/>
     }
    </p>
    <p>
    </p>
    <p>
     public class Piece5 extends Piece {
     <!-- -->
    </p>
    <p>
     public Piece5(Image image) {
     <!-- -->
     <br/>
     //第一种变化
     <br/>
     List&lt;Square&gt; squares0 = new ArrayList&lt;Square&gt;();
     <br/>
     squares0.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)));
     <br/>
     squares0.add(new Square(image, 0, image.getHeight(null)*2));
     <br/>
     squares0.add(new Square(image, image.getWidth(null), image.getHeight(null)*2));
     <br/>
     squares0.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)*2));
     <br/>
     //第二种变化
     <br/>
     List&lt;Square&gt; squares1 = new ArrayList&lt;Square&gt;();
     <br/>
     squares1.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares1.add(new Square(image, image.getWidth(null)*2, 0));
     <br/>
     squares1.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)*2));
     <br/>
     //第三种变化
     <br/>
     List&lt;Square&gt; squares2 = new ArrayList&lt;Square&gt;();
     <br/>
     squares2.add(new Square(image, 0, 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares2.add(new Square(image, image.getWidth(null)*2, 0));
     <br/>
     squares2.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     //第四种变化
     <br/>
     List&lt;Square&gt; squares3 = new ArrayList&lt;Square&gt;();
     <br/>
     squares3.add(new Square(image, 0, 0));
     <br/>
     squares3.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares3.add(new Square(image, 0, image.getHeight(null)*2));
     <br/>
     squares3.add(new Square(image, image.getWidth(null), image.getHeight(null)*2));
     <br/>
     super.changes.add(squares0);
     <br/>
     super.changes.add(squares1);
     <br/>
     super.changes.add(squares2);
     <br/>
     super.changes.add(squares3);
     <br/>
     }
     <br/>
     }
    </p>
    <p>
     public class Piece6 extends Piece {
     <!-- -->
    </p>
    <p>
     public Piece6(Image image) {
     <!-- -->
     <br/>
     //第一种变化
     <br/>
     List&lt;Square&gt; squares0 = new ArrayList&lt;Square&gt;();
     <br/>
     squares0.add(new Square(image, 0, image.getHeight(null)));
     <br/>
     squares0.add(new Square(image, image.getWidth(null), image.getHeight(null)));
     <br/>
     squares0.add(new Square(image, image.getWidth(null)*2, image.getHeight(null)));
     <br/>
     squares0.add(new Square(image, image.getWidth(null)*3, image.getHeight(null)));
     <br/>
     //第二种变化
     <br/>
     List&lt;Square&gt; squares1 = new ArrayList&lt;Square&gt;();
     <br/>
     squares1.add(new Square(image, image.getWidth(null), 0));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image.getHeight(null)));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image.getHeight(null)*2));
     <br/>
     squares1.add(new Square(image, image.getWidth(null), image.getHeight(null)*3));
     <br/>
     super.changes.add(squares0);
     <br/>
     super.changes.add(squares1);
     <br/>
     }
    </p>
    <p>
     }
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f6368756e7169757765:692f61727469636c652f64657461696c732f36333137303835" class_="artid" style="display:none">
 </p>
</div>


