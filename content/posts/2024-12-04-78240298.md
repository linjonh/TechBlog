---
layout: post
title: "PythonUbuntu修改默认Python版本"
date: 2024-12-04 19:45:21 +0800
description: "查看Python版本先查看系统中有那些Python版本$ ls/"
keywords: "ubantu 怎么更换python版本"
categories: ['Python']
tags: ['更改版本', 'Ubuntu', 'Python']
artid: "78240298"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=78240298
    alt: "PythonUbuntu修改默认Python版本"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=78240298
featuredImagePreview: https://bing.ee123.net/img/rand?artid=78240298
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Python】Ubuntu修改默认Python版本
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1_Python_0">
     </a>
     1 查看Python版本
    </h3>
    <p>
     先查看系统中有那些Python版本：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">ls</span> /usr/bin/python*

/usr/bin/python            /usr/bin/python2-config  /usr/bin/python3m
/usr/bin/python2           /usr/bin/python3         /usr/bin/python-config
/usr/bin/python2.7         /usr/bin/python3.5
/usr/bin/python2.7-config  /usr/bin/python3.5m
</code></pre>
    <p>
     再查看系统默认的Python版本：
    </p>
    <pre><code class="prism language-bash">$ python --version

Python 2.7.12
</code></pre>
    <h3>
     <a id="2__19">
     </a>
     2 用户级修改
    </h3>
    <p>
     为某个特定用户修改Python版本，只需要在其home目录下创建一个alias。
    </p>
    <p>
     打开该用户的~/.bashrc文件：
    </p>
    <pre><code class="prism language-bash">vim ~/.bashrc
</code></pre>
    <p>
     添加新的别名来修改默认Python版本：
    </p>
    <pre><code class="prism language-shell"><span class="token function">alias</span> python<span class="token operator">=</span><span class="token string">'/usr/bin/python3.5'</span>
</code></pre>
    <p>
     重新登录或者重新加载.bashrc文件，使操作生效：
    </p>
    <pre><code class="prism language-bash">$ <span class="token keyword">.</span> ~/.bashrc  
</code></pre>
    <p>
     检查当前的Python版本：
    </p>
    <pre><code class="prism language-bash">$ python --version

Python 3.5.2
</code></pre>
    <h3>
     <a id="3__45">
     </a>
     3 系统级修改
    </h3>
    <h4>
     <a id="31__47">
     </a>
     3.1 基于软链接
    </h4>
    <p>
     先删除默认的Python软链接：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">rm</span> /usr/bin/python
</code></pre>
    <p>
     然后创建一个新的软链接指向需要的Python版本：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/bin/python3.5 /usr/bin/python
</code></pre>
    <h4>
     <a id="32_updatealternatives_59">
     </a>
     3.2 基于update-alternatives
    </h4>
    <p>
     可以使用update-alternatives来为整个系统更改Python版本。
    </p>
    <p>
     <code>
      第1步
     </code>
     首先列出所有可用的python替代版本信息：
    </p>
    <pre><code class="prism language-bash">$ update-alternatives --list python

update-alternatives: 错误: 无 python 的候选项
</code></pre>
    <p>
     如果出现以上所示的错误信息，表示update-alternatives没有添加Python的替代版本。
    </p>
    <p>
     <code>
      第2步
     </code>
     将Python的替代版本添加进去：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">sudo</span> update-alternatives --install /usr/bin/python python /usr/bin/python2.7 1

update-alternatives: 使用 /usr/bin/python2.7 来在自动模式中提供 /usr/bin/python <span class="token punctuation">(</span>python<span class="token punctuation">)</span> 

$ <span class="token function">sudo</span> update-alternatives --install /usr/bin/python python /usr/bin/python3.5 2

update-alternatives: 使用 /usr/bin/python3.5 来在自动模式中提供 /usr/bin/python <span class="token punctuation">(</span>python<span class="token punctuation">)</span>
</code></pre>
    <p>
     install选项使用了多个参数用于创建符号链接。最后一个参数指定了此选项的优先级，如果我们没有手动来设置替代选项，那么具有最高优先级的选项就会被选中。
    </p>
    <p>
     这个例子中，我们为/usr/bin/python3.5设置的优先级为2，所以update-alternatives命令会自动将它设置为默认Python版本：
    </p>
    <pre><code class="prism language-bash">$ python --version

Python 3.5.2
</code></pre>
    <p>
     再列出可用的Python替代版本：
    </p>
    <pre><code class="prism language-bash">$ update-alternatives --list python

/usr/bin/python2.7
/usr/bin/python3.5
</code></pre>
    <p>
     现在就可以在列出的Python替代版本中任意切换：
    </p>
    <pre><code class="prism language-bash">$ update-alternatives --config python

有 2 个候选项可用于替换 python <span class="token punctuation">(</span>提供 /usr/bin/python<span class="token punctuation">)</span>。

  选择       路径              优先级  状态
------------------------------------------------------------
* 0            /usr/bin/python3.5   2         自动模式
  1            /usr/bin/python2.7   1         手动模式
  2            /usr/bin/python3.5   2         手动模式

要维持当前值<span class="token punctuation">[</span>*<span class="token punctuation">]</span>请按<span class="token operator">&lt;</span>回车键<span class="token operator">&gt;</span>，或者键入选择的编号：1
</code></pre>
    <p>
     然后查看版本号：
    </p>
    <pre><code class="prism language-bash">$ python --version

Python 2.7.12
</code></pre>
    <p>
     <code>
      第3步
     </code>
     当系统不再存在某个Python替代版本时，我们可以将其从update-alternatives列表中删除掉。
    </p>
    <p>
     例如，可以将列表中的python2.7版本移除：
    </p>
    <pre><code class="prism language-bash">$ <span class="token function">sudo</span> update-alternatives --remove python /usr/bin/python2.7 

$ update-alternatives --list python

/usr/bin/python3.5
</code></pre>
    <h3>
     <a id="4_pip_133">
     </a>
     4 pip错误
    </h3>
    <p>
     更改Python默认版本之后可能会出现如下错误：
    </p>
    <pre><code class="prism language-bash">$ pip --version

Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"/usr/local/bin/pip"</span>, line 7, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    from pip <span class="token function">import</span> main
ImportError: No module named <span class="token string">'pip'</span>
</code></pre>
    <p>
     解决方法是将pip版本更改为符合当前的Python版本。对于Python2或者Python3：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python-pip <span class="token comment">#python2</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3-pip <span class="token comment">#python3</span>
</code></pre>
    <p>
     安装pip之后，可能版本不是最新的，需要更新：
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> --upgrade pip
</code></pre>
    <p>
     另外，将pip更新为10.0.0之后的版本时，库里面的函数有所变动会出现如下问题：
    </p>
    <pre><code class="prism language-bash">$ pip3 --version
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"/usr/bin/pip3"</span>, line 9, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    from pip <span class="token function">import</span> main
ImportError: cannot <span class="token function">import</span> name <span class="token string">'main'</span>
</code></pre>
    <p>
     只需要修改/usr/bin/pip和/usr/bin/pip3文件：
    </p>
    <pre><code class="prism language-bash">from pip <span class="token function">import</span> main
<span class="token comment"># 修改为</span>
from pip._internal <span class="token function">import</span> main
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f57686974655f4964696f74:2f61727469636c652f64657461696c732f3738323430323938" class_="artid" style="display:none">
 </p>
</div>


