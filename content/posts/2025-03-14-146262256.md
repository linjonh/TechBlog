---
layout: post
title: "Spring-Boot如何在业务项目中覆盖基础项目的默认实现"
date: 2025-03-14 17:19:19 +0800
description: "在 Spring Boot 项目中，我们通常会将一些通用的功能封装到基础项目（基础模块）中，而业务项目则依赖于这个基础项目。但是，实际开发过程中，业务项目可能需要自定义某些功能的实现，而不是直接使用基础项目提供的默认实现。"
keywords: "Spring Boot：如何在业务项目中覆盖基础项目的默认实现"
categories: ['Spring']
tags: ['后端', 'Spring', 'Python', 'Boot']
artid: "146262256"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146262256
    alt: "Spring-Boot如何在业务项目中覆盖基础项目的默认实现"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146262256
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146262256
cover: https://bing.ee123.net/img/rand?artid=146262256
image: https://bing.ee123.net/img/rand?artid=146262256
img: https://bing.ee123.net/img/rand?artid=146262256
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Spring Boot：如何在业务项目中覆盖基础项目的默认实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="Spring_Boot_0">
     </a>
     <strong>
      Spring Boot：如何在业务项目中覆盖基础项目的默认实现
     </strong>
    </h2>
    <p>
     在 Spring Boot 项目中，我们通常会将一些通用的功能封装到基础项目（基础模块）中，而业务项目则依赖于这个基础项目。但是，实际开发过程中，业务项目可能需要自定义某些功能的实现，而不是直接使用基础项目提供的默认实现。
    </p>
    <p>
     本文将以
     <strong>
      <code>
       ExceptionNoticeService
      </code>
     </strong>
     为例，探讨如何在业务项目中重新实现基础项目提供的接口逻辑。
    </p>
    <hr/>
    <h3>
     <a id="__8">
     </a>
     <strong>
      一. 场景分析
     </strong>
    </h3>
    <p>
     假设我们在基础项目中定义了
     <code>
      ExceptionNoticeService
     </code>
     接口，并提供了一个默认实现：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultExceptionNoticeService</span> <span class="token keyword">implements</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"默认异常通知: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     业务项目依赖于这个基础项目，但现在我们希望在业务项目中
     <strong>
      自定义异常通知逻辑
     </strong>
     ，比如通过
     <strong>
      企业微信、钉钉或者邮件
     </strong>
     发送异常通知，而不是使用默认的
     <code>
      System.out.println
     </code>
     方式。
    </p>
    <hr/>
    <h3>
     <a id="__ExceptionNoticeService_31">
     </a>
     <strong>
      二. 在业务项目中重新实现 ExceptionNoticeService
     </strong>
    </h3>
    <h4>
     <a id="_1_Bean__33">
     </a>
     <strong>
      方式 1：直接提供新的 Bean 实现
     </strong>
    </h4>
    <p>
     Spring 允许我们在
     <strong>
      同一个接口有多个实现
     </strong>
     的情况下，覆盖默认实现。只需在业务项目中提供一个新的
     <code>
      @Service
     </code>
     实现：
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Primary</span>  <span class="token comment">// 让 Spring 优先使用这个 Bean</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomExceptionNoticeService</span> <span class="token keyword">implements</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 这里可以调用企业微信、钉钉、邮件等通知渠道</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义异常通知: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      关键点：
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       <code>
        @Primary
       </code>
       注解
      </strong>
      ：当 Spring 发现多个
      <code>
       ExceptionNoticeService
      </code>
      实现时，会优先使用
      <code>
       @Primary
      </code>
      标注的 Bean。
     </li>
     <li>
      <strong>
       新的
       <code>
        @Service
       </code>
       组件
      </strong>
      会覆盖基础项目中的
      <code>
       DefaultExceptionNoticeService
      </code>
      ，确保 Spring 使用的是业务项目中的实现。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_2_Spring__Bean__54">
     </a>
     <strong>
      方式 2：使用 Spring 的 Bean 覆盖机制
     </strong>
    </h4>
    <p>
     如果不想使用
     <code>
      @Primary
     </code>
     ，也可以通过
     <code>
      @Bean
     </code>
     方式在业务项目中覆盖默认实现：
    </p>
    <h5>
     <a id="21__Bean_57">
     </a>
     <strong>
      2.1 在业务项目的配置类中替换 Bean
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionNoticeConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token function">exceptionNoticeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CustomExceptionNoticeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="22__68">
     </a>
     <strong>
      2.2 自定义实现
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomExceptionNoticeService</span> <span class="token keyword">implements</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义异常通知: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      原理解析：
     </strong>
    </p>
    <ul>
     <li>
      业务项目的
      <code>
       ExceptionNoticeConfig
      </code>
      通过
      <code>
       @Bean
      </code>
      方法定义了新的
      <code>
       ExceptionNoticeService
      </code>
      实现。
     </li>
     <li>
      Spring 会使用
      <strong>
       新的
       <code>
        Bean
       </code>
       实例
      </strong>
      ，替换默认的
      <code>
       DefaultExceptionNoticeService
      </code>
      。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_3_84">
     </a>
     <strong>
      方式 3：移除基础项目的默认实现
     </strong>
    </h4>
    <p>
     如果业务项目总是需要自定义实现，可以在基础项目中
     <strong>
      不提供
      <code>
       @Service
      </code>
      的默认实现
     </strong>
     ，而是让业务项目必须提供自己的实现：
    </p>
    <h5>
     <a id="_87">
     </a>
     <strong>
      修改基础项目
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <em>
      去掉
      <code>
       DefaultExceptionNoticeService
      </code>
      ，不再提供默认实现。
     </em>
    </p>
    <h5>
     <a id="_95">
     </a>
     <strong>
      业务项目中必须提供实现
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomExceptionNoticeService</span> <span class="token keyword">implements</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义异常通知: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这样，业务项目
     <strong>
      必须
     </strong>
     自己实现
     <code>
      ExceptionNoticeService
     </code>
     ，否则 Spring 在运行时会报错
     <strong>
      <code>
       No qualifying bean of type 'ExceptionNoticeService'
      </code>
     </strong>
     。
    </p>
    <hr/>
    <h4>
     <a id="_4_ConditionalOnMissingBean_111">
     </a>
     <strong>
      方式 4：使用 @ConditionalOnMissingBean
     </strong>
    </h4>
    <p>
     如果基础项目希望
     <strong>
      提供默认实现
     </strong>
     ，但允许业务项目
     <strong>
      自定义覆盖
     </strong>
     ，可以使用
     <code>
      @ConditionalOnMissingBean
     </code>
     ：
    </p>
    <h5>
     <a id="41__114">
     </a>
     <strong>
      4.1 修改基础项目的默认实现
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">ExceptionNoticeService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>  <span class="token comment">// 仅当容器中没有其他 ExceptionNoticeService 时才生效</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultExceptionNoticeService</span> <span class="token keyword">implements</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"默认异常通知: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="42__126">
     </a>
     <strong>
      4.2 在业务项目中提供自定义实现
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomExceptionNoticeService</span> <span class="token keyword">implements</span> <span class="token class-name">ExceptionNoticeService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义异常通知: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      原理解析：
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       基础项目的
       <code>
        DefaultExceptionNoticeService
       </code>
       只有在没有其他
       <code>
        ExceptionNoticeService
       </code>
       实现时才会生效
      </strong>
      。
     </li>
     <li>
      <strong>
       业务项目定义了
       <code>
        CustomExceptionNoticeService
       </code>
       后，Spring 容器中已经存在了
       <code>
        ExceptionNoticeService
       </code>
       ，基础项目的默认实现就不会被加载
      </strong>
      。
     </li>
     <li>
      这样，我们既能提供
      <strong>
       默认实现
      </strong>
      ，又允许
      <strong>
       业务项目自定义覆盖
      </strong>
      ，更加灵活。
     </li>
    </ul>
    <h3>
     <a id="__143">
     </a>
     <strong>
      三. 总结
     </strong>
    </h3>
    <p>
     在 Spring Boot 业务项目中
     <strong>
      覆盖基础项目的
      <code>
       ExceptionNoticeService
      </code>
      实现
     </strong>
     ，可以使用以下方式：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        方式
       </th>
       <th>
        适用场景
       </th>
       <th>
        关键技术点
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         <code>
          @Primary
         </code>
        </strong>
       </td>
       <td>
        业务项目提供新实现，覆盖默认实现
       </td>
       <td>
        <code>
         @Primary
        </code>
        让 Spring 选择业务项目的 Bean
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         <code>
          @Bean
         </code>
         覆盖
        </strong>
       </td>
       <td>
        业务项目通过
        <code>
         @Configuration
        </code>
        配置新实现
       </td>
       <td>
        在
        <code>
         @Configuration
        </code>
        类中定义新的
        <code>
         Bean
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         <code>
          @ConditionalOnMissingBean
         </code>
        </strong>
       </td>
       <td>
        基础项目提供默认实现，业务项目可覆盖
       </td>
       <td>
        仅当
        <strong>
         没有其他 Bean
        </strong>
        时，才加载默认实现
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         基础项目不提供默认实现
        </strong>
       </td>
       <td>
        业务项目必须提供实现
       </td>
       <td>
        仅定义接口，避免无用的默认实现
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     如果：
    </p>
    <ul>
     <li>
      <strong>
       基础项目想提供默认实现
      </strong>
      ，但业务项目可以覆盖 →
      <strong>
       使用
       <code>
        @ConditionalOnMissingBean
       </code>
      </strong>
      ✅
     </li>
     <li>
      <strong>
       业务项目总是需要自定义实现
      </strong>
      →
      <strong>
       基础项目不提供默认实现
      </strong>
      ✅
     </li>
     <li>
      <strong>
       业务项目只想覆盖默认实现
      </strong>
      →
      <strong>
       使用
       <code>
        @Primary
       </code>
       或
       <code>
        @Bean
       </code>
      </strong>
      ✅
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="4__160">
     </a>
     <strong>
      4. 参考资料
     </strong>
    </h3>
    <ul>
     <li>
      <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/" rel="nofollow">
       Spring Boot 官方文档
      </a>
     </li>
     <li>
      <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Primary.html" rel="nofollow">
       Spring @Primary 注解
      </a>
     </li>
     <li>
      <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/ConditionalOnMissingBean.html" rel="nofollow">
       Spring @ConditionalOnMissingBean
      </a>
     </li>
     <li>
      <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html" rel="nofollow">
       Spring @Bean 注解
      </a>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e746ae11b679474aa374492ce785abc3.jpeg#pic_center"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6b616b615f62756b612f:61727469636c652f64657461696c732f313436323632323536" class_="artid" style="display:none">
 </p>
</div>


