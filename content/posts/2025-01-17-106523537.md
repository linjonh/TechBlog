---
arturl_encode: "6874747073:3a2f2f626c6f672e6373646e2e6e65742f6c6d70353032332f:61727469636c652f64657461696c732f313036353233353337"
layout: post
title: "怎么根据QPS计算需多少台服务器"
date: 2025-01-17 18:20:48 +0800
description: "因特网上，经常用每秒查询率来衡量域名系统服务器的机器的性能，其即为QPS。对应fetches/sec"
keywords: "5000qps需要多少台服务器跟宽带"
categories: ['未分类']
tags: ['无标签']
artid: "106523537"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=106523537
  alt: "怎么根据QPS计算需多少台服务器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=106523537
featuredImagePreview: https://bing.ee123.net/img/rand?artid=106523537
---

# 怎么根据QPS计算需多少台服务器

因特网上，经常用每秒查询率来衡量域名系统服务器的机器的性能，其即为QPS。

对应fetches/sec，即每秒的响应请求数，也即是最大吞吐能力。

计算关系：

QPS = 并发量 / 平均响应时间

并发量 = QPS \* 平均响应时间

原理：每天80%的访问集中在20%的时间里，这20%时间叫做峰值时间。

公式：( 总PV数 \* 80% ) / ( 每天秒数 \* 20% ) = 峰值时间每秒请求数(QPS) 。

机器：峰值时间每秒QPS / 单台机器的QPS = 需要的机器 。

**案例分析：**

每天300w PV 的在单台机器上，这台机器需要多少QPS？

( 3000000 \* 0.8 ) / (86400 \* 0.2 ) = 139 (QPS)。

一般需要达到139QPS，因为是峰值。

如果一台机器的QPS是58，需要几台机器来支持？

139 / 58 = 3

ps：如果考虑高可用,每台机器还得来一台备份机,所以还要再准备3台服务器, 再来一个做负载均衡的,一般服务器总数都是偶数

-----------------------------------------------------------------------------

问题：上面只是说某个业务需要的qps，但是单机的qps怎么算呢？

------------------------------------------------------------------------------

问题：假如我用php写的一套系统，用ab做压力测试的话是测试每个接口的，这跟购买多少台服务器能联系到一起吗？

是不是分接口qps和服务器qps