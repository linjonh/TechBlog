---
layout: post
title: "进阶指南战略游戏树形DP"
date: 2022-04-06 00:30:27 +0800
description: "Date：2022.03.29题意描述：鲍勃喜欢玩电脑游戏，特别是战略游戏，但有时他找不到解决问题的"
keywords: "鲍勃喜欢玩电脑游戏,特别是战略游戏,但有时他找不到解决问题的方法,这让他很伤心"
categories: ['进阶指南', 'Dp']
tags: ['无标签']
artid: "123980635"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=123980635
    alt: "进阶指南战略游戏树形DP"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=123980635
featuredImagePreview: https://bing.ee123.net/img/rand?artid=123980635
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【进阶指南】战略游戏【树形DP】
    </h1>
   </div>
   <div class="ai-article-tag" id="ai-article-tag">
    <div class="ai-article-tag-box">
     <p class="ai-article-tag-item-active">
      <img alt="" class="item-target" src="https://img-home.csdnimg.cn/images/20240711112329.png"/>
     </p>
     <a class="ai-article-tag-item" data-report-click='{"spm":"3001.10231","extra":{"searchword":"算法"}}' data-report-query="spm=1001.2101.3001.10231" data-report-view='{"spm":"3001.10231","extra":{"searchword":"算法"}}' href="https://so.csdn.net/so/search/s.do?q=%E7%AE%97%E6%B3%95&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank">
      <span>
       算法
      </span>
     </a>
     <a class="ai-article-tag-item" data-report-click='{"spm":"3001.10231","extra":{"searchword":"动态规划"}}' data-report-query="spm=1001.2101.3001.10231" data-report-view='{"spm":"3001.10231","extra":{"searchword":"动态规划"}}' href="https://so.csdn.net/so/search/s.do?q=%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank">
      <span>
       动态规划
      </span>
     </a>
     <a class="ai-article-tag-item" data-report-click='{"spm":"3001.10231","extra":{"searchword":"c++"}}' data-report-query="spm=1001.2101.3001.10231" data-report-view='{"spm":"3001.10231","extra":{"searchword":"c++"}}' href="https://so.csdn.net/so/search/s.do?q=c%2B%2B&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" target="_blank">
      <span>
       c++
      </span>
     </a>
    </div>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     Date：2022.03.29
     <br/>
     <strong>
      题意描述：
     </strong>
     <br/>
     鲍勃喜欢玩电脑游戏，特别是战略游戏，但有时他找不到解决问题的方法，这让他很伤心。
     <br/>
     现在他有以下问题。
     <br/>
     他必须保护一座中世纪城市，这条城市的道路构成了一棵树。
     <br/>
     每个节点上的士兵可以观察到所有和这个点相连的边。
     <br/>
     他必须在节点上放置最少数量的士兵，以便他们可以观察到所有的边。
     <br/>
     你能帮助他吗？
     <br/>
     例如，下面的树：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/19321eadf9fee71d4ebfb3eef915c95e.png">
      <br/>
      只需要放置 1 名士兵（在节点 1 处），就可观察到所有的边。
      <br/>
      <strong>
       输入格式
      </strong>
      <br/>
      输入包含多组测试数据，每组测试数据用以描述一棵树。
      <br/>
      对于每组测试数据，第一行包含整数 N，表示树的节点数目。
      <br/>
      接下来 N 行，每行按如下方法描述一个节点。
      <br/>
      节点编号：(子节点数目) 子节点 子节点 …
      <br/>
      节点编号从 0 到 N−1，每个节点的子节点数量均不超过 10，每个边在输入数据中只出现一次。
      <br/>
      <strong>
       输出格式
      </strong>
      <br/>
      对于每组测试数据，输出一个占据一行的结果，表示最少需要的士兵数。
      <br/>
      <strong>
       数据范围
      </strong>
      <br/>
      0&lt;N≤1500,
      <br/>
      一个测试点所有 N 相加之和不超过 300650。
      <br/>
      输入样例：
      <br/>
      4
      <br/>
      0:(1) 1
      <br/>
      1:(2) 2 3
      <br/>
      2:(0)
      <br/>
      3:(0)
      <br/>
      5
      <br/>
      3:(3) 1 4 2
      <br/>
      1:(1) 0
      <br/>
      2:(0)
      <br/>
      0:(0)
      <br/>
      4:(0)
      <br/>
      输出样例：
      <br/>
      1
      <br/>
      2
     </img>
    </p>
    <p>
     思路：我们发现这题和
     <a href="https://blog.csdn.net/lppppppppps/article/details/123861452?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164917571116782248586475%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=164917571116782248586475&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-123861452.nonecase&amp;utm_term=%E8%88%9E%E4%BC%9A&amp;spm=1018.2226.3001.4450">
      没有上司的舞会
     </a>
     很相像，但是有所不同。
     <br/>
     我们可以将没有上司的舞会归结为“每条边上至多只选择一个点”，这是最大独立集问题；而这题归结为“每条边上至少选择一个点”。因此状态定义时两题相差无异：
     <br/>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        f 
        
       
         [ 
        
       
         u 
        
       
         ] 
        
       
         [ 
        
       
         0 
        
       
         ] 
        
       
         : 
        
       
      
        f[u][0]:
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.10764em;">
          f
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathdefault">
          u
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          0
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          :
         </span>
        </span>
       </span>
      </span>
     </span>
     以
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        u 
        
       
      
        u
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.43056em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          u
         </span>
        </span>
       </span>
      </span>
     </span>
     为根的子树，不在
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        u 
        
       
      
        u
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.43056em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          u
         </span>
        </span>
       </span>
      </span>
     </span>
     结点放士兵时，这个子树上最小花费士兵数。
     <br/>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        f 
        
       
         [ 
        
       
         u 
        
       
         ] 
        
       
         [ 
        
       
         1 
        
       
         ] 
        
       
         : 
        
       
      
        f[u][1]:
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.10764em;">
          f
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathdefault">
          u
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          :
         </span>
        </span>
       </span>
      </span>
     </span>
     以
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        u 
        
       
      
        u
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.43056em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          u
         </span>
        </span>
       </span>
      </span>
     </span>
     为根的子树，在
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        u 
        
       
      
        u
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.43056em; vertical-align: 0em;">
         </span>
         <span class="mord mathdefault">
          u
         </span>
        </span>
       </span>
      </span>
     </span>
     结点放士兵时，这个子树上最小花费士兵数。
     <br/>
     状态转移：
     <br/>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        f 
        
       
         [ 
        
       
         u 
        
       
         ] 
        
       
         [ 
        
       
         0 
        
       
         ] 
        
       
         = 
        
        
        
          ∑ 
         
         
         
           j 
          
         
           = 
          
         
           0 
          
         
        
          x 
         
        
       
         f 
        
       
         [ 
        
       
         j 
        
       
         ] 
        
       
         [ 
        
       
         1 
        
       
         ] 
        
       
         ; 
        
       
      
        f[u][0]=\sum_{j=0}^xf[j][1];
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.10764em;">
          f
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathdefault">
          u
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          0
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1.24011em; vertical-align: -0.435818em;">
         </span>
         <span class="mop">
          <span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">
           ∑
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.804292em;">
              <span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathdefault mtight" style="margin-right: 0.05724em;">
                  j
                 </span>
                 <span class="mrel mtight">
                  =
                 </span>
                 <span class="mord mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.2029em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathdefault mtight">
                 x
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.435818em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.166667em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.10764em;">
          f
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mpunct">
          ;
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     【即边u-&gt;j上已确定u处无士兵，为了满足前提j处必须放士兵。其中x是u的所有子结点数量。】
     <br/>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        f 
        
       
         [ 
        
       
         u 
        
       
         ] 
        
       
         [ 
        
       
         1 
        
       
         ] 
        
       
         = 
        
        
        
          ∑ 
         
         
         
           j 
          
         
           = 
          
         
           0 
          
         
        
          x 
         
        
       
         m 
        
       
         i 
        
       
         n 
        
       
         ( 
        
       
         f 
        
       
         [ 
        
       
         j 
        
       
         ] 
        
       
         [ 
        
       
         1 
        
       
         ] 
        
       
         , 
        
       
         f 
        
       
         [ 
        
       
         j 
        
       
         ] 
        
       
         [ 
        
       
         0 
        
       
         ] 
        
       
         ) 
        
       
         + 
        
       
         1 
        
       
         ; 
        
       
      
        f[u][1]=\sum_{j=0}^xmin(f[j][1],f[j][0])+1;
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.10764em;">
          f
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathdefault">
          u
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.277778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1.24011em; vertical-align: -0.435818em;">
         </span>
         <span class="mop">
          <span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">
           ∑
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.804292em;">
              <span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathdefault mtight" style="margin-right: 0.05724em;">
                  j
                 </span>
                 <span class="mrel mtight">
                  =
                 </span>
                 <span class="mord mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.2029em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathdefault mtight">
                 x
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.435818em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.166667em;">
         </span>
         <span class="mord mathdefault">
          m
         </span>
         <span class="mord mathdefault">
          i
         </span>
         <span class="mord mathdefault">
          n
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathdefault" style="margin-right: 0.10764em;">
          f
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          1
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.166667em;">
         </span>
         <span class="mord mathdefault" style="margin-right: 0.10764em;">
          f
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathdefault" style="margin-right: 0.05724em;">
          j
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          0
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.222222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;">
         </span>
         <span class="mord">
          1
         </span>
         <span class="mpunct">
          ;
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     【因让每个子树都是最小，加和才最小。此外别忘了u本身也有一个兵要加上。】
    </p>
    <p>
     代码如下：
    </p>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">3010</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span>
<span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>t<span class="token punctuation">,</span>f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>fa<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>ans<span class="token punctuation">;</span>
<span class="token keyword">int</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>ne<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>w<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>idx<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">=</span>y<span class="token punctuation">;</span>ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">=</span>h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">=</span>idx<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">dfs_down</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>i<span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">=</span>ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> j<span class="token operator">=</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">dfs_down</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
        f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+=</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token constant">EOF</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">memset</span><span class="token punctuation">(</span>fa<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> fa<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">memset</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注意每次清空一下，或者可以在dfs中每次都给f[u][0]=0和f[u][1]=1【因为这里只向下递归，每次赋值都相当于给以u为根的子树的两种状态初始化】。</span>
        idx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d:(%d)"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>b<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">int</span> x<span class="token punctuation">;</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> root<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//注意点编号从0开始</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>fa<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> root<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">dfs_down</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6c707070707070707070732f:61727469636c652f64657461696c732f313233393830363335" class_="artid" style="display:none">
 </p>
</div>


