---
layout: post
title: "Ubuntu-优化-Vim-指南"
date: 2025-03-16 01:03:27 +0800
description: "本指南提供最精简、最实用的Vim配置，满足代码补全、语法高亮、代码格式化、目录管理等常用需求。"
keywords: "Ubuntu 优化 Vim 指南"
categories: ['Linux']
tags: ['Vim', 'Ubuntu', 'Linux']
artid: "146288665"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146288665
    alt: "Ubuntu-优化-Vim-指南"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146288665
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146288665
cover: https://bing.ee123.net/img/rand?artid=146288665
image: https://bing.ee123.net/img/rand?artid=146288665
img: https://bing.ee123.net/img/rand?artid=146288665
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Ubuntu 优化 Vim 指南
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     Vim 是一款功能强大的文本编辑器，通过合适的配置，可以变成一个接近 IDE 的高效开发工具。本指南提供
     <strong>
      最精简、最实用
     </strong>
     的 Vim 配置，满足
     <strong>
      代码补全、语法高亮、代码格式化、目录管理等常用需求
     </strong>
     。
    </p>
    <hr/>
    <h3>
     <a id="1__4">
     </a>
     1. 必须安装的软件
    </h3>
    <p>
     首先，确保你的系统安装了 Vim 以及相关依赖：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 更新系统包</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update

<span class="token comment"># 安装 Vim（推荐 gvim，支持 clipboard）</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> vim-gtk <span class="token parameter variable">-y</span>

<span class="token comment"># 安装 node.js 和 npm（用于 coc.nvim）</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nodejs <span class="token function">npm</span> <span class="token parameter variable">-y</span>

<span class="token comment"># 安装 dos2unix（防止 Windows 换行符导致 Vim 解析错误）</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> dos2unix <span class="token parameter variable">-y</span>

<span class="token comment"># 安装 fzf（快速搜索文件）</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> fzf <span class="token parameter variable">-y</span>
</code></pre>
    <hr/>
    <h3>
     <a id="2__vimplug_26">
     </a>
     2. 安装
     <code>
      vim-plug
     </code>
     （插件管理器）
    </h3>
    <pre><code class="prism language-bash"><span class="token function">curl</span> <span class="token parameter variable">-fLo</span> ~/.vim/autoload/plug.vim --create-dirs <span class="token punctuation">\</span>
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
</code></pre>
    <hr/>
    <h3>
     <a id="3__vimrc_35">
     </a>
     3. 配置
     <code>
      ~/.vimrc
     </code>
    </h3>
    <pre><code class="prism language-bash"><span class="token function">vim</span> ~/.vimrc
</code></pre>
    <p>
     然后粘贴以下
     <strong>
      精简版配置
     </strong>
     ：
    </p>
    <pre><code class="prism language-vim">" 自动安装 vim-plug（如果未安装）
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
        https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall | source $MYVIMRC
endif

" 基础配置
set number
set relativenumber
set cursorline
set mouse=a
set clipboard=unnamedplus

" 代码缩进
set tabstop=4
set shiftwidth=4
set expandtab
set autoindent
set smartindent

" 搜索优化
set ignorecase
set smartcase
set incsearch
set hlsearch

" 启动优化
set lazyredraw
set updatetime=300

" 启用文件类型检测 &amp; 插件支持
filetype plugin indent on

" 插件管理
call plug#begin('~/.vim/plugged')


" 代码补全 &amp; 语法检查
Plug 'neoclide/coc.nvim', {'branch': 'release'}

" 语法解析 &amp; 高亮
Plug 'nvim-treesitter/nvim-treesitter', {'do': ':TSUpdate'}

" 代码片段
Plug 'SirVer/ultisnips'
Plug 'honza/vim-snippets'

" 代码格式化（Python &amp; JS）
Plug 'psf/black', { 'for': 'python' }
Plug 'prettier/vim-prettier', { 'do': 'npm install' }

" 目录树
Plug 'preservim/nerdtree'

" 状态栏美化
Plug 'vim-airline/vim-airline'

call plug#end()

" 绑定快捷键
nnoremap &lt;leader&gt;n :NERDTreeToggle&lt;CR&gt;  " &lt;leader&gt;n 打开/关闭目录树
nnoremap &lt;leader&gt;f :Files&lt;CR&gt;  " &lt;leader&gt;f 搜索文件（需要 fzf）

" 代码补全（Coc.nvim）
inoremap &lt;silent&gt;&lt;expr&gt; &lt;TAB&gt; pumvisible() ? "\&lt;C-n&gt;" : "\&lt;TAB&gt;"
nnoremap &lt;silent&gt; gd &lt;Plug&gt;(coc-definition)  " 跳转到定义
nnoremap &lt;silent&gt; K :call CocActionAsync('doHover')&lt;CR&gt;  " 显示文档
nnoremap &lt;leader&gt;f :CocFix&lt;CR&gt;  " 自动修复代码

" 代码格式化
nnoremap &lt;leader&gt;b :Black&lt;CR&gt;  " Python 代码格式化
nnoremap &lt;leader&gt;p :Prettier&lt;CR&gt;  " JS/TS/HTML 代码格式化
</code></pre>
    <hr/>
    <h3>
     <a id="4__121">
     </a>
     4. 安装插件
    </h3>
    <p>
     打开 Vim，运行：
    </p>
    <pre><code class="prism language-vim">:PlugInstall
</code></pre>
    <p>
     等待所有插件安装完成。
    </p>
    <hr/>
    <h3>
     <a id="5_Cocnvim_132">
     </a>
     5. 代码补全（Coc.nvim）
    </h3>
    <p>
     安装 Python、C/C++、JavaScript 的 LSP：
    </p>
    <pre><code class="prism language-vim">:CocInstall coc-python coc-clangd coc-tsserver
</code></pre>
    <hr/>
    <h3>
     <a id="6__141">
     </a>
     6. 目录树
    </h3>
    <p>
     使用快捷键：
    </p>
    <pre><code class="prism language-vim">&lt;leader&gt;n
</code></pre>
    <p>
     （默认
     <code>
      leader
     </code>
     是
     <code>
      \
     </code>
     ，所以
     <code>
      \n
     </code>
     会打开/关闭目录树）
    </p>
    <hr/>
    <h3>
     <a id="7__151">
     </a>
     7. 代码格式化
    </h3>
    <pre><code class="prism language-vim">nnoremap &lt;leader&gt;b :Black&lt;CR&gt;  " Python 格式化
nnoremap &lt;leader&gt;p :Prettier&lt;CR&gt;  " JS/TS/HTML 格式化
</code></pre>
    <ul>
     <li>
      <strong>
       Python 文件
      </strong>
      ：
      <code>
       \b
      </code>
      自动格式化
     </li>
     <li>
      <strong>
       JavaScript/TypeScript/HTML
      </strong>
      ：
      <code>
       \p
      </code>
      自动格式化
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="8____163">
     </a>
     8. 语法解析 + 代码高亮
    </h3>
    <p>
     <strong>
      安装 Treesitter 语法解析
     </strong>
    </p>
    <pre><code class="prism language-vim">:TSInstall python javascript c cpp html css json
</code></pre>
    <p>
     然后在
     <code>
      ~/.vimrc
     </code>
     添加：
    </p>
    <pre><code class="prism language-vim">lua &lt;&lt; EOF
require'nvim-treesitter.configs'.setup {
  ensure_installed = "all",
  highlight = { enable = true },
  indent = { enable = true },
}
EOF
</code></pre>
    <hr/>
    <h3>
     <a id="9__183">
     </a>
     9. 终极优化
    </h3>
    <p>
     让窗口切换更快：
    </p>
    <pre><code class="prism language-vim">nnoremap &lt;C-h&gt; &lt;C-w&gt;h
nnoremap &lt;C-l&gt; &lt;C-w&gt;l
nnoremap &lt;C-j&gt; &lt;C-w&gt;j
nnoremap &lt;C-k&gt; &lt;C-w&gt;k
</code></pre>
    <hr/>
    <h3>
     <a id="__195">
     </a>
     🎯 结论
    </h3>
    <p>
     ✅ 代码补全（Coc.nvim）
     <br/>
     ✅ 语法解析（Treesitter）
     <br/>
     ✅ 代码格式化（Black, Prettier）
     <br/>
     ✅ 代码片段（UltiSnips）
     <br/>
     ✅ 目录管理（NERDTree）
     <br/>
     ✅ 状态栏美化（Airline）
     <br/>
     ✅ 系统剪贴板同步
     <br/>
     ✅ 窗口快捷键优化
    </p>
    <hr/>
    <h3>
     <a id="__3__207">
     </a>
     🔥 只需 3 步完成安装
    </h3>
    <pre><code class="prism language-bash"><span class="token comment"># 1. 安装 Vim &amp; 必要工具</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> vim-gtk nodejs <span class="token function">npm</span> dos2unix fzf <span class="token parameter variable">-y</span>

<span class="token comment"># 2. 安装 vim-plug</span>
<span class="token function">curl</span> <span class="token parameter variable">-fLo</span> ~/.vim/autoload/plug.vim --create-dirs <span class="token punctuation">\</span>
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

<span class="token comment"># 3. 在 Vim 里运行</span>
<span class="token function">vim</span> ~/.vimrc  <span class="token comment"># 复制上面的配置</span>
:PlugInstall  <span class="token comment"># 安装插件</span>
:CocInstall coc-python coc-clangd coc-tsserver  <span class="token comment"># 安装 LSP</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a76649c80dde4a22873927486a94f0e4.png"/>
    </p>
    <hr/>
    <h3>
     <a id="__Vim__227">
     </a>
     🎉 现在，你的 Vim 已经优化为高效的开发工具！
    </h3>
    <p>
     如果有其他需要优化的地方，欢迎继续交流 🚀😊
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35383634383839302f:61727469636c652f64657461696c732f313436323838363635" class_="artid" style="display:none">
 </p>
</div>


