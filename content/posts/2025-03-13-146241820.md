---
layout: post
title: "JavaScript性能优化实战指南"
date: 2025-03-13 20:39:59 +0800
description: "通过**「分析→优化→监控→迭代」闭环**，结合性能火焰图与真实用户监控（RUM）数据，持续提升JavaScript应用的流畅度与响应速度"
keywords: "JavaScript性能优化实战指南"
categories: ['未分类']
tags: ['性能优化', '开发语言', 'Javascript']
artid: "146241820"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146241820
    alt: "JavaScript性能优化实战指南"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146241820
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146241820
cover: https://bing.ee123.net/img/rand?artid=146241820
image: https://bing.ee123.net/img/rand?artid=146241820
img: https://bing.ee123.net/img/rand?artid=146241820
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     JavaScript性能优化实战指南
    </h1>
   </div>
  </div>
 </div>
 <a data-report-click='{"spm":"1001.2101.3001.8632"}' data-report-query="spm=1001.2101.3001.8632" data-report-view='{"spm":"1001.2101.3001.8632"}' href="https://activity.csdn.net/topic?id=10857" id="creatActivityHref" style="display:block;margin-top:16px;font-size:16px;color:#5094d5;font-weight:500" target="_blank">
  #JavaScript性能优化实战#
 </a>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="JavaScript_2">
     </a>
     <strong>
      JavaScript性能优化实战指南
     </strong>
    </h4>
    <hr/>
    <h5>
     <a id="1__6">
     </a>
     <strong>
      1. 性能分析工具与指标
     </strong>
    </h5>
    <p>
     <strong>
      核心工具链
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        Chrome DevTools
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         Performance面板
        </strong>
        ：记录运行时性能，分析长任务（Long Tasks）、强制回流（Layout Shifts）、函数调用堆栈。
       </li>
       <li>
        <strong>
         Memory面板
        </strong>
        ：抓取堆快照，检测内存泄漏（Detached DOM节点、闭包残留）。
       </li>
       <li>
        <strong>
         Coverage工具
        </strong>
        ：分析未使用的JS代码（代码覆盖率），指导按需加载。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        Lighthouse
       </strong>
       ：
      </p>
      <ul>
       <li>
        生成性能评分报告，聚焦关键指标：
        <ul>
         <li>
          <strong>
           FCP (First Contentful Paint)
          </strong>
         </li>
         <li>
          <strong>
           TTI (Time to Interactive)
          </strong>
         </li>
         <li>
          <strong>
           TBT (Total Blocking Time)
          </strong>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <strong>
      性能指标阈值
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       长任务
      </strong>
      ：单次主线程任务 ≤ 50ms（避免阻塞UI线程）。
     </li>
     <li>
      <strong>
       内存占用
      </strong>
      ：页面生命周期内堆内存波动 ≤ 20%（警惕内存泄漏）。
     </li>
    </ul>
    <hr/>
    <h5>
     <a id="2__25">
     </a>
     <strong>
      2. 代码执行效率优化
     </strong>
    </h5>
    <p>
     <strong>
      关键优化策略
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        减少主线程负载
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 坏实践：同步遍历大数据</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">1e6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token function">heavyCalculation</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻塞主线程</span>

<span class="token comment">// 优化：分片执行（使用 requestIdleCallback 或 setTimeout）</span>
<span class="token keyword">function</span> <span class="token function">processChunk</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">heavyCalculation</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">requestIdleCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">processChunk</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> end <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">processChunk</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        算法复杂度优化
       </strong>
       ：
      </p>
      <ul>
       <li>
        将 O(n²) 的嵌套循环改为哈希表（Map/Set）实现 O(1) 查找。
       </li>
      </ul>
      <pre><code class="prism language-javascript"><span class="token comment">// 优化前：O(n²)</span>
<span class="token keyword">const</span> <span class="token function-variable function">findDuplicates</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">!==</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 优化后：O(n)</span>
<span class="token keyword">const</span> <span class="token function-variable function">findDuplicates</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> seen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> seen<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>seen<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        避免强制同步布局（Layout Thrashing）
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 坏实践：读写样式导致多次回流</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> height <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span> <span class="token comment">// 触发回流</span>
element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span> <span class="token comment">// 再次触发回流</span>

<span class="token comment">// 优化：批量读写（使用 FastDOM 或手动批处理）</span>
<span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>element<span class="token punctuation">.</span>offsetHeight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h5>
     <a id="3__74">
     </a>
     <strong>
      3. 内存管理优化
     </strong>
    </h5>
    <p>
     <strong>
      内存泄漏检测与修复
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        常见泄漏场景
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <strong>
          未清除的定时器/事件监听
         </strong>
         ：
        </p>
        <pre><code class="prism language-javascript"><span class="token comment">// 泄漏示例</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 组件销毁时未移除监听</span>
<span class="token punctuation">}</span>

<span class="token comment">// 修复：在unmount阶段移除</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
       </li>
       <li>
        <p>
         <strong>
          闭包引用外部变量
         </strong>
         ：
        </p>
        <pre><code class="prism language-javascript"><span class="token comment">// 泄漏示例：大对象被闭包长期持有</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> bigData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1e6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> bigData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// bigData 无法被GC回收</span>
<span class="token punctuation">}</span>

<span class="token comment">// 修复：手动释放引用</span>
<span class="token keyword">let</span> closureRef <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> bigData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1e6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">closureRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> bigData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 需要时手动置空</span>
  closureRef <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        弱引用优化
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 使用 WeakMap/WeakSet 避免内存泄漏</span>
<span class="token keyword">const</span> weakCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">cacheHeavyObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>weakCache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">heavyCompute</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    weakCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> weakCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h5>
     <a id="4__129">
     </a>
     <strong>
      4. 异步与并行处理
     </strong>
    </h5>
    <p>
     <strong>
      Web Workers多线程优化
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        主线程与Worker通信示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 主线程</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'worker.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">data</span><span class="token operator">:</span> largeArray <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Result:'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// worker.js</span>
self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">processData</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 耗时计算</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        OffscreenCanvas渲染优化
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 将Canvas渲染迁移至Worker</span>
<span class="token keyword">const</span> offscreen <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transferControlToOffscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'canvas-worker.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">canvas</span><span class="token operator">:</span> offscreen <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>offscreen<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      空闲时段调度（Idle Period）
     </strong>
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// 使用 requestIdleCallback 执行低优先级任务</span>
<span class="token function">requestIdleCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">deadline</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>deadline<span class="token punctuation">.</span><span class="token function">timeRemaining</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">processLowPriorityTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h5>
     <a id="5__165">
     </a>
     <strong>
      5. 资源加载与执行优化
     </strong>
    </h5>
    <p>
     <strong>
      代码分割与懒加载
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        动态导入（Dynamic Import）
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 按需加载模块</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./heavy-module.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        Preload/Prefetch优化加载时机
       </strong>
       ：
      </p>
      <pre><code class="prism language-html"><span class="token comment">&lt;!-- 预加载关键资源 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>critical.js<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>script<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 预取非关键资源 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>next-page-chart.js<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>script<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      执行时机控制
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        延迟非关键脚本
       </strong>
       ：
      </p>
      <pre><code class="prism language-html"><span class="token comment">&lt;!-- 使用 defer/async 控制执行顺序 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>analytics.js<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ads.js<span class="token punctuation">"</span></span> <span class="token attr-name">async</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        空闲时段加载第三方脚本
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 延迟加载非必要脚本（如评论区、广告）</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'requestIdleCallback'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">requestIdleCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">loadThirdPartyScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>loadThirdPartyScript<span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h5>
     <a id="6__204">
     </a>
     <strong>
      6. 框架级性能优化
     </strong>
    </h5>
    <p>
     <strong>
      React优化实践
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        避免不必要的渲染
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 使用 React.memo + useCallback 缓存组件</span>
<span class="token keyword">const</span> MemoizedComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 父组件传递稳定引用</span>
<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token function">computeValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>MemoizedComponent data<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        虚拟列表优化大数据渲染
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token comment">// 使用 react-window 渲染长列表</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> FixedSizeList <span class="token keyword">as</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-window'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Row</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> style <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>style<span class="token punctuation">}</span><span class="token operator">&gt;</span>Row <span class="token punctuation">{<!-- --></span>index<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>List height<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">600</span><span class="token punctuation">}</span> itemCount<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">100000</span><span class="token punctuation">}</span> itemSize<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">35</span><span class="token punctuation">}</span> width<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">300</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{<!-- --></span>Row<span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      Vue优化实践
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        v-once与虚拟滚动
       </strong>
       ：
      </p>
      <pre><code class="prism language-html"><span class="token comment">&lt;!-- 静态内容单次渲染 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-once</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ staticTitle }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 使用 vue-virtual-scroller 优化 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualScroller</span> <span class="token attr-name">:items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>largeList<span class="token punctuation">"</span></span> <span class="token attr-name">item-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        计算属性缓存
       </strong>
       ：
      </p>
      <pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">filteredList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 缓存结果，避免重复计算</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h5>
     <a id="7__262">
     </a>
     <strong>
      7. 实战案例
     </strong>
    </h5>
    <p>
     <strong>
      案例1：优化大数据表格渲染
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       问题
      </strong>
      ：1万行数据的表格渲染卡顿（FPS &lt; 30）。
     </li>
     <li>
      <strong>
       优化步骤
      </strong>
      ：
      <ol>
       <li>
        使用虚拟滚动仅渲染可视区域元素。
       </li>
       <li>
        将单元格渲染迁移至Web Worker计算。
       </li>
       <li>
        用CSS
        <code>
         transform
        </code>
        替代
        <code>
         top
        </code>
        定位滚动位置。
       </li>
      </ol>
     </li>
     <li>
      <strong>
       结果
      </strong>
      ：FPS提升至60，内存占用下降40%。
     </li>
    </ul>
    <p>
     <strong>
      案例2：首屏加载性能优化
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       问题
      </strong>
      ：主JS文件体积2MB，TTI超过5秒。
     </li>
     <li>
      <strong>
       优化步骤
      </strong>
      ：
      <ol>
       <li>
        代码分割：基于路由动态加载模块。
       </li>
       <li>
        压缩+Tree Shaking：使用Terser删除未使用代码。
       </li>
       <li>
        预加载关键字体和图片。
       </li>
      </ol>
     </li>
     <li>
      <strong>
       结果
      </strong>
      ：首屏JS体积降至500KB，TTI缩短至1.8秒。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="Checklist_281">
     </a>
     <strong>
      性能优化Checklist
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        代码层面
       </strong>
       ：
      </p>
      <ul>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        避免同步阻塞操作（如同步XHR、大循环）。
       </li>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        使用Web Workers处理CPU密集型任务。
       </li>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        减少全局变量，及时解除引用。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        渲染层面
       </strong>
       ：
      </p>
      <ul>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        使用
        <code>
         requestAnimationFrame
        </code>
        调度动画。
       </li>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        避免频繁操作DOM，批量修改样式。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        工程化层面
       </strong>
       ：
      </p>
      <ul>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        启用Gzip/Brotli压缩。
       </li>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        使用HTTP/2或HTTP/3优化资源加载。
       </li>
       <li class="task-list-item">
        <input class="task-list-item-checkbox" disabled="disabled" type="checkbox"/>
        配置长期缓存（文件名Hash）。
       </li>
      </ul>
     </li>
    </ul>
    <p>
     通过**「分析→优化→监控→迭代」闭环**，结合性能火焰图与真实用户监控（RUM）数据，持续提升JavaScript应用的流畅度与响应速度。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f6f666665725f7363686f6f6c2f:61727469636c652f64657461696c732f313436323431383230" class_="artid" style="display:none">
 </p>
</div>


