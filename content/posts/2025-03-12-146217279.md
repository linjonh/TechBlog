---
layout: post
title: "centos8.0系统部署zabbix6.0监控"
date: 2025-03-12 23:14:49 +0800
description: "http://192.168.140.200/zabbix， 按提示填写相关信息即可。注意：也可以选择安装maraidb，但要求版本至少为mariadb-10.5版本。使用临时密码登录数据库，修改root密码。关闭防火墙、SELinux。设置主机名、添加解析。"
keywords: "centos8.0系统部署zabbix6.0监控"
categories: ['10Zabbix']
tags: ['Zabbix']
artid: "146217279"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146217279
    alt: "centos8.0系统部署zabbix6.0监控"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146217279
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146217279
cover: https://bing.ee123.net/img/rand?artid=146217279
image: https://bing.ee123.net/img/rand?artid=146217279
img: https://bing.ee123.net/img/rand?artid=146217279
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     centos8.0系统部署zabbix6.0监控
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     一、部署过程
    </h2>
    <h3>
     <a id="1_2">
     </a>
     1、确认系统版本
    </h3>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/redhat-release </span>
CentOS Linux release <span class="token number">8.5</span>.2111
</code></pre>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">4.18</span>.0-348.7.1.el8_5.x86_64
<span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <h3>
     <a id="2_12">
     </a>
     2、主机基础环境设置
    </h3>
    <p>
     设置主机名、添加解析
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># hostnamectl set-hostname zabbix_server.linux.com</span>

<span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/hosts</span>
<span class="token number">127.0</span>.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

<span class="token number">192.168</span>.140.200	zabbix_server.linux.com
</code></pre>
    <p>
     关闭防火墙、SELinux
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># getenforce </span>
Disabled

<span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># systemctl status firewalld.service</span>
● firewalld.service
   Loaded: masked <span class="token punctuation">(</span>Reason: Unit firewalld.service is masked.<span class="token punctuation">)</span>
   Active: inactive <span class="token punctuation">(</span>dead<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="3MySQL_80_35">
     </a>
     3、安装MySQL 8.0数据库
    </h3>
    <p>
     注意：也可以选择安装maraidb，但要求版本至少为mariadb-10.5版本
    </p>
    <h4>
     <a id="31_MySQL_80_37">
     </a>
     3.1 安装MySQL 8.0仓库
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># rpm -ivh https://repo.mysql.com/mysql80-community-release-el8.rpm</span>
</code></pre>
    <h4>
     <a id="32__41">
     </a>
     3.2 安装软件
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># yum install mysql-community-server mariadb-connector-c</span>
<span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable --now mysqld</span>
</code></pre>
    <h4>
     <a id="33_root_46">
     </a>
     3.3 设置root用户密码
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># grep -i password /var/log/mysqd.log</span>
</code></pre>
    <p>
     使用临时密码登录数据库，修改root密码
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># mysql -uroot -p</span>
mysql<span class="token operator">&gt;</span> alter user <span class="token string">'root'</span>@<span class="token string">'localhost'</span> identified by <span class="token string">'WWW.1.com'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="34_zabbix_57">
     </a>
     3.4 创建zabbix数据库，授权用户
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># mysql -uroot -pWWW.1.com</span>
mysql<span class="token operator">&gt;</span> CREATE DATABASE zabbix CHARACTER SET utf8mb4 COLLATE utf8mb4_bin<span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> CREATE <span class="token environment constant">USER</span> <span class="token string">'zabbix'</span>@<span class="token string">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">'WWW.1.com'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> GRANT ALL PRIVILEGES ON zabbix.* TO <span class="token string">'zabbix'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> FLUSH PRIVILEGES<span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> EXIT<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="4zabbix60_67">
     </a>
     4、配置zabbix6.0仓库
    </h3>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/yum.repos.d/zabbix60.repo </span>
<span class="token punctuation">[</span>zabbix60<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>zabbix60
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://mirrors.aliyun.com/zabbix/zabbix/6.0/rhel/8/x86_64/
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
</code></pre>
    <h3>
     <a id="5zabbix_77">
     </a>
     5、安装zabbix服务端软件
    </h3>
    <pre><code class="prism language-bash">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> zabbix-server-mysql zabbix-web-mysql zabbix-apache-conf zabbix-sql-scripts zabbix-agent
</code></pre>
    <h3>
     <a id="6zabbix_82">
     </a>
     6、导入zabbix数据表
    </h3>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/share/zabbix-sql-scripts/mysql/</span>
<span class="token punctuation">[</span>root@zabbix_server mysql<span class="token punctuation">]</span><span class="token comment"># ls</span>
double.sql  history_pk_prepare.sql  proxy.sql  server.sql.gz
<span class="token punctuation">[</span>root@zabbix_server mysql<span class="token punctuation">]</span><span class="token comment"># zcat server.sql.gz | mysql -uroot -p zabbix </span>
</code></pre>
    <h3>
     <a id="7zabbix_89">
     </a>
     7、修改zabbix服务端配置文件，指定数据库连接信息
    </h3>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/zabbix/zabbix_server.conf </span>
<span class="token assign-left variable">DBHost</span><span class="token operator">=</span>localhost
<span class="token assign-left variable">DBName</span><span class="token operator">=</span>zabbix
<span class="token assign-left variable">DBUser</span><span class="token operator">=</span>zabbix
<span class="token assign-left variable">DBPassword</span><span class="token operator">=</span>WWW.1.com
</code></pre>
    <h3>
     <a id="8zabbixserver_98">
     </a>
     8、启动zabbix-server服务
    </h3>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable --now zabbix-server</span>
<span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># netstat -tunlp | grep zabbix</span>
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:10051           <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">8037</span>/zabbix_server   
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::10051                :::*                    LISTEN      <span class="token number">8037</span>/zabbix_server  
</code></pre>
    <h3>
     <a id="9php_106">
     </a>
     9、添加php时区
    </h3>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/php-fpm.d/zabbix.conf</span>
php_value<span class="token punctuation">[</span>date.timezone<span class="token punctuation">]</span> <span class="token operator">=</span> Asia/Shanghai 

<span class="token punctuation">[</span>root@zabbix_server ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable --now httpd php-fpm</span>
</code></pre>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost fonts<span class="token punctuation">]</span><span class="token comment"># netstat -tunlp | grep http</span>
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::80                   :::*                    LISTEN      <span class="token number">8152</span>/httpd          
<span class="token punctuation">[</span>root@localhost fonts<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre>
    <h3>
     <a id="10zabbix_119">
     </a>
     10、访问zabbix前端界面，进行初始化
    </h3>
    <p>
     http://192.168.140.200/zabbix， 按提示填写相关信息即可
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031303139383730392f:61727469636c652f64657461696c732f313436323137323739" class_="artid" style="display:none">
 </p>
</div>


