---
layout: post
title: "Docker-部署-Vaultwarden"
date: 2025-03-07 12:12:55 +0800
description: "https://rs.ppgg.in/  # Vaultwarden Wiki 中文版https://geekdaxue.co/read/Vaultwarden-Wiki-CN/README.md  # Vaultwarden Wiki 中文版https://bitwarden.com/download/  # 客户端下载地址。"
keywords: "Docker 部署 Vaultwarden"
categories: ['Linux', 'Docker']
tags: ['运维', '容器', 'Linux', 'Docker']
artid: "146092352"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146092352
    alt: "Docker-部署-Vaultwarden"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146092352
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146092352
cover: https://bing.ee123.net/img/rand?artid=146092352
image: https://bing.ee123.net/img/rand?artid=146092352
img: https://bing.ee123.net/img/rand?artid=146092352
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Docker 部署 Vaultwarden
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     一、前言
    </h2>
    <h3>
     <a id="1__2">
     </a>
     1. 官网
    </h3>
    <h4>
     <a id="11_Vaultwarden_4">
     </a>
     1.1 Vaultwarden
    </h4>
    <p>
     https://github.com/dani-garcia/vaultwarden
    </p>
    <p>
     https://github.com/wcjxixi/Vaultwarden-Wiki-Chn
    </p>
    <p>
     https://hub.docker.com/r/vaultwarden/server
    </p>
    <p>
     https://rs.ppgg.in/ # Vaultwarden Wiki 中文版
    </p>
    <p>
     https://geekdaxue.co/read/Vaultwarden-Wiki-CN/README.md # Vaultwarden Wiki 中文版
    </p>
    <p>
     https://bitwarden.com/download/ # 客户端下载地址
    </p>
    <h4>
     <a id="12_Bitwarden_18">
     </a>
     1.2 Bitwarden
    </h4>
    <p>
     https://bitwarden.com
     <br/>
     https://github.com/bitwarden
    </p>
    <p>
     https://github.com/bitwarden/server
    </p>
    <h3>
     <a id="2_Vaultwarden__25">
     </a>
     2. Vaultwarden 是什么
    </h3>
    <p>
     2021-04-27：从
     <a href="https://github.com/dani-garcia/vaultwarden/releases/tag/1.21.0">
      v1.21.0
     </a>
     开始，bitwarden_rs 项目更名为 Vaultwarden。参阅
     <a href="https://github.com/dani-garcia/vaultwarden/discussions/1642">
      #1642
     </a>
     了解更多说明。
    </p>
    <p>
     这里是对官方
     <a href="https://github.com/dani-garcia/vaultwarden">
      Vaultwarden
     </a>
     （以前叫 bitwarden_rs）
     <a href="https://github.com/dani-garcia/vaultwarden/wiki">
      Wiki
     </a>
     的中文翻译。
    </p>
    <p>
     Vaultwarden 是一个用于本地搭建 Bitwarden 服务器的第三方 Docker 项目。仅在部署的时候使用 Vaultwarden 镜像，桌面端、移动端、浏览器扩展等客户端均使用官方 Bitwarden 客户端。
    </p>
    <p>
     Vaultwarden 很轻量，对于不希望使用官方的占用大量资源的自托管部署而言，它是理想的选择。
    </p>
    <h3>
     <a id="3_Vaultwarden__Bitwarden__35">
     </a>
     3. Vaultwarden 与 Bitwarden 的区别
    </h3>
    <ul>
     <li>
      <p>
       除不支持 Bitwarden 官方企业版的部分功能（详情见
       <a href="https://rs.ppgg.in/home#missing-features" rel="nofollow">
        这里
       </a>
       ）外，其他大部分功能均
       <strong>
        免费
       </strong>
       支持。并跟随官方版本保持及时更新。
      </p>
     </li>
     <li>
      <p>
       Vaultwarden 比 Bitwarden 官方版更轻量。官方版使用 .Net 开发，使用 MSSQL 数据库，要求至少 2GB 内存；Vaultwarden 使用 Rust 编写，改用 SQLite 数据库（现在也支持 MySQL 和 PostgreSQL），运行时只需要 10M 内存，可以说对硬件基本没有要求。
      </p>
     </li>
    </ul>
    <h2>
     <a id="_43">
     </a>
     二、安装部署
    </h2>
    <h3>
     <a id="1__Docker_45">
     </a>
     1. 安装 Docker
    </h3>
    <pre><code class="prism language-shell"><span class="token function">curl</span> https://download.docker.com/linux/centos/docker-ce.repo <span class="token parameter variable">-o</span> /etc/yum.repos.d/docker.repo <span class="token operator">&amp;&amp;</span> yum <span class="token function">install</span> docker-ce <span class="token parameter variable">-y</span> <span class="token operator">&amp;&amp;</span> <span class="token function">docker</span> <span class="token parameter variable">-v</span> <span class="token operator">&amp;&amp;</span> systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> <span class="token function">docker</span>
</code></pre>
    <h3>
     <a id="2__vaultwarden__51">
     </a>
     2. 新建存放 vaultwarden 数据的目录
    </h3>
    <pre><code class="prism language-shell"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /vaultwarden/nginx <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> /vaultwarden
</code></pre>
    <h3>
     <a id="3__composeyaml__57">
     </a>
     3. 编写 compose.yaml 文件
    </h3>
    <pre><code class="prism language-yaml"><span class="token punctuation">[</span>root@localhost vaultwarden<span class="token punctuation">]</span><span class="token comment"># cat &lt;&lt;'EOF' &gt; compose.yaml</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">vaultwarden</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> vaultwarden/server<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> vaultwarden
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
       <span class="token comment">#- ADMIN_TOKEN=hiyXZUmBwJ4sK5EHdvEnEO+2UG12367N3MoC9ZiG5EklcI5epC159/NdxHNoNqZB  # admin页管理密码</span>
        <span class="token punctuation">-</span> DOMAIN=https<span class="token punctuation">:</span>//vw.land.com
        <span class="token punctuation">-</span> TZ=Asia/Shanghai        <span class="token comment"># 设置时区</span>
        <span class="token comment"># 设置邮箱功能</span>
        <span class="token punctuation">-</span> SMTP_HOST=smtphz.qiye.163.com    <span class="token comment"># 填写发送邮件服务器的地址</span>
        <span class="token punctuation">-</span> SMTP_FROM=land@163.com
        <span class="token punctuation">-</span> SMTP_PORT=465
        <span class="token punctuation">-</span> SMTP_SSL=false
        <span class="token punctuation">-</span> SMTP_EXPLICIT_TLS=true
        <span class="token punctuation">-</span> SMTP_USERNAME=land@163.com
        <span class="token punctuation">-</span> SMTP_PASSWORD=j3w8Fxzj123498PJ   <span class="token comment"># 可以填客户端授权码</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./vw<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/data/
    <span class="token comment">#ports:</span>
     <span class="token comment"># - 8080:80</span>

  <span class="token key atrule">vwnginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.27.4
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./vw<span class="token punctuation">-</span>nginx<span class="token punctuation">:</span>/etc/nginx/conf.d/
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"80:80"</span>
      <span class="token punctuation">-</span> <span class="token string">"443:443"</span>
EOF
</code></pre>
    <h3>
     <a id="4__nginx__94">
     </a>
     4. 编写 nginx 的配置文件
    </h3>
    <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost vaultwarden<span class="token punctuation">]</span><span class="token comment"># cat &lt;&lt;'EOF' &gt; nginx/default.conf</span>
server <span class="token punctuation">{<!-- --></span>
    listen <span class="token number">80</span><span class="token punctuation">;</span>
    server_name vw.land.com<span class="token punctuation">;</span>

    <span class="token comment"># 将 HTTP 请求重定向到 HTTPS</span>
    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

server <span class="token punctuation">{<!-- --></span>
    listen <span class="token number">443</span> ssl<span class="token punctuation">;</span>
    server_name vw.land.com<span class="token punctuation">;</span>

    <span class="token comment"># 隐藏版本号</span>
    server_tokens off<span class="token punctuation">;</span>

    <span class="token comment"># 设置 SSL 证书和私钥</span>
    ssl_certificate /etc/nginx/conf.d/server.crt<span class="token punctuation">;</span>  <span class="token comment"># 证书文件</span>
    ssl_certificate_key /etc/nginx/conf.d/server.key<span class="token punctuation">;</span>   <span class="token comment"># 私钥文件</span>

    <span class="token comment"># 其他 SSL 配置</span>
    ssl_protocols TLSv1.2 TLSv1.3<span class="token punctuation">;</span>  <span class="token comment"># 启用现代的 TLS 协议</span>
    ssl_ciphers <span class="token string">'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:ECDHE-RSA-AES128-GCM-SHA256'</span><span class="token punctuation">;</span>
    ssl_prefer_server_ciphers on<span class="token punctuation">;</span>

    <span class="token comment"># 设置其他安全头（可选）</span>
    add_header Strict-Transport-Security <span class="token string">"max-age=31536000; includeSubDomains"</span> always<span class="token punctuation">;</span>

    <span class="token comment"># 配置反向代理到内部服务</span>
    location / <span class="token punctuation">{<!-- --></span>
    proxy_pass http://vaultwarden<span class="token punctuation">;</span>
    proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>  <span class="token comment"># 设置代理请求的 Host 头为客户端原始请求的 Host 头（如，如果客户端访问 http://example.com，则 Host 头的值为 example.com）</span>
    proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>  <span class="token comment"># 通过 X-Real-IP 头获取客户端的真实 IP 地址，而不是 Nginx 服务器的 IP 地址</span>
    proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>  <span class="token comment"># 用于记录客户端的原始 IP 地址和经过的所有代理服务器 IP 地址</span>
    proxy_set_header X-Forwarded-Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>  <span class="token comment"># 可以通过 X-Forwarded-Proto 头判断客户端使用了 HTTPS 还是 HTTP 协议。</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
EOF
</code></pre>
    <h3>
     <a id="5__137">
     </a>
     5. 启动容器
    </h3>
    <pre><code class="prism language-shell"><span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre>
    <h4>
     <a id="51__vaultwarden__143">
     </a>
     5.1 查看 vaultwarden 的版本
    </h4>
    <pre><code class="prism language-shell"><span class="token comment"># 查看 vaultwarden 容器的日志文件能看到版本信息</span>
<span class="token punctuation">[</span>root@localhost vaultwarden<span class="token punctuation">]</span><span class="token comment"># docker logs vaultwarden</span>

/--------------------------------------------------------------------<span class="token punctuation">\</span>
<span class="token operator">|</span>                        Starting Vaultwarden                        <span class="token operator">|</span>
<span class="token operator">|</span>                           Version <span class="token number">1.33</span>.2                           <span class="token operator">|</span>
<span class="token operator">|</span>--------------------------------------------------------------------<span class="token operator">|</span>
<span class="token operator">|</span> This is an *unofficial* Bitwarden implementation, DO NOT use the   <span class="token operator">|</span>
<span class="token operator">|</span> official channels to report bugs/features, regardless of client.   <span class="token operator">|</span>
<span class="token operator">|</span> Send usage/configuration questions or feature requests to:         <span class="token operator">|</span>
<span class="token operator">|</span>   https://github.com/dani-garcia/vaultwarden/discussions or        <span class="token operator">|</span>
<span class="token operator">|</span>   https://vaultwarden.discourse.group/                             <span class="token operator">|</span>
<span class="token operator">|</span> Report suspected bugs/issues <span class="token keyword">in</span> the software itself at:            <span class="token operator">|</span>
<span class="token operator">|</span>   https://github.com/dani-garcia/vaultwarden/issues/new            <span class="token operator">|</span>
<span class="token punctuation">\</span>--------------------------------------------------------------------/

<span class="token punctuation">[</span><span class="token number">2025</span>-02-27 05:40:18.973<span class="token punctuation">]</span><span class="token punctuation">[</span>vaultwarden::auth<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Private key <span class="token string">'data/rsa_key.pem'</span> created correctly
<span class="token punctuation">[</span><span class="token number">2025</span>-02-27 05:40:19.136<span class="token punctuation">]</span><span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Rocket has launched from http://0.0.0.0:80
</code></pre>
    <h3>
     <a id="6_Web__168">
     </a>
     6. Web 访问登录
    </h3>
    <p>
     https://vw.land.com/
     <br/>
     账号密码需要自行创建，例如：
    </p>
    <p>
     账号：vw123@land.com # 账号以邮箱格式填写
     <br/>
     密码：8#XW%ctIpEGg # 需要满足12位数的密码
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f32313435333738332f:61727469636c652f64657461696c732f313436303932333532" class_="artid" style="display:none">
 </p>
</div>


