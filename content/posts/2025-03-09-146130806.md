---
layout: post
title: "Luna为游戏添加音效"
date: 2025-03-09 13:37:18 +0800
description: "背景音乐由GameManager脚本进行控制，而一些特定音效则是自己在脚本中需要时添加即可。这就可以根据不同场景的需要切换背景音乐了，只是靠代码逻辑来执行而已。如luna攻击时，触发战斗音效，在Battlecontrol中声明音效。如：进入战斗场景切换战斗背景音乐。"
keywords: "Luna——为游戏添加音效"
categories: ['Unity']
tags: ['游戏']
artid: "146130806"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146130806
    alt: "Luna为游戏添加音效"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146130806
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146130806
cover: https://bing.ee123.net/img/rand?artid=146130806
image: https://bing.ee123.net/img/rand?artid=146130806
img: https://bing.ee123.net/img/rand?artid=146130806
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Luna——为游戏添加音效
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     1、在GameManager中声明
    </h2>
    <pre><code class="hljs">public AudioSource audiosource;
public AudioClip normalClip;
public AudioClip battleClip;</code></pre>
    <p>
    </p>
    <h2>
     2、在GameManager资产中挂载“Audio Source”组件，并将该组件挂载到资产脚本中的声明对象
    </h2>
    <blockquote>
     <p>
      <img alt="" height="681" src="https://i-blog.csdnimg.cn/direct/ae56c3012e3440c09be921dc95ccb5e4.png" width="665">
       这就可以根据不同场景的需要切换背景音乐了，只是靠代码逻辑来执行而已。
      </img>
     </p>
    </blockquote>
    <p>
    </p>
    <h2>
     3、在GameManager中声明两种音频播放方式
    </h2>
    <pre><code class="hljs">public void playmusic(AudioClip audioClip)
{
    // 检查当前音频源的音频剪辑是否与传入的音频剪辑不同
    if(audiosource.clip != audioClip)
    {
        // 如果不同，则将音频源的音频剪辑设置为传入的音频剪辑
        audiosource.clip = audioClip;
        // 播放音频
        audiosource.Play();
    }
}


public void playsound(AudioClip audioClip)
{
    // 检查传入的音频剪辑是否有效（不为null）
    if (audioClip)
    {
        // 使用AudioSource的PlayOneShot方法播放音频剪辑
        audiosource.PlayOneShot(audioClip);
    }
}</code></pre>
    <blockquote>
     <p>
      背景音乐由GameManager脚本进行控制，而一些特定音效则是自己在脚本中需要时添加即可
     </p>
    </blockquote>
    <p>
    </p>
    <p>
     如：进入战斗场景切换战斗背景音乐
    </p>
    <pre><code class="hljs">    public void EnterOrExitBattle(bool enter=true,int addkillNum=0)
    {
        UImanager.instance.BattleUIshoworhide(true);
        battleground.SetActive(enter);
        monsterHP = 50;
        if (!enter)
        {
            killNum += addkillNum;
            if (killNum &gt; 0)
            {
                DestroyMonster(monsterGo);
            }
            playmusic(normalClip);
            if (lunaCurrentHP &lt;= 0)
            {
                lunaCurrentHP = 100;
                lunaCurrentMP = 0;
                monsterGo.transform.position += new Vector3(0, 2, 0);
            }
          
        }
        else
        {
            playmusic(battleClip); 
        }
        enterBattle = enter;
    }</code></pre>
    <p>
    </p>
    <p>
     如luna攻击时，触发战斗音效，在Battlecontrol中声明音效
    </p>
    <pre><code class="hljs">    public AudioClip attacksound;
    public AudioClip lunaattacksound;
    public AudioClip monsterAttacksound;
    public AudioClip skillsound;
    public AudioClip RecoverHPsound;
    public AudioClip hittensound;
    public AudioClip diesound;
    public AudioClip monsterDieSound;

 IEnumerator performAttacklog()
    {
        UImanager.instance.BattleUIshoworhide(false);
        lunaBattleAnimator.SetBool("move state", true);
        lunaBattleAnimator.SetFloat("move value", 1);

        lunaTrans.DOLocalMove(monsterInitPos + new Vector3(1, 0, 0), 0.5f).OnComplete(
            () =&gt;
            {
                GameManager.instance.playsound(attacksound);
                GameManager.instance.playsound(lunaattacksound);
                lunaBattleAnimator.SetBool("move state", false);
                lunaBattleAnimator.SetFloat("move value", 0);
                lunaBattleAnimator.CrossFade("attack", 0);
                
                monsterSr.DOFade(0.3f, 0.2f).OnComplete(() =&gt; { JudgeMonsterHP(-20); });
            }
        );</code></pre>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330335f38303230343139322f:61727469636c652f64657461696c732f313436313330383036" class_="artid" style="display:none">
 </p>
</div>


