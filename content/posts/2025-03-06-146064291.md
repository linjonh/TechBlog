---
layout: post
title: "江科大51单片机笔记11AT24C02I2C总线"
date: 2025-03-06 16:50:54 +0800
description: "AT24C02是一种可以实现掉电不丢失的存储器，可用于保存单片机运行时想要永久保存的数据信息存储介质：EPROM通讯接口：I2C总线容量：256字节I2C总线（intel IC BUS）是有飞利浦公司开发的一种通用数据总线两根通信线：SCL（serial clock）、SDA（serial data）同步、半双工、带数据应答。"
keywords: "江科大 51 i2c ppt"
categories: ['未分类']
tags: ['笔记', '嵌入式硬件', '51单片机']
artid: "146064291"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146064291
    alt: "江科大51单片机笔记11AT24C02I2C总线"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146064291
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146064291
cover: https://bing.ee123.net/img/rand?artid=146064291
image: https://bing.ee123.net/img/rand?artid=146064291
img: https://bing.ee123.net/img/rand?artid=146064291
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     江科大51单片机笔记【11】AT24C02（I2C总线）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、存储器
    </h2>
    <h3>
     1.介绍
    </h3>
    <p>
     <img alt="" height="437" src="https://i-blog.csdnimg.cn/direct/68122c21448444cab006a56de83e7081.png" width="736"/>
    </p>
    <p>
     RAM的特点是存储速度特别快，但是掉电会丢失；ROM的特点是存储速度特别慢，但是掉电不会丢失
    </p>
    <p>
     SRAM是所有存储器最快的，一般用于电脑的CPU高速缓存，容量相对较少，成本较高；DRAM原理是用电容存储，容值很小，需要配一个扫描电路，需要每隔一段时间补电，一般用于电脑的内存条，手机的运行内存，容量相对较大，成本较低
    </p>
    <p>
     ROM的前四个都是一个系列的，MaskROM只能读取不能写；PROM可编程，但是只能写入一次；EPROM即可以编程也可以擦除，清除需要拿紫外线照射30分钟，E2PROM这种只需要用电就可以擦除（本单片机所用）；Flash（闪存）：电脑固态硬盘，手机存储，运用最广泛；硬盘（电脑机械硬盘，利用电磁存储）、软盘（淘汰）、光盘（光信号存储）
    </p>
    <h3>
     2.简化模型
    </h3>
    <p>
     横向的线成为地址总线；竖向的线称为数据总线
    </p>
    <p>
     我们在横线赋值就是选择地址，在竖线赋值就是写入数据
    </p>
    <p>
     右边这样接一个二极管的连接方式可以有效防止其他行干扰
    </p>
    <p>
     PROM跟MaskROM其实一样，蓝色的二极管是一种特殊二极管，即很容易击穿，当我们在横线给高电压，蓝色二极管就会被击穿，就会变成右边的状态，但是被击穿之后就永远被击穿了，所以我们只能写入一次，这就是PROM
    </p>
    <p>
     <img alt="" height="424" src="https://i-blog.csdnimg.cn/direct/80f6a1d05bbd4cbf8d65285feab14d6e.png" width="837"/>
    </p>
    <h2>
     二、AT24C02
    </h2>
    <h3>
     1.介绍
    </h3>
    <ul>
     <li>
      AT24C02是一种可以实现掉电不丢失的存储器，可用于保存单片机运行时想要永久保存的数据信息
     </li>
     <li>
      存储介质：EPROM
     </li>
     <li>
      通讯接口：I2C总线
     </li>
     <li>
      容量：256字节
     </li>
     <li>
      <img alt="" height="192" src="https://i-blog.csdnimg.cn/direct/e747cf2ce8904570bb1fbc340492cf11.png" width="714"/>
     </li>
    </ul>
    <h3>
     2.引脚及应用电路
    </h3>
    <ul>
     <li>
      VCC、GND：电源（1.8V-5.5V）
     </li>
     <li>
      WP：写保护（高电平有效
     </li>
     <li>
      SCL、SDA：I2C接口
     </li>
     <li>
      A0、A1、A2：I2C地址
     </li>
    </ul>
    <p>
     <img alt="" height="241" src="https://i-blog.csdnimg.cn/direct/c1663401fd484773a52beb5ca9407a64.png" width="411"/>
    </p>
    <h3>
     3.内部结构框图
    </h3>
    <p>
     <img alt="" height="1236" src="https://i-blog.csdnimg.cn/direct/cf7ce2646a7142c38e307e34d6d6f552.png" width="1907"/>
    </p>
    <p>
    </p>
    <h2>
     三、I2C（I方C）总线（重难点）
    </h2>
    <h3>
     总览：先介绍，电路，然后学六种时序函数，写数据帧，学三种数据帧，再学习AT24C02数据帧
    </h3>
    <h3>
     1.介绍
    </h3>
    <ul>
     <li>
      I2C总线（intel IC BUS）是有飞利浦公司开发的一种通用数据总线
     </li>
     <li>
      两根通信线：SCL（serial clock）、SDA（serial data）
     </li>
     <li>
      同步、半双工、带数据应答
     </li>
     <li>
      通用的I2C总线，可以使各种设备的通信标准统一，对于厂家来说，使用成熟的方案可以缩短芯片设计周期、提高稳定性，对于应用者来说，使用通用的通信协议可以避免学习各种各样的自定义协议、降低了学习和应用的难度
     </li>
     <li>
      左1图是一个小巧的OLED屏幕，左2图是D3231，一种时钟芯片，比1302精度高很多 ，右1图是一种陀螺仪传感器，姿态传感器，用于平衡车无人机等；这些都可以通过I2C模块进行通信
     </li>
     <li>
      <img alt="" height="155" src="https://i-blog.csdnimg.cn/direct/c744af2581704c64ab74365a835002d3.png" width="609"/>
     </li>
    </ul>
    <h3>
     2.电路规范
    </h3>
    <ul>
     <li>
      所有I2C设备的SCL连在一起，SDA连在一起
     </li>
     <li>
      设别的SCL和SDA均要配置成开漏输出模式
     </li>
     <li>
      SCL和SDA各添加一个上拉电阻，阻值一般为4.7K欧左右
     </li>
     <li>
      开漏输出和上拉电阻的共同作用实现了“线与”的功能，此设计主要是为了解决多级通信互相干扰的问题
     </li>
     <li>
      <img alt="" height="757" src="https://i-blog.csdnimg.cn/direct/630b2ebd97c94185b8bd36f3afced3a8.png" width="2211"/>
     </li>
     <li>
      左图是一个连接图，开漏输出保证了CPU想通信某一个设备时，其他设备没有干扰，给1就会进入浮空状态
     </li>
     <li>
      右图是内部结构，下面的三角是一个输入的缓存，输入阻抗很大相当于断开，相当于一个电压表监视着电压；上面是目视管，相当于电子开关，给低电平导通，给高电平断开，不干扰外界
     </li>
     <li>
      <img alt="" height="199" src="https://i-blog.csdnimg.cn/direct/594bdf69dcec4a619465310c2167202d.png" width="745"/>
     </li>
    </ul>
    <h3>
     3.I2C时序结构
    </h3>
    <h4>
     （1）起始和终止
    </h4>
    <ul>
     <li>
      起始条件：SCL高电平期间，SDA从高电平切换到低电平S：Start
     </li>
     <li>
      终止条件：SCL高电平期间，SDA从低电平切换到高电平P：Stop
     </li>
    </ul>
    <p>
     <img alt="" height="275" src="https://i-blog.csdnimg.cn/direct/39d56719e8894643988a6f7c89f6c150.png" width="654"/>
    </p>
    <h4>
     （2）发送和接收
    </h4>
    <ul>
     <li>
      发送一个字节：SCL低电平期间，主机（单片机）将数据位依次放到SDA线上（高位在前），然后拉高SCL，从机将在SCL高电平期间读取数据位，所以SCL高电平期间SDA不允许有数据变化，依次循环上述过程8次，即可发送一个字节
     </li>
    </ul>
    <p>
     <img alt="" height="237" src="https://i-blog.csdnimg.cn/direct/b1b0191330564fc1aee113f6e7054bc4.png" width="796"/>
    </p>
    <ul>
     <li>
      接收一个字节： SCL低电平期间，从机将数据位依次放到SDA线上（高位在前），然后拉高SCL，主机将在SCL高电平期间读取数据位，所以SCL高电平期间SDA不允许有数据变化，依次循环上述过程8次，即可接收一个字节（主机在接收之前，需要释放SDA）
     </li>
    </ul>
    <p>
     <img alt="" height="246" src="https://i-blog.csdnimg.cn/direct/caa321c059eb400c82af58a5d491e67b.png" width="801"/>
    </p>
    <h4>
     （3）应答
    </h4>
    <ul>
     <li>
      发送应答：在接收完一个字节之后，主机在下一个时钟发送一位数据，数据0表示应答，数据1表示非应答
     </li>
     <li>
      接收应答：在发送完一个字节之后，主机在下一个时钟接收一位数据，判断从机是否应答，数据0表示应答，数据1表示非应答（主机在接收之前，需要释放SDA）
     </li>
     <li>
      <img alt="" height="230" src="https://i-blog.csdnimg.cn/direct/b7abb60b2d304225b8a2de4cc35860ed.png" width="733"/>
     </li>
    </ul>
    <h3>
     4.I2C数据帧
    </h3>
    <h4>
     （1）发送一帧数据
    </h4>
    <p>
     首先是Strat起始时序；第二个是发送“从机地址+读写位”，又分为八位，前七位是地址，地位前4位是固定的，不同芯片不同，我们24C02固定为1010，最后一位是读写标识位；第三个是RA：0，接收应答，每次发送后都会加一个接收应答，接下来是发送第一个字节，接收应答，发送第二个字节，接收应答等等等，最后是Stop结束时序
    </p>
    <p>
     <img alt="" height="209" src="https://i-blog.csdnimg.cn/direct/f14ed0321b6e4d40aa08caf6848e282f.png" width="844"/>
    </p>
    <h4>
     （2）接收一帧数据
    </h4>
    <p>
     结构差不多都一样，区分就是第二个的最后一位是读取位，然后最后一位要发送非发送应答
    </p>
    <p>
     <img alt="" height="217" src="https://i-blog.csdnimg.cn/direct/03394eb8d90647778749d8c500cf5043.png" width="852"/>
    </p>
    <h4>
     （3）符合格式（先发送再接收数据帧）
    </h4>
    <p>
     <img alt="" height="282" src="https://i-blog.csdnimg.cn/direct/78cd0766291b44b593154862cdf407d1.png" width="857"/>
    </p>
    <p>
     就是在发送完数据帧，不写终止时序，接上读取数据帧
    </p>
    <h3>
     5.AT24C02数据帧
    </h3>
    <ul>
     <li>
      字节写：在WORD ADDRESS处写入数据DATA
     </li>
    </ul>
    <p>
     <img alt="" height="82" src="https://i-blog.csdnimg.cn/direct/eae5d837322644768a6e9ee09fe9c285.png" width="854"/>
    </p>
    <ul>
     <li>
      随机读：读出在WORD ADDRESS处的数据DATA
      <img alt="" height="114" src="https://i-blog.csdnimg.cn/direct/3d64ccd6873240139e2cc5bc4b262d1d.png" width="849"/>
     </li>
     <li>
      AT24C02的固定地址为1010，可配置地址本开发板上为000，所以SLAVE ADDRESS+W为0xA0，SLAVE ADDRESS+R为0xA1
     </li>
    </ul>
    <p>
     下面看看手册里的关于这部分的解释
    </p>
    <ul>
     <li>
      字节写：在“字地址”处写入“数据”
     </li>
    </ul>
    <p>
     <img alt="" height="123" src="https://i-blog.csdnimg.cn/direct/65f9931fe68247298935e439799a0a96.png" width="268"/>
    </p>
    <ul>
     <li>
      随机读：读出在“字地址”处的“数据”
     </li>
    </ul>
    <p>
     <img alt="" height="157" src="https://i-blog.csdnimg.cn/direct/ed2c73430d234ae1904ad09f3061860f.png" width="387"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38303139353830372f:61727469636c652f64657461696c732f313436303634323931" class_="artid" style="display:none">
 </p>
</div>


