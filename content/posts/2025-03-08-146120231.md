---
layout: post
title: "LVGL开发说明"
date: 2025-03-08 18:36:25 +0800
description: "不然手势事件很容易与按键的点击事件冲突。本项目使用的触摸芯片为。，不使用触摸芯片的手势事件，手势算法有LVGL库底层计算而得。事件，当垂直或者水平方向滑动屏幕时就会触发。触摸屏点击对应的按键后就会触发回调函数。回调函数，在回调函数中必须执行。"
keywords: "LVGL开发说明"
categories: ['未分类']
tags: ['Android']
artid: "146120231"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146120231
    alt: "LVGL开发说明"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146120231
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146120231
cover: https://bing.ee123.net/img/rand?artid=146120231
image: https://bing.ee123.net/img/rand?artid=146120231
img: https://bing.ee123.net/img/rand?artid=146120231
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     LVGL开发说明
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     准备工作
    </h3>
    <ul>
     <li>
      LVGL图形化工具：Gui-Guider-Setup-1.8.0-GA.exe
     </li>
     <li>
      LVGL库：
      <a href="https://gitee.com/my_lvgl/lvgl/tree/release/v8.3/" rel="nofollow">
       lvgl-release-v8.3
      </a>
     </li>
     <li>
      屏幕触摸驱动：CST816
     </li>
     <li>
      屏幕驱动：ST7789
     </li>
     <li>
      屏幕尺寸：320 * 170
     </li>
    </ul>
    <h3>
     <a id="_6">
     </a>
     触发事件
    </h3>
    <ol>
     <li>
      <p>
       按键的点击事件
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/fa9834817cc543309eda87d05d221ccc.png"/>
      </p>
      <p>
       添加点击事件
       <br/>
       触摸屏点击对应的按键后就会触发回调函数
       <code>
        musicBtnCallback
       </code>
      </p>
      <pre><code>void musicBtnCallback(lv_event_t * e)
{
  console_infor("musicBtnCallback %s\r\n", (char *)e-&gt;user_data);
}
lv_obj_add_event_cb(guider_ui.screen_setting_music_btn_7, musicBtnCallback, LV_EVENT_CLICKED, "7");
</code></pre>
     </li>
     <li>
      <p>
       屏幕手势事件
       <br/>
       注册
       <code>
        LV_EVENT_GESTURE
       </code>
       事件，当垂直或者水平方向滑动屏幕时就会触发
       <code>
        musicGestureCallback
       </code>
       回调函数，在回调函数中必须执行
       <code>
        lv_indev_wait_release(lv_indev_get_act());
       </code>
       不然手势事件很容易与按键的点击事件冲突。本项目使用的触摸芯片为
       <code>
        CST816
       </code>
       ，寄存器
       <code>
        IrqCrl(0xFA)
       </code>
       设置为
       <code>
        cst816_Write_Reg(IrqCrl, IRQ_EN_TOUCH | IRQ_EN_CHANGE);
       </code>
       ，不使用触摸芯片的手势事件，手势算法有LVGL库底层计算而得。
      </p>
      <pre><code>void musicGestureCallback(lv_event_t * e)
{
  lv_indev_wait_release(lv_indev_get_act());
  lv_dir_t dir = lv_indev_get_gesture_dir(lv_indev_get_act());
  console_infor("musicGestureCallback %d %s\r\n", dir, (char *)e-&gt;user_data);
  if (dir == LV_DIR_BOTTOM)
  {
    
  }
  
}
lv_obj_add_event_cb(guider_ui.screen_setting_music, musicGestureCallback, LV_EVENT_GESTURE, "12");
</code></pre>
      <p>
       调试打印日志
      </p>
      <pre><code>00&gt; &lt;INFOR&gt;&lt;musicGestureCallback&gt;&lt;197&gt;: musicGestureCallback 8 12
00&gt; &lt;INFOR&gt;&lt;musicGestureCallback&gt;&lt;197&gt;: musicGestureCallback 2 12
</code></pre>
     </li>
    </ol>
    <hr/>
    <center>
     分隔符
     <center>
      2025年3月9日
     </center>
    </center>
    <hr/>
    <blockquote>
     <p>
      关于UI方面的操作还是在
      <code>
       Gui Guider
      </code>
      这个工具里实现就好，接下来就详细讲解这个工具的使用，比如控件的按键操作，数值的变化操作，界面的切换，UI操作的逻辑控制等都可以在工具里实现。
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f64726f704c696e2f:61727469636c652f64657461696c732f313436313230323331" class_="artid" style="display:none">
 </p>
</div>


