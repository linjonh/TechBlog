---
layout: post
title: "FX-模板"
date: 2025-03-12 21:41:51 +0800
description: "C++ 模板是强大的工具，能够极大地提高代码的复用性和灵活性。通过掌握函数模板、类模板、模板特化、可变参数模板等概念，你可以编写出更加通用和高效的代码。C++20 的 Concepts 进一步增强了模板的表达能力，使得模板编程更加直观和安全。"
keywords: "FX-模板"
categories: ['C']
tags: ['算法', 'Java', 'C']
artid: "146215166"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146215166
    alt: "FX-模板"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146215166
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146215166
cover: https://bing.ee123.net/img/rand?artid=146215166
image: https://bing.ee123.net/img/rand?artid=146215166
img: https://bing.ee123.net/img/rand?artid=146215166
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     FX-模板
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     C++ 模板是 C++ 中实现泛型编程的重要工具。通过模板，你可以编写与类型无关的代码，从而提高代码的复用性和灵活性。以下是 C++ 模板的一些关键概念和用法：
    </p>
    <h4>
     1. 函数模板
    </h4>
    <p>
     函数模板允许你编写一个通用的函数，可以处理不同类型的参数。
    </p>
    <pre><code class="language-cpp">template &lt;typename T&gt;
T add(T a, T b) {
    return a + b;
}

int main() {
    int i = add(1, 2);       // T 被推导为 int
    double d = add(1.5, 2.5); // T 被推导为 double
    return 0;
}</code></pre>
    <h4>
     2. 类模板
    </h4>
    <p>
     类模板允许你定义一个通用的类，可以处理不同类型的数据成员。
    </p>
    <pre><code class="language-cpp">template &lt;typename T&gt;
class Box {
private:
    T value;
public:
    Box(T v) : value(v) {}
    T getValue() const { return value; }
};

int main() {
    Box&lt;int&gt; intBox(123);
    Box&lt;std::string&gt; strBox("Hello");
    return 0;
}</code></pre>
    <h4>
     3. 模板特化
    </h4>
    <p>
     模板特化允许你为特定类型提供特殊的实现。
    </p>
    <pre><code class="language-cpp">template &lt;typename T&gt;
class Box {
public:
    void print() {
        std::cout &lt;&lt; "Generic Box" &lt;&lt; std::endl;
    }
};

template &lt;&gt;
class Box&lt;int&gt; {
public:
    void print() {
        std::cout &lt;&lt; "Specialized Box for int" &lt;&lt; std::endl;
    }
};

int main() {
    Box&lt;double&gt; dBox;
    dBox.print(); // 输出: Generic Box

    Box&lt;int&gt; iBox;
    iBox.print(); // 输出: Specialized Box for int
    return 0;
}</code></pre>
    <h4>
     4. 非类型模板参数
    </h4>
    <p>
     模板参数不仅可以是类型，还可以是常量表达式。
    </p>
    <pre><code class="language-cpp">template &lt;typename T, int size&gt;
class Array {
private:
    T arr[size];
public:
    T&amp; operator[](int index) {
        return arr[index];
    }
};

int main() {
    Array&lt;int, 5&gt; intArray;
    intArray[0] = 10;
    return 0;
}</code></pre>
    <h4>
     5. 可变参数模板
    </h4>
    <p>
     可变参数模板允许你编写接受任意数量参数的模板。
    </p>
    <pre><code class="language-cpp">template &lt;typename... Args&gt;
void print(Args... args) {
    (std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;
}

int main() {
    print(1, 2, 3, "Hello", 4.5); // 输出: 1 2 3 Hello 4.5
    return 0;
}</code></pre>
    <h4>
     6. 模板元编程
    </h4>
    <p>
     模板元编程是一种在编译时进行计算的技术，通常用于生成高效的代码。
    </p>
    <pre><code class="language-cpp">template &lt;int N&gt;
struct Factorial {
    static const int value = N * Factorial&lt;N - 1&gt;::value;
};

template &lt;&gt;
struct Factorial&lt;0&gt; {
    static const int value = 1;
};

int main() {
    std::cout &lt;&lt; Factorial&lt;5&gt;::value &lt;&lt; std::endl; // 输出: 120
    return 0;
}</code></pre>
    <h4>
     7. 模板别名
    </h4>
    <p>
     使用
     <code>
      using
     </code>
     关键字可以为模板定义别名，简化代码。
    </p>
    <pre><code class="language-cpp">template &lt;typename T&gt;
using Vec = std::vector&lt;T&gt;;

int main() {
    Vec&lt;int&gt; v = {1, 2, 3};
    return 0;
}</code></pre>
    <h4>
     8. 模板的默认参数
    </h4>
    <p>
     模板参数可以有默认值。
    </p>
    <pre><code class="language-cpp">template &lt;typename T = int&gt;
class Box {
private:
    T value;
public:
    Box(T v) : value(v) {}
    T getValue() const { return value; }
};

int main() {
    Box&lt;&gt; defaultBox(123); // 使用默认类型 int
    Box&lt;double&gt; doubleBox(123.45);
    return 0;
}</code></pre>
    <h4>
     9. 模板的 SFINAE (Substitution Failure Is Not An Error)
    </h4>
    <p>
     SFINAE 是一种模板技术，用于在模板实例化过程中排除不符合条件的重载。
    </p>
    <pre><code class="language-cpp">template &lt;typename T&gt;
typename std::enable_if&lt;std::is_integral&lt;T&gt;::value, T&gt;::type
add(T a, T b) {
    return a + b;
}

int main() {
    auto result = add(1, 2); // 正常编译
    // auto result2 = add(1.5, 2.5); // 编译错误，因为 double 不是整数类型
    return 0;
}</code></pre>
    <h4>
     10. 模板的约束 (C++20 Concepts)
    </h4>
    <p>
     C++20 引入了 Concepts，用于对模板参数进行约束。
    </p>
    <pre><code class="language-cpp">#include &lt;concepts&gt;

template &lt;std::integral T&gt;
T add(T a, T b) {
    return a + b;
}

int main() {
    auto result = add(1, 2); // 正常编译
    // auto result2 = add(1.5, 2.5); // 编译错误，因为 double 不满足 std::integral
    return 0;
}</code></pre>
    <h4>
     总结
    </h4>
    <p>
     C++ 模板是强大的工具，能够极大地提高代码的复用性和灵活性。通过掌握函数模板、类模板、模板特化、可变参数模板等概念，你可以编写出更加通用和高效的代码。C++20 的 Concepts 进一步增强了模板的表达能力，使得模板编程更加直观和安全。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35303537373137362f:61727469636c652f64657461696c732f313436323135313636" class_="artid" style="display:none">
 </p>
</div>


