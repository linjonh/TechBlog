---
layout: post
title: "游戏服务器分区的分布式部署"
date: 2025-03-14 17:14:45 +0800
description: "当我们运营要扩展一个分区时，只要拿一组新的服务器，做好配置，登记到上图的HttpServer,这样客户端就能看到新的服务器分区。b:可以让不同的物理机器，通过网关串联，来形成一个分区，降低游戏服务器分区的机器配置，让多台性能不那么好的机器，来完成一个分区的任务。与网关方式不同，将不同的内部逻辑服部署到不同的机器上，游戏的时候,客户端连接哪个逻辑，就直接对应连接哪个逻辑服。a:安全，对外的只有一个服务器机器，一个端口，只要做好一台机器的网络安全即可;1: 可以用低配置的多台机器完成游戏分区部署，降低成本;"
keywords: "游戏服务器分区的分布式部署"
categories: ['未分类']
tags: ['游戏', '服务器', '分布式']
artid: "146262118"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146262118
    alt: "游戏服务器分区的分布式部署"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146262118
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146262118
cover: https://bing.ee123.net/img/rand?artid=146262118
image: https://bing.ee123.net/img/rand?artid=146262118
img: https://bing.ee123.net/img/rand?artid=146262118
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     游戏服务器分区的分布式部署
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="608" src="https://i-blog.csdnimg.cn/img_convert/7e1a381786c5059e9a6df283bfeb6ce1.png" width="1080"/>
    </p>
    <p>
     游戏服务器的分布式部署一直是大家想学的，今天给大家总结一下关于游戏服务器分区部署的相关内容。
    </p>
    <p>
     <strong>
      游戏服务器分区部署架构
     </strong>
    </p>
    <p>
     先上架构图:
    </p>
    <p>
    </p>
    <p class="img-center">
     <img alt="图片" height="704" src="https://i-blog.csdnimg.cn/img_convert/225201d8e8d80a3f3ca4cb3379143031.png" width="1080"/>
    </p>
    <p>
     如上图所示，游戏客户端通过HttpServer的分区管理服务器，来获取当前游戏的所有游戏分区。获取的每个分区，有对应分区连接的“分区描述”，“IP地址”,“端口”等。这样当玩家选择对应分区的时候，我们就知道连接哪个分区，在哪个地址与端口与服务器分区建立连接。当我们运营要扩展一个分区时，只要拿一组新的服务器，做好配置，登记到上图的HttpServer,这样客户端就能看到新的服务器分区。
    </p>
    <p>
     <strong>
      对惹，这里有一
     </strong>
     <a href="https://link.zhihu.com/?target=http%3A//qm.qq.com/cgi-bin/qm/qr%3F_wv%3D1027%26k%3DIqUxZnxrxs99GLIgMaDDkrLQZj-lDkzo%26authKey%3DQkRlObO4dPdZs8r2UVfgwE%252FjwrqE8AHKau8C1cH7RnbSGjhFMwuPPj0cjuEgg4nn%26noverify%3D0%26group_code%3D411232577" rel="nofollow" title="个游戏开发交流小组">
      个游戏开发交流小组
     </a>
     <strong>
      ，希望大家可以点击进来一起交流一下开发经验呀
     </strong>
    </p>
    <p>
     <strong>
      游戏分区的分布式部署
     </strong>
    </p>
    <p>
     一个游戏分区，需要带特定的人数，独立完成所有的游戏玩法，这个过程中，可能也需要做好分布式，每一个分区的分布式有三种经典做法：
    </p>
    <p>
     <strong>
      模式1: 网关模式(上图华南区)
     </strong>
    </p>
    <p>
     根据自己的服务器机器配置+游戏玩法+负载需求,来确定分配好哪些任务放机器A，哪些任务放机器B, 哪些任务放机器C。然后搞一个网关服务器，统一对外负责数据通讯，每次客户端与服务器铜须的时候，都通过网关来转发。这样通过网关+N台机器实例，组成一个游戏逻辑服分区。
    </p>
    <p>
     优点:
    </p>
    <p>
     a:安全，对外的只有一个服务器机器，一个端口，只要做好一台机器的网络安全即可;
    </p>
    <p>
     b:可以让不同的物理机器，通过网关串联，来形成一个分区，降低游戏服务器分区的机器配置，让多台性能不那么好的机器，来完成一个分区的任务。
    </p>
    <p>
     缺点:
    </p>
    <p>
     a: 每次网络通讯，需要网关转发，影响速度;
    </p>
    <p>
     b: 由于不同的任务放不同的机器上，增加服务器内部通讯的需求;
    </p>
    <p>
     <strong>
      <strong>
       模式
      </strong>
      2: 高性能机器部署分区(上图华北区)
     </strong>
    </p>
    <p>
     一个高性能的机器来部署一个游戏分区，比如单核2.6G, 32核心，64GB内存。把游戏逻辑服部署在一台机器上，可以采用多进程多线程架构，全部直接部署在一台机器上。
    </p>
    <p>
     优点:
    </p>
    <p>
     1: 部署环境简单，稳定。
    </p>
    <p>
     2: 所有的数据都在一台机器上，可以通过线程通讯、进程通讯等来提升数据交换性能;
    </p>
    <p>
     3: 适合多线程的服务器架构设计;
    </p>
    <p>
     缺点:
    </p>
    <p>
     1: 机器比较昂贵;
    </p>
    <p>
     2: 充分发挥32核心,对服务器开发人员的架构能力要求更强;
    </p>
    <p>
     <strong>
      <strong>
       模式
      </strong>
      3: 多机器部署+多直连方式
     </strong>
    </p>
    <p>
     与网关方式不同，将不同的内部逻辑服部署到不同的机器上，游戏的时候,客户端连接哪个逻辑，就直接对应连接哪个逻辑服。
    </p>
    <p>
     优点:
    </p>
    <p>
     1: 可以用低配置的多台机器完成游戏分区部署，降低成本;
    </p>
    <p>
     2: 开发部署的时候也更简单方便;
    </p>
    <p>
     3: 相比网关，没有中间的数据转发，响应速率会更快;
    </p>
    <p>
     缺点:
    </p>
    <p>
     1:对外(客户端)放开了多个机器的IP地址+端口，安全维护成本增加;
    </p>
    <p>
     <strong>
      总结：
     </strong>
    </p>
    <p>
     a: 预算充足的情况下，用
     <strong>
      模式2
     </strong>
     ;
    </p>
    <p>
     b: 预算不够，状态同步，用
     <strong>
      模式1
     </strong>
     ;
    </p>
    <p>
     c: 预算不够，帧同步(不能用网关转发)，大厅+子游戏等，用
     <strong>
      模式3
     </strong>
     ;
    </p>
    <p>
     <strong>
      End
     </strong>
    </p>
    <p>
     最后附上《全栈+双端TurnKey方案+教程》分布式演示案例:
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f766f6964696e69742f:61727469636c652f64657461696c732f313436323632313138" class_="artid" style="display:none">
 </p>
</div>


