---
layout: post
title: "ospf单区域"
date: 2025-03-16 21:06:37 +0800
description: "LinkState ID和AdvRouter（广告路由器）均为2.2.2.2，年龄（Age）为674，长度（Len）为60，序列号（Sequence）为80000009，度量值（Metric）为1。LinkState ID为23.1.1.3，AdvRouter为3.3.3.3，年龄为671，长度（Len）为32，序列号（Sequence）为80000002，度量值（Metric）为0。接口类型为广播（Broadcast），这通常意味着该接口连接到一个共享介质网络（如以太网），其中多个设备可以相互通信。"
keywords: "ospf单区域"
categories: ['未分类']
tags: ['网络', '智能路由器']
artid: "146253501"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146253501
    alt: "ospf单区域"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146253501
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146253501
cover: https://bing.ee123.net/img/rand?artid=146253501
image: https://bing.ee123.net/img/rand?artid=146253501
img: https://bing.ee123.net/img/rand?artid=146253501
---

# ospf单区域

OSPF单区域是指将整个自治系统（AS）内的所有路由器划分到同一个逻辑区域（Area 0，即骨干区域）中运行的OSPF协议模式。以下是其核心要点：

#### ******一、定义与核心特点******

‌区域统一性‌  
所有路由器均属于同一区域（Area 0），通过共享‌**链路状态数据库（LSDB）** ‌同步网络拓扑信息。

‌**简化路由计算** ‌  
每个路由器基于LSDB独立计算‌**最短路径树（SPF树）** ‌，无需依赖区域边界路由器（ABR）传递路由信息‌。

#### ******二、工作机制******

‌邻居关系建立‌  
相邻路由器通过交换‌**Hello包** ‌（包含路由器ID、区域ID等参数）建立邻居关系，需满足区域ID一致等条件‌。

‌**链路状态通告（LSA）泛洪** ‌  
路由器向邻居发送LSA，描述链路类型（如以太网、点到点）、开销等状态信息，LSA在整个区域内泛洪更新LSDB‌。

‌**避免复杂分层** ‌  
单区域无需划分多区域，省去了ABR和虚链路配置，减少跨区域通信开销‌

![](https://i-blog.csdnimg.cn/direct/4316c623d6084a8184e3099d7f693fc0.png)

实验目的：

1\. 实现单区域OSPF的配置

2\. 描述OSPF在多路访问中邻居关系建立的过程

实验步骤：

1\. 对路由器重命名

2\. 配置路由器接口IP地址

3\. 运行OSPF

4\. 查看使能OSPF的接口

display ospf interface all

5\. 查看当前设备邻居关系状态

display ospf peer

6\. 查看当前设备LSDB

display ospf lsdb

****配置IP地址****

****R1的配置****

<Huawei>sys

[Huawei]undo info-center enable

Info: Information center is disabled.

[Huawei]sysname AR1

[AR1]int g0/0/0

[AR1-GigabitEthernet0/0/0]ip address 12.1.1.1 24

[AR1-GigabitEthernet0/0/0]undo shutdown

[AR1-GigabitEthernet0/0/0]q

[AR1]interface LoopBack 0

[AR1-LoopBack0]ip address 1.1.1.1 24

[AR1-LoopBack0]q

****运行OSPF****

****R1的配置****

[AR1]ospf router-id 1.1.1.1

[AR1-ospf-1]area 0

[AR1-ospf-1-area-0.0.0.0]network 12.1.1.0 0.0.0.255

[AR1-ospf-1-area-0.0.0.0]network 1.1.1.0 0.0.0.255

[AR1-ospf-1-area-0.0.0.0]q

[AR1-ospf-1]

****R2的配置****

<Huawei>sy

[Huawei]undo info-center enable

[Huawei]sysname AR2

[AR2]int g0/0/0

[AR2-GigabitEthernet0/0/0]ip address 23.1.1.2 24

[AR2-GigabitEthernet0/0/0]undo shutdown

[AR2-GigabitEthernet0/0/0]q

[AR2]int g0/0/1

[AR2-GigabitEthernet0/0/1]ip address 12.1.1.2 24

[AR2-GigabitEthernet0/0/1]undo shutdown

[AR2-GigabitEthernet0/0/1]q

[AR2]interface LoopBack 0

[AR2-LoopBack0]ip address 2.2.2.2 24

[AR2-LoopBack0]q

****运行OSPF****

****R2的配置****

<AR2>sy

[AR2]ospf router-id 2.2.2.2

[AR2-ospf-1]area 0

[AR2-ospf-1-area-0.0.0.0]network 12.1.1.0 0.0.0.255

[AR2-ospf-1-area-0.0.0.0]network 23.1.1.0 0.0.0.255

[AR2-ospf-1-area-0.0.0.0]network 2.2.2.0 0.0.0.255

[AR2-ospf-1-area-0.0.0.0]q

****R3的配置****

<Huawei>sy

[Huawei]undo info-center enable

[Huawei]sysname AR3

[AR3]int g0/0/1

[AR3-GigabitEthernet0/0/1]ip address 23.1.1.3 24

[AR3-GigabitEthernet0/0/1]undo shutdown

[AR3-GigabitEthernet0/0/1]q

[AR3]interface LoopBack 0

[AR3-LoopBack0]ip address 3.3.3.3 24

[AR3-LoopBack0]q

****运行OSPF****

****R********3********的配置****

[AR3]ospf router-id 3.3.3.3

[AR3-ospf-1]area 0

[AR3-ospf-1-area-0.0.0.0]network 23.1.1.0 0.0.0.255

[AR3-ospf-1-area-0.0.0.0]network 3.3.3.0 0.0.0.255

[AR3-ospf-1-area-0.0.0.0]q

[AR3-ospf-1]q

****在R1上查看当前设备所有激活的ospf的接口信息****

![](https://i-blog.csdnimg.cn/direct/766d4ab8ef7f484d85bdf3db9c81a4f3.png)

‌**进程ID与Router ID** ‌：

OSPF进程ID为1，表明这是该设备上运行的第一个OSPF实例。

Router ID为1.1.1.1，这是该路由器在OSPF网络中的唯一标识符。

Area: 0.0.0.0 ：区域0

‌**MPLS TE状态** ‌：(MPLS TE not enabled)：

显示“MPLS TE not enabled”，意味着多协议标签交换流量工程（MPLS TE）没有在该OSPF进程中启用。MPLS
TE通常用于在网络中创建显式路径，以实现更精细的流量控制和优化。

****接口分析****

Interface: 12.1.1.1 (GigabitEthernet0/0/0)

‌**类型** ‌： Type: Broadcast
：接口类型为广播（Broadcast），这通常意味着该接口连接到一个共享介质网络（如以太网），其中多个设备可以相互通信。

接口状态:State: BDR:（Backup Designated
Router，备份指定路由器），在OSPF的广播网络中，会进行DR（Designated
Router，指定路由器）的选举，以减少各路由器之间的OSPF通信量。BDR是DR的备份，当DR出现故障时，BDR会成为新的DR。

‌**开销与MTU** ‌：

MTU: 1500 :MTU为1500，这是该接口可以传输的最大数据包大小（以字节为单位）。

Cost: 1 :接口开销为1，这是OSPF用于计算最短路径的度量值。开销越低，路径越优先。

‌**优先级与DR信息** ‌：

接口优先级为1，这是用于DR选举的优先级值。优先级越高，成为DR的可能性越大。

指定路由器为12.1.1.2(DR)，BDR:备份指定路由器为12.1.1.1（即本路由器）。

Timers: Hello 10:每10秒发送一个hello包

Dead 40：消亡时间为40秒

Poll 120：120秒为默认周期向邻居发送hello包，确认其是否存活。

Retransmit 5 ：重传间隔，默认值为5秒

Transmit Delay 1 ：延迟，默认值为1秒

‌

Hello计时器、Dead计时器、Poll计时器、重传计时器和传输延迟等参数用于控制OSPF邻居关系的建立和维护。

还回接口1.1.1.1（LoopBack0）

‌**类型与状态** ‌：

Type: P2P：接口类型为点对点（P2P），这意味着该接口直接连接到另一个设备，没有中间设备或共享介质。

State: P-2-P：接口状态为P-2-P，这是点对点接口的正常状态。

![](https://i-blog.csdnimg.cn/direct/2c5a5e5ac13e476f81f166d2bbf3b92d.png)

![](https://i-blog.csdnimg.cn/direct/282fbea6520e488e92c9aa379b2a5822.png)

****在R1查看当前设备的邻居状态****

![](https://i-blog.csdnimg.cn/direct/81e1c64666674e65a32488e91a46ca3c.png)

**OSPF进程信息** ‌：

OSPF进程ID为1，Router ID为1.1.1.1。

‌**邻居信息** ‌：

邻居所在的区域是Area 0.0.0.0。

邻居通过接口12.1.1.1（GigabitEthernet0/0/0）进行通信。

‌**邻居详细信息** ‌：

邻居的Router ID是2.2.2.2。

邻居的IP地址是12.1.1.2。

邻居的状态是Full，表示邻居关系已经完全建立。

邻居是主路由器（Master），优先级为1。

指定路由器（DR）是12.1.1.2，备份指定路由器（BDR）是12.1.1.1。

MTU（最大传输单元）为0。

‌**计时器信息** ‌：

死亡计时器（Dead timer）将在27秒后到期。

重传计时器间隔（Retrans timer interval）为5秒。

邻居已经上线9分钟23秒。

‌**认证序列** ‌：

认证序列号为[0 ]，表示OSPF邻居之间的没有认证信息。

![](https://i-blog.csdnimg.cn/direct/225959fba98042e597d492aa863d33ee.png)

OSPF进程ID为1，Router ID为1.1.1.1。

数据库区域（Area）为0.0.0.0。

显示了不同类型的链路状态条目，包括Router和Network类型。

‌**Router类型条目****（** 路由器LSA**）** ‌：

LinkState
ID和AdvRouter（广告路由器）均为2.2.2.2，年龄（Age）为674，长度（Len）为60，序列号（Sequence）为80000009，度量值（Metric）为1。

LinkState
ID和AdvRouter均为1.1.1.1，年龄为675，长度（Len）为48，序列号（Sequence）为80000005，度量值（Metric）为1。

LinkState
ID和AdvRouter均为3.3.3.3，年龄为671，长度（Len）为36，序列号（Sequence）为80000004，度量值（Metric）为1。

‌**Network类型条目****（** 网络LSA**）** ‌：

LinkState
ID为23.1.1.3，AdvRouter为3.3.3.3，年龄为671，长度（Len）为32，序列号（Sequence）为80000002，度量值（Metric）为0。

LinkState
ID为12.1.1.2，AdvRouter为2.2.2.2，年龄为676，长度（Len）为32，序列号（Sequence）为80000001，度量值（Metric）为0

![](https://i-blog.csdnimg.cn/direct/a7c73426720841c7a8d569bd7b656949.png)

**Destination（目的地）** ‌：表示目标网络的IP地址和子网掩码。

‌**Cst（******开销******）** ‌：表示到达该目的地的代价。

‌**Type（类型）** ‌：表示路由类型，如Stub（存根路由）或Transit（传输路由）。

‌**NextHop（下一跳）** ‌：表示到达该目的地的下一跳路由器的IP地址。

‌**AdvRouter（广告路由器）** ‌：表示发布该路由的路由器IP地址。

‌**Area（区域）** ‌：表示该路由所属的OSPF区域



