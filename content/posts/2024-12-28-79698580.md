---
layout: post
title: "cocos-creator-大厅子游戏模式探讨creator版本1.8.2"
date: 2024-12-28 09:31:51 +0800
description: "之前一直从事android开发，接触cocos crea"
keywords: "cc.sys.garbagecollect"
categories: ['游戏', 'Cocos']
tags: ['热更新', '游戏', '大厅子游戏', 'Cocoscreator', 'Cocos']
artid: "79698580"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=79698580
    alt: "cocos-creator-大厅子游戏模式探讨creator版本1.8.2"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=79698580
featuredImagePreview: https://bing.ee123.net/img/rand?artid=79698580
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     cocos creator 大厅+子游戏模式探讨（creator版本1.8.2）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div>
    </div>
    <p class="p1">
     <span class="s1">
      之前一直从事
     </span>
     <span class="s2">
      android
     </span>
     <span class="s1">
      开发，接触
     </span>
     <span class="s2">
      cocos creator
     </span>
     <span class="s1">
      不久。近期公司安排我研究大厅子游戏模式的热更新，前后花了近一周时间，在论坛上查资料，请教大神，期间得到了一些帮助，在此很感谢
     </span>
     <span class="s2">
      cocos
     </span>
     <span class="s1">
      中文论坛里的前辈们。
     </span>
    </p>
    <p class="p2">
     <span class="s2">
     </span>
     <span class="s1">
      谈到
     </span>
     <span class="s2">
      cocos creator
     </span>
     <span class="s1">
      的子游戏的热更新，相较于其他，诸如
     </span>
     <span class="s2">
      cocos-js,cocos2d-x
     </span>
     <span class="s1">
      等开发模式是有本质区别的。究其原因，是由于
     </span>
     <span class="s2">
      creator
     </span>
     <span class="s1">
      项目中无论是脚本或是资源，对整体项目而言，都是数据文件。由
     </span>
     <span class="s2">
      creator
     </span>
     <span class="s1">
      生成的项目是纯粹的数据驱动而非代码驱动，一切皆为数据，包括场景、脚本、图片、音频、动画等。而数据驱动需要有一个入口，即是
     </span>
     <span class="s2">
      creator
     </span>
     <span class="s1">
      编译器为我们生成的
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      文件，当然除了
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      这个入口文件，还有描述整个资源的配置文件
     </span>
     <span class="s2">
      settings.js
     </span>
     <span class="s1">
      ，而我们自己编写的脚本，在编译后统一存放在了文件
     </span>
     <span class="s2">
      project.js
     </span>
     <span class="s1">
      中。代码驱动模式下的子游戏热更只需要更新资源以及项目的代码文件，很好理解。而在数据驱动模式下，开发者开发的项目是纯数据，要想运行这份数据，必须要入口文件
     </span>
     <span class="s2">
      (main.js)
     </span>
     <span class="s1">
      以及配置文件
     </span>
     <span class="s2">
      (setting.js)
     </span>
     <span class="s1">
      ，这就是两种模式在子游戏热更新领域的本质区别。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
    </p>
    <p class="p2">
     <span class="s2">
     </span>
     <span class="s1">
      基于上述特性，在官方热更新的基础上
     </span>
     <span class="s2">
      (
     </span>
     <span class="s1">
      具体详见官方文档
     </span>
     <span class="s2">
      )
     </span>
     <span class="s1">
      ，我们开辟了一条子游戏独有的更新思路，那就是将编译生成的
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      文件一并移入
     </span>
     <span class="s2">
      src
     </span>
     <span class="s1">
      目录，让其成为数据的一部分，在子游戏更新的时候会下载完整的
     </span>
     <span class="s2">
      res
     </span>
     <span class="s1">
      、
     </span>
     <span class="s2">
      src
     </span>
     <span class="s1">
      目录，其中就囊括了我们执行所需的
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      文件，在运行子游戏的时候，我们只需要
     </span>
     <span class="s2">
      require main.js
     </span>
     <span class="s1">
      这个文件即可。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
    </p>
    <p class="p2">
     <span class="s2">
     </span>
     <span class="s1">
      对于构建所生成的
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      文件，显然并非是我们想要的，因为它会加载默认的配置，对于整个原生应用而言，默认配置即为大厅的配置路径，所以我们必须修改
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      文件，使其找到子游戏自身的整个游戏环境配置文件，以下是子游戏
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      文件的精简代码，基本上注释已经很完整，写这篇文章的目的不是为了写实现流程，因为大厅子游戏模式的实现流程论坛中已有较为完整的
     </span>
     <span class="s2">
      demo
     </span>
     <span class="s1">
      ，这篇文章主要是分析子游戏的两个进出文件，另外是想说明在真实项目中运用这种方式会遇到哪些问题，以及我们怎么处理这些问题。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      (function () {
      <!-- -->
     </span>
    </p>
    <p class="p5">
     <span class="s3">
     </span>
     <span class="s4">
      <strong>
      </strong>
     </span>
     <span class="s2">
      <strong>
       //
      </strong>
     </span>
     <span class="s1">
      <strong>
       以下两句主要作用是释放资源
      </strong>
     </span>
     <span class="s2">
      <strong>
       ,
      </strong>
     </span>
     <span class="s1">
      <strong>
       垃圾回收
      </strong>
     </span>
     <span class="s2">
      <strong>
       ,
      </strong>
     </span>
     <span class="s1">
      <strong>
       个人感觉作用不大，有或者没有可
      </strong>
     </span>
     <span class="s2">
      <strong>
      </strong>
     </span>
    </p>
    <p class="p6">
     <span class="s2">
      <strong>
       //
      </strong>
     </span>
     <span class="s5">
      <strong>
       能对内存有一点影响，释放不会很干净
      </strong>
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.loader.releaseAll();
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.garbageCollect();
     </span>
    </p>
    <p class="p7">
     <span class="s3">
     </span>
     <span class="s2">
      //
     </span>
     <span class="s1">
      以下这句话官方解释是
     </span>
     <span class="s2">
      fix bug ,
     </span>
     <span class="s1">
      不过实际上似乎没什么用，在这加着也无妨
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.director.startAnimation();
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      'use strict';
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var settings = null;
     </span>
    </p>
    <p class="p7">
     <span class="s2">
      //
     </span>
     <span class="s1">
      以下是定义子游戏的路径，与大厅中热更新的某个子游戏路径对应
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.INGAME = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + “ALLGame/         subgame/4/“;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
     </span>
    </p>
    <p class="p7">
     <span class="s2">
      //
     </span>
     <span class="s1">
      以下的逻辑判断做了下配置加载缓存，第二次进入就不重复加载
     </span>
     <span class="s2">
      setting.js
     </span>
     <span class="s1">
      与
     </span>
     <span class="s2">
      project.js
     </span>
     <span class="s1">
      了
     </span>
     <span class="s2">
     </span>
     <span class="s1">
      很有必要
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (!cc.subgame4) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      console.log("
     </span>
     <span class="s5">
      首次加载路径名称
     </span>
     <span class="s1">
      -------" + cc.INGAME);
     </span>
    </p>
    <p class="p8">
     <span class="s1">
      //
     </span>
     <span class="s5">
      这里的
     </span>
     <span class="s1">
      require
     </span>
     <span class="s5">
      ，论坛中没有说清楚，在
     </span>
     <span class="s1">
      1.5.2
     </span>
     <span class="s5">
      版本中
     </span>
     <span class="s1">
      creator
     </span>
     <span class="s5">
      可以通过
     </span>
     <span class="s1">
      var settings =require(‘…..')
     </span>
     <span class="s5">
      这种方式给
     </span>
     <span class="s1">
      settings
     </span>
     <span class="s5">
      赋值，但是后面引擎组对
     </span>
     <span class="s1">
      require                   //
     </span>
     <span class="s5">
      做了修改，后续版本中当
     </span>
     <span class="s1">
      require(‘…’)
     </span>
     <span class="s5">
      后，去取变量要看
     </span>
     <span class="s1">
      require
     </span>
     <span class="s5">
      对应的文件中的代码而定
     </span>
     <span class="s1">
      .
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      require(cc.INGAME + 'src/settings.js');
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.subgame4 = settings = window._CCSettings;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      console.log("
     </span>
     <span class="s5">
      首次加载成功
     </span>
     <span class="s1">
      -------" + JSON.stringify(cc.subgame4));
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      require(cc.INGAME + 'src/project.js');
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      } else {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      console.log("
     </span>
     <span class="s5">
      非首次加载路径名称
     </span>
     <span class="s1">
      -------" + cc.INGAME);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      console.log("
     </span>
     <span class="s5">
      非首次加载成功
     </span>
     <span class="s1">
      -------" + JSON.stringify(cc.subgame4));
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      settings = cc.subgame4;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p8">
     <span class="s1">
      //
     </span>
     <span class="s5">
      将
     </span>
     <span class="s1">
      _ccsettings
     </span>
     <span class="s5">
      置位
     </span>
     <span class="s1">
      undefined
     </span>
     <span class="s5">
      ，
     </span>
     <span class="s1">
      main.js
     </span>
     <span class="s5">
      都是这么写的
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      window._CCSettings = undefined;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
     </span>
    </p>
    <p class="p7">
     <span class="s2">
      //
     </span>
     <span class="s1">
      以下代码就是处理
     </span>
     <span class="s2">
      setting.js
     </span>
     <span class="s1">
      中的资源了，
     </span>
     <span class="s2">
      debug
     </span>
     <span class="s1">
      模式与非
     </span>
     <span class="s2">
      debug
     </span>
     <span class="s1">
      模式是不一样的，下面的代码都是在非
     </span>
     <span class="s2">
      debug
     </span>
     <span class="s1">
      模式下的
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var uuids = settings.uuids;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var rawAssets = settings.rawAssets;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var assetTypes = settings.assetTypes;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var realRawAssets = settings.rawAssets = {};
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var mount in rawAssets) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var entries = rawAssets[mount];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var realEntries = realRawAssets[mount] = {};
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var id in entries) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var entry = entries[id];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var type = entry[1];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // retrieve minified raw asset
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (typeof type === 'number') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      entry[1] = assetTypes[type];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // retrieve uuid
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      realEntries[uuids[id] || id] = entry;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var scenes = settings.scenes;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var i = 0; i &lt; scenes.length; ++i) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var scene = scenes[i];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (typeof scene.uuid === 'number') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      scene.uuid = uuids[scene.uuid];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      var packedAssets = settings.packedAssets;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var packId in packedAssets) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var packedIds = packedAssets[packId];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var j = 0; j &lt; packedIds.length; ++j) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (typeof packedIds[j] === 'number') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      packedIds[j] = uuids[packedIds[j]];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p9">
     <span class="s3">
     </span>
     <span class="s2">
      //
     </span>
     <span class="s1">
      游戏的启动函数
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var onStart = function () {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.resizeWithBrowserSize(true);
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      // UC browser on many android devices have performance issue with retina display
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.sys.os !== cc.sys.OS_ANDROID || cc.sys.browserType !== cc.sys.BROWSER_TYPE_UC) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.enableRetina(true);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.sys.isMobile) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (settings.orientation === 'landscape') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      else if (settings.orientation === 'portrait') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // qq, wechat, baidu
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.enableAutoFullScreen(
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.browserType !== cc.sys.BROWSER_TYPE_BAIDU &amp;&amp;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.browserType !== cc.sys.BROWSER_TYPE_WECHAT &amp;&amp;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.browserType !== cc.sys.BROWSER_TYPE_MOBILE_QQ
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      );
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      // Limit downloading max concurrent task to 2,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // more tasks simultaneously may cause performance draw back on some android system / brwosers.
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // You can adjust the number based on your own test result, you have to set it before any loading process to take effect.
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.sys.isBrowser &amp;&amp; cc.sys.os === cc.sys.OS_ANDROID) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.macro.DOWNLOAD_MAX_CONCURRENT = 2;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
     </span>
    </p>
    <p class="p9">
     <span class="s2">
      //
     </span>
     <span class="s1">
      初始化资源方法，下面的路径就是子游戏目录下的，所以要加上
     </span>
     <span class="s2">
      cc.INGAME
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.AssetLibrary.init({
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      libraryPath: cc.INGAME + 'res/import',
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      rawAssetsBase: cc.INGAME + 'res/raw-',
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      rawAssets: settings.rawAssets,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      packedAssets: settings.packedAssets,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      md5AssetsMap: settings.md5AssetsMap
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      });
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      var launchScene = settings.launchScene;
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.runtime) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.director.setRuntimeLaunchScene(launchScene);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // load scene
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.director.loadScene(launchScene, null,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      function () {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.loader.onProgress = null;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      console.log('Success to load scene: ' + launchScene);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      );
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      };
     </span>
    </p>
    <p class="p4">
     <span class="s1">
     </span>
    </p>
    <p class="p8">
     <span class="s1">
      // jsList,
     </span>
     <span class="s5">
      脚本的路径也要加
     </span>
     <span class="s1">
      cc.INGAME
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var jsList = settings.jsList;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var bundledScript = settings.debug ? cc.INGAME + 'src/project.dev.js' : cc.INGAME + 'src/project.js';
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (jsList) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList = jsList.map(function (x) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      return cc.INGAME + 'src/' + x;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      });
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList.push(bundledScript);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      else {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList = [bundledScript];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      var option = {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      id: 'GameCanvas',
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      scenes: settings.scenes,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      debugMode: settings.debug ? cc.DebugMode.INFO : cc.DebugMode.ERROR,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      showFPS: settings.debug,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      frameRate: 60,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList: jsList,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      groupList: settings.groupList,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      collisionMatrix: settings.collisionMatrix,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      renderMode: 0
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      };
     </span>
    </p>
    <p class="p4">
     <span class="s1">
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      //
     </span>
     <span class="s5">
      运行游戏
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.game.run(option, onStart);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.garbageCollect();
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      })();
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s5">
      再来看
     </span>
     <span class="s1">
      dating.js
     </span>
     <span class="s5">
      文件
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      (function () {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.loader.releaseAll();
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.garbageCollect();
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      'use strict’;
     </span>
    </p>
    <p class="p7">
     <span class="s2">
      //
     </span>
     <span class="s1">
      这里只针对
     </span>
     <span class="s2">
      android
     </span>
     <span class="s1">
      的路径做了修改，因为我发现论坛中如果定义
     </span>
     <span class="s2">
      cc.INGAME=“”,
     </span>
     <span class="s1">
      会找不到主大厅资源，
     </span>
     <span class="s2">
      ios
     </span>
     <span class="s1">
      没有测
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.INGAME = "assets/";
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      require(cc.INGAME+'src/settings.js');
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var settings = window._CCSettings;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      window._CCSettings = undefined;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var uuids = settings.uuids;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var rawAssets = settings.rawAssets;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var assetTypes = settings.assetTypes;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var realRawAssets = settings.rawAssets = {};
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var mount in rawAssets) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var entries = rawAssets[mount];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var realEntries = realRawAssets[mount] = {};
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var id in entries) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var entry = entries[id];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var type = entry[1];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // retrieve minified raw asset
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (typeof type === 'number') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      entry[1] = assetTypes[type];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // retrieve uuid
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      realEntries[uuids[id] || id] = entry;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      var scenes = settings.scenes;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var i = 0; i &lt; scenes.length; ++i) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var scene = scenes[i];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (typeof scene.uuid === 'number') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      scene.uuid = uuids[scene.uuid];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      var packedAssets = settings.packedAssets;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var packId in packedAssets) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var packedIds = packedAssets[packId];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      for (var j = 0; j &lt; packedIds.length; ++j) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (typeof packedIds[j] === 'number') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      packedIds[j] = uuids[packedIds[j]];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      var onStart = function () {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.resizeWithBrowserSize(true);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // UC browser on many android devices have performance issue with retina display
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.sys.os !== cc.sys.OS_ANDROID || cc.sys.browserType !== cc.sys.BROWSER_TYPE_UC) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.enableRetina(true);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.sys.isMobile) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (settings.orientation === 'landscape') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      else if (settings.orientation === 'portrait') {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // qq, wechat, baidu
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.view.enableAutoFullScreen(
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.browserType !== cc.sys.BROWSER_TYPE_BAIDU &amp;&amp;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.browserType !== cc.sys.BROWSER_TYPE_WECHAT &amp;&amp;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.browserType !== cc.sys.BROWSER_TYPE_MOBILE_QQ
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      );
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // Limit downloading max concurrent task to 2,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // more tasks simultaneously may cause performance draw back on some android system / brwosers.
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // You can adjust the number based on your own test result, you have to set it before any loading process to take effect.
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.sys.isBrowser &amp;&amp; cc.sys.os === cc.sys.OS_ANDROID) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.macro.DOWNLOAD_MAX_CONCURRENT = 2;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // init assets
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.AssetLibrary.init({
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      libraryPath: cc.INGAME + 'res/import',
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      rawAssetsBase: cc.INGAME + 'res/raw-',
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      rawAssets: settings.rawAssets,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      packedAssets: settings.packedAssets,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      md5AssetsMap: settings.md5AssetsMap
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      });
     </span>
    </p>
    <p class="p4">
     <span class="s1">
     </span>
    </p>
    <p class="p7">
     <span class="s2">
      //
     </span>
     <span class="s1">
      我们游戏大厅就一个场景，所以无论是直接定义还是使用
     </span>
     <span class="s2">
      settings
     </span>
     <span class="s1">
      文件中的
     </span>
     <span class="s2">
      launchScene
     </span>
     <span class="s1">
      都是可以的，如果大厅包含两个场景，那需要这种方式了，不过做这种热更方式，不建议大厅有多场景，可能会遇到意想不到的结果
     </span>
     <span class="s2">
      .
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var launchScene = "db://assets/scene/MainScene.fire";
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // load scene
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (cc.runtime) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.director.setRuntimeLaunchScene(launchScene);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.director.loadScene(launchScene, null,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      function () {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.loader.onProgress = null;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      console.log('Success to load scene: ' + launchScene);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      );
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      };
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      // jsList
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var jsList = settings.jsList;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      var bundledScript = settings.debug ? cc.INGAME + 'src/project.dev.js' : cc.INGAME + 'src/project.js';
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      if (jsList) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList = jsList.map(function (x) {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      return cc.INGAME + 'src/' + x;
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      });
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList.push(bundledScript);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      else {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList = [bundledScript];
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      }
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      var option = {
      <!-- -->
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      id: 'GameCanvas',
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      scenes: settings.scenes,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      debugMode: settings.debug ? cc.DebugMode.INFO : cc.DebugMode.ERROR,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      showFPS: settings.debug,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      frameRate: 60,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      jsList: jsList,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      groupList: settings.groupList,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      collisionMatrix: settings.collisionMatrix,
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      renderMode: 0
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      };
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      cc.game.run(option, onStart);
     </span>
    </p>
    <p class="p4">
     <span class="s1">
      cc.sys.garbageCollect();
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p4">
     <span class="s1">
      })();
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s1">
      以上是从大厅进入子游戏的
     </span>
     <span class="s2">
      main.js
     </span>
     <span class="s1">
      与子游戏回大厅的
     </span>
     <span class="s2">
      dating.js
     </span>
     <span class="s1">
      的精简版，当然还可以更精简。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s1">
      我们利用代码运行两个
     </span>
     <span class="s2">
      helloword
     </span>
     <span class="s1">
      子游戏时是不会存在任何问题的，一旦把实际项目集成进来时问题就逐一显现了，下面来一一列举。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p10">
     <span class="s1">
      问题一：从大厅进入一个子游戏，退回大厅，再进另一个子游戏时，画面整个错乱
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s1">
      引发原因：两个子游戏中，有部分资源
     </span>
     <span class="s2">
      uuid
     </span>
     <span class="s1">
      重复，很可能是在开发一个游戏的时候，导出了该游戏的部分资源或场景进入了第二个游戏。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p11">
     <span class="s5">
      解决方法
     </span>
     <span class="s1">
      :
      <a href="https://github.com/lategege/CocosUpdate">
       <span class="s6">
        https://github.com/lategege/CocosUpdate
       </span>
      </a>
     </span>
     <span class="s5">
      下载
     </span>
     <span class="s1">
      uuid.php
     </span>
     <span class="s5">
      这个脚本，放入
     </span>
     <span class="s1">
      assets
     </span>
     <span class="s5">
      目录下运行
     </span>
     <span class="s1">
      php uuid.php
     </span>
     <span class="s5">
      将项目中所有的
     </span>
     <span class="s1">
      uuid
     </span>
     <span class="s5">
      替换，前提是事先要安装
     </span>
     <span class="s1">
      php
     </span>
     <span class="s5">
      环境，注意脚本中
     </span>
     <span class="s1">
     </span>
     <span class="s7">
      $QIANZIU
     </span>
     <span class="s1">
     </span>
     <span class="s8">
      =
     </span>
     <span class="s1">
     </span>
     <span class="s8">
      “
     </span>
     <span class="s7">
      b11”;
     </span>
     <span class="s1">
     </span>
     <span class="s9">
      每一个子游戏都需要改一下这个值，因为这个脚本会把所有
     </span>
     <span class="s10">
      uuid
     </span>
     <span class="s9">
      的前三位替换为在此定义的三位。
     </span>
    </p>
    <p class="p12">
     <span class="s1">
      <br/>
     </span>
    </p>
    <p class="p13">
     <span class="s1">
      问题二
     </span>
     <span class="s10">
      :
     </span>
     <span class="s1">
      修改了
     </span>
     <span class="s10">
      uuid
     </span>
     <span class="s1">
      觉得万事大吉的时候，那就想的太简单了，你忽然发现进了一个游戏
     </span>
     <span class="s11">
      ,
     </span>
     <span class="s1">
      进另外一个黑了。
     </span>
    </p>
    <p class="p14">
     <span class="s1">
      <br/>
     </span>
    </p>
    <p class="p15">
     <span class="s1">
      原因：场景、脚本、节点名称重复，程序没有重新载入。
     </span>
     <span class="s12">
      <br/>
     </span>
    </p>
    <p class="p16">
     <span class="s1">
      解决办法：每个游戏非公有的代码的脚本名称，组件名称以及场景全部改名，建议以子游戏名称打头。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p10">
     <span class="s1">
      问题三
     </span>
     <span class="s2">
      :
     </span>
     <span class="s1">
      运行了一个游戏后，再运行另一个游戏，某些组件为
     </span>
     <span class="s2">
      null
     </span>
     <span class="s1">
      ，声音还在播放。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s1">
      原因：返回游戏时事件没有反注册，事件监听器中存在组件实例。垃圾回收后，组件实例被回收，但事件监听器中引用仍然存在，下一个游戏发了同一条事件后，就会报错，声音资源没有被释放。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p16">
     <span class="s1">
      解决办法：返回游戏时，清空事件监听器，释放声音资源。
     </span>
     <span class="s2">
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p10">
     <span class="s1">
      问题四
     </span>
     <span class="s2">
      :
     </span>
     <span class="s1">
      全局变量被覆盖。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s1">
      原因
     </span>
     <span class="s2">
      :
     </span>
     <span class="s1">
      两个游戏中存在相同名称全局变量，值不同，导致游戏运行会有问题。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p16">
     <span class="s1">
      解决办法：每个游戏的全局变量必须保证名称不一致。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p10">
     <span class="s1">
      问题五
     </span>
     <span class="s2">
      :
     </span>
     <span class="s1">
      回大厅发现存在子游戏的画面。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s1">
      原因之一
     </span>
     <span class="s2">
      :
     </span>
     <span class="s1">
      定时任务没有在返回时关闭。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p16">
     <span class="s1">
      解决办法：查找游戏中的每一个定时任务，在返回时记得关闭任务。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s1">
      以上问题都解决完之后似乎可以不冲突运行了，伴随而来的是内存的压力，不过无所谓，问题肯定还会有，不过已经少了。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s13">
     </span>
     <span class="s1">
      对上述问题的的总结：在公司项目确定要使用这种方案来做子游戏更新时，劝大家评估一下项目命名是否规范，是否能容忍进出游戏的缓慢，对项目命名的建议是：公共代码保证所有游戏一样时，无需对代码及变量改名，一旦公共代码载入内存，不会加载第二次，所以不用理会，同时在公共代码中不要保存任何非公共的变量以及对象引用。对于非公共部分，要保证资源名称，
     </span>
     <span class="s2">
      js
     </span>
     <span class="s1">
      脚本名称以及场景、节点名称尽量使用子游戏名称打头来命名，然而即使都没问题了，进入游戏与返回大厅的速度依然是硬伤。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p17">
     <span class="s14">
     </span>
     <span class="s15">
      另外看到论坛中
      <a href="http://forum.cocos.com/t/topic/54899" rel="nofollow">
       <span class="s6">
        http://forum.cocos.com/t/topic/54899
       </span>
      </a>
     </span>
     <span class="s3">
     </span>
     <span class="s15">
      子游戏
     </span>
     <span class="s3">
      +
     </span>
     <span class="s15">
      大厅共享资源临时实现方案，此方案通过修改
     </span>
     <span class="s11">
      jsb_polyfill.js
     </span>
     <span class="s9">
      代码，也就是定义几个全局变量，这种方式在
     </span>
     <span class="s11">
      creator 1.8.2
     </span>
     <span class="s9">
      中行不通，进大厅就黑屏，
     </span>
     <span class="s11">
      creator1.7.2
     </span>
     <span class="s9">
      可行。
     </span>
     <span class="s1">
      这种方式确实能访问到主大厅的资源，甚至能通过加载场景的方式进出子游戏，而且速度非常快，与加载一般场景的速度没什么区别，但是这其中的问题也非常多，就我遇到的，重启大厅后进子游戏，子游戏都打不开了，还有一些资源的丢失问题，要使用这种方式需要对引擎有足够多的了解，小弟不才，对
     </span>
     <span class="s2">
      cocos
     </span>
     <span class="s1">
      引擎研究不深。
     </span>
    </p>
    <p class="p3">
     <span class="s1">
     </span>
     <br/>
    </p>
    <p class="p2">
     <span class="s13">
     </span>
     <span class="s1">
      无论是
     </span>
     <span class="s2">
      require
     </span>
     <span class="s1">
      方式还是通过修改
     </span>
     <span class="s2">
      jsb_polyfill.js
     </span>
     <span class="s1">
      方式，都有弊病，这种非官方的加载方式能否商用，值得商榷，至少我觉得真想做
     </span>
     <span class="s2">
      creator
     </span>
     <span class="s1">
      大厅子游戏模式还是等待官方更新比较靠谱，以上是我一个礼拜的
     </span>
     <span class="s2">
      cocos
     </span>
     <span class="s1">
      子游戏更新的心得，借此分享一下。
     </span>
     <span class="s2">
     </span>
    </p>
    <br/>
    <div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3238303239333435:2f61727469636c652f64657461696c732f3739363938353830" class_="artid" style="display:none">
 </p>
</div>


