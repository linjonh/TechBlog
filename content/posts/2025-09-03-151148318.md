---
layout: post
title: "RabbitMQ"
date: 2025-09-03T14:17:12+0800
description: "【代码】RabbitMQ。"
keywords: "RabbitMQ"
categories: ['未分类']
tags: ['分布式', 'Ruby', 'Rabbitmq']
artid: "151148318"
arturl: "https://blog.csdn.net/weixin_44174685/article/details/151148318"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151148318
    alt: "RabbitMQ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151148318
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151148318
cover: https://bing.ee123.net/img/rand?artid=151148318
image: https://bing.ee123.net/img/rand?artid=151148318
img: https://bing.ee123.net/img/rand?artid=151148318
---



# RabbitMQ



### 1. docker安装RabbitMQ

#### 拉取镜像

docker pull rabbitmq:management

#### 查看镜像

docker images

#### 保存镜像

docker save -o rabbitmq_image.tar rabbitmq:management

#### 加载镜像

docker load -i rabbitmq_image.tar

### 2. RabbitMQ启动

#### 配置文件

```bash
# 网络监听设置
listeners.tcp.default = 5672
management.tcp.port = 15672

# 默认用户设置（可选，也可以在环境变量设置）
default_user = admin
default_pass = 123456

# 日志设置
log.console.level = info
log.file.level = info

# 内存和磁盘控制
vm_memory_high_watermark.relative = 0.95
disk_free_limit.absolute = 1GB

# 集群设置（如果需要）
# cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
# cluster_formation.classic_config.nodes.1 = rabbit@node1
# cluster_formation.classic_config.nodes.2 = rabbit@node2

# 其他自定义配置
channel_max = 2047
heartbeat = 60

```

#### 启动命令

```bash
docker run -d --restart=always \
  --name my-rabbitmq \
  -p 5672:5672 \
  -p 15672:15672 \
  -v /opt/jykj/rabbitmq/config/rabbitmq.conf:/etc/rabbitmq/rabbitmq.conf \
  -e RABBITMQ_CONFIG_FILE=/etc/rabbitmq/rabbitmq.conf \
  rabbitmq:management

```

### 发送消息阻塞，Connections state=blocked

修改配置文件参数：  
 vm_memory_high_watermark.relative = 0.95  
 disk_free_limit.absolute = 1GB  
 参考：  
 [RabbitMQ 内存与磁盘告警详解](https://blog.csdn.net/csdn_tom_168/article/details/149791672)  
 [rabbitmq blocked问题](https://blog.csdn.net/qq_30458209/article/details/125395537)  
 [RabbitMQ的管理界面](https://blog.csdn.net/2501_91483426/article/details/150580960)  
 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/0a9d18fed55a4d31862fd56a7a29ad1c.png)



