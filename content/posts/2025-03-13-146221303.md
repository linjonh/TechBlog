---
layout: post
title: "JMeter-5.6.3-jdk-1.8-不能录制https网页脚本的解决办法"
date: 2025-03-13 08:28:58 +0800
description: "安装了证书仍然出现问题。首先自己查找答案，以为是浏览器的版本低，后来发现是JDK的版本低，换为JDK11问题解决。用DeepSeek得到如下的答案：已深度思考（用时13秒）好的，我现在需要解决用户在使用JMeter 5.6.3和JDK 1.8时无法录制HTTPS网页脚本的问题。首先，我得回忆一下常见的导致这个问题的原因有哪些。首先想到的是SSL证书的问题。JMeter在录制HTTPS时需要信任目标服务器的证书，如果证书不受信任或者路径有问题，就会导致录制失败。"
keywords: "JMeter 5.6.3 jdk 1.8 不能录制https网页脚本的解决办法"
categories: ['未分类']
tags: ['Jmeter', 'Java', 'Https']
artid: "146221303"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146221303
    alt: "JMeter-5.6.3-jdk-1.8-不能录制https网页脚本的解决办法"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146221303
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146221303
cover: https://bing.ee123.net/img/rand?artid=146221303
image: https://bing.ee123.net/img/rand?artid=146221303
img: https://bing.ee123.net/img/rand?artid=146221303
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     JMeter 5.6.3 jdk 1.8 不能录制https网页脚本的解决办法
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     安装了证书仍然出现问题。首先自己查找答案，以为是浏览器的版本低，后来发现是JDK的版本低，换为JDK11问题解决。
    </p>
    <p>
     用DeepSeek得到如下的答案：
    </p>
    <p>
     已深度思考（用时13秒）
    </p>
    <p>
     好的，我现在需要解决用户在使用JMeter 5.6.3和JDK 1.8时无法录制HTTPS网页脚本的问题。首先，我得回忆一下常见的导致这个问题的原因有哪些。
    </p>
    <p>
     首先想到的是SSL证书的问题。JMeter在录制HTTPS时需要信任目标服务器的证书，如果证书不受信任或者路径有问题，就会导致录制失败。这时候可能需要安装或导入正确的证书到Java的信任库中。不过用户的JDK版本比较旧，是1.8，可能需要注意证书是否兼容。
    </p>
    <p>
     然后，检查JMeter的配置是否正确。比如，是否启用了SSL支持，相关的HTTP Sampler设置是否正确，特别是协议设置为HTTPS，端口是否正确，还有可能是否忽略了SSL验证（虽然不推荐在生产环境使用）。但用户可能是在测试环境中，所以可以暂时关闭验证来排除问题，不过这只是权宜之计。
    </p>
    <p>
     接下来，考虑是否需要更新JMeter或JDK。虽然用户当前使用的是5.6.3，但也许有后续版本修复了某些bug。不过JDK 1.8已经进入长期支持阶段，可能不再有新功能更新，但某些安全库可能需要更新。比如，如果JMeter依赖的SSL/TLS库版本过低，可能会导致兼容性问题。可以建议用户升级到更新的JDK版本，比如11或17，这些版本默认包含更现代的加密套件和修复的安全漏洞。
    </p>
    <p>
     另外，防火墙或代理设置也可能阻止JMeter连接到目标服务器。用户需要确保JMeter所在的机器能够访问目标网站，且没有防火墙规则阻止HTTPS流量。同时，如果使用了代理服务器，需要在JMeter的配置中正确设置代理参数。
    </p>
    <p>
     还有一种可能性是目标网站使用了HSTS（HTTP严格传输安全），强制使用HTTPS且可能拒绝不信任的证书。这种情况下，即使用户安装了证书，也可能无法正常录制，因为HSTS会阻止旧证书或未正确配置的连接。此时可能需要禁用HSTS，但这通常不建议，或者用户需要联系网站管理员获取正确的证书。
    </p>
    <p>
     此外，用户可能需要手动配置SSL上下文，比如指定信任库的位置和密码。在JMeter的启动选项中添加参数，如-Djavax.net.ssl.trustStore和-Djavax.net.ssl.trustStorePassword，指向正确的JKS文件。如果用户之前没有导入证书，可能需要先使用浏览器导出证书，再将其导入到Java的信任库中。
    </p>
    <p>
     还有可能涉及到协议版本的问题。JDK 1.8支持的TLS版本可能较旧，而目标服务器可能仅支持较新的TLS版本（如TLS 1.2或1.3）。这时需要检查双方支持的协议版本是否有交集。可以通过配置JMeter使用特定的SSL协议，例如在HTTP Sampler中设置sslProtocol属性为TLSv1.2，或者在JMeter的启动参数中配置。但需要注意，JDK 1.8默认可能不支持TLS 1.3，所以可能需要升级JDK。
    </p>
    <p>
     另外，查看JMeter的日志文件会有帮助，用户应该查看bin目录下的jmeter.log文件，寻找具体的错误信息，比如SSLHandshakeException或其他相关异常，这能更准确地定位问题所在。例如，如果日志中提到证书无效，可能是证书未正确安装；如果是协议不支持，则可能需要调整协议配置。
    </p>
    <p>
     总结可能的解决步骤：
    </p>
    <ol>
     <li>
      确保目标网站的SSL证书已被正确导入到Java的信任库。
     </li>
     <li>
      在JMeter中配置正确的HTTPS参数，包括端口、协议版本等。
     </li>
     <li>
      检查防火墙和代理设置，确保没有阻止JMeter的连接。
     </li>
     <li>
      考虑升级JDK到更高版本以支持更新的SSL/TLS协议。
     </li>
     <li>
      禁用HSTS（仅作为临时解决方案）。
     </li>
     <li>
      查看JMeter日志文件获取详细错误信息，根据具体错误进行调试。
     </li>
     <li>
      如果使用代理，确保代理配置正确，并且代理服务器支持HTTPS录制。
     </li>
    </ol>
    <p>
     现在需要将这些思路整理成一个结构化的回答，分步骤说明可能的解决方法，并给出具体的操作建议，比如如何导入证书，如何修改JMeter配置，如何升级JDK等。同时要提醒用户注意安全风险，例如关闭SSL验证不应在生产环境中使用。
    </p>
    <p>
     以下是针对JMeter 5.6.3与JDK 1.8无法录制HTTPS脚本的逐步解决方案：
    </p>
    <hr/>
    <h4>
     ​
     <strong>
      1. 检查并安装SSL证书
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题原因
     </strong>
    </h5>
    <p>
     JMeter默认不信任自签名证书或未导入的CA证书，导致HTTPS握手失败。
    </p>
    <h5>
     ​
     <strong>
      解决方法
     </strong>
     ：
    </h5>
    <ol>
     <li>
      <p>
       ​
       <strong>
        手动安装证书
       </strong>
       ：
      </p>
      <ul>
       <li>
        用浏览器访问目标网站，导出其SSL证书（通常为
        <code>
         .crt
        </code>
        或
        <code>
         .pem
        </code>
        格式）。
       </li>
       <li>
        使用
        <code>
         keytool
        </code>
        命令将证书导入Java信任库：
        <pre></pre>
        <p>
         bash
        </p>
        <pre><code>keytool -import -alias website_cert -file /path/to/certificate.crt -keystore $JAVA_HOME/jre/lib/security/cacerts</code></pre>
       </li>
       <li>
        输入默认密码
        <code>
         changeit
        </code>
        （若提示）。
       </li>
      </ul>
     </li>
     <li>
      <p>
       ​
       <strong>
        自动信任所有证书（仅调试用）​
       </strong>
       ：
      </p>
      <ul>
       <li>
        修改JMeter启动参数，禁用SSL验证：
        <pre></pre>
        <p>
         bash
        </p>
        <pre><code>java -Dhttps.protocols=TLSv1.2 -Djavax.net.ssl.trustStore=/dev/null -jar jmeter.jar</code></pre>
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      2. 配置JMeter HTTPS参数
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题原因
     </strong>
    </h5>
    <p>
     未正确配置SSL协议或端口。
    </p>
    <h5>
     ​
     <strong>
      解决方法
     </strong>
     ：
    </h5>
    <ol>
     <li>
      <p>
       ​
       <strong>
        修改HTTP Sampler属性
       </strong>
       ：
      </p>
      <ul>
       <li>
        右键点击HTTP请求 → ​
        <strong>
         Properties
        </strong>
        → 设置：
        <ul>
         <li>
          <code>
           Protocol
          </code>
          :
          <code>
           HTTPS
          </code>
         </li>
         <li>
          <code>
           Server Name or IP
          </code>
          : 目标域名/IP
         </li>
         <li>
          <code>
           Port
          </code>
          : 默认443（如非标准端口需填写）
         </li>
         <li>
          <code>
           SSL Protocol
          </code>
          : 选择兼容的协议（如
          <code>
           TLSv1.2
          </code>
          ）
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      <p>
       ​
       <strong>
        全局SSL配置（可选）​
       </strong>
       ：
       <br/>
       在
       <code>
        user.properties
       </code>
       文件中添加：
      </p>
      <pre></pre>
      <p>
       properties
      </p>
      <pre><code>https.default.protocol=TLSv1.2
https.socketFactory.class=org.apache.jmeter.util.ssl.SSLManager</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      3. 升级JDK版本
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题原因
     </strong>
    </h5>
    <p>
     JDK 1.8默认支持的TLS版本较旧（如TLS 1.1），可能无法与现代服务器通信。
    </p>
    <h5>
     ​
     <strong>
      解决方法
     </strong>
     ：
    </h5>
    <ol>
     <li>
      <p>
       ​
       <strong>
        升级到JDK 11/17
       </strong>
       ：
      </p>
      <ul>
       <li>
        下载并安装JDK 11或JDK 17。
       </li>
       <li>
        配置环境变量
        <code>
         JAVA_HOME
        </code>
        指向新版本。
       </li>
       <li>
        重新启动JMeter。
       </li>
      </ul>
     </li>
     <li>
      <p>
       ​
       <strong>
        强制使用TLS 1.2（兼容JDK 1.8）​
       </strong>
       ：
       <br/>
       修改JMeter启动命令：
      </p>
      <pre></pre>
      <p>
       bash
      </p>
      <pre><code>java -Dhttps.protocols=TLSv1.2 -jar jmeter.jar</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      4. 处理HSTS限制
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题原因
     </strong>
    </h5>
    <p>
     目标网站启用了HSTS，强制使用HTTPS且拒绝旧证书。
    </p>
    <h5>
     ​
     <strong>
      解决方法
     </strong>
     ：
    </h5>
    <ol>
     <li>
      <p>
       ​
       <strong>
        禁用HSTS（临时方案）​
       </strong>
       ：
       <br/>
       在浏览器中输入
       <code>
        chrome://net-internals/#hsts
       </code>
       → 在
       <strong>
        Delete domain
       </strong>
       中删除目标域名。
      </p>
     </li>
     <li>
      <p>
       ​
       <strong>
        使用Chrome无头模式绕过（高级）​
       </strong>
       ：
       <br/>
       启动Chrome时添加参数：
      </p>
      <pre></pre>
      <p>
       bash
      </p>
      <pre><code>chrome --disable-hsts --headless ...</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      5. 检查网络与代理设置
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题原因
     </strong>
    </h5>
    <p>
     防火墙或代理拦截了JMeter的HTTPS流量。
    </p>
    <h5>
     ​
     <strong>
      解决方法
     </strong>
     ：
    </h5>
    <ol>
     <li>
      <p>
       ​
       <strong>
        放行JMeter端口
       </strong>
       ：
       <br/>
       确保防火墙允许JMeter使用的端口（默认8089用于GUI，远程调用需开放相应端口）。
      </p>
     </li>
     <li>
      <p>
       ​
       <strong>
        配置代理（如需通过代理录制）​
       </strong>
       ：
      </p>
      <ul>
       <li>
        在JMeter属性文件中设置：
        <pre></pre>
        <p>
         properties
        </p>
        <pre><code>proxyHost=proxy.example.com
proxyPort=8080
https.proxyHost=proxy.example.com
https.proxyPort=8080</code></pre>
       </li>
       <li>
        导入代理CA证书到Java信任库。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      6. 查看日志定位错误
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题原因
     </strong>
    </h5>
    <p>
     缺乏详细错误信息，难以精准定位。
    </p>
    <h5>
     ​
     <strong>
      解决方法
     </strong>
     ：
    </h5>
    <ol>
     <li>
      ​
      <strong>
       启用JMeter调试日志
      </strong>
      ：
      <ul>
       <li>
        修改
        <code>
         log4j2.properties
        </code>
        文件（位于
        <code>
         bin
        </code>
        目录）：
        <pre></pre>
        <p>
         properties
        </p>
        <pre><code>log_level.jmeter=DEBUG</code></pre>
       </li>
       <li>
        重新启动JMeter，观察日志中的
        <code>
         SSLHandshakeException
        </code>
        等关键字。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      7. 其他注意事项
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       ​
       <strong>
        更新JMeter至最新版
       </strong>
       ：
       <br/>
       尽管当前问题可能与版本无关，但JMeter 5.6.3已较旧，建议升级到最新稳定版。
      </p>
     </li>
     <li>
      <p>
       ​
       <strong>
        测试非HTTPS页面
       </strong>
       ：
       <br/>
       先尝试录制HTTP页面，确认JMeter基础功能正常。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      总结步骤
     </strong>
    </h4>
    <ol>
     <li>
      ​
      <strong>
       导入证书
      </strong>
      → 2. ​
      <strong>
       配置SSL协议
      </strong>
      → 3. ​
      <strong>
       升级JDK
      </strong>
      → 4. ​
      <strong>
       检查网络/代理
      </strong>
      → 5. ​
      <strong>
       分析日志
      </strong>
      。
     </li>
    </ol>
    <p>
     通过以上步骤，应能解决绝大多数HTTPS录制失败问题。若仍遇困难，请提供具体的错误日志以便进一步诊断。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f6b6576696e67616f2f:61727469636c652f64657461696c732f313436323231333033" class_="artid" style="display:none">
 </p>
</div>


