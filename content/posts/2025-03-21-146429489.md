---
layout: post
title: "AgentDify-Docker-安装问题-INTERNAL-SERVER-ERROR"
date: 2025-03-21T21:35:19+0800
description: "解决 Dify 各种问题，插件plus、internal server error各种原因"
keywords: "dify internal server error"
categories: ['未分类']
tags: ['运维', '容器', 'Docker']
artid: "146429489"
arturl: "https://blog.csdn.net/hjh_cos/article/details/146429489"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146429489
    alt: "AgentDify-Docker-安装问题-INTERNAL-SERVER-ERROR"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146429489
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146429489
cover: https://bing.ee123.net/img/rand?artid=146429489
image: https://bing.ee123.net/img/rand?artid=146429489
img: https://bing.ee123.net/img/rand?artid=146429489
---



# 【Agent】Dify Docker 安装问题 INTERNAL SERVER ERROR

![](https://i-operation.csdnimg.cn/images/cf31225e169b4512917b2e77694eb0a2.png)Dify Docker安装及插件使用问题



加🐧群：1013889941  
 总结：建议大家选择稳定版本的分支，直接拉取 master 分支，可能出现一下后面更新代码导致缺失一些环境内容。

### 插件启动、安装、运行问题

群友反馈：cnnecticnRefusedErrcr:Errne 111 Cennecticn refused  
 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/d1e2c50ec1344b55a59f587b7d5de15d.png)

解决方式：https://github.com/langgenius/dify/issues/20595

修改默认 API 服务链接

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/49f5a546849547ddbc634093500a617c.png)

### 启动报错 一直停留在 INSTALL 界面

我是通过 Docker 进行安装的，由于项目开发者不严谨导致，遇到一个奇怪的问题： `INTERNAL SERVER ERROR` 。  
 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/f0b34caee2304cf585f7e5222697870a.png)

而这个原因是因为他这个版本里面数据库没有对应的 dify_setups 表，参考 [#ISSUES 15901](https://github.com/langgenius/dify/issues/15901)

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/68cbb05e6f374626b21f87e314562df6.png)

```shell
psql -d dify_plugin

CREATE TABLE IF NOT EXISTS dify_setups (
    version VARCHAR(255) NOT NULL,
    setup_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(0) NOT NULL,
    PRIMARY KEY (version)
);

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8da8aed5346f4b0590f000464f9a3f90.png)

然后重启 `flask`

```shell
docker exec docker-api-1 poetry run python -m flask db upgrade

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/5b4edff0212f414c9d666439df827071.png)

### ollama 添加模型失败

当安装好 ollama 插件，去添加 ollama 模型是发现保存按钮点击没有反应。  
 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/1c950be34bdf48a09fe86508b091aa61.png)  
 添加保存失败：[When I tried to add the Deepseek model after adding Olama, clicking the save button did not respond · Issue #15538 · langgenius/dify](https://github.com/langgenius/dify/issues/15538)  
 实测【图三】的方法可以解决保存失败的问题

```properties
PROVIDER_OLLAMA_API_BASE_URL=http://host.docker.internal:11434/
PLUGIN_WORKING_PATH=/app/cwd

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/20a7f664cd5841c698f962ddaeb0752f.png)

图1

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/e09478981d294f6b8b89c5025553a24f.png#pic_center)

图2

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/604357706dec442a8e9b00f7808c7eac.png#pic_center)

图3

### 加群互相避坑🕳️

加🐧群：`1013889941`



