---
layout: post
title: "QT第五课-QT系统相关-文件"
date: 2025-03-09 23:07:23 +0800
description: "​🎂      作者介绍：                              🎂🎂🎂作者id：老秦包你会，         🎂简单介绍：🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂喜欢学习C语言、C++和python等编程语言，是一位爱分享的博主，有兴趣的小可爱可以来互讨         🎂🎂🎂🎂🎂🎂🎂🎂。"
keywords: "QT第五课------QT系统相关------文件"
categories: ['Qt']
tags: ['开发语言', 'Qt']
artid: "144267804"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=144267804
    alt: "QT第五课-QT系统相关-文件"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=144267804
featuredImagePreview: https://bing.ee123.net/img/rand?artid=144267804
cover: https://bing.ee123.net/img/rand?artid=144267804
image: https://bing.ee123.net/img/rand?artid=144267804
img: https://bing.ee123.net/img/rand?artid=144267804
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     QT第五课------QT系统相关------文件
    </h1>
   </div>
   <div class="article-resource-info-box">
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     <strong>
      作者前言
     </strong>
    </h2>
    <blockquote>
     <blockquote>
      <p>
       🎂 ✨✨✨✨✨✨🍧🍧🍧🍧🍧🍧🍧🎂
       <br/>
       ​🎂 作者介绍： 🎂🎂
       <br/>
       🎂 🎉🎉🎉🎉🎉🎉🎉 🎂
       <br/>
       🎂作者id：老秦包你会， 🎂
       <br/>
       简单介绍：🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂🎂
       <br/>
       喜欢学习C语言、C++和python等编程语言，是一位爱分享的博主，有兴趣的小可爱可以来互讨 🎂🎂🎂🎂🎂🎂🎂🎂
       <br/>
       🎂个人主页::
       <a href="https://blog.csdn.net/m0_69984273?type=blog">
        小小页面
       </a>
       🎂
       <br/>
       🎂gitee页面:
       <a href="https://gitee.com/qin-laoda" rel="nofollow">
        秦大大
       </a>
       🎂
       <br/>
       🎂🎂🎂🎂🎂🎂🎂🎂
       <br/>
       🎂 一个爱分享的小博主 欢迎小可爱们前来借鉴🎂
      </p>
     </blockquote>
     <hr/>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_16">
     </a>
     简述
    </h2>
    <p>
     ⽂件操作是应⽤程序必不可少的部分。Qt 作为⼀个通⽤开发库，提供了跨平台的⽂件操作能⼒。 Qt提供了很多关于⽂件的类，通过这些类能够对⽂件系统进⾏操作，如⽂件读写、⽂件信息获取、⽂件复制或重命名等。
     <br/>
     前面我们学习过C语言的fopen、fread、fwirte、fclose，
     <br/>
     c++中有fstream、 &gt;&gt;、&lt;&lt;、close等
     <br/>
     Linux有open 、read、 write
     <br/>
     而Qt也有一套自己的文件操作，是基于读写的操作
     <br/>
     在 Qt 中，⽂件读写的类为 QFile 。QFile 的⽗类为 QFileDevice ，QFileDevice 提供了⽂件交互操作的底层功能。 QFileDevice 的⽗类是 QIODevice，QIODevice 的⽗类为 QObject 。
     <br/>
     如图：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/97ecc0e8fc914baa89e52e4830106e6b.png">
      <br/>
      上图中各类的说明如下：
      <br/>
      •
      <strong>
       QFile
      </strong>
      是⽤于⽂件操作和⽂件数据读写的类，使⽤ QFile 可以读写任意格式的⽂件。
      <br/>
      •
      <strong>
       QSaveFile
      </strong>
      是⽤于安全保存⽂件的类。使⽤ QSaveFile 保存⽂件时，它会先把数据写⼊⼀个临时⽂件，成功提交后才将数据写⼊最终的⽂件。如果保存过程中出现错误，临时⽂件⾥的数据不会被写⼊最终⽂件，这样就能确保最终⽂件中不会丢失数据或被写⼊部分数据。 在保存⽐较⼤的⽂件或复杂格式的⽂件时可以使⽤这个类，例如从⽹络上下载⽂件等。
      <br/>
      •
      <strong>
       QTemporaryFile
      </strong>
      是⽤于创建临时⽂件的类。使⽤函数 QTemporaryFile::open() 就能创建⼀个⽂件
      <br/>
      名唯⼀的临时⽂件，在 QTemporaryFile 对象被删除时，临时⽂件被⾃动删除。
      <br/>
      •
      <strong>
       QTcpSocket 和 QUdpSocket
      </strong>
      是分别实现了 TCP 和 UDP 的类。
      <br/>
      •
      <strong>
       QSerialPort
      </strong>
      是实现了串⼝通信的类，通过这个类可以实现计算机与串⼝设备的通信。
      <br/>
      •
      <strong>
       QBluetoothSocket
      </strong>
      是⽤于蓝⽛通信的类。⼿机和平板计算机等移动设备有蓝⽛通信模块，笔记本
      <br/>
      电脑⼀般也有蓝⽛通信模块。通过QBluetoothSocket类，就可以编写蓝⽛通信程。如编程实现笔
      <br/>
      记本电脑与⼿机的蓝⽛通信。
      <br/>
      •
      <strong>
       QProcess
      </strong>
      类⽤于启动外部程序，并且可以给程序传递参数。
      <br/>
      •
      <strong>
       QBuffer
      </strong>
      以⼀个 QByteArray 对象作为数据缓冲区，将 QByteArray 对象当作⼀个 I/O 设备来读写
     </img>
    </p>
    <h2>
     <a id="File_37">
     </a>
     File类
    </h2>
    <p>
     文件的操作基本就是
     <strong>
      打开文件， 读取文件， 写入文件， 关闭文件，
     </strong>
     <br/>
     下面一一介绍一下
    </p>
    <h3>
     <a id="_40">
     </a>
     打开文件
    </h3>
    <p>
     需要使⽤ open()函数 打开该设备，⽽且必须指定正确的打开模式，
     <br/>
     如图：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/071ecb971837475bb9829f86f2f0b791.png">
      <br/>
      这里虽然有两个现成的open函数，但是这两个函数在第一个参数都需要指定一个文件路径或许文件描述符，很不方便，一般情况下是使用下面这个open来进行的
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/805163182b494bbea16d12f51b1f45b0.png">
       <br/>
       我们只需对这个参数进行写入就可以了。
       <br/>
       QIODevice 中所有的打开模式由 QIODevice::OpenMode 枚举变量定义的，在这个枚举类型中有枚举常量有如下：
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9200128299cc44efa2ee470791d27f63.png"/>
      </img>
     </img>
    </p>
    <h4>
     <a id="_50">
     </a>
     读操作
    </h4>
    <p>
     当我们打开文件的时候，就要进行一些相关操作，而读操作就是这些操作之一，前面我们学习C语言和c++的时候就会知道， 一个文件以读方式进行打开，我们就需要读取一些我们需要的数据，在QT中，也有相关的读取数据的函数，这些读操作函数是继承于父类的父类（OpenMode）的成员函数，如图下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cefafe8ab42c401b8b9f20514d6ce60d.png">
      <br/>
      下面演示一部分代码
     </img>
    </p>
    <pre><code> //创建一个文件对话框
            QString path = QFileDialog::getOpenFileName(this, name,"./");
            qDebug()&lt;&lt; path;
            //把文件路劲显示到状态栏中
            status-&gt;showMessage(path);
            //接下来打开对应的文件
            QFile* file = new QFile(path);
            //只读方式打开,判断文件是否真正的打开
            if(!file-&gt;open(QIODevice::ReadOnly))
            {
                qDebug()&lt;&lt; "打开失败";
                return;
            }
            //操作写入
            edit-&gt;setText(file-&gt;readAll());
           //关闭文件
            file-&gt;close();
</code></pre>
    <p>
     效果图如下:
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5bb173fc59d14573822ff4f63233011e.png"/>
    </p>
    <h4>
     <a id="_77">
     </a>
     写操作
    </h4>
    <p>
     当我们打开文件的时候，就要进行一些相关操作，而写操作就是这些操作之一，前面我们学习C语言和c++的时候就会知道， 一个文件以写方式进行打开，我们就需要读取一些我们需要的数据，在QT中，也有相关的写入数据的函数，这些写操作函数是继承于父类的父类（OpenMode）的成员函数，如图下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9240bf2d4c1e463b95647bd3b29c1949.png"/>
    </p>
    <pre><code>         //保存

            //创建一个文件保存对话框
            QString path = QFileDialog::getSaveFileName(this,name, "./");
            qDebug()&lt;&lt; path;
            QFile *file = new QFile(path);
            if(!file-&gt;open(QIODevice::WriteOnly))
            {
                qDebug()&lt;&lt; "打开失败";
                return;
            }
            //写入文件
            //先获取到对应的文本
            file-&gt;write(edit-&gt;toPlainText().toUtf8());
            //关闭文件
            file-&gt;close();
</code></pre>
    <p>
     效果图这里就不演示了,
    </p>
    <h4>
     <a id="_102">
     </a>
     关闭操作
    </h4>
    <p>
     关闭的本质就是释放文件描述符表的表项， 因为文件描述符表存在上限，如果一直打开，不关闭就会被站满，后面尝试打开，就会打不开
    </p>
    <p>
     关于读写操作的代码在前面了
    </p>
    <h3>
     <a id="_109">
     </a>
     ⽂件和⽬录信息类
    </h3>
    <p>
     QFileInfo 是 Qt 提供的⼀个⽤于获取⽂件和⽬录信息的类，如获取⽂件名、⽂件⼤⼩、⽂件修改⽇期
     <br/>
     等。QFileInfo类中提供了很多的⽅法，常⽤的有：
     <br/>
     • isDir() 检查该⽂件是否是⽬录；
     <br/>
     • isExecutable() 检查该⽂件是否是可执⾏⽂件；
     <br/>
     • fileName() 获得⽂件名；
     <br/>
     • completeBaseName() 获取完整的⽂件名；
     <br/>
     • suffix() 获取⽂件后缀名；
     <br/>
     • completeSuffix() 获取完整的⽂件后缀；
     <br/>
     • size() 获取⽂件⼤⼩；
     <br/>
     • isFile() 判断是否为⽂件；
     <br/>
     • fileTime() 获取⽂件创建时间、修改时间、最近访问时间等；
     <br/>
     这个功能在之前的C以及C++是没有的,如果要获取对应文件的相关信息需要使用到对应的系统的api接口, 但是在C++17中引入了filesystem
    </p>
    <p>
     下面我们写一个Qt的示例来演示
    </p>
    <pre><code>void Myfile::Fileinfo(const QString &amp;path)
{
    //创建一个QFileinfo对象
    QFileInfo* fileinfo = new QFileInfo(path);
    if(fileinfo-&gt;isDir())
        qDebug()&lt;&lt; "目录:"&lt;&lt;fileinfo-&gt;fileName();
    else
        qDebug()&lt;&lt; "文件:"&lt;&lt;fileinfo-&gt;fileName();
    if(fileinfo-&gt;isExecutable())
        qDebug()&lt;&lt; "是否可执行"&lt;&lt;"yes";
    else
         qDebug()&lt;&lt; "是否可执行"&lt;&lt;"no";
    qDebug()&lt;&lt; "后缀名:"&lt;&lt;fileinfo-&gt;suffix();
    qDebug()&lt;&lt; "文件大小:"&lt;&lt;fileinfo-&gt;size();
   qDebug()&lt;&lt; "文件修改时间:"&lt;&lt;fileinfo-&gt;fileTime(QFile::FileModificationTime).toString();
}
</code></pre>
    <p>
     效果图：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5801afee75604eb0a34b95d6f4e98954.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36393938343237332f:61727469636c652f64657461696c732f313434323637383034" class_="artid" style="display:none">
 </p>
</div>


