---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f37393839353534312f:61727469636c652f64657461696c732f313436323536323836"
layout: post
title: "硬件驱动51单片机独立按键中断定时器计数器"
date: 2025-03-14 21:44:12 +0800
description: "以16位定时器模式工作，按下不同的按键，使LED灯分别按照1s,500ms,200ms,100ms动态闪烁。打开外部中断0和外部中断1，当外部中断0执行时，点亮所有LED灯，当外部中断1执行时，熄灭所有LED灯。单片机通电后，51单片机的40个引脚均为高电平（即值均为1），其中引脚5~8为。若需要1毫秒计数一次，则定时器的初值应为65535-(921600÷1000)=本人使用的51单片机的系统时钟频率为11.0592MHz，定时器。按下特定按键，对应的LED灯亮起，同时数码管显示对应数字。"
keywords: "硬件驱动——51单片机：独立按键、中断、定时器/计数器"
categories: ['学习记录']
tags: ['嵌入式硬件', '单片机', '51单片机']
artid: "146256286"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146256286
    alt: "硬件驱动51单片机独立按键中断定时器计数器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146256286
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146256286
cover: https://bing.ee123.net/img/rand?artid=146256286
image: https://bing.ee123.net/img/rand?artid=146256286
img: https://bing.ee123.net/img/rand?artid=146256286
---

# 硬件驱动——51单片机：独立按键、中断、定时器/计数器

---

## 一、独立按键

---

### 1.原理

单片机通电后，51单片机的40个引脚均为高电平（即值均为1），其中引脚5~8为
**寄存器P1**
的
**后四个**
引脚P14~P17，负责控制独立按键模块的
**4个按键开关**
。

按键
**按下后**
，对应线路
**导通**
，电压接低变为
**低电平**
。

![](https://i-blog.csdnimg.cn/direct/64a02275c78043c18f40916b8b398c99.png)

### 2.封装函数

![](https://i-blog.csdnimg.cn/direct/918b478abc1841a48d46b80eb9744ce4.png)

### **3.按键控制点灯+ 数码管**

按下特定按键，对应的LED灯亮起，同时数码管显示对应数字

![](https://i-blog.csdnimg.cn/direct/738fc1b76fe044f8b2b4ac4e7ab04949.png)

## 二、中断

---

### 1.原理

![](https://i-blog.csdnimg.cn/direct/230f1c5b9e3f40f497fc0c3b40479bca.png)

* **中断向量表：**

即一个
**函数指针的数组**
。

**void (\*pfn)(void)  interrupt n**

![](https://i-blog.csdnimg.cn/direct/947b4415ccb34925870989455b763f86.png)

### 2.步骤

**中断处理六大步骤：**

![](https://i-blog.csdnimg.cn/direct/418bb5a8ad6d48c795b09b8b240f5579.png)

### 3.中断寄存器IE

![](https://i-blog.csdnimg.cn/direct/a5c103f7e53848cbb78b37128abfd635.png)

### 4.控制寄存器TCON

![](https://i-blog.csdnimg.cn/direct/67bfec397c514993be420be7830b2d24.png)

### 5.打开外部中断0和1

打开外部中断0和外部中断1，当外部中断0执行时，点亮所有LED灯，当外部中断1执行时，熄灭所有LED灯

![](https://i-blog.csdnimg.cn/direct/6a50961d22d7400693dcc41c9fe93957.png)

## 三、定时器/计数器

---

### 1.原理

定时器/计数器的核心部件是一个
**加法计数器**
，其本质是对脉冲进行计数。

本人使用的51单片机的系统时钟频率为11.0592MHz，定时器
**每12个时钟**
得到一个计数脉冲，计数值加1。计数值的类型为
**unsigned short**
，大小为
**两个字节**
，计数范围为
**0~65535**
。

故实际有效频率为：11.0592\*1000\*1000÷12=921600Hz

周期为：1÷921600=1.08507e^-6秒，接近1微秒。

若需要1毫秒计数一次，则定时器的初值应为65535-(921600÷1000)=
**64613**

### 2.控制寄存器TCON

![](https://i-blog.csdnimg.cn/direct/787d9e03cadd41bf836ab1d545b40b63.png)

### 3.工作模式寄存器TMOD

![](https://i-blog.csdnimg.cn/direct/4695fd27114546dbab3675f0d2fdce32.png)

![](https://i-blog.csdnimg.cn/direct/b6e16938916e48408db1c865d5e07460.png)

### 4.按键控制频率的动态闪烁

以16位定时器模式工作，按下不同的按键，使LED灯分别按照1s,500ms,200ms,100ms动态闪烁

![](https://i-blog.csdnimg.cn/direct/3a477446de3e4b329b23031619edc935.png)

![](https://i-blog.csdnimg.cn/direct/ef50fb07fdaa482195095cb95dc2a8f0.png)