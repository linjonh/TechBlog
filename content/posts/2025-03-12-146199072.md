---
arturl_encode: "68747470:733a2f2f626c6f672e6373646e2e6e65742f5a5368756a692f:61727469636c652f64657461696c732f313436313939303732"
layout: post
title: "Java-Streamæµ"
date: 2025-03-12 10:48:35 +08:00
description: "Java Streamæµâ€”â€”Streamæµçš„è®¤è¯†å’Œä½¿ç”¨"
keywords: "Java Streamæµ"
categories: ['æœªåˆ†ç±»']
tags: ['å¼€å‘è¯­è¨€', 'Windows', 'Java']
artid: "146199072"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146199072
    alt: "Java-Streamæµ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146199072
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146199072
cover: https://bing.ee123.net/img/rand?artid=146199072
image: https://bing.ee123.net/img/rand?artid=146199072
img: https://bing.ee123.net/img/rand?artid=146199072
---

# Java Streamæµ

## Java Streamæµ

### è®¤è¯†Streamæµ

* æ˜¯Jdk8å¼€å§‹æ–°å¢çš„ä¸€å¥—API(java.util.stream.\*)ï¼Œå¯ä»¥ç”¨äºæ“ä½œé›†åˆæˆ–è€…æ•°ç»„çš„æ•°æ®
* ä¼˜åŠ¿ï¼šStreamæµå¤§é‡çš„ç»“åˆäº†Lambdaçš„è¯­æ³•é£æ ¼æ¥ç¼–ç¨‹ï¼ŒåŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½é«˜æ•ˆã€ä»£ç ç®€æ´ã€å¯è¯»æ€§å¥½

***ä»£ç ä½“éªŒ***

```java
package com.itheima.stream;

import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

public class StreamDemo1 {
    public static void main(String[] args) {
        // è®¤è¯†Streamæµ
        List<String> list = new ArrayList<>();
        list.add("å¼ æ— å¿Œ");
        list.add("å‘¨èŠ·è‹¥");
        list.add("èµµæ•");
        list.add("å¼ å¼º");
        list.add("å¼ ä¸‰ä¸°");
        list.add("å¼ ä¸‰");
        list.add("å¼ ç¿ å…°");

        System.out.println(list);

        List<String> newList = new ArrayList<>();
        for (String name : list) {
            if (name.startsWith("å¼ ") && name.length() == 2) {
                newList.add(name);
            }
        }
        System.out.println(newList);

        // ä½¿ç”¨Streamæµè§£å†³
        List<String> newList1 = list.stream().filter(name -> name.startsWith("å¼ ")).filter(name -> name.length() == 3).collect(Collectors.toList()); // filter è¿‡æ»¤
        System.out.println(newList1);
    }
}

```

### Streamæµçš„ä½¿ç”¨æ­¥éª¤

å‡†å¤‡æ•°æ®æºï¼ˆé›†åˆã€æ•°ç»„ã€â€¦ï¼‰â†’ è¿‡æ»¤ â†’ æ’åº â†’ å»é‡â†’ â€¦ â†’è·å–ç»“æœ

* 1.
  **è·å–Streamæµ**
  ï¼ŒStreamæµä»£è¡¨ç€ä¸€æ¡æµæ°´çº¿ï¼Œå¹¶èƒ½ä¸æ•°æ®æºå»ºç«‹è¿æ¥ï¼›
* 2.
  **è°ƒç”¨æµæ°´çº¿å„ç§æ–¹æ³•**
  ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼›
* 3.
  **è·å–å¤„ç†çš„æ•°æ®**
  ï¼Œéå†ã€ç»Ÿè®¡ã€æ”¶é›†åˆ°ä¸€ä¸ªæ–°çš„é›†åˆä¸­è¿”å›ç»“æœã€‚

### è·å–Streamæµ

* è·å– \*\*é›†åˆ \*\* çš„Streamæµ

| Collection æä¾›çš„å¦‚ä¸‹æ–¹æ³• | è¯´æ˜ |
| --- | --- |
| default Stream stream() | è·å–å½“å‰é›†åˆå¯¹è±¡çš„ Stream æµ |

* è·å– \*\*æ•°ç»„ \*\* çš„Streamæµ

| Arrays ç±»æä¾›çš„å¦‚ä¸‹æ–¹æ³• | è¯´æ˜ |
| --- | --- |
| public static Stream stream(T[] array) | è·å–å½“å‰æ•°ç»„çš„ Stream æµ |

| Stream ç±»æä¾›çš„å¦‚ä¸‹æ–¹æ³• | è¯´æ˜ |
| --- | --- |
| public static Stream of(Tâ€¦ values) | è·å–å½“å‰æ¥æ”¶æ•°æ®çš„ Stream æµ |

***ä»£ç å®ä¾‹***

```java
package com.itheima.stream;

import java.util.*;
import java.util.stream.Stream;

public class StreamDemo2 {
    public static void main(String[] args) {
        // 1.è·å–é›†åˆçš„Streamæµ
        Collection<String> list = new ArrayList<>();
        Stream<String> s = list.stream();

        // 2.è·å–Mapé›†åˆçš„Streamæµ
        Map<String, Integer> map = new HashMap<>();
        // map.stream(); // ä¸èƒ½ç›´æ¥è°ƒç”¨stream
        // è·å–é”®æµ
        Stream<String> keyStream = map.keySet().stream();
        // è·å–å€¼æµ
        Stream<Integer> valueStream = map.values().stream();
        // è·å–é”®å€¼å¯¹æµ
        Stream<Map.Entry<String, Integer>> entryStream = map.entrySet().stream();

        // è·å–æ•°ç»„çš„Streamæµ
        String[] name = {"å¼ æ— å¿Œ", "èµµæ•", "å¼ å¼º", "å¼ ä¸‰ä¸°", "å¼ ç¿ å±±", "å¼ å°å¼º"};
        Stream<String> stream = Arrays.stream(name); // æ–¹å¼1
        Stream<String> stream1 = Stream.of("å¼ æ— å¿Œ", "èµµæ•"); // æ–¹å¼2       
    }
}

```

### Streamæµæä¾›çš„å¸¸ç”¨æ–¹æ³•

* **ä¸­é—´æ–¹æ³•**
  æŒ‡çš„æ˜¯è°ƒç”¨å®Œæˆåä¼šè¿”å›æ–°çš„Streamæµï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨(æ”¯æŒé“¾å¼ç¼–ç¨‹)ã€‚

| Stream æä¾›çš„å¸¸ç”¨ä¸­é—´æ–¹æ³• | è¯´æ˜ |
| --- | --- |
| Stream filter(Predicate<? super T> predicate) | ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ |
| Stream *sorted()* | å¯¹å…ƒç´ è¿›è¡Œå‡åºæ’åº |
| Stream *sorted(Comparator<? super I> comparator)* | æŒ‰ç…§æŒ‡å®šè§„åˆ™æ’åº |
| Stream limit(long maxSize) | è·å–å‰å‡ ä¸ªå…ƒç´  |
| Stream skip(long n) | è·³è¿‡å‰å‡ ä¸ªå…ƒç´  |
| Stream distinct() | å»é™¤æµä¸­é‡å¤çš„å…ƒç´  |
| Stream map(Function<? super I,? extends R> mapper) | å¯¹å…ƒç´ è¿›è¡ŒåŠ å·¥ï¼Œå¹¶è¿”å›å¯¹åº”çš„æ–°æµ |
| static Stream concat(Stream a, Stream b) | åˆå¹¶ a å’Œ b ä¸¤ä¸ªæµä¸ºä¸€ä¸ªæµ |

***ä»£ç å®ä¾‹***

```java
package com.itheima.stream;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Stream;

public class StreamDemo3 {
    public static void main(String[] args) {
        // æŒæ¡Streamæµå¸¸ç”¨çš„ä¸­é—´æ–¹æ³•
        // 1.å¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤
        List<String> list = new ArrayList<>();
        list.add("å¼ ä¸‰ä¸°");
        list.add("å¼ æ— å¿Œ");
        list.add("å‘¨èŠ·è‹¥");
        list.add("èµµæ•");
        list.add("å¼ å¼º");
        list.add("å¼ ä¸‰");
        list.add("å¼ ç¿ å…°");
        list.add("å¼ æ™“å¼º");
        System.out.println(list);
        System.out.println("--------------------------å¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤--------------------------");
        list.stream().filter(name -> name.startsWith("å¼ ") && name.length() == 3).forEach(System.out::println);
        // 2.å¯¹å…ƒç´ è¿›è¡Œå‡åºæ’åº
        System.out.println("--------------------------å¯¹å…ƒç´ è¿›è¡Œå‡åºæ’åº--------------------------");
        List<Double> list1 = new ArrayList<>();
        // æ— è§„å¾‹æ·»åŠ æˆç»©ï¼Œæœ‰å°æ•°ç‚¹
        list1.add(99.5);
        list1.add(88.9);
        list1.add(88.9);
        list1.add(76.9);
        list1.add(98.7);
        list1.add(65.4);
        list1.add(87.2);

        list1.stream().sorted((o1, o2) -> Double.compare(o1, o2)).forEach(System.out::println); // å‡åºæ’åº
        // 3.å¯¹å…ƒç´ è¿›è¡Œé™åºæ’åº
        System.out.println("--------------------------å¯¹å…ƒç´ è¿›è¡Œé™åºæ’åº--------------------------");
        list1.stream().sorted((o1, o2) -> Double.compare(o2, o1)).forEach(System.out::println); // é™åºæ’åº
        // 4.è·å–å‰å‡ ä¸ªå…ƒç´ 
        System.out.println("--------------------------è·å–å‰å‡ ä¸ªå…ƒç´ --------------------------");
        list.stream().limit(3).forEach(System.out::println);
        // 5.è·³è¿‡å‰å‡ ä¸ªå…ƒç´ 
        System.out.println("--------------------------è·³è¿‡å‰å‡ ä¸ªå…ƒç´ --------------------------");
        list1.stream().skip(2).forEach(s -> System.out.println(s));
        // 6.å»é‡
        System.out.println("--------------------------å»é‡--------------------------");
        list1.stream().distinct().forEach(System.out::println);
        // 7.æ˜ å°„/åŠ å·¥æ–¹æ³•ï¼Œè¿”å›å¯¹åº”çš„æ–°Streamæµ
        System.out.println("--------------------------æ˜ å°„/åŠ å·¥æ–¹æ³•ï¼Œè¿”å›å¯¹åº”çš„æ–°Streamæµ--------------------------");
        // æ¯ä¸ªå­¦ç”ŸåŠ 5åˆ†ï¼ŒåŠ åˆ†è¶…è¿‡100åˆ†çš„ï¼Œåˆ™å˜ä¸º100åˆ†
        list1.stream().map(s -> (s + 5) > 100 ? 100 : s + 5).forEach(System.out::println);

        // 8.åˆå¹¶æµ
        System.out.println("--------------------------åˆå¹¶æµ--------------------------");
        Stream<Object> concat = Stream.concat(list.stream(), list1.stream());
        concat.forEach(System.out::println);
    }
}

```

### ç»ˆç»“æ–¹æ³•ã€æ”¶é›†Streamæµ

#### Streamæµçš„ç»ˆç»“æ–¹æ³•

* ç»ˆç»“æ–¹æ³•æŒ‡çš„æ˜¯è°ƒç”¨å®Œæˆåï¼Œä¸ä¼šè¿”å›æ–°Streamäº†ï¼Œæ²¡æ³•ç»§ç»­ä½¿ç”¨æµäº†ã€‚

| Stream æä¾›çš„å¸¸ç”¨ç»ˆç»“æ–¹æ³• | è¯´æ˜ |
| --- | --- |
| void forEach(Consumer action) | å¯¹æ­¤æµè¿ç®—åçš„å…ƒç´ æ‰§è¡Œéå† |
| long count() | ç»Ÿè®¡æ­¤æµè¿ç®—åçš„å…ƒç´ ä¸ªæ•° |
| Optional *max(Comparator<? super I> comparator)* | è·å–æ­¤æµè¿ç®—åçš„æœ€å¤§å€¼å…ƒç´  |
| Optional *min(Comparator<? super I> comparator)* | è·å–æ­¤æµè¿ç®—åçš„æœ€å°å€¼å…ƒç´  |

#### æ”¶é›†Streamæµ

* æ”¶é›†Streamæµï¼šå°±æ˜¯æŠŠStreamæµæ“ä½œåçš„ç»“æœè½¬å›åˆ°é›†åˆæˆ–è€…æ•°ç»„ä¸­å»è¿”å›
  + é›†åˆ/æ•°ç»„ï¼šæ‰æ˜¯å¼€å‘ä¸­çš„ç›®çš„
  + Streamæµï¼šæ–¹ä¾¿æ“ä½œé›†åˆ/æ•°ç»„çš„æ‰‹æ®µ

| Stream æä¾›çš„å¸¸ç”¨ç»ˆç»“æ–¹æ³• | è¯´æ˜ |
| --- | --- |
| R collect(Collector collector) | æŠŠæµå¤„ç†åçš„ç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæŒ‡å®šçš„é›†åˆä¸­å» |
| Object[] toArray() | æŠŠæµå¤„ç†åçš„ç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæ•°ç»„ä¸­å» |

| Collectors å·¥å…·ç±»æä¾›çš„å…·ä½“æ”¶é›†æ–¹å¼ | è¯´æ˜ |
| --- | --- |
| public static Collector toList() | æŠŠå…ƒç´ æ”¶é›†åˆ° List é›†åˆä¸­ |
| public static Collector toSet() | æŠŠå…ƒç´ æ”¶é›†åˆ° Set é›†åˆä¸­ |
| public static Collector toMap(Function keyMapper , Function valueMapper) | æŠŠå…ƒç´ æ”¶é›†åˆ° Map é›†åˆä¸­ |

***ä»£ç å®ä¾‹***

```java
package com.itheima.stream;

import java.util.*;
import java.util.stream.Collectors;
import java.util.stream.Stream;

import static java.util.Comparator.comparingDouble;

public class StreamDemo4 {
    public static void main(String[] args) {
        // Streamæµçš„ç»ˆç»“æ–¹æ³•
        List<Teacher> teacher = new ArrayList<>();
        teacher.add(new Teacher("å¼ ä¸‰ä¸°", 50, 51000));
        teacher.add(new Teacher("å¼ æ— å¿Œ", 20, 20000));
        teacher.add(new Teacher("å‘¨èŠ·è‹¥", 18, 18000));
        teacher.add(new Teacher("èµµæ•", 16, 16000));
        teacher.add(new Teacher("é‡‘æ¯›ç‹®ç‹", 60, 33000));

        System.out.println(teacher);
        // Streamçš„ç»ˆç»“æ–¹æ³•
        // 1.forEach
        System.out.println("------------------------------forEachç»ˆç»“æ–¹æ³•------------------------------");
        teacher.stream().filter(t -> t.getAge() > 30 && t.getSalary() > 30000).forEach(System.out::println);

        // 2.count
        System.out.println("------------------------------countç»ˆç»“æ–¹æ³•------------------------------");
        System.out.println(teacher.stream().filter(t -> t.getAge() > 30 && t.getSalary() > 30000).count());

        // 3.max
        System.out.println("------------------------------maxç»ˆç»“æ–¹æ³•------------------------------");
        Optional<Teacher> max = teacher.stream().max((t1, t2) -> Double.compare(t1.getSalary(), t2.getSalary()));
        // ç®€åŒ–ä»£ç 
        Optional<Teacher> max1 = teacher.stream().max(comparingDouble(Teacher::getSalary));
        Teacher maxTeacher = max.get();
        System.out.println(maxTeacher);

        // 4.min
        System.out.println("------------------------------minç»ˆç»“æ–¹æ³•------------------------------");
        Optional<Teacher> min = teacher.stream().min((t1, t2) -> Double.compare(t1.getSalary(), t2.getSalary()));
        Teacher minTeacher = min.get();
        System.out.println(minTeacher);


        // Streamçš„æ”¶é›†æ–¹æ³•ï¼ŒCollectors å·¥å…·ç±»æä¾›çš„å…·ä½“æ”¶é›†æ–¹å¼
        System.out.println("------------------------------collectorsæ”¶é›†æ–¹æ³•------------------------------");
        List<String> name = new ArrayList<>();
        name.add("å¼ ä¸‰ä¸°");
        name.add("å¼ æ— å¿Œ");
        name.add("å¼ æ— å¿Œ");
        name.add("å‘¨èŠ·è‹¥");
        name.add("èµµæ•");
        name.add("å¼ å¼º");
        name.add("å¼ ä¸‰");
        name.add("å¼ ç¿ å…°");
        name.add("å¼ æ™“å¼º");

        // æ”¶é›†åˆ°Listé›†åˆ
        System.out.println("--------------------------æ”¶é›†åˆ°Listé›†åˆ--------------------------");
        Stream<String> s1 = name.stream().filter(n -> n.startsWith("å¼ ") && n.length() == 3);
        List<String> s1List = s1.collect(Collectors.toList());
        System.out.println(s1List);

        // æ”¶é›†åˆ°Seté›†åˆ
        System.out.println("--------------------------æ”¶é›†åˆ°Seté›†åˆ--------------------------");
        HashSet<Object> s1Set = new HashSet<>();
        s1Set.addAll(s1List);
        System.out.println(s1Set);

        // æ”¶é›†åˆ°Mapé›†åˆ
        System.out.println("--------------------------æ”¶é›†åˆ°Mapé›†åˆ--------------------------");
        Stream<Teacher> s2 = teacher.stream().filter(t -> t.getAge() > 15);
        Map<String, Double> map = s2.collect(Collectors.toMap(Teacher::getName, Teacher::getSalary));
        System.out.println(map);

        // æ”¶é›†åˆ°æ•°ç»„
        System.out.println("--------------------------æ”¶é›†åˆ°æ•°ç»„--------------------------");
        Stream<String> s3 = name.stream().filter(n -> n.startsWith("å¼ ") && n.length() == 3);
        Object[] array = s3.toArray();
        System.out.println(Arrays.toString(array));
    }
}

```

### æ–¹æ³•ä¸­çš„å¯å˜å‚æ•°ï¼ˆæ‹“å±•ï¼‰

* å°±æ˜¯ä¸€ç§ç‰¹æ®Šå½¢å‚ï¼Œå®šä¹‰åœ¨æ–¹æ³•ã€æ„é€ å™¨çš„å½¢å‚åˆ—è¡¨é‡Œï¼Œæ ¼å¼æ˜¯:æ•°æ®ç±»å‹â€¦å‚æ•°åç§°ï¼›
* å¯å˜å‚æ•°çš„ç‰¹ç‚¹å’Œå¥½å¤„
  + ç‰¹ç‚¹ï¼šå¯ä»¥ä¸ä¼ æ•°æ®ç»™å®ƒï¼›å¯ä»¥ä¼ ä¸€ä¸ªæˆ–è€…åŒæ—¶ä¼ å¤šä¸ªæ•°æ®ç»™å®ƒï¼›ä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªæ•°ç»„ç»™å®ƒã€‚
  + å¥½å¤„ï¼šå¸¸å¸¸ç”¨æ¥çµæ´»çš„æ¥æ”¶æ•°æ®ã€‚
* å¯å˜å‚æ•°çš„æ³¨æ„äº‹é¡¹ï¼š
  + å¯å˜å‚æ•°åœ¨æ–¹æ³•å†…éƒ¨å°±æ˜¯ä¸€ä¸ªæ•°ç»„
  + ä¸€ä¸ªå½¢å‚åˆ—è¡¨ä¸­å¯å˜å‚æ•°åªèƒ½æœ‰ä¸€ä¸ª
  + å¯å˜å‚æ•°å¿…é¡»æ”¾åœ¨å½¢å‚åˆ—è¡¨çš„æœ€åé¢

### Collectionså·¥å…·ç±»

* Collections â€”â€”ä¸€ä¸ªç”¨æ¥æ“ä½œé›†åˆçš„å·¥å…·ç±»
* Collectionsæä¾›çš„å¸¸ç”¨é™æ€æ–¹æ³•

| æ–¹æ³•åç§° | è¯´æ˜ |
| --- | --- |
| public static boolean addAll(Collection<? super T> c, Tâ€¦ elements) | ç»™é›†åˆæ‰¹é‡æ·»åŠ å…ƒç´  |
| public static void shuffle(List<?> list) | æ‰“ä¹± List é›†åˆä¸­çš„å…ƒç´ é¡ºåº |
| public static void sort(List list) | å¯¹ List é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œå‡åºæ’åº |
| public static void sort(List list, Comparator<? super T> c) | å¯¹ List é›†åˆä¸­å…ƒç´ ï¼ŒæŒ‰ç…§æ¯”è¾ƒå™¨å¯¹è±¡æŒ‡å®šçš„è§„åˆ™è¿›è¡Œæ’åº |

### æ¡ˆä¾‹â€”â€”æ–—åœ°ä¸»æ¸¸æˆè®¾è®¡

* ä¸šåŠ¡éœ€æ±‚ï¼š
  + æ€»å…±æœ‰54å¼ ç‰Œ
  + ç‚¹æ•°ï¼šâ€œ3â€ â€œ4â€ â€œ5â€ â€œ6â€ â€œ7â€ â€œ8â€ â€œ9â€ â€œ10â€ â€œJâ€ â€œQâ€ â€œKâ€ â€œAâ€ â€œ2â€
  + èŠ±è‰²ï¼š4ç§èŠ±è‰²
  + å¤§å°ç‹
  + æ–—åœ°ä¸»ï¼šå‘å‡º51å¼ ç‰Œï¼Œå‰©ä¸‹3å¼ åšä¸ºåº•ç‰Œ
* åˆ†æå®ç°
* åœ¨å¯åŠ¨æ¸¸æˆæˆ¿é—´çš„æ—¶å€™ï¼Œåº”è¯¥æå‰å‡†å¤‡å¥½54å¼ ç‰Œæ¥ç€ï¼Œéœ€è¦å®Œæˆæ´—ç‰Œã€å‘ç‰Œã€å¯¹ç‰Œæ’åºã€çœ‹ç‰Œ

***ä»£ç å®ä¾‹***

**å¯åŠ¨æ¸¸æˆ**

```java
package com.itheima.stream;

public class Game {
    public static void main(String[] args) {
        // å¼€å‘æ–—åœ°ä¸»æ¸¸æˆ
        // æ¯å¼ ç‰Œéƒ½ä»¥ä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰Cardç±»
        // æ¯ä¸ªæ¸¸æˆæˆ¿é—´éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰ä¸€ä¸ªGameRoomç±»
        new GameRoom().start();

    }
}

```

**åˆ›å»ºä¸€ä¸ªCardç±»ï¼Œç”¨äºå°è£…Cardå¯¹è±¡çš„ç‰¹å¾**

```java
package com.itheima.stream;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor

public class Card {
    // å®šä¹‰ç‰Œçš„å·ç sizeå’Œç‰Œçš„èŠ±è‰²
    private String size;
    private String color;
    private int num;

    @Override
    public String toString() {
        return size + color;
    }
}


```

**åˆ›å»ºä¸€ä¸ªæ¸¸æˆRoom**

* å®Œæˆç‰Œçš„åˆå§‹åŒ–ï¼Œæ´—ç‰Œï¼Œå‘ç‰Œï¼Œç•™å‡ºåº•ç‰Œï¼Œçœ‹ç‰Œï¼Œç»™ä»»æ„ç©å®¶åº•ç‰Œï¼Œç»™ç‰Œæ’åºç­‰åŠŸèƒ½

```java
package com.itheima.stream;

import java.util.*;

public class GameRoom {
    // 1.å‡†å¤‡ç‰Œï¼Œå®šä¹‰ä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨54å¼ ç‰Œ
    private List<Card> allCards = new ArrayList<>();

    //2.åˆå§‹åŒ–54å¼ ç‰Œï¼Œç”¨å®ä¾‹ä»£ç å—ï¼ˆç¤ºä¾‹ä»£ç å—å’Œå¯¹è±¡ä¸€èµ·åˆå§‹åŒ–ï¼‰
    {
        String[] sizes = {"3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A", "2"};
        String[] colors = {"â™¥", "â™¦", "â™£", "â™ "};
        // ä¸¤ä¸ªå¾ªç¯è¿›è¡Œç‰Œçš„åŒ¹é…
        int num = 0;
        for (String size : sizes) {
            num++;
            for (String color : colors) {
                // åˆ›å»ºç‰Œå¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ°é›†åˆä¸­
                Card card = new Card(size, color, num);
                // æ·»åŠ åˆ°allCardsé›†åˆä¸­
                allCards.add(card);
            }
        }
        // åˆ›å»ºå¤§å°ç‹å¹¶æ·»åŠ åˆ°é›†åˆä¸­å»
        Collections.addAll(allCards, new Card("", "ğŸƒ", ++num), new Card("", "ğŸ‘²", ++num));
        // æŸ¥çœ‹æ–°ç‰Œ
        System.out.println("åŸå§‹ç‰Œï¼š" + allCards);
    }

    public void start() {
        // 3.æ´—ç‰Œï¼Œæ´—ç‰Œå°±æ˜¯æ‰“ä¹±é›†åˆä¸­çš„é¡ºåº
        Collections.shuffle(allCards);
        System.out.println("æ´—ç‰Œåï¼š" + allCards);

        // 4.å‘ç‰Œ,å®šä¹‰ä¸‰ä¸ªç©å®¶playerï¼šè€ç‹ã€è€æã€è€æœ±ï¼Œä¸‰ä¸ªç©å®¶å¯¹åº”ç€ä¸‰ä¸ªé›†åˆï¼Œå› æ­¤ä½¿ç”¨Mapé›†åˆï¼Œç©å®¶æ˜¯é”®ï¼Œç‰Œçš„é›†åˆæ˜¯å€¼
        Map<String, List<Card>> players = new HashMap<>();
        List<Card> lw = new ArrayList<>();
        players.put("è€ç‹", lw);
        List<Card> ll = new ArrayList<>();
        players.put("è€æ", ll);
        List<Card> lz = new ArrayList<>();
        players.put("è€æœ±", lz);

        for (int i = 0; i < allCards.size() - 3; i++) {
            if (i % 3 == 0) {
                lw.add(allCards.get(i));
            }else if(i % 3 == 1) {
                ll.add(allCards.get(i));
            }else {
                lz.add(allCards.get(i));
            }
        }

        // 5.çœ‹ç‰Œï¼Œéå†Mapé›†åˆ
        for (Map.Entry<String, List<Card>> entry : players.entrySet()){
            // è·å–ç©å®¶å§“å
            String key = entry.getKey();
            // è·å–ç‰Œçš„é›†åˆ
            List<Card> value = entry.getValue();
            System.out.println(key + "çš„ç‰Œä¸ºï¼š" + value);
        }
        // åº•ç‰Œ
        // subList(int fromIndex, int toIndex) æ˜¯ List æ¥å£æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæˆªå–åˆ—è¡¨ä¸­çš„ä¸€éƒ¨åˆ†å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å­åˆ—è¡¨
        List<Card> lastCard = allCards.subList(allCards.size() - 3, allCards.size());
        System.out.println("åº•ç‰Œï¼š" + lastCard);

        // 6.éšæœºé€‰ä¸€ä¸ªç©å®¶å°†åº•ç‰Œäº¤ç»™ç©å®¶
        String key = players.keySet().toArray()[new Random().nextInt(players.size())].toString();
        players.get(key).addAll(lastCard);

        // 7.ç»™ç‰Œæ’åº(å¢åŠ ä¸€ä¸ªæ’åºå±æ€§)
        sortCard(lw);
        System.out.println("è€ç‹çš„ç‰Œï¼š" + lw);
        sortCard(ll);
        System.out.println("è€æçš„ç‰Œï¼š" + ll);
        sortCard(lz);
        System.out.println("è€æœ±çš„ç‰Œï¼š" + lz);

    }

    private void sortCard(List<Card> cards) {
        // ç‰Œæ’åº
        Collections.sort(cards, new Comparator<Card>() {
            @Override
            public int compare(Card o1, Card o2) {
                // ç‰Œå¤§å°æ’åº
                return o2.getNum() - o1.getNum();
            }
        });
    }

}

```