---
layout: post
title: "Javaå¸¸è§é¢è¯•æŠ€æœ¯ç‚¹æ•´ç†è®²è§£åç«¯æ¡†æ¶æ•´ç†ä¸­,æœªå®Œæˆ"
date: 2025-03-10 09:55:49 +0800
description: "ä¸»è¦ç”¨äºè§„æ•´Javaåç«¯å„ç§æ¡†æ¶ï¼Œé¢è¯•ä½¿ç”¨åŠåŸç†ç›¸å…³é—®é¢˜ã€‚"
keywords: "Javaå¸¸è§é¢è¯•æŠ€æœ¯ç‚¹æ•´ç†è®²è§£â€”â€”åç«¯æ¡†æ¶ï¼ˆæ•´ç†ä¸­ï¼Œæœªå®Œæˆï¼‰"
categories: ['æŠ€æœ¯ç§¯ç´¯']
tags: ['é¢è¯•', 'Spring', 'Spring', 'Servlet', 'Sentinel', 'Java', 'Cloud', 'Boot']
artid: "146144846"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146144846
    alt: "Javaå¸¸è§é¢è¯•æŠ€æœ¯ç‚¹æ•´ç†è®²è§£åç«¯æ¡†æ¶æ•´ç†ä¸­,æœªå®Œæˆ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146144846
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146144846
cover: https://bing.ee123.net/img/rand?artid=146144846
image: https://bing.ee123.net/img/rand?artid=146144846
img: https://bing.ee123.net/img/rand?artid=146144846
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Javaå¸¸è§é¢è¯•æŠ€æœ¯ç‚¹æ•´ç†è®²è§£â€”â€”åç«¯æ¡†æ¶ï¼ˆæ•´ç†ä¸­ï¼Œæœªå®Œæˆï¼‰
    </h1>
   </div>
  </div>
 </div>
 <a data-report-click='{"spm":"1001.2101.3001.8632"}' data-report-query="spm=1001.2101.3001.8632" data-report-view='{"spm":"1001.2101.3001.8632"}' href="https://activity.csdn.net/writing?id=10820" id="creatActivityHref" style="display:block;margin-top:16px;font-size:16px;color:#5094d5;font-weight:500" target="_blank">
  #â€œå­¦C++ï¼Œèµ¢å¥½ç¤¼â€â€”â€”ä¾¯æ·C++ç³»åˆ—ç²¾å“è¯¾å­¦ä¹ ç¬”è®°å¾æ–‡æ´»åŠ¨#
 </a>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p name="%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6">
     å‰è¨€ï¼š
    </p>
    <p>
     å¯¹äºåç«¯å¸¸ç”¨æ¡†æ¶çš„æŠ€æœ¯æ•´ç†ï¼Œå…¶å®æ¡†æ¶åœ¨å¹³æ—¶å°±æ˜¯ä¼šç”¨å°±è¡Œï¼Œä½†é¢è¯•æ—¶å¤šåŠéœ€è¦æè¿°å®ç°åŸç†ï¼Œè¿™ä¸ªè¦é è‡ªå·±ç†è§£ï¼Œä¸æ¨èæ­»è®°ç¡¬èƒŒã€‚
    </p>
    <p>
     è¿™ç¯‡å’Œå¦å¤–å‡ ç¯‡æ–‡ç« åŒºåˆ†å¼€ï¼Œä¸»è¦ç”¨äºè§„æ•´Javaåç«¯å„ç§æ¡†æ¶ï¼Œé¢è¯•ä½¿ç”¨åŠåŸç†ç›¸å…³é—®é¢˜ã€‚
    </p>
    <h2 id="%E4%B8%80%EF%BC%9ASpring" name="%E4%B8%80%EF%BC%9ASpring">
     ä¸€ï¼šSpring
    </h2>
    <p>
     Springæ˜¯ä¸€ä¸ªè½»é‡çº§å¼€æºçš„åç«¯æ¡†æ¶ï¼Œæ˜¯ä¸ºJavaåº”ç”¨ç¨‹åºæä¾›åŸºç¡€æ€§æœåŠ¡çš„ä¸€å¥—æ¡†æ¶ã€‚æ ¸å¿ƒåŠŸèƒ½ä¸ºIOCå®¹å™¨ç®¡ç†å’ŒAOPé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚
    </p>
    <h3 id="1%EF%BC%9ASpring%20IOC%E7%9A%84%E7%90%86%E8%A7%A3" name="1%EF%BC%9ASpring%20IOC%E7%9A%84%E7%90%86%E8%A7%A3">
     1ï¼šSpring IOCçš„ç†è§£
    </h3>
    <blockquote>
     <p>
      æ€»ï¼šæ§åˆ¶åè½¬ï¼Œå³åŸæ¥çš„å¯¹è±¡æ˜¯ç”±ä½¿ç”¨è€…æ§åˆ¶(æ‰‹åŠ¨newåˆ›å»º)ï¼Œæœ‰äº†Springä¹‹åï¼Œå¯ä»¥æŠŠæ•´ä¸ªå¯¹è±¡äº¤ç»™Springæ¥å¸®æˆ‘ä»¬ç®¡ç†ã€‚é™ä½ä»£ç è€¦åˆæ€§ã€‚
     </p>
     <p>
      å®¹å™¨ï¼šå­˜å‚¨Beanå¯¹è±¡ï¼Œåº•å±‚ä½¿ç”¨mapç»“æ„æ¥å­˜å‚¨ã€‚singletonObjectså­˜æ”¾å®Œæ•´çš„Beanå¯¹è±¡ã€‚
     </p>
     <p>
      ï¼ˆå¯å¼•å‡ºBeançš„ç”Ÿå‘½å‘¨æœŸï¼Œä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹éƒ½æ˜¯å®¹å™¨ç®¡ç†ã€‚ç”Ÿå‘½å‘¨æœŸå¯å¼•å‡ºå¾ªç¯ä¾èµ–é—®é¢˜ï¼Œè¿›è€Œå¯å¼•å‡ºä¸‰çº§ç¼“å­˜å¤„ç†åŠåŸç†ã€‚ï¼‰
     </p>
    </blockquote>
    <p>
     BeanFactoryï¼šåŸºç¡€å®¹å™¨ï¼Œæä¾›åŸºç¡€DIåŠŸèƒ½ï¼Œå»¶è¿ŸåŠ è½½ï¼ˆä½¿ç”¨æ—¶æ‰å®ä¾‹åŒ–Beanï¼‰
    </p>
    <p>
     ApplicationContextï¼ˆæ›´å¸¸ç”¨ï¼‰ï¼šæ‰©å±•è‡ªBeanFactoryï¼Œæ”¯æŒæ›´å¤šä¼ä¸šçº§åŠŸèƒ½ï¼ˆAOPã€äº‹ä»¶ã€å›½é™…åŒ–ç­‰ï¼‰é¢„åŠ è½½å•ä¾‹Beanï¼ˆå®¹å™¨å¯åŠ¨æ—¶å®ä¾‹åŒ–æ‰€æœ‰éæ‡’åŠ è½½çš„Beanï¼‰ã€‚é€šå¸¸è¯´çš„å®¹å™¨å°±æŒ‡è¿™ä¸ªã€‚
    </p>
    <p>
     å¦‚æœç›´æ¥ä½¿ç”¨BeanFactoryåˆ›å»ºBeanï¼Œéœ€æ‰‹åŠ¨æä¾›IOCåŠ è½½è¿‡ç¨‹çš„æ‰€éœ€èµ„æºï¼Œå¦‚BeanDifinitionã€‚
    </p>
    <p>
     è€ŒApplicationContextåˆ™å°è£…äº†æ•´ä¸ªIOCçš„åŠ è½½è¿‡ç¨‹ï¼Œæ›´åŠ è‡ªåŠ¨ã€‚
    </p>
    <p>
     1ï¼šå®ä¾‹åŒ–å®¹å™¨å¯¹è±¡
    </p>
    <ul>
     <li>
      ClassPathXmlApplicationContextï¼šåŸºäº XML é…ç½®çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡å®ç°ã€‚å®ƒä»ç±»è·¯å¾„ä¸­åŠ è½½ XML é…ç½®æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶åŒ…å«äº† Spring Bean çš„å®šä¹‰å’Œé…ç½®ä¿¡æ¯ã€‚å¼€å‘äººå‘˜éœ€è¦åœ¨ XML æ–‡ä»¶ä¸­ä½¿ç”¨ç‰¹å®šçš„æ ‡ç­¾ï¼ˆå¦‚ &lt;bean&gt;ï¼‰æ¥å®šä¹‰å’Œé…ç½® Spring Beanã€‚
     </li>
     <li>
      AnnotationConfigApplicationContextï¼šåŸºäºæ³¨è§£é…ç½®çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡å®ç°ã€‚å®ƒä¸éœ€è¦ XML é…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨é…ç½®ç±»ï¼ˆä¾‹å¦‚é€šè¿‡ @Configuration æ³¨è§£æ ‡è®°çš„ç±»ï¼‰æ¥å®šä¹‰å’Œé…ç½® Spring Beanã€‚è¿™ç§æ–¹å¼å°†é…ç½®ä¿¡æ¯ç›´æ¥åµŒå…¥åˆ° Java ä»£ç ä¸­ã€‚
     </li>
    </ul>
    <p>
     é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–å®¹å™¨ï¼Œè§¦å‘æ ¸å¿ƒæ–¹æ³•Â refresh()Â åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ã€‚
    </p>
    <pre><code class="language-java">//Springå®¹å™¨åˆ›å»ºæµç¨‹
//1: ä½¿ç”¨AnnotationConfigApplicationContextï¼ˆç±».classï¼‰  ClassPathXmlApplicationContextï¼ˆç®¡ç†Beançš„XMLæ–‡ä»¶ï¼‰ åˆ›å»º
AnnotationConfigApplicationContext annotationContext = new AnnotationConfigApplicationContext(Empvo.class);
ClassPathXmlApplicationContext classPathContext = new ClassPathXmlApplicationContext("XXX.xml");</code></pre>
    <p>
     äºŒè€…éƒ½ä¼šè°ƒç”¨æ ¸å¿ƒæ–¹æ³•refreshï¼ŒåŒºåˆ«äºé…ç½®æ–¹å¼ä¸åŒ(xmlï¼Œæ³¨è§£)ï¼Œå‰ç½®å‡†å¤‡æœ‰æ‰€ä¸åŒï¼Œä½†éƒ½æ˜¯
    </p>
    <p>
     è¯»å–å’Œæ‰«ææ–‡ä»¶æˆ–é…ç½®ç±»ï¼Œå¤„ç†ä¸€äº›åˆå§‹åŒ–å’Œç¯å¢ƒçš„è®¾ç½®ã€‚ä¹‹åSpringä¼šç»Ÿä¸€è¿›è¡Œå¤„ç†ã€‚
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/9ef85634a53242b28c6fc5d7fca7ee94.png"/>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/b680c88118324aec888675edb4c7583a.png"/>
    </p>
    <p>
     2ï¼šåŠ è½½é…ç½®ä¸æ³¨å†ŒBeanå®šä¹‰
    </p>
    <p>
     ä¸è®ºé€šè¿‡ä½•ç§æ–¹å¼ï¼ˆè§£æXMLã€Java Configã€æ³¨è§£å¦‚@ComponentScanç­‰ï¼‰ï¼Œè§£æè·å–çš„Beanå¯¹è±¡ï¼ŒSpringä¼šæŠŠbeançš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚BeanCLassã€scopeç­‰ï¼‰ç»Ÿä¸€å­˜å‚¨åœ¨ï¼š
    </p>
    <p>
     BeanDefinitionå¯¹è±¡ä¸­ï¼Œéœ€æ³¨æ„è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå°è£…äº†æ‰€æœ‰Beançš„å®šä¹‰ä¿¡æ¯ï¼Œåç»­åˆ›å»ºBeanå°±éœ€è¦æ ¹æ®è¿™äº›å®šä¹‰ä¿¡æ¯æ¥åˆ›å»ºï¼Œå³æƒ³è¦åˆ›å»ºBeanï¼Œå…ˆè¦æ³¨å†ŒBeanDefinitionã€‚
    </p>
    <p>
     AbstractBeanDefinitionæ˜¯BeanDefinitionæ¥å£çš„ä¸€ä¸ªæŠ½è±¡å®ç°ç±»ï¼Œè¯¥æŠ½è±¡ç±»åŠå…¶å­ç±»ç”¨äºåœ¨Springå®¹å™¨å†…éƒ¨ç®¡ç†å’Œæ“ä½œBeançš„å…ƒæ•°æ®ï¼Œå¦‚Beançš„å®ä¾‹åŒ–ã€å±æ€§æ³¨å…¥å’Œåˆå§‹åŒ–ç­‰ã€‚
    </p>
    <p>
     æ‰€ä»¥ï¼Œä¸€ä¸ªBeanä¼šå¯¹åº”ä¸€ä¸ªBeanDefinitionï¼Œä¹‹åæ‰€æœ‰çš„BeanDefinitionä¼šå­˜å‚¨åˆ°BeanFactoryçš„beanDefinitionMapä¸­ï¼Œä½¿ç”¨ConcurrentHashMapè¿›è¡Œå­˜å‚¨ï¼Œç”¨beançš„åç§°ä½œä¸ºé”®ï¼Œå¯¹è±¡ä½œä¸ºå€¼ã€‚
    </p>
    <p>
     3ï¼šåˆ›å»ºBean
    </p>
    <p>
     åœ¨å¾ªç¯BeanDefinitionåˆ›å»ºBeanä¹‹å‰ï¼ŒSpringå®¹å™¨ä¼šåˆ¤æ–­è¿™ä¸ªBeanï¼š
    </p>
    <p>
     æ˜¯å¦æ‡’åŠ è½½ï¼ˆxmlè®¾ç½®ï¼šlazy-init="true"ï¼Œæ³¨è§£è®¾ç½®ï¼š@Lazyï¼Œå¯åŠ åœ¨é…ç½®ç±»æˆ–@Beanæ–¹æ³•ä¸Šï¼‰ã€‚
    </p>
    <p>
     æ˜¯å¦å¤šä¾‹ï¼ˆxmlè®¾ç½®ï¼šscope="prototype"ï¼Œæ³¨è§£è®¾ç½®ï¼š@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)å³å¯ï¼‰ã€‚
    </p>
    <p>
     ä¸”åˆ¤æ–­ä¸ä¸ºæŠ½è±¡ç±»ã€‚
    </p>
    <p>
     æ‡’åŠ è½½è¡¨ç¤ºåªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰åˆ›å»ºã€‚
    </p>
    <p>
     Springå®¹å™¨Beané»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œå¦‚æœè®¾ç½®å¤šä¾‹ï¼Œåˆ™åªåœ¨ä½¿ç”¨æ—¶åˆ›å»ºï¼Œä¸”æ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºå®ä¾‹ã€‚
    </p>
    <hr/>
    <p>
     åˆ›å»ºBeanï¼š
    </p>
    <p>
     åˆ›å»ºBeanå®ä¾‹çš„è¿‡ç¨‹åŒ…æ‹¬å®ä¾‹åŒ–Beanå¯¹è±¡ã€æ³¨å…¥ä¾èµ–ã€è°ƒç”¨ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ç­‰ã€‚
    </p>
    <p>
     é¦–å…ˆå¾ªç¯beanDefinitionMapï¼Œæ ¹æ®åç§°è°ƒç”¨getBean(beanName) ï¼ŒdoGetBean(beanName)
    </p>
    <p>
     ä¹‹åä¼šè°ƒç”¨ getSingleton(beanName)Â åˆ¤æ–­å•ä¾‹æ± æ˜¯å¦å®ä¾‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºBeanå®ä¾‹ã€‚
    </p>
    <blockquote>
     <p>
      1ï¼šå®ä¾‹åŒ–Bean
     </p>
     <p>
      åˆ›å»ºBeançš„å…³é”®æ–¹æ³•ï¼ŒcreateBean(beanName,mbd,args)ï¼ŒdoCreateBean()å®ä¾‹åŒ–ã€‚
     </p>
     <p>
      é€šè¿‡createBeanInstance()åˆ›å»ºBeanå®ä¾‹ï¼Œå®ä¾‹åŒ–æ—¶ä½¿ç”¨æ„é€ æ–¹æ³•æˆ–è€…å·¥å‚æ–¹æ³•ï¼Œåº•å±‚æ˜¯é€šè¿‡åå°„è·å–å¯¹è±¡ã€‚
     </p>
     <p>
      å…ˆæ ¹æ®BeanNameè·å–åˆ°BeanDefinitionå®ä¾‹ï¼Œç„¶åé€šè¿‡ getBeanClass() è·å–åˆ°Class&lt;&gt;å®ä¾‹ï¼Œéšåä½¿ç”¨Classå®ä¾‹çš„æ— å‚æ„é€ åˆ›å»ºBeanå¯¹è±¡å®ä¾‹ï¼šgetConstractor().newInstance()ï¼›
     </p>
     <p>
      æ­¤æ—¶åˆ›å»ºçš„Beanç§°ä¸ºçº¯å‡€Beanï¼ˆæœªå®Œæˆï¼‰ã€‚
     </p>
     <p>
      2ï¼šå±æ€§æ³¨å…¥
     </p>
     <p>
      åˆ›å»ºBeanå®ä¾‹åï¼ŒSpringå®¹å™¨ä¼šæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯æ¥é…ç½®Beanï¼Œä¾‹å¦‚è®¾ç½®å±æ€§å€¼ã€æ³¨å…¥ä¾èµ–ç­‰ã€‚å°¤å…¶æ˜¯å¤„ç†@Autowiredï¼Œæ­¤æ—¶ä¼šå†èµ°åˆ° getBean æ–¹æ³•å¤„ï¼Œå°è¯•ä»å•ä¾‹æ± è·å–ï¼Œè·å–ä¸åˆ°å°±åˆ›å»ºã€‚å› ä¸ºä¹‹å‰åˆ›å»ºçš„çº¯å‡€Beanä¾èµ–è¿™ä¸ªå®ä¾‹ã€‚ï¼ˆå¼•å‡ºå¾ªç¯ä¾èµ–é—®é¢˜ï¼‰ã€‚
     </p>
     <p>
      3ï¼šåˆå§‹åŒ–Bean
     </p>
     <p>
      éšåï¼ŒSpringå®¹å™¨ä¼šè°ƒç”¨Beançš„åˆå§‹åŒ–æ–¹æ³•æ¥å®ŒæˆBeançš„åˆå§‹åŒ–ã€‚å…±æœ‰ä¸‰ç§ä¸åŒçš„æ–¹å¼ã€‚
     </p>
     <p>
      æ³¨æ„å¦‚æœåŒæ—¶é…ç½®ï¼Œæ‰§è¡Œæœ‰å…ˆåé¡ºåºï¼ˆé”€æ¯æ—¶é¡ºåºç›¸åï¼‰ï¼š
     </p>
     <p>
      â€”â€”ã€‹åœ¨æŒ‡å®šæ–¹æ³•ä¸Šä½¿ç”¨æ³¨è§£ï¼š@PostConstruct
     </p>
     <p>
      â€”â€”ã€‹å®ç° InitializingBean æ¥å£çš„ï¼šafterPropertiesSet ()Â æ–¹æ³•
     </p>
     <p>
      â€”â€”ã€‹xmlæ–¹å¼åœ¨Beanæ ‡ç­¾å¤„æ·»åŠ ï¼šinit-methodæŒ‡å®šçš„æ–¹æ³• æˆ– @Bean()æ·»åŠ init-methodå±æ€§
     </p>
     <p>
      4ï¼šæœ€åï¼Œä¼šå°†Beanæ”¾åœ¨å•ä¾‹æ±  singletonObjects ä¸‹ã€‚
     </p>
    </blockquote>
    <p>
     ä»¥ä¸‹æ˜¯ä½¿ç”¨ApplicationContext.getBean()ï¼Œä½“ç°åˆ›å»ºBeançš„è¿‡ç¨‹ã€‚
    </p>
    <pre><code class="language-java">public Object getBean(String name) throws BeansException {
      this.assertBeanFactoryActive();
      //åº•å±‚ä¹Ÿæ˜¯è°ƒç”¨BeanFactoryçš„æ–¹æ³•
      //è¿™é‡Œä½¿ç”¨çš„æ˜¯ç®€å•å·¥å‚æ¨¡å¼ï¼Œæ ¹æ®æ ‡è¯†è¿”å›ä¸åŒçš„å¯¹è±¡ã€‚æœ€åä½¿ç”¨å¤šæ€æ¥æ”¶ã€‚
      return this.getBeanFactory().getBean(name);
}</code></pre>
    <hr/>
    <p>
     åˆ›å»ºåçš„Beanä¼šæ”¾åœ¨å•ä¾‹æ± ä¸­ï¼šDefaultSingletonBeanRegistryç±»ä¸‹çš„Â singletonObjectsÂ é›†åˆã€‚
    </p>
    <p>
     å­˜å‚¨ç»“æ„ä¸ºConcurrentHashMap&lt;beanName, Object&gt;ï¼Œå…¶ä¸­é”®æ˜¯Beançš„åç§°ï¼ˆIDï¼‰ï¼Œå€¼æ˜¯å¯¹åº”çš„Beanå®ä¾‹å¯¹è±¡ã€‚
    </p>
    <p>
     Springå®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šåˆ›å»ºå¥½æ‰€æœ‰å•ä¾‹Beançš„å®ä¾‹ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å•ä¾‹æ± ä¸­ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚è·å–å•ä¾‹Beanæ—¶ï¼ŒSpringå®¹å™¨ä¼šç›´æ¥ä»å•ä¾‹æ± ä¸­è·å–å·²ç»åˆ›å»ºå¥½çš„Beanå®ä¾‹ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºã€‚
    </p>
    <h3 id="2%EF%BC%9ADI%20%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%C2%A0" name="2%EF%BC%9ADI%20%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%C2%A0">
     2ï¼šDI ä¾èµ–æ³¨å…¥
    </h3>
    <p>
     åœ¨éœ€è¦ä½¿ç”¨Springå®¹å™¨å¯¹è±¡æ—¶ï¼Œå¯å°†å¯¹åº”çš„å±æ€§å€¼æ³¨å…¥åˆ°å…·ä½“çš„å¯¹è±¡ä¸­ï¼Œä¾èµ–æ³¨å…¥æœ‰ä¸‰ç§æ–¹å¼ï¼š
    </p>
    <hr/>
    <p>
     æ„é€ å™¨æ³¨å…¥ï¼šé€šè¿‡ç±»çš„æ„é€ æ–¹æ³•ä¼ é€’ä¾èµ–å¯¹è±¡
    </p>
    <p>
     å°†ä¸€ä¸ªé…ç½®ç±»çš„æ–¹æ³•æ·»åŠ @Beanæ³¨è§£ï¼Œåœ¨è¿”å›çš„å¯¹è±¡ä¸­è®¾ç½®ä¸€ä¸ªfinalå¯¹è±¡ï¼Œé€šè¿‡æ„é€ å™¨èµ‹å€¼ã€‚
    </p>
    <p>
     å®˜æ–¹æ¨èä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼Œå› ä¸ºå®ƒå¼ºåˆ¶ä¾èµ–ä¸å¯å˜ï¼Œå¹¶ä¸”ä¿è¯å®Œå…¨åˆå§‹åŒ–çš„å¯¹è±¡ã€‚ç¬¦åˆä¸å¯å˜å¯¹è±¡è®¾è®¡åŸåˆ™ã€‚å¥½å¤„æ˜¯æœ‰åŠ©äºä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯æµ‹è¯•æ€§ã€‚ç¼ºç‚¹æ˜¯ä¸å¤Ÿçµæ´»ï¼Œä¸å¤Ÿç®€æ´ã€‚
    </p>
    <hr/>
    <p>
     Setteræ³¨å…¥ï¼šé€šè¿‡ç±»çš„ Setter æ–¹æ³•è®¾ç½®ä¾èµ–å¯¹è±¡
    </p>
    <p>
     åœ¨XMLä¸­é…ç½®éœ€æ³¨å…¥çš„å±æ€§ä½ç½®åŠä¿¡æ¯ï¼Œåœ¨æŒ‡å®šç±»ä¸‹åˆ›å»ºsetæ–¹æ³•ï¼Œå¹¶æ·»åŠ  @Autowired æ³¨è§£ã€‚
    </p>
    <p>
     Setteræ³¨å…¥æ–¹å¼ï¼Œç›¸æ¯”æ„é€ å™¨æ›´åŠ çµæ´»ï¼Œä¾èµ–å¯¹è±¡å¯ä»¥åœ¨å¯¹è±¡åˆ›å»ºååŠ¨æ€è®¾ç½®ã€‚ä½†éœ€è°¨æ…ä½¿ç”¨ï¼Œä»…åœ¨ä¾èµ–å¯èƒ½å˜åŒ–çš„åœºæ™¯ä½¿ç”¨ã€‚å¯¹è±¡å¯èƒ½åœ¨æœªå®Œå…¨åˆå§‹åŒ–æ—¶è¢«ä½¿ç”¨ï¼ˆéœ€æ³¨æ„ç©ºæŒ‡é’ˆé—®é¢˜ï¼‰ã€‚
    </p>
    <hr/>
    <p>
     å­—æ®µæ³¨å…¥ï¼šä½¿ç”¨æ³¨è§£ï¼Œç›´æ¥é€šè¿‡å­—æ®µæˆ–æˆå‘˜å˜é‡æ³¨å…¥ä¾èµ–ï¼Œæ— éœ€æ„é€ æ–¹æ³•æˆ– Setterã€‚
    </p>
    <p>
     ä½¿ç”¨@Autowiredï¼ˆSpringæ³¨è§£ï¼‰Â æˆ– @Resourseï¼ˆJSR-250è§„èŒƒï¼ŒJava EEæ³¨è§£ï¼‰ï¼Œæ³¨å…¥å¯¹è±¡ã€‚
    </p>
    <p>
     ç›®å‰ä½¿ç”¨è¾ƒå¤šçš„ä¸€ç§æ–¹å¼ï¼Œä»£ç ç®€ä»‹ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘ã€‚é€šè¿‡åå°„è¿›è¡Œæ³¨å…¥ï¼Œæœ‰ä¸¤ç§æ³¨å…¥æ–¹å¼ï¼š
    </p>
    <p>
     @Autowired é»˜è®¤æŒ‰ç±»å‹æ³¨å…¥ï¼Œå¯é…åˆ @Qualifier æŒ‰åç§°æ³¨å…¥ã€‚
    </p>
    <p>
     @Resource é»˜è®¤æŒ‰åç§°æ³¨å…¥ï¼Œæ‰¾ä¸åˆ°åç§°æ—¶æŒ‰ç±»å‹æ³¨å…¥ã€‚
    </p>
    <p>
     è¯¥æ–¹å¼ç¼ºç‚¹æ˜¯ä¾èµ–å…³ç³»ä¸æ˜ç¡®ï¼Œéœ€é¿å…é‡å¤ä¾èµ–ã€‚å•å…ƒæµ‹è¯•ä¸æ–¹ä¾¿ã€‚
    </p>
    <h3 id="3%EF%BC%9ABean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" name="3%EF%BC%9ABean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">
     3ï¼šBeançš„ç”Ÿå‘½å‘¨æœŸ
    </h3>
    <p>
     æ€»ï¼šæ€»ä½“åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªç¯èŠ‚ï¼Œå…¶ä¸­å¯ä»¥é€šè¿‡ BeanPostProcessor æ’å…¥æ‰©å±•é€»è¾‘ï¼ˆè´¯ç©¿å…¨æµç¨‹ï¼‰
    </p>
    <blockquote>
     <p>
      å®ä¾‹åŒ– â†’ å±æ€§æ³¨å…¥ â†’ Aware â†’ å‰ç½®å¤„ç† â†’ åˆå§‹åŒ– â†’ åç½®å¤„ç† â†’ ä½¿ç”¨Â â†’ é”€æ¯
     </p>
    </blockquote>
    <p>
     ä¸‹é¢æ˜¯å„ä¸ªç¯èŠ‚è¯¦ç»†æè¿°ï¼š
    </p>
    <h4 id="1%EF%BC%9ABean%E5%8A%A0%E8%BD%BD%E5%AE%9A%E4%B9%89" name="1%EF%BC%9ABean%E5%8A%A0%E8%BD%BD%E5%AE%9A%E4%B9%89">
     1ï¼šBeanåŠ è½½å®šä¹‰
    </h4>
    <p>
     å®¹å™¨è§£æã€è¯»å–ã€æ‰«æé…ç½®ï¼Œç”ŸæˆBeanDifinitionå®ä¾‹å¹¶æ³¨å†Œåˆ°BeanFactoryçš„mapä¸­ã€‚
    </p>
    <h4 id="2%EF%BC%9ABeanFactoryPostProcessor%E5%A4%84%E7%90%86" name="2%EF%BC%9ABeanFactoryPostProcessor%E5%A4%84%E7%90%86">
     2ï¼šBeanFactoryPostProcessorå¤„ç†
    </h4>
    <p>
     è¯¥å¯¹è±¡æ˜¯Springå®¹å™¨çš„ä¸€ä¸ªæ‰©å±•ç‚¹ï¼Œå…è®¸åœ¨Beanå®ä¾‹åŒ–ä¹‹å‰ä¿®æ”¹Beançš„å®šä¹‰ï¼ˆBeanDefinitionï¼‰ï¼Œ
    </p>
    <p>
     é€šå¸¸ç”¨äºåœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡åŠ è½½æ—¶è°ƒæ•´é…ç½®ï¼Œæ¯”å¦‚ä¿®æ”¹å±æ€§å€¼ã€æ·»åŠ å±æ€§ç­‰ã€‚
    </p>
    <p>
     å¸¸è§åœºæ™¯æœ‰ï¼š
    </p>
    <p>
     <strong>
      1ï¼šè§£æé…ç½®æ–‡ä»¶å ä½ç¬¦
     </strong>
    </p>
    <p>
     è§£æé…ç½®æ–‡ä»¶ï¼ˆå¦‚ application.propertiesï¼‰ä¸­çš„ ${...} å ä½ç¬¦
    </p>
    <pre><code class="language-XML">&lt;bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer"&gt;
    &lt;property name="location" value="classpath:config.properties"/&gt;
&lt;/bean&gt;
</code></pre>
    <p>
     <strong>
      â€Œ2ï¼šåŠ¨æ€è¦†ç›– Bean å®šä¹‰
     </strong>
    </p>
    <p>
     æ ¹æ®ç¯å¢ƒå˜é‡æˆ–æ¡ä»¶ä¿®æ”¹ Bean çš„å…ƒæ•°æ®ï¼ˆå¦‚ç±»åã€ä½œç”¨åŸŸã€å±æ€§å€¼ï¼‰ã€‚
    </p>
    <pre><code class="language-java">public class DynamicBeanProcessor implements BeanFactoryPostProcessor {
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        BeanDefinition beanDef = beanFactory.getBeanDefinition("dataSource");
        beanDef.getPropertyValues().add("url", "jdbc:new-url");
    }
}
</code></pre>
    <p>
     <strong>
      3ï¼šæ ¹æ®æ¡ä»¶æ³¨å†Œæˆ–ç§»é™¤Bean
     </strong>
    </p>
    <p>
     æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶ï¼ˆå¦‚ç³»ç»Ÿå‚æ•°ï¼‰åŠ¨æ€æ³¨å†Œæˆ–ç§»é™¤ Beanã€‚
    </p>
    <pre><code class="language-java">public class ConditionalBeanProcessor implements BeanFactoryPostProcessor {
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        if (!System.getProperty("env").equals("prod")) {
            ((BeanDefinitionRegistry) beanFactory).removeBeanDefinition("prodOnlyBean");
        }
    }
}
</code></pre>
    <p>
     å…¶ä»–è¿˜æœ‰ï¼šProfile æ¿€æ´»æ‰©å±•ã€é…ç½®ç±»å¢å¼ºã€è‡ªå®šä¹‰æ³¨è§£è§£æç­‰åœºæ™¯ã€‚
    </p>
    <h4 id="3%EF%BC%9ABean%E5%AE%9E%E4%BE%8B%E5%8C%96" name="3%EF%BC%9ABean%E5%AE%9E%E4%BE%8B%E5%8C%96">
     3ï¼šBeanå®ä¾‹åŒ–
    </h4>
    <p>
     é€šè¿‡åå°„åŸç†ï¼Œä»æ„é€ æ–¹æ³•æˆ–å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Beanï¼Œä¼˜å…ˆå°è¯•ä»å•ä¾‹æ± è·å–Beanå®ä¾‹ï¼Œè·å–ä¸åˆ°åˆ™è¿›è¡Œåˆ›å»ºã€‚
    </p>
    <h4 id="4%EF%BC%9A%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5" name="4%EF%BC%9A%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5">
     4ï¼šå±æ€§æ³¨å…¥
    </h4>
    <p>
     é€šè¿‡populateBean() æ–¹æ³•ï¼Œæ³¨å…¥Beançš„å±æ€§å’Œä¾èµ–ï¼š
    </p>
    <p>
     è°ƒç”¨Â postProcessProperties() æ–¹æ³•æ³¨å…¥ä¾èµ–ï¼Œä¾‹å¦‚@Autowiredï¼›
    </p>
    <p>
     è°ƒç”¨Â applyPropertyValues() æ–¹æ³•è®¾ç½®å±æ€§å€¼ï¼Œä¾‹å¦‚@Value;
    </p>
    <p>
     è¿™ä¸ªèŠ‚ç‚¹å¯ä»¥å¼•å‡ºå¾ªç¯ä¾èµ–é—®é¢˜ï¼Œè¿›è€Œå¯ä»¥å¼•å‡ºä¸‰çº§ç¼“å­˜å¤„ç†ã€‚
    </p>
    <pre><code class="language-java">// ç®€åŒ–ç‰ˆæºç é€»è¾‘
protected void populateBean(String beanName, RootBeanDefinition mbd, BeanWrapper bw) {
    // 1. å¤„ç† @Autowired/@Value æ³¨è§£
    if (hasInstAwareBpps) {
        for (BeanPostProcessor bp : getBeanPostProcessors()) {
            if (bp instanceof InstantiationAwareBeanPostProcessor) {
                // è§¦å‘æ³¨è§£æ³¨å…¥
                ((InstantiationAwareBeanPostProcessor) bp).postProcessProperties(pvs, bw.getWrappedInstance(), beanName);
            }
        }
    }

    // 2. å¤„ç† XML/Java Config æ˜¾å¼å±æ€§å®šä¹‰
    applyPropertyValues(beanName, mbd, bw, pvs);
}
</code></pre>
    <h4 id="5%EF%BC%9AAware%E6%8E%A5%E5%8F%A3%E5%9B%9E%E8%B0%83" name="5%EF%BC%9AAware%E6%8E%A5%E5%8F%A3%E5%9B%9E%E8%B0%83">
     5ï¼šAwareæ¥å£å›è°ƒ
    </h4>
    <p>
     å±æ€§æ³¨å…¥å®Œæˆåï¼Œè°ƒç”¨invokeAwareMethod()æ–¹æ³•ï¼Œå®ç°æ¥å£å¯è®¾ç½®Beançš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå®Œæˆå¯¹è±¡çš„å±æ€§è®¾ç½®ã€‚å¸¸è§çš„ä¾‹å¦‚æœ‰ï¼š
    </p>
    <p>
     BeanNameAwareÂ  =&gt;Â  setBeanName()
    </p>
    <p>
     BeanClassLoaderAwareÂ  =&gt;Â  setBeanClassLoader()
    </p>
    <p>
     BeanFactoryAwareÂ  =&gt;Â  setBeanFactory()
    </p>
    <p>
     ApplicationContextAwareÂ  =&gt;Â  setApplicationContextAware()Â  Â  éœ€æ³¨æ„æ­¤æ—¶å®¹å™¨æœªåˆå§‹åŒ–ã€‚
    </p>
    <h4 id="6%EF%BC%9ABeanPostProcessor%E5%89%8D%E7%BD%AE%E5%A4%84%E7%90%86" name="6%EF%BC%9ABeanPostProcessor%E5%89%8D%E7%BD%AE%E5%A4%84%E7%90%86">
     6ï¼šBeanPostProcessorå‰ç½®å¤„ç†
    </h4>
    <p>
     æ‰§è¡Œæ‰€æœ‰ï¼Œå®ç°äº†BeanPostProcessorä¸‹çš„ postProcessBeforeInitialization() æ–¹æ³•ã€‚
    </p>
    <pre><code class="language-java">@Component
public class LoggingBeanPostProcessor implements BeanPostProcessor {
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) {
        System.out.println("ğŸŸ¡ å‰ç½®å¤„ç† Bean: " + beanName + " | ç±»å‹: " + bean.getClass());
        // å¯åœ¨æ­¤ä¿®æ”¹ Bean å±æ€§æˆ–è¿”å›ä»£ç†å¯¹è±¡
        return bean;
    }
}
</code></pre>
    <p>
     åœºæ™¯è¿ç”¨åœºæ™¯ï¼Œæ—¥å¿—ç›‘æ§ï¼ˆè€—æ—¶ï¼‰ï¼Œå±æ€§æ ¡éªŒï¼ˆæ˜¯å¦éç©ºï¼‰ç­‰ã€‚
    </p>
    <p>
     ä»¥åŠåšå…¶ä»–ä¸ªæ€§åŒ–æ“ä½œï¼Œä½†æ˜¯è¦æ³¨æ„ï¼Œé¿å…åœ¨å…¶ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå½±å“å¯åŠ¨é€Ÿåº¦ï¼‰ã€‚
    </p>
    <h4 id="7%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95" name="7%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95">
     7ï¼šåˆå§‹åŒ–æ–¹æ³•
    </h4>
    <p>
     å‰ç½®å¤„ç†å®Œæˆåï¼Œè°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦å®ç°äº†InitializingBeanï¼Œå¦‚æœæœ‰åˆ™è°ƒç”¨afterPropertiesSet() æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸è°ƒç”¨ã€‚
    </p>
    <pre><code class="language-java">AbstractAutowireCapableBeanFactory#initializeBean() {
    // 1ï¸âƒ£ BeanPostProcessor å‰ç½®å¤„ç†
    applyBeanPostProcessorsBeforeInitialization();

    // 2ï¸âƒ£ æ‰§è¡Œ InitializingBean é€»è¾‘ï¼ˆæ ¸å¿ƒé˜¶æ®µï¼‰
    invokeInitMethods() {
        if (bean instanceof InitializingBean) {
            ((InitializingBean) bean).afterPropertiesSet();
        }
        // 3ï¸âƒ£ æ‰§è¡Œè‡ªå®šä¹‰ init-methodï¼ˆXML/Java Config å®šä¹‰ï¼‰
        invokeCustomInitMethod();
    }

    // 4ï¸âƒ£ BeanPostProcessor åç½®å¤„ç†
    applyBeanPostProcessorsAfterInitialization();
}
</code></pre>
    <p>
     è°ƒç”¨åˆå§‹åŒ–æœ‰ä¸‰ç§æ–¹å¼ï¼Œä¸”æœ‰å…ˆåé¡ºåºï¼Œæ¨èä½¿ç”¨Â @PostConstruct æ³¨è§£æ–¹å¼
    </p>
    <pre><code class="language-java">@Service
public class PaymentService implements InitializingBean {
    // ç»„åˆä½¿ç”¨ä¸‰ç§åˆå§‹åŒ–æ–¹å¼
    @PostConstruct
    public void validateConfig() {
        System.out.println("ğŸŸ¢ @PostConstruct ä¼˜å…ˆæ‰§è¡Œ");
    }

    @Override
    public void afterPropertiesSet() {
        System.out.println("ğŸŸ  InitializingBean æ¬¡ä¹‹æ‰§è¡Œ");
    }

    @Bean(initMethod = "initMethod")
    public void initMethod() {
        System.out.println("ğŸ”µ init-method æœ€åæ‰§è¡Œ");
    }
}
</code></pre>
    <p>
     é¿å…åœ¨ afterPropertiesSet() æ‰§è¡Œæ•°æ®åº“è¿æ¥ç­‰é˜»å¡æ“ä½œï¼Œå¯ç»“åˆ @Lazy æ³¨è§£ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ã€‚
    </p>
    <h4 id="8%EF%BC%9ABeanPostProcessor%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86" name="8%EF%BC%9ABeanPostProcessor%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86">
     8ï¼šBeanPostProcessoråç½®å¤„ç†
    </h4>
    <p>
     æ‰§è¡Œæ‰€æœ‰ï¼Œå®ç°äº†BeanPostProcessorä¸‹çš„ postProcessAfterInitialization() æ–¹æ³•ã€‚
    </p>
    <p>
     Springçš„AOPåŠ¨æ€ä»£ç†ï¼Œå°±æ˜¯åœ¨æ­¤å¤„å®ç°çš„ã€‚
    </p>
    <pre><code class="language-java">@Component
public class LoggingBeanPostProcessor implements BeanPostProcessor {
    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) {
        System.out.println("ğŸŸ¡ åç½®å¤„ç† Bean: " + beanName + " | ç±»å‹: " + bean.getClass());
        // å¯åœ¨æ­¤ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¾‹å¦‚AOPåŠ¨æ€ä»£ç†
        return bean;
    }
}
</code></pre>
    <h4 id="9%EF%BC%9ABean%E5%B0%B1%E7%BB%AA" name="9%EF%BC%9ABean%E5%B0%B1%E7%BB%AA">
     9ï¼šBeanå°±ç»ª
    </h4>
    <p>
     å®Œæˆçš„Beanå¯¹è±¡ï¼Œè¢«æ”¾å…¥å®¹å™¨ä¸­ï¼Œå¯é€šè¿‡ä¾èµ–æ³¨å…¥ï¼Œæˆ–ç›´æ¥ getBean() çš„æ–¹å¼æ¥è¿›è¡Œå¯¹è±¡çš„è·å–åŠä½¿ç”¨ã€‚
    </p>
    <h4 id="10%EF%BC%9A%E9%94%80%E6%AF%81%E9%98%B6%E6%AE%B5" name="10%EF%BC%9A%E9%94%80%E6%AF%81%E9%98%B6%E6%AE%B5">
     10ï¼šé”€æ¯é˜¶æ®µ
    </h4>
    <p>
     å®¹å™¨å…³é—­æˆ–æ‰‹åŠ¨è°ƒç”¨closeæ–¹æ³•æ—¶ï¼Œæ‰§è¡Œé”€æ¯æµç¨‹ã€‚å¦‚æœæä¾›äº†å¤šä¸ªé”€æ¯æ–¹æ³•ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œã€‚
    </p>
    <p>
     æ³¨æ„åœ¨æ‰§è¡Œé”€æ¯æ–¹æ³•å‰ï¼Œä¼šä¼˜å…ˆæ‰§è¡Œï¼š
    </p>
    <p>
     DestructionAwareBeanPostProcessorï¼ˆæ¥å£ï¼‰ä¸‹çš„ postProcessBeforeDestruction æ–¹æ³•ã€‚
    </p>
    <pre><code class="language-java">@Component
public class DemoApplicationTests implements DestructionAwareBeanPostProcessor {
    @Override
    public void postProcessBeforeDestruction(Object o, String s) throws BeansException {
        //é”€æ¯å‰ç½®å¤„ç†ï¼Œä¼˜å…ˆæ‰§è¡Œ
    }
}</code></pre>
    <p>
     ä¹‹åï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œæä¾›çš„é”€æ¯æ–¹æ³•ã€‚ä¸‰ç§æ–¹å¼åˆ†åˆ«ä¸ºï¼š
    </p>
    <p>
     @PreDestroy æ³¨è§£æ–¹æ³•ï¼Œä¼˜å…ˆæ‰§è¡Œ
    </p>
    <p>
     å®ç°DisposableBeanæ¥å£ï¼Œé‡å†™æ–¹æ³•destroy()ï¼Œæ¬¡ä¹‹æ‰§è¡Œ
    </p>
    <p>
     è‡ªå®šä¹‰é”€æ¯æ–¹æ³•ï¼Œå¦‚XMLï¼šdestroy-method="customDestroy"ï¼Œæˆ–@Bean(destroyMethod = "customDestroy")ï¼Œæœ€åæ‰§è¡Œã€‚
    </p>
    <pre><code class="language-java">// å®ç°é”€æ¯é€»è¾‘çš„ä¸‰ç§æ–¹å¼
public class DemoBean implements DisposableBean {
    @PreDestroy
    public void preDestroy() {
        System.out.println("1æ³¨è§£æ–¹å¼ä¼˜å…ˆæ‰§è¡Œï¼Œ@PreDestroy æ–¹æ³•");
    }

    @Override
    public void destroy() {
        System.out.println("2æ¥å£å®ç°æ¬¡ä¹‹æ‰§è¡Œï¼ŒDisposableBean#destroy()");
    }

    //æ³¨è§£æˆ–XMLé…ç½®çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œæœ€åæ‰§è¡Œ
    public void xmlDestroy() {
        System.out.println("XML é…ç½®çš„ destroy-method");
    }
    
    @Bean(destroyMethod = "customDestroy")
    public ExampleBean exampleBean() { 
        return new ExampleBean(); 
    }

}

// æµ‹è¯•é”€æ¯æµç¨‹
public class App {
    public static void main(String[] args) {
        ConfigurableApplicationContext ctx = SpringApplication.run(App.class);
        ctx.close(); // è§¦å‘é”€æ¯
    }
}
</code></pre>
    <p>
     Spring ä¸è§¦å‘Prototypeä½œç”¨åŸŸï¼ˆå¤šä¾‹ï¼‰çš„Â Beanï¼Œéœ€æ‰‹åŠ¨è§¦å‘å¤šä¾‹Beançš„é”€æ¯ã€‚
    </p>
    <p>
     ä¾‹å¦‚ï¼šBeanFactory.destroyBean(beanInstance) ã€‚
    </p>
    <p>
     è‹¥æŸä¸ªé”€æ¯æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼ŒSpring ä¼šè®°å½•é”™è¯¯ï¼ˆWARN çº§åˆ«ï¼‰ä½†â€Œç»§ç»­æ‰§è¡Œåç»­é”€æ¯é€»è¾‘â€Œã€‚
    </p>
    <p>
     è‹¥æœªæ˜¾å¼æŒ‡å®š destroyMethodï¼ŒSpring ä¼šè‡ªåŠ¨æ£€æµ‹ close() æˆ– shutdown() æ–¹æ³•ï¼ˆå¯é€šè¿‡ @Bean(destroyMethod = "") ç¦ç”¨ï¼‰ã€‚
    </p>
    <h3 id="4%EF%BC%9A%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E5%8F%8A%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98" name="4%EF%BC%9A%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E5%8F%8A%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98">
     4ï¼šå¾ªç¯ä¾èµ–åŠä¸‰çº§ç¼“å­˜
    </h3>
    <blockquote>
     <p>
      å‰æ–‡æè¿‡ï¼Œåœ¨Beanå®ä¾‹åŒ–ä¹‹åï¼Œå±æ€§æ³¨å…¥é˜¶æ®µï¼Œå¯èƒ½å‘ç”Ÿå¾ªç¯ä¾èµ–é—®é¢˜ã€‚
     </p>
     <p>
      æ€»ï¼šå¾ªç¯ä¾èµ–é—®é¢˜æ˜¯ï¼šAå¼•ç”¨Bï¼ŒBå¼•ç”¨Aï¼Œé€ æˆä¸€ç›´å®ä¾‹åŒ–å¹¶æ³¨å…¥ä¾èµ–çš„è¿‡ç¨‹ã€‚
     </p>
     <p>
      å¤„ç†æ–¹å¼ï¼šä¸‰çº§ç¼“å­˜ï¼Œæå‰æš´éœ²å¯¹è±¡ï¼ŒAOP
     </p>
    </blockquote>
    <p>
     ä¸‰çº§ç¼“å­˜å…¶å®å°±æ˜¯ä¸åŒçš„ä¸‰ä¸ªMapé›†åˆï¼Œç”¨äºå­˜æ”¾ä¸åŒBeançš„ç›¸å…³å¯¹è±¡ã€‚
    </p>
    <table align="center" border="1">
     <thead>
      <tr>
       <th>
        â€Œç¼“å­˜çº§åˆ«
       </th>
       <th>
        å­˜å‚¨å†…å®¹
       </th>
       <th>
        ä½œç”¨
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        ä¸€çº§ç¼“å­˜â€Œï¼ˆsingletonObjectsï¼‰
       </td>
       <td>
        å®Œæ•´çš„å•ä¾‹Bean
       </td>
       <td>
        å¯¹å¤–æä¾›å¯ç”¨çš„Bean
       </td>
      </tr>
      <tr>
       <td>
        äºŒçº§ç¼“å­˜â€Œï¼ˆearlySingletonObjectsï¼‰
       </td>
       <td>
        æå‰æš´éœ²çš„æœªåˆå§‹åŒ–Beanï¼ˆåŠæˆå“ï¼‰
       </td>
       <td>
        ä¸´æ—¶å­˜å‚¨ï¼Œè§£å†³å¾ªç¯ä¾èµ–çš„æ ¸å¿ƒ
       </td>
      </tr>
      <tr>
       <td>
        â€Œä¸‰çº§ç¼“å­˜â€Œï¼ˆsingletonFactoriesï¼‰
       </td>
       <td>
        Beanå·¥å‚ï¼ˆObjectFactoryï¼‰
       </td>
       <td>
        æ—©æœŸå¼•ç”¨ï¼Œå¤„ç†åŠ¨æ€ä»£ç†é€»è¾‘
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     ä¸‰çº§ç¼“å­˜ï¼šMap&lt;BeanName, () -&gt; getEarlyBeanReference()&gt;
    </p>
    <p>
     äºŒçº§ç¼“å­˜ï¼šMap&lt;BeanName, åŸå§‹å¯¹è±¡/ä»£ç†å¯¹è±¡&gt;
    </p>
    <p>
     ä¸€çº§ç¼“å­˜ï¼šMap&lt;BeanName, å®Œå…¨ä½“Bean&gt;
    </p>
    <p>
     è§£å†³æ€è·¯ï¼šåœ¨Bå¼•ç”¨Aæ—¶å€™ï¼Œæ­¤æ—¶å…¶å®Aå·²ç»å®ä¾‹åŒ–äº†ï¼Œä½†æœªåˆå§‹åŒ–ï¼Œæ‰€ä»¥å¯ä»¥è®¾æ³•å…ˆæ‹¿åˆ°Açš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œå°†Båˆå§‹åŒ–å®Œæˆä¹‹åï¼Œå†å°†Açš„å±æ€§è¡¥å…¨ã€‚
    </p>
    <p>
     æ‰€ä»¥ï¼Œå¾ªç¯ä¾èµ–çš„æ ¸å¿ƒå¤„ç†é€»è¾‘å°±æ˜¯ï¼šå°†Beançš„â€Œå®ä¾‹åŒ–â€Œä¸â€Œåˆå§‹åŒ–â€Œåˆ†ç¦»ï¼Œä¸‰çº§ç¼“å­˜ä½œä¸ºä¸­é—´æ€è§£å†³ä¾èµ–æ³¨å…¥æ—¶åºé—®é¢˜ã€‚
    </p>
    <p>
     ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼šä¸‰çº§ç¼“å­˜çš„è®¾è®¡æ˜¯ä¸ºäº†æ•ˆç‡å’Œæ­£ç¡®æ€§ï¼Œé¿å…é‡å¤åˆ›å»ºå’Œä¿è¯å•ä¾‹ã€‚ä¸‰çº§ç¼“å­˜å‚¬åœ¨çš„æ„ä¹‰æ˜¯ä¿è¯åœ¨æ•´ä¸ªå®¹å™¨çš„è¿è¡Œè¿‡ç¨‹ä¸­åŒåçš„Beanå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªã€‚
    </p>
    <p>
     è‹¥Beanéœ€è¦AOPä»£ç†ï¼Œä¸‰çº§ç¼“å­˜çš„ObjectFactoryä¼šâ€Œæå‰ç”Ÿæˆä»£ç†å¯¹è±¡â€Œï¼Œç¡®ä¿ä¾èµ–æ³¨å…¥çš„æ­£ç¡®æ€§ã€‚
    </p>
    <p>
     Spring ä¹‹æ‰€ä»¥éœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ç®€å•çš„äºŒçº§ç¼“å­˜ï¼Œä¸»è¦åŸå› åœ¨äºAOPä»£ç†å’ŒBeançš„æ—©æœŸå¼•ç”¨é—®é¢˜ã€‚äºŒçº§ç¼“å­˜è™½ç„¶å¯ä»¥è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œä½†åœ¨æ¶‰åŠåˆ°åŠ¨æ€ä»£ç†ï¼ˆAOP)æ—¶ï¼Œç›´æ¥ä½¿ç”¨äºŒçº§ç¼“å­˜ä¸åšä»»ä½•å¤„ç†ä¼šå¯¼è‡´æˆ‘ä»¬æ‹¿åˆ°çš„Beanæ˜¯æœªä»£ç†çš„åŸå§‹å¯¹è±¡ã€‚å¦‚æœäºŒçº§ç¼“å­˜å†…å­˜æ”¾çš„éƒ½æ˜¯ä»£ç†å¯¹è±¡ï¼Œåˆ™è¿åäº†Beançš„ç”Ÿå‘½å‘¨æœŸã€‚ï¼ˆæ­£å¸¸ä»£ç†å¯¹è±¡çš„ç”Ÿæˆæ˜¯åœ¨åç½®å¤„ç†å™¨ï¼‰
    </p>
    <hr/>
    <p>
     æ‰€ä»¥ï¼Œé’ˆå¯¹å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œæ‰€æœ‰åˆ›å»ºçš„Beanéƒ½è¦ä¼˜å…ˆæ”¾åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œåç»­å‘ä¸€äºŒçº§ç¼“å­˜æå‡ã€‚
    </p>
    <p>
     é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œè°ƒæ•´åçš„å®ä¾‹åŒ–å’Œå±æ€§æ³¨å…¥æµç¨‹ä¸ºï¼š
    </p>
    <h4 id="1%EF%BC%9A%E5%AE%9E%E4%BE%8B%E5%8C%96A" name="1%EF%BC%9A%E5%AE%9E%E4%BE%8B%E5%8C%96A">
     1ï¼šå®ä¾‹åŒ–A
    </h4>
    <p>
     Aå®ä¾‹åŒ–å®Œæ¯•åï¼Œä½†æœªè¿›è¡Œå±æ€§æ³¨å…¥æ—¶ï¼Œå°†åˆ›å»ºAçš„ObjectFactoryå¹¶å­˜å…¥ä¸‰çº§ç¼“å­˜ã€‚
    </p>
    <pre><code class="language-java">// æºç ä½ç½®ï¼šAbstractAutowireCapableBeanFactory
addSingletonFactory(beanName, () -&gt; getEarlyBeanReference(beanName, bean, beanDefinition));</code></pre>
    <p>
     Lambdaè¡¨è¾¾å¼å³ä¸ºObjectFactoryï¼Œè¯¥å¯¹è±¡åªè´Ÿè´£ç”ŸæˆBeançš„æ—©æœŸå¼•ç”¨ï¼ˆéBeanFactoryï¼‰ã€‚
    </p>
    <p>
     æ³¨æ„éœ€ä¼˜å…ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦éœ€è¦è¢«ä»£ç†ï¼Œå¦‚æœæ˜¯ä»£ç†å¯¹è±¡ï¼Œåˆ™è¦†ç›–åŸæ¥å¯¹è±¡ï¼Œé‡æ–°åˆ›å»ºã€‚
    </p>
    <pre><code class="language-java">// ä¼ªä»£ç ï¼šAbstractAutoProxyCreator
protected Object getEarlyBeanReference(String beanName, Object bean) {
    //...
    return wrapIfNecessary(bean, beanName);
}</code></pre>
    <p>
     éšåè¿›è¡Œä¸‰çº§ç¼“å­˜çš„æ“ä½œï¼Œæ³¨æ„æœ‰å…¶ä»–çš„åç»­æ“ä½œã€‚
    </p>
    <pre><code class="language-java">// DefaultSingletonBeanRegistry
protected void addSingletonFactory(String beanName, ObjectFactory&lt;?&gt; singletonFactory) {
    synchronized (this.singletonObjects) {    //åŠ é”ï¼Œç¡®ä¿ä¸‰çº§ç¼“å­˜-äºŒçº§ç¼“å­˜çš„åŸå­æ€§
        if (!this.singletonObjects.containsKey(beanName)) {
            this.singletonFactories.put(beanName, singletonFactory); // å­˜å…¥ä¸‰çº§ç¼“å­˜
            this.earlySingletonObjects.remove(beanName);   //æ¸…é™¤äºŒçº§ç¼“å­˜
            this.registeredSingletons.add(beanName);  //è®°å½•æ‰€æœ‰å•ä¾‹Beançš„æ³¨å†ŒçŠ¶æ€
        }
    }
}
</code></pre>
    <p>
     ä¸Šè¿°æ¶‰åŠåˆ°å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š
    </p>
    <p>
     1ï¼šåŠ é”ï¼Œä¸ºäº†ä¿è¯ä¸‰çº§ç¼“å­˜åˆ°äºŒçº§ç¼“å­˜çš„å”¯ä¸€æ€§ï¼Œé¿å…å¹¶å‘é—®é¢˜ã€‚
    </p>
    <p>
     2ï¼šearlySingletonObjects.remove(beanName)ï¼Œæ¸…é™¤äºŒçº§ç¼“å­˜ã€‚æ˜¯ä¸ºäº†ä¿è¯è·å–çš„æ˜¯æœ€æ–°çš„æ—©æœŸå¯¹è±¡ã€‚æ¯”å¦‚AOPä»£ç†å¯¹è±¡çš„å”¯ä¸€æ€§ã€å¤šä¸ªçº¿ç¨‹çš„å¹¶å‘å®‰å…¨ã€‚
    </p>
    <p>
     3ï¼šregisteredSingletons.add(beanName)ï¼Œå°†å½“å‰æ­£åœ¨åˆ›å»ºçš„ Bean åç§°ï¼ˆ
     <code>
      beanName
     </code>
     ï¼‰æ·»åŠ åˆ°ä¸€ä¸ªâ€Œæœ‰åºé›†åˆâ€Œä¸­ï¼Œè®°å½•æ‰€æœ‰å·²æ³¨å†Œçš„å•ä¾‹ Beanã€‚ä½¿ç”¨LinkedHashSetæœ‰åºå­˜å‚¨ï¼Œä¸ºäº†ä¿è¯é”€æ¯æ—¶é€†åºæ‰§è¡Œã€‚
    </p>
    <pre><code class="language-java">// æºç å‚è€ƒï¼šDefaultSingletonBeanRegistry
public void destroySingletons() {
    String[] singletonNames = this.registeredSingletons.toArray(new String);
    for (int i = singletonNames.length - 1; i &gt;= 0; i--) {
        destroySingleton(singletonNames[i]); // é€†åºé”€æ¯
    }
}</code></pre>
    <h4 id="2%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96B" name="2%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96B">
     2ï¼šåˆå§‹åŒ–B
    </h4>
    <p>
     Aä¾èµ–äºBï¼Œæ­¤æ—¶æŒ‰ç…§é¡ºåºä»1ã€2ã€3çº§ç¼“å­˜æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›å…¥Bçš„åˆ›å»ºæµç¨‹ï¼ˆå®ä¾‹åŒ–å¹¶æ”¾å…¥ä¸‰çº§ç¼“å­˜ä¸­ï¼‰
    </p>
    <p>
     ä¹‹åè¿›è¡Œå±æ€§æ³¨å…¥ï¼Œå‘ç°ä¾èµ–äºAï¼Œæ­¤æ—¶ä»1ã€2ã€3çº§ç¼“å­˜æŸ¥æ‰¾Aï¼Œå‘ç°æ­¤æ—¶Aåœ¨ä¸‰çº§ç¼“å­˜ã€‚
    </p>
    <p>
     ä»ä¸‰çº§ç¼“å­˜ä¸­è·å–Açš„æ—©æœŸå¯¹è±¡ï¼ŒgetSingleton("a")ã€‚
    </p>
    <pre><code class="language-java">// æºç ä½ç½®ï¼šDefaultSingletonBeanRegistry#getSingleton()
public Object getSingleton(String beanName, boolean allowEarlyReference) {
    Object singletonObject = this.singletonObjects.get(beanName);  // â‘  æŸ¥ä¸€çº§ç¼“å­˜
    if (singletonObject == null &amp;&amp; isSingletonCurrentlyInCreation(beanName)) {
        synchronized (this.singletonObjects) {
            singletonObject = this.earlySingletonObjects.get(beanName);  // â‘¡ æŸ¥äºŒçº§ç¼“å­˜
            if (singletonObject == null &amp;&amp; allowEarlyReference) {
                ObjectFactory&lt;?&gt; singletonFactory = this.singletonFactories.get(beanName);  // â‘¢ æŸ¥ä¸‰çº§ç¼“å­˜
                if (singletonFactory != null) {
                    // å‘½ä¸­ä¸‰çº§ç¼“å­˜ï¼Œè§¦å‘åç»­æ“ä½œ...
                }
            }
        }
    }
    return singletonObject;
}</code></pre>
    <p>
     æ³¨æ„åœ¨è¿™ä¹‹åï¼Œè¿˜ä¼šè°ƒç”¨Â getEarlyBeanReference() åˆ¤æ–­æ˜¯å¦ä»£ç†ï¼Œç¡®ä¿ä»£ç†å¯¹è±¡çš„ä¸€è‡´æ€§ã€‚
    </p>
    <p>
     éšåï¼Œå°† A çš„æ—©æœŸå¼•ç”¨å­˜å…¥äºŒçº§ç¼“å­˜ï¼Œæ¸…ç©ºä¸‰çº§ç¼“å­˜ã€‚åç»­éƒ½ä»äºŒçº§ç¼“å­˜è·å–Açš„å¼•ç”¨ã€‚
    </p>
    <pre><code class="language-java">// æºç ä½ç½®ï¼šDefaultSingletonBeanRegistry#getSingleton()
if (singletonFactory != null) {
    singletonObject = singletonFactory.getObject();  // ç”Ÿæˆæ—©æœŸå¼•ç”¨
    this.earlySingletonObjects.put(beanName, singletonObject);  // â‘¤ å­˜å…¥äºŒçº§ç¼“å­˜
    this.singletonFactories.remove(beanName);         // â‘¥ æ¸…ç©ºä¸‰çº§ç¼“å­˜
}</code></pre>
    <p>
     æœ€åï¼ŒB å®Œæˆå±æ€§æ³¨å…¥å’Œåˆå§‹åŒ–ï¼Œå¹¶å­˜å…¥ä¸€çº§ç¼“å­˜ã€‚æ·»åŠ é”ï¼Œé¿å…å‡ºç°åç»­Aè·å–ä¸åˆ°Bçš„æƒ…å†µã€‚
    </p>
    <pre><code class="language-java">// æºç ä½ç½®ï¼šDefaultSingletonBeanRegistry#addSingleton()
protected void addSingleton(String beanName, Object singletonObject) {
    synchronized (this.singletonObjects) {
        this.singletonObjects.put(beanName, singletonObject);  // â‘¦ å†™å…¥ä¸€çº§ç¼“å­˜
        this.singletonFactories.remove(beanName);  //æ¸…é™¤è¯¥Beanä¸‰çº§ç¼“å­˜
        this.earlySingletonObjects.remove(beanName);  //æ¸…é™¤è¯¥BeanäºŒçº§ç¼“å­˜
        this.registeredSingletons.add(beanName);  //å®ä¾‹åŒ–Beanè®°å½•
    }
}</code></pre>
    <h4 id="3%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96A" name="3%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96A">
     3ï¼šåˆå§‹åŒ–A
    </h4>
    <p>
     å½“ B é€šè¿‡ addSingleton å®Œæˆåˆå§‹åŒ–åï¼Œè¿”å›åˆ° A çš„ populateBean æ–¹æ³•ç»§ç»­æ‰§è¡Œã€‚
    </p>
    <p>
     Bå·²åˆå§‹åŒ–æˆåŠŸå¹¶å­˜å…¥ä¸€çº§ç¼“å­˜ï¼Œè¿˜éœ€è¡¥å……Açš„å±æ€§æ³¨å…¥åŠåˆå§‹åŒ–ã€‚ï¼ˆæ³¨æ„æ­¤æ—¶Açš„å¼•ç”¨åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼Œåœ¨ä¸Šè¿°Bçš„å±æ€§æ³¨å…¥è¿‡ç¨‹ä¸­ï¼Œä»ä¸‰çº§ç¼“å­˜æå‡ï¼‰
    </p>
    <p>
     ä¹‹åï¼ŒAæ³¨å…¥Bï¼Œå®Œæˆè‡ªèº«åˆå§‹åŒ–ã€‚å¹¶å­˜å…¥ä¸€çº§ç¼“å­˜ï¼Œæ¸…ç©ºäºŒä¸‰çº§ç¼“å­˜ã€‚æ·»åŠ é”ã€‚
    </p>
    <pre><code class="language-java">// DefaultSingletonBeanRegistry#getSingleton
public Object getSingleton(String beanName, ObjectFactory&lt;?&gt; singletonFactory) {
    synchronized (this.singletonObjects) {
        Object singletonObject = this.singletonObjects.get(beanName);
        if (singletonObject == null) {
            // æ ‡è®°Beanæ­£åœ¨åˆ›å»ºï¼ˆé˜²æ­¢é‡å¤è¿›å…¥ï¼‰
            beforeSingletonCreation(beanName);
            try {
                // å…³é”®æ¢å¤ç‚¹ï¼šBå®Œæˆåˆå§‹åŒ–åè¿”å›æ­¤å¤„
                singletonObject = singletonFactory.getObject();
            }
            finally {
                afterSingletonCreation(beanName);
            }
            // å­˜å…¥ä¸€çº§ç¼“å­˜
            addSingleton(beanName, singletonObject);
        }
        return singletonObject;
    }
}</code></pre>
    <p>
     è‡³æ­¤ï¼ŒAå’ŒBéƒ½å®Œæˆäº†åˆå§‹åŒ–ï¼Œä¸”éƒ½å­˜å…¥ä¸€çº§ç¼“å­˜ä¸­ã€‚åç»­å…¶ä»–Beanæ³¨å…¥ABä¹Ÿä¼šç›´æ¥æŸ¥è¯¢è·å–ã€‚
    </p>
    <p>
     è¡¥å……ï¼šæ„é€ å™¨æ³¨å…¥â€Œæ— æ³•è§£å†³å¾ªç¯ä¾èµ–ï¼ˆéœ€ä½¿ç”¨Setter/å­—æ®µæ³¨å…¥ï¼‰ï¼Œæˆ–æ·»åŠ @Lazyæ³¨è§£å»¶è¿ŸåŠ è½½ã€‚
    </p>
    <p>
     éå•ä¾‹Beanï¼ˆå¦‚prototypeï¼‰æ— æ³•è§£å†³å¾ªç¯ä¾èµ–ã€‚
    </p>
    <p>
     æ³¨æ„æ¸…ç©ºäºŒçº§ã€ä¸‰çº§ç¼“å­˜ï¼Œéƒ½æŒ‡çš„æ˜¯æ¸…ç©ºå½“å‰Beançš„å®ä¾‹ï¼Œå¹¶éæ•´ä¸ªç¼“å­˜æ•°æ®ã€‚
    </p>
    <p>
     ç¼“å­˜æ“ä½œçš„ä»£ç ï¼Œè·å–å®ä¾‹ï¼Œæˆ–ç¼“å­˜åˆ›å»ºåˆ é™¤ï¼Œå…¨éƒ¨éƒ½ä¼šåŠ åŒæ­¥é”ï¼Œé¿å…ä¸ä¸€è‡´æƒ…å†µã€‚
    </p>
    <p>
    </p>
    <h2 id="%E4%BA%8C%EF%BC%9ASpring%20MVC" name="%E4%BA%8C%EF%BC%9ASpring%20MVC">
     äºŒï¼šSpring MVC
    </h2>
    <p>
    </p>
    <h2 id="%E4%B8%89%EF%BC%9AMyBatis" name="%E4%B8%89%EF%BC%9AMyBatis">
     ä¸‰ï¼šMyBatis
    </h2>
    <p>
     MyBatisæ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŠè‡ªåŠ¨çš„ORMæŒä¹…å±‚æ¡†æ¶ï¼Œä¸»è¦ç”¨äºç®€åŒ–æ•°æ®åº“æ“ä½œï¼Œå°† Java å¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¸­çš„è®°å½•è¿›è¡Œæ˜ å°„ã€‚æ”¯æŒæ™®é€šsqlï¼Œå…³è”æŸ¥è¯¢ï¼ŒåµŒå¥—æŸ¥è¯¢ç­‰ã€‚
    </p>
    <p>
     å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯è®©å¼€å‘è€…é€šè¿‡æ›´ç®€å•çš„æ–¹å¼æ“ä½œæ•°æ®åº“ï¼ŒåŒæ—¶ä¿ç•™å¯¹ SQL è¯­å¥çš„å®Œå…¨æ§åˆ¶æƒï¼Œé¿å…äº†ä¼ ç»Ÿ JDBC ä»£ç çš„å¤æ‚æ€§ã€‚
    </p>
    <h3 id="1%EF%BC%9A%23%E5%92%8C%24%E7%AC%A6%E7%9A%84%E5%8C%BA%E5%88%AB" name="1%EF%BC%9A%23%E5%92%8C%24%E7%AC%A6%E7%9A%84%E5%8C%BA%E5%88%AB">
     1ï¼š#å’Œ$ç¬¦çš„åŒºåˆ«
    </h3>
    <blockquote>
     <p>
      æ€»ï¼šä¸¤è€…å‡ä¸ºMybatisæ¡†æ¶çš„ï¼Œç”¨äºåŠ¨æ€ SQL å‚æ•°æ›¿æ¢çš„å®ç°ã€‚
     </p>
     <p>
      è®¾è®¡åˆè¡·ï¼š
     </p>
     <p>
      #{} ç”¨äºå¤„ç†â€Œæ•°æ®å€¼â€Œï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ï¼‰
     </p>
     <p>
      ${} ç”¨äºå¤„ç†â€ŒSQL ç»“æ„â€Œï¼ˆå¦‚åŠ¨æ€è¡¨åã€åˆ—åã€æ’åºå­—æ®µï¼‰
     </p>
    </blockquote>
    <p>
     #ç¬¦æ˜¯é¢„ç¼–è¯‘å ä½ç¬¦ï¼Œåœ¨æ‰§è¡Œæ—¶ï¼Œä¼šå°†sqlä¸­çš„#{}æ›¿æ¢ä¸º ? å·ï¼Œä¹‹åè°ƒç”¨ PreparedStatement çš„setæ–¹æ³•è¿›è¡Œèµ‹å€¼ã€‚å¯ä»¥æœ‰æ•ˆé˜²æ­¢sqlæ³¨å…¥ã€‚æ“ä½œæ•°æ®ä¼˜å…ˆä½¿ç”¨è¯¥æ–¹å¼ã€‚
    </p>
    <p>
     #æ˜¯å‚æ•°å ä½ç¬¦ï¼Œä¼šæ›¿æ¢ä¸ºï¼Ÿå·ï¼Œå¹¶åŠ åŒå¼•å·ã€‚
    </p>
    <p>
     å®ƒæ˜¯åœ¨ç¼–è¯‘æœŸæ›¿æ¢ä¸ºï¼Ÿå·ï¼Œå˜é‡çš„æ›¿æ¢æ˜¯åœ¨DBMSæ•°æ®åº“ä¸­ã€‚
    </p>
    <p>
     é€‚ç”¨åœºæ™¯ï¼šæ™®é€šå‚æ•°æ“ä½œï¼Œå¦‚where id = #{id}
    </p>
    <hr/>
    <p>
     $ç¬¦æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ï¼Œåœ¨å¤„ç†æ—¶ï¼Œå°±åªæ˜¯æŠŠ $() æ›¿æ¢ä¸ºå˜é‡çš„å€¼ï¼Œä¸é˜²sqlæ³¨å…¥ï¼Œè¯­å¥ä¸åŠ åŒå¼•å·ã€‚
    </p>
    <p>
     sqlè¯­å¥å˜é‡çš„æ›¿æ¢æ˜¯åœ¨åŠ¨æ€sqlè§£æé˜¶æ®µã€‚
    </p>
    <p>
     å­˜åœ¨sqlæ³¨å…¥é—®é¢˜ï¼Œåœ¨é¢„ç¼–è¯‘ä¹‹å‰å˜é‡å¯è¢«æ›¿æ¢ã€‚
    </p>
    <p>
     é€‚ç”¨åœºæ™¯ï¼šåŠ¨æ€è¡¨åã€åˆ—åã€æ’åºå­—æ®µï¼ˆå¦‚ ORDER BY ${sortField}ï¼‰
    </p>
    <pre><code class="language-java">&lt;!-- é«˜å±æ“ä½œï¼šç”¨æˆ·è¾“å…¥ç›´æ¥æ‹¼æ¥ --&gt;
&lt;select id="login" resultType="User"&gt;
    SELECT * FROM user 
    WHERE username = '${username}' AND password = '${password}'
&lt;/select&gt;
&lt;!-- è‹¥ username = "admin' --"ï¼Œä¼šç»•è¿‡å¯†ç éªŒè¯ï¼ --&gt;
</code></pre>
    <p>
    </p>
    <h2 id="%E5%9B%9B%EF%BC%9ASpringBoot" name="%E5%9B%9B%EF%BC%9ASpringBoot">
     å››ï¼šSpringBoot
    </h2>
    <p>
     SpringBootçš„åŸåˆ™æ˜¯ï¼šçº¦å®šå¤§äºé…ç½®
    </p>
    <p>
     Springæ¡†æ¶éœ€è¦å¤§é‡çš„é…ç½®ï¼Œè€ŒSpringBootå¼•å…¥è‡ªåŠ¨é…ç½®çš„æ¦‚å¿µï¼Œä½¿é¡¹ç›®æ­å»ºè¿è¡Œæ›´å®¹æ˜“å¿«æ·ã€‚SpringBootæœ¬èº«å¹¶ä¸æä¾›Springæ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§åŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿï¼Œæ•æ·çš„å¼€å‘æ–°ä¸€ä»£åŸºäºSpringæ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚
    </p>
    <p>
     å¯¹ä½¿ç”¨è€…æ¥è¯´ï¼Œé¡¹ç›®åˆå§‹åŒ–æ–¹å¼å˜äº†ï¼Œé…ç½®æ–‡ä»¶å˜äº†ï¼Œä»¥åŠä¸éœ€è¦å•ç‹¬å®‰è£…tomcatè¿™ç±»æœåŠ¡å™¨äº†ï¼Œä½¿ç”¨mavenæˆ–gradleé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œæ‰“å‡ºjaråŒ…å³å¯å¿«é€Ÿè¿è¡Œã€‚ä½†æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘å’Œä¸šåŠ¡æµç¨‹å®ç°æ²¡æœ‰å˜åŒ–ã€‚
    </p>
    <p>
    </p>
    <p>
     æŒç»­æ•´ç†ä¸­
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f6e5f416c6f6e65542f:61727469636c652f64657461696c732f313436313434383436" class_="artid" style="display:none">
 </p>
</div>


