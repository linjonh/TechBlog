---
layout: post
title: "Redis-模糊查询-方法实例"
date: 2025-03-10 12:41:34 +0800
description: "说明本文介绍Redis模糊查询的方法。官网网址Redis模糊查询键的方法Redis提供了两种模糊查询键的方法：KEYS , SCAN。推荐用SCAN，下边会介绍。模糊查询的通配符KEYS和SCAN都支持glob通配符*：通配任意多个字符：通配单个字符[]：通配括号内的某一个字符示例hllo匹配 hello, hallo and hxlloh*llo匹配 hllo、heeeelloh[ae]llo匹配 hello、hallo不匹配 hilloh[^e]llo。"
keywords: "Redis--模糊查询--方法实例"
categories: ['面试', '阿里巴巴', '学习路线']
tags: ['缓存', '数据库', 'Redis']
artid: "146151078"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146151078
    alt: "Redis-模糊查询-方法实例"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146151078
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146151078
cover: https://bing.ee123.net/img/rand?artid=146151078
image: https://bing.ee123.net/img/rand?artid=146151078
img: https://bing.ee123.net/img/rand?artid=146151078
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Redis--模糊查询--方法实例
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     原文网址：
     <a href="https://knife.blog.csdn.net/article/details/126530450" rel="nofollow" title="Redis--模糊查询--方法/实例_IT利刃出鞘的博客-CSDN博客">
      Redis–模糊查询–方法/实例_IT利刃出鞘的博客-CSDN博客
     </a>
    </p>
    <h3>
     <a id="_6">
     </a>
     简介
    </h3>
    <p>
     <strong>
      说明
     </strong>
    </p>
    <p>
     本文介绍Redis模糊查询的方法。
    </p>
    <p>
     <strong>
      官网网址
     </strong>
    </p>
    <p>
     <a href="https://redis.io/commands/keys/" rel="nofollow" title="https://redis.io/commands/keys/">
      https://redis.io/commands/keys/
     </a>
    </p>
    <p>
     <a href="https://redis.io/commands/scan/" rel="nofollow" title="https://redis.io/commands/scan/">
      https://redis.io/commands/scan/
     </a>
    </p>
    <p>
     <strong>
      Redis模糊查询键的方法
     </strong>
    </p>
    <p>
     Redis提供了两种模糊查询键的方法：KEYS , SCAN。推荐用SCAN，下边会介绍。
    </p>
    <h3>
     <a id="_23">
     </a>
     <strong>
      模糊查询的通配符
     </strong>
    </h3>
    <p>
     KEYS和SCAN都支持
     <a href="https://knife.blog.csdn.net/article/details/125043362" rel="nofollow" title="glob通配符">
      glob通配符
     </a>
     中的三个：*，，[]：
    </p>
    <ul>
     <li>
      *：通配任意多个字符
     </li>
     <li>
      ：通配单个字符
     </li>
     <li>
      []：通配括号内的某一个字符
     </li>
    </ul>
    <p>
     <strong>
      示例
     </strong>
    </p>
    <ul>
     <li>
      hllo
      <ul>
       <li>
        匹配 hello, hallo and hxllo
       </li>
      </ul>
     </li>
     <li>
      h*llo
      <ul>
       <li>
        匹配 hllo、heeeello
       </li>
      </ul>
     </li>
     <li>
      h[ae]llo
      <ul>
       <li>
        匹配 hello、hallo
       </li>
       <li>
        不匹配 hillo
       </li>
      </ul>
     </li>
     <li>
      h[^e]llo
      <ul>
       <li>
        匹配 hallo、hbllo…
       </li>
       <li>
        不匹配 hello
       </li>
      </ul>
     </li>
     <li>
      h[a-b]llo 匹配 hallo and hbllo
     </li>
    </ul>
    <h3>
     <a id="KEYS_46">
     </a>
     KEYS
    </h3>
    <h4>
     <a id="_49">
     </a>
     说明
    </h4>
    <p>
     KEYS指令会一次性查出所有满足条件的key（没有 offset、limit 参数）。keys 算法是遍历算法，复杂度是 O(n)。
    </p>
    <p>
     数据量大时会有问题：redis 是单线程的，操作都是原子的，如果实例中有千万级以上的 key，这个指令就会导致 Redis 服务卡顿，所有读写 Redis 的其它的指令都会被延后甚至会超时报错，可能会引起缓存雪崩甚至数据库宕机。
    </p>
    <h4>
     <a id="_55">
     </a>
     指令格式
    </h4>
    <p>
     KEYS pattern
    </p>
    <p>
     pattern即key的正则表达式。
    </p>
    <h4>
     <a id="_61">
     </a>
     示例
    </h4>
    <p>
     先写入一些数据：
    </p>
    <pre><code>192.168.xxx.21:6379[2]&gt; set hello 1
OK
192.168.xxx.21:6379[2]&gt; set word 1
OK
192.168.xxx.21:6379[2]&gt; set hellp 1
OK
192.168.xxx.21:6379[2]&gt; set ahellog 1
OK
192.168.xxx.21:6379[2]&gt; set hellog 1
OK
</code></pre>
    <p>
     查询：
    </p>
    <pre><code>192.168.xxx.21:6379[2]&gt; keys *
1) "hello"
2) "hellog"
3) "hellp"
4) "word"
5) "ahellog"
192.168.xxx.21:6379[2]&gt; keys *hell*
1) "hello"
2) "hellog"
3) "hellp"
4) "ahellog"
192.168.xxx.21:6379[2]&gt; keys hell*
1) "hello"
2) "hellog"
3) "hellp"
//知道前面的一些字母，忘记了最后一个字母
192.168.xxx.21:6379[2]&gt; keys hell?
1) "hello"
2) "hellp"
//知道前面的一些字母，忘记了最后两个个字母
192.168.xxx.21:6379[2]&gt; keys hell??
1) "hellog"
//知道前面四个字母，最后一个字母有可能是p t y 其中的一个
192.168.xxx.21:6379[2]&gt; keys hell[pty]
1) "hellp"
192.168.xxx.21:6379[2]&gt;
</code></pre>
    <h3>
     <a id="SCAN_105">
     </a>
     SCAN
    </h3>
    <p>
     上边是文章的部分内容，为便于维护，全文已转移到此网址：
     <a href="https://learn.skyofit.com/archives/2211" rel="nofollow" title="Redis-模糊查询-实例 - 自学精灵">
      Redis-模糊查询-实例 - 自学精灵
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37343832353236302f:61727469636c652f64657461696c732f313436313531303738" class_="artid" style="display:none">
 </p>
</div>


