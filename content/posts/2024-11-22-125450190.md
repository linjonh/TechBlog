---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343336383433372f:61727469636c652f64657461696c732f313235343530313930"
layout: post
title: "Learn-Git-Branchingåœ¨æ¸¸æˆä¸­å­¦ä¼šGit"
date: 2024-11-22 14:46:35 +0800
description: "LearnGitBranchingæ˜¯ä¸€ä¸ªäº’åŠ¨æ•™ç¨‹ï¼Œé€šè¿‡æ¸¸æˆåŒ–å­¦ä¹ ä½“éªŒå¸®åŠ©ç”¨æˆ·æŒæ¡Gitçš„å‘½ä»¤ï¼ŒåŒ…æ‹¬c"
keywords: "learngitbranchingæ€ä¹ˆç©"
categories: ['ç¼–ç¨‹åŸºç¡€']
tags: ['æ¸¸æˆ', 'Git']
artid: "125450190"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125450190
    alt: "Learn-Git-Branchingåœ¨æ¸¸æˆä¸­å­¦ä¼šGit"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=125450190
featuredImagePreview: https://bing.ee123.net/img/rand?artid=125450190
---

# Learn Git Branchingï¼šåœ¨æ¸¸æˆä¸­å­¦ä¼šGit

## Learn Git Branchingï¼šåœ¨æ¸¸æˆä¸­å­¦ä¼šGit

> Learn Git Branchingæ˜¯ä¸€ä¸ªå­¦ä¹ Gitæ“ä½œçš„æ•™ç¨‹ï¼Œä½œè€…ä¸ºä¸åŒçš„å‘½ä»¤è®¾è®¡äº†ç›¸åº”çš„å…³å¡ï¼Œå®ƒå¹¶ä¸æ¯ç‡¥ä¹å‘³ï¼Œç›¸åï¼Œæˆ‘ä»¬æ¯é€šè¿‡ä¸€ä¸ªå…³å¡ï¼Œè‡ªä¿¡å¿ƒå°±ä¼šæå‡ï¼Œå…´è¶£ä¹Ÿä¼šåŠ æ·±ï¼Œå¸¦ç€æ»¡æ»¡çš„æˆå°±æ„Ÿå»å­¦ä¹ ï¼ŒçœŸçš„å¾ˆæœ‰è¶£ï¼è€ƒè™‘åˆ°è‡ªæˆ‘æ€è€ƒçš„é‡è¦æ€§ï¼Œä½œè€…å°†ç›¸å…³éšè—å‘½ä»¤é™†ç»­æ”¾åœ¨äº†åé¢çš„å…³å¡ä¸­ï¼Œä¸è‡³äºè®©ç©å®¶ä¸€å¼€å§‹å°±æ€¥äºçœ‹ç­”æ¡ˆï¼Œè€Œä¸”é…ä¸Šä¼˜é›…çš„åŠ¨å›¾ï¼Œçœ‹èµ·æ¥çœŸçš„èˆ’å¿ƒã€‚ä½œè€…è€ƒè™‘çœŸçš„å¾ˆå‘¨åˆ°ï¼Œå¿…é¡»ç‚¹ä¸ªèµ~
>
> æ¯ä¸ªå…³å¡çš„ç­”æ¡ˆä¸å”¯ä¸€ï¼Œåªè¦å‘æŒ¥ä½ çš„æƒ³è±¡è¾¾åˆ°ç›®æ ‡å³å¯ã€‚ä¸‹é¢æ˜¯æˆ‘çš„å…³å¡æŒ‘æˆ˜åˆé›†ã€‚
>
> å¿«å»ç©è½¬Gitå§ï¼ï¼ˆhttps://learngitbranching.js.orgï¼‰

é“¾æ¥ğŸ’¨ğŸ’¨ğŸ’¨
[Learn Git Branching](https://learngitbranching.js.org)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/1ff901d7fdcaf58595955129ea827b4f.png#pic_center)

#### æ–‡ç« ç›®å½•

* [Learn Git Branchingï¼šåœ¨æ¸¸æˆä¸­å­¦ä¼šGit](#Learn_Git_BranchingGit_0)
* + [åŸºç¡€ç¯‡](#_17)
  + - * [1ï¸âƒ£ git commit](#1_git_commit_19)
      * [2ï¸âƒ£ git branch](#2_git_branch_25)
      * [3ï¸âƒ£ git merge](#3_git_merge_40)
      * [4ï¸âƒ£ git rebase](#4_git_rebase_52)
  + [é«˜çº§ç¯‡](#_65)
  + - * [1ï¸âƒ£ åˆ†ç¦» HEAD](#1__HEAD_67)
      * [2ï¸âƒ£ ç›¸å¯¹å¼•ç”¨ï¼ˆ^ï¼‰](#2__80)
      * [3ï¸âƒ£ ç›¸å¯¹å¼•ç”¨ï¼ˆ~ï¼‰](#3__97)
      * [4ï¸âƒ£ æ’¤é”€å˜æ›´](#4__113)
  + [ç§»åŠ¨æäº¤è®°å½•](#_127)
  + - * [1ï¸âƒ£ git cherry-pick](#1_git_cherrypick_129)
      * [2ï¸âƒ£ äº¤äº’å¼rebase](#2_rebase_137)
  + [æ‚é¡¹](#_145)
  + - * [1ï¸âƒ£ åªåšä¸€ä¸ªæäº¤è®°å½•](#1__147)
      * [2ï¸âƒ£ æäº¤çš„æŠ€å·§#1](#2_1_161)
      * [3ï¸âƒ£ æäº¤çš„æŠ€å·§#2](#3_2_176)
      * [4ï¸âƒ£ git tag](#4_git_tag_193)
      * [5ï¸âƒ£ git describe](#5_git_describe_205)
  + [é«˜çº§è¯é¢˜](#_216)
  + - * [1ï¸âƒ£ å¤šæ¬¡rebase](#1_rebase_218)
      * [2ï¸âƒ£ ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹](#2__235)
      * [3ï¸âƒ£ çº ç¼ ä¸æ¸…çš„åˆ†æ”¯](#3__249)
  + [Push & Pull â€”â€” Git è¿œç¨‹ä»“åº“](#Push__Pull__Git__259)
  + - * [1ï¸âƒ£ git clone](#1_git_clone_261)
      * [2ï¸âƒ£ è¿œç¨‹åˆ†æ”¯](#2__274)
      * [3ï¸âƒ£ git fetch](#3_git_fetch_285)
      * [4ï¸âƒ£ git pull](#4_git_pull_300)
      * [5ï¸âƒ£ æ¨¡æ‹Ÿå›¢é˜Ÿåˆä½œ](#5__312)
      * [6ï¸âƒ£ git push](#6_git_push_327)
      * [7ï¸âƒ£ åç¦»çš„æäº¤å†å²](#7__338)
      * [8ï¸âƒ£ é”å®šçš„mainï¼ˆlocked mainï¼‰](#8_mainlocked_main_380)
  + [å…³äº origin å’Œå®ƒçš„å‘¨è¾¹ â€”â€” Git è¿œç¨‹ä»“åº“é«˜çº§æ“ä½œ](#_origin___Git__408)
  + - * [1ï¸âƒ£ æ¨é€ä¸»åˆ†æ”¯](#1__410)
      * [2ï¸âƒ£ åˆå¹¶è¿œç¨‹åˆ†æ”¯](#2__430)
      * [3ï¸âƒ£ è¿œç¨‹è¿½è¸ª](#3__460)
      * [4ï¸âƒ£ git pushçš„å‚æ•°](#4_git_push_481)
      * [5ï¸âƒ£ git pushçš„å‚æ•°2](#5_git_push2_492)
      * [6ï¸âƒ£ git fetchçš„å‚æ•°](#6_git_fetch_501)
      * [7ï¸âƒ£ æ²¡æœ‰sourceçš„source](#7_sourcesource_514)
      * [8ï¸âƒ£ git pullçš„å‚æ•°](#8_git_pull_526)

  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/016af72ae49be38b54fdbc54488aa42d.gif#pic_center)

### åŸºç¡€ç¯‡

##### 1ï¸âƒ£ git commit

```shell
git commit

```

##### 2ï¸âƒ£ git branch

`git branch åˆ†æ”¯å`
åˆ›å»ºåˆ†æ”¯

`git checkout åˆ†æ”¯å`
åˆ‡æ¢åˆ†æ”¯ï¼Œå³å°†
`HEAD`
ç§»åŠ¨åˆ°åˆ†æ”¯ä¸Š

åˆ›å»ºå¹¶ç§»åŠ¨åˆ°åˆ†æ”¯ä¸Šï¼š

```shell
git branch bugFix
git checkout bugFix
---
git checkout -b bugFix

```

##### 3ï¸âƒ£ git merge

`git merge`
åˆå¹¶åˆ†æ”¯

```shell
git checkout -b bugFix
git commit
git checkout main
git commit
git merge bugFix

```

##### 4ï¸âƒ£ git rebase

åˆå¹¶åˆ†æ”¯å¹¶è¿”å›ä¸»çº¿

```shell
git checkout -b bugFix
git commit
git checkout main
git commit
git checkout bugFix
git rebase main

```

### é«˜çº§ç¯‡

##### 1ï¸âƒ£ åˆ†ç¦» HEAD

`HEAD`
æ€»æ˜¯æŒ‡å‘å½“å‰åˆ†æ”¯ä¸Šæœ€è¿‘ä¸€æ¬¡æäº¤è®°å½•ï¼Œå¤§å¤šæ•°ä¿®æ”¹æäº¤æ ‘çš„
`Git`
å‘½ä»¤éƒ½æ˜¯ä»æ”¹å˜
`HEAD`
çš„æŒ‡å‘å¼€å§‹çš„ï¼Œ
`HEAD`
é€šå¸¸æƒ…å†µä¸‹æ˜¯æŒ‡å‘åˆ†æ”¯åçš„ï¼ˆå¦‚ bugFixï¼‰ã€‚

åˆ†ç¦»çš„
`HEAD`
å°±æ˜¯è®©å…¶æŒ‡å‘äº†æŸä¸ªå…·ä½“çš„æäº¤è®°å½•è€Œä¸æ˜¯åˆ†æ”¯åã€‚

```shell
æŸ¥çœ‹HEADæŒ‡å‘  cat .git/HEAD
æŒ‡å‘å¼•ç”¨ git symbolio-ref HEAD
------------------------------
git checkout C4

```

##### 2ï¸âƒ£ ç›¸å¯¹å¼•ç”¨ï¼ˆ^ï¼‰

`git log`
æŸ¥çœ‹æäº¤è®°å½•çš„å“ˆå¸Œå€¼ï¼ˆåŸºäºSHA-1ï¼Œå…±40ä½ï¼‰ï¼Œä»…è¾“å…¥å‰å‡ ä¸ªå­—ç¬¦å³å¯ã€‚

* ä½¿ç”¨
  `^`
  å‘ä¸Šç§»åŠ¨1ä¸ªæäº¤è®°å½•ï¼ŒæŠŠ
  `^`
  åŠ åˆ°å¼•ç”¨åç§°çš„åé¢ï¼Œè¡¨ç¤ºè®©
  `git`
  å¯»æ‰¾æŒ‡å®šæäº¤è®°å½•çš„çˆ¶æäº¤ï¼Œæ¯”å¦‚åˆ‡æ¢åˆ°
  `main`
  çš„çˆ¶èŠ‚ç‚¹
  `git checkout main^`
* ä½¿ç”¨
  `~<num>`
  å‘ä¸Šç§»åŠ¨å¤šä¸ªè®°å½•ï¼Œå¦‚
  `~3`
  ï¼Œå®Œæ•´å¦‚
  `git checkout main~3`

```shell
git checkout bugFix
git checkout C4
git checkout HEAD^
---
git checkout C4^
---
git checkout C4~1

```

##### 3ï¸âƒ£ ç›¸å¯¹å¼•ç”¨ï¼ˆ~ï¼‰

* ä½¿ç”¨
  `~<num>`
  å‘ä¸Šç§»åŠ¨å¤šä¸ªè®°å½•ï¼Œå¦‚
  `~3`
  ï¼Œå®Œæ•´å¦‚
  `git checkout HEAD~3`

å¼ºè¡Œä¿®æ”¹åˆ†æ”¯ä½ç½®

* ä½¿ç”¨
  `-f`
  é€‰é¡¹è®©åˆ†æ”¯æŒ‡å‘å¦ä¸€ä¸ªæäº¤
  ï¼Œ

  å¦‚
  `git branch -f main HEAD~3`
  ï¼Œå°†
  `main`
  åˆ†æ”¯å¼ºåˆ¶æŒ‡å‘
  `HEAD`
  çš„ç¬¬
  `3`
  çº§çˆ¶æäº¤

```shell
git branch -f main C6
git checkout HEAD^
git branch -f bugFix HEAD~1

```

##### 4ï¸âƒ£ æ’¤é”€å˜æ›´

* æœ¬åœ°åˆ†æ”¯çš„æ’¤é”€ï¼š
  `git reset`
  ï¼Œé€šè¿‡æŠŠåˆ†æ”¯è®°å½•å›é€€å‡ ä¸ªæäº¤è®°å½•æ¥å®ç°æ’¤é”€æ”¹åŠ¨ã€‚

  ä¾‹å¦‚ï¼Œ
  `git reset HEAD~1`
* è¿œç¨‹åˆ†æ”¯çš„æ’¤é”€ï¼š
  `git revert`
  ï¼Œä¾‹å¦‚
  `git revert HEAD`

```shell
git reset HEAD^
git checkout pushed
git revert HEAD

```

### ç§»åŠ¨æäº¤è®°å½•

##### 1ï¸âƒ£ git cherry-pick

* `git cherry-pick <...>`
  ï¼Œå¦‚æœæƒ³å°†ä¸€äº›æäº¤å¤åˆ¶åˆ°å½“å‰æ‰€åœ¨çš„ä½ç½®ï¼ˆ
  `HEAD`
  ï¼‰ä¸‹é¢çš„è¯ï¼Œè¯¥å‘½ä»¤éå¸¸å®ç”¨ï¼Œå¦‚
  `git cherry-pick C2 C4`
  æ˜¯å°†
  `C2å’ŒC4åˆ†æ”¯`
  å¤åˆ¶åˆ°å½“å‰ä½ç½®

```shell
git cherry-pick C3 C4 C7

```

##### 2ï¸âƒ£ äº¤äº’å¼rebase

* `git rebase -i HEAD~4`

```shell
git rebase -i HEAD~4 (pick C4 å¹¶ ç§»åŠ¨é¡ºåº)

```

### æ‚é¡¹

##### 1ï¸âƒ£ åªåšä¸€ä¸ªæäº¤è®°å½•

* `git rebase -i`
* `git cherry-pick`

```shell
git rebase -i HEAD~3
git checkout main
git rebase bugFix
--
git rebase -i HEAD~3
git branch -f main HEAD

```

##### 2ï¸âƒ£ æäº¤çš„æŠ€å·§#1

* åœ¨
  `newImage`
  åˆ†æ”¯ä¸Šè¿›è¡Œäº†ä¸€æ¬¡æäº¤ï¼ŒåŸºäºå®ƒåˆåˆ›å»ºäº†optionåˆ†æ”¯ï¼Œç„¶ååˆæäº¤äº†ä¸€æ¬¡ã€‚ç°åœ¨æˆ‘ä»¬æƒ³ä¿®æ”¹
  `newImage`
  ä¸­çš„å†…å®¹
  + ä½¿ç”¨
    `git rebase -i`
    å°†æäº¤é‡æ’
  + ä½¿ç”¨
    `git commit --amend`
    è¿›è¡Œå°ä¿®æ”¹
  + å†ä½¿ç”¨
    `git rebase -i`
    ç§»åŠ¨åˆ°åŸæ¥çš„é¡ºåº
  + å°†
    `main`
    ç§»åŠ¨åˆ°
    `HEAD`

```shell
git rebase -i HEAD~2
git rebase -i HEAD
git rebase -i HEAD~2
git branch -f main HEAD

```

##### 3ï¸âƒ£ æäº¤çš„æŠ€å·§#2

`cherry-pick`
å¯ä»¥å°†æäº¤æ ‘ä¸Šä»»ä½•åœ°æ–¹çš„æäº¤è®°å½•å–è¿‡æ¥è¿½åŠ åˆ°
`HEAD`
ä¸Šï¼ˆåªè¦ä¸æ˜¯
`HEAD`
ä¸Šæ¸¸çš„æäº¤å°±æ²¡é—®é¢˜ï¼‰

```shell
git checkout C1
git cherry-pick C2
git checkout C1
git cherry-pick C2 C3
git branch -f main HEAD
---
git checkout C1
git cherry-pick C2
git checkout main
git cherry-pick C2 C3

```

##### 4ï¸âƒ£ git tag

* æ ‡ç­¾
  `tag`
  åœ¨ä»£ç åº“ä¸­èµ·ç€é”šç‚¹çš„ä½œç”¨
* `git tag v1 C1`
  åˆ›å»ºä¸€ä¸ªæŒ‡å‘
  `C1`
  çš„æ ‡ç­¾
  `v1`

```shell
git tag v0 C1
git tag v1 C2
git checkout v1

```

##### 5ï¸âƒ£ git describe

* `git describe <ref>`
  æè¿°ç¦»å½“å‰ï¼ˆrefï¼‰æœ€è¿‘çš„æ ‡ç­¾,

  è¾“å‡ºä¸º
  `<tag>_<numCommits>_g<hash>`

```shell
git describe C5
git commit

```

### é«˜çº§è¯é¢˜

##### 1ï¸âƒ£ å¤šæ¬¡rebase

```shell
git checkout bugFix
git rebase main
git checkout side
git rebase bugFix
git checkout another
git rebase -i side
git branch -f main HEAD
---
git rebase main bugFix
git rebase bugFix side
git rebase side another
git rebase another main

```

##### 2ï¸âƒ£ ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹

* `^`
  åé¢ä¹Ÿå¯ä»¥è·Ÿæ•°å­—ï¼Œè¡¨ç¤ºæŒ‡å®šåˆå¹¶æäº¤è®°å½•çš„æŸä¸ªçˆ¶æäº¤ï¼ˆä¸€ä¸ªä»¥ä¸Šçš„çˆ¶åˆ†æ”¯ï¼‰,å¦‚
  `git checkout main^2`
* æ“ä½œç¬¦
  `~`
  å’Œ
  `^`
  æ”¯æŒé“¾å¼æ“ä½œï¼Œå¦‚
  `git checkout HEAD~^2~2`

```shell
git checkout main~1^2^
git branch bugWork
git checkout main
---
(åˆ†æ”¯ä¸å­˜åœ¨ä¼šä¸»åŠ¨åˆ›å»º)
git branch -f bugWork main^^2^

```

##### 3ï¸âƒ£ çº ç¼ ä¸æ¸…çš„åˆ†æ”¯

```shell
git checkout one
git cherry-pick C4 C3 C2
git checkout two
git cherry-pick C5 C4 C3 C2
git branch -f three C2

```

### Push & Pull â€”â€” Git è¿œç¨‹ä»“åº“

##### 1ï¸âƒ£ git clone

è¿œç¨‹ä»“åº“çš„ç‰¹ç‚¹ï¼š

* æ•°æ®å¤‡ä»½
* ä»£ç ç¤¾äº¤åŒ–ï¼ˆä¸ºé¡¹ç›®åšè´¡çŒ®ï¼‰

`git clone`
åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªè¿œç¨‹ä»“åº“çš„å…‹éš†

```shell
git clone

```

##### 2ï¸âƒ£ è¿œç¨‹åˆ†æ”¯

* è¿œç¨‹ä»“åº“åä¸€èˆ¬è®¾ç½®ä¸º
  `origin`
  ï¼Œä¸”
  `git`
  é»˜è®¤å°†è¿œç¨‹ä»“åº“è®¾ç½®ä¸º
  `origin`
* è·¯å¾„
  `<remote name>/<branch name>`
  ï¼Œå¦‚
  `o/main`
  ï¼Œ
  `origin/main`

```shell
git commit
git checkout o/main
git commit

```

##### 3ï¸âƒ£ git fetch

`git fetch`
ä»è¿œç¨‹ä»“åº“è·å–æ›´æ–°çš„åˆ†æ”¯ï¼Œä¸»è¦åšäº†ä¸¤æ­¥

* ä»è¿œç¨‹ä»“åº“ä¸‹è½½æœ¬åœ°ä»“åº“ä¸­ç¼ºå¤±çš„æäº¤è®°å½•
* æ›´æ–°è¿œç¨‹åˆ†æ”¯ï¼ˆå¦‚
  `origin/main`
  ï¼‰

`git fetch`
å®é™…ä¸Šå°†æœ¬åœ°ä»“åº“ä¸­çš„è¿œç¨‹åˆ†æ”¯æ›´æ–°æˆäº†è¿œç¨‹ä»“åº“ç›¸åº”åˆ†æ”¯æœ€æ–°çš„çŠ¶æ€ã€‚è¿œç¨‹åˆ†æ”¯åæ˜ äº†è¿œç¨‹ä»“åº“åœ¨ä½ æœ€åä¸€æ¬¡ä¸å®ƒé€šä¿¡æ—¶çš„çŠ¶æ€ï¼Œ
`git fetch`
å°±æ˜¯ä½ ä¸è¿œç¨‹ä»“åº“é€šä¿¡çš„æ–¹ã€‚
`git fetch`
é€šå¸¸é€šè¿‡äº’è”ç½‘ï¼ˆä½¿ç”¨
`http://`
æˆ–
`git://`
åè®®) ä¸è¿œç¨‹ä»“åº“é€šä¿¡ã€‚

==
`git fetch`
å¹¶ä¸ä¼šæ”¹å˜æœ¬åœ°ä»“åº“çš„çŠ¶æ€ï¼Œä¹Ÿä¸ä¼šæ›´æ–°
`main`
åˆ†æ”¯ï¼Œä¹Ÿä¸ä¼šä¿®æ”¹ç£ç›˜ä¸Šçš„æ–‡ä»¶ã€‚==æ‰€ä»¥å¯ä»¥å°†
`git fetch`
ç†è§£ä¸ºå•çº¯çš„ä¸‹è½½æ“ä½œã€‚

```shell
git fetch

```

##### 4ï¸âƒ£ git pull

* `git pull`
  æŠ“å–æ›´æ–°å¹¶åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯
* `git fetch ; git merge orign/main`
  ç­‰ä»·äº
  `git pull`

```shell
git fetch
git merge o/main
---
git pull

```

##### 5ï¸âƒ£ æ¨¡æ‹Ÿå›¢é˜Ÿåˆä½œ

```shell
git clone
git fakeTeamwork main 2
git fetch
git commit
git merge o/main
---
git clone
git fakeTeamwork main 2
git commit
git pull

```

##### 6ï¸âƒ£ git push

* `git push`
  è´Ÿè´£å°†ä½ çš„å˜æ›´ä¸Šä¼ åˆ°æŒ‡å®šçš„è¿œç¨‹ä»“åº“
* æ³¨æ„â€”â€”
  *`git push`
  ä¸å¸¦ä»»ä½•å‚æ•°æ—¶çš„è¡Œä¸ºä¸ Git çš„ä¸€ä¸ªåä¸º
  `push.default`
  çš„é…ç½®æœ‰å…³ã€‚å®ƒçš„é»˜è®¤å€¼å–å†³äºä½ æ­£ä½¿ç”¨çš„ Git çš„ç‰ˆæœ¬*
  ã€‚

```shell
git commit
git commit
git push

```

##### 7ï¸âƒ£ åç¦»çš„æäº¤å†å²

å‡å¦‚ä½ å…‹éš†äº†ä¸€ä¸ªä»“åº“ï¼Œç ”å‘æŸä¸ªæ–°åŠŸèƒ½å®Œæ¯•å‡†å¤‡æäº¤æ—¶ï¼Œå‘ç°ä½ çš„åŒäº‹æ›´æ–°äº†å¥½å¤šåˆ†æ”¯å¹¶ä¸”å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“äº†ï¼Œå› æ­¤ä½ çš„å·¥ä½œå°±å˜æˆäº†åŸºäºé¡¹ç›®æ—§ç‰ˆçš„ä»£ç ï¼Œä¸è¿œç¨‹ä»“åº“æœ€æ–°çš„ä»£ç ä¸åŒ¹é…äº†ã€‚

è§£å†³åŠæ³•ï¼š
è°ƒæ•´ä½ çš„å·¥ä½œä½¿ä½ çš„å·¥ä½œåŸºäºæœ€æ–°çš„è¿œç¨‹åˆ†æ”¯

* ä½¿ç”¨
  `git fetch`
  æ›´æ–°æœ¬åœ°ä»“åº“ä¸­çš„è¿œç¨‹åˆ†æ”¯ï¼Œç„¶åç”¨
  `rebase`
  å°†æˆ‘ä»¬çš„å·¥ä½œç§»åŠ¨åˆ°æœ€æ–°çš„æäº¤è®°å½•ä¸‹

  `git fetch; git rebase o/main`
  ç­‰ä»·äº
  `git pull --rebase`
* æ›´æ–°æœ¬åœ°ä»“åº“ä¸­çš„è¿œç¨‹åˆ†æ”¯ï¼Œç„¶ååˆå¹¶æ–°å˜æ›´åˆ°æˆ‘ä»¬çš„æœ¬åœ°åˆ†æ”¯

  `git fetch; git merge o/main`
  ç­‰ä»·äº
  `git pull`

```shell
git clone
git fakeTeamwork main
git commit
git fetch
git rebase o/main
git push
--
git clone
git fakeTeamwork main
git commit
git fetch
git merge o/main
git push
---
git clone
git fakeTeamwork main
git commit
git pull --rebase
git push
---
git clone
git fakeTeamwork main
git commit
git pull
git push

```

##### 8ï¸âƒ£ é”å®šçš„mainï¼ˆlocked mainï¼‰

`main`
è¢«é”å®šæ—¶éœ€è¦ä¸€äº›
`pull request`
æµç¨‹æ¥åˆå¹¶ä¿®æ”¹ã€‚

æ–°å»ºä¸€ä¸ªåˆ†æ”¯
`feature`
ï¼Œæ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚ç„¶å
`reset`
ä½ çš„mainåˆ†æ”¯å’Œè¿œç¨‹æœåŠ¡å™¨ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¸‹æ¬¡ä½ 
`pull`
å¹¶ä¸”ä»–äººçš„æäº¤å’Œä½ å†²çªçš„æ—¶å€™å°±ä¼šæœ‰é—®é¢˜ã€‚

```shell
git branch feature
git branch -f main o/main
git checkout feature
git push
---
git branch -f main o/main
git branch -f feature C2
git checkout feature
git push
---
git checkout -b feature
git branch -f main o/main
git push
---
show solution
(åœ¨æœ¬ç¨‹åºä¸­é»˜è®¤çš„è¡Œä¸ºæ˜¯ --hard ç¡¬é‡ç½®ï¼Œå¯ä»¥å°½æƒ…çœç•¥æ‰é‚£ä¸ªé€‰é¡¹ä»¥é¿å…éº»çƒ¦ï¼ä½†æ˜¯è¦è®°å½• Git ä¸­é»˜è®¤çš„æ˜¯ --mixed)
git reset --hard o/main   
git checkout -b feature C2
git push origin feature

```

### å…³äº origin å’Œå®ƒçš„å‘¨è¾¹ â€”â€” Git è¿œç¨‹ä»“åº“é«˜çº§æ“ä½œ

##### 1ï¸âƒ£ æ¨é€ä¸»åˆ†æ”¯

```shell
git checkout main
git pull --rebase
git rebase main side1
git rebase HEAD side2
git rebase HEAD side3
git branch -f main side3
git checkout main
git push
---
git fetch
git rebase o/main side1
git rebase side1 side2
git rebase side2 side3
git rebase side3 main
git push

```

##### 2ï¸âƒ£ åˆå¹¶è¿œç¨‹åˆ†æ”¯

* ä¸ºäº† push æ–°å˜æ›´åˆ°è¿œç¨‹ä»“åº“ï¼Œä½ è¦åšçš„å°±æ˜¯
  **åŒ…å«**
  è¿œç¨‹ä»“åº“ä¸­æœ€æ–°å˜æ›´ã€‚æ„æ€å°±æ˜¯åªè¦ä½ çš„æœ¬åœ°åˆ†æ”¯åŒ…å«äº†è¿œç¨‹åˆ†æ”¯ï¼ˆå¦‚
  `o/main`
  ï¼‰ä¸­çš„æœ€æ–°å˜æ›´å°±å¯ä»¥äº†ï¼Œè‡³äºå…·ä½“æ˜¯ç”¨ rebase è¿˜æ˜¯ mergeï¼Œå¹¶æ²¡æœ‰é™åˆ¶

`rebase`
çš„ä¼˜ç‚¹æ˜¯ä½¿ä½ çš„æäº¤æ ‘å˜å¾—å¾ˆå¹²å‡€ï¼Œæ‰€æœ‰çš„æäº¤éƒ½åœ¨ä¸€æ¡çº¿ä¸Šï¼Œç¼ºç‚¹æ˜¯ä¿®æ”¹äº†æ ‘çš„æäº¤å†å²ã€‚

```shell
git fetch
git branch -f main o/main
git checkout main
git merge side1
git merge side2
git merge side3
git push
---
git fetch
git rebase o/main main
git merge side1
git merge side2
git merge side3
git push
---
git checkout main
git pull
git merge side1
git merge side2
git merge side3
git push

```

##### 3ï¸âƒ£ è¿œç¨‹è¿½è¸ª

* `pull`
  æ“ä½œæ—¶, æäº¤è®°å½•ä¼šè¢«å…ˆä¸‹è½½åˆ°
  `o/main`
  ä¸Šï¼Œä¹‹åå†åˆå¹¶åˆ°æœ¬åœ°çš„
  `main`
  åˆ†æ”¯ã€‚éšå«çš„åˆå¹¶ç›®æ ‡ç”±è¿™ä¸ªå…³è”ç¡®å®šçš„ã€‚
* `push`
  æ“ä½œæ—¶, æˆ‘ä»¬æŠŠå·¥ä½œä»
  `main`
  æ¨åˆ°è¿œç¨‹ä»“åº“ä¸­çš„
  `main`
  åˆ†æ”¯(åŒæ—¶ä¼šæ›´æ–°è¿œç¨‹åˆ†æ”¯
  `o/main`
  ) ã€‚

`main`
å’Œ
`o/main`
çš„å…³è”å…³ç³»å°±æ˜¯ç”±åˆ†æ”¯çš„â€œremote trackingâ€å±æ€§å†³å®šçš„ã€‚
`main`
è¢«è®¾å®šä¸ºè·Ÿè¸ª
`o/main`
â€”â€” è¿™æ„å‘³ç€ä¸º
`main`
åˆ†æ”¯æŒ‡å®šäº†æ¨é€çš„ç›®çš„åœ°ä»¥åŠæ‹‰å–ååˆå¹¶çš„ç›®æ ‡ã€‚å½“ä½ å…‹éš†æ—¶, Git ä¼šä¸ºè¿œç¨‹ä»“åº“ä¸­çš„æ¯ä¸ªåˆ†æ”¯åœ¨æœ¬åœ°ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ï¼ˆæ¯”å¦‚
`o/main`
ï¼‰ã€‚ç„¶åå†åˆ›å»ºä¸€ä¸ªè·Ÿè¸ªè¿œç¨‹ä»“åº“ä¸­æ´»åŠ¨åˆ†æ”¯çš„æœ¬åœ°åˆ†æ”¯ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªæœ¬åœ°åˆ†æ”¯ä¼šè¢«å‘½åä¸º
`main`
ã€‚å…‹éš†å®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ï¼ˆå¦‚æœæ²¡æœ‰è¿™ä¸ªæœ¬åœ°åˆ†æ”¯çš„è¯ï¼Œä½ çš„ç›®å½•å°±æ˜¯â€œç©ºç™½â€çš„ï¼‰ã€‚

æˆ‘ä»¬å¯ä»¥è®©ä»»æ„åˆ†æ”¯è·Ÿè¸ª
`o/main`
, ç„¶åè¯¥åˆ†æ”¯ä¼šåƒ
`main`
åˆ†æ”¯ä¸€æ ·å¾—åˆ°éšå«çš„ push ç›®çš„åœ°ä»¥åŠ
`merge`
çš„ç›®æ ‡ã€‚ è¿™æ„å‘³ç€å¯ä»¥åœ¨åˆ†æ”¯
`totallyNotMain`
ä¸Šæ‰§è¡Œ
`git push`
ï¼Œå°†å·¥ä½œæ¨é€åˆ°è¿œç¨‹ä»“åº“çš„
`main`
åˆ†æ”¯ä¸Šã€‚

åˆ›å»ºåä¸ºtotallyNotMainçš„åˆ†æ”¯ï¼Œæ¥è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯
`o/main`
ï¼Œæœ‰ä¸¤è¯æ–¹å¼å¯å®ç°ï¼š

* `git checkout -b totallyNotMain o/main`
* `git branch -u o/main totallyNotMain`

```shell
git checkout -b side o/main
git commit
git pull --rebase
git push

```

##### 4ï¸âƒ£ git pushçš„å‚æ•°

ä¸º
`git push`
æŒ‡å®šå‚æ•°ï¼Œè¯­æ³•ä¸º
`git push <remote> <place>`

ä¾‹å¦‚
`git push origin main`
çš„æ„æ€æ˜¯ï¼šåˆ‡æ¢åˆ°æœ¬åœ°ä»“åº“ä¸­çš„
`main`
åˆ†æ”¯ï¼Œè·å–æ‰€æœ‰çš„æäº¤ï¼Œå†åˆ°è¿œç¨‹ä»“åº“
`origin`
ä¸­æ‰¾åˆ°
`main`
åˆ†æ”¯ï¼Œå°†è¿œç¨‹ä»“åº“ä¸­æ²¡æœ‰çš„æäº¤éƒ½æ·»åŠ ä¸Šå»ã€‚

```shell
git push origin main
git push origin foo

```

##### 5ï¸âƒ£ git pushçš„å‚æ•°2

`git push origin <source>:<destination>`
æ˜¯å°†æœ¬åœ°
`source`
åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹
`destination`
åˆ†æ”¯ã€‚å¹¶ä¸”
`source`
æ˜¯
`git`
å¯è¯†åˆ«çš„ä½ç½®ï¼Œå¦‚
`name~3`
ã€
`name^`
ï¼Œ
`name^2`
ç­‰ã€‚å¦‚æœæ¨é€çš„ç›®çš„åˆ†æ”¯ä¸å­˜åœ¨
`git`
ä¼šåœ¨è¿œç¨‹ä»“åº“ä¸­è‡ªåŠ¨åˆ›å»ºè¿™ä¸ªåˆ†æ”¯ã€‚

```shell
git push origin foo:main
git push origin main^:foo

```

##### 6ï¸âƒ£ git fetchçš„å‚æ•°

`git fetch`
åŒæ ·å…·æœ‰å‚æ•°ï¼Œåªæ˜¯æ–¹å‘ç›¸åï¼Œä¾‹å¦‚å‘½ä»¤
`git fetch origin foo`
ä¼šåˆ°è¿œç¨‹ä»“åº“
`foo`
åˆ†æ”¯ä¸Šï¼Œè·å–æœ¬åœ°ä¸å­˜åœ¨çš„æäº¤ï¼Œæ”¾åˆ°æœ¬åœ°çš„
`o/foo`
ä¸Šã€‚

* å¦‚æœ
  `git fetch`
  æ²¡æœ‰å‚æ•°ï¼Œå®ƒä¼šä¸‹è½½æ‰€æœ‰çš„æäº¤è®°å½•åˆ°å„ä¸ªè¿œç¨‹åˆ†æ”¯

```shell
git fetch origin main~:foo
git fetch origin foo:main
git checkout foo
git merge main

```

##### 7ï¸âƒ£ æ²¡æœ‰sourceçš„source

`git`
æœ‰ä¸¤ç§å…³äº
`<source>`
çš„ç”¨æ³•æ˜¯æ¯”è¾ƒè¯¡å¼‚çš„ï¼Œå³ä½ å¯ä»¥åœ¨
`git push`
æˆ–
`git fetch`
æ—¶ä¸æŒ‡å®šä»»ä½•
`source`
ï¼Œæ–¹æ³•å°±æ˜¯ä»…ä¿ç•™å†’å·å’Œ
`destination`
éƒ¨åˆ†ï¼Œ
`source`
éƒ¨åˆ†ç•™ç©ºã€‚

* `git push origin :foo`
  æ“ä½œæ˜¯åˆ é™¤è¿œç¨‹åˆ†æ”¯
  `foo`
* `git fetch origin :bar`
  æ“ä½œæ˜¯åˆ›å»ºæœ¬åœ°åˆ†æ”¯
  `bar`

```shell
git push origin :foo
git fetch origin :bar

```

##### 8ï¸âƒ£ git pullçš„å‚æ•°

`git pull`
å³
`git fetch`
å’Œ
`git merge`
çš„ç¼©å†™ã€‚

* `git pull origin foo`
  ç›¸å½“äº
  `git fetch origin foo; git merge o/foo`
* `git pull origin bar~1:bugFix`
  ç›¸å½“äº
  `git fetch origin bar~1:bugFix; git merge bugFix`

```shell
git pull origin bar:foo
git pull origin main:side

```

---

æ­å–œé€šå…³ï¼ï¼ï¼

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/69968735f9a2845425994ec3d0b47e4c.jpeg#pic_center)