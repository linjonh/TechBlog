---
layout: post
title: "redis部署架构"
date: 2025-03-15 19:29:58 +0800
description: "实例1        安装目录：/app/6380        数据目录：/app/6380/data实例2        安装目录：/app/6381        数据目录：/app/6381/data。"
keywords: "redis部署架构"
categories: ['Redis']
tags: ['架构']
artid: "146283649"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146283649
    alt: "redis部署架构"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146283649
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146283649
cover: https://bing.ee123.net/img/rand?artid=146283649
image: https://bing.ee123.net/img/rand?artid=146283649
img: https://bing.ee123.net/img/rand?artid=146283649
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     redis部署架构
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、redis多实例部署
    </h2>
    <blockquote>
     <p>
      实例1        安装目录：/app/6380        数据目录：/app/6380/data
     </p>
     <p>
      实例2        安装目录：/app/6381        数据目录：/app/6381/data
     </p>
    </blockquote>
    <h4>
     1、创建实例安装目录
    </h4>
    <p>
     <img alt="" height="324" src="https://i-blog.csdnimg.cn/direct/055f1f84820a4dbe9c7138de7edf3d9f.png" width="1197"/>
    </p>
    <h4>
     2、拷贝实例的配置文件
    </h4>
    <p>
     <img alt="" height="147" src="https://i-blog.csdnimg.cn/direct/0f3fbb243baf4c859296cae0b62fddaf.png" width="1175"/>
    </p>
    <h4>
     3、编辑实例的配置文件
    </h4>
    <p>
     <img alt="" height="61" src="https://i-blog.csdnimg.cn/direct/cbf3c005ee274a369b9d145b8ba769fd.png" width="963"/>
    </p>
    <p>
     <img alt="" height="66" src="https://i-blog.csdnimg.cn/direct/54c990425e8b437c9b2d06d76463fd60.png" width="483"/>
    </p>
    <p>
     <img alt="" height="81" src="https://i-blog.csdnimg.cn/direct/1c027f7bb538427289c372990cc27436.png" width="225"/>
    </p>
    <p>
     <img alt="" height="58" src="https://i-blog.csdnimg.cn/direct/e163d602e1f14a97b3f7b54c91ed75b6.png" width="309"/>
    </p>
    <p>
     <img alt="" height="111" src="https://i-blog.csdnimg.cn/direct/4e1eaf96209849c39de01becae8bce06.png" width="705"/>
    </p>
    <p>
     <img alt="" height="267" src="https://i-blog.csdnimg.cn/direct/06d2d6161cf547f38ee44c1d4793219f.png" width="756"/>
    </p>
    <p>
     <img alt="" height="117" src="https://i-blog.csdnimg.cn/direct/d07c5e1987a745f78f9ce923db502137.png" width="567"/>
    </p>
    <p>
     <img alt="" height="66" src="https://i-blog.csdnimg.cn/direct/5d3a74cebff542cda4b557f88a33aea7.png" width="419"/>
    </p>
    <p>
     <img alt="" height="219" src="https://i-blog.csdnimg.cn/direct/d1d79ed50cff413986ad1508eafc9520.png" width="737"/>
    </p>
    <p>
     第二个同上
    </p>
    <h4>
     4、启动实例
    </h4>
    <p>
     <img alt="" height="98" src="https://i-blog.csdnimg.cn/direct/3d8a7f5cdbac4fbfbcb26f143b7eeb4e.png" width="1221"/>
    </p>
    <h4>
     <img alt="" height="168" src="https://i-blog.csdnimg.cn/direct/bd72a386a81c47e49c9d028f7bca8a3e.png" width="1884"/>
     5、连接redis实例进行数据读写
    </h4>
    <p>
     <img alt="" height="435" src="https://i-blog.csdnimg.cn/direct/d5e406aeaec942ae9b1b212100f7cfcb.png" width="1161"/>
    </p>
    <h2>
     二、redis主从复制
    </h2>
    <blockquote>
     <p>
      作用：提高redis可用性
     </p>
    </blockquote>
    <h4>
     1、核心要素
    </h4>
    <blockquote>
     <p>
      1、redis采用异步的方式进行数据复制
     </p>
     <p>
      2、支持一主多从的架构
     </p>
     <p>
      3、复制数据时是非阻塞
     </p>
     <p>
      4、从redis 2.6开始，从服务器默认是只读
     </p>
    </blockquote>
    <h4>
     2、编辑从服务器的配置文件
    </h4>
    <p>
     <img alt="" height="96" src="https://i-blog.csdnimg.cn/direct/1abf48e8da4b4028b1865e0f38ebf35f.png" width="765"/>
    </p>
    <p>
     如果主服务器有密码则需添加上此配置即可
    </p>
    <p>
     <img alt="" height="105" src="https://i-blog.csdnimg.cn/direct/6ee6c9d3488d44e78d885024844f9751.png" width="722"/>
    </p>
    <h4>
     3、重启 redis
    </h4>
    <p>
     <img alt="" height="103" src="https://i-blog.csdnimg.cn/direct/851ab4ea51f0416ab527687323750f7a.png" width="1272"/>
    </p>
    <h4>
     4、验证
    </h4>
    <p>
     在主服务器添加数据切换到从服务器验证
    </p>
    <p>
     <img alt="" height="393" src="https://i-blog.csdnimg.cn/direct/c0e0b89d14df41e18526eabbf493433f.png" width="1145"/>
    </p>
    <p>
     上面说到从2.6版本开始从服务器默认是只读状态，所以无法写入数据
    </p>
    <p>
     <img alt="" height="141" src="https://i-blog.csdnimg.cn/direct/d9fc1e94e42749fea832ce8c38aab515.png" width="1269"/>
     查看当前redis的工作状态
    </p>
    <p>
     <img alt="" height="81" src="https://i-blog.csdnimg.cn/direct/d0f8e29f88814894a22d2cd0d7975b66.png" width="645"/>
    </p>
    <p>
     查看主从复制相关的信息
    </p>
    <p>
     <img alt="" height="571" src="https://i-blog.csdnimg.cn/direct/5d93ef77ac3c4f11a31ae866051f5f1e.png" width="1266"/>
    </p>
    <p>
     查看从服务器的主从复制信息
    </p>
    <p>
     <img alt="" height="797" src="https://i-blog.csdnimg.cn/direct/d427f33341a44964a61c4edf20382fdd.png" width="1107"/>
    </p>
    <h4>
     5、主从切换
    </h4>
    <blockquote>
     <p>
      1、将从服务器提升为新主服务器
     </p>
     <p>
      SLAVEOF no one
     </p>
     <p>
      2、将从服务器上连接主服务器的信息删除
     </p>
    </blockquote>
    <p>
     在从服务器中输入此命令
    </p>
    <p>
     <img alt="" height="135" src="https://i-blog.csdnimg.cn/direct/3816b1b4d4da47ee8b01c21f2bb0619f.png" width="822"/>
    </p>
    <p>
     <img alt="" height="58" src="https://i-blog.csdnimg.cn/direct/86f3d973a6d346028de382da8e7a68d5.png" width="978"/>
     把这行配置去掉
    </p>
    <p>
     <img alt="" height="96" src="https://i-blog.csdnimg.cn/direct/fd25f8406ed84ccfaee560ac27a54d26.png" width="792"/>
    </p>
    <p>
     重启，进入查看主从信息，可以看到当前角色为主服务器
    </p>
    <p>
     <img alt="" height="378" src="https://i-blog.csdnimg.cn/direct/eb37d06bdea54e1383fe6cb10aa2c293.png" width="821"/>
    </p>
    <p>
     在另一台redis配置文件中配置上此参数，即可作为从服务器存在
    </p>
    <p>
     <img alt="" height="75" src="https://i-blog.csdnimg.cn/direct/b860fabda8ec4da49211a1ceea07715c.png" width="687"/>
     <img alt="" height="313" src="https://i-blog.csdnimg.cn/direct/f414ef46aebe400abec753e98aa05ba8.png" width="1151"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323430325f38373331393237312f:61727469636c652f64657461696c732f313436323833363439" class_="artid" style="display:none">
 </p>
</div>


