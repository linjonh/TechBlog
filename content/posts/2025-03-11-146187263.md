---
layout: post
title: "mysql索引机制深度剖析"
date: 2025-03-11 20:43:07 +0800
description: "mysql索引机制深度剖析"
keywords: "mysql索引机制深度剖析"
categories: ['Mysql']
tags: ['数据库', 'Mysql']
artid: "146187263"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146187263
    alt: "mysql索引机制深度剖析"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146187263
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146187263
cover: https://bing.ee123.net/img/rand?artid=146187263
image: https://bing.ee123.net/img/rand?artid=146187263
img: https://bing.ee123.net/img/rand?artid=146187263
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     mysql索引机制深度剖析
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <h2 id="%E5%BC%95%E8%A8%80" name="%E5%BC%95%E8%A8%80" style="background-color:transparent">
     引言
    </h2>
    <p>
     本文将借助mysql的两大常见存储引擎：innnodb和myisam，进行深度的索引机制讲解和剖析。
    </p>
    <h2 id="1.%20%E6%B2%A1%E6%9C%89%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E6%9C%89%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98" name="1.%20%E6%B2%A1%E6%9C%89%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E6%9C%89%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98">
     <span style="color:#333333">
      <strong>
       1.
      </strong>
     </span>
     <span style="color:#333333">
      <strong>
       没有索引，可能会有什么问题
      </strong>
     </span>
    </h2>
    <p>
    </p>
    <div>
     <span style="color:#333333">
      索引：提高数据库的性能，索引是物美价廉的东西了。不用加内存，不用改程序，不用调
     </span>
     <span style="color:#333333">
      sql，只要执行正确的
     </span>
     <span style="color:#333333">
      create index ，查询速度就可能提高成百上千倍。但是天下没有免费的午餐，查询速度的提高是以插入、更新、删除的速度为代价的，这些写操作，增加了大量的
     </span>
     <span style="color:#333333">
      IO。所以它的价值，在于提高一个海量数据的检索速度。
     </span>
    </div>
    <div>
    </div>
    <div>
     <strong>
      <span style="color:#333333">
       常见索引分为：
      </span>
     </strong>
    </div>
    <div>
     <strong>
      <span style="color:#333333">
       主键索引
      </span>
      <span style="color:#333333">
       (primary key)
      </span>
     </strong>
    </div>
    <div>
     <strong>
      <span style="color:#333333">
       唯一索引
      </span>
      <span style="color:#333333">
       (unique)
      </span>
     </strong>
    </div>
    <div>
     <strong>
      <span style="color:#333333">
       普通索引
      </span>
      <span style="color:#333333">
       (index)
      </span>
     </strong>
    </div>
    <div>
     <strong>
      <span style="color:#333333">
       全文索引
      </span>
      <span style="color:#333333">
       (fulltext)
      </span>
     </strong>
    </div>
    <div>
    </div>
    <div>
     <div>
      <span style="color:#333333">
       案例：
      </span>
     </div>
     <div>
      <span style="color:#333333">
       先整一个海量表，在查询的时候，看看没有索引时有什么问题？
      </span>
     </div>
     <div>
     </div>
     <div>
      <pre><code class="language-sql">--构建一个8000000条记录的数据
--构建的海量表数据需要有差异性，所以使用存储过程来创建， 拷贝下面代码就可以了，暂时不用理解
-- 产生随机字符串
delimiter $$
create function rand_string(n INT)
returns varchar(255)
begin
declare chars_str varchar(100) default
'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';
declare return_str varchar(255) default '';
declare i int default 0;
while i &lt; n do
set return_str =concat(return_str,substring(chars_str,floor(1+rand()*52),1));
set i = i + 1;
end while;
return return_str;
end $$
delimiter ;
--产生随机数字
delimiter $$
create function rand_num()
returns int(5)
begin
declare i int default 0;
set i = floor(10+rand()*500);
return i;
end $$
delimiter ;
--创建存储过程，向雇员表添加海量数据
delimiter $$
create procedure insert_emp(in start int(10),in max_num int(10))
begin
declare i int default 0;
set autocommit = 0;
repeat
set i = i + 1;
insert into EMP values ((start+i)
,rand_string(6),'SALESMAN',0001,curdate(),2000,400,rand_num());
until i = max_num
end repeat;
commit;
end $$
delimiter ;
-- 执行存储过程，添加8000000条记录
call insert_emp(100001, 8000000);</code></pre>
      <p>
       <span style="color:#333333">
        到此，已经创建出了海量数据的表了。
       </span>
      </p>
      <div>
       <span style="color:#333333">
        查询员工编号为
       </span>
       <span style="color:#333333">
        998877
       </span>
       <span style="color:#333333">
        的员工
       </span>
      </div>
      <div>
       <span style="color:#770088">
        select
       </span>
       <span style="color:#333333">
        *
       </span>
       <span style="color:#770088">
        from
       </span>
       <span style="color:#333333">
        EMP
       </span>
       <span style="color:#770088">
        where
       </span>
       <span style="color:#333333">
        empno=
       </span>
       <span style="color:#116644">
        998877
       </span>
       <span style="color:#333333">
        ;
       </span>
      </div>
      <div>
      </div>
      <div>
       <div>
        <span style="color:#333333">
         可以看到耗时
        </span>
        <span style="color:#333333">
         4.93
        </span>
        <span style="color:#333333">
         秒，这还是在本机一个人来操作，在实际项目中，如果放在公网中，假如同时有
        </span>
       </div>
       <div>
        <span style="color:#333333">
         1000
        </span>
        <span style="color:#333333">
         个人并发查询，那很可能就死机。
        </span>
       </div>
       <div>
       </div>
       <div>
        <div>
         <span style="color:#333333">
          解决方法，创建索引
         </span>
        </div>
        <div>
         <div>
          <span style="color:#770088">
           alter table
          </span>
          <span style="color:#333333">
           EMP add index(empno);
          </span>
         </div>
         <div>
         </div>
         <div>
          <div>
           <span style="color:#333333">
            换一个员工编号，测试看看查询时间
           </span>
          </div>
          <div>
           <div>
            <span style="color:#770088">
             select
            </span>
            <span style="color:#333333">
             *
            </span>
            <span style="color:#770088">
             from
            </span>
            <span style="color:#333333">
             EMP
            </span>
            <span style="color:#770088">
             where
            </span>
            <span style="color:#333333">
             empno=
            </span>
            <span style="color:#116644">
             123456
            </span>
            <span style="color:#333333">
             ;
            </span>
           </div>
           <div>
           </div>
           <div>
            发现数据1s之内就可以完成筛查。
           </div>
           <div>
           </div>
           <div>
           </div>
           <div>
            <h2 id="2.%20%E8%AE%A4%E8%AF%86%E7%A3%81%E7%9B%98" name="2.%20%E8%AE%A4%E8%AF%86%E7%A3%81%E7%9B%98">
             <span style="color:#333333">
              <strong>
               2.
              </strong>
             </span>
             <span style="color:#333333">
              <strong>
               认识磁盘
              </strong>
             </span>
            </h2>
            <p>
            </p>
            <div>
             <span style="color:#333333">
              <strong>
               MySQL
              </strong>
             </span>
             <span style="color:#333333">
              <strong>
               与存储
              </strong>
             </span>
            </div>
            <div>
             <span style="color:#333333">
              MySQL 给用户提供存储服务，而存储的都是数据，数据在磁盘这个外设当中。磁盘是计算机中的一个机械设备，相比于计算机其他电子元件，磁盘效率是比较低的，在加上
             </span>
             <span style="color:#333333">
              IO本身的特征，可以知道，如何提交效率，是
             </span>
             <span style="color:#333333">
              MySQL
             </span>
             <span style="color:#333333">
              的一个重要话题。
             </span>
            </div>
            <div>
             <span style="color:#333333">
              <strong>
               先来研究一下磁盘：
              </strong>
             </span>
            </div>
           </div>
           <div>
            <img alt="" height="364" src="https://i-blog.csdnimg.cn/direct/ac058ca2913d4216a9d9f87979cbd5dd.png" width="478">
            </img>
           </div>
           <div>
           </div>
           <div>
            <div>
             <span style="color:#333333">
              <strong>
               在看看磁盘中一个盘片
              </strong>
             </span>
            </div>
            <div>
             <img alt="" height="466" src="https://i-blog.csdnimg.cn/direct/94ab1d1e9fc741ca932ac6594472170f.png" width="807">
             </img>
            </div>
            <div>
            </div>
            <div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
    <p>
    </p>
    <div>
     <span style="color:#333333">
      <strong>
       扇区
      </strong>
     </span>
    </div>
    <div>
     <span style="color:#333333">
      数据库文件，本质其实就是保存在磁盘的盘片当中。也就是上面的一个个小格子中，就是我们经常所说的扇区。当然，数据库文件很大，也很多，一定需要占据多个扇区。
     </span>
    </div>
    <div>
     <span style="color:#333333">
      题外话：
     </span>
    </div>
    <div>
     <span style="color:#333333">
      从上图可以看出来，在半径方向上，距离圆心越近，扇区越小，距离圆心越远，扇区越大
     </span>
    </div>
    <div>
     <span style="color:#333333">
      那么，所有扇区都是默认
     </span>
     <span style="color:#333333">
      512
     </span>
     <span style="color:#333333">
      字节吗？目前是的，我们也这样认为。因为保证一个扇区多大，是由
     </span>
    </div>
    <div>
     <span style="color:#333333">
      比特位密度决定的。不过最新的磁盘技术，已经慢慢的让扇区大小不同了，不过我们现在暂时不考虑。我们在使用
     </span>
     <span style="color:#333333">
      Linux
     </span>
     <span style="color:#333333">
      ，所看到的大部分目录或者文件，其实就是保存在硬盘当中的。
     </span>
     <span style="color:#333333">
      (当然，有一些内存文件系统，如：
     </span>
     <span style="color:#333333">
      proc
     </span>
     <span style="color:#333333">
      ，
     </span>
     <span style="color:#333333">
      sys
     </span>
     <span style="color:#333333">
      之类，我们不考虑
     </span>
     <span style="color:#333333">
      )
     </span>
    </div>
    <div>
    </div>
    <div>
     <pre><code class="language-bash">#数据库文件，本质其实就是保存在磁盘的盘片当中，就是一个一个的文件
[root@VM-0-3-centos ~]# ls /var/lib/mysql -l #我们目前MySQL中的文件
total 319592
drwxr-x--- 2 mysql mysql 4096 Apr 15 21:46 57test
-rw-r----- 1 mysql mysql 56 Apr 12 15:27 auto.cnf
drwxr-x--- 2 mysql mysql 4096 May 17 13:52 bit_index
-rw------- 1 mysql mysql 1676 Apr 12 15:27 ca-key.pem
-rw-r--r-- 1 mysql mysql 1112 Apr 12 15:27 ca.pem
drwx------ 2 mysql mysql 4096 Apr 13 21:26 ccdata_pro
-rw-r--r-- 1 mysql mysql 1112 Apr 12 15:27 client-cert.pem
-rw------- 1 mysql mysql 1680 Apr 12 15:27 client-key.pem
-rw-r----- 1 mysql mysql 16958 Jun 8 15:46 ib_buffer_pool
-rw-r----- 1 mysql mysql 213909504 Jun 8 16:02 ibdata1
-rw-r----- 1 mysql mysql 50331648 Jun 8 16:02 ib_logfile0
-rw-r----- 1 mysql mysql 50331648 Jun 8 16:02 ib_logfile1
-rw-r----- 1 mysql mysql 12582912 Jun 8 15:46 ibtmp1
drwxr-x--- 2 mysql mysql 4096 Apr 28 14:11 musicserver
drwxr-x--- 2 mysql mysql 4096 May 9 09:47 mysql
srwxrwxrwx 1 mysql mysql 0 Jun 8 15:46 mysql.sock
-rw------- 1 mysql mysql 5 Jun 8 15:46 mysql.sock.lock
drwxr-x--- 2 mysql mysql 4096 Apr 12 15:27 performance_schema
-rw------- 1 mysql mysql 1676 Apr 12 15:27 private_key.pem
-rw-r--r-- 1 mysql mysql 452 Apr 12 15:27 public_key.pem
drwxr-x--- 2 mysql mysql 4096 May 9 09:46 scott
-rw-r--r-- 1 mysql mysql 1112 Apr 12 15:27 server-cert.pem
-rw------- 1 mysql mysql 1676 Apr 12 15:27 server-key.pem
drwxr-x--- 2 mysql mysql 12288 Apr 12 15:27 sys
drwxr-x--- 2 mysql mysql 4096 Jun 5 17:13 test # 自己定义的数据库，里面有数据</code></pre>
     <div>
      <span style="color:#333333">
       所以，最基本的，找到一个文件的全部，本质，就是在磁盘找到所有保存文件的扇区。
      </span>
     </div>
     <div>
      <span style="color:#333333">
       而我们能够定位任何一个扇区，那么便能找到所有扇区，因为查找方式是一样的。
      </span>
     </div>
     <div>
      <span style="color:#333333">
       <strong>
        定位扇区
       </strong>
      </span>
     </div>
     <div>
      <img alt="" height="361" src="https://i-blog.csdnimg.cn/direct/20f60347deb4414b9ae8b6f28ac75390.png" width="631">
      </img>
     </div>
     <div>
      <div>
       <span style="color:#333333">
        柱面
       </span>
       <span style="color:#333333">
        (
       </span>
       <span style="color:#333333">
        磁道
       </span>
       <span style="color:#333333">
        ): 多盘磁盘，每盘都是双面，大小完全相等。那么同半径的磁道，整体上便构成了一个柱面
       </span>
      </div>
      <div>
      </div>
      <div>
       <div>
        <span style="color:#333333">
         每个盘面都有一个磁头，那么磁头和盘面的对应关系便是
        </span>
        <span style="color:#333333">
         1
        </span>
        <span style="color:#333333">
         对
        </span>
        <span style="color:#333333">
         1
        </span>
        <span style="color:#333333">
         的
        </span>
       </div>
       <div>
       </div>
       <div>
        <span style="color:#333333">
         所以，我们只需要知道，磁头（
        </span>
        <span style="color:#333333">
         Heads
        </span>
        <span style="color:#333333">
         ）、柱面
        </span>
        <span style="color:#333333">
         (Cylinder)(
        </span>
        <span style="color:#333333">
         等价于磁道
        </span>
        <span style="color:#333333">
         )
        </span>
        <span style="color:#333333">
         、扇区
        </span>
        <span style="color:#333333">
         (Sector)
        </span>
        <span style="color:#333333">
         对应的编
        </span>
       </div>
       <div>
        <span style="color:#333333">
         号。即可在磁盘上定位所要访问的扇区。这种磁盘数据定位方式叫做
        </span>
        <span style="color:#333333">
         CHS 。不过实际系统软件使用的并不是
        </span>
        <span style="color:#333333">
         CHS
        </span>
        <span style="color:#333333">
         （但是硬件是），而是
        </span>
        <span style="color:#333333">
         LBA ，一种线性地址，可以想象成虚拟地址与物理地址。系统将
        </span>
        <span style="color:#333333">
         LBA
        </span>
        <span style="color:#333333">
         地址最后会转化成为
        </span>
        <span style="color:#333333">
         CHS ，交给磁盘去进行数据读取。不过，我们现在不关心转化细节，知道这个东西，让我们逻辑自洽起来即可。
        </span>
       </div>
       <div>
       </div>
       <div>
        <div>
         <span style="color:#333333">
          <strong>
           结论
          </strong>
         </span>
        </div>
        <div>
         <div>
          <span style="color:#333333">
           我们现在已经能够在硬件层面定位，任何一个基本数据块了
          </span>
          <span style="color:#333333">
           (
          </span>
          <span style="color:#333333">
           扇区
          </span>
          <span style="color:#333333">
           )。那么在系统软件上，就直接按照扇区(512
          </span>
          <span style="color:#333333">
           字节，部分
          </span>
          <span style="color:#333333">
           4096
          </span>
          <span style="color:#333333">
           字节
          </span>
          <span style="color:#333333">
           ),
          </span>
          <span style="color:#333333">
           进行
          </span>
          <span style="color:#333333">
           IO
          </span>
          <span style="color:#333333">
           交互吗？不是
          </span>
         </div>
         <div>
          <span style="color:#333333">
           如果操作系统直接使用硬件提供的数据大小进行交互，那么系统的
          </span>
          <span style="color:#333333">
           IO
          </span>
          <span style="color:#333333">
           代码，就和硬件强相关，换言
          </span>
         </div>
         <div>
          <span style="color:#333333">
           之，如果硬件发生变化，系统必须跟着变化
          </span>
         </div>
         <div>
          <span style="color:#333333">
           从目前来看，单次
          </span>
          <span style="color:#333333">
           IO 512
          </span>
          <span style="color:#333333">
           字节，还是太小了。
          </span>
          <strong>
           <span style="color:#333333">
            IO
           </span>
           <span style="color:#333333">
            单位小，意味着读取同样的数据内容，需要进行多
           </span>
          </strong>
         </div>
         <div>
          <strong>
           <span style="color:#333333">
            次磁盘访问，会带来效率的降低。
           </span>
          </strong>
         </div>
         <div>
          <span style="color:#333333">
           之前学习文件系统，就是在磁盘的基本结构下建立的，文件系统读取基本单位，就不是扇区，而是
          </span>
         </div>
         <div>
          <span style="color:#333333">
           数据块。
           <strong>
            故，系统读取磁盘，是以块为单位的，基本单位是
           </strong>
          </span>
          <strong>
           <span style="color:#333333">
            4KB
           </span>
          </strong>
          <span style="color:#333333">
           。
          </span>
         </div>
         <div>
         </div>
         <div>
          <div>
           <span style="color:#333333">
            <strong>
             磁盘随机访问
            </strong>
           </span>
           <span style="color:#333333">
            <strong>
             (Random Access)
            </strong>
           </span>
           <span style="color:#333333">
            <strong>
             与连续访问
            </strong>
           </span>
           <span style="color:#333333">
            <strong>
             (Sequential Access)
            </strong>
           </span>
          </div>
          <div>
           <div>
            <span style="color:#333333">
             随机访问：本次
            </span>
            <span style="color:#333333">
             IO
            </span>
            <span style="color:#333333">
             所给出的扇区地址和上次
            </span>
            <span style="color:#333333">
             IO
            </span>
            <span style="color:#333333">
             给出扇区地址不连续，这样的话磁头在两次
            </span>
            <span style="color:#333333">
             IO操作之间需要作比较大的移动动作才能重新开始读
            </span>
            <span style="color:#333333">
             /
            </span>
            <span style="color:#333333">
             写数据。
            </span>
           </div>
           <div>
           </div>
           <div>
            <span style="color:#333333">
             连续访问：如果当次
            </span>
            <span style="color:#333333">
             IO
            </span>
            <span style="color:#333333">
             给出的扇区地址与上次
            </span>
            <span style="color:#333333">
             IO结束的扇区地址是连续的，那磁头就能很快的开始这次IO
            </span>
            <span style="color:#333333">
             操作，这样的多个
            </span>
            <span style="color:#333333">
             IO
            </span>
            <span style="color:#333333">
             操作称为连续访问。
            </span>
           </div>
           <div>
            <span style="color:#333333">
             因此尽管相邻的两次
            </span>
            <span style="color:#333333">
             IO操作在同一时刻发出，但如果它们的请求的扇区地址相差很大的话也只能称为随机访问，而非连续访问。
            </span>
           </div>
           <div>
           </div>
           <div>
           </div>
           <h2 id="3.%20MySQL%20%E4%B8%8E%E7%A3%81%E7%9B%98%E4%BA%A4%E4%BA%92%E5%9F%BA%E6%9C%AC%E5%8D%95%E4%BD%8D" name="3.%20MySQL%20%E4%B8%8E%E7%A3%81%E7%9B%98%E4%BA%A4%E4%BA%92%E5%9F%BA%E6%9C%AC%E5%8D%95%E4%BD%8D">
            <span style="color:#333333">
             <strong>
              3.
             </strong>
            </span>
            <span style="color:#333333">
             MySQL
            </span>
            <span style="color:#333333">
             <strong>
              与磁盘交互基本单位
             </strong>
            </span>
           </h2>
           <div>
            <span style="color:#333333">
             而
            </span>
            <span style="color:#333333">
             MySQL
            </span>
            <span style="color:#333333">
             作为一款应用软件，可以想象成一种特殊的文件系统。它有着更高的
            </span>
            <span style="color:#333333">
             IO场景，所以，为了提高基本的
            </span>
            <span style="color:#333333">
             IO
            </span>
            <span style="color:#333333">
             效率，
            </span>
            <span style="color:#333333">
             MySQL
            </span>
            <span style="color:#333333">
             进行
            </span>
            <span style="color:#333333">
             IO
            </span>
            <span style="color:#333333">
             的基本单位是
            </span>
            <span style="color:#333333">
             16KB
            </span>
            <span style="color:#333333">
             (
            </span>
            <span style="color:#333333">
             后面统一使用
            </span>
            <span style="color:#333333">
             InnoDB
            </span>
            <span style="color:#333333">
             存储引擎讲解）
            </span>
           </div>
           <div>
           </div>
           <div>
            <pre><code class="language-sql">mysql&gt; SHOW GLOBAL STATUS LIKE 'innodb_page_size';
+------------------+-------+
| Variable_name | Value |
+------------------+-------+
| Innodb_page_size | 16384 | -- 16*1024=16384
+------------------+-------+
1 row in set (0.01 sec)</code></pre>
            <div>
             <span style="color:#333333">
              也就是说，磁盘这个硬件设备的基本单位是
             </span>
             <span style="color:#333333">
              512
             </span>
             <span style="color:#333333">
              字节，而
             </span>
             <span style="color:#333333">
              MySQL InnoDB
             </span>
             <span style="color:#333333">
              引擎
             </span>
             <span style="color:#333333">
              使用
             </span>
             <span style="color:#333333">
              16KB
             </span>
             <span style="color:#333333">
              进行
             </span>
             <span style="color:#333333">
              IO交互。即，
             </span>
             <span style="color:#333333">
              MySQL
             </span>
             <span style="color:#333333">
              和磁盘进行数据交互的基本单位是
             </span>
             <span style="color:#333333">
              16KB
             </span>
             <span style="color:#333333">
              。这个基本数据单元，在
             </span>
             <span style="color:#333333">
              MySQL
             </span>
             <span style="color:#333333">
              这里叫做
             </span>
             <span style="color:#333333">
              page（注意和系统的
             </span>
             <span style="color:#333333">
              page
             </span>
             <span style="color:#333333">
              区分）.
             </span>
            </div>
            <div>
            </div>
            <div>
             <h2 id="4.%20%E5%BB%BA%E7%AB%8B%E5%85%B1%E8%AF%86" name="4.%20%E5%BB%BA%E7%AB%8B%E5%85%B1%E8%AF%86">
              <span style="color:#333333">
               <strong>
                4.
               </strong>
              </span>
              <span style="color:#333333">
               <strong>
                建立共识
               </strong>
              </span>
             </h2>
             <div>
              <span style="color:#333333">
               MySQL
              </span>
              <span style="color:#333333">
               中的数据文件，是以
              </span>
              <span style="color:#333333">
               page
              </span>
              <span style="color:#333333">
               为单位保存在磁盘当中的。
              </span>
             </div>
             <div>
              <span style="color:#333333">
               MySQL
              </span>
              <span style="color:#333333">
               的
              </span>
              <span style="color:#333333">
               CURD
              </span>
              <span style="color:#333333">
               操作，都需要通过
              </span>
              <span style="color:#333333">
               <strong>
                计算
               </strong>
               ，找到对应的插入位置，或者找到对应要修改或者查询的数据。
              </span>
             </div>
             <div>
              <span style="color:#333333">
               而只要涉及计算，就需要
              </span>
              <span style="color:#333333">
               CPU
              </span>
              <span style="color:#333333">
               参与，而为了便于
              </span>
              <span style="color:#333333">
               CPU参与，一定要能够先将数据移动到内存当中。
              </span>
             </div>
             <div>
              <span style="color:#333333">
               所以在特定时间内，数据一定是磁盘中有，内存中也有。后续操作完内存数据之后，以特定的刷新
              </span>
             </div>
             <div>
              <span style="color:#333333">
               策略，刷新到磁盘。而这时，就涉及到磁盘和内存的数据交互，也就是
              </span>
              <span style="color:#333333">
               IO
              </span>
              <span style="color:#333333">
               了。而此时
              </span>
              <span style="color:#333333">
               IO
              </span>
              <span style="color:#333333">
               的基本单位
              </span>
             </div>
             <div>
              <span style="color:#333333">
               就是
              </span>
              <span style="color:#333333">
               Page
              </span>
              <span style="color:#333333">
               。
               <strong>
                （这是基于局部性原理的优化方案）
               </strong>
              </span>
             </div>
             <div>
              <span style="color:#333333">
               为了更好的进行上面的操作，
              </span>
              <span style="color:#333333">
               MySQL
              </span>
              <span style="color:#333333">
               服务器在内存中运行的时候，在服务器内部，就申请了被称
              </span>
             </div>
             <div>
              <span style="color:#333333">
               为
              </span>
              <span style="color:#333333">
               Buffer Pool
              </span>
              <span style="color:#333333">
               的的大内存空间，来进行各种缓存。其实就是很大的内存空间，来和磁盘数据进
              </span>
             </div>
             <div>
              <span style="color:#333333">
               行
              </span>
              <span style="color:#333333">
               IO
              </span>
              <span style="color:#333333">
               交互。
              </span>
             </div>
             <div>
              <span style="color:#333333">
               为何更高的效率，一定要尽可能的减少系统和磁盘
              </span>
              <span style="color:#333333">
               IO
              </span>
              <span style="color:#333333">
               的次数
              </span>
             </div>
             <div>
             </div>
             <div>
              <h2 id="5.%20%E7%B4%A2%E5%BC%95%E7%9A%84%E7%90%86%E8%A7%A3" name="5.%20%E7%B4%A2%E5%BC%95%E7%9A%84%E7%90%86%E8%A7%A3">
               <span style="color:#333333">
                <strong>
                 5.
                </strong>
               </span>
               <span style="color:#333333">
                <strong>
                 索引的理解
                </strong>
               </span>
              </h2>
              <p>
               <span style="color:#333333">
                <strong>
                 建立测试表
                </strong>
               </span>
              </p>
              <div>
               <span style="color:#770088">
                create table
               </span>
               <span style="color:#333333">
                if
               </span>
               <span style="color:#770088">
                not
               </span>
               <span style="color:#333333">
                exists user (
               </span>
              </div>
              <div>
               <span style="color:#333333">
                id
               </span>
               <span style="color:#3300aa">
                int
               </span>
               <span style="color:#333333">
                primary key,
               </span>
               <span style="color:#aa5500">
                --
               </span>
               <span style="color:#aa5500">
                一定要添加主键哦，只有这样才会默认生成主键索引
               </span>
              </div>
              <div>
               <span style="color:#333333">
                age
               </span>
               <span style="color:#3300aa">
                int
               </span>
               <span style="color:#770088">
                not
               </span>
               <span style="color:#221199">
                null
               </span>
               <span style="color:#333333">
                ,
               </span>
              </div>
              <div>
               <span style="color:#333333">
                name
               </span>
               <span style="color:#3300aa">
                varchar
               </span>
               <span style="color:#333333">
                (
               </span>
               <span style="color:#116644">
                16
               </span>
               <span style="color:#333333">
                )
               </span>
               <span style="color:#770088">
                not
               </span>
               <span style="color:#221199">
                null
               </span>
              </div>
              <div>
               <span style="color:#333333">
                );
               </span>
              </div>
              <div>
               <span style="color:#333333">
                mysql&gt; show
               </span>
               <span style="color:#770088">
                create table
               </span>
               <span style="color:#333333">
                user \G
               </span>
              </div>
              <div>
               <span style="color:#333333">
                ***************************
               </span>
               <span style="color:#116644">
                1
               </span>
               <span style="color:#333333">
                . row ***************************
               </span>
              </div>
              <div>
               <span style="color:#770088">
                Table
               </span>
               <span style="color:#333333">
                : user
               </span>
              </div>
              <div>
               <span style="color:#770088">
                Create Table
               </span>
               <span style="color:#333333">
                :
               </span>
               <span style="color:#770088">
                CREATE TABLE
               </span>
               <span style="color:#333333">
                `user` (
               </span>
              </div>
              <div>
               <span style="color:#333333">
                `id`
               </span>
               <span style="color:#3300aa">
                int
               </span>
               <span style="color:#333333">
                (
               </span>
               <span style="color:#116644">
                11
               </span>
               <span style="color:#333333">
                )
               </span>
               <span style="color:#770088">
                NOT
               </span>
               <span style="color:#221199">
                NULL
               </span>
               <span style="color:#333333">
                ,
               </span>
              </div>
              <div>
               <span style="color:#333333">
                `age`
               </span>
               <span style="color:#3300aa">
                int
               </span>
               <span style="color:#333333">
                (
               </span>
               <span style="color:#116644">
                11
               </span>
               <span style="color:#333333">
                )
               </span>
               <span style="color:#770088">
                NOT
               </span>
               <span style="color:#221199">
                NULL
               </span>
               <span style="color:#333333">
                ,
               </span>
              </div>
              <div>
               <span style="color:#333333">
                `name`
               </span>
               <span style="color:#3300aa">
                varchar
               </span>
               <span style="color:#333333">
                (
               </span>
               <span style="color:#116644">
                16
               </span>
               <span style="color:#333333">
                )
               </span>
               <span style="color:#770088">
                NOT
               </span>
               <span style="color:#221199">
                NULL
               </span>
               <span style="color:#333333">
                ,
               </span>
              </div>
              <div>
               <span style="color:#333333">
                PRIMARY KEY (`id`)
               </span>
              </div>
              <div>
               <span style="color:#333333">
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8
               </span>
               <span style="color:#aa5500">
                --
               </span>
               <span style="color:#aa5500">
                默认就是
               </span>
               <span style="color:#aa5500">
                InnoDB
               </span>
               <span style="color:#aa5500">
                存储引擎
               </span>
              </div>
              <div>
               <span style="color:#116644">
                1
               </span>
               <span style="color:#333333">
                row
               </span>
               <span style="color:#770088">
                in set
               </span>
               <span style="color:#333333">
                (
               </span>
               <span style="color:#116644">
                0.00
               </span>
               <span style="color:#333333">
                sec)
               </span>
              </div>
              <div>
              </div>
              <div>
               <span style="color:#333333">
                <strong>
                 插入多条记录
                </strong>
               </span>
               <pre><code class="language-sql">--插入多条记录，注意，我们并没有按照主键的大小顺序插入哦
mysql&gt; insert into user (id, age, name) values(3, 18, '杨过');
Query OK, 1 row affected (0.01 sec)
mysql&gt; insert into user (id, age, name) values(4, 16, '小龙女');
Query OK, 1 row affected (0.00 sec)
mysql&gt; insert into user (id, age, name) values(2, 26, '黄蓉');
Query OK, 1 row affected (0.01 sec)
mysql&gt; insert into user (id, age, name) values(5, 36, '郭靖');
Query OK, 1 row affected (0.00 sec)
mysql&gt; insert into user (id, age, name) values(1, 56, '欧阳锋');
Query OK, 1 row affected (0.00 sec)</code></pre>
               <p>
               </p>
               <div>
                <span style="color:#333333">
                 <strong>
                  查看插入结果
                 </strong>
                </span>
               </div>
               <div>
               </div>
               <div>
                <img alt="" height="484" src="https://i-blog.csdnimg.cn/direct/abf511ef15bc46b1ac2955c38f8cdbc5.png" width="1294">
                </img>
               </div>
               <div>
               </div>
               <div>
                <div>
                 <span style="color:#333333">
                  <strong>
                   中断一下
                  </strong>
                 </span>
                 <span style="color:#333333">
                  <strong>
                   ---
                  </strong>
                 </span>
                 <span style="color:#333333">
                  <strong>
                   为何
                  </strong>
                 </span>
                 <span style="color:#333333">
                  <strong>
                   IO
                  </strong>
                 </span>
                 <span style="color:#333333">
                  <strong>
                   交互要是
                  </strong>
                 </span>
                 <span style="color:#333333">
                  Page
                 </span>
                </div>
                <div>
                 <div>
                  <span style="color:#333333">
                   为何
                  </span>
                  <span style="color:#333333">
                   MySQL
                  </span>
                  <span style="color:#333333">
                   和磁盘进行
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   交互的时候，要采用
                  </span>
                  <span style="color:#333333">
                   Page
                  </span>
                  <span style="color:#333333">
                   的方案进行交互呢
                  </span>
                  <span style="color:#333333">
                   ?
                  </span>
                  <span style="color:#333333">
                   用多少，加载多少不香吗
                  </span>
                  <span style="color:#333333">
                   ?
                  </span>
                 </div>
                 <div>
                  <span style="color:#333333">
                   如上面的
                  </span>
                  <span style="color:#333333">
                   5
                  </span>
                  <span style="color:#333333">
                   条记录，如果
                  </span>
                  <span style="color:#333333">
                   MySQL
                  </span>
                  <span style="color:#333333">
                   要查找
                  </span>
                  <span style="color:#333333">
                   id=2
                  </span>
                  <span style="color:#333333">
                   的记录，第一次加载
                  </span>
                  <span style="color:#333333">
                   id=1
                  </span>
                  <span style="color:#333333">
                   ，第二次加载
                  </span>
                  <span style="color:#333333">
                   id=2，一次一条记录，那么就需要
                  </span>
                  <span style="color:#333333">
                   2
                  </span>
                  <span style="color:#333333">
                   次
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   。如果要找
                  </span>
                  <span style="color:#333333">
                   id=5
                  </span>
                  <span style="color:#333333">
                   ，那么就需要
                  </span>
                  <span style="color:#333333">
                   5
                  </span>
                  <span style="color:#333333">
                   次
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   。
                  </span>
                 </div>
                 <div>
                  <span style="color:#333333">
                   但，如果这
                  </span>
                  <span style="color:#333333">
                   5
                  </span>
                  <span style="color:#333333">
                   条
                  </span>
                  <span style="color:#333333">
                   (
                  </span>
                  <span style="color:#333333">
                   或者更多
                  </span>
                  <span style="color:#333333">
                   )
                  </span>
                  <span style="color:#333333">
                   都被保存在一个
                  </span>
                  <span style="color:#333333">
                   Page
                  </span>
                  <span style="color:#333333">
                   中
                  </span>
                  <span style="color:#333333">
                   (16KB
                  </span>
                  <span style="color:#333333">
                   ，能保存很多记录
                  </span>
                  <span style="color:#333333">
                   ),
                  </span>
                  <span style="color:#333333">
                   那么第一次
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   查找
                  </span>
                  <span style="color:#333333">
                   id=2的时候，整个
                  </span>
                  <span style="color:#333333">
                   Page
                  </span>
                  <span style="color:#333333">
                   会被加载到
                  </span>
                  <span style="color:#333333">
                   MySQL
                  </span>
                  <span style="color:#333333">
                   的
                  </span>
                  <span style="color:#333333">
                   Buffer Pool
                  </span>
                  <span style="color:#333333">
                   中，这里完成了一次
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   。但是往后如果在查找id=1,3,4,5等，完全不需要进行
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   了，而是直接在内存中进行了。所以，就在单
                  </span>
                  <span style="color:#333333">
                   Page
                  </span>
                  <span style="color:#333333">
                   里面，大大减少了
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   的次数。
                  </span>
                 </div>
                 <div>
                  <span style="color:#333333">
                   你怎么保证，用户一定下次找的数据，就在这个
                  </span>
                  <span style="color:#333333">
                   Page里面？我们不能严格保证，但是有很大概率，因为有局部性原理。
                  </span>
                 </div>
                 <div>
                  <span style="color:#333333">
                   往往
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   效率低下的最主要矛盾不是
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   单次数据量的大小，而是
                  </span>
                  <span style="color:#333333">
                   IO
                  </span>
                  <span style="color:#333333">
                   的次数。
                  </span>
                 </div>
                 <div>
                 </div>
                 <div>
                  <div>
                   <span style="color:#333333">
                    <strong>
                     理解单个
                    </strong>
                   </span>
                   <span style="color:#333333">
                    <strong>
                     Page
                    </strong>
                   </span>
                  </div>
                  <div>
                   <div>
                    <span style="color:#333333">
                     MySQL
                    </span>
                    <span style="color:#333333">
                     中要管理很多数据表文件，而要管理好这些文件，就需要
                    </span>
                    <span style="color:#333333">
                     先描述，在组织
                    </span>
                    <span style="color:#333333">
                     ,我们目前可以简单理解成一个个独立文件是有一个或者多个
                    </span>
                    <span style="color:#333333">
                     Page
                    </span>
                    <span style="color:#333333">
                     构成的。
                    </span>
                   </div>
                   <div>
                   </div>
                   <div>
                    <img alt="" height="783" src="https://i-blog.csdnimg.cn/direct/138f5888348d416e8aeb6e3312a532f3.png" width="576">
                    </img>
                   </div>
                   <div>
                   </div>
                   <div>
                    <div>
                     <span style="color:#333333">
                      不同的
                     </span>
                     <span style="color:#333333">
                      Page
                     </span>
                     <span style="color:#333333">
                      ，在
                     </span>
                     <span style="color:#333333">
                      MySQL
                     </span>
                     <span style="color:#333333">
                      中，都是
                     </span>
                     <span style="color:#333333">
                      16KB
                     </span>
                     <span style="color:#333333">
                      ，使用
                     </span>
                     <span style="color:#333333">
                      prev
                     </span>
                     <span style="color:#333333">
                      和
                     </span>
                     <span style="color:#333333">
                      next
                     </span>
                     <span style="color:#333333">
                      构成双向链表
                     </span>
                    </div>
                    <div>
                     <span style="color:#333333">
                      因为有主键的问题，
                     </span>
                     <span style="color:#333333">
                      MySQL
                     </span>
                     <span style="color:#333333">
                      会默认按照主键给我们的数据进行排序，从上面的
                     </span>
                     <span style="color:#333333">
                      Page内数据记录可以看出，数据是有序且彼此关联的。
                     </span>
                    </div>
                    <div>
                    </div>
                    <div>
                     <div>
                      <span style="color:#000000">
                       为什么数据库在插入数据时要对其进行排序呢？我们按正常顺序插入数据不是也挺好的吗？
                      </span>
                     </div>
                     <div>
                      <span style="color:#000000">
                       插入数据时排序的目的，就是优化查询的效率。
                      </span>
                     </div>
                     <div>
                      <span style="color:#000000">
                       页内部存放数据的模块，实质上也是一个链表的结构，链表的特点也就是增删快，查询修改慢，所以优化查询的效率是必须的。
                      </span>
                     </div>
                     <div>
                      <span style="color:#000000">
                       正式因为有序，在查找的时候，从头到后都是有效查找，没有任何一个查找是浪费的，而且，如果运气好，是可以提前结束查找过程的。
                      </span>
                     </div>
                     <div>
                     </div>
                     <div>
                      <span style="color:#000000">
                       <strong>
                        所以索引的核心是空间换时间！
                       </strong>
                      </span>
                     </div>
                     <div>
                     </div>
                     <div>
                      <div>
                       <span style="color:#333333">
                        <strong>
                         理解多个
                        </strong>
                       </span>
                       <span style="color:#333333">
                        <strong>
                         Page
                        </strong>
                       </span>
                      </div>
                      <div>
                       <span style="color:#333333">
                        通过上面的分析，我们知道，上面页模式中，只有一个功能，就是
                       </span>
                       <span style="color:#333333">
                        <strong>
                         在查询某条数据的时候直接将一
                        </strong>
                       </span>
                      </div>
                      <div>
                       <span style="color:#333333">
                        <strong>
                         整页的数据加载到内存中，以减少硬盘
                        </strong>
                       </span>
                       <span style="color:#333333">
                        <strong>
                         IO
                        </strong>
                       </span>
                       <span style="color:#333333">
                        <strong>
                         次数，从而提高性能。
                        </strong>
                       </span>
                       <span style="color:#333333">
                        但是，我们也可以看到，现在的页
                       </span>
                      </div>
                      <div>
                       <span style="color:#333333">
                        模式内部，实际上是采用了链表的结构，前一条数据指向后一条数据，本质上还是通过数据的逐条
                       </span>
                      </div>
                      <div>
                       <span style="color:#333333">
                        比较来取出特定的数据。
                       </span>
                      </div>
                      <div>
                       <span style="color:#333333">
                        如果有
                       </span>
                       <span style="color:#333333">
                        1
                       </span>
                       <span style="color:#333333">
                        千万条数据，一定需要多个
                       </span>
                       <span style="color:#333333">
                        Page
                       </span>
                       <span style="color:#333333">
                        来保存
                       </span>
                       <span style="color:#333333">
                        1
                       </span>
                       <span style="color:#333333">
                        千万条数据，多个
                       </span>
                       <span style="color:#333333">
                        Page
                       </span>
                       <span style="color:#333333">
                        彼此使用双链表链接起
                       </span>
                      </div>
                      <div>
                       <span style="color:#333333">
                        来，而且每个
                       </span>
                       <span style="color:#333333">
                        Page内部的数据也是基于链表的。那么，查找特定一条记录，也一定是线性查找。这效率也太低了。
                       </span>
                      </div>
                      <div>
                      </div>
                      <div>
                       <img alt="" height="532" src="https://i-blog.csdnimg.cn/direct/8d867655e2964aa28c371b221b5fe0d2.png" width="1732">
                       </img>
                      </div>
                      <div>
                      </div>
                      <div>
                       <div>
                        <span style="color:#333333">
                         <strong>
                          页目录
                         </strong>
                        </span>
                       </div>
                       <div>
                        <span style="color:#333333">
                         我们在看《谭浩强
                        </span>
                        <span style="color:#333333">
                         C
                        </span>
                        <span style="color:#333333">
                         程序设计》这本书的时候，如果我们要看
                        </span>
                        <span style="color:#333333">
                         &lt;
                        </span>
                        <span style="color:#333333">
                         指针章节
                        </span>
                        <span style="color:#333333">
                         &gt;
                        </span>
                        <span style="color:#333333">
                         ，找到该章节有两种做法
                        </span>
                       </div>
                       <div>
                        <span style="color:#333333">
                         从头逐页的向后翻，直到找到目标内容。
                        </span>
                       </div>
                       <div>
                        <span style="color:#333333">
                         通过书提供的目录，发现指针章节在
                        </span>
                        <span style="color:#333333">
                         234
                        </span>
                        <span style="color:#333333">
                         页
                        </span>
                        <span style="color:#333333">
                         (
                        </span>
                        <span style="color:#333333">
                         假设
                        </span>
                        <span style="color:#333333">
                         )
                        </span>
                        <span style="color:#333333">
                         ，那么我们便直接翻到
                        </span>
                        <span style="color:#333333">
                         234
                        </span>
                        <span style="color:#333333">
                         页。同时，查找目录的
                        </span>
                       </div>
                       <div>
                        <span style="color:#333333">
                         方案，可以顺序找，不过因为目录肯定少，所以可以快速提高定位
                        </span>
                       </div>
                       <div>
                        <strong>
                         <span style="color:#333333">
                          本质上，书中的目录，是多花了纸张的，但是却提高了效率
                         </span>
                        </strong>
                       </div>
                       <div>
                        <strong>
                         <span style="color:#333333">
                          所以，目录，是一种
                         </span>
                         <span style="color:#333333">
                          “
                         </span>
                         <span style="color:#333333">
                          空间换时间的做法”
                         </span>
                        </strong>
                       </div>
                       <div>
                       </div>
                       <div>
                        <div>
                         <span style="color:#333333">
                          <strong>
                           单页情况
                          </strong>
                         </span>
                        </div>
                        <div>
                         <span style="color:#333333">
                          针对上面的单页
                         </span>
                         <span style="color:#333333">
                          Page
                         </span>
                         <span style="color:#333333">
                          ，我们能否也引入目录呢？当然可以
                         </span>
                        </div>
                        <div>
                         <img alt="" height="340" src="https://i-blog.csdnimg.cn/direct/204380003dee450e8b8d2a4464020d21.png" width="336">
                         </img>
                        </div>
                        <div>
                        </div>
                        <div>
                         <div>
                          <span style="color:#333333">
                           那么当前，在一个
                          </span>
                          <span style="color:#333333">
                           Page
                          </span>
                          <span style="color:#333333">
                           内部，我们引入了目录。比如，我们要查找
                          </span>
                          <span style="color:#333333">
                           id=4
                          </span>
                          <span style="color:#333333">
                           记录，之前必须线性遍历
                          </span>
                          <span style="color:#333333">
                           4次，才能拿到结果。现在直接通过目录
                          </span>
                          <span style="color:#333333">
                           2[3]，直接进行定位新的起始位置，提高了效率。现在我们可以再次正式回答上面的问题了，
                           <strong>
                            为何通过键值
                           </strong>
                          </span>
                          <strong>
                           <span style="color:#333333">
                            MySQL
                           </span>
                           <span style="color:#333333">
                            会自动排序？
                           </span>
                          </strong>
                         </div>
                         <div>
                          <strong>
                           <span style="color:#333333">
                            可以很方便引入目录
                           </span>
                          </strong>
                         </div>
                         <div>
                         </div>
                         <div>
                          <div>
                           <span style="color:#333333">
                            <strong>
                             多页情况
                            </strong>
                           </span>
                          </div>
                          <div>
                           <div>
                            <span style="color:#333333">
                             MySQL
                            </span>
                            <span style="color:#333333">
                             中每一页的大小只有
                            </span>
                            <span style="color:#333333">
                             16KB
                            </span>
                            <span style="color:#333333">
                             ，单个
                            </span>
                            <span style="color:#333333">
                             Page
                            </span>
                            <span style="color:#333333">
                             大小固定，所以随着数据量不断增大，
                            </span>
                            <span style="color:#333333">
                             16KB 不可能存下所有的数据，那么必定会有多个页来存储数据。
                            </span>
                           </div>
                           <div>
                           </div>
                           <div>
                            <img alt="" height="331" src="https://i-blog.csdnimg.cn/direct/c16551ada4cf42478c8574a2d728385f.png" width="1087">
                            </img>
                           </div>
                           <div>
                            <div>
                             <span style="color:#333333">
                              单表数据不断被插入的情况下，
                             </span>
                             <span style="color:#333333">
                              MySQL
                             </span>
                             <span style="color:#333333">
                              会在容量不足的时候，自动开辟新的
                             </span>
                             <span style="color:#333333">
                              Page来保存新的数据，然后通过指针的方式，将所有的
                             </span>
                             <span style="color:#333333">
                              Page
                             </span>
                             <span style="color:#333333">
                              组织起来。
                             </span>
                            </div>
                            <div>
                            </div>
                            <div>
                             <div>
                              <span style="color:#333333">
                               需要注意，上面的图，是理想结构，大家也知道，目前要保证整体有序，那么新插入的数据，不一定会在新
                              </span>
                              <span style="color:#333333">
                               Page
                              </span>
                              <span style="color:#333333">
                               上面，这里仅仅做演示。
                              </span>
                             </div>
                             <div>
                              <span style="color:#333333">
                               这样，我们就可以通过多个
                              </span>
                              <span style="color:#333333">
                               Page
                              </span>
                              <span style="color:#333333">
                               遍历，
                              </span>
                              <span style="color:#333333">
                               Page内部通过目录来快速定位数据。可是，貌似这样也有效率问题，在
                              </span>
                              <span style="color:#333333">
                               Page
                              </span>
                              <span style="color:#333333">
                               之间，也是需要
                              </span>
                              <span style="color:#333333">
                               MySQL
                              </span>
                              <span style="color:#333333">
                               遍历的，遍历意味着依旧需要进行大量的
                              </span>
                              <span style="color:#333333">
                               IO
                              </span>
                              <span style="color:#333333">
                               ，将下一个
                              </span>
                              <span style="color:#333333">
                               Page加载到内存，进行线性检测。这样就显得我们之前的
                              </span>
                              <span style="color:#333333">
                               Page
                              </span>
                              <span style="color:#333333">
                               内部的目录，有点杯水车薪了。
                              </span>
                             </div>
                             <div>
                              <span style="color:#333333">
                               那么如何解决呢？解决方案，其实就是我们之前的思路，给
                              </span>
                              <span style="color:#333333">
                               Page
                              </span>
                              <span style="color:#333333">
                               也带上目录。
                              </span>
                             </div>
                             <div>
                             </div>
                             <div>
                              <span style="color:#333333">
                               使用一个目录项来指向某一页，而这个目录项存放的就是将要指向的页中存放的最小数据的键值。
                              </span>
                             </div>
                             <div>
                              <span style="color:#333333">
                               和页内目录不同的地方在于，这种目录管理的级别是页，而页内目录管理的级别是行。
                              </span>
                             </div>
                             <div>
                              <span style="color:#333333">
                               其中，每个目录项的构成是：键值
                              </span>
                              <span style="color:#333333">
                               +
                              </span>
                              <span style="color:#333333">
                               指针。图中没有画全。
                              </span>
                             </div>
                             <div>
                              <img alt="" height="532" src="https://i-blog.csdnimg.cn/direct/09b3999fd7b14bf4b24a008901693e22.png" width="1113"/>
                             </div>
                             <div>
                              当然我们可以对page再进行一层索引，让索引指向page。
                             </div>
                             <div>
                              <div>
                               <span style="color:#333333">
                                存在一个目录页来管理页目录，目录页中的数据存放的就是指向的那一页中最小的数据。有数据，就可通过比较，找到该访问那个
                               </span>
                               <span style="color:#333333">
                                Page
                               </span>
                               <span style="color:#333333">
                                ，进而通过指针，找到下一个
                               </span>
                               <span style="color:#333333">
                                Page
                               </span>
                               <span style="color:#333333">
                                。
                               </span>
                              </div>
                              <div>
                               <span style="color:#333333">
                                其实
                               </span>
                               <span style="color:#333333">
                                <strong>
                                 目录页的本质也是页，普通页中存的数据是用户数据，而目录页中存的数据是普通页的地址。
                                </strong>
                               </span>
                              </div>
                              <div>
                               <span style="color:#333333">
                                可是，我们每次检索数据的时候，该从哪里开始呢？虽然顶层的目录页少了，但是还要遍历啊？不用担心，可以再加目录页
                               </span>
                              </div>
                              <div>
                               <img alt="" height="622" src="https://i-blog.csdnimg.cn/direct/0033a4a8fc4d42caa26b9d5884a11c76.png" width="1393"/>
                              </div>
                              <div>
                               <div>
                                <strong>
                                 <span style="color:#333333">
                                  这货就是传说中的
                                 </span>
                                 <span style="color:#333333">
                                  B+
                                 </span>
                                 <span style="color:#333333">
                                  树啊！没错，至此，我们已经给我们的表
                                 </span>
                                 <span style="color:#333333">
                                  user
                                 </span>
                                 <span style="color:#333333">
                                  构建完了主键索引。
                                 </span>
                                </strong>
                               </div>
                               <div>
                                <span style="color:#333333">
                                 随便找一个
                                </span>
                                <span style="color:#333333">
                                 id=
                                </span>
                                <span style="color:#333333">
                                 ？我们发现，现在查找的
                                </span>
                                <span style="color:#333333">
                                 Page
                                </span>
                                <span style="color:#333333">
                                 数一定减少了，也就意味着
                                </span>
                                <span style="color:#333333">
                                 IO次数减少了，那么效率也就提高了。
                                </span>
                               </div>
                               <div>
                               </div>
                               <div>
                                <div>
                                 <span style="color:#333333">
                                  <strong>
                                   复盘一下
                                  </strong>
                                 </span>
                                </div>
                                <div>
                                 <div>
                                  <span style="color:#333333">
                                   Page
                                  </span>
                                  <span style="color:#333333">
                                   分为目录页和数据页。目录页只放各个下级
                                  </span>
                                  <span style="color:#333333">
                                   Page
                                  </span>
                                  <span style="color:#333333">
                                   的最小键值。
                                  </span>
                                 </div>
                                 <div>
                                  <span style="color:#333333">
                                   查找的时候，自定向下找，只需要加载部分目录页到内存，即可完成算法的整个查找过程，大大减
                                  </span>
                                 </div>
                                 <div>
                                  <span style="color:#333333">
                                   少了
                                  </span>
                                  <span style="color:#333333">
                                   IO
                                  </span>
                                  <span style="color:#333333">
                                   次数。
                                  </span>
                                 </div>
                                 <div>
                                 </div>
                                 <div>
                                  <div>
                                   <span style="color:#333333">
                                    InnoDB
                                   </span>
                                   <span style="color:#333333">
                                    <strong>
                                     在建立索引结构来管理数据的时候，其他数据结构为何不行？
                                    </strong>
                                   </span>
                                  </div>
                                  <div>
                                  </div>
                                  <div>
                                   <div>
                                    <span style="color:#333333">
                                     链表？线性遍历
                                    </span>
                                   </div>
                                   <div>
                                   </div>
                                   <div>
                                    <span style="color:#333333">
                                     二叉搜索树？退化问题，可能退化成为线性结构
                                    </span>
                                   </div>
                                   <div>
                                   </div>
                                   <div>
                                    <span style="color:#333333">
                                     AVL
                                    </span>
                                    <span style="color:#333333">
                                     &amp;&amp;
                                    </span>
                                    <span style="color:#333333">
                                     红黑树？虽然是平衡或者近似平衡，但是毕竟是二叉结构，相比较多阶
                                    </span>
                                    <span style="color:#333333">
                                     B+
                                    </span>
                                    <span style="color:#333333">
                                     ，意味着树整体
                                    </span>
                                   </div>
                                   <div>
                                    <span style="color:#333333">
                                     过高，大家都是自顶向下找，层高越低，意味着系统与硬盘更少的
                                    </span>
                                    <span style="color:#333333">
                                     IO Page
                                    </span>
                                    <span style="color:#333333">
                                     交互。虽然你很秀，但
                                    </span>
                                   </div>
                                   <div>
                                    <span style="color:#333333">
                                     是有更秀的。
                                    </span>
                                   </div>
                                   <div>
                                   </div>
                                   <div>
                                    <span style="color:#333333">
                                     Hash
                                    </span>
                                    <span style="color:#333333">
                                     ？官方的索引实现方式中，
                                    </span>
                                    <span style="color:#333333">
                                     MySQL
                                    </span>
                                    <span style="color:#333333">
                                     是支持
                                    </span>
                                    <span style="color:#333333">
                                     HASH
                                    </span>
                                    <span style="color:#333333">
                                     的，不过
                                    </span>
                                    <span style="color:#333333">
                                     InnoDB
                                    </span>
                                    <span style="color:#333333">
                                     和
                                    </span>
                                    <span style="color:#333333">
                                     MyISAM
                                    </span>
                                    <span style="color:#333333">
                                     并不支持
                                    </span>
                                    <span style="color:#333333">
                                     .Hash跟进其算法特征，决定了虽然有时候也很快
                                    </span>
                                    <span style="color:#333333">
                                     (O(1))
                                    </span>
                                    <span style="color:#333333">
                                     ，不过，在面对范围查找就明显不行。
                                    </span>
                                   </div>
                                   <div>
                                   </div>
                                   <div>
                                    <div>
                                     <strong>
                                      <span style="color:#333333">
                                       B
                                      </span>
                                      <span style="color:#333333">
                                       树？最值得比较的是
                                      </span>
                                      <span style="color:#333333">
                                       InnoDB
                                      </span>
                                      <span style="color:#333333">
                                       为何不用
                                      </span>
                                      <span style="color:#333333">
                                       B
                                      </span>
                                      <span style="color:#333333">
                                       树作为底层索引？
                                      </span>
                                     </strong>
                                    </div>
                                    <div>
                                     <span style="color:#333333">
                                      <strong>
                                       B+ vs B
                                      </strong>
                                     </span>
                                    </div>
                                    <div>
                                    </div>
                                    <div>
                                     <div>
                                      <span style="color:#333333">
                                       B
                                      </span>
                                      <span style="color:#333333">
                                       树
                                      </span>
                                     </div>
                                     <div>
                                      <img alt="" height="358" src="https://i-blog.csdnimg.cn/direct/22948ef3daa44ff1bae5d917a76ceb21.png" width="1074"/>
                                     </div>
                                     <div>
                                      <div>
                                       <span style="color:#333333">
                                        B+
                                       </span>
                                       <span style="color:#333333">
                                        树
                                       </span>
                                      </div>
                                      <div>
                                       <img alt="" height="372" src="https://i-blog.csdnimg.cn/direct/23ff4a18135948858b1ccd519a909eac.png" width="678"/>
                                      </div>
                                      <div>
                                       <div>
                                        <span style="color:#333333">
                                         目前这两棵树，对我们最有意义的区别是：
                                        </span>
                                       </div>
                                       <div>
                                        <div>
                                         <strong>
                                          <span style="color:#333333">
                                           1.B
                                          </span>
                                          <span style="color:#333333">
                                           树节点，既有数据，又有
                                          </span>
                                          <span style="color:#333333">
                                           Page
                                          </span>
                                         </strong>
                                         <span style="color:#333333">
                                          <strong>
                                           指针
                                          </strong>
                                          ，而
                                         </span>
                                         <span style="color:#333333">
                                          B+
                                         </span>
                                         <span style="color:#333333">
                                          ，只有叶子节点有数据，其他目录页，只有键值和
                                         </span>
                                        </div>
                                        <div>
                                         <span style="color:#333333">
                                          Page
                                         </span>
                                         <span style="color:#333333">
                                          指针
                                         </span>
                                        </div>
                                        <div>
                                         <strong>
                                          <span style="color:#333333">
                                           2.B+
                                          </span>
                                          <span style="color:#333333">
                                           叶子节点，全部相连，而
                                          </span>
                                          <span style="color:#333333">
                                           B
                                          </span>
                                          <span style="color:#333333">
                                           没有
                                          </span>
                                         </strong>
                                        </div>
                                        <div>
                                        </div>
                                        <div>
                                         <div>
                                          <span style="color:#333333">
                                           为何选择
                                          </span>
                                          <span style="color:#333333">
                                           B+
                                          </span>
                                         </div>
                                         <div>
                                          <strong>
                                           <span style="color:#333333">
                                            节点不存储
                                           </span>
                                           <span style="color:#333333">
                                            data
                                           </span>
                                           <span style="color:#333333">
                                            ，这样一个节点就可以存储更多的
                                           </span>
                                           <span style="color:#333333">
                                            key
                                           </span>
                                          </strong>
                                          <span style="color:#333333">
                                           <strong>
                                            。
                                           </strong>
                                           可以使得树
                                           <strong>
                                            更矮，所以
                                           </strong>
                                          </span>
                                          <strong>
                                           <span style="color:#333333">
                                            IO
                                           </span>
                                          </strong>
                                          <span style="color:#333333">
                                           <strong>
                                            操作次数更少
                                           </strong>
                                           。
                                          </span>
                                         </div>
                                         <div>
                                          <span style="color:#333333">
                                           叶子节点相连，更便于进行范围查找
                                          </span>
                                         </div>
                                         <div>
                                         </div>
                                         <div>
                                         </div>
                                         <div>
                                          <h2 id="%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%20VS%20%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95" name="%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%20VS%20%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95">
                                           <span style="color:#333333">
                                            <strong>
                                             聚簇索引
                                            </strong>
                                           </span>
                                           <span style="color:#333333">
                                            <strong>
                                             VS
                                            </strong>
                                           </span>
                                           <span style="color:#333333">
                                            <strong>
                                             非聚簇索引
                                            </strong>
                                           </span>
                                          </h2>
                                          <p>
                                           <span style="color:#333333">
                                            MyISAM
                                           </span>
                                           <span style="color:#333333">
                                            存储引擎
                                           </span>
                                           <span style="color:#333333">
                                            -
                                           </span>
                                           <span style="color:#333333">
                                            主键索引
                                           </span>
                                          </p>
                                          <p>
                                          </p>
                                          <div>
                                           <strong>
                                            <span style="color:#333333">
                                             MyISAM
                                            </span>
                                            <span style="color:#333333">
                                             引擎同样使用
                                            </span>
                                            <span style="color:#333333">
                                             B+
                                            </span>
                                           </strong>
                                           <span style="color:#333333">
                                            <strong>
                                             树作为索引结果，
                                            </strong>
                                            叶节点的
                                           </span>
                                           <span style="color:#333333">
                                            data
                                           </span>
                                           <span style="color:#333333">
                                            域存放的是数据记录的地址。下图为 MyISAM表的主索引，
                                           </span>
                                           <span style="color:#333333">
                                            Col1
                                           </span>
                                           <span style="color:#333333">
                                            为主键。
                                           </span>
                                          </div>
                                          <div>
                                          </div>
                                          <div>
                                           <img alt="" height="517" src="https://i-blog.csdnimg.cn/direct/9f4adedc90a94b838f71cb1c96ad05fb.png" width="661"/>
                                          </div>
                                          <div>
                                           <div>
                                            <span style="color:#333333">
                                             其中，
                                            </span>
                                            <span style="color:#333333">
                                             MyISAM
                                            </span>
                                            <span style="color:#333333">
                                             最大的特点是，将索引
                                            </span>
                                            <span style="color:#333333">
                                             Page
                                            </span>
                                            <span style="color:#333333">
                                             和数据
                                            </span>
                                            <span style="color:#333333">
                                             Page分离，也就是叶子节点没有数据，只有对应数据的地址。
                                            </span>
                                           </div>
                                           <div>
                                            <span style="color:#333333">
                                             相较于
                                            </span>
                                            <span style="color:#333333">
                                             InnoDB
                                            </span>
                                            <span style="color:#333333">
                                             索引，
                                            </span>
                                            <span style="color:#333333">
                                             InnoDB
                                            </span>
                                            <span style="color:#333333">
                                             是将索引和数据放在一起的。
                                            </span>
                                           </div>
                                          </div>
                                         </div>
                                         <div>
                                          <strong>
                                           <span style="color:#333333">
                                            其中，
                                           </span>
                                           <span style="color:#333333">
                                            MyISAM
                                           </span>
                                           <span style="color:#333333">
                                            这种用户数据与索引数据分离的索引方案，叫做非聚簇索引。
                                           </span>
                                          </strong>
                                         </div>
                                         <div>
                                         </div>
                                         <div>
                                          <div>
                                           <strong>
                                            <span style="color:#333333">
                                             其中，
                                            </span>
                                            <span style="color:#333333">
                                             InnoDB
                                            </span>
                                            <span style="color:#333333">
                                             这种用户数据与索引数据在一起索引方案，叫做聚簇索引。
                                            </span>
                                           </strong>
                                          </div>
                                          <div>
                                           <span style="color:#333333">
                                            当然，
                                           </span>
                                           <span style="color:#333333">
                                            MySQL 除了默认会建立主键索引外，
                                            <strong>
                                             我们用户也有可能建立按照其他列信息建立的索引，一般这种索引可以叫做辅助（普通）索引。
                                            </strong>
                                           </span>
                                          </div>
                                          <div>
                                           <span style="color:#333333">
                                            对于
                                           </span>
                                           <span style="color:#333333">
                                            MyISAM
                                           </span>
                                           <span style="color:#333333">
                                            ,建立辅助（普通）索引和主键索引没有差别，无非就是主键不能重复，而非主键可重复。下图就是基于
                                           </span>
                                           <span style="color:#333333">
                                            MyISAM
                                           </span>
                                           <span style="color:#333333">
                                            的
                                           </span>
                                           <span style="color:#333333">
                                            Col2
                                           </span>
                                           <span style="color:#333333">
                                            建立的索引，和主键索引没有差别。
                                           </span>
                                          </div>
                                          <div>
                                          </div>
                                          <div>
                                           <img alt="" height="516" src="https://i-blog.csdnimg.cn/direct/d6a82a26660d49cc836f217e0a9cc262.png" width="655"/>
                                          </div>
                                          <div>
                                           <div>
                                            <span style="color:#333333">
                                             同样，
                                            </span>
                                            <span style="color:#333333">
                                             InnoDB
                                            </span>
                                            <span style="color:#333333">
                                             除了主键索引，用户也会建立辅助（普通）索引，我们以上表中的
                                            </span>
                                            <span style="color:#333333">
                                             Col3
                                            </span>
                                            <span style="color:#333333">
                                             建立对应的辅助索引。
                                            </span>
                                           </div>
                                           <div>
                                            <img alt="" height="226" src="https://i-blog.csdnimg.cn/direct/007e4e8e959a4e31ab3ef1eefa7ccf24.png" width="544"/>
                                           </div>
                                           <div>
                                            <div>
                                             <span style="color:#333333">
                                              可以看到，
                                             </span>
                                             <span style="color:#333333">
                                              InnoDB
                                             </span>
                                             <span style="color:#333333">
                                              的
                                              <strong>
                                               非主键索引中叶子节点并没有数据，而只有对应记录的
                                              </strong>
                                             </span>
                                             <strong>
                                              <span style="color:#333333">
                                               key
                                              </span>
                                              <span style="color:#333333">
                                               值。
                                              </span>
                                             </strong>
                                            </div>
                                            <div>
                                             <span style="color:#333333">
                                              所以通过辅助（普通）索引，找到目标记录，需要两遍索引：
                                              <strong>
                                               首先检索辅助索引获得主键，然后用主键到主索引中检索获得记录。
                                              </strong>
                                              这种过程，就叫做
                                              <strong>
                                               回表查询
                                              </strong>
                                             </span>
                                            </div>
                                            <div>
                                            </div>
                                            <div>
                                             <span style="color:#333333">
                                              为何
                                             </span>
                                             <span style="color:#333333">
                                              InnoDB 针对这种辅助（普通）索引的场景，不给叶子节点也附上数据呢？原因就是太浪费空间了。
                                             </span>
                                            </div>
                                            <div>
                                             <h2 id="6.%20%E7%B4%A2%E5%BC%95%E6%93%8D%E4%BD%9C" name="6.%20%E7%B4%A2%E5%BC%95%E6%93%8D%E4%BD%9C">
                                              <span style="color:#333333">
                                               <strong>
                                                6.
                                               </strong>
                                              </span>
                                              <span style="color:#333333">
                                               <strong>
                                                索引操作
                                               </strong>
                                              </span>
                                             </h2>
                                             <h3 id="%E5%88%9B%E5%BB%BA%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95" name="%E5%88%9B%E5%BB%BA%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95">
                                              <span style="color:#333333">
                                               <strong>
                                                创建主键索引
                                               </strong>
                                              </span>
                                             </h3>
                                             <div>
                                              <span style="color:#aa5500">
                                               --
                                              </span>
                                              <span style="color:#aa5500">
                                               在创建表的时候，直接在字段名后指定
                                              </span>
                                              <span style="color:#aa5500">
                                               primary key
                                              </span>
                                             </div>
                                             <div>
                                              <span style="color:#770088">
                                               create table
                                              </span>
                                              <span style="color:#333333">
                                               user1(id
                                              </span>
                                              <span style="color:#3300aa">
                                               int
                                              </span>
                                              <span style="color:#333333">
                                               primary key, name
                                              </span>
                                              <span style="color:#3300aa">
                                               varchar
                                              </span>
                                              <span style="color:#333333">
                                               (
                                              </span>
                                              <span style="color:#116644">
                                               30
                                              </span>
                                              <span style="color:#333333">
                                               ));
                                              </span>
                                             </div>
                                             <div>
                                             </div>
                                             <div>
                                              <div>
                                               <span style="color:#333333">
                                                主键索引的特点：
                                               </span>
                                              </div>
                                              <div>
                                               <strong>
                                                <span style="color:#333333">
                                                 一个表中，最多有一个主键索引，当然可以使符合主键
                                                </span>
                                               </strong>
                                              </div>
                                              <div>
                                               <span style="color:#333333">
                                                主键索引的效率高（主键不可重复）
                                               </span>
                                              </div>
                                              <div>
                                               <span style="color:#333333">
                                                创建主键索引的列，它的值不能为
                                               </span>
                                               <span style="color:#333333">
                                                null
                                               </span>
                                               <span style="color:#333333">
                                                ，且不能重复
                                               </span>
                                              </div>
                                              <div>
                                               <span style="color:#333333">
                                                主键索引的列基本上是
                                               </span>
                                               <span style="color:#333333">
                                                int
                                               </span>
                                              </div>
                                              <div>
                                              </div>
                                              <div>
                                              </div>
                                              <div>
                                               <h3 id="%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA" name="%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA">
                                                <span style="color:#333333">
                                                 <strong>
                                                  唯一索引的创建
                                                 </strong>
                                                </span>
                                               </h3>
                                               <div>
                                                <div>
                                                 <span style="color:#aa5500">
                                                  --
                                                 </span>
                                                 <span style="color:#aa5500">
                                                  在表定义时，在某列后直接指定
                                                 </span>
                                                 <span style="color:#aa5500">
                                                  unique
                                                 </span>
                                                 <span style="color:#aa5500">
                                                  唯一属性。
                                                 </span>
                                                </div>
                                                <div>
                                                 <span style="color:#770088">
                                                  create table
                                                 </span>
                                                 <span style="color:#333333">
                                                  user4(id
                                                 </span>
                                                 <span style="color:#3300aa">
                                                  int
                                                 </span>
                                                 <span style="color:#333333">
                                                  primary key, name
                                                 </span>
                                                 <span style="color:#3300aa">
                                                  varchar
                                                 </span>
                                                 <span style="color:#333333">
                                                  (
                                                 </span>
                                                 <span style="color:#116644">
                                                  30
                                                 </span>
                                                 <span style="color:#333333">
                                                  ) unique);
                                                 </span>
                                                </div>
                                                <div>
                                                </div>
                                                <div>
                                                 <div>
                                                  <span style="color:#333333">
                                                   唯一索引的特点：
                                                  </span>
                                                 </div>
                                                 <div>
                                                  <span style="color:#333333">
                                                   一个表中，可以有多个唯一索引
                                                  </span>
                                                 </div>
                                                 <div>
                                                  <span style="color:#333333">
                                                   查询效率高
                                                  </span>
                                                 </div>
                                                 <div>
                                                  <span style="color:#333333">
                                                   如果在某一列建立唯一索引，必须保证这列不能有重复数据
                                                  </span>
                                                 </div>
                                                 <div>
                                                  <span style="color:#333333">
                                                   如果一个唯一索引上指定
                                                  </span>
                                                  <span style="color:#333333">
                                                   not null
                                                  </span>
                                                  <span style="color:#333333">
                                                   ，等价于主键索引
                                                  </span>
                                                 </div>
                                                 <div>
                                                 </div>
                                                 <div>
                                                  <h3 id="%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA" name="%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA">
                                                   <span style="color:#333333">
                                                    <strong>
                                                     普通索引的创建
                                                    </strong>
                                                   </span>
                                                  </h3>
                                                  <p>
                                                  </p>
                                                  <div>
                                                   <span style="color:#770088">
                                                    create table
                                                   </span>
                                                   <span style="color:#333333">
                                                    user8(id
                                                   </span>
                                                   <span style="color:#3300aa">
                                                    int
                                                   </span>
                                                   <span style="color:#333333">
                                                    primary key,
                                                   </span>
                                                  </div>
                                                  <div>
                                                   <span style="color:#333333">
                                                    name
                                                   </span>
                                                   <span style="color:#3300aa">
                                                    varchar
                                                   </span>
                                                   <span style="color:#333333">
                                                    (
                                                   </span>
                                                   <span style="color:#116644">
                                                    20
                                                   </span>
                                                   <span style="color:#333333">
                                                    ),
                                                   </span>
                                                  </div>
                                                  <div>
                                                   <span style="color:#333333">
                                                    email
                                                   </span>
                                                   <span style="color:#3300aa">
                                                    varchar
                                                   </span>
                                                   <span style="color:#333333">
                                                    (
                                                   </span>
                                                   <span style="color:#116644">
                                                    30
                                                   </span>
                                                   <span style="color:#333333">
                                                    ),
                                                   </span>
                                                  </div>
                                                  <div>
                                                   <span style="color:#333333">
                                                    index(name)
                                                   </span>
                                                   <span style="color:#aa5500">
                                                    --
                                                   </span>
                                                   <span style="color:#aa5500">
                                                    在表的定义最后，指定某列为索引
                                                   </span>
                                                  </div>
                                                  <div>
                                                   <span style="color:#333333">
                                                    );
                                                   </span>
                                                  </div>
                                                  <div>
                                                  </div>
                                                  <div>
                                                   <div>
                                                    <strong>
                                                     <span style="color:#333333">
                                                      普通索引的特点：
                                                     </span>
                                                    </strong>
                                                   </div>
                                                   <div>
                                                    <strong>
                                                     <span style="color:#333333">
                                                      一个表中可以有多个普通索引，普通索引在实际开发中用的比较多
                                                     </span>
                                                    </strong>
                                                   </div>
                                                   <div>
                                                    <strong>
                                                     <span style="color:#333333">
                                                      如果某列需要创建索引，但是该列有重复的值，那么我们就应该使用普通索引
                                                     </span>
                                                    </strong>
                                                   </div>
                                                   <div>
                                                   </div>
                                                   <div>
                                                    <h3 id="%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA" name="%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA">
                                                     <span style="color:#333333">
                                                      <strong>
                                                       全文索引的创建
                                                      </strong>
                                                     </span>
                                                    </h3>
                                                    <p>
                                                    </p>
                                                    <div>
                                                     <span style="color:#333333">
                                                      当对文章字段或有大量文字的字段进行检索时，会使用到全文索引。
                                                     </span>
                                                     <span style="color:#333333">
                                                      MySQL提供全文索引机制，但是有要求，要求表的存储引擎必须是
                                                     </span>
                                                     <span style="color:#333333">
                                                      MyISAM，而且默认的全文索引支持英文，不支持中文。如果对中文进行全文检索，可以使用
                                                     </span>
                                                     <span style="color:#333333">
                                                      sphinx
                                                     </span>
                                                     <span style="color:#333333">
                                                      的中文版
                                                     </span>
                                                     <span style="color:#333333">
                                                      (coreseek)。
                                                     </span>
                                                    </div>
                                                    <div>
                                                    </div>
                                                    <div>
                                                     <span style="color:#333333">
                                                      在网页中我们使用的CTRL + F就是常见的全文索引方式。
                                                     </span>
                                                    </div>
                                                    <div>
                                                    </div>
                                                    <div>
                                                    </div>
                                                    <div>
                                                     <div>
                                                      <span style="color:#333333">
                                                       <strong>
                                                        查询索引
                                                       </strong>
                                                      </span>
                                                     </div>
                                                    </div>
                                                   </div>
                                                   <div>
                                                    <div>
                                                     <span style="color:#333333">
                                                      第一种方法：
                                                     </span>
                                                     <span style="color:#333333">
                                                      show keys from
                                                     </span>
                                                     <span style="color:#333333">
                                                      表名
                                                     </span>
                                                     <pre><code class="language-sql">mysql&gt; show keys from goods\G
*********** 1. row ***********
Table: goods &lt;= 表名
Non_unique: 0 &lt;= 0表示唯一索引
Key_name: PRIMARY &lt;= 主键索引
Seq_in_index: 1
Column_name: goods_id &lt;= 索引在哪列
Collation: A
Cardinality: 0
Sub_part: NULL
Packed: NULL
Null:
Index_type: BTREE &lt;= 以二叉树形式的索引
Comment:
1 row in set (0.00 sec)</code></pre>
                                                     <div>
                                                      <span style="color:#333333">
                                                       第二种方法
                                                      </span>
                                                      <span style="color:#333333">
                                                       :
                                                      </span>
                                                      <span style="color:#333333">
                                                       show index from
                                                      </span>
                                                      <span style="color:#333333">
                                                       表名
                                                      </span>
                                                      <span style="color:#333333">
                                                       ;
                                                      </span>
                                                     </div>
                                                     <div>
                                                      <span style="color:#333333">
                                                       第三种方法（信息比较简略）：
                                                      </span>
                                                      <span style="color:#333333">
                                                       desc
                                                      </span>
                                                      <span style="color:#333333">
                                                       表名；
                                                      </span>
                                                     </div>
                                                     <div>
                                                     </div>
                                                     <div>
                                                      <h3 id="%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95" name="%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95">
                                                       <span style="color:#333333">
                                                        <strong>
                                                         删除索引
                                                        </strong>
                                                       </span>
                                                      </h3>
                                                      <p>
                                                      </p>
                                                      <div>
                                                       <strong>
                                                        <span style="color:#333333">
                                                         第一种方法
                                                        </span>
                                                        <span style="color:#333333">
                                                         -
                                                        </span>
                                                       </strong>
                                                       <span style="color:#333333">
                                                        <strong>
                                                         删除主键索引
                                                        </strong>
                                                        ：
                                                       </span>
                                                       <span style="color:#333333">
                                                        alter table
                                                       </span>
                                                       <span style="color:#333333">
                                                        表名
                                                       </span>
                                                       <span style="color:#333333">
                                                        drop primary key
                                                       </span>
                                                       <span style="color:#333333">
                                                        ;
                                                       </span>
                                                      </div>
                                                      <div>
                                                      </div>
                                                      <div>
                                                       <strong>
                                                        <span style="color:#333333">
                                                         第二种方法
                                                        </span>
                                                        <span style="color:#333333">
                                                         -
                                                        </span>
                                                       </strong>
                                                       <span style="color:#333333">
                                                        <strong>
                                                         其他索引的删除：
                                                        </strong>
                                                       </span>
                                                       <span style="color:#333333">
                                                        alter table
                                                       </span>
                                                       <span style="color:#333333">
                                                        表名
                                                       </span>
                                                       <span style="color:#333333">
                                                        drop index
                                                       </span>
                                                       <span style="color:#333333">
                                                        索引名；
                                                       </span>
                                                       <span style="color:#333333">
                                                        索引名就是
                                                       </span>
                                                       <span style="color:#333333">
                                                        show keys
                                                       </span>
                                                      </div>
                                                      <div>
                                                       <span style="color:#333333">
                                                        from
                                                       </span>
                                                       <span style="color:#333333">
                                                        表名中的
                                                       </span>
                                                       <span style="color:#333333">
                                                        Key_name
                                                       </span>
                                                       <span style="color:#333333">
                                                        字段
                                                       </span>
                                                      </div>
                                                      <div>
                                                       <span style="color:#333333">
                                                        mysql&gt; alter table user10 drop index idx_name
                                                       </span>
                                                       <span style="color:#333333">
                                                        ;
                                                       </span>
                                                      </div>
                                                      <div>
                                                      </div>
                                                      <div>
                                                       <strong>
                                                        <span style="color:#333333">
                                                         第三种方法方法：
                                                        </span>
                                                       </strong>
                                                       <span style="color:#333333">
                                                        drop index
                                                       </span>
                                                       <span style="color:#333333">
                                                        索引名
                                                       </span>
                                                       <span style="color:#333333">
                                                        on
                                                       </span>
                                                       <span style="color:#333333">
                                                        表名
                                                       </span>
                                                      </div>
                                                      <div>
                                                       <span style="color:#333333">
                                                        mysql&gt; drop index name on user8；
                                                       </span>
                                                      </div>
                                                     </div>
                                                    </div>
                                                   </div>
                                                  </div>
                                                  <div>
                                                  </div>
                                                  <h3 id="%E7%B4%A2%E5%BC%95%E5%88%9B%E5%BB%BA%E5%8E%9F%E5%88%99" name="%E7%B4%A2%E5%BC%95%E5%88%9B%E5%BB%BA%E5%8E%9F%E5%88%99">
                                                   <span style="color:#333333">
                                                    <strong>
                                                     索引创建原则
                                                    </strong>
                                                   </span>
                                                  </h3>
                                                  <div>
                                                   <div>
                                                    <strong>
                                                     <span style="color:#333333">
                                                      比较频繁作为查询条件的字段应该创建索引
                                                     </span>
                                                    </strong>
                                                   </div>
                                                   <div>
                                                    <span style="color:#333333">
                                                     <strong>
                                                      唯一性太差的字段不适合单独创建索引，
                                                     </strong>
                                                     即使频繁作为查询条件
                                                    </span>
                                                   </div>
                                                   <div>
                                                    <strong>
                                                     <span style="color:#333333">
                                                      更新非常频繁的字段不适合作创建索引
                                                     </span>
                                                    </strong>
                                                   </div>
                                                   <div>
                                                    <strong>
                                                     <span style="color:#333333">
                                                      不会出现在
                                                     </span>
                                                     <span style="color:#333333">
                                                      where
                                                     </span>
                                                     <span style="color:#333333">
                                                      子句中的字段不该创建索引（where就是进行条件筛选的）
                                                     </span>
                                                    </strong>
                                                   </div>
                                                  </div>
                                                 </div>
                                                </div>
                                               </div>
                                              </div>
                                             </div>
                                            </div>
                                           </div>
                                          </div>
                                         </div>
                                        </div>
                                       </div>
                                      </div>
                                     </div>
                                    </div>
                                   </div>
                                  </div>
                                 </div>
                                </div>
                               </div>
                              </div>
                             </div>
                            </div>
                           </div>
                          </div>
                         </div>
                        </div>
                       </div>
                      </div>
                     </div>
                    </div>
                   </div>
                  </div>
                 </div>
                </div>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330325f38303139303339342f:61727469636c652f64657461696c732f313436313837323633" class_="artid" style="display:none">
 </p>
</div>


