---
layout: post
title: "JVM之Arthas的dashboard命令以及CPU飙高场景"
date: 2025-03-09 10:34:24 +0800
description: "dashboard 是 Arthas 中最常用的命令之一，能够实时监控 Java 应用的运行状态，帮助开发者快速定位以下问题：CPU 飙升：查看 CPU 和 Thread Details。内存泄漏：查看 MEMORY 和 GC。线程问题：查看 THREAD 和 Thread Details。通过 dashboard，可以快速了解系统的整体运行状况，为后续的深入排查提供方向。"
keywords: "arthas memory max和used"
categories: ['Java']
tags: ['Spring', 'Java', 'Boot']
artid: "146128337"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146128337
    alt: "JVM之Arthas的dashboard命令以及CPU飙高场景"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146128337
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146128337
cover: https://bing.ee123.net/img/rand?artid=146128337
image: https://bing.ee123.net/img/rand?artid=146128337
img: https://bing.ee123.net/img/rand?artid=146128337
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     JVM之Arthas的dashboard命令以及CPU飙高场景
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/6512ed1ec3d8449587c5c638483d5479.png"/>
    </p>
    <blockquote>
     <p>
      <strong>
       博主介绍：
      </strong>
      ✌全网粉丝5W+，全栈开发工程师，从事多年软件开发，在大厂呆过。持有软件中级、六级等证书。可提供微服务项目搭建与毕业项目实战，博主也曾写过优秀论文，查重率极低，在这方面有丰富的经验✌
     </p>
     <p>
      <strong>
       博主作品：
      </strong>
      《Java项目案例》主要基于SpringBoot+MyBatis/MyBatis-plus+MySQL+Vue等前后端分离项目，可以在左边的分类专栏找到更多项目。《Uniapp项目案例》有几个有uniapp教程，企业实战开发。《微服务实战》专栏是本人的实战经验总结，《Spring家族及微服务系列》专注Spring、SpringMVC、SpringBoot、SpringCloud系列、Nacos等源码解读、热门面试题、架构设计等。除此之外还有不少文章等你来细细品味，更多惊喜等着你哦
     </p>
     <p>
      🍅
      <strong>
       uniapp微信小程序
      </strong>
      🍅面试题软考题免费使用，还可以使用微信支付，扫码加群。由于维护成本问题得不到解决，可能将停止线上维护。
     </p>
     <p>
      🍅
      <strong>
       文末获取联系
      </strong>
      🍅精彩专栏推荐订阅👇🏻👇🏻 不然下次找不到哟
     </p>
     <p>
      <strong>
       Java项目案例《100套》
      </strong>
      <br/>
      <a href="https://blog.csdn.net/qq_57756904/category_12173599.html" title="https://blog.csdn.net/qq_57756904/category_12173599.html">
       https://blog.csdn.net/qq_57756904/category_12173599.html
      </a>
      <br/>
      <strong>
       uniapp小程序《100套》
      </strong>
     </p>
     <p>
      <a href="https://blog.csdn.net/qq_57756904/category_12173599.html" title="https://blog.csdn.net/qq_57756904/category_12173599.html">
       https://blog.csdn.net/qq_57756904/category_12173599.html
      </a>
     </p>
     <p>
      有需求代码永远写不完，而方法才是破解之道，抖音有实战视频课程，某马某千等培训都是2万左右，甚至广东有本科院校单单一年就得3万4年就12万学费，而且还没有包括吃饭的钱。所以很划算了。另外博客左侧有源码阅读专栏，对于求职有很大帮助，当然对于工作也是有指导意义等。在大城市求职，你面试来回一趟多多少少都在12块左右，而且一般不会一次性就通过，还得面试几家。而如果你对源码以及微服务等有深度认识，这无疑给你的面试添砖加瓦更上一层楼。
     </p>
     <p>
      最后再送一句：最好是学会了，而不是学废了！！
     </p>
    </blockquote>
    <p>
     2
    </p>
    <p>
     <code>
      dashboard
     </code>
     是 Arthas 中一个非常强大的命令，用于实时监控 Java 应用的运行状态。它可以显示 JVM 的 CPU、内存、线程、GC 等信息，帮助开发者快速定位性能问题。
    </p>
    <hr/>
    <h3>
     <strong>
      1. 启动 Arthas
     </strong>
    </h3>
    <p>
     在终端中启动 Arthas：
    </p>
    <pre><code>java -jar arthas-boot.jar</code></pre>
    <p>
     选择需要诊断的 Java 进程（输入进程编号）。
    </p>
    <hr/>
    <h3>
     <strong>
      2. 使用
      <code>
       dashboard
      </code>
      命令
     </strong>
    </h3>
    <p>
     在 Arthas 命令行中输入：
    </p>
    <pre><code>dashboard</code></pre>
    <p>
     此时会进入一个实时监控界面，显示当前 Java 应用的运行状态。
    </p>
    <hr/>
    <h3>
     <strong>
      3.
      <code>
       dashboard
      </code>
      界面详解
     </strong>
    </h3>
    <p>
     <code>
      dashboard
     </code>
     界面通常分为以下几个部分：
    </p>
    <h4>
     <strong>
      1. ID
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       当前 Java 进程的 ID。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      2. NAME
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       当前 Java 进程的名称。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      3. GROUP
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       当前 Java 进程的组。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      4. PRIORITY
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       当前 Java 进程的优先级。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      5. STATE
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       当前 Java 进程的状态。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      6. CPU
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Total
       </strong>
       ：JVM 进程占用的 CPU 百分比。
      </p>
     </li>
     <li>
      <p>
       <strong>
        User
       </strong>
       ：用户态 CPU 占用百分比。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Sys
       </strong>
       ：内核态 CPU 占用百分比。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      7. MEMORY
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Used
       </strong>
       ：已使用的内存大小。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Max
       </strong>
       ：最大可用内存大小。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Usage
       </strong>
       ：内存使用率。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      8. THREAD
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Total
       </strong>
       ：当前 JVM 中的线程总数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        RUNNABLE
       </strong>
       ：处于可运行状态的线程数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        BLOCKED
       </strong>
       ：处于阻塞状态的线程数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        WAITING
       </strong>
       ：处于等待状态的线程数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        TIMED_WAITING
       </strong>
       ：处于定时等待状态的线程数。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      9. GC
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Young GC
       </strong>
       ：年轻代 GC 的次数和时间。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Full GC
       </strong>
       ：老年代 GC 的次数和时间。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      10. Runtime
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Uptime
       </strong>
       ：JVM 运行时间。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Start Time
       </strong>
       ：JVM 启动时间。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      11. Class Loading
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Loaded
       </strong>
       ：已加载的类数量。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Unloaded
       </strong>
       ：已卸载的类数量。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      12. Thread Details
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       显示当前占用 CPU 最高的线程信息，包括：
      </p>
      <ul>
       <li>
        <p>
         <strong>
          ID
         </strong>
         ：线程 ID。
        </p>
       </li>
       <li>
        <p>
         <strong>
          NAME
         </strong>
         ：线程名称。
        </p>
       </li>
       <li>
        <p>
         <strong>
          STATE
         </strong>
         ：线程状态。
        </p>
       </li>
       <li>
        <p>
         <strong>
          CPU%
         </strong>
         ：线程占用的 CPU 百分比。
        </p>
       </li>
       <li>
        <p>
         <strong>
          TIME
         </strong>
         ：线程运行时间。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      4. 常用操作
     </strong>
    </h3>
    <h4>
     <strong>
      刷新频率
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       默认情况下，
       <code>
        dashboard
       </code>
       每秒刷新一次。
      </p>
     </li>
     <li>
      <p>
       可以通过
       <code>
        -i
       </code>
       参数设置刷新间隔（单位：秒）：
      </p>
      <pre><code>dashboard -i 2</code></pre>
      <p>
       每 2 秒刷新一次。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      退出
      <code>
       dashboard
      </code>
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       按下
       <code>
        q
       </code>
       键退出
       <code>
        dashboard
       </code>
       界面，返回 Arthas 命令行。
      </p>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      5. 使用场景
     </strong>
    </h3>
    <h4>
     <strong>
      1. 监控 CPU 使用率
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       查看
       <code>
        CPU
       </code>
       部分，确认 JVM 进程的 CPU 使用率是否过高。
      </p>
     </li>
     <li>
      <p>
       查看
       <code>
        Thread Details
       </code>
       ，找到占用 CPU 最高的线程。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      2. 监控内存使用情况
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       查看
       <code>
        MEMORY
       </code>
       部分，确认内存使用率是否过高。
      </p>
     </li>
     <li>
      <p>
       如果内存使用率持续增长，可能存在内存泄漏。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      3. 监控线程状态
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       查看
       <code>
        THREAD
       </code>
       部分，确认是否有大量线程处于
       <code>
        BLOCKED
       </code>
       或
       <code>
        WAITING
       </code>
       状态。
      </p>
     </li>
     <li>
      <p>
       如果有，可能存在锁竞争或资源等待问题。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      4. 监控 GC 情况
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       查看
       <code>
        GC
       </code>
       部分，确认 Young GC 和 Full GC 的次数和时间。
      </p>
     </li>
     <li>
      <p>
       如果 Full GC 频繁发生，可能存在内存不足或内存泄漏问题。
      </p>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      6. 示例
     </strong>
    </h3>
    <h4>
     <strong>
      场景 1：CPU 飙升
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       启动 Arthas：
      </p>
      <pre><code>java -jar arthas-boot.jar</code></pre>
      <p>
      </p>
     </li>
     <li>
      <p>
       输入
       <code>
        dashboard
       </code>
       ，查看
       <code>
        CPU
       </code>
       和
       <code>
        Thread Details
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       找到占用 CPU 最高的线程，记录其线程 ID。
      </p>
     </li>
     <li>
      <p>
       使用
       <code>
        thread &lt;线程ID&gt;
       </code>
       查看线程堆栈，定位问题代码。
      </p>
     </li>
    </ol>
    <h4>
     具体模拟场景
    </h4>
    <p>
     1、模拟线程一直消耗CPU资源，注意一定要给线程加上一个名字才能更好排查系统问题
    </p>
    <pre><code class="language-java">package ceam.test.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/poi/thread")
public class ThreadController {

    @GetMapping
    public void thread() {
        Thread thread = new Thread(() -&gt; {
            while (true) {
                System.out.println("=======模拟线程一直在消耗CPU资源，Arthas中可以看到其CPU很高======");
            }
        }, "threadController-test");
        thread.start();
    }
}
</code></pre>
    <p>
     2、启动Arthas跟进该接口对应的进程
    </p>
    <p>
     <img alt="" height="585" src="https://i-blog.csdnimg.cn/direct/5252fb8d9ba84171aeec0df2d6da4948.png" width="746"/>
    </p>
    <p>
     3、
     <code>
      dashboard查看可见ID为54的线程CPU最高，即我们自己创建的线程
     </code>
     threadController-test
    </p>
    <p>
     <img alt="" height="721" src="https://i-blog.csdnimg.cn/direct/17b5712d0f5b4790b73aa03d430f309a.png" width="1185"/>
    </p>
    <p>
     4、thread -n  3
    </p>
    <p>
     可见threadController-test这个线程消耗CPU资源是最高的
    </p>
    <p>
     5、thread 线程ID，排查具体问题代码
    </p>
    <p>
     可见是在执行run方法时消耗资源的，在ThreadController代码的第15行位置
    </p>
    <p>
     <img alt="" height="399" src="https://i-blog.csdnimg.cn/direct/600f14dd3b98483da5a5b262bfa7d370.png" width="909"/>
    </p>
    <h4>
     <strong>
      场景 2：内存泄漏
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       启动 Arthas：
      </p>
      <pre><code>java -jar arthas-boot.jar</code></pre>
      <p>
      </p>
     </li>
     <li>
      <p>
       输入
       <code>
        dashboard
       </code>
       ，查看
       <code>
        MEMORY
       </code>
       部分。
      </p>
     </li>
     <li>
      <p>
       如果内存使用率持续增长，使用
       <code>
        heapdump
       </code>
       导出堆内存快照，进一步分析。
      </p>
     </li>
    </ol>
    <hr/>
    <h3>
     <strong>
      7. 总结
     </strong>
    </h3>
    <p>
     <code>
      dashboard
     </code>
     是 Arthas 中最常用的命令之一，能够实时监控 Java 应用的运行状态，帮助开发者快速定位以下问题：
    </p>
    <ul>
     <li>
      <p>
       CPU 飙升：查看
       <code>
        CPU
       </code>
       和
       <code>
        Thread Details
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       内存泄漏：查看
       <code>
        MEMORY
       </code>
       和
       <code>
        GC
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       线程问题：查看
       <code>
        THREAD
       </code>
       和
       <code>
        Thread Details
       </code>
       。
      </p>
     </li>
    </ul>
    <p>
     通过
     <code>
      dashboard
     </code>
     ，可以快速了解系统的整体运行状况，为后续的深入排查提供方向。
    </p>
    <p>
     3
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35373735363930342f:61727469636c652f64657461696c732f313436313238333337" class_="artid" style="display:none">
 </p>
</div>


