---
layout: post
title: "Spring-MVC笔记"
date: 2025-03-06 19:46:59 +0800
description: "Spring MVC 是 Spring 框架中的一个核心模块，专门用于构建 Web 应用程序。它基于经典的 MVC 设计模式（Model-View-Controller），但通过 Spring 的特性（如依赖注入、注解驱动）大幅简化了开发流程。• 用户通过浏览器发送请求（如点击链接、提交表单），Spring MVC 的控制器（Controller）接收请求，处理业务逻辑，最终返回响应（如 HTML 页面、JSON 数据）。• Model（模型）：负责数据和业务逻辑（如数据库操作）。• View（视图）：负"
keywords: "terasoluna spring mvc intra"
categories: ['未分类']
tags: ['笔记', 'Spring', 'Mvc']
artid: "146055508"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146055508
    alt: "Spring-MVC笔记"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146055508
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146055508
cover: https://bing.ee123.net/img/rand?artid=146055508
image: https://bing.ee123.net/img/rand?artid=146055508
img: https://bing.ee123.net/img/rand?artid=146055508
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Spring MVC笔记
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="01_Spring_MVC_0">
     </a>
     01 什么是Spring MVC
    </h2>
    <p>
     Spring MVC 是
     <strong>
      Spring 框架
     </strong>
     中的一个核心模块，专门用于构建
     <strong>
      Web 应用程序
     </strong>
     。它基于经典的
     <strong>
      MVC 设计模式
     </strong>
     （Model-View-Controller），但通过 Spring 的特性（如依赖注入、注解驱动）大幅简化了开发流程。
    </p>
    <hr/>
    <h4>
     <a id="Spring_MVC__5">
     </a>
     <strong>
      Spring MVC 是什么？
     </strong>
    </h4>
    <ol>
     <li>
      <strong>
       本质
      </strong>
      ：
      <br/>
      一个基于 Java 的 Web 框架，帮助开发者快速、结构化地开发动态网站或 RESTful API。
     </li>
     <li>
      <strong>
       核心思想
      </strong>
      ：
      <br/>
      将应用程序拆分为
      <strong>
       模型（Model）、视图（View）、控制器（Controller）
      </strong>
      三个部分，实现职责分离，让代码更易维护和扩展。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="Spring_MVC__13">
     </a>
     <strong>
      Spring MVC 的作用
     </strong>
    </h4>
    <h5>
     <a id="1__14">
     </a>
     1.
     <strong>
      处理用户请求和响应
     </strong>
    </h5>
    <p>
     • 用户通过浏览器发送请求（如点击链接、提交表单），Spring MVC 的控制器（Controller）接收请求，处理业务逻辑，最终返回响应（如 HTML 页面、JSON 数据）。
    </p>
    <h5>
     <a id="2__17">
     </a>
     2.
     <strong>
      解耦代码，分工协作
     </strong>
    </h5>
    <p>
     •
     <strong>
      Model（模型）
     </strong>
     ：负责数据和业务逻辑（如数据库操作）。
     <br/>
     •
     <strong>
      View（视图）
     </strong>
     ：负责展示数据（如 HTML、JSP、Thymeleaf 模板）。
     <br/>
     •
     <strong>
      Controller（控制器）
     </strong>
     ：负责协调用户请求、调用模型、返回视图。
     <br/>
     • 三者独立开发，修改某一层不会影响其他层。
    </p>
    <h5>
     <a id="3__Servlet__23">
     </a>
     3.
     <strong>
      简化传统 Servlet 开发
     </strong>
    </h5>
    <p>
     • 传统 Servlet 需要手动处理 HTTP 请求参数、响应输出等底层细节，代码臃肿。
     <br/>
     • Spring MVC 通过
     <strong>
      注解（如
      <code>
       @RequestMapping
      </code>
      ）
     </strong>
     和
     <strong>
      自动绑定
     </strong>
     机制，让开发者专注业务逻辑。
     <br/>
     • 例如，直接通过注解将请求参数绑定到 Java 对象：
    </p>
    <pre><code class="prism language-java"> <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 自动将表单参数封装到User对象</span>
     userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="4__37">
     </a>
     4.
     <strong>
      灵活适配多种技术
     </strong>
    </h5>
    <p>
     •
     <strong>
      视图技术
     </strong>
     ：支持 JSP、Thymeleaf、FreeMarker 等模板引擎，甚至直接返回 JSON（适合前后端分离）。
     <br/>
     •
     <strong>
      数据交互
     </strong>
     ：轻松处理 JSON、XML 等数据格式（配合
     <code>
      @RestController
     </code>
     ）。
     <br/>
     •
     <strong>
      整合其他框架
     </strong>
     ：无缝集成 Spring Security（安全）、Spring Data（数据库）等模块。
    </p>
    <h5>
     <a id="5__42">
     </a>
     5.
     <strong>
      强大的扩展性
     </strong>
    </h5>
    <p>
     • 通过拦截器（Interceptor）、全局异常处理（
     <code>
      @ControllerAdvice
     </code>
     ）等机制，可以统一处理日志、权限、异常等问题。
     <br/>
     • 例如，全局拦截未登录用户：
    </p>
    <pre><code class="prism language-java"> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{<!-- --></span>
     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>user未登录<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
             response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="02_Spring_MVC_61">
     </a>
     02 创建Spring MVC项目
    </h2>
    <p>
     以下是两种常用的 Spring MVC 项目搭建方式（
     <strong>
      传统 XML 配置
     </strong>
     和
     <strong>
      Spring Boot 快速搭建
     </strong>
     ）：
    </p>
    <hr/>
    <h4>
     <a id="_Maven__XML__66">
     </a>
     一、传统方式：基于 Maven + XML 配置（适合学习底层原理）
    </h4>
    <h5>
     <a id="1__Maven__68">
     </a>
     1. 创建 Maven 项目
    </h5>
    <h5>
     <a id="2_pomxml_71">
     </a>
     2. 添加依赖（
     <code>
      pom.xml
     </code>
     ）
    </h5>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- Spring MVC 核心依赖 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.29<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Servlet API --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- JSP 支持 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="3__webxml_DispatcherServlet_97">
     </a>
     3. 配置
     <code>
      web.xml
     </code>
     （初始化 DispatcherServlet）
    </h5>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 配置前端控制器 DispatcherServlet --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>dispatcher<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>/WEB-INF/spring-mvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 映射所有请求到 DispatcherServlet --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>dispatcher<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="4__Spring_MVC_WEBINFspringmvcxml_119">
     </a>
     4. 创建 Spring MVC 配置文件（
     <code>
      /WEB-INF/spring-mvc.xml
     </code>
     ）
    </h5>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- 开启注解驱动 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 配置视图解析器（JSP） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/WEB-INF/views/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 扫描 Controller 包 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.controller<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre>
    <h5>
     <a id="5__Controller__JSP__134">
     </a>
     5. 创建 Controller 和 JSP 视图
    </h5>
    <pre><code class="prism language-java"><span class="token comment">// com.example.controller.HomeController.java</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"Hello Spring MVC!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token comment">// 对应 /WEB-INF/views/hello.jsp</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-jsp">&lt;%-- /WEB-INF/views/hello.jsp --%&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;h1&gt;${message}&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
    <h5>
     <a id="6__Tomcat_156">
     </a>
     6. 部署到 Tomcat
    </h5>
    <p>
     • 将项目打包为 WAR 文件，部署到 Tomcat 服务器，访问
     <code>
      http://localhost:8080/项目名/hello
     </code>
     。
    </p>
    <hr/>
    <h4>
     <a id="_Spring_Boot_161">
     </a>
     二、快速方式：基于 Spring Boot
    </h4>
    <h5>
     <a id="1__Spring_Initializr__163">
     </a>
     1. 使用 Spring Initializr 创建项目
    </h5>
    <p>
     • 访问
     <a href="https://start.spring.io" rel="nofollow">
      https://start.spring.io
     </a>
     ，选择：
     <br/>
     •
     <strong>
      依赖
     </strong>
     ：
     <code>
      Spring Web
     </code>
     （已包含 Spring MVC）、
     <code>
      Thymeleaf
     </code>
     （模板引擎）。
     <br/>
     •
     <strong>
      打包方式
     </strong>
     ：JAR（内嵌 Tomcat，无需手动部署）。
    </p>
    <h5>
     <a id="2__168">
     </a>
     2. 项目结构
    </h5>
    <pre><code>src/
  main/
    java/
      com.example.demo/
        DemoApplication.java  // 启动类
        controller/
          HomeController.java
    resources/
      templates/  // 存放视图（如HTML）
      static/     // 存放静态资源（CSS/JS）
</code></pre>
    <h5>
     <a id="3__Controller_182">
     </a>
     3. 编写 Controller
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"Hello Spring Boot MVC!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token comment">// 对应 resources/templates/hello.html</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="4_Thymeleaf_194">
     </a>
     4. 创建视图（Thymeleaf）
    </h5>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- resources/templates/hello.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${message}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="5__205">
     </a>
     5. 运行项目
    </h5>
    <p>
     • 直接运行
     <code>
      DemoApplication.java
     </code>
     的
     <code>
      main
     </code>
     方法，访问
     <code>
      http://localhost:8080/hello
     </code>
     。
    </p>
    <hr/>
    <h4>
     <a id="_210">
     </a>
     三、关键配置说明
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        视图解析器
       </strong>
       ：
       <br/>
       • 传统方式需手动配置 JSP 路径（如
       <code>
        /WEB-INF/views/*.jsp
       </code>
       ）。
       <br/>
       • Spring Boot 默认使用
       <code>
        templates
       </code>
       目录存放视图（需配合模板引擎如 Thymeleaf）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        静态资源访问
       </strong>
       ：
       <br/>
       • Spring Boot 默认将
       <code>
        static
       </code>
       目录下的文件映射为静态资源（如
       <code>
        http://localhost:8080/css/style.css
       </code>
       ）。
       <br/>
       • 传统方式需在 XML 中配置
       <code>
        &lt;mvc:resources location="/static/" mapping="/static/**"/&gt;
       </code>
       。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_221">
     </a>
     四、常见问题
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        404 错误
       </strong>
       ：
       <br/>
       • 检查 Controller 是否被扫描（
       <code>
        @ComponentScan
       </code>
       包路径是否正确）。
       <br/>
       • 视图文件是否放在正确目录（如
       <code>
        templates
       </code>
       或
       <code>
        WEB-INF/views
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        依赖冲突
       </strong>
       ：
       <br/>
       • 确保 Spring 版本与依赖库兼容（推荐使用 Spring Boot 自动管理版本）。
      </p>
     </li>
    </ol>
    <hr/>
    <h2>
     <a id="03_Spring_MVC_231">
     </a>
     03 Spring MVC执行原理
    </h2>
    <p>
     Spring MVC 的执行原理基于
     <strong>
      前端控制器模式
     </strong>
     ，其核心是
     <code>
      DispatcherServlet
     </code>
     ，负责协调各组件处理请求。
    </p>
    <hr/>
    <h4>
     <a id="1__236">
     </a>
     <strong>
      1. 请求接收
     </strong>
    </h4>
    <p>
     •
     <strong>
      用户发起请求
     </strong>
     ：客户端（浏览器）发送HTTP请求至Web应用。
     <br/>
     •
     <strong>
      前端控制器接管
     </strong>
     ：请求首先被
     <code>
      DispatcherServlet
     </code>
     （配置在
     <code>
      web.xml
     </code>
     中）拦截，作为统一入口处理所有请求。
    </p>
    <hr/>
    <h4>
     <a id="2_Handler_Mapping_242">
     </a>
     <strong>
      2. 处理器映射（Handler Mapping）
     </strong>
    </h4>
    <p>
     •
     <strong>
      查找处理器
     </strong>
     ：
     <code>
      DispatcherServlet
     </code>
     通过
     <code>
      HandlerMapping
     </code>
     根据请求URL（如
     <code>
      /hello
     </code>
     ）找到对应的处理器（
     <code>
      Handler
     </code>
     ），通常是
     <code>
      @Controller
     </code>
     中标注
     <code>
      @RequestMapping
     </code>
     的方法。
     <br/>
     •
     <strong>
      返回处理器链
     </strong>
     ：可能包含拦截器（
     <code>
      Interceptor
     </code>
     ）和具体的控制器方法。
    </p>
    <hr/>
    <h4>
     <a id="3_Handler_Adapter_248">
     </a>
     <strong>
      3. 处理器适配器（Handler Adapter）
     </strong>
    </h4>
    <p>
     •
     <strong>
      执行处理器
     </strong>
     ：
     <code>
      HandlerAdapter
     </code>
     调用具体的处理器方法（如
     <code>
      @GetMapping
     </code>
     方法），处理不同形式的控制器（如基于注解或实现
     <code>
      Controller
     </code>
     接口）。
     <br/>
     •
     <strong>
      参数解析与绑定
     </strong>
     ：方法参数通过
     <code>
      ArgumentResolver
     </code>
     解析（如请求参数、模型、
     <code>
      @PathVariable
     </code>
     等）。
     <br/>
     •
     <strong>
      数据转换/验证
     </strong>
     ：使用
     <code>
      Converter
     </code>
     、
     <code>
      Validator
     </code>
     进行类型转换和数据校验。
    </p>
    <hr/>
    <h4>
     <a id="4__255">
     </a>
     <strong>
      4. 控制器处理
     </strong>
    </h4>
    <p>
     •
     <strong>
      业务逻辑执行
     </strong>
     ：控制器方法调用Service层处理业务，返回结果（如
     <code>
      String
     </code>
     视图名、
     <code>
      ModelAndView
     </code>
     或
     <code>
      @ResponseBody
     </code>
     数据）。
     <br/>
     •
     <strong>
      模型数据填充
     </strong>
     ：将数据存储在
     <code>
      Model
     </code>
     对象中，供视图渲染使用。
    </p>
    <hr/>
    <h4>
     <a id="5_View_Resolution_261">
     </a>
     <strong>
      5. 视图解析（View Resolution）
     </strong>
    </h4>
    <p>
     •
     <strong>
      解析视图名
     </strong>
     ：
     <code>
      ViewResolver
     </code>
     根据控制器返回的视图名（如
     <code>
      "home"
     </code>
     ）解析为具体的
     <code>
      View
     </code>
     对象（如JSP、Thymeleaf模板）。
     <br/>
     •
     <strong>
      示例配置
     </strong>
     ：
     <code>
      InternalResourceViewResolver
     </code>
     可能将
     <code>
      "home"
     </code>
     映射到
     <code>
      /WEB-INF/views/home.jsp
     </code>
     。
    </p>
    <hr/>
    <h4>
     <a id="6__267">
     </a>
     <strong>
      6. 视图渲染
     </strong>
    </h4>
    <p>
     •
     <strong>
      模型数据传递
     </strong>
     ：
     <code>
      DispatcherServlet
     </code>
     将模型数据传递给
     <code>
      View
     </code>
     对象。
     <br/>
     •
     <strong>
      生成响应内容
     </strong>
     ：视图使用模板引擎（如JSP、Freemarker）渲染HTML，写入HTTP响应。
    </p>
    <hr/>
    <h4>
     <a id="7__273">
     </a>
     <strong>
      7. 返回响应
     </strong>
    </h4>
    <p>
     •
     <strong>
      响应客户端
     </strong>
     ：渲染后的内容通过
     <code>
      DispatcherServlet
     </code>
     返回给客户端，完成请求-响应周期。
    </p>
    <hr/>
    <h4>
     <a id="_278">
     </a>
     <strong>
      关键组件与扩展点
     </strong>
    </h4>
    <p>
     •
     <strong>
      拦截器（Interceptor）
     </strong>
     ：在请求处理前后执行逻辑（如权限检查、日志记录），通过实现
     <code>
      HandlerInterceptor
     </code>
     接口配置。
     <br/>
     •
     <strong>
      异常处理
     </strong>
     ：
     <code>
      @ExceptionHandler
     </code>
     或
     <code>
      HandlerExceptionResolver
     </code>
     统一处理控制器抛出的异常。
     <br/>
     •
     <strong>
      文件上传
     </strong>
     ：
     <code>
      MultipartResolver
     </code>
     解析 multipart 请求（如文件上传）。
    </p>
    <hr/>
    <h4>
     <a id="_286">
     </a>
     <strong>
      执行流程图示
     </strong>
    </h4>
    <pre><code class="prism language-plaintext">客户端 → DispatcherServlet → HandlerMapping → HandlerAdapter → Controller → ModelAndView → ViewResolver → View → 响应
</code></pre>
    <hr/>
    <h4>
     <a id="_293">
     </a>
     <strong>
      示例配置
     </strong>
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 视图解析器</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ViewResolver</span> <span class="token function">viewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">InternalResourceViewResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternalResourceViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span class="token string">"/WEB-INF/views/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span class="token string">".jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> resolver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 静态资源处理</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureDefaultServletHandling</span><span class="token punctuation">(</span><span class="token class-name">DefaultServletHandlerConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        configurer<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"Hello Spring MVC!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token comment">// 对应 /WEB-INF/views/hello.jsp</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="04_RequestMapping_327">
     </a>
     04 RequestMapping
    </h2>
    <p>
     在 Spring MVC 中，
     <strong>
      <code>
       @RequestMapping
      </code>
     </strong>
     是一个核心注解，用于将 HTTP 请求映射到特定的控制器方法。它提供了灵活的配置选项，支持定义请求路径、HTTP 方法、请求参数、请求头等条件。以下是其详细用法和功能说明：
    </p>
    <hr/>
    <h4>
     <a id="1__332">
     </a>
     <strong>
      1. 基本作用
     </strong>
    </h4>
    <p>
     •
     <strong>
      定义请求映射规则
     </strong>
     ：将 URL 请求路径与控制器方法绑定。
     <br/>
     •
     <strong>
      支持多种请求类型
     </strong>
     ：GET、POST、PUT、DELETE 等。
     <br/>
     •
     <strong>
      支持路径变量、参数过滤、请求头过滤
     </strong>
     等高级条件。
    </p>
    <hr/>
    <h4>
     <a id="2__339">
     </a>
     <strong>
      2. 可用位置
     </strong>
    </h4>
    <p>
     •
     <strong>
      类级别
     </strong>
     ：定义共享的根路径（所有方法映射路径会继承该路径）。
     <br/>
     •
     <strong>
      方法级别
     </strong>
     ：定义具体方法的映射规则。
    </p>
    <h5>
     <a id="_343">
     </a>
     <strong>
      示例
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span> <span class="token comment">// 类级别路径：所有方法映射路径以 /user 开头</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 实际路径：/user/profile</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/profile"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">profile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

    <span class="token comment">// 实际路径：/user/list</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="3__361">
     </a>
     <strong>
      3. 核心属性
     </strong>
    </h4>
    <h5>
     <a id="1_value__path_363">
     </a>
     <strong>
      (1)
      <code>
       value
      </code>
      或
      <code>
       path
      </code>
     </strong>
    </h5>
    <p>
     •
     <strong>
      定义请求路径
     </strong>
     ：支持字符串或字符串数组（允许多路径映射）。
     <br/>
     •
     <strong>
      支持路径变量
     </strong>
     （
     <code>
      {variable}
     </code>
     ）和通配符（
     <code>
      *
     </code>
     ,
     <code>
      **
     </code>
     ）。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 单路径</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/detail"</span><span class="token punctuation">)</span>

<span class="token comment">// 多路径映射</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"/info"</span><span class="token punctuation">,</span> <span class="token string">"/detail"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 路径变量</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token comment">// 通配符匹配（如 /user/2023/order）</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user/*/order"</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h5>
     <a id="2_method_384">
     </a>
     <strong>
      (2)
      <code>
       method
      </code>
     </strong>
    </h5>
    <p>
     •
     <strong>
      指定允许的 HTTP 方法
     </strong>
     ：如
     <code>
      RequestMethod.GET
     </code>
     ,
     <code>
      RequestMethod.POST
     </code>
     。
     <br/>
     •
     <strong>
      默认支持所有 HTTP 方法
     </strong>
     。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 只允许 GET 请求</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/list"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>

<span class="token comment">// 允许多个 HTTP 方法</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/save"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">PUT</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h5>
     <a id="3_params_398">
     </a>
     <strong>
      (3)
      <code>
       params
      </code>
     </strong>
    </h5>
    <p>
     •
     <strong>
      过滤请求参数
     </strong>
     ：要求请求必须包含指定参数，或参数满足特定条件。
     <br/>
     • 格式：
     <code>
      param
     </code>
     （必须存在）、
     <code>
      !param
     </code>
     （必须不存在）、
     <code>
      param=value
     </code>
     （值匹配）。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 要求请求必须包含 id 参数</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>params <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span>

<span class="token comment">// 要求必须包含 id 且值为 100</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>params <span class="token operator">=</span> <span class="token string">"id=100"</span><span class="token punctuation">)</span>

<span class="token comment">// 要求不能包含 debug 参数</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>params <span class="token operator">=</span> <span class="token string">"!debug"</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h5>
     <a id="4_headers_415">
     </a>
     <strong>
      (4)
      <code>
       headers
      </code>
     </strong>
    </h5>
    <p>
     •
     <strong>
      过滤请求头
     </strong>
     ：要求请求头满足特定条件。
     <br/>
     • 格式与
     <code>
      params
     </code>
     类似。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 要求请求头包含 Content-Type=application/json</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>headers <span class="token operator">=</span> <span class="token string">"Content-Type=application/json"</span><span class="token punctuation">)</span>

<span class="token comment">// 要求请求头必须包含 Auth-Token</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>headers <span class="token operator">=</span> <span class="token string">"Auth-Token"</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h5>
     <a id="5_consumes_429">
     </a>
     <strong>
      (5)
      <code>
       consumes
      </code>
     </strong>
    </h5>
    <p>
     •
     <strong>
      指定请求的 Content-Type
     </strong>
     ：要求请求体的媒体类型匹配。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 仅处理 Content-Type 为 application/json 的请求</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>consumes <span class="token operator">=</span> <span class="token string">"application/json"</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h5>
     <a id="6_produces_439">
     </a>
     <strong>
      (6)
      <code>
       produces
      </code>
     </strong>
    </h5>
    <p>
     •
     <strong>
      指定响应的 Content-Type
     </strong>
     ：设置响应体的媒体类型。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 返回 JSON 数据</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>produces <span class="token operator">=</span> <span class="token string">"application/json"</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h4>
     <a id="4__449">
     </a>
     <strong>
      4. 组合注解
     </strong>
    </h4>
    <p>
     为了简化代码，Spring 提供了基于
     <code>
      @RequestMapping
     </code>
     的快捷组合注解：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        组合注解
       </th>
       <th>
        等效写法
       </th>
       <th>
        作用
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         @GetMapping
        </code>
       </td>
       <td>
        <code>
         @RequestMapping(method = RequestMethod.GET)
        </code>
       </td>
       <td>
        处理 GET 请求
       </td>
      </tr>
      <tr>
       <td>
        <code>
         @PostMapping
        </code>
       </td>
       <td>
        <code>
         @RequestMapping(method = RequestMethod.POST)
        </code>
       </td>
       <td>
        处理 POST 请求
       </td>
      </tr>
      <tr>
       <td>
        <code>
         @PutMapping
        </code>
       </td>
       <td>
        <code>
         @RequestMapping(method = RequestMethod.PUT)
        </code>
       </td>
       <td>
        处理 PUT 请求
       </td>
      </tr>
      <tr>
       <td>
        <code>
         @DeleteMapping
        </code>
       </td>
       <td>
        <code>
         @RequestMapping(method = RequestMethod.DELETE)
        </code>
       </td>
       <td>
        处理 DELETE 请求
       </td>
      </tr>
      <tr>
       <td>
        <code>
         @PatchMapping
        </code>
       </td>
       <td>
        <code>
         @RequestMapping(method = RequestMethod.PATCH)
        </code>
       </td>
       <td>
        处理 PATCH 请求
       </td>
      </tr>
     </tbody>
    </table>
    <h5>
     <a id="_459">
     </a>
     <strong>
      示例
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span> <span class="token comment">// 等价于 @RequestMapping(value="/user/{id}", method=RequestMethod.GET)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="5__467">
     </a>
     <strong>
      5. 路径匹配规则
     </strong>
    </h4>
    <h5>
     <a id="1_variable_468">
     </a>
     <strong>
      (1) 路径变量（
      <code>
       {variable}
      </code>
      ）
     </strong>
    </h5>
    <p>
     • 使用
     <code>
      @PathVariable
     </code>
     获取路径中的动态值。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 匹配路径如 /user/123</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="2__479">
     </a>
     <strong>
      (2) 通配符
     </strong>
    </h5>
    <p>
     •
     <code>
      ?
     </code>
     ：匹配单个字符（如
     <code>
      /user/2023?
     </code>
     匹配
     <code>
      /user/2023a
     </code>
     ）。
     <br/>
     •
     <code>
      *
     </code>
     ：匹配同一层级的任意字符（如
     <code>
      /user/*/order
     </code>
     匹配
     <code>
      /user/123/order
     </code>
     ）。
     <br/>
     •
     <code>
      **
     </code>
     ：匹配多层路径（如
     <code>
      /user/**
     </code>
     匹配
     <code>
      /user/123/order/456
     </code>
     ）。
    </p>
    <hr/>
    <h5>
     <a id="3__486">
     </a>
     <strong>
      (3) 正则表达式
     </strong>
    </h5>
    <p>
     • 路径变量中可使用正则表达式限制格式。
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 限制 id 必须为数字</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id:\\d+}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="6__497">
     </a>
     <strong>
      6. 示例代码
     </strong>
    </h4>
    <h5>
     <a id="1__499">
     </a>
     <strong>
      (1) 完整控制器
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/product"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 匹配 GET /product/detail?id=100</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/detail"</span><span class="token punctuation">,</span> params <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">detail</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"product"</span><span class="token punctuation">,</span> productService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"product/detail"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 匹配 POST 或 PUT /product/save</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/save"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">PUT</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ModelAttribute</span> <span class="token class-name">Product</span> product<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        productService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"redirect:/product/list"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 路径变量 + 正则匹配（如 /product/category/electronics）</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/category/{type:[a-z]+}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">listByCategory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"products"</span><span class="token punctuation">,</span> productService<span class="token punctuation">.</span><span class="token function">findByCategory</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"product/list"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="05_Resful_530">
     </a>
     05 Resful风格
    </h2>
    <p>
     RESTful（
     <strong>
      REpresentational State Transfer
     </strong>
     ）是一种基于 HTTP 协议的
     <strong>
      API 设计风格
     </strong>
     ，强调以资源为中心，通过统一的接口和标准方法（GET/POST/PUT/DELETE 等）操作资源。
    </p>
    <hr/>
    <h4>
     <a id="RESTful__535">
     </a>
     <strong>
      一、RESTful 的核心原则
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        资源（Resource）
       </strong>
       <br/>
       • 所有数据或服务抽象为资源（如用户、订单），通过
       <strong>
        URI（统一资源标识符）
       </strong>
       唯一标识。
       <br/>
       • 示例：
       <code>
        /users
       </code>
       （用户集合）、
       <code>
        /users/1001
       </code>
       （ID 为 1001 的用户）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        统一接口（Uniform Interface）
       </strong>
       <br/>
       • 使用标准的
       <strong>
        HTTP 方法
       </strong>
       操作资源：
       <br/>
       ◦
       <strong>
        GET
       </strong>
       ：获取资源
       <br/>
       ◦
       <strong>
        POST
       </strong>
       ：创建资源
       <br/>
       ◦
       <strong>
        PUT
       </strong>
       ：更新资源（全量替换）
       <br/>
       ◦
       <strong>
        PATCH
       </strong>
       ：部分更新资源
       <br/>
       ◦
       <strong>
        DELETE
       </strong>
       ：删除资源
      </p>
     </li>
     <li>
      <p>
       <strong>
        无状态（Stateless）
       </strong>
       <br/>
       • 服务端不保存客户端状态，每个请求必须包含所有必要信息。
      </p>
     </li>
     <li>
      <p>
       <strong>
        表述（Representation）
       </strong>
       <br/>
       • 资源的表现形式（如 JSON、XML），客户端通过 HTTP 头（
       <code>
        Accept
       </code>
       /
       <code>
        Content-Type
       </code>
       ）协商格式。
      </p>
     </li>
     <li>
      <p>
       <strong>
        超媒体驱动（HATEOAS）
       </strong>
       <br/>
       • 响应中包含相关资源的链接，客户端通过链接导航（可选约束，实际使用较少）。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="RESTful_API__559">
     </a>
     <strong>
      二、RESTful API 设计规范
     </strong>
    </h4>
    <h5>
     <a id="1_URI__561">
     </a>
     <strong>
      1. URI 设计规范
     </strong>
    </h5>
    <p>
     •
     <strong>
      使用名词，而非动词
     </strong>
     ：URI 表示资源，动作由 HTTP 方法表达。
    </p>
    <pre><code class="prism language-plaintext">❌ 非 RESTful: /getUser?id=1001  
✅ RESTful: GET /users/1001
</code></pre>
    <p>
     •
     <strong>
      层级关系使用
      <code>
       /
      </code>
      分隔
     </strong>
     ：
    </p>
    <pre><code class="prism language-plaintext">GET /users/1001/orders  # 获取用户 1001 的所有订单
</code></pre>
    <p>
     •
     <strong>
      复数形式命名集合
     </strong>
     ：
    </p>
    <pre><code class="prism language-plaintext">GET /users       # 用户集合
POST /users      # 创建用户
</code></pre>
    <p>
     •
     <strong>
      过滤、排序、分页通过查询参数实现
     </strong>
     ：
    </p>
    <pre><code class="prism language-plaintext">GET /users?page=2&amp;size=10&amp;sort=name,asc  # 分页排序
GET /users?name=John&amp;age=30              # 过滤
</code></pre>
    <h5>
     <a id="2_HTTP__585">
     </a>
     <strong>
      2. HTTP 方法使用规范
     </strong>
    </h5>
    <table>
     <thead>
      <tr>
       <th>
        HTTP 方法
       </th>
       <th>
        操作类型
       </th>
       <th>
        幂等性
       </th>
       <th>
        示例
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         GET
        </strong>
       </td>
       <td>
        查询资源
       </td>
       <td>
        是
       </td>
       <td>
        <code>
         GET /users/1001
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         POST
        </strong>
       </td>
       <td>
        创建资源
       </td>
       <td>
        否
       </td>
       <td>
        <code>
         POST /users
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         PUT
        </strong>
       </td>
       <td>
        全量更新
       </td>
       <td>
        是
       </td>
       <td>
        <code>
         PUT /users/1001
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         PATCH
        </strong>
       </td>
       <td>
        部分更新
       </td>
       <td>
        否
       </td>
       <td>
        <code>
         PATCH /users/1001
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         DELETE
        </strong>
       </td>
       <td>
        删除资源
       </td>
       <td>
        是
       </td>
       <td>
        <code>
         DELETE /users/1001
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <h5>
     <a id="3_Status_Code_594">
     </a>
     <strong>
      3. 状态码（Status Code）
     </strong>
    </h5>
    <p>
     •
     <strong>
      2xx
     </strong>
     ：成功
     <br/>
     •
     <code>
      200 OK
     </code>
     ：常规成功
     <br/>
     •
     <code>
      201 Created
     </code>
     ：资源创建成功
     <br/>
     •
     <code>
      204 No Content
     </code>
     ：成功但无返回体（如删除操作）
    </p>
    <p>
     •
     <strong>
      4xx
     </strong>
     ：客户端错误
     <br/>
     •
     <code>
      400 Bad Request
     </code>
     ：请求参数错误
     <br/>
     •
     <code>
      401 Unauthorized
     </code>
     ：未认证
     <br/>
     •
     <code>
      403 Forbidden
     </code>
     ：无权限
     <br/>
     •
     <code>
      404 Not Found
     </code>
     ：资源不存在
    </p>
    <p>
     •
     <strong>
      5xx
     </strong>
     ：服务端错误
     <br/>
     •
     <code>
      500 Internal Server Error
     </code>
     ：服务器内部错误
    </p>
    <h5>
     <a id="4__609">
     </a>
     <strong>
      4. 数据格式
     </strong>
    </h5>
    <p>
     • 使用
     <strong>
      JSON
     </strong>
     作为主流数据交换格式。
     <br/>
     • 请求头指定
     <code>
      Content-Type: application/json
     </code>
     。
     <br/>
     • 响应头包含
     <code>
      Content-Type: application/json
     </code>
     。
    </p>
    <hr/>
    <h4>
     <a id="_Spring__RESTful_API_616">
     </a>
     <strong>
      三、在 Spring 中实现 RESTful API
     </strong>
    </h4>
    <h5>
     <a id="1__RestController__618">
     </a>
     <strong>
      1. 使用
      <code>
       @RestController
      </code>
      注解
     </strong>
    </h5>
    <p>
     • 替代
     <code>
      @Controller
     </code>
     +
     <code>
      @ResponseBody
     </code>
     ，直接返回 JSON 数据。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/api/users"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="2__HTTP__628">
     </a>
     <strong>
      2. 映射 HTTP 方法
     </strong>
    </h5>
    <p>
     • 使用组合注解：
     <code>
      @GetMapping
     </code>
     ,
     <code>
      @PostMapping
     </code>
     ,
     <code>
      @PutMapping
     </code>
     ,
     <code>
      @DeleteMapping
     </code>
     。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token annotation punctuation">@PostMapping</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="3__638">
     </a>
     <strong>
      3. 处理请求和响应
     </strong>
    </h5>
    <p>
     •
     <strong>
      路径变量
     </strong>
     ：
     <code>
      @PathVariable
     </code>
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
    <p>
     •
     <strong>
      请求体
     </strong>
     ：
     <code>
      @RequestBody
     </code>
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
    <p>
     •
     <strong>
      返回 ResponseEntity
     </strong>
     ：自定义状态码和响应头
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> savedUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">CREATED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>savedUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="4__660">
     </a>
     <strong>
      4. 统一异常处理
     </strong>
    </h5>
    <p>
     • 使用
     <code>
      @ExceptionHandler
     </code>
     和
     <code>
      @ControllerAdvice
     </code>
     返回标准错误响应。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ErrorResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleNotFound</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ErrorResponse</span> error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorResponse</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_675">
     </a>
     <strong>
      四、完整示例
     </strong>
    </h4>
    <h5>
     <a id="1__677">
     </a>
     <strong>
      1. 实体类
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token comment">// Getters and Setters</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="2__687">
     </a>
     <strong>
      2. 控制器
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/api/users"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token comment">// 获取所有用户</span>
    <span class="token annotation punctuation">@GetMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 创建用户</span>
    <span class="token annotation punctuation">@PostMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> savedUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">CREATED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>savedUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取单个用户</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">(</span><span class="token string">"User not found"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 更新用户（全量）</span>
    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 删除用户</span>
    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseStatus</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NO_CONTENT</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        userService<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="3__732">
     </a>
     <strong>
      3. 请求与响应示例
     </strong>
    </h5>
    <p>
     •
     <strong>
      请求
     </strong>
     ：
     <code>
      POST /api/users
     </code>
    </p>
    <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span><span class="token operator">:</span> <span class="token string">"alice@example.com"</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     •
     <strong>
      响应
     </strong>
     （状态码 201）：
    </p>
    <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"id"</span><span class="token operator">:</span> <span class="token number">1001</span><span class="token punctuation">,</span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span><span class="token operator">:</span> <span class="token string">"alice@example.com"</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="06__752">
     </a>
     06 重定向和转发
    </h2>
    <p>
     在 Spring MVC 中，
     <strong>
      重定向（Redirect）
     </strong>
     和
     <strong>
      转发（Forward）
     </strong>
     是两种不同的请求跳转方式，理解它们的区别和适用场景对开发至关重要。以下是详细对比及具体用法：
    </p>
    <hr/>
    <h4>
     <a id="_757">
     </a>
     <strong>
      一、核心区别
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         转发（Forward）
        </strong>
       </th>
       <th>
        <strong>
         重定向（Redirect）
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         发起方
        </strong>
       </td>
       <td>
        服务端内部跳转（客户端无感知）
       </td>
       <td>
        服务端通知客户端重新发起请求
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         请求次数
        </strong>
       </td>
       <td>
        1 次请求，1 次响应
       </td>
       <td>
        2 次请求，2 次响应
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         地址栏变化
        </strong>
       </td>
       <td>
        地址栏 URL 不变
       </td>
       <td>
        地址栏 URL 变为目标地址
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         数据共享
        </strong>
       </td>
       <td>
        共享同一 Request 作用域（
        <code>
         request.setAttribute
        </code>
        ）
       </td>
       <td>
        不共享 Request 作用域，需通过 URL 参数或 Session 传递
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         性能
        </strong>
       </td>
       <td>
        更高（无额外请求）
       </td>
       <td>
        较低（多一次网络往返）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         使用场景
        </strong>
       </td>
       <td>
        服务器内部资源跳转（如 JSP 间共享数据）
       </td>
       <td>
        跨应用跳转、防止表单重复提交（POST-REDIRECT-GET）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="_Spring_MVC__769">
     </a>
     <strong>
      二、在 Spring MVC 中的实现方式
     </strong>
    </h4>
    <h5>
     <a id="1_Forward_771">
     </a>
     <strong>
      1. 转发（Forward）
     </strong>
    </h5>
    <p>
     •
     <strong>
      原理
     </strong>
     ：服务端内部将请求转发到另一个资源（如 JSP、控制器方法）。
     <br/>
     •
     <strong>
      语法
     </strong>
     ：在返回值前加
     <code>
      forward:
     </code>
     前缀。
     <br/>
     •
     <strong>
      示例
     </strong>
     ：
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/page1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">forwardDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 转发到 /page2（客户端 URL 仍为 /page1）</span>
    <span class="token keyword">return</span> <span class="token string">"forward:/page2"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/page2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">page2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"page2"</span><span class="token punctuation">;</span> <span class="token comment">// 视图名对应视图解析器路径</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     •
     <strong>
      数据传递
     </strong>
     ：通过
     <code>
      Model
     </code>
     或
     <code>
      HttpServletRequest
     </code>
     传递数据。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/forward"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">forward</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"Hello from forward!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"forward:/targetPage"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="2_Redirect_799">
     </a>
     <strong>
      2. 重定向（Redirect）
     </strong>
    </h5>
    <p>
     •
     <strong>
      原理
     </strong>
     ：服务端返回 302 状态码和 Location 头，客户端自动发起新请求。
     <br/>
     •
     <strong>
      语法
     </strong>
     ：在返回值前加
     <code>
      redirect:
     </code>
     前缀。
     <br/>
     •
     <strong>
      示例
     </strong>
     ：
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/submit"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token class-name">FormData</span> formData<span class="token punctuation">,</span> <span class="token class-name">RedirectAttributes</span> redirectAttributes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 处理表单数据...</span>
    <span class="token comment">// 重定向到 /result，传递参数</span>
    redirectAttributes<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    redirectAttributes<span class="token punctuation">.</span><span class="token function">addFlashAttribute</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"操作成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"redirect:/result"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/result"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">resultPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> status<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 接收 URL 参数和 Flash 属性</span>
    <span class="token keyword">return</span> <span class="token string">"result"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     •
     <strong>
      数据传递
     </strong>
     ：
     <br/>
     •
     <strong>
      URL 参数
     </strong>
     ：
     <code>
      RedirectAttributes.addAttribute("key", value)
     </code>
     → 参数暴露在 URL 中。
     <br/>
     •
     <strong>
      Flash 属性
     </strong>
     ：
     <code>
      RedirectAttributes.addFlashAttribute("key", value)
     </code>
     → 数据暂存 Session，一次请求后自动删除。
    </p>
    <hr/>
    <h4>
     <a id="_826">
     </a>
     <strong>
      三、适用场景
     </strong>
    </h4>
    <h5>
     <a id="1_Forward_827">
     </a>
     <strong>
      1. 转发（Forward）
     </strong>
    </h5>
    <p>
     •
     <strong>
      共享请求数据
     </strong>
     ：需要在多个视图或控制器间传递数据（如 JSP 到 JSP）。
     <br/>
     •
     <strong>
      隐藏实际资源路径
     </strong>
     ：保护内部资源路径，客户端无法直接访问。
     <br/>
     •
     <strong>
      统一预处理
     </strong>
     ：在转发前进行权限验证、日志记录等。
    </p>
    <h5>
     <a id="2_Redirect_832">
     </a>
     <strong>
      2. 重定向（Redirect）
     </strong>
    </h5>
    <p>
     •
     <strong>
      防止表单重复提交
     </strong>
     ：提交后重定向到结果页（POST-REDIRECT-GET 模式）。
     <br/>
     •
     <strong>
      跨应用跳转
     </strong>
     ：跳转到外部网站或其他服务。
     <br/>
     •
     <strong>
      切换上下文路径
     </strong>
     ：如从 HTTP 跳转到 HTTPS，或更换域名。
    </p>
    <hr/>
    <h4>
     <a id="_841">
     </a>
     <strong>
      五、完整代码示例
     </strong>
    </h4>
    <h5>
     <a id="1__842">
     </a>
     <strong>
      1. 转发示例
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForwardController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/source"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sourcePage</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token string">"来自源页面的数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"forward:/target"</span><span class="token punctuation">;</span> <span class="token comment">// 转发到 /target</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/target"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">targetPage</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 可以访问 model 中的 data</span>
        <span class="token keyword">return</span> <span class="token string">"target-page"</span><span class="token punctuation">;</span> <span class="token comment">// 视图模板路径</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="2__861">
     </a>
     <strong>
      2. 重定向示例
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedirectController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveData</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">RedirectAttributes</span> redirectAttributes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加 URL 参数（暴露在地址栏）</span>
        redirectAttributes<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加 Flash 属性（安全传递敏感数据）</span>
        redirectAttributes<span class="token punctuation">.</span><span class="token function">addFlashAttribute</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"用户保存成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"redirect:/user/detail"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/detail"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">userDetail</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"user-detail"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_887">
     </a>
     <strong>
      六、总结
     </strong>
    </h4>
    <p>
     •
     <strong>
      转发（Forward）
     </strong>
     ：适合服务器内部资源跳转，共享请求数据，性能更高。
     <br/>
     •
     <strong>
      重定向（Redirect）
     </strong>
     ：适合客户端跳转、防止重复提交，需注意数据传递方式。
     <br/>
     •
     <strong>
      开发建议
     </strong>
     ：
     <br/>
     • 表单提交后
     <strong>
      必须使用重定向
     </strong>
     避免重复提交。
     <br/>
     • 优先使用
     <code>
      RedirectAttributes
     </code>
     传递数据，避免 URL 参数暴露敏感信息。
    </p>
    <h2>
     <a id="07__894">
     </a>
     07 接收请求参数和数据回显
    </h2>
    <h4>
     <a id="_897">
     </a>
     <strong>
      一、接收请求参数
     </strong>
    </h4>
    <h5>
     <a id="1__899">
     </a>
     <strong>
      1. 基本参数接收
     </strong>
    </h5>
    <p>
     •
     <strong>
      <code>
       @RequestParam
      </code>
     </strong>
     ：获取 URL 参数或表单字段（默认必传，可设
     <code>
      required=false
     </code>
     ）。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId<span class="token punctuation">,</span> 
                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">"Guest"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// URL: /user?id=1001&amp;name=Alice</span>
    <span class="token comment">// userId=1001, userName=Alice（若未传name，默认为"Guest"）</span>
    <span class="token keyword">return</span> <span class="token string">"user/detail"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     •
     <strong>
      <code>
       @PathVariable
      </code>
     </strong>
     ：获取 URL 路径变量。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// URL: /user/1001 → userId=1001</span>
    <span class="token keyword">return</span> <span class="token string">"user/detail"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="2__922">
     </a>
     <strong>
      2. 对象自动绑定
     </strong>
    </h5>
    <p>
     •
     <strong>
      <code>
       @ModelAttribute
      </code>
     </strong>
     ：自动将表单字段绑定到对象（支持级联属性）。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ModelAttribute</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 表单字段 name 和 email 自动绑定到 User 对象</span>
    userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"redirect:/user/list"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     •
     <strong>
      无需注解
     </strong>
     ：直接声明对象参数，Spring 自动绑定。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 效果同上</span>
    userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"redirect:/user/list"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="3__JSON__944">
     </a>
     <strong>
      3. 接收 JSON 数据
     </strong>
    </h5>
    <p>
     •
     <strong>
      <code>
       @RequestBody
      </code>
     </strong>
     ：将请求体中的 JSON 反序列化为对象。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/api/user"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> savedUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>savedUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="4__957">
     </a>
     <strong>
      4. 接收原生对象
     </strong>
    </h5>
    <p>
     • 直接使用
     <code>
      HttpServletRequest
     </code>
     、
     <code>
      HttpSession
     </code>
     等原生对象。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/info"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> param <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"param"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"info"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_970">
     </a>
     <strong>
      二、数据回显（传递到视图）
     </strong>
    </h4>
    <h5>
     <a id="1__Model__ModelMap_972">
     </a>
     <strong>
      1. 使用
      <code>
       Model
      </code>
      或
      <code>
       ModelMap
      </code>
     </strong>
    </h5>
    <p>
     • 添加数据到模型，供视图（如 JSP、Thymeleaf）渲染。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/edit"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">editUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 回显到表单</span>
    <span class="token keyword">return</span> <span class="token string">"user/edit"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="2__ModelAndView_985">
     </a>
     <strong>
      2. 使用
      <code>
       ModelAndView
      </code>
     </strong>
    </h5>
    <p>
     • 同时返回视图名和数据。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/detail"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">userDetail</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">ModelAndView</span> mav <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">"user/detail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mav<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> mav<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="08_JSON_1000">
     </a>
     08 JSON
    </h2>
    <p>
     在 Spring 生态中，
     <strong>
      JSON（JavaScript Object Notation）
     </strong>
     是主流的轻量级数据交换格式，而
     <strong>
      Jackson
     </strong>
     是处理 JSON 序列化与反序列化的核心库。
    </p>
    <hr/>
    <h4>
     <a id="JSON__1005">
     </a>
     <strong>
      一、JSON 简介
     </strong>
    </h4>
    <h5>
     <a id="1__JSON_1006">
     </a>
     <strong>
      1. 什么是 JSON？
     </strong>
    </h5>
    <p>
     •
     <strong>
      轻量级数据格式
     </strong>
     ：以键值对（
     <code>
      key: value
     </code>
     ）形式组织数据，易读且兼容性强。
     <br/>
     •
     <strong>
      数据结构
     </strong>
     ：
     <br/>
     •
     <strong>
      对象
     </strong>
     ：
     <code>
      { "key": value }
     </code>
     <br/>
     •
     <strong>
      数组
     </strong>
     ：
     <code>
      [ value1, value2 ]
     </code>
     <br/>
     •
     <strong>
      值类型
     </strong>
     ：字符串、数字、布尔值、
     <code>
      null
     </code>
     、对象、数组。
    </p>
    <h5>
     <a id="2__1013">
     </a>
     <strong>
      2. 应用场景
     </strong>
    </h5>
    <p>
     •
     <strong>
      前后端数据交互
     </strong>
     ：API 请求和响应。
     <br/>
     •
     <strong>
      配置文件
     </strong>
     （如
     <code>
      package.json
     </code>
     ）。
     <br/>
     •
     <strong>
      NoSQL 数据库
     </strong>
     （如 MongoDB）存储格式。
    </p>
    <h5>
     <a id="3__XML_1018">
     </a>
     <strong>
      3. 对比 XML
     </strong>
    </h5>
    <table>
     <thead>
      <tr>
       <th>
        特性
       </th>
       <th>
        JSON
       </th>
       <th>
        XML
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        可读性
       </td>
       <td>
        高（结构简洁）
       </td>
       <td>
        较低（标签冗余）
       </td>
      </tr>
      <tr>
       <td>
        数据体积
       </td>
       <td>
        更小
       </td>
       <td>
        更大
       </td>
      </tr>
      <tr>
       <td>
        解析速度
       </td>
       <td>
        更快
       </td>
       <td>
        较慢
       </td>
      </tr>
      <tr>
       <td>
        扩展性
       </td>
       <td>
        弱（无命名空间、属性等概念）
       </td>
       <td>
        强（支持复杂结构）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="Jackson__1028">
     </a>
     <strong>
      二、Jackson 核心功能
     </strong>
    </h4>
    <p>
     Jackson 是 Java 生态中最流行的
     <strong>
      JSON 处理库
     </strong>
     ，提供以下能力：
    </p>
    <ol>
     <li>
      <strong>
       序列化
      </strong>
      ：将 Java 对象转换为 JSON 字符串。
     </li>
     <li>
      <strong>
       反序列化
      </strong>
      ：将 JSON 字符串解析为 Java 对象。
     </li>
     <li>
      <strong>
       数据绑定
      </strong>
      ：支持注解驱动配置。
     </li>
     <li>
      <strong>
       流式 API
      </strong>
      ：高性能处理大 JSON 数据。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="Spring__Jackson_1037">
     </a>
     <strong>
      三、Spring 中集成 Jackson
     </strong>
    </h4>
    <p>
     Spring MVC 默认通过
     <strong>
      <code>
       MappingJackson2HttpMessageConverter
      </code>
     </strong>
     集成 Jackson，自动处理 JSON 转换。
    </p>
    <h5>
     <a id="1__1040">
     </a>
     <strong>
      1. 添加依赖
     </strong>
    </h5>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- Maven 依赖 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.15.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="2__JSON__1050">
     </a>
     <strong>
      2. 启用 JSON 支持
     </strong>
    </h5>
    <p>
     •
     <strong>
      注解驱动
     </strong>
     ：使用
     <code>
      @RestController
     </code>
     或
     <code>
      @ResponseBody
     </code>
     。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span> <span class="token comment">// 等效于 @Controller + @ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/api/users"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="Jackson__1066">
     </a>
     <strong>
      四、Jackson 核心注解
     </strong>
    </h4>
    <p>
     通过注解控制序列化/反序列化行为：
    </p>
    <h5>
     <a id="1__1069">
     </a>
     <strong>
      1. 字段映射
     </strong>
    </h5>
    <p>
     •
     <strong>
      <code>
       @JsonProperty
      </code>
     </strong>
     ：指定 JSON 字段名。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span><span class="token string">"user_name"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 序列化为 { "user_name": "Alice" }</span>
</code></pre>
    <p>
     •
     <strong>
      <code>
       @JsonIgnore
      </code>
     </strong>
     ：忽略字段。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JsonIgnore</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="2__1087">
     </a>
     <strong>
      2. 日期格式化
     </strong>
    </h5>
    <p>
     •
     <strong>
      <code>
       @JsonFormat
      </code>
     </strong>
     ：自定义日期格式。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">,</span> timezone <span class="token operator">=</span> <span class="token string">"GMT+8"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 序列化为 "2023-10-01 14:30:00"</span>
</code></pre>
    <h5>
     <a id="3__1097">
     </a>
     <strong>
      3. 空值处理
     </strong>
    </h5>
    <p>
     •
     <strong>
      <code>
       @JsonInclude
      </code>
     </strong>
     ：忽略空值字段。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@JsonInclude</span><span class="token punctuation">(</span><span class="token class-name">JsonInclude<span class="token punctuation">.</span>Include</span><span class="token punctuation">.</span><span class="token constant">NON_NULL</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span> <span class="token comment">// 若 email 为 null，不序列化</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_1108">
     </a>
     <strong>
      五、序列化与反序列化示例
     </strong>
    </h4>
    <h5>
     <a id="1_Java__JSON_1109">
     </a>
     <strong>
      1. Java 对象转 JSON（序列化）
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> json <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：{"name":"Alice","age":30}</span>
</code></pre>
    <h5>
     <a id="2_JSON__Java__1117">
     </a>
     <strong>
      2. JSON 转 Java 对象（反序列化）
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{\"name\":\"Alice\",\"age\":30}"</span><span class="token punctuation">;</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h4>
     <a id="Spring__1125">
     </a>
     <strong>
      六、Spring 中高级配置
     </strong>
    </h4>
    <h5>
     <a id="1__ObjectMapper_1126">
     </a>
     <strong>
      1. 自定义 ObjectMapper
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JacksonConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ObjectMapper</span> <span class="token function">objectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">setDateFormat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">setSerializationInclusion</span><span class="token punctuation">(</span><span class="token class-name">JsonInclude<span class="token punctuation">.</span>Include</span><span class="token punctuation">.</span><span class="token constant">NON_NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mapper<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_1143">
     </a>
     <strong>
      七、常见问题与解决方案
     </strong>
    </h4>
    <h5>
     <a id="1__1144">
     </a>
     <strong>
      1. 日期格式不生效
     </strong>
    </h5>
    <p>
     •
     <strong>
      问题
     </strong>
     ：日期字段未按预期格式序列化。
     <br/>
     •
     <strong>
      解决
     </strong>
     ：检查
     <code>
      @JsonFormat
     </code>
     的
     <code>
      timezone
     </code>
     配置或全局
     <code>
      ObjectMapper
     </code>
     日期格式。
    </p>
    <h5>
     <a id="2__1148">
     </a>
     <strong>
      2. 字段丢失
     </strong>
    </h5>
    <p>
     •
     <strong>
      问题
     </strong>
     ：JSON 中缺少字段导致反序列化失败。
     <br/>
     •
     <strong>
      解决
     </strong>
     ：配置
     <code>
      ObjectMapper
     </code>
     忽略未知字段：
    </p>
    <pre><code class="prism language-java">mapper<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">DeserializationFeature</span><span class="token punctuation">.</span><span class="token constant">FAIL_ON_UNKNOWN_PROPERTIES</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="09_Fastjson_1155">
     </a>
     09 Fastjson
    </h2>
    <p>
     在 Java 开发中，
     <strong>
      Fastjson
     </strong>
     是阿里巴巴开源的高性能 JSON 库，广泛用于序列化（Java 对象转 JSON）和反序列化（JSON 转 Java 对象）。与 Jackson 相比，Fastjson 在部分场景下性能更优，且 API 设计更简单易用。以下是其核心特性、使用方式及注意事项：
    </p>
    <hr/>
    <h4>
     <a id="Fastjson__1160">
     </a>
     <strong>
      一、Fastjson 核心特性
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        高性能
       </strong>
       <br/>
       • 序列化/反序列化速度极快，尤其在大数据量场景下表现优异。
       <br/>
       • 依赖 ASM 字节码技术优化（无需反射），性能优于 Jackson 和 Gson。
      </p>
     </li>
     <li>
      <p>
       <strong>
        功能丰富
       </strong>
       <br/>
       • 支持复杂对象（泛型、嵌套对象、循环引用）。
       <br/>
       • 支持 Java 8 时间 API（如
       <code>
        LocalDateTime
       </code>
       ）。
       <br/>
       • 支持自定义序列化规则和过滤器。
      </p>
     </li>
     <li>
      <p>
       <strong>
        简单 API
       </strong>
       <br/>
       • 核心类
       <code>
        JSON
       </code>
       提供静态方法（如
       <code>
        JSON.toJSONString()
       </code>
       、
       <code>
        JSON.parseObject()
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        注解驱动
       </strong>
       <br/>
       • 通过
       <code>
        @JSONField
       </code>
       注解灵活控制字段映射和格式。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_Jackson__1178">
     </a>
     <strong>
      二、与 Jackson 对比
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         Fastjson
        </strong>
       </th>
       <th>
        <strong>
         Jackson
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         性能
        </strong>
       </td>
       <td>
        更高（尤其序列化）
       </td>
       <td>
        较高
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         安全性
        </strong>
       </td>
       <td>
        历史漏洞较多（需使用最新版本）
       </td>
       <td>
        安全性较好
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         API 简洁性
        </strong>
       </td>
       <td>
        极简（静态方法）
       </td>
       <td>
        稍复杂（需
        <code>
         ObjectMapper
        </code>
        实例）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         社区生态
        </strong>
       </td>
       <td>
        国内流行，文档丰富
       </td>
       <td>
        国际主流，生态更成熟
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         维护状态
        </strong>
       </td>
       <td>
        阿里巴巴维护，更新频繁
       </td>
       <td>
        长期稳定更新
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="Spring__Fastjson_1189">
     </a>
     <strong>
      三、Spring 中集成 Fastjson
     </strong>
    </h4>
    <p>
     Spring Boot 默认使用 Jackson，若需替换为 Fastjson，需手动配置消息转换器。
    </p>
    <h5>
     <a id="1__1192">
     </a>
     <strong>
      1. 添加依赖
     </strong>
    </h5>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- Maven 依赖 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.34<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 使用最新版本（避免安全漏洞） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="2__Fastjson__1202">
     </a>
     <strong>
      2. 配置 Fastjson 消息转换器
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureMessageConverters</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpMessageConverter</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> converters<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建 Fastjson 消息转换器</span>
        <span class="token class-name">FastJsonHttpMessageConverter</span> converter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonHttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 配置序列化规则</span>
        <span class="token class-name">FastJsonConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setSerializerFeatures</span><span class="token punctuation">(</span>
            <span class="token class-name">SerializerFeature<span class="token punctuation">.</span>PrettyFormat</span><span class="token punctuation">,</span>       <span class="token comment">// 格式化输出</span>
            <span class="token class-name">SerializerFeature<span class="token punctuation">.</span>WriteMapNullValue</span><span class="token punctuation">,</span>  <span class="token comment">// 输出空值字段</span>
            <span class="token class-name">SerializerFeature<span class="token punctuation">.</span>WriteDateUseDateFormat</span> <span class="token comment">// 日期格式化</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        converter<span class="token punctuation">.</span><span class="token function">setFastJsonConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 处理中文乱码</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MediaType</span><span class="token punctuation">&gt;</span></span> mediaTypes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaTypes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_JSON_UTF8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        converter<span class="token punctuation">.</span><span class="token function">setSupportedMediaTypes</span><span class="token punctuation">(</span>mediaTypes<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 替换默认 Jackson 转换器</span>
        converters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> converter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_API__1235">
     </a>
     <strong>
      四、核心 API 使用示例
     </strong>
    </h4>
    <h5>
     <a id="1_Java__JSON_1237">
     </a>
     <strong>
      1. 序列化（Java → JSON）
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 简单序列化</span>
<span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 输出：{"age":25,"name":"Alice","createTime":"2023-10-01 14:30:00"}</span>

<span class="token comment">// 带格式化的序列化</span>
<span class="token class-name">String</span> prettyJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token class-name">SerializerFeature<span class="token punctuation">.</span>PrettyFormat</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="2_JSON__Java_1249">
     </a>
     <strong>
      2. 反序列化（JSON → Java）
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{\"name\":\"Bob\",\"age\":30}"</span><span class="token punctuation">;</span>

<span class="token comment">// 基本反序列化</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 处理泛型（如 List）</span>
<span class="token class-name">String</span> listJson <span class="token operator">=</span> <span class="token string">"[{\"name\":\"Alice\"}, {\"name\":\"Bob\"}]"</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>listJson<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_JSONField_1263">
     </a>
     <strong>
      五、注解
      <code>
       @JSONField
      </code>
     </strong>
    </h4>
    <p>
     通过注解控制字段的序列化行为：
    </p>
    <h5>
     <a id="1__1266">
     </a>
     <strong>
      1. 字段重命名
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"user_name"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token comment">// 序列化为 "user_name"</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="2__1274">
     </a>
     <strong>
      2. 忽略字段
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>serialize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span> <span class="token comment">// 不序列化</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="3__1282">
     </a>
     <strong>
      3. 日期格式化
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>format <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDate</span> birthDate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="4__1290">
     </a>
     <strong>
      4. 顺序控制
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@JSONType</span><span class="token punctuation">(</span>orders <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 类级别定义字段顺序</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="10_ssm_1302">
     </a>
     10 ssm整合项目搭建
    </h2>
    <h4>
     <a id="Spring_MVC__1303">
     </a>
     <strong>
      Spring MVC 图书管理系统开发流程与示例
     </strong>
    </h4>
    <hr/>
    <h5>
     <a id="_1307">
     </a>
     <strong>
      一、项目目录结构（简化版）
     </strong>
    </h5>
    <pre><code class="prism language-plaintext">src/
├── main/
│   ├── java/
│   │   └── com/
│   │       └── example/
│   │           ├── controller/    # 控制器层
│   │           │   └── BookController.java
│   │           ├── dao/          # DAO层（MyBatis Mapper接口）
│   │           │   └── BookMapper.java
│   │           ├── service/      # 业务层
│   │           │   ├── BookService.java
│   │           │   └── impl/
│   │           │       └── BookServiceImpl.java
│   │           └── entity/       # 实体类
│   │               └── Book.java
│   └── resources/
│       ├── mapper/               # MyBatis Mapper XML
│       │   └── BookMapper.xml
│       ├── spring/              # Spring配置
│       │   ├── spring.xml
│       │   └── spring-mvc.xml
│       └── jdbc.properties      # 数据库配置
webapp/
├── WEB-INF/
│   └── views/                   # JSP视图
│       └── book/
│           └── list.jsp
└── index.jsp
</code></pre>
    <hr/>
    <h5>
     <a id="_1341">
     </a>
     <strong>
      二、开发流程与代码示例
     </strong>
    </h5>
    <h6>
     <a id="1__1343">
     </a>
     <strong>
      1. 创建数据库表
     </strong>
    </h6>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> book <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    author <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h6>
     <a id="2__BookjavaPOJO_1355">
     </a>
     <strong>
      2. 实体类
      <code>
       Book.java
      </code>
      （POJO层）
     </strong>
    </h6>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>
    
    <span class="token comment">// Getters and Setters</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h6>
     <a id="3_DAO_BookMapperjava_1371">
     </a>
     <strong>
      3. DAO层接口
      <code>
       BookMapper.java
      </code>
     </strong>
    </h6>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Book</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookMapper</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h6>
     <a id="4_MyBatis_Mapper_XML_BookMapperxml_1387">
     </a>
     <strong>
      4. MyBatis Mapper XML
      <code>
       BookMapper.xml
      </code>
     </strong>
    </h6>
    <pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> 
    <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.dao.BookMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectAll<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Book<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        SELECT id, name, author, price FROM book
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insert<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Book<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        INSERT INTO book(name, author, price)
        VALUES(#{name}, #{author}, #{price})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deleteById<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Integer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        DELETE FROM book WHERE id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <hr/>
    <h6>
     <a id="5_Service_1410">
     </a>
     <strong>
      5. Service层实现业务逻辑
     </strong>
    </h6>
    <pre><code class="prism language-java"><span class="token comment">// 接口 BookService.java</span>
<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Book</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> <span class="token function">listBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">addBook</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 实现类 BookServiceImpl.java</span>
<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">BookMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Book</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">BookService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookMapper</span> bookMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> <span class="token function">listBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addBook</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bookMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bookMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h6>
     <a id="6_Controller_1460">
     </a>
     <strong>
      6. Controller层处理请求
     </strong>
    </h6>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Book</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">BookService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>ui<span class="token punctuation">.</span></span><span class="token class-name">Model</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookService</span> bookService<span class="token punctuation">;</span>

    <span class="token comment">// 查询所有书籍</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">listBooks</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"books"</span><span class="token punctuation">,</span> bookService<span class="token punctuation">.</span><span class="token function">listBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"book/list"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 添加书籍（表单提交）</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">addBook</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bookService<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"redirect:/book/list"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 删除书籍</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/delete/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        bookService<span class="token punctuation">.</span><span class="token function">deleteBook</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"redirect:/book/list"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h6>
     <a id="7__1502">
     </a>
     <strong>
      7. 配置文件
     </strong>
    </h6>
    <h6>
     <a id="1_jdbcproperties_1503">
     </a>
     <strong>
      (1)
      <code>
       jdbc.properties
      </code>
     </strong>
    </h6>
    <pre><code class="prism language-properties">jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/book_db?useSSL=false&amp;serverTimezone=UTC
jdbc.username=root
jdbc.password=123456
</code></pre>
    <h6>
     <a id="2_springxmlSpring_1511">
     </a>
     <strong>
      (2)
      <code>
       spring.xml
      </code>
      （Spring核心配置）
     </strong>
    </h6>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- 数据源 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.driver}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.url}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.username}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.password}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- MyBatis SqlSessionFactory --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapperLocations<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:mapper/*.xml<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Mapper接口扫描 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.dao<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 事务管理器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 开启注解扫描 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.service<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre>
    <h6>
     <a id="3_springmvcxmlSpring_MVC_1541">
     </a>
     <strong>
      (3)
      <code>
       spring-mvc.xml
      </code>
      （Spring MVC配置）
     </strong>
    </h6>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- 注解驱动 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 视图解析器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/WEB-INF/views/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 扫描控制器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.controller<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 静态资源处理 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>resources</span> <span class="token attr-name">mapping</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/**<span class="token punctuation">"</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre>
    <hr/>
    <h6>
     <a id="8__listjsp_1561">
     </a>
     <strong>
      8. 视图层
      <code>
       list.jsp
      </code>
     </strong>
    </h6>
    <pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;图书列表&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;图书列表&lt;/h2&gt;
    &lt;table border="1"&gt;
        &lt;tr&gt;
            &lt;th&gt;ID&lt;/th&gt;
            &lt;th&gt;书名&lt;/th&gt;
            &lt;th&gt;作者&lt;/th&gt;
            &lt;th&gt;价格&lt;/th&gt;
            &lt;th&gt;操作&lt;/th&gt;
        &lt;/tr&gt;
        &lt;c:forEach items="${books}" var="book"&gt;
            &lt;tr&gt;
                &lt;td&gt;${book.id}&lt;/td&gt;
                &lt;td&gt;${book.name}&lt;/td&gt;
                &lt;td&gt;${book.author}&lt;/td&gt;
                &lt;td&gt;${book.price}&lt;/td&gt;
                &lt;td&gt;
                    &lt;a href="/book/delete/${book.id}"&gt;删除&lt;/a&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/c:forEach&gt;
    &lt;/table&gt;

    &lt;h3&gt;添加新书&lt;/h3&gt;
    &lt;form action="/book/add" method="post"&gt;
        书名：&lt;input type="text" name="name"&gt;&lt;br&gt;
        作者：&lt;input type="text" name="author"&gt;&lt;br&gt;
        价格：&lt;input type="number" step="0.01" name="price"&gt;&lt;br&gt;
        &lt;button type="submit"&gt;提交&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
    <hr/>
    <h5>
     <a id="_1605">
     </a>
     <strong>
      三、关键流程说明
     </strong>
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        请求处理流程
       </strong>
      </p>
      <pre><code class="prism language-plaintext">浏览器请求 → DispatcherServlet → BookController → BookService → BookMapper → 数据库
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        分层职责
       </strong>
       <br/>
       •
       <strong>
        DAO层
       </strong>
       ：直接操作数据库，提供
       <code>
        insert
       </code>
       、
       <code>
        delete
       </code>
       等方法。
       <br/>
       •
       <strong>
        Service层
       </strong>
       ：处理业务逻辑（如事务管理
       <code>
        @Transactional
       </code>
       ）。
       <br/>
       •
       <strong>
        Controller层
       </strong>
       ：接收HTTP请求，返回视图或重定向。
      </p>
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="_1618">
     </a>
     <strong>
      四、启动与测试
     </strong>
    </h5>
    <ol>
     <li>
      部署到Tomcat，访问
      <code>
       http://localhost:8080/book/list
      </code>
      。
     </li>
     <li>
      添加图书：填写表单提交，数据插入数据库。
     </li>
     <li>
      删除图书：点击删除链接，触发
      <code>
       DELETE
      </code>
      操作。
     </li>
    </ol>
    <hr/>
    <h2>
     <a id="11_SSM_1625">
     </a>
     11 整合SSM框架的配置文件
    </h2>
    <h4>
     <a id="SSM__1626">
     </a>
     <strong>
      SSM 整合核心配置文件详解
     </strong>
    </h4>
    <p>
     以下是整合 Spring、Spring MVC 和 MyBatis（SSM）时
     <strong>
      必须配置的核心内容
     </strong>
     ，分步骤说明每个配置文件的作用和关键配置项。
    </p>
    <hr/>
    <h5>
     <a id="_1632">
     </a>
     <strong>
      一、项目结构
     </strong>
    </h5>
    <pre><code>src/
├── main/
│   ├── java/
│   │   └── com/example/
│   │       ├── controller/   # Spring MVC 控制器
│   │       ├── service/      # 业务层接口和实现
│   │       ├── dao/          # MyBatis Mapper 接口
│   │       └── entity/       # 数据库实体类
│   └── resources/
│       ├── spring/
│       │   ├── spring.xml     # Spring 核心配置
│       │   └── spring-mvc.xml# Spring MVC 配置
│       ├── mapper/           # MyBatis Mapper XML 文件
│       └── jdbc.properties    # 数据库连接配置
webapp/
├── WEB-INF/
│   └── views/                # JSP 视图文件
└── index.jsp
</code></pre>
    <hr/>
    <h5>
     <a id="Spring__springxml_1656">
     </a>
     <strong>
      二、Spring 核心配置 (
      <code>
       spring.xml
      </code>
      )
     </strong>
    </h5>
    <pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 1. 加载数据库配置文件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:jdbc.properties<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 2. 配置数据源（Druid） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.driver}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.url}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.username}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${jdbc.password}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 连接池参数 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initialSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxActive<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 3. 配置 MyBatis 的 SqlSessionFactory --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 绑定数据源 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 指定 MyBatis Mapper XML 文件路径 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapperLocations<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:mapper/*.xml<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 可选：MyBatis 全局配置文件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>configLocation<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:mybatis-config.xml<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 4. 自动扫描 Mapper 接口 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.dao<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 5. 事务管理器 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 6. 开启注解驱动的事务管理 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 7. 扫描 Service 层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.service<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h6>
     <a id="_1712">
     </a>
     <strong>
      关键配置说明
     </strong>
     :
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         &lt;context:property-placeholder&gt;
        </code>
       </strong>
       <br/>
       加载
       <code>
        jdbc.properties
       </code>
       文件中的数据库连接参数。
       <br/>
       •
       <code>
        jdbc.driver
       </code>
       : 数据库驱动类（如
       <code>
        com.mysql.cj.jdbc.Driver
       </code>
       ）。
       <br/>
       •
       <code>
        jdbc.url
       </code>
       : 数据库连接 URL（如
       <code>
        jdbc:mysql://localhost:3306/test
       </code>
       ）。
       <br/>
       •
       <code>
        jdbc.username
       </code>
       /
       <code>
        jdbc.password
       </code>
       : 数据库用户名和密码。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         DruidDataSource
        </code>
       </strong>
       <br/>
       • 使用 Druid 连接池管理数据库连接。
       <br/>
       •
       <code>
        initialSize
       </code>
       /
       <code>
        maxActive
       </code>
       : 连接池初始大小和最大连接数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         SqlSessionFactoryBean
        </code>
       </strong>
       <br/>
       • 核心类，用于创建 MyBatis 的
       <code>
        SqlSession
       </code>
       。
       <br/>
       •
       <code>
        mapperLocations
       </code>
       : 指定 Mapper XML 文件的路径（支持通配符
       <code>
        *
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         MapperScannerConfigurer
        </code>
       </strong>
       <br/>
       • 自动扫描 DAO 层的 Mapper 接口，并注册为 Spring Bean。
       <br/>
       •
       <code>
        basePackage
       </code>
       : Mapper 接口所在的包路径。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         DataSourceTransactionManager
        </code>
       </strong>
       <br/>
       • 基于数据源的事务管理器，用于管理数据库事务。
       <br/>
       •
       <code>
        &lt;tx:annotation-driven&gt;
       </code>
       开启
       <code>
        @Transactional
       </code>
       注解支持。
      </p>
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="Spring_MVC__springmvcxml_1737">
     </a>
     <strong>
      三、Spring MVC 配置 (
      <code>
       spring-mvc.xml
      </code>
      )
     </strong>
    </h5>
    <pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/mvc<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 1. 开启注解驱动（支持 @Controller、@RequestMapping 等） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 2. 静态资源处理（CSS/JS/图片） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>resources</span> <span class="token attr-name">mapping</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/**<span class="token punctuation">"</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 3. 视图解析器（JSP） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/WEB-INF/views/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 4. 扫描 Controller 层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.controller<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h6>
     <a id="_1768">
     </a>
     <strong>
      关键配置说明
     </strong>
     :
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         &lt;mvc:annotation-driven&gt;
        </code>
       </strong>
       <br/>
       • 启用 Spring MVC 的注解驱动功能（如
       <code>
        @Controller
       </code>
       、
       <code>
        @RequestMapping
       </code>
       ）。
       <br/>
       • 自动注册
       <code>
        RequestMappingHandlerMapping
       </code>
       和
       <code>
        RequestMappingHandlerAdapter
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         &lt;mvc:resources&gt;
        </code>
       </strong>
       <br/>
       • 处理静态资源请求（如
       <code>
        /static/css/style.css
       </code>
       ）。
       <br/>
       •
       <code>
        mapping
       </code>
       : URL 映射规则。
       <br/>
       •
       <code>
        location
       </code>
       : 静态资源在项目中的路径。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         InternalResourceViewResolver
        </code>
       </strong>
       <br/>
       • 将逻辑视图名解析为具体的 JSP 文件路径。
       <br/>
       •
       <code>
        prefix
       </code>
       : 视图文件的前缀路径（如
       <code>
        /WEB-INF/views/book/list.jsp
       </code>
       ）。
       <br/>
       •
       <code>
        suffix
       </code>
       : 视图文件的后缀（如
       <code>
        .jsp
       </code>
       ）。
      </p>
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="MyBatis__mybatisconfigxml_1785">
     </a>
     <strong>
      四、MyBatis 全局配置 (
      <code>
       mybatis-config.xml
      </code>
      ，可选)
     </strong>
    </h5>
    <pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span> 
    <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 1. 全局设置 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 开启驼峰命名映射（数据库字段 user_name → Java 属性 userName） --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapUnderscoreToCamelCase<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 开启缓存 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cacheEnabled<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 2. 实体类别名（简化 Mapper XML 中的类型书写） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.entity<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h6>
     <a id="_1806">
     </a>
     <strong>
      关键配置说明
     </strong>
     :
    </h6>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         mapUnderscoreToCamelCase
        </code>
       </strong>
       <br/>
       • 自动将数据库字段的下划线命名转换为 Java 属性的驼峰命名。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         typeAliases
        </code>
       </strong>
       <br/>
       • 为实体类设置别名，例如
       <code>
        &lt;select resultType="Book"&gt;
       </code>
       代替全类名
       <code>
        com.example.entity.Book
       </code>
       。
      </p>
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="_jdbcproperties_1815">
     </a>
     <strong>
      五、数据库连接配置 (
      <code>
       jdbc.properties
      </code>
      )
     </strong>
    </h5>
    <pre><code class="prism language-properties"># MySQL 驱动
jdbc.driver=com.mysql.cj.jdbc.Driver
# 数据库连接 URL（注意时区设置）
jdbc.url=jdbc:mysql://localhost:3306/test?useSSL=false&amp;serverTimezone=UTC
jdbc.username=root
jdbc.password=123456
</code></pre>
    <h6>
     <a id="_1825">
     </a>
     <strong>
      注意事项
     </strong>
     :
    </h6>
    <p>
     •
     <code>
      serverTimezone=UTC
     </code>
     : 解决 MySQL 8.0 时区问题。
     <br/>
     •
     <code>
      useSSL=false
     </code>
     : 禁用 SSL 连接（生产环境不建议）。
    </p>
    <hr/>
    <h5>
     <a id="_1831">
     </a>
     <strong>
      六、常见问题与解决
     </strong>
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        报错
        <code>
         NoSuchBeanDefinitionException
        </code>
       </strong>
       <br/>
       •
       <strong>
        原因
       </strong>
       : Spring 未扫描到 Service 或 Controller。
       <br/>
       •
       <strong>
        解决
       </strong>
       : 检查
       <code>
        &lt;context:component-scan&gt;
       </code>
       的
       <code>
        base-package
       </code>
       路径。
      </p>
     </li>
     <li>
      <p>
       <strong>
        静态资源无法加载
       </strong>
       <br/>
       •
       <strong>
        原因
       </strong>
       : 未配置
       <code>
        &lt;mvc:resources&gt;
       </code>
       或路径错误。
       <br/>
       •
       <strong>
        解决
       </strong>
       : 确认静态资源目录与配置一致。
      </p>
     </li>
     <li>
      <p>
       <strong>
        事务不生效
       </strong>
       <br/>
       •
       <strong>
        原因
       </strong>
       : 未开启
       <code>
        &lt;tx:annotation-driven&gt;
       </code>
       或方法非
       <code>
        public
       </code>
       。
       <br/>
       •
       <strong>
        解决
       </strong>
       : 确保
       <code>
        @Transactional
       </code>
       注解在
       <code>
        public
       </code>
       方法上。
      </p>
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="_1846">
     </a>
     <strong>
      七、总结
     </strong>
    </h5>
    <p>
     •
     <strong>
      最少配置项
     </strong>
     :
    </p>
    <ol>
     <li>
      数据源 (
      <code>
       dataSource
      </code>
      )
     </li>
     <li>
      MyBatis 的
      <code>
       SqlSessionFactory
      </code>
     </li>
     <li>
      Mapper 接口扫描 (
      <code>
       MapperScannerConfigurer
      </code>
      )
     </li>
     <li>
      事务管理器 (
      <code>
       DataSourceTransactionManager
      </code>
      )
     </li>
     <li>
      Spring MVC 注解驱动 (
      <code>
       &lt;mvc:annotation-driven&gt;
      </code>
      )
     </li>
     <li>
      视图解析器 (
      <code>
       InternalResourceViewResolver
      </code>
      )
     </li>
    </ol>
    <p>
     •
     <strong>
      扩展建议
     </strong>
     :
     <br/>
     • 添加拦截器 (
     <code>
      HandlerInterceptor
     </code>
     ) 实现权限控制。
     <br/>
     • 使用
     <code>
      @RestController
     </code>
     开发 RESTful API。
     <br/>
     • 集成 Swagger 生成 API 文档。
    </p>
    <h2>
     <a id="12_Spring_MVC__1860">
     </a>
     12 Spring MVC 拦截器
    </h2>
    <h5>
     <a id="_1863">
     </a>
     <strong>
      一、拦截器的作用
     </strong>
    </h5>
    <p>
     拦截器（Interceptor）是 Spring MVC 提供的一种
     <strong>
      请求预处理和后处理机制
     </strong>
     ，允许在
     <strong>
      控制器方法执行前后
     </strong>
     和
     <strong>
      请求完成后的回调阶段
     </strong>
     插入自定义逻辑。常用于以下场景：
     <br/>
     •
     <strong>
      权限验证
     </strong>
     （如登录检查）
     <br/>
     •
     <strong>
      日志记录
     </strong>
     （记录请求参数、执行时间）
     <br/>
     •
     <strong>
      性能监控
     </strong>
     （统计接口耗时）
     <br/>
     •
     <strong>
      全局数据处理
     </strong>
     （如设置请求/响应编码）
    </p>
    <hr/>
    <h5>
     <a id="_vs__1872">
     </a>
     <strong>
      二、拦截器 vs. 过滤器
     </strong>
    </h5>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         拦截器（Interceptor）
        </strong>
       </th>
       <th>
        <strong>
         过滤器（Filter）
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         依赖框架
        </strong>
       </td>
       <td>
        Spring MVC 提供
       </td>
       <td>
        Servlet 规范提供
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         作用范围
        </strong>
       </td>
       <td>
        仅拦截 Spring MVC 处理的请求
       </td>
       <td>
        拦截所有请求（包括静态资源）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         访问对象
        </strong>
       </td>
       <td>
        可获取 Handler（控制器方法）、ModelAndView
       </td>
       <td>
        只能获取 Servlet API（Request/Response）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         执行顺序
        </strong>
       </td>
       <td>
        通过配置顺序控制
       </td>
       <td>
        通过
        <code>
         @Order
        </code>
        或
        <code>
         web.xml
        </code>
        配置顺序
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h5>
     <a id="_1882">
     </a>
     <strong>
      三、拦截器的核心方法
     </strong>
    </h5>
    <p>
     实现
     <code>
      HandlerInterceptor
     </code>
     接口，重写以下三个方法：
    </p>
    <h6>
     <a id="1_preHandle_1885">
     </a>
     <strong>
      1.
      <code>
       preHandle()
      </code>
      ：在控制器方法执行前调用
     </strong>
    </h6>
    <p>
     •
     <strong>
      返回值
     </strong>
     ：
     <br/>
     •
     <code>
      true
     </code>
     ：继续执行后续拦截器和控制器方法。
     <br/>
     •
     <code>
      false
     </code>
     ：中断请求，直接返回响应。
     <br/>
     •
     <strong>
      典型用途
     </strong>
     ：权限校验、请求参数预处理。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 示例：检查用户是否登录</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="2_postHandle_1902">
     </a>
     <strong>
      2.
      <code>
       postHandle()
      </code>
      ：在控制器方法执行后、视图渲染前调用
     </strong>
    </h6>
    <p>
     •
     <strong>
      可修改
      <code>
       ModelAndView
      </code>
     </strong>
     ：调整返回的模型数据或视图。
     <br/>
     •
     <strong>
      典型用途
     </strong>
     ：向模型添加全局数据（如页面公共信息）。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"currentTime"</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="3_afterCompletion_1914">
     </a>
     <strong>
      3.
      <code>
       afterCompletion()
      </code>
      ：在请求完成后调用（视图渲染完毕）
     </strong>
    </h6>
    <p>
     •
     <strong>
      资源清理
     </strong>
     ：关闭数据库连接、记录请求日志等。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 示例：记录请求耗时</span>
    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"startTime"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> cost <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"请求 {} 耗时 {}ms"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="_1928">
     </a>
     <strong>
      四、配置拦截器
     </strong>
    </h5>
    <p>
     在 Spring MVC 配置文件（如
     <code>
      spring-mvc.xml
     </code>
     ）中注册拦截器，并指定拦截路径和排除路径。
    </p>
    <h6>
     <a id="1__1931">
     </a>
     <strong>
      1. 注册拦截器
     </strong>
    </h6>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 全局拦截器（对所有请求生效） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.interceptor.LogInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 自定义拦截器（指定路径） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/admin/**<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token comment">&lt;!-- 拦截路径 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>exclude-mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/admin/login<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- 排除路径 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.interceptor.AuthInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h6>
     <a id="2__1946">
     </a>
     <strong>
      2. 路径匹配规则
     </strong>
    </h6>
    <p>
     •
     <code>
      /**
     </code>
     ：匹配所有路径（包括子路径）。
     <br/>
     •
     <code>
      /api/*
     </code>
     ：匹配一级路径（如
     <code>
      /api/user
     </code>
     ，不匹配
     <code>
      /api/user/1
     </code>
     ）。
     <br/>
     •
     <code>
      /static/**
     </code>
     ：匹配静态资源路径。
    </p>
    <hr/>
    <h5>
     <a id="_1953">
     </a>
     <strong>
      五、示例：日志记录拦截器
     </strong>
    </h5>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"startTime"</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"请求开始: {} {}"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"startTime"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> cost <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"请求结束: {} {} 耗时 {}ms"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="_1974">
     </a>
     <strong>
      六、多拦截器的执行顺序
     </strong>
    </h5>
    <p>
     若有多个拦截器，执行顺序为：
    </p>
    <ol>
     <li>
      <strong>
       <code>
        preHandle()
       </code>
      </strong>
      ：按配置顺序依次执行。
     </li>
     <li>
      <strong>
       <code>
        postHandle()
       </code>
      </strong>
      ：按配置的逆序执行。
     </li>
     <li>
      <strong>
       <code>
        afterCompletion()
       </code>
      </strong>
      ：按配置的逆序执行。
     </li>
    </ol>
    <p>
     <strong>
      示例配置
     </strong>
     ：
    </p>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/**<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.interceptor.InterceptorA<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/**<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.interceptor.InterceptorB<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <strong>
      执行顺序
     </strong>
     ：
    </p>
    <ol>
     <li>
      InterceptorA.preHandle() → InterceptorB.preHandle()
     </li>
     <li>
      InterceptorB.postHandle() → InterceptorA.postHandle()
     </li>
     <li>
      InterceptorB.afterCompletion() → InterceptorA.afterCompletion()
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="_2000">
     </a>
     <strong>
      七、常见问题
     </strong>
    </h5>
    <h6>
     <a id="1__2001">
     </a>
     <strong>
      1. 拦截器不生效
     </strong>
    </h6>
    <p>
     •
     <strong>
      原因
     </strong>
     ：未正确配置拦截路径或拦截器未被 Spring 管理。
     <br/>
     •
     <strong>
      解决
     </strong>
     ：检查
     <code>
      &lt;mvc:mapping&gt;
     </code>
     路径和包扫描配置。
    </p>
    <h6>
     <a id="2__2005">
     </a>
     <strong>
      2. 静态资源被拦截
     </strong>
    </h6>
    <p>
     •
     <strong>
      原因
     </strong>
     ：拦截路径配置为
     <code>
      /**
     </code>
     且未排除静态资源。
     <br/>
     •
     <strong>
      解决
     </strong>
     ：使用
     <code>
      &lt;mvc:exclude-mapping&gt;
     </code>
     排除静态资源路径。
    </p>
    <h6>
     <a id="3__2009">
     </a>
     <strong>
      3. 修改响应后流程中断
     </strong>
    </h6>
    <p>
     •
     <strong>
      解决
     </strong>
     ：在
     <code>
      preHandle()
     </code>
     中手动调用
     <code>
      response.getWriter().write()
     </code>
     并返回
     <code>
      false
     </code>
     。
    </p>
    <hr/>
    <h5>
     <a id="_2014">
     </a>
     <strong>
      八、总结
     </strong>
    </h5>
    <p>
     •
     <strong>
      核心作用
     </strong>
     ：在请求生命周期的关键节点插入业务逻辑。
     <br/>
     •
     <strong>
      适用场景
     </strong>
     ：权限控制、日志记录、性能监控等。
     <br/>
     •
     <strong>
      配置要点
     </strong>
     ：路径匹配、执行顺序、排除规则。
    </p>
    <h2>
     <a id="13__2019">
     </a>
     13 文件上传和下载
    </h2>
    <h5>
     <a id="_2022">
     </a>
     <strong>
      一、文件上传
     </strong>
    </h5>
    <h6>
     <a id="1__2024">
     </a>
     <strong>
      1. 添加依赖
     </strong>
    </h6>
    <p>
     在
     <code>
      pom.xml
     </code>
     中添加文件上传所需的依赖：
    </p>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- Apache Commons FileUpload --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h6>
     <a id="2__Spring_MVC__2035">
     </a>
     <strong>
      2. 配置 Spring MVC 文件解析器
     </strong>
    </h6>
    <p>
     在
     <code>
      spring-mvc.xml
     </code>
     中配置
     <code>
      MultipartResolver
     </code>
     ：
    </p>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- 配置文件上传解析器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipartResolver<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 指定上传文件的最大大小（单位：字节） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxUploadSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10485760<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- 10MB --&gt;</span>
    <span class="token comment">&lt;!-- 指定默认编码 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>defaultEncoding<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h6>
     <a id="3__Controller_2047">
     </a>
     <strong>
      3. 编写上传 Controller
     </strong>
    </h6>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/file"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 文件上传处理
     * @param file 前端传递的 MultipartFile 对象
     * @param model 返回消息模型
     * @return 上传结果页面
     */</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">uploadFile</span><span class="token punctuation">(</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">,</span>
            <span class="token class-name">Model</span> model
    <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 1. 检查文件是否为空</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"上传文件不能为空！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token string">"result"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 2. 获取原始文件名并处理路径问题</span>
            <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 防止文件名中包含路径，只保留文件名</span>
            <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 3. 指定文件存储路径（示例中存储在项目的 uploads 目录下）</span>
            <span class="token class-name">String</span> uploadDir <span class="token operator">=</span> <span class="token string">"uploads/"</span><span class="token punctuation">;</span>
            <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>uploadDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                dir<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建目录</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 4. 生成唯一文件名（避免重复）</span>
            <span class="token class-name">String</span> savedFileName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>
            <span class="token class-name">File</span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> savedFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 5. 保存文件到服务器</span>
            file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span>

            model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"文件上传成功！路径："</span> <span class="token operator">+</span> dest<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"文件上传失败："</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"result"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="4_JSP_2099">
     </a>
     <strong>
      4. 前端上传表单（JSP）
     </strong>
    </h6>
    <pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;文件上传&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;文件上传&lt;/h2&gt;
    &lt;!-- 必须指定 enctype="multipart/form-data" --&gt;
    &lt;form action="/file/upload" method="post" enctype="multipart/form-data"&gt;
        &lt;input type="file" name="file"&gt;
        &lt;button type="submit"&gt;上传&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
    <hr/>
    <h5>
     <a id="_2119">
     </a>
     <strong>
      二、文件下载
     </strong>
    </h5>
    <h6>
     <a id="1__Controller_2121">
     </a>
     <strong>
      1. 编写下载 Controller
     </strong>
    </h6>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/file"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 文件下载处理
     * @param filename 要下载的文件名
     * @return 文件流响应
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/download"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"filename"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> filename
    <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 1. 指定文件存储路径</span>
            <span class="token class-name">String</span> uploadDir <span class="token operator">=</span> <span class="token string">"uploads/"</span><span class="token punctuation">;</span>
            <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>uploadDir <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 2. 检查文件是否存在</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 3. 读取文件内容到字节数组</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fileBytes <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">toPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 4. 设置响应头</span>
            <span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 指定 Content-Disposition 告诉浏览器以下载方式处理</span>
            headers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span> <span class="token string">"attachment;filename="</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置 Content-Type（根据实际文件类型调整）</span>
            headers<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_OCTET_STREAM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置 Content-Length（可选）</span>
            headers<span class="token punctuation">.</span><span class="token function">setContentLength</span><span class="token punctuation">(</span>fileBytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 5. 返回文件流</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>fileBytes<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h6>
     <a id="2_JSP_2167">
     </a>
     <strong>
      2. 前端下载链接（JSP）
     </strong>
    </h6>
    <pre><code class="prism language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;文件下载&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;文件下载&lt;/h2&gt;
    &lt;!-- 示例：下载名为 example.txt 的文件 --&gt;
    &lt;a href="/file/download?filename=example.txt"&gt;下载文件&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
    <hr/>
    <h5>
     <a id="_2184">
     </a>
     <strong>
      三、关键注解与配置说明
     </strong>
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         @RequestParam("file")
        </code>
       </strong>
       <br/>
       • 用于接收前端表单中
       <code>
        name="file"
       </code>
       的文件输入。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         MultipartFile
        </code>
       </strong>
       <br/>
       • Spring 提供的文件上传接口，提供
       <code>
        transferTo()
       </code>
       保存文件。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         ResponseEntity&lt;byte[]&gt;
        </code>
       </strong>
       <br/>
       • 封装 HTTP 响应的实体类，可直接返回字节数组和响应头。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         HttpHeaders
        </code>
       </strong>
       <br/>
       • 设置响应头，如
       <code>
        Content-Disposition
       </code>
       （告诉浏览器下载文件）。
      </p>
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="_2200">
     </a>
     <strong>
      四、常见问题与解决
     </strong>
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        上传文件大小限制
       </strong>
       <br/>
       • 修改
       <code>
        CommonsMultipartResolver
       </code>
       的
       <code>
        maxUploadSize
       </code>
       属性。
      </p>
     </li>
     <li>
      <p>
       <strong>
        中文文件名乱码
       </strong>
       <br/>
       • 确保
       <code>
        CommonsMultipartResolver
       </code>
       的
       <code>
        defaultEncoding
       </code>
       设置为
       <code>
        UTF-8
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        文件存储路径权限问题
       </strong>
       <br/>
       • 检查应用是否有权限写入目标目录。
      </p>
     </li>
     <li>
      <p>
       <strong>
        安全建议
       </strong>
       <br/>
       • 使用
       <code>
        UUID
       </code>
       重命名文件，避免文件名冲突和路径遍历攻击。
      </p>
     </li>
    </ol>
    <hr/>
    <h5>
     <a id="_2216">
     </a>
     <strong>
      五、完整流程示意图
     </strong>
    </h5>
    <pre><code class="prism language-plaintext">客户端 → 上传表单 → Spring MVC → MultipartResolver 解析 → Controller 保存文件
客户端 → 下载链接 → Controller 读取文件 → 返回字节流 → 浏览器下载
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37343134303230342f:61727469636c652f64657461696c732f313436303535353038" class_="artid" style="display:none">
 </p>
</div>


