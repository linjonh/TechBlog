---
layout: post
title: "启动wsl里的Ubuntu24报错当前计算机配置不支持-WSL2,HCS_E_HYPERV_NOT_INSTALLED"
date: 2025-03-07 17:57:22 +0800
description: "看网上，大部分只要把Hyper-V勾上重启就行了。具体操作：控制面板\\程序\\程序和功能 ，执行“启用或关闭Windows功能”，将Hyper-V选中，将其勾选，然后重启系统。我这个好像没成，是又进行了如下的操作：启用虚拟机平台打开服务重启电脑！就成了！"
keywords: "当前计算机配置不支持 wsl2。 请启用“虚拟机平台”可选组件,并确保在 bios 中启"
categories: ['操作系统']
tags: ['Wsl', 'Windows', 'Ubuntu']
artid: "146090319"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146090319
    alt: "启动wsl里的Ubuntu24报错当前计算机配置不支持-WSL2,HCS_E_HYPERV_NOT_INSTALLED"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146090319
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146090319
cover: https://bing.ee123.net/img/rand?artid=146090319
image: https://bing.ee123.net/img/rand?artid=146090319
img: https://bing.ee123.net/img/rand?artid=146090319
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     启动wsl里的Ubuntu24报错：当前计算机配置不支持 WSL2，HCS_E_HYPERV_NOT_INSTALLED
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
    </p>
    <h2>
     问题：启动wsl里的Ubuntu24报错
    </h2>
    <h3>
     报错信息：
    </h3>
    <p>
     当前计算机配置不支持 WSL2。
     <br/>
     请启用“虚拟机平台”可选组件，并确保在 BIOS 中启用虚拟化。
     <br/>
     通过运行以下命令启用“虚拟机平台”: wsl.exe --install --no-distribution
     <br/>
     有关信息，请访问 https://aka.ms/enablevirtualization
     <br/>
     错误代码: Wsl/Service/CreateInstance/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED
    </p>
    <p>
     自己估计原因是前段时间关闭了虚拟化
    </p>
    <p>
     重新打开虚拟化，然后执行：
    </p>
    <pre><code>wsl.exe --install --no-distribution</code></pre>
    <p>
     结果执行完这句后，还是一样的报错信息。
    </p>
    <p>
    </p>
    <p>
     进入：控制面板\程序\程序和功能 ，执行“启用或关闭Windows功能”，发现里面的Hyper-V确实没有选中，将其勾选，然后重启系统。
    </p>
    <p>
     <img alt="" height="896" src="https://i-blog.csdnimg.cn/direct/544b1aa013ff480bb1117fa9e8a5d6d1.png" width="1152"/>
    </p>
    <p>
     重启系统后，点图标进入ubuntu报错：
    </p>
    <p>
     无法打开 Ubuntu 24.04.1 LTS，因为它处于脱机状态。可能缺少存储设备，或者存储设备已断开连接。
    </p>
    <p>
    </p>
    <p>
     到微软商店里重装，没搞定。
    </p>
    <p>
    </p>
    <p>
     到cmd里执行重装，有报错：
    </p>
    <pre><code>wsl --install
无法从“https://raw.githubusercontent.com/microsoft/WSL/master/distributions/DistributionInfo.json”中提取列表分发。无法解析服务器 的名称或地址
错误代码: Wsl/InstallDistro/WININET_E_NAME_NOT_RESOLVED</code></pre>
    <p>
     ping测试一下：
    </p>
    <pre><code>ping githubusercontent.com
Ping 请求找不到主机 githubusercontent.com。请检查该名称，然后重试。
</code></pre>
    <p>
     发现确实找到不服务器，于是到网上找了解析，然后修改文件：C:\Windows\System32\drivers\etc\hosts
    </p>
    <p>
     将这段解析加入进去：
    </p>
    <p>
     185.199.108.133 raw.githubusercontent.com
    </p>
    <p>
    </p>
    <p>
     这样wsl --install 就能执行了。
    </p>
    <p>
     （认为也可以使用微软的Store来安装，重装了ubuntu24，但是不管用，还是报错）。所以wsl --install 这句少不了。
    </p>
    <p>
     安装好后还是报错：
    </p>
    <pre><code>当前计算机配置不支持 WSL2。
请启用“虚拟机平台”可选组件，并确保在 BIOS 中启用虚拟化。
通过运行以下命令启用“虚拟机平台”: wsl.exe --install --no-distribution
有关信息，请访问 https://aka.ms/enablevirtualization
错误代码: Wsl/InstallDistro/Service/RegisterDistro/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED</code></pre>
    <p>
     明白了，原来可能是我以前把wsl升级到wsl2了，要去掉才行
    </p>
    <pre><code>C:\Users\Admin&gt;wsl --set-default-version 1
操作成功完成。

C:\Users\Admin&gt;wsl --install
正在下载: Ubuntu
正在安装: Ubuntu
已成功安装分发。它可通过 “wsl.exe -d Ubuntu” 启动
</code></pre>
    <p>
     但是在商店Store安装了Ubuntu20.04，可以进。
    </p>
    <p>
     Ubuntu22和24都不可以，报错。后来知道wsl1的能进，wsl2的不能进。
    </p>
    <pre><code>当前计算机配置不支持 WSL2。
请启用“虚拟机平台”可选组件，并确保在 BIOS 中启用虚拟化。
通过运行以下命令启用“虚拟机平台”: wsl.exe --install --no-distribution
有关信息，请访问 https://aka.ms/enablevirtualization
错误代码: Wsl/Service/CreateInstance/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED</code></pre>
    <p>
     也就是现在系统里有wsl1 和wsl2 ，估计是上次装安卓虚拟机的时候装了wsl2导致的。
    </p>
    <p>
     果然，所有wsl2的都出问题了：
    </p>
    <pre><code>C:\Users\Admin&gt;wsl -l -v
  NAME                   STATE           VERSION
* Ubuntu-24.04           Stopped         2
  docker-desktop-data    Stopped         2
  Ubuntu-20.04           Stopped         1
  docker-desktop         Stopped         2
  Ubuntu-22.04           Stopped         2
  Ubuntu                 Running         1</code></pre>
    <h2 style="background-color:transparent">
     尝试解决问题
    </h2>
    <h3 style="background-color:transparent">
     方法1
    </h3>
    <p>
     以管理员身份打开powershell
    </p>
    <p>
     执行
    </p>
    <pre><code> Get-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-All


FeatureName      : Microsoft-Hyper-V-All
DisplayName      : Hyper-V
Description      : 提供一些帮助创建和运行虚拟机及其资源的服务和管理工具。
RestartRequired  : Possible
State            : Enabled
CustomProperties :
</code></pre>
    <p>
     没问题啊，
    </p>
    <h4 style="background-color:transparent">
     重新部署一下
    </h4>
    <pre><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
</code></pre>
    <p>
     部署完成：
    </p>
    <pre><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

部署映像服务和管理工具
版本: 10.0.19041.3636

映像版本: 10.0.19045.5487

启用一个或多个功能
[==========================100.0%==========================]
操作成功完成。</code></pre>
    <p>
     启用虚拟机平台
    </p>
    <pre><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre>
    <p>
     启动成功：
    </p>
    <pre><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart

部署映像服务和管理工具
版本: 10.0.19041.3636

映像版本: 10.0.19045.5487

启用一个或多个功能
[==========================100.0</code></pre>
    <ul>
     <li>
      <strong>
       勾选虚拟机平台 / Windows 虚拟机监控程序平台
      </strong>
     </li>
    </ul>
    <p>
     控制面板\程序\程序和功能 ，执行“启用或关闭Windows功能”，将里面的
     <strong>
      虚拟机平台 / Windows 虚拟机监控程序平台
     </strong>
     勾选上。
    </p>
    <p>
     还是没搞定.....
    </p>
    <p>
    </p>
    <p>
     这样，先把虚拟机改成wsl1吧
    </p>
    <pre><code> wsl --set-version Ubuntu-24.04 1
正在进行转换，这可能需要几分钟时间。

当前计算机配置不支持 WSL2。
请启用“虚拟机平台”可选组件，并确保在 BIOS 中启用虚拟化。
通过运行以下命令启用“虚拟机平台”: wsl.exe --install --no-distribution
有关信息，请访问 https://aka.ms/enablevirtualization
错误代码: Wsl/Service/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED</code></pre>
    <p>
     啥计算机配置不支持WSL2 啊！
    </p>
    <p>
     看网上，大部分把hyper-V打上勾就好了
    </p>
    <p>
     有同样问题的：
     <a href="https://learn.microsoft.com/en-us/answers/questions/1336873/how-to-solve-wsl-service-createinstance-createvm-h" rel="nofollow" title="How to solve Wsl/Service/CreateInstance/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED - Microsoft Q&amp;A">
      How to solve Wsl/Service/CreateInstance/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED - Microsoft Q&amp;A
     </a>
    </p>
    <p>
    </p>
    <p>
     github也有：
    </p>
    <p>
     <a href="https://kkgithub.com/microsoft/WSL/issues/10332" rel="nofollow" title="Error code: Wsl/Service/CreateInstance/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED · Issue #10332 · microsoft/WSL">
      Error code: Wsl/Service/CreateInstance/CreateVm/HCS/HCS_E_HYPERV_NOT_INSTALLED · Issue #10332 · microsoft/WSL
     </a>
    </p>
    <h3 style="background-color:transparent">
     方法2
    </h3>
    <p>
     用这条试试
    </p>
    <pre><code>bcdedit /set hypervisorlaunchtype auto</code></pre>
    <p>
     重启后，成了！
    </p>
    <p>
    </p>
    <h2 style="background-color:transparent">
     总结
    </h2>
    <p>
     在近期使用VirtualBox和VMware之后，还是想用轻量级的wsl ubuntu虚拟环境，结果发现报错：当前计算机配置不支持 WSL2。
    </p>
    <p>
     尝试解决，看网上，大部分只要把Hyper-V勾上重启就行了。具体操作：控制面板\程序\程序和功能 ，执行“启用或关闭Windows功能”，将Hyper-V选中，将其勾选，然后重启系统。
    </p>
    <p>
     我这个好像没成，是又进行了如下的操作：
    </p>
    <p>
     以管理身份打开powershell，然后重新部署一下：
    </p>
    <pre><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
</code></pre>
    <p>
     启用虚拟机平台
    </p>
    <pre><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre>
    <p>
     打开服务
    </p>
    <pre><code>bcdedit /set hypervisorlaunchtype auto</code></pre>
    <p>
     重启电脑！
    </p>
    <p>
     就成了！
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f736b7977616c6b383136332f:61727469636c652f64657461696c732f313436303930333139" class_="artid" style="display:none">
 </p>
</div>


