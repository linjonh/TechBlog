---
layout: post
title: "做到哪一步才算精通SQL"
date: 2025-03-10 21:58:36 +0800
description: "精通SQL的必备技能"
keywords: "sql中cedo"
categories: ['数据库']
tags: ['数据库', 'Sql', 'Oracle']
artid: "146130338"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146130338
    alt: "做到哪一步才算精通SQL"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146130338
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146130338
cover: https://bing.ee123.net/img/rand?artid=146130338
image: https://bing.ee123.net/img/rand?artid=146130338
img: https://bing.ee123.net/img/rand?artid=146130338
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     做到哪一步才算精通SQL
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-kimbie-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <pre><code>ref [基础语法与操作](https://blog.csdn.net/pantouyuchiyu/article/details/135937701)
</code></pre>
    <h2>
     <a id="_DDL_for_Struct_5">
     </a>
     数据定义语言 DDL for Struct
    </h2>
    <ul>
     <li>
      DDL（Data Definition Language）数据库定义语言，
     </li>
     <li>
      用于定义或改变数据表结构、数据类型、
     </li>
     <li>
      表之间的关系、库的索引、约束、视图、存储过程、触发器等。
     </li>
     <li>
      <code>
       CREATE
      </code>
      、
      <code>
       ALTER
      </code>
      、
      <code>
       DROP
      </code>
      、
      <code>
       TRUNCATE
      </code>
      、
      <code>
       RENAME
      </code>
      、
      <code>
       COMMENT
      </code>
      等命令一旦执行，就无法被撤销，因为它们改变了数据库的结构。
     </li>
    </ul>
    <h3>
     <a id="CREATE_11">
     </a>
     CREATE：用来创建数据库、表、索引等对象
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> testDB<span class="token punctuation">;</span>                          <span class="token comment">-- 创建一个名为testDB的数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Students <span class="token punctuation">(</span>ID <span class="token keyword">INT</span><span class="token punctuation">,</span> Name <span class="token keyword">TEXT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">-- 创建一个名为Students的表，包含ID和Name两个字段</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> Students <span class="token punctuation">(</span>Name <span class="token keyword">desc</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 常见简单索引 name 逆序</span>
<span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> index_id <span class="token keyword">on</span> Students <span class="token punctuation">(</span>ID<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">-- 常见唯一索引 id</span>
</code></pre>
    <h3>
     <a id="ALTER_18">
     </a>
     ALTER：用来修改已存在的数据库对象
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Students <span class="token keyword">ADD</span> Grade <span class="token keyword">INT</span><span class="token punctuation">;</span>        <span class="token comment">--在Students表中添加一个名为Grade的字段</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Students <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> Grade<span class="token punctuation">;</span>    <span class="token comment">--在Students表中删除名为Grade的字段</span>
</code></pre>
    <h3>
     <a id="DROP_23">
     </a>
     DROP：用来删除整个数据库或者数据库中的表
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> testDB<span class="token punctuation">;</span>                     <span class="token comment">--删除名为testDB的数据库</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> Students<span class="token punctuation">;</span>                      <span class="token comment">--删除Students表</span>
</code></pre>
    <h3>
     <a id="TRUNCATE_28">
     </a>
     TRUNCATE：用来删除表中所有的行，但不删除表本身
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> Students<span class="token punctuation">;</span>                 <span class="token comment">--删除Students表中的所有数据，但不删除表本身</span>
</code></pre>
    <h3>
     <a id="RENAME_32">
     </a>
     RENAME：用来重命名数据库或者表
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Students <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> Pupils<span class="token punctuation">;</span>  <span class="token comment">--将Students表重命名为Pupils</span>
</code></pre>
    <h3>
     <a id="COMMENT_36">
     </a>
     COMMENT：用来为数据库对象如表、列添加注释
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">COMMENT</span> <span class="token keyword">ON</span> <span class="token keyword">COLUMN</span> Students<span class="token punctuation">.</span>Name <span class="token operator">IS</span> <span class="token string">'Student Name'</span><span class="token punctuation">;</span>  <span class="token comment">--在Students表的Name列上添加注释'Student Name'</span>
</code></pre>
    <h2>
     <a id="_DML_for_Data_40">
     </a>
     数据操作语言 DML for Data
    </h2>
    <ul>
     <li>
      DML（Data Manipulation Language）是数据操作语言，用于管理和检索数据库中的数据。
      <br/>
      适用于对数据库中的数据进行一些简单操作，比如增删改查表中的数据。
     </li>
     <li>
      常用的语句关键字有：
      <code>
       SELECT
      </code>
      、
      <code>
       INSERT
      </code>
      、
      <code>
       UPDATE
      </code>
      、
      <code>
       DELETE
      </code>
      、
      <code>
       MERGE
      </code>
      、
      <code>
       CALL
      </code>
      、
      <code>
       EXPLAIN PLAN
      </code>
      、
      <code>
       LOCK TABLE
      </code>
      。
     </li>
     <li>
      作用于数据本身，如果执行了错误的操作，可以通过
      <code>
       回滚机制
      </code>
      来取消这些操作。
     </li>
    </ul>
    <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>                    <span class="token comment">--选择Students表中的所有数据</span>
<span class="token keyword">SELECT</span> Name<span class="token punctuation">,</span> Grade <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>          <span class="token comment">--选择Students表中的Name和Grade数据</span>

<span class="token comment"># 在Students表中插入一条新的数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Students <span class="token punctuation">(</span>ID<span class="token punctuation">,</span> Name<span class="token punctuation">,</span> Age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment"># 将Students表中ID为1的记录的Age设置为19</span>
<span class="token keyword">UPDATE</span> Students <span class="token keyword">SET</span> Age <span class="token operator">=</span> <span class="token number">19</span> <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment"># 删除Students表中ID为1的数据</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> Students <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="MERGE_58">
     </a>
     MERGE：合并两张表或更改其中一张表的数据
    </h3>
    <pre><code class="prism language-sql"><span class="token comment"># 根据ID进行匹配，向Students中更新或插入来自Enrolled_Students中的数据</span>
<span class="token keyword">MERGE</span> <span class="token keyword">INTO</span> Students <span class="token keyword">AS</span> Target
<span class="token keyword">USING</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID<span class="token punctuation">,</span> Name <span class="token keyword">FROM</span> Enrolled_Students<span class="token punctuation">)</span> <span class="token keyword">AS</span> Source
<span class="token keyword">ON</span> Target<span class="token punctuation">.</span>ID <span class="token operator">=</span> Source<span class="token punctuation">.</span>ID
<span class="token keyword">WHEN</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span> <span class="token keyword">UPDATE</span> <span class="token keyword">SET</span> Name <span class="token operator">=</span> Source<span class="token punctuation">.</span>Name 
<span class="token keyword">WHEN</span> <span class="token operator">NOT</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span> <span class="token keyword">INSERT</span> <span class="token punctuation">(</span>ID<span class="token punctuation">,</span> Name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>Source<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> Source<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment"># MySQL 在 8.0 之前不支持 MERGE 语句，</span>
<span class="token comment"># 需要使用 INSERT ... ON DUPLICATE KEY UPDATE 来实现类似的功能</span>
</code></pre>
    <h3>
     <a id="CALL_70">
     </a>
     CALL：调用一个存储过程
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">CALL</span> Update_Students_Age<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 调用名为“Update_Students_Age”的存储过程</span>
</code></pre>
    <h3>
     <a id="EXPLAIN_PLAN___74">
     </a>
     EXPLAIN PLAN：提供一条查询语句的执行计划 - 工作中未用到，待学习中
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">EXPLAIN</span> <span class="token keyword">PLAN</span> <span class="token keyword">FOR</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span> <span class="token comment">-- 显示查询所有学生数据的执行计划</span>
</code></pre>
    <h3>
     <a id="LOCK_TABLE___78">
     </a>
     LOCK TABLE：对数据库表进行锁定，以控制并发读写 - 工作中未用到，待学习中
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">LOCK</span> <span class="token keyword">TABLE</span> Students <span class="token operator">IN</span> EXCLUSIVE <span class="token keyword">MODE</span><span class="token punctuation">;</span>  <span class="token comment">-- 对Students表施加独占锁</span>
</code></pre>
    <h2>
     <a id="_DCL_for_permission_82">
     </a>
     数据控制语言 DCL for permission
    </h2>
    <ul>
     <li>
      DCL（Data Control Language）数据控制语言：主要用于控制用户对数据库的访问权限以及对数据的执行权限。
     </li>
     <li>
      使用DCL，数据库管理员可以精细化管理数据库的访问权限，保护数据的安全性。
     </li>
     <li>
      常见的DCL语句包括GRANT、REVOKE等。
     </li>
    </ul>
    <h3>
     <a id="GRANT_86">
     </a>
     GRANT：该命令用于授予用户对数据库对象（例如表格）的访问权限
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> Students <span class="token keyword">TO</span> hugh<span class="token punctuation">;</span>
<span class="token comment"># 给 "hugh" 授予了对 "Students" 表进行 SELECT、INSERT 和 UPDATE 的权限</span>
</code></pre>
    <h3>
     <a id="REVOKE_91">
     </a>
     REVOKE：该命令用于撤回已经授予用户的某些权限
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> <span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> Students <span class="token keyword">FROM</span> hugh<span class="token punctuation">;</span>
撤回了 <span class="token string">"hugh"</span> 对 <span class="token string">"Students"</span> 表的 <span class="token keyword">UPDATE</span> 权限。
</code></pre>
    <h2>
     <a id="_DQL_97">
     </a>
     数据查询语言 DQL
    </h2>
    <p>
     DQL（Data Query Language）数据查询语言：主要用来查询数据。
     <br/>
     实际上，DQL在操作中主要体现为SQL的SELECT语句。
    </p>
    <h2>
     <a id="_TCL_100">
     </a>
     事务控制语言 TCL
    </h2>
    <ul>
     <li>
      TCL (Transaction Control Language) 是事务控制语言，
     </li>
     <li>
      主要用来管理和控制数据库中的事务（Transaction），以保证数据库操作的完整性和一致性。
     </li>
     <li>
      TCL命令往往和DML（数据操作语言）命令一起使用，以确保一系列的数据库操作要么全部成功，要么全部不成功（可回滚至操作前的状态）。
     </li>
    </ul>
    <h3>
     <a id="COMMIT_104">
     </a>
     COMMIT：用于提交事务，将所有数据库修改保存到数据库中
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Students <span class="token punctuation">(</span>ID<span class="token punctuation">,</span> Name<span class="token punctuation">,</span> Age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>  <span class="token comment">-- 提交事务，将插入的数据保存到数据库中</span>
</code></pre>
    <h3>
     <a id="ROLLBACK_109">
     </a>
     ROLLBACK：用于回滚事务，撤销所有未经提交的数据库修改
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Students <span class="token punctuation">(</span>ID<span class="token punctuation">,</span> Name<span class="token punctuation">,</span> Age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>  <span class="token comment">-- 提交事务，将插入的数据保存到数据库中</span>
</code></pre>
    <h3>
     <a id="AVEPOINT_115">
     </a>
     AVEPOINT：为事务中的一系列操作设定保存点
    </h3>
    <p>
     设立保存点后，可以选择只回滚到保存点的部分，而不需要全部回滚
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SAVEPOINT</span> SP1<span class="token punctuation">;</span>  <span class="token comment">-- 创建保存点 SP1</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Students <span class="token punctuation">(</span>ID<span class="token punctuation">,</span> Name<span class="token punctuation">,</span> Age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> SP1<span class="token punctuation">;</span>  <span class="token comment">-- 回滚至保存点 SP1，不会撤销保存点后的操作</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f32323033383332372f:61727469636c652f64657461696c732f313436313330333338" class_="artid" style="display:none">
 </p>
</div>


