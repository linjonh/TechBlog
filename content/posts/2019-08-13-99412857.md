---
layout: post
title: "微信小程序实现条形码,二维码生成和微信小程序扫码"
date: 2019-08-13 14:06:00 +0800
description: "一：条形码,二维码生成在微信小程序中生成条形码和二维码需要使用到wxbarcode的npm包，wxb"
keywords: "条形码制作小程序"
categories: ['微信小程序']
tags: ['微信小程序', '小程序']
artid: "99412857"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=99412857
    alt: "微信小程序实现条形码,二维码生成和微信小程序扫码"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=99412857
featuredImagePreview: https://bing.ee123.net/img/rand?artid=99412857
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序实现条形码,二维码生成和微信小程序扫码
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     一：条形码,二维码生成
    </p>
    <p>
     在微信小程序中生成条形码和二维码需要使用到wxbarcode的npm包，wxbarcode的npm包地址：
     <a href="https://www.npmjs.com/package/wxbarcode" rel="nofollow" title="wxbarcode - npm">
      wxbarcode - npm
     </a>
    </p>
    <p>
     1：安装wxbarcode
    </p>
    <pre class="has"><code>npm i wxbarcode -S --production</code></pre>
    <p>
     在微信小程序项目中使用npm包参考：
     <a href="https://huaweichenai.blog.csdn.net/article/details/99317237" rel="nofollow" title="https://huaweichenai.blog.csdn.net/article/details/99317237">
      https://huaweichenai.blog.csdn.net/article/details/99317237
     </a>
    </p>
    <p>
     2：条形码和二维码生成
    </p>
    <p>
     (1)引入wxbarcode包
    </p>
    <p>
     在你需要生成条形码和二维码页面的js中引入exbarcode包
    </p>
    <pre class="has"><code>import wxbarcode from 'wxbarcode'</code></pre>
    <p>
     或：
    </p>
    <pre class="has"><code>const wxbarcode = require('wxbarcode')</code></pre>
    <p>
     (2)条形码生成
    </p>
    <p>
     在wxbarcode包中生成条形码使用到了barcode函数，barcode的函数原型为：
    </p>
    <pre class="has"><code>barcode(id, code, width, height)</code></pre>
    <p>
     参数说明：
    </p>
    <p>
     id: wxml文件中的 Canvas ID
    </p>
    <p>
     code: 用于生成条形码的字符串
    </p>
    <p>
     width: 生成的条形码宽度，单位 rpx
    </p>
    <p>
     height: 生成的条形码高度，单位 rpx
    </p>
    <p>
     条形码生成实例：
    </p>
    <p>
     wxml：
    </p>
    <pre class="has"><code>&lt;canvas canvas-id="barcode" /&gt;</code></pre>
    <p>
     js：
    </p>
    <pre class="has"><code>onLoad: function (options) {
    wxbarcode.barcode('barcode', '1234567890123456789', 680, 200);
},</code></pre>
    <p>
     根据如上可实现条形码生成：
    </p>
    <p>
     <img alt="image.png" class="has" src="https://i-blog.csdnimg.cn/blog_migrate/346ebd9bc7bb210beffd249f9a0ddaa8.png"/>
    </p>
    <p>
     (3)二维码生成
    </p>
    <p>
     在wxbarcode包中生成二维码使用到了qrcode函数，qrcode的函数原型为：
    </p>
    <pre class="has"><code>qrcode(id, code, width, height)</code></pre>
    <p>
     参数说明：
    </p>
    <p>
     id: wxml文件中的 Canvas ID
    </p>
    <p>
     code: 用于生成二维码的字符串
    </p>
    <p>
     width: 生成的二维码宽度，单位 rpx
    </p>
    <p>
     height: 生成的二维码高度，单位 rpx
    </p>
    <p>
     二维码生成实例：
    </p>
    <p>
     wxml：
    </p>
    <pre class="has"><code>&lt;canvas canvas-id="qrcode" /&gt;</code></pre>
    <p>
     js：
    </p>
    <pre class="has"><code>onLoad: function (options) {
    wxbarcode.qrcode('qrcode', '1234567890123456789', 300, 300);
},</code></pre>
    <p>
     根据如上可实现二维码生成：
    </p>
    <p>
     <img alt="image.png" class="has" src="https://i-blog.csdnimg.cn/blog_migrate/b06150704211c5b0f3a4e9723df4632d.png"/>
    </p>
    <p>
     二：微信小程序扫码
    </p>
    <p>
     微信小程序扫码使用到了微信自带的API：wx.scanCode(Object object)
    </p>
    <p>
     wx.scanCode的参数：
    </p>
    <p>
     onlyFromCamera：是否只能从相机扫码,不允许从相册选择图片,默认为false
    </p>
    <p>
     scanType：扫码类型,默认为['barCode', 'qrCode'],参数可以为数组也可以为字符串,可选参数:barCode(一维码),qrCode(二维码),datamatrix(Data Matrix 码),pdf417(PDF417 条码 )
    </p>
    <p>
     success：接口调用成功的回调函数,回调成功参数：result(所扫码的内容),scanType(所扫码的类型),charSet(所扫码的字符集),path(当所扫的码为当前小程序二维码时，会返回此字段，内容为二维码携带的 path),rawData(原始数据，base64编码)
    </p>
    <p>
     fail：接口调用失败的回调函数
    </p>
    <p>
     complete：接口调用结束的回调函数（调用成功、失败都会执行）
    </p>
    <p>
     实例：
    </p>
    <pre class="has"><code>// 允许从相机和相册扫码
wx.scanCode({
success(res) {
//扫码成功执行
console.log(res)
},
fail(res) {
//扫码失败执行
console.log(res)
},
complete(res) {
//扫码结束执行
console.log(res)
}
})</code></pre>
    <p>
     如果你只允许拍照扫码的话你可以增加如下参数：
    </p>
    <pre class="has"><code>onlyFromCamera: true,</code></pre>
    <p>
     根据如上就可以实现微信小程序扫码
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6875617765696368656e6169:2f61727469636c652f64657461696c732f3939343132383537" class_="artid" style="display:none">
 </p>
</div>


