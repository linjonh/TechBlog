---
layout: post
title: "IDEA-一键完成打包-推送-部署docker镜像"
date: 2025-03-13 16:43:58 +0800
description: "本地 IDEA 将最新的代码部署到远程服务器上"
keywords: "idea gradle 将项目打包docker镜像"
categories: ['未分类']
tags: ['Java', 'Idea', 'Docker']
artid: "146228693"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146228693
    alt: "IDEA-一键完成打包-推送-部署docker镜像"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146228693
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146228693
cover: https://bing.ee123.net/img/rand?artid=146228693
image: https://bing.ee123.net/img/rand?artid=146228693
img: https://bing.ee123.net/img/rand?artid=146228693
---

# IDEA 一键完成：打包 + 推送 + 部署docker镜像

## 1、本方案要解决场景？

想直接通过本地 IDEA 将最新的代码部署到远程服务器上。

## 2、本方案适用于什么样的项目？

  1. 项目是一个 Spring Boot 的 Java 项目。
  2. 项目用 maven 进行管理。
  3. 项目的运行基于 docker 容器（即项目将被打成 docker image，并最终以容器的方式来运行）。

## 3、本方案对于远程服务器的要求？

该服务器是用来最终运行项目的，所以对它的要求是：已安装了 Docker，并能够正常拉取镜像。

## 4、配置步骤

### 4.1、SSH 配置

本方案是要通过本地的 IDEA 连接远程服务器进行操作的，所以我们需要先在 IDEA 中配置一个 SSH，如下图：

找到 IDEA 的「设置」  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/2197093a702c4dbaa90c2aa3cd404c42.png)  
添加 SSH 配置  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/70109f9b3a71437093a25ef5bac461d8.png)

### 4.2、Docker 配置

通过此配置，我们可以连接到远程服务器上的 Docker 守护进程（即配置了一个Docker服务器，「4.4」中会用到），如下图：  
![请添加图片描述](https://i-blog.csdnimg.cn/direct/7dbae58ba02240f7ad7c6ccee0c20b1b.png)  
【5】中下拉列表中可选的SSH配置来自「4.1」中的配置。

### 4.3、SpringBoot 项目

需要注意的是用于定义和构建该项目Docker镜像的 Dockerfile 要放在项目 jar 包所在目录的同级（这里提到的项目 jar 包是通过maven
package 命令生成的 jar包），否则，在通过 Dockerfile 创建镜像，执行到 ADD target/jnew-whatcell-
api.jar 的时候，会出现找不到 jnew-whatcell-api.jar 的情况。  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/67b989b0ac4e48f591baecf74ad1c7f6.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/7633399b9eec47c9981e0980652d6c87.png)

### 4.4、运行配置

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/9047ee1db28b4ceb8ae22e5d8ac2d0eb.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/dd5dddddb9a7486a85f4e95e71727b53.png)  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/f7cc2d024f61470490baa3624deb19e6.png)  
上图中的【绑定端口】如果页面上没有该配置，可通过下图添加上：  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/4940a09e4f9a40f195b5f05d4d21a94e.png)  
对于以上的配置操作，我们可以这样理解：指定在一台安装了 Docker
的远程服务器上，基于「构建」中配置的信息创建一个镜像，并根据「运行」中配置的信息将此镜像运行。其中，通过「执行前」中的操作，将项目打成 jar 包，该
jar 包将在「构建」中的 Dockerfile 中使用（「4.3」中的Dockerfile）。

### 4.5 运行

选择「运行配置」，点击「运行」，如下图：  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/aed3c2b74e2b476693be14523384f31b.png)



