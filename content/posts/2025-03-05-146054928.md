---
layout: post
title: "DubboZookeeper"
date: 2025-03-05 22:37:20 +0800
description: "需要使用这个视图页面来管理dubbo的项目，我们还得启动拉取项目中的dubbo-admin-server模块并先更新完pom.xml中的依赖，maven的版本等等基本项也得改掉，之后启动项目成功便能使用这个视图页面来管理dubbo的项目。可以根据这个页面简单学习一下，但是没有集成mysql，也会出现一些报错，且在这之后我们要使用的管理页面是vue的dubbo-admin。dubbon-admin-ui的vue项目通过vscode启动的视图页面来管理dubbo的项目。这里的依赖总的划分一下的话如下图所示。"
keywords: "Dubbo+Zookeeper"
categories: ['未分类']
tags: ['分布式', 'Zookeeper', 'Dubbo']
artid: "146054928"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146054928
    alt: "DubboZookeeper"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146054928
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146054928
cover: https://bing.ee123.net/img/rand?artid=146054928
image: https://bing.ee123.net/img/rand?artid=146054928
img: https://bing.ee123.net/img/rand?artid=146054928
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Dubbo+Zookeeper
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="Snipaste_2025-03-05_20-09-43.png" src="https://i-blog.csdnimg.cn/img_convert/315d10679cf580db8ffccb0a9d2ffe1a.png"/>
    </p>
    <p>
     <a href="https://zookeeper.apache.org/releases.html" rel="nofollow">
      Apache ZooKeeper
     </a>
    </p>
    <p>
     通过当前页面下载Zookeeper
    </p>
    <p>
     <img alt="Snipaste_2025-03-05_20-56-27.png" src="https://i-blog.csdnimg.cn/img_convert/ffefbed0ec861a6d4048091dc76e9598.png"/>
    </p>
    <p>
     <img alt="Snipaste_2025-03-05_21-12-37.png" src="https://i-blog.csdnimg.cn/img_convert/504b8cf4204323c0fba033942fb1628a.png"/>
    </p>
    <p>
     在这里启动zookeeper
    </p>
    <p>
     可以根据这个页面简单学习一下，但是没有集成mysql，也会出现一些报错，且在这之后我们要使用的管理页面是vue的dubbo-admin
    </p>
    <p>
     <a href="https://developer.aliyun.com/article/1625196" rel="nofollow">
      dubbo学习三：springboot整合dubbo+zookeeper，并使用dubbo管理界面监控服务是否注册到zookeeper上。-阿里云开发者社区
     </a>
    </p>
    <p>
     <a href="https://zhuanlan.zhihu.com/p/626463557" rel="nofollow">
      图文并茂，万字长文！彻底搞清楚Spring Boot 整合Dubbo+Zookeeper【分布式实战】 - 知乎
     </a>
    </p>
    <p>
     <img alt="Snipaste_2025-03-05_21-08-47.png" src="https://i-blog.csdnimg.cn/img_convert/f19e884d2311526f43a22a4ac51eacdd.png"/>
    </p>
    <p>
     这是我的模块设计，在设计各个模块的内容之前，先通过github获取dubbo的管理界面
    </p>
    <p>
     通过GitHub拉取该项目
     <a href="https://github.com/apache/dubbo-admin">
      apache/dubbo-admin: The ops and reference implementation for Apache Dubbo
     </a>
    </p>
    <p>
     dubbon-admin-ui的vue项目通过vscode启动的视图页面来管理dubbo的项目
    </p>
    <pre><code>npm install
下载node_modules
如果报错应该是node的版本不对，如果安装了nvm可以通过nvm切换至16.x.x版本
npm run dev
启动项目
</code></pre>
    <p>
     通过root/root登录dubbo-admin
     <br/>
     <img alt="Snipaste_2025-03-05_22-25-34.png" src="https://i-blog.csdnimg.cn/img_convert/77866f618a218340d061282f5fdd731b.png"/>
    </p>
    <p>
     先启动zookeeper
     <br/>
     需要使用这个视图页面来管理dubbo的项目，我们还得启动拉取项目中的dubbo-admin-server模块并先更新完pom.xml中的依赖，maven的版本等等基本项也得改掉，之后启动项目成功便能使用这个视图页面来管理dubbo的项目
    </p>
    <p>
     根据我的模块设计，我们开始对项目进行架构设计
    </p>
    <p>
     先引入我们需要的总依赖
    </p>
    <pre><code>&lt;!-- 引入dubbo --&gt;  
&lt;!-- https://mvnrepository.com/artifact/com.alibaba/dubbo --&gt;  
&lt;dependency&gt;  
    &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;  
    &lt;artifactId&gt;dubbo-dependencies-bom&lt;/artifactId&gt;  
    &lt;version&gt;3.2.5&lt;/version&gt;  
    &lt;type&gt;pom&lt;/type&gt;  
    &lt;scope&gt;import&lt;/scope&gt;  
&lt;/dependency&gt;  
  
&lt;!-- https://mvnrepository.com/artifact/org.apache.curator/curator-x-discovery --&gt;  
&lt;dependency&gt;  
    &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;  
    &lt;artifactId&gt;curator-x-discovery&lt;/artifactId&gt;  
    &lt;version&gt;4.3.0&lt;/version&gt;  
&lt;/dependency&gt;  
  
  
&lt;!-- 注册中心使用的是zookeeper，引入操作zookeeper的客户端 --&gt;  
&lt;dependency&gt;  
    &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;  
    &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;  
    &lt;version&gt;2.12.0&lt;/version&gt;  
&lt;/dependency&gt;  
  
  
&lt;dependency&gt;  
    &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;  
    &lt;artifactId&gt;dubbo&lt;/artifactId&gt;  
    &lt;version&gt;3.2.5&lt;/version&gt;  
&lt;/dependency&gt;  
  
&lt;dependency&gt;  
    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;  
    &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;  
    &lt;version&gt;1.9.0&lt;/version&gt;  
&lt;/dependency&gt;  
  
  
&lt;dependency&gt;  
    &lt;groupId&gt;org.apache.dubbo.extensions&lt;/groupId&gt;  
    &lt;artifactId&gt;dubbo-mock-api&lt;/artifactId&gt;  
    &lt;version&gt;3.0.0&lt;/version&gt;  
&lt;/dependency&gt;  
  
&lt;dependency&gt;  
    &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;  
    &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;  
    &lt;version&gt;4.3.0&lt;/version&gt;  
&lt;/dependency&gt;  
  
&lt;dependency&gt;  
    &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;  
    &lt;artifactId&gt;curator-recipes&lt;/artifactId&gt;  
    &lt;version&gt;4.3.0&lt;/version&gt;  
&lt;/dependency&gt;  
  
  
&lt;!-- MyBatis-Plus --&gt;  
&lt;dependency&gt;  
    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;  
    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;  
    &lt;version&gt;3.5.3.2&lt;/version&gt;  
&lt;/dependency&gt;  
  
&lt;!-- Spring Boot Web --&gt;  
&lt;dependency&gt;  
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;  
&lt;/dependency&gt;  
  
&lt;dependency&gt;  
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;  
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;  
    &lt;version&gt;2.2.2&lt;/version&gt;  
&lt;/dependency&gt;
</code></pre>
    <p>
     这里的依赖总的划分一下的话如下图所示
    </p>
    <p>
     <img alt="Snipaste_2025-03-05_21-38-16.png" src="https://i-blog.csdnimg.cn/img_convert/1f1e75d4c058394fc7c382c363916922.png"/>
    </p>
    <p>
     <img alt="Snipaste_2025-03-05_21-42-08.png" src="https://i-blog.csdnimg.cn/img_convert/99c1a9df9e1c24cfa2e55860224ebc94.png"/>
    </p>
    <p>
     实例
    </p>
    <p>
     pojo
    </p>
    <pre><code class="prism language-Java">@Data  
  
@AllArgsConstructor  
  
@NoArgsConstructor  
public class User implements Serializable {  
    private static final long serialVersionUID = 1L;  // 显式定义  
  
    private Long id;  
    private String name;  
}
</code></pre>
    <p>
     service
    </p>
    <pre><code class="prism language-Java">public interface UserService extends IService&lt;User&gt; {}
</code></pre>
    <p>
     <img alt="Snipaste_2025-03-05_21-48-29.png" src="https://i-blog.csdnimg.cn/img_convert/dc84c438b215974d4aab745734c44cd2.png"/>
    </p>
    <p>
     实例
     <br/>
     控制类
    </p>
    <pre><code class="prism language-Java">@RestController  
@RequestMapping("/user")  
public class UserController {  
    private static final Logger log = LoggerFactory.getLogger(UserController.class);  
  
    @Reference(timeout = 5000, retries = 1, check = true)  
    private UserService userService;  
  
    @GetMapping("/{id}")  
    public ResponseEntity&lt;User&gt; getUser(@PathVariable("id") Long id) {  
        log.info("调用远程服务，用户ID: {}", id);  
        User user = userService.getById(id);  
        if (user == null) {  
            return ResponseEntity.notFound().build();  
        }  
        return ResponseEntity.ok(user);  
    }  
}
</code></pre>
    <p>
     yml
    </p>
    <pre><code class="prism language-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span>  
<span class="token key atrule">spring</span><span class="token punctuation">:</span>  
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>  
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/dubbo<span class="token punctuation">?</span>useSSL=false<span class="token important">&amp;serverTimezone=UTC</span>  
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root  
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">20050101</span>  
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver  
  <span class="token key atrule">application</span><span class="token punctuation">:</span>  
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo<span class="token punctuation">-</span>consumer  
  
<span class="token key atrule">dubbo</span><span class="token punctuation">:</span>  
  <span class="token key atrule">application</span><span class="token punctuation">:</span>  
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo<span class="token punctuation">-</span>consumer  <span class="token comment"># 消费者应用名称  </span>
    <span class="token key atrule">qos-enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment"># 禁用 QoS（可选）  </span>
  
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>  
    <span class="token key atrule">address</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span><span class="token number">2181</span>  <span class="token comment"># 注册中心地址（ZooKeeper）  </span>
    <span class="token comment"># 如果使用 Nacos 注册中心，可以配置为：  </span>
    <span class="token comment"># address: nacos://127.0.0.1:8848  </span>
  
  <span class="token key atrule">protocol</span><span class="token punctuation">:</span>  
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo  <span class="token comment"># 使用的协议类型  </span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">20882</span>     <span class="token comment"># 消费者端口（通常不需要配置，Dubbo 会自动分配）  </span>
  
  <span class="token key atrule">consumer</span><span class="token punctuation">:</span>  
    <span class="token key atrule">check</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># 是否在启动时检查服务提供者是否存在  </span>
    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">3000</span> <span class="token comment"># 调用超时时间（单位：毫秒）  </span>
    <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">2</span>    <span class="token comment"># 调用失败时的重试次数  </span>
    <span class="token key atrule">loadbalance</span><span class="token punctuation">:</span> random  <span class="token comment"># 负载均衡策略（random、roundrobin、leastactive 等）  </span>
    <span class="token key atrule">cluster</span><span class="token punctuation">:</span> failover    <span class="token comment"># 集群容错策略（failover、failfast、failsafe 等）</span>
</code></pre>
    <p>
     <img alt="Snipaste_2025-03-05_22-06-29.png" src="https://i-blog.csdnimg.cn/img_convert/b037901912a25a89039e63f573b0b8a4.png"/>
    </p>
    <p>
     实例
    </p>
    <p>
     mapper
    </p>
    <pre><code class="prism language-Java">@Mapper  
public interface UserMapper extends BaseMapper&lt;User&gt; {}
</code></pre>
    <p>
     impl
    </p>
    <pre><code class="prism language-Java">@DubboService  
@Service  
public class UserServiceImpl extends ServiceImpl&lt;UserMapper,User&gt; implements UserService {}
</code></pre>
    <p>
     启动类
    </p>
    <pre><code class="prism language-Java">@EnableDubbo  
@SpringBootApplication  
public class UserServiceProviderApplication {  
  
    public static void main(String[] args) {  
        SpringApplication.run(UserServiceProviderApplication.class, args);  
    }  
  
}
</code></pre>
    <p>
     yml
    </p>
    <pre><code class="prism language-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">20881</span>  
<span class="token key atrule">spring</span><span class="token punctuation">:</span>  
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>  
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/dubbo<span class="token punctuation">?</span>useSSL=false<span class="token important">&amp;serverTimezone=UTC</span>  
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root  
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">20050101</span>  
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver  
  <span class="token key atrule">application</span><span class="token punctuation">:</span>  
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo<span class="token punctuation">-</span>provider  
  
<span class="token key atrule">dubbo</span><span class="token punctuation">:</span>  
  <span class="token key atrule">application</span><span class="token punctuation">:</span>  
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo<span class="token punctuation">-</span>provider  
    <span class="token key atrule">qos-enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>  
    <span class="token key atrule">address</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span><span class="token number">2181</span>  
  <span class="token key atrule">protocol</span><span class="token punctuation">:</span>  
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dubbo  
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">20880</span>
</code></pre>
    <p>
     <img alt="Snipaste_2025-03-05_22-23-11.png" src="https://i-blog.csdnimg.cn/img_convert/bc614375101bc083cf2e528ec9d0b9ff.png"/>
    </p>
    <p>
     启动后可以在服务关系中看见他们模块之间的关系
     <br/>
     也可以去调用接口测试接口的使用
    </p>
    <p>
     <img alt="Snipaste_2025-03-05_22-25-34.png" src="https://i-blog.csdnimg.cn/img_convert/77866f618a218340d061282f5fdd731b.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37333933383830352f:61727469636c652f64657461696c732f313436303534393238" class_="artid" style="display:none">
 </p>
</div>


