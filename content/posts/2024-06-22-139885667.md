---
layout: post
title: "国产自研开源大数据平台-DataLight"
date: 2024-06-22 17:45:10 +0800
description: "DataLight 是一个开源的大数据运维管理平台，用于简化和自动化大数据服务的部署、管理和监控。它"
keywords: "国产自研开源大数据平台 DataLight"
categories: ['开源大数据平台', 'Datalight']
tags: ['开源', '大数据']
artid: "139885667"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=139885667
    alt: "国产自研开源大数据平台-DataLight"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=139885667
featuredImagePreview: https://bing.ee123.net/img/rand?artid=139885667
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     国产自研开源大数据平台 DataLight
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_DataLight_1">
     </a>
     国产自研开源大数据平台 DataLight
    </h2>
    <h3>
     <a id="_3">
     </a>
     一、简介
    </h3>
    <p>
     DataLight 是一个开源的大数据运维管理平台，用于简化和自动化大数据服务的部署、管理和监控。它提供了一套全面的工具来管理您的大数据生态系统，旨在帮助企业实现简洁、快速地构建 OLAP 与 OLTP 统一的业务平台。用户可以通过 plugin 插件，以插拔式的方式快速集成自己的业务服务或其他大数据组件，从而在平台中进行统一管理。
    </p>
    <p>
     资源汇总如下：
    </p>
    <ul>
     <li>
      <p>
       <a href="http://datalight.boundivore.cn" rel="nofollow">
        项目官网
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://gitee.com/boundivore/boundivore-datalight" rel="nofollow">
        后端 Gitee 主仓库
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://github.com/Boundivore/boundivore-datalight">
        后端 Github 镜像仓库
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://gitee.com/boundivore/boundivore-datalight-web" rel="nofollow">
        前端 Gitee 主仓库
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://github.com/Boundivore/boundivore-datalight-web">
        前端 Github 镜像仓库
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="./.documents/docs/%E4%BA%A7%E5%93%81%E6%89%8B%E5%86%8C.md" rel="nofollow">
        产品手册
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="./.documents/docs/%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C.md" rel="nofollow">
        开发手册
       </a>
      </p>
     </li>
     <li>
      <p>
       <a href="https://pan.baidu.com/s/1342bIcEBDQHdFA35KUTjbQ" rel="nofollow">
        资源包下载地址
       </a>
       <code>
        网盘提取码: data
       </code>
      </p>
     </li>
    </ul>
    <h3>
     <a id="_21">
     </a>
     二、软件架构
    </h3>
    <p>
     这个软件架构通过Master-Worker主从模式实现了高可用、可扩展的分布式计算与大数据处理平台。
    </p>
    <p>
     <img alt="架构图" src="https://i-blog.csdnimg.cn/blog_migrate/f7caf5ed980be60c09027392f8b584f9.png"/>
    </p>
    <ul>
     <li>
      UI 层：用户通过 UI 层进行操作和管理。UI 层与 Master Restful API 进行交互，发送用户操作请求；
     </li>
     <li>
      Master 层：Master 层是整个系统的核心，负责管理和协调 Worker 层的操作。它包含多个节点，每个节点负责不同的功能模块；
     </li>
     <li>
      MemoryMeta：内存元数据缓存层；
     </li>
     <li>
      MasterService：主服务业务逻辑管理；
     </li>
     <li>
      ServicePlugin：服务插件管理；
     </li>
     <li>
      Reporter：Master/Worker 双向交互服务；
     </li>
     <li>
      Master 层：通过 Restful API 接收 UI 层的请求，并协调 Worker 层的操作。目前暂未开启此功能，未来，如有必要，Master 层与 Zookeeper 集群保持心跳连接，以确保分布式锁的管理和 Master 的故障切换。Master 层还通过 MySQL 数据库进行元数据的读写操作。
     </li>
     <li>
      WorkerServbice ：从节点业务逻辑管理；
     </li>
     <li>
      Components：各类集成在平台中的组件；
     </li>
     <li>
      KubeAPI：与 Kubernetes/KubeSphere API 交互的服务管理；
     </li>
    </ul>
    <h3>
     <a id="_38">
     </a>
     三、概念与定义
    </h3>
    <ul>
     <li>
      服务：HDFS、YARN、HIVE 等称之为服务，其名称在本项目中的标准命名为全大写，且服务名称全局唯一。
     </li>
     <li>
      组件：HDFS 中的独立进程，例如：NameNode、DataNode 等称之为组件，在本项目中的标准命名方式为帕斯卡命名法，且组件名称全局唯一。
     </li>
     <li>
      主进程：DataLight Master 进程称之为主进程，其所在节点称之为平台主节点。
     </li>
     <li>
      从进程：DataLight Worker 进程称之为从进程，其所在节点称之为平台从节点。
     </li>
    </ul>
    <h3>
     <a id="_45">
     </a>
     四、主要功能
    </h3>
    <p>
     下表列出了 DataLight 平台当前一级功能及其受支持状态：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        序号
       </th>
       <th>
        一级功能
       </th>
       <th>
        是否已支持
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        1
       </td>
       <td>
        节点初始化助手
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        2
       </td>
       <td>
        主从进程维护
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        3
       </td>
       <td>
        集群管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        4
       </td>
       <td>
        节点初始化
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        5
       </td>
       <td>
        节点操作与管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        6
       </td>
       <td>
        服务组件装配信息管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        7
       </td>
       <td>
        服务操作与管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        8
       </td>
       <td>
        组件操作与管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        9
       </td>
       <td>
        服务组件预配置项管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        10
       </td>
       <td>
        服务组件配置文件管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        11
       </td>
       <td>
        分布式日志全局管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        12
       </td>
       <td>
        监控管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        13
       </td>
       <td>
        告警管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        14
       </td>
       <td>
        用户管理
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        15
       </td>
       <td>
        权限管理
       </td>
       <td>
        是
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="_67">
     </a>
     五、编译环境
    </h3>
    <p>
     本项目编译需要满足如下需要：
    </p>
    <ul>
     <li>
      JDK 8
     </li>
     <li>
      Gradle 7.4+
     </li>
    </ul>
    <h3>
     <a id="_74">
     </a>
     六、部署说明
    </h3>
    <p>
     部署本项目前，请确保你已经准备好了必要的物理资源、操作系统并且理解了本项目的部署流程。
    </p>
    <h4>
     <a id="61__78">
     </a>
     6.1 准备物理资源
    </h4>
    <p>
     确保您有足够的硬件资源来部署和运行本项目。推荐的最小配置包括：
    </p>
    <ul>
     <li>
      CPU：4 Cores +
     </li>
     <li>
      内存：8 GB +
     </li>
     <li>
      硬盘：100 GB +
     </li>
     <li>
      网络：1 Gbps +
     </li>
    </ul>
    <h4>
     <a id="62__87">
     </a>
     6.2 准备操作系统
    </h4>
    <p>
     本项目目前仅支持（其他系统未测试）：
    </p>
    <ul>
     <li>
      CentOS 7.x (推荐：CentOS-7-x86_64-DVD-2009.iso)
     </li>
    </ul>
    <h4>
     <a id="63__93">
     </a>
     6.3 准备部署资源
    </h4>
    <p>
     clone 本项目，并下载所以来的服务组件包和依赖库库，包括：
    </p>
    <ul>
     <li>
      <p>
       clone 当前仓库，并编译；
      </p>
     </li>
     <li>
      <p>
       下载服务组件包，并放置于 plugins 目录下；
      </p>
     </li>
     <li>
      <p>
       构建 Linux 本地目录如下，并包含各目录中对应的文件（可直接网盘下载，或从项目的 .document 目录中拷贝）：
      </p>
      <table>
       <thead>
        <tr>
         <th>
          目录
         </th>
         <th>
          说明
         </th>
         <th>
          是否必要
         </th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td>
          /opt/datalight/app
         </td>
         <td>
          主从进程包目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/app/config
         </td>
         <td>
          主从进程包启动配置目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/assistant
         </td>
         <td>
          初始化节点助手目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/assistant/conf
         </td>
         <td>
          初始化节点助手配置文件
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/assistant/main
         </td>
         <td>
          初始化节点助手执行总入口
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/assistant/repo
         </td>
         <td>
          初始化节点助手依赖资源
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/assistant/scripts
         </td>
         <td>
          初始化节点助手相关子脚本
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/bin
         </td>
         <td>
          主从进程启停管理脚本
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/conf
         </td>
         <td>
          环境与服务配置文件目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/conf/env
         </td>
         <td>
          环境配置文件与脚本目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/conf/service
         </td>
         <td>
          服务部署维护配置文件目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/conf/permission
         </td>
         <td>
          权限生命与备注文件（暂无用）
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/conf/web
         </td>
         <td>
          服务组件 WebUI 配置文件目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/docs
         </td>
         <td>
          项目文档目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/docs/api
         </td>
         <td>
          三方 API 目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/docs/asserts
         </td>
         <td>
          文档资源目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/docs/package
         </td>
         <td>
          服务组件打包步骤文档记录目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/docs/maven
         </td>
         <td>
          Maven 配置目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/docs/src-[大写服务名称]-版本号
         </td>
         <td>
          服务组件源码文件修改记录目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/exporter
         </td>
         <td>
          JMX Eeporter 目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/exporter/bin
         </td>
         <td>
          Exporter 运行脚本示例目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/exporter/conf
         </td>
         <td>
          Exporter 配置文件模板目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/exporter/jar
         </td>
         <td>
          Exporter 插件 Jar 包所在目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/node
         </td>
         <td>
          节点操作相关配置与脚本目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/node/conf
         </td>
         <td>
          节点操作相关配置文件目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/node/scripts
         </td>
         <td>
          节点操作相关操作的脚本文件所在目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/orm
         </td>
         <td>
          数据库相关资料目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/orm/dmj
         </td>
         <td>
          数据库模型设计目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/orm/query
         </td>
         <td>
          项目中可能用到的 SQL 查询示例目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/orm/sql
         </td>
         <td>
          Master 元数据库 Schema 初始化文件所在目录
         </td>
         <td>
          否
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/plugins
         </td>
         <td>
          服务组件对应的插件目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/plugins/[大写服务名称]/dashboard
         </td>
         <td>
          仅 MONITOR 中存在，各个服务组件的监控模板
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/plugins/[大写服务名称]/dlc
         </td>
         <td>
          服务组件资源包（.tar.gz)
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/plugins/[大写服务名称]/jars
         </td>
         <td>
          服务组件对应的插件编译后的 Jar 包所在目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/plugins/[大写服务名称]/placeholder
         </td>
         <td>
          服务组件预配置项配置文件所在目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/plugins/[大写服务名称]/scripts
         </td>
         <td>
          服务组件聚合操作脚本所在目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/plugins/[大写服务名称]/templated
         </td>
         <td>
          服务组件配置文件模板所在目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/scripts
         </td>
         <td>
          公共脚本目录
         </td>
         <td>
          是
         </td>
        </tr>
        <tr>
         <td>
          /opt/datalight/scripts/tools
         </td>
         <td>
          通用工具脚本目录
         </td>
         <td>
          是
         </td>
        </tr>
       </tbody>
      </table>
     </li>
    </ul>
    <h5>
     <a id="631___154">
     </a>
     6.3.1 创建对应目录
    </h5>
    <p>
     在开始前，首先确认已在主节点中存在上述对应目录。
    </p>
    <h5>
     <a id="632___158">
     </a>
     6.3.2 准备前端页面
    </h5>
    <p>
     前往 DataLight 前端开源项目，按照对应文档执行编译操作，编译后，将编译文件解压后，拷贝至当前源码项目 datalight-services/services-master/public 目录中。
    </p>
    <p>
     DataLight 前端开源项目：
    </p>
    <pre><code class="prism language-http">https://gitee.com/boundivore/boundivore-datalight-web
</code></pre>
    <h5>
     <a id="633__MasterWorker_168">
     </a>
     6.3.3 准备 Master/Worker
    </h5>
    <p>
     将项目克隆后，使用代码编辑器打开后，执行 datalight-services 模块的编译操作（执行 boot-jar， 或从网盘中下载编译好的 jar 包)，在 services-master 与 services-worker 项目的 build/libs 目录下，可以分别看到 services-master-[版本号].jar、services-worker-[版本号].jar 两个进程文件，拷贝至 app/ 目录下即可。
    </p>
    <h5>
     <a id="634__Plugins_172">
     </a>
     6.3.4 准备服务组件插件 Plugins
    </h5>
    <p>
     将项目克隆后，使用代码编辑器打开后，执行 datalight-plugins 模块的编译操作，将该模块下对应服务的插件 jar 包拷贝至指定目录(plugins/[服务名称]/jar)中，例如：/opt/datalight/plugins/[大写服务名称]/jars。
    </p>
    <h5>
     <a id="635__176">
     </a>
     6.3.5 拷贝其他文件目录
    </h5>
    <p>
     在主项目目录中，找到 .documents 文件夹，其下对应内容，拷贝至上述表格中对应的目录中即可。
    </p>
    <h5>
     <a id="636__DLC__180">
     </a>
     6.3.6 准备 DLC 服务包
    </h5>
    <p>
     前往如下地址下载 DLC 服务包：
    </p>
    <pre><code class="prism language-http">链接：https://pan.baidu.com/s/1342bIcEBDQHdFA35KUTjbQ 
提取码：data 
</code></pre>
    <p>
     下载后，解压，将对应服务的 .tar.gz 包放置于对应的 /opt/datalight/plugins/[大写服务名称]/dlc 的目录中即可。
    </p>
    <h4>
     <a id="64__191">
     </a>
     6.4 初始化环境
    </h4>
    <p>
     在启动 Master 主程序之前，需要确认各个准备服役的节点已经完成相关初始化操作，DataLight 平台封装了相关工具，可帮助用户快速一次性初始化所有节点，用户也可手动进行初始化操作。
    </p>
    <h5>
     <a id="641__195">
     </a>
     6.4.1 自动初始化
    </h5>
    <p>
     自动初始化工具位于部署目录下的 assistant 目录，其中涉及到修改的内容如下。
    </p>
    <p>
     注意：MySQL 5.7 请自行手动安装，自动初始化工具将不包含这部分内容。
    </p>
    <p>
     下面将对个配置文件进行举例说明。
    </p>
    <ul>
     <li>
      <p>
       init-main-cluster.properties
      </p>
      <pre><code class="prism language-properties"># 准备初始化的节点列表配置信息，Key 前缀为序号，不可重复，需要初始化多少节点，则添加多少节点
# 建议：1.node.ip 为当前执行脚本的节点 IP
1.node.ip=192.168.137.10
1.node.ssh.port=22
1.node.hostname=node01
1.node.user.root=root
1.node.pwd.root=123456
1.node.user.datalight=datalight
1.node.pwd.datalight=12345678

2.node.ip=192.168.137.11
2.node.ssh.port=22
2.node.hostname=node02
2.node.user.root=root
2.node.pwd.root=123456
2.node.user.datalight=datalight
2.node.pwd.datalight=12345678

3.node.ip=192.168.137.12
3.node.ssh.port=22
3.node.hostname=node03
3.node.user.root=root
3.node.pwd.root=123456
3.node.user.datalight=datalight
3.node.pwd.datalight=12345678
</code></pre>
     </li>
     <li>
      <p>
       init-main-single-settings.txt
      </p>
      <p>
       脚本将按照下面的内容依次在 “每个节点” 按脚本 “配置顺序” 执行，从而完成对各个节点的初始化操作。
      </p>
      <pre><code class="prism language-text">init-stop-firewall.sh
init-ssh-remove-ask.sh
init-close-swap.sh
init-optimize-sysctl.sh
init-systemd-conf.sh
init-hostname.sh
init-hosts.sh
init-user-group.sh
init-datalight-env.sh
init-jdk.sh
init-yum-install.sh
init-chrony-server-config.sh
init-chrony-client-config.sh
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="642__253">
     </a>
     6.4.2 手动初始化
    </h5>
    <p>
     手动初始化涉及如下内容：
    </p>
    <ul>
     <li>
      <p>
       关闭防火墙（或开放服务所需访问限制）
      </p>
     </li>
     <li>
      <p>
       关闭 SSH 访问确认
      </p>
     </li>
     <li>
      <p>
       关闭 Swap 内存交换
      </p>
     </li>
     <li>
      <p>
       优化内存管理和I/O性能
      </p>
     </li>
     <li>
      <p>
       设置一个进程可以拥有的最大内存映射区域数量为 655300
      </p>
      <pre><code class="prism language-shell"><span class="token assign-left variable">vm.max_map_count</span><span class="token operator">=</span><span class="token number">655300</span>  <span class="token comment"># 设置一个进程可以拥有的最大内存映射区域数量为 655300。</span>
<span class="token assign-left variable">vm.dirty_ratio</span><span class="token operator">=</span><span class="token number">10</span>  <span class="token comment"># 指定系统中“脏”页占可用内存的最大百分比为 10%。</span>
<span class="token assign-left variable">vm.dirty_background_ratio</span><span class="token operator">=</span><span class="token number">5</span>  <span class="token comment"># 指定后台写脏页操作开始的内存占用百分比阈值为 5%。</span>
<span class="token assign-left variable">vm.dirty_writeback_centisecs</span><span class="token operator">=</span><span class="token number">200</span>  <span class="token comment"># 设置内核周期性地将脏页写回磁盘的时间间隔为 200 百分之一秒（即每 2 秒）。</span>
<span class="token assign-left variable">vm.vfs_cache_pressure</span><span class="token operator">=</span><span class="token number">200</span>  <span class="token comment"># 控制内核回收目录和 inode 缓存时的积极程度为 200。</span>
<span class="token assign-left variable">vm.dirty_expire_centisecs</span><span class="token operator">=</span><span class="token number">6000</span>  <span class="token comment"># 设置脏页在被强制写回磁盘前可以在内存中停留的最长时间为 6000 百分之一秒（即 60 秒）。</span>
</code></pre>
     </li>
     <li>
      <p>
       优化内存管理、I/O性能和资源限制，以提高系统在处理大量数据和内存映射任务时的效率和稳定性
      </p>
      <pre><code class="prism language-shell"><span class="token assign-left variable">vm.max_map_count</span><span class="token operator">=</span><span class="token number">655300</span>  <span class="token comment"># 设置一个进程可以拥有的最大内存映射区域数量为 655300。</span>
<span class="token assign-left variable">vm.dirty_ratio</span><span class="token operator">=</span><span class="token number">10</span>  <span class="token comment"># 指定系统中“脏”页占可用内存的最大百分比为 10%。</span>
<span class="token assign-left variable">vm.dirty_background_ratio</span><span class="token operator">=</span><span class="token number">5</span>  <span class="token comment"># 指定后台写脏页操作开始的内存占用百分比阈值为 5%。</span>
<span class="token assign-left variable">vm.dirty_writeback_centisecs</span><span class="token operator">=</span><span class="token number">200</span>  <span class="token comment"># 设置内核周期性地将脏页写回磁盘的时间间隔为 200 百分之一秒（即每 2 秒）。</span>
<span class="token assign-left variable">vm.vfs_cache_pressure</span><span class="token operator">=</span><span class="token number">200</span>  <span class="token comment"># 控制内核回收目录和 inode 缓存时的积极程度为 200。</span>
<span class="token assign-left variable">vm.dirty_expire_centisecs</span><span class="token operator">=</span><span class="token number">6000</span>  <span class="token comment"># 设置脏页在被强制写回磁盘前可以在内存中停留的最长时间为 6000 百分之一秒（即 60 秒）。</span>

<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'/^DefaultLimitNOFILE=/d'</span> <span class="token string">"<span class="token variable">$system_conf</span>"</span>  <span class="token comment"># 删除 system.conf 中现有的 DefaultLimitNOFILE 设置</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'/^DefaultLimitNPROC=/d'</span> <span class="token string">"<span class="token variable">$system_conf</span>"</span>  <span class="token comment"># 删除 system.conf 中现有的 DefaultLimitNPROC 设置</span>
<span class="token builtin class-name">echo</span> <span class="token string">"DefaultLimitNOFILE=131072"</span> <span class="token operator">&gt;&gt;</span> <span class="token string">"<span class="token variable">$system_conf</span>"</span>  <span class="token comment"># 添加新的 DefaultLimitNOFILE 设置</span>
<span class="token builtin class-name">echo</span> <span class="token string">"DefaultLimitNPROC=131072"</span> <span class="token operator">&gt;&gt;</span> <span class="token string">"<span class="token variable">$system_conf</span>"</span>  <span class="token comment"># 添加新的 DefaultLimitNPROC 设置</span>

<span class="token function">cat</span> <span class="token operator">&gt;</span> <span class="token string">"/etc/security/limits.conf"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
root        soft    nproc   131072  # 设置 root 用户的软 nproc 限制为 131072
root        hard    nproc   131072  # 设置 root 用户的硬 nproc 限制为 131072
root        soft    nofile  131072  # 设置 root 用户的软 nofile 限制为 131072
root        hard    nofile  131072  # 设置 root 用户的硬 nofile 限制为 131072
*           soft    nproc   131072  # 设置所有用户的软 nproc 限制为 131072
*           hard    nproc   131072  # 设置所有用户的硬 nproc 限制为 131072
*           soft    nofile  131072  # 设置所有用户的软 nofile 限制为 131072
*           hard    nofile  131072  # 设置所有用户的硬 nofile 限制为 131072
*           hard    fsize   unlimited  # 设置所有用户的硬文件大小限制为无限
*           soft    fsize   unlimited  # 设置所有用户的软文件大小限制为无限
*           soft    cpu     unlimited  # 设置所有用户的软 CPU 时间限制为无限
*           hard    cpu     unlimited  # 设置所有用户的硬 CPU 时间限制为无限
*           soft    as      unlimited  # 设置所有用户的软地址空间限制为无限
*           hard    as      unlimited  # 设置所有用户的硬地址空间限制为无限
EOF</span>
</code></pre>
      <ul>
       <li>
        <p>
         修改所有节点主机名
        </p>
       </li>
       <li>
        <p>
         修改所有节点内网 IP 与主机名映射关系
        </p>
       </li>
       <li>
        <p>
         创建 Linux 中 DataLight 用户名与组
        </p>
       </li>
       <li>
        <p>
         设置系统、用户、伪终端环境变量
        </p>
       </li>
       <li>
        <p>
         安装 JDK 1.8
        </p>
       </li>
       <li>
        <p>
         安装 yum 依赖
        </p>
        <pre><code class="prism language-shell">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> epel-release  <span class="token comment"># 安装 EPEL 仓库，提供额外的软件包</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> jq  <span class="token comment"># 安装 jq，用于处理 JSON 数据</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">curl</span>  <span class="token comment"># 安装 curl，用于命令行数据传输</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> chrony  <span class="token comment"># 安装 chrony，用于时间同步</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">expect</span>  <span class="token comment"># 安装 expect，用于自动化交互式 shell 脚本</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> openssl openssl-devel patch  <span class="token comment"># 安装 OpenSSL 和开发包及 patch 工具</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> lrzsz  <span class="token comment"># 安装 lrzsz，用于 ZMODEM 文件传输</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">unzip</span> <span class="token function">zip</span>  <span class="token comment"># 安装 unzip 和 zip，用于解压和压缩文件</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> yum-utils  <span class="token comment"># 安装 yum-utils，提供额外的 yum 命令</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> net-tools  <span class="token comment"># 安装 net-tools，提供网络工具如 ifconfig</span>

yum <span class="token parameter variable">-y</span> <span class="token function">install</span> gcc gcc-c++  <span class="token comment"># 安装 GCC 和 G++ 编译器</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">make</span>  <span class="token comment"># 安装 make，构建自动化工具</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> autoconf automake libtool <span class="token function">curl</span>  <span class="token comment"># 安装 autoconf、automake、libtool 和 curl，用于构建和配置软件</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> zlib lzo-devel zlib-devel openssl openssl-devel ncurses-devel ruby  <span class="token comment"># 安装 zlib、lzo-devel、zlib-devel、openssl、openssl-devel、ncurses-devel 和 ruby，用于压缩、加密、终端控制和 Ruby 语言支持</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> snappy snappy-devel <span class="token function">bzip2</span> bzip2-devel lzo lzo-devel lzop libXtst  <span class="token comment"># 安装 snappy、snappy-devel、bzip2、bzip2-devel、lzo、lzo-devel、lzop 和 libXtst，用于数据压缩和图形界面支持</span>
</code></pre>
       </li>
       <li>
        <p>
         主节点安装并配置 chrony 时间管理服务器
        </p>
       </li>
       <li>
        <p>
         从节点安装并配置 chrony 时间同步客户端
        </p>
       </li>
       <li>
        <p>
         安装 MySQL 5.7（如需 MySQL 8+ 以上支持，可自行适配平台以及服务组件源码）
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="65__DataLight__346">
     </a>
     6.5 初始化 DataLight 数据库
    </h4>
    <p>
     上述环境初始化完毕后，需按照如下步骤初始化平台数据库；
    </p>
    <ul>
     <li>
      <p>
       创建 db_datalight 数据库
      </p>
      <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> db_datalight <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_unicode_ci<span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       执行初始化 SQL 文件
      </p>
      <pre><code class="prism language-sql"><span class="token keyword">USE</span> db_datalight<span class="token punctuation">;</span>
SOURCE <span class="token operator">/</span>opt<span class="token operator">/</span>datalight<span class="token operator">/</span>orm<span class="token operator">/</span><span class="token keyword">sql</span><span class="token operator">/</span>db_datalight<span class="token punctuation">.</span><span class="token keyword">sql</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="66__Master__363">
     </a>
     6.6 启动 Master 主程序
    </h4>
    <p>
     完成上述初始化操作后，各个节点已经准备好了工作所需的内容，此时可以通过如下方式启动 Master 进程，在主节点中执行：
    </p>
    <pre><code class="prism language-shell">/opt/datalight/bin/datalight.sh start master <span class="token number">8001</span>
</code></pre>
    <p>
     启动成功后，将看到如下日志内容：
    </p>
    <pre><code class="prism language-shell">No masterIp provided or masterIp is empty. Skipping IP validation.
master starting <span class="token keyword">in</span> <span class="token number">10263</span><span class="token punctuation">..</span>.
master started.
/opt/datalight/bin/datalight.sh done.
</code></pre>
    <h4>
     <a id="67___380">
     </a>
     6.7 登录
    </h4>
    <p>
     启动 Master 主进程成功后，可访问如下页面进行登录：
    </p>
    <pre><code class="prism language-http">http://&lt;Master-IP&gt;:8001
</code></pre>
    <p>
     注：首次默认账号密码为：admin/admin
    </p>
    <p>
     页面如下：
     <br/>
     <img alt="登录页" src="https://i-blog.csdnimg.cn/blog_migrate/a639c05a36ae65e00b3a41aaa1d702b2.png"/>
    </p>
    <h3>
     <a id="_393">
     </a>
     七、产品手册
    </h3>
    <p>
     完成上述内容后，请查看
     <a href="./.documents/docs/%E4%BA%A7%E5%93%81%E6%89%8B%E5%86%8C.md" rel="nofollow">
      产品手册
     </a>
     继续页面部署操作。
    </p>
    <h3>
     <a id="_397">
     </a>
     八、计划支持的服务
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        服务
       </th>
       <th>
        版本
       </th>
       <th>
        是否已支持
       </th>
       <th>
        完成日期
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        ZOOKEEPER
       </td>
       <td>
        3.8.2
       </td>
       <td>
        √
       </td>
       <td>
        2023-07
       </td>
      </tr>
      <tr>
       <td>
        HDFS
       </td>
       <td>
        3.2.4
       </td>
       <td>
        √
       </td>
       <td>
        2023-07
       </td>
      </tr>
      <tr>
       <td>
        YARN
       </td>
       <td>
        3.2.4
       </td>
       <td>
        √
       </td>
       <td>
        2023-08
       </td>
      </tr>
      <tr>
       <td>
        PROMETHEUS
       </td>
       <td>
        2.46.0
       </td>
       <td>
        √
       </td>
       <td>
        2023-08
       </td>
      </tr>
      <tr>
       <td>
        ALERTMANAGER
       </td>
       <td>
        0.26.0
       </td>
       <td>
        √
       </td>
       <td>
        2023-08
       </td>
      </tr>
      <tr>
       <td>
        GRAFANA
       </td>
       <td>
        10.0.3
       </td>
       <td>
        √
       </td>
       <td>
        2023-08
       </td>
      </tr>
      <tr>
       <td>
        HIVE
       </td>
       <td>
        3.1.3
       </td>
       <td>
        √
       </td>
       <td>
        2024-04
       </td>
      </tr>
      <tr>
       <td>
        TEZ
       </td>
       <td>
        0.10.2
       </td>
       <td>
        √
       </td>
       <td>
        2024-04
       </td>
      </tr>
      <tr>
       <td>
        HBASE
       </td>
       <td>
        2.5.9
       </td>
       <td>
        √
       </td>
       <td>
        2024-04
       </td>
      </tr>
      <tr>
       <td>
        SPARK
       </td>
       <td>
        3.1.3
       </td>
       <td>
        √
       </td>
       <td>
        2024-05
       </td>
      </tr>
      <tr>
       <td>
        FLINK
       </td>
       <td>
        3.1.3
       </td>
       <td>
        √
       </td>
       <td>
        2024-05
       </td>
      </tr>
      <tr>
       <td>
        HUDI
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        KUBESPHERE
       </td>
       <td>
        3.3.2
       </td>
       <td>
        √
       </td>
       <td>
        2023-09
       </td>
      </tr>
      <tr>
       <td>
        SEATUNNEL
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        DOPHINSCHDULER
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        RANGER
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        ATLAS
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        HUE
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        KAFKA
       </td>
       <td>
        2.6.0
       </td>
       <td>
        √
       </td>
       <td>
        2024-05
       </td>
      </tr>
      <tr>
       <td>
        ES
       </td>
       <td>
        任意
       </td>
       <td>
        因协议问题，用户自行集成即可
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        TRINO
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        KYLIN
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        KUDU
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        IMPALA
       </td>
       <td>
        待定
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        More…
       </td>
       <td>
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="_427">
     </a>
     参与开源
    </h3>
    <p>
     如果您对本项目感兴趣，欢迎提供积极的反馈，帮助该项目做的更好。
    </p>
    <p>
     微信公众号：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ff8adbf272ecc96664c55605149ba885.jpeg"/>
    </p>
    <p>
     QQ 交流群：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2f1554f95b2081114da98fb96b34e5be.jpeg"/>
    </p>
    <p>
     微信交流：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/650bf5c00c1efec3c21f4c90838363ec.jpeg"/>
    </p>
    <h3>
     <a id="_441">
     </a>
     开源协议
    </h3>
    <p>
     本项目采用 Apache 2.0 开源协议。有关详细内容，请查看
     <a href="http://www.apache.org/licenses/" rel="nofollow">
      Apache 2.0 LICENSE
     </a>
     。
    </p>
    <p>
     希望这些推荐的项目能够帮助你在开发过程中提高效率，解决常见问题。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f426f756e6469766f72652f:61727469636c652f64657461696c732f313339383835363637" class_="artid" style="display:none">
 </p>
</div>


