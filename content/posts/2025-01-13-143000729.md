---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f74616f6a617661636f6d2f:61727469636c652f64657461696c732f313433303030373239"
layout: post
title: "åŸºäºå¾®ä¿¡å°ç¨‹åºçš„å•†åŸç³»ç»Ÿæºç æ–‡æ¡£éƒ¨ç½²è®²è§£ç­‰"
date: 2025-01-13 13:02:17 +08:00
description: "ä¸€ã€ç³»ç»Ÿæ¦‚è¿°æœ¬å•†åŸç³»ç»ŸåŸºäº Spring Boot æ¡†æ¶å¼€å‘ï¼Œç»“åˆå°ç¨‹åºå‰ç«¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¾¿æ·çš„è´­ç‰©ä½“"
keywords: "å¾®ä¿¡å°ç¨‹åºå•†åŸæºç "
categories: ['æœªåˆ†ç±»']
tags: ['å¾®ä¿¡å°ç¨‹åº', 'å°ç¨‹åº']
artid: "143000729"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=143000729
  alt: "åŸºäºå¾®ä¿¡å°ç¨‹åºçš„å•†åŸç³»ç»Ÿæºç æ–‡æ¡£éƒ¨ç½²è®²è§£ç­‰"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143000729
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143000729
---

# åŸºäºå¾®ä¿¡å°ç¨‹åºçš„å•†åŸç³»ç»Ÿ(æºç +æ–‡æ¡£+éƒ¨ç½²è®²è§£ç­‰)

> ä¸€ã€ç³»ç»Ÿæ¦‚è¿°
>   
> æœ¬å•†åŸç³»ç»ŸåŸºäº Spring Boot æ¡†æ¶å¼€å‘ï¼Œç»“åˆå°ç¨‹åºå‰ç«¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¾¿æ·çš„è´­ç‰©ä½“éªŒã€‚ç³»ç»Ÿå…·å¤‡å•†å“å±•ç¤ºã€è´­ç‰©è½¦ã€è®¢å•ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ»¡è¶³ç”µå•†ä¸šåŠ¡çš„æ—¥å¸¸è¿è¥éœ€æ±‚ã€‚
>   
> äºŒã€åŠŸèƒ½æ¨¡å—
>   
> å•†å“ç®¡ç†
>   
> å•†å“åˆ†ç±»ï¼šå¯¹å•†å“è¿›è¡Œåˆ†ç±»ç®¡ç†ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥æ‰¾ã€‚
>   
> å•†å“å±•ç¤ºï¼šå±•ç¤ºå•†å“çš„å›¾ç‰‡ã€åç§°ã€ä»·æ ¼ã€æè¿°ç­‰ä¿¡æ¯ã€‚
>   
> å•†å“æœç´¢ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡å…³é”®è¯æœç´¢å•†å“ã€‚
>   
> å•†å“åº“å­˜ç®¡ç†ï¼šå®æ—¶æ›´æ–°å•†å“åº“å­˜æ•°é‡ã€‚
>   
> è´­ç‰©è½¦
>   
> æ·»åŠ å•†å“ï¼šç”¨æˆ·å¯ä»¥å°†å•†å“æ·»åŠ åˆ°è´­ç‰©è½¦ã€‚
>   
> è´­ç‰©è½¦ç»“ç®—ï¼šç”¨æˆ·å¯ä»¥å¯¹è´­ç‰©è½¦ä¸­çš„å•†å“è¿›è¡Œç»“ç®—ã€‚
>   
> ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡ï¼šç”¨æˆ·å¯ä»¥ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡ã€‚
>   
> åˆ é™¤è´­ç‰©è½¦å•†å“ï¼šç”¨æˆ·å¯ä»¥åˆ é™¤è´­ç‰©è½¦ä¸­çš„å•†å“ã€‚
>   
> è®¢å•ç®¡ç†
>   
> è®¢å•ç”Ÿæˆï¼šç”¨æˆ·ç»“ç®—è´­ç‰©è½¦åï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆè®¢å•ã€‚
>   
> è®¢å•çŠ¶æ€è·Ÿè¸ªï¼šç”¨æˆ·å¯ä»¥å®æ—¶æŸ¥çœ‹è®¢å•çŠ¶æ€ï¼ŒåŒ…æ‹¬å¾…ä»˜æ¬¾ã€å¾…å‘è´§ã€å·²å‘è´§ã€å·²å®Œæˆç­‰ã€‚
>   
> è®¢å•è¯„ä»·ï¼šç”¨æˆ·å¯ä»¥å¯¹å·²å®Œæˆçš„è®¢å•è¿›è¡Œè¯„ä»·ã€‚
>   
> ç”¨æˆ·ç®¡ç†
>   
> ç”¨æˆ·æ³¨å†Œä¸ç™»å½•ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡æ‰‹æœºå·ç ã€é‚®ç®±ç­‰æ–¹å¼æ³¨å†Œè´¦å·ï¼Œå¹¶ç™»å½•ç³»ç»Ÿè¿›è¡Œè´­ç‰©ã€‚
>   
> ç”¨æˆ·ä¿¡æ¯ç®¡ç†ï¼šç”¨æˆ·å¯ä»¥ä¿®æ”¹ä¸ªäººä¿¡æ¯ã€æŸ¥çœ‹è®¢å•è®°å½•ç­‰ã€‚
>   
> ç”¨æˆ·åœ°å€ç®¡ç†ï¼šç”¨æˆ·å¯ä»¥æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ”¶è´§åœ°å€ã€‚
>   
> æ”¯ä»˜ç®¡ç†
>   
> æ”¯æŒå¤šç§æ”¯ä»˜æ–¹å¼ï¼Œå¦‚å¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®æ”¯ä»˜ç­‰ã€‚
>   
> ç¡®ä¿æ”¯ä»˜å®‰å…¨ï¼Œä¿æŠ¤ç”¨æˆ·èµ„é‡‘å®‰å…¨ã€‚
>   
> ä¸‰ã€æŠ€æœ¯å®ç°
>   
> åç«¯æŠ€æœ¯
>   
> ä½¿ç”¨ Spring Boot æ¡†æ¶æ­å»ºåç«¯æœåŠ¡ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®ã€‚
>   
> é‡‡ç”¨ MySQL æ•°æ®åº“å­˜å‚¨å•†å“ä¿¡æ¯ã€è®¢å•ä¿¡æ¯ã€ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚
>   
> ä½¿ç”¨ MyBatis æ¡†æ¶è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
>   
> å‰ç«¯æŠ€æœ¯ï¼ˆå°ç¨‹åºï¼‰
>   
> é‡‡ç”¨å°ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œå®ç°è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚
>   
> ç•Œé¢è®¾è®¡ç®€æ´ç¾è§‚ï¼Œæ“ä½œæ–¹ä¾¿å¿«æ·ã€‚
>   
> å››ã€éƒ¨ç½²ä¸è®²è§£
>   
> éƒ¨ç½²ç¯å¢ƒ
>   
> æœåŠ¡å™¨ï¼šå¯ä»¥é€‰æ‹©äº‘æœåŠ¡å™¨æˆ–æœ¬åœ°æœåŠ¡å™¨ï¼Œç¡®ä¿æœåŠ¡å™¨å…·æœ‰è¶³å¤Ÿçš„æ€§èƒ½å’Œå­˜å‚¨ç©ºé—´ã€‚
>   
> æ“ä½œç³»ç»Ÿï¼šæ¨èä½¿ç”¨ Linux æ“ä½œç³»ç»Ÿï¼Œå¦‚ CentOSã€Ubuntu ç­‰ã€‚
>   
> æ•°æ®åº“ï¼šå®‰è£… MySQL æ•°æ®åº“ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„é…ç½®ã€‚
>   
> JDKï¼šå®‰è£… Java Development Kitï¼ˆJDKï¼‰ï¼Œç¡®ä¿ç‰ˆæœ¬ä¸ Spring Boot å…¼å®¹ã€‚
>   
> å°ç¨‹åºå¼€å‘å·¥å…·ï¼šå®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·æˆ–å…¶ä»–å°ç¨‹åºå¼€å‘å·¥å…·ã€‚
>   
> éƒ¨ç½²æ­¥éª¤
>   
> åç«¯éƒ¨ç½²
>   
> å°†é¡¹ç›®ä»£ç æ‰“åŒ…æˆå¯æ‰§è¡Œçš„ JAR åŒ…æˆ– WAR åŒ…ã€‚
>   
> å°†æ‰“åŒ…åçš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›è¡Œè§£å‹ç¼©ã€‚
>   
> é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿæ­£å¸¸è¿æ¥åˆ°æ•°æ®åº“ã€‚
>   
> å¯åŠ¨æœåŠ¡å™¨ï¼Œè¿è¡Œé¡¹ç›®ã€‚
>   
> å°ç¨‹åºéƒ¨ç½²
>   
> åœ¨å°ç¨‹åºå¼€å‘å·¥å…·ä¸­å¯¼å…¥å°ç¨‹åºé¡¹ç›®ä»£ç ã€‚
>   
> é…ç½®å°ç¨‹åºçš„æœåŠ¡å™¨åœ°å€ç­‰å‚æ•°ã€‚
>   
> è¿›è¡Œå°ç¨‹åºçš„è°ƒè¯•å’Œæµ‹è¯•ã€‚
>   
> æäº¤å°ç¨‹åºå®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åå‘å¸ƒä¸Šçº¿ã€‚
>   
> è®²è§£å†…å®¹
>   
> ç³»ç»Ÿçš„åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨æ–¹æ³•ã€‚
>   
> ç³»ç»Ÿçš„æŠ€æœ¯æ¶æ„å’Œå®ç°åŸç†ã€‚
>   
> ç³»ç»Ÿçš„éƒ¨ç½²æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ã€‚
>   
> å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•ã€‚
>   
> é€šè¿‡åŸºäº Spring Boot çš„å•†åŸç³»ç»Ÿçš„å¼€å‘ï¼Œå¯ä»¥ä¸ºç”µå•†ä¼ä¸šæä¾›é«˜æ•ˆã€ç¨³å®šçš„è´­ç‰©å¹³å°ï¼Œæå‡ç”¨æˆ·è´­ç‰©ä½“éªŒï¼Œä¿ƒè¿›ä¼ä¸šçš„å‘å±•ã€‚

### å‰è¨€

> ğŸ’—
> **åšä¸»ä»‹ç»**
> ï¼šâœŒå…¨ç½‘ç²‰ä¸30W+,csdnç‰¹é‚€ä½œè€…ã€åšå®¢ä¸“å®¶ã€CSDNæ–°æ˜Ÿè®¡åˆ’å¯¼å¸ˆã€Javaé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…,åšå®¢ä¹‹æ˜Ÿã€æ˜é‡‘/åä¸ºäº‘/é˜¿é‡Œäº‘/InfoQç­‰å¹³å°ä¼˜è´¨ä½œè€…ã€ä¸“æ³¨äºJavaæŠ€æœ¯é¢†åŸŸå’Œå­¦ç”Ÿæ¯•ä¸šé¡¹ç›®å®æˆ˜,é«˜æ ¡è€å¸ˆ/è®²å¸ˆ/åŒè¡Œäº¤æµåˆä½œâœŒğŸ’—
>   
> ğŸ’—
> **ä¸»è¦å†…å®¹**
> ï¼šSpringBootã€Vueã€SSMã€HLMTã€Jspã€PHPã€Nodejsã€Pythonã€çˆ¬è™«ã€æ•°æ®å¯è§†åŒ–ã€å°ç¨‹åºã€å®‰å“appã€å¤§æ•°æ®ã€ç‰©è”ç½‘ã€æœºå™¨å­¦ä¹ ç­‰è®¾è®¡ä¸å¼€å‘ã€‚
>   
> ğŸ…
> æ–‡æœ«è·å–æºç è”ç³»ğŸ…
>   
> ğŸ‘‡ğŸ»
> ç²¾å½©ä¸“æ  æ¨èè®¢é˜…ğŸ‘‡ğŸ»
>   
> [2025-2026å¹´æœ€å€¼å¾—é€‰çš„å¾®ä¿¡å°ç¨‹åºæ¯•ä¸šè®¾è®¡é€‰é¢˜å¤§å…¨ï¼š100ä¸ªçƒ­é—¨é€‰é¢˜æ¨èâœ…](https://blog.csdn.net/qq_67371723/article/details/139430117)
>   
> [2025-2026å¹´æœ€å€¼å¾—é€‰çš„Javaæ¯•ä¸šè®¾è®¡é€‰é¢˜å¤§å…¨ï¼š500ä¸ªçƒ­é—¨é€‰é¢˜æ¨èâœ…](https://blog.csdn.net/qq_67371723/article/details/139429839)
>   
> [Javaæ¯•ä¸šè®¾è®¡é¡¹ç›®ç²¾å“å®æˆ˜æ¡ˆä¾‹ã€Š3000å¥—ã€‹](https://blog.csdn.net/qq_32352957/category_11084640.html)
>   
> [å¾®ä¿¡å°ç¨‹åºæ¯•ä¸šè®¾è®¡é¡¹ç›®ç²¾å“æ¡ˆä¾‹ã€Š3000å¥—ã€‹](https://blog.csdn.net/qq_32352957/category_11087544.html)
>   
> ğŸŒŸæ–‡æœ«è·å–æºç +æ•°æ®åº“ğŸŒŸ
>   
>
> å…è´¹åŠŸèƒ½è®¾è®¡ã€å¼€é¢˜æŠ¥å‘Šã€ä»»åŠ¡ä¹¦ã€ä¸­æœŸæ£€æŸ¥PPTã€ç³»ç»ŸåŠŸèƒ½å®ç°ã€ä»£ç ç¼–å†™ã€è®ºæ–‡ç¼–å†™å’Œè¾…å¯¼ã€è®ºæ–‡é™é‡ã€é•¿æœŸç­”è¾©ç­”ç–‘è¾…å¯¼ã€è…¾è®¯ä¼šè®®ä¸€å¯¹ä¸€ä¸“ä¸šè®²è§£è¾…å¯¼ç­”è¾©ã€æ¨¡æ‹Ÿç­”è¾©æ¼”ç»ƒã€å’Œç†è§£ä»£ç é€»è¾‘æ€è·¯ã€‚
>   
> æ„Ÿå…´è¶£çš„å¯ä»¥å…ˆæ”¶è—èµ·æ¥ï¼Œè¿˜æœ‰å¤§å®¶åœ¨æ¯•è®¾é€‰é¢˜ï¼Œé¡¹ç›®ä»¥åŠè®ºæ–‡ç¼–å†™ç­‰ç›¸å…³é—®é¢˜éƒ½å¯ä»¥ç»™æˆ‘ç•™è¨€å’¨è¯¢ï¼Œå¸Œæœ›å¸®åŠ©æ›´å¤šçš„äºº

### ä¸“ä¸šæ“…é•¿

> å…è´¹åŠŸèƒ½è®¾è®¡ã€å¼€é¢˜æŠ¥å‘Šã€ä»»åŠ¡ä¹¦ã€ä¸­æœŸæ£€æŸ¥PPTã€ç³»ç»ŸåŠŸèƒ½å®ç°ã€ä»£ç ç¼–å†™ã€è®ºæ–‡ç¼–å†™å’Œè¾…å¯¼ã€è®ºæ–‡é™é‡ã€é•¿æœŸç­”è¾©ç­”ç–‘è¾…å¯¼ã€è…¾è®¯ä¼šè®®ä¸€å¯¹ä¸€ä¸“ä¸šè®²è§£è¾…å¯¼ç­”è¾©ã€æ¨¡æ‹Ÿç­”è¾©æ¼”ç»ƒã€å’Œç†è§£ä»£ç é€»è¾‘æ€è·¯ã€‚

### ç³»ç»Ÿæˆªå›¾

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/21170413b3994404a79a38feb88e9ff2.jpeg#pic_center)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/8daa727e3c3c4af28e42b06935fe8eaa.jpeg#pic_center)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b9f2998ef0a94f8e8e8603a450dc58e6.jpeg#pic_center)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e2be4c02a4cf462597a7f59024fb38f1.jpeg#pic_center)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/dbc8b565e2434f9bbfd945a9eb4a4eee.jpeg#pic_center)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/48e6249c91dd4d9f988fa721abf21898.jpeg#pic_center)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d4afc1ec10024f0f98fb15c9d71bace3.jpeg#pic_center)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/dba6c15d3a42428ebf91bdf8e0c9bdba.jpeg#pic_center)

### å¼€å‘æŠ€æœ¯ä»‹ç»

#### åç«¯æ¡†æ¶SpringBoot

### å‰ç«¯æ¡†æ¶Vue

### MySQLæ•°æ®åº“

> æœ¬æ¬¡è®¾è®¡é‡‡ç”¨Mysqlæ•°æ®åº“ï¼ŒMysqlæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æ•°æ®åº“ï¼Œå®ƒå…·æœ‰å¾ˆå¤šçš„ä¼˜ç‚¹ï¼ŒåŒ…æ‹¬ä½“ç§¯å°ã€å¼€æºå…è´¹ç­‰ç‰¹ç‚¹ï¼Œæ˜¯ä¸€ç§å…³ç³»å‹æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡SQLè¯­å¥è¿›è¡Œå„é¡¹æ“ä½œã€‚Mysqlåœ¨è¿‘å¹´æ¥ç‰¹åˆ«å—æ¬¢è¿ï¼Œå…¶ä¸»è¦ä¼˜åŠ¿æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š
>   
> ï¼ˆ1ï¼‰ä½“ç§¯å°ï¼Œå®‰è£…å¿«ã€‚æ­£å¸¸çš„Mysqlå®‰è£…åŒ…åªæœ‰100å¤šMï¼Œè€Œä¸”å®‰è£…é€Ÿåº¦ä¹Ÿå¿«ï¼Œå¯¹æœåŠ¡å™¨çš„è¦æ±‚æ¯”è¾ƒä½ï¼Œç‰¹åˆ«é€‚åˆå°å‹ç®¡ç†ç³»ç»Ÿæˆ–ç½‘ç«™ã€‚
>   
> ï¼ˆ2ï¼‰å¼€æºå…è´¹ã€‚Mysqlæ˜¯ä¸€ä¸ªå…è´¹çš„æ•°æ®åº“ï¼Œæ— éœ€ä»˜è´¹å³å¯ä½¿ç”¨ï¼Œè€Œä¸”å†…éƒ¨ä»£ç éƒ½æ˜¯å¼€æºçš„ï¼Œå¯ä»¥å…±åŒç»´æŠ¤Mysqlç”Ÿæ€ã€‚
>   
> ï¼ˆ3ï¼‰è·¨å¹³å°ã€‚Mysqlæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„æ•°æ®åº“ï¼Œå¯ä»¥åœ¨å¾ˆå¤šæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œåªéœ€è¦å®‰è£…javaè™šæ‹Ÿæœºå³å¯ã€‚
>   
> Mysqlæä¾›äº†JDBCé©±åŠ¨ç»™å„ç±»ç¨‹åºè¿›è¡Œæ•°æ®åº“çš„é“¾æ¥å’Œæ“ä½œï¼Œæœ¬æ¬¡å¼€å‘é‡‡ç”¨Mybaticsæ¡†æ¶ï¼Œç›¸æ¯”è¾ƒäºä¼ ç»Ÿçš„JDBCï¼ŒMybaticså¯¹å„ç±»æ“ä½œè¿›è¡Œäº†å°è£…ï¼Œå®ç°äº†åŠè‡ªåŠ¨çš„æ•°æ®æ“çºµã€‚Mybaticsæå¤§çš„æé«˜ç¼–ç¨‹æ•ˆç‡ï¼Œé€šè¿‡Mybaticsï¼Œå¯ä»¥çµæ´»çš„æ ¹æ®å¼€å‘éœ€æ±‚æ¥æ‰§è¡ŒSQLè¯­å¥ï¼Œå¯ä»¥å¿«é€Ÿçš„å®Œæˆå¼€å‘ä»»åŠ¡

### æ ¸å¿ƒä»£ç 

```java
package com.controller;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Calendar;
import java.util.Map;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Date;
import java.util.List;
import javax.servlet.http.HttpServletRequest;

import com.utils.ValidatorUtils;
import org.apache.commons.lang3.StringUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.format.annotation.DateTimeFormat;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import com.baomidou.mybatisplus.mapper.EntityWrapper;
import com.baomidou.mybatisplus.mapper.Wrapper;
import com.annotation.IgnoreAuth;

import com.entity.ChatEntity;
import com.entity.view.ChatView;

import com.service.ChatService;
import com.service.TokenService;
import com.utils.PageUtils;
import com.utils.R;
import com.utils.MD5Util;
import com.utils.MPUtil;
import com.utils.CommonUtil;

/\*\*

- åœ¨çº¿å®¢æœ
- åç«¯æ¥å£
- @author
- @email
- @date 2021-03-13 12:49:51
  \*/
  @RestController
  @RequestMapping("/chat")
  public class ChatController {
  @Autowired
  private ChatService chatService;

      /**
       * åç«¯åˆ—è¡¨
       */
      @RequestMapping("/page")
      public R page(@RequestParam Map<String, Object> params,ChatEntity chat,
      	HttpServletRequest request){
      	if(!request.getSession().getAttribute("role").toString().equals("ç®¡ç†å‘˜")) {
      		chat.setUserid((Long)request.getSession().getAttribute("userId"));
      	}
          EntityWrapper<ChatEntity> ew = new EntityWrapper<ChatEntity>();
      	PageUtils page = chatService.queryPage(params, MPUtil.sort(MPUtil.between(MPUtil.likeOrEq(ew, chat), params), params));

          return R.ok().put("data", page);
      }

      /**
       * å‰ç«¯åˆ—è¡¨
       */
      @RequestMapping("/list")
      public R list(@RequestParam Map<String, Object> params,ChatEntity chat, HttpServletRequest request){
      	if(!request.getSession().getAttribute("role").toString().equals("ç®¡ç†å‘˜")) {
      		chat.setUserid((Long)request.getSession().getAttribute("userId"));
      	}
          EntityWrapper<ChatEntity> ew = new EntityWrapper<ChatEntity>();
      	PageUtils page = chatService.queryPage(params, MPUtil.sort(MPUtil.between(MPUtil.likeOrEq(ew, chat), params), params));
          return R.ok().put("data", page);
      }

      /**
       * åˆ—è¡¨
       */
      @RequestMapping("/lists")
      public R list( ChatEntity chat){
         	EntityWrapper<ChatEntity> ew = new EntityWrapper<ChatEntity>();
        	ew.allEq(MPUtil.allEQMapPre( chat, "chat"));
          return R.ok().put("data", chatService.selectListView(ew));
      }

       /**
       * æŸ¥è¯¢
       */
      @RequestMapping("/query")
      public R query(ChatEntity chat){
          EntityWrapper< ChatEntity> ew = new EntityWrapper< ChatEntity>();

  ew.allEq(MPUtil.allEQMapPre( chat, "chat"));
  ChatView chatView = chatService.selectView(ew);
  return R.ok("æŸ¥è¯¢åœ¨çº¿å®¢æœæˆåŠŸ").put("data", chatView);
  }
  /\*\*
  _ åç«¯è¯¦æƒ…
  _/
  @RequestMapping("/info/{id}")
  public R info(@PathVariable("id") Long id){
  ChatEntity chat = chatService.selectById(id);
  return R.ok().put("data", chat);
  }

      /**
       * å‰ç«¯è¯¦æƒ…
       */
      @RequestMapping("/detail/{id}")
      public R detail(@PathVariable("id") Long id){
          ChatEntity chat = chatService.selectById(id);
          return R.ok().put("data", chat);
      }

      /**
       * åç«¯ä¿å­˜
       */
      @RequestMapping("/save")
      public R save(@RequestBody ChatEntity chat, HttpServletRequest request){
      	chat.setId(new Date().getTime()+new Double(Math.floor(Math.random()*1000)).longValue());
      	//ValidatorUtils.validateEntity(chat);
      	if(StringUtils.isNotBlank(chat.getAsk())) {
      		chatService.updateForSet("isreply=0", new EntityWrapper<ChatEntity>().eq("userid", request.getSession().getAttribute("userId")));
      		chat.setUserid((Long)request.getSession().getAttribute("userId"));
      		chat.setIsreply(1);
      	}
      	if(StringUtils.isNotBlank(chat.getReply())) {
      		chatService.updateForSet("isreply=0", new EntityWrapper<ChatEntity>().eq("userid", chat.getUserid()));
      		chat.setAdminid((Long)request.getSession().getAttribute("userId"));
      	}
          chatService.insert(chat);
          return R.ok();
      }

      /**
       * å‰ç«¯ä¿å­˜
       */
      @RequestMapping("/add")
      public R add(@RequestBody ChatEntity chat, HttpServletRequest request){
      	chat.setId(new Date().getTime()+new Double(Math.floor(Math.random()*1000)).longValue());
      	//ValidatorUtils.validateEntity(chat);
      	chat.setUserid((Long)request.getSession().getAttribute("userId"));
      	if(StringUtils.isNotBlank(chat.getAsk())) {
      		chatService.updateForSet("isreply=0", new EntityWrapper<ChatEntity>().eq("userid", request.getSession().getAttribute("userId")));
      		chat.setUserid((Long)request.getSession().getAttribute("userId"));
      		chat.setIsreply(1);
      	}
      	if(StringUtils.isNotBlank(chat.getReply())) {
      		chatService.updateForSet("isreply=0", new EntityWrapper<ChatEntity>().eq("userid", chat.getUserid()));
      		chat.setAdminid((Long)request.getSession().getAttribute("userId"));
      	}
          chatService.insert(chat);
          return R.ok();
      }

      /**
       * ä¿®æ”¹
       */
      @RequestMapping("/update")
      public R update(@RequestBody ChatEntity chat, HttpServletRequest request){
          //ValidatorUtils.validateEntity(chat);
          chatService.updateById(chat);//å…¨éƒ¨æ›´æ–°
          return R.ok();
      }


      /**
       * åˆ é™¤
       */
      @RequestMapping("/delete")
      public R delete(@RequestBody Long[] ids){
          chatService.deleteBatchIds(Arrays.asList(ids));
          return R.ok();
      }

      /**
       * æé†’æ¥å£
       */
      @RequestMapping("/remind/{columnName}/{type}")
      public R remindCount(@PathVariable("columnName") String columnName, HttpServletRequest request,
      					 @PathVariable("type") String type,@RequestParam Map<String, Object> map) {
      	map.put("column", columnName);
      	map.put("type", type);

      	if(type.equals("2")) {
      		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
      		Calendar c = Calendar.getInstance();
      		Date remindStartDate = null;
      		Date remindEndDate = null;
      		if(map.get("remindstart")!=null) {
      			Integer remindStart = Integer.parseInt(map.get("remindstart").toString());
      			c.setTime(new Date());
      			c.add(Calendar.DAY_OF_MONTH,remindStart);
      			remindStartDate = c.getTime();
      			map.put("remindstart", sdf.format(remindStartDate));
      		}
      		if(map.get("remindend")!=null) {
      			Integer remindEnd = Integer.parseInt(map.get("remindend").toString());
      			c.setTime(new Date());
      			c.add(Calendar.DAY_OF_MONTH,remindEnd);
      			remindEndDate = c.getTime();
      			map.put("remindend", sdf.format(remindEndDate));
      		}
      	}

      	Wrapper<ChatEntity> wrapper = new EntityWrapper<ChatEntity>();
      	if(map.get("remindstart")!=null) {
      		wrapper.ge(columnName, map.get("remindstart"));
      	}
      	if(map.get("remindend")!=null) {
      		wrapper.le(columnName, map.get("remindend"));
      	}


      	int count = chatService.selectCount(wrapper);
      	return R.ok().put("count", count);
      }

}


```

### æºç è·å–

> æ–‡ç« ä¸‹æ–¹åç‰‡è”ç³»æˆ‘å³å¯~
>   
> âœŒğŸ’— å¤§å®¶ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€è¯„è®ºå•¦ ã€æŸ¥çœ‹ âœŒğŸ’—
>   
> ğŸ‘‡ğŸ» è·å–è”ç³»æ–¹å¼ ğŸ‘‡ğŸ»