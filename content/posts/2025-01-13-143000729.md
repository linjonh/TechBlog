---
layout: post
title: "基于微信小程序的商城系统源码文档部署讲解等"
date: 2025-01-13 13:02:17 +0800
description: "一、系统概述本商城系统基于 Spring Boot 框架开发，结合小程序前端，为用户提供便捷的购物体"
keywords: "微信小程序商城源码"
categories: ['未分类']
tags: ['微信小程序', '小程序']
artid: "143000729"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=143000729
  alt: "基于微信小程序的商城系统源码文档部署讲解等"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143000729
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143000729
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     基于微信小程序的商城系统(源码+文档+部署讲解等)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      一、系统概述
      <br/>
      本商城系统基于 Spring Boot 框架开发，结合小程序前端，为用户提供便捷的购物体验。系统具备商品展示、购物车、订单管理、用户管理等功能，能够满足电商业务的日常运营需求。
      <br/>
      二、功能模块
      <br/>
      商品管理
      <br/>
      商品分类：对商品进行分类管理，方便用户查找。
      <br/>
      商品展示：展示商品的图片、名称、价格、描述等信息。
      <br/>
      商品搜索：用户可以通过关键词搜索商品。
      <br/>
      商品库存管理：实时更新商品库存数量。
      <br/>
      购物车
      <br/>
      添加商品：用户可以将商品添加到购物车。
      <br/>
      购物车结算：用户可以对购物车中的商品进行结算。
      <br/>
      修改购物车商品数量：用户可以修改购物车中商品的数量。
      <br/>
      删除购物车商品：用户可以删除购物车中的商品。
      <br/>
      订单管理
      <br/>
      订单生成：用户结算购物车后，系统自动生成订单。
      <br/>
      订单状态跟踪：用户可以实时查看订单状态，包括待付款、待发货、已发货、已完成等。
      <br/>
      订单评价：用户可以对已完成的订单进行评价。
      <br/>
      用户管理
      <br/>
      用户注册与登录：用户可以通过手机号码、邮箱等方式注册账号，并登录系统进行购物。
      <br/>
      用户信息管理：用户可以修改个人信息、查看订单记录等。
      <br/>
      用户地址管理：用户可以添加、修改、删除收货地址。
      <br/>
      支付管理
      <br/>
      支持多种支付方式，如微信支付、支付宝支付等。
      <br/>
      确保支付安全，保护用户资金安全。
      <br/>
      三、技术实现
      <br/>
      后端技术
      <br/>
      使用 Spring Boot 框架搭建后端服务，实现业务逻辑和数据访问。
      <br/>
      采用 MySQL 数据库存储商品信息、订单信息、用户信息等。
      <br/>
      使用 MyBatis 框架进行数据库操作，提高开发效率。
      <br/>
      前端技术（小程序）
      <br/>
      采用小程序开发框架，实现良好的用户体验。
      <br/>
      界面设计简洁美观，操作方便快捷。
      <br/>
      四、部署与讲解
      <br/>
      部署环境
      <br/>
      服务器：可以选择云服务器或本地服务器，确保服务器具有足够的性能和存储空间。
      <br/>
      操作系统：推荐使用 Linux 操作系统，如 CentOS、Ubuntu 等。
      <br/>
      数据库：安装 MySQL 数据库，并进行相应的配置。
      <br/>
      JDK：安装 Java Development Kit（JDK），确保版本与 Spring Boot 兼容。
      <br/>
      小程序开发工具：安装微信开发者工具或其他小程序开发工具。
      <br/>
      部署步骤
      <br/>
      后端部署
      <br/>
      将项目代码打包成可执行的 JAR 包或 WAR 包。
      <br/>
      将打包后的文件上传到服务器，并进行解压缩。
      <br/>
      配置数据库连接信息，确保系统能够正常连接到数据库。
      <br/>
      启动服务器，运行项目。
      <br/>
      小程序部署
      <br/>
      在小程序开发工具中导入小程序项目代码。
      <br/>
      配置小程序的服务器地址等参数。
      <br/>
      进行小程序的调试和测试。
      <br/>
      提交小程序审核，审核通过后发布上线。
      <br/>
      讲解内容
      <br/>
      系统的功能介绍和使用方法。
      <br/>
      系统的技术架构和实现原理。
      <br/>
      系统的部署步骤和注意事项。
      <br/>
      常见问题的解决方法。
      <br/>
      通过基于 Spring Boot 的商城系统的开发，可以为电商企业提供高效、稳定的购物平台，提升用户购物体验，促进企业的发展。
     </p>
    </blockquote>
    <h3>
     <a id="_56">
     </a>
     前言
    </h3>
    <blockquote>
     <p>
      💗
      <strong>
       博主介绍
      </strong>
      ：✌全网粉丝30W+,csdn特邀作者、博客专家、CSDN新星计划导师、Java领域优质创作者,博客之星、掘金/华为云/阿里云/InfoQ等平台优质作者、专注于Java技术领域和学生毕业项目实战,高校老师/讲师/同行交流合作✌💗
      <br/>
      💗
      <strong>
       主要内容
      </strong>
      ：SpringBoot、Vue、SSM、HLMT、Jsp、PHP、Nodejs、Python、爬虫、数据可视化、小程序、安卓app、大数据、物联网、机器学习等设计与开发。
      <br/>
      🍅
      <font color="#a3151">
       文末获取源码联系🍅
       <br/>
       👇🏻
       <font color="#a3151">
        精彩专栏 推荐订阅👇🏻
        <br/>
        <a href="https://blog.csdn.net/qq_67371723/article/details/139430117">
         2025-2026年最值得选的微信小程序毕业设计选题大全：100个热门选题推荐✅
        </a>
        <br/>
        <a href="https://blog.csdn.net/qq_67371723/article/details/139429839">
         2025-2026年最值得选的Java毕业设计选题大全：500个热门选题推荐✅
        </a>
        <br/>
        <a href="https://blog.csdn.net/qq_32352957/category_11084640.html">
         Java毕业设计项目精品实战案例《3000套》
        </a>
        <br/>
        <a href="https://blog.csdn.net/qq_32352957/category_11087544.html">
         微信小程序毕业设计项目精品案例《3000套》
        </a>
        <br/>
        🌟文末获取源码+数据库🌟
        <br/>
        <font color="#a3151">
         免费功能设计、开题报告、任务书、中期检查PPT、系统功能实现、代码编写、论文编写和辅导、论文降重、长期答辩答疑辅导、腾讯会议一对一专业讲解辅导答辩、模拟答辩演练、和理解代码逻辑思路。
         <br/>
         感兴趣的可以先收藏起来，还有大家在毕设选题，项目以及论文编写等相关问题都可以给我留言咨询，希望帮助更多的人
        </font>
       </font>
      </font>
     </p>
    </blockquote>
    <h3>
     <a id="_68">
     </a>
     专业擅长
    </h3>
    <blockquote>
     <p>
      免费功能设计、开题报告、任务书、中期检查PPT、系统功能实现、代码编写、论文编写和辅导、论文降重、长期答辩答疑辅导、腾讯会议一对一专业讲解辅导答辩、模拟答辩演练、和理解代码逻辑思路。
     </p>
    </blockquote>
    <h3>
     <a id="_70">
     </a>
     系统截图
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/21170413b3994404a79a38feb88e9ff2.jpeg#pic_center">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8daa727e3c3c4af28e42b06935fe8eaa.jpeg#pic_center">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b9f2998ef0a94f8e8e8603a450dc58e6.jpeg#pic_center">
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e2be4c02a4cf462597a7f59024fb38f1.jpeg#pic_center">
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dbc8b565e2434f9bbfd945a9eb4a4eee.jpeg#pic_center">
          <br/>
          <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/48e6249c91dd4d9f988fa721abf21898.jpeg#pic_center">
           <br/>
           <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d4afc1ec10024f0f98fb15c9d71bace3.jpeg#pic_center">
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dba6c15d3a42428ebf91bdf8e0c9bdba.jpeg#pic_center"/>
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e0832e9274a84d79b0a3f30bec2c799a.jpeg#pic_center"/>
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/07a3490929a0449eb43de940940cdf5f.jpeg#pic_center"/>
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c6c6e35c8deb4496b353c4a94679ea1d.jpeg#pic_center"/>
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/15e04c7b296a4780a03b7db5d951b921.jpeg#pic_center"/>
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/26073e81077e496ebaa02fa4ab559a34.jpeg#pic_center"/>
            <br/>
            <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2a1e2e0fa258468a8d3b820e16f69b5e.jpeg#pic_center"/>
           </img>
          </img>
         </img>
        </img>
       </img>
      </img>
     </img>
    </p>
    <h3>
     <a id="_92">
     </a>
     开发技术介绍
    </h3>
    <h4>
     <a id="SpringBoot_93">
     </a>
     后端框架SpringBoot
    </h4>
    <h3>
     <a id="Vue_95">
     </a>
     前端框架Vue
    </h3>
    <h3>
     <a id="MySQL_97">
     </a>
     MySQL数据库
    </h3>
    <blockquote>
     <p>
      本次设计采用Mysql数据库，Mysql是一个非常流行的数据库，它具有很多的优点，包括体积小、开源免费等特点，是一种关系型数据库，可以通过SQL语句进行各项操作。Mysql在近年来特别受欢迎，其主要优势有以下几点：
      <br/>
      （1）体积小，安装快。正常的Mysql安装包只有100多M，而且安装速度也快，对服务器的要求比较低，特别适合小型管理系统或网站。
      <br/>
      （2）开源免费。Mysql是一个免费的数据库，无需付费即可使用，而且内部代码都是开源的，可以共同维护Mysql生态。
      <br/>
      （3）跨平台。Mysql是一个跨平台的数据库，可以在很多操作系统上运行，只需要安装java虚拟机即可。
      <br/>
      Mysql提供了JDBC驱动给各类程序进行数据库的链接和操作，本次开发采用Mybatics框架，相比较于传统的JDBC，Mybatics对各类操作进行了封装，实现了半自动的数据操纵。Mybatics极大的提高编程效率，通过Mybatics，可以灵活的根据开发需求来执行SQL语句，可以快速的完成开发任务
     </p>
    </blockquote>
    <h3>
     <a id="_105">
     </a>
     核心代码
    </h3>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Calendar</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">ValidatorUtils</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>format<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DateTimeFormat</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestBody</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">EntityWrapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">Wrapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IgnoreAuth</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">ChatEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">ChatView</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ChatService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">TokenService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">PageUtils</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">MD5Util</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">MPUtil</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">CommonUtil</span><span class="token punctuation">;</span>

<span class="token comment">/\*\*

- 在线客服
- 后端接口
- @author
- @email
- @date 2021-03-13 12:49:51
  \*/</span>
  <span class="token annotation punctuation">@RestController</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/chat"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatController</span> <span class="token punctuation">{<!-- --></span>
  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">private</span> <span class="token class-name">ChatService</span> chatService<span class="token punctuation">;</span>

      <span class="token comment">/**
       * 后端列表
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/page"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span><span class="token class-name">ChatEntity</span> chat<span class="token punctuation">,</span>
      	<span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"role"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"管理员"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		chat<span class="token punctuation">.</span><span class="token function">setUserid</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>
          <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span> ew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token class-name">PageUtils</span> page <span class="token operator">=</span> chatService<span class="token punctuation">.</span><span class="token function">queryPage</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">likeOrEq</span><span class="token punctuation">(</span>ew<span class="token punctuation">,</span> chat<span class="token punctuation">)</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">/**
       * 前端列表
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span><span class="token class-name">ChatEntity</span> chat<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"role"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"管理员"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		chat<span class="token punctuation">.</span><span class="token function">setUserid</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>
          <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span> ew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token class-name">PageUtils</span> page <span class="token operator">=</span> chatService<span class="token punctuation">.</span><span class="token function">queryPage</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">likeOrEq</span><span class="token punctuation">(</span>ew<span class="token punctuation">,</span> chat<span class="token punctuation">)</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">/**
       * 列表
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/lists"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">list</span><span class="token punctuation">(</span> <span class="token class-name">ChatEntity</span> chat<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
         	<span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span> ew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        	ew<span class="token punctuation">.</span><span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">allEQMapPre</span><span class="token punctuation">(</span> chat<span class="token punctuation">,</span> <span class="token string">"chat"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> chatService<span class="token punctuation">.</span><span class="token function">selectListView</span><span class="token punctuation">(</span>ew<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

       <span class="token comment">/**
       * 查询
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/query"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">ChatEntity</span> chat<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
          <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span> ew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  ew<span class="token punctuation">.</span><span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">MPUtil</span><span class="token punctuation">.</span><span class="token function">allEQMapPre</span><span class="token punctuation">(</span> chat<span class="token punctuation">,</span> <span class="token string">"chat"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ChatView</span> chatView <span class="token operator">=</span> chatService<span class="token punctuation">.</span><span class="token function">selectView</span><span class="token punctuation">(</span>ew<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">"查询在线客服成功"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> chatView<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/\*\*
  _ 后端详情
  _/</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/info/{id}"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token class-name">ChatEntity</span> chat <span class="token operator">=</span> chatService<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> chat<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

      <span class="token comment">/**
       * 前端详情
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/detail/{id}"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">detail</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
          <span class="token class-name">ChatEntity</span> chat <span class="token operator">=</span> chatService<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> chat<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">/**
       * 后端保存
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">ChatEntity</span> chat<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      	chat<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//ValidatorUtils.validateEntity(chat);</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>chat<span class="token punctuation">.</span><span class="token function">getAsk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		chatService<span class="token punctuation">.</span><span class="token function">updateForSet</span><span class="token punctuation">(</span><span class="token string">"isreply=0"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"userid"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		chat<span class="token punctuation">.</span><span class="token function">setUserid</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		chat<span class="token punctuation">.</span><span class="token function">setIsreply</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>chat<span class="token punctuation">.</span><span class="token function">getReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		chatService<span class="token punctuation">.</span><span class="token function">updateForSet</span><span class="token punctuation">(</span><span class="token string">"isreply=0"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"userid"</span><span class="token punctuation">,</span> chat<span class="token punctuation">.</span><span class="token function">getUserid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		chat<span class="token punctuation">.</span><span class="token function">setAdminid</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>
          chatService<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>chat<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">/**
       * 前端保存
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">ChatEntity</span> chat<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      	chat<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//ValidatorUtils.validateEntity(chat);</span>
      	chat<span class="token punctuation">.</span><span class="token function">setUserid</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>chat<span class="token punctuation">.</span><span class="token function">getAsk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		chatService<span class="token punctuation">.</span><span class="token function">updateForSet</span><span class="token punctuation">(</span><span class="token string">"isreply=0"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"userid"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		chat<span class="token punctuation">.</span><span class="token function">setUserid</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		chat<span class="token punctuation">.</span><span class="token function">setIsreply</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>chat<span class="token punctuation">.</span><span class="token function">getReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		chatService<span class="token punctuation">.</span><span class="token function">updateForSet</span><span class="token punctuation">(</span><span class="token string">"isreply=0"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"userid"</span><span class="token punctuation">,</span> chat<span class="token punctuation">.</span><span class="token function">getUserid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		chat<span class="token punctuation">.</span><span class="token function">setAdminid</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>
          chatService<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>chat<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">/**
       * 修改
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/update"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">ChatEntity</span> chat<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
          <span class="token comment">//ValidatorUtils.validateEntity(chat);</span>
          chatService<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>chat<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//全部更新</span>
          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>


      <span class="token comment">/**
       * 删除
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/delete"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
          chatService<span class="token punctuation">.</span><span class="token function">deleteBatchIds</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">/**
       * 提醒接口
       */</span>
      <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/remind/{columnName}/{type}"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">remindCount</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"columnName"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> columnName<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
      					 <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"column"</span><span class="token punctuation">,</span> columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>

      	<span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		<span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		<span class="token class-name">Calendar</span> c <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		<span class="token class-name">Date</span> remindStartDate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      		<span class="token class-name">Date</span> remindEndDate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      		<span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindstart"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      			<span class="token class-name">Integer</span> remindStart <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindstart"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      			c<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      			c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">,</span>remindStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
      			remindStartDate <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      			map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"remindstart"</span><span class="token punctuation">,</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>remindStartDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		<span class="token punctuation">}</span>
      		<span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindend"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      			<span class="token class-name">Integer</span> remindEnd <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindend"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      			c<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      			c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">,</span>remindEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
      			remindEndDate <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      			map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"remindend"</span><span class="token punctuation">,</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>remindEndDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      		<span class="token punctuation">}</span>
      	<span class="token punctuation">}</span>

      	<span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChatEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindstart"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		wrapper<span class="token punctuation">.</span><span class="token function">ge</span><span class="token punctuation">(</span>columnName<span class="token punctuation">,</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindstart"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindend"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      		wrapper<span class="token punctuation">.</span><span class="token function">le</span><span class="token punctuation">(</span>columnName<span class="token punctuation">,</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remindend"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">}</span>


      	<span class="token keyword">int</span> count <span class="token operator">=</span> chatService<span class="token punctuation">.</span><span class="token function">selectCount</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre>
<h3>
<a id="_341">
</a>
源码获取
</h3>
<blockquote>
<p>
文章下方名片联系我即可~
<br/>
✌💗 大家点赞、收藏、关注、评论啦 、查看 ✌💗
<br/>
👇🏻 获取联系方式 👇🏻
</p>
</blockquote>

   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f74616f6a617661636f6d2f:61727469636c652f64657461696c732f313433303030373239" class_="artid" style="display:none">
 </p>
</div>
