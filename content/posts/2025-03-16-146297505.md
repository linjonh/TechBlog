---
layout: post
title: "Python实现万年历"
date: 2025-03-16 16:52:40 +0800
description: "本程序使用Python实现了万年历功能，能够显示指定年份和月份的日历，并同时显示对应的农历日期。"
keywords: "Python实现万年历"
categories: ['Python']
tags: ['开发语言', 'Python']
artid: "146297505"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146297505
    alt: "Python实现万年历"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146297505
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146297505
cover: https://bing.ee123.net/img/rand?artid=146297505
image: https://bing.ee123.net/img/rand?artid=146297505
img: https://bing.ee123.net/img/rand?artid=146297505
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Python实现万年历
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_2">
     </a>
     项目概述
    </h3>
    <p>
     本程序使用Python实现了万年历功能，能够显示指定年份和月份的日历，并同时显示对应的农历日期。
    </p>
    <h3>
     <a id="_5">
     </a>
     功能描述
    </h3>
    <ol>
     <li>
      阳历到农历转换
     </li>
     <li>
      日期计算
     </li>
     <li>
      日历输出
     </li>
    </ol>
    <h3>
     <a id="_10">
     </a>
     代码逻辑说明
    </h3>
    <h4>
     <a id="1__12">
     </a>
     1. 农历转换
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">import</span> lunardate

<span class="token comment"># 农历月份和日期的中文表示</span>
month_names <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'正月'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">'二月'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
day_names <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'初一'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">'初二'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">get_lunar_str</span><span class="token punctuation">(</span>solar_date<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 将阳历日期转换为农历日期字符串</span>
    <span class="token keyword">pass</span>
</code></pre>
    <h4>
     <a id="2__25">
     </a>
     2. 日期计算
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># 计算当月首尾日期</span>
first_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
last_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>

<span class="token comment"># 计算第一天星期和当月天数</span>
start_weekday <span class="token operator">=</span> first_day<span class="token punctuation">.</span>weekday<span class="token punctuation">(</span><span class="token punctuation">)</span>
total_days <span class="token operator">=</span> <span class="token punctuation">(</span>last_date <span class="token operator">-</span> first_date<span class="token punctuation">)</span><span class="token punctuation">.</span>days <span class="token operator">+</span> <span class="token number">1</span>
</code></pre>
    <h4>
     <a id="3__36">
     </a>
     3. 日历输出
    </h4>
    <pre><code class="prism language-python"><span class="token comment"># 生成日期矩阵</span>
calendar_days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">42</span>
lunar_days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">42</span>

<span class="token comment"># 打印日历标题和星期</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" 周一   周二   周三   周四   周五   周六   周日"</span><span class="token punctuation">)</span>

<span class="token comment"># 打印日期和农历</span>
<span class="token keyword">for</span> week_idx <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 打印阳历和农历行</span>
    <span class="token keyword">pass</span>
</code></pre>
    <h3>
     <a id="_51">
     </a>
     使用说明
    </h3>
    <ol>
     <li>
      修改main函数中的year和month变量
     </li>
     <li>
      运行程序即可查看指定月份的日历
     </li>
    </ol>
    <h3>
     <a id="_55">
     </a>
     依赖库
    </h3>
    <ol>
     <li>
      datetime
     </li>
     <li>
      lunardate
     </li>
    </ol>
    <h3>
     <a id="_59">
     </a>
     所有代码
    </h3>
    <pre><code class="prism language-python"><span class="token keyword">import</span> datetime
<span class="token keyword">import</span> lunardate

<span class="token comment"># 农历月份和日期的中文表示（原有字典不变）</span>
month_names <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'正月'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">'二月'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token string">'三月'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token string">'四月'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">:</span> <span class="token string">'五月'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">:</span> <span class="token string">'六月'</span><span class="token punctuation">,</span>
               <span class="token number">7</span><span class="token punctuation">:</span> <span class="token string">'七月'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">:</span> <span class="token string">'八月'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">:</span> <span class="token string">'九月'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">:</span> <span class="token string">'十月'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">:</span> <span class="token string">'冬月'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">:</span> <span class="token string">'腊月'</span><span class="token punctuation">}</span>

day_names <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'初一'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">'初二'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token string">'初三'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token string">'初四'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">:</span> <span class="token string">'初五'</span><span class="token punctuation">,</span>
             <span class="token number">6</span><span class="token punctuation">:</span> <span class="token string">'初六'</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">:</span> <span class="token string">'初七'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">:</span> <span class="token string">'初八'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">:</span> <span class="token string">'初九'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">:</span> <span class="token string">'初十'</span><span class="token punctuation">,</span>
             <span class="token number">11</span><span class="token punctuation">:</span> <span class="token string">'十一'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">:</span> <span class="token string">'十二'</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">:</span> <span class="token string">'十三'</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">:</span> <span class="token string">'十四'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">:</span> <span class="token string">'十五'</span><span class="token punctuation">,</span>
             <span class="token number">16</span><span class="token punctuation">:</span> <span class="token string">'十六'</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">:</span> <span class="token string">'十七'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">:</span> <span class="token string">'十八'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">:</span> <span class="token string">'十九'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">:</span> <span class="token string">'二十'</span><span class="token punctuation">,</span>
             <span class="token number">21</span><span class="token punctuation">:</span> <span class="token string">'廿一'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">:</span> <span class="token string">'廿二'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">:</span> <span class="token string">'廿三'</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">:</span> <span class="token string">'廿四'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">:</span> <span class="token string">'廿五'</span><span class="token punctuation">,</span>
             <span class="token number">26</span><span class="token punctuation">:</span> <span class="token string">'廿六'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">:</span> <span class="token string">'廿七'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">:</span> <span class="token string">'廿八'</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">:</span> <span class="token string">'廿九'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">:</span> <span class="token string">'三十'</span><span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">get_lunar_str</span><span class="token punctuation">(</span>solar_date<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""获取农历日期字符串（原有逻辑不变）"""</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        lunar <span class="token operator">=</span> lunardate<span class="token punctuation">.</span>LunarDate<span class="token punctuation">.</span>fromSolarDate<span class="token punctuation">(</span>solar_date<span class="token punctuation">.</span>year<span class="token punctuation">,</span> solar_date<span class="token punctuation">.</span>month<span class="token punctuation">,</span> solar_date<span class="token punctuation">.</span>day<span class="token punctuation">)</span>
        month_str <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"闰</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month_names<span class="token punctuation">[</span>lunar<span class="token punctuation">.</span>month<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token keyword">if</span> lunar<span class="token punctuation">.</span>is_leap_month <span class="token keyword">else</span> month_names<span class="token punctuation">[</span>lunar<span class="token punctuation">.</span>month<span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month_str<span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day_names<span class="token punctuation">[</span>lunar<span class="token punctuation">.</span>day<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token keyword">if</span> lunar<span class="token punctuation">.</span>day <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">else</span> day_names<span class="token punctuation">.</span>get<span class="token punctuation">(</span>lunar<span class="token punctuation">.</span>day<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">""</span>

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 输入年份和月份（输入验证逻辑不变）</span>
    year <span class="token operator">=</span> <span class="token number">2023</span>
    month <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token comment"># 计算当月首尾日期（原有逻辑不变）</span>
    first_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    last_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            last_date <span class="token operator">=</span> last_date<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>day<span class="token operator">=</span>last_date<span class="token punctuation">.</span>day<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            last_date <span class="token operator">=</span> last_date<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>day<span class="token operator">=</span>last_date<span class="token punctuation">.</span>day<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>

    <span class="token comment"># 计算第一天星期和当月天数（关键修改点）</span>
    first_day <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    start_weekday <span class="token operator">=</span> first_day<span class="token punctuation">.</span>weekday<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 周一=0，周日=6（原+1逻辑已移除）</span>
    total_days <span class="token operator">=</span> <span class="token punctuation">(</span>last_date <span class="token operator">-</span> first_date<span class="token punctuation">)</span><span class="token punctuation">.</span>days <span class="token operator">+</span> <span class="token number">1</span>

    <span class="token comment"># 生成日期矩阵（调整为周一到周日顺序）</span>
    calendar_days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">42</span>
    lunar_days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">42</span>
    current_day <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_weekday<span class="token punctuation">,</span> start_weekday <span class="token operator">+</span> total_days<span class="token punctuation">)</span><span class="token punctuation">:</span>
        current_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> current_day<span class="token punctuation">)</span>
        calendar_days<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> current_day
        lunar_days<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> get_lunar_str<span class="token punctuation">(</span>current_date<span class="token punctuation">)</span>
        current_day <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token comment"># 打印日历标题（修改为周一到周日）</span>
    title <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month<span class="token punctuation">}</span></span><span class="token string">月 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">（农历</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month_names<span class="token punctuation">[</span>lunardate<span class="token punctuation">.</span>LunarDate<span class="token punctuation">.</span>fromSolarDate<span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>month<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">月）"</span></span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n"</span> <span class="token operator">+</span> title<span class="token punctuation">.</span>center<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 修改星期标题为中文全称</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" 周一   周二   周三   周四   周五   周六   周日"</span><span class="token punctuation">)</span>

    <span class="token comment"># 打印日期和农历（调整对齐方式）</span>
    <span class="token keyword">for</span> week_idx <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        week <span class="token operator">=</span> calendar_days<span class="token punctuation">[</span>week_idx<span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>week_idx<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">7</span><span class="token punctuation">]</span>
        lunar_week <span class="token operator">=</span> lunar_days<span class="token punctuation">[</span>week_idx<span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>week_idx<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">7</span><span class="token punctuation">]</span>
        
        <span class="token comment"># 阳历行使用右对齐</span>
        solar_line <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">str</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec">&gt;4</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token keyword">if</span> day <span class="token operator">!=</span> <span class="token string">""</span> <span class="token keyword">else</span> <span class="token string">"    "</span> <span class="token keyword">for</span> day <span class="token keyword">in</span> week<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>solar_line<span class="token punctuation">)</span>
        
        <span class="token comment"># 农历行使用左对齐</span>
        lunar_line <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>lunar<span class="token punctuation">:</span><span class="token format-spec">&lt;4</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token keyword">if</span> lunar <span class="token operator">!=</span> <span class="token string">""</span> <span class="token keyword">else</span> <span class="token string">"    "</span> <span class="token keyword">for</span> lunar <span class="token keyword">in</span> lunar_week<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>lunar_line<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f687a65746865722f:61727469636c652f64657461696c732f313436323937353035" class_="artid" style="display:none">
 </p>
</div>


