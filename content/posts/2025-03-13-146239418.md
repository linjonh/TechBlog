---
layout: post
title: "Kotlin高效实现-Android-ViewPager2-顶部导航动态配置与性能优化指南"
date: 2025-03-13 18:37:45 +0800
description: "使用或data class定义页面信息，包括标题、图标和对应的Fragment。// Page.kt通过以上优化，ViewPager2实现顶部导航的代码变得更加高效、简洁和易于维护。和扩展函数的使用使代码更具可读性和可扩展性，同时避免了硬编码和重复逻辑。运行优化后的代码，你将获得一个高效的顶部导航实现。"
keywords: "Kotlin高效实现 Android ViewPager2 顶部导航：动态配置与性能优化指南"
categories: ['Kotlin', 'Android']
tags: ['Kotlin', 'Android']
artid: "146239418"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146239418
    alt: "Kotlin高效实现-Android-ViewPager2-顶部导航动态配置与性能优化指南"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146239418
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146239418
cover: https://bing.ee123.net/img/rand?artid=146239418
image: https://bing.ee123.net/img/rand?artid=146239418
img: https://bing.ee123.net/img/rand?artid=146239418
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Kotlin高效实现 Android ViewPager2 顶部导航：动态配置与性能优化指南
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <ol>
     <li>
      <strong>
       高效实现
      </strong>
      ：强调代码的性能优化。
     </li>
     <li>
      <strong>
       Android ViewPager2
      </strong>
      ：明确技术栈。
     </li>
     <li>
      <strong>
       顶部导航
      </strong>
      ：核心功能点。
     </li>
     <li>
      <strong>
       动态配置与性能优化指南
      </strong>
      ：突出动态配置的灵活性和性能优化的重点。
     </li>
    </ol>
    <p>
     在 Android 开发中，使用
     <code>
      ViewPager2
     </code>
     实现高效的顶部导航（通常结合
     <code>
      TabLayout
     </code>
     ）是一种常见的需求。以下是优化后的实现方案，确保代码高效、简洁且易于维护。
    </p>
    <hr/>
    <h4>
     <a id="_9">
     </a>
     优化目标
    </h4>
    <ol>
     <li>
      <strong>
       高效加载
      </strong>
      ：利用
      <code>
       FragmentStateAdapter
      </code>
      的特性，避免不必要的
      <code>
       Fragment
      </code>
      实例化。
     </li>
     <li>
      <strong>
       动态配置
      </strong>
      ：通过数据驱动的方式动态配置
      <code>
       TabLayout
      </code>
      和
      <code>
       ViewPager2
      </code>
      。
     </li>
     <li>
      <strong>
       代码简洁
      </strong>
      ：使用 Kotlin 的特性和扩展函数减少冗余代码。
     </li>
     <li>
      <strong>
       可扩展性
      </strong>
      ：方便添加或删除页面，无需修改核心逻辑。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_17">
     </a>
     实现步骤
    </h4>
    <h5>
     <a id="1__19">
     </a>
     1. 添加依赖
    </h5>
    <p>
     确保在
     <code>
      build.gradle
     </code>
     中添加
     <code>
      ViewPager2
     </code>
     和
     <code>
      Material Design
     </code>
     依赖：
    </p>
    <pre><code class="prism language-gradle">dependencies {
    implementation 'androidx.viewpager2:viewpager2:1.0.0'
    implementation 'com.google.android.material:material:1.4.0'
}
</code></pre>
    <hr/>
    <h5>
     <a id="2__31">
     </a>
     2. 定义页面数据
    </h5>
    <p>
     使用
     <code>
      sealed class
     </code>
     或
     <code>
      data class
     </code>
     定义页面信息，包括标题、图标和对应的
     <code>
      Fragment
     </code>
     。
    </p>
    <pre><code class="prism language-kotlin"><span class="token comment">// Page.kt</span>
<span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token keyword">val</span> title<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> icon<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">object</span> Home <span class="token operator">:</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Home"</span></span><span class="token punctuation">,</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_home<span class="token punctuation">)</span>
    <span class="token keyword">object</span> Dashboard <span class="token operator">:</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Dashboard"</span></span><span class="token punctuation">,</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_dashboard<span class="token punctuation">)</span>
    <span class="token keyword">object</span> Notifications <span class="token operator">:</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Notifications"</span></span><span class="token punctuation">,</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_notifications<span class="token punctuation">)</span>

    <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">val</span> pages <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>Home<span class="token punctuation">,</span> Dashboard<span class="token punctuation">,</span> Notifications<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="3__Fragment_49">
     </a>
     3. 创建 Fragment
    </h5>
    <p>
     为每个页面创建对应的
     <code>
      Fragment
     </code>
     。
    </p>
    <pre><code class="prism language-kotlin"><span class="token comment">// Fragment1.kt</span>
<span class="token keyword">class</span> Fragment1 <span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
        inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span> container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
        savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span>
    <span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_1<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Fragment2.kt</span>
<span class="token keyword">class</span> Fragment2 <span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
        inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span> container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
        savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span>
    <span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_2<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Fragment3.kt</span>
<span class="token keyword">class</span> Fragment3 <span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
        inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span> container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
        savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span>
    <span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_3<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="4__86">
     </a>
     4. 创建适配器
    </h5>
    <p>
     使用
     <code>
      FragmentStateAdapter
     </code>
     动态加载
     <code>
      Fragment
     </code>
     。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">class</span> <span class="token function">ViewPagerAdapter</span><span class="token punctuation">(</span>fragmentActivity<span class="token operator">:</span> FragmentActivity<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">FragmentStateAdapter</span><span class="token punctuation">(</span>fragmentActivity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span> Page<span class="token punctuation">.</span>pages<span class="token punctuation">.</span>size

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">createFragment</span><span class="token punctuation">(</span>position<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Fragment <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>Page<span class="token punctuation">.</span>pages<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">is</span> Page<span class="token punctuation">.</span>Home <span class="token operator">-&gt;</span> <span class="token function">Fragment1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">is</span> Page<span class="token punctuation">.</span>Dashboard <span class="token operator">-&gt;</span> <span class="token function">Fragment2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">is</span> Page<span class="token punctuation">.</span>Notifications <span class="token operator">-&gt;</span> <span class="token function">Fragment3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="5__ViewPager2__TabLayout_106">
     </a>
     5. 设置 ViewPager2 和 TabLayout
    </h5>
    <p>
     在
     <code>
      MainActivity
     </code>
     中设置
     <code>
      ViewPager2
     </code>
     和
     <code>
      TabLayout
     </code>
     的联动。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        <span class="token keyword">val</span> viewPager <span class="token operator">=</span> findViewById<span class="token operator">&lt;</span>ViewPager2<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>viewPager<span class="token punctuation">)</span>
        <span class="token keyword">val</span> tabLayout <span class="token operator">=</span> findViewById<span class="token operator">&lt;</span>TabLayout<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>tabLayout<span class="token punctuation">)</span>

        <span class="token comment">// 设置 ViewPager2 适配器</span>
        viewPager<span class="token punctuation">.</span>adapter <span class="token operator">=</span> <span class="token function">ViewPagerAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

        <span class="token comment">// 将 TabLayout 与 ViewPager2 联动</span>
        <span class="token function">TabLayoutMediator</span><span class="token punctuation">(</span>tabLayout<span class="token punctuation">,</span> viewPager<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> tab<span class="token punctuation">,</span> position <span class="token operator">-&gt;</span>
            tab<span class="token punctuation">.</span>text <span class="token operator">=</span> Page<span class="token punctuation">.</span>pages<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">.</span>title
            tab<span class="token punctuation">.</span>icon <span class="token operator">=</span> ContextCompat<span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Page<span class="token punctuation">.</span>pages<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">.</span>icon<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h5>
     <a id="6__133">
     </a>
     6. 布局文件
    </h5>
    <p>
     在
     <code>
      activity_main.xml
     </code>
     中定义布局，包含
     <code>
      TabLayout
     </code>
     和
     <code>
      ViewPager2
     </code>
     。
    </p>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 顶部导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.tabs.TabLayout</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tabLayout<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>tabMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>tabGravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fill<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- ViewPager2 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.viewpager2.widget.ViewPager2</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/viewPager<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <hr/>
    <h5>
     <a id="7__TabLayout__163">
     </a>
     7. 扩展函数：简化 TabLayout 配置
    </h5>
    <p>
     如果需要频繁配置
     <code>
      TabLayout
     </code>
     ，可以将其封装为扩展函数。
    </p>
    <pre><code class="prism language-kotlin"><span class="token comment">// TabLayoutExtensions.kt</span>
<span class="token keyword">fun</span> TabLayout<span class="token punctuation">.</span><span class="token function">setupWithViewPager</span><span class="token punctuation">(</span>viewPager<span class="token operator">:</span> ViewPager2<span class="token punctuation">,</span> pages<span class="token operator">:</span> List<span class="token operator">&lt;</span>Page<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">TabLayoutMediator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> viewPager<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> tab<span class="token punctuation">,</span> position <span class="token operator">-&gt;</span>
        tab<span class="token punctuation">.</span>text <span class="token operator">=</span> pages<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">.</span>title
        tab<span class="token punctuation">.</span>icon <span class="token operator">=</span> ContextCompat<span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> pages<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">.</span>icon<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在
     <code>
      MainActivity
     </code>
     中使用：
    </p>
    <pre><code class="prism language-kotlin">tabLayout<span class="token punctuation">.</span><span class="token function">setupWithViewPager</span><span class="token punctuation">(</span>viewPager<span class="token punctuation">,</span> Page<span class="token punctuation">.</span>pages<span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_184">
     </a>
     优化后的优势
    </h4>
    <ol>
     <li>
      <strong>
       高效加载
      </strong>
      ：
      <code>
       FragmentStateAdapter
      </code>
      确保
      <code>
       Fragment
      </code>
      实例的高效管理。
     </li>
     <li>
      <strong>
       动态配置
      </strong>
      ：通过
      <code>
       Page.pages
      </code>
      动态配置页面，避免硬编码。
     </li>
     <li>
      <strong>
       代码简洁
      </strong>
      ：扩展函数和 Kotlin 特性使代码更加简洁。
     </li>
     <li>
      <strong>
       可扩展性
      </strong>
      ：添加新页面只需在
      <code>
       Page
      </code>
      中添加一个新对象，无需修改核心逻辑。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_192">
     </a>
     示例：添加新页面
    </h4>
    <p>
     如果需要添加一个新页面，只需在
     <code>
      Page
     </code>
     中添加一个新对象：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">object</span> Profile <span class="token operator">:</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Profile"</span></span><span class="token punctuation">,</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_profile<span class="token punctuation">)</span>
</code></pre>
    <p>
     然后在
     <code>
      ViewPagerAdapter
     </code>
     中处理新页面：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">createFragment</span><span class="token punctuation">(</span>position<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Fragment <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>Page<span class="token punctuation">.</span>pages<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">is</span> Page<span class="token punctuation">.</span>Home <span class="token operator">-&gt;</span> <span class="token function">Fragment1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">is</span> Page<span class="token punctuation">.</span>Dashboard <span class="token operator">-&gt;</span> <span class="token function">Fragment2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">is</span> Page<span class="token punctuation">.</span>Notifications <span class="token operator">-&gt;</span> <span class="token function">Fragment3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">is</span> Page<span class="token punctuation">.</span>Profile <span class="token operator">-&gt;</span> <span class="token function">Fragment4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 新增页面</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     其他代码无需修改，系统会自动同步
     <code>
      TabLayout
     </code>
     。
    </p>
    <hr/>
    <h4>
     <a id="_216">
     </a>
     总结
    </h4>
    <p>
     通过以上优化，
     <code>
      ViewPager2
     </code>
     实现顶部导航的代码变得更加高效、简洁和易于维护。
     <code>
      sealed class
     </code>
     和扩展函数的使用使代码更具可读性和可扩展性，同时避免了硬编码和重复逻辑。运行优化后的代码，你将获得一个高效的顶部导航实现。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e637364:6e2e6e65742f74616e6777656967756f30333035313938372f:61727469636c652f64657461696c732f313436323339343138" class_="artid" style="display:none">
 </p>
</div>


