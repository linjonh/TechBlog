---
layout: post
title: "LeetCode-440周赛"
date: 2025-03-15 20:35:58 +0800
description: "LeetCode --- 440周赛 --- 模拟 + 排序 & 前 k 大的数 + 线段树求最左的第一个大于x的数 + 找规律 & 求子数组"
keywords: "LeetCode --- 440周赛"
categories: ['Leetcode']
tags: ['职场和发展', '算法', 'Leetcode']
artid: "146279065"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146279065
    alt: "LeetCode-440周赛"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146279065
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146279065
cover: https://bing.ee123.net/img/rand?artid=146279065
image: https://bing.ee123.net/img/rand?artid=146279065
img: https://bing.ee123.net/img/rand?artid=146279065
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     LeetCode --- 440周赛
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     题目列表
    </h2>
    <p>
     <a href="https://leetcode.cn/problems/fruits-into-baskets-ii/description/" rel="nofollow">
      3477. 将水果放入篮子 II
     </a>
     <br/>
     <a href="https://leetcode.cn/problems/choose-k-elements-with-maximum-sum/description/" rel="nofollow">
      3478. 选出和最大的 K 个元素
     </a>
     <br/>
     <a href="https://leetcode.cn/problems/fruits-into-baskets-iii/description/" rel="nofollow">
      3479. 将水果装入篮子 III
     </a>
     <br/>
     <a href="https://leetcode.cn/problems/maximize-subarrays-after-removing-one-conflicting-pair/description/" rel="nofollow">
      3480. 删除一个冲突对后最大子数组数目
     </a>
    </p>
    <h2>
     <a id="_II_6">
     </a>
     一、将水果放入篮子 II
    </h2>
    <p>
     <img alt="将水果放入篮子 II" src="https://i-blog.csdnimg.cn/direct/7ef12696fd8043af9dbba88a8be5c15b.png"/>
    </p>
    <p>
     本题由于数据范围比较小，所以我们可以暴力模拟水果的放置过程，代码如下
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// C++</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">numOfUnplacedFruits</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> fruits<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> baskets<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> cnt <span class="token operator">=</span> n<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">:</span> fruits<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> y <span class="token operator">:</span> baskets<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    cnt<span class="token operator">--</span><span class="token punctuation">;</span>
                    y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> cnt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-python"><span class="token comment"># Python</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">numOfUnplacedFruits</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fruits<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> baskets<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        cnt <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span>
        <span class="token keyword">for</span> x <span class="token keyword">in</span> fruits<span class="token punctuation">:</span>
            <span class="token keyword">for</span> i<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>baskets<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> y <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">and</span> x <span class="token operator">&lt;=</span> y<span class="token punctuation">:</span>
                    baskets<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
                    cnt <span class="token operator">-=</span> <span class="token number">1</span>
                    <span class="token keyword">break</span>
        <span class="token keyword">return</span> cnt
</code></pre>
    <h2>
     <a id="_K__45">
     </a>
     二、选出和最大的 K 个元素
    </h2>
    <p>
     <img alt="选出和最大的 K 个元素" src="https://i-blog.csdnimg.cn/direct/6675d2007fab4ad29a5ce997823aa1e1.png"/>
    </p>
    <p>
     在所有满足
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
         u 
        
       
         m 
        
       
         s 
        
       
         1 
        
       
         [ 
        
       
         j 
        
       
         ] 
        
       
      
        nums1[j]
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          m
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord">
          1
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0572em;">
          j
         </span>
         <span class="mclose">
          ]
         </span>
        </span>
       </span>
      </span>
     </span>
     小于
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
         u 
        
       
         m 
        
       
         s 
        
       
         1 
        
       
         [ 
        
       
         i 
        
       
         ] 
        
       
      
        nums1[i]
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          m
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord">
          1
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mclose">
          ]
         </span>
        </span>
       </span>
      </span>
     </span>
     的下标
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        j 
        
       
      
        j
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0572em;">
          j
         </span>
        </span>
       </span>
      </span>
     </span>
     所对应的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
         u 
        
       
         m 
        
       
         s 
        
       
         2 
        
       
         [ 
        
       
         j 
        
       
         ] 
        
       
      
        nums2[j]
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          m
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord">
          2
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0572em;">
          j
         </span>
         <span class="mclose">
          ]
         </span>
        </span>
       </span>
      </span>
     </span>
     中选出最多
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        k 
        
       
      
        k
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     个数，使得这些数字之和最大。
     <br/>
     思路如下：
    </p>
    <ul>
     <li>
      如何快速找到小于
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
          [ 
         
        
          j 
         
        
          ] 
         
        
       
         nums1[j]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      小于
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         nums1[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      的下标
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         j 
         
        
       
         j
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
         </span>
        </span>
       </span>
      </span>
      。我们可以对
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
       
         nums1
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
         </span>
        </span>
       </span>
      </span>
      数组进行排序，那么在
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         nums1[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      左边的数字都比它小
     </li>
     <li>
      如何求
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         k 
         
        
       
         k
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
         </span>
        </span>
       </span>
      </span>
      个数字的最大和，本质就是维护最大的
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         k 
         
        
       
         k
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
         </span>
        </span>
       </span>
      </span>
      个
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          2 
         
        
          [ 
         
        
          j 
         
        
          ] 
         
        
       
         nums2[j]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           2
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      ，这可以用最小堆来做：堆顶的元素是
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         k 
         
        
       
         k
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
         </span>
        </span>
       </span>
      </span>
      个数中的最小值，如果新加入的数字大于最小值，就加入堆中，同时丢弃最小值，否则则什么也不做，同时我们还要维护堆中元素之和
     </li>
     <li>
      注意：题目要求返回的
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         a 
         
        
          n 
         
        
          s 
         
        
       
         ans
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal">
           an
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
      中的
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         a 
         
        
          n 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         ans[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           an
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      要对应原始数组
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
       
         nums1
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
         </span>
        </span>
       </span>
      </span>
      中的
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         nums1[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      ，所以我们不能对
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
       
         nums1
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
         </span>
        </span>
       </span>
      </span>
      直接进行排序，我们只要通过下标对
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          1 
         
        
       
         nums1
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord">
           1
          </span>
         </span>
        </span>
       </span>
      </span>
      进行排序即可，具体看代码
     </li>
    </ul>
    <p>
     代码如下
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// C++</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">&gt;</span> <span class="token function">findMaxSum</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums1<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums2<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> nums1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">idx</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">iota</span><span class="token punctuation">(</span>idx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> idx<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 给 idx 数组赋值 0，1，2，...</span>
        ranges<span class="token double-colon punctuation">::</span><span class="token function">sort</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">auto</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> nums1<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对下标进行排序</span>
        <span class="token keyword">long</span> <span class="token keyword">long</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">&gt;</span> <span class="token function">ans</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> greater<span class="token operator">&lt;</span><span class="token operator">&gt;&gt;</span> pq<span class="token punctuation">;</span> <span class="token comment">// 最小堆</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> x <span class="token operator">=</span> idx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 注意这里的 i,j 需要通过 idx 进行映射到真正的下标</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> i <span class="token operator">&amp;&amp;</span> nums1<span class="token punctuation">[</span>idx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums1<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">// 比 nums1[x] 小的考虑入堆 </span>
                pq<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums2<span class="token punctuation">[</span>idx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                sum <span class="token operator">+=</span> nums2<span class="token punctuation">[</span>idx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>pq<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> k<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    sum <span class="token operator">-=</span> pq<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    pq<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                j<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            ans<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-python"><span class="token comment"># Python</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findMaxSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums1<span class="token punctuation">)</span>
        idx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> n
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            idx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
        idx<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x <span class="token punctuation">:</span> nums1<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>
        j <span class="token operator">=</span> <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>
        pq <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> n
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            x <span class="token operator">=</span> idx<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">while</span> j <span class="token operator">&lt;</span> i <span class="token keyword">and</span> nums1<span class="token punctuation">[</span>idx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums1<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">:</span>
                heappush<span class="token punctuation">(</span>pq<span class="token punctuation">,</span> nums2<span class="token punctuation">[</span>idx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> nums2<span class="token punctuation">[</span>idx<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span>
                <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pq<span class="token punctuation">)</span> <span class="token operator">&gt;</span> k<span class="token punctuation">:</span>
                    <span class="token builtin">sum</span> <span class="token operator">-=</span> heappop<span class="token punctuation">(</span>pq<span class="token punctuation">)</span>
                j <span class="token operator">+=</span> <span class="token number">1</span>
            ans<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">sum</span>
        <span class="token keyword">return</span> ans
</code></pre>
    <h2>
     <a id="_III_109">
     </a>
     三、将水果放入篮子 III
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/301d67b36ad841558f0f92d85ebd811a.png"/>
    </p>
    <p>
     和第一题同样的题目，但是数据范围变大了，不能暴力模拟了，现在的关键是如何快速的找到
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        b 
        
       
         a 
        
       
         s 
        
       
         k 
        
       
         e 
        
       
         t 
        
       
         s 
        
       
      
        baskets
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          ba
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     中最左边的第一个大于等于
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        f 
        
       
         r 
        
       
         u 
        
       
         i 
        
       
         t 
        
       
         s 
        
       
         [ 
        
       
         i 
        
       
         ] 
        
       
      
        fruits[i]
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1076em;">
          f
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mclose">
          ]
         </span>
        </span>
       </span>
      </span>
     </span>
     的数字，如何做呢？思路如下：
    </p>
    <ul>
     <li>
      假设我们已知
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          l 
         
        
          , 
         
        
          r 
         
        
          ] 
         
        
       
         [l,r]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      区间的最大值
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         m 
         
        
          x 
         
        
       
         mx
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           x
          </span>
         </span>
        </span>
       </span>
      </span>
      ，那么我们就能快速的判断出
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          l 
         
        
          , 
         
        
          r 
         
        
          ] 
         
        
       
         [l,r]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      内是否有值
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         ≥ 
         
        
          f 
         
        
          r 
         
        
          u 
         
        
          i 
         
        
          t 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         \ge fruits[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.7719em; vertical-align: -0.136em;">
          </span>
          <span class="mrel">
           ≥
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      ，从而决定是否进入区间去寻找
     </li>
     <li>
      在
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          l 
         
        
          , 
         
        
          r 
         
        
          ] 
         
        
       
         [l,r]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      中，我们同样可以将区间分半成
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          l 
         
        
          , 
         
        
          m 
         
        
          i 
         
        
          d 
         
        
          ] 
         
        
       
         [l,mid]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal">
           mi
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      和
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          m 
         
        
          i 
         
        
          d 
         
        
          + 
         
        
          1 
         
        
          , 
         
        
          r 
         
        
          ] 
         
        
       
         [mid+1,r]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           mi
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      ，然后用同样的方法先去判断
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          l 
         
        
          , 
         
        
          m 
         
        
          i 
         
        
          d 
         
        
          ] 
         
        
       
         [l,mid]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal">
           mi
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      中是否有值
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         ≥ 
         
        
          f 
         
        
          r 
         
        
          u 
         
        
          i 
         
        
          t 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         \ge fruits[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.7719em; vertical-align: -0.136em;">
          </span>
          <span class="mrel">
           ≥
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      ，如果没有则去
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          m 
         
        
          i 
         
        
          d 
         
        
          + 
         
        
          1 
         
        
          , 
         
        
          r 
         
        
          ] 
         
        
       
         [mid+1,r]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           mi
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      中找
     </li>
     <li>
      如此，问题的规模不断的被减半，直到
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         l 
         
        
          = 
         
        
          r 
         
        
       
         l=r
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
         </span>
        </span>
       </span>
      </span>
      我们找到了一个
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         b 
         
        
          a 
         
        
          s 
         
        
          k 
         
        
          e 
         
        
          t 
         
        
          s 
         
        
          [ 
         
        
          l 
         
        
          ] 
         
        
          ≥ 
         
        
          f 
         
        
          r 
         
        
          u 
         
        
          i 
         
        
          t 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         baskets[l]\ge fruits[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           ba
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mclose">
           ]
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           ≥
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      ，由于我们每次都是优先去左边查找，所以找到的
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         b 
         
        
          a 
         
        
          s 
         
        
          k 
         
        
          e 
         
        
          t 
         
        
          s 
         
        
          [ 
         
        
          l 
         
        
          ] 
         
        
       
         baskets[l]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           ba
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      就是
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         b 
         
        
          a 
         
        
          s 
         
        
          k 
         
        
          e 
         
        
          t 
         
        
          s 
         
        
       
         baskets
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           ba
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
      中最左边的第一个大于等于
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         f 
         
        
          r 
         
        
          u 
         
        
          i 
         
        
          t 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         fruits[i]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      的数。
     </li>
     <li>
      同时，由于问题规模不断减半，所以查询的时间复杂度为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         O 
         
        
          ( 
         
        
          l 
         
        
          o 
         
        
          g 
         
        
          N 
         
        
          ) 
         
        
       
         O(logN)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           O
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           g
          </span>
          <span class="mord mathnormal" style="margin-right: 0.109em;">
           N
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
     <li>
      综上所述，我们需要维护区间最大值，同时还要查询和进行单点修改，这些都可以用线段树来实现
     </li>
    </ul>
    <p>
     具体代码如下
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// C++</span>
<span class="token keyword">class</span> <span class="token class-name">SegTree</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">SegTree</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span>n <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">maintain</span><span class="token punctuation">(</span><span class="token keyword">int</span> o<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> o<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">const</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token function">build</span><span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">build</span><span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">maintain</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> o<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> m<span class="token punctuation">)</span> <span class="token function">update</span><span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> i<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">update</span><span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> i<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">maintain</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> o<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> l<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            i <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> t<span class="token punctuation">;</span> <span class="token comment">// 记录最大值</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">numOfUnplacedFruits</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> fruits<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> baskets<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cnt <span class="token operator">=</span> n<span class="token punctuation">;</span>
        SegTree <span class="token function">t</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> baskets<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">:</span> fruits<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                t<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                cnt<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> cnt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-python"><span class="token comment"># Python</span>
<span class="token keyword">class</span> <span class="token class-name">SegTree</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">:</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>build<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">maintain</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> o<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>t<span class="token punctuation">[</span>o<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>t<span class="token punctuation">[</span>o<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">build</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> o<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> l<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> r<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> a<span class="token punctuation">:</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> l <span class="token operator">==</span> r<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>l<span class="token punctuation">]</span>
            <span class="token keyword">return</span>
        m <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
        self<span class="token punctuation">.</span>build<span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> a<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>build<span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> a<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>maintain<span class="token punctuation">(</span>o<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> o<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> l<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> r<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> i<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> val<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> l <span class="token operator">==</span> r<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> val
            <span class="token keyword">return</span>
        m <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
        <span class="token keyword">if</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>update<span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> i<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>update<span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> i<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>maintain<span class="token punctuation">(</span>o<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">query</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> o<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> l<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> r<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> val<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>t<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">&lt;</span> val<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
        <span class="token keyword">if</span> l <span class="token operator">==</span> r<span class="token punctuation">:</span>
            <span class="token keyword">return</span> l
        m <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
        i <span class="token operator">=</span> self<span class="token punctuation">.</span>query<span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
        <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            i <span class="token operator">=</span> self<span class="token punctuation">.</span>query<span class="token punctuation">(</span>o <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
        <span class="token keyword">return</span> i

<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">numOfUnplacedFruits</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fruits<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> baskets<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> cnt <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span>
        t <span class="token operator">=</span> SegTree<span class="token punctuation">(</span>baskets<span class="token punctuation">)</span>
        <span class="token keyword">for</span> x <span class="token keyword">in</span> fruits<span class="token punctuation">:</span>
            i <span class="token operator">=</span> t<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
            <span class="token keyword">if</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                t<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                cnt <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> cnt
</code></pre>
    <h2>
     <a id="_235">
     </a>
     四、删除一个冲突对后最大子数组数目
    </h2>
    <p>
     <img alt="删除一个冲突对后最大子数组数目" src="https://i-blog.csdnimg.cn/direct/97effd5396334137826d7e268bceac0b.png"/>
    </p>
    <p>
     题目问删除一个冲突后，能得到的合法子数组的最大个数。大致思路如下
    </p>
    <ul>
     <li>
      1、考虑不删除冲突，能得到的合法子数组的个数，记为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         b 
         
        
          a 
         
        
          s 
         
        
          e 
         
        
       
         base
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           ba
          </span>
          <span class="mord mathnormal">
           se
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
     <li>
      2、考虑去掉一个冲突对后，会增加多少个合法子数组 记为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         e 
         
        
          x 
         
        
          t 
         
        
          r 
         
        
          a 
         
        
       
         extra
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           a
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
     <li>
      答案为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         b 
         
        
          a 
         
        
          s 
         
        
          e 
         
        
          + 
         
        
          m 
         
        
          a 
         
        
          x 
         
        
          ( 
         
        
          e 
         
        
          x 
         
        
          t 
         
        
          r 
         
        
          a 
         
        
          ) 
         
        
       
         base + max(extra)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;">
          </span>
          <span class="mord mathnormal">
           ba
          </span>
          <span class="mord mathnormal">
           se
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           ma
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
    </ul>
    <p>
     如何求出
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        b 
        
       
         a 
        
       
         s 
        
       
         e 
        
       
         ? 
        
       
      
        base?
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          ba
         </span>
         <span class="mord mathnormal">
          se
         </span>
         <span class="mclose">
          ?
         </span>
        </span>
       </span>
      </span>
     </span>
     对于求解子数组的个数问题，我们一般通过枚举左端点
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        / 
        
       
      
        /
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          /
         </span>
        </span>
       </span>
      </span>
     </span>
     右端点，来逐一统计合法子数组的个数，然后相加得到。这里我们从后往前枚举左端点
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8e2e6f935f0c45b2894c13f956a4792a.png"/>
    </p>
    <p>
     如何求出
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        e 
        
       
         x 
        
       
         t 
        
       
         r 
        
       
         a 
        
       
         ? 
        
       
      
        extra?
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          x
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mclose">
          ?
         </span>
        </span>
       </span>
      </span>
     </span>
     我们同样去模拟去掉一个冲突之后，哪些左端点的合法子数组增加了即可
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/360cc8672d994eb78ad54c4617321d47.png">
      <br/>
      代码如下
     </img>
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// C++</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">maxSubarrays</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> conflictingPairs<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">long</span> <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// 只需要知道前最小值，次小值即可</span>
        vector<span class="token operator">&lt;</span>array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;&gt;</span> <span class="token function">g</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> conflict<span class="token operator">:</span> conflictingPairs<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> x <span class="token operator">=</span> conflict<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> conflict<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;</span> y<span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">&gt;</span> <span class="token function">extra</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b0 <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> b1 <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">auto</span><span class="token operator">&amp;</span> v <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b0<span class="token punctuation">)</span> b1 <span class="token operator">=</span> b0<span class="token punctuation">,</span> b0 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b1<span class="token punctuation">)</span> b1 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b0<span class="token punctuation">)</span> b1 <span class="token operator">=</span> b0<span class="token punctuation">,</span> b0 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b1<span class="token punctuation">)</span> b1 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            ans <span class="token operator">+=</span> b0 <span class="token operator">-</span> i<span class="token punctuation">;</span>
            extra<span class="token punctuation">[</span>b0<span class="token punctuation">]</span> <span class="token operator">+=</span> b1 <span class="token operator">-</span> b0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ans <span class="token operator">+</span> ranges<span class="token double-colon punctuation">::</span><span class="token function">max</span><span class="token punctuation">(</span>extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 优化</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">maxSubarrays</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> conflictingPairs<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">long</span> <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// 只需要知道前最小值，次小值即可</span>
        vector<span class="token operator">&lt;</span>array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;&gt;</span> <span class="token function">g</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> conflict<span class="token operator">:</span> conflictingPairs<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> x <span class="token operator">=</span> conflict<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> conflict<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;</span> y<span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// vector&lt;long long&gt; extra(n + 2);</span>
        <span class="token comment">// 由于 b0 是单调递减的，所以可以用 pre_b0, mx 来维护 extra 的最大值</span>
        <span class="token keyword">int</span> b0 <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> b1 <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pre_b0 <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> <span class="token keyword">long</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> mx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">auto</span><span class="token operator">&amp;</span> v <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b0<span class="token punctuation">)</span> b1 <span class="token operator">=</span> b0<span class="token punctuation">,</span> b0 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b1<span class="token punctuation">)</span> b1 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b0<span class="token punctuation">)</span> b1 <span class="token operator">=</span> b0<span class="token punctuation">,</span> b0 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b1<span class="token punctuation">)</span> b1 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            ans <span class="token operator">+=</span> b0 <span class="token operator">-</span> i<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>pre_b0 <span class="token operator">!=</span> b0<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                pre_b0 <span class="token operator">=</span> b0<span class="token punctuation">;</span>
                s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            s <span class="token operator">+=</span> b1 <span class="token operator">-</span> b0<span class="token punctuation">;</span>
            mx <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ans <span class="token operator">+</span> mx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-python"><span class="token comment"># Python</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">maxSubarrays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> conflictingPairs<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        g <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> conflict <span class="token keyword">in</span> conflictingPairs<span class="token punctuation">:</span>
            x<span class="token punctuation">,</span> y <span class="token operator">=</span> conflict<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> conflict<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> x <span class="token operator">&gt;</span> y<span class="token punctuation">:</span>
                x<span class="token punctuation">,</span> y <span class="token operator">=</span> y<span class="token punctuation">,</span> x
            <span class="token keyword">if</span> y <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y
            <span class="token keyword">elif</span> y <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> y
        base <span class="token operator">=</span> mx <span class="token operator">=</span> s <span class="token operator">=</span> <span class="token number">0</span>
        b0 <span class="token operator">=</span> b1 <span class="token operator">=</span> pre_b0 <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b0<span class="token punctuation">:</span>
                b0<span class="token punctuation">,</span> b1 <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b0
            <span class="token keyword">elif</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b1<span class="token punctuation">:</span>
                b1 <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b0<span class="token punctuation">:</span>
                b0<span class="token punctuation">,</span> b1 <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b0
            <span class="token keyword">elif</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> b1<span class="token punctuation">:</span>
                b1 <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> b0 <span class="token operator">!=</span> pre_b0<span class="token punctuation">:</span>
                pre_b0 <span class="token operator">=</span> b0
                s <span class="token operator">=</span> <span class="token number">0</span>
            base <span class="token operator">+=</span> b0 <span class="token operator">-</span> i
            s <span class="token operator">+=</span> b1 <span class="token operator">-</span> b0
            mx <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
        <span class="token keyword">return</span> base <span class="token operator">+</span> mx
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f565f7a6a732f:61727469636c652f64657461696c732f313436323739303635" class_="artid" style="display:none">
 </p>
</div>


