---
layout: post
title: "MySQL基本查询"
date: 2025-08-25T11:26:14+0800
description: "💬 hello!各位铁子们大家好哇。今日更新了MySQL基本查询的内容。"
keywords: "【MySQL】基本查询"
categories: ['未分类']
tags: ['数据库', 'Mysql', 'Linux', 'C']
artid: "149242934"
arturl: "https://blog.csdn.net/qinjh_/article/details/149242934"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=149242934
    alt: "MySQL基本查询"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=149242934
featuredImagePreview: https://bing.ee123.net/img/rand?artid=149242934
cover: https://bing.ee123.net/img/rand?artid=149242934
image: https://bing.ee123.net/img/rand?artid=149242934
img: https://bing.ee123.net/img/rand?artid=149242934
---



# 【MySQL】基本查询



**🌈个人主页：**[秦jh__https://blog.csdn.net/qinjh_?spm=1010.2135.3001.5343](https://blog.csdn.net/qinjh_?spm=1010.2135.3001.5343 "秦jh__https://blog.csdn.net/qinjh_?spm=1010.2135.3001.5343")  
 **🔥 系列专栏：**[https://blog.csdn.net/qinjh_/category_12998168.html](https://blog.csdn.net/qinjh_/category_12998168.html "https://blog.csdn.net/qinjh_/category_12998168.html")

![9efbcbc3d25747719da38c01b3fa9b4f.gif](https://img-blog.csdnimg.cn/direct/9efbcbc3d25747719da38c01b3fa9b4f.gif)























































---

## 前言

> **💬 hello! 各位铁子们大家好哇。**
>
> **今日更新了MySQL基本查询的内容**  
>      **🎉 欢迎大家关注🔍点赞👍收藏⭐️留言📝**

## 表的增删改查

### Create

语法：

> INSERT [INTO] table_name
>
>         [(column [, column] ...)]
>
>         VALUES (value_list) [, (value_list)] ...
>
> value_list: value, [, value] ...

 案例：

![](https://i-blog.csdnimg.cn/direct/a925bec82c4f4d9a94ce528e9a7a10df.png)

#### 单行数据 + 全列插入

![](https://i-blog.csdnimg.cn/direct/3b07b048350740228647d5bc1d8c6f76.png)

> values左侧的属性忽略时，就是全列插入。

#### 指定列+单行插入

#### 

> values左侧属性没有忽略时，就是指定列插入

#### 多行数据 + 全列插入

![](https://i-blog.csdnimg.cn/direct/aa5bc73f1830487296c80876fa76d835.png)

> 多行数据插入时，用逗号分隔。

#### 插入否则更新

 由于 主键 或者 唯一键 对应的值已经存在而导致插入失败

 可以选择性的进行同步更新操作 语法：

> INSERT ... ON DUPLICATE KEY UPDATE
>
>          column = value [, column = value] ...

![](https://i-blog.csdnimg.cn/direct/d15e67c2be234c428deea733582233dc.png)

> 有冲突数据，就会进行更新。
>
> ON DUPLICATE KEY 当发生重复key的时候

![](https://i-blog.csdnimg.cn/direct/35f07b2c75074d5aa0a30f8f3dd613be.png)

> 0 row affected: 表中有冲突数据，但冲突数据的值和 update 的值相等
>
> 1 row affected: 表中没有冲突数据，数据被插入
>
> 2 row affected: 表中有冲突数据，并且数据已经被更新

![](https://i-blog.csdnimg.cn/direct/e69858e273ab4e0ea1006a5789c74128.png)

> 通过 MySQL 函数获取受到影响的数据行数

#### 替换

![](https://i-blog.csdnimg.cn/direct/0c9e97684ed94c0da4367fe4eebf4019.png)![](https://i-blog.csdnimg.cn/direct/f85d981b991d41768a646baa7a9de990.png)

> 主键 或者 唯一键 没有冲突，则直接插入；
>
> 主键 或者 唯一键 如果冲突，则删除后再插入
>
> 1 row affected: 表中没有冲突数据，数据被插入
>
> 2 row affected: 表中有冲突数据，删除后重新插入

### Retrieve

语法：

> SELECT
>
>         [DISTINCT] {* | {column [, column] ...}
>
>         [FROM table_name]
>
>         [WHERE ...]
>
>         [ORDER BY column [ASC | DESC], ...]
>
>         LIMIT ...

案例：

![](https://i-blog.csdnimg.cn/direct/9f8ce56fee524dd7ad425ab615318590.png)![](https://i-blog.csdnimg.cn/direct/b73e53848136486e843fbe5df7aab5e7.png)

> 建表然后插入测试数据。

#### SELECT 列

##### 全列查询

![](https://i-blog.csdnimg.cn/direct/b73e53848136486e843fbe5df7aab5e7.png)

> 通常情况下不建议使用 * 进行全列查询
>
> 1. 查询的列越多，意味着需要传输的数据量越大；
>
> 2. 可能会影响到索引的使用。

##### 指定列查询

![](https://i-blog.csdnimg.cn/direct/aa6984f8e14841fd854d700f30331786.png)

> 指定列的顺序不需要按定义表的顺序来

##### 查询字段为表达式

 表达式不包含字段：

![](https://i-blog.csdnimg.cn/direct/30b62b0aabaf487290e784ca42a9dcb5.png)

表达式包含多个字段：

![](https://i-blog.csdnimg.cn/direct/bf0dc16d88944150ae50dc801c4a7017.png)

##### 为查询结果指定别名

语法：

> SELECT column [AS] alias_name [...] FROM table_name;

![](https://i-blog.csdnimg.cn/direct/8fad33ddceb44ebf8363dfdac314a419.png)

> as还可以省略，其他列的名称也能重命名。
>
> ![](https://i-blog.csdnimg.cn/direct/650f9ea9aaa94afd8ce419864b460d81.png)

##### 结果去重

![](https://i-blog.csdnimg.cn/direct/81c174003cdf4e389adaf1cfd03405f0.png)

#### WHERE 条件

比较运算符：

![](https://i-blog.csdnimg.cn/direct/d73dc67970054661ba2e63a3e927c1db.png)

逻辑运算符：

![](https://i-blog.csdnimg.cn/direct/efc4a939862642babf038cab3393d7ad.png)

案例：

##### 英语不及格的同学及英语成绩 ( < 60 )

![](https://i-blog.csdnimg.cn/direct/e18af3e60cb14e00b58611c7dfd06fe7.png)

##### 语文成绩在 [80, 90] 分的同学及语文成绩

![](https://i-blog.csdnimg.cn/direct/e9d2571754854bfcb915d467986f863a.png)

> 使用 AND 进行条件连接

![](https://i-blog.csdnimg.cn/direct/076c21aaa1de404785146322350da1aa.png)

> 使用 BETWEEN ... AND ... 条件

##### 数学成绩是 58 或者 59 或者 98 或者 99 分的同学及数学成绩

![](https://i-blog.csdnimg.cn/direct/a85f06bdbf4446d39a34c133b729e087.png)

> 使用 OR 进行条件连接

![](https://i-blog.csdnimg.cn/direct/ec46c57b179245148ce8f812c5698913.png)

> 使用 IN 条件

##### 姓孙的同学 及 孙某同学

![](https://i-blog.csdnimg.cn/direct/77072c4ac3204c99bab876eb10c7ba11.png)

> % 匹配任意多个（包括 0 个）任意字符

![](https://i-blog.csdnimg.cn/direct/0f0dbaf9f47a4dd9889c2e9e30242bf4.png)

> _ 匹配严格的一个任意字符

##### 语文成绩好于英语成绩的同学

![](https://i-blog.csdnimg.cn/direct/7f3a87054d15459aa52947950c2f79ea.png)

> WHERE 条件中比较运算符两侧都是字段

##### 总分在 200 分以下的同学

![](https://i-blog.csdnimg.cn/direct/28ab9391420b47febd1a02a68e059eb6.png)

> WHERE 条件中使用表达式，where后面的表达式太长了，能不能用别名呢？
>
> ![](https://i-blog.csdnimg.cn/direct/d4ee389c32d841e98cbe055e286340dd.png)
>
> 答案是不行，如下图，是执行的顺序。要先知道在哪找，然后根据筛选条件最后再去筛选。
>
> ![](https://i-blog.csdnimg.cn/direct/b6f9b1ffdebc4187a05b0a327a9efbaa.png)
>
> 因此先执行了筛选条件，此时还不知道所谓的别名，当然就不认识了。
>
> 别名不能用在 WHERE 条件中

##### 语文成绩 > 80 并且不姓孙的同学

![](https://i-blog.csdnimg.cn/direct/257eeb610e6a40e1bf0b1ba0bb0c567a.png)

> AND 与 NOT 的使用

##### 孙某同学，否则要求总成绩 > 200 并且 语文成绩 < 数学成绩 并且 英语成绩 > 80

![](https://i-blog.csdnimg.cn/direct/d4d109fba1c849fdb33dca94e2b6a178.png)

> select name,chinese,math,english,chinese+math+english 总分 from exam_result where name like '孙_' or (chinese+math+english>200 and chinese<math and english>80);

##### NULL 的查询

![](https://i-blog.csdnimg.cn/direct/41c2ee41ac024c82bd26871f0f374b1c.png) ![](https://i-blog.csdnimg.cn/direct/ec560535c628443da7523c18a13776da.png)

![](https://i-blog.csdnimg.cn/direct/a1666499f2484ebea6819b7bad6e1748.png)

> 如上图，空串和null是不一样的。

#### 结果排序

语法：

> ASC 为升序（从小到大）
>
> DESC 为降序（从大到小）
>
> 默认为 ASC
>
> SELECT ... FROM table_name [WHERE ...]
>
>         ORDER BY column [ASC|DESC], [...];

注意：没有 ORDER BY 子句的查询，返回的顺序是未定义的，永远不要依赖这个顺序

案例：

##### 同学及数学成绩，按数学成绩升序显示

![](https://i-blog.csdnimg.cn/direct/9d680246ca1a479b9d0948bfcf5a473c.png)

##### 同学及 qq 号，按 qq 号排序显示

![](https://i-blog.csdnimg.cn/direct/ec0b4419a6d64742ad57c1eae3be0b7a.png)

> NULL 视为比任何值都小，升序出现在最上面；
>
> NULL 视为比任何值都小，降序出现在最下面；

##### 查询同学各门成绩，依次按 数学降序，英语升序，语文升序的方式显示

![](https://i-blog.csdnimg.cn/direct/d84c3dd6a1e74cb78d4a3dafab746e32.png)

> 多字段排序，排序优先级随书写顺序

##### 查询同学及总分，由高到低

![](https://i-blog.csdnimg.cn/direct/6a4cb2c68d134e4ba5c29a61ed236125.png)

> 为什么这里可以用别名了？
>
> 因为要先有合适的数据，然后再排序。
>
> ORDER BY 子句中可以使用列别名

##### 查询姓孙的同学或者姓曹的同学数学成绩，结果按数学成绩由高到低显示

![](https://i-blog.csdnimg.cn/direct/24ba309bf8af4262993c98d06e5607f0.png)

> 结合 WHERE 子句 和 ORDER BY 子句

#### 筛选分页结果

 语法：

> 起始下标为 0
>
> -- 从 0 开始，筛选 n 条结果
>
> SELECT ... FROM table_name [WHERE ...] [ORDER BY ...] LIMIT n;
>
> -- 从 s 开始，筛选 n 条结果
>
> SELECT ... FROM table_name [WHERE ...] [ORDER BY ...] LIMIT s, n；
>
> -- 从 s 开始，筛选 n 条结果，比第二种用法更明确，建议使用
>
> SELECT ... FROM table_name [WHERE ...] [ORDER BY ...] LIMIT n OFFSET s;

建议：对未知表进行查询时，最好加一条 LIMIT 1，避免因为表中数据过大，查询全表数据导致数据库卡死

##### 按 id 进行分页，每页 3 条记录，分别显示 第 1、2、3 页

![](https://i-blog.csdnimg.cn/direct/1216480213d144aeaf01d5f59fa3f5ae.png)

> 如果结果不足 3 个，不会有影响

### Update

 语法：

> UPDATE table_name SET column = expr [, column = expr ...]
>
>         [WHERE ...] [ORDER BY ...] [LIMIT ...]
>
> **对查询到的结果进行列值更新**

#### 将孙悟空同学的数学成绩变更为 80 分

![](https://i-blog.csdnimg.cn/direct/f0de38df45ae4d48b590bf7d498f9068.png)

> 更新值为具体值

#### 将曹孟德同学的数学成绩变更为 60 分，语文成绩变更为 70 分

![](https://i-blog.csdnimg.cn/direct/fb47a869e1f44372a4042a6b21833deb.png)

> 一次更新多个列

#### 将总成绩倒数前三的 3 位同学的数学成绩加上 30 分

![](https://i-blog.csdnimg.cn/direct/eb3a0c08735c4aaaaf24754c6dee64f1.png)

> 不支持 math += 30 这种语法

#### 将所有同学的语文成绩更新为原来的 2 倍

**注意：更新全表的语句慎用**

![](https://i-blog.csdnimg.cn/direct/366af4bbe6ad4c6d8e8aa9f39ba30775.png)

> 没有 WHERE 子句，则更新全表

### Delete

#### 删除数据

语法：

> DELETE FROM table_name [WHERE ...] [ORDER BY ...] [LIMIT ...]

案例：

##### 删除孙悟空同学的考试成绩

![](https://i-blog.csdnimg.cn/direct/d9e26570f62b4362a8c23e0b9623517b.png)

##### 删除整张表数据

**注意：删除整表操作要慎用！**

> 删除整张表，mysql里面分为表和表里面的数据。 delete用于删除表里面的数据。

准备测试表：

![](https://i-blog.csdnimg.cn/direct/dd3d5521f81a43f3bd6656c02d8d41b1.png) ![](https://i-blog.csdnimg.cn/direct/7a9ffedce22c4f89acddddb1ef1094aa.png)

![](https://i-blog.csdnimg.cn/direct/d27d3767e3af4449a95260a58765dbdf.png)

> 删除表数据前，计数器的值是4。

![](https://i-blog.csdnimg.cn/direct/cb016c20eefd482499917d949cbb0b2f.png)

> 删除表后，表里的数据都没了，但是计数器的值依旧没变。

#### 截断表

语法：

> TRUNCATE [TABLE] table_name

**注意：这个操作慎用**

1. 只能对整表操作，不能像 DELETE 一样针对部分数据操作；
2. 实际上 MySQL 不对数据操作，所以比 DELETE 更快，但是TRUNCATE在删除数据的时候，并不经过真正的事物，所以无法回滚
3. 会重置 AUTO_INCREMENT 项

准备一个跟上面一样数据的表：

![](https://i-blog.csdnimg.cn/direct/0e5c3f8e18b3492fbee6f33d2d93c627.png)

![](https://i-blog.csdnimg.cn/direct/c55dcaadfe3a4f7ca0656639ddd256e4.png)

> 此时，计数器的值是4。

![](https://i-blog.csdnimg.cn/direct/405ebde78fab4ac0bbf1c94f04363352.png)

> 截断整表数据，注意影响行数是 0，所以实际上没有对数据真正操作。
>
> 查看表结构，发现计数器没了，实际上计数器已经被重置了。

### 插入查询结果

语法：

> INSERT INTO table_name [(column [, column ...])] SELECT ...

案例：删除表中的的重复复记录，重复的数据只能有一份

准备数据表：

![](https://i-blog.csdnimg.cn/direct/93c3f0f3586b4205a4dd825e1afadfc3.png) ![](https://i-blog.csdnimg.cn/direct/fa79e25f056e4ff2b5cbe69979f8b4e3.png)

>  思路：
>
> 1. 创建一张空表 no_duplicate_table，结构和 duplicate_table 一样
> 2. 将 duplicate_table 的去重数据插入到 no_duplicate_table
> 3. 重命名表

![](https://i-blog.csdnimg.cn/direct/413f3c9517094a9b97903593fb887ebc.png)

> 创建另一张相同结构的表。

![](https://i-blog.csdnimg.cn/direct/bd430486c9a446f7a270643ce29de0a8.png)

> 将去重后的数据插入到新表中。

![](https://i-blog.csdnimg.cn/direct/4fdd73d298df47f5a875784f5061aa26.png)

> 将表进行重命名，即可实现去重操作。

### 聚合函数

![](https://i-blog.csdnimg.cn/direct/77186afa9f1e4249a97cf659a9afedee.png)

案例：

#### 统计班级共有多少同学

![](https://i-blog.csdnimg.cn/direct/414954ce5e684f418188b0f8228769fb.png)![](https://i-blog.csdnimg.cn/direct/d0b0078fbb17407581406a76c24e84f3.png)

> 使用 * 做统计，不受 NULL 影响

![](https://i-blog.csdnimg.cn/direct/a062e1dd52b64e14b2d0307f99856ff6.png)

> 使用表达式做统计

#### 统计本次考试的数学成绩分数个数

![](https://i-blog.csdnimg.cn/direct/b93c450851a84defb68cea9434dbaf77.png)

> COUNT(math) 统计的是全部成绩
>
> 如果想把相同的成绩去掉再统计呢？

![](https://i-blog.csdnimg.cn/direct/fb1565cb10eb4953a7e19f6c304d59dd.png)

>  COUNT(DISTINCT math) 统计的是去重成绩数量

#### 统计数学成绩总分

![](https://i-blog.csdnimg.cn/direct/631493e8ed414996a1b2b62398f3cdd1.png)

#### 统计数学成绩平均总分

![](https://i-blog.csdnimg.cn/direct/89280c3d746b4e0097ddc2ed60ee78cd.png)

#### 返回英语最高分

![](https://i-blog.csdnimg.cn/direct/52550cbe430e4d56bbdc7bc18a3f77d8.png)

#### 返回 > 70 分以上的数学最低分

![](https://i-blog.csdnimg.cn/direct/c7e396f5569741738010866312559e74.png)

### group by子句的使用

在select中使用group by 子句可以对指定列进行分组查询

> select column1, column2, .. from table group by column;

案例：

准备工作，创建一个雇员信息表 ：

* EMP员工表
* DEPT部门表
* SALGRADE工资等级表

![](https://i-blog.csdnimg.cn/direct/45aa324c3589490185b17818bd04db80.png)

* 如何显示每个部门的平均工资和最高工资

![](https://i-blog.csdnimg.cn/direct/ca354282ba7848458414c35e9e8cfdfc.png)

>  如果想知道是哪一个部门的工资，如下图：![](https://i-blog.csdnimg.cn/direct/da7b477e53714bc69756715d2e7c0c9c.png)
>
> 分组的目的是为了进行分组之后，方便进行聚合统计。
>
> ![](https://i-blog.csdnimg.cn/direct/8ed594289f60434da3baae9632c16029.png)
>
> group by后面指定列名，实际分组，是用该列的不同的行数据进行分组。分组后，同一组内一定是相同的。

* 显示每个部门的每种岗位的平均工资和最低工资

![](https://i-blog.csdnimg.cn/direct/e2a0521a4c8b484ea4804e795adc2102.png)

* 显示平均工资低于2000的部门和它的平均工资

![](https://i-blog.csdnimg.cn/direct/7870a49deff845d481858c1008ab9aa0.png)

> 思路：1.统计出来每一个部门的平均工资，结果先聚合出来。
>
> 2.对聚合的结果进行判断。
>
> having和group by配合使用，对group by结果进行过滤。
>
> having经常和group by搭配使用，作用是对分组进行筛选，作用有些像where。
>
> having是对聚合后的统计数据，条件筛选。

where和having的区别理解：

![](https://i-blog.csdnimg.cn/direct/e015c29f71884c80baa32b56fc95946c.png)

>  显示平均工资低于2000的部门和它的平均工资 ，SMITH员工不参与统计。如上图。
>
> where ename！=‘SMITH’  是对具体的任意列进行条件筛选。
>
> having 是对分组聚合后的结果进行条件筛选。
>
> 总结：中间筛选出来的，包括最终结果，全都是逻辑上的表，即MySQL一切皆表。

>  SQL查询中各个关键字的执行先后顺序 from > on> join > where > group by > with > having > select > distinct > order by > limit



