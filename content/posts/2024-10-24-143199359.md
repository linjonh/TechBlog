---
layout: post
title: "å‰ç«¯åŸç”ŸSelection-apiæ“ä½œé€‰ä¸­æ–‡æœ¬-æ ·å¼å–æ¶ˆæ ·å¼è§£å†³æ ‡ç­¾çš„æ— é™åµŒå¥—é—®é¢˜"
date: 2024-10-24 18:32:46 +0800
description: "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯yma16ï¼Œæœ¬æ–‡åˆ†äº« å‰ç«¯â€”â€”Selection apiæ“ä½œé€‰ä¸­æ–‡æœ¬ æ ·å¼ã€å–æ¶ˆæ ·å¼ï¼ˆè§£"
keywords: "selection api"
categories: ['Web']
tags: ['1024ç¨‹åºå‘˜èŠ‚']
artid: "143199359"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143199359
    alt: "å‰ç«¯åŸç”ŸSelection-apiæ“ä½œé€‰ä¸­æ–‡æœ¬-æ ·å¼å–æ¶ˆæ ·å¼è§£å†³æ ‡ç­¾çš„æ— é™åµŒå¥—é—®é¢˜"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143199359
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143199359
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     å‰ç«¯â€”â€”åŸç”ŸSelection apiæ“ä½œé€‰ä¸­æ–‡æœ¬ æ ·å¼ã€å–æ¶ˆæ ·å¼ï¼ˆè§£å†³æ ‡ç­¾çš„æ— é™åµŒå¥—é—®é¢˜ï¼‰
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      æ–‡ç« ç›®å½•
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#_2" rel="nofollow">
          â­å‰è¨€
         </a>
        </li>
        <li>
         <a href="#Selection_55" rel="nofollow">
          â­Selectionè·å–é€‰åŒº
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#EyeDropperapi_70" rel="nofollow">
            âœï¸EyeDropperæ‹¾è‰²å™¨apiç»™é€‰åŒºåŠ é¢œè‰²
           </a>
          </li>
          <li>
           <a href="#selection_insertNode_html_88" rel="nofollow">
            âœï¸selection insertNode æ’å…¥htmlå­—ç¬¦ä¸²å¹¶æ¸²æŸ“
           </a>
          </li>
          <li>
           <a href="#selection_insertNode_120" rel="nofollow">
            âœï¸selection insertNodeæ¸…ç©ºå†…å®¹å†å†™å…¥å†…å®¹å†æ¸…é™¤æ ·å¼
           </a>
          </li>
          <li>
           <a href="#selection_insertNode_148" rel="nofollow">
            âœï¸selection insertNodeå¸¦æ¥çš„ç©ºèŠ‚ç‚¹å’Œå†—ä½™çˆ¶çº§èŠ‚ç‚¹é—®é¢˜
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_232" rel="nofollow">
          â­ç»“æŸ
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h3>
     <a id="_2">
     </a>
     â­å‰è¨€
    </h3>
    <p>
     å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯yma16ï¼Œæœ¬æ–‡åˆ†äº« å‰ç«¯â€”â€”Selection apiæ“ä½œé€‰ä¸­æ–‡æœ¬ æ ·å¼ã€å–æ¶ˆæ ·å¼ï¼ˆè§£å†³æ ‡ç­¾çš„æ— é™åµŒå¥—é—®é¢˜ï¼‰
     <br/>
     <strong>
      Selection API
     </strong>
    </p>
    <blockquote>
     <p>
      Selection å¯¹è±¡è¡¨ç¤ºç”¨æˆ·é€‰æ‹©çš„æ–‡æœ¬èŒƒå›´æˆ–æ’å…¥ç¬¦å·çš„å½“å‰ä½ç½®ã€‚å®ƒä»£è¡¨é¡µé¢ä¸­çš„æ–‡æœ¬é€‰åŒºï¼Œå¯èƒ½æ¨ªè·¨å¤šä¸ªå…ƒç´ ã€‚æ–‡æœ¬é€‰åŒºç”±ç”¨æˆ·æ‹–æ‹½é¼ æ ‡ç»è¿‡æ–‡å­—è€Œäº§ç”Ÿã€‚
     </p>
    </blockquote>
    <p>
     <strong>
      nodeç³»åˆ—å¾€æœŸæ–‡ç« 
     </strong>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/108611336">
      node_windowsç¯å¢ƒå˜é‡é…ç½®
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/120364769">
      node_npmå‘å¸ƒåŒ…
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/126220134">
      linux_é…ç½®node
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130445328">
      node_nvmå®‰è£…é…ç½®
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130450397">
      nodeç¬”è®°_httpæœåŠ¡æ­å»ºï¼ˆæ¸²æŸ“htmlã€jsonï¼‰
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130545110">
      nodeç¬”è®°_è¯»æ–‡ä»¶
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130545899">
      nodeç¬”è®°_å†™æ–‡ä»¶
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130611818?spm=1001.2014.3001.5501">
      nodeç¬”è®°_è¿æ¥mysqlå®ç°crud
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130672968">
      nodeç¬”è®°_formidableå®ç°å‰åç«¯è”è°ƒçš„æ–‡ä»¶ä¸Šä¼ 
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130715454?spm=1001.2014.3001.5502">
      nodeç¬”è®°_koaæ¡†æ¶ä»‹ç»
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/130737052?spm=1001.2014.3001.5501">
      node_koaè·¯ç”±
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/131030287?spm=1001.2014.3001.5501">
      node_ç”Ÿæˆç›®å½•
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/131255680?spm=1001.2014.3001.5501">
      node_è¯»å†™excel
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/131316417" rel="nofollow">
      nodeç¬”è®°_è¯»å–ç›®å½•çš„æ–‡ä»¶
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/132136139" rel="nofollow">
      nodeç¬”è®°â€”â€”è°ƒç”¨å…è´¹qqçš„smtpå‘é€htmlæ ¼å¼é‚®ç®±
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/134046367?spm=1001.2014.3001.5501">
      nodeå®æˆ˜â€”â€”æ­å»ºå¸¦swaggeræ¥å£æ–‡æ¡£çš„åç«¯koaé¡¹ç›®ï¼ˆnodeåç«¯å°±ä¸šå‚¨å¤‡çŸ¥è¯†ï¼‰
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/134090053">
      nodeå®æˆ˜â€”â€”åç«¯koaç»“åˆjwtè¿æ¥mysqlå®ç°æƒé™ç™»å½•ï¼ˆnodeåç«¯å°±ä¸šå‚¨å¤‡çŸ¥è¯†ï¼‰
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/134277390?spm=1001.2014.3001.5501">
      nodeå®æˆ˜â€”â€”koaç»™é‚®ä»¶å‘é€éªŒè¯ç å¹¶ç¼“å­˜åˆ°redisæœåŠ¡ï¼ˆnodeåç«¯å‚¨å¤‡çŸ¥è¯†ï¼‰
     </a>
    </p>
    <p>
     <strong>
      koaç³»åˆ—é¡¹ç›®æ–‡ç« 
     </strong>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/136110298?spm=1001.2014.3001.5501">
      å‰ç«¯vite+vue3ç»“åˆåç«¯node+koaâ€”â€”å®ç°ä»£ç æ¨¡æ¿å±•ç¤ºå¹³å°ï¼ˆæ”¯æŒæ¨¡ç³Šæœç´¢+åˆ†é¡µæŸ¥è¯¢ï¼‰
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/136121838?spm=1001.2014.3001.5502" rel="nofollow">
      node+vue3+mysqlå‰ååˆ†ç¦»å¼€å‘èŒƒå¼â€”â€”å®ç°å¯¹æ•°æ®åº“è¡¨çš„å¢åˆ æ”¹æŸ¥
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/136136317" rel="nofollow">
      node+vue3+mysqlå‰ååˆ†ç¦»å¼€å‘èŒƒå¼â€”â€”å®ç°è§†é¢‘æ–‡ä»¶ä¸Šä¼ å¹¶æ¸²æŸ“
     </a>
    </p>
    <p>
     <strong>
      koa-vueæ€§èƒ½ç›‘æ§åˆ°å°è£…sdkç³»åˆ—æ–‡ç« 
     </strong>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/139034129">
      æ€§èƒ½ç›‘æ§ç³»ç»Ÿæ­å»ºâ€”â€”node_koaå®ç°æ€§èƒ½ç›‘æ§æ•°æ®ä¸ŠæŠ¥ï¼ˆç¬¬ä¸€ç« ï¼‰
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/139048710?spm=1001.2014.3001.5501">
      æ€§èƒ½ç›‘æ§ç³»ç»Ÿæ­å»ºâ€”â€”vue3å®ç°æ€§èƒ½ç›‘æ§æ•°æ®å±•ç¤ºï¼ˆç¬¬äºŒç« ï¼‰
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/139401047">
      æ€§èƒ½ç›‘æ§è®¡ç®—â€”â€”å°è£…å¸¦æ€§èƒ½è®¡ç®—å¹¶ä¸ŠæŠ¥çš„npmåŒ…ï¼ˆç¬¬ä¸‰ç« ï¼‰
     </a>
     <br/>
     <strong>
      canvasç³»åˆ—æ–‡ç« 
     </strong>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/136773707">
      web canvasç³»åˆ—â€”â€”å¿«é€Ÿå…¥é—¨ä¸Šæ‰‹ç»˜åˆ¶äºŒç»´ç©ºé—´ç‚¹ã€çº¿ã€é¢
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/136788633" rel="nofollow">
      webgl canvasç³»åˆ—â€”â€”å¿«é€ŸåŠ èƒŒæ™¯ã€æŠ å›¾ã€åŠ æ°´å°å¹¶ä¸‹è½½å›¾ç‰‡
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/137060576" rel="nofollow">
      webgl canvasç³»åˆ—â€”â€”animationä¸­åŸºæœ¬æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ï¼ˆæ¨¡æ‹Ÿå†’æ³¡æ’åºè¿‡ç¨‹ï¼‰
     </a>
     <br/>
     <strong>
      å‰ç«¯vueç³»åˆ—æ–‡ç« 
     </strong>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/133955447">
      vue3 + fastapi å®ç°é€‰æ‹©ç›®å½•æ‰€æœ‰æ–‡ä»¶è‡ªå®šä¹‰ä¸Šä¼ åˆ°æœåŠ¡å™¨
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/132520250">
      å‰ç«¯vue2ã€vue3å»æ‰urlè·¯ç”±â€œ # â€å·â€”â€”nginxé…ç½®
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/131778530">
      csdnæ–°æ˜Ÿè®¡åˆ’vue3+ts+antdèµ›é“â€”â€”åˆ©ç”¨inscodeæ­å»ºvue3(ts)+antdå‰ç«¯æ¨¡æ¿
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/129460437">
      è®¤è¯†vite_vue3 åˆå§‹åŒ–é¡¹ç›®åˆ°æ‰“åŒ…
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/131756726">
      python_selenuimè·å–csdnæ–°æ˜Ÿèµ›é“é€‰æ‰‹æ‰€åœ¨åŸå¸‚ç”¨echartsåœ°å›¾æ˜¾ç¤º
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/134022655?spm=1001.2014.3001.5501">
      è®©å¤§æ¨¡å‹åˆ†æcsdnæ–‡ç« è´¨é‡ â€”â€” æå–csdnåšå®¢è¯„è®ºåœ¨æ–‡å¿ƒä¸€è¨€åˆ†æè¯„è®ºåŒºå†…å®¹
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145?spm=1010.2135.3001.5343">
      å‰ç«¯vue3â€”â€”html2canvasç»™ç½‘ç«™æˆªå›¾ç”Ÿæˆå®£ä¼ æµ·æŠ¥
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/134794991">
      å‰ç«¯â€”â€”htmlæ‹–æ‹½åŸç†
     </a>
     <br/>
     <a href="https://blog.csdn.net/qq_38870145/article/details/133579239">
      å‰ç«¯ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨åŸç†â€”â€”ä»javascriptã€htmlã€csså¼€å§‹å…¥é—¨
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/139666938" rel="nofollow">
      å‰ç«¯è€å¤è‘£execCommandâ€”â€”æ“ä½œ é€‰ä¸­æ–‡æœ¬ æ ·å¼
     </a>
     <br/>
     <a href="https://yma16.blog.csdn.net/article/details/141536599" rel="nofollow">
      å‰ç«¯å¦‚ä½•åœ¨30ç§’å†…å®ç°å¸ç®¡æ‹¾è‰²å™¨ï¼Ÿ
     </a>
    </p>
    <h3>
     <a id="Selection_55">
     </a>
     â­Selectionè·å–é€‰åŒº
    </h3>
    <p>
     é€šè¿‡document.getSelection()è·å–é€‰ä¸­çš„é€‰åŒº
     <br/>
     é€šè¿‡onselectionchange ç›‘å¬ é€‰åŒºå˜åŒ–
    </p>
    <pre><code class="prism language-javascript">  document<span class="token punctuation">.</span><span class="token function-variable function">onselectionchange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'New selection made'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    selection <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'selection'</span><span class="token punctuation">,</span> selection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> selection<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> selection<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     åœ¨æ§åˆ¶å°æ‰“å°é€‰åŒºçš„å†…å®¹
     <br/>
     <img alt="selection-log" src="https://i-blog.csdnimg.cn/direct/4a2c9c2f5c7546febeb86e63286ccc24.png"/>
    </p>
    <h4>
     <a id="EyeDropperapi_70">
     </a>
     âœï¸EyeDropperæ‹¾è‰²å™¨apiç»™é€‰åŒºåŠ é¢œè‰²
    </h4>
    <p>
     ä½¿ç”¨EyeDropperå¯¹è±¡è·å–å”¤èµ·æ‹¾è‰²å™¨api
    </p>
    <pre><code class="prism language-javascript">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>EyeDropper<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">"ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ EyeDropper API"</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> eyeDropper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EyeDropper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    eyeDropper
      <span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'result.sRGBHex'</span><span class="token punctuation">,</span>result<span class="token punctuation">.</span>sRGBHex<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="selection_insertNode_html_88">
     </a>
     âœï¸selection insertNode æ’å…¥htmlå­—ç¬¦ä¸²å¹¶æ¸²æŸ“
    </h4>
    <p>
     ä½¿ç”¨insertNode api
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">insertHTML</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> sel <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>sel <span class="token operator">&amp;&amp;</span> sel<span class="token punctuation">.</span>rangeCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> range <span class="token operator">=</span> sel<span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    range<span class="token punctuation">.</span><span class="token function">deleteContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      node<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      node<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">nd</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      range<span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>nd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    sel<span class="token punctuation">.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sel<span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     æ·»åŠ æˆåŠŸ
     <br/>
     <img alt="add-color" src="https://i-blog.csdnimg.cn/direct/7a06733d3b1e44c0a95a2a856f14d026.png">
      <br/>
      æŸ¥çœ‹divä¸‹çš„spanèŠ‚ç‚¹
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/2cfe82a4e6034499b28643b2fdd33740.png"/>
     </img>
    </p>
    <h4>
     <a id="selection_insertNode_120">
     </a>
     âœï¸selection insertNodeæ¸…ç©ºå†…å®¹å†å†™å…¥å†…å®¹å†æ¸…é™¤æ ·å¼
    </h4>
    <p>
     å…ˆåˆ é™¤é€‰åŒºå†æ·»åŠ é€‰åŒº
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">clearStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> sel <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> text<span class="token operator">=</span>sel<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">,</span>text<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sel <span class="token operator">&amp;&amp;</span> sel<span class="token punctuation">.</span>rangeCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    node<span class="token punctuation">.</span>value<span class="token operator">=</span>text
    <span class="token keyword">const</span> range <span class="token operator">=</span> sel<span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    range<span class="token punctuation">.</span><span class="token function">deleteContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    node<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>text

    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">nd</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nd'</span><span class="token punctuation">,</span>nd<span class="token punctuation">)</span>
      range<span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>nd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    sel<span class="token punctuation">.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sel<span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     å¸¦æ¥çš„é—®é¢˜ï¼šé—ç•™ç©ºèŠ‚ç‚¹æ ‡ç­¾
     <br/>
     <img alt="del-style" src="https://i-blog.csdnimg.cn/direct/8c12751087304d2bb1dfe20426b5f481.png"/>
    </p>
    <h4>
     <a id="selection_insertNode_148">
     </a>
     âœï¸selection insertNodeå¸¦æ¥çš„ç©ºèŠ‚ç‚¹å’Œå†—ä½™çˆ¶çº§èŠ‚ç‚¹é—®é¢˜
    </h4>
    <p>
     ä½¿ç”¨selection æ’å…¥ èŠ‚ç‚¹å’Œæ ·å¼å¸¦æ¥ï¼Œå¦‚ä¸‹æ— é™åµŒå¥—é—®é¢˜
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css">red</span><span class="token punctuation">'</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css">red</span><span class="token punctuation">'</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css">red</span><span class="token punctuation">'</span></span></span><span class="token punctuation">&gt;</span></span>ä¿®æ”¹æ–‡å­—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     ç©ºèŠ‚ç‚¹é—®é¢˜
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css">red</span><span class="token punctuation">'</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css">red</span><span class="token punctuation">'</span></span></span><span class="token punctuation">&gt;</span></span>ä¿®æ”¹æ–‡å­—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     æ€è·¯ï¼š
    </p>
    <ol>
     <li>
      æ¯æ¬¡ä¿®æ”¹é€‰åŒºæ—¶åˆ»è¿›è¡Œ
      <code>
       æ•´ä½“å‘ä¸‹
      </code>
      å†…å®¹æ ¡éªŒï¼Œåˆå¹¶åµŒå¥—çš„æ ‡ç­¾ï¼Œåˆ é™¤æ— æ•ˆæ ‡ç­¾ï¼ˆçˆ¶èŠ‚ç‚¹æŸ¥æ‰¾å­èŠ‚ç‚¹ï¼‰
     </li>
     <li>
      æ¯æ¬¡ä¿®æ”¹é€‰åŒºæ—¶åˆ»è¿›è¡Œ
      <code>
       ä»é€‰åŒºå†…å®¹å¾€çˆ¶çº§èŠ‚ç‚¹æŸ¥æ‰¾
      </code>
      å†…å®¹æ ¡éªŒï¼Œåˆå¹¶åµŒå¥—çš„æ ‡ç­¾ï¼Œåˆ é™¤æ— æ•ˆæ ‡ç­¾ï¼ˆå­èŠ‚ç‚¹æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹ï¼‰
     </li>
    </ol>
    <p>
     æ•´ä½“ä¿®æ”¹å†…å®¹æ¸…é™¤å†—ä½™åµŒå¥—æ ‡ç­¾
     <br/>
     é€»è¾‘å®ç°ï¼ˆå‚è€ƒï¼‰
    </p>
    <pre><code class="prism language-javascript">    <span class="token comment">/**
     * 
     * @param node åˆå¹¶èŠ‚ç‚¹æ ·å¼
     * @returns {*}
     */</span>
    <span class="token keyword">function</span> <span class="token function">mergeTag</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'node'</span><span class="token punctuation">,</span>node<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'node.textContent'</span><span class="token punctuation">,</span>node<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> Node<span class="token punctuation">.</span><span class="token constant">ELEMENT_NODE</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> nodeStyle<span class="token operator">=</span>node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span>
            <span class="token comment">// å¦‚æœæ˜¯ span æ ‡ç­¾ï¼Œé€’å½’å¤„ç†å…¶å­èŠ‚ç‚¹</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> child <span class="token keyword">of</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'child'</span><span class="token punctuation">,</span>child<span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'node.innerText'</span><span class="token punctuation">,</span>node<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'child.innerText'</span><span class="token punctuation">,</span>child<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>textContent <span class="token operator">===</span>node<span class="token punctuation">.</span>textContent <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// å†…å®¹ä¸€æ ·çš„å­èŠ‚ç‚¹å¿½ç•¥ è·å–style</span>
                    <span class="token keyword">const</span> childStyle<span class="token operator">=</span>child<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>childStyle<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">const</span> nodeStyleConfig<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>nodeStyle<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                            nodeStyle<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                                <span class="token keyword">const</span> key<span class="token operator">=</span>item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                                <span class="token keyword">const</span> value<span class="token operator">=</span>item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                                <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                                    nodeStyleConfig<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span>value
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>
                        <span class="token comment">// å­èŠ‚ç‚¹æ ·å¼è¦†ç›–</span>
                        childStyle<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                            <span class="token keyword">const</span> key<span class="token operator">=</span>item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                            <span class="token keyword">const</span> value<span class="token operator">=</span>item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                                nodeStyleConfig<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span>value
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nodeStyleConfig'</span><span class="token punctuation">,</span>nodeStyleConfig<span class="token punctuation">)</span>
                        <span class="token comment">// console.log('nodeStyleConfig.entries()',nodeStyleConfig.entries())</span>
                        <span class="token keyword">let</span> style<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
                        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>nodeStyleConfig<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                            style<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">':'</span><span class="token operator">+</span>nodeStyleConfig<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span>style<span class="token punctuation">)</span>
                        node<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span>style<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token comment">// åˆå¹¶ nodeStyle å’Œ  childStyle ï¼ˆchildStyle ä¼˜å…ˆçº§é«˜ï¼‰</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">//  èŠ‚ç‚¹å˜æˆæ–‡æœ¬ åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡æœ¬èŠ‚ç‚¹å¹¶æ›¿æ¢å®ƒ</span>
                    <span class="token keyword">const</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    child<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>textNode<span class="token punctuation">,</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>child<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// åˆ é™¤ ç©ºèŠ‚ç‚¹</span>
                    child<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                    <span class="token function">mergeTag</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> node
    <span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_232">
     </a>
     â­ç»“æŸ
    </h3>
    <p>
     æœ¬æ–‡åˆ†äº«åˆ°è¿™ç»“æŸï¼Œå¦‚æœ‰é”™è¯¯æˆ–è€…ä¸è¶³ä¹‹å¤„æ¬¢è¿æŒ‡å‡ºï¼
    </p>
    <p>
     <img alt="sence" src="https://i-blog.csdnimg.cn/direct/43ba8e75529c476da572ac0993e56362.png"/>
    </p>
    <blockquote>
     <p>
      ğŸ‘ ç‚¹èµï¼Œæ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼
     </p>
     <p>
      â­ï¸ æ”¶è—ï¼Œæ˜¯æˆ‘åŠªåŠ›çš„æ–¹å‘ï¼
     </p>
     <p>
      âœï¸ è¯„è®ºï¼Œæ˜¯æˆ‘è¿›æ­¥çš„è´¢å¯Œï¼
     </p>
     <p>
      ğŸ’– æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33383837303134352f:61727469636c652f64657461696c732f313433313939333539" class_="artid" style="display:none">
 </p>
</div>


