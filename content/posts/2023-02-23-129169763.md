---
layout: post
title: "配置环境安装Ffmpeg音视频编解码工具和搭建EasyDarwin开源流媒体服务器"
date: 2023-02-23 23:36:29 +0800
description: "本文介绍了如何安装Ffmpeg音视频编解码工具，包括其组件和开发文档，并详细阐述了在Windows上"
keywords: "easydarwin"
categories: ['环境准备']
tags: ['视频编解码', '服务器', '媒体', 'Ffmpeg']
artid: "129169763"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=129169763
    alt: "配置环境安装Ffmpeg音视频编解码工具和搭建EasyDarwin开源流媒体服务器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=129169763
featuredImagePreview: https://bing.ee123.net/img/rand?artid=129169763
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【配置环境】安装Ffmpeg音视频编解码工具和搭建EasyDarwin开源流媒体服务器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p id="main-toc">
     <strong>
      目录
     </strong>
    </p>
    <p id="%E4%B8%80%EF%BC%8C%E5%AE%89%E8%A3%85Ffmpeg%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E5%B7%A5%E5%85%B7-toc" style="margin-left:0px;">
     <a href="#%E4%B8%80%EF%BC%8C%E5%AE%89%E8%A3%85Ffmpeg%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E5%B7%A5%E5%85%B7" rel="nofollow">
      一，安装Ffmpeg音视频编解码工具
     </a>
    </p>
    <p id="1%EF%BC%8C%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;">
     <a href="#1%EF%BC%8C%E7%AE%80%E4%BB%8B" rel="nofollow">
      1，简介
     </a>
    </p>
    <p id="2%EF%BC%8C%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3-toc" style="margin-left:40px;">
     <a href="#2%EF%BC%8C%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3" rel="nofollow">
      2，开发文档
     </a>
    </p>
    <p id="3%EF%BC%8C%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2-toc" style="margin-left:40px;">
     <a href="#3%EF%BC%8C%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2" rel="nofollow">
      3，安装部署
     </a>
    </p>
    <p id="%E4%BA%8C%EF%BC%8C%E6%90%AD%E5%BB%BAEasyDarwin%E5%BC%80%E6%BA%90%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E5%99%A8-toc" style="margin-left:0px;">
     <a href="#%E4%BA%8C%EF%BC%8C%E6%90%AD%E5%BB%BAEasyDarwin%E5%BC%80%E6%BA%90%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">
      二，搭建EasyDarwin开源流媒体服务器
     </a>
    </p>
    <p id="1%EF%BC%8C%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;">
     <a href="#1%EF%BC%8C%E7%AE%80%E4%BB%8B" rel="nofollow">
      1，简介
     </a>
    </p>
    <p id="2%EF%BC%8C%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E7%89%B9%E7%82%B9-toc" style="margin-left:40px;">
     <a href="#2%EF%BC%8C%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E7%89%B9%E7%82%B9" rel="nofollow">
      2，主要功能特点
     </a>
    </p>
    <p id="3%EF%BC%8C%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2-toc" style="margin-left:40px;">
     <a href="#3%EF%BC%8C%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2" rel="nofollow">
      3，安装部署
     </a>
    </p>
    <p id="4%EF%BC%8C%E6%95%88%E6%9E%9C%E5%9B%BE-toc" style="margin-left:40px;">
     <a href="#4%EF%BC%8C%E6%95%88%E6%9E%9C%E5%9B%BE" rel="nofollow">
      4，效果图
     </a>
    </p>
    <p id="%E4%B8%89%EF%BC%8C%E7%AE%80%E5%8D%95%E6%B5%8B%E8%AF%95-toc" style="margin-left:0px;">
     <a href="#%E4%B8%89%EF%BC%8C%E7%AE%80%E5%8D%95%E6%B5%8B%E8%AF%95" rel="nofollow">
      三，简单测试
     </a>
    </p>
    <hr id="hr-toc"/>
    <p>
    </p>
    <h2 id="%E4%B8%80%EF%BC%8C%E5%AE%89%E8%A3%85Ffmpeg%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E5%B7%A5%E5%85%B7">
     一，安装Ffmpeg音视频编解码工具
    </h2>
    <h3 id="1%EF%BC%8C%E7%AE%80%E4%BB%8B">
     1，简介
    </h3>
    <p>
     <a class="link-info" href="https://baike.baidu.com/item/ffmpeg/2665727?fr=aladdin" rel="nofollow" title="Ffmpeg">
      Ffmpeg
     </a>
     是一套可以用来记录、转换数字音频、视频，并能将其转化为流的开源计算机程序。采用LGPL或GPL许可证。它提供了录制、转换以及流化音视频的完整解决方案。它包含了非常先进的音频/视频编解码库libavcodec，为了保证高可移植性和编解码质量，libavcodec里很多code都是从头开发的。各库介绍如下：
    </p>
    <ul>
     <li>
      <strong>
       <a href="https://ffmpeg.org/libavutil.html" rel="nofollow" title="libavutil">
        libavutil
       </a>
      </strong>
      是一个包含简化编程函数的库，包括随机数生成器、数据结构、数学例程、核心多媒体实用程序等等。
     </li>
     <li>
      <strong>
       <a href="https://ffmpeg.org/libavcodec.html" rel="nofollow" title="libavcodec">
        libavcodec
       </a>
      </strong>
      是一个包含音频/视频编解码器和编码器的库。
     </li>
     <li>
      <strong>
       <a href="https://ffmpeg.org/libavformat.html" rel="nofollow" title="libavformat">
        libavformat
       </a>
      </strong>
      是一个包含多媒体容器格式demuxer和muxer的库。
     </li>
     <li>
      <strong>
       <a href="https://ffmpeg.org/libavdevice.html" rel="nofollow" title="libavdevice">
        libavdevice
       </a>
      </strong>
      是一个包含输入和输出设备的库，用于从许多常见的多媒体输入/输出软件框架抓取和呈现，包括Video4Linux、Video4Linux2、VfW和ALSA。
     </li>
     <li>
      <strong>
       <a href="https://ffmpeg.org/libavfilter.html" rel="nofollow" title="libavfilter">
        libavfilter
       </a>
      </strong>
      是一个包含媒体过滤器的库。
     </li>
     <li>
      <strong>
       <a href="https://ffmpeg.org/libswscale.html" rel="nofollow" title="libswscale">
        libswscale
       </a>
      </strong>
      是一个执行高度优化的图像缩放和颜色空间/像素格式转换操作的库。
     </li>
     <li>
      <strong>
       <a href="https://ffmpeg.org/libswresample.html" rel="nofollow" title="libswresample">
        libswresample
       </a>
      </strong>
      是一个执行高度优化的音频重采样，重矩阵和样本格式转换操作的库。
     </li>
    </ul>
    <h3 id="2%EF%BC%8C%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3">
     2，开发文档
    </h3>
    <p>
     总共是配套三个工具，功能介绍如下所示，点击相应工具可以查看开发文档：
    </p>
    <ul>
     <li>
      <p>
       <a class="link-info" href="https://ffmpeg.org/ffmpeg.html" rel="nofollow" title="Ffmpeg">
        Ffmpeg
       </a>
       是一个用于操作、转换和流媒体内容的命令行工具箱。
      </p>
     </li>
     <li>
      <p>
       <a class="link-info" href="https://ffmpeg.org/ffplay.html" rel="nofollow" title="Ffplay">
        Ffplay
       </a>
       是一个极简的多媒体播放器。
      </p>
     </li>
     <li>
      <p>
       <a class="link-info" href="https://ffmpeg.org/ffprobe.html" rel="nofollow" title="Ffprobe">
        Ffprobe
       </a>
       是一个用于检查多媒体内容的简单分析工具。
      </p>
     </li>
    </ul>
    <h3 id="3%EF%BC%8C%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2">
     3，安装部署
    </h3>
    <p>
     1.Windows平台安装包下载地址
     <a href="https://ffmpeg.org/download.html" rel="nofollow" title="Download FFmpeg">
      Download FFmpeg
     </a>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/51c27df29df8765e9ad6a58f08f04845.png">
      ​
     </img>
    </p>
    <p>
     2.然后跳转到
     <a href="https://github.com/BtbN/FFmpeg-Builds/releases" title="Releases · BtbN/FFmpeg-Builds · GitHub">
      Releases · BtbN/FFmpeg-Builds · GitHub
     </a>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/d749c3228921b933fa967f5c7ee1d0f5.png">
      ​
     </img>
    </p>
    <p>
     3.下载完成后解压缩后将bin和doc拷贝到
     <span style="color:#1c7331;">
      D:\Program Files\ffmpeg
     </span>
     目录下，然后添加ffmpeg的环境变量（doc目录下是使用手册）
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/326f8de2364ca46c65ce09b02e123619.png">
      ​
     </img>
    </p>
    <p>
     4.打开cmd，运行
     <span style="color:#1c7331;">
      ffmpeg -version
     </span>
     ，显示如下说明成功
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/0c6ebc2c061940a5bf58022bfb1b5c35.png">
      ​
     </img>
    </p>
    <h2 id="%E4%BA%8C%EF%BC%8C%E6%90%AD%E5%BB%BAEasyDarwin%E5%BC%80%E6%BA%90%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E5%99%A8">
     二，搭建EasyDarwin开源流媒体服务器
    </h2>
    <h3>
     1，简介
    </h3>
    <p>
     EasyDarwin是基于go语言研发，维护和优化的一个高性能开源RTSP
     <a class="link-info" href="https://baike.baidu.com/item/%E6%B5%81%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E5%99%A8/9711212?fr=aladdin" rel="nofollow" title="流媒体服务器">
      流媒体服务器
     </a>
     ，能够帮助流媒体开发者和创业型企业快速构建流媒体服务平台，更快，更简单的实现最新的移动互联网流媒体直播和点播，同步音频和视频的传输，源码下载地址：
     <a class="link-info" href="https://github.com/EasyDarwin/EasyDarwin" title="EasyDarwin | github">
      EasyDarwin | github
     </a>
    </p>
    <h3 id="2%EF%BC%8C%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E7%89%B9%E7%82%B9">
     2，主要功能特点
    </h3>
    <ul>
     <li>
      <p>
       基于Golang开发维护；
      </p>
     </li>
     <li>
      <p>
       支持Windows、Linux、macOS平台；
      </p>
     </li>
     <li>
      <p>
       支持RTSP推流分发（推模式转发）；
      </p>
     </li>
     <li>
      <p>
       支持RTSP拉流分发（拉模式转发）；
      </p>
     </li>
     <li>
      <p>
       服务端录像 参考:
       <a href="https://blog.csdn.net/jyt0551/article/details/84189498" title="EasyDarwinGo录像功能发布 | CSDN">
        EasyDarwinGo录像功能发布 | CSDN
       </a>
      </p>
     </li>
     <li>
      <p>
       服务端录像检索与回放 参考:
       <a href="https://blog.csdn.net/jyt0551/article/details/84189498" title="EasyDarwinGo录像功能发布 | CSDN">
        EasyDarwinGo录像功能发布 | CSDN
       </a>
      </p>
     </li>
     <li>
      <p>
       关键帧缓存；
      </p>
     </li>
     <li>
      <p>
       秒开画面；
      </p>
     </li>
     <li>
      <p>
       Web后台管理；
      </p>
     </li>
     <li>
      <p>
       分布式负载均衡；
      </p>
     </li>
    </ul>
    <h3>
     3，安装部署
    </h3>
    <ul>
     <li>
      <p>
       <a href="https://github.com/EasyDarwin/EasyDarwin/releases" title="下载解压 release 包 | github">
        下载解压 release 包 | github
       </a>
      </p>
     </li>
     <li>
      <p>
       直接运行(Windows)
      </p>
      <ul>
       <li>
        <p>
         EasyDarwin.exe
        </p>
       </li>
       <li>
        <p>
         以
         <code>
          Ctrl + C
         </code>
         停止服务
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       以服务启动(Windows)
      </p>
      <ul>
       <li>
        <p>
         ServiceInstall-EasyDarwin.exe
        </p>
       </li>
       <li>
        <p>
         以 ServiceUninstall-EasyDarwin.exe 卸载 EasyDarwin 服务
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       直接运行(Linux/macOS)
      </p>
      <div>
       <div>
        <pre><code class="language-Go">  cd EasyDarwin
  ./easydarwin
  # Ctrl + C
</code></pre>
       </div>
      </div>
     </li>
     <li>
      <p>
       以服务启动(Linux/macOS)
      </p>
      <div>
       <div>
        <pre><code class="language-Go">  cd EasyDarwin
  ./start.sh
  # ./stop.sh
</code></pre>
       </div>
      </div>
     </li>
     <li>
      <p>
       查看界面
      </p>
      <ul>
       <li>
        <p>
         打开浏览器输入
         <a href="http://localhost:10008/" rel="nofollow" title="http://localhost:10008">
          http://localhost:10008
         </a>
         , 进入控制页面,默认用户名密码是admin/admin
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       测试推流
      </p>
      <ul>
       <li>
        <p>
         ffmpeg -re -i "你电脑上某个视频的绝对路径" -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/testPushStream
        </p>
       </li>
       <li>
        <p>
         ffmpeg -re -i "你电脑上某个视频的绝对路径" -rtsp_transport udp -vcodec h264 -f rtsp rtsp://localhost/testPushStream
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       测试播放
      </p>
      <ul>
       <li>
        <p>
         <code class="language-Go">
          方式1：ffplay -rtsp_transport tcp rtsp://localhost/testPushStream
         </code>
        </p>
       </li>
       <li>
        <p>
         <code class="language-Go">
          方式2：ffplay rtsp://localhost/testPushStream
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <div>
    </div>
    <h3 id="4%EF%BC%8C%E6%95%88%E6%9E%9C%E5%9B%BE">
     4，效果图
    </h3>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ce92896dc3b3dc3ff6f1cdaa95b487a0.png">
      ​​
     </img>
    </p>
    <h2 id="%E4%B8%89%EF%BC%8C%E7%AE%80%E5%8D%95%E6%B5%8B%E8%AF%95">
     三，简单测试
    </h2>
    <p>
     1.新建一个
     <span style="color:#1c7331;">
      demo.bat
     </span>
     的文件，添加内容为：
     <span style="color:#1c7331;">
      ffmpeg -f gdigrab -i desktop -vcodec mpeg4 -acodec libmp3ame -r 30 -vf scale=1028*720 -f rtsp rtsp://localhost:554/desktopVideo
     </span>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/11d5399c53e1242a18a0b5258f197b16.png">
      ​
     </img>
    </p>
    <p>
     2.然后点击程序即可运行，会把当前桌面推流到EasyDarwin流媒体服务器上
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/cc6d8a303ed9b6f71ff0438acf5bc0c1.png">
      ​
     </img>
    </p>
    <p style="text-align:center;">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/a11e12682859cebffefb9dcf9febc50c.png">
      ​
     </img>
    </p>
    <p>
     3.最后进行拉流，在cmd中运行
     <span style="color:#1c7331;">
      ffplay rtsp://localhost/desktopVideo
     </span>
     进行拉流，是不是有种直播效果（注意推流列表的播放地址一样）
    </p>
    <div class="video">
     <iframe allowfullscreen="true" data-mediaembed="csdn" frameborder="0" id="FDgGA60q-1677166448381" src="https://live.csdn.net/v/embed/277922" style="width:100%;height:100%;">
     </iframe>
     <p>
     </p>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333732393132372f:61727469636c652f64657461696c732f313239313639373633" class_="artid" style="display:none">
 </p>
</div>


