---
layout: post
title: "C语言-进阶指针学习笔记"
date: 2025-03-09 19:32:53 +0800
description: "关于指针数组、数组指针、函数指针、函数指针数组、回调函数"
keywords: "C语言 进阶指针学习笔记"
categories: ['C']
tags: ['笔记', '学习', 'C']
artid: "146137174"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146137174
    alt: "C语言-进阶指针学习笔记"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146137174
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146137174
cover: https://bing.ee123.net/img/rand?artid=146137174
image: https://bing.ee123.net/img/rand?artid=146137174
img: https://bing.ee123.net/img/rand?artid=146137174
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C语言 进阶指针学习笔记
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <p>
     <strong>
      大部分的内容都写在代码注释中
     </strong>
     <br/>
     指针有类型，指针的类型决定了指针的±整数的步长，指针解引用操作的时候的权限
    </p>
    <h3>
     <a id="_4">
     </a>
     字符指针
    </h3>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>str1 <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span>  
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>str2 <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span>  
    <span class="token comment">// 在这个写法中，字符串放在表达式中（"hello world" 视为一个表达式）  </span>
    <span class="token comment">// 该表达式的值是一个指向字符串的指针  </span>
    <span class="token comment">// *str2 = "Hello, C!"; // const 在 * 前面，不能修改指针指向的内容  </span>
  
    <span class="token keyword">char</span> str3<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span>  
    <span class="token keyword">char</span> str4<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span>  
    <span class="token comment">// 在这个写法中，字符串放在数组中，数组是一个变量，可以修改  </span>
  
    <span class="token keyword">char</span> <span class="token operator">*</span>str5 <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span>  
    <span class="token comment">// 在这个写法中，指针未被修饰，且其中存的为常量字符串  </span>
    <span class="token comment">// *str5 = "Hello, C!"; // 会报错，因为指针指向的是常量字符串，不能被修改  </span>
    <span class="token comment">// 在前面加上 const 修饰符，即可在编译阶段报错，避免运行时错误  </span>
    <span class="token comment">// const char *str5 = "Hello, World!";  </span>
  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str1: %s, address: %p\n"</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str2: %s, address: %p\n"</span><span class="token punctuation">,</span> str2<span class="token punctuation">,</span> str2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str5: %s, address: %p\n"</span><span class="token punctuation">,</span> str5<span class="token punctuation">,</span> str5<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// str1、str2 和 str5 的地址是相同的，因为它们指向的是常量字符串，在内存中只有一份  </span>
  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str3: %s, address: %p\n"</span><span class="token punctuation">,</span> str3<span class="token punctuation">,</span> str3<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str4: %s, address: %p\n"</span><span class="token punctuation">,</span> str4<span class="token punctuation">,</span> str4<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// str3 和 str4 的地址是不同的，因为它们是数组，每个数组都有自己的内存空间  </span>
  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <p>
     C/C++会把常量字符串存储到单独的一个内存区域，当几个常量指针指向同一个字符串时，他们实际会指向同一块内存（全局区）
     <br/>
     但是用相同的常量字符串去初始化不同的数组的时候就会开辟出不同的内存块，因此 str1 和 str2 不同，str3 和 str4 不同
    </p>
    <h3>
     <a id="_42">
     </a>
     指针数组
    </h3>
    <p>
     指针数组是一个存放指针的数组
    </p>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> arr1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 整形数组  </span>
  
    <span class="token comment">// 指针数组  </span>
    <span class="token keyword">int</span> <span class="token operator">*</span>parr1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>arr1<span class="token punctuation">,</span> arr1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> arr1 <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> arr1 <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> arr1 <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token comment">// parr1 是一个数组，数组中的每个元素都是一个 int*，指向 arr1 中的元素  </span>
  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"arr1[%d]: %d, address: %p\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"parr1[%d]: %d, address: %p\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">*</span>parr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> parr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// 这里的 address 实际上就是 arr2[i] 的值，即 arr1 中元素的地址  </span>
    <span class="token punctuation">}</span>  
  
    <span class="token comment">// ----------------------------  </span>
  
    <span class="token keyword">int</span> arr2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> arr3<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> <span class="token operator">*</span>parr2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>arr2<span class="token punctuation">,</span> arr3<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 利用指针数组，将多个独立数组组合成类二维数组  </span>
  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"parr2[%d][%d]: %d, address: %p\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> parr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>parr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token comment">// parr2[i][j] 等价于 *(parr2[i] + j)，即 arr2[i] 中的第 j 个元素  </span>
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_82">
     </a>
     数组指针
    </h3>
    <p>
     数组指针指指向数组的指针
    </p>
    <pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> <span class="token operator">*</span>arr1<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 指针数组  </span>
    <span class="token comment">// arr1 先是一个数组（先和方块结合），数组中的每个元素都是一个 int*，指向 int 类型的变量  </span>
  
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>arr2<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 数组指针  </span>
    <span class="token comment">// arr2 是一个指针，指向一个 int 类型的数组  </span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_96">
     </a>
     数组名
    </h4>
    <ol>
     <li>
      通常，数组名表示的都是首元素地址
     </li>
     <li>
      存在两个例外
      <ol>
       <li>
        sizeof (数组名)，这里的数组名表示整个数组
       </li>
       <li>
        &amp;数组名，表示的依然是整个数组
       </li>
      </ol>
     </li>
    </ol>
    <p>
     类型（对 int arr[5]]）：
    </p>
    <ul>
     <li>
      arr -&gt; int*
     </li>
     <li>
      &amp;arr -&gt; int (*)[5]
     </li>
    </ul>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> arr1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 在这里，&amp;arr1 表示整个数组的地址，即 arr1 的地址  </span>
  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"----------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// sizeof(arr1) 是整个数组的大小，单位是字节  </span>
    <span class="token comment">// 在这里，数组名表示整个数组  </span>
  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"----------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> arr1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// arr1 + 1 表示数组中第二个元素的地址  </span>
    <span class="token comment">// &amp;arr1 + 1 表示整个数组后面的地址  </span>
  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"----------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>parr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr1<span class="token punctuation">;</span>    <span class="token comment">// parr 是一个指针，指向一个 int 类型的数组  </span>
    <span class="token comment">// 需要写清楚有几个元素</span>
    <span class="token comment">// 此时，parr 的类型为 int(*)[5]</span>
  
    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>arr1<span class="token punctuation">;</span>  
    <span class="token comment">// warning:'int(*)[5]' 类型的表达式被隐式转换为不兼容的指针类型  </span>
  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_140">
     </a>
     数组传参
    </h4>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token comment">/**  
 * @brief 打印数组内容，参数直接传数组  
 *
 * @param arr 传入数组  
 * @param line 数组行数  
 * @param length 数组列数  
 */</span><span class="token keyword">void</span> <span class="token function">print1</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> line<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> line<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
  
<span class="token comment">/**  
 * @brief 打印数组内容，传参传数组指针  
 * * @param p   
 * @param line   
 * @param length   
 */</span>  
<span class="token keyword">void</span> <span class="token function">print2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> line<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> line<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token comment">// printf("%d ", (*(p + i))[j]); // 等价于上面的写法  </span>
            <span class="token comment">// 如果写成 *(p + i)[j]，输出会报错，因为 [] 的优先级高于 *            printf("%d ", p[i][j]); // 也可以这样写  </span>
        <span class="token punctuation">}</span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token comment">// 二维数组的首元素是第一行，在这里为含有 5 个元素的一维数组  </span>
  
    <span class="token function">print1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">print2</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将二维数组的首元素传入函数  </span>
  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token operator">*</span>parr1<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 指针数组</span>

<span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>parr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 数组指针</span>

<span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>parr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 存放数组指针的数组</span>
</code></pre>
    <p>
     <strong>
      一维指针数组传参
     </strong>
     <br/>
     指针数组元素为 指针
     <br/>
     指针数组的数组名相当于一个 指针
     <br/>
     指针指向存放一个指针的位置 -&gt; 二级指针
     <br/>
     因此指针数组传参可以为二级指针
    </p>
    <pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>parr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>parr<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <strong>
      二维数组通过指针传参
     </strong>
     <br/>
     二维数组的首元素是一维数组，不能用一级/二级指针接收
     <br/>
     形参应该是一个一维数组的指针
    </p>
    <pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// err</span>

<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 参数为一个一维数组</span>

<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// err，二级指针指向存放一级指针的地址，不能是指向一个一维数组的指针</span>
</code></pre>
    <h3>
     <a id="_233">
     </a>
     函数指针
    </h3>
    <p>
     指向函数的指针
    </p>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token keyword">int</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>func1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取地址符得到函数的地址  </span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> func1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对函数来说，&amp;func1 和 func1 是一样的  </span>
  
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> func1<span class="token punctuation">;</span> <span class="token comment">// 定义一个函数指针  </span>
    <span class="token comment">// 返回值类型 (*指针变量名)(参数类型1, 参数类型2, ...);  </span>
  
    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过函数指针调用函数  </span>
    <span class="token keyword">int</span> ret2 <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// *p 和 p 是一样的，如果要写 *p，必须加括号（如果不加括号，p 先和后面结合，* 会被当成解引用操作符对 p(1, 2) 解引用）  </span>
    <span class="token comment">// 等价于 int ret = func1(1, 2);    printf("%d\n", ret);    printf("%d\n", ret2);  </span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      案例
     </strong>
    </p>
    <pre><code class="prism language-c"><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// void (*p)() -&gt; p 是函数指针</span>
<span class="token comment">// void (*)() -&gt; 函数指针类型</span>
<span class="token comment">// (void (*)())0 -&gt; 把 0(0x00000000) 强制转换为函数指针类型（此时把 0 看作一个地址）</span>
<span class="token comment">// (*(void (*)())0)() -&gt; 调用 0 地址对应的函数</span>
<span class="token comment">// 即这行代码为一次函数调用，调用 0 地址的函数</span>
</code></pre>
    <pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 一次函数声明</span>
<span class="token comment">// 声明的 signal 函数参数 1 类型为 int，参数 2 类型为函数指针，该函数指针指向的函数参数是 int 类型，返回类型为 void</span>
<span class="token comment">// signal 函数的返回类型为函数指针，该函数指针参数是 int 类型，返回类型为 void</span>

<span class="token comment">// ----------</span>

<span class="token keyword">typedef</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token class-name">pf_t</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把 void(*)(int) 类型重命名为 pf_t  </span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token class-name">pf_t</span> <span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token class-name">pf_t</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 pf_t 重命名后的类型  </span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      函数指针的用途
     </strong>
    </p>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token keyword">void</span> <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Please select:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1. Add\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"2. Sub\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"3. Mul\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"4. Div\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"0. Exit\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">Mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token comment">// 方法 2：将输入代码块放在一个函数中，通过函数指针传递给 Calculate 函数（回调函数）</span>
<span class="token comment">/**
/**  
 * @brief 接收一个函数指针，通过函数指针调用函数  
 * * @param pf 函数指针  
 */</span><span class="token keyword">void</span> <span class="token function">Calculate</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Please input two numbers: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> num1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> num2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">pf</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Result: %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> choice <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
    <span class="token keyword">do</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Please select: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// printf("Please input two numbers: ");  </span>
        <span class="token comment">// int num1 = 0;        // int num2 = 0;        // scanf("%d %d", &amp;num1, &amp;num2);        // int ret = 0;        // 输入代码块放在外面，无论选择什么都要输入两个数，不符合逻辑  </span>
  
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>  
            <span class="token comment">// printf("Please input two numbers: ");  </span>
            <span class="token comment">// int num1 = 0;            // int num2 = 0;            // scanf("%d %d", &amp;num1, &amp;num2);            // int ret = 0;            // 方法 1：将每一个输入涉及的代码块放在一个 case 语句中，造成代码冗余  </span>
  
            <span class="token comment">// ret = Add(num1, num2);  </span>
  
            <span class="token function">Calculate</span><span class="token punctuation">(</span>Add<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
  
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>  
            <span class="token comment">// ret = Sub(num1, num2);  </span>
            <span class="token function">Calculate</span><span class="token punctuation">(</span>Sub<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
  
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>  
            <span class="token comment">// ret = Mul(num1, num2);  </span>
            <span class="token function">Calculate</span><span class="token punctuation">(</span>Mul<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
  
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>  
            <span class="token comment">// ret = Div(num1, num2);  </span>
            <span class="token function">Calculate</span><span class="token punctuation">(</span>Div<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
  
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Exit!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
  
        <span class="token keyword">default</span><span class="token operator">:</span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Error input!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
        <span class="token comment">// printf("Result: %d\n", ret);  </span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_390">
     </a>
     函数指针数组
    </h3>
    <p>
     把函数指针放在数组中
    </p>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">Mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">void</span> <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Please select:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1. Add\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"2. Sub\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"3. Mul\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"4. Div\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"0. Exit\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> choice <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
      
    <span class="token comment">// 实现函数跳转（转移表）  </span>
    <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>pfArr<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>Add<span class="token punctuation">,</span> Sub<span class="token punctuation">,</span> Mul<span class="token punctuation">,</span> Div<span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token keyword">do</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">if</span><span class="token punctuation">(</span>choice <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> choice <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Error input!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">continue</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
        <span class="token keyword">else</span>  
        <span class="token punctuation">{<!-- --></span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Please input two numbers: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">int</span> num1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
            <span class="token keyword">int</span> num2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Result: %d\n"</span><span class="token punctuation">,</span> pfArr<span class="token punctuation">[</span>choice <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Exit!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
      
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_460">
     </a>
     指向函数指针数组的指针
    </h4>
    <pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pfarr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>add<span class="token punctuation">,</span> sub<span class="token punctuation">,</span> mul<span class="token punctuation">,</span> div<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token comment">// 指向函数指针数组的指针  </span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>pfarr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="_468">
     </a>
     回调函数
    </h3>
    <p>
     通过函数指针调用的函数（把 A 函数的指针作为参数传递给 B 函数，当特定的事件或条件满足时，由 B 函数调用 A 函数，此时 A 为回调函数）
    </p>
    <h4>
     <a id="Qsort__471">
     </a>
     Qsort 的使用
    </h4>
    <pre><code class="prism language-c"><span class="token comment">/**  
 * @brief 快速排序（库函数），可以对任意类型的数据进行排序  
 ** @param base 排序的数据起始位置  
 * @param nmemb 待排序元素个数  
 * @param size 待排序元素大小（字节）  
 * @param compar 函数指针，指向比较函数，e1、e2分别指向待比较的两个元素，当e1 &lt; e2时，返回负数；当e1 = e2时，返回0；当e1 &gt; e2时，返回正数
 */</span>
 <span class="token keyword">void</span> <span class="token function">qsort</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>base<span class="token punctuation">,</span> <span class="token class-name">size_t</span> nmemb<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>compar<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     回调函数的使用
    </p>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span>  </span>
  
<span class="token comment">/**  
 * @brief 整形比较函数  
 ** @param e1 比较的元素1  
 * @param e2 比较的元素2  
 * @return int 当e1 &lt; e2时，返回负数；当e1 = e2时，返回0；当e1 &gt; e2时，返回正数  
 */</span><span class="token keyword">int</span> <span class="token function">compareInt</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e2<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span>e1 <span class="token operator">-</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">;</span>  
    <span class="token comment">// void *可以接收任意类型的数据，不能解引用，也不能进行运算，需要转换为具体类型  </span>
    <span class="token comment">// 也可以写成降序排序，return *(int *)e2 - *(int *)e1;  </span>
<span class="token punctuation">}</span>  
  
<span class="token keyword">void</span> <span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token function">qsort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> compareInt<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">struct</span> <span class="token class-name">Stu</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token keyword">int</span> <span class="token function">compareStu</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e2<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Stu</span> <span class="token operator">*</span><span class="token punctuation">)</span>e1<span class="token punctuation">)</span><span class="token operator">-&gt;</span>age <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Stu</span> <span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">)</span><span class="token operator">-&gt;</span>age<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">void</span> <span class="token function">testFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">struct</span> <span class="token class-name">Stu</span> s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"lisi"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"wangwu"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token function">qsort</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> compareStu<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// int 类型排序  </span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">testFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结构体类型排序  </span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_qsort_545">
     </a>
     通过冒泡排序模拟实现 qsort
    </h4>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span>  </span>
  
<span class="token keyword">struct</span> <span class="token class-name">Stu</span>    
<span class="token punctuation">{<!-- --></span>    
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">;</span>    
    
<span class="token keyword">int</span> <span class="token function">compareStu</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e2<span class="token punctuation">)</span>    
<span class="token punctuation">{<!-- --></span>    
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Stu</span> <span class="token operator">*</span><span class="token punctuation">)</span>e1<span class="token punctuation">)</span><span class="token operator">-&gt;</span>age <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Stu</span> <span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">)</span><span class="token operator">-&gt;</span>age<span class="token punctuation">;</span>    
<span class="token punctuation">}</span>    
  
  
<span class="token keyword">int</span> <span class="token function">compareInt</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e2<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span>e1 <span class="token operator">-</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
  
<span class="token keyword">void</span> <span class="token function">swapMem</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>e1<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>e2<span class="token punctuation">,</span> <span class="token class-name">size_t</span> width<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">char</span> tmp<span class="token punctuation">;</span>  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>e1 <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>e1 <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>e2 <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>e2 <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
<span class="token comment">/**  
 * @brief 模拟实现 qsort 函数  
 ** @param arr 待排序数组  
 * @param sz 待排序元素个数  
 * @param width 待排序元素大小（字节），由于传入的是 void * 类型，无法得知具体类型，需要传入元素大小  
 * @param compare 比较函数  
 */</span><span class="token keyword">void</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> sz<span class="token punctuation">,</span> <span class="token class-name">size_t</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>compare<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>e2<span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    sz <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>sz<span class="token punctuation">;</span>  
    width <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>width<span class="token punctuation">;</span>  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> sz <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>arr <span class="token operator">+</span> j <span class="token operator">*</span> width<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>arr <span class="token operator">+</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> width<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 通过起始位置 + 偏移量来访问元素  </span>
            <span class="token punctuation">{<!-- --></span>  
                <span class="token function">swapMem</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>arr <span class="token operator">+</span> j <span class="token operator">*</span> width<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>arr <span class="token operator">+</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> width<span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 交换两个元素  </span>
            <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
  
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">bubbleSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> compareInt<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">struct</span> <span class="token class-name">Stu</span> s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"lisi"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"wangwu"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
    sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token function">bubbleSort</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> compareStu<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f666c6173686965722f:61727469636c652f64657461696c732f313436313337313734" class_="artid" style="display:none">
 </p>
</div>


