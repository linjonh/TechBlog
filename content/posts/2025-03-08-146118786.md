---
layout: post
title: "小程序-wxml-语法-36-wxml-语法-setData-修改数据"
date: 2025-03-08 17:13:32 +0800
description: "通过上面的演示可以知道，通过赋值可以修改数据，但是不能改变页面上已经显示的数据；如果我们想更新 data 中的数据，同时也更新页面上已经显示的数据，就得使用 setData()；在微信小程序中，推荐调用 setData() 方式进行修改，setData() 方法接收对象作为参数，key 是需要修改的数据，value 是最新的值；在小程序中修改数据不推荐通过赋值的方式进行修改，通过赋值的方式修改数据无法改变页面的数据；"
keywords: "this.setdata变量参数赋值到wxml"
categories: ['微信小程序', '前端']
tags: ['小程序']
artid: "146118786"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146118786
    alt: "小程序-wxml-语法-36-wxml-语法-setData-修改数据"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146118786
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146118786
cover: https://bing.ee123.net/img/rand?artid=146118786
image: https://bing.ee123.net/img/rand?artid=146118786
img: https://bing.ee123.net/img/rand?artid=146118786
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     小程序 wxml 语法 —— 36 wxml 语法 - setData() 修改数据
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     在小程序中修改数据不推荐通过赋值的方式进行修改，通过赋值的方式修改数据无法改变页面的数据；
    </p>
    <p>
     在微信小程序中，推荐调用 setData() 方式进行修改，setData() 方法接收对象作为参数，key 是需要修改的数据，value 是最新的值；
    </p>
    <p>
     setData() 方法有两个作用：
    </p>
    <ul>
     <li>
      更新数据
     </li>
     <li>
      驱动视图更新；
     </li>
    </ul>
    <p>
     下面打开微信开发者工具，演示一下如何通过 setData 进行数据修改：
    </p>
    <ul>
     <li>
      <p>
       在 pages/cate/cate.js 中进行数据声明，如下：
      </p>
      <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 在小程序页面中所需要使用的数据均来自 data 对象</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">updateNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 获取 num</span>
    <span class="token comment">// console.log(this.data.num);</span>

    <span class="token comment">// 通过赋值的方式直接修改数据 num</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       在 page/cate/cate.wxml 中添加如下代码：
      </p>
      <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ num }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateNum<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>更新 num<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre>
      <p>
       刷新页面，点击按钮，可以发现 console 打印的 num 值在不断增大，但是页面中的 num 没有发生变化，如下：
      </p>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" height="500" src="https://i-blog.csdnimg.cn/direct/7b058884386e4b6cab8efacfef2d7734.png#pic_center">
      <br/>
      通过上面的演示可以知道，通过赋值可以修改数据，但是不能改变页面上已经显示的数据；如果我们想更新 data 中的数据，同时也更新页面上已经显示的数据，就得使用 setData() ；
     </img>
    </p>
    <p>
     修改一下 pages/cate/cate.js 中的代码，如下：
    </p>
    <pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 在小程序页面中所需要使用的数据均来自 data 对象</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">updateNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">// key: 需要更新的数据的名称</span>
      <span class="token comment">// value: 需要更新的数据的值</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     修改代码后，刷新页面，点击按钮，可以发现页面上的 num 值实时更新了，如下图所示：
    </p>
    <p>
     <img alt="在这里插入图片描述" height="500" src="https://i-blog.csdnimg.cn/direct/45ec8452f8764b048241c1796b42112e.png#pic_center">
      <br/>
      参考视频：
      <a href="https://www.bilibili.com/video/BV1LF4m1E7kB?spm_id_from=333.788.player.switch&amp;vd_source=685932cc10434c6f812b07e579c1c1bf&amp;p=36" rel="nofollow">
       尚硅谷微信小程序开发教程
      </a>
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33373338383038352f:61727469636c652f64657461696c732f313436313138373836" class_="artid" style="display:none">
 </p>
</div>


