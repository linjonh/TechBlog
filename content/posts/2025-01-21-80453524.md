---
layout: post
title: "FFmpeg在Mac上面采集音视频"
date: 2025-01-21 19:20:16 +0800
description: "在电脑上面使用FFmpeg命令行工具很方便，同样也可以在各个系统平台采集音视频数据，这里记录了解一下"
keywords: "ffmpeg list devices mac"
categories: ['Ffmpeg']
tags: ['无标签']
artid: "80453524"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=80453524
    alt: "FFmpeg在Mac上面采集音视频"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=80453524
featuredImagePreview: https://bing.ee123.net/img/rand?artid=80453524
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     FFmpeg在Mac上面采集音视频
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     在电脑上面使用FFmpeg命令行工具很方便，同样也可以在各个系统平台采集音视频数据，这里记录了解一下在Mac OS系统下的音视频采集。
    </p>
    <h2 id="ffmpeg在os-x设备操作">
     FFmpeg在OS X设备操作
    </h2>
    <p>
     在FFmpeg中采集OS X系统的输入输出设备，常规方式采用的是OS X的avfoundation设备进行采集，它的参数如下：
    </p>
    <ul>
     <li>
      list_devices:列举当前可用设备信息
     </li>
     <li>
      video_device_index:视频设备索引编号
     </li>
     <li>
      audio_device_index:音频设备索引编号
     </li>
     <li>
      pixel_format:色彩格式，例如yuv420,nv12等
     </li>
     <li>
      framerate:帧率
     </li>
     <li>
      video_size:图像分辨率
     </li>
     <li>
      capture_cursor:获取屏幕上鼠标图像
     </li>
     <li>
      capture_mouse_clicks:获取屏幕上鼠标点击的事件
     </li>
    </ul>
    <h3 id="os-x下查看设备列表">
     OS X下查看设备列表
    </h3>
    <p>
     使用命令如下：
    </p>
    <pre class="prettyprint"><code class="hljs lasso">ffmpeg <span class="hljs-attribute">-devices</span></code></pre>
    <p>
    </p>
    <center>
     <br/>
     <img height="50%" src="https://i-blog.csdnimg.cn/blog_migrate/ead0f1572323324eeb5ba9ba281d37c8.jpeg" width="50%">
      <br/>
     </img>
    </center>
    <br/>
    包含
    <p>
    </p>
    <ul>
     <li>
      解封装或封装的支持情况
     </li>
     <li>
      设备列表
     </li>
    </ul>
    <h3 id="os-x下设备采集示例">
     OS X下设备采集示例
    </h3>
    <p>
     查看设备支持的输入设备
    </p>
    <pre class="prettyprint"><code class="hljs lasso">ffmpeg <span class="hljs-attribute">-f</span> avfoundation <span class="hljs-attribute">-list_devices</span> <span class="hljs-literal">true</span> <span class="hljs-attribute">-i</span> <span class="hljs-string">""</span></code></pre>
    <p>
    </p>
    <center>
     <br/>
     <img height="50%" src="https://i-blog.csdnimg.cn/blog_migrate/c402eacff0aecdb1a4273ca02f436d73.jpeg" width="50%">
      <br/>
     </img>
    </center>
    <br/>
    视频输入设备
    <p>
    </p>
    <ul>
     <li>
      FaceTime HD Camera
     </li>
     <li>
      Capture screen 0
      <br/>
      音频输入设备
     </li>
     <li>
      Built-in Microphone
     </li>
    </ul>
    <p>
     采集命令：
    </p>
    <ul>
     <li>
      桌面录制
     </li>
    </ul>
    <pre class="prettyprint"><code class="hljs lasso">ffmpeg <span class="hljs-attribute">-f</span> avfoundation <span class="hljs-attribute">-i</span> <span class="hljs-string">"1"</span> <span class="hljs-attribute">-vcodec</span> libx264 <span class="hljs-attribute">-preset</span> ultrafast <span class="hljs-attribute">-acodec</span> libfaac <span class="hljs-attribute">-f</span> flv ~/Movies/output<span class="hljs-built_in">.</span>flv</code></pre>
    <ul>
     <li>
      摄像头录制
     </li>
    </ul>
    <pre class="prettyprint"><code class="hljs lasso">ffmpeg <span class="hljs-attribute">-f</span> avfoundation <span class="hljs-attribute">-framerate</span> <span class="hljs-number">30</span> <span class="hljs-attribute">-i</span> <span class="hljs-string">"0:0"</span> <span class="hljs-attribute">-vcodec</span> libx264 <span class="hljs-attribute">-preset</span> veryfast <span class="hljs-attribute">-f</span> flv test<span class="hljs-built_in">.</span>mkv </code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f4c796d616e5f5965:2f61727469636c652f64657461696c732f3830343533353234" class_="artid" style="display:none">
 </p>
</div>


