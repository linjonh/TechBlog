---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35383634383839302f:61727469636c652f64657461696c732f313436303638333534"
layout: post
title: "åœ¨-CLion-ä¸­ä½¿ç”¨-Boost.Test-è¿›è¡Œ-C-å•å…ƒæµ‹è¯•"
date: 2025-03-06 14:19:48 +0800
description: "æœ¬åšå®¢è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨CLionä¸­å®‰è£…ã€é…ç½®å’Œè¿è¡ŒBoost.Testï¼ŒåŒ…æ‹¬ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼ˆvcpkgã€Homebrewã€APTï¼‰å®‰è£…Boostï¼Œé…ç½®CMakeLists.txtï¼Œç¼–å†™å’Œè¿è¡ŒBoost.Testæµ‹è¯•ä»£ç ï¼Œä»¥åŠå¦‚ä½•åœ¨CLionä¸­ç›´æ¥è¿è¡Œæµ‹è¯•ã€‚"
keywords: "åœ¨ CLion ä¸­ä½¿ç”¨ Boost.Test è¿›è¡Œ C++ å•å…ƒæµ‹è¯•"
categories: ['å•å…ƒæµ‹è¯•']
tags: ['å¼€å‘è¯­è¨€', 'å•å…ƒæµ‹è¯•', 'C']
artid: "146068354"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146068354
    alt: "åœ¨-CLion-ä¸­ä½¿ç”¨-Boost.Test-è¿›è¡Œ-C-å•å…ƒæµ‹è¯•"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146068354
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146068354
cover: https://bing.ee123.net/img/rand?artid=146068354
image: https://bing.ee123.net/img/rand?artid=146068354
img: https://bing.ee123.net/img/rand?artid=146068354
---

# åœ¨ CLion ä¸­ä½¿ç”¨ Boost.Test è¿›è¡Œ C++ å•å…ƒæµ‹è¯•

### **1. å®‰è£… Boost.Test**

Boost.Test æ˜¯
**Boost C++ åº“**
çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤éœ€è¦å®‰è£…å®Œæ•´çš„
**Boost**
åº“ã€‚

#### **æ–¹æ³• 1ï¼šä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼ˆæ¨èï¼‰**

**Windowsï¼ˆvcpkgï¼‰**

ç›´æ¥ä½¿ç”¨ CLion é›†æˆçš„ vcpkgå®‰è£… boost-testï¼š

![å®‰è£… boost-test](https://i-blog.csdnimg.cn/direct/24313eafd05a4d48bf7157bcad09ac10.png)

ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤æ¥å®‰è£…ï¼š

```sh
git clone https://github.com/microsoft/vcpkg.git
cd vcpkg
bootstrap-vcpkg.bat
vcpkg install boost-test

```

**macOSï¼ˆHomebrewï¼‰**

```sh
brew install boost

```

**Linuxï¼ˆAPTï¼‰**

```sh
sudo apt install libboost-test-dev

```

#### **æ–¹æ³• 2ï¼šæ‰‹åŠ¨ä¸‹è½½ Boost å¹¶ç¼–è¯‘**

1. ä»
   [Boost å®˜ç½‘](https://www.boost.org/)
   ä¸‹è½½æºç ã€‚
2. è§£å‹å¹¶ç¼–è¯‘ Boostï¼š

   ```sh
   ./bootstrap.sh
   ./b2

   ```

---

### **2. åˆ›å»º CLion é¡¹ç›®**

1. **æ‰“å¼€ CLion**
   ï¼Œé€‰æ‹©
   `New Project`
   ã€‚
2. é€‰æ‹©
   `C++ Executable`
   ï¼Œç„¶åç‚¹å‡»
   `Create`
   åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚

---

### **3. é…ç½® CMakeLists.txt**

åœ¨
`CMakeLists.txt`
ä¸­æ·»åŠ 
**Boost.Test**
é…ç½®ï¼š

```cmake
cmake_minimum_required(VERSION 3.30)
project(MyTest)

set(CMAKE_CXX_STANDARD 20)

# æŸ¥æ‰¾ Boost åº“
find_package(Boost REQUIRED COMPONENTS unit_test_framework)
include_directories(${Boost_INCLUDE_DIRS})

# æ·»åŠ æµ‹è¯•æ–‡ä»¶
add_executable(MyTest main.cpp)

# é“¾æ¥ Boost.Test åº“
target_link_libraries(MyTest Boost::unit_test_framework)

# å¯ç”¨æµ‹è¯•
enable_testing()

```

å¦‚æœ
**Boost**
å®‰è£…åœ¨éé»˜è®¤è·¯å¾„ï¼ˆå¦‚ vcpkgï¼‰ï¼Œéœ€è¦æŒ‡å®š
`CMAKE_PREFIX_PATH`
ï¼š

```cmake
set(CMAKE_PREFIX_PATH "C:/path/to/vcpkg/installed/x64-windows")

```

---

### **4. ç¼–å†™ Boost.Test æµ‹è¯•ä»£ç **

#### **æ–¹æ³• 1ï¼šè‡ªåŠ¨ç®¡ç† `main()`**

![æµ‹è¯•ä»£ç ](https://i-blog.csdnimg.cn/direct/8e61b9d8dcbd4955acba5363df73787f.png)

```cpp
#define BOOST_TEST_MODULE MyTest
#include <boost/test/included/unit_test.hpp>

int Add(int nA, int nB) {
    return nA + nB;
}

BOOST_AUTO_TEST_CASE(AdditionTest) {
    BOOST_CHECK_EQUAL(Add(2, 3), 5);
    BOOST_CHECK_EQUAL(Add(-2, -3), -5);
}

```

#### **æ–¹æ³• 2ï¼šæ‰‹åŠ¨å®šä¹‰ `main()`**

```cpp
#define BOOST_TEST_DYN_LINK
#include <boost/test/unit_test.hpp>

int Add(int nA, int nB) {
    return nA + nB;
}

BOOST_AUTO_TEST_CASE(AdditionTest) {
    BOOST_CHECK_EQUAL(Add(2, 3), 5);
    BOOST_CHECK_EQUAL(Add(-2, -3), -5);
}

boost::unit_test::test_suite* init_unit_test_suite(int, char* []) {
    return nullptr;
}

```

---

### **5. è¿è¡Œ Boost.Test**

#### **æ–¹æ³• 1ï¼šæ‰‹åŠ¨è¿è¡Œ**

```sh
cmake --build .
./my_test

```

#### **æ–¹æ³• 2ï¼šCLion ç›´æ¥è¿è¡Œ**

ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼š

![é…ç½®å•å…ƒæµ‹è¯•](https://i-blog.csdnimg.cn/direct/3d091a95669a423fa29f3367048682cb.png)

---

### **6. å¤„ç† Boost.Test æ–­è¨€**

| æ–­è¨€ç±»å‹ | è¯­æ³• |
| --- | --- |
| **åŸºæœ¬æ–­è¨€** | `BOOST_CHECK_EQUAL(a, b);` |
| **æµ®ç‚¹æ•°æ¯”è¾ƒ** | `BOOST_CHECK_CLOSE(a, b, 0.01);` |
| **å¼‚å¸¸æ£€æµ‹** | `BOOST_CHECK_THROW(foo(), ExceptionType);` |

```cpp
BOOST_AUTO_TEST_CASE(TestAssertions) {
    BOOST_CHECK_EQUAL(1 + 1, 2);
    BOOST_CHECK_CLOSE(3.14, 3.1401, 0.01);
    BOOST_CHECK_THROW(throw std::runtime_error("error"), std::runtime_error);
}

```

---

### **7. ä½¿ç”¨ Boost.Test Fixtures**

```cpp
struct MyFixture {
    MyFixture() { nValue = 5; }
    int nValue;
};

BOOST_FIXTURE_TEST_CASE(FixtureTest, MyFixture) {
    BOOST_CHECK_EQUAL(nValue + 5, 10);
}

```

---

### **8. è§£å†³å¯èƒ½é‡åˆ°çš„é—®é¢˜**

#### **æ‰¾ä¸åˆ° Boost.Test**

å¦‚æœ CMake æ‰¾ä¸åˆ° Boostï¼Œè¯·ç¡®ä¿
`CMAKE_PREFIX_PATH`
æ­£ç¡®è®¾ç½®ï¼š

```cmake
set(CMAKE_PREFIX_PATH "C:/path/to/vcpkg/installed/x64-windows")

```

#### **é“¾æ¥é”™è¯¯**

å¦‚æœé‡åˆ° undefined reference to â€˜boost::unit\_test::frameworkâ€™ï¼š

* åœ¨ CMakeLists.txt ç¡®ä¿ï¼š

```cmake
target_link_libraries(my_test Boost::unit_test_framework)

```

* Windows ä¸‹ï¼ŒBoost å¯èƒ½éœ€è¦åŠ¨æ€é“¾æ¥ï¼š

```cpp
#define BOOST_TEST_DYN_LINK

```

---

### **9. æ€»ç»“**

| æ­¥éª¤ | è¯´æ˜ |
| --- | --- |
| **å®‰è£… Boost.Test** | `vcpkg` ã€ `brew` æˆ– `apt` |
| **åˆ›å»º CLion é¡¹ç›®** | `New Project` |
| **é…ç½® CMakeLists.txt** | `find_package(Boost REQUIRED COMPONENTS unit_test_framework)` |
| **ç¼–å†™æµ‹è¯•ä»£ç ** | `BOOST_AUTO_TEST_CASE()` |
| **è¿è¡Œæµ‹è¯•** | CLion ç›´æ¥è¿è¡Œ æˆ– `./my_test` |

è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨
**CLion + Boost.Test**
ç¯å¢ƒä¸‹è¿›è¡Œ
**C++ å•å…ƒæµ‹è¯•**
äº†ï¼ğŸš€