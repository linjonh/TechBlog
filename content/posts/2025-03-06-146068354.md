---
layout: post
title: "åœ¨-CLion-ä¸­ä½¿ç”¨-Boost.Test-è¿›è¡Œ-C-å•å…ƒæµ‹è¯•"
date: 2025-03-06 14:19:48 +0800
description: "æœ¬åšå®¢è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨CLionä¸­å®‰è£…ã€é…ç½®å’Œè¿è¡ŒBoost.Testï¼ŒåŒ…æ‹¬ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼ˆvcpkgã€Homebrewã€APTï¼‰å®‰è£…Boostï¼Œé…ç½®CMakeLists.txtï¼Œç¼–å†™å’Œè¿è¡ŒBoost.Testæµ‹è¯•ä»£ç ï¼Œä»¥åŠå¦‚ä½•åœ¨CLionä¸­ç›´æ¥è¿è¡Œæµ‹è¯•ã€‚"
keywords: "åœ¨ CLion ä¸­ä½¿ç”¨ Boost.Test è¿›è¡Œ C++ å•å…ƒæµ‹è¯•"
categories: ['å•å…ƒæµ‹è¯•']
tags: ['å¼€å‘è¯­è¨€', 'å•å…ƒæµ‹è¯•', 'C']
artid: "146068354"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146068354
    alt: "åœ¨-CLion-ä¸­ä½¿ç”¨-Boost.Test-è¿›è¡Œ-C-å•å…ƒæµ‹è¯•"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146068354
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146068354
cover: https://bing.ee123.net/img/rand?artid=146068354
image: https://bing.ee123.net/img/rand?artid=146068354
img: https://bing.ee123.net/img/rand?artid=146068354
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     åœ¨ CLion ä¸­ä½¿ç”¨ Boost.Test è¿›è¡Œ C++ å•å…ƒæµ‹è¯•
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1__BoostTest_0">
     </a>
     <strong>
      1. å®‰è£… Boost.Test
     </strong>
    </h3>
    <p>
     Boost.Test æ˜¯
     <strong>
      Boost C++ åº“
     </strong>
     çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤éœ€è¦å®‰è£…å®Œæ•´çš„
     <strong>
      Boost
     </strong>
     åº“ã€‚
    </p>
    <h4>
     <a id="_1_4">
     </a>
     <strong>
      æ–¹æ³• 1ï¼šä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼ˆæ¨èï¼‰
     </strong>
    </h4>
    <p>
     <strong>
      Windowsï¼ˆvcpkgï¼‰
     </strong>
    </p>
    <p>
     ç›´æ¥ä½¿ç”¨ CLion é›†æˆçš„ vcpkgå®‰è£… boost-testï¼š
    </p>
    <p>
     <img alt="å®‰è£… boost-test" src="https://i-blog.csdnimg.cn/direct/24313eafd05a4d48bf7157bcad09ac10.png"/>
    </p>
    <p>
     ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤æ¥å®‰è£…ï¼š
    </p>
    <pre><code class="prism language-sh"><span class="token function">git</span> clone https://github.com/microsoft/vcpkg.git
<span class="token builtin class-name">cd</span> <span class="token function">vcpkg</span>
bootstrap-vcpkg.bat
<span class="token function">vcpkg</span> <span class="token function">install</span> boost-test
</code></pre>
    <p>
     <strong>
      macOSï¼ˆHomebrewï¼‰
     </strong>
    </p>
    <pre><code class="prism language-sh">brew <span class="token function">install</span> boost
</code></pre>
    <p>
     <strong>
      Linuxï¼ˆAPTï¼‰
     </strong>
    </p>
    <pre><code class="prism language-sh"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libboost-test-dev
</code></pre>
    <h4>
     <a id="_2_Boost__31">
     </a>
     <strong>
      æ–¹æ³• 2ï¼šæ‰‹åŠ¨ä¸‹è½½ Boost å¹¶ç¼–è¯‘
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       ä»
       <a href="https://www.boost.org/" rel="nofollow">
        Boost å®˜ç½‘
       </a>
       ä¸‹è½½æºç ã€‚
      </p>
     </li>
     <li>
      <p>
       è§£å‹å¹¶ç¼–è¯‘ Boostï¼š
      </p>
      <pre><code class="prism language-sh">./bootstrap.sh
./b2
</code></pre>
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="2__CLion__43">
     </a>
     <strong>
      2. åˆ›å»º CLion é¡¹ç›®
     </strong>
    </h3>
    <ol>
     <li>
      <strong>
       æ‰“å¼€ CLion
      </strong>
      ï¼Œé€‰æ‹©
      <code>
       New Project
      </code>
      ã€‚
     </li>
     <li>
      é€‰æ‹©
      <code>
       C++ Executable
      </code>
      ï¼Œç„¶åç‚¹å‡»
      <code>
       Create
      </code>
      åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="3__CMakeListstxt_50">
     </a>
     <strong>
      3. é…ç½® CMakeLists.txt
     </strong>
    </h3>
    <p>
     åœ¨
     <code>
      CMakeLists.txt
     </code>
     ä¸­æ·»åŠ 
     <strong>
      Boost.Test
     </strong>
     é…ç½®ï¼š
    </p>
    <pre><code class="prism language-cmake">cmake_minimum_required(VERSION 3.30)
project(MyTest)

set(CMAKE_CXX_STANDARD 20)

# æŸ¥æ‰¾ Boost åº“
find_package(Boost REQUIRED COMPONENTS unit_test_framework)
include_directories(${Boost_INCLUDE_DIRS})

# æ·»åŠ æµ‹è¯•æ–‡ä»¶
add_executable(MyTest main.cpp)

# é“¾æ¥ Boost.Test åº“
target_link_libraries(MyTest Boost::unit_test_framework)

# å¯ç”¨æµ‹è¯•
enable_testing()
</code></pre>
    <p>
     å¦‚æœ
     <strong>
      Boost
     </strong>
     å®‰è£…åœ¨éé»˜è®¤è·¯å¾„ï¼ˆå¦‚ vcpkgï¼‰ï¼Œéœ€è¦æŒ‡å®š
     <code>
      CMAKE_PREFIX_PATH
     </code>
     ï¼š
    </p>
    <pre><code class="prism language-cmake">set(CMAKE_PREFIX_PATH "C:/path/to/vcpkg/installed/x64-windows")
</code></pre>
    <hr/>
    <h3>
     <a id="4__BoostTest__82">
     </a>
     <strong>
      4. ç¼–å†™ Boost.Test æµ‹è¯•ä»£ç 
     </strong>
    </h3>
    <h4>
     <a id="_1_main_84">
     </a>
     <strong>
      æ–¹æ³• 1ï¼šè‡ªåŠ¨ç®¡ç†
      <code>
       main()
      </code>
     </strong>
    </h4>
    <p>
     <img alt="æµ‹è¯•ä»£ç " src="https://i-blog.csdnimg.cn/direct/8e61b9d8dcbd4955acba5363df73787f.png"/>
    </p>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BOOST_TEST_MODULE</span> <span class="token expression">MyTest</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;boost/test/included/unit_test.hpp&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> nA<span class="token punctuation">,</span> <span class="token keyword">int</span> nB<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> nA <span class="token operator">+</span> nB<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">BOOST_AUTO_TEST_CASE</span><span class="token punctuation">(</span>AdditionTest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">BOOST_CHECK_EQUAL</span><span class="token punctuation">(</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">BOOST_CHECK_EQUAL</span><span class="token punctuation">(</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_2_main_102">
     </a>
     <strong>
      æ–¹æ³• 2ï¼šæ‰‹åŠ¨å®šä¹‰
      <code>
       main()
      </code>
     </strong>
    </h4>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BOOST_TEST_DYN_LINK</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;boost/test/unit_test.hpp&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> nA<span class="token punctuation">,</span> <span class="token keyword">int</span> nB<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> nA <span class="token operator">+</span> nB<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">BOOST_AUTO_TEST_CASE</span><span class="token punctuation">(</span>AdditionTest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">BOOST_CHECK_EQUAL</span><span class="token punctuation">(</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">BOOST_CHECK_EQUAL</span><span class="token punctuation">(</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

boost<span class="token double-colon punctuation">::</span>unit_test<span class="token double-colon punctuation">::</span>test_suite<span class="token operator">*</span> <span class="token function">init_unit_test_suite</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="5__BoostTest_124">
     </a>
     <strong>
      5. è¿è¡Œ Boost.Test
     </strong>
    </h3>
    <h4>
     <a id="_1_126">
     </a>
     <strong>
      æ–¹æ³• 1ï¼šæ‰‹åŠ¨è¿è¡Œ
     </strong>
    </h4>
    <pre><code class="prism language-sh">cmake <span class="token parameter variable">--build</span> <span class="token builtin class-name">.</span>
./my_test
</code></pre>
    <h4>
     <a id="_2CLion__133">
     </a>
     <strong>
      æ–¹æ³• 2ï¼šCLion ç›´æ¥è¿è¡Œ
     </strong>
    </h4>
    <p>
     ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼š
    </p>
    <p>
     <img alt="é…ç½®å•å…ƒæµ‹è¯•" src="https://i-blog.csdnimg.cn/direct/3d091a95669a423fa29f3367048682cb.png"/>
    </p>
    <hr/>
    <h3>
     <a id="6__BoostTest__141">
     </a>
     <strong>
      6. å¤„ç† Boost.Test æ–­è¨€
     </strong>
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        æ–­è¨€ç±»å‹
       </th>
       <th>
        è¯­æ³•
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         åŸºæœ¬æ–­è¨€
        </strong>
       </td>
       <td>
        <code>
         BOOST_CHECK_EQUAL(a, b);
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         æµ®ç‚¹æ•°æ¯”è¾ƒ
        </strong>
       </td>
       <td>
        <code>
         BOOST_CHECK_CLOSE(a, b, 0.01);
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         å¼‚å¸¸æ£€æµ‹
        </strong>
       </td>
       <td>
        <code>
         BOOST_CHECK_THROW(foo(), ExceptionType);
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <pre><code class="prism language-cpp"><span class="token function">BOOST_AUTO_TEST_CASE</span><span class="token punctuation">(</span>TestAssertions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">BOOST_CHECK_EQUAL</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">BOOST_CHECK_CLOSE</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token number">3.1401</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">BOOST_CHECK_THROW</span><span class="token punctuation">(</span><span class="token keyword">throw</span> std<span class="token double-colon punctuation">::</span><span class="token function">runtime_error</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>runtime_error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="7__BoostTest_Fixtures_159">
     </a>
     <strong>
      7. ä½¿ç”¨ Boost.Test Fixtures
     </strong>
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">struct</span> <span class="token class-name">MyFixture</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">MyFixture</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> nValue <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">int</span> nValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">BOOST_FIXTURE_TEST_CASE</span><span class="token punctuation">(</span>FixtureTest<span class="token punctuation">,</span> MyFixture<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">BOOST_CHECK_EQUAL</span><span class="token punctuation">(</span>nValue <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="8__174">
     </a>
     <strong>
      8. è§£å†³å¯èƒ½é‡åˆ°çš„é—®é¢˜
     </strong>
    </h3>
    <h4>
     <a id="_BoostTest_176">
     </a>
     <strong>
      æ‰¾ä¸åˆ° Boost.Test
     </strong>
    </h4>
    <p>
     å¦‚æœ CMake æ‰¾ä¸åˆ° Boostï¼Œè¯·ç¡®ä¿
     <code>
      CMAKE_PREFIX_PATH
     </code>
     æ­£ç¡®è®¾ç½®ï¼š
    </p>
    <pre><code class="prism language-cmake">set(CMAKE_PREFIX_PATH "C:/path/to/vcpkg/installed/x64-windows")
</code></pre>
    <h4>
     <a id="_184">
     </a>
     <strong>
      é“¾æ¥é”™è¯¯
     </strong>
    </h4>
    <p>
     å¦‚æœé‡åˆ° undefined reference to â€˜boost::unit_test::frameworkâ€™ï¼š
    </p>
    <ul>
     <li>
      åœ¨ CMakeLists.txt ç¡®ä¿ï¼š
     </li>
    </ul>
    <pre><code class="prism language-cmake">target_link_libraries(my_test Boost::unit_test_framework)
</code></pre>
    <ul>
     <li>
      Windows ä¸‹ï¼ŒBoost å¯èƒ½éœ€è¦åŠ¨æ€é“¾æ¥ï¼š
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BOOST_TEST_DYN_LINK</span></span>
</code></pre>
    <hr/>
    <h3>
     <a id="9__202">
     </a>
     <strong>
      9. æ€»ç»“
     </strong>
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        æ­¥éª¤
       </th>
       <th>
        è¯´æ˜
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         å®‰è£… Boost.Test
        </strong>
       </td>
       <td>
        <code>
         vcpkg
        </code>
        ã€
        <code>
         brew
        </code>
        æˆ–
        <code>
         apt
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         åˆ›å»º CLion é¡¹ç›®
        </strong>
       </td>
       <td>
        <code>
         New Project
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         é…ç½® CMakeLists.txt
        </strong>
       </td>
       <td>
        <code>
         find_package(Boost REQUIRED COMPONENTS unit_test_framework)
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         ç¼–å†™æµ‹è¯•ä»£ç 
        </strong>
       </td>
       <td>
        <code>
         BOOST_AUTO_TEST_CASE()
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         è¿è¡Œæµ‹è¯•
        </strong>
       </td>
       <td>
        CLion ç›´æ¥è¿è¡Œ æˆ–
        <code>
         ./my_test
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨
     <strong>
      CLion + Boost.Test
     </strong>
     ç¯å¢ƒä¸‹è¿›è¡Œ
     <strong>
      C++ å•å…ƒæµ‹è¯•
     </strong>
     äº†ï¼ğŸš€
    </p>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35383634383839302f:61727469636c652f64657461696c732f313436303638333534" class_="artid" style="display:none">
 </p>
</div>


