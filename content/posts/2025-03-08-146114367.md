---
layout: post
title: "2025基于PythonDjango的酒店民宿预订管理系统源码调试答疑学习资料"
date: 2025-03-08 12:38:26 +0800
description: "课题背景酒店行业的发展需求：随着旅游业的蓬勃发展以及人们出行需求的不断增加，酒店行业的规模日益扩大。大量的旅客在出行前需要预订酒店客房，而传统的预订方式往往效率低下且容易出错。酒店需要处理海量的客房信息、客户预订信息以及员工管理等事务，手工操作或者简单的办公软件已经难以满足需求。传统管理模式的局限性：传统的人工管理方式效率低下，容易出现错误，且难以进行数据分析和决策支持。例如，一家大型酒店可能拥有多种类型的客房，不同的价格、设施等，面对众多的预订请求，很难准确、快速地进行处理。"
keywords: "【2025】基于Python+Django的酒店民宿预订管理系统（源码+调试+答疑+学习资料）"
categories: ['Python']
tags: ['服务器', '数据库', 'Python', 'Django']
artid: "146114367"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146114367
    alt: "2025基于PythonDjango的酒店民宿预订管理系统源码调试答疑学习资料"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146114367
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146114367
cover: https://bing.ee123.net/img/rand?artid=146114367
image: https://bing.ee123.net/img/rand?artid=146114367
img: https://bing.ee123.net/img/rand?artid=146114367
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【2025】基于Python+Django的酒店民宿预订管理系统（源码+调试+答疑+学习资料）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
    </p>
    <h2 id="%E8%AF%A5%E9%A1%B9%E7%9B%AE%E5%90%AB%E6%9C%89%E6%BA%90%E7%A0%81%E3%80%81%E6%96%87%E6%A1%A3%E3%80%81PPT%E3%80%81%E9%85%8D%E5%A5%97%E5%BC%80%E5%8F%91%E8%BD%AF%E4%BB%B6%E3%80%81%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B%E3%80%81%E9%A1%B9%E7%9B%AE%E5%8F%91%E5%B8%83%E6%95%99%E7%A8%8B%E7%AD%89%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9%E3%80%82">
    </h2>
    <p id="main-toc">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/80ebedeee696408597176db22ea65566.png"/>
    </p>
    <p id="main-toc">
     <strong>
      目录
     </strong>
    </p>
    <p id="%E8%AF%A5%E9%A1%B9%E7%9B%AE%E5%90%AB%E6%9C%89%E6%BA%90%E7%A0%81%E3%80%81%E6%96%87%E6%A1%A3%E3%80%81PPT%E3%80%81%E9%85%8D%E5%A5%97%E5%BC%80%E5%8F%91%E8%BD%AF%E4%BB%B6%E3%80%81%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B%E3%80%81%E9%A1%B9%E7%9B%AE%E5%8F%91%E5%B8%83%E6%95%99%E7%A8%8B%E7%AD%89%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9%E3%80%82-toc">
    </p>
    <p id="%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%EF%BC%9A-toc">
     <a href="#%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%EF%BC%9A" rel="nofollow">
      一、项目介绍：
     </a>
    </p>
    <p id="%E4%BA%8C%E3%80%81%E6%96%87%E6%A1%A3%E8%B5%84%E6%96%99%EF%BC%9A-toc">
     <a href="#%E4%BA%8C%E3%80%81%E6%96%87%E6%A1%A3%E8%B5%84%E6%96%99%EF%BC%9A" rel="nofollow">
      二、文档学习资料：
     </a>
    </p>
    <p id="%E4%B8%89%E3%80%81%E6%A8%A1%E5%9D%97%E6%88%AA%E5%9B%BE%EF%BC%9A-toc">
     <a href="#%E4%B8%89%E3%80%81%E6%A8%A1%E5%9D%97%E6%88%AA%E5%9B%BE%EF%BC%9A" rel="nofollow">
      三、模块截图：
     </a>
    </p>
    <p id="%E5%9B%9B%E3%80%81%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%8F%8A%E5%B7%A5%E5%85%B7%EF%BC%9A-toc">
     <a href="#%E5%9B%9B%E3%80%81%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%8F%8A%E5%B7%A5%E5%85%B7%EF%BC%9A" rel="nofollow">
      四、开发技术与运行环境：
     </a>
    </p>
    <p id="%E4%BA%94%E3%80%81%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA%EF%BC%9A-toc">
     <a href="#%E4%BA%94%E3%80%81%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA%EF%BC%9A" rel="nofollow">
      五、代码展示：
     </a>
    </p>
    <p id="%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%88%AA%E5%9B%BE%EF%BC%9A-toc">
     <a href="#%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%88%AA%E5%9B%BE%EF%BC%9A" rel="nofollow">
      六、数据库表截图：
     </a>
    </p>
    <p>
    </p>
    <hr/>
    <blockquote>
     <h2>
      <strong>
       该项目含有源码、文档、PPT、图文修改教程、配套开发软件、软件安装教程、项目发布教程、相关文档模板等学习内容。
      </strong>
     </h2>
    </blockquote>
    <hr/>
    <p>
    </p>
    <h2 id="%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%EF%BC%9A">
     一、项目介绍：
    </h2>
    <p>
     课题背景
     <br/>
     酒店行业的发展需求：随着旅游业的蓬勃发展以及人们出行需求的不断增加，酒店行业的规模日益扩大。大量的旅客在出行前需要预订酒店客房，而传统的预订方式往往效率低下且容易出错。酒店需要处理海量的客房信息、客户预订信息以及员工管理等事务，手工操作或者简单的办公软件已经难以满足需求。
     <br/>
     传统管理模式的局限性：传统的人工管理方式效率低下，容易出现错误，且难以进行数据分析和决策支持。例如，一家大型酒店可能拥有多种类型的客房，不同的价格、设施等，面对众多的预订请求，很难准确、快速地进行处理。
     <br/>
     技术发展的推动：在当今数字化时代，计算机技术广泛应用于各个领域，互联网的普及使得在线预订成为一种趋势。Python作为一种功能强大的编程语言，凭借其易读性、灵活性和丰富的库支持，成为了开发此类系统的理想选择。
    </p>
    <p>
     课题意义
     <br/>
     提高酒店运营效率：该系统能够自动化地处理客房预订流程，减少人工操作可能带来的错误，实现酒店资源的合理配置。例如，通过系统可以更合理地安排客房资源，通过对客房预订、入住信息等的管理，减少客房闲置，提高客房出租率，增加收益。
     <br/>
     提升客户体验：为客户提供便捷的预订渠道，他们可以随时随地查询客房、餐饮信息并进行预订。同时，系统还可以提供个性化推荐、智能客服等服务，提升客户满意度。
     <br/>
     优化资源配置：通过数据分析，优化客房资源分配，提高资源利用率。例如，根据历史预订数据和市场趋势，合理安排客房的维护和装修时间，避免影响正常运营。
     <br/>
     丰富理论体系：本课题研究将对酒店管理相关理论基础进行深入剖析，进一步丰富酒店管理信息化的理论体系。同时，也将为软件工程理论在实际项目中的应用提供新的案例和思路。
     <br/>
     支持酒店数字化转型：随着信息技术的飞速发展，酒店管理已经从传统的人工管理模式逐步转向数字化、智能化的管理模式。该系统作为数字化管理的重要组成部分，为酒店业的数字化转型提供了有力支持。
    </p>
    <h2 id="%E4%BA%8C%E3%80%81%E6%96%87%E6%A1%A3%E8%B5%84%E6%96%99%EF%BC%9A">
     二、文档学习资料：
    </h2>
    <h2>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/c12055dc3c2a4aff8c570dcffcbb251a.png">
      <img alt="" src="https://i-blog.csdnimg.cn/direct/45cd788b8770470badbd839fc283ded7.png"/>
     </img>
    </h2>
    <h2 id="%E4%B8%89%E3%80%81%E6%A8%A1%E5%9D%97%E6%88%AA%E5%9B%BE%EF%BC%9A">
     三、模块截图：
    </h2>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/64e93837ba3f433492d170e3a5247e0f.png">
      <img alt="" src="https://i-blog.csdnimg.cn/direct/a403a381960f47cfa930222b1f1aaf8e.png">
       <img alt="" src="https://i-blog.csdnimg.cn/direct/32c38c6d080e4fdfbaa078261727ff0d.png">
        <img alt="" src="https://i-blog.csdnimg.cn/direct/5e8a497055194ee594f4d66539c73d28.png">
         <img alt="" src="https://i-blog.csdnimg.cn/direct/46e4a1c817e24b5a9010c4b487402f4f.png">
          <img alt="" src="https://i-blog.csdnimg.cn/direct/823068571a64496986e39534f1ee170c.png"/>
          <img alt="" src="https://i-blog.csdnimg.cn/direct/02b7dd2d154a4f5da6908f5fd032a9a1.png"/>
         </img>
        </img>
       </img>
      </img>
     </img>
    </p>
    <h2 id="%E5%9B%9B%E3%80%81%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%8F%8A%E5%B7%A5%E5%85%B7%EF%BC%9A">
     <strong>
      四、开发技术与运行环境
     </strong>
     <strong>
      ：
     </strong>
    </h2>
    <p>
     后端技术栈：
    </p>
    <ul>
     <li>
      Spring Boot：使用Spring Boot作为后端框架，简化开发流程，提供快速开发的能力。
     </li>
     <li>
      Spring Security：用于实现用户认证和授权功能，保护系统的安全性。
     </li>
     <li>
      Spring Data JPA：用于简化对数据库的操作，提供CRUD功能。
     </li>
     <li>
      MySQL：作为数据库存储管理平台的数据。
     </li>
     <li>
      MyBatis-Plus：MyBatis-Plus 主要负责处理数据库操作，提高数据库操作的便捷性和效率。
     </li>
    </ul>
    <p>
     前端技术栈：
    </p>
    <ul>
     <li>
      Vue.js：使用Vue.js作为前端框架，实现组件化开发，提高开发效率。
     </li>
     <li>
      Vue Router：用于实现前端路由功能，实现单页应用的页面跳转。
     </li>
     <li>
      Vuex：用于实现前端状态管理，统一管理应用的状态。
     </li>
     <li>
      Element UI：使用Element UI作为UI组件库，提供丰富的UI组件，加快开发速度。
     </li>
     <li>
      Axios：用于发送HTTP请求，与后端进行数据交互。
     </li>
     <li>
      HTML/CSS/JavaScript：用于构建系统的用户界面。HTML 负责网页的结构布局，CSS 负责样式设计，JavaScript 负责交互逻辑的实现。在系统中，这些技术用于实现前端页面的展示和交互功能，提高用户体验。
     </li>
    </ul>
    <p>
     其他技术：
    </p>
    <ul>
     <li>
      Maven：用于项目构建和依赖管理，简化项目的管理和部署。
     </li>
    </ul>
    <p>
     运行环境：
    </p>
    <p>
     1. 开发环境：
    </p>
    <p>
     IDE：如IDEA或eclipse，用于编码和调试。
    </p>
    <p>
     本地数据库：如MySQL，用于数据存储和查询。
    </p>
    <p>
     本地服务器：如Tomcat7.0，用于部署和运行Web应用。
    </p>
    <h2 id="%E4%BA%94%E3%80%81%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA%EF%BC%9A">
     <strong>
      五、代码展示（示范代码注释）：
     </strong>
    </h2>
    <pre><code class="language-java">/**
 * 用户
 * 后端接口
 * @author
 * @email
*/
@RestController
@Controller
@RequestMapping("/yonghu")
public class YonghuController {
    private static final Logger logger = LoggerFactory.getLogger(YonghuController.class);

    private static final String TABLE_NAME = "yonghu";

    @Autowired
    private YonghuService yonghuService;


    @Autowired
    private TokenService tokenService;

    @Autowired
    private DictionaryService dictionaryService;//字典
    @Autowired
    private GonggaoService gonggaoService;//公告
    @Autowired
    private GuwenService guwenService;//顾问
    @Autowired
    private GuwenChatService guwenChatService;//用户咨询
    @Autowired
    private GuwenYuyueService guwenYuyueService;//顾问预约
    @Autowired
    private JiankangzhishiService jiankangzhishiService;//健康知识
    @Autowired
    private JiankangzhishiCollectionService jiankangzhishiCollectionService;//健康知识收藏
    @Autowired
    private JiankangzhishiLiuyanService jiankangzhishiLiuyanService;//健康知识留言
    @Autowired
    private UsersService usersService;//管理员


    /**
    * 后端列表
    */
    @RequestMapping("/page")
    public R page(@RequestParam Map&lt;String, Object&gt; params, HttpServletRequest request){
        logger.debug("page方法:,,Controller:{},,params:{}",this.getClass().getName(),JSONObject.toJSONString(params));
        String role = String.valueOf(request.getSession().getAttribute("role"));
        if(false)
            return R.error(511,"永不会进入");
        else if("用户".equals(role))
            params.put("yonghuId",request.getSession().getAttribute("userId"));
        else if("顾问".equals(role))
            params.put("guwenId",request.getSession().getAttribute("userId"));
        CommonUtil.checkMap(params);
        PageUtils page = yonghuService.queryPage(params);

        //字典表数据转换
        List&lt;YonghuView&gt; list =(List&lt;YonghuView&gt;)page.getList();
        for(YonghuView c:list){
            //修改对应字典表字段
            dictionaryService.dictionaryConvert(c, request);
        }
        return R.ok().put("data", page);
    }

    /**
    * 后端详情
    */
    @RequestMapping("/info/{id}")
    public R info(@PathVariable("id") Long id, HttpServletRequest request){
        logger.debug("info方法:,,Controller:{},,id:{}",this.getClass().getName(),id);
        YonghuEntity yonghu = yonghuService.selectById(id);
        if(yonghu !=null){
            //entity转view
            YonghuView view = new YonghuView();
            BeanUtils.copyProperties( yonghu , view );//把实体数据重构到view中
            //修改对应字典表字段
            dictionaryService.dictionaryConvert(view, request);
            return R.ok().put("data", view);
        }else {
            return R.error(511,"查不到数据");
        }

    }

    /**
    * 后端保存
    */
    @RequestMapping("/save")
    public R save(@RequestBody YonghuEntity yonghu, HttpServletRequest request){
        logger.debug("save方法:,,Controller:{},,yonghu:{}",this.getClass().getName(),yonghu.toString());

        String role = String.valueOf(request.getSession().getAttribute("role"));
        if(false)
            return R.error(511,"永远不会进入");

        Wrapper&lt;YonghuEntity&gt; queryWrapper = new EntityWrapper&lt;YonghuEntity&gt;()
            .eq("username", yonghu.getUsername())
            .or()
            .eq("yonghu_phone", yonghu.getYonghuPhone())
            .or()
            .eq("yonghu_id_number", yonghu.getYonghuIdNumber())
            ;

        logger.info("sql语句:"+queryWrapper.getSqlSegment());
        YonghuEntity yonghuEntity = yonghuService.selectOne(queryWrapper);
        if(yonghuEntity==null){
            yonghu.setCreateTime(new Date());
            yonghu.setPassword("123456");
            yonghuService.insert(yonghu);
            return R.ok();
        }else {
            return R.error(511,"账户或者用户手机号或者用户身份证号已经被使用");
        }
    }

    /**
    * 后端修改
    */
    @RequestMapping("/update")
    public R update(@RequestBody YonghuEntity yonghu, HttpServletRequest request) throws NoSuchFieldException, ClassNotFoundException, IllegalAccessException, InstantiationException {
        logger.debug("update方法:,,Controller:{},,yonghu:{}",this.getClass().getName(),yonghu.toString());
        YonghuEntity oldYonghuEntity = yonghuService.selectById(yonghu.getId());//查询原先数据

        String role = String.valueOf(request.getSession().getAttribute("role"));
//        if(false)
//            return R.error(511,"永远不会进入");
        if("".equals(yonghu.getYonghuPhoto()) || "null".equals(yonghu.getYonghuPhoto())){
                yonghu.setYonghuPhoto(null);
        }

            yonghuService.updateById(yonghu);//根据id更新
            return R.ok();
    }



    /**
    * 删除
    */
    @RequestMapping("/delete")
    public R delete(@RequestBody Integer[] ids, HttpServletRequest request){
        logger.debug("delete:,,Controller:{},,ids:{}",this.getClass().getName(),ids.toString());
        List&lt;YonghuEntity&gt; oldYonghuList =yonghuService.selectBatchIds(Arrays.asList(ids));//要删除的数据
        yonghuService.deleteBatchIds(Arrays.asList(ids));

        return R.ok();
    }


    /**
     * 批量上传
     */
    @RequestMapping("/batchInsert")
    public R save( String fileName, HttpServletRequest request){
        logger.debug("batchInsert方法:,,Controller:{},,fileName:{}",this.getClass().getName(),fileName);
        Integer yonghuId = Integer.valueOf(String.valueOf(request.getSession().getAttribute("userId")));
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        //.eq("time", new SimpleDateFormat("yyyy-MM-dd").format(new Date()))
        try {
            List&lt;YonghuEntity&gt; yonghuList = new ArrayList&lt;&gt;();//上传的东西
            Map&lt;String, List&lt;String&gt;&gt; seachFields= new HashMap&lt;&gt;();//要查询的字段
            Date date = new Date();
            int lastIndexOf = fileName.lastIndexOf(".");
            if(lastIndexOf == -1){
                return R.error(511,"该文件没有后缀");
            }else{
                String suffix = fileName.substring(lastIndexOf);
                if(!".xls".equals(suffix)){
                    return R.error(511,"只支持后缀为xls的excel文件");
                }else{
                    URL resource = this.getClass().getClassLoader().getResource("static/upload/" + fileName);//获取文件路径
                    File file = new File(resource.getFile());
                    if(!file.exists()){
                        return R.error(511,"找不到上传文件，请联系管理员");
                    }else{
                        List&lt;List&lt;String&gt;&gt; dataList = PoiUtil.poiImport(file.getPath());//读取xls文件
                        dataList.remove(0);//删除第一行，因为第一行是提示
                        for(List&lt;String&gt; data:dataList){
                            //循环
                            YonghuEntity yonghuEntity = new YonghuEntity();
//                            yonghuEntity.setUsername(data.get(0));                    //账户 要改的
//                            yonghuEntity.setPassword("123456");//密码
//                            yonghuEntity.setYonghuName(data.get(0));                    //用户姓名 要改的
//                            yonghuEntity.setYonghuPhone(data.get(0));                    //用户手机号 要改的
//                            yonghuEntity.setYonghuIdNumber(data.get(0));                    //用户身份证号 要改的
//                            yonghuEntity.setYonghuPhoto("");//详情和图片
//                            yonghuEntity.setSexTypes(Integer.valueOf(data.get(0)));   //性别 要改的
//                            yonghuEntity.setYonghuEmail(data.get(0));                    //用户邮箱 要改的
//                            yonghuEntity.setCreateTime(date);//时间
                            yonghuList.add(yonghuEntity);


                            //把要查询是否重复的字段放入map中
                                //账户
                                if(seachFields.containsKey("username")){
                                    List&lt;String&gt; username = seachFields.get("username");
                                    username.add(data.get(0));//要改的
                                }else{
                                    List&lt;String&gt; username = new ArrayList&lt;&gt;();
                                    username.add(data.get(0));//要改的
                                    seachFields.put("username",username);
                                }
                                //用户手机号
                                if(seachFields.containsKey("yonghuPhone")){
                                    List&lt;String&gt; yonghuPhone = seachFields.get("yonghuPhone");
                                    yonghuPhone.add(data.get(0));//要改的
                                }else{
                                    List&lt;String&gt; yonghuPhone = new ArrayList&lt;&gt;();
                                    yonghuPhone.add(data.get(0));//要改的
                                    seachFields.put("yonghuPhone",yonghuPhone);
                                }
                                //用户身份证号
                                if(seachFields.containsKey("yonghuIdNumber")){
                                    List&lt;String&gt; yonghuIdNumber = seachFields.get("yonghuIdNumber");
                                    yonghuIdNumber.add(data.get(0));//要改的
                                }else{
                                    List&lt;String&gt; yonghuIdNumber = new ArrayList&lt;&gt;();
                                    yonghuIdNumber.add(data.get(0));//要改的
                                    seachFields.put("yonghuIdNumber",yonghuIdNumber);
                                }
                        }

                        //查询是否重复
                         //账户
                        List&lt;YonghuEntity&gt; yonghuEntities_username = yonghuService.selectList(new EntityWrapper&lt;YonghuEntity&gt;().in("username", seachFields.get("username")));
                        if(yonghuEntities_username.size() &gt;0 ){
                            ArrayList&lt;String&gt; repeatFields = new ArrayList&lt;&gt;();
                            for(YonghuEntity s:yonghuEntities_username){
                                repeatFields.add(s.getUsername());
                            }
                            return R.error(511,"数据库的该表中的 [账户] 字段已经存在 存在数据为:"+repeatFields.toString());
                        }
                         //用户手机号
                        List&lt;YonghuEntity&gt; yonghuEntities_yonghuPhone = yonghuService.selectList(new EntityWrapper&lt;YonghuEntity&gt;().in("yonghu_phone", seachFields.get("yonghuPhone")));
                        if(yonghuEntities_yonghuPhone.size() &gt;0 ){
                            ArrayList&lt;String&gt; repeatFields = new ArrayList&lt;&gt;();
                            for(YonghuEntity s:yonghuEntities_yonghuPhone){
                                repeatFields.add(s.getYonghuPhone());
                            }
                            return R.error(511,"数据库的该表中的 [用户手机号] 字段已经存在 存在数据为:"+repeatFields.toString());
                        }
                         //用户身份证号
                        List&lt;YonghuEntity&gt; yonghuEntities_yonghuIdNumber = yonghuService.selectList(new EntityWrapper&lt;YonghuEntity&gt;().in("yonghu_id_number", seachFields.get("yonghuIdNumber")));
                        if(yonghuEntities_yonghuIdNumber.size() &gt;0 ){
                            ArrayList&lt;String&gt; repeatFields = new ArrayList&lt;&gt;();
                            for(YonghuEntity s:yonghuEntities_yonghuIdNumber){
                                repeatFields.add(s.getYonghuIdNumber());
                            }
                            return R.error(511,"数据库的该表中的 [用户身份证号] 字段已经存在 存在数据为:"+repeatFields.toString());
                        }
                        yonghuService.insertBatch(yonghuList);
                        return R.ok();
                    }
                }
            }
        }catch (Exception e){
            e.printStackTrace();
            return R.error(511,"批量插入数据异常，请联系管理员");
        }
    }

    /**
    * 登录
    */
    @IgnoreAuth
    @RequestMapping(value = "/login")
    public R login(String username, String password, String captcha, HttpServletRequest request) {
        YonghuEntity yonghu = yonghuService.selectOne(new EntityWrapper&lt;YonghuEntity&gt;().eq("username", username));
        if(yonghu==null || !yonghu.getPassword().equals(password))
            return R.error("账号或密码不正确");
        String token = tokenService.generateToken(yonghu.getId(),username, "yonghu", "用户");
        R r = R.ok();
        r.put("token", token);
        r.put("role","用户");
        r.put("username",yonghu.getYonghuName());
        r.put("tableName","yonghu");
        r.put("userId",yonghu.getId());
        return r;
    }

    /**
    * 注册
    */
    @IgnoreAuth
    @PostMapping(value = "/register")
    public R register(@RequestBody YonghuEntity yonghu, HttpServletRequest request) {
//    	ValidatorUtils.validateEntity(user);
        Wrapper&lt;YonghuEntity&gt; queryWrapper = new EntityWrapper&lt;YonghuEntity&gt;()
            .eq("username", yonghu.getUsername())
            .or()
            .eq("yonghu_phone", yonghu.getYonghuPhone())
            .or()
            .eq("yonghu_id_number", yonghu.getYonghuIdNumber())
            ;
        YonghuEntity yonghuEntity = yonghuService.selectOne(queryWrapper);
        if(yonghuEntity != null)
            return R.error("账户或者用户手机号或者用户身份证号已经被使用");
        yonghu.setCreateTime(new Date());
        yonghuService.insert(yonghu);

        return R.ok();
    }

    /**
     * 重置密码
     */
    @GetMapping(value = "/resetPassword")
    public R resetPassword(Integer  id, HttpServletRequest request) {
        YonghuEntity yonghu = yonghuService.selectById(id);
        yonghu.setPassword("123456");
        yonghuService.updateById(yonghu);
        return R.ok();
    }

	/**
	 * 修改密码
	 */
	@GetMapping(value = "/updatePassword")
	public R updatePassword(String  oldPassword, String  newPassword, HttpServletRequest request) {
        YonghuEntity yonghu = yonghuService.selectById((Integer)request.getSession().getAttribute("userId"));
		if(newPassword == null){
			return R.error("新密码不能为空") ;
		}
		if(!oldPassword.equals(yonghu.getPassword())){
			return R.error("原密码输入错误");
		}
		if(newPassword.equals(yonghu.getPassword())){
			return R.error("新密码不能和原密码一致") ;
		}
        yonghu.setPassword(newPassword);
		yonghuService.updateById(yonghu);
		return R.ok();
	}



    /**
     * 忘记密码
     */
    @IgnoreAuth
    @RequestMapping(value = "/resetPass")
    public R resetPass(String username, HttpServletRequest request) {
        YonghuEntity yonghu = yonghuService.selectOne(new EntityWrapper&lt;YonghuEntity&gt;().eq("username", username));
        if(yonghu!=null){
            yonghu.setPassword("123456");
            yonghuService.updateById(yonghu);
            return R.ok();
        }else{
           return R.error("账号不存在");
        }
    }


    /**
    * 获取用户的session用户信息
    */
    @RequestMapping("/session")
    public R getCurrYonghu(HttpServletRequest request){
        Integer id = (Integer)request.getSession().getAttribute("userId");
        YonghuEntity yonghu = yonghuService.selectById(id);
        if(yonghu !=null){
            //entity转view
            YonghuView view = new YonghuView();
            BeanUtils.copyProperties( yonghu , view );//把实体数据重构到view中

            //修改对应字典表字段
            dictionaryService.dictionaryConvert(view, request);
            return R.ok().put("data", view);
        }else {
            return R.error(511,"查不到数据");
        }
    }


    /**
    * 退出
    */
    @GetMapping(value = "logout")
    public R logout(HttpServletRequest request) {
        request.getSession().invalidate();
        return R.ok("退出成功");
    }



    /**
    * 前端列表
    */
    @IgnoreAuth
    @RequestMapping("/list")
    public R list(@RequestParam Map&lt;String, Object&gt; params, HttpServletRequest request){
        logger.debug("list方法:,,Controller:{},,params:{}",this.getClass().getName(),JSONObject.toJSONString(params));

        CommonUtil.checkMap(params);
        PageUtils page = yonghuService.queryPage(params);

        //字典表数据转换
        List&lt;YonghuView&gt; list =(List&lt;YonghuView&gt;)page.getList();
        for(YonghuView c:list)
            dictionaryService.dictionaryConvert(c, request); //修改对应字典表字段

        return R.ok().put("data", page);
    }

    /**
    * 前端详情
    */
    @RequestMapping("/detail/{id}")
    public R detail(@PathVariable("id") Long id, HttpServletRequest request){
        logger.debug("detail方法:,,Controller:{},,id:{}",this.getClass().getName(),id);
        YonghuEntity yonghu = yonghuService.selectById(id);
            if(yonghu !=null){


                //entity转view
                YonghuView view = new YonghuView();
                BeanUtils.copyProperties( yonghu , view );//把实体数据重构到view中

                //修改对应字典表字段
                dictionaryService.dictionaryConvert(view, request);
                return R.ok().put("data", view);
            }else {
                return R.error(511,"查不到数据");
            }
    }


    /**
    * 前端保存
    */
    @RequestMapping("/add")
    public R add(@RequestBody YonghuEntity yonghu, HttpServletRequest request){
        logger.debug("add方法:,,Controller:{},,yonghu:{}",this.getClass().getName(),yonghu.toString());
        Wrapper&lt;YonghuEntity&gt; queryWrapper = new EntityWrapper&lt;YonghuEntity&gt;()
            .eq("username", yonghu.getUsername())
            .or()
            .eq("yonghu_phone", yonghu.getYonghuPhone())
            .or()
            .eq("yonghu_id_number", yonghu.getYonghuIdNumber())
//            .notIn("yonghu_types", new Integer[]{102})
            ;
        logger.info("sql语句:"+queryWrapper.getSqlSegment());
        YonghuEntity yonghuEntity = yonghuService.selectOne(queryWrapper);
        if(yonghuEntity==null){
            yonghu.setCreateTime(new Date());
            yonghu.setPassword("123456");
        yonghuService.insert(yonghu);

            return R.ok();
        }else {
            return R.error(511,"账户或者用户手机号或者用户身份证号已经被使用");
        }
    }

}</code></pre>
    <h2 id="%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%88%AA%E5%9B%BE%EF%BC%9A">
     <strong>
      六、数据库表截图（示范表注释）：
     </strong>
    </h2>
    <p>
     ​​​
     <img alt="" src="https://i-blog.csdnimg.cn/direct/ad734c5bb30440159cd9f8ff7314af4f.png"/>
    </p>
    <h2 id="%E4%BA%94%E3%80%81%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8E%E4%BF%AE%E6%94%B9%EF%BC%9A%E5%8C%85%E8%B0%83%E8%AF%95%2B%E5%9B%BE%E6%96%87%E4%BF%AE%E6%94%B9">
     七、配套学习资料
     <img alt="" height="182" src="https://img-blog.csdnimg.cn/224b1fdd802847cb8b27849855310c30.png" width="818"/>
    </h2>
    <h2 id="%E5%85%AD%E3%80%81%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8E%E4%BF%AE%E6%94%B9%EF%BC%9A%E5%8C%85%E8%B0%83%E8%AF%95%2B%E6%8C%87%E5%AF%BC%E5%9B%BE%E6%96%87%E4%BF%AE%E6%94%B9">
    </h2>
    <p>
    </p>
    <h2>
    </h2>
    <p>
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34313931353131302f:61727469636c652f64657461696c732f313436313134333637" class_="artid" style="display:none">
 </p>
</div>


