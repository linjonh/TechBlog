---
layout: post
title: "从零开始用HTMLCSS和JavaScript制作贪吃蛇网页小游戏"
date: 2025-03-07 21:51:10 +0800
description: "从零开始用HTML、CSS和JavaScript制作贪吃蛇网页小游戏"
keywords: "好的!以下是一个简单的贪吃蛇游戏代码示例,使用 html、css 和 javascript 实"
categories: ['项目探索实验室']
tags: ['贪吃蛇游戏', 'Web', 'Javascript', 'Html', 'Css']
artid: "146104864"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146104864
    alt: "从零开始用HTMLCSS和JavaScript制作贪吃蛇网页小游戏"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146104864
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146104864
cover: https://bing.ee123.net/img/rand?artid=146104864
image: https://bing.ee123.net/img/rand?artid=146104864
img: https://bing.ee123.net/img/rand?artid=146104864
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     从零开始用HTML、CSS和JavaScript制作贪吃蛇网页小游戏
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     〇、前言
    </h3>
    <p>
     <strong>
      贪吃蛇
     </strong>
     是一款
     <strong>
      经典的休闲游戏
     </strong>
     ，在诺基亚手机时代风靡全球。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6dd9c0d7ad4c40a48de6b3263e30ad42.png"/>
    </p>
    <p>
     <strong>
      作为编程入门者，实现一个贪吃蛇游戏是学习Web前端技术的绝佳练习
     </strong>
     。
    </p>
    <blockquote>
     <p>
      <strong>
       名人说：博观而约取，厚积而薄发。——苏轼《稼说送张琥》
      </strong>
      <br/>
      <strong>
       创作者：
       <a href="https://blog.csdn.net/qq_51646682?type=lately">
        Code_流苏(CSDN)
       </a>
      </strong>
      （一个喜欢古诗词和编程的Coder😊）
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      很高兴你打开了这篇博客，更多好用的软件工具，请关注我、订阅专栏《项目探索实验室》，内容持续更新中…
     </p>
    </blockquote>
    <p>
     <strong>
      思维速览：
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c2b6d66a92f24fc3b5daa99ded97eed0.png"/>
    </p>
    <p>
     本文将
     <strong>
      详细讲解如何使用HTML、CSS和JavaScript从零开始创建一个功能完整的贪吃蛇网页游戏（更多功能可以根据个人开发需求拓展）
     </strong>
     。
    </p>
    <p>
     <strong>
      我们的贪吃蛇游戏将包含以下功能：
     </strong>
    </p>
    <ul>
     <li>
      基础的游戏逻辑（移动、吃食物、碰撞检测）
     </li>
     <li>
      分数记录和最高分保存
     </li>
     <li>
      游戏控制（开始、暂停、继续）
     </li>
     <li>
      自适应界面设计（支持PC和移动设备）
     </li>
     <li>
      逐步提高的游戏难度
     </li>
    </ul>
    <h3>
     <a id="_33">
     </a>
     效果预览
    </h3>
    <p>
     ▍
     <strong>
      1️⃣静态展示：
     </strong>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2d638fab06e04717a3b5146cde26663c.png"/>
    </p>
    <p>
     ▍
     <strong>
      2️⃣动态展示：
     </strong>
    </p>
    <p>
     <img alt="请添加图片描述" src="https://i-blog.csdnimg.cn/direct/3ea427ee967447acad4dbba3ca8ea750.gif"/>
    </p>
    <p>
     <strong>
      完成后的游戏效果如下：
     </strong>
    </p>
    <ul>
     <li>
      一个20x20格子的游戏场地
     </li>
     <li>
      绿色的蛇，红色的食物
     </li>
     <li>
      顶部显示当前分数和历史最高分
     </li>
     <li>
      底部有游戏控制按钮和移动设备专用的方向控制键
     </li>
    </ul>
    <h3>
     <a id="HTML_53">
     </a>
     一、HTML结构
    </h3>
    <p>
     首先，创建基本的HTML结构：
    </p>
    <pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>贪吃蛇小游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- CSS将在这里添加 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>贪吃蛇小游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>game-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>game-header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>分数: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>score<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>最高分: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>high-score<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>game-board<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>controls<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start-button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>开始游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mobile-controls<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>up<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>↑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>←<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>→<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>down<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>↓<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- JavaScript将在这里添加 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     这个HTML结构包含了：
    </p>
    <ul>
     <li>
      游戏标题
     </li>
     <li>
      分数和最高分显示区域
     </li>
     <li>
      游戏主画布（game-board）
     </li>
     <li>
      游戏控制按钮
     </li>
     <li>
      移动设备的方向控制按钮
     </li>
    </ul>
    <h3>
     <a id="CSS_101">
     </a>
     二、CSS样式设计
    </h3>
    <p>
     接下来，我们需要添加CSS样式，使游戏看起来更加美观：
    </p>
    <pre><code class="prism language-css"><span class="token selector">&lt;style&gt;
    body</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f0f0<span class="token punctuation">;</span>
        <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.game-container</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.game-header</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">#game-board</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #333<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.snake-part</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #4CAF50<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.snake-head</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #388E3C<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.food</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #F44336<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.controls</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">button</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px 20px<span class="token punctuation">;</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #2196F3<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">button:hover</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> #0b7dda<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.mobile-controls</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
        <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 1fr 1fr 1fr<span class="token punctuation">;</span>
        <span class="token property">grid-template-rows</span><span class="token punctuation">:</span> 1fr 1fr 1fr<span class="token punctuation">;</span>
        <span class="token property">gap</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">max-width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.mobile-controls button</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.up</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">grid-column</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
        <span class="token property">grid-row</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.left</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">grid-column</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">grid-row</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.right</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">grid-column</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
        <span class="token property">grid-row</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.down</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">grid-column</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
        <span class="token property">grid-row</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">)</span></span> <span class="token punctuation">{<!-- --></span>
        <span class="token selector">#game-board</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.game-header</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
&lt;/style&gt;
</code></pre>
    <p>
     这些CSS样式：
    </p>
    <ul>
     <li>
      使用Flexbox和Grid布局
     </li>
     <li>
      设计蛇和食物的外观
     </li>
     <li>
      美化按钮和控件
     </li>
     <li>
      添加响应式设计，适应不同屏幕尺寸
     </li>
    </ul>
    <h3>
     <a id="JavaScript_234">
     </a>
     三、JavaScript游戏逻辑
    </h3>
    <p>
     最后，也是最重要的部分，我们需要实现游戏的核心逻辑：
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 游戏变量</span>
        <span class="token keyword">const</span> boardSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 20x20 格子</span>
        <span class="token keyword">const</span> gridSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 每个格子的大小（像素）</span>
        <span class="token keyword">const</span> board <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'game-board'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> scoreElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'score'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> highScoreElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'high-score'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> startButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'start-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">let</span> snake <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 蛇的身体部分坐标</span>
        <span class="token keyword">let</span> food <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 食物坐标</span>
        <span class="token keyword">let</span> direction <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span> <span class="token comment">// 初始方向</span>
        <span class="token keyword">let</span> nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> gameInterval <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> highScore <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'snakeHighScore'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> gameSpeed <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span> <span class="token comment">// 游戏速度，毫秒</span>
        <span class="token keyword">let</span> gameStarted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        
        highScoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> highScore<span class="token punctuation">;</span>
        
        <span class="token comment">// 初始化游戏</span>
        <span class="token keyword">function</span> <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 初始化蛇</span>
            snake <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 头部</span>
                <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 重置游戏状态</span>
            direction <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
            nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
            score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            scoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> score<span class="token punctuation">;</span>
            
            <span class="token comment">// 生成第一个食物</span>
            <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 渲染初始状态</span>
            <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 清空游戏板</span>
        <span class="token keyword">function</span> <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            board<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 生成食物</span>
        <span class="token keyword">function</span> <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">let</span> foodPosition<span class="token punctuation">;</span>
            <span class="token keyword">let</span> onSnake<span class="token punctuation">;</span>
            
            <span class="token keyword">do</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 随机生成食物位置</span>
                foodPosition <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">x</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> boardSize<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">y</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> boardSize<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 检查食物是否与蛇重叠</span>
                onSnake <span class="token operator">=</span> snake<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">part</span> <span class="token operator">=&gt;</span> part<span class="token punctuation">.</span>x <span class="token operator">===</span> foodPosition<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> part<span class="token punctuation">.</span>y <span class="token operator">===</span> foodPosition<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>onSnake<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            food <span class="token operator">=</span> foodPosition<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 渲染蛇</span>
        <span class="token keyword">function</span> <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            snake<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">part<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">const</span> snakePart <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                snakePart<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'snake-part'</span><span class="token punctuation">;</span>
                
                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    snakePart<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'snake-head'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                snakePart<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>part<span class="token punctuation">.</span>x <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                snakePart<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>part<span class="token punctuation">.</span>y <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                
                board<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>snakePart<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 渲染食物</span>
        <span class="token keyword">function</span> <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> foodElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            foodElement<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'food'</span><span class="token punctuation">;</span>
            foodElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>food<span class="token punctuation">.</span>x <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            foodElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>food<span class="token punctuation">.</span>y <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            
            board<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>foodElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 移动蛇</span>
        <span class="token keyword">function</span> <span class="token function">moveSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 更新方向</span>
            direction <span class="token operator">=</span> nextDirection<span class="token punctuation">;</span>
            
            <span class="token comment">// 获取蛇头的当前位置</span>
            <span class="token keyword">const</span> head <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span>snake<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 根据方向移动蛇头</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">case</span> <span class="token string">'up'</span><span class="token operator">:</span>
                    head<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'down'</span><span class="token operator">:</span>
                    head<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'left'</span><span class="token operator">:</span>
                    head<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'right'</span><span class="token operator">:</span>
                    head<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 检查碰撞</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">checkCollision</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">gameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 将新头部添加到蛇的开始</span>
            snake<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 检查是否吃到食物</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>x <span class="token operator">===</span> food<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> head<span class="token punctuation">.</span>y <span class="token operator">===</span> food<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 吃到食物，增加分数</span>
                score <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
                scoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> score<span class="token punctuation">;</span>
                
                <span class="token comment">// 更新最高分</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>score <span class="token operator">&gt;</span> highScore<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    highScore <span class="token operator">=</span> score<span class="token punctuation">;</span>
                    highScoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> highScore<span class="token punctuation">;</span>
                    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'snakeHighScore'</span><span class="token punctuation">,</span> highScore<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">// 生成新食物</span>
                <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 增加游戏速度</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>gameSpeed <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    gameSpeed <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                    <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 没吃到食物，移除蛇尾</span>
                snake<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 重新渲染游戏</span>
            <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 检查碰撞</span>
        <span class="token keyword">function</span> <span class="token function">checkCollision</span><span class="token punctuation">(</span><span class="token parameter">head</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 检查墙壁碰撞</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> boardSize <span class="token operator">||</span> head<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>y <span class="token operator">&gt;=</span> boardSize<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 检查自身碰撞</span>
            <span class="token keyword">return</span> snake<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">part<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 跳过第一个元素，因为它就是头部</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> part<span class="token punctuation">.</span>x <span class="token operator">===</span> head<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> part<span class="token punctuation">.</span>y <span class="token operator">===</span> head<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 游戏结束</span>
        <span class="token keyword">function</span> <span class="token function">gameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">游戏结束! 你的得分: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>score<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gameStarted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'开始游戏'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 游戏循环</span>
        <span class="token keyword">function</span> <span class="token function">gameLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">moveSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 开始游戏</span>
        <span class="token keyword">function</span> <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>gameStarted<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 如果游戏已经开始，暂停或继续</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>gamePaused<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 继续游戏</span>
                    gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'暂停游戏'</span><span class="token punctuation">;</span>
                    gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 暂停游戏</span>
                    <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'继续游戏'</span><span class="token punctuation">;</span>
                    gamePaused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 开始新游戏</span>
                <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                gameStarted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'暂停游戏'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 处理键盘输入</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gameStarted <span class="token operator">||</span> gamePaused<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 防止方向键引起页面滚动</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'ArrowUp'</span><span class="token punctuation">,</span> <span class="token string">'ArrowDown'</span><span class="token punctuation">,</span> <span class="token string">'ArrowLeft'</span><span class="token punctuation">,</span> <span class="token string">'ArrowRight'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 更新方向</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">case</span> <span class="token string">'ArrowUp'</span><span class="token operator">:</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'down'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'up'</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'ArrowDown'</span><span class="token operator">:</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'up'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'down'</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'ArrowLeft'</span><span class="token operator">:</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'right'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'ArrowRight'</span><span class="token operator">:</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'left'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 移动设备控制按钮</span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.up'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'down'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'up'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.down'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'up'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'down'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.left'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'right'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.right'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'left'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 开始游戏按钮</span>
        startButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> startGame<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 初始化游戏</span>
        <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
    <h3>
     <a id="_509">
     </a>
     四、代码详解
    </h3>
    <h4>
     <a id="1__511">
     </a>
     1. 游戏初始化
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 初始化蛇</span>
    snake <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 头部</span>
        <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 重置游戏状态</span>
    direction <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
    nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
    score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    scoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> score<span class="token punctuation">;</span>
    
    <span class="token comment">// 生成第一个食物</span>
    <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 渲染初始状态</span>
    <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这个函数负责：
    </p>
    <ul>
     <li>
      清空游戏板
     </li>
     <li>
      创建初始长度为3的蛇
     </li>
     <li>
      重置方向和分数
     </li>
     <li>
      生成食物
     </li>
     <li>
      渲染初始游戏状态
     </li>
    </ul>
    <h4>
     <a id="2__546">
     </a>
     2. 生成食物
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> foodPosition<span class="token punctuation">;</span>
    <span class="token keyword">let</span> onSnake<span class="token punctuation">;</span>
    
    <span class="token keyword">do</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 随机生成食物位置</span>
        foodPosition <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">x</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> boardSize<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">y</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> boardSize<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 检查食物是否与蛇重叠</span>
        onSnake <span class="token operator">=</span> snake<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">part</span> <span class="token operator">=&gt;</span> part<span class="token punctuation">.</span>x <span class="token operator">===</span> foodPosition<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> part<span class="token punctuation">.</span>y <span class="token operator">===</span> foodPosition<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>onSnake<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    food <span class="token operator">=</span> foodPosition<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这个函数：
    </p>
    <ul>
     <li>
      随机生成食物的位置
     </li>
     <li>
      确保食物不会出现在蛇身上
     </li>
     <li>
      使用do-while循环直到找到合适的位置
     </li>
    </ul>
    <h4>
     <a id="3__573">
     </a>
     3. 移动蛇
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">moveSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 更新方向</span>
    direction <span class="token operator">=</span> nextDirection<span class="token punctuation">;</span>
    
    <span class="token comment">// 获取蛇头的当前位置</span>
    <span class="token keyword">const</span> head <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span>snake<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 根据方向移动蛇头</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token string">'up'</span><span class="token operator">:</span>
            head<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'down'</span><span class="token operator">:</span>
            head<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'left'</span><span class="token operator">:</span>
            head<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'right'</span><span class="token operator">:</span>
            head<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 检查碰撞</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">checkCollision</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">gameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 将新头部添加到蛇的开始</span>
    snake<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 检查是否吃到食物</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>x <span class="token operator">===</span> food<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> head<span class="token punctuation">.</span>y <span class="token operator">===</span> food<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 吃到食物，增加分数</span>
        score <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        scoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> score<span class="token punctuation">;</span>
        
        <span class="token comment">// 更新最高分</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>score <span class="token operator">&gt;</span> highScore<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            highScore <span class="token operator">=</span> score<span class="token punctuation">;</span>
            highScoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> highScore<span class="token punctuation">;</span>
            localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'snakeHighScore'</span><span class="token punctuation">,</span> highScore<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// 生成新食物</span>
        <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 增加游戏速度</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>gameSpeed <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            gameSpeed <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
            gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 没吃到食物，移除蛇尾</span>
        snake<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 重新渲染游戏</span>
    <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这个函数是游戏的核心，它：
    </p>
    <ul>
     <li>
      根据当前方向移动蛇头
     </li>
     <li>
      检查是否发生碰撞
     </li>
     <li>
      如果吃到食物，增加分数，生成新食物，加快游戏速度
     </li>
     <li>
      如果没吃到食物，移除蛇尾（保持长度不变）
     </li>
     <li>
      更新游戏界面
     </li>
    </ul>
    <h4>
     <a id="4__649">
     </a>
     4. 碰撞检测
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">checkCollision</span><span class="token punctuation">(</span><span class="token parameter">head</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 检查墙壁碰撞</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> boardSize <span class="token operator">||</span> head<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>y <span class="token operator">&gt;=</span> boardSize<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 检查自身碰撞</span>
    <span class="token keyword">return</span> snake<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">part<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 跳过第一个元素，因为它就是头部</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> part<span class="token punctuation">.</span>x <span class="token operator">===</span> head<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> part<span class="token punctuation">.</span>y <span class="token operator">===</span> head<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这个函数检查两种碰撞情况：
    </p>
    <ul>
     <li>
      蛇头撞到墙壁（超出游戏边界）
     </li>
     <li>
      蛇头撞到自己的身体
     </li>
    </ul>
    <h4>
     <a id="5__671">
     </a>
     5. 游戏控制
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>gameStarted<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果游戏已经开始，暂停或继续</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>gamePaused<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 继续游戏</span>
            gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
            startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'暂停游戏'</span><span class="token punctuation">;</span>
            gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 暂停游戏</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
            startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'继续游戏'</span><span class="token punctuation">;</span>
            gamePaused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 开始新游戏</span>
        <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameStarted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'暂停游戏'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这个函数处理游戏的控制逻辑：
    </p>
    <ul>
     <li>
      开始新游戏
     </li>
     <li>
      暂停正在进行的游戏
     </li>
     <li>
      继续已暂停的游戏
     </li>
    </ul>
    <h3>
     <a id="_704">
     </a>
     五、完整代码
    </h3>
    <p>
     <strong>
      最后，我们将上面的HTML、CSS和JavaScript代码合并，得到完整的贪吃蛇游戏
     </strong>
     ：
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!--创作者：Code_流苏（CSDN）--&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>贪吃蛇小游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">body</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
            <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
            <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f0f0<span class="token punctuation">;</span>
            <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.game-container</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
            <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
            <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.game-header</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
            <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
            <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">#game-board</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #333<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.snake-part</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #4CAF50<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.snake-head</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #388E3C<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.food</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #F44336<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.controls</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
            <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
            <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">button</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 10px 20px<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #2196F3<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">button:hover</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #0b7dda<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.mobile-controls</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
            <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 1fr 1fr 1fr<span class="token punctuation">;</span>
            <span class="token property">grid-template-rows</span><span class="token punctuation">:</span> 1fr 1fr 1fr<span class="token punctuation">;</span>
            <span class="token property">gap</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
            <span class="token property">max-width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.mobile-controls button</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.up</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">grid-column</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
            <span class="token property">grid-row</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.left</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">grid-column</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
            <span class="token property">grid-row</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.right</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">grid-column</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
            <span class="token property">grid-row</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token selector">.down</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">grid-column</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
            <span class="token property">grid-row</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">)</span></span> <span class="token punctuation">{<!-- --></span>
            <span class="token selector">#game-board</span> <span class="token punctuation">{<!-- --></span>
                <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
                <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token selector">.game-header</span> <span class="token punctuation">{<!-- --></span>
                <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>贪吃蛇小游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>game-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>game-header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>分数: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>score<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>最高分: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>high-score<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>game-board<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>controls<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start-button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>开始游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mobile-controls<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>up<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>↑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>←<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>→<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>down<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>↓<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 游戏变量</span>
            <span class="token keyword">const</span> boardSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 20x20 格子</span>
            <span class="token keyword">const</span> gridSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 每个格子的大小（像素）</span>
            <span class="token keyword">const</span> board <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'game-board'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> scoreElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'score'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> highScoreElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'high-score'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> startButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'start-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">let</span> snake <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 蛇的身体部分坐标</span>
            <span class="token keyword">let</span> food <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 食物坐标</span>
            <span class="token keyword">let</span> direction <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span> <span class="token comment">// 初始方向</span>
            <span class="token keyword">let</span> nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> gameInterval <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> highScore <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'snakeHighScore'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> gameSpeed <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span> <span class="token comment">// 游戏速度，毫秒</span>
            <span class="token keyword">let</span> gameStarted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            
            highScoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> highScore<span class="token punctuation">;</span>
            
            <span class="token comment">// 初始化游戏</span>
            <span class="token keyword">function</span> <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 初始化蛇</span>
                snake <span class="token operator">=</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 头部</span>
                    <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
                <span class="token punctuation">]</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 重置游戏状态</span>
                direction <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
                nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
                score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                scoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> score<span class="token punctuation">;</span>
                
                <span class="token comment">// 生成第一个食物</span>
                <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 渲染初始状态</span>
                <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 清空游戏板</span>
            <span class="token keyword">function</span> <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                board<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 生成食物</span>
            <span class="token keyword">function</span> <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">let</span> foodPosition<span class="token punctuation">;</span>
                <span class="token keyword">let</span> onSnake<span class="token punctuation">;</span>
                
                <span class="token keyword">do</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 随机生成食物位置</span>
                    foodPosition <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token literal-property property">x</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> boardSize<span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">y</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> boardSize<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    
                    <span class="token comment">// 检查食物是否与蛇重叠</span>
                    onSnake <span class="token operator">=</span> snake<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">part</span> <span class="token operator">=&gt;</span> part<span class="token punctuation">.</span>x <span class="token operator">===</span> foodPosition<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> part<span class="token punctuation">.</span>y <span class="token operator">===</span> foodPosition<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>onSnake<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                food <span class="token operator">=</span> foodPosition<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 渲染蛇</span>
            <span class="token keyword">function</span> <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                snake<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">part<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">const</span> snakePart <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    snakePart<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'snake-part'</span><span class="token punctuation">;</span>
                    
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        snakePart<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'snake-head'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    
                    snakePart<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>part<span class="token punctuation">.</span>x <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                    snakePart<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>part<span class="token punctuation">.</span>y <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                    
                    board<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>snakePart<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 渲染食物</span>
            <span class="token keyword">function</span> <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">const</span> foodElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                foodElement<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'food'</span><span class="token punctuation">;</span>
                foodElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>food<span class="token punctuation">.</span>x <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                foodElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>food<span class="token punctuation">.</span>y <span class="token operator">*</span> gridSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                
                board<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>foodElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 移动蛇</span>
            <span class="token keyword">function</span> <span class="token function">moveSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 更新方向</span>
                direction <span class="token operator">=</span> nextDirection<span class="token punctuation">;</span>
                
                <span class="token comment">// 获取蛇头的当前位置</span>
                <span class="token keyword">const</span> head <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span>snake<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 根据方向移动蛇头</span>
                <span class="token keyword">switch</span> <span class="token punctuation">(</span>direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">case</span> <span class="token string">'up'</span><span class="token operator">:</span>
                        head<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">'down'</span><span class="token operator">:</span>
                        head<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">'left'</span><span class="token operator">:</span>
                        head<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">'right'</span><span class="token operator">:</span>
                        head<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">// 检查碰撞</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">checkCollision</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">gameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">// 将新头部添加到蛇的开始</span>
                snake<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 检查是否吃到食物</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>x <span class="token operator">===</span> food<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> head<span class="token punctuation">.</span>y <span class="token operator">===</span> food<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 吃到食物，增加分数</span>
                    score <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
                    scoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> score<span class="token punctuation">;</span>
                    
                    <span class="token comment">// 更新最高分</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>score <span class="token operator">&gt;</span> highScore<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        highScore <span class="token operator">=</span> score<span class="token punctuation">;</span>
                        highScoreElement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> highScore<span class="token punctuation">;</span>
                        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'snakeHighScore'</span><span class="token punctuation">,</span> highScore<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    
                    <span class="token comment">// 生成新食物</span>
                    <span class="token function">generateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    
                    <span class="token comment">// 增加游戏速度</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>gameSpeed <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        gameSpeed <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                        <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 没吃到食物，移除蛇尾</span>
                    snake<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">// 重新渲染游戏</span>
                <span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">renderSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">renderFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 检查碰撞</span>
            <span class="token keyword">function</span> <span class="token function">checkCollision</span><span class="token punctuation">(</span><span class="token parameter">head</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 检查墙壁碰撞</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> boardSize <span class="token operator">||</span> head<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>y <span class="token operator">&gt;=</span> boardSize<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">// 检查自身碰撞</span>
                <span class="token keyword">return</span> snake<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">part<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 跳过第一个元素，因为它就是头部</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> part<span class="token punctuation">.</span>x <span class="token operator">===</span> head<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> part<span class="token punctuation">.</span>y <span class="token operator">===</span> head<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 游戏结束</span>
            <span class="token keyword">function</span> <span class="token function">gameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">游戏结束! 你的得分: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>score<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                gameStarted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'开始游戏'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 游戏循环</span>
            <span class="token keyword">function</span> <span class="token function">gameLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">moveSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 开始游戏</span>
            <span class="token keyword">function</span> <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>gameStarted<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 如果游戏已经开始，暂停或继续</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>gamePaused<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 继续游戏</span>
                        gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'暂停游戏'</span><span class="token punctuation">;</span>
                        gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 暂停游戏</span>
                        <span class="token function">clearInterval</span><span class="token punctuation">(</span>gameInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'继续游戏'</span><span class="token punctuation">;</span>
                        gamePaused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 开始新游戏</span>
                    <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    gameInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">,</span> gameSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    gameStarted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    gamePaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                    startButton<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'暂停游戏'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 处理键盘输入</span>
            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gameStarted <span class="token operator">||</span> gamePaused<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
                
                <span class="token comment">// 防止方向键引起页面滚动</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'ArrowUp'</span><span class="token punctuation">,</span> <span class="token string">'ArrowDown'</span><span class="token punctuation">,</span> <span class="token string">'ArrowLeft'</span><span class="token punctuation">,</span> <span class="token string">'ArrowRight'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">// 更新方向</span>
                <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">case</span> <span class="token string">'ArrowUp'</span><span class="token operator">:</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'down'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'up'</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">'ArrowDown'</span><span class="token operator">:</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'up'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'down'</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">'ArrowLeft'</span><span class="token operator">:</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'right'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">'ArrowRight'</span><span class="token operator">:</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'left'</span><span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 移动设备控制按钮</span>
            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.up'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'down'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'up'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.down'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'up'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'down'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.left'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'right'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.right'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">!==</span> <span class="token string">'left'</span> <span class="token operator">&amp;&amp;</span> gameStarted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>gamePaused<span class="token punctuation">)</span> nextDirection <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 开始游戏按钮</span>
            startButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> startGame<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 初始化游戏</span>
            <span class="token function">initGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       很感谢你能看到这里，如果你有哪些想学习的项目，欢迎在评论区分享！
      </strong>
      <br/>
      <strong>
       创作者：
       <a href="https://blog.csdn.net/qq_5164**%E5%8A%A0%E7%B2%97%E6%A0%B7%E5%BC%8F**6682?type=lately">
        Code_流苏(CSDN)
       </a>
      </strong>
      （一个喜欢古诗词和编程的Coder😊）
     </p>
    </blockquote>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35313634363638322f:61727469636c652f64657461696c732f313436313034383634" class_="artid" style="display:none">
 </p>
</div>


