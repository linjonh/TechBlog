---
layout: post
title: "Reactor中的Flux和Mono的区别"
date: 2025-03-10 14:07:45 +0800
description: "是Reactor框架中两个核心的数据流类型，分别适用于不同的场景。在实际开发中，根据具体需求选择合适的类型，并合理利用提供的操作符，可以显著提升代码的可读性和系统的性能。它适用于需要处理多个事件的情况，如从数据库中获取一组记录或者实时数据流。是两个核心的类型，分别用于处理不同的数据流场景。: 更适合需要快速响应的场景，因为它只关注单个结果，减少了不必要的复杂性。设计的，用于处理多元素流，而有些则更适合处理单值结果。，表示可能会有零个或一个用户的单个结果。，表示可能会有多个用户的流被处理。"
keywords: "Reactor中的Flux和Mono的区别"
categories: ['Java']
tags: ['Java']
artid: "146153512"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146153512
    alt: "Reactor中的Flux和Mono的区别"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146153512
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146153512
cover: https://bing.ee123.net/img/rand?artid=146153512
image: https://bing.ee123.net/img/rand?artid=146153512
img: https://bing.ee123.net/img/rand?artid=146153512
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Reactor中的Flux和Mono的区别
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="ReactorFluxMono_2">
     </a>
     Reactor中的Flux和Mono的区别
    </h4>
    <p>
     在Reactor框架中，
     <code>
      Flux
     </code>
     和
     <code>
      Mono
     </code>
     是两个核心的类型，分别用于处理不同的数据流场景。理解它们之间的区别是掌握响应式编程的关键。
    </p>
    <h5>
     <a id="1__6">
     </a>
     1. 基本概念
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        Flux
       </strong>
       : 表示一个异步、非阻塞的流，能够发布零个或多个元素。它适用于需要处理多个事件的情况，如从数据库中获取一组记录或者实时数据流。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Mono
       </strong>
       : 代表一个可能存在的值或错误。它用于表示单个结果的操作，比如执行一次HTTP请求并返回一个响应。
      </p>
     </li>
    </ul>
    <h5>
     <a id="2__12">
     </a>
     2. 数据流特性
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        Flux
       </strong>
       :
      </p>
      <ul>
       <li>
        可以发布多个元素。
       </li>
       <li>
        支持无限长度的数据流。
       </li>
       <li>
        常用于需要持续处理数据的场景。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        Mono
       </strong>
       :
      </p>
      <ul>
       <li>
        只能发布零个或一个元素。
       </li>
       <li>
        适用于只需要单次结果的操作。
       </li>
       <li>
        数据流在完成或出错后结束。
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="3__24">
     </a>
     3. 使用场景
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        Flux
       </strong>
       : 当你需要处理多个事件或者数据项时，使用
       <code>
        Flux
       </code>
       。例如：
      </p>
      <ul>
       <li>
        处理实时消息队列中的多条消息。
       </li>
       <li>
        从数据库中查询多条记录并逐个处理。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        Mono
       </strong>
       : 当操作的结果只能是一个值或错误时，使用
       <code>
        Mono
       </code>
       。例如：
      </p>
      <ul>
       <li>
        执行一次HTTP GET请求并返回单个资源。
       </li>
       <li>
        根据唯一标识符查找一个用户。
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="4__34">
     </a>
     4. 操作符支持
    </h5>
    <p>
     两者都提供了丰富的操作符来处理和转换数据流，但有一些操作符是专门为
     <code>
      Flux
     </code>
     设计的，用于处理多元素流，而有些则更适合处理单值结果。
    </p>
    <ul>
     <li>
      <p>
       <strong>
        Flux
       </strong>
       :
      </p>
      <ul>
       <li>
        提供的操作符适合处理多个事件，如合并多个流、平铺嵌套的流等。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        Mono
       </strong>
       :
      </p>
      <ul>
       <li>
        操作符更注重于单个结果的转换和处理，如缓存结果、默认值等。
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="5__44">
     </a>
     5. 示例对比
    </h5>
    <h6>
     <a id="Flux_46">
     </a>
     使用Flux
    </h6>
    <p>
     假设我们有一个方法从数据库中获取所有用户：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> databaseClient<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM users"</span><span class="token punctuation">)</span>
                         <span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                         <span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这个方法返回一个
     <code>
      Flux&lt;User&gt;
     </code>
     ，表示可能会有多个用户的流被处理。
    </p>
    <h6>
     <a id="Mono_59">
     </a>
     使用Mono
    </h6>
    <p>
     如果我们有一个方法根据用户ID获取单个用户：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> databaseClient<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM users WHERE id = ?"</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span>
                         <span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                         <span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这个方法返回一个
     <code>
      Mono&lt;User&gt;
     </code>
     ，表示可能会有零个或一个用户的单个结果。
    </p>
    <h5>
     <a id="6__72">
     </a>
     6. 转换与组合
    </h5>
    <p>
     在实际应用中，有时需要将
     <code>
      Flux
     </code>
     和
     <code>
      Mono
     </code>
     进行转换或组合使用。例如：
    </p>
    <ul>
     <li>
      将多个
      <code>
       Mono
      </code>
      合并成一个
      <code>
       Flux
      </code>
      ，以便同时处理多个独立的结果。
     </li>
     <li>
      使用
      <code>
       Flux
      </code>
      的某些操作符来处理单个结果的情况，虽然这不是最常见的方式。
     </li>
    </ul>
    <h5>
     <a id="7__79">
     </a>
     7. 性能考量
    </h5>
    <ul>
     <li>
      <p>
       <strong>
        Flux
       </strong>
       : 适用于大量数据的高效处理。它的设计允许在多线程环境下更好地管理资源和性能。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Mono
       </strong>
       : 更适合需要快速响应的场景，因为它只关注单个结果，减少了不必要的复杂性。
      </p>
     </li>
    </ul>
    <h4>
     <a id="_85">
     </a>
     结论
    </h4>
    <p>
     <code>
      Flux
     </code>
     和
     <code>
      Mono
     </code>
     是Reactor框架中两个核心的数据流类型，分别适用于不同的场景。理解它们的区别和适用情况，能够帮助开发者更高效地构建响应式应用程序。在实际开发中，根据具体需求选择合适的类型，并合理利用提供的操作符，可以显著提升代码的可读性和系统的性能。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323430315f38393739333030362f:61727469636c652f64657461696c732f313436313533353132" class_="artid" style="display:none">
 </p>
</div>


