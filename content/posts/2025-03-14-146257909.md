---
layout: post
title: "Ansible-如何使用-Playbook-批量部署应用"
date: 2025-03-14 15:05:23 +0800
description: "Ansible Playbook是Ansible中用于自动化任务执行的配置文件，采用YAML格式编写。"
keywords: "Ansible 如何使用 Playbook 批量部署应用？"
categories: ['未分类']
tags: ['Ansible']
artid: "146257909"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146257909
    alt: "Ansible-如何使用-Playbook-批量部署应用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146257909
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146257909
cover: https://bing.ee123.net/img/rand?artid=146257909
image: https://bing.ee123.net/img/rand?artid=146257909
img: https://bing.ee123.net/img/rand?artid=146257909
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Ansible 如何使用 Playbook 批量部署应用？
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     Ansible Playbook是Ansible中用于自动化任务执行的配置文件，采用YAML格式编写。通过Playbook，运维人员可以定义多个任务（Tasks），让Ansible按照指定的顺序执行，从而实现应用的批量部署。下面带来使用 Playbook 批量部署应用的方法。
    </p>
    <p>
     <img alt="" height="603" src="https://i-blog.csdnimg.cn/direct/aadba40dc8cc41a8a4038186c4e0def9.png" width="1064">
      <br/>
      <strong>
       步骤一：准备Ansible环境
      </strong>
      <br/>
      在开始使用Ansible Playbook部署应用之前，需要先安装和配置Ansible。
      <br/>
      安装Ansible在Linux系统（如CentOS或Ubuntu）上执行以下命令安装Ansible：
      <br/>
      sudo apt update&amp;&amp;sudo apt install ansible#Ubuntu/Debian
      <br/>
      sudo yum install epel-release-y&amp;&amp;sudo yum install ansible-y#CentOS/RHEL
      <br/>
      配置受控节点
      <br/>
      确保目标服务器（受控端）已安装SSH并允许Ansible主机免密登录。
      <br/>
      在控制端生成SSH密钥并分发到目标机器：
      <br/>
      ssh-keygen-t rsa
      <br/>
      ssh-copy-id user remote_host
      <br/>
      配置/etc/ansible/hosts文件，添加受控节点信息，例如：
      <br/>
      [web_servers]
      <br/>
      192.168.1.10
      <br/>
      192.168.1.11
      <br/>
      <strong>
       步骤二：编写Ansible Playbook
      </strong>
      <br/>
      Playbook由多个部分组成，主要包括hosts（目标主机）、tasks（任务）等。
      <br/>
      创建Playbook文件在Ansible主机上新建一个YAML格式的Playbook文件，如deploy_app.yml。
      <br/>
      编写Playbook内容下面是一个示例Playbook，批量在目标服务器上安装Nginx并启动：
      <br/>
      -name:批量部署Nginx
      <br/>
      hosts:web_servers
      <br/>
      become:yes
      <br/>
      tasks:
      <br/>
      -name:安装Nginx
      <br/>
      apt:
      <br/>
      name:nginx
      <br/>
      state:present
      <br/>
      when:ansible_os_family=="Debian"
      <br/>
      -name:安装Nginx（CentOS）
      <br/>
      yum:
      <br/>
      name:nginx
      <br/>
      state:present
      <br/>
      when:ansible_os_family=="RedHat"
      <br/>
      -name:启动Nginx
      <br/>
      service:
      <br/>
      name:nginx
      <br/>
      state:started
      <br/>
      enabled:yes
      <br/>
      <strong>
       步骤三：执行Ansible Playbook
      </strong>
      <br/>
      在编写好Playbook后，可以使用以下命令执行：
      <br/>
      ansible-playbook deploy_app.yml
      <br/>
      执行成功后，Nginx将被批量部署并启动。
      <br/>
      <strong>
       步骤四：验证部署结果
      </strong>
      <br/>
      通过以下命令检查Nginx是否成功运行：
      <br/>
      systemctl status nginx
      <br/>
      在浏览器（如
      <a class="link-info" href="https://chrome.polamus.com/" rel="nofollow" title="谷歌浏览器官网">
       谷歌浏览器官网
      </a>
      ）中输入目标服务器的IP地址，检查Nginx欢迎页面是否正常显示。
     </img>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f4775614e69755f43686f70696e2f:61727469636c652f64657461696c732f313436323537393039" class_="artid" style="display:none">
 </p>
</div>


