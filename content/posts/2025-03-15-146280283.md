---
layout: post
title: "TensorFlow-与-TensorFlow-Lite核心解析与层应用"
date: 2025-03-15 15:39:19 +0800
description: "然而，在嵌入式和移动设备上，原生 TensorFlow 过于庞大，因此 Google 推出了轻量级版本——TensorFlow Lite（TFLite），专为低功耗、高性能推理场景优化。TensorFlow 作为全栈 AI 框架，适用于各种机器学习任务，而 TensorFlow Lite 作为其轻量化推理引擎，使 AI 能力得以扩展到移动和嵌入式设备。对于嵌入式开发者，可以使用 Yocto 项目构建 TensorFlow 和 TensorFlow Lite，使其适应特定硬件需求。"
keywords: "TensorFlow 与 TensorFlow Lite：核心解析与层应用"
categories: ['未分类']
tags: ['人工智能', 'Tensorflow', 'Python']
artid: "146280283"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146280283
    alt: "TensorFlow-与-TensorFlow-Lite核心解析与层应用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146280283
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146280283
cover: https://bing.ee123.net/img/rand?artid=146280283
image: https://bing.ee123.net/img/rand?artid=146280283
img: https://bing.ee123.net/img/rand?artid=146280283
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     TensorFlow 与 TensorFlow Lite：核心解析与层应用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1__2">
     </a>
     1. 引言
    </h3>
    <p>
     TensorFlow 是 Google 开发的开源机器学习框架，支持从数据预处理、模型训练到推理部署的完整生命周期。然而，在嵌入式和移动设备上，原生 TensorFlow 过于庞大，因此 Google 推出了轻量级版本——TensorFlow Lite（TFLite），专为低功耗、高性能推理场景优化。
    </p>
    <p>
     本篇文章将深入探讨 TensorFlow 和 TensorFlow Lite 的核心概念、架构层次、应用场景，并结合 Yocto 项目如何构建和优化这两个框架。
    </p>
    <hr/>
    <h3>
     <a id="2_TensorFlow_10">
     </a>
     2. TensorFlow：全面的机器学习框架
    </h3>
    <h4>
     <a id="21_TensorFlow__12">
     </a>
     2.1 TensorFlow 的核心架构
    </h4>
    <p>
     TensorFlow 由多个层级组成，每一层针对不同的功能和应用场景。
    </p>
    <ol>
     <li>
      <p>
       <strong>
        前端 API 层（Front-end API）
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         tf.keras
        </code>
        （高级 API）：简化模型构建、训练和部署。
       </li>
       <li>
        <code>
         tf.data
        </code>
        ：高效的数据处理管道。
       </li>
       <li>
        <code>
         tf.estimator
        </code>
        ：用于大规模训练的高级接口。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        核心计算层（Core Execution）
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         Graph Execution
        </code>
        （计算图模式）：优化计算性能，提高并行执行效率。
       </li>
       <li>
        <code>
         Eager Execution
        </code>
        （即时模式）：便于调试，适合研究和开发。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        后端计算层（Backend Execution）
       </strong>
       ：
      </p>
      <ul>
       <li>
        XLA（加速线性代数）：提升 CPU/GPU 计算效率。
       </li>
       <li>
        TensorFlow Runtime：提供跨设备计算支持。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        分布式训练层（Distributed Training）
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         tf.distribute.Strategy
        </code>
        ：支持多 GPU、TPU 训练。
       </li>
       <li>
        <code>
         TF-Serving
        </code>
        ：用于云端和服务器部署推理任务。
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <a id="22_TensorFlow__32">
     </a>
     2.2 TensorFlow 的主要应用
    </h4>
    <p>
     TensorFlow 适用于多个领域，包括计算机视觉、自然语言处理、强化学习等。
    </p>
    <h5>
     <a id="_1Image_Classification_35">
     </a>
     <strong>
      示例 1：图像分类（Image Classification）
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf
<span class="token keyword">from</span> tensorflow <span class="token keyword">import</span> keras

<span class="token comment"># 加载预训练模型</span>
model <span class="token operator">=</span> keras<span class="token punctuation">.</span>applications<span class="token punctuation">.</span>MobileNetV2<span class="token punctuation">(</span>weights<span class="token operator">=</span><span class="token string">'imagenet'</span><span class="token punctuation">)</span>

<span class="token comment"># 预处理输入图片</span>
img <span class="token operator">=</span> keras<span class="token punctuation">.</span>preprocessing<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load_img<span class="token punctuation">(</span><span class="token string">'cat.jpg'</span><span class="token punctuation">,</span> target_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
img_array <span class="token operator">=</span> keras<span class="token punctuation">.</span>preprocessing<span class="token punctuation">.</span>image<span class="token punctuation">.</span>img_to_array<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
img_array <span class="token operator">=</span> tf<span class="token punctuation">.</span>expand_dims<span class="token punctuation">(</span>img_array<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
img_array <span class="token operator">=</span> keras<span class="token punctuation">.</span>applications<span class="token punctuation">.</span>mobilenet_v2<span class="token punctuation">.</span>preprocess_input<span class="token punctuation">(</span>img_array<span class="token punctuation">)</span>

<span class="token comment"># 进行预测</span>
predictions <span class="token operator">=</span> model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>img_array<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>keras<span class="token punctuation">.</span>applications<span class="token punctuation">.</span>mobilenet_v2<span class="token punctuation">.</span>decode_predictions<span class="token punctuation">(</span>predictions<span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="3_TensorFlow_Lite_56">
     </a>
     3. TensorFlow Lite：专为嵌入式优化的推理引擎
    </h3>
    <h4>
     <a id="31_TensorFlow_Lite__58">
     </a>
     3.1 TensorFlow Lite 的核心架构
    </h4>
    <p>
     TFLite 采用模块化设计，主要包含以下层级：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        模型转换层（Model Conversion）
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         TFLite Converter
        </code>
        ：将 TensorFlow 训练模型转换为
        <code>
         .tflite
        </code>
        格式。
       </li>
       <li>
        量化（Quantization）：优化模型大小，支持 INT8、FLOAT16。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        推理引擎层（Inference Engine）
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         TFLite Interpreter
        </code>
        ：轻量级推理引擎，适用于移动设备和边缘设备。
       </li>
       <li>
        <code>
         Delegate
        </code>
        机制：支持 GPU、NNAPI、Edge TPU 硬件加速。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        平台适配层（Platform Adaptation）
       </strong>
       ：
      </p>
      <ul>
       <li>
        Android / iOS 支持。
       </li>
       <li>
        Raspberry Pi、嵌入式 Linux 适配。
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <a id="32_TensorFlow_Lite__73">
     </a>
     3.2 TensorFlow Lite 的主要应用
    </h4>
    <h5>
     <a id="_2_Raspberry_Pi__TensorFlow_Lite__75">
     </a>
     <strong>
      示例 2：在 Raspberry Pi 上运行 TensorFlow Lite 进行图像分类
     </strong>
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image

<span class="token comment"># 加载 TensorFlow Lite 模型</span>
interpreter <span class="token operator">=</span> tf<span class="token punctuation">.</span>lite<span class="token punctuation">.</span>Interpreter<span class="token punctuation">(</span>model_path<span class="token operator">=</span><span class="token string">'model.tflite'</span><span class="token punctuation">)</span>
interpreter<span class="token punctuation">.</span>allocate_tensors<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 获取输入和输出张量</span>
input_details <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_input_details<span class="token punctuation">(</span><span class="token punctuation">)</span>
output_details <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_output_details<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 读取图片并进行预处理</span>
image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'image.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
image <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>image<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>float32<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">255.0</span>
image <span class="token operator">=</span> np<span class="token punctuation">.</span>expand_dims<span class="token punctuation">(</span>image<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># 运行推理</span>
interpreter<span class="token punctuation">.</span>set_tensor<span class="token punctuation">(</span>input_details<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> image<span class="token punctuation">)</span>
interpreter<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token punctuation">)</span>
output <span class="token operator">=</span> interpreter<span class="token punctuation">.</span>get_tensor<span class="token punctuation">(</span>output_details<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="4__Yocto__TensorFlow__TensorFlow_Lite_103">
     </a>
     4. 在 Yocto 中构建 TensorFlow 和 TensorFlow Lite
    </h3>
    <p>
     对于嵌入式开发者，可以使用 Yocto 项目构建 TensorFlow 和 TensorFlow Lite，使其适应特定硬件需求。
    </p>
    <h4>
     <a id="41_TensorFlow_Yocto_Layermetatensorflow_107">
     </a>
     4.1 TensorFlow Yocto Layer：meta-tensorflow
    </h4>
    <p>
     <a href="https://git.yoctoproject.org/meta-tensorflow" rel="nofollow">
      meta-tensorflow
     </a>
     是 Yocto 项目提供的官方 TensorFlow 支持层。
    </p>
    <h5>
     <a id="_TensorFlow_110">
     </a>
     <strong>
      构建 TensorFlow：
     </strong>
    </h5>
    <pre><code class="prism language-sh"><span class="token function">git</span> clone https://git.yoctoproject.org/meta-tensorflow.git
<span class="token builtin class-name">cd</span> meta-tensorflow
bitbake tensorflow
</code></pre>
    <h4>
     <a id="42_TensorFlow_Lite_Yocto_Layermetatensorflowlite_117">
     </a>
     4.2 TensorFlow Lite Yocto Layer：meta-tensorflow-lite
    </h4>
    <p>
     <a href="https://github.com/NobuoTsukamoto/meta-tensorflow-lite.git">
      meta-tensorflow-lite
     </a>
     提供了 TensorFlow Lite 的 Yocto 支持。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7f418fff9c874ab4bd00293202b7aa80.png"/>
    </p>
    <h5>
     <a id="_TensorFlow_Lite_121">
     </a>
     <strong>
      构建 TensorFlow Lite：
     </strong>
    </h5>
    <pre><code class="prism language-sh"><span class="token function">git</span> clone https://github.com/NobuoTsukamoto/meta-tensorflow-lite.git
<span class="token builtin class-name">cd</span> meta-tensorflow-lite
bitbake libtensorflow-lite
</code></pre>
    <hr/>
    <h3>
     <a id="5_TensorFlow__TensorFlow_Lite__130">
     </a>
     5. TensorFlow 和 TensorFlow Lite 的核心对比
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        特性
       </th>
       <th>
        TensorFlow
       </th>
       <th>
        TensorFlow Lite
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        目标平台
       </td>
       <td>
        服务器、PC、云端
       </td>
       <td>
        移动设备、嵌入式系统
       </td>
      </tr>
      <tr>
       <td>
        计算性能
       </td>
       <td>
        适用于训练与推理
       </td>
       <td>
        仅用于高效推理
       </td>
      </tr>
      <tr>
       <td>
        模型大小
       </td>
       <td>
        大，占用内存多
       </td>
       <td>
        小，适用于低功耗设备
       </td>
      </tr>
      <tr>
       <td>
        硬件加速
       </td>
       <td>
        GPU、TPU
       </td>
       <td>
        Edge TPU、NNAPI、GPU
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h3>
     <a id="6__141">
     </a>
     6. 结论
    </h3>
    <p>
     TensorFlow 作为全栈 AI 框架，适用于各种机器学习任务，而 TensorFlow Lite 作为其轻量化推理引擎，使 AI 能力得以扩展到移动和嵌入式设备。
    </p>
    <p>
     通过 Yocto 项目，开发者可以轻松地在嵌入式 Linux 平台上部署 TensorFlow 和 TensorFlow Lite，使 AI 解决方案更具针对性。如果你正在进行嵌入式 AI 研究，建议探索
     <code>
      meta-tensorflow
     </code>
     和
     <code>
      meta-tensorflow-lite
     </code>
     ，为你的项目提供定制化支持。
    </p>
    <hr/>
    <h4>
     <a id="_148">
     </a>
     参考链接
    </h4>
    <ul>
     <li>
      <a href="https://www.tensorflow.org/" rel="nofollow">
       TensorFlow 官方网站
      </a>
     </li>
     <li>
      <a href="https://git.yoctoproject.org/meta-tensorflow" rel="nofollow">
       meta-tensorflow Git 代码库
      </a>
     </li>
     <li>
      <a href="https://github.com/NobuoTsukamoto/meta-tensorflow-lite.git">
       meta-tensorflow-lite GitHub 代码库
      </a>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f496e746572766965775f54432f:61727469636c652f64657461696c732f313436323830323833" class_="artid" style="display:none">
 </p>
</div>


