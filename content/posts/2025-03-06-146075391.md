---
layout: post
title: "electron打包结构了解"
date: 2025-03-06 17:14:20 +0800
description: "通过理解打包后的文件结构，你可以更好地调试和优化 Electron 应用的发布流程。如果有特定需求（如自动更新、代码保护），需进一步配置打包工具或引入额外工具（如。等）以及目标操作系统（Windows、macOS、Linux）。Electron 应用打包后的文件结构和内容取决于你使用的打包工具（如。：某些文件（如二进制模块）可能需要放在。：将应用代码和资源打包为单个。文件，避免文件散落。只读归档，不能修改。"
keywords: "electron打包结构了解"
categories: ['未分类']
tags: ['前端', 'Javascript', 'Electron']
artid: "146075391"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146075391
    alt: "electron打包结构了解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146075391
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146075391
cover: https://bing.ee123.net/img/rand?artid=146075391
image: https://bing.ee123.net/img/rand?artid=146075391
img: https://bing.ee123.net/img/rand?artid=146075391
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     electron打包结构了解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     Electron 应用打包后的文件结构和内容取决于你使用的打包工具（如
     <code>
      electron-builder
     </code>
     、
     <code>
      electron-packager
     </code>
     等）以及目标操作系统（Windows、macOS、Linux）。以下是典型 Electron 应用打包后的文件结构和关键组成部分：
    </p>
    <hr/>
    <h4>
     <a id="1__4">
     </a>
     <strong>
      1. 基本打包结果
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       Windows
      </strong>
      ：生成一个
      <code>
       .exe
      </code>
      安装文件或直接可执行的文件夹（包含
      <code>
       .exe
      </code>
      和依赖文件）。
     </li>
     <li>
      <strong>
       macOS
      </strong>
      ：生成
      <code>
       .app
      </code>
      应用程序包（本质是一个特殊结构的文件夹）。
     </li>
     <li>
      <strong>
       Linux
      </strong>
      ：生成
      <code>
       .deb
      </code>
      、
      <code>
       .rpm
      </code>
      、
      <code>
       AppImage
      </code>
      等格式的安装包或可执行文件。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="2__macOS__app__12">
     </a>
     <strong>
      2. 典型文件结构（以 macOS 的
      <code>
       .app
      </code>
      为例）
     </strong>
    </h4>
    <p>
     一个
     <code>
      .app
     </code>
     包内部的典型结构如下：
    </p>
    <pre><code>MyApp.app/
├── Contents/
│   ├── Info.plist          // 应用配置信息（图标、版本等）
│   ├── MacOS/
│   │   └── MyApp           // 主进程的可执行文件
│   ├── Resources/
│   │   ├── app.asar        // 应用代码（打包为 asar 归档文件）
│   │   ├── electron.icns   // 应用图标
│   │   └── ...             // 其他静态资源（图片、字体等）
│   └── Frameworks/
│       └── ...             // Electron 依赖的框架和库
</code></pre>
    <hr/>
    <h4>
     <a id="3__32">
     </a>
     <strong>
      3. 核心组成部分
     </strong>
    </h4>
    <h5>
     <a id="1__34">
     </a>
     <strong>
      (1) 主进程代码
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       位置
      </strong>
      ：在
      <code>
       Resources/app.asar
      </code>
      中（或解压后的
      <code>
       Resources/app
      </code>
      目录）。
     </li>
     <li>
      <strong>
       内容
      </strong>
      ：
      <ul>
       <li>
        主进程的 JavaScript 文件（如
        <code>
         main.js
        </code>
        ）。
       </li>
       <li>
        <code>
         package.json
        </code>
        ：定义入口文件、依赖、应用名称、版本等。
       </li>
       <li>
        其他主进程依赖的文件（如配置文件、Node.js 模块等）。
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="2__42">
     </a>
     <strong>
      (2) 渲染进程代码
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       位置
      </strong>
      ：通常包含在
      <code>
       app.asar
      </code>
      中，与主进程代码一起打包。
     </li>
     <li>
      <strong>
       内容
      </strong>
      ：
      <ul>
       <li>
        HTML、CSS、JavaScript 文件（前端代码）。
       </li>
       <li>
        前端依赖（如 React、Vue 编译后的静态文件）。
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="3__49">
     </a>
     <strong>
      (3) 静态资源
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       位置
      </strong>
      ：
      <code>
       Resources/
      </code>
      目录或
      <code>
       app.asar
      </code>
      内部。
     </li>
     <li>
      <strong>
       内容
      </strong>
      ：图片、字体、本地数据库文件等。
     </li>
    </ul>
    <h5>
     <a id="4_Electron__54">
     </a>
     <strong>
      (4) Electron 运行时
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       位置
      </strong>
      ：
      <code>
       Frameworks/
      </code>
      目录（macOS）或同级依赖文件（Windows/Linux）。
     </li>
     <li>
      <strong>
       内容
      </strong>
      ：Chromium 和 Node.js 的二进制文件，确保应用独立运行。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="4_ASAR__61">
     </a>
     <strong>
      4. ASAR 归档文件
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：将应用代码和资源打包为单个
       <code>
        app.asar
       </code>
       文件，避免文件散落。
      </p>
     </li>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         只读归档，不能修改。
        </p>
       </li>
       <li>
        <p>
         可以通过
         <code>
          asar
         </code>
         工具解压查看内容：
        </p>
        <pre><code class="prism language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> asar
asar extract app.asar ./unpacked
</code></pre>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        例外
       </strong>
       ：某些文件（如二进制模块）可能需要放在
       <code>
        app.asar.unpacked
       </code>
       中。
      </p>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="5__80">
     </a>
     <strong>
      5. 不同打包工具的输出差异
     </strong>
    </h4>
    <h5>
     <a id="electronbuilder_82">
     </a>
     <strong>
      electron-builder
     </strong>
    </h5>
    <ul>
     <li>
      <p>
       默认生成安装包（如
       <code>
        .exe
       </code>
       、
       <code>
        .dmg
       </code>
       、
       <code>
        .deb
       </code>
       ）。
      </p>
     </li>
     <li>
      <p>
       配置文件
       <code>
        package.json
       </code>
       中的
       <code>
        build
       </code>
       字段可定制输出：
      </p>
      <pre><code class="prism language-json"><span class="token string-property property">"build"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"appId"</span><span class="token operator">:</span> <span class="token string">"com.example.myapp"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"dist/**/*"</span><span class="token punctuation">,</span> <span class="token string">"node_modules/**/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"mac"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"target"</span><span class="token operator">:</span> <span class="token string">"dmg"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"win"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"target"</span><span class="token operator">:</span> <span class="token string">"nsis"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h5>
     <a id="electronpackager_101">
     </a>
     <strong>
      electron-packager
     </strong>
    </h5>
    <ul>
     <li>
      生成可直接运行的应用程序文件夹（如
      <code>
       myapp-win32-x64
      </code>
      ）。
     </li>
     <li>
      需要手动分发或压缩为 ZIP。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="6__108">
     </a>
     <strong>
      6. 注意事项
     </strong>
    </h4>
    <ol>
     <li>
      <strong>
       依赖管理
      </strong>
      ：确保
      <code>
       node_modules
      </code>
      中的依赖正确打包（生产依赖 vs 开发依赖）。
     </li>
     <li>
      <strong>
       二进制文件
      </strong>
      ：如果使用了原生模块（如
      <code>
       sqlite3
      </code>
      、
      <code>
       ffi
      </code>
      ），需确保它们针对目标平台编译。
     </li>
     <li>
      <strong>
       配置文件
      </strong>
      ：检查
      <code>
       package.json
      </code>
      中的
      <code>
       main
      </code>
      字段是否正确指向入口文件。
     </li>
     <li>
      <strong>
       安全
      </strong>
      ：敏感代码应加密或混淆，因为
      <code>
       asar
      </code>
      文件可被轻易解压。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="7_Windows__117">
     </a>
     <strong>
      7. 示例（Windows 输出）
     </strong>
    </h4>
    <pre><code>myapp/
├── myapp.exe               // 主可执行文件
├── resources/
│   ├── app.asar            // 应用代码和资源
│   └── ...                 // 其他依赖
├── locales/                // 语言文件
├── swiftshader/            // GPU 相关库
└── ...                     // Electron 运行时文件
</code></pre>
    <hr/>
    <p>
     通过理解打包后的文件结构，你可以更好地调试和优化 Electron 应用的发布流程。如果有特定需求（如自动更新、代码保护），需进一步配置打包工具或引入额外工具（如
     <code>
      electron-updater
     </code>
     、代码混淆工具）。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34393137353530312f:61727469636c652f64657461696c732f313436303735333931" class_="artid" style="display:none">
 </p>
</div>


