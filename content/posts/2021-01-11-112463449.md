---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f4a44445465636854616c6b2f:61727469636c652f64657461696c732f313132343633343439"
layout: post
title: "运维数智化时代京东数科AIOps落地实践一"
date: 2021-01-11 11:06:52 +08:00
description: "一、背景自从2016年Gartner提出AIOps概念以来，平台化和智能化已经成为了运维体系发展的大"
keywords: "aiops 故障定位"
categories: ['硬核干货']
tags: ['运维', '算法', '智能运维', '大数据', 'Aiops']
artid: "112463449"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=112463449
    alt: "运维数智化时代京东数科AIOps落地实践一"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=112463449
featuredImagePreview: https://bing.ee123.net/img/rand?artid=112463449
---

# 运维数智化时代——京东数科AIOps落地实践（一）

## 一、背景

自从2016年Gartner提出AIOps概念以来，平台化和智能化已经成为了运维体系发展的大趋势。从整体来看，运维发展可以分为5个阶段，分别为手工及脚本运维、工具标准化运维、平台自动化运维、DevOps和AIOps。

自动化运维给手工及脚本运维的效率带来了很大提升，但是系统软件只能预置和按照我们制定的流程运行工作，不能自主适应，不能够处理相似的“新”问题，AI的种种特质给运维当前的一些痛点提供了良好的解决方案，AIOps应运而生，以AI的能力，赋能IT运维领域。

智能运维（ArtificialIntelligence for IT Operations，AIOps）通过引入大数据和人工智能技术，从海量监控数据和复杂的IT软硬件中学习和总结规律，自动、准确、快速地发现异常、定位故障和预测风险，提高企业IT系统可用性和运维效率，可以进一步处理自动化运维不能解决的问题。AIOps赛道的拓展主要来自标准运维数据积累和运维业务发展需求双重驱动的影响：

* CMDB平台、监控系统平台、流程管理中心等成熟的一体化运维平台为标准运维数据的积累打下坚实的基础；
* 监控系统覆盖面足够多，但缺乏系统化的处理流程和方法，规模更大的数据、更复杂的动态运维环境使得自动化运维难以为继。

为了应对以上的驱动需求，AIOps的着力点在于：

* **赋能DevOps**
  ：通过AI的能力进一步处理自动化运维不能解决的问题
* **实时分析及处理**
  ：通过AIOps的智能算法和不断提升的自动化水平，对问题进行实时诊断并给出操作建议，大幅度降低平均检测时间（MTTD）和平均修复时间（MTTR）
* **降低报警噪音**
  ：通过AIOps的数据关联能力，确定基础设施、业务程序和业务之间的关系，不断完善算法，可以不断提高过滤警报噪音的水平减少误报；
* **故障原因分析及预测**
  ：通过AIOps的海量数据分析能力，可以帮助识别造成问题的根本原因，并挖掘时间序列中的事件模式从而对预期行为进行检测，提供运维建议。

面对AIOps的赛道，京东数科智能运维团队合理配置团队角色，运维工程师、开发工程师和算法工程师扮演着不同的角色，三者缺一不可。以下是数科智能运维团队基于内部人员职能分配的一些尝试和经验。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/841ed3be8d3970f918ab6908e1707b59.png#pic_center)

* **运维工程师**
  ：能从业务的技术运营中，提炼出智能化的需求点。在开发实施前能够考虑好需求方案，规范数据格式。前期可以通过仿真手法探索和验证方案可行性，起草合适的解决方案；
* **开发工程师**
  ：负责进行平台相关功能和模块的开发，以降低用户使用门槛，提升用户使用效率，并且将运维数据工程师交付的数据通过友好的方式展示给用户；
* **算法工程师**
  ：针对来自运维工程师和算法方案进行理解和梳理，完成最终落地方案的输出工作；在工程落地上能够考虑好健壮性、鲁棒性、敏捷性等，合理拆分任务，保障成果落地，以提升最终业务运营质量。

京东数科智能运维团队在行业内已经有了长期的耕耘，在各着力点大量投入，打通各个环节，在运维知识沉淀和算法积累上有着持续的积累，不仅赋能内部，还可提供大量外部服务。在运维各场景下应用AI的能力提供可靠的算法服务，在日常运维和大促期间各算法学件都有着卓越的表现，在保证高性能的前提下，运维场景解决方案的通用性、自动化、鲁棒性都是我们追求的第一目标。我们对AIOps的不断探索和对运维全场景不断钻研，可以让迭代的AIOps学件和产品不断地为内部和外部赋能，以AI驱动运维数字化转型。

## 二、AIOps常见场景

AIOps围绕质量保障、成本管理和效率提升的基本运维场景，逐步构建智能化运维场景。在质量保障方面，细分为异常检测、故障诊断、故障预测和故障自愈等基本场景；在成本管理方面，细分为指标监控、异常检测、资源优化、容量规划和性能优化等基本场景；在效率提升方面，分为智能预测、智能变更、智能问答和智能决策等基本场景。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/39c2d961e58d812da1cc50323593a216.png#pic_center)

## 三、AIOps能力建设

AIOps的建设可以先由单个场景的探索开始，逐步完善和串联，直至解决整个完整问题的运维算法学件，在算法学件的基础上打磨成具有通用性和流程性的智能运维整体解决方案。行业通用的演进路线如下：

* 开始尝试应用AI能力，还无较为成熟的单点应用。
* 具备单场景的AI运维能力，可以初步形成供内部使用的学件。
* 有由多个单场景AI运维模块串联起来的流程化AI运维能力，可以对外提供可靠的运维AI学件。
* 主要运维场景均已实现流程化免干预AI运维能力，可以对外提供供可靠的AIOps服务。
* 有核心中枢AI，可以考虑成本、质量、效率三个方面，达到业务不同生命周期对三个方面不同的指标要求，可实现多目标下的最优或按需最优。

目前，京东数科智能运维团队对内提供服务形式：指标鉴明平台、告警辨明平台、日志阐明平台和故障探明平台四大产品平台，此外还可提供特定场景算法模型文件、算法学件容器化部署方案。

## 四、AIOps落地实践

2020年京东数科智能运维团队在打通数字化运维、加速AIOps落地过程中将AI赋能智能解决方案全场景。其中，对异常发现和根因定位展开说明如下：结合指标数值和日志文本两大数据源特点构建“榫卯’”型算法设计，在保证平台可迁移性的基础上增强算法匹配场景丰富度、算法自动编排准确度、算法定制拓展自由度。我们会继续加大投入，在进行业务及运维知识积累的同时让AIOps赋能业务研发、产品和运营团队，对内降本增效提高生产效率，对外以AI驱动产业数字化转型。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/861fdd97ae1cf2737b3536eefb8b0c55.png#pic_center)

京东数科智能运维平台内嵌众多可插拔学件，配置简单，使用方便，并且具有高准确性和高时效性。下面详细介绍故障检测、故障定位和故障修复三个模块：

* **故障检测模块**
  ：快速发现时序监控数据的异常。
* **故障定位模块**
  ：精准定位复杂系统的根源问题。
* **故障修复模块**
  ：结合运维知识图谱和运维专家经验，推荐智能的解决方案，快速修复故障。

三个模块层层递进，共同提升运维体验和运维效率。整体流程可以快速发现故障并进行自动异常定位，对于异常事件提供解决方案推荐并实现部分场景故障自愈，能极大地降低研发配置固定阈值和运维排查问题的成本，极大地提升运维服务质量和业务可用率。

运维监控系统数据除静态配置属性外绝大多数为时序数据，表现形式为时序指标和时序日志，基于海量的时序数据判断业务是否异常是故障发现的重要手段。对于种类繁多、关系复杂的数值指标，指标异常检测学件组不仅可以实现快速自动编排、覆盖运维指标多特征突升突降、断崖式波峰波谷、趋势走向异常等异常类型，对于指标维度、周期性或隐性规律、节假日及活动、突发事件等影响因素皆有自适应算法和既定策略安排，无需人工配置阈值和规则，帮助研发和运维人员快速发现规则难以识别的异常，并支持自主配置异常告警方式，避免误报和告警风暴。在指标异常检测模块我们引入波形分析技术，结合空间和时间特征，分析指标间异常联动影响，提升异常检测准确度。时空数据分析手段的引入是发现规则和策略难以识别的异常的重要手段。

对于业务黄金指标和重点监控指标，配置告警日志分析既可以在文本日志层面捕捉瞬间发生的异常，又可以解析日志内容，确定异常主体，归并异常事件类型，同时起到对异常检测及后续根因定位关联分析的验证作用。经过大量异常事件实践和理论验证，三个算法学件组具有特定地编排方式，内部的算法学件可以自动适配接入的指标数据，覆盖运维全场景。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/484e882a2929066b9db620db1d114e7d.png#pic_center)

传统的运维故障定位高度依赖运维人员的经验和排查方向的正确与否，如何将运维专家经验沉淀并智能化是解决故障定位的问题关键。静态的CMDB配置和调用链关系是可以查询的，但是异常往往是发生在动态变化的过程之中，运维知识图谱就是我们团队应对该场景最高效的武器。智能故障定位是为了解决庞杂系统中根因定位的问题，运维知识图谱结合强化学习算法是AI赋能该场景的卓越方式。

强化学习算法是按照层次在全局进行搜索的，它将搜索所有可能关联的节点，确保了根因定位算法的准确性。运维知识图谱为搜索提供规范和方向，使得搜索并非是独立的而是兼顾调用变更和配置变更的。

我们采用的运维知识图谱是动态可拓展的，配置数据、日志、告警、变更等信息都已经接入其中。标准化数据的接入是快速的、自动的，对其他运维系统具有较高的兼容性。

当搜索过程结束时，算法会自动地对故障根因进行修正和排序，并调用日志分析系统计算推荐根因的置信度。故障定位结果会按照故障分析报告的格式存储，便于运维复盘时查询和检验算法准确度。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/a163ce2d3fd4dd44b79e8473bbc36552.png#pic_center)

在故障智能修复阶段，运维专家经验也将指导我们对故障事件进行分析并给出可行操作建议和操作风险指标。故障定位模块发出推荐根因的同时，调取知识图谱中关联的数据，通过关联分析算法挖掘故障关联关系，生成事件信息描述报告。运维知识图谱将根据调用链依赖进行全链路的检查，给出故障修复建议和操作风险提示，对于部分场景已实现故障自愈。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/aa5a00ac7911bd8a7140a4f45ecefb34.png#pic_center)

本文作者：京东数科 张宪波&张静&李彪

##### 团队介绍

京东数科智能运维团队拥有专业运维领域算法工程师和资深的运维经验专家，我们致力于将AIOps落地，为数智化运维提供解决方案。咨询请联系：zhangjing511@jd.com。

  

**往期好文推荐**
  
[ITest：京东数科接口自动化测试实践](https://blog.csdn.net/JDDTechTalk/article/details/110850636)
  
[深度解读京东金融App（Android）的秒开优化实践](https://blog.csdn.net/JDDTechTalk/article/details/109669687)
  
[京东数科统一接入网关JDDLB性能优化之QAT加速卡](https://blog.csdn.net/JDDTechTalk/article/details/112289768)
  
[Apache顶级项目ShardingSphere — SQL Parser的设计与实现](https://blog.csdn.net/JDDTechTalk/article/details/111295568)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ea0b2fbb7a04d2fb5d91c537e4ef1863.png)