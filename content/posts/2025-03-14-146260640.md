---
layout: post
title: "Docker-Docker-Compose-network-网络-compose"
date: 2025-03-14 17:13:46 +0800
description: "docker 会自动创建一个 以为docker-compose.yml 文件所在的文件夹名称  + _default   的网络名称，同时容器加入这个网络。docker network inspect network名称。"
keywords: "Docker 》》Docker Compose 》》network 网络 compose"
categories: ['未分类']
tags: ['网络', 'Php', 'Docker']
artid: "146260640"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146260640
    alt: "Docker-Docker-Compose-network-网络-compose"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146260640
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146260640
cover: https://bing.ee123.net/img/rand?artid=146260640
image: https://bing.ee123.net/img/rand?artid=146260640
img: https://bing.ee123.net/img/rand?artid=146260640
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Docker 》》Docker Compose 》》network 网络 compose
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="docker____0">
     </a>
     docker 默认的网络 三种模式
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ba4044f2ad5c4e298ff43152e2482e6c.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/714acee95abc4290a7841b6bde322dcd.png">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dc069139a6d9452e8a47afebb631446e.png"/>
      </img>
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/fbefbcd07a174127a15e35f61d4d70a9.png"/>
    </p>
    <pre><code class="prism language-csharp"><span class="token preprocessor property"># 列出所有当前主机上或Swarm集群上的网络</span>
docker network ls

<span class="token preprocessor property">#查看网络详情</span>
docker network inspect network名称

<span class="token preprocessor property"># 清除未使用的docker网络</span>
docker network prune <span class="token operator">-</span>f

<span class="token preprocessor property"># 创建网络</span>
ocker network create <span class="token operator">-</span>d bridge 网络名称
docker network create –subnet<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.50</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> 网络名称
docker network create –subnet<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.50</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> –ip<span class="token operator">-</span>range<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.50</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> 网络名称
docker network create –subnet<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.10</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> –<span class="token keyword">internal</span> br1

<span class="token preprocessor property">#将容器添加进一个已有网络</span>
docker network connect bridge 容器名或ID
docker network connect <span class="token operator">--</span>ip <span class="token number">172.17</span><span class="token number">.0</span><span class="token number">.18</span> network名称【必须是自己创建的才可以】 容器名或ID

<span class="token preprocessor property">#查看某一个容器中的网络，可以将一个容器连接到多个网络中。</span>
docker inspect 容器名或ID
docker inspect <span class="token operator">--</span>format<span class="token operator">=</span>'<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>json <span class="token punctuation">.</span>NetworkSettings<span class="token punctuation">.</span>Networks<span class="token punctuation">}</span><span class="token punctuation">}</span>'  容器名或ID
<span class="token preprocessor property"># 获取容器IP</span>
docker inspect <span class="token operator">--</span>format<span class="token operator">=</span>'<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>range <span class="token punctuation">.</span>NetworkSettings<span class="token punctuation">.</span>Networks<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token punctuation">.</span>IPAddress<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>end<span class="token punctuation">}</span><span class="token punctuation">}</span>' 容器名或ID

<span class="token preprocessor property">#将容器从网络中移除</span>
docker network disconnect bridge 容器名或ID

<span class="token preprocessor property"># 删除一个网络</span>
docker network rm network名称

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/10595282370e4a93a4f10f7fb68b35e1.png"/>
    </p>
    <p>
     》》查看网络详情
     <br/>
     docker network inspect network名称
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0669b65f2faa4653b8ea2b615036811e.png">
      <br/>
      》》 创建网络
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/83735df0a19243949949ecc5ddb641a7.png">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/994eea20c7aa4466bc66f2ff00892516.png"/>
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a0cbd1a8795f407c8176f96bc07491b8.png"/>
      </img>
     </img>
    </p>
    <h3>
     <a id="compose__50">
     </a>
     compose 配置一个已存在的网络
    </h3>
    <pre><code class="prism language-csharp"><span class="token preprocessor property"># 创建网络</span>
docker network create my_network
<span class="token preprocessor property"># 查看 已经存在的网络</span>
docker network ls
</code></pre>
    <pre><code class="prism language-csharp">services<span class="token punctuation">:</span>
  redis<span class="token punctuation">:</span>
    image<span class="token punctuation">:</span> redis<span class="token punctuation">:</span> <span class="token class-name">latest</span>
    container_name<span class="token punctuation">:</span> <span class="token class-name">redis</span>
    restart<span class="token punctuation">:</span> always
    <span class="token preprocessor property"># 如果 不端口映射 宿主机是访问不了这个redis的</span>
    ports<span class="token punctuation">:</span>
      <span class="token operator">-</span> '<span class="token number">6400</span><span class="token punctuation">:</span><span class="token number">6379</span>'
    volumes<span class="token punctuation">:</span>
     <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>redis<span class="token operator">/</span>redis<span class="token operator">/</span>conf<span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span>
     <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>redis<span class="token operator">/</span>data<span class="token punctuation">:</span><span class="token operator">/</span>data
     <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>redis<span class="token operator">/</span>logs<span class="token punctuation">:</span><span class="token operator">/</span><span class="token class-name">logs</span>
    command<span class="token punctuation">:</span> redis<span class="token operator">-</span>server <span class="token operator">/</span>etc<span class="token operator">/</span>redis<span class="token operator">/</span><span class="token class-name">redis<span class="token punctuation">.</span>conf</span>
networks<span class="token punctuation">:</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    external<span class="token punctuation">:</span>
      name<span class="token punctuation">:</span> my_network

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6491180ced9a4fa7aa3b932077098c39.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a432951731b84e80bc24c4558913ac09.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6462dba51ae24a99a87035fcb65a8d9c.png"/>
    </p>
    <h3>
     <a id="_86">
     </a>
     如果不配置网络
    </h3>
    <p>
     docker 会自动创建一个 以为docker-compose.yml 文件所在的文件夹名称 + _default 的网络名称，同时容器加入这个网络
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/10595282370e4a93a4f10f7fb68b35e1.png"/>
    </p>
    <p>
     》》查看网络详情
     <br/>
     docker network inspect network名称
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0669b65f2faa4653b8ea2b615036811e.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/754b55df0aca4fd1842229a954505552.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e6b90c8f4f334a288641a75b8b34372c.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/bdcaddfe667f4b13be8ef946b8cf8d05.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ebbb48334b334ef3ad146e73d6564bd3.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c0636d7c13fb496f91c74596d56ff2a8.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/32b52b93684c404bacf343bd5b07c323.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031333430303331342f:61727469636c652f64657461696c732f313436323630363430" class_="artid" style="display:none">
 </p>
</div>


