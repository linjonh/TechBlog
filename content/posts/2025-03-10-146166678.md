---
layout: post
title: "å¤§æ¨¡å‹ç»Ÿä¸€é›†æˆé¡¹ç›®å¦‚ä½•å°è£…å¤šä¸ªå¤§æ¨¡å‹-API-è°ƒç”¨"
date: 2025-03-10 23:59:54 +0800
description: "æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä»‹ç»äº† å¦‚ä½•å°è£…å¤šä¸ª LLMï¼ˆå¤§æ¨¡å‹ï¼‰ API è°ƒç”¨ ã€‚åç»­ï¼Œæˆ‘ä»¬å°†å®Œå–„ å¾®æœåŠ¡ + è®¤è¯ä¸­å¿ƒï¼šå¦‚ä½•ä¿éšœå¤§æ¨¡å‹ API çš„å®‰å…¨è°ƒç”¨ï¼Œ å¹¶ä¸”æ”¯æŒæµå¼å¯¹è¯ï¼ˆSSEï¼‰å¢åŠ  WebSocket å®æ—¶æ¶ˆæ¯æå‡ç”¨æˆ·ä½“éªŒï¼Œæ•¬è¯·æœŸå¾…ï¼"
keywords: "ã€å¤§æ¨¡å‹ç»Ÿä¸€é›†æˆé¡¹ç›®ã€‘å¦‚ä½•å°è£…å¤šä¸ªå¤§æ¨¡å‹ API è°ƒç”¨"
categories: ['å¤§æ¨¡å‹ç»Ÿä¸€é›†æˆ', 'Deepseek']
tags: ['å¾®æœåŠ¡', 'å¤§æ¨¡å‹', 'Deepseek', 'Chatgpt']
artid: "146166678"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146166678
    alt: "å¤§æ¨¡å‹ç»Ÿä¸€é›†æˆé¡¹ç›®å¦‚ä½•å°è£…å¤šä¸ªå¤§æ¨¡å‹-API-è°ƒç”¨"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146166678
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146166678
cover: https://bing.ee123.net/img/rand?artid=146166678
image: https://bing.ee123.net/img/rand?artid=146166678
img: https://bing.ee123.net/img/rand?artid=146166678
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ã€å¤§æ¨¡å‹ç»Ÿä¸€é›†æˆé¡¹ç›®ã€‘å¦‚ä½•å°è£…å¤šä¸ªå¤§æ¨¡å‹ API è°ƒç”¨
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     ğŸŒŸ åœ¨è¿™ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢å¦‚ä½•æ­å»ºä¸€ä¸ªæ”¯æŒå¤§æ¨¡å‹é›†æˆé¡¹ç›®
     <strong>
      NexLM
     </strong>
     çš„å¼€å‘è¿‡ç¨‹ï¼Œä»
     <strong>
      æ¶æ„è®¾è®¡
     </strong>
     åˆ°
     <strong>
      ä»£ç å®æˆ˜
     </strong>
     ï¼Œé€æ­¥æ­å»ºä¸€ä¸ªæ”¯æŒ
     <strong>
      å¤šç§å¤§æ¨¡å‹ï¼ˆGPT-4ã€DeepSeek ç­‰ï¼‰
     </strong>
     çš„
     <strong>
      ä¸€ç«™å¼å¤§æ¨¡å‹é›†æˆä¸ç®¡ç†å¹³å°
     </strong>
     ï¼Œå¹¶é›†æˆ
     <strong>
      è®¤è¯ä¸­å¿ƒã€å¾®æœåŠ¡ã€æµå¼å¯¹è¯
     </strong>
     ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
    </p>
    <p>
     ğŸ” ä»æ¶æ„è®¾è®¡åˆ°ä»£ç å®ç°ï¼Œä¸€èµ·æ¢è®¨å¦‚ä½•åº”å¯¹ä¸åŒæŠ€æœ¯æŒ‘æˆ˜ï¼Œæœ€ç»ˆæ‰“é€ å‡ºé«˜æ•ˆã€å¯æ‰©å±•çš„å¤§æ¨¡å‹å¹³å°ï¼Œç›®å‰é¡¹ç›®åŸºç¡€æ¶æ„å·²ç»æ­å»ºå®Œæˆã€‚
    </p>
    <p>
     <strong>
      ç³»åˆ—ç›®å½•è§„åˆ’ï¼š
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       NexLMï¼šä»é›¶å¼€å§‹æ‰“é€ ä½ çš„ä¸“å±å¤§æ¨¡å‹é›†æˆå¹³å°
      </strong>
      âœ…
     </li>
     <li>
      <strong>
       Spring Boot + OpenAI/DeepSeekï¼šå¦‚ä½•å°è£…å¤šä¸ªå¤§æ¨¡å‹ API è°ƒç”¨
      </strong>
      âœ…
     </li>
     <li>
      <strong>
       å¾®æœåŠ¡ + è®¤è¯ä¸­å¿ƒï¼šå¦‚ä½•ä¿éšœå¤§æ¨¡å‹ API çš„å®‰å…¨è°ƒç”¨
      </strong>
     </li>
     <li>
      <strong>
       æ”¯æŒæµå¼å¯¹è¯ SSE &amp; WebSocketï¼šè®© AI äº’åŠ¨æ›´ä¸æ»‘
      </strong>
     </li>
     <li>
      <strong>
       ç¼“å­˜ä¸æ€§èƒ½ä¼˜åŒ–ï¼šæé«˜ LLM API å“åº”é€Ÿåº¦
      </strong>
     </li>
     <li>
      <strong>
       NexLM å¼€æºéƒ¨ç½²æŒ‡å—ï¼ˆDockerï¼‰
      </strong>
     </li>
    </ol>
    <hr/>
    <h2>
     <a id="Spring_Boot__OpenAIDeepSeek_API__15">
     </a>
     <strong>
      ç¬¬äºŒç¯‡ï¼šSpring Boot + OpenAI/DeepSeekï¼šå¦‚ä½•å°è£…å¤šä¸ªå¤§æ¨¡å‹ API è°ƒç”¨
     </strong>
    </h2>
    <blockquote>
     <p>
      ğŸ¯ å¦‚ä½•è®©ä½ çš„é¡¹ç›®æ”¯æŒ OpenAIã€DeepSeekã€æœ¬åœ°å¤§æ¨¡å‹ç­‰å¤šç§ LLMï¼Ÿ
      <br/>
      ğŸ¯ å¦‚ä½•å°è£… APIï¼Œåšåˆ°æ‰©å±•æ€§å¼ºã€è°ƒç”¨æ–¹ä¾¿ï¼Ÿ
      <br/>
      ğŸ¯ è¿™ç¯‡æ–‡ç« å¸¦ä½ ä¸€æ­¥æ­¥æ­å»ºé€šç”¨ LLM è°ƒç”¨æœåŠ¡ï¼
     </p>
    </blockquote>
    <h3>
     <a id="_LLM_API_21">
     </a>
     <strong>
      ä¸ºä»€ä¹ˆè¦å°è£… LLM APIï¼Ÿ
     </strong>
    </h3>
    <p>
     åœ¨å¤§æ¨¡å‹å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦
     <strong>
      æ”¯æŒå¤šä¸ªæ¨¡å‹
     </strong>
     ï¼Œä¾‹å¦‚ï¼š
    </p>
    <ul>
     <li>
      <strong>
       GPT-4ï¼ˆOpenAIï¼‰
      </strong>
      ï¼šè¡Œä¸šæœ€å¼ºæ¨¡å‹ä¹‹ä¸€ï¼Œä½† API ä»·æ ¼è¾ƒè´µ
     </li>
     <li>
      <strong>
       DeepSeek
      </strong>
      ï¼šæ€§ä»·æ¯”é«˜ï¼Œéƒ¨åˆ†åœºæ™¯æ•ˆæœæ¥è¿‘ GPT-4
     </li>
     <li>
      <strong>
       æœ¬åœ°å¤§æ¨¡å‹ï¼ˆå¦‚ ChatGLMï¼‰
      </strong>
      ï¼šé€‚åˆç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ•°æ®å®‰å…¨
     </li>
    </ul>
    <p>
     å¦‚æœåœ¨ä»£ç é‡Œç›´æ¥å†™å¤šä¸ª API è¯·æ±‚ï¼Œä¼šå¯¼è‡´
     <strong>
      ä»£ç å†—ä½™ã€æ‰©å±•æ€§å·®
     </strong>
     ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ª
     <strong>
      ç»Ÿä¸€å°è£…çš„ LLM API è°ƒç”¨å±‚
     </strong>
     ï¼Œè®©é¡¹ç›®å¯ä»¥éšæ—¶åˆ‡æ¢æ¨¡å‹ï¼Œç”šè‡³åŒæ—¶æ”¯æŒå¤šä¸ªæ¨¡å‹ã€‚
    </p>
    <h3>
     <a id="_31">
     </a>
     æ•ˆæœå±•ç¤º
    </h3>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/c211c2a437dd467c86e7038653207276.gif">
      <br/>
      DeepSeek API è°ƒç”¨äº¤äº’ç¨å¾®æœ‰ç‚¹ç‚¹è€—æ—¶â€¦ç›®å‰è¿˜æ²¡æœ‰æ”¯æŒæµå¼è¾“å‡ºæ•ˆæœï¼ˆä¸‹ä¸€æœŸä¼˜åŒ–ï¼‰ï¼Œä»£ç ä»“åº“åœ°å€ï¼š
      <a href="https://github.com/pitt1997/NexLM">
       https://github.com/pitt1997/NexLM
      </a>
     </img>
    </p>
    <h3>
     <a id="_34">
     </a>
     ä»£ç å®ç°
    </h3>
    <p>
     å®ç°ç®€å•çš„ AI æ¥å£è°ƒç”¨è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®šä¹‰æ¥å£å’Œå…·ä½“æ¥å£çš„è°ƒç”¨é€»è¾‘å³å¯ï¼Œä¸‹é¢æ˜¯ä»£ç æ¼”ç¤ºã€‚
    </p>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/3baf02f5ad874d7ab874ff757c4b9b78.png"/>
    </p>
    <h5>
     <a id="1Controller__40">
     </a>
     <strong>
      1ï¼‰Controller å±‚
     </strong>
    </h5>
    <p>
     ChatController å®šä¹‰ä¸€ä¸ªé¡µé¢çš„è·¯ç”±åœ°å€
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * chaté¡µé¢
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/auth/chat"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">chat</span><span class="token punctuation">(</span><span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"ftl/chat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     ChatApiController å®šä¹‰ä¸€ä¸ª API äº¤äº’æ¥å£ã€‚
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/api/ai"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatApiController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ChatService</span> chatService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JwtTokenProvider</span> jwtTokenProvider<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/chat"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">chat</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">ChatRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// TODO æµ‹è¯•æ”¾è¡Œï¼ˆåç»­åŠ ä¸ŠJWTç¥¨æ®è®¤è¯ï¼‰</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"Bearer "</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>chatService<span class="token punctuation">.</span><span class="token function">callAIModel</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getModelType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// è®¤è¯ä¸­å¿ƒè§£æ JWT éªŒè¯æƒé™</span>
        <span class="token class-name">SessionUser</span> sessionUser <span class="token operator">=</span> jwtTokenProvider<span class="token punctuation">.</span><span class="token function">validateUserToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionUser <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">"Unauthorized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>chatService<span class="token punctuation">.</span><span class="token function">callAIModel</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getModelType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="2VO__84">
     </a>
     <strong>
      2ï¼‰VO å±‚
     </strong>
    </h5>
    <p>
     è¯·æ±‚å¯¹è±¡ï¼Œä¸»è¦å®šä¹‰è¾“å…¥çš„æ¶ˆæ¯å’Œæ¨¡å‹çš„ç±»å‹ã€‚
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatRequest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>   <span class="token comment">// ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> modelType<span class="token punctuation">;</span> <span class="token comment">// é€‰æ‹©çš„å¤§æ¨¡å‹ï¼Œä¾‹å¦‚ "chatgpt" æˆ– "local"</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="3Service__97">
     </a>
     <strong>
      3ï¼‰Service å±‚
     </strong>
    </h5>
    <p>
     è¿™é‡Œå°è£…ä¸åŒæ¨¡å‹çš„è°ƒç”¨å®ç°ã€‚
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">OpenAIClient</span> openAIClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DeepSeekClient</span> deepSeekClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalLLMClient</span> localLLMClient<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">callAIModel</span><span class="token punctuation">(</span><span class="token class-name">String</span> prompt<span class="token punctuation">,</span> <span class="token class-name">String</span> modelType<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"chatgpt"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>modelType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> openAIClient<span class="token punctuation">.</span><span class="token function">chat</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"deepseek"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>modelType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> deepSeekClient<span class="token punctuation">.</span><span class="token function">chat</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"local"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>modelType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> localLLMClient<span class="token punctuation">.</span><span class="token function">chat</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"Invalid Model Type"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <h5>
     <a id="4_API_126">
     </a>
     <strong>
      4ï¼‰è°ƒç”¨å¤§æ¨¡å‹æ¥å£ API
     </strong>
    </h5>
    <p>
     å®ç°å…·ä½“å¤§æ¨¡å‹çš„ API è°ƒç”¨é€»è¾‘ã€‚ä»¥ DeepSeek ä¸ºä¾‹ï¼Œæ³¨æ„ DeepSeek éœ€è¦æå‰åœ¨å®˜ç½‘æ³¨å†Œå¯†é’¥ã€‚ï¼ˆæ³¨ï¼šæŒ‰ç…§å®˜ç½‘è¦æ±‚çš„è¯·æ±‚å‚æ•°æ ¼å¼è¿›è¡Œè¯·æ±‚å³å¯ï¼Œæ³¨æ„éœ€è¦æ­£ç¡®è§£æè¿”å›ç»“æœä¸­çš„å†…å®¹ï¼‰ã€‚
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeepSeekClient</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">API_URL</span> <span class="token operator">=</span> <span class="token string">"https://api.deepseek.com/chat/completions"</span><span class="token punctuation">;</span> <span class="token comment">// DeepSeek API åœ°å€</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">API_KEY</span> <span class="token operator">=</span> <span class="token string">"ä½ çš„ DeepSeek API Key"</span><span class="token punctuation">;</span> <span class="token comment">// æ›¿æ¢ä¸ºä½ çš„ API Key</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">MODEL</span> <span class="token operator">=</span> <span class="token string">"deepseek-chat"</span><span class="token punctuation">;</span> <span class="token comment">// deepseek-v3 / deepseek-r1</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">chat</span><span class="token punctuation">(</span><span class="token class-name">String</span> prompt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headers<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_JSON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">,</span> <span class="token string">"Bearer "</span> <span class="token operator">+</span> <span class="token constant">API_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"model"</span><span class="token punctuation">,</span> <span class="token constant">MODEL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// deepseek-v3 / deepseek-r1</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"temperature"</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯è°ƒæ•´æ¸©åº¦</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"max_tokens"</span><span class="token punctuation">,</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ§åˆ¶å›å¤é•¿åº¦</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> messages <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>
                    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"role"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">,</span> prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> messages<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> response <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span><span class="token constant">API_URL</span><span class="token punctuation">,</span> <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">extractContent</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è§£æä¸€ä¸‹å¤§æ¨¡å‹è¿”å›ç»“æœçš„jsonå‚æ•°ã€‚</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">extractContent</span><span class="token punctuation">(</span><span class="token class-name">String</span> responseBody<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JsonNode</span> root <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readTree</span><span class="token punctuation">(</span>responseBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> root<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"choices"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">"Error parsing response"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     OpenAI è°ƒç”¨é€»è¾‘åŸºæœ¬ä¸€è‡´ã€‚
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenAIClient</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">API_URL</span> <span class="token operator">=</span> <span class="token string">"https://api.openai.com/v1/chat/completions"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">API_KEY</span> <span class="token operator">=</span> <span class="token string">"ä½ çš„ OpenAI API Key"</span><span class="token punctuation">;</span> <span class="token comment">// è¯·æ›¿æ¢ä¸ºä½ çš„ API Key</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">chat</span><span class="token punctuation">(</span><span class="token class-name">String</span> prompt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headers<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_JSON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">,</span> <span class="token string">"Bearer "</span> <span class="token operator">+</span> <span class="token constant">API_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"model"</span><span class="token punctuation">,</span> <span class="token string">"gpt-4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> messages <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>
                    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"role"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">,</span> prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> messages<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> response <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span><span class="token constant">API_URL</span><span class="token punctuation">,</span> <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <h5>
     <a id="5_207">
     </a>
     <strong>
      5ï¼‰è°ƒç”¨æœ¬åœ°æ¨¡å‹
     </strong>
    </h5>
    <p>
     ä¹Ÿå¯ä»¥è°ƒç”¨æœ¬åœ°éƒ¨ç½²çš„å¤§æ¨¡å‹ï¼ˆéœ€è¦æå‰éƒ¨ç½²æœ¬åœ°å¤§æ¨¡å‹ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« éƒ¨ç½²æ–¹æ³•ï¼‰ã€‚
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalLLMClient</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">LOCAL_MODEL_URL</span> <span class="token operator">=</span> <span class="token string">"http://localhost:5000/api/chat"</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">chat</span><span class="token punctuation">(</span><span class="token class-name">String</span> prompt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> requestBody <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        requestBody<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"prompt"</span><span class="token punctuation">,</span> prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> response <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForEntity</span><span class="token punctuation">(</span><span class="token constant">LOCAL_MODEL_URL</span><span class="token punctuation">,</span> requestBody<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <hr/>
    <h4>
     <a id="3_HTML__JavaScript_231">
     </a>
     <strong>
      3. å‰ç«¯é¡µé¢ï¼ˆHTML + JavaScriptï¼‰
     </strong>
    </h4>
    <p>
     ä¸€ä¸ªç®€å•çš„ HTML é¡µé¢ï¼Œè¾“å…¥é—®é¢˜åï¼Œè°ƒç”¨åç«¯ API è·å–å¤§æ¨¡å‹çš„å›ç­”ï¼ˆæš‚æ—¶ä½¿ç”¨ HTML åšä¸€ä¸ªæ¼”ç¤ºï¼‰ã€‚
    </p>
    <pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>AI èŠå¤©<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">body</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #f4f4f4<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
            <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.chat-container</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 4px 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">h1</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.input-group</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">input, select, button</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">button</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">background</span><span class="token punctuation">:</span> #007bff<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">button:hover</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">background</span><span class="token punctuation">:</span> #0056b3<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.response</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #eef<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">min-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chat-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>å¤§æ¨¡å‹ AI èŠå¤©<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>è¾“å…¥ä½ çš„é—®é¢˜ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¯·è¾“å…¥é—®é¢˜<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>é€‰æ‹©æ¨¡å‹ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modelType<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chatgpt<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ChatGPT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deepseek<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>DeepSeek<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>local<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>æœ¬åœ°æ¨¡å‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>å‘é€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>response<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>response<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>AI å›å¤å°†åœ¨è¿™é‡Œæ˜¾ç¤º...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> message <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token keyword">const</span> modelType <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'modelType'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token comment">// ä½ çš„ JWT ä»¤ç‰Œ</span>
        <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token string">'JSESSIONID'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œåº”ä»ç™»å½•ç³»ç»Ÿè·å–</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'JWT Token:'</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰“å° token å€¼</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/web/api/ai/chat'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
                <span class="token string-property property">'Authorization'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer B6FC7391D7856A16391F9860DA5DA3B8}</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> message<span class="token punctuation">,</span> modelType <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'response'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> cookies <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> cookie <span class="token keyword">of</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span>cookieName<span class="token punctuation">,</span> cookieValue<span class="token punctuation">]</span> <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cookieName <span class="token operator">===</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>cookieValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre>
    <hr/>
    <h4>
     <a id="4_JWT__346">
     </a>
     <strong>
      4. è®¤è¯ä¸­å¿ƒï¼ˆJWT è§£æç¤ºä¾‹ï¼‰
     </strong>
    </h4>
    <p>
     æ¥å£è°ƒç”¨æ—¶åº”å½“æ ¡éªŒå½“å‰ç”¨æˆ·çš„ç¥¨æ®ï¼ˆç™»å½•æ—¶ä¼šå­˜å‚¨ç”¨æˆ·ä¼šè¯ç¥¨æ®ä¿¡æ¯ï¼‰ã€‚
    </p>
    <pre><code class="prism language-java">        <span class="token comment">// è®¤è¯ä¸­å¿ƒè§£æ JWT éªŒè¯æƒé™</span>
        <span class="token class-name">SessionUser</span> sessionUser <span class="token operator">=</span> jwtTokenProvider<span class="token punctuation">.</span><span class="token function">validateUserToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionUser <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">"Unauthorized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h4>
     <a id="5__358">
     </a>
     <strong>
      5. æ•ˆæœæµ‹è¯•
     </strong>
    </h4>
    <p>
     <strong>
      ğŸ”¥ ç°åœ¨ï¼Œä½ çš„ AI èŠå¤©å‰åç«¯å·²å®Œæˆï¼
     </strong>
    </p>
    <ol>
     <li>
      ç›´æ¥è®¿é—®ç™»å½•
      <code>
       http://localhost:8080/web/auth/login
      </code>
      é¡µé¢
     </li>
     <li>
      è¾“å‡ºç”¨æˆ·å/å¯†ç ï¼šadmin/123456
     </li>
     <li>
      è·³è½¬å¤§æ¨¡å‹é¡µé¢ï¼Œé€‰æ‹©å¯¹åº”å¤§æ¨¡å‹ï¼Œå¼€å§‹å¯¹è¯
     </li>
    </ol>
    <h4>
     <a id="6__366">
     </a>
     <strong>
      6. æ€»ç»“
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       æ¶æ„
      </strong>
      ï¼šå¾®æœåŠ¡ + è®¤è¯ä¸­å¿ƒ + API ç½‘å…³ + æœ¬åœ°/è¿œç¨‹å¤§æ¨¡å‹
     </li>
     <li>
      <strong>
       Java ä»£ç 
      </strong>
      ï¼šå®Œæ•´çš„ Controllerã€Serviceã€API è°ƒç”¨ç¤ºä¾‹
     </li>
     <li>
      <strong>
       å‰ç«¯
      </strong>
      ï¼šç®€å• HTML + JS æ¸²æŸ“
     </li>
     <li>
      <strong>
       è®¤è¯
      </strong>
      ï¼šJWT æ ¡éªŒ
     </li>
    </ul>
    <p>
     è¿™æ ·ï¼Œä½ çš„ç³»ç»Ÿå¯ä»¥æ”¯æŒ
     <strong>
      ç”¨æˆ·è®¤è¯
     </strong>
     ï¼Œå¹¶
     <strong>
      è°ƒç”¨æœ¬åœ°æˆ–ç¬¬ä¸‰æ–¹å¤§æ¨¡å‹
     </strong>
     è¿›è¡Œ AI äº¤äº’ã€‚
    </p>
    <h3>
     <a id="_375">
     </a>
     <strong>
      ç»“è¯­
     </strong>
    </h3>
    <p>
     æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä»‹ç»äº†
     <strong>
      å¦‚ä½•å°è£…å¤šä¸ª LLMï¼ˆå¤§æ¨¡å‹ï¼‰ API è°ƒç”¨
     </strong>
     ã€‚
    </p>
    <p>
     ä½†æ˜¯ï¼Œç›®å‰çš„
     <strong>
      å¯¹è¯æ˜¯ä¸€æ¬¡æ€§è¿”å›çš„
     </strong>
     ï¼Œåç»­æˆ‘ä»¬å°†å®Œå–„
     <strong>
      å¾®æœåŠ¡ + è®¤è¯ä¸­å¿ƒï¼šå¦‚ä½•ä¿éšœå¤§æ¨¡å‹ API çš„å®‰å…¨è°ƒç”¨
     </strong>
     ï¼Œ å¹¶ä¸”
     <strong>
      æ”¯æŒæµå¼å¯¹è¯ï¼ˆSSEï¼‰å¢åŠ  WebSocket å®æ—¶æ¶ˆæ¯
     </strong>
     å®ç°
     <strong>
      å®æ—¶è¾“å‡º AI å›å¤
     </strong>
     ï¼æ•¬è¯·æœŸå¾…ï¼
    </p>
    <p>
     ğŸ“Œ
     <strong>
      ä¸‹ä¸€ç« é¢„å‘Šï¼šSSE + WebSocket å®ç°æµå¼å¯¹è¯ï¼
     </strong>
    </p>
    <hr/>
    <p>
     ğŸ“¢
     <strong>
      ä½ å¯¹è¿™ä¸ªé¡¹ç›®æ„Ÿå…´è¶£å—ï¼Ÿæ¬¢è¿ Star &amp; å…³æ³¨ï¼
     </strong>
     ğŸ“Œ
     <strong>
      <a href="https://github.com/pitt1997/NexLM">
       GitHub é¡¹ç›®åœ°å€
      </a>
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f427261645f50695474372f:61727469636c652f64657461696c732f313436313636363738" class_="artid" style="display:none">
 </p>
</div>


