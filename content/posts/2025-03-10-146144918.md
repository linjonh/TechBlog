---
layout: post
title: "CentOS7离线部署安装Dify"
date: 2025-03-10 11:04:05 +0800
description: "文件传输至可联网服务器上，并进行解压。进入到解压好的文件夹，执行上述命令，等待执行成功。这是因为我们的服务器无法联网，因此我们需要在可以联网的服务器上先把这几个镜像给下载好。（注意：这里是将打包好的镜像上传到了目录下/usr/local/dify/tools）浏览器访问：http://ip/install，设置用户名密码，然后登录即可。文件传输到离线服务器指定文件夹下（例如：/usr/local/dify）· 内存 >= 4 GiB。· CPU >= 2 核。前面步骤相同，将下载好的。"
keywords: "CentOS7离线部署安装Dify"
categories: ['软件开发']
tags: ['运维', '人工智能', 'Docker']
artid: "146144918"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146144918
    alt: "CentOS7离线部署安装Dify"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146144918
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146144918
cover: https://bing.ee123.net/img/rand?artid=146144918
image: https://bing.ee123.net/img/rand?artid=146144918
img: https://bing.ee123.net/img/rand?artid=146144918
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     CentOS7离线部署安装Dify
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="Dify_0">
     </a>
     离线部署安装Dify
    </h3>
    <blockquote>
     <p>
      在安装 Dify 之前，请确保您的机器满足以下最低系统要求：
      <br/>
      · CPU &gt;= 2 核
      <br/>
      · 内存 &gt;= 4 GiB
     </p>
    </blockquote>
    <h4>
     <a id="1dockerdocker_compose_6">
     </a>
     1.安装docker和docker compose
    </h4>
    <p>
     启动
     <code>
      Dify
     </code>
     服务器最简单的方式是通过
     <code>
      docker compose
     </code>
     。因此现在服务器上安装好
     <code>
      docker
     </code>
     和
     <code>
      docker compose
     </code>
     ，具体安装步骤请查看：
     <a href="https://blog.csdn.net/slient_love/article/details/146098182?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=146098182&amp;sharerefer=PC&amp;sharesource=slient_love&amp;sharefrom=from_link">
      CentOS7离线部署安装docker和docker-compose
     </a>
    </p>
    <p>
     按照步骤安装完成之后，启动docker和docker compose。
    </p>
    <h4>
     <a id="2Dify_10">
     </a>
     2.安装Dify
    </h4>
    <p>
     <a href="https://github.com/langgenius/dify/tags">
      下载最新版tar包
     </a>
     ：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9c8cb33808894a29b0e3480694ac3c80.png">
      <br/>
      将下载好的
      <code>
       dify-1.0.0.tar.gz
      </code>
      文件传输到离线服务器指定文件夹下（例如：/usr/local/dify）
      <br/>
      在
      <code>
       /usr/local/dify
      </code>
      目录下执行以下命令进行解压：
     </img>
    </p>
    <pre><code class="prism language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> dify-1.0.0.tar.gz 
</code></pre>
    <p>
     然后进入解压好的文件夹，执行以下命令：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> dify-1.0.0
<span class="token builtin class-name">cd</span> <span class="token function">docker</span>
<span class="token function">cp</span> .env.example .env
<span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre>
    <p>
     此时会报以下错误：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/30b0fa206fdf47858a840b99d9d78f94.png">
      <br/>
      这是因为我们的服务器无法联网，因此我们需要在可以联网的服务器上先把这几个镜像给下载好。
     </img>
    </p>
    <p>
     前面步骤相同，将下载好的
     <code>
      dify-1.0.0.tar.gz
     </code>
     文件传输至可联网服务器上，并进行解压。进入到解压好的文件夹，执行上述命令，等待执行成功。然后执行以下命令，打包9个镜像：
     <br/>
     （注意：请根据自己环境实际情况书写）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/37aaba994ce94ac384ac2f30e4e5d71b.png"/>
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> save <span class="token parameter variable">-o</span> dify-api.tar langgenius/dify-api:1.0.0
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> dify-sandbox.tar langgenius/dify-sandbox:0.2.10
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> weaviate.tar semitechnologies/weaviate:1.19.0
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> postgres.tar postgres:15-alpine
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> squid.tar ubuntu/squid:latest
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> dify-plugin-daemon.tar langgenius/dify-plugin-daemon:0.0.3-local
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> dify-web.tar langgenius/dify-web:1.0.0
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> redis.tar redis:6-alpine
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> nginx.tar nginx:latest 
</code></pre>
    <p>
     将打包好的镜像导入至离线服务器上，执行以下命令：
     <br/>
     （注意：这里是将打包好的镜像上传到了目录下/usr/local/dify/tools）
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/dify-api.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/dify-sandbox.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/weaviate.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/postgres.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/squid.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/dify-plugin-daemon.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/dify-web.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/redis.tar
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> /usr/local/dify/tools/nginx.tar
</code></pre>
    <p>
     然后再进入到
     <code>
      dify-1.0.0/docker
     </code>
     目录下，执行
     <code>
      docker compose up -d
     </code>
     命令。
    </p>
    <h4>
     <a id="3Dify_63">
     </a>
     3.运行Dify
    </h4>
    <p>
     浏览器访问：http://ip/install，设置用户名密码，然后登录即可。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f736c69656e745f6c6f76652f:61727469636c652f64657461696c732f313436313434393138" class_="artid" style="display:none">
 </p>
</div>


