---
layout: post
title: "NAS搭建指南一服务器的选择与搭建"
date: 2023-08-13 01:28:41 +0800
description: "本文详细介绍了如何选择和配置腾讯云服务器，包括设置SSH权限、配置PuTTY和WinSCP进行远程管"
keywords: "nas搭建"
categories: ['Nas']
tags: ['服务器', 'Nas', 'Linux']
artid: "132240455"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=132240455
    alt: "NAS搭建指南一服务器的选择与搭建"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=132240455
featuredImagePreview: https://bing.ee123.net/img/rand?artid=132240455
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     NAS搭建指南一——服务器的选择与搭建
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     一、服务器的选择
    </h2>
    <ol>
     <li>
      有自己的本地的公网 IP 的请跳过此篇文章
     </li>
     <li>
      按需求选择一个云服务器，目的就是为了进行 frp 的搭建，完成内网穿透
     </li>
     <li>
      我选择的是腾讯云服务器，我的配置如下，仅供参考：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7aa797ce8e4fc7162aa1aec6475f5033.png">
       <br/>
       4
       <a href="https://cloud.tencent.com/" rel="nofollow">
        . 腾讯云服务器官网地址
       </a>
      </img>
     </li>
    </ol>
    <h2>
     <a id="_6">
     </a>
     二、服务器的一些配置
    </h2>
    <h3>
     <a id="1__root__7">
     </a>
     1. 使用 root 权限登录
    </h3>
    <ol>
     <li>
      根据服务器提供的方式，在网页上登录服务器，进入命令终端
     </li>
     <li>
      终端输入
      <code>
       sudo passwd root
      </code>
      ，设置 root 密码
     </li>
     <li>
      输入 root 的密码，按 Enter
     </li>
     <li>
      重复输入 root 的密码，按 Enter
     </li>
     <li>
      返回如下信息，即表示 root 密码设置成功
      <br/>
      <code>
       passwd: password updated successfully
      </code>
     </li>
     <li>
      终端输入
      <code>
       sudo vi /etc/ssh/sshd_config
      </code>
      ，打开 sshd_config 配置文件
     </li>
     <li>
      按
      <code>
       /
      </code>
      切换搜索模式，输入
      <code>
       Authentication
      </code>
      ，并按 Enter 查找下文：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token comment"># Authentication:</span>

<span class="token comment">#LoginGraceTime 2m</span>
<span class="token comment">#PermitRootLogin prohibit-password</span>
<span class="token comment">#StrictModes yes</span>
<span class="token comment">#MaxAuthTries 6</span>
<span class="token comment">#MaxSessions 10</span>
</code></pre>
    <ol start="8">
     <li>
      按
      <code>
       i
      </code>
      切换至编辑模式，将
      <code>
       PermitRootLogin
      </code>
      参数修改为
      <code>
       yes
      </code>
      ，并删除
      <code>
       #
      </code>
      注释符，修改后如下所示：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token comment">#LoginGraceTime 2m</span>
PermitRootLogin <span class="token function">yes</span>
<span class="token comment">#StrictModes yes</span>
<span class="token comment">#MaxAuthTries 6</span>
<span class="token comment">#MaxSessions 10</span>
</code></pre>
    <ol start="9">
     <li>
      按
      <code>
       Esc
      </code>
      ，输入
      <code>
       :wq
      </code>
      ，保存文件并返回
     </li>
     <li>
      执行命令
      <code>
       sudo service ssh restart
      </code>
      ，重启 ssh 服务
     </li>
    </ol>
    <h3>
     <a id="2_PuTTY_35">
     </a>
     2. PuTTY
    </h3>
    <ol>
     <li>
      PuTTY 是一款Windows的一个免费的 SSH 和 Telnet 客户端，用于远程登录和管理远程计算机
     </li>
     <li>
      <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" rel="nofollow">
       PuTTY 官网地址
      </a>
     </li>
     <li>
      下载安装过程：略
     </li>
     <li>
      根据服务器提供的方式，在网页上登录服务器，进入命令终端（root账户登录）
     </li>
     <li>
      服务器中生成 SSH KEY：执行命令
      <code>
       ssh-keygen
      </code>
      ，一路回车即可
     </li>
     <li>
      生成的 SSH KEY 保存在
      <code>
       /root/.ssh
      </code>
      中
     </li>
     <li>
      安装 putty 工具：执行命令
      <code>
       apt-get install putty-tools
      </code>
     </li>
     <li>
      将 SSH KEY 转化成 PUTTY KEY：执行命令
      <code>
       puttygen ~/.ssh/id_rsa -o ~/.ssh/id.ppk
      </code>
     </li>
     <li>
      修改 authorized_keys：执行命令
      <code>
       cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
      </code>
     </li>
     <li>
      执行命令
      <code>
       sudo service ssh restart
      </code>
      ，重启 ssh 服务
     </li>
     <li>
      下载 id.ppk 到本地 Windows 电脑
     </li>
     <li>
      Windows 电脑上打开 PuTTY，点击 Connection --&gt; Seconds between keepalives 填写 10
     </li>
     <li>
      点击 Data --&gt; Auto-login username 填写 root --&gt;双击 SSH --&gt;双击 Auth --&gt;点击 Credentials --&gt; private key file for authentication 选择刚刚生成的id.ppk
     </li>
     <li>
      点击 Session --&gt; Host Name 填写服务器的 IP 地址–&gt; Port 填写 22 --&gt; Connection type 选择 SSH --&gt;其他配置默认即可 --&gt;点击 Save，保存配置(下一次直接选择保存的配置，点击 load，就可以调出前面设置的所有配置)–&gt;点击 Open --&gt;这样就通过 SSH 连接了服务器
     </li>
    </ol>
    <h3>
     <a id="3_WinSCP_50">
     </a>
     3. WinSCP
    </h3>
    <ol>
     <li>
      WinSCP 是一个免费的开源 SFTP、SCP 和 FTP 客户端，用于在 Windows 操作系统上进行文件传输和管理
     </li>
     <li>
      <a href="https://winscp.net/eng/docs/lang:chs" rel="nofollow">
       WinSCP官网地址
      </a>
     </li>
     <li>
      下载安装过程：略
     </li>
     <li>
      Windows 电脑上打开 WinSCP，主机名填写服务器地址，用户名填写 root，密码为上面设置的 root 的密码
     </li>
     <li>
      点击保存
     </li>
     <li>
      点击登录，即可自由使自己的 Windows 电脑与服务器自由传输文件
     </li>
    </ol>
    <h3>
     <a id="4_VSCODE_57">
     </a>
     4. VSCODE
    </h3>
    <ol>
     <li>
      VSCODE 安装步骤：略
     </li>
     <li>
      安装插件 Remote - SSH
     </li>
     <li>
      点击侧边栏图标如下
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d3b19d552087f97705b461b4fc0a20de.png"/>
     </li>
     <li>
      点击侧边栏中的“+”
     </li>
     <li>
      输入
      <code>
       ssh root@服务器地址
      </code>
     </li>
     <li>
      根据弹出的提示，即可连接到云服务器，在本地的电脑上，打开并方便的编辑云服务器上的文件
     </li>
    </ol>
    <h2>
     <a id="frp_65">
     </a>
     三、frp的搭建
    </h2>
    <h3>
     <a id="1_Linux__66">
     </a>
     1. Linux 服务器中服务端的搭建
    </h3>
    <ol>
     <li>
      <a href="https://gofrp.org/" rel="nofollow">
       FRP 官网地址
      </a>
     </li>
     <li>
      <a href="https://gofrp.org/docs/" rel="nofollow">
       FRP 的安装及使用文档
      </a>
     </li>
     <li>
      <a href="https://github.com/fatedier/frp">
       FRP 的 GitHub 地址
      </a>
     </li>
     <li>
      服务端我选择搭建在云服务器上（因为它有公网 IP）
     </li>
     <li>
      在
      <a href="https://github.com/fatedier/frp/releases">
       GitHub 的下载地址
      </a>
      中下载相应的 FTP 安装包
     </li>
     <li>
      我选择的是 frp_0.51.2_linux_amd64.tar.gz 与 frp_0.51.2_windows_amd64.zip
     </li>
     <li>
      将 frp_0.51.2_linux_amd64.tar.gz 解压，并通过 WinSCP 上传到服务器中
     </li>
     <li>
      通过 PuTTY 登录服务器
     </li>
     <li>
      将服务器中的 frp_0.51.2_linux_amd64 移动到 frp 文件夹中：执行命令
      <code>
       mv /root/frp_0.51.2_linux_amd64 /root/frp
      </code>
     </li>
     <li>
      执行命令
      <code>
       rm -rf /root/frp/frpc*
      </code>
      ，删除客户端内容
     </li>
     <li>
      执行命令
      <code>
       chmod u+x /root/frp/*
      </code>
      ，为 FRP 增加可执行权限
     </li>
     <li>
      通过 VSCODE 编辑
      <code>
       /root/frp/frps.ini
      </code>
      ，内容如下：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>common<span class="token punctuation">]</span>
<span class="token comment"># 常用配置</span>
<span class="token comment"># 服务端监听地址</span>
bind_addr <span class="token operator">=</span> <span class="token number">0.0</span>.0.0
<span class="token comment"># 服务端监听端口：接收 frpc 的连接</span>
bind_port <span class="token operator">=</span> <span class="token number">7000</span>
<span class="token comment"># 日志文件地址 &amp; 日志等级 &amp; 日志文件保留天数</span>
log_file <span class="token operator">=</span> ./frps.log
log_level <span class="token operator">=</span> info
log_max_days <span class="token operator">=</span> <span class="token number">7</span>
<span class="token comment"># 服务端和客户端心跳连接的超时时间</span>
heartbeat_timeout <span class="token operator">=</span> <span class="token number">90</span>
<span class="token comment"># 鉴权方式</span>
authentication_method <span class="token operator">=</span> token
<span class="token comment"># 鉴权使用的 token 值</span>
token <span class="token operator">=</span> <span class="token number">123456789</span>
<span class="token comment"># 最大连接池大小</span>
max_pool_count <span class="token operator">=</span> <span class="token number">5</span>
<span class="token comment"># 启用 Dashboard 监听的本地地址</span>
dashboard_addr <span class="token operator">=</span> <span class="token number">0.0</span>.0.0
<span class="token comment"># 启用 Dashboard 监听的本地端口</span>
dashboard_port <span class="token operator">=</span> <span class="token number">7500</span>
<span class="token comment"># HTTP BasicAuth 用户名</span>
dashboard_user <span class="token operator">=</span> root
<span class="token comment"># HTTP BasicAuth 密码</span>
dashboard_pwd <span class="token operator">=</span> <span class="token number">123456</span>

<span class="token comment"># 基础配置</span>
<span class="token comment"># 服务端监听 KCP 协议端口</span>
kcp_bind_port <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># 服务端监听 QUIC 协议端口</span>
quic_bind_port <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># quic 协议 keepalive 间隔，单位: 秒</span>
quic_keepalive_period <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment"># quic 协议的最大空闲超时时间，单位: 秒</span>
quic_max_idle_timeout <span class="token operator">=</span> <span class="token number">30</span>
<span class="token comment"># quic 协议最大并发 stream 数</span>
quic_max_incoming_streams <span class="token operator">=</span> <span class="token number">100000</span>
<span class="token comment"># 代理监听地址</span>
<span class="token comment"># proxy_bind_addr = 0.0.0.0</span>
<span class="token comment"># 禁用标准输出中的日志颜色</span>
disable_log_color <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment"># 服务端返回详细错误信息给客户端</span>
detailed_errors_to_client <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment"># tcp_mux 的心跳检查间隔时间</span>
tcp_mux_keepalive_interval <span class="token operator">=</span> <span class="token number">60</span>
<span class="token comment"># 和客户端底层 TCP 连接的 keepalive 间隔时间，单位秒</span>
tcp_keepalive <span class="token operator">=</span> <span class="token number">7200</span>
<span class="token comment"># 用户建立连接后等待客户端响应的超时时间</span>
user_conn_timeout <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment"># 代理 UDP 服务时支持的最大包长度</span>
udp_packet_size <span class="token operator">=</span> <span class="token number">1500</span>
<span class="token comment"># TLS 服务端证书文件路径</span>
<span class="token comment"># tls_cert_file = </span>
<span class="token comment"># TLS 服务端密钥文件路径</span>
<span class="token comment"># tls_key_file = </span>
<span class="token comment"># TLS CA 证书路径</span>
<span class="token comment"># tls_trusted_ca_file = </span>
<span class="token comment"># 打洞策略数据的保留时间</span>
nat_hole_analysis_data_reserve_hours <span class="token operator">=</span> <span class="token number">168</span>

<span class="token comment"># 权限验证</span>
<span class="token comment"># 开启心跳消息鉴权</span>
authenticate_heartbeats <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment"># 开启建立工作连接的鉴权</span>
authenticate_new_work_conns <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment"># 管理配置</span>
<span class="token comment"># 允许代理绑定的服务端端口</span>
<span class="token comment"># allow_ports = 1000-2000,2001,3000-4000</span>
<span class="token comment"># 限制单个客户端最大同时存在的代理数   0 表示没有限制</span>
max_ports_per_client <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># 只接受启用了 TLS 的客户端连接</span>
tls_only <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment"># Dashboard, 监控</span>
<span class="token comment"># 是否启用 TLS 模式</span>
dashboard_tls_mode <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment"># TLS 证书文件路径</span>
<span class="token comment"># dashboard_tls_cert_file = </span>
<span class="token comment"># TLS 密钥文件路径</span>
<span class="token comment"># dashboard_tls_key_file = </span>
<span class="token comment"># 是否提供 Prometheus 监控接口   需要同时启用了 Dashboard 才会生效</span>
enable_prometheus <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment"># 静态资源目录   Dashboard 使用的资源默认打包在二进制文件中，通过指定此参数使用自定义的静态资源</span>
<span class="token comment"># asserts_dir = </span>
<span class="token comment"># 启动 Go HTTP pprof   用于应用调试</span>
pprof_enable <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment"># HTTP &amp; HTTPS</span>
<span class="token comment"># 为 HTTP 类型代理监听的端口   启用后才支持 HTTP 类型的代理，默认不启用</span>
vhost_http_port <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># 为 HTTPS 类型代理监听的端口   启用后才支持 HTTPS 类型的代理，默认不启用</span>
vhost_https_port <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># HTTP 类型代理在服务端的 ResponseHeader 超时时间</span>
vhost_http_timeout <span class="token operator">=</span> <span class="token number">60</span>
<span class="token comment"># 二级域名后缀</span>
<span class="token comment"># subdomain_host = </span>
<span class="token comment"># 自定义 404 错误页面地址</span>
<span class="token comment"># custom_404_page = </span>

<span class="token comment"># TCPMUX</span>
<span class="token comment"># 为 TCPMUX 类型代理监听的端口   启用后才支持 TCPMUX 类型的代理，默认不启用</span>
tcpmux_httpconnect_port <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># 是否透传 CONNECT 请求   通常在本地服务是 HTTP Proxy 时使用</span>
tcpmux_passthrough <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre>
    <ol start="14">
     <li>
      <p>
       执行命令
       <code>
        ./frps -c ./frps.ini
       </code>
       ，启动 FRP 服务端
      </p>
     </li>
     <li>
      <p>
       登录腾讯云服务器官网–&gt;点击控制台–&gt;点击我的资源中的云服务器–&gt;进入已有实例
      </p>
     </li>
     <li>
      <p>
       点击安全组–&gt;点击出站规则–&gt;点击编辑规则
      </p>
     </li>
     <li>
      <p>
       点击入站规则–&gt;点击添加规则
      </p>
     </li>
     <li>
      <p>
       类型选择自定义–&gt;目标
       <code>
        0.0.0.0/0
       </code>
       --&gt;协议端口填写
       <code>
        TCP:7000,7500
       </code>
       –&gt;策略选择允许–&gt;备注填写
       <code>
        FRP
       </code>
       –&gt;点击确定完成 FRP 监控面板端口开放，配置如下所示
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/027b4306cf4fce42687704356585997d.png"/>
      </p>
     </li>
     <li>
      <p>
       打开
       <code>
        服务器地址:7500
       </code>
       ，内容如下所示，FRP 服务端配置成功
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7fdc1ee9da078621891979d509d60740.png"/>
      </p>
     </li>
    </ol>
    <h3>
     <a id="2__FRP__196">
     </a>
     2. 服务端的 FRP 开机自启动
    </h3>
    <ol>
     <li>
      通过 VSCODE 创建
      <code>
       /etc/systemd/system/frps.service
      </code>
      ，内容如下：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token comment"># 服务名称</span>
Description <span class="token operator">=</span> frp_server
After <span class="token operator">=</span> network.target syslog.target
Wants <span class="token operator">=</span> network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
Type <span class="token operator">=</span> simple
<span class="token comment"># 启动frps的命令</span>
ExecStart <span class="token operator">=</span> /root/frp/frps <span class="token parameter variable">-c</span> /root/frp/frps.ini

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy <span class="token operator">=</span> multi-user.target
</code></pre>
    <ol start="2">
     <li>
      使用 systemd 命令，管理 frps，具体命令如下：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token comment"># 启动frp</span>
systemctl start frps
<span class="token comment"># 停止frp</span>
systemctl stop frps
<span class="token comment"># 重启frp</span>
systemctl restart frps
<span class="token comment"># 查看frp状态</span>
systemctl status frps
</code></pre>
    <ol start="3">
     <li>
      配置 frps 开机自启，具体命令如下：
     </li>
    </ol>
    <pre><code class="prism language-bash">systemctl <span class="token builtin class-name">enable</span> frps
</code></pre>
    <h3>
     <a id="3_Windows__228">
     </a>
     3. Windows 电脑中客户端的搭建
    </h3>
    <ol>
     <li>
      解压 Windows 版本 FRP 安装包 frp_0.51.2_windows_amd64.zip
     </li>
     <li>
      我将所有解压得到的内容移动到目录
      <code>
       D:\FRP
      </code>
      中
     </li>
     <li>
      打开 CMD
     </li>
     <li>
      输入以下命令，删除服务端内容：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> D:<span class="token punctuation">\</span>FRP
<span class="token function">rm</span> frps*
</code></pre>
    <ol start="5">
     <li>
      通过 VSCODE，编辑
      <code>
       D:\FRP\frpc.ini
      </code>
      ，内容如下：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>common<span class="token punctuation">]</span>
<span class="token comment"># 常用配置</span>
<span class="token comment"># 服务器 IP 地址</span>
server_addr <span class="token operator">=</span> xxx.xxx.xxx.xxx
<span class="token comment"># 连接服务端的端口</span>
server_port <span class="token operator">=</span> <span class="token number">7000</span>
<span class="token comment"># 日志文件地址 &amp; 日志等级 &amp; 日志文件保留天数</span>
log_file <span class="token operator">=</span> ./frpc.log
log_level <span class="token operator">=</span> info
log_max_days <span class="token operator">=</span> <span class="token number">7</span>
<span class="token comment"># tcp_mux 的心跳检查间隔时间，单位：秒</span>
tcp_mux_keepalive_interval <span class="token operator">=</span> <span class="token number">60</span>
<span class="token comment"># 向服务端发送心跳包的间隔时间   建议启用 tcp_mux_keepalive_interval，将此值设置为 -1</span>
heartbeat_interval <span class="token operator">=</span> <span class="token parameter variable">-1</span>
<span class="token comment"># 和服务端心跳的超时时间</span>
heartbeat_timeout <span class="token operator">=</span> <span class="token number">90</span>
<span class="token comment"># 鉴权方式   需要和服务端一致</span>
authentication_method <span class="token operator">=</span> token
<span class="token comment"># 鉴权使用的 token 值   需要和服务端设置一样的值才能鉴权通过</span>
token <span class="token operator">=</span> <span class="token number">123456789</span>
<span class="token comment"># 启用 AdminUI 监听的本地地址</span>
admin_addr <span class="token operator">=</span> <span class="token number">0.0</span>.0.0
<span class="token comment"># 启用 AdminUI 监听的本地端口</span>
admin_port <span class="token operator">=</span> <span class="token number">7500</span>
<span class="token comment"># HTTP BasicAuth 用户名</span>
admin_user <span class="token operator">=</span> root
<span class="token comment"># HTTP BasicAuth 密码</span>
admin_pwd <span class="token operator">=</span> <span class="token number">123456</span>

<span class="token comment"># 基础配置</span>
<span class="token comment"># xtcp 打洞所需的 stun 服务器地址   stun.easyvoip.com:3478	</span>
<span class="token comment"># nat_hole_stun_server = </span>
<span class="token comment"># 连接服务端时所绑定的本地 IP</span>
<span class="token comment"># connect_server_local_ip = </span>
<span class="token comment"># 连接服务端的超时时间</span>
dial_server_timeout <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment"># 和服务端底层 TCP 连接的 keepalive 间隔时间，单位秒   负数不启用</span>
dial_server_keepalive <span class="token operator">=</span> <span class="token number">7200</span>
<span class="token comment"># 连接服务端使用的代理地址   格式为 {protocol}://user:passwd@192.168.1.128:8080 protocol 目前支持 http、socks5、ntlm</span>
<span class="token comment"># http_proxy = </span>
<span class="token comment"># 禁用标准输出中的日志颜色</span>
disable_log_color <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment"># 连接池大小</span>
pool_count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># 用户名   设置此参数后，代理名称会被修改为 {user}.{proxyName}，避免代理名称和其他用户冲突</span>
<span class="token comment"># user = Vaciller</span>
<span class="token comment"># 使用 DNS 服务器地址   默认使用系统配置的 DNS 服务器，指定此参数可以强制替换为自定义的 DNS 服务器地址</span>
<span class="token comment"># dns_server = </span>
<span class="token comment"># 第一次登陆失败后是否退出</span>
login_fail_exit <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment"># 连接服务端的通信协议</span>
protocol <span class="token operator">=</span> tcp
<span class="token comment"># 协议 keepalive 间隔，单位: 秒</span>
quic_keepalive_period <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment"># quic 协议的最大空闲超时时间，单位: 秒</span>
quic_max_idle_timeout <span class="token operator">=</span> <span class="token number">30</span>
<span class="token comment"># quic 协议最大并发 stream 数</span>
quic_max_incoming_streams <span class="token operator">=</span> <span class="token number">100000</span>
<span class="token comment"># 启用 TLS 协议加密连接</span>
tls_enable <span class="token operator">=</span> tool
<span class="token comment"># TLS 客户端证书文件路径</span>
<span class="token comment"># tls_cert_file = </span>
<span class="token comment"># TLS 客户端密钥文件路径</span>
<span class="token comment"># tls_key_file = </span>
<span class="token comment"># TLS CA 证书路径</span>
<span class="token comment"># tls_trusted_ca_file = </span>
<span class="token comment"># TLS Server 名称   为空则使用 server_addr</span>
<span class="token comment"># tls_server_name = </span>
<span class="token comment"># TLS 不发送 0x17   当为 true 时，不能端口复用</span>
disable_custom_tls_first_byte <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment"># 服务时支持的最大包长度   服务端和客户端的值需要一致</span>
udp_packet_size <span class="token operator">=</span> <span class="token number">1500</span>
<span class="token comment"># 指定启用部分代理   当配置了较多代理，但是只希望启用其中部分时可以通过此参数指定，默认为全部启用</span>
<span class="token comment"># start = </span>
<span class="token comment"># 附加元数据   会传递给服务端插件，提供附加能力</span>
<span class="token comment"># meta_xxx = </span>

<span class="token comment"># 权限验证</span>
<span class="token comment"># 开启心跳消息鉴权   需要和服务端一致</span>
authenticate_heartbeats <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment"># 开启建立工作连接的鉴权   需要和服务端一致</span>
authenticate_new_work_conns <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment"># UI</span>
<span class="token comment"># 静态资源目录   AdminUI 使用的资源默认打包在二进制文件中，通过指定此参数使用自定义的静态资源</span>
<span class="token comment"># asserts_dir = </span>
<span class="token comment"># 启动 Go HTTP pprof   用于应用调试</span>
pprof_enable <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre>
    <ol start="6">
     <li>
      在 CMD 中执行命令
      <code>
       ./frpc -c ./frpc.ini
      </code>
      ，启动客户端
     </li>
     <li>
      打开
      <code>
       Windows IP:7500/
      </code>
      ，内容如下所示，FRP 客户端配置成功
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5fc6f5d270edd5290c5be92a94acf92d.png"/>
     </li>
     <li>
      具体需要详细进行内网穿透的内容与配置，会在后文中进行详细说明
     </li>
    </ol>
    <h3>
     <a id="4__FRP__332">
     </a>
     4. 客户端的 FRP 开机自启动
    </h3>
    <ol>
     <li>
      通过 VSCODE，编辑
      <code>
       D:\FRP\frp.bat
      </code>
      ，内容如下：
     </li>
    </ol>
    <pre><code class="prism language-bash">@echo off
setlocal

<span class="token builtin class-name">set</span> <span class="token assign-left variable">appName</span><span class="token operator">=</span>D:<span class="token punctuation">\</span>FRP<span class="token punctuation">\</span>frpc.exe

<span class="token builtin class-name">echo</span> <span class="token string">"Start %appName% ..."</span>
D:<span class="token punctuation">\</span>FRP<span class="token punctuation">\</span>frpc.exe <span class="token parameter variable">-c</span> D:<span class="token punctuation">\</span>FRP<span class="token punctuation">\</span>frpc.ini

endlocal
Pause
<span class="token builtin class-name">exit</span>
</code></pre>
    <ol start="2">
     <li>
      按
      <code>
       win+r
      </code>
      ，输入
      <code>
       gpedit.msc
      </code>
      ，打开本地组策略编辑器
     </li>
     <li>
      选择用户配置–&gt;双击 Windows 设置–&gt;选择脚本（登录/注销）–&gt;双击登录–&gt;选择添加–&gt;选择浏览–&gt;找到刚刚编辑的 frp.bat --&gt;选择打开–&gt;选择确定–&gt;选择确定
     </li>
     <li>
      此时重启 Windows 电脑，FRP 客户端即可开机自启
     </li>
    </ol>
    <h2>
     <a id="NGINX__350">
     </a>
     四、NGINX 的搭建
    </h2>
    <ol>
     <li>
      <a href="https://nginx.org/en/" rel="nofollow">
       NGINX 官方网站地址
      </a>
     </li>
     <li>
      <a href="https://nginx.org/en/docs/install.html" rel="nofollow">
       NGINX 官方安装文档地址
      </a>
     </li>
     <li>
      打开 PuTTY 登录服务器
     </li>
     <li>
      输入
      <code>
       apt-get install nginx
      </code>
      ，安装 NGINX
     </li>
     <li>
      输入
      <code>
       nginx -v
      </code>
      ，查看 NGINX 版本信息
     </li>
     <li>
      输入
      <code>
       systemctl status nginx
      </code>
      ，查看服务运行状态，运行效果如下
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a77b0d8ce28fed9bc11b81978449d53b.png"/>
     </li>
     <li>
      浏览器访问服务器地址，会自动跳转到如下页面
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9840f69ece7bb331e30c8df8c63550d6.png"/>
     </li>
     <li>
      输入
      <code>
       systemctl enable nginx
      </code>
      ，使 NGINX 完成开机自启动
     </li>
     <li>
      使用命令
      <code>
       systemctl restart nginx
      </code>
      ，即可使 NGINX 完成重启
     </li>
     <li>
      输入命令
      <code>
       ln -s -d /etc/nginx nginx
      </code>
      ，将 NGINX 的配置文件链接到一个容易找到的位置（在你想要进行连接的位置执行）
     </li>
     <li>
      具体使用配置在后文中会有详细介绍
     </li>
    </ol>
    <h2>
     <a id="_364">
     </a>
     五、域名购买注册及备案
    </h2>
    <ol>
     <li>
      登录腾讯云服务器官网–&gt;搜索“云解析 DNS”–&gt;点击控制台
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d158c02a29024aa6eb083ef81c33e919.png"/>
     </li>
     <li>
      进入控制台后点击我的域名–&gt;点击添加域名–&gt;
      <a href="https://cloud.tencent.com/document/product/242/9595" rel="nofollow">
       腾讯云官方单个域名注册文档
      </a>
     </li>
     <li>
      然后进行
      <a href="https://cloud.tencent.com/document/product/242/6707" rel="nofollow">
       域名实名认证注册
      </a>
     </li>
     <li>
      然后进行
      <a href="https://cloud.tencent.com/document/product/243/18958" rel="nofollow">
       域名备案
      </a>
     </li>
     <li>
      等待域名备案通过即可
     </li>
    </ol>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34323030313733372f:61727469636c652f64657461696c732f313332323430343535" class_="artid" style="display:none">
 </p>
</div>


