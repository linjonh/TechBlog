---
layout: post
title: "HarmonyOS学习笔记HarmonyOS应用_元服务上架"
date: 2024-12-14 07:27:08 +0800
description: "当开发、调试完HarmonyOS应用/元服务，就可以前往AppGalleryConnect申请上架，"
keywords: "harmonyappprovision"
categories: ['Os', 'Harmoney']
tags: ['笔记', '学习', 'Harmonyos']
artid: "141502039"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=141502039
    alt: "HarmonyOS学习笔记HarmonyOS应用_元服务上架"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=141502039
featuredImagePreview: https://bing.ee123.net/img/rand?artid=141502039
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     HarmonyOS学习笔记——HarmonyOS应用_元服务上架
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     概述
    </h2>
    <p>
     当开发、调试完HarmonyOS应用/元服务，就可以前往AppGalleryConnect申请上架，华为审核通过后，用户即可再华为应用市场获取您的HarmonyOS应用/元服务。
     <br/>
     HarmonyOS会通过数字整数与Profile文件等签名信息来保证应用的完整性，需要上架HarmonyOS应用/元服务都必须同签名校验，所以上架前，需要先完成签名操作。
    </p>
    <h2>
     <a id="_3">
     </a>
     创建项目
    </h2>
    <ol>
     <li>
      登录AppGallery Connect，点击"我的项目"。
     </li>
     <li>
      在项目页面中点击"添加项目"。
     </li>
     <li>
      在"创建项目"页面中输入项目名称后，点击"创建并继续"。
     </li>
    </ol>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/aad07b17b68369e0e88682f286b51cad.png"/>
    </p>
    <ol start="4">
     <li>
      项目创建后会进入"开通分析服务"页面。此时可以开通分析服务，以便通过报表查看相关指标数据，也可以创建完项目后开通。
     </li>
    </ol>
    <h2>
     <a id="HarmonyOS_12">
     </a>
     创建HarmonyOS应用/元服务
    </h2>
    <ol>
     <li>
      在项目列表中点击需要操作的项目。
     </li>
     <li>
      点击"添加应用"创建应用/元服务、
     </li>
    </ol>
    <ul>
     <li>
      项目中没有应用，在"项目设置"页面点击"添加应用"。
     </li>
    </ul>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/f2bde95ee5a6b327a2b3014b34e9ff4a.png"/>
    </p>
    <ul>
     <li>
      项目中有应用，展开顶部应用列表框，点击"添加应用"
     </li>
    </ul>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/7c6bbf4010d7c57c57f7b977d7bfb722.png"/>
    </p>
    <ol start="3">
     <li>
      填写相关信息，点击确认。
     </li>
    </ol>
    <ul>
     <li>
      选择平台：选择APP（HarmonyOS）
     </li>
     <li>
      应用包名：需要和DevEco Studio创建工程时填写的"bundleName"值保持一致。
     </li>
     <li>
      “是否元服务”：HarmonyOS应用选择"否"，元服务选择"是"。
     </li>
    </ul>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ea35b7ae6691bc4ed56d1e5c4623ff03.png"/>
    </p>
    <h2>
     <a id="HarmonyOS_30">
     </a>
     编译打包HarmonyOS应用/元服务
    </h2>
    <p>
     完整编译流程如下图所示。
     <br/>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6d414459a5056078b6b7759c6bfd415c.png"/>
    </p>
    <h3>
     <a id="_33">
     </a>
     生成密钥和证书请求文件
    </h3>
    <ol>
     <li>
      打开DevEco Studio，菜单选择"
      <code>
       Build &gt; Generate Key and CSR
      </code>
      "。
     </li>
     <li>
      <code>
       Key Store File
      </code>
      可以点击"
      <code>
       Choose Existing
      </code>
      "选择已有的密钥库文件（存储有密钥的
      <code>
       .p12
      </code>
      文件），跳转至步骤4继续配置；如果没有密钥库文件，点击
      <code>
       New
      </code>
      ，跳转至步骤3进行创建。
     </li>
     <li>
      在"
      <code>
       Create Key Store
      </code>
      "界面，填写密钥库信息后，点击"OK"。
     </li>
    </ol>
    <ul>
     <li>
      <code>
       Key Store File
      </code>
      ：设置密钥库文件存储路径，并填写p12文件名。
     </li>
     <li>
      <code>
       Password
      </code>
      ：设置密钥库文件存储路径，并填写p12文件名。
     </li>
     <li>
      <code>
       Confirm Password
      </code>
      ：再次输入密钥库密码。
     </li>
    </ul>
    <ol start="4">
     <li>
      在"
      <code>
       Generate Key and CSR
      </code>
      "界面继续填写密钥信息后，点击"Next"。
     </li>
    </ol>
    <ul>
     <li>
      Alias：密钥的别名信息，用于标识密钥名称。请记住该别名，后续签名配置需要使用。
     </li>
     <li>
      Password：密钥对应的密码。与密钥库密码保持一致，无需手动输入。
     </li>
     <li>
      Validity：证书有效期，建议设置为25年及以上，覆盖元服务的完整生命周期。
     </li>
     <li>
      Certificate：输入证书基本信息，如组织、城市或地区、国家码等。
     </li>
    </ul>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/daf017b57e9300f2bdb0aea18bc577cc.png"/>
    </p>
    <ol start="5">
     <li>
      在"Genetate Key and CSR"界面设置CSR文件存储路径和CSR文件名，点击"Finish"。
     </li>
    </ol>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/1a5bc39c91fc203b580219ef15f077a3.png">
      <br/>
      CSR文件创建成功后，将在存储路径下获取生成密钥库文件（.p12）和证书请求文件（.csr）。
      <br/>
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/caf185b67f17e242086ef5eb9a61d77d.png"/>
     </img>
    </p>
    <h3>
     <a id="_54">
     </a>
     申请发布证书
    </h3>
    <ol>
     <li>
      登录
      <a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" rel="nofollow">
       AppGallery Connect
      </a>
      ，选择"我的项目"。
     </li>
     <li>
      左侧导航栏选择"证书管理"，进入"证书管理"页面，点击"新增证书"。
     </li>
    </ol>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/ef4c6520db49a1dd7b3b01367535e426.png"/>
    </p>
    <ol start="3">
     <li>
      在弹出"新增证书"界面填写相关信息后，点击"提交"。
      <br/>
      |
      <strong>
       参数
      </strong>
      |
      <strong>
       说明
      </strong>
      |
      <br/>
      | — | — |
      <br/>
      | 证书名称 | 不超过100个字符。 |
      <br/>
      | 证书类型 | 选择“发布证书”。 |
      <br/>
      | 上传证书请求文件（CSR） | 上传生成密钥和证书请求文件时获取的.csr文件。 |
     </li>
    </ol>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/f10432c081b5393fb5043783a5f12ef5.png"/>
    </p>
    <ol start="4">
     <li>
      证书申请成功后，"证书管理"页面展示生成的证书内容。
     </li>
    </ol>
    <ul>
     <li>
      点击"下载"将生成的证书保存至本地。
     </li>
     <li>
      每个账号最多申请1个发布证书，如果证书已过期或者无需使用，点击"废除"即可删除证书。
     </li>
    </ul>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6fb8af9276f4749e40b48d8817dc0287.png"/>
    </p>
    <h3>
     <a id="Profile_75">
     </a>
     申请发布Profile
    </h3>
    <ol>
     <li>
      登录
      <a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" rel="nofollow">
       AppGallery Connect
      </a>
      ，选择"我的项目"。
     </li>
     <li>
      找到对应项目，点击项目卡片中需要发布的元服务。
     </li>
     <li>
      导航选择"HarmonyOS应用"&gt;HAP Provision Profile管理"，进入"管理HAP Provision Profile"页面，点击"添加"。
     </li>
    </ol>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/75ab302f18ed479cd47b9cd93f07c85a.png"/>
    </p>
    <ol start="4">
     <li>
      在"HarmonyAppProvision信息"界面填写相关信息，点击"提交"。
     </li>
    </ol>
    <p>
     <strong>
      说明
     </strong>
     <br/>
     如果您发布的应用支持API 9及以上版本，且需要使用
     <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/restricted-permissions-V5" rel="nofollow">
      ACL申请的权限
     </a>
     ，请提供
     <a href="https://developer.huawei.com/consumer/cn/doc/distribution/app/agc-help-appinfo-0000001100014694" rel="nofollow">
      APP ID
     </a>
     发送到agconnect@huawei.com。待运营审核通过后，才可以看到“受限ACL权限”选项进行配置。
     <br/>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/3abed02c1c897ec54e34e3b64368cbd1.png"/>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         参数
        </strong>
       </th>
       <th>
        <strong>
         说明
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        名称
       </td>
       <td>
        不超过100个字符。
       </td>
      </tr>
      <tr>
       <td>
        类型
       </td>
       <td>
        选择“发布”。
       </td>
      </tr>
      <tr>
       <td>
        选择证书
       </td>
       <td>
        选择申请的发布证书。
       </td>
      </tr>
      <tr>
       <td>
        申请权限
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      如应用需要申请受限权限，选择“受限权限（HarmonyOS API9以下）”，该选项支持申请如下受限权限：
      <ul>
       <li>
        ohos.permission.READ_CONTACTS（允许应用读取联系人数据）
       </li>
       <li>
        ohos.permission.WRITE_CONTACTS（允许应用添加、移除和更改联系人数据）
       </li>
      </ul>
     </li>
     <li>
      如应用需要申请ACL权限，请选择“受限ACL权限（HarmonyOS API9及以上）”，该选项支持申请
      <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/restricted-permissions-V5" rel="nofollow">
       允许ACL申请的权限
      </a>
      。
     </li>
    </ul>
    <p>
     <strong>
      说明
     </strong>
     <br/>
     <strong>
      请确保您此处申请的权限与软件包内配置的权限一致。
     </strong>
     |
    </p>
    <ol start="5">
     <li>
      申请成功，即可在"管理HAP Provision Profile"页面查看Profile信息。点击"下载"，将文件下载到本地。
     </li>
    </ol>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/db3d53d6bcf59a3b7d830fe4ee84dff3.png"/>
    </p>
    <h3>
     <a id="_106">
     </a>
     配置签名信息
    </h3>
    <ol>
     <li>
      打开DevEco Studio，菜单选择"File &gt; Project Structure"，进入"Project Structure"界面。
     </li>
     <li>
      导航选择"Project"，点击"Signing Configs"页签，填写相关信息后，点击"OK"。
     </li>
    </ol>
    <ul>
     <li>
      Store File：密钥库文件，选择生成密钥和证书请求文件时生成的.p12文件。
     </li>
     <li>
      Store Password：密钥库密码，需要与生成密钥和证书请求文件时设置的密钥库密码保持一致。
     </li>
     <li>
      Key alias：密钥的别名信息，需要与生成密钥和证书请求文件时设置的别名保持一致。
     </li>
     <li>
      Sign alg：固定设置为"SHA256withECDSA"。
     </li>
     <li>
      Profile file：选择申请发布Profile时下载的.p7b文件。
     </li>
     <li>
      Certpath file：选择沈沁发布Profile时下载的.cer文件。
     </li>
    </ul>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/9ab34f067629e3af742a5f79f401a9f0.png"/>
    </p>
    <h3>
     <a id="_118">
     </a>
     编译打包
    </h3>
    <ol>
     <li>
      打开DevEco Studio，菜单选择"Build &gt; Build Hap(s)/APP(s) &gt; Build APP(s)"。
     </li>
     <li>
      等待编译构建签名的HarmonyOS应用/元服务，编译完成后，可以在工程目录build &gt; outputs &gt; default 目录下获取用于上架的软件包。
     </li>
    </ol>
    <h2>
     <a id="HarmonyOS_122">
     </a>
     上架HarmonyOS应用/元服务
    </h2>
    <ol>
     <li>
      登录
      <a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" rel="nofollow">
       AppGallery Connect
      </a>
      ，选择"我的应用"。
     </li>
     <li>
      在应用列表首页中点击"HarmonyOS"页签。
     </li>
     <li>
      点击待发布的应用/元服务，在左侧导航栏选择"应用信息"菜单。
     </li>
     <li>
      填写应用的基本信息，如语言，应用名称，应用介绍等，上传应用图标，所有配置完成后保存。详细配置指导请参见官网文档：
      <a href="https://developer.huawei.com/consumer/cn/doc/distribution/app/agc-help-harmonyos-releaseapp-0000001126380068#section7950113411714" rel="nofollow">
       HarmonyOS应用
      </a>
      <a href="https://developer.huawei.com/consumer/cn/doc/distribution/app/agc-help-harmonyos-releaseservice-0000001126539888#section7950113411714" rel="nofollow">
       元服务
      </a>
     </li>
     <li>
      填写版本信息，如发布国家或地区、上传软件包、提交资质材料等，所有配置完成后点击右上角"提交审核"。详细配置指导请参见官网文档：
      <a href="https://developer.huawei.com/consumer/cn/doc/distribution/app/agc-help-harmonyos-releaseapp-0000001126380068#section4128955498" rel="nofollow">
       HarmonyOS应用
      </a>
      <a href="https://developer.huawei.com/consumer/cn/doc/distribution/app/agc-help-harmonyos-releaseservice-0000001126539888#section4128955498" rel="nofollow">
       元服务
      </a>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f35313332333232372f:61727469636c652f64657461696c732f313431353032303339" class_="artid" style="display:none">
 </p>
</div>


