---
layout: post
title: "React基础之useEffect"
date: 2025-03-07 09:45:46 +0800
description: "useEffect是一个React Hook函数，用在React组件中创建不是由事件引起的而是由渲染本身引起的操作，比如发送Ajax，更改Dom等。如我们在useEffect中开启了一个定时器，我们想在组件卸载的时候，将这个定时器清理掉，这个过程就成为清理副作用。useEffect副作用函数的执行时机存在多种情况，根据传入的依赖项的不同，会有不同的执行表现。在useEffect中编写的由渲染本身引起的对接组件外部的操作，社区中也将称为副作用。清除副作用的函数最常见的执行时机就是在组件卸载时自动执行。"
keywords: "React基础之useEffect"
categories: ['未分类']
tags: ['React', 'Javascript', 'Ecmascript']
artid: "146087067"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146087067
    alt: "React基础之useEffect"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146087067
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146087067
cover: https://bing.ee123.net/img/rand?artid=146087067
image: https://bing.ee123.net/img/rand?artid=146087067
img: https://bing.ee123.net/img/rand?artid=146087067
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     React基础之useEffect
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div>
     <div style="margin-left:0in">
      <div style="margin-left:0in">
       <p style="margin-left:0; margin-right:0">
        概念
       </p>
       <p style="margin-left:0; margin-right:0">
        useEffect是一个React Hook函数，用在React组件中创建不是由事件引起的而是由渲染本身引起的操作，比如发送Ajax，更改Dom等
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         import
        </span>
        <span style="color:#45748d">
         React
        </span>
        <span style="color:#686868">
         , {
        </span>
        <span style="color:#45748d">
         useState
        </span>
        <span style="color:#686868">
         }
        </span>
        <span style="color:#c586c0">
         from
        </span>
        <span style="color:#894d34">
         'react'
        </span>
        <span style="color:#686868">
         ;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         import
        </span>
        <span style="color:#686868">
         {
        </span>
        <span style="color:#45748d">
         useEffect
        </span>
        <span style="color:#686868">
         }
        </span>
        <span style="color:#c586c0">
         from
        </span>
        <span style="color:#894d34">
         'react'
        </span>
        <span style="color:#686868">
         ;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#117bb5">
         URL
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#894d34">
         'http://geek.itheima.net/v1_0/channels'
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         function
        </span>
        <span style="color:#8a8a67">
         App
        </span>
        <span style="color:#686868">
         () {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#686868">
         [
        </span>
        <span style="color:#117bb5">
         list
        </span>
        <span style="color:#686868">
         ,
        </span>
        <span style="color:#8a8a67">
         setList
        </span>
        <span style="color:#686868">
         ]=
        </span>
        <span style="color:#8a8a67">
         useState
        </span>
        <span style="color:#686868">
         ([])
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#8a8a67">
          useEffect
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          (()
         </span>
        </strong>
        <strong>
         <span style="color:#569cd6">
          =&gt;
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          {
          <!-- -->
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#6a9955">
          //
         </span>
        </strong>
        <strong>
         <span style="color:#6a9955">
          额外的操作 获取频道参数
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#569cd6">
          async function
         </span>
        </strong>
        <strong>
         <span style="color:#8a8a67">
          getList
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          (){
          <!-- -->
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#569cd6">
          const
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          res
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          =
         </span>
        </strong>
        <strong>
         <span style="color:#c586c0">
          await
         </span>
        </strong>
        <strong>
         <span style="color:#8a8a67">
          fetch
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          (
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          URL
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          )
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#569cd6">
          const
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          jsonRes
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          =
         </span>
        </strong>
        <strong>
         <span style="color:#c586c0">
          await
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          res
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          .
         </span>
        </strong>
        <strong>
         <span style="color:#8a8a67">
          json
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          ()
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#45748d">
          console
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          .
         </span>
        </strong>
        <strong>
         <span style="color:#8a8a67">
          log
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          (
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          jsonRes
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          );
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#8a8a67">
          setList
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          (
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          jsonRes
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          .
         </span>
        </strong>
        <strong>
         <span style="color:#45748d">
          data
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          .
         </span>
        </strong>
        <strong>
         <span style="color:#45748d">
          channels
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          )
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         <strong>
          }
         </strong>
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#8a8a67">
          getList
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          ()
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         <strong>
          },[])
         </strong>
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#117bb5">
         msg
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#894d34">
         'this is app msg'
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         return
        </span>
        <span style="color:#686868">
         (
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;
        </span>
        <span style="color:#569cd6">
         div
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         this is app
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;
        </span>
        <span style="color:#569cd6">
         ul
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#117bb5">
         list
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#8a8a67">
         map
        </span>
        <span style="color:#686868">
         (
        </span>
        <span style="color:#45748d">
         item
        </span>
        <span style="color:#569cd6">
         =&gt;
        </span>
        <span style="color:#8f8f8f">
         &lt;
        </span>
        <span style="color:#569cd6">
         li
        </span>
        <span style="color:#45748d">
         key
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#45748d">
         item
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#45748d">
         id
        </span>
        <span style="color:#569cd6">
         }
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#45748d">
         item
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#45748d">
         name
        </span>
        <span style="color:#569cd6">
         }
        </span>
        <span style="color:#8f8f8f">
         &lt;/
        </span>
        <span style="color:#569cd6">
         li
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
        <span style="color:#686868">
         )
        </span>
        <span style="color:#569cd6">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;/
        </span>
        <span style="color:#569cd6">
         ul
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;/
        </span>
        <span style="color:#569cd6">
         div
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         );
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         export default
        </span>
        <span style="color:#8a8a67">
         App
        </span>
        <span style="color:#686868">
         ;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        <img alt="" height="679" src="https://i-blog.csdnimg.cn/direct/cd52508bc8c04d0c9ebe7348a192e54d.png" width="295"/>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        useEffect依赖项参数说明
       </p>
       <p style="margin-left:0; margin-right:0">
        useEffect副作用函数的执行时机存在多种情况，根据传入的依赖项的不同，会有不同的执行表现
       </p>
       <p style="margin-left:0; margin-right:0">
        <img alt="" height="348" src="https://i-blog.csdnimg.cn/direct/7385585fa78646adb06abd1b7b3c029d.png" width="914"/>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        清除useEffect副作用
       </p>
       <p style="margin-left:0; margin-right:0">
        在useEffect中编写的由渲染本身引起的对接组件外部的操作，社区中也将称为副作用
       </p>
       <p style="margin-left:0; margin-right:0">
        如我们在useEffect中开启了一个定时器，我们想在组件卸载的时候，将这个定时器清理掉，这个过程就成为清理副作用
       </p>
       <p style="margin-left:0; margin-right:0">
        清除副作用的函数最常见的执行时机就是在组件卸载时自动执行
       </p>
       <p style="margin-left:0; margin-right:0">
        <img alt="" height="300" src="https://i-blog.csdnimg.cn/direct/188239baba354dd3a4a0bc6c833327b8.png" width="436"/>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         import
        </span>
        <span style="color:#45748d">
         React
        </span>
        <span style="color:#686868">
         , {
        </span>
        <span style="color:#45748d">
         useState
        </span>
        <span style="color:#686868">
         }
        </span>
        <span style="color:#c586c0">
         from
        </span>
        <span style="color:#894d34">
         'react'
        </span>
        <span style="color:#686868">
         ;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         import
        </span>
        <span style="color:#686868">
         {
        </span>
        <span style="color:#45748d">
         useEffect
        </span>
        <span style="color:#686868">
         }
        </span>
        <span style="color:#c586c0">
         from
        </span>
        <span style="color:#894d34">
         'react'
        </span>
        <span style="color:#686868">
         ;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         function
        </span>
        <span style="color:#8a8a67">
         Son
        </span>
        <span style="color:#686868">
         (){
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#6a9955">
         //
        </span>
        <span style="color:#6a9955">
         渲染完毕之后开启一个定时器
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8a8a67">
         useEffect
        </span>
        <span style="color:#686868">
         (()
        </span>
        <span style="color:#569cd6">
         =&gt;
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#117bb5">
         timer
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#8a8a67">
         setInterval
        </span>
        <span style="color:#686868">
         (()
        </span>
        <span style="color:#569cd6">
         =&gt;
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         console
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#8a8a67">
         log
        </span>
        <span style="color:#686868">
         (
        </span>
        <span style="color:#894d34">
         '
        </span>
        <span style="color:#894d34">
         定时器执行中
        </span>
        <span style="color:#894d34">
         '
        </span>
        <span style="color:#686868">
         );
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         },
        </span>
        <span style="color:#6d8063">
         1000
        </span>
        <span style="color:#686868">
         )
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#c586c0">
          return
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          ()
         </span>
        </strong>
        <strong>
         <span style="color:#569cd6">
          =&gt;
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          {
          <!-- -->
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#6a9955">
          //
         </span>
        </strong>
        <strong>
         <span style="color:#6a9955">
          清除副作用
         </span>
        </strong>
        <strong>
         <span style="color:#6a9955">
          (
         </span>
        </strong>
        <strong>
         <span style="color:#6a9955">
          组件卸载时
         </span>
        </strong>
        <strong>
         <span style="color:#6a9955">
          )
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#8a8a67">
          clearInterval
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          (
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          timer
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          )
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         <strong>
          }
         </strong>
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         },[])
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#c586c0">
          return
         </span>
        </strong>
        <strong>
         <span style="color:#8f8f8f">
          &lt;
         </span>
        </strong>
        <strong>
         <span style="color:#569cd6">
          div
         </span>
        </strong>
        <strong>
         <span style="color:#8f8f8f">
          &gt;
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          this is son
         </span>
        </strong>
        <strong>
         <span style="color:#8f8f8f">
          &lt;/
         </span>
        </strong>
        <strong>
         <span style="color:#569cd6">
          div
         </span>
        </strong>
        <strong>
         <span style="color:#8f8f8f">
          &gt;
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         function
        </span>
        <span style="color:#8a8a67">
         App
        </span>
        <span style="color:#686868">
         () {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#6a9955">
         //通过条件渲染模拟组件卸载
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#686868">
         [
        </span>
        <span style="color:#117bb5">
         show
        </span>
        <span style="color:#686868">
         ,
        </span>
        <span style="color:#8a8a67">
         setShow
        </span>
        <span style="color:#686868">
         ]=
        </span>
        <span style="color:#8a8a67">
         useState
        </span>
        <span style="color:#686868">
         (
        </span>
        <span style="color:#569cd6">
         true
        </span>
        <span style="color:#686868">
         )
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         return
        </span>
        <span style="color:#686868">
         (
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;
        </span>
        <span style="color:#569cd6">
         div
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#117bb5">
         show
        </span>
        <span style="color:#686868">
         &amp;&amp;
        </span>
        <span style="color:#8f8f8f">
         &lt;
        </span>
        <span style="color:#48b8a1">
         Son
        </span>
        <span style="color:#8f8f8f">
         /&gt;
        </span>
        <span style="color:#569cd6">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;
        </span>
        <span style="color:#569cd6">
         button
        </span>
        <span style="color:#45748d">
         onClick
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#686868">
         ()
        </span>
        <span style="color:#569cd6">
         =&gt;
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
        <span style="color:#8a8a67">
         setShow
        </span>
        <span style="color:#686868">
         (
        </span>
        <span style="color:#569cd6">
         false
        </span>
        <span style="color:#686868">
         )}
        </span>
        <span style="color:#569cd6">
         }
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
        <span style="color:#686868">
         卸载子组件
        </span>
        <span style="color:#8f8f8f">
         &lt;/
        </span>
        <span style="color:#569cd6">
         button
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;/
        </span>
        <span style="color:#569cd6">
         div
        </span>
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         );
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         export default
        </span>
        <span style="color:#8a8a67">
         App
        </span>
        <span style="color:#686868">
         ;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        封装自定义hook
       </p>
       <p style="margin-left:0; margin-right:0">
        1.在hook文件夹中创建一个use打头的函数
       </p>
       <p style="margin-left:0; margin-right:0">
        2.在这个函数中封装逻辑并导出
       </p>
       <p style="margin-left:0; margin-right:0">
        3.需要使用的地方进行导入即可
       </p>
       <p style="margin-left:0; margin-right:0">
        实例代码
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#6a9955">
         //封装获取频道列表的逻辑
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         import
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         useEffect
        </span>
        <span style="color:#686868">
         ,
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         useState
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
        <span style="color:#c586c0">
         from
        </span>
        <span style="color:#894d34">
         "react"
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         import
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         getChannelAPI
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
        <span style="color:#c586c0">
         from
        </span>
        <span style="color:#894d34">
         '@/api/article'
        </span>
        <span style="color:#686868">
         ;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         function
        </span>
        <span style="color:#8a8a67">
         useChannel
        </span>
        <span style="color:#686868">
         () {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#686868">
         [
        </span>
        <span style="color:#117bb5">
         channelList
        </span>
        <span style="color:#686868">
         ,
        </span>
        <span style="color:#8a8a67">
         setChannelList
        </span>
        <span style="color:#686868">
         ] =
        </span>
        <span style="color:#8a8a67">
         useState
        </span>
        <span style="color:#686868">
         ([])
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8a8a67">
         useEffect
        </span>
        <span style="color:#686868">
         (()
        </span>
        <span style="color:#569cd6">
         =&gt;
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#6a9955">
         //1.
        </span>
        <span style="color:#6a9955">
         封装函数，在函数体中调用接口
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#8a8a67">
         getChannelList
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#569cd6">
         async
        </span>
        <span style="color:#686868">
         ()
        </span>
        <span style="color:#569cd6">
         =&gt;
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#117bb5">
         res
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#c586c0">
         await
        </span>
        <span style="color:#8a8a67">
         getChannelAPI
        </span>
        <span style="color:#686868">
         ()
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8a8a67">
         setChannelList
        </span>
        <span style="color:#686868">
         (
        </span>
        <span style="color:#117bb5">
         res
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#45748d">
         data
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#45748d">
         channels
        </span>
        <span style="color:#686868">
         )
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8a8a67">
         getChannelList
        </span>
        <span style="color:#686868">
         ()
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }, [])
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         return
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         channelList
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#c586c0">
         export
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8a8a67">
         useChannel
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        d
       </p>
       <p style="margin-left:0; margin-right:0">
        <img alt="" height="1042" src="https://i-blog.csdnimg.cn/direct/c2f3169bb77f4f0b863712dbcf12c8fd.png" width="757"/>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        分页实现逻辑思路
       </p>
       <p style="margin-left:0; margin-right:0">
        1.计算总页数（页数=总数/每页条数）
       </p>
       <p style="margin-left:0; margin-right:0">
        2.点击分页拿到当前点击页数
       </p>
       <p style="margin-left:0; margin-right:0">
        3.使用页数作为请求参数重新获取文章列表渲染
       </p>
       <p style="margin-left:0; margin-right:0">
        注意，我们删除之后需要重新渲染数据，此时可以通过触发useState的方法来实现数据的更新
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        表单回填
       </p>
       <p style="margin-left:0; margin-right:0">
        1.创建一个form来获取实例
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#6a9955">
         //
        </span>
        <span style="color:#6a9955">
         获取实例
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#686868">
         [
        </span>
        <span style="color:#117bb5">
         form
        </span>
        <span style="color:#686868">
         ]=
        </span>
        <span style="color:#117bb5">
         Form
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#8a8a67">
         useForm
        </span>
        <span style="color:#686868">
         ()
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        2.给表单绑定对应的form属性
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &lt;
        </span>
        <span style="color:#48b8a1">
         Form
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         labelCol
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#686868">
         {
        </span>
        <span style="color:#45748d">
         span:
        </span>
        <span style="color:#6d8063">
         4
        </span>
        <span style="color:#686868">
         }
        </span>
        <span style="color:#569cd6">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         wrapperCol
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#686868">
         {
        </span>
        <span style="color:#45748d">
         span:
        </span>
        <span style="color:#6d8063">
         16
        </span>
        <span style="color:#686868">
         }
        </span>
        <span style="color:#569cd6">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         initialValues
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#686868">
         {
        </span>
        <span style="color:#45748d">
         type:
        </span>
        <span style="color:#6d8063">
         0
        </span>
        <span style="color:#686868">
         }
        </span>
        <span style="color:#569cd6">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         onFinish
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#569cd6">
         {
         <!-- -->
        </span>
        <span style="color:#8a8a67">
         onFinish
        </span>
        <span style="color:#569cd6">
         }
        </span>
        <span style="color:#6a9955">
         //
        </span>
        <span style="color:#6a9955">
         添加
        </span>
        <span style="color:#6a9955">
         onFinish
        </span>
        <span style="color:#6a9955">
         处理函数
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#45748d">
          form
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          =
         </span>
        </strong>
        <strong>
         <span style="color:#569cd6">
          {
          <!-- -->
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          form
         </span>
        </strong>
        <strong>
         <span style="color:#569cd6">
          }
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8f8f8f">
         &gt;
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        3.调用setFieldsValue回填函数
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8a8a67">
         useEffect
        </span>
        <span style="color:#686868">
         (()
        </span>
        <span style="color:#569cd6">
         =&gt;
        </span>
        <span style="color:#686868">
         {
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#6a9955">
         //1.
        </span>
        <span style="color:#6a9955">
         通过
        </span>
        <span style="color:#6a9955">
         id
        </span>
        <span style="color:#6a9955">
         获取数据
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         async function
        </span>
        <span style="color:#8a8a67">
         getArticleDetail
        </span>
        <span style="color:#686868">
         (){
         <!-- -->
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#569cd6">
         const
        </span>
        <span style="color:#117bb5">
         res
        </span>
        <span style="color:#686868">
         =
        </span>
        <span style="color:#c586c0">
         await
        </span>
        <span style="color:#8a8a67">
         getArticleById
        </span>
        <span style="color:#686868">
         (
        </span>
        <span style="color:#117bb5">
         articleId
        </span>
        <span style="color:#686868">
         )
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#45748d">
         console
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#8a8a67">
         log
        </span>
        <span style="color:#686868">
         (
        </span>
        <span style="color:#117bb5">
         res
        </span>
        <span style="color:#686868">
         .
        </span>
        <span style="color:#45748d">
         data
        </span>
        <span style="color:#686868">
         );
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <strong>
         <span style="color:#117bb5">
          form
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          .
         </span>
        </strong>
        <strong>
         <span style="color:#8a8a67">
          setFieldsValue
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          (
         </span>
        </strong>
        <strong>
         <span style="color:#117bb5">
          res
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          .
         </span>
        </strong>
        <strong>
         <span style="color:#45748d">
          data
         </span>
        </strong>
        <strong>
         <span style="color:#686868">
          )
         </span>
        </strong>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         }
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#8a8a67">
         getArticleDetail
        </span>
        <span style="color:#686868">
         ()
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#6a9955">
         //2.
        </span>
        <span style="color:#6a9955">
         蒋数据回填
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
        <span style="color:#686868">
         },[
        </span>
        <span style="color:#117bb5">
         articleId
        </span>
        <span style="color:#686868">
         ,
        </span>
        <span style="color:#117bb5">
         form
        </span>
        <span style="color:#686868">
         ])
        </span>
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
        time set night
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
       <p style="margin-left:0; margin-right:0">
       </p>
      </div>
     </div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37333033353539312f:61727469636c652f64657461696c732f313436303837303637" class_="artid" style="display:none">
 </p>
</div>


