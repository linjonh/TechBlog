---
layout: post
title: "在springboot项目中引入log4j-2.x"
date: 2025-03-06 16:52:58 +0800
description: "Spring Boot 默认使用 Logback 作为日志框架，所以需要先排除它，在。在其他类使用需要引入，例如在controller使用。这个配置将日志同时输出到控制台和。"
keywords: "在springboot项目中引入log4j 2.x"
categories: ['未分类']
tags: ['服务器', '前端', 'Java']
artid: "146074405"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146074405
    alt: "在springboot项目中引入log4j-2.x"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146074405
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146074405
cover: https://bing.ee123.net/img/rand?artid=146074405
image: https://bing.ee123.net/img/rand?artid=146074405
img: https://bing.ee123.net/img/rand?artid=146074405
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     在springboot项目中引入log4j 2.x
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h5>
    </h5>
    <h5>
     步骤 1：排除 Spring Boot 默认的日志依赖
    </h5>
    <p>
     Spring Boot 默认使用 Logback 作为日志框架，所以需要先排除它，在
     <code>
      pom.xml
     </code>
     （如果是 Maven 项目） 中添加如下配置：
    </p>
    <pre><code class="language-javascript">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;!-- 排除默认的日志依赖 --&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;</code></pre>
    <h5>
     步骤 2：添加 Log4j 2.x 依赖
    </h5>
    <p>
     在
     <code>
      pom.xml
     </code>
     中添加 Log4j 2.x 的依赖：
    </p>
    <pre><code class="language-javascript">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
    <h5>
     步骤 3：配置 Log4j 2.x
    </h5>
    <p>
     在
     <code>
      src/main/resources
     </code>
     目录下创建
     <code>
      log4j2.xml
     </code>
     文件，以下是一个简单的配置示例：
    </p>
    <pre><code class="language-javascript">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="WARN"&gt;
    &lt;Appenders&gt;
        &lt;Console name="Console" target="SYSTEM_OUT"&gt;
            &lt;PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c{1}:%L - %m%n"/&gt;
        &lt;/Console&gt;
        &lt;File name="File" fileName="app.log"&gt;
            &lt;PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c{1}:%L - %m%n"/&gt;
        &lt;/File&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;Root level="info"&gt;
            &lt;AppenderRef ref="Console"/&gt;
            &lt;AppenderRef ref="File"/&gt;
        &lt;/Root&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
    <p>
     这个配置将日志同时输出到控制台和
     <code>
      app.log
     </code>
     文件中。
    </p>
    <h5>
     步骤 4：使用日志
    </h5>
    <p>
     在 Java 代码中使用日志，示例如下：
    </p>
    <pre><code class="language-javascript">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class YourApplication implements CommandLineRunner {
    private static final Logger logger = LoggerFactory.getLogger(YourApplication.class);

    public static void main(String[] args) {
        SpringApplication.run(YourApplication.class, args);
    }

    @Override
    public void run(String... args) throws Exception {
        logger.info("This is an info log message.");
        logger.error("This is an error log message.");
    }
}</code></pre>
    <p>
     在其他类使用需要引入，例如在controller使用
    </p>
    <pre><code class="language-java">    
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@RestController
@RequestMapping("/leeYqsbBasic")
public class LeeYqsbBasicController {
    private static final Logger logger = LoggerFactory.getLogger(LeeSxsDjController.class);
    @PostMapping("/getByCondition2")
    public Result getByCondition2(@RequestBody LeeYqsbBasicVo leeYqsbBasicVo) {
        logger.info("接收到请求，leeYqsbBasicVo = {}", leeYqsbBasicVo.toString());
    }
}</code></pre>
    <p>
     自定义日志格式
    </p>
    <p>
     <img alt="" height="784" src="https://i-blog.csdnimg.cn/direct/644b248fc4d94d8cb8ada1bb6fa3af46.png" width="1177"/>
    </p>
    <p>
     <img alt="" height="381" src="https://i-blog.csdnimg.cn/direct/92c8b570fe064c54a3c248751aa8bb32.png" width="748"/>
    </p>
    <p>
     输出例子
    </p>
    <pre><code class="language-java">logger.info("接收到请求==&gt;leeYqsbBasicVo = {}", leeYqsbBasicVo.toString());
logger.info("接收到请求==&gt;leeYqsbBasicVo = {}", "哈哈");</code></pre>
    <pre><code class="language-javascript">2025-03-06 17:36:26 [http-nio-80-exec-2] INFO  LeeSxsDjController:50 - 接收到请求==&gt;leeYqsbBasicVo = LeeYqsbBasicVo{lccb_sfdxyq='是', lccb_szsxsid='', key=''}
2025-03-06 17:40:02 [http-nio-80-exec-2] INFO  LeeSxsDjController:50 - 接收到请求==&gt;leeYqsbBasicVo = 哈哈</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36343633343938372f:61727469636c652f64657461696c732f313436303734343035" class_="artid" style="display:none">
 </p>
</div>


