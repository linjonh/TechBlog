---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333639363231312f:61727469636c652f64657461696c732f313036343631303832"
layout: post
title: "超融合与私有云区别及联系基于超融合构建私有云成主流方案"
date: 2020-05-31 20:57:06 +08:00
description: "核心观点1.目前主流私有云参考架构主要包含三个层次： IaaS 层、PaaS 层以及云管理平台，企业"
keywords: "私有云和超融合的对比"
categories: ['超融合', '企业信息架构']
tags: ['无标签']
artid: "106461082"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=106461082
    alt: "超融合与私有云区别及联系基于超融合构建私有云成主流方案"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=106461082
featuredImagePreview: https://bing.ee123.net/img/rand?artid=106461082
---

# 超融合与私有云区别及联系：基于超融合构建私有云成主流方案

### 核心观点

1.目前主流私有云参考架构主要包含三个层次： IaaS 层、PaaS 层以及云管理平台，企业进行私有云改造应该根据自己的实际需求逐步落地；

2.IaaS 层是私有云最核心和最基础的部分，也是企业 IT 云化应该首先着手的部分。云化不仅要解决计算、存储等资源自助和自动交付，更要解决传统架构带来的资源池分离、维护复杂，无法弹性扩展等问题。

3.超融合和私有云不是被替代的关系，恰恰相反，超融合产品让 IaaS 层真正具备了分布式架构和软件定义属性，从而带来存储和计算资源的整合、按需扩展和按需投资的“云”特性，而融合部署方式进一步简化了 IT 基础架构，并降低了系统的总拥有成本；

4.基于商用超融合产品进行私有云 IaaS 层云化改造正在成为主流方案，该方案在可靠性、扩展性、开放性、易用性等方面具有独特的优势。

本文章全文约6000字，阅读约需 8 分钟， 以下为正文。

### 背景

从 2008 年至今，云计算以其节约投资、需求部署快速、按需使用等特性已经得到了企业普遍认可，并实现了从概念到落地到遍地开花的快速发展。无论 AWS 还是腾讯、阿里巴巴等互联网公司都率先完成了自身的云计算数据中心和云管理平台的开发并对外提供便捷的公有云服务。但对于很多企业来说，由于数据安全，监管因素，成本等原因，没有办法将所有的业务都在公有云部署和运行，部分关键业务必须放置在企业内部运行，同时希望拥有公有云敏捷，弹性等特性，私有云应运而生不仅如此，而目前企业内公有云与私有云共存的混合云架构也已经成为业内公认的趋势。目前，市场上
[私有云方案](https://www.smartx.com/solution/private-cloud/)
的品牌种类繁多，令用户眼花缭乱，而近年来，在 IT 基础架构层面又出现了以超融合为代表的新型架构。用户对这些方案经常存在着诸多疑问和误解，例如：

* 私有云应该包含哪些部分？私有云是不是功能越多越好？
* 私有云有哪些可选的落地方案？
* 超融合和私有云的关系是什么？
* 通过超融合构建私有云，还需要什么模块？

本文将分别从私有云和超融合架构的核心本质，以及落地形态上给出介绍和分析。

### 企业用户对私有云的核心诉求

私有云涉及的技术比较多，本文不会展开介绍，更直接的方式是从业务需求出发去考察私有云的方案和技术，制定适合企业自身的私有云建设方案。下面将罗列一些企业对私有云项目的核心诉求。

**业务更“敏捷”的需求**

企业在传统的 IT 架构下，用户基于业务系统的资源需求，独立采购软件和硬件设备；一般需要经历：预算-测试-招标-采购-部署-应用上线等流程，整个过程复杂、耗时，很难做到业务快速上线的目标。
**企业用户对私有云的一个核心诉求是：资源可方便地进行交付，引入更多自动化功能帮助企业缩短业务系统的部署与发布流程，使企业在竞争中获得更大的优势。**

**业务更“稳定”的需求**

企业中有越来越多的业务系统被要求提供 7\*24 的不间断服务，事实上，数据中心一直面临着各种风险和挑战，包括停电、网络故障、硬件故障等问题都有可能影响业务的可用性。特别在传统架构下，随着 IT 规模增大，数据中心引入了更多不同的设备以及技术，增大了运维的复杂性，使得企业的 IT 管理员经常上演“消防员”角色，即便是这样也难以达到“不间断”运行的目标。
**因此企业构建私有云另外一个重要诉求是：私有云应该具备更简单的运维，更高的容错性，甚至是一定程度的故障自愈功能；支持远程站点的灾备方案，甚至是本地与“多云”之间的容灾。**

**资源交付更具“弹性”的需求**

在传统架构中，基础架构资源往往是基于某个业务系统上线而建立，与业务系统有比较强的耦合关系，资源之间无法流动，容易造成资源孤岛以及资源利用率较低等问题。另外一个的问题来自于资源建设缺乏通盘的考虑，导致管理与扩展成本比较高。
**企业用户对私有云的另外一个期许是：改变原有将零散资源进行统一纳管的思路，建设统一资源池，实现更灵活的资源划分与交付；资源应具备“弹性伸缩”特性，可对资源进行生命周期管理，既可迅速扩展资源规模，也可以及时回收“闲置”资源进行重分配。**

### 私有云的架构与方案构成

以上介绍到了企业对私有云的诉求，下面介绍私有云方案有哪些重要的组件，以及组件的关系。

#### 私有云架构的“参考”架构

私有云架构并没有完全统一的标准，但在大体上是有共识的，下面以 IBM 和 Intel 私有云的架构定义作为例子进行探讨私有云架构的层次结构。

**IBM 私有云架构
[![IBM 私有云架构](https://i-blog.csdnimg.cn/blog_migrate/0abdfbdbc6844aa11414fb43def0cbd5.png)](https://www.smartx.com/media-blog/hci-private-cloud/1.png)**

IBM 私有云架构层次结构：

* IaaS 层
* PaaS/CaaS 层
* 下一代管理平台
* 工作负载层

**Intel 私有云架构**

[![Intel 私有云架构](https://i-blog.csdnimg.cn/blog_migrate/ebfd6e4515b18f3bc044f6470b4ba2f5.png)](https://www.smartx.com/media-blog/hci-private-cloud/2.png)

Intel 私有云架构层次结构：

* IaaS 层
* Paas 层
* 服务管理平台
* 云用户界面层

从两个参考的架构中可以看到，虽然 IBM 和 Intel 两家对于私有云的理解有一些差别，但总体的层次结构是类似的，下面做几点简单的归纳。

**1.对于绝大部分企业私有云，无需 SaaS 层建设**

在我们熟悉的云服务模型中，包含了三个层次（IaaS、PaaS、SaaS），其中 IaaS 层的服务对象是 IT 管理员，PaaS 层的服务对象是软件开发者，SaaS 层的服务对象是终端用户。但企业私有云的主要服务对象是 IT 管理员以及软件开发者，IT 管理员更关注如何简化资源交付，基础架构管理与监控以及自动化运维等；而软件开发者更关注开发效率，持续、快速应用交付等，因此在企业私有云 SaaS 建设并不是必须的，而取而代之的是综合自助门户、自动化运维、资源监控与管理功能的云管理平台。

**2.PaaS 层建设可以是循序渐进的，不必被“全栈”绑定**

PaaS 平台核心价值在于帮助软件开发者摆脱 OS（操作系统）、Middleware（数据库、中间件）、Runtime（运行环境） 的安装、配置、维护、升级等繁杂的工作，使得开发者和企业用户把目光放到开发出色的应用程序上，帮助企业用户缩短程序开发与发布流程。但PaaS平台何时引入,以及如何引入仍然是需要企业仔细评估，以下原则供企业进行方案评估时参考：

**对于研发的投入以及应用发布周期要求决定 Paas 平台的价值**

PaaS 平台帮助企业高效开发与发布应用程序，对于没有或仅少量研发投入的企业完全没有必要对PaaS平台投入。而对于投入大量研发的企业，也要评估是否确实有非常强的敏捷性的需求需要PasS层支撑。如果是面对一周一次，甚至是数周一次的发布要求，PaaS 平台带来的价值是非常有限的，反而 PaaS 平台本身的开销（流程、约束等）会带来负担。

**专业PaaS 平台兼容主流 IaaS 平台并松耦合，不必一次“全栈”投入**

主流的 PaaS 平台都是同时兼容虚拟机和物理服务器环境的，而且对主流的 IaaS 平台都是有很好的支持，因此企业用户不用担心 PaaS 平台和 IaaS 分批引入引入会带来风险。

以两个知名的 PaaS 产品为例，针对 IaaS 支持如下：

Pivotal ：AWS、Azure、Google、VMware vSphere 等

OpenShift : AWS、Azure、Google、VMware vSphere 等

所以，企业私有云的 PaaS 层建设可以是按需、并选择专业的产品逐步完成的，无需和IaaS层绑定。

**3.IaaS 层是私有云建设的最基础和核心的部分，资源池的架构与资源使用模式的“云化”同等重要。**

IaaS 平台有效地屏蔽了硬件的复杂性，无论是 Paas 层还是管理平台都是建立在 IaaS 层之上的，整个私有云的可靠性、性能以及弹性都首先来自于IaaS层这个“基石“，所以，在私有云建设中，IaaS 层建设与改造都是最核心、最关键的工作。

然而 IaaS 层的建设也是最为复杂的，需考虑软、硬件以及物理环境等众多复杂因素。将 IaaS 层进一步拆解，实际上 IaaS 由物理硬件层，虚拟化层以及 IaaS 应用层组成。原理上是将服务器、网络、存储等基础架构硬件设备进行虚拟化，形成基础架构资源池后，配合各种 IaaS 应用对上层交付基础架构服务。只有完成 IaaS 层的建设，才有 PaaS 和云管理平台的施展空间。
  
[![私有云lass层架构](https://i-blog.csdnimg.cn/blog_migrate/d52e7a44820ccb59425dee750c0c23ec.png)](https://www.smartx.com/media-blog/hci-private-cloud/3.png)

目前市场上存在一个常见的误解是，IaaS层的云化改造主要是IT资源的自助申请、自动化审批等管理层面的功能，却忽略了基于传统阵列的三层架构中，存储资源的整合和按需使用、弹性扩展都无法满足的IaaS层的要求。所以，这个部分同样应该作为IT基础架构“云化”改造的一个重点。

### 超融合在私有云中的方案定位与价值分析

#### 超融合架构概述 [SmartX 超融合软件产品 SMTX OS 模块构成](https://www.smartx.com/media-blog/hci-private-cloud/4.png)

SmartX 超融合软件产品 SMTX OS 模块构成

首先，以 SmartX 超融合为例分析超融合的构成和特点：

1.超融合是以基于商用服务器硬件，以软件定义的方式和分布式架构为用户提供集成虚拟计算、虚拟存储及虚拟网络等基础架构服务。

2.超融合只是一种部署架构，分布式块存储对传统存储的替换是变革的核心，并可以支持第三方虚拟化平台或集成自有的虚拟化平台；

3.超融合集成了软件定义、分布式和集成部署带来的优势，形成了强大敏捷但又简单的基础架构。

#### 超融合在私有云方案中的定位

[![超融合在私有云方案中的定位](https://i-blog.csdnimg.cn/blog_migrate/27be991c74bb0d8ddbc8449a9dbeced5.png)](https://www.smartx.com/media-blog/hci-private-cloud/5.png)

根据超融合的架构和特点可以看出该技术为私有云的 IaaS 层提供了一种更为高效和简单的基础架构资源池化方案，超融合帮助 IasS 层轻松地完成了基础架构的的“云化“改造，使其具备 Scale-out、软件定义等等特性，从而带来以下价值：

**为私有云提供稳定，高可用的基础架构**

* 超融合集群一般由 3 个或以上节点组成，以分布式架构进行部署，可有效避免单点故障，并能提供故障自愈功能，具有良好的容错能力
* 凭借超融合存储与计算融合的架构以及软件定义能力，可提供原生的异步灾备甚至双活基础架构。

**易于管理**

* 超融合帮助私有云非常简单地完成基础架构的虚拟化，包括计算、存储、网络的虚拟化，无须为不同的设备考虑虚拟化的方案，降低方案的复杂性。
* 支持集成 VMware vSphere 和 KVM 等主流虚拟化软件，用户端几乎没有学习成本。

**弹性的分布式架构**

* 超融合集群可以通过增加/删除节点，安全、轻松地完成资源的在线扩容/缩容，不影响正在运行的业务。
* 超融合拥有强大的 scale-out 能力，性能可随集群规模增大而获得线性增长。使得私有云可以有一个按需投入的基础架构。

**软件定义模式带来成本优势**

* 超融合技术支持普通商用服务器硬件以及使用以太网进行传输，避免使用价格高昂的专用硬件，有效降低私有云中的硬件采购成本。
* 超融合技术的特性是在每个服务器节点都能同时提供计算与存储能力，架构精简，资源占用更低。

需要进一步说明的是，由于经典的超融合主要是定位在存储、计算资源池的升级，如果用户有类似自服务、资源自动审批等进一步的云化需求，可以选择 CMP （Cloud Management Platform）平台构建一个灵活开放的私有云平台。我们将在后期对该方案展开介绍。

### 超融合在私有云中的主流落地方案

在国内，企业主要通过 3 大途径落地私有云：

* 将AWS、Azure、阿里云等商业公有云方案全套落地到私有环境；
* 使用类似 OpenStack、Ceph 等开源软件构建私有云；
* 使用类似 VMware、SmartX、Nutanix 等虚拟化或超融合产品配合 CMP 组件等成熟的商业组件构建私有云。

一个有趣的现象是，由于 HCI 架构为私有云带来的诸多优势，方式 1、2 也都衍生了基于超融合架构的落地方案，以下逐一介绍。

#### 公有云移植构建私有云

将公有云移植到企业数据中心，方案最大的优势是它来自于公有云成功经验，并经过长时间，大规模营运的考验，拥有比较全面的功能，以 AWS 为例展示其落地方案及架构。

[![AWS公有云数据中心落地方案及架构](https://i-blog.csdnimg.cn/blog_migrate/9b512935107a0409be975e3d88a03808.png)](https://www.smartx.com/media-blog/hci-private-cloud/6.png)

AWS 以 EC2 （Elastic Compute）服务为核心提供虚拟计算能力，

S3（对象存储）和 EBS（块存储）等服务提供虚拟存储能力，由 VPC 等网络服务提供虚拟网络能力，以及包括其他安全及管理工具共同构建 IaaS 层。在 PaaS 层也有非常丰富的解决方案，在这里不再一一赘述。AWS 的私有云方案基本上就是按照 AWS 标准， 包括硬件、软件，甚至运营整体交付到企业用户数据中心里面，这类方案比较明显的特征是非常依赖公有云供应商的自有生态。

近几年，AWS、Azure 等公有云供应商，在落地私有云的基础架构方案时也推出了类似如 AWS Outpost、Azure Stack HCI 等超融合架构进行交付。

**Azure Stack HCI Solution**

[![Azure Stack超融合数据中心解决方案](https://i-blog.csdnimg.cn/blog_migrate/0af7741378cb78ac3258ca7ba78a954e.png)](https://www.smartx.com/media-blog/hci-private-cloud/7.png)

这些方案的优势是可以在一家厂商获得从私有到公有云的统一方案和服务，但也存在诸如以下弊端：
  
1.产品封闭，例如Azure Stack HCI 只能支持Hyper-v虚拟平台，并且无法形成多云方案；
  
2.前期投入大且完全新建，对原有VMware等系统无法管理。

#### 开源软件构建私有云

使用开源软件构建私有云，实际上利用多个开源软件分别完成 IaaS、PaaS等各层的构建。这种方案的重点依然在 IaaS 层构建之上，其中  OpenStack 是无疑是最热门的开源 IaaS 平台之一，以下是以 OpenStack 为中心构建私有云的架构图。
  
[![OpenStack构建私有云的架构图](https://i-blog.csdnimg.cn/blog_migrate/43ab734143264229efe8de7ef7da960d.png)](https://www.smartx.com/media-blog/hci-private-cloud/8.png)

由于 OpenStack 本质上是一个 IaaS 的框架，需要结合其他的软件才能完成 IaaS 层的构建 ，通过下图展示 OpenStack 方案的组成。

[![OpenStack数据中心落地方案及架构](https://i-blog.csdnimg.cn/blog_migrate/f8b08a5e98bf018ecb648b4ac2951127.png)](https://www.smartx.com/media-blog/hci-private-cloud/9.png)
  
通过上图可以看到 ：

1.OpenStack 本身不直接提供服务虚拟化、存储、网络等功能。

2.OpenStack Nova 计算组件负责对接 Hypervisor 软件，如：KVM、VMware vSphere、XenServer 等，实际上由 Hypervisor 提供服务器虚拟化功能。

3. 存储方面可能选择的方案包括 SDS、传统集中式存储等。

目前，市场上同样出现了基于 Openstack、KVM、Ceph 等开源产品整合的超融合方案，基于开源的方案可以快速从社区获得最新的功能，但以超融合产品交付存在着诸多问题：
  
1.Openstack 架构复杂、大量模块在超融合中并不需要，商用程度差，且计算资源要求高；
  
2.基于开源的Ceph同样模块和代码复杂，服务商对产品核心问题无法有效支持，且Ceph对计算资源消耗高较高，IO密集型场景性能也表现欠佳；
  
3.此类超融合方案一般对VMWare都无法有效支持。
  
因此，此类方案实际上无法真正达到超融合产品简单、稳定、高效、开放等特点。

#### 使用成熟的商用生态打造私有云

使用商用生态组件打造私有云，其优点是方案经过来自不同行业的实践验证、并且能获得来自厂商的持续的服务与支持。另外，基于这种模式用户可以采取逐步扩展与完善组件的策略来完成私有云的构建，通过这种模式实现私有云切换的代价是最小的。

![成熟的商用生态打造私有云](https://i-blog.csdnimg.cn/blog_migrate/bc0131250527736910f0dedc5c76ead6.png)

在资源池的构建上方式上，以往 VMware vSpere 、FC 网络、FC SAN 存储传统三层式架构占据统治地位，但超融合方案正在越来越多地替换原有的架构。VMware、SmartX、等主流超融合厂商配合成熟的商用 CMP 产品都提供了诸多基于超融合架构的私有云案例。相比于以上两种方案，该落地方案具有独特的特点：

1.相比于公有云厂商以及全栈的私有云方案，该方案具备更好的开放性，更灵活轻量；

2. 相比于基于的开源产品，该方案稳定简单，具备真正“生产就绪“能力。

### 总结

综合以上内容，我们可以对私有云的组成以及超融合和私有云的关系有以下初步的结论：

1.目前主流私有云参考架构主要包含三个层次： IaaS 层、PaaS 层以及云管理平台，企业进行私有云改造应该根据自己的实际需求逐步落地；

2.IaaS 层是私有云最核心和最基础的部分，也是企业 IT 云化应该首先着手的部分。云化不仅要解决计算、存储等资源自助和自动交付，更要解决传统架构带来的资源池分离、维护复杂，无法弹性扩展等问题。

3.超融合和私有云不是被替代的关系，恰恰相反，超融合产品让 IaaS 层真正具备了分布式架构和软件定义属性，从而带来存储和计算资源的整合、按需扩展和按需投资的“云”特性，而融合部署方式进一步简化了 IT 基础架构，并降低了系统的总拥有成本；

4.基于商用超融合产品进行私有云 IaaS 层云化改造正在成为主流方案，该方案在可靠性、扩展性、开放性、易用性等方面具有独特的优势。

后期，我们将针对基于超融合的私有云基础架构分布式改造方案和案例进行更详细的介绍，敬请期待。