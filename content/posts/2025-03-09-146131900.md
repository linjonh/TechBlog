---
layout: post
title: "Conda环境移植及更新-使用Miniconda3或Anaconda3"
date: 2025-03-09 14:15:25 +0800
description: "Conda：环境移植及更新 -- 使用Miniconda3或Anaconda3"
keywords: "Conda：环境移植及更新 -- 使用Miniconda3或Anaconda3"
categories: ['Env']
tags: ['Miniconda', 'Conda', 'Anaconda']
artid: "146131900"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146131900
    alt: "Conda环境移植及更新-使用Miniconda3或Anaconda3"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146131900
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146131900
cover: https://bing.ee123.net/img/rand?artid=146131900
image: https://bing.ee123.net/img/rand?artid=146131900
img: https://bing.ee123.net/img/rand?artid=146131900
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Conda：环境移植及更新 -- 使用Miniconda3或Anaconda3
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <hr/>
    <blockquote>
     <p>
      更多内容：
      <a href="https://flowus.cn/xiaoj_share/share/2763da97-9b40-4939-8451-17c16cd80276?code=VK2AMB" rel="nofollow">
       XiaoJ的知识星球
      </a>
     </p>
    </blockquote>
    <hr/>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h3>
     <a id="1Conda_10">
     </a>
     1.Conda环境移植（直接拷贝法）
    </h3>
    <p>
     在相同Linux设备上移植Miniconda3（Anaconda3同理）常用方法有。
    </p>
    <ul>
     <li>
      <p>
       conda-pack打包法：使用
       <code>
        conda-pack
       </code>
       工具打包。（这里暂时不做介绍）
      </p>
     </li>
     <li>
      <p>
       直接拷贝法：直接拷贝整个Miniconda3文件夹。（下面介绍）
      </p>
     </li>
    </ul>
    <p>
     下面介绍方式二（直接拷贝法）的操作步骤。
    </p>
    <p>
     注意：这里需要在两台机器中的路径相同，以/home/Miniconda3为例。如路径不同，可参考以上环境更新部分。
    </p>
    <h4>
     <a id="1Miniconda3_26">
     </a>
     1）打包并拷贝Miniconda3
    </h4>
    <pre><code class="prism language-shell"><span class="token comment"># 在设备A上打包</span>
<span class="token builtin class-name">cd</span> /home/
<span class="token function">tar</span> <span class="token parameter variable">-czvf</span> Miniconda3.tar.gz Miniconda3/

<span class="token comment"># 拷贝文件到设备B上</span>
  
<span class="token comment"># 在设备B上解压</span>
<span class="token function">tar</span> <span class="token parameter variable">-xzvf</span> Miniconda3.tar.gz <span class="token parameter variable">-C</span> /home/
</code></pre>
    <h4>
     <a id="2_Miniconda3__42">
     </a>
     2）配置 Miniconda3 环境
    </h4>
    <p>
     生成并执行以下初始化conda的脚本：my_conda_init.sh
    </p>
    <pre><code class="prism language-shell"><span class="token comment"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span>
<span class="token comment"># !! Contents within this block are managed by 'conda init' !!</span>
<span class="token assign-left variable">__conda_setup</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span>'/home/Miniconda3/bin/conda<span class="token string">' '</span>shell.bash<span class="token string">' '</span>hook' <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null<span class="token variable">)</span></span>"</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable">$__conda_setup</span>"</span>
<span class="token keyword">else</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"/home/Miniconda3/etc/profile.d/conda.sh"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">.</span> <span class="token string">"/home/Miniconda3/etc/profile.d/conda.sh"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"/home/Miniconda3/bin:<span class="token environment constant">$PATH</span>"</span>
    <span class="token keyword">fi</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">unset</span> __conda_setup
<span class="token comment"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span>
</code></pre>
    <p>
     执行：bash my_conda_init.sh
    </p>
    <h4>
     <a id="3_Conda__68">
     </a>
     3）验证 Conda 是否生效
    </h4>
    <pre><code class="prism language-shell">conda <span class="token parameter variable">--version</span>
</code></pre>
    <p>
     显示 Conda 的版本号，则说明安装成功。
    </p>
    <hr/>
    <h3>
     <a id="2Conda_83">
     </a>
     2.Conda环境更新
    </h3>
    <p>
     当Conda环境包（如Miniconda3或Anaconda3）位置变更时，我们要更新环境配置，来恢复Conda环境。
    </p>
    <h4>
     <a id="1_89">
     </a>
     1）更新基础环境变量
    </h4>
    <p>
     替换旧环境路径为新环境路径，具体需要更新内容：
    </p>
    <ul>
     <li>
      <p>
       修改conda相关环境变量，如
       <code>
        ~/.bashrc
       </code>
       或
       <code>
        ~/.zshrc
       </code>
       中相关变量。
      </p>
     </li>
     <li>
      <p>
       修改
       <code>
        conda init
       </code>
       初始化脚本，替换旧环境路径为新环境路径。
      </p>
     </li>
    </ul>
    <h4>
     <a id="2_conda__99">
     </a>
     2）更新 conda 配置文件
    </h4>
    <p>
     更新 Anaconda 的配置文件：
    </p>
    <ol>
     <li>
      打开以下文件：
     </li>
    </ol>
    <pre><code class="prism language-shell"><span class="token function">vim</span> /home/mainuser/anaconda3/etc/profile.d/conda.sh
<span class="token function">vim</span> /home/mainuser/anaconda3/bin/conda
<span class="token function">vim</span> /home/mainuser/anaconda3/bin/activate
<span class="token function">vim</span> /home/mainuser/anaconda3/bin/deactivate
<span class="token function">vim</span> /home/mainuser/anaconda3/bin/pip
<span class="token function">vim</span> /home/mainuser/anaconda3/bin/pip3
<span class="token function">vim</span> /home/mainuser/anaconda3/bin/conda-env
</code></pre>
    <ol start="2">
     <li>
      更新环境路径：
     </li>
    </ol>
    <ul>
     <li>
      将文件中所有旧路径（如
      <code>
       /home/olduser/anaconda3
      </code>
      ）替换为新路径（如
      <code>
       /home/mainuser/anaconda3
      </code>
      ）。
     </li>
    </ul>
    <h4>
     <a id="3_Conda__122">
     </a>
     3）验证 Conda 是否生效
    </h4>
    <pre><code class="prism language-shell">conda <span class="token parameter variable">--version</span>
</code></pre>
    <p>
     显示 Conda 的版本号，则说明安装成功。
    </p>
    <hr/>
    <blockquote>
     <p>
      声明：资源可能存在第三方来源，若有侵权请联系删除！
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34383236373130342f:61727469636c652f64657461696c732f313436313331393030" class_="artid" style="display:none">
 </p>
</div>


