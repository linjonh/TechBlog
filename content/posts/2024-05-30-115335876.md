---
layout: post
title: "前端对接后台时增删改的实现"
date: 2024-05-30 09:45:27 +0800
description: "增加：1、在前端项目对应的类下添加新增页面Form.vue（表单）并写好vue代码的基本结构，如：<"
keywords: "Vue,增删改查,List.vue"
categories: ['未分类']
tags: ['Vue', 'Javascript', 'Html']
artid: "115335876"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=115335876
  alt: "前端对接后台时增删改的实现"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=115335876
featuredImagePreview: https://bing.ee123.net/img/rand?artid=115335876
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端对接后台时增删改的实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      前端对接后台时增删改的实现
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        一、前期工作准备
       </a>
      </li>
      <li>
       <a href="#_92" rel="nofollow">
        二、查找
       </a>
      </li>
      <li>
       <a href="#_119" rel="nofollow">
        三、增加记录
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1Listvue_120" rel="nofollow">
          1、在List.vue里的新增按钮添加一个点击事件
         </a>
        </li>
        <li>
         <a href="#2vue_142" rel="nofollow">
          2、在表单文件内新增vue页头返回组件
         </a>
        </li>
        <li>
         <a href="#3_161" rel="nofollow">
          3、在表单文件内增加用于存放后台所获取数据的表单组件
         </a>
        </li>
        <li>
         <a href="#4Fromvue_182" rel="nofollow">
          4、在表单文件From.vue上添加一个带点击事件的提交按钮
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_209" rel="nofollow">
        四、修改和删除记录
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1_210" rel="nofollow">
          1、在所显示的每个对象的旁边添加修改和删除两个按钮
         </a>
        </li>
        <li>
         <a href="#2_223" rel="nofollow">
          2、定义修改和删除函数
         </a>
        </li>
        <li>
         <a href="#3_269" rel="nofollow">
          3、修改记录时提取当前行对象的数据到修改表单
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     一、前期工作准备
    </h2>
    <p>
     <strong>
      1、在/src/views下创建后台所对应一个类（表）的文件夹，新建List.vue文件并写好vue文件代码基本结构
     </strong>
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- vue的三个模块 --&gt;</span>
<span class="token comment">&lt;!-- 模板 html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 这里有且只能有一个根标签 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        example
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 脚本 js --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义变量，在模板中直接使用</span>
    <span class="token comment">// data()是一个方法，这个方法会返回一个对象，这个对象用于定义（返回）在模板中直接使用的变量</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> 
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
			
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 定义事件处理函数（方法）</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>
		
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 生命周期钩子函数</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 样式 css --&gt;</span>
<span class="token comment">&lt;!-- sass：css 的一个脚本化语言，能帮我们产生 css；scoped：限定范围，写的 css 只能运用于当期模块 --&gt;</span>
<span class="token comment">&lt;!-- 在此环境之下，我们写的样式不会影响到其他人的组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sass<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>
其中模板 html 的 template 为 html.vue
<br/>
脚本 js 为 javascript.vue
<br/>
css 样式为 css-scoped.vue
</p>
<p>
<strong>
2、考虑到我们需要新增记录需要跳转到一个新的页面，所以我们同时也在同文件夹内新建一个 Form.vue（表单），并构建好 vue 文件代码基本结构
</strong>
</p>
<p>
<strong>
3、在 router 路由目录下 index.js 配置 List.vue 和 List.vue 表单的路由
</strong>
</p>
<pre><code class="prism language-javascript"> <span class="token punctuation">{<!-- --></span>
path<span class="token punctuation">:</span> <span class="token string">'/lpa'</span><span class="token punctuation">,</span>
component<span class="token punctuation">:</span> Layout<span class="token punctuation">,</span>
redirect<span class="token punctuation">:</span> <span class="token string">'/lpa/example'</span><span class="token punctuation">,</span>
name<span class="token punctuation">:</span> <span class="token string">'lpa'</span><span class="token punctuation">,</span>
meta<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> title<span class="token punctuation">:</span> <span class="token string">'lpa'</span><span class="token punctuation">,</span> icon<span class="token punctuation">:</span> <span class="token string">'example'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
<span class="token punctuation">{<!-- --></span>
path<span class="token punctuation">:</span> <span class="token string">'example'</span><span class="token punctuation">,</span>
name<span class="token punctuation">:</span> <span class="token string">'ExampleList'</span><span class="token punctuation">,</span>
component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/example/List'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
meta<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> title<span class="token punctuation">:</span> <span class="token string">'例子'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{<!-- --></span>
hidden<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
path<span class="token punctuation">:</span> <span class="token string">'example_form'</span><span class="token punctuation">,</span>
name<span class="token punctuation">:</span> <span class="token string">'Example_Form'</span><span class="token punctuation">,</span>
component<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/example/Form'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
meta<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> title<span class="token punctuation">:</span> <span class="token string">'例子表单'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>
注：考虑到添加记录的表单页面应该是在点击新增按钮之后才显示，正常情况下应该是隐藏起来，这里使用了 hidden:true 属性隐藏路由，不在菜单显示
<br/>
<strong>
4、在 List.vue 内添加表格组件，用以显示从后台获取的数据并定义对应变量
</strong>
</p>
<pre><code class="prism language-html"> <span class="token comment">&lt;!-- 表格 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tab_content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>baseroles<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%</span><span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>编号<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>权限<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>
定义变量：
</p>
<pre><code class="prism language-javascript"> <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
baseroles<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>
<strong>
5、为了方便我们后续增删改查的使用，我们 import { post，del，get } from '@/utils/request’
</strong>
</p>
<p>
至此，我们有了可以获取后台数据并将数据显示出来的前端页面，接下来就可以做增删改查操作
</p>
<h2>
<a id="_92">
</a>
二、查找
</h2>
<p>
定义获得后台数据的方法并将其放入生命周期钩子函数
</p>
<pre><code class="prism language-javascript"> <span class="token comment">// 定义事件处理函数（方法）</span>
methods<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">// 查询所有的基本角色数据</span>
<span class="token function">loadBaseroles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">// let 可以理解为 var；url 为后端服务器地址+接口地址</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">"http://localhost:8888/baserole/query"</span>
<span class="token comment">// get 方法在&lt;script&gt;中 import { get } from '@/utils/request'获得</span>
<span class="token comment">// get(url)建立连接后，then 接通之后，再获得后台数据——js 是单线程的</span>
<span class="token comment">// resp=&gt;{}箭头函数，是 function(response){}的简写</span>
<span class="token keyword">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resp<span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">// 获得前端请求数据之后做的事情</span>
<span class="token comment">// 获取后端数据（后端数据是放在 data 里面的）：当前实例当中的 baseroles（即 data()当中的 baseprivileges）</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>baseroles <span class="token operator">=</span> resp<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 生命周期钩子函数</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">// loadBaseroles()函数默认不会自动执行，所以我们在这里加载使其执行</span>
<span class="token comment">// 做了这一步才能从数据库拿到数据 this.baseroles = resp.data</span>
<span class="token comment">// 页面加载出来的时候，拿到路由中的参数，放到 this.form 中</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBaseroles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2>
<a id="_119">
</a>
三、增加记录
</h2>
<h3>
<a id="1Listvue_120">
</a>
1、在 List.vue 里的新增按钮添加一个点击事件
</h3>
<pre><code class="prism language-html"> <span class="token comment">&lt;!-- 按钮 --&gt;</span>
<span class="token comment">&lt;!-- @click="toFormHandler"：跳转到表单的处理器，toFormHandler 是一个方法 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btns<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>toFormHandler<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>新增<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>
并在下面 export default {}内 methods:{}定义对应点击事件的方法 toFormHandler（）{}
</p>
<pre><code class="prism language-javascript"> <span class="token comment">// 跳转到添加表单的页面</span>
<span class="token function">toFormHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">// 跳转到表单。$router：vue的一个模块；push：推动；</span>
            <span class="token comment">// {}内为一个对象,里面有两个元素，path为form表单路由的路径（子路由+父路由），</span>
            <span class="token comment">// query为传递的参数（因为我们新增的时候不需要传参，所以我们可不写）</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
path<span class="token punctuation">:</span><span class="token string">"/lpa/example_form"</span><span class="token punctuation">,</span>
<span class="token comment">// query:</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3>
<a id="2vue_142">
</a>
2、在表单文件内新增 vue 页头返回组件
</h3>
<pre><code class="prism language-html"><span class="token comment">&lt;!-- 表头 --&gt;</span>
<span class="token comment">&lt;!-- go：前进，前进-1 即后退一步 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-page-header</span> <span class="token attr-name">@back</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>goBack<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>编辑 example 信息<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-page-header</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>
并在下面 export default {}内 methods:{}定义对应点击事件的方法 goBack（）{}
</p>
<pre><code class="prism language-javascript"> <span class="token comment">//返回</span>
<span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre>
    <p>
     其实也可以在页头组件标签内将goBack方法直接用具体方法实现直接替换（前者更工程化）
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- go：前进，前进-1即后退一步 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-page-header</span> <span class="token attr-name">@back</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$router.go(-1)<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>编辑 example 信息<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-page-header</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3>
<a id="3_161">
</a>
3、在表单文件内增加用于存放后台所获取数据的表单组件
</h3>
<pre><code class="prism language-html"> <span class="token comment">&lt;!-- 表单 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span> <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span> <span class="token attr-name">label-width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>80px<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>活动名称<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form.name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>
有多少个属性就使用多少个 el-form-item 标签，想要使用其他种类的标签可自行查找 elementui
</p>
<p>
可以看到标签内有一个 form 对象，所以我们需要在 export default {}内 data(){}进行定义
</p>
<pre><code class="prism language-javascript"> <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
form<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<h3>
<a id="4Fromvue_182">
</a>
4、在表单文件 From.vue 上添加一个带点击事件的提交按钮
</h3>
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">text-align</span><span class="token punctuation">:</span>right</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- submitHandler：提交处理器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submitHandler<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>
并在下面 export default {}内 methods:{}定义对应点击事件的方法 submitHandlerr（）{}
</p>
<pre><code class="prism language-javascript"> <span class="token comment">// 提交</span>
<span class="token function">submitHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">"http://localhost:8888/example/saveOrUpdate"</span>
<span class="token comment">// post 方法从 import { get } from '@/utils/request'获得（要导包）</span>
<span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resp <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">// 获取前端请求数据之后做的事情</span>
<span class="token comment">// 弹出提示：获取保存成功后后台给前端的更新成功信息，要注意我们后台 response 除了有 message 还有 data 和 status</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>type<span class="token punctuation">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>message<span class="token punctuation">:</span>resp<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token comment">// 返回列表页面</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
    <h2>
     <a id="_209">
     </a>
     四、修改和删除记录
    </h2>
    <h3>
     <a id="1_210">
     </a>
     1、在所显示的每个对象的旁边添加修改和删除两个按钮
    </h3>
    <pre><code class="prism language-html">      <span class="token comment">&lt;!-- 操作列 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>操作<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- slot-scope="scope"：作用域插槽 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scope<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>editHandler(scope.row)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
              <span class="token comment">&lt;!-- scope.row：当前行数据 --&gt;</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>deleteHandler(scope.row)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h3>
     <a id="2_223">
     </a>
     2、定义修改和删除函数
    </h3>
    <pre><code class="prism language-javascript">        <span class="token comment">// 删除的处理函数</span>
        <span class="token function">deleteHandler</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token string">'此操作将永久删除该数据, 是否继续?'</span><span class="token punctuation">,</span> <span class="token string">'提示'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
confirmButtonText<span class="token punctuation">:</span> <span class="token string">'确定'</span><span class="token punctuation">,</span>
cancelButtonText<span class="token punctuation">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
type<span class="token punctuation">:</span> <span class="token string">'warning'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">// 当用户点击了确定才会执行</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">"http://localhost:8888/baserole/deleteById"</span>
<span class="token comment">// {id:row.id}是一个对象 get、post、delete 的三个方法在传参的时候只能传对象</span>
<span class="token comment">// 记得导入 import { del, get } from '@/utils/request'</span>
<span class="token function">del</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>id<span class="token punctuation">:</span>row<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resp <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">// 提示</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>type<span class="token punctuation">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>message<span class="token punctuation">:</span>resp<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment">// 更新页面</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBaseroles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 修改的处理函数</span>
        <span class="token function">editHandler</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 跳转到表单。$router：vue 的一个模块；push：推动；</span>
<span class="token comment">// {}内为一个对象,里面有两个元素，path 为 form 表单路由的路径（子路由+父路由），</span>
<span class="token comment">// query 为前端传递进来的参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              path<span class="token punctuation">:</span><span class="token string">"/lpa/baserole_form"</span><span class="token punctuation">,</span>
              query<span class="token punctuation">:</span>row
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
    <p>
     其中，删除操作时二次确认使用的弹框ui模板：
    </p>
    <pre><code class="prism language-javascript">		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token string">'此操作将永久删除该文件, 是否继续?'</span><span class="token punctuation">,</span> <span class="token string">'提示'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
confirmButtonText<span class="token punctuation">:</span> <span class="token string">'确定'</span><span class="token punctuation">,</span>
cancelButtonText<span class="token punctuation">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
type<span class="token punctuation">:</span> <span class="token string">'warning'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            type<span class="token punctuation">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
            message<span class="token punctuation">:</span> <span class="token string">'删除成功!'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="3_269">
     </a>
     3、修改记录时提取当前行对象的数据到修改表单
    </h3>
    <pre><code class="prism language-javascript">    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 页面加载出来的时候，拿到路由中的参数，放到this.form中</span>
        <span class="token comment">// 体现了双向数据绑定：当用户输入数据时，数据由表单进入到vue（由用户页面进入到vue实例当中）；vue的form中有数据，数据也会渲染到页面当中</span>
        <span class="token comment">// route：当前路由实例，query即表单传递过来的参数</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>form <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34343030393331372f:61727469636c652f64657461696c732f313135333335383736" class_="artid" style="display:none">
 </p>
</div>
