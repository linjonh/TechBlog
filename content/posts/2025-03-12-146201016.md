---
layout: post
title: "首页拖拽布局layout布局可拖拽保存"
date: 2025-03-12 11:57:21 +0800
description: "首页拖拽布局layout布局可拖拽可保存"
keywords: "首页拖拽布局layout布局可拖拽保存"
categories: ['未分类']
tags: ['前端', 'Typescript', 'Javascript']
artid: "146201016"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146201016
    alt: "首页拖拽布局layout布局可拖拽保存"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146201016
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146201016
cover: https://bing.ee123.net/img/rand?artid=146201016
image: https://bing.ee123.net/img/rand?artid=146201016
img: https://bing.ee123.net/img/rand?artid=146201016
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     首页拖拽布局layout布局可拖拽保存
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <blockquote>
     <h3>
      使用第三方插件实现拖拽布局
     </h3>
     <p>
      “grid-layout-plus”：最新版即可
     </p>
     <p>
      <a href="https://grid-layout-plus.netlify.app/zh/guide/installation.html" rel="nofollow" title="安装 | Grid Layout Plus">
       安装 | Grid Layout Plus
      </a>
     </p>
    </blockquote>
    <h3>
     效果图：
    </h3>
    <h3 style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/d293e164894e4c8086fdb6d431d45371.gif"/>
    </h3>
    <h3>
     代码实现：
    </h3>
    <h4>
     index文件
    </h4>
    <pre><code class="language-javascript">&lt;script setup lang="ts"&gt;
import { ref, reactive } from 'vue'
import cardPage from "../../../components/card/index.vue";

const layout = reactive(
    (localStorage.getItem("layout") &amp;&amp; JSON.parse(localStorage.getItem("layout"))) || [
      { x: 0, y: 1, w: 6, h: 7, i: '1' },
      { x: 6, y: 1, w: 6, h: 7, i: '2' },
      { x: 0, y: 2, w: 12, h: 5.6, i: '3' },
      { x: 0, y: 3, w: 6, h: 8, i: '4' },
      { x: 6, y: 3, w: 6, h: 8, i: '5' },
      { x: 0, y: 4, w: 12, h: 6, i: '6' },
      { x: 0, y: 5, w: 12, h: 6, i: '7' }
    ]
);
const pinkParams = ref({
  title: "我是测试Title",
  desc: "我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据",
  info: "信息信息信息信息信息信息信息信息信息信息",
  detail: "详情详情详情详情详情详情详情",
  file: "Title.xlsx",
});
const redParams = ref({
  title: "我是RED",
  desc: "我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据",
  info: "信息信息信息信息信息信息信息信息信息信息",
  detail: "详情详情详情详情详情详情详情",
  file: "RED.xlsx",
});
const blueParams = ref({
  title: "我是Blue",
  desc: "我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据",
  info: "信息信息信息信息信息信息信息信息信息信息",
  detail: "详情详情详情详情详情详情详情",
  file: "BLUE.xlsx",
});
const grayParams = ref({
  title: "我是Gray",
  desc: "我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据",
  info: "信息信息信息信息信息信息信息信息信息信息",
  detail: "详情详情详情详情详情详情详情",
  file: "Gray.xlsx",
});
const yellowParams = ref({
  title: "我是Yellow",
  desc: "我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据我是详细数据",
  info: "信息信息信息信息信息信息信息信息信息信息",
  detail: "详情详情详情详情详情详情详情",
  file: "Yellow.xlsx",
});

// 移动之后
const handleMoved = (i: number | string, newX: number, newY: number) =&gt;{
  console.log(i, "item", newX, newY);
  console.log(layout, "layout");
  localStorage.setItem("layout", JSON.stringify(layout));
  console.log(JSON.parse(localStorage.getItem("layout")),"1111");
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div style="width: 100%; height: 100%; margin-top: 10px"&gt;
    &lt;GridLayout
        v-model:layout="layout"
        :row-height="30"
        :is-draggable="true"
        :is-resizable="false"
        :is-bounded="true"
    &gt;
      &lt;GridItem
          v-for="item in layout"
          :key="item.i"
          :x="item.x"
          :y="item.y"
          :w="item.w"
          :h="item.h"
          :i="item.i"
          @moved="handleMoved"
      &gt;
        &lt;card-page v-if="item.i==='1'"&gt;
          &lt;template #header&gt;{<!-- -->{pinkParams.title}}&lt;/template&gt;
          &lt;div&gt;{<!-- -->{pinkParams.desc}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{pinkParams.info}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{pinkParams.detail}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{pinkParams.file}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{item.i}}&lt;/div&gt;
        &lt;/card-page&gt;
        &lt;card-page v-else-if="item.i==='2'"&gt;
          &lt;template #header&gt;{<!-- -->{redParams.title}}&lt;/template&gt;
          &lt;div&gt;{<!-- -->{redParams.desc}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{redParams.info}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{redParams.detail}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{redParams.file}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{item.i}}&lt;/div&gt;
        &lt;/card-page&gt;
        &lt;card-page v-else-if="item.i==='3'"&gt;
          &lt;template #header&gt;{<!-- -->{blueParams.title}}&lt;/template&gt;
          &lt;div&gt;{<!-- -->{blueParams.desc}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{blueParams.info}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{blueParams.detail}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{blueParams.file}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{item.i}}&lt;/div&gt;
        &lt;/card-page&gt;
        &lt;card-page v-else-if="item.i==='4'"&gt;
          &lt;template #header&gt;{<!-- -->{grayParams.title}}&lt;/template&gt;
          &lt;div&gt;{<!-- -->{grayParams.desc}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{grayParams.info}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{grayParams.detail}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{grayParams.file}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{item.i}}&lt;/div&gt;
        &lt;/card-page&gt;
        &lt;card-page v-else-if="item.i==='5'"&gt;
          &lt;template #header&gt;{<!-- -->{yellowParams.title}}&lt;/template&gt;
          &lt;div&gt;{<!-- -->{yellowParams.desc}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{yellowParams.info}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{yellowParams.detail}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{yellowParams.file}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{item.i}}&lt;/div&gt;
        &lt;/card-page&gt;
        &lt;card-page v-else-if="item.i==='6'"&gt;
          &lt;template #header&gt;{<!-- -->{grayParams.title}}&lt;/template&gt;
          &lt;div&gt;{<!-- -->{grayParams.desc}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{grayParams.info}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{grayParams.detail}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{grayParams.file}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{item.i}}&lt;/div&gt;
        &lt;/card-page&gt;
        &lt;card-page v-else-if="item.i==='7'"&gt;
          &lt;template #header&gt;{<!-- -->{yellowParams.title}}&lt;/template&gt;
          &lt;div&gt;{<!-- -->{yellowParams.desc}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{yellowParams.info}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{yellowParams.detail}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{yellowParams.file}}&lt;/div&gt;
          &lt;div&gt;{<!-- -->{item.i}}&lt;/div&gt;
        &lt;/card-page&gt;
      &lt;/GridItem&gt;
    &lt;/GridLayout&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
// 整个画布的背景色
.vgl-layout {
  background-color: #eee;
  // 拖拽时，画布的背景色
  --vgl-placeholder-bg: white;
}
// 每个单个画布的背景色
:deep(.vgl-item:not(.vgl-item--placeholder)) {
  background-color: #fff;
  //border: 1px solid black;
}

:deep(.vgl-item--resizing) {
  opacity: 90%;
}

:deep(.vgl-item--static) {
  background-color: #cce;
}

.text {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  margin: auto;
  font-size: 24px;
  text-align: center;
}

.layout-json {
  padding: 10px;
  margin-top: 10px;
  background-color: #ddd;
  border: 1px solid black;
}

.columns {
  columns: 120px;
}
&lt;/style&gt;</code></pre>
    <h4>
     card文件
    </h4>
    <pre><code class="language-javascript">&lt;template&gt;
    &lt;el-card class="box-card"&gt;
      &lt;template #header&gt;
        &lt;div class="card-header"&gt;
          &lt;span&gt;&lt;slot name="header"&gt;&lt;/slot&gt;&lt;/span&gt;
        &lt;/div&gt;
      &lt;/template&gt;
      &lt;div v-if="$slots.default"&gt;
        &lt;slot/&gt;
      &lt;/div&gt;
      &lt;div v-else&gt;111&lt;/div&gt;
    &lt;/el-card&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
.box-card{
  width: 100%;
  :deep(.el-space__item){
    width: 100% !important;
  }
  :deep(.el-space, .el-space--horizontal ){
    width: 100% !important;
    background-color: pink !important;
  }
}
&lt;/style&gt;</code></pre>
    <h3>
     效果图：
    </h3>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/4d415565f0064db891bdd0c6361d6cbd.gif"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34383231353338302f:61727469636c652f64657461696c732f313436323031303136" class_="artid" style="display:none">
 </p>
</div>


