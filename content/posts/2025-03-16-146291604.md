---
layout: post
title: "算法014找到字符串中所有字母异位词"
date: 2025-03-16 16:01:52 +0800
description: "此时，窗口大于 m ，让 left 右移，再将第一个 c 从 hash2 中删除之前，我们要先判断此时这个字符出现的次数是否大于 hash1 中的次数，这种情况，显然是大于，那么删掉的就是无效字符，count 不需要变化，此时 c 的个数变成了 1。我们定义一个变量 m 表示 p 字符串的长度，我们将 p 字符串中字母出现的次数存放在 hash1 中，在 s 这个字符串中，找到长度为 m 的子串 ，将次数存放到 hash2 中，然后比较两个哈希表是否相等就可以。接下来的遍历就省略了。"
keywords: "算法014——找到字符串中所有字母异位词"
categories: ['算法']
tags: ['算法', '数据结构', '哈希算法', 'Java']
artid: "146291604"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146291604
    alt: "算法014找到字符串中所有字母异位词"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146291604
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146291604
cover: https://bing.ee123.net/img/rand?artid=146291604
image: https://bing.ee123.net/img/rand?artid=146291604
img: https://bing.ee123.net/img/rand?artid=146291604
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     算法014——找到字符串中所有字母异位词
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <a href="https://leetcode.cn/problems/find-all-anagrams-in-a-string/description/" rel="nofollow">
      力扣——找到字符串中所有字母异位词
     </a>
     （点击跳转）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6a598c1dcd8a41b680e50c9ba2696837.png">
      <br/>
      如果 P = “abc”，那么下图中的都是它的异位词。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4da1c53b358647dfa8d3679af6f8a5f1.jpeg">
       <br/>
       在 S 中找到 P 的异位词后，要返回起始位置的下标。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3af9ee842a44474296480652b75e01ce.jpeg"/>
      </img>
     </img>
    </p>
    <p>
     做这道题之前，我们要知道如何判断两个字符串是否是异位词，其实我们可以统计每个字符出现的次数，如果两个字符串中每个字符出现的次数相等，那么他们就是异位词。利用哈希表即可
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/143186ebe1704d4097450455007ff954.jpeg">
      <br/>
      我们定义一个变量 m 表示 p 字符串的长度，我们将 p 字符串中字母出现的次数存放在 hash1 中，在 s 这个字符串中，找到长度为 m 的子串 ，将次数存放到 hash2 中，然后比较两个哈希表是否相等就可以。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c877005976694545aa1b3d698b6f31a5.jpeg">
       <br/>
       其实我们没有必要每次都将 m 个字母的次数都存放在哈希表中 ，如下图所示，红色为第一次枚举放入到哈希表中，粉色为第二次枚举放入到哈希表中，被荧光笔涂到的区域其实已经在哈希表中了，没必要再次存放，
       <strong>
        只需要将 c 从哈希表中删除，在将 e 添加到哈希表中即可
       </strong>
       。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0a839487e1634e79ac77b5a795589b46.jpeg">
        <br/>
        所以，我们可以使用滑动窗口的方法来解决此问题。
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8f62b645cf434ae7b675b9b56739dc67.jpeg"/>
       </img>
      </img>
     </img>
    </p>
    <ol>
     <li>
      left = 0,right = 0
     </li>
     <li>
      <strong>
       进窗口
      </strong>
      ：hash2[in]++
     </li>
     <li>
      <strong>
       判断
      </strong>
      ：right - left + 1 &gt; m
      <br/>
      <strong>
       出窗口
      </strong>
      ：hash2[out]–
      <br/>
      <strong>
       更新结果
      </strong>
      :check(hash1,hash2)（比较两个哈希表是否相等）
     </li>
    </ol>
    <p>
     在更新结果当中，我们需要遍历两个哈希表来进行check，比较麻烦，所以我们对更新结果的判断条件进行优化。
    </p>
    <p>
     我们定义一个变量 count 来统计
     <strong>
      窗口
     </strong>
     中
     <strong>
      有效字符
     </strong>
     的个数
    </p>
    <p>
     如下图所示，当 c 进入窗口之后，与 hash1 中 c 字符出现的次数比较，有两种清情况。
    </p>
    <ol>
     <li>
      小于等于 hash1 中的……，说明 c 为有效字符，让 count + 1
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ef89f3dac5a54ec1b4da490eacc39fee.jpeg">
       <br/>
       之后 right 继续右移，然后放入到 hash2 中
      </img>
     </li>
     <li>
      大于 hash1 中的……，count 不更新
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/724c7fde5e12403399aefadbb990ef08.jpeg"/>
      <br/>
      接下来，right 右移
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c2d62a7483f94a79bab39b3d26ba83a6.jpeg"/>
      <br/>
      right 继续右移
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/703b9ff2cbbc4e23a5f330d45e6e1c37.jpeg"/>
     </li>
    </ol>
    <p>
     此时，窗口大于 m ，让 left 右移，再将第一个 c 从 hash2 中删除之前，我们要先判断此时这个字符出现的次数是否大于 hash1 中的次数，这种情况，显然是大于，那么删掉的就是无效字符，count 不需要变化，此时 c 的个数变成了 1。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cf093da4313a4063bea1314e6dacc606.jpeg"/>
     <br/>
     然后我们再判断 count是否等于m，此时count == m，那么窗口中的字符就是 p 的异位词，输出起始位置下标
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/09d4be973b2c4bf38792f495b26273f8.jpeg"/>
     <br/>
     接下来的遍历就省略了
    </p>
    <ol>
     <li>
      <strong>
       进窗口
      </strong>
      ：hash2[in] &lt;= hash1[in] ——&gt; count++
     </li>
     <li>
      <strong>
       出窗口
      </strong>
      ：hash2[out] &lt;= hash1[out] ——&gt; count–
     </li>
     <li>
      <strong>
       更新结果
      </strong>
      ：count==m
     </li>
    </ol>
    <p>
     代码如下：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAnagrams</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ret <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> s1 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> p1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hash1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch <span class="token operator">:</span> p1<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            hash1<span class="token punctuation">[</span>ch <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hash2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>right <span class="token operator">&lt;</span> s1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>right<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">char</span> in <span class="token operator">=</span> s1<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">++</span>hash2<span class="token punctuation">[</span>in <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> hash1<span class="token punctuation">[</span>in <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&gt;</span> m<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">char</span> out <span class="token operator">=</span> s1<span class="token punctuation">[</span>left<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>hash2<span class="token punctuation">[</span>out <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span><span class="token operator">--</span> <span class="token operator">&lt;=</span> hash1<span class="token punctuation">[</span>out <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    count<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">==</span> m<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                ret<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     今日任务完成，嘻嘻
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f0cd29817cff4e3481e551c40578ec2d.jpeg"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37353137383631362f:61727469636c652f64657461696c732f313436323931363034" class_="artid" style="display:none">
 </p>
</div>


