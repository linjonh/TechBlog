---
layout: post
title: æ¯•ä¸šè®¾è®¡-å¤§æ•°æ®å…¨å›½ç–«æƒ…æ•°æ®åˆ†æä¸3Då¯è§†åŒ–-python-å¤§æ•°æ®
date: 2024-09-06 16:26:01 +0800
categories: ['è®¡ç®—æœºä¸“ä¸š', 'æ¯•è®¾é€‰é¢˜', 'æ¯•ä¸šè®¾è®¡ç³»åˆ—']
tags: ['æ¯•ä¸šè®¾è®¡', 'æ•°æ®åˆ†æ', 'å¤§æ•°æ®æ¯•è®¾', 'å¤§æ•°æ®', 'Python']
image:
    path: https://img-blog.csdnimg.cn/19b15e17a3834f899a20ef0fd06784f1.png?x-oss-process=image/resize,m_fixed,h_150
    alt: æ¯•ä¸šè®¾è®¡-å¤§æ•°æ®å…¨å›½ç–«æƒ…æ•°æ®åˆ†æä¸3Då¯è§†åŒ–-python-å¤§æ•°æ®
artid: 127065500
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=127065500
featuredImagePreview: https://bing.ee123.net/img/rand?artid=127065500
---

# æ¯•ä¸šè®¾è®¡ å¤§æ•°æ®å…¨å›½ç–«æƒ…æ•°æ®åˆ†æä¸3Då¯è§†åŒ– - python å¤§æ•°æ®

#### æ–‡ç« ç›®å½•

* [0 å‰è¨€](#0__3)
* [1 è¯¾é¢˜èƒŒæ™¯](#1__21)
* [2 å®ç°æ•ˆæœ](#2__25)
* [3 è®¾è®¡åŸç†](#3__48)
* [4 éƒ¨åˆ†ä»£ç ](#4__181)
* [5 æœ€å](#5__321)

---

## 0 å‰è¨€

ğŸ”¥ è¿™ä¸¤å¹´å¼€å§‹æ¯•ä¸šè®¾è®¡å’Œæ¯•ä¸šç­”è¾©çš„è¦æ±‚å’Œéš¾åº¦ä¸æ–­æå‡ï¼Œä¼ ç»Ÿçš„æ¯•è®¾é¢˜ç›®ç¼ºå°‘åˆ›æ–°å’Œäº®ç‚¹ï¼Œå¾€å¾€è¾¾ä¸åˆ°æ¯•ä¸šç­”è¾©çš„è¦æ±‚ï¼Œè¿™ä¸¤å¹´ä¸æ–­æœ‰å­¦å¼Ÿå­¦å¦¹å‘Šè¯‰å­¦é•¿è‡ªå·±åšçš„é¡¹ç›®ç³»ç»Ÿè¾¾ä¸åˆ°è€å¸ˆçš„è¦æ±‚ã€‚

ä¸ºäº†å¤§å®¶èƒ½å¤Ÿé¡ºåˆ©ä»¥åŠæœ€å°‘çš„ç²¾åŠ›é€šè¿‡æ¯•è®¾ï¼Œå­¦é•¿åˆ†äº«ä¼˜è´¨æ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œä»Šå¤©è¦åˆ†äº«çš„æ˜¯

ğŸš©
**å¤§æ•°æ®å…¨å›½ç–«æƒ…æ•°æ®åˆ†æä¸3Då¯è§†åŒ–**

ğŸ¥‡å­¦é•¿è¿™é‡Œç»™ä¸€ä¸ªé¢˜ç›®ç»¼åˆè¯„åˆ†(æ¯é¡¹æ»¡åˆ†5åˆ†)

* éš¾åº¦ç³»æ•°ï¼š2åˆ†
* å·¥ä½œé‡ï¼š3åˆ†
* åˆ›æ–°ç‚¹ï¼š4åˆ†

ğŸ§¿
**é€‰é¢˜æŒ‡å¯¼, é¡¹ç›®åˆ†äº«ï¼š**

<https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md>

## 1 è¯¾é¢˜èƒŒæ™¯

åŸºäºå¤§æ•°æ®çš„æ–°å‹å† çŠ¶ç—…æ¯’ç–«æƒ…ä¸‰ç»´å¯è§†åŒ–ï¼Œå€ŸåŠ©3Då·¥å…·å®ç°æ–°å† ç—…æ¯’çš„å¯è§†åŒ–åˆ†æã€‚

## 2 å®ç°æ•ˆæœ

**å…¨çƒæŸ±çŠ¶å›¾**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/6e9dff86708fbfe49968a5c543f1c970.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/81713af6d34c4da086af572f59472983.gif)

**å…¨å›½å’Œåˆ†çœçš„é¢ç€è‰²**
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/afd8f84bc48950657f2914582fc08e0e.png)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/bf0d89a27b464715901f92187a4b1169.gif)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/8ca636ab159d8aeeadd828422b17ab12.gif)

**å…¨å›½åŸå¸‚çƒ­åŠ›å›¾**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/6672ce7c597ed9cf420f6818180ff604.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/4db7ccf7bc4163cbd4cf93459c5abe21.gif)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/4f42256ef6d870fd12a83477a3a90042.png)

## 3 è®¾è®¡åŸç†

**å¦‚ä½•ç”¨EarthSDKæ„å»ºä¸€ä¸ªç®€å•çš„ä¸‰ç»´App**

æ„å»ºæ­¥éª¤
  
1ä¸‹è½½EarthSDK
  
åœ°å€ï¼šhttps://earthsdk.com/v/v1.1.0.zip

2.åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå°†EarthSDKæ”¾å…¥æ–‡ä»¶å¤¹å†…ï¼Œå¹¶æ–°å»ºä¸€ä¸ªindex.htmlæ–‡ä»¶ã€‚
  
3.index.htmlæ–‡ä»¶å†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="xbsj-labels" content="Earthèµ·æ­¥"></meta>
    <title>åˆ›å»ºåœ°çƒ</title>
    <!-- 0 å¼•å…¥jsæ–‡ä»¶ -->
    <script src="./v1.1.0/XbsjEarth/XbsjEarth.js"></script>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>

<body>
    <div id="earthContainer" style="width: 100%; height: 100%; background: grey">
    </div>
    <script>
        var earth;

        function startup() {
            earth = new XE.Earth('earthContainer');

            earth.sceneTree.root = {
                "children": [
                    {
                        "czmObject": {
                            "name": "é»˜è®¤ç¦»çº¿å½±åƒ",
                            "xbsjType": "Imagery",
                            "xbsjImageryProvider": {
                                "createTileMapServiceImageryProvider": {
                                    "url": XE.HTML.cesiumDir + 'Assets/Textures/NaturalEarthII',
                                    "fileExtension": 'jpg',
                                },
                                "type": "createTileMapServiceImageryProvider"
                            }
                        }
                    },
                ]
            };
        }

        // 1 XE.ready()ä¼šåŠ è½½Cesium.jsç­‰å…¶ä»–èµ„æºï¼Œæ³¨æ„ready()è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚
        XE.ready().then(startup);            
    </script>
</body>

</html>

```

4.åœ¨myAppç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤hs -p 81ï¼Œä»è€Œå»ºè®®ä¸€ä¸ªæœ¬åœ°çš„httpæœåŠ¡ã€‚

5.æ‰“å¼€chromeæµè§ˆå™¨ï¼Œè¾“å…¥http://127.0.0.1:81ï¼Œå³å¯è®¿é—®åˆšæ‰åˆ›å»ºçš„ä¸‰ç»´Appã€‚

**index.htmlæ–‡ä»¶ä»£ç è®²è§£**

1.headèŠ‚ç‚¹ä¸‹éœ€è¦å¼•å…¥XbsjEarth.jsæ–‡ä»¶ã€‚

```html
<script src="./v1.1.0/XbsjEarth/XbsjEarth.js"></script>

```

XbsjEarth.jså†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨Cesiumç›¸å…³çš„jså’Œcssæ–‡ä»¶ï¼Œå› æ­¤ä¸éœ€è¦å†å¼•å…¥å…¶ä»–Cesiumç›¸å…³çš„jså’Œcssæ–‡ä»¶ã€‚

2.bodyèŠ‚ç‚¹ä¸‹éœ€è¦å¢åŠ ä¸€ä¸ªdiv

```html
<div id="earthContainer" style="width: 100%; height: 100%; background: grey">

```

è¿™ä¸ªdivç”¨æ¥æ‰¿è½½ä¸‰ç»´Appã€‚

3.åˆ›å»ºApp

```python
earth = new XE.Earth('earthContainer');

```

XE.Earthæ˜¯EarthSDKæä¾›çš„ç”¨æ¥åˆ›å»ºä¸‰ç»´Appçš„åŸºç¡€ç±»ï¼Œå…¶å‚æ•°â€™earthContainerâ€™å®é™…ä¸Šæ˜¯ä¸Šä¸€ä¸ªæ­¥éª¤åˆ›å»ºçš„divçš„idã€‚è¿™æ ·å°±ç›¸å½“äºåŸºäºè¿™ä¸ªdivåˆ›å»ºäº†ä¸€ä¸ªä¸‰ç»´Appã€‚
  
4 ä¸‰ç»´åœºæ™¯çš„åŸºæœ¬é…ç½®

```json
earth.sceneTree.root = {
    "children": [
        {
            "czmObject": {
                "name": "é»˜è®¤ç¦»çº¿å½±åƒ",
                "xbsjType": "Imagery",
                "xbsjImageryProvider": {
                    "createTileMapServiceImageryProvider": {
                        "url": XE.HTML.cesiumDir + 'Assets/Textures/NaturalEarthII',
                        "fileExtension": 'jpg',
                    },
                    "type": "createTileMapServiceImageryProvider"
                }
            }
        },
    ]
};

```

é€šè¿‡é…ç½®earth.sceneTree.rootï¼Œæ¥ç»™åœ°çƒè¡¨é¢è´´ä¸Šä¸€å±‚ç¦»çº¿å½±åƒã€‚

earth.sceneTreeä»£è¡¨æ•´ä¸ªä¸‰ç»´Appçš„åœºæ™¯æ ‘ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡ç®€å•çš„JSONé…ç½®æ¥è¾¾æˆã€‚è¿™é‡Œé¢åªå¢åŠ äº†ä¸€ä¸ªCzmObjectç±»å‹çš„å¯¹è±¡ï¼Œå®ƒçš„ç±»å‹xbsjTypeæ˜¯Imageryï¼Œå³å½±åƒã€‚

å‰ä¸¤ä¸åˆ›å»ºAppå’Œä¸‰ç»´åœºæ™¯é…ç½®çš„ä»£ç æ˜¯å†™åœ¨startupè¿™ä¸ªå‡½æ•°é‡Œé¢çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ï¼š
  
XE.ready().then(startup);
  
æ¥è°ƒç”¨startupæ‰§è¡Œç›¸åº”åœ°åˆ›å»ºæ“ä½œã€‚
  
é‚£ä¹ˆä¸ºä½•éœ€è¦é€šè¿‡XE.ready()æ¥æ“ä½œå‘¢ã€‚å› ä¸ºXE.ready()å‡½æ•°ä¼šè‡ªåŠ¨åŠ è½½Cesium.jså’Œç›¸å…³çš„cssæ–‡ä»¶ï¼Œå½“åŠ è½½å®Œæˆä»¥åæ‰èƒ½è¿›è¡ŒCesiumçš„ç›¸å…³æ“ä½œã€‚

XE.ready()çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡thenå›è°ƒï¼Œç­‰åˆ°Promiseæ‰§è¡Œå®Œæˆä»¥åå†æ‰§è¡Œstartupæ“ä½œã€‚

## 4 éƒ¨åˆ†ä»£ç 

```json
// The Vue build version to load with the `import` command
// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
import Vue from 'vue'
import App from './App'
import router from './router'
//import ViewUI from 'view-design';
//import 'view-design/dist/styles/iview.css';

Vue.config.productionTip = false;

/* eslint-disable no-new */
// XE.ready()ç”¨æ¥åŠ è½½Cesium.jsç­‰ç›¸å…³èµ„æº

XE.ready().then(() => {
    // åŠ è½½æ ‡ç»˜æ’ä»¶
    return XE.HTML.loadJS('../static/XbsjEarth-Plugins/plottingSymbol/plottingSymbol.js');
}).then(() => {
    // åŠ è½½æ ‡ç»˜æ’ä»¶
    return XE.HTML.loadJS('../static/XbsjEarth-Plugins/customPrimitive/customPrimitive.js');
}).then(() => {
    // vtxf g_appèµ‹å€¼ï¼Œæ–¹ä¾¿è°ƒè¯•
    window.g_app = new Vue({
        el: '#app',
        router,
        data() {
            return {
                currentArea: 'china',
                mousemoveArea: '',
                //ä¿®æ”¹ currentDay ä¸º currentTime è¡¨ç¤ºæ•´å½¢ï¼ŒDataServerçš„æ‰€æœ‰æ•°æ®æŸ¥è¯¢æ¥å£ å…·æœ‰ ut å‚æ•°ï¼Œè¡¨ç¤ºæŸ¥è¯¢çš„æˆªè‡³æ—¶é—´, ä¸º0 è¡¨ç¤ºå–æœ€æ–°å€¼
                currentTime: new Date().getTime(),
                intervalID: undefined
            }
        },
        components: {
            App
        },
        template: '<App/>',
        mounted() {
            this.startGlobeUpdate();
        },
        methods: {
            startGlobeUpdate() {
                this.currentTime = new Date().getTime();
                if (!this.intervalID) {
                    var self = this;
                    this.intervalID = setInterval(() => {
                        self.currentTime = new Date().getTime();

                        console.log('globe update', self.currentTime);
                    }, 60000);
                }
            },
            stopGlobeUpdate() {
                if (this.intervalID) {
                    clearInterval(this.intervalID);
                    this.intervalID = undefined;
                }
            }
        }
    })
});

```

```python
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="xbsj-labels" content="Earthèµ·æ­¥"></meta>
    <title>åˆ›å»ºåœ°çƒ</title>

    <!-- å¼ºåˆ¶æå‰åŠ è½½Cesium.jsï¼Œå…¶ä¸­Cesiumç›¸å…³è·¯å¾„å¯ä»¥æ¢æˆè‡ªå®šä¹‰çš„ -->
    <!-- <script src="../../XbsjCesium/Cesium.js"></script> -->
    <!-- <link rel="stylesheet" href="../../XbsjCesium/Widgets/Widgets.css"> -->

    <!-- 0 å¼•å…¥jsæ–‡ä»¶ -->
    <script src="../../XbsjCesium/Cesium.js"></script>
    <link rel="stylesheet" href="../../XbsjCesium/Widgets/widgets.css">
    <script src="../../XbsjEarth/XbsjEarth.js"></script>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>

<body>
    <div id="earthContainer" style="width: 100%; height: 100%; background: grey">
    </div>
    <script>
        var earth;
        var bgImagery;

        function startup() {
            // earth = new XE.Earth('earthContainer');
            earth = new XE.Earth('earthContainer', {
                // è¿™é‡Œè®¾ç½®Viewerçš„é…ç½®ï¼Œå’Œnew Viewer(container, options)ä¸­çš„optionsä¸€è‡´
                homeButton: true,
                timeline: true,
            });

            earth.sceneTree.root = {
                "children": [
                    {
                        "czmObject": {
                            "name": "é»˜è®¤ç¦»çº¿å½±åƒ",
                            "xbsjType": "Imagery",
                            "xbsjImageryProvider": {
                                "createTileMapServiceImageryProvider": {
                                    "url": XE.HTML.cesiumDir + 'Assets/Textures/NaturalEarthII',
                                    "fileExtension": 'jpg',
                                },
                                "type": "createTileMapServiceImageryProvider"
                            }
                        }
                    },
                ]
            };
        }

        // 1 XE.ready()ä¼šåŠ è½½Cesium.jsç­‰å…¶ä»–èµ„æºï¼Œæ³¨æ„ready()è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚
        XE.ready().then(startup);            
    </script>
</body>

</html>

```

## 5 æœ€å