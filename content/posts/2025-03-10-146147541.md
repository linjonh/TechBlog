---
layout: post
title: "linux-软件安装下"
date: 2025-03-10 10:54:13 +0800
description: "head插件是ES的一个可视化管理插件，用来监视ES的状态，并通过head客户端和ES服务进行交互，比如创建映射、创建索引等。安装完后，默认head插件的web端口为9100，ElasticSearch服务的端口为9200，使用浏览器访问head地址，如[http://IP地址:9100/](http://10.82.25.183:9100/)，推荐使用Chrome浏览器，head插件对Chrome浏览器兼容更佳。使用Kibana，可以通过各种图表进行高级数据分析及展示。建议修改成一个有意义的名称。"
keywords: "linux 软件安装(下)"
categories: ['未分类']
tags: ['运维', 'Linux', 'Java', 'Es']
artid: "146147541"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146147541
    alt: "linux-软件安装下"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146147541
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146147541
cover: https://bing.ee123.net/img/rand?artid=146147541
image: https://bing.ee123.net/img/rand?artid=146147541
img: https://bing.ee123.net/img/rand?artid=146147541
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     linux 软件安装(下)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
     七、ElasticSearch安装
    </h3>
    <p>
     官网地址：
     <a href="https://www.elastic.co/cn/elasticsearch/" rel="nofollow" title="Elasticsearch：官方分布式搜索和分析引擎 | Elastic">
      Elasticsearch：官方分布式搜索和分析引擎 | Elastic
     </a>
     ​ 官网下载地址：
     <a href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch" rel="nofollow" title="Past Releases of Elastic Stack Software | Elastic">
      Past Releases of Elastic Stack Software | Elastic
     </a>
    </p>
    <h4>
     7.1、linux安装
    </h4>
    <p>
     <strong>
      1、上传安装包
     </strong>
    </p>
    <blockquote>
     <p>
      alt+p # 打开sftp窗口
      <br/>
      # 上传es安装包
      <br/>
      put e:/software/elasticsearch-7.4.0-linux-x86_64.tar.gz
     </p>
    </blockquote>
    <p>
     <strong>
      2、解压
     </strong>
    </p>
    <blockquote>
     <p>
      # 将elasticsearch-7.4.0-linux-x86_64.tar.gz解压到opt文件夹下. -C 大写
      <br/>
      tar -zxvf elasticsearch-7.4.0-linux-x86_64.tar.gz  -C /opt
     </p>
    </blockquote>
    <p>
     <strong>
      3、创建普通用户
     </strong>
    </p>
    <p>
     因为安全问题，Elasticsearch 不允许root用户直接运行，所以要创建新用户，在root用户中创建新用户,执行如下命令：
    </p>
    <blockquote>
     <p>
      groupadd elsearch
      <br/>
      useradd test -g elsearch # 新增test用户，并且设置所属组
      <br/>
      passwd  test  # 为test用户设置密码
      <br/>
      或
      <br/>
      groupadd elsearch
      <br/>
      useradd test -g elsearch -p test  #一步设置用户组和密码
     </p>
    </blockquote>
    <p>
     <strong>
      4、为新用户授权
     </strong>
    </p>
    <blockquote>
     <p>
      <strong>
       chown -R test:test /opt/elasticsearch-7.4.0 #文件夹所有者
      </strong>
     </p>
     <p>
     </p>
     <p>
      将 /opt/elasticsearch-7.4.0文件夹授权给test用户，由上图可见，我们的文件夹权限赋给了test
     </p>
    </blockquote>
    <p>
     <strong>
      5、修改elasticsearch.yml文件
     </strong>
    </p>
    <blockquote>
     <p>
      vim /opt/elasticsearch-7.4.0/config/elasticsearch.yml
     </p>
    </blockquote>
    <blockquote>
     <p>
      # ======================== Elasticsearch Configuration =========================
      <br/>
      cluster.name: my-application
      <br/>
      node.name: node-1
      <br/>
      network.host: 0.0.0.0
      <br/>
      http.port: 9200
      <br/>
      cluster.initial_master_nodes: ["node-1"]
     </p>
    </blockquote>
    <p>
     注:
    </p>
    <p>
     cluster.name：配置elasticsearch的集群名称，默认是elasticsearch。建议修改成一个有意义的名称
    </p>
    <p>
     node.name：节点名，elasticsearch会默认随机指定一个名字，建议指定一个有意义的名称，方便管理
    </p>
    <p>
     network.host：设置为0.0.0.0允许外网访问
    </p>
    <p>
     http.port：Elasticsearch的http访问端口
    </p>
    <p>
     cluster.initial_master_nodes：初始化新的集群时需要此配置来选举master
    </p>
    <p>
     <strong>
      6、修改配置文件
     </strong>
    </p>
    <p>
     新创建的test用户最大可创建文件数太小，最大虚拟内存太小，切换到root用户，编辑下列配置文件， 添加
    </p>
    <p>
     类似如下内容
    </p>
    <blockquote>
     <p>
      # 切换到root用户
      <br/>
      su root
     </p>
     <p>
      #1. ===最大可创建文件数太小=======
      <br/>
      vim /etc/security/limits.conf
      <br/>
      # 在文件末尾中增加下面内容
      <br/>
      test soft nofile 65536
      <br/>
      test hard nofile 65536
      <br/>
      # =====
      <br/>
      vim /etc/security/limits.d/20-nproc.conf
      <br/>
      # 在文件末尾中增加下面内容
      <br/>
      test soft nofile 65536
      <br/>
      test hard nofile 65536
      <br/>
      *  hard    nproc     4096
      <br/>
      # 注：* 代表Linux所有用户名称
     </p>
     <p>
      #2. ===最大虚拟内存太小=======
      <br/>
      vim /etc/sysctl.conf
      <br/>
      # 在文件中增加下面内容
      <br/>
      vm.max_map_count=655360
      <br/>
      # 重新加载，输入下面命令：
      <br/>
      sysctl -p
     </p>
    </blockquote>
    <p>
     <strong>
      7、启动elasticsearch
     </strong>
    </p>
    <blockquote>
     <p>
      su test  # 切换到test用户启动
      <br/>
      cd /opt/elasticsearch-7.4.0/bin
      <br/>
      ./elasticsearch #启动
     </p>
    </blockquote>
    <p>
     <strong>
      8、访问elasticsearch
     </strong>
    </p>
    <p>
     <strong>
      在访问elasticsearch前，请确保防火墙是关闭的，执行命令：
     </strong>
    </p>
    <blockquote>
     <p>
      #暂时关闭防火墙
      <br/>
      systemctl  stop  firewalld
      <br/>
      # 或者
      <br/>
      #永久设置防火墙状态
      <br/>
      systemctl enable firewalld.service  #打开防火墙永久性生效，重启后不会复原
      <br/>
      systemctl disable firewalld.service #关闭防火墙，永久性生效，重启后不会复原
     </p>
    </blockquote>
    <h4>
     7.2、windows安装
    </h4>
    <blockquote>
     <p>
      1）. 解压缩：elasticsearch-7.14.0-windows-x86_64.zip，放到软件安装目录
      <br/>
      2）. 编辑 config/elasticsearch.yml
      <br/>
      cluster.name: my-application
      <br/>
      node.name: node-1
      <br/>
      network.host: 0.0.0.0
      <br/>
      http.port: 9200
      <br/>
      cluster.initial_master_nodes: ["node-1"]
      <br/>
      3）. 启动&amp;访问：
      <br/>
      双击：bin/elasticsearch.bat
      <br/>
      访问：http://localhost:9200
      <br/>
      4）. 查看elastic是否启动
      <br/>
      ps -ef|grep elastic
     </p>
    </blockquote>
    <h4>
     7.3、 docker安装
    </h4>
    <blockquote>
     <p>
      1、需要让es和kibana容器互联。这里先创建一个网络： docker network create es-net
      <br/>
      2、加载镜像：docker load -i es.tar，也可以自行pull
      <br/>
      3、创建容器：
      <br/>
      docker run -d --name es \
      <br/>
      -e "ES_JAVA_OPTS=-Xms512m -Xmx512m" \
      <br/>
      -e "discovery.type=single-node" \                            #监听的地址，可以外网访问
      <br/>
      -v es-data:/usr/share/elasticsearch/data \
      <br/>
      -v es-plugins:/usr/share/elasticsearch/plugins \
      <br/>
      --privileged \
      <br/>
      --network es-net \
      <br/>
      --restart=always
      <br/>
      -p 9200:9200 \
      <br/>
      -p 9300:9300 \
      <br/>
      elasticsearch:7.12.1
      <br/>
      4、在浏览器中输入：http://192.168.136.161:9200 即可看到elasticsearch的响应结果：
     </p>
    </blockquote>
    <h3>
     八、Kibana安装
    </h3>
    <p>
     官网地址：
     <a href="https://www.elastic.co/cn/elasticsearch/" rel="nofollow" title="Elasticsearch：官方分布式搜索和分析引擎 | Elastic">
      Elasticsearch：官方分布式搜索和分析引擎 | Elastic
     </a>
     ​ 官网下载地址：
     <a href="https://www.elastic.co/cn/downloads/past-releases#kibana" rel="nofollow" title="Past Releases of Elastic Stack Software | Elastic">
      Past Releases of Elastic Stack Software | Elastic
     </a>
     注意：下载es对应版本zip包
    </p>
    <h4>
     1、linux安装
    </h4>
    <p>
     <strong>
      1.1、什么是Kibana
     </strong>
    </p>
    <blockquote>
     <p>
      Kibana是一个针对Elasticsearch的开源分析及可视化平台，用来搜索、查看交互存储在Elasticsearch索引中的数据。使用Kibana，可以通过各种图表进行高级数据分析及展示。Kibana让海量数据更容易理解。它操作简单，基于浏览器的用户界面可以快速创建仪表板（dashboard）实时显示Elasticsearch查询动态。
     </p>
    </blockquote>
    <p>
     <strong>
      1.2、解压kibana
     </strong>
    </p>
    <blockquote>
     <p>
      tar -zxvf kibana-7.4.0-linux-x86_64.tar.gz -C /opt
     </p>
    </blockquote>
    <p>
     1.3
     <strong>
      、修改kibana配置
     </strong>
    </p>
    <blockquote>
     <p>
      vim /opt/kibana-7.4.0-linux-x86_64/config/kibana.yml
     </p>
    </blockquote>
    <blockquote>
     <p>
      server.port: 5601
      <br/>
      server.host: "0.0.0.0"
      <br/>
      server.name: "kibana-itcast"
      <br/>
      elasticsearch.hosts: ["http://127.0.0.1:9200"]
      <br/>
      elasticsearch.requestTimeout: 99999
     </p>
    </blockquote>
    <blockquote>
     <p>
      server.port：http访问端口
      <br/>
      ​server.host：ip地址，0.0.0.0表示可远程访问
      <br/>
      ​server.name：kibana服务名
      <br/>
      ​elasticsearch.hosts：elasticsearch地址
      <br/>
      ​elasticsearch.requestTimeout：请求elasticsearch超时时间，默认为30000，此处可根据情况设置
     </p>
    </blockquote>
    <p>
     1.4、启动kibana
    </p>
    <p>
     由于kibana不建议使用root用户启动，如果用root启动，需要加--allow-root参数
    </p>
    <blockquote>
     <p>
      # 切换到kibana的bin目录
      <br/>
      cd /opt/kibana-7.4.0-linux-x86_64/bin
      <br/>
      # 启动
      <br/>
      ./kibana --allow-root
     </p>
    </blockquote>
    <h4>
     2、windows安装
    </h4>
    <blockquote>
     <p>
      1. 解压缩：kibana-7.14.0-windows-x86_64.zip，放到软件安装目录
      <br/>
      2. 编辑 config/kibana.yml
      <br/>
      server.port: 5601
      <br/>
      server.host: "0.0.0.0"
      <br/>
      server.name: "kibana-itcast"
      <br/>
      elasticsearch.hosts: ["http://127.0.0.1:9200"]
      <br/>
      elasticsearch.requestTimeout: 99999
      <br/>
      3. 启动&amp;访问：
      <br/>
      双击：bin/kibana.bat
      <br/>
      访问：http://localhost:5601
      <br/>
      4、后台启动方式
      <br/>
      nohup ./kibana --allow-root&amp;
     </p>
    </blockquote>
    <h4>
     3、docker安装
    </h4>
    <blockquote>
     <p>
      1、导入镜像：docker load -i kibana.tar，或者自行pull
      <br/>
      2、运行容器
      <br/>
      docker run -d \
      <br/>
      --name kibana \
      <br/>
      -e ELASTICSEARCH_HOSTS=http://es:9200 \
      <br/>
      --network=es-net \
      <br/>
      --restart=always
      <br/>
      -p 5601:5601  \
      <br/>
      kibana:7.12.1
      <br/>
      3、kibana一般启动比较慢，查看日志:docker logs -f kibana
      <br/>
      4、在浏览器输入地址访问：http://192.168.136.161:5601，即可看到结果
     </p>
    </blockquote>
    <p>
     <a href="https://blog.csdn.net/Cynicism_Smile/article/details/146147233?sharetype=blogdetail&amp;sharerId=146147233&amp;sharerefer=PC&amp;sharesource=Cynicism_Smile&amp;spm=1011.2480.3001.8118" title="linux 软件安装(上)-CSDN博客">
      linux 软件安装(上)-CSDN博客
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/Cynicism_Smile/article/details/146147383?spm=1001.2014.3001.5501" title="linux 软件安装(中)-CSDN博客">
      linux 软件安装(中)-CSDN博客
     </a>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f43796e696369736d5f536d696c652f:61727469636c652f64657461696c732f313436313437353431" class_="artid" style="display:none">
 </p>
</div>


