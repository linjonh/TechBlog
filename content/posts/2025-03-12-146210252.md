---
layout: post
title: "蓝桥-2109统计子矩阵"
date: 2025-03-12 17:27:05 +0800
description: "给定一个N×M 的矩阵 A, 请你统计有多少个子矩阵 (最小 1×1, 最大 N×M) 满足子矩阵中所有数的和不超过给定的整数 K?对于 100% 的数据, 1≤N,M≤500;之后 NN 行每行包含 M 个整数, 代表矩阵 A.对于 70% 的数据, N,M≤100.大小为 1×11×1 的有 10 个。对于 30% 的数据, N,M≤20.大小为 1×21×2 的有 3 个。大小为 1×31×3 的有 2 个。大小为 1×41×4 的有 1 个。大小为 2×12×1 的有 3 个。"
keywords: "蓝桥 2109统计子矩阵"
categories: ['前缀和']
tags: ['前缀和']
artid: "146210252"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146210252
    alt: "蓝桥-2109统计子矩阵"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146210252
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146210252
cover: https://bing.ee123.net/img/rand?artid=146210252
image: https://bing.ee123.net/img/rand?artid=146210252
img: https://bing.ee123.net/img/rand?artid=146210252
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     蓝桥 2109统计子矩阵
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4 id="问题描述">
     问题描述
    </h4>
    <p>
     给定一个N×M 的矩阵 A, 请你统计有多少个子矩阵 (最小 1×1, 最大 N×M) 满足子矩阵中所有数的和不超过给定的整数 K ?
    </p>
    <h4 id="输入格式">
     输入格式
    </h4>
    <p>
     第一行包含三个整数 N,M 和 K.
    </p>
    <p>
     之后 NN 行每行包含 M 个整数, 代表矩阵 A.
    </p>
    <h4 id="输出格式">
     输出格式
    </h4>
    <p>
     一个整数代表答案。
    </p>
    <h4 id="样例输入">
     样例输入
    </h4>
    <pre><code>3 4 10
1 2 3 4
5 6 7 8
9 10 11 12
</code></pre>
    <p>
    </p>
    <h4 id="样例输出">
     样例输出
    </h4>
    <pre><code>19
</code></pre>
    <p>
    </p>
    <h4 id="样例说明">
     样例说明
    </h4>
    <p>
     满足条件的子矩阵一共有 19 , 包含:
    </p>
    <p>
     大小为 1×11×1 的有 10 个。
    </p>
    <p>
     大小为 1×21×2 的有 3 个。
    </p>
    <p>
     大小为 1×31×3 的有 2 个。
    </p>
    <p>
     大小为 1×41×4 的有 1 个。
    </p>
    <p>
     大小为 2×12×1 的有 3 个。
    </p>
    <h4 id="评测用例规模与约定">
     评测用例规模与约定
    </h4>
    <p>
     对于 30% 的数据, N,M≤20.
    </p>
    <p>
     对于 70% 的数据, N,M≤100.
    </p>
    <p>
     对于 100% 的数据, 1≤N,M≤500; 0≤Aij≤1000; 1≤K≤250000000
    </p>
    <h4 id="运行限制">
     运行限制
    </h4>
    <ul>
     <li>
      最大运行时间：1s
     </li>
     <li>
      最大运行内存: 256M
     </li>
    </ul>
    <pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;

const int N = 510;
int a[N][N];
int n, m, k;

int main() 
{
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;
    for (int i = 1; i &lt;= n; i++)
    {
        for (int j = 1; j &lt;= m; j++) 
		{
            scanf("%d", &amp;a[i][j]);
            a[i][j] += a[i - 1][j]; //求第j列前i行的前缀和
        }
    } 
        
    long long ans = 0;
    
    for (int i = 1; i &lt;= n; i++)
    {
        for (int j = i; j &lt;= n; j++)
        {
            //双指针维护左右边界
            for (int l = 1, r = 1, sum = 0; r &lt;= m; r++) 
			{
                sum += a[j][r] - a[i - 1][r]; //第l~r列 i~j行的和
                //a[j][r] 表示第 r 列的前 j 行的前缀和
                //a[j][r]-a[i-1][r] 就是第 r 列从第 i 行到第 j 行的和。
                
                while (sum &gt; k) 
				{ //如果大于k，左边界右移
                    sum -= a[j][l] - a[i - 1][l];
                    l++;
                }
                ans += r - l + 1;
            }
        }
    }
    
    cout &lt;&lt; ans &lt;&lt; endl;
}</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323430325f38353036333636302f:61727469636c652f64657461696c732f313436323130323532" class_="artid" style="display:none">
 </p>
</div>


