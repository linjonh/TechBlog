---
arturl_encode: "68747470:733a2f2f626c6f672e6373646e2e6e65742f637a6a6e6f652f:61727469636c652f64657461696c732f313436313634343130"
layout: post
title: "postgresql-json和jsonb问题记录"
date: 2025-03-10 21:21:25 +0800
description: "jsonb会打乱原json属性顺序，但是支持索引。"
keywords: "postgresql json和jsonb问题记录"
categories: ['未分类']
tags: ['Postgresql']
artid: "146164410"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146164410
    alt: "postgresql-json和jsonb问题记录"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146164410
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146164410
cover: https://bing.ee123.net/img/rand?artid=146164410
image: https://bing.ee123.net/img/rand?artid=146164410
img: https://bing.ee123.net/img/rand?artid=146164410
---

# postgresql json和jsonb问题记录

jsonb会打乱原json属性顺序，但是支持索引

原json：

```javascript
[{
        "ITEM": "W(nm)",
        "HZ1": 0,
        "HZ2": 0
    }, {
        "ITEM": "OL(nm)",
        "HZ1": 0,
        "HZ2": 0
    }, {
        "ITEM": "OR(nm)",
        "HZ1": 0,
        "HZ2": 0
    }
]
```

```sql
CREATE TABLE mc.test (
	id int8 GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	json_detail jsonb NOT NULL
);
```

**json类型保存数据库后：**

> [{"HZ1": 0, "HZ2": 0, "ITEM": "W(nm)"}, {"HZ1": 0, "HZ2": 0, "ITEM": "OL(nm)"}, {"HZ1": 0, "HZ2": 0, "ITEM": "OR(nm)"}]

![](https://i-blog.csdnimg.cn/direct/d7006aefe68349e88975cfda48eb9e52.png)

**改成json类型后：**

```sql
CREATE TABLE mc.test (
	id int8 GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	json_detail json NOT NULL
);
```

> [{"ITEM":"W(nm)","HZ1":0,"HZ2":0},{"ITEM":"OL(nm)","HZ1":0,"HZ2":0},{"ITEM":"OR(nm)","HZ1":0,"HZ2":0}]

![](https://i-blog.csdnimg.cn/direct/bb1b0633e3a94f6c854440092c4923cc.png)