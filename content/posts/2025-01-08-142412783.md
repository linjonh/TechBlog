---
layout: post
title: 2025-01-08-网络常用命令telnet命令的使用
date: 2025-01-08 14:24:16 +0800
categories: ['未分类']
tags: ['网络', '运维']
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=142412783
  alt: 网络常用命令telnet命令的使用
artid: 142412783
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=142412783
featuredImagePreview: https://bing.ee123.net/img/rand?artid=142412783
---

# 网络常用命令——telnet命令的使用

> 本文主要讲解telnet命令在日常网络分析中的使用

#### [文章目录](#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95)

[前言](#%E5%89%8D%E8%A8%80)

[一、Telnet是什么？](#%E4%B8%80%E3%80%81Telnet%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F)

[二、Telnet的发展历史](#%E4%BA%8C%E3%80%81Telnet%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2)

[1. Telnet 的起源（1969 年）](#1.%20Telnet%20%E7%9A%84%E8%B5%B7%E6%BA%90%EF%BC%881969%20%E5%B9%B4%EF%BC%89)

[2. RFC 854 和标准化（1983 年）](#2.%20RFC%20854%20%E5%92%8C%E6%A0%87%E5%87%86%E5%8C%96%EF%BC%881983%20%E5%B9%B4%EF%BC%89)

[3. Telnet 在 20 世纪 70 年代至 90 年代的广泛使用](#3.%20Telnet%20%E5%9C%A8%2020%20%E4%B8%96%E7%BA%AA%2070%20%E5%B9%B4%E4%BB%A3%E8%87%B3%2090%20%E5%B9%B4%E4%BB%A3%E7%9A%84%E5%B9%BF%E6%B3%9B%E4%BD%BF%E7%94%A8)

[4. 安全性问题的暴露和替代品（SSH）的出现（20 世纪 90 年代）](#4.%20%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98%E7%9A%84%E6%9A%B4%E9%9C%B2%E5%92%8C%E6%9B%BF%E4%BB%A3%E5%93%81%EF%BC%88SSH%EF%BC%89%E7%9A%84%E5%87%BA%E7%8E%B0%EF%BC%8820%20%E4%B8%96%E7%BA%AA%2090%20%E5%B9%B4%E4%BB%A3%EF%BC%89)

[5. Telnet 的使用现状](#5.%20Telnet%20%E7%9A%84%E4%BD%BF%E7%94%A8%E7%8E%B0%E7%8A%B6)

[三、Telnet命令的基本使用方法](#%E4%B8%89%E3%80%81Telnet%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95)

[1.Telnet的基本用法](#1.Telnet%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95)

[2.Telnet常见命令行参数](#2.Telnet%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0)

[3.Telnet交互式命令行](#3.Telnet%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%91%BD%E4%BB%A4%E8%A1%8C)

[四、Telnet的工作原理](#%E5%9B%9B%E3%80%81Telnet%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86)

[1. 建立 TCP 连接](#1.%20%E5%BB%BA%E7%AB%8B%20TCP%20%E8%BF%9E%E6%8E%A5)

[2. 开启会话](#2.%20%E5%BC%80%E5%90%AF%E4%BC%9A%E8%AF%9D)

[3. 数据传输与命令执行](#3.%20%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E4%B8%8E%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C)

[4. Telnet 协议中的控制序列](#4.%20Telnet%20%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E6%8E%A7%E5%88%B6%E5%BA%8F%E5%88%97)

[5. 终止连接](#5.%20%E7%BB%88%E6%AD%A2%E8%BF%9E%E6%8E%A5)

[五、Telnet常见用法场景](#%E4%BA%94%E3%80%81Telnet%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E5%9C%BA%E6%99%AF)

[1. 测试端口连接](#1.%20%E6%B5%8B%E8%AF%95%E7%AB%AF%E5%8F%A3%E8%BF%9E%E6%8E%A5)

[（1）命令使用](#%EF%BC%881%EF%BC%89%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8)

[（2）替代命令](#%EF%BC%882%EF%BC%89%E6%9B%BF%E4%BB%A3%E5%91%BD%E4%BB%A4)

[2. 通过特定端口进行简单数据传输](#2.%20%E9%80%9A%E8%BF%87%E7%89%B9%E5%AE%9A%E7%AB%AF%E5%8F%A3%E8%BF%9B%E8%A1%8C%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93)

[（1）命令使用](#%EF%BC%881%EF%BC%89%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8)

[（2）替代命令](#%EF%BC%882%EF%BC%89%E6%9B%BF%E4%BB%A3%E5%91%BD%E4%BB%A4)

[3. 远程登录](#3.%20%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95)

[（1）Telnet 客户端 和 Telnet 服务器](#%EF%BC%881%EF%BC%89Telnet%20%E5%AE%A2%E6%88%B7%E7%AB%AF%20%E5%92%8C%C2%A0Telnet%20%E6%9C%8D%E5%8A%A1%E5%99%A8)

[· Telnet 客户端：](#%C2%B7%20Telnet%20%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%9A)

[· Telnet 服务器：](#%C2%B7%20Telnet%20%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9A)

[（2）Telnet 服务器的安装](#%EF%BC%882%EF%BC%89Telnet%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%AE%89%E8%A3%85)

[· 安装 Telnet 服务器](#%C2%B7%20%E5%AE%89%E8%A3%85%20Telnet%20%E6%9C%8D%E5%8A%A1%E5%99%A8)

[· 启动Telnet服务](#%C2%B7%20%E5%90%AF%E5%8A%A8Telnet%E6%9C%8D%E5%8A%A1)

[· Telnet远程连接](#%C2%B7%20Telnet%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5)

[（3）Telnet允许root进行远程登录](#%EF%BC%883%EF%BC%89Telnet%E5%85%81%E8%AE%B8root%E8%BF%9B%E8%A1%8C%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95)

[· 增加伪终端](#%C2%B7%20%E5%A2%9E%E5%8A%A0%E4%BC%AA%E7%BB%88%E7%AB%AF)

[· Telnet远程连接root用户](#%C2%B7%20Telnet%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5root%E7%94%A8%E6%88%B7)

[总结](#%E6%80%BB%E7%BB%93)

---

## 前言

在日常的工作和网络调试中，经常需要探测当前主机是否能够连接另外一台主机的相关端口，这时候我们就可以使用telnet命令来进行测试连接是否畅通，这篇文章在此基础上，补充说明了telnet的其他作用来帮助我们解决更多的问题。

---

## 一、Telnet是什么？

首先我们先看下维基百科中对Telnet命令的解释：

Telnet是一种应用层协议，使用于互联网及局域网中，使用虚拟终端的形式，提供双向、以文字字符串为主的命令行接口交互功能。属于TCP/IP协议族的其中之一，是互联网远程登录服务的标准协议和主要方式，常用于服务器的远程控制，可供用户在本地主机执行远程主机上的工作。

Telnet在1969年开发出来，在RFC 15定义，RFC 854定义了扩展。互联网工程任务组（IETF），在STD 8中，将其加以标准化，是最早形成的互联网协议之一。

可以看出Telnet 是一种虽然古老但现在仍然广泛使用的网络协议和工具，主要用于通过命令行与远程设备建立基于TCP协议的连接，以便在网络中测试连接、登录远程设备、调试应用程序或执行其他网络相关任务。telnet 通常使用 TCP 协议的 23 端口作为默认连接端口，但它也可以用于连接任何开放的 TCP 端口。

## 二、Telnet的发展历史

作为历史如此悠久的命令，我觉得很有必要介绍一下这个命令的发展历史，Telnet 命令的发展历史完全可以说是网络技术及其相关安全需求的发展历程。Telnet 的衰退更是反映了网络安全的崛起。

### **1. Telnet 的起源（1969 年）**

Telnet 诞生于 1969 年，作为 ARPANET（互联网的前身）上的一种基础服务。ARPANET 是由美国国防部高级研究计划署（DARPA）支持的一个研究项目，旨在建立一个分布式的计算机网络系统。Telnet 的设计初衷是让用户通过网络远程访问不同系统，仿佛在本地使用终端一样。彼时，计算机之间缺乏统一的通信协议，Telnet 提供了一个简单的标准接口，帮助不同品牌和类型的计算机通过网络进行互通和操作。这在当时极大地推动了分布式计算的实践。

### **2. RFC 854 和标准化（1983 年）**

1983 年，Telnet 被正式定义在 RFC 854 文档中，成为 互联网工程任务组（IETF） 的标准协议。Telnet 运行在 TCP/IP 协议栈的应用层，依赖于 TCP 提供可靠的传输服务。它的标准化确保了跨平台的兼容性，使得 Telnet 可以在不同的操作系统上运行并实现互联。这一标准化标志着 Telnet 成为了早期互联网中的关键协议之一。

### **3. Telnet 在 20 世纪 70 年代至 90 年代的广泛使用**

在 1970 年到 1990 年代，Telnet 成为了远程登录和管理计算机的标准工具。它被广泛应用于大学、政府机构、企业和军事网络中，管理员可以通过 Telnet 登录到远程计算机进行操作和维护，仿佛直接坐在计算机前工作一样。由于 Telnet 是互联网的标准协议，几乎所有操作系统（如 Unix、VMS、MS-DOS、Windows、Linux 等）都支持 Telnet，这使其迅速普及。

当时，网络安全还没有成为主要的关注点，因此 Telnet 的 明文传输方式 并没有受到广泛质疑。用户凭据和会话内容在网络上传输时并未加密，这种设计简单但缺乏安全性。然而，在那个时期，网络主要在受信任的环境中使用，因此这一局限性并未立即引起广泛关注。

### **4. 安全性问题的暴露和替代品（SSH）的出现（20 世纪 90 年代）**

随着互联网的快速发展，网络安全问题开始引起人们的重视。Telnet 的明文传输设计使得其在开放网络中的安全性不足，用户的登录凭据和会话数据极易被中间人攻击（Man-in-the-middle）拦截和窃取。安全隐患迫使人们开始寻找替代方案。

1995 年，SSH（Secure Shell） 协议作为 Telnet 的安全替代品被开发。SSH 提供了加密的通信通道，解决了 Telnet 明文传输的致命缺陷。通过加密算法，SSH 确保了登录信息和会话内容无法被窃听，从而极大地提高了远程管理的安全性。到 20 世纪 90 年代末，SSH 已逐渐取代 Telnet，成为远程主机管理的首选协议。大多数 Linux 发行版 和网络设备厂商开始默认支持 SSH，并推荐用户使用这一更安全的方式进行远程管理。

### **5. Telnet 的使用现状**

进入 21 世纪，Telnet 的使用场景逐渐减少，尤其是在公开网络和生产环境中，几乎完全被 SSH 取代。然而，在一些 局域网 环境、受控的网络内，以及某些不支持 SSH 的老旧设备和嵌入式系统中，Telnet 仍有一定的使用场景。特别是在某些网络设备上，Telnet 由于其轻量级和易用性，在无需高度安全性的环境中仍然是可选工具之一。

尽管如此，在大多数现代网络环境下，Telnet 的明文传输特性使其成为不安全的选择。因此，在需要加密和认证的场景中，SSH 已经成为事实上的标准。

Telnet 的发展历程反映了网络技术的演变，尤其是从最初的简单通信到对安全需求的日益重视。Telnet 的早期成功展示了互联网从学术研究工具发展为全球化网络的进程，而其后期的衰退也体现了网络安全需求的崛起。尽管 Telnet 在许多场景中已被 SSH 取代，它仍然在某些特定环境中被使用，作为早期互联网技术发展的见证。

## 三、Telnet命令的基本使用方法

### **1.Telnet的基本用法**

Telnet 命令用于连接远程服务器的指定 IP 地址和端口号，最简单的语法如下：

> telnet        [远程主机IP]        [端口号]

使用 telnet 连接到某个服务器的 HTTP 端口（80端口）：

![](https://i-blog.csdnimg.cn/direct/faf8655e51794eaab6180397c60c288a.png)

成功连接到 80 端口，说明服务器的 HTTP 服务是开放的

### **2.Telnet常见命令行参数**

在启动 Telnet 命令时，你可以使用一些命令行参数来控制其行为,由于 Telnet 不安全且功能有限，在现代网络中，它经常被 SSH、nc、curl、nmap 等工具替代，这些工具提供了更安全和强大的功能，所以这些Telnet命令的控制参数只做简单介绍，大家稍微了解即可：

•
**-E**
：不响应 escape 字符（即 Ctrl + ]）。该选项用于不希望中断 Telnet 会话或进入命令行模式的情况。

> telnet        -E        [远程主机IP]        [端口号]

•
**-L**
：使用 TELNET 协议的 LINEMODE 选项，允许逐行编辑输入内容，而不是逐字符发送到远程主机。它适用于需要回显和逐行编辑的场合。

> telnet        -L        [远程主机IP]        [端口号]

•
**-a**
：在连接时自动尝试将当前用户名作为登录名发送到远程主机。这在需要进行认证的远程系统上可能有用。

> telnet        -a        <远程主机IP>        <端口号>

•
**-l [用户名]**
：指定远程登录时使用的用户名（和 -a 类似）。这个选项通常在使用基于 Kerberos 或其他身份验证协议的 Telnet 服务器上有效。

> telnet        -l        [用户名]        <远程主机IP>        <端口号>

•
**-d**
：启动调试模式，显示额外的调试信息，用于诊断和调试 Telnet 连接问题。

> telnet        -d       <远程主机IP>        <端口号>

•
**-n [文件名]**
：将所有 Telnet 连接的输入/输出数据记录到指定的文件中。这个选项对于调试或记录会话非常有用。

> telnet        -n        [文件名]        <远程主机IP>        <端口号>

### 3.Telnet交互式命令行

在终端的命令行中直接输入telnet命令就可以进入到Telnet 交互式命令行界面中：

![](https://i-blog.csdnimg.cn/direct/23cd5fc1b51a414ca2ecc06681f21235.png)

在这个页面中Telnet命令也提供了一些命令来修改行为或调试网络连接：

**• open命令**
：在 Telnet 交互式命令行界面中，open 用来连接指定的远程主机和端口。

> telnet > open       [远程主机IP]        [端口号]

![](https://i-blog.csdnimg.cn/direct/0d15d4b1d8404b30840fa8b3d6d7eff1.png)

**• Ctrl + ]（Escape 字符）**
：在使用 Telnet 连接远程主机时，按下 Ctrl + ] 可以退出 Telnet 的会话模式并进入本地 Telnet 命令提示符。

![](https://i-blog.csdnimg.cn/direct/a2825bf12cc2409c9390b660aeff4a99.png)

重新回到了Telnet 交互式命令行界面

**PS**
：Escape 字符可以自定义设置，具体可使用 set escape 命令来设置新的 Escape 字符。例如：

```bash
telnet> set escape ^[
```

![](https://i-blog.csdnimg.cn/direct/c05dc39957154561897281afd0b4de1b.png)

**• status命令 ：**
显示当前连接的状态，帮助用户了解当前的会话状态信息。

![](https://i-blog.csdnimg.cn/direct/7f815bc6c41448658c4b1a1e8aa5e72d.png)

**• close命令 ：**
close 命令关闭当前的 Telnet 会话,当你用前面的open命令连接到指定的远程主机后，可以使用此命令关闭当前的telnet连接，然后可以重新建立连接。

![](https://i-blog.csdnimg.cn/direct/85b23922b39140bb88f164917e8d4650.png)

**• quit命令 ：**
退出 Telnet 客户端。

![](https://i-blog.csdnimg.cn/direct/96100224812a4cb0bb4456a61f54f9a7.png)

## 四、Telnet **的工作原理**

Telnet 的核心工作原理涉及几个步骤，包括建立连接、传输数据、处理命令以及断开连接。整个过程是建立在 TCP 的连接之上的，因此它具备 TCP 协议提供的可靠性和有序性。

### **1. 建立 TCP 连接**

• 当用户通过 telnet 命令发起连接请求时，Telnet 使用目标主机的 IP 地址和端口号来建立一个 TCP 连接。

• telnet 连接使用 三次握手 来建立 TCP 连接：客户端向服务器发送 SYN 包，服务器回应 SYN-ACK，客户端再发送 ACK 确认连接建立。这与任何基于 TCP 的连接过程相同。

![](https://i-blog.csdnimg.cn/direct/ee6a82c653404c328612b90025621ee0.png)
此时输入命令按下回车，Telnet则会尝试与远程主机建立TCP连接

### **2. 开启会话**

• 一旦 TCP 连接建立后，Telnet 会话开始，用户可以通过命令行与远程主机进行交互。此时，客户端和服务器之间建立了一个双向的、实时的数据传输通道。

• 在默认情况下，所有的传输都是 明文 的。这意味着无论用户输入什么命令或信息，都会以明文的方式传输到目标服务器。这也是 Telnet 的一个安全缺陷之一。

![](https://i-blog.csdnimg.cn/direct/83de825b61de4d0bb8a8b486a1b64e4f.png)

此时已经连接成功会话开始

### **3. 数据传输与命令执行**

• 在 Telnet 会话期间，所有输入的命令都会以 字符流 的方式发送到目标服务器。远程主机收到这些命令后，会通过命令解释器（如 bash 或 cmd）进行处理，并将输出结果返回给客户端。

• 数据的传输方式是 行模式 或 字符模式：

• 行模式：只有在用户按下回车键时，整个行才会被发送到服务器。这种模式适合需要输入多个字符的命令行操作。

• 字符模式：用户每输入一个字符，都会立即发送到远程主机。字符模式适用于实时性要求高的应用，例如某些控制系统。

![](https://i-blog.csdnimg.cn/direct/aa91811fc7004c09b3ac98d92c64e7ce.png)

此时在命令行中输入数据会发送到目标服务器

### **4. Telnet 协议中的控制序列**

• Telnet 协议支持特殊的
**控制序列**
或称
**控制命令**
，用于处理某些特定的会话控制功能，例如中断命令、终止会话、调整显示格式等。控制命令通过特定的字符序列来触发，主要有以下几种：

•
**IP（Interrupt Process）**
：用于中断正在执行的进程。

•
**AO（Abort Output）**
：终止输出，但允许继续执行程序。

•
**AYT（Are You There）**
：测试远程主机是否响应。

•
**EC（Erase Character）**
：删除已经输入的一个字符。

•
**EL（Erase Line）**
：删除当前行的输入。

### **5. 终止连接**

• 当用户在远程会话中输入 exit 或 quit 命令，或者关闭客户端窗口时，Telnet 会话终止。

• Telnet 使用 TCP 四次挥手 过程来断开连接。客户端或服务器的一方首先发送 FIN 包，另一方回复 ACK，然后对方发送 FIN 包，最终回复 ACK 完成连接终止。

![](https://i-blog.csdnimg.cn/direct/07d6dd35de554b2a8a4e0be96cc4ec89.png)

### 

## 五、Telnet **常见用法场景**

由于Telnet命令的历史悠久性，现代的网络探测中已经有了很多的替代命令，这里在介绍Telnet命令在各场景的使用中，也会粗略的介绍下各场景的替代命令。

### 1. **测试端口连接**

#### （1）命令使用

通过 telnet 可以快速测试某个远程服务器的某个端口是否开放。它是最常用的端口测试工具之一。排查网络故障中我们就经常可以使用 telnet 来调试网络连接问题，查看特定端口是否能成功连接，以及应用程序是否在监听指定端口。例如测试数据库端口是否开放：

```bash
[root@ceshi ~]# telnet 192.168.50.165 3306
```

![](https://i-blog.csdnimg.cn/direct/9049364899c344b9bd562fbbedaf8104.png)

这里我们可以看到数据库服务是可以正常连接到的

![](https://i-blog.csdnimg.cn/direct/28156de11dfd4c03a114682402e15082.png)

此时不能正常连接，就要排查是否是数据库没有启动导致端口无法监听到服务，还是服务器直接的防火墙端口没有开放的网络问题了。

#### （2）替代命令

Telnet 虽然可以快速测试端口是否开放，并且无需安装额外的软件，但是只适用于简单的 TCP 连接测试，无法处理复杂的协议，更无法处理加密的连接，就拿我们日常工作中需要测试ntp服务的端口连通性（因为ntp服务是udp连接），Telnet命令就无法胜任了。

而这时我们就可以使用nc
**（netcat）**
命令来进行端口测试，这是个用于测试开放端口的轻量级工具，支持更多协议选项，并且很多服务器上也默认安装了这个命令。

### 2. **通过特定端口进行简单数据传输**

#### （1）命令使用

Telnet 可用于手动模拟和测试各种网络服务（如 HTTP、SMTP、POP3、FTP 等），用于发送简单的请求并观察服务器的响应，Telnet 不仅限于 Telnet 协议，它可以作为一个通用的 TCP 工具。这里我们可以通过Telnet命令建立简单的TCP连接传输数据。发送 HTTP 请求到目标服务器的端口并直接查看服务器的响应。

这里我们输入命令请求连接目标服务器的80端口：

```bash
[root@ceshi ~]# telnet 192.168.50.165 80
```

输入命令后，如果连接成功，我们会看到光标闪烁，这是等待我们输入HTTP的请求，

![](https://i-blog.csdnimg.cn/direct/19fa722ef6ac4d90aeae49ef53eb8c36.png)

然后我们手动输入HTTP的请求：

```bash
GET / HTTP/1.1
Host: 127.0.0.1

# GET：请求方法，用于获取资源。
# /：请求的路径，这里是根路径，通常是主页。
# HTTP/1.1：HTTP 协议版本号。
# Host: 127.0.0.1：主机名，在 HTTP/1.1 中是必需的，因为一个 IP 地址可能会对应多个虚拟主机。
```

然后点击两次回车代表结束HTTP请求的输入

![](https://i-blog.csdnimg.cn/direct/9387e77b75f14a64a44d4c3067dff54a.png)

这里我们看到了服务器的HTTP响应，通常会返回网页内容或 HTTP 200 OK。

#### （2）替代命令

Telnet 是一个简单的命令行工具，可以通过手动输入协议命令来直接与服务器交互。对于快速测试 HTTP 请求的响应非常有效。手动输入协议命令不便，尤其在复杂的服务中，或者是对于 HTTPS（SSL 加密）端口，Telnet 无法处理加密的通信，而curl和wget两个命令在这方面则是非常强大的工具。

curl 是一个强大的工具，适用于测试 HTTP 和 HTTPS 服务。并可以通过参数的控制实现接口的调用和多种功能。wget则是另一个常用工具，用于从服务器下载文件和网页。这两个命令在Linux日常的使用中也同样非常常见。

### 3. **远程登录**

Telnet 的设计目的是让用户通过网络远程访问不同系统，就像使用本地终端一样。而在这里我也会详细介绍一下这种方法的使用，虽然现在已经不再使用这种方法了（当然有些时候还能用到，比如说你升级openssh失败导致ssh服务无法正常使用，此时如果服务器可以使用Telnet命令连接也可以对服务器进行补救），但是对于Telnet命令的科普说明文章，我觉的一定是要着重介绍下的。

#### **（1）Telnet 客户端 和 Telnet 服务器**

如果我们直接使用Telnet 命令连接两台服务器，你会发现其实是没有办法直接连接服务器的，这里会报错
![](https://i-blog.csdnimg.cn/direct/aea0642047af4893b9b8f7fe7a4f2004.png)

经过我们前面的介绍我们知道Telnet命令连接目标服务器的端口的前提是目标端口需要运行服务，而此时此刻我们可以使用命令

```bash
[root@localhost ~]# ss -tuln | grep 23
```

看下目标主机的23端口

![](https://i-blog.csdnimg.cn/direct/0d7ea6a5bdce4a4fab2f74719e6cc320.png)

并没有运行在23端口的服务，Telnet命令连接当然会失败，那我们的两台主机不都已经默认安装了Telnet命令了吗，也能正常使用Telnet命令互相检测对方的端口服务，此时我们一定要搞清楚在使用Telnet服务进行远程登录时，有个概念一定要清楚就是Telnet 命令有两个独立的功能：客户端功能 和 服务器功能。

##### **· Telnet 客户端** ：

客户端是用于向其他主机发起 TCP 连接请求的工具。也就是我们现在正在使用的Telnet命令，我们可以使用 Telnet 客户端来测试某个远程主机是否在指定的端口上提供服务。并且Telnet 客户端 不需要本地主机运行 Telnet 服务，也不依赖 Telnet 协议进行通信，它只需要发起 TCP 连接请求，并能够与指定端口的应用程序通信。也就是为什么我们直接在命令行中输入Telnet命令及其参数就可以检测目标服务器的端口是否正常。

##### **· Telnet 服务器** ：

Telnet 服务器则是一种具体的服务，它在本地主机上监听特定端口（通常是 23 端口），并允许远程用户通过 Telnet 客户端连接并进行远程登录。此时此刻，如果我们想通过 Telnet 连接到你的机器，你需要安装并启用 Telnet 服务器。

#### （2） **Telnet 服务器的安装**

##### **· 安装 Telnet 服务器**

在大多数 Linux 发行版中，Telnet 服务并没有默认安装（默认安装的是Telnet客户端）。你可以通过以下命令来安装 Telnet 服务器。

Debian/Ubuntu 系列：

```bash
apt update
apt install telnetd
```

CentOS/RHEL 系列：

```bash
yum install telnet telnet-server
```

> PS：通过查阅网上的其他资料和文章，对于Telnet服务端的下载都会下载一个xinetd 服务，这里解释下为什么我没有加：
>
> 先介绍下xineted，xinetd作为一个超级守护进程，用于管理和启动许多网络服务，它的主要功能是监听网络端口，当有客户端连接时，它会根据配置启动相应的服务程序（如 Telnet、FTP 等），并将请求传递给这些程序处理。传统上，Telnet 服务可以通过 xinetd 来管理。这意味着 xinetd 负责监听 23 端口的连接请求，当有 Telnet 请求到来时，xinetd 会启动 Telnet 守护进程来处理这些请求。这种模式的好处是比较节省资源
> **，**
> Telnet 服务不需要一直运行，占用系统资源，只有当有连接时，xinetd 才启动它，并且也一定程度提高了安全性，xinetd 提供了额外的安全层，可以限制访问、控制并发连接数。
>
> 首先呢，xinetd已经是很多Linux发行版的默认安装服务了，我们并不需要重复安装一次，其次就是我们现在在自己的环境模拟Telnet的远程连接，并不需要持续的使用这种方式来频繁连接服务器，在日常工作中我们有更好的选择（SSH连接），而且Telnet服务器作为一个服务，我们只需要在现在的测试环境中在使用时systemctl命令启动下Telnet服务就好，其他时间为了你的服务器安全，还是把它关闭吧，甚至在非必要情况下不要让服务器上存在Telnet服务器！

![](https://i-blog.csdnimg.cn/direct/8046d36ed8e94db595f6c450a18bb5fb.png)

这里可以看到Telnet服务器已经安装成功

##### · 启动Telnet服务

接下来我们启动下Telnet服务：

```bash
[root@localhost ~]# systemctl start telnet.socket 

```

![](https://i-blog.csdnimg.cn/direct/c05607b9bafe4cf68b07d80a881af6ff.png)

接下来检查下服务是否正常启动：

```bash
[root@localhost ~]# systemctl status telnet.socket 
```

## 

再检查下目标服务器的23的端口是否有服务监听：

```bash
[root@localhost ~]# ss -tuln | grep 23
```

## 

可以看到23端口已经有服务再监听了

##### · Telnet远程连接

此时我们再到之前的Telnet客户端的服务器上使用Telnet命令远程连接目标主机：

```bash
[root@ceshi ~]# telnet 192.168.50.165 23
```

![](https://i-blog.csdnimg.cn/direct/1049bf3f816444559f65bd7580d5e726.png)

此时可以看到已经不再是拒绝连接了而是弹出了正常的命令行提示我们输入需要远程的用户

此时如果我们输入root用户，并根据接下来的提示正确输入密码后

![](https://i-blog.csdnimg.cn/direct/8bd8a1a443fd47ffa8bd73eb23587f86.png)

会发现页面提示我们登录失败，那我们尝试输入普通用户jack

![](https://i-blog.csdnimg.cn/direct/76c25f604a8543c5a962850eceb07774.png)

会发现远程登录成功了，这是因为默认情况下，出于安全性考虑，许多操作系统 不允许通过 Telnet 登录 root 用户。Telnet 本身是一个不加密的协议，所有通信（包括用户名和密码）都是通过明文传输的，因此容易受到中间人攻击等安全威胁。为了防止系统遭受恶意攻击，大多数现代 Linux 系统默认禁止 root 用户通过 Telnet 登录。

#### （3）Telnet允许root进行远程登录

##### · 增加伪终端

首先我们需要知道/etc/securetty 的文件，这个文件中的内容是Linux 系统中的安全控制机制，它限制了哪些终端设备可以允许 root 用户登录。普通用户的登录并不受这个机制的限制，因此即使不配置这些内容，普通用户也能通过 Telnet 登录。我们可以打开这个文件看下文件内的内容：

```bash
[root@localhost ~]# vim /etc/securetty 
```

![](https://i-blog.csdnimg.cn/direct/71a3a3d948374319b616caea7641871b.png)

• console 指的是本地控制台。它通常是物理机的本地终端（屏幕和键盘）。允许 root 用户直接从物理机的控制台登录。

• vc/1 到 vc/11 分别表示第 1 到第 11 个虚拟控制台。在 Linux 系统中，用户可以通过 Ctrl + Alt + F1 到 F6 等组合键切换到不同的虚拟控制台。这些控制台为用户提供了多个终端界面。允许 root 用户通过这些虚拟控制台登录。

• ttyX 系列：tty0 到 tty11 是系统中的本地文本终端，它与虚拟控制台类似，表示的是本地的终端设备。tty1、tty2 等是这些本地终端的编号，允许 root 用户通过这些设备登录。

• ttysclp0、scLp\_Line0：这些特殊类型的终端设备，通常用于某些架构（如 IBM 大型机）或通过串行设备连接的终端。在这种设备上，终端登录通过特殊的接口实现。设备通常用于通过串行连接进行远程或低级别的系统管理。

• 3270/tty1：3270是 IBM 大型机的终端仿真协议，3270/tty1 表示一个 3270 仿真终端。这个条目允许 root 用户通过特定的大型机终端仿真接口登录。

• hvcX：hvc 是 Hypervisor Console，表示通过虚拟机管理程序（Hypervisor）提供的控制台接口，通常用于虚拟机的控制台访问。hvc0 到 hvc7 是不同的虚拟机控制台设备，当虚拟机运行时，管理员可以通过 hvcX 设备进行直接访问和管理。

• hvsiX：hvsi 是用于 Hypervisor Serial Interface 的设备，它通过虚拟机管理程序提供的串行接口进行交互，通常用于串行连接。hvsi0、hvsi1 等表示不同的串行接口设备，用于虚拟机环境中的管理访问。

• xvc0：xvc0 是一种 Xen Hypervisor 虚拟控制台，它用于 Xen 虚拟机的管理。Xen 是一种常用的虚拟化技术，xvc0 允许管理员直接通过 Xen 控制台访问虚拟机。当 Xen Hypervisor 管理的虚拟机运行时，xvc0 提供了一个控制台接口，允许管理员通过该接口登录。

而此时我们需要在这个文件的最底部新增pts/X设备，这里的pts/X 设备表示伪终端（pseudo terminal slave），通常用于 Telnet 或 SSH 登录远程会话。这里我们添加一些伪终端来为Telnet远程的root用户提供可以登录的远程会话。

```bash
pts/0
pts/1
pts/2
pts/3
pts/4

```

![](https://i-blog.csdnimg.cn/direct/8909f916d51f45bba862406fbc694743.png)

可以按照数字递增的方式多加些，这里我们多加些伪终端的原因是你可能有其他终端再使用一些伪终端连接到当前服务器，如果你写的数字比较少，可能由于你写的伪终端正好被其他连接占用了，导致后续你实验Telnet服务远程root用户依然不成功。

我们可以使用命令查看下当前正在占用的伪终端：

```bash
[root@localhost ~]# w
```

![](https://i-blog.csdnimg.cn/direct/8893866e523341a0bbda753a6249481a.png)

看到其实pts/0和pts/1已经在被占用了，要是你只在文件中填写了这两个伪终端，那么你后续的Telnet远程root用户也是不会成功的。

> PS：为什么不在/etc/securetty 文件中加这些伪终端，SSH命令也可以正常root登录？
>
> /etc/securetty 文件主要用于限制 root 用户在本地终端和远程非加密终端（如 Telnet）的登录。该文件中的配置通常对 SSH 登录不适用。因为SSH是加密的，SSH 服务通过其自己的配置文件（通常是 /etc/ssh/sshd\_config）来控制 root 用户是否允许登录，而不依赖于 /etc/securetty 文件中的配置。对于 Telnet，系统更倾向于使用 /etc/securetty 来严格限制 root 用户从哪些终端登录，因为 Telnet 缺乏加密功能，风险较大。

在/etc/securetty 文件中添加这些伪终端后，保存文件并退出。

##### · Telnet远程连接root用户

在Telnet客户端的服务器上输入：

```bash
[root@ceshi ~]# telnet 192.168.50.165 23
```

![](https://i-blog.csdnimg.cn/direct/c5221594dc0f4a5b86b4cda4ab817ca9.png)

可以看到正常登录到目标主机了，且当前用户是root。

## 总结

> Telnet 作为一种历史悠久的远程登录协议，由于它明文传输安全性差的原因，逐渐被更安全的SSH协议所代替，但是又由于它的简单易用并且几乎所有的操作系统、网络设备和嵌入式系统都支持Telnet的使用，使它依然是现在最常用的网络检测命令之一。并且我们更不能忽视的是它在网络历史中发挥了重要作用，它帮助计算机网络系统从孤立的本地化计算走向了全球化、互联化的时代。所以不管是从一定的实用性还是历史情怀上，我们都应该了解Telnet命令。

本文内容仅作为参考和学习交流使用，如有错误请麻烦指正。

68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34383536363335322f:61727469636c652f64657461696c732f313432343132373833