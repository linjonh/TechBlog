---
layout: post
title: "Java直通车系列14Spring-MVC深入学习-Controller-编写"
date: 2025-03-07 09:00:00 +0800
description: "Java直通车系列正在连载更新中，更新的内容包括JSP、Spring MVC、Spring Boot、Spring Cloud完整学习资料以及详细解释代码示例，关注我，持续学习。"
keywords: "Java直通车系列14【Spring MVC】（深入学习 Controller 编写）"
categories: ['Java']
tags: ['后端', 'Spring', 'Java']
artid: "146076974"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146076974
    alt: "Java直通车系列14Spring-MVC深入学习-Controller-编写"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146076974
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146076974
cover: https://bing.ee123.net/img/rand?artid=146076974
image: https://bing.ee123.net/img/rand?artid=146076974
img: https://bing.ee123.net/img/rand?artid=146076974
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java直通车系列14【Spring MVC】（深入学习 Controller 编写）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <h4 id="%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" name="%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">
     基本概念
    </h4>
    <p>
     Controller 是 Spring MVC 架构中的核心组件之一，它负责接收客户端的请求，调用相应的业务逻辑进行处理，并将处理结果返回给客户端。通常，Controller 会根据请求的 URL 和 HTTP 方法，将请求分发到具体的处理方法上。
    </p>
    <h4 id="%E7%BC%96%E5%86%99%20Controller%20%E7%9A%84%E6%AD%A5%E9%AA%A4%E5%92%8C%E8%A6%81%E7%82%B9" name="%E7%BC%96%E5%86%99%20Controller%20%E7%9A%84%E6%AD%A5%E9%AA%A4%E5%92%8C%E8%A6%81%E7%82%B9">
     编写 Controller 的步骤和要点
    </h4>
    <h5 id="1.%20%E5%AE%9A%E4%B9%89%20Controller%20%E7%B1%BB" name="1.%20%E5%AE%9A%E4%B9%89%20Controller%20%E7%B1%BB">
     1. 定义 Controller 类
    </h5>
    <p>
     使用
     <code>
      @Controller
     </code>
     注解标记一个类，表明该类是一个 Spring MVC 的控制器。也可以使用
     <code>
      @RestController
     </code>
     注解，它是
     <code>
      @Controller
     </code>
     和
     <code>
      @ResponseBody
     </code>
     的组合，适用于返回 JSON 或 XML 等数据的场景。
    </p>
    <h5 id="2.%20%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82" name="2.%20%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82">
     2. 映射请求
    </h5>
    <p>
     使用
     <code>
      @RequestMapping
     </code>
     、
     <code>
      @GetMapping
     </code>
     、
     <code>
      @PostMapping
     </code>
     等注解将 HTTP 请求映射到 Controller 中的具体方法上。这些注解可以指定请求的 URL、HTTP 方法、请求参数等。
    </p>
    <h5 id="3.%20%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0" name="3.%20%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0">
     3. 处理请求参数
    </h5>
    <p>
     使用
     <code>
      @RequestParam
     </code>
     、
     <code>
      @PathVariable
     </code>
     、
     <code>
      @RequestBody
     </code>
     等注解来获取请求中的参数，并将其绑定到方法的参数上。
    </p>
    <h5 id="4.%20%E8%B0%83%E7%94%A8%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91" name="4.%20%E8%B0%83%E7%94%A8%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91">
     4. 调用业务逻辑
    </h5>
    <p>
     在处理方法中调用业务逻辑层（如 Service 层）的方法，完成具体的业务处理。
    </p>
    <h5 id="5.%20%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94" name="5.%20%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94">
     5. 返回响应
    </h5>
    <p>
     可以返回视图名、
     <code>
      ModelAndView
     </code>
     对象、
     <code>
      ResponseEntity
     </code>
     对象或直接返回数据（使用
     <code>
      @ResponseBody
     </code>
     注解）。
    </p>
    <h4 id="%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B" name="%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B">
     场景示例
    </h4>
    <h5 id="1.%20%E7%AE%80%E5%8D%95%E7%9A%84%20Hello%20World%20%E7%A4%BA%E4%BE%8B" name="1.%20%E7%AE%80%E5%8D%95%E7%9A%84%20Hello%20World%20%E7%A4%BA%E4%BE%8B">
     1. 简单的 Hello World 示例
    </h5>
    <pre><code class="language-java">import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class HelloController {

    @GetMapping("/hello")
    @ResponseBody
    public String sayHello() {
        return "Hello, World!";
    }
}
</code></pre>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       @Controller
      </code>
      注解标记
      <code>
       HelloController
      </code>
      类为控制器。
     </li>
     <li>
      <code>
       @GetMapping("/hello")
      </code>
      注解将
      <code>
       /hello
      </code>
      的 GET 请求映射到
      <code>
       sayHello
      </code>
      方法上。
     </li>
     <li>
      <code>
       @ResponseBody
      </code>
      注解表示方法的返回值将直接作为 HTTP 响应的主体内容返回给客户端。
     </li>
    </ul>
    <h5 id="2.%20%E5%A4%84%E7%90%86%E8%B7%AF%E5%BE%84%E5%8F%98%E9%87%8F%E5%92%8C%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0" name="2.%20%E5%A4%84%E7%90%86%E8%B7%AF%E5%BE%84%E5%8F%98%E9%87%8F%E5%92%8C%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0">
     2. 处理路径变量和请求参数
    </h5>
    <pre><code class="language-java">import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class UserController {

    @GetMapping("/users/{id}")
    @ResponseBody
    public String getUserById(@PathVariable("id") int userId) {
        return "User ID: " + userId;
    }

    @GetMapping("/search")
    @ResponseBody
    public String searchUsers(@RequestParam("keyword") String keyword) {
        return "Searching for users with keyword: " + keyword;
    }
}
</code></pre>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       @GetMapping("/users/{id}")
      </code>
      定义了一个带有路径变量的请求映射，
      <code>
       {id}
      </code>
      表示路径中的变量部分。
     </li>
     <li>
      <code>
       @PathVariable("id")
      </code>
      注解将路径变量
      <code>
       id
      </code>
      的值绑定到
      <code>
       userId
      </code>
      参数上。
     </li>
     <li>
      <code>
       @GetMapping("/search")
      </code>
      定义了一个普通的请求映射。
     </li>
     <li>
      <code>
       @RequestParam("keyword")
      </code>
      注解将请求参数
      <code>
       keyword
      </code>
      的值绑定到
      <code>
       keyword
      </code>
      参数上。
     </li>
    </ul>
    <h5 id="3.%20%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4" name="3.%20%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4">
     3. 处理表单提交
    </h5>
    <pre><code class="language-java">import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
public class FormController {

    @GetMapping("/form")
    public String showForm() {
        return "form"; // 返回视图名
    }

    @PostMapping("/form")
    public String processForm(@RequestParam("name") String name, @RequestParam("age") int age, Model model) {
        model.addAttribute("name", name);
        model.addAttribute("age", age);
        return "result"; // 返回视图名
    }
}
</code></pre>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       @GetMapping("/form")
      </code>
      处理 GET 请求，返回
      <code>
       form
      </code>
      视图，通常是一个表单页面。
     </li>
     <li>
      <code>
       @PostMapping("/form")
      </code>
      处理表单提交的 POST 请求，使用
      <code>
       @RequestParam
      </code>
      获取表单数据，并将数据添加到
      <code>
       Model
      </code>
      中，最后返回
      <code>
       result
      </code>
      视图，显示处理结果。
     </li>
    </ul>
    <h5 id="4.%20%E5%A4%84%E7%90%86%20JSON%20%E6%95%B0%E6%8D%AE" name="4.%20%E5%A4%84%E7%90%86%20JSON%20%E6%95%B0%E6%8D%AE">
     4. 处理 JSON 数据
    </h5>
    <pre><code class="language-java">import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class JsonController {

    @PostMapping("/json")
    @ResponseBody
    public ResponseEntity&lt;User&gt; processJson(@RequestBody User user) {
        // 处理用户数据
        return new ResponseEntity&lt;&gt;(user, HttpStatus.OK);
    }
}

class User {
    private String name;
    private int age;

    // Getters and Setters
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
</code></pre>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       @PostMapping("/json")
      </code>
      处理 POST 请求。
     </li>
     <li>
      <code>
       @RequestBody
      </code>
      注解将请求体中的 JSON 数据转换为
      <code>
       User
      </code>
      对象。
     </li>
     <li>
      <code>
       ResponseEntity
      </code>
      用于封装响应数据和 HTTP 状态码，将处理后的
      <code>
       User
      </code>
      对象以 JSON 格式返回给客户端。
     </li>
    </ul>
    <h5 id="5.%20%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86" name="5.%20%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">
     5. 异常处理
    </h5>
    <pre><code class="language-java">import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class ExceptionController {

    @GetMapping("/error")
    @ResponseBody
    public String throwException() {
        throw new RuntimeException("Something went wrong!");
    }

    @ExceptionHandler(RuntimeException.class)
    @ResponseBody
    public ResponseEntity&lt;String&gt; handleException(RuntimeException ex) {
        return new ResponseEntity&lt;&gt;(ex.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);
    }
}
</code></pre>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       @GetMapping("/error")
      </code>
      方法故意抛出一个
      <code>
       RuntimeException
      </code>
      。
     </li>
     <li>
      <code>
       @ExceptionHandler(RuntimeException.class)
      </code>
      注解定义了一个异常处理方法，当 Controller 中抛出
      <code>
       RuntimeException
      </code>
      时，会调用该方法进行处理，返回错误信息和 HTTP 状态码 500。
     </li>
    </ul>
    <p>
     通过以上示例，可以看到 Controller 在不同场景下的编写方式和应用，根据具体的需求选择合适的注解和处理方式，能够高效地处理客户端请求。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f5445555445552f:61727469636c652f64657461696c732f313436303736393734" class_="artid" style="display:none">
 </p>
</div>


