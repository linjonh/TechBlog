---
layout: post
title: "QT-鼠标事件"
date: 2025-03-08 15:49:00 +0800
description: "在 Qt 中，鼠标事件处理是 GUI 开发的重要组成部分。本文将介绍 Qt 中常见的鼠标事件及其应用，并结合示例代码进行讲解提示：以下是本篇文章正文内容，下面案例可供参考Qt 提供了一系列鼠标事件的处理函数，用于检测和响应用户的鼠标操作。这些事件主要包括：鼠标按下事件。鼠标释放事件。鼠标移动事件。鼠标双击事件。鼠标滚轮事件。Qt 提供了强大的鼠标事件处理机制，使得开发者能够轻松实现丰富的用户交互体验。"
keywords: "QT---鼠标事件"
categories: ['未分类']
tags: ['开发语言', 'Qt']
artid: "146117324"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146117324
    alt: "QT-鼠标事件"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146117324
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146117324
cover: https://bing.ee123.net/img/rand?artid=146117324
image: https://bing.ee123.net/img/rand?artid=146117324
img: https://bing.ee123.net/img/rand?artid=146117324
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     QT---鼠标事件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档
     </p>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="_7">
     </a>
     前言
    </h2>
    <p>
     在 Qt 中，鼠标事件处理是 GUI 开发的重要组成部分。本文将介绍 Qt 中常见的鼠标事件及其应用，并结合示例代码进行讲解
    </p>
    <hr/>
    <p>
     <code>
      提示：以下是本篇文章正文内容，下面案例可供参考
     </code>
    </p>
    <h2>
     <a id="_15">
     </a>
     一、鼠标事件概述
    </h2>
    <p>
     Qt 提供了一系列鼠标事件的处理函数，用于检测和响应用户的鼠标操作。这些事件主要包括：
    </p>
    <p>
     mousePressEvent(QMouseEvent *event)：
     <strong>
      鼠标按下事件
     </strong>
     。
    </p>
    <p>
     mouseReleaseEvent(QMouseEvent *event)：
     <strong>
      鼠标释放事件
     </strong>
     。
    </p>
    <p>
     mouseMoveEvent(QMouseEvent *event)：
     <strong>
      鼠标移动事件
     </strong>
     。
    </p>
    <p>
     mouseDoubleClickEvent(QMouseEvent *event)：
     <strong>
      鼠标双击事件
     </strong>
     。
    </p>
    <p>
     wheelEvent(QWheelEvent *event)：
     <strong>
      鼠标滚轮事件
     </strong>
     。
    </p>
    <h2>
     <a id="_28">
     </a>
     二、鼠标按下与释放事件
    </h2>
    <p>
     mousePressEvent 处理
     <strong>
      鼠标按下
     </strong>
     事件，mouseReleaseEvent 处理鼠标释放事件。例如，我们可以在鼠标
     <strong>
      按下
     </strong>
     时
     <strong>
      更改鼠标指针的样式
     </strong>
     ，在
     <strong>
      释放时
     </strong>
     <strong>
      恢复默认样式
     </strong>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">mousePressEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token double-colon punctuation">::</span>LeftButton<span class="token punctuation">)</span><span class="token comment">//判断是否为左键点击</span>
    <span class="token punctuation">{<!-- --></span>
        QCursor cursor<span class="token punctuation">;</span><span class="token comment">//生成一个鼠标对象</span>
        cursor<span class="token punctuation">.</span><span class="token function">setShape</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>ClosedHandCursor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置鼠标样式</span>
        <span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">setOverrideCursor</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将当前鼠标样式覆盖住之前样式 </span>
        <span class="token comment">//这种方式可以在后续进行回退</span>
        offset<span class="token operator">=</span>event<span class="token operator">-&gt;</span><span class="token function">globalPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用鼠标点击的位置减去图形框的左上角的位置</span>
        <span class="token comment">// 记录x y的偏移量 offset内部有一个x和y</span>
        这里放入一个offset是为了后续实现窗体拖动！！！！
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">mouseReleaseEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">restoreOverrideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//回退样式 返回上一次的鼠标样式状态</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="__52">
     </a>
     三、 鼠标移动事件（实现窗口拖拽）
    </h2>
    <p>
     mouseMoveEvent 处理
     <strong>
      鼠标移动
     </strong>
     ，我们可以用它来实现
     <strong>
      窗口的拖拽功能
     </strong>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">//注意这里是buttons()  前面是button  buttons可以判断是否一直按住不松开</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">buttons</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> Qt<span class="token double-colon punctuation">::</span>LeftButton<span class="token punctuation">)</span> <span class="token comment">// 检测是否一直按住左键</span>
    <span class="token punctuation">{<!-- --></span>
        QPoint windowPos <span class="token operator">=</span> event<span class="token operator">-&gt;</span><span class="token function">globalPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> offset<span class="token punctuation">;</span>用鼠标当前位置减去偏移量
        就等于窗口的位置
        <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">move</span><span class="token punctuation">(</span>windowPos<span class="token punctuation">)</span><span class="token punctuation">;</span>然后移动窗口就行  注意鼠标左键一直不能松开噢
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="__67">
     </a>
     四、 鼠标双击事件（切换全屏模式）
    </h2>
    <p>
     mouseDoubleClickEvent 用于检测
     <strong>
      鼠标双击
     </strong>
     。例如，我们可以在用户双击窗口时切换全屏模式：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">mouseDoubleClickEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token double-colon punctuation">::</span>LeftButton<span class="token punctuation">)</span><span class="token comment">//鼠标左键双击才行</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">windowState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token double-colon punctuation">::</span>WindowFullScreen<span class="token punctuation">)</span>如果此时已经为全屏 那就缩小
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">setWindowState</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WindowNoState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>此时是界面木有全屏 那就让他全屏
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">setWindowState</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WindowFullScreen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="_86">
     </a>
     五、鼠标滚轮事件（文本缩放）
    </h2>
    <p>
     wheelEvent 处理
     <strong>
      鼠标滚轮
     </strong>
     操作，我们可以用它来放大或缩小 QTextEdit 组件中的文本
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">wheelEvent</span><span class="token punctuation">(</span>QWheelEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">angleDelta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>当鼠标滚轮向上滑动 
    <span class="token punctuation">{<!-- --></span>
        ui<span class="token operator">-&gt;</span>textEdit<span class="token operator">-&gt;</span><span class="token function">zoomIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>就让框里面的内容变大
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">angleDelta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>当鼠标滚轮向下滑动 
    <span class="token punctuation">{<!-- --></span>
        ui<span class="token operator">-&gt;</span>textEdit<span class="token operator">-&gt;</span><span class="token function">zoomOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>就让框里面的内容变小
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="_103">
     </a>
     总结
    </h2>
    <p>
     Qt 提供了强大的鼠标事件处理机制，使得开发者能够轻松实现丰富的用户交互体验。通过结合 mousePressEvent、mouseMoveEvent、mouseDoubleClickEvent 和 wheelEvent，我们可以实现窗口拖拽、鼠标样式更改、全屏切换以及文本缩放等功能。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323430315f38373131373035312f:61727469636c652f64657461696c732f313436313137333234" class_="artid" style="display:none">
 </p>
</div>


