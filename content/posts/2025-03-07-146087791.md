---
layout: post
title: "TMS320F28P550SJ9学习笔记7结构体寄存器方式配置SCI通信收发_SCI通信收发测试"
date: 2025-03-07 15:20:05 +0800
description: "今日尝试自己操作寄存器编写函数，使用SCI通信外设 发送与接收数据文章提供测试代码讲解、完整工程下载、测试效果图"
keywords: "TMS320F28P550SJ9学习笔记7：结构体寄存器方式配置SCI通信收发_SCI通信收发测试"
categories: ['Tms']
tags: ['Dsp']
artid: "146087791"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146087791
    alt: "TMS320F28P550SJ9学习笔记7结构体寄存器方式配置SCI通信收发_SCI通信收发测试"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146087791
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146087791
cover: https://bing.ee123.net/img/rand?artid=146087791
image: https://bing.ee123.net/img/rand?artid=146087791
img: https://bing.ee123.net/img/rand?artid=146087791
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     TMS320F28P550SJ9学习笔记7：结构体寄存器方式配置SCI通信收发_SCI通信收发测试
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     今日尝试自己操作寄存器编写函数，使用SCI通信外设 发送与接收数据
    </p>
    <p>
     <span style="color:#be191c">
      <strong>
       文章提供测试代码讲解、完整工程下载、测试效果图
      </strong>
     </span>
    </p>
    <blockquote>
     <hr id="hr-toc" name="tableOfContents"/>
    </blockquote>
    <p>
    </p>
    <h2 id="%E6%B7%BB%E5%8A%A0%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BA%93%E6%96%87%E4%BB%B6%EF%BC%9A" name="%E6%B7%BB%E5%8A%A0%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BA%93%E6%96%87%E4%BB%B6%EF%BC%9A">
     <span style="color:#1a439c">
      添加创建自己的库文件：
     </span>
    </h2>
    <blockquote>
     <p>
      这里提一笔怎么添加创建自己的库文件：
     </p>
     <p>
      直接右键添加 Header File 和 Source File 就行了，文件后缀.c与.h别忘了自己加上
     </p>
     <p>
      创建的.h文件会自己给你加上 编译条件语句
     </p>
     <p>
      <img alt="" height="366" src="https://i-blog.csdnimg.cn/direct/1f64d436d24f4203aedf718af3de74f3.png" width="1014"/>
     </p>
    </blockquote>
    <blockquote>
     <p>
      之前想给主文件写个.h文件的，这在keil的操作是合法的，但在ccs这会胡乱报错，不知为何
     </p>
    </blockquote>
    <p>
    </p>
    <h2 id="%E7%BC%96%E5%86%99SCI%E5%8F%91%E9%80%81%E5%87%BD%E6%95%B0%EF%BC%9A" name="%E7%BC%96%E5%86%99SCI%E5%8F%91%E9%80%81%E5%87%BD%E6%95%B0%EF%BC%9A">
     <span style="color:#1a439c">
      编写SCI发送函数：
     </span>
    </h2>
    <blockquote>
     <p>
      下面是我写的三个SCI发送函数的具体实现，分别是发送一个字节、发送一串字符串 、以及自定义的SCI_printf函数
     </p>
    </blockquote>
    <blockquote>
     <pre><code class="language-cpp">
// SCIA 发送一个字节
void SCIa_TransmitData(uint16_t data)
{
    while (SciaRegs.SCIFFTX.bit.TXFFST != 0)
    {
        //考虑添加超时逻辑
    }
    SciaRegs.SCITXBUF.all = data;
}

//SCIA 发送字符串
void SCIa_TransmitString(unsigned char *string)
{
    int i;
    i = 0;
    while(string[i] != '\0')
    {
        SCIa_TransmitData(string[i]);
        i++;
    }
}

// 自定义printf函数
void SCIa_Printf(char *fmt,...)
{
    unsigned char UsartPrintfBuf[128];//最大长度1128
    va_list ap;
    unsigned char *pStr = UsartPrintfBuf;

    va_start(ap, fmt);
    vsnprintf((char *)UsartPrintfBuf, sizeof(UsartPrintfBuf), fmt, ap); //格式化
    va_end(ap);

    while(*pStr != 0 )
    {
      SCIa_TransmitData(*pStr++);  //逐个字节发送

      //等待 发射器缓冲区和移位寄存器均为空
      while(SciaRegs.SCICTL2.bit.TXEMPTY == 0)
      {
          // 超时逻辑
      }

      // 检查传输错误
      if (SciaRegs.SCIRXST.bit.FE || SciaRegs.SCIRXST.bit.OE || SciaRegs.SCIRXST.bit.PE)
      {
          // 处理错误
          SciaRegs.SCIRXST.bit.RXERROR = 0;      // 清除错误标志
      }
    }
}</code></pre>
     <p>
     </p>
    </blockquote>
    <p>
    </p>
    <h2 id="%E4%B8%BB%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A" name="%E4%B8%BB%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A">
     <span style="color:#1a439c">
      <strong>
       主函数调用示例：
      </strong>
     </span>
    </h2>
    <blockquote>
     <p>
      这里展示了函数在主函数的调用情况：
     </p>
     <p>
      DEVICE_DELAY_US(500000);  的延时逻辑是冗余的
     </p>
     <p class="img-center">
      <img alt="" height="595" src="https://i-blog.csdnimg.cn/direct/c19e032bd27548aaa872cd649a89fcd6.png" width="1125"/>
     </p>
    </blockquote>
    <blockquote>
     <p>
      实例程序中用的发送主要是 SCIa_Printf 函数的，因为它用起来最方便，有关其余发送函数的调用示例在主函数下面的注释中也有提到：
     </p>
     <p>
      <img alt="" height="144" src="https://i-blog.csdnimg.cn/direct/17d84607e964466092749aa77c0585d5.png" width="1190"/>
     </p>
    </blockquote>
    <p>
    </p>
    <h2 id="%E6%B5%8B%E8%AF%95%E6%95%88%E6%9E%9C%E5%9B%BE%EF%BC%9A" name="%E6%B5%8B%E8%AF%95%E6%95%88%E6%9E%9C%E5%9B%BE%EF%BC%9A">
     <span style="color:#1a439c">
      测试效果图：
     </span>
    </h2>
    <blockquote>
     <p>
      能够成功的一个一个回传发来的字符并计数：
     </p>
     <p>
     </p>
     <p class="img-center">
      <img alt="" height="870" src="https://i-blog.csdnimg.cn/direct/dcf4aedab3344b6ba6bc75a32dc7fc3f.png" width="1574"/>
     </p>
     <p class="img-center">
      <img alt="" height="284" src="https://i-blog.csdnimg.cn/direct/bd67671193f14ff7ab947c736a813cdf.png" width="732"/>
     </p>
    </blockquote>
    <p>
    </p>
    <h2 id="%E5%AE%8C%E6%95%B4%E5%B7%A5%E7%A8%8B%E4%B8%8B%E8%BD%BD%EF%BC%9A" name="%E5%AE%8C%E6%95%B4%E5%B7%A5%E7%A8%8B%E4%B8%8B%E8%BD%BD%EF%BC%9A">
     <span style="color:#1a439c">
      完整工程下载：
     </span>
    </h2>
    <blockquote>
     <p class="img-center">
      <img alt="" height="324" src="https://i-blog.csdnimg.cn/direct/cb7d86ccbeff409a96e4b409100bcdca.png" width="987"/>
     </p>
    </blockquote>
    <blockquote>
     <p>
      <a href="https://download.csdn.net/download/qq_64257614/90464717" title="https://download.csdn.net/download/qq_64257614/90464717">
       https://download.csdn.net/download/qq_64257614/90464717
      </a>
     </p>
    </blockquote>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36343235373631342f:61727469636c652f64657461696c732f313436303837373931" class_="artid" style="display:none">
 </p>
</div>


