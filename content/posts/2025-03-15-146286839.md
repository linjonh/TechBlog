---
layout: post
title: "python-实现-A-算法"
date: 2025-03-15 22:30:40 +0800
description: "A*算法是一种广泛使用的路径搜索算法，结合了启发式搜索和Dijkstra算法的优点。"
keywords: "python 实现 A* 算法"
categories: ['Python']
tags: ['算法', '开发语言', 'Python']
artid: "146286839"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146286839
    alt: "python-实现-A-算法"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146286839
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146286839
cover: https://bing.ee123.net/img/rand?artid=146286839
image: https://bing.ee123.net/img/rand?artid=146286839
img: https://bing.ee123.net/img/rand?artid=146286839
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     python 实现 A* 算法
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     A*算法是一种广泛使用的路径搜索算法，结合了启发式搜索和Dijkstra算法的优点。它通过评估每个节点的代价函数 ( f(n) = g(n) + h(n) ) 来选择最优路径，其中：
    </p>
    <ul>
     <li>
      ( g(n) ) 是从起点到当前节点的实际代价。
     </li>
     <li>
      ( h(n) ) 是从当前节点到目标节点的启发式估计代价（如曼哈顿距离或欧几里得距离）。
     </li>
    </ul>
    <p>
     以下是一个Python实现的A*算法示例：
    </p>
    <hr/>
    <h4>
     <a id="PythonA_8">
     </a>
     Python实现A*算法
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">import</span> heapq
<span class="token keyword">from</span> math <span class="token keyword">import</span> sqrt

<span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">,</span> parent<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>position <span class="token operator">=</span> position  <span class="token comment"># 节点的坐标 (x, y)</span>
        self<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent     <span class="token comment"># 父节点</span>
        self<span class="token punctuation">.</span>g <span class="token operator">=</span> <span class="token number">0</span>               <span class="token comment"># 从起点到当前节点的实际代价</span>
        self<span class="token punctuation">.</span>h <span class="token operator">=</span> <span class="token number">0</span>               <span class="token comment"># 启发式估计代价</span>
        self<span class="token punctuation">.</span>f <span class="token operator">=</span> <span class="token number">0</span>               <span class="token comment"># 总代价 f = g + h</span>

    <span class="token keyword">def</span> <span class="token function">__eq__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>position <span class="token operator">==</span> other<span class="token punctuation">.</span>position

    <span class="token keyword">def</span> <span class="token function">__lt__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>f <span class="token operator">&lt;</span> other<span class="token punctuation">.</span>f

<span class="token keyword">def</span> <span class="token function">heuristic</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""启发式函数：计算曼哈顿距离"""</span>
    <span class="token keyword">return</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">a_star</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""A*算法实现"""</span>
    open_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 优先队列，存储待探索的节点</span>
    closed_list <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 存储已探索的节点</span>

    start_node <span class="token operator">=</span> Node<span class="token punctuation">(</span>start<span class="token punctuation">)</span>
    end_node <span class="token operator">=</span> Node<span class="token punctuation">(</span>end<span class="token punctuation">)</span>

    heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>open_list<span class="token punctuation">,</span> start_node<span class="token punctuation">)</span>

    <span class="token keyword">while</span> open_list<span class="token punctuation">:</span>
        current_node <span class="token operator">=</span> heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>open_list<span class="token punctuation">)</span>
        closed_list<span class="token punctuation">.</span>add<span class="token punctuation">(</span>current_node<span class="token punctuation">.</span>position<span class="token punctuation">)</span>

        <span class="token comment"># 如果找到目标节点，返回路径</span>
        <span class="token keyword">if</span> current_node <span class="token operator">==</span> end_node<span class="token punctuation">:</span>
            path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">while</span> current_node<span class="token punctuation">:</span>
                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>current_node<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
                current_node <span class="token operator">=</span> current_node<span class="token punctuation">.</span>parent
            <span class="token keyword">return</span> path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 反转路径，从起点到终点</span>

        <span class="token comment"># 遍历当前节点的邻居</span>
        <span class="token keyword">for</span> neighbor <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># 上下左右四个方向</span>
            neighbor_position <span class="token operator">=</span> <span class="token punctuation">(</span>current_node<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> neighbor<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> current_node<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> neighbor<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

            <span class="token comment"># 检查邻居是否在地图范围内且不是障碍物</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>neighbor_position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">or</span> neighbor_position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span> <span class="token keyword">or</span>
                neighbor_position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">or</span> neighbor_position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">or</span>
                grid<span class="token punctuation">[</span>neighbor_position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>neighbor_position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">continue</span>

            <span class="token comment"># 创建邻居节点</span>
            neighbor_node <span class="token operator">=</span> Node<span class="token punctuation">(</span>neighbor_position<span class="token punctuation">,</span> current_node<span class="token punctuation">)</span>

            <span class="token comment"># 如果邻居节点已经探索过，跳过</span>
            <span class="token keyword">if</span> neighbor_node<span class="token punctuation">.</span>position <span class="token keyword">in</span> closed_list<span class="token punctuation">:</span>
                <span class="token keyword">continue</span>

            <span class="token comment"># 计算 g, h, f 值</span>
            neighbor_node<span class="token punctuation">.</span>g <span class="token operator">=</span> current_node<span class="token punctuation">.</span>g <span class="token operator">+</span> <span class="token number">1</span>
            neighbor_node<span class="token punctuation">.</span>h <span class="token operator">=</span> heuristic<span class="token punctuation">(</span>neighbor_node<span class="token punctuation">.</span>position<span class="token punctuation">,</span> end_node<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
            neighbor_node<span class="token punctuation">.</span>f <span class="token operator">=</span> neighbor_node<span class="token punctuation">.</span>g <span class="token operator">+</span> neighbor_node<span class="token punctuation">.</span>h

            <span class="token comment"># 如果邻居节点已经在 open_list 中且新代价更高，跳过</span>
            <span class="token keyword">if</span> <span class="token builtin">any</span><span class="token punctuation">(</span>neighbor_node <span class="token operator">==</span> open_node <span class="token keyword">and</span> neighbor_node<span class="token punctuation">.</span>g <span class="token operator">&gt;</span> open_node<span class="token punctuation">.</span>g <span class="token keyword">for</span> open_node <span class="token keyword">in</span> open_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">continue</span>

            <span class="token comment"># 将邻居节点加入 open_list</span>
            heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>open_list<span class="token punctuation">,</span> neighbor_node<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token boolean">None</span>  <span class="token comment"># 如果没有找到路径，返回 None</span>

<span class="token comment"># 示例地图 (0 表示可通行，1 表示障碍物)</span>
grid <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

<span class="token comment"># 起点和终点</span>
start <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
end <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment"># 运行A*算法</span>
path <span class="token operator">=</span> a_star<span class="token punctuation">(</span>grid<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>
<span class="token keyword">if</span> path<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"找到路径:"</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"未找到路径"</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_108">
     </a>
     代码说明：
    </h4>
    <ol>
     <li>
      <strong>
       <code>
        Node
       </code>
       类
      </strong>
      ：表示搜索中的每个节点，包含位置、父节点、代价等信息。
     </li>
     <li>
      <strong>
       <code>
        heuristic
       </code>
       函数
      </strong>
      ：计算启发式估计代价（这里使用曼哈顿距离）。
     </li>
     <li>
      <strong>
       <code>
        a_star
       </code>
       函数
      </strong>
      ：实现A*算法的核心逻辑，使用优先队列（堆）来管理待探索的节点。
     </li>
     <li>
      <strong>
       地图表示
      </strong>
      ：
      <code>
       grid
      </code>
      是一个二维列表，
      <code>
       0
      </code>
      表示可通行的路径，
      <code>
       1
      </code>
      表示障碍物。
     </li>
     <li>
      <strong>
       路径返回
      </strong>
      ：如果找到路径，返回从起点到终点的坐标列表；否则返回
      <code>
       None
      </code>
      。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_117">
     </a>
     示例输出：
    </h4>
    <p>
     对于上面的地图，输出可能是：
    </p>
    <pre><code>找到路径: [(0, 0), (0, 1), (0, 2), (1, 2), (2, 2), (2, 3), (3, 3), (4, 3), (4, 4), (4, 5)]
</code></pre>
    <hr/>
    <h4>
     <a id="_125">
     </a>
     扩展：
    </h4>
    <ul>
     <li>
      <strong>
       启发式函数
      </strong>
      ：可以替换为欧几里得距离或其他更适合的启发式函数。
     </li>
     <li>
      <strong>
       地图生成
      </strong>
      ：可以从文件中读取地图，或动态生成随机地图。
     </li>
     <li>
      <strong>
       可视化
      </strong>
      ：可以使用
      <code>
       matplotlib
      </code>
      或
      <code>
       pygame
      </code>
      可视化路径搜索过程。
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6c79637768752f:61727469636c652f64657461696c732f313436323836383339" class_="artid" style="display:none">
 </p>
</div>


