---
layout: post
title: "Java-8-Stream-API-详解"
date: 2025-03-06 21:42:36 +0800
description: "Stream 是 Java 8 中处理集合数据的抽象工具。它并不是数据结构，而是一种对数据源（如集合、数组等）进行高效聚合操作的工具。声明式编程：通过链式调用方法描述数据处理逻辑。惰性求值：中间操作不会立即执行，只有在终端操作触发时才会执行。并行处理：可以轻松实现并行操作，充分利用多核 CPU。Stream API 是 Java 8 中非常强大的工具，它通过声明式的方式简化了集合数据的处理。通过掌握 Stream 的创建、中间操作和终端操作，你可以写出更简洁、高效的代码。Stream 的创建。"
keywords: "Java 8 Stream API 详解"
categories: ['未分类']
tags: ['开发语言', 'Java']
artid: "146080347"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146080347
    alt: "Java-8-Stream-API-详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146080347
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146080347
cover: https://bing.ee123.net/img/rand?artid=146080347
image: https://bing.ee123.net/img/rand?artid=146080347
img: https://bing.ee123.net/img/rand?artid=146080347
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java 8 Stream API 详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr/>
    <h3 id="%E5%BC%95%E8%A8%80" name="%E5%BC%95%E8%A8%80">
     引言
    </h3>
    <p>
     Java 8 引入了
     <strong>
      Stream API
     </strong>
     ，它提供了一种高效且声明式的方式来处理集合数据。Stream API 的核心思想是将数据的操作分为
     <strong>
      中间操作
     </strong>
     和
     <strong>
      终端操作
     </strong>
     ，并通过流水线（Pipeline）的方式进行处理。Stream API 不仅使代码更加简洁易读，还能充分利用多核处理器的优势，提升数据处理性能。
    </p>
    <hr/>
    <h3 id="%E4%B8%80%E3%80%81Stream%20%E7%AE%80%E4%BB%8B" name="%E4%B8%80%E3%80%81Stream%20%E7%AE%80%E4%BB%8B">
     一、Stream 简介
    </h3>
    <h4 id="1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%20Stream%EF%BC%9F" name="1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%20Stream%EF%BC%9F">
     1.1 什么是 Stream？
    </h4>
    <p>
     Stream 是 Java 8 中处理集合数据的抽象工具。它并不是数据结构，而是一种对数据源（如集合、数组等）进行高效聚合操作的工具。Stream 的特点包括：
    </p>
    <ul>
     <li>
      <p>
       <strong>
        声明式编程
       </strong>
       ：通过链式调用方法描述数据处理逻辑。
      </p>
     </li>
     <li>
      <p>
       <strong>
        惰性求值
       </strong>
       ：中间操作不会立即执行，只有在终端操作触发时才会执行。
      </p>
     </li>
     <li>
      <p>
       <strong>
        并行处理
       </strong>
       ：可以轻松实现并行操作，充分利用多核 CPU。
      </p>
     </li>
    </ul>
    <h4 id="1.2%20Stream%20%E4%B8%8E%E9%9B%86%E5%90%88%E7%9A%84%E5%8C%BA%E5%88%AB" name="1.2%20Stream%20%E4%B8%8E%E9%9B%86%E5%90%88%E7%9A%84%E5%8C%BA%E5%88%AB">
     1.2 Stream 与集合的区别
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        集合
       </strong>
       ：存储和操作数据的容器，关注数据的存储和访问。
      </p>
     </li>
     <li>
      <p>
       <strong>
        Stream
       </strong>
       ：对数据进行计算和处理的工具，关注数据的计算和转换。
      </p>
     </li>
    </ul>
    <h4 id="1.3%20Stream%20%E7%9A%84%E6%93%8D%E4%BD%9C%E5%88%86%E7%B1%BB" name="1.3%20Stream%20%E7%9A%84%E6%93%8D%E4%BD%9C%E5%88%86%E7%B1%BB">
     1.3 Stream 的操作分类
    </h4>
    <p>
     Stream 的操作分为两类：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        中间操作（Intermediate Operations）
       </strong>
       ：返回一个新的 Stream，可以链式调用。例如
       <code>
        filter
       </code>
       、
       <code>
        map
       </code>
       、
       <code>
        sorted
       </code>
       等。
      </p>
     </li>
     <li>
      <p>
       <strong>
        终端操作（Terminal Operations）
       </strong>
       ：触发 Stream 的执行并返回结果。例如
       <code>
        forEach
       </code>
       、
       <code>
        collect
       </code>
       、
       <code>
        reduce
       </code>
       等。
      </p>
     </li>
    </ol>
    <hr/>
    <h3 id="%E4%BA%8C%E3%80%81Stream%20%E7%9A%84%E5%88%9B%E5%BB%BA" name="%E4%BA%8C%E3%80%81Stream%20%E7%9A%84%E5%88%9B%E5%BB%BA">
     二、Stream 的创建
    </h3>
    <p>
     Stream 可以从多种数据源创建，例如集合、数组、I/O 资源等。
    </p>
    <h4 id="2.1%20%E4%BB%8E%E9%9B%86%E5%90%88%E5%88%9B%E5%BB%BA" name="2.1%20%E4%BB%8E%E9%9B%86%E5%90%88%E5%88%9B%E5%BB%BA">
     2.1 从集合创建
    </h4>
    <pre><code class="language-java">List&lt;String&gt; list = Arrays.asList("Java", "Python", "C++");
Stream&lt;String&gt; stream = list.stream(); // 创建顺序流
Stream&lt;String&gt; parallelStream = list.parallelStream(); // 创建并行流</code></pre>
    <h4 id="2.2%20%E4%BB%8E%E6%95%B0%E7%BB%84%E5%88%9B%E5%BB%BA" name="2.2%20%E4%BB%8E%E6%95%B0%E7%BB%84%E5%88%9B%E5%BB%BA">
     2.2 从数组创建
    </h4>
    <pre><code class="language-java">String[] array = {"Java", "Python", "C++"};
Stream&lt;String&gt; stream = Arrays.stream(array);</code></pre>
    <h4 id="2.3%20%E4%BD%BF%E7%94%A8%C2%A0Stream.of%C2%A0%E5%88%9B%E5%BB%BA%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0" name="2.3%20%E4%BD%BF%E7%94%A8%C2%A0Stream.of%C2%A0%E5%88%9B%E5%BB%BA%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0">
     2.3 使用
     <code>
      Stream.of
     </code>
     创建
    </h4>
    <pre><code class="language-java">Stream&lt;String&gt; stream = Stream.of("Java", "Python", "C++");</code></pre>
    <h4 id="2.4%20%E4%BD%BF%E7%94%A8%C2%A0Stream.generate%C2%A0%E6%88%96%C2%A0Stream.iterate%C2%A0%E5%88%9B%E5%BB%BA" name="2.4%20%E4%BD%BF%E7%94%A8%C2%A0Stream.generate%C2%A0%E6%88%96%C2%A0Stream.iterate%C2%A0%E5%88%9B%E5%BB%BA">
     2.4 使用
     <code>
      Stream.generate
     </code>
     或
     <code>
      Stream.iterate
     </code>
     创建
    </h4>
    <pre><code class="language-java">// 生成无限流
Stream&lt;String&gt; infiniteStream = Stream.generate(() -&gt; "Hello");

// 生成有限流
Stream&lt;Integer&gt; finiteStream = Stream.iterate(0, n -&gt; n + 1).limit(10);</code></pre>
    <hr/>
    <h3 id="%E4%B8%89%E3%80%81Stream%20%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C" name="%E4%B8%89%E3%80%81Stream%20%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C">
     三、Stream 的常用操作
    </h3>
    <p>
     <img alt="" height="624" src="https://i-blog.csdnimg.cn/direct/4e9d41891c0340989ef9df7e417f5e35.png" width="1374"/>
    </p>
    <h4 id="3.1%20%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C" name="3.1%20%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C">
     3.1 中间操作
    </h4>
    <h5 id="3.1.1%C2%A0filter%EF%BC%9A%E8%BF%87%E6%BB%A4" name="3.1.1%C2%A0filter%EF%BC%9A%E8%BF%87%E6%BB%A4">
     3.1.1
     <code>
      filter
     </code>
     ：过滤
    </h5>
    <p>
     根据条件过滤元素。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++", "JavaScript");
List&lt;String&gt; result = languages.stream()
                               .filter(s -&gt; s.startsWith("J"))
                               .collect(Collectors.toList());
System.out.println(result); // 输出 [Java, JavaScript]</code></pre>
    <h5 id="3.1.2%C2%A0map%EF%BC%9A%E6%98%A0%E5%B0%84" name="3.1.2%C2%A0map%EF%BC%9A%E6%98%A0%E5%B0%84">
     3.1.2
     <code>
      map
     </code>
     ：映射
    </h5>
    <p>
     将元素转换为另一种形式。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++");
List&lt;Integer&gt; lengths = languages.stream()
                                 .map(String::length)
                                 .collect(Collectors.toList());
System.out.println(lengths); // 输出 [4, 6, 3]</code></pre>
    <h5 id="3.1.3%C2%A0sorted%EF%BC%9A%E6%8E%92%E5%BA%8F" name="3.1.3%C2%A0sorted%EF%BC%9A%E6%8E%92%E5%BA%8F">
     3.1.3
     <code>
      sorted
     </code>
     ：排序
    </h5>
    <p>
     对元素进行排序。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++");
List&lt;String&gt; sortedLanguages = languages.stream()
                                       .sorted()
                                       .collect(Collectors.toList());
System.out.println(sortedLanguages); // 输出 [C++, Java, Python]</code></pre>
    <h5 id="3.1.4%C2%A0distinct%EF%BC%9A%E5%8E%BB%E9%87%8D" name="3.1.4%C2%A0distinct%EF%BC%9A%E5%8E%BB%E9%87%8D">
     3.1.4
     <code>
      distinct
     </code>
     ：去重
    </h5>
    <p>
     去除重复元素。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "Java", "C++");
List&lt;String&gt; uniqueLanguages = languages.stream()
                                       .distinct()
                                       .collect(Collectors.toList());
System.out.println(uniqueLanguages); // 输出 [Java, Python, C++]</code></pre>
    <h5 id="3.1.5%C2%A0limit%C2%A0%E5%92%8C%C2%A0skip%EF%BC%9A%E9%99%90%E5%88%B6%E5%92%8C%E8%B7%B3%E8%BF%87" name="3.1.5%C2%A0limit%C2%A0%E5%92%8C%C2%A0skip%EF%BC%9A%E9%99%90%E5%88%B6%E5%92%8C%E8%B7%B3%E8%BF%87">
     3.1.5
     <code>
      limit
     </code>
     和
     <code>
      skip
     </code>
     ：限制和跳过
    </h5>
    <ul>
     <li>
      <p>
       <code>
        limit(n)
       </code>
       ：保留前 n 个元素。
      </p>
     </li>
     <li>
      <p>
       <code>
        skip(n)
       </code>
       ：跳过前 n 个元素。
      </p>
     </li>
    </ul>
    <pre><code class="language-java">List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 3, 4, 5);
List&lt;Integer&gt; result = numbers.stream()
                              .limit(3)
                              .skip(1)
                              .collect(Collectors.toList());
System.out.println(result); // 输出 [2, 3]</code></pre>
    <hr/>
    <h4 id="3.2%20%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C" name="3.2%20%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C">
     3.2 终端操作
    </h4>
    <h5 id="3.2.1%C2%A0forEach%EF%BC%9A%E9%81%8D%E5%8E%86" name="3.2.1%C2%A0forEach%EF%BC%9A%E9%81%8D%E5%8E%86">
     3.2.1
     <code>
      forEach
     </code>
     ：遍历
    </h5>
    <p>
     对每个元素执行操作。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++");
languages.stream().forEach(System.out::println);</code></pre>
    <h5 id="3.2.2%C2%A0collect%EF%BC%9A%E6%94%B6%E9%9B%86" name="3.2.2%C2%A0collect%EF%BC%9A%E6%94%B6%E9%9B%86">
     3.2.2
     <code>
      collect
     </code>
     ：收集
    </h5>
    <p>
     将 Stream 转换为集合或其他数据结构。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++");
Set&lt;String&gt; languageSet = languages.stream()
                                   .collect(Collectors.toSet());
System.out.println(languageSet); // 输出 [Java, Python, C++]</code></pre>
    <h5 id="3.2.3%C2%A0reduce%EF%BC%9A%E5%BD%92%E7%BA%A6" name="3.2.3%C2%A0reduce%EF%BC%9A%E5%BD%92%E7%BA%A6">
     3.2.3
     <code>
      reduce
     </code>
     ：归约
    </h5>
    <p>
     将 Stream 中的元素组合起来，得到一个值。
    </p>
    <pre><code class="language-java">List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 3, 4, 5);
int sum = numbers.stream()
                 .reduce(0, Integer::sum);
System.out.println(sum); // 输出 15</code></pre>
    <h5 id="3.2.4%C2%A0count%EF%BC%9A%E8%AE%A1%E6%95%B0" name="3.2.4%C2%A0count%EF%BC%9A%E8%AE%A1%E6%95%B0">
     3.2.4
     <code>
      count
     </code>
     ：计数
    </h5>
    <p>
     返回 Stream 中元素的个数。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++");
long count = languages.stream().count();
System.out.println(count); // 输出 3</code></pre>
    <h5 id="3.2.5%C2%A0anyMatch%E3%80%81allMatch%E3%80%81noneMatch%EF%BC%9A%E5%8C%B9%E9%85%8D" name="3.2.5%C2%A0anyMatch%E3%80%81allMatch%E3%80%81noneMatch%EF%BC%9A%E5%8C%B9%E9%85%8D">
     3.2.5
     <code>
      anyMatch
     </code>
     、
     <code>
      allMatch
     </code>
     、
     <code>
      noneMatch
     </code>
     ：匹配
    </h5>
    <ul>
     <li>
      <p>
       <code>
        anyMatch
       </code>
       ：任意一个元素满足条件。
      </p>
     </li>
     <li>
      <p>
       <code>
        allMatch
       </code>
       ：所有元素都满足条件。
      </p>
     </li>
     <li>
      <p>
       <code>
        noneMatch
       </code>
       ：没有元素满足条件。
      </p>
     </li>
    </ul>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++");
boolean anyMatch = languages.stream().anyMatch(s -&gt; s.startsWith("J"));
boolean allMatch = languages.stream().allMatch(s -&gt; s.length() &gt; 3);
boolean noneMatch = languages.stream().noneMatch(s -&gt; s.isEmpty());
System.out.println(anyMatch); // 输出 true
System.out.println(allMatch); // 输出 false
System.out.println(noneMatch); // 输出 true</code></pre>
    <hr/>
    <h3 id="%E5%9B%9B%E3%80%81%E5%B9%B6%E8%A1%8C%E6%B5%81" name="%E5%9B%9B%E3%80%81%E5%B9%B6%E8%A1%8C%E6%B5%81">
     四、并行流
    </h3>
    <p>
     Stream API 支持并行处理，只需将
     <code>
      stream()
     </code>
     替换为
     <code>
      parallelStream()
     </code>
     即可。
    </p>
    <pre><code class="language-java">List&lt;String&gt; languages = Arrays.asList("Java", "Python", "C++");
long count = languages.parallelStream()
                     .filter(s -&gt; s.startsWith("J"))
                     .count();
System.out.println(count); // 输出 1</code></pre>
    <hr/>
    <h3 name="%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93">
     五、案例
    </h3>
    <p>
     <strong>
      User实体类
     </strong>
    </p>
    <pre><code class="language-java">public class User {
    private int id;
    private String userName;
    private int age;
    //get、set、有参/无参构造器、toString
 }
</code></pre>
    <p>
     <strong>
      Stream算法题
     </strong>
    </p>
    <pre><code class="language-java">import java.util.Arrays;
 import java.util.List;
 /*
 * 题目：请按照给出数据，找出同时满足以下条件的用户
 *       也即以下条件：
 *          1、全部满足偶数ID
 *          2、年龄大于24
 *          3、用户名转为大写
 *          4、用户名字母倒排序
 *          5、只输出一个用户名字 limit
 **/
 public class StreamDemo {
    public static void main(String[] args) {
        User u1 = new User(11, "a", 23);
        User u2 = new User(12, "b", 24);
        User u3 = new User(13, "c", 22);
        User u4 = new User(14, "d", 28);
        User u5 = new User(16, "e", 26);
        List&lt;User&gt; list = Arrays.asList(u1, u2, u3, u4, u5);
        /*
         * 1. 首先我们需要将 list 转化为stream流
         * 2. 然后将用户过滤出来，这里用到一个函数式接口Predicate&lt;? super T&gt;，我们可
以使用lambda表达式简化
         * 3. 这里面传递的参数，就是Stream流的泛型类型，也就是User，所以，这里可以直接
返回用户id为偶数的用户信息;
         * 4. 通过forEach进行遍历，直接简化输出 System.out::println ，等价于 
System.out.println(u);
         **/
        //list.stream().filter(u -&gt; {return 
//u.getId()%2==0;}).forEach(System.out::println);
        //list.stream().filter(u -&gt; {return u.getId()%2==0;})
            //.filter(u -&gt; {return 
//u.getAge()&gt;24;}).forEach(System.out::println);
        //sorted()  自然排序，正排序 D-&gt;E
        list.stream()
                .filter(u -&gt; {return u.getId()%2==0;})
                .filter(u -&gt; {return u.getAge()&gt;24;})
                .map(u -&gt; {return u.getUserName().toUpperCase();})
              //.sorted() //默认正排序  自己用 compareTo 比较
                .sorted((o1,o2)-&gt;{return o2.compareTo(o1);})
                .limit(1)
                .forEach(System.out::println);
        /*
            map解释
            List&lt;Integer&gt; list2 = Arrays.asList(1,2,3);
            list2 = list2.stream().map(x -&gt; {return 
            x*2;}).collect(Collectors.toList());
             for (Integer element : list2) {
                 System.out.println(element);
             }
         */
     }
 }</code></pre>
    <p>
    </p>
    <hr/>
    <h3 id="%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93" name="%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93">
     六、总结
    </h3>
    <p>
     Stream API 是 Java 8 中非常强大的工具，它通过声明式的方式简化了集合数据的处理。通过掌握 Stream 的创建、中间操作和终端操作，你可以写出更简洁、高效的代码。以下是本文的核心要点：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        Stream 的创建
       </strong>
       ：可以从集合、数组、I/O 资源等创建 Stream。
      </p>
     </li>
     <li>
      <p>
       <strong>
        中间操作
       </strong>
       ：如
       <code>
        filter
       </code>
       、
       <code>
        map
       </code>
       、
       <code>
        sorted
       </code>
       等，用于对数据进行处理和转换。
      </p>
     </li>
     <li>
      <p>
       <strong>
        终端操作
       </strong>
       ：如
       <code>
        forEach
       </code>
       、
       <code>
        collect
       </code>
       、
       <code>
        reduce
       </code>
       等，用于触发计算并返回结果。
      </p>
     </li>
     <li>
      <p>
       <strong>
        并行流
       </strong>
       ：通过
       <code>
        parallelStream()
       </code>
       实现并行处理，提升性能。
      </p>
     </li>
    </ol>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f69736f6c7573696f6e2f:61727469636c652f64657461696c732f313436303830333437" class_="artid" style="display:none">
 </p>
</div>


