---
layout: post
title: 2024-07-02-刀片服务器与机架式服务器的选择
date: 2024-07-02 16:00:32 +0800
categories: ['网络技术和应用']
tags: ['服务器', '扩展', '测试', 'Ibm', '磁盘', '集群']
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=1824945
  alt: 刀片服务器与机架式服务器的选择
artid: 1824945
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=1824945
featuredImagePreview: https://bing.ee123.net/img/rand?artid=1824945
---

# 刀片服务器与机架式服务器的选择

近两年，在服务器领域炒作最火的莫过于刀片服务器了，似乎它可以替代一切其他的服务器架构。但笔者认为，大家千万别给各种广告宣传所误导。刀片服务器并不是万能的，也不具有绝对的优势。现在大家通常喜欢把刀片服务器与密度接的机架式服务器进行比较，本节就要介绍这两者在选择方面的一些经验。

在刀片式服务器与机架式服务器的比较方面，我们主要关注的是产品的投资成本、性能配置、扩展能力、能耗、维护与管理等方面。下面通过一个具体的实例来进行比较。这个实例就是

IBM

的

HS21

和

HS21 XM

两款刀片服务器，以及配置相当的

x3550

、

x3650

机架式服务器。

HS21

和

HS21 XM

两款刀片均以

IBM Blade Center H

（

BC-H

）为机箱。

BC-H

机箱由一个

10GB

以太交换机、一个

1GB

以太交换机和四个电源供电系统组成。

XM

系列刀片配的是一对

2.33GHz

的

Intel

四核处理器，而

HS21

的一对四核

CPU

的频率则为

2.0GHz

；

XM

的内存为

16GB DDR2

，而

HS21

只有

8GB

。

以上配置与

IBM x3550

机架式服务器差别不大，只是主频提高了些，为

2.66GHz

。而

IBM x3650

是

2U

双路四核机架式服务器，处理器主频最高为

3.0GHz

。

l


投资成本比较

大家都知道，刀片服务器的价格不菲，再谈谈大家最为关注的投资总成本。首先看单台机的比较（价格来源于

IBM

网上的报价，均为标准配置）。

标准

HS21

刀片服务器售价为

$7,100

，而

HS21 XM

版刀片服务器售价为

$9,800

，两者的区别在于

CPU

的频率、内存的大小，还有

XM

上的

RAID 0/1

配置。而用来安装刀片的

BC-H

机箱则高达

$17,000

。机架服务器

x3550

的报价为

$7,900

，相应的

x3650

的报价为

$9,300

。

经过简单的比较可以看出，由于刀片服务器的机箱价格原因，导致了单刀片时的刀片服务器价格（

$7,100+$17,000=$24,000

，或者

$9,800+$17,000=$26,800

）比单机架式服务器的价格（

$7,900

，或者

$9,300

）要贵许多。

试想一下，如果

HS21

或者

HS21 XM

刀片服务器中安装了

2

个刀片，则刀片服务器价格为：

$7,100\*2+$17,000=$31,000

，或者

$9,800\*2+$17,000=$36,600

，而两台

x3550

、

x3650

机架式服务器的价格分别为：

$7,900\*2=$15.800

，或者

$9,300\*2=$18.600

。这样一来，刀片服务器的总体成本仍比机架式的要贵。但这并不能就说刀片服务器价格都比机架式服务器的要贵，因为我们可以看到，就单个

“

刀片

”

而言，它的确要比单台机架式服务器便宜，只是所用的刀片机箱拖累了整个成本。只要有适当的

“

刀片

”

规模，刀片服务器的最终总体成本肯定会小于多台机架式服务器的总体成本低的。而且我们这里还没有考虑到多台机架式服务器连接所需的交换机价格。

如在刀版机箱中安装了

14

块

“

刀片

”

的情况下，安装

HS21“

刀片

”

时的总成本为：

$7,100\*14+$17,000=$116,400

；如果安装的是

HS21 XM“

刀片

”

，则总成本是：

$9,800\*14+$17,000=$154,200

。

而

14

台

x3550

的总成本为：

$7,900\*14=$110,600

；

14

台

x3650

的总成本为：

$9,300\*14=$130,200

。注意最终的总成本还要计算一台

24

口的

1G

光纤以太网交换机成本，约

$12,500

。则以上两种采用机枷式服务器方案的总成本就分别变为：

$123,100

和

$142,700

。对比一下上面的两种刀片服务器方案总成本上升就可以知道，

14

块

HS21“

刀片

”

的刀片服务器总成本要比两种

14

台机架式服务器方案都便宜。采用

14

块

HS21 XM“

刀片

”

的刀片服务器总成本与贵的那种

14

台机

x3650

架式服务器方案总成本相当。

l


运行性能比较

经一些专业的测试机构测试表明，以

LMBench3

对服务器进行其中一项最苛刻的测试

——processor fork+execve

（主要测试数据在

I/O

和内存间的传送速度），

H21

和

H.21 XM

刀片服务器的测试结果为

289.9

微秒，而

x.3550

机架服务器则为

173.2

微秒，速度上提高了

40%

（时间越长，速度越低）。这是由于在

H.21

和

H.21 XM

刀片服务器是所配置的是

RAID1

，而在机架式的

x.3550

和

x.3650

服务器上配置的是

RAID5

。其他方面的测试结构显示，这几款服务器的性能均不相上下，因为这些服务器的单元配置都基本上一样，都采用了两个四核

Intel

处理器，在主频上测试时也选择了差不多的配置。这样一来，在性能上，刀片服务器与机架式服务器没有太多区别，主要区别仅体现在由磁盘阵列影响的数据存取能力上。

l


扩展能力比较

在扩展能力上，我们要从两个方面进行比较。一是单台服务器的比较，另一方面就是服务器群集扩展的比较。

刀片服务器中的单台服务器就是各个

“

刀片

”

。在这些

“

刀片

”

中由于它们的高密度决定了他们的扩展能力非常有限。这既是刀片服务器的优点，同时也是必然的缺点。一般的

“

刀片

”

只配备了两块硬盘，最多只配置

RAID 1

镜像，或者

RAID 0

无冗余性能硬盘阵列，这就意味着硬盘容量不能超过刀片厂商规定的最大容量，也不能最大限度地提升服务器磁盘读写性能。这就是我们前面介绍的刀片服务器的

processor fork+execve

测试结果远不如机架式服务器的原因了。除非服务器安装和配置了

iSCSI,

、光纤通道或其它

SAN

连接，否则

“

刀片

”

很难在磁盘容量和读写性能方面不可能有实质性的提高。

与刀片服务器中的

“

刀片

”

不同，机架式服务器的扩展空间要大许多，这、样也就可以配置更多的组件。如

2U

的

x3650

机架式服务器内置了

RAID 5

，配有四个硬盘：三个组成

RAID

，一个做为热后备硬盘。有的厂商甚至给

1U

的机架式服务器内安置了等同于

2U

的存储容量设备。

除了磁盘方面的扩展能力外，在内存、

I/O

扩展槽方面，存在同样的现象，那就是刀片服务器的

“

刀片

”

扩展能力不如机架式服务器。

另外，刀片服务器还有另一个潜在缺点，就是它的专有性。如果你选择一个厂商的刀片服务器，那就意味着服务项目、部件更新都要听从于该厂商，而无法使用其它厂商的服务和组件。而且，一般情况下，未来更新、更快的

CPU

还是会首先采用在机架服务器上。

在扩展能力的群集方面，刀片服务器具有先天优势，只需要把各个

“

刀片

”

插入到刀片机箱中，利用自身的群集管理软件就可以很轻松地配置刀片服务器群。而机架式服务器要组建集群就没那么容易了，它必须另外购买群集管理软件，而且网络连接、配置更复杂。

l


能耗方面的比较

相比于性能，服务器运行的最大成本

——

能耗费用常常被忽视。由于机架式服务器上安装的部件更多，而且现在的刀片服务器已有专门为其优化的处理器选择，所以总体上来说，刀片服务器的能耗要远比机架式服务器的低。据一些测试机构测试表明，相同配置的刀片服务器群与机架式服务器集群，能耗要低近

20%

。这对于只有少数几台服务器的小公司来说，没什么太大差别，但如果一个公司中有几十、上百台这样的服务器，这个效益就非常明显增加了。

l


管理方面的比较

在一些大公司中，服务器的维护与管理成本也是非常高的。一般说来，刀片服务器的维护要比机架服务器来的便捷。首先，刀片的尺寸和重量便于处理。我们能在

3

秒钟内取出一片刀片，相比之下，拉出一个机架部件可能需要超过一分钟。而且，刀片服务器中的线缆数（包括电源线、双绞线或光纤电费）要远比同等规模的机架式服务器集群少，因为

“

刀片

”

之间共享了同一个带有电源、风扇、

“

刀片

”

交换底座，都是由刀片机箱提供。线缆的减少对于服务器的维护与管理提供了诸多方便。

另外，像前面说的刀片服务器中的各刀片可以通过自带的群集管理软件进行统一管理，而机架式服务器要配置成服务器群集，需要另外购买群休管理软件，而且配置相对来说更复杂些。

但同时我们也要看到，由于刀片的技术在厂商间的相对封闭，刀片服务器无法做到像机架式服务器那样可以随时相互替换，缺乏灵活性。这给服务器的维护与管理带来一定的不便，可能经常会需要请服务商来支持了。这一点必须要充分意识到。

鉴于以上各方面的比较结果，可以看出，刀片服务器与机架式服务器并没有哪个占有绝对优势，这也决定了不同企业用户有不同的选择。

如果单从总体成本来考虑的话，对于只需少数几台服务器的中小型企业说，选择机架式服务器更加合适。况且在运算性能、扩展能力上，机架式服务器都更有保障，比较适合快速增长的中小型企业特点。

如果是中型以上的企业，所需的服务器比较多，则选择刀片服务器更加合适。下方面管理更加容易，另一方面，总体成本、能耗方面也能节省一大笔开支。刀版服务器的扩展能力不足完全可以通过多

“

刀片

”

集群，

SAN

存储网络来弥补。而这些，对于中型以上企业来说又几乎是标准配置，可以说无需另外投资就能实现与机架式服务器集相当的性能。

687474:70733a2f2f626c6f672e6373646e2e6e65742f6c7963625f67:7a2f61727469636c652f64657461696c732f31383234393435