---
layout: post
title: "微信公众号开发服务器配置及token验证"
date: 2024-12-31 03:00:00 +0800
description: "[前言]：因为自己第一次配置开发者模式是2015年底，当时是SAE的应用，现在申请了一个阿里云的服务"
keywords: "公众号云服务器操作系统"
categories: ['折腾']
tags: ['环境配置', '服务器配置', '微信公众号', '云服务器', 'Token']
artid: "80780836"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=80780836
    alt: "微信公众号开发服务器配置及token验证"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=80780836
featuredImagePreview: https://bing.ee123.net/img/rand?artid=80780836
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信公众号开发——服务器配置及token验证
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <span style="font-size:16px;">
      [前言]：因为自己第一次配置开发者模式是2015年底，当时是SAE的应用，现在申请了一个阿里云的服务器，根据官方文档尝试一晚上无果，自己又找资料成功完成启用微信公众号后台开发者模式的服务器设置。
     </span>
    </p>
    <h2>
     <span style="font-size:24px;">
      一、前提
     </span>
    </h2>
    <h3>
     <span style="font-size:18px;">
      1、购买一台
      <strong>
       云服务器
      </strong>
     </span>
    </h3>
    <p>
     <span style="font-size:16px;">
      必须要有
      <strong>
       公网IP
      </strong>
      ，可以没有域名，我选择安装的是
      <strong>
       CentOS 7.5
      </strong>
      的系统。（这里我是用的最后一个月的学生优惠9.9买了台阿里云玩玩）；
     </span>
    </p>
    <h3>
     <span style="font-size:18px;">
      2、配置
      <strong>
       安全组
      </strong>
     </span>
    </h3>
    <p>
     <span style="font-size:16px;">
      <strong>
       <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/a2c07876439ab451f23bfccd382229ab.png"/>
      </strong>
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      <strong>
       <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/5e188bfecd73f295b593860d244f77e7.png">
        <br/>
       </img>
      </strong>
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      添加一条可以访问80端口的安全规则。
     </span>
    </p>
    <h3>
     <span style="font-size:18px;">
      3、远程连接
     </span>
    </h3>
    <p>
     <span style="font-size:16px;">
      （1）在阿里云的管理平台上直接登入
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/2b828647ef4296977ccb7a139c07ac42.png">
       <br/>
      </img>
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      用户名默认root
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      密码是购买的时候设置的用户密码，忘记的话可以在控制台重置密码。
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      （2）使用Xshell、SecureCRT、Putty等软件远程登入
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      这里推荐使用Xshell，用户名密码同上。
     </span>
    </p>
    <h4>
     <span style="font-size:18px;">
      4、搭建服务
     </span>
    </h4>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      以下是远程登入后，在命令行中操作。
      <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:18px;background-color:rgb(255,255,255);">
       全部
      </span>
      在命令行中操作完成的。
     </span>
    </p>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      （1）
     </span>
     <span style="font-size:18px;">
      安装
      <strong>
       python2.7
       <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:18px;background-color:rgb(255,255,255);">
        以上
       </span>
      </strong>
      版本
     </span>
    </p>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      CentOS7.2自带python2.7.5，
     </span>
     <span style="font-size:18px;">
      readline-devel 如果没有安装的话，会造成进入python解释器上下左右回退键都输入不正常。
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;"><span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">yum</span> <span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">install</span> -y readline-devel</span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      如果缺少openssl-devel的话，访问https会无法工作。
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;"><span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">yum</span> <span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">install</span> -y openssl-devel</span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      下载
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;">cd /<span style="margin:0px;padding:0px;line-height:1.5;">tmp
</span><span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">wget</span> https:<span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">//</span><span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">www.python.org/ftp/python/2.7.12/Python-2.7.12.tar.xz</span></span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      解压缩
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;"><span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">tar</span> -xJvf Python-<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">2.7</span>.<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">12</span>.<span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">tar</span>.xz</span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      编译
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;">cd Python-<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">2.7</span>.<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">12</span>/<span style="margin:0px;padding:0px;line-height:1.5;">
.</span>/configure --prefix=/usr/local/python2.<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">7</span>
<span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">make</span>
<span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">make</span> <span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">install</span></span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      链接
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;"><span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">ln</span> -s /usr/local/python2.<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">7</span>/bin/python2.<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">7</span> /usr/local/bin/python</span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      由于系统自带的python路径是/usr/bin/python。PATH中，/usr/local/bin比/usr/bin靠前，所以当你输入python，系统会自动启动你安装的python2.7.12。
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;"><span style="margin:0px;padding:0px;color:rgb(0,0,255);line-height:1.5;">echo</span><span style="margin:0px;padding:0px;line-height:1.5;"> $PATH
</span>/usr/lib64/qt-<span style="margin:0px;padding:0px;color:rgb(128,0,128);line-height:1.5;">3.3</span>/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      在python脚本中，你可以使用env来搜寻python
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;"><span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">#</span><span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">!/bin/env python</span></span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      这样，CentOS7.2调用的也是你安装的2.7.12。好处是当你在别的环境里运行，不需要改第一行也能执行。当然你也可以使用绝对路径：
     </span>
    </p>
    <div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:rgb(245,245,245);border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';">
     <pre style="margin-bottom:0px;padding-right:0px;padding-left:0px;white-space:pre-wrap;font-family:'Courier New';"><span style="font-size:16px;"><span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">#</span><span style="margin:0px;padding:0px;color:rgb(0,128,0);line-height:1.5;">!/usr/local/bin/python</span></span></pre>
    </div>
    <p style="margin:10px auto;color:rgb(17,17,17);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      这样当在别的环境中执行，你需要用sed把第一行的路径替换下。
     </span>
    </p>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      （2）安装
      <strong>
       web.py
      </strong>
     </span>
    </p>
    <p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Arial, Helvetica, sans-serif;text-align:left;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      先安装 easy install：
     </span>
    </p>
    <pre><code class="language-plain">yum install python-setuptools</code></pre>
    <p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Arial, Helvetica, sans-serif;text-align:left;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      安装完成，输入：
     </span>
    </p>
    <pre><code class="language-plain">easy_install web.py</code></pre>
    <p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Arial, Helvetica, sans-serif;text-align:left;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      （3）安装
      <strong>
       libxml2, libxslt, lxml python
      </strong>
     </span>
    </p>
    <pre><code class="language-plain">yum install libxml2
yum install libxslt
yum install lxml python</code></pre>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      （4）编辑代码，如果不懂python 语法，请到
      <a href="https://docs.python.org/2" rel="nofollow" style="color:rgb(0,136,204);">
       python官方文档
      </a>
      查询说明。
     </span>
    </p>
    <pre><code class="language-plain">vim main.py</code></pre>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      点击“i”，进入编辑模式，输入以下代码：
     </span>
    </p>
    <pre style="padding:9.5px;color:rgb(51,51,51);margin-bottom:10px;white-space:pre-wrap;background-color:rgb(245,245,245);border:1px solid rgba(0,0,0,.15);font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><code style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:inherit;white-space:pre-wrap;background-color:transparent;border:0px;"><span style="font-size:16px;"># -*- coding: utf-8 -*-
# filename: main.py
import web

urls = (
    '/wx', 'Handle',
)

class Handle(object):
    def GET(self):
        return "hello, this is a test"

if __name__ == '__main__':
    app = web.application(urls, globals())
    app.run()
</span></code><code style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:inherit;white-space:pre-wrap;background-color:transparent;border:0px;"><span style="font-size:16px;">
</span></code></pre>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     点击“ESC”，退出编辑模式，输入“:wq”，退出编辑器并保存。
    </p>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
       （5
      </span>
      ）开启服务
     </span>
    </p>
    <p style="margin-bottom:10px;padding-bottom:14px;color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:16px;">
      如果出现“socket.error: No socket could be created“错误信息，可能为80端口号被占用，可能是没有权限，请自行查询解决办法。如果遇见其他错误信息，请到
      <a href="http://www.webpy.org/" rel="nofollow" style="color:rgb(0,136,204);">
       web.py官方文档
      </a>
      ，学习webpy 框架3执行命令：
     </span>
    </p>
    <pre><code class="language-plain">sudo python main.py 80 </code></pre>
    <p>
     <span style="font-size:16px;">
      <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
       （6）测试
      </span>
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
       在浏览器输入
      </span>
      <a href="http://xn--ip-3s9cz36l/wx" rel="nofollow" style="color:rgb(0,136,204);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
       http://外网IP:80/wx
      </a>
      ，可以看到类似于如下的页面：
      <br/>
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/c64a7b32b4f08b6cbfab86ae49524e2b.png">
       <br/>
      </img>
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      这表明
      <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(255,255,255);">
       一个简单的web应用已搭建完成。
      </span>
     </span>
    </p>
    <h4>
     <span style="font-size:18px;">
      5、部署
      <strong>
       LAMP
      </strong>
     </span>
    </h4>
    <p>
     <span style="font-size:16px;">
      即
      <span style="color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;background-color:rgb(255,255,255);">
       Linux+Apache+MySQL/MariaDB+Perl/PHP/Python，
      </span>
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      参考
      <a href="https://help.aliyun.com/document_detail/50774.html?spm=5176.doc52954.6.722.t92kLG" rel="nofollow">
       阿里云官方文档
      </a>
      ：
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      https://help.aliyun.com/document_detail/50774.html?spm=5176.doc52954.6.722.t92kLG
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      完成LAMP的部署；
     </span>
    </p>
    <h4>
     <span style="font-size:18px;">
      6、修改
      <strong>
       index.php
      </strong>
     </span>
    </h4>
    <p>
     <span style="font-size:16px;">
      <a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421135319" rel="nofollow">
       代码参考官方文档
      </a>
      ：https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421135319
     </span>
    </p>
    <p>
     <span style="font-size:16px;">
      如下：
     </span>
    </p>
    <pre><code class="language-php">&lt;?php    
/**   
  * wechat php test   
  */    
    
//define your token    
define("TOKEN", "weixin");    
$wechatObj = new wechatCallbackapiTest();    
$wechatObj-&gt;valid();    
    
class wechatCallbackapiTest    
{    
    public function valid()    
    {    
        $echoStr = $_GET["echostr"];    
    
        //valid signature , option    
        if($this-&gt;checkSignature()){    
            echo $echoStr;    
            exit;    
        }    
    }    
    
    public function responseMsg()    
    {    
        //get post data, May be due to the different environments    
        $postStr = $GLOBALS["HTTP_RAW_POST_DATA"];    
    
        //extract post data    
        if (!empty($postStr)){    
                    
                $postObj = simplexml_load_string($postStr, 'SimpleXMLElement', LIBXML_NOCDATA);    
                $fromUsername = $postObj-&gt;FromUserName;    
                $toUsername = $postObj-&gt;ToUserName;    
                $keyword = trim($postObj-&gt;Content);    
                $time = time();    
                $textTpl = "&lt;xml&gt;    
                            &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;    
                            &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;    
                            &lt;CreateTime&gt;%s&lt;/CreateTime&gt;    
                            &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;    
                            &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;    
                            &lt;FuncFlag&gt;0&lt;/FuncFlag&gt;    
                            &lt;/xml&gt;";                 
                if(!empty( $keyword ))    
                {    
                    $msgType = "text";    
                    $contentStr = "Welcome to wechat world!";    
                    $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);    
                    echo $resultStr;    
                }else{    
                    echo "Input something...";    
                }    
    
        }else {    
            echo "";    
            exit;    
        }    
    }    
            
    private function checkSignature()    
    {    
        $signature = $_GET["signature"];    
        $timestamp = $_GET["timestamp"];    
        $nonce = $_GET["nonce"];        
                    
        $token = TOKEN;    
        $tmpArr = array($token, $timestamp, $nonce);    
        sort($tmpArr);    
        $tmpStr = implode( $tmpArr );    
        $tmpStr = sha1( $tmpStr );    
            
        if( $tmpStr == $signature ){    
            return true;    
        }else{    
            return false;    
        }    
    }    
}    
    
?&gt;    </code></pre>
    <span style="font-size:16px;">
     其中：
    </span>
    <pre><code class="language-php">define("TOKEN", "weixin");   </code></pre>
    <p>
     <span style="font-size:16px;">
      第7行是用户定义的“
      <strong>
       token
      </strong>
      ”，需要与下面将会提及的
      <span style="color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
       令牌
      </span>
      <span class="tips" style="margin:0px;padding:0px;color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
       (Token)相同。
      </span>
     </span>
    </p>
    <p>
     <span style="font-family:'Microsoft YaHei';font-size:16px;">
      安装
      <span style="color:rgb(68,68,68);background-color:rgb(255,255,255);">
       Linux/Unix同Windows进行ZModem文件传输的命令行工具：
      </span>
     </span>
    </p>
    <pre><code class="language-plain">yum install lrzsz</code></pre>
    <p>
     完成后在命令行中输入“
     <strong>
      rz
     </strong>
     ”，选择本地文件并上传。
    </p>
    <p>
     想要删除文件输入：
    </p>
    <pre><code class="language-plain">rm -f 文件名</code></pre>
    <p>
     从服务器下载文件的命令是：
    </p>
    <pre><code class="language-plain">sz 文件名</code></pre>
    我在使用putty的时候rz一直无法完成上传，换用Xshell顺利解决。
    <br/>
    <h2>
     <span style="font-size:24px;">
      <span class="tips" style="margin:0px;padding:0px;color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
       二、
      </span>
      <span style="background-color:rgb(255,255,255);color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;">
       公众号开发信息
      </span>
     </span>
    </h2>
    <span style="font-size:16px;">
     <span class="tips" style="margin:0px;padding:0px;color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
     </span>
    </span>
    <h3 style="margin-top:0px;margin-bottom:0px;padding:0px;line-height:1;color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
     <span style="font-size:18px;">
      1、启用
      <span style="color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
       开发者密码
      </span>
      <span class="tips" style="margin:0px;padding:0px;color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
       (AppSecret)
      </span>
     </span>
    </h3>
    <div>
     <br/>
    </div>
    <p>
     直接扫码完成验证，开启后保存好密码即可。
    </p>
    <h3>
     <span class="tips" style="margin:0px;padding:0px;color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
      <span style="font-size:18px;">
       2、
       <span style="color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
        IP白名单
       </span>
      </span>
     </span>
    </h3>
    <div>
     <span style="font-size:16px;">
      <span class="tips" style="margin:0px;padding:0px;color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
       <span style="color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">
        将自己的云服务器的公网IP地址添加到IP白名单中。
       </span>
      </span>
     </span>
    </div>
    <h2>
     <span style="font-size:24px;">
      三、
      <span style="background-color:rgb(255,255,255);color:rgb(53,53,53);font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;">
       服务器配置
      </span>
     </span>
    </h2>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/96e9088d4bfd304e8edfe3589814217f.png"/>
    </p>
    <p>
     填写完毕后，提交即可完成服务器配置的启用。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f4d494b41534133:2f61727469636c652f64657461696c732f3830373830383336" class_="artid" style="display:none">
 </p>
</div>


