---
layout: post
title: "Securing-a-Linux-server"
date: 2025-03-11 23:22:26 +0800
description: "Port 22| . || |Example:| o*.. ||+++.o . ||BoE o ||** |yesto。"
keywords: "Securing a Linux server"
categories: ['未分类']
tags: ['运维', '服务器', 'Linux']
artid: "146191765"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146191765
    alt: "Securing-a-Linux-server"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146191765
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146191765
cover: https://bing.ee123.net/img/rand?artid=146191765
image: https://bing.ee123.net/img/rand?artid=146191765
img: https://bing.ee123.net/img/rand?artid=146191765
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Securing a Linux server
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     Is your Linux server safe from hackers? Can they get hacked? Freak out about getting your server compromised and getting your data leaked? Take a look at some of the tips you can take to secure and protect your Linux server.
     <br/>
    </p>
    <h3>
     1. SSH security
    </h3>
    <p>
     SSH is like a path to connect you to your Linux server. Of course, you will have to secure the passage. Hackers can access your server the same way you access your server.
     <br/>
    </p>
    <h5>
     SSH Port
    </h5>
    <p>
     Everyone knows that SSH uses the default port 22 to connect to your server. To avoid letting people know that your SSH is open to connection, change the port so hackers that scan port 22 will not know that your server's SSH is active. The best practice is to change your SSH ports to a different port between
     <strong>
      10000 and 32767
     </strong>
     .
     <br/>
    </p>
    <p>
     To change your SSH ports, edit SSH config
    </p>
    <p>
     vi /etc/ssh/sshd_config
    </p>
    <p>
     Find this line
    </p>
    <p>
     #Port 22
    </p>
    <p>
     change port value
    </p>
    <p>
     Port &lt;Random Ports&gt;
    </p>
    <p>
     Don't forget to restart your ssh server to apply the settings.
    </p>
    <p>
     systemctl restart sshd
    </p>
    <p>
    </p>
    <h5>
     2. SSH Keys
    </h5>
    <p>
     Password can easily get bruteforced, trying keying in your Password in
     <a href="https://www.security.org/how-secure-is-my-password/" rel="nofollow" title="How Secure Is My Password? | Password Strength Checker | Security.org">
      How Secure Is My Password? | Password Strength Checker | Security.org
     </a>
     and find out how long does it take for a hacker to crack your password. Scary isn't it?
     <br/>
     <br/>
     Now, how about cracking a 4096 bits SSH key? Good luck with that, Mr. Hackers.
     <br/>
    </p>
    <p>
     To set up an SSH key, use the code to generate a rsa 4096 bit key pair
    </p>
    <p>
     ssh-keygen -t rsa -b 4096
    </p>
    <p>
    </p>
    <p>
     <br/>
     On Windows machine (cmd), this will be
    </p>
    <p>
     C:\Users\evoxt&gt;ssh-keygen -t rsa -b 4096
     <br/>
     Generating public/private rsa key pair.
     <br/>
     Enter file in which to save the key (C:\Users\evoxt/.ssh/id_rsa):
     <br/>
     Created directory 'C:\Users\evoxt/.ssh'.
     <br/>
     Enter passphrase (empty for no passphrase):
     <br/>
     Enter same passphrase again:
     <br/>
     Your identification has been saved in C:\Users\evoxt/.ssh/id_rsa.
     <br/>
     Your public key has been saved in C:\Users\evoxt/.ssh/id_rsa.pub.
     <br/>
     The key fingerprint is:
     <br/>
     SHA256:RSM1LY13KzUzgSziCz1gLKfTSLs3YtgKBtHdQGdX2SQ evoxt@DESKTOP-DU15VE5
     <br/>
     The key's randomart image is:
     <br/>
     +---[RSA 4096]----+
     <br/>
     | . oo+o ooEO.... |
     <br/>
     |. . +o*..o=+B * |
     <br/>
     | . . O + ..+ o = |
     <br/>
     |. = o +. . . |
     <br/>
     |. o o .So . |
     <br/>
     |... = o . |
     <br/>
     |.. o o . |
     <br/>
     | . |
     <br/>
     | |
     <br/>
     +----[SHA256]-----+
     <br/>
     C:\Users\evoxt&gt;
    </p>
    <p>
    </p>
    <p>
     Then, you will have to manually copy the ssh public key to your server ( ~/.ssh/authorized_keys )
     <br/>
    </p>
    <p>
     The formatting will be
    </p>
    <p>
     ssh-rsa &lt;generated_public_key&gt;
    </p>
    <p>
     Example:
    </p>
    <p>
     [root@evoxt .ssh]# cat authorized_keys
     <br/>
     ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDPsDZ5LPRriU4wDjZVzSVdqVzWNlaon2WdOm9v1AsAp+9R0u+dyy0YiXcxhF9rjK4bnLc840pw2AiCiQIEwfXS03jVA3b1q1yqCqyiO3WVf+SGuL9m+GXq9hNsRCHznGhhsoi9VbbED5ECMFYoU6SeVucXntEtfR32C8Hnb1eBCICU5GXrZpIqEgqZrnDEVKzMUS/T4HjGGnT4puQDEg++e33HE3z0vr7PXbDW2RR1kIsRdNS0/BfdlPCXf1lA8aAkKWq49rGO5T5PT4+bCDh7aVCS5ouTfL0qJNpyijBudRvHy4DUuzdqNJLEcR4DYZRSXEQsYc+oK+5mjvcGFNQXbx8bQNYyGtERBfAVuWSTsk8oVwRwbo9YIzkMYKyf1GwJvoggKHCsx+s0gHcAo0LSU7BFXVJMS5NY6Zvw6Cv+z/UUokVkTZ/CkTiTJHhVJjzLkeqmFPWbxEWSWED5RUuCnWTmHcV6Fkc3sbUAwp+qRdQgVcGPYigpa8/dsyLWFTbdK1fe5UUeY5C3UbBqr6bItn42tJCNPcu6YpxtfdxDtq/IDWGRsZltM15FEFCrvBGX8JD1z1H3S+j3GjFJtA1iW1cODOV5l+s0sUS64OnY+o0hpsqs2Mie4Xy/zzKg5C071wHIORML1tZq40ZETmwCUXlwmv4shay5cJJm/Ss3qQ==
    </p>
    <p>
     [root@evoxt ~]#
    </p>
    <p>
    </p>
    <p>
     <br/>
     On a Linux machine, this will be
    </p>
    <p>
     [root@evoxt ~]# ssh-keygen -t rsa -b 4096
     <br/>
     Generating public/private rsa key pair.
     <br/>
     Enter file in which to save the key (/root/.ssh/id_rsa):
     <br/>
     Created directory '/root/.ssh'.
     <br/>
     Enter passphrase (empty for no passphrase):
     <br/>
     Enter same passphrase again:
     <br/>
     Your identification has been saved in /root/.ssh/id_rsa.
     <br/>
     Your public key has been saved in /root/.ssh/id_rsa.pub.
     <br/>
     The key fingerprint is:
     <br/>
     SHA256:eIS1I1I0YXgvjR9igqAipDp0j3D+CYpyqjuJQ02ugZ8 root@evoxt
     <br/>
     The key's randomart image is:
     <br/>
     +---[RSA 4096]----+
     <br/>
     | o*.. |
     <br/>
     |.. .o.+ . |
     <br/>
     |+. ...o++ |
     <br/>
     |=o.+..=++. |
     <br/>
     |* O oo.+S. |
     <br/>
     |+o * . .. |
     <br/>
     |+++.o . |
     <br/>
     |BoE o |
     <br/>
     |** |
     <br/>
     +----[SHA256]-----+
     <br/>
     [root@evoxt ~]#
    </p>
    <p>
    </p>
    <p>
     Then, you can use ssh-copy-id command to install the ssh public key.
    </p>
    <p>
     ssh-copy-id user@your_server_ip
    </p>
    <p>
     [root@evoxt ~]# ssh-copy-id root@xx.xx.xx.xx
     <br/>
     /usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"
     <br/>
     The authenticity of host 'xx.xx.xx.xx (xx.xx.xx.xx)' can't be established.
     <br/>
     ECDSA key fingerprint is SHA256:umf+E/a0OQe8eRmPdYyCM5kE+ZG/FCC2MEEn2G81dGA.
     <br/>
     Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
     <br/>
     /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
     <br/>
     /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
     <br/>
     root@xx.xx.xx.xx's password:
     <br/>
    </p>
    <p>
     Number of key(s) added: 1
     <br/>
    </p>
    <p>
     Now try logging into the machine, with "ssh 'root@xx.xx.xx.xx'"
     <br/>
     and check to make sure that only the key(s) you wanted were added.
     <br/>
    </p>
    <p>
     [root@evoxt ~]#
    </p>
    <p>
     <br/>
    </p>
    <h5>
     SSH from Specific IP
    </h5>
    <p>
     To allow specific IP to access your server through SSH, configure the firewall only to allow a single IP address to go through the firewall to your SSH port.
     <br/>
    </p>
    <p>
     Make sure you have a static IP before doing this. Else you can get locked out of your server.
     <br/>
    </p>
    <h5>
     Disable Password Authentication
    </h5>
    <p>
     Once SSH key authentication has been set up, disable password authentication.
    </p>
    <p>
     sed -i 's/PasswordAuthentication yes/PasswordAuthentication no/g' /etc/ssh/sshd_config
    </p>
    <p>
     Then restart SSH service
    </p>
    <p>
     systemctl restart sshd
    </p>
    <p>
    </p>
    <h3>
     3. Automatic updates
    </h3>
    <p>
     Zero-day exploits are attacks that you can't react to. The best thing next is to protect yourself from N-day attacks once the zero-day exploit has been discovered. To protect yourself from N-day attacks, enable automatic updates. Keep in mind that automatic updates can potentially mess things up. To reduce the chances, enable automatic security only.
     <br/>
    </p>
    <p>
     To enable automatic security updates,
     <a href="https://evoxt.com/guides/enable-automatic-updates-in-linux/" rel="nofollow" title="use this guide">
      use this guide
     </a>
     .
     <br/>
    </p>
    <h3>
     4. Default password
    </h3>
    <p>
     Change your server's default password. Most default passwords are stored in databases and your email inbox. Change them!
     <br/>
    </p>
    <p>
     To change your server's password,
    </p>
    <p>
     passwd &lt;user&gt;
    </p>
    <p>
     [root@TEST ~]# passwd root
     <br/>
     Changing password for user root.
     <br/>
     New password:
     <br/>
     Retype new password:
     <br/>
     passwd: all authentication tokens updated successfully.
     <br/>
     [root@TEST ~]#
    </p>
    <p>
    </p>
    <h3>
     5. Private Networks and VPNs
    </h3>
    <p>
     Set up a server and connect to your servers through a private network. Private network uses private IP to communicate with each other isolating your servers from the public without any exposure to the public.
     <br/>
    </p>
    <p>
     To set up a private network or a VPN. Take a look at
     <a href="https://evoxt.com/one-click-installation/pritunl-one-click-installation/" rel="nofollow" title="Pritunl">
      Pritunl
     </a>
     . They offer many advanced features such as organization management to separate between Private networks, and it also comes with GUI to easily configure the server.
     <br/>
    </p>
    <h3>
     6. Firewall
    </h3>
    <p>
     Set up a firewall to block unnecessary open ports.
     <br/>
    </p>
    <p>
     Most Linux distributions includes Iptables by default.
     <br/>
    </p>
    <p>
     To control your Iptables:
    </p>
    <ul>
     <li>
      CentOS/ Fedora uses FirewallD
     </li>
     <li>
      Ubuntu/ Debian uses UFW.
     </li>
    </ul>
    <p>
    </p>
    <p>
     To take a look for running programs that are currently using specific ports, use netstat
    </p>
    <p>
     netstat -tulpn
    </p>
    <p>
     Also, block ICMP Ping if not required.
     <br/>
     <br/>
     With ICMP blocked, hackers have a harder time knowing your server is currently up and running.
     <br/>
    </p>
    <h3>
     7. Users
    </h3>
    <p>
     Root access is scary! With root access, the hacker can do almost anything to your servers.
     <br/>
    </p>
    <p>
     Because root access is so powerful, hackers tend to try to crack and brute force root accounts. Hackers will usually stay away from other user accounts if you disable root user access due to the lack of permissions.
     <br/>
    </p>
    <p>
     The most common practice is to block root access through SSH.
     <br/>
    </p>
    <p>
     To disable root access through SSH
    </p>
    <p>
     vi /etc/ssh/sshd_config
    </p>
    <p>
     Change PermitRootLogin from yes to no and remove the
     <strong>
      #
     </strong>
     comment if there is any
     <br/>
    </p>
    <p>
     #PermitRootLogin yes
    </p>
    <p>
     to
    </p>
    <p>
     PermitRootLogin no
    </p>
    <p>
     Or use this simple command to disable root login.
    </p>
    <p>
     sed -i 's/#PermitRootLogin yes/PermitRootLogin no/g' /etc/ssh/sshd_config
    </p>
    <p>
     Don't forget to restart your ssh service to apply the settings.
    </p>
    <p>
     systemctl restart sshd
    </p>
    <p>
    </p>
    <p>
     Note: Please make sure you have other users account created with sufficient permission to avoid getting locked out of your server.
     <br/>
    </p>
    <h3>
     8. Backup
    </h3>
    <p>
     This is not quite related to server security. However, I believe this is super important to be included.
     <br/>
    </p>
    <p>
     It is crucial to have a server backup just in case something goes wrong.
     <br/>
    </p>
    <p>
     When a server is hacked, backup files will be your savior.
     <br/>
    </p>
    <p>
     Store your backup offsite, so the hacker cannot modify or alter your backup files.
     <br/>
    </p>
    <p>
     Luckily for you, all servers under Evoxt will be backup weekly on an offsite server. If you are not using Evoxt yet, consider
     <a href="https://evoxt.com/deploy" rel="nofollow" title="upgrading">
      upgrading
     </a>
     !
    </p>
   </div>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f45766f78742f:61727469636c652f64657461696c732f313436313931373635" class_="artid" style="display:none">
 </p>
</div>


