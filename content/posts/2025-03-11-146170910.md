---
layout: post
title: "Spring-Boot-中如何使用-RequestHeader-注解"
date: 2025-03-11 09:50:34 +0800
description: "在 Spring Boot 开发中，HTTP 请求头（Header）是客户端和服务器之间传递元数据的重要方式。通过请求头，客户端可以传递认证信息、内容类型、语言偏好等数据。Spring Boot 提供了 `@RequestHeader` 注解，用于方便地从 HTTP 请求头中提取数据。本文将详细介绍 `@RequestHeader` 注解的使用方法，包括基本用法、默认值处理、多值头处理以及实际应用场景。"
keywords: "Spring Boot 中如何使用 `@RequestHeader` 注解"
categories: ['Java']
tags: ['后端', 'Spring', 'Java', 'Boot']
artid: "146170910"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146170910
    alt: "Spring-Boot-中如何使用-RequestHeader-注解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146170910
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146170910
cover: https://bing.ee123.net/img/rand?artid=146170910
image: https://bing.ee123.net/img/rand?artid=146170910
img: https://bing.ee123.net/img/rand?artid=146170910
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Spring Boot 中如何使用 `@RequestHeader` 注解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h4>
     <a id="Spring_Boot__RequestHeader__6">
     </a>
     学习文章：Spring Boot 中如何使用
     <code>
      @RequestHeader
     </code>
     注解
    </h4>
    <p>
     在 Spring Boot 开发中，HTTP 请求头（Header）是客户端和服务器之间传递元数据的重要方式。通过请求头，客户端可以传递认证信息、内容类型、语言偏好等数据。Spring Boot 提供了
     <code>
      @RequestHeader
     </code>
     注解，用于方便地从 HTTP 请求头中提取数据。
    </p>
    <p>
     本文将详细介绍
     <code>
      @RequestHeader
     </code>
     注解的使用方法，包括基本用法、默认值处理、多值头处理以及实际应用场景。
    </p>
    <hr/>
    <h3>
     <a id="RequestHeader__14">
     </a>
     一、
     <code>
      @RequestHeader
     </code>
     注解简介
    </h3>
    <p>
     <code>
      @RequestHeader
     </code>
     是 Spring MVC 提供的一个注解，用于将 HTTP 请求头中的值绑定到控制器方法的参数上。它的主要作用是从请求头中提取数据，并将其注入到方法参数中。
    </p>
    <h4>
     <a id="_18">
     </a>
     常用属性：
    </h4>
    <ul>
     <li>
      <strong>
       <code>
        value
       </code>
       或
       <code>
        name
       </code>
      </strong>
      ：指定请求头的名称。
     </li>
     <li>
      <strong>
       <code>
        required
       </code>
      </strong>
      ：指示请求头是否必须存在（默认值为
      <code>
       true
      </code>
      ）。
     </li>
     <li>
      <strong>
       <code>
        defaultValue
       </code>
      </strong>
      ：当请求头不存在时使用的默认值。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_25">
     </a>
     二、基本用法
    </h3>
    <h4>
     <a id="1__27">
     </a>
     1. 提取单个请求头
    </h4>
    <p>
     以下示例展示了如何从请求头中提取
     <code>
      User-Agent
     </code>
     信息。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestHeader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeaderController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user-agent"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUserAgent</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"User-Agent: "</span> <span class="token operator">+</span> userAgent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      测试：
     </strong>
     <br/>
     访问
     <code>
      http://localhost:8080/user-agent
     </code>
     ，返回结果如下：
    </p>
    <pre><code>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36
</code></pre>
    <h4>
     <a id="2__51">
     </a>
     2. 处理可选请求头
    </h4>
    <p>
     如果请求头是可选的，可以设置
     <code>
      required = false
     </code>
     ，并提供一个默认值。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/optional-header"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getOptionalHeader</span><span class="token punctuation">(</span>
    <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"Custom-Header"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">"默认值"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> customHeader<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"Custom-Header: "</span> <span class="token operator">+</span> customHeader<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      测试：
     </strong>
    </p>
    <ul>
     <li>
      如果请求中包含
      <code>
       Custom-Header
      </code>
      ，则返回该值。
     </li>
     <li>
      如果请求中不包含
      <code>
       Custom-Header
      </code>
      ，则返回默认值。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_68">
     </a>
     三、提取多个请求头
    </h3>
    <h4>
     <a id="1__RequestHeader__70">
     </a>
     1. 使用多个
     <code>
      @RequestHeader
     </code>
     注解
    </h4>
    <p>
     可以同时提取多个请求头。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/multiple-headers"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMultipleHeaders</span><span class="token punctuation">(</span>
    <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">,</span>
    <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept-Language"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> acceptLanguage<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"User-Agent: "</span> <span class="token operator">+</span> userAgent <span class="token operator">+</span> <span class="token string">", Accept-Language: "</span> <span class="token operator">+</span> acceptLanguage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="2__Map__82">
     </a>
     2. 使用
     <code>
      Map
     </code>
     提取所有请求头
    </h4>
    <p>
     如果需要提取所有请求头，可以使用
     <code>
      Map&lt;String, String&gt;
     </code>
     或
     <code>
      MultiValueMap&lt;String, String&gt;
     </code>
     。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/all-headers"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAllHeaders</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> headers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"Headers: "</span> <span class="token operator">+</span> headers<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      测试：
     </strong>
     <br/>
     访问
     <code>
      http://localhost:8080/all-headers
     </code>
     ，返回结果如下：
    </p>
    <pre><code>Headers: {host=localhost:8080, user-agent=Mozilla/5.0, accept-language=en-US,en;q=0.9}
</code></pre>
    <hr/>
    <h3>
     <a id="_102">
     </a>
     四、处理多值请求头
    </h3>
    <p>
     某些请求头可能包含多个值（如
     <code>
      Accept
     </code>
     头），可以使用
     <code>
      List&lt;String&gt;
     </code>
     或
     <code>
      MultiValueMap&lt;String, String&gt;
     </code>
     来提取。
    </p>
    <h4>
     <a id="_Accept__106">
     </a>
     示例：提取
     <code>
      Accept
     </code>
     头的多个值
    </h4>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/accept-header"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAcceptHeader</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> acceptHeaders<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"Accept Headers: "</span> <span class="token operator">+</span> acceptHeaders<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      测试：
     </strong>
     <br/>
     访问
     <code>
      http://localhost:8080/accept-header
     </code>
     ，返回结果如下：
    </p>
    <pre><code>Accept Headers: [text/html, application/xhtml+xml, application/xml;q=0.9]
</code></pre>
    <hr/>
    <h3>
     <a id="_124">
     </a>
     五、实际应用场景
    </h3>
    <h4>
     <a id="1__126">
     </a>
     1. 认证和授权
    </h4>
    <p>
     在 RESTful API 中，通常使用请求头传递认证信息（如
     <code>
      Authorization
     </code>
     头）。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/auth"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> authToken<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 验证 token 的逻辑</span>
    <span class="token keyword">return</span> <span class="token string">"Auth Token: "</span> <span class="token operator">+</span> authToken<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="2__137">
     </a>
     2. 内容协商
    </h4>
    <p>
     通过
     <code>
      Accept
     </code>
     头实现内容协商，返回客户端期望的内容类型。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/content"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">content</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> acceptHeader<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>acceptHeader<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"{\"message\": \"JSON Response\"}"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Plain Text Response"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="3__151">
     </a>
     3. 国际化
    </h4>
    <p>
     通过
     <code>
      Accept-Language
     </code>
     头实现多语言支持。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/greeting"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">greeting</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept-Language"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> acceptLanguage<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>acceptLanguage<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"zh"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"你好！"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello!"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_167">
     </a>
     六、注意事项
    </h3>
    <ol>
     <li>
      <strong>
       请求头名称区分大小写
      </strong>
      ：HTTP 请求头的名称是大小写不敏感的，但
      <code>
       @RequestHeader
      </code>
      注解中的名称是大小写敏感的。
     </li>
     <li>
      <strong>
       默认值处理
      </strong>
      ：如果请求头不存在且未设置
      <code>
       defaultValue
      </code>
      ，且
      <code>
       required = true
      </code>
      ，则会抛出
      <code>
       MissingRequestHeaderException
      </code>
      。
     </li>
     <li>
      <strong>
       多值头的处理
      </strong>
      ：对于多值请求头，使用
      <code>
       List&lt;String&gt;
      </code>
      或
      <code>
       MultiValueMap&lt;String, String&gt;
      </code>
      来提取。
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="_175">
     </a>
     七、总结
    </h3>
    <p>
     通过本文的学习，你应该掌握了以下内容：
    </p>
    <ol>
     <li>
      如何使用
      <code>
       @RequestHeader
      </code>
      注解提取单个请求头。
     </li>
     <li>
      如何处理可选请求头和默认值。
     </li>
     <li>
      如何提取多个请求头或所有请求头。
     </li>
     <li>
      如何处理多值请求头。
     </li>
     <li>
      <code>
       @RequestHeader
      </code>
      的实际应用场景和注意事项。
     </li>
    </ol>
    <p>
     <code>
      @RequestHeader
     </code>
     是 Spring Boot 中处理 HTTP 请求头的强大工具，合理使用可以显著提升代码的可读性和灵活性。希望本文对你有所帮助，欢迎在评论区分享你的学习心得和问题！
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34363134363731382f:61727469636c652f64657461696c732f313436313730393130" class_="artid" style="display:none">
 </p>
</div>


