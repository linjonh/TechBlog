---
layout: post
title: "大数据学习64-大数据集群的高可用HA"
date: 2025-03-13 14:48:56 +0800
description: "&&&"
keywords: "大数据学习（64）- 大数据集群的高可用（HA）"
categories: ['未分类']
tags: ['学习', 'Yarn', 'Hdfs', 'Ha']
artid: "146226543"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146226543
    alt: "大数据学习64-大数据集群的高可用HA"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146226543
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146226543
cover: https://bing.ee123.net/img/rand?artid=146226543
image: https://bing.ee123.net/img/rand?artid=146226543
img: https://bing.ee123.net/img/rand?artid=146226543
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     大数据学习（64）- 大数据集群的高可用（HA）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     &amp;&amp;
     <a href="https://so.csdn.net/so/search?q=%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0&amp;spm=1001.2101.3001.7020" title="大数据学习">
      大数据学习
     </a>
     &amp;&amp;
    </p>
    <h6 id="%F0%9F%94%A5%E7%B3%BB%E5%88%97%E4%B8%93%E6%A0%8F%EF%BC%9A%20%F0%9F%91%91%E5%93%B2%E5%AD%A6%E8%AF%AD%E5%BD%95%3A%20%E6%89%BF%E8%AE%A4%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A0%E7%9F%A5%EF%BC%8C%E4%B9%83%E6%98%AF%E5%BC%80%E5%90%AF%E6%99%BA%E6%85%A7%E7%9A%84%E5%A4%A7%E9%97%A8%F0%9F%92%96%E5%A6%82%E6%9E%9C%E8%A7%89%E5%BE%97%E5%8D%9A%E4%B8%BB%E7%9A%84%E6%96%87%E7%AB%A0%E8%BF%98%E4%B8%8D%E9%94%99%E7%9A%84%E8%AF%9D%EF%BC%8C%E8%AF%B7%E7%82%B9%E8%B5%9E%F0%9F%91%8D%2B%E6%94%B6%E8%97%8F%E2%AD%90%EF%B8%8F%2B%E7%95%99%E8%A8%80%F0%9F%93%9D%E6%94%AF%E6%8C%81%E4%B8%80%E4%B8%8B%E5%8D%9A%E4%B8%BB%E5%93%A6%F0%9F%A4%9E" name="%F0%9F%94%A5%E7%B3%BB%E5%88%97%E4%B8%93%E6%A0%8F%EF%BC%9A%20%F0%9F%91%91%E5%93%B2%E5%AD%A6%E8%AF%AD%E5%BD%95%3A%20%E6%89%BF%E8%AE%A4%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A0%E7%9F%A5%EF%BC%8C%E4%B9%83%E6%98%AF%E5%BC%80%E5%90%AF%E6%99%BA%E6%85%A7%E7%9A%84%E5%A4%A7%E9%97%A8%F0%9F%92%96%E5%A6%82%E6%9E%9C%E8%A7%89%E5%BE%97%E5%8D%9A%E4%B8%BB%E7%9A%84%E6%96%87%E7%AB%A0%E8%BF%98%E4%B8%8D%E9%94%99%E7%9A%84%E8%AF%9D%EF%BC%8C%E8%AF%B7%E7%82%B9%E8%B5%9E%F0%9F%91%8D%2B%E6%94%B6%E8%97%8F%E2%AD%90%EF%B8%8F%2B%E7%95%99%E8%A8%80%F0%9F%93%9D%E6%94%AF%E6%8C%81%E4%B8%80%E4%B8%8B%E5%8D%9A%E4%B8%BB%E5%93%A6%F0%9F%A4%9E">
     <a name="t1">
     </a>
     🔥系列专栏： 👑哲学语录: 用力所能及，改变世界。
     <br/>
     💖如果觉得博主的文章还不错的话，请点赞👍+收藏⭐️+留言📝支持一下博主哦🤞
    </h6>
    <hr/>
    <h4>
     🍋一、大数据集群高可用实现方式
    </h4>
    <ol>
     <li>
      <p id="">
       <strong>
        多节点冗余
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         NameNode/ResourceManager高可用
        </strong>
        ：在Hadoop生态系统中，HDFS的NameNode和YARN的ResourceManager都采用了主备架构，通过设置两个节点，一个处于Active状态，另一个处于Standby状态，确保在主节点故障时能够迅速切换到备节点，继续提供服务。
       </li>
       <li>
        <strong>
         数据节点冗余
        </strong>
        ：在HDFS中，数据会被分割成多个块，并存储在不同的DataNode上，实现数据的冗余存储。即使某个DataNode出现故障，数据仍然可以从其他DataNode上恢复。
       </li>
      </ul>
     </li>
     <li>
      <p id="">
       <strong>
        数据复制和冗余
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         数据复制
        </strong>
        ：大数据集群通常会在不同的节点上复制数据，以提高数据的可用性和容错性。例如，HDFS默认将数据块复制三份，存储在集群中的不同节点上。
       </li>
       <li>
        <strong>
         元数据冗余
        </strong>
        ：对于元数据，如HDFS的NameNode和YARN的ResourceManager中的信息，也会进行冗余存储，确保在主节点故障时，备节点能够迅速接管并恢复元数据。
       </li>
      </ul>
     </li>
     <li>
      <p id="">
       <strong>
        负载均衡
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         任务分发
        </strong>
        ：大数据集群通常会使用负载均衡器来分发请求和任务，确保各个节点的负载均衡，防止单个节点被过度使用。
       </li>
       <li>
        <strong>
         数据分发
        </strong>
        ：在HDFS中，数据块的分布也是负载均衡的一部分，通过合理的数据块放置策略，确保各个DataNode的存储负载相对均衡。
       </li>
      </ul>
     </li>
     <li>
      <p id="">
       <strong>
        容错性
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         故障检测
        </strong>
        ：集群应具备故障检测机制，能够及时发现并报告节点或组件的故障。
       </li>
       <li>
        <strong>
         自动恢复
        </strong>
        ：在检测到故障后，集群应具备自动恢复功能，能够自动重启故障节点或组件，或将其任务转移到其他节点上。
       </li>
      </ul>
     </li>
     <li>
      <p id="">
       <strong>
        自动扩展
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         动态扩展
        </strong>
        ：集群应具备自动扩展功能，以便在需要时动态增加节点来应对工作负载的增加。
       </li>
       <li>
        <strong>
         弹性伸缩
        </strong>
        ：通过自动化的伸缩策略，集群可以根据实时的负载情况，动态增加或减少节点数量，以实现弹性的资源分配。
       </li>
      </ul>
     </li>
     <li>
      <p id="">
       <strong>
        监控和管理
       </strong>
       ：
      </p>
      <ul>
       <li>
        <strong>
         监控工具
        </strong>
        ：集群需要监控和管理工具，以便管理员能够实时监视系统的性能、健康状况和异常情况。
       </li>
       <li>
        <strong>
         告警机制
        </strong>
        ：当系统出现异常或潜在故障时，监控工具应及时发出告警，以便管理员能够迅速采取措施解决问题。
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     🍋二、HDFS的HA
    </h4>
    <p id="">
     <strong>
      核心组件与角色
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       NameNode（NN）
      </strong>
      ：负责客户端请求的响应以及元数据的管理（如文件的创建、删除、重命名等）。
     </li>
     <li>
      <strong>
       Secondary NameNode（SNN）
      </strong>
      ：在Hadoop 1.x版本中，起到冷备份的作用，当NameNode挂掉时需要手工启动。
     </li>
     <li>
      <strong>
       JournalNode（JN）
      </strong>
      ：在Hadoop 2.x版本中引入，用于Active NN和Standby NN间的数据同步。
     </li>
     <li>
      <strong>
       Zookeeper集群
      </strong>
      ：用于选举Active NN和Standby NN。
     </li>
     <li>
      <strong>
       ZKFC（ZooKeeper Failover Controller）
      </strong>
      ：监控NN的健康状态，并触发主备切换。
     </li>
    </ul>
    <p id="">
     <strong>
      架构与机制
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       双NameNode架构
      </strong>
      ：设置两个NameNode，一个处于Active状态，另一个处于Standby状态。
     </li>
     <li>
      <strong>
       元数据同步
      </strong>
      ：Active NN将编辑日志（Editlog）写入共享存储（如JournalNode集群），Standby NN从共享存储中读取Editlog并应用，以保持与Active NN的元数据同步。
     </li>
     <li>
      <strong>
       自动故障转移
      </strong>
      ：当Active NN出现故障时，Zookeeper集群会选举出一个新的Active NN，ZKFC负责监控NN的状态并触发切换。
     </li>
    </ul>
    <h4>
     🍋三、YARN的HA
    </h4>
    <p id="">
     <strong>
      核心组件与角色
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       ResourceManager（RM）
      </strong>
      ：负责接收客户端的任务请求，进行资源的分配与调度，启动和监控ApplicationMaster（AM）。
     </li>
     <li>
      <strong>
       NodeManager（NM）
      </strong>
      ：管理容器（Container）的生命周期，与RM协同工作，完成任务的执行。
     </li>
     <li>
      <strong>
       Zookeeper集群
      </strong>
      ：用于选举Active RM和Standby RM。
     </li>
     <li>
      <strong>
       ZKFC
      </strong>
      ：在YARN中，ZKFC是RM进程的一个线程，用于监控RM的健康状态并触发主备切换。
     </li>
    </ul>
    <p id="">
     <strong>
      架构与机制
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       双ResourceManager架构
      </strong>
      ：设置两个RM，一个处于Active状态，另一个处于Standby状态。
     </li>
     <li>
      <strong>
       作业信息同步
      </strong>
      ：Active RM将作业信息存储在共享存储（如Zookeeper）中，Standby RM从共享存储中读取作业信息，以保持与Active RM的作业信息同步。
     </li>
     <li>
      <strong>
       自动故障转移
      </strong>
      ：当Active RM出现故障时，Zookeeper集群会选举出一个新的Active RM，ZKFC负责监控RM的状态并触发切换。备RM升主后，能够恢复故障发生时上层应用运行的状态。
     </li>
    </ul>
    <p>
     在大数据环境中，高可用性是一个至关重要的设计目标。通过采用
     <strong>
      <span style="color:#be191c">
       主备切换、冗余存储、分布式部署、弹性伸缩和负载均衡等技术手段
      </span>
     </strong>
     ，可以确保大数据系统的各个关键部分都具备高可用性，从而在面对故障时能够持续、稳定地运行。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36313030363236322f:61727469636c652f64657461696c732f313436323236353433" class_="artid" style="display:none">
 </p>
</div>


