---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37343737393039342f:61727469636c652f64657461696c732f313433363130353534"
layout: post
title: Cè¯­è¨€BOOSç¯‡è´ªåƒè›‡-ä¸€åœºä»£ç ä¸é€»è¾‘çš„è¾ƒé‡å«æ¸¸æˆä»£ç 
date: 2024-11-12 11:30:00 +0800
description: "è´ªåƒè›‡åŸºæœ¬ä¸Šæ˜¯æˆ‘ä»¬å®¶å–»æˆ·æ™“çš„å°æ¸¸æˆäº†ï¼Œåœ¨ç‹ç‹¸è¿˜åœ¨æ˜¯å°"
keywords: cè¯­è¨€ç¼–å†™è´ªåƒè›‡å°æ¸¸æˆæ¸¸æˆé€»è¾‘-ç™¾åº¦ç»éªŒ
categories: ['C']
tags: ['é“¾è¡¨', 'è´ªåƒè›‡', 'æ¸¸æˆç¨‹åº', 'æ•°æ®ç»“æ„', 'C']
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143610554
    alt: Cè¯­è¨€BOOSç¯‡è´ªåƒè›‡-ä¸€åœºä»£ç ä¸é€»è¾‘çš„è¾ƒé‡å«æ¸¸æˆä»£ç 
artid: 143610554
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143610554
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143610554
---

# ã€Cè¯­è¨€BOOSç¯‡ã€‘è´ªåƒè›‡ ä¸€åœºä»£ç ä¸é€»è¾‘çš„è¾ƒé‡ï¼ˆå«æ¸¸æˆä»£ç ï¼‰

![](https://i-blog.csdnimg.cn/direct/1a55bdd6bce84938a347e9534139b2d2.gif)

ğŸï¸ä¸“æ ï¼š
[ã€Cè¯­è¨€bossç¯‡ã€‘](https://blog.csdn.net/m0_74779094/category_12825145.html?spm=1001.2014.3001.5482 "ã€Cè¯­è¨€bossç¯‡ã€‘")

ğŸŒ…ä¸»é¡µï¼š
[fç‹oç‹¸x](https://blog.csdn.net/m0_74779094?type=blog "fç‹oç‹¸x")

---

**ç›®å½•**

[ä¸€ã€ æ¸¸æˆæ•ˆæœå±•ç¤º](#%E4%B8%80%E3%80%81%20%E6%B8%B8%E6%88%8F%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA)

[äºŒã€ æ¸¸æˆé€»è¾‘å®ç°åˆ†æ](#%E4%BA%8C%E3%80%81%20%E6%B8%B8%E6%88%8F%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)

[2.1 æ¸¸æˆä¸»ä½“é€»è¾‘](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.1%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E4%BD%93%E9%80%BB%E8%BE%91)

[2.2 æ¸¸æˆå®ç°åˆ†æ](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.2%20%E6%B8%B8%E6%88%8F%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)

[ä¸‰ã€è´ªåƒè›‡æ¸¸æˆè®¾è®¡](#%E4%B8%89%E3%80%81%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1)

[3.1 å‰æœŸå‡†å¤‡å·¥ä½œ](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.1%20%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C)

[3.2 æ•°æ®ç»“æ„è®¾è®¡](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.2%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1)

[3.3 åœ°å›¾ã€è›‡èº«ã€é£Ÿç‰©è®¾è®¡](#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.3%20%E5%9C%B0%E5%9B%BE%E3%80%81%E8%9B%87%E8%BA%AB%E3%80%81%E9%A3%9F%E7%89%A9%E8%AE%BE%E8%AE%A1)

[3.4 æ¸¸æˆä¸»é€»è¾‘](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.4%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E9%80%BB%E8%BE%91)

[3.5 èœå•](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.5%20%E8%8F%9C%E5%8D%95)

[3.6 æ¸¸æˆå¼€å§‹](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6%20%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B)

[3.6.1 æ‰“å°æ¬¢è¿ä¿¡æ¯](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6.1%20%E6%89%93%E5%8D%B0%E6%AC%A2%E8%BF%8E%E4%BF%A1%E6%81%AF)

[3.6.2 ç»˜åˆ¶åœ°å›¾](#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.2%20%E7%BB%98%E5%88%B6%E5%9C%B0%E5%9B%BE)

[3.6.3 åˆå§‹åŒ–è›‡](#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.3%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%9B%87)

[3.6.4åˆ›å»ºé£Ÿç‰©](#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.4%E5%88%9B%E5%BB%BA%E9%A3%9F%E7%89%A9)

[3.7 æ¸¸æˆè¿è¡Œ](#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.7%20%E6%B8%B8%E6%88%8F%E8%BF%90%E8%A1%8C)

[3.7.1 æ‰“å°å¸®åŠ©ä¿¡æ¯](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.1%20%E6%89%93%E5%8D%B0%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF)

[3.7.2 è›‡èº«ç§»åŠ¨](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.2%20%E8%9B%87%E8%BA%AB%E7%A7%BB%E5%8A%A8)

[3.7.2.1 åˆ¤æ–­ä¸‹ä¸€æ­¥æ˜¯å¦æœ‰é£Ÿç‰©](#3.7.2.1%20%E5%88%A4%E6%96%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E6%98%AF%E5%90%A6%E6%9C%89%E9%A3%9F%E7%89%A9)

[3.7.2.2 åƒåˆ°é£Ÿç‰©](#3.7.2.2%20%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9)

[3.7.2.3Â æ­£å¸¸èµ°ä¸‹ä¸€æ­¥ï¼ˆæ²¡åƒåˆ°é£Ÿç‰©ï¼‰](#3.7.2.3%C2%A0%E6%AD%A3%E5%B8%B8%E8%B5%B0%E4%B8%8B%E4%B8%80%E6%AD%A5%EF%BC%88%E6%B2%A1%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9%EF%BC%89)

[3.7.2.4Â æ£€æµ‹æ˜¯å¦æ’å¢™](#3.7.2.4%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E6%92%9E%E5%A2%99)

[3.7.2.5Â æ£€æµ‹æ˜¯å¦å’¬åˆ°è‡ªå·±](#3.7.2.5%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E5%92%AC%E5%88%B0%E8%87%AA%E5%B7%B1)

[3.8 æ¸¸æˆç»“æŸ](#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.8%20%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F)

[3.8.1 ä¿å­˜åˆ†æ•°](#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.8.1%20%E4%BF%9D%E5%AD%98%E5%88%86%E6%95%B0)

[å››ã€ç»“è¯­](#%E5%9B%9B%E3%80%81%E7%BB%93%E8%AF%AD%C2%A0)

---

è´ªåƒè›‡åŸºæœ¬ä¸Šæ˜¯æˆ‘ä»¬å®¶å–»æˆ·æ™“çš„å°æ¸¸æˆäº†ï¼Œåœ¨ç‹ç‹¸è¿˜åœ¨æ˜¯å°å­¦å¹¼å„¿å›­æ—¶æœŸçš„æ—¶å€™å°±ç»å¸¸ç©ï¼Œåæ¥åˆ°äº†åˆä¸­éšç€äº’è”ç½‘çš„å‘å±•ï¼Œã€Šè´ªåƒè›‡å¤§ä½œæˆ˜ã€‹è¿™ä¸ªæ¸¸æˆåˆåœ¨ä¼—å¤šç½‘æ¸¸ä¸­è„±é¢–è€Œå‡ºï¼Œå› æ­¤èº«ä¸ºå¤§å­¦ç”Ÿçš„ç‹ç‹¸ï¼Œæˆ‘å†³å®šç”¨Cè¯­è¨€æ¥å®ç°è¿™ä¸ªç»å…¸çš„å°æ¸¸æˆâ€”â€”è´ªåƒè›‡

## ä¸€ã€ æ¸¸æˆæ•ˆæœå±•ç¤º

åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥çœ‹ç»“æœ

![](https://i-blog.csdnimg.cn/direct/f3177a469d454c7aace17586b9bc7895.gif)

## äºŒã€ æ¸¸æˆé€»è¾‘å®ç°åˆ†æ

### 2.1 æ¸¸æˆä¸»ä½“é€»è¾‘

![](https://i-blog.csdnimg.cn/direct/a348e93cb3bf4f09abe0489ea638b021.png)

### 2.2 æ¸¸æˆå®ç°åˆ†æ

ä¸éš¾çœ‹å‡ºæ¸¸æˆä¸»é€»è¾‘å°±ä¸‰ä¸ªå‡½æ•°ï¼ŒGameStart ã€GameRun ã€GameEndã€‚ä»–ä»¬åˆ†åˆ«è´Ÿè´£äº†æ¸¸æˆå‰çš„å‡†å¤‡å·¥ä½œã€æ¸¸æˆè¿è¡Œæ—¶è´ªåƒè›‡çš„ç§»åŠ¨å’Œåˆ¤æ–­æ˜¯å¦ç»“æŸæ¸¸æˆã€æ¸¸æˆç»“æŸæ—¶çš„å–„åå·¥ä½œï¼Œé‚£æˆ‘ä»¬è¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å§‹

![](https://i-blog.csdnimg.cn/direct/dc29a353c204421a9e3a442a5b0d68d2.jpeg)

## ä¸‰ã€è´ªåƒè›‡æ¸¸æˆè®¾è®¡

### 3.1 å‰æœŸå‡†å¤‡å·¥ä½œ

å¦‚æœæˆ‘ä»¬æƒ³æŠŠè´ªåƒè›‡å°æ¸¸æˆå¼„å¾—å¥½çœ‹ä¸€äº›å°±éœ€è¦ä¸€äº›è°ƒèŠ‚é¢œè‰²çš„å‡½æ•°ï¼Œå¹¶ä¸”æ‰“å°è›‡èº«ã€å¢™ä½“éƒ½ç”¨åˆ°äº†ç‰¹æ®Šçš„å­—ç¬¦ï¼Œå› æ­¤éœ€è¦å…ˆæŠŠä¿®æ”¹é€‚é…å™¨åˆ°ä¸­æ–‡çŠ¶æ€ï¼Œåé¢æˆ‘ä»¬ç”Ÿæˆé£Ÿç‰©çš„æ—¶å€™éœ€è¦çš„åæ ‡ä¹Ÿæ˜¯éšæœºçš„ï¼Œå› æ­¤è¿˜è¦å‡†å¤‡ç”Ÿæˆéšæœºæ•°

```cpp
int main()
{
	//ä¿®æ”¹é€‚é…å™¨åˆ°ä¸­æ–‡çŠ¶æ€
	setlocale(LC_ALL, "");
	//è®¾ç½®éšæœºæ•°
	srand((unsigned)time(NULL));
	test();
	return 0;
}
```

```cpp
void color(int c)
{
	SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), c); //é¢œè‰²è®¾ç½®
}

```

è¿™é‡Œæ˜¯é¢œè‰²çš„åè¿›åˆ¶å¯¹ç…§è¡¨ï¼š

![](https://i-blog.csdnimg.cn/direct/ecdec049e9d64c308d0570e8de34cc5f.png)

è¿™æ ·æˆ‘ä»¬åé¢åªéœ€è¦åœ¨æ‰“å°å‰è®¾ç½®å¥½æƒ³è¦çš„é¢œè‰²å°±è¡Œäº†ï¼Œæƒ³äº†è§£çš„æœ‹å‹å¯ä»¥å»ï¼š
[SetConsoleTextAttribute\_360ç™¾ç§‘](https://baike.so.com/doc/4657682-4871014.html "SetConsoleTextAttribute_360ç™¾ç§‘")

æˆ‘ä»¬è¿˜éœ€è¦è·å–æ¡ˆä»¶æƒ…å†µæ¥åˆ¤æ–­å½“å‰è›‡è¿è¡Œçš„çŠ¶æ€

```cpp
//ç›‘æµ‹æŒ‰é”®
#define KEY_PRESS(VK)  ( (GetAsyncKeyState(VK) & 0x1) ? 1 : 0 )
```

å°è£…ä¸€ä¸ªè®¾ç½®å…‰æ ‡ä½ç½®çš„å‡½æ•°æ–¹ä¾¿æ“ä½œ

```cpp
void SetPos(int x, int y)
{
	//è·å¾—è®¾å¤‡å¥æŸ„
	HANDLE hanlde = GetStdHandle(STD_OUTPUT_HANDLE);
	//æ ¹æ®å¥æŸ„è®¾ç½®å…‰æ ‡çš„ä½ç½®
	COORD pos = { x, y };
	SetConsoleCursorPosition(hanlde, pos);
}
```

å‡†å¤‡å·¥ä½œå®Œäº†ä¹‹åæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è®¾è®¡ä¸‹é¢çš„å‡½æ•°äº†

```cpp

//é¢œè‰²è®¾ç½®
void color(int c);

//æ‰“å°åˆ†æ•°
void PrintScore(pSnake ps);

//æ¸¸æˆå¼€å§‹å‰çš„åˆå§‹åŒ–
void GameStart(pSnake ps);

//è®¾ç½®å…‰æ ‡ä½ç½®ä¿¡æ¯
void SetPos(int x, int y);

//æ‰“å°æ¬¢è¿ä¿¡æ¯
void WelcomeToGame();

//ç»˜åˆ¶åœ°å›¾
void CreateMap();

//åˆå§‹åŒ–è›‡
void InitSnake(pSnake ps);

//åˆ›å»ºé£Ÿç‰©
void CreateFoods(pSnake ps);

//æ¸¸æˆè¿è¡Œå‡½æ•°
void GameRun(pSnake ps);

//æ‰“å°å¸®åŠ©ä¿¡æ¯
void PrintHelpInfo();

//è›‡ç§»åŠ¨çš„å‡½æ•°ï¼Œä¸€æ¬¡ç§»åŠ¨ä¸€æ­¥
void SnakeMove(pSnake ps);

//åˆ¤æ–­ä¸‹ä¸€æ­¥æ˜¯å¦æœ‰é£Ÿç‰©
int NextIsFood(pSnake ps, pSnakeNode pnext);

//åƒé£Ÿç‰©
void EatFood(pSnake ps, pSnakeNode pnext);

//æ²¡åƒåˆ°é£Ÿç‰©æ­£å¸¸èµ°ä¸€æ­¥
void NotEatFood(pSnake ps, pSnakeNode pnext);

//æ£€æµ‹æ˜¯å¦æ’å¢™
void KillByWall(pSnake ps);

//æ£€æµ‹æ˜¯å¦æ’åˆ°è‡ªå·±
void KillBySelf(pSnake ps);

//å–„åå·¥ä½œ
void  GameEnd(pSnake ps);

//ä¿å­˜åˆ†æ•°
void SaveScore(pSnake ps);
```

### 3.2 æ•°æ®ç»“æ„è®¾è®¡

è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ä¸€ä¸ªé“¾è¡¨æ¥ç®¡ç†çš„è›‡èº«ï¼Œå› ä¸ºåœ¨æ¸¸æˆè¿‡ç¨‹ä¸­ï¼Œè´ªåƒè›‡æ¯åƒä¸€ä¸ªé£Ÿç‰©éƒ½ä¼šå¢é•¿ä¸€ä¸ªè›‡èº«èŠ‚ç‚¹ï¼Œæ­£å¥½ç”¨é“¾è¡¨èŠ‚ç‚¹æ¥æ§åˆ¶è›‡çš„é•¿åº¦

```cpp
//è›‡èº«ç»“æ„ä½“çš„å®šä¹‰
typedef struct SnakeNode
{
	int x;
	int y;
	struct SnakeNode* next;
}SnakeNode,* pSnakeNode;
```

å¦å¤–æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥ç®¡ç†è´ªåƒè›‡æ¸¸æˆçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è›‡èº«ã€é£Ÿç‰©ã€æ€»åˆ†ã€å½“å‰åˆ†æ•°ã€å½“å‰ä¸€ä¸ªé£Ÿç‰©çš„åˆ†æ•°ã€è›‡çš„é€Ÿåº¦ã€å½“å‰æ¸¸æˆçŠ¶æ€å’Œå½“å‰è›‡è¿åŠ¨çŠ¶æ€ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰

```cpp
//è´ªåƒè›‡ç»“æ„ä½“å®šä¹‰
typedef struct Snake
{
	pSnakeNode pSnake; //ç»´æŠ¤è›‡çš„æŒ‡é’ˆï¼ŒæŒ‡å‘è›‡å¤´
	pSnakeNode pFood; //æŒ‡å‘é£Ÿç‰©çš„æŒ‡é’ˆ
	int Score;//æ€»åˆ†
	int ScoreMax[4];//æœ€é«˜åˆ†
	int ScoreSize;//æœ€é«˜åˆ†æœ‰æ•ˆä¸ªæ•°
	int FoodWeight;//æ¯ä¸ªé£Ÿç‰©çš„åˆ†æ•°
	int SleepTime;//è›‡çš„é€Ÿåº¦
	enum GAME_STATUS status;//æ¸¸æˆå½“å‰çŠ¶æ€
	enum SNAKE_STATUS dir;//è›‡å½“å‰èµ°çš„æ–¹å‘
}Snake,* pSnake;
```

è¿™é‡Œè›‡çš„è¿åŠ¨çŠ¶æ€å’Œæ¸¸æˆå½“å‰çŠ¶æ€éƒ½å¯ä»¥ä¸€ä¸€åˆ—ä¸¾å‡ºæ¥ï¼Œæ‰€ä»¥ä»–ä¿©å¯ä»¥ä½¿ç”¨æšä¸¾

```cpp
//æ¸¸æˆçŠ¶æ€æšä¸¾
enum GAME_STATUS
{
	OK = 1, //æ¸¸æˆæ­£å¸¸è¿è¡ŒçŠ¶æ€
	ESC, //æŒ‰escé”®ç›˜é€€å‡ºæ¸¸æˆï¼Œæ­£å¸¸é€€å‡º
	KILL_BY_WALL,//æ’å¢™é€€å‡ºæ¸¸æˆ
	KILL_BY_SELF,//å’¬åˆ°è‡ªå·±é€€å‡ºæ¸¸æˆ
};

//è›‡å½“å‰èµ°çš„æ–¹å‘æšä¸¾
enum SNAKE_STATUS
{
	UP=1,//å‘ä¸Š
	DOWN,//å‘ä¸‹
	LEFT,//å‘å·¦
	RIGHT//å‘å³
};
```

### 3.3 åœ°å›¾ã€è›‡èº«ã€é£Ÿç‰©è®¾è®¡

ç”¨â€œÂ â–  â€è¡¨ç¤ºåœ°å›¾è¾¹ç•Œã€â€œÂ â˜… â€è¡¨ç¤ºä¸€ä¸ªé£Ÿç‰©èŠ‚ç‚¹ã€â€œÂ â— â€è¡¨ç¤ºè›‡å¤´ã€â€œÂ â—‹ â€è¡¨ç¤ºè›‡èº«

![](https://i-blog.csdnimg.cn/direct/fa27b71cbb574db884d48e2cadda53c5.png)

### 3.4 æ¸¸æˆä¸»é€»è¾‘

```cpp
void test()
{
	//è®¾ç½®æ§åˆ¶å°ä¿¡æ¯ï¼Œçª—å£å¤§å°ï¼Œçª—å£å
	system("mode con cols=100 lines=30");
	system("title:è´ªåƒè›‡");
	//éšè—å…‰æ ‡
	HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);
	CONSOLE_CURSOR_INFO CursorInfo;
	GetConsoleCursorInfo(handle, &CursorInfo);//è·å–æ§åˆ¶å°å…‰æ ‡ä¿¡æ¯
	CursorInfo.bVisible = false;
	SetConsoleCursorInfo(handle, &CursorInfo);

	Snake snake = { 0 };
	int input = 0;
	do 
	{

		system("cls");
		menu();
		scanf("%d", &input);
		switch (input)
		{
		case 1:
			game(&snake);
			SetPos(15, 13);
			printf("å†æ¥äº¿å§~");
			SetPos(15, 14);
			system("pause");
			break;
		case 2:
			PrintScore(&snake);
			break;
		case 0:
			system("cls");
			color(15);//å­—ä½“é¢œè‰² ç™½ 
			SetPos(40, 13);
			printf("å¤å¾·æ‹œæ‹œ~~");
			SetPos(0, 27);
			break;
		default:
			SetPos(40, 18);
			printf("è¾“å…¥é”™è¯¯è¯·é‡æ–°è¾“å…¥");
		}
	} while (input);

}

void game(pSnake ps)
{
	GameStart(ps);//æ¸¸æˆå¼€å§‹å‰çš„åˆå§‹åŒ–
	GameRun(ps);//æ¸¸æˆè¿è¡Œ
	GameEnd(ps);//æ¸¸æˆç»“æŸåçš„å–„åå·¥ä½œ
}

```

### 3.5 èœå•

```cpp
void menu()
{
	color(6);//å¢™ä½“é¢œè‰² æ£• 
	SetPos(36, 11);
	int i = 0;
	//ä¸Šè¾¹æ¡†
	for (i = 0; i < 28; i += 2)
	{
		wprintf(L"%lc", WALL);
	}
	//ä¸‹è¾¹æ¡†
	SetPos(36, 19);
	for (i = 0; i < 28; i += 2)
	{
		wprintf(L"%lc", WALL);
	}
	//å·¦è¾¹æ¡†
	for (i = 1; i < 8; i++)
	{
		SetPos(36, i + 11);
		wprintf(L"%lc", WALL);
	}
	//å³è¾¹æ¡†
	for (i = 1; i < 8; i++)
	{
		SetPos(62, i + 11);
		wprintf(L"%lc", WALL);
	}
	SetPos(40, 13);
	color(15);//å­—ä½“é¢œè‰² ç™½ 
	printf("æ¬¢è¿æ¥åˆ°è´ªåƒè›‡å°æ¸¸æˆ");
	SetPos(40, 14);
	printf("1. å¼€å§‹æ¸¸æˆ");
	SetPos(40, 15);
	printf("2. æŸ¥çœ‹æœ€é«˜åˆ†");
	SetPos(40, 16);
	printf("0. é€€å‡ºæ¸¸æˆ");
	SetPos(40, 17);
	printf("è¯·é€‰æ‹©ï¼š");


}
```

### 3.6 æ¸¸æˆå¼€å§‹

```cpp
void GameStart(pSnake ps)
{

	//æ‰“å°æ¬¢è¿ä¿¡æ¯
	WelcomeToGame();

	//ç»˜åˆ¶åœ°å›¾
	CreateMap();

	//åˆå§‹åŒ–è›‡
	InitSnake(ps);

	//åˆ›å»ºé£Ÿç‰©
	CreateFoods(ps);

}
```

#### 3.6.1 æ‰“å°æ¬¢è¿ä¿¡æ¯

æ‰“å°ä¸€äº›åˆå§‹ä¿¡æ¯æ–¹ä¾¿ç©å®¶å‚è€ƒ

```cpp
void WelcomeToGame()
{
	system("cls");
	SetPos(40, 13);
	printf("æ¬¢è¿æ¥åˆ°è´ªåƒè›‡å°æ¸¸æˆ");
	SetPos(44, 26);
	system("pause");
	system("cls");
	SetPos(20, 13);
	printf("ç”¨ â†‘ . â†“ . â† . â†’ æ¥æ§åˆ¶è›‡çš„ç§»åŠ¨ï¼ŒF3æ˜¯åŠ é€Ÿï¼ŒF4æ˜¯å‡é€Ÿ");
	SetPos(20, 14);
	printf("åŠ é€Ÿèƒ½å¾—åˆ°æ›´é«˜çš„åˆ†æ•°");
	SetPos(44, 26);
	system("pause");
	system("cls");
}
```

#### 3.6.2 ç»˜åˆ¶åœ°å›¾

```cpp
void CreateMap()
{
	int i = 0;
	//æ§åˆ¶å°ä¸»æœº 
	//ä¸Šè¾¹æ¡†
	color(6);//å¢™ä½“é¢œè‰² æ£• 
	SetPos(0, 0);
	for (i = 0; i < 58; i+=2)
	{
		wprintf(L"%lc", WALL);
	}
	//ä¸‹è¾¹æ¡†
	SetPos(0, 26);
	for (i = 0; i < 58; i += 2)
	{
		wprintf(L"%lc", WALL);
	}
	//å·¦è¾¹æ¡†
	for (i = 1; i < 26; i++)
	{
		SetPos(0, i);
		wprintf(L"%lc", WALL);
	}
	//å³è¾¹æ¡†
	for (i = 1; i < 26; i++)
	{
		SetPos(56, i);
		wprintf(L"%lc", WALL);
	}  
}
```

#### 3.6.3 åˆå§‹åŒ–è›‡

```cpp
//åˆå§‹åŒ–è›‡
void InitSnake(pSnake ps)
{
	//åˆ›å»º5ä¸ªè›‡èº«èŠ‚ç‚¹
	pSnakeNode cur = NULL;
	int i = 0;
	for (i = 0; i < 5; i++)
	{
		cur = (pSnakeNode)malloc(sizeof(SnakeNode));
		if (cur == NULL)
		{
			perror("InitSnake::malloc");
			return;
		}
		cur->x = POS_X + i * 2;
		cur->y = POS_Y ;
		cur->next = NULL;
		if (ps->pSnake == NULL)
		{
			ps->pSnake = cur;
		}
		else
		{
			cur->next = ps->pSnake;
			ps->pSnake = cur;
		}
	}
	//æ‰“å°è›‡
	cur = ps->pSnake;
	//æ‰“å°è›‡å¤´
	color(10);//è›‡çš„é¢œè‰² ç»¿

	SetPos(cur->x, cur->y);
	wprintf(L"%lc", HEAD);
	cur = cur->next;
	//æ‰“å°è›‡èº«
	while (cur)
	{
		SetPos(cur->x, cur->y);
		wprintf(L"%lc", BODY);
		cur = cur->next;
	}

	//è´ªåƒè›‡å…¶ä»–ä¿¡æ¯åˆå§‹åŒ–
	ps->dir = RIGHT;
	ps->FoodWeight = 10;
	ps->pFood = NULL;
	ps->Score = 0;
	ps->SleepTime = 200;
	ps->status = OK;

}
```

#### 3.6.4åˆ›å»ºé£Ÿç‰©

é£Ÿç‰©å…¶å®ä¹Ÿå¯ä»¥ç®—ä¸ºæ˜¯ä¸€ä¸ªè›‡çš„èŠ‚ç‚¹

```cpp
//åˆ›å»ºé£Ÿç‰©
void CreateFoods(pSnake ps)
{
	//éšæœºç”Ÿæˆé£Ÿç‰©åæ ‡
	int x = 0;
	int y = 0;

again:
	do
	{
		x = rand() % 53 + 2;
		y = rand() % 24 + 1;
	} while (x % 2 != 0);

	//é˜²æ­¢é£Ÿç‰©åˆ›å»ºåˆ°è›‡èº«ä½“ä¸Š
	pSnakeNode cur = ps->pSnake;
	while (cur)
	{
		if (cur->x == x && cur->y == y)
		{
			goto again;
		}
		cur = cur->next;
	}

	//åˆ›å»ºé£Ÿç‰©
	pSnakeNode pFood = (pSnakeNode)malloc(sizeof(SnakeNode));
	if (pFood == NULL)
	{
		perror("CreateFoods::malloc");
		return;
	}

	pFood->x = x;
	pFood->y = y;

	ps->pFood = pFood;
	//æ‰“å°é£Ÿç‰©
	SetPos(x, y);
	color(12);//é£Ÿç‰©é¢œè‰² çº¢
	wprintf(L"%lc", FOOD);

}

```

### 3.7 æ¸¸æˆè¿è¡Œ

```cpp
//æ¸¸æˆè¿è¡Œ
void GameRun(pSnake ps)
{
	//æ‰“å°å¸®åŠ©ä¿¡æ¯
	PrintHelpInfo();
	do
	{
		//æ‰“å°å½“å‰åˆ†æ•°æƒ…å†µ
		color(15);//å­—ä½“çš„é¢œè‰² ç™½
		SetPos(62, 15);
		printf("å½“å‰é£Ÿç‰©åˆ†å€¼ï¼š%d", ps->FoodWeight);
		SetPos(62, 16);
		printf("æ€»åˆ†ï¼š%d", ps->Score);
		SetPos(62, 17);
		printf("æœ€é«˜åˆ†ï¼š%d", ps->ScoreMax[0]);


		//æ£€æµ‹æŒ‰é”®
		//ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³ï¼ŒESC,ç©ºæ ¼,F3,F4
		if (KEY_PRESS(VK_UP) && ps->dir != DOWN)
		{
			ps->dir = UP;
		}
		else if (KEY_PRESS(VK_DOWN) && ps->dir != UP)
		{
			ps->dir = DOWN;
		}
		else if (KEY_PRESS(VK_LEFT) && ps->dir != RIGHT)
		{
			ps->dir = LEFT;
		}
		else if (KEY_PRESS(VK_RIGHT) && ps->dir != LEFT)
		{
			ps->dir = RIGHT;
		}
		else if (KEY_PRESS(VK_ESCAPE))
		{
			ps->status = ESC;
			break;
		}
		else if (KEY_PRESS(VK_SPACE))
		{
			//æ¸¸æˆæš‚åœé”®
			pause();//ç©ºæ ¼æš‚åœå’Œæ¢å¤æš‚åœ
		}
		else if (KEY_PRESS(VK_F3))
		{
			if (ps->SleepTime >= 80)
			{
				ps->SleepTime -= 30;
				ps->FoodWeight += 2;
			}
		}
		else if (KEY_PRESS(VK_F4))
		{
			if (ps->FoodWeight > 2)
			{
				ps->SleepTime += 30;
				ps->FoodWeight -= 2;
			}
		}

		//èµ°ä¸€æ­¥
		SnakeMove(ps);

		//ç¡çœ ä¸€ä¸‹
		Sleep(ps->SleepTime);

	} while (ps->status == OK);


}
```

#### 3.7.1 æ‰“å°å¸®åŠ©ä¿¡æ¯

```cpp
//æ‰“å°å¸®åŠ©ä¿¡æ¯
void PrintHelpInfo()
{
	color(15);//å­—ä½“çš„é¢œè‰² ç™½
	SetPos(62, 12);
	printf("1. ä¸èƒ½ç©¿å¢™ï¼Œä¸èƒ½å’¬åˆ°è‡ªå·±");
	SetPos(62, 13);
	printf("2. ç”¨ â†‘.â†“.â†.â†’ æ¥æ§åˆ¶è›‡çš„ç§»åŠ¨");
	SetPos(62, 14);
	printf("3. F3æ˜¯åŠ é€Ÿï¼ŒF4æ˜¯å‡é€Ÿ");
	SetPos(62, 24);
	printf("åˆ¶ä½œï¼šç‹ç‹¸");
	SetPos(62, 25);
	printf("ç¥å¤§å®¶éƒ½å¥½è¿è¿è¿~");

}
```

#### 3.7.2 è›‡èº«ç§»åŠ¨

```cpp
void SnakeMove(pSnake ps)
{
	//ç¡®å®šä¸‹ä¸€æ­¥çš„ä½ç½®
	pSnakeNode pnext = (pSnakeNode)malloc(sizeof(SnakeNode));
	if (pnext == NULL)
	{
		perror("SnakeMove::malloc");
		return;
	}
	pnext->next = NULL;

	switch (ps->dir)
	{
	case UP:
		pnext->x = ps->pSnake->x;
		pnext->y = ps->pSnake->y - 1;
		break;
	case DOWN:
		pnext->x = ps->pSnake->x;
		pnext->y = ps->pSnake->y + 1;
		break;
	case LEFT:
		pnext->x = ps->pSnake->x - 2;
		pnext->y = ps->pSnake->y;
		break;
	case RIGHT:
		pnext->x = ps->pSnake->x + 2;
		pnext->y = ps->pSnake->y;
		break;
	}

	//åˆ¤æ–­ä¸‹ä¸€æ­¥æ˜¯å¦æœ‰é£Ÿç‰©
	int ret = NextIsFood(ps, pnext);

	if (NextIsFood(ps, pnext))
	{
		EatFood(ps, pnext);
	}
	else
	{
		//æ­£å¸¸èµ°ä¸€æ­¥
		NotEatFood(ps, pnext);
	}

	//æ£€æµ‹æ˜¯å¦æ’å¢™
	KillByWall(ps);

	//æ£€æµ‹æ˜¯å¦å’¬åˆ°è‡ªå·±
	KillBySelf(ps);
}
```

##### 3.7.2.1 åˆ¤æ–­ä¸‹ä¸€æ­¥æ˜¯å¦æœ‰é£Ÿç‰©

```cpp
//åˆ¤æ–­æ˜¯å¦æœ‰é£Ÿç‰©
int NextIsFood(pSnake ps, pSnakeNode pnext)
{
	if (ps->pFood->x == pnext->x && ps->pFood->y == pnext->y)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}
```

##### 3.7.2.2 åƒåˆ°é£Ÿç‰©

```cpp
//åƒåˆ°é£Ÿç‰©
void EatFood(pSnake ps, pSnakeNode pnext)
{
	//å¤´æ’
	pnext->next = ps->pSnake;
	ps->pSnake = pnext;

	//æ‰“å°è›‡
	pSnakeNode cur = ps->pSnake;
	//æ‰“å°è›‡å¤´
	color(10);//è›‡çš„é¢œè‰² ç»¿
	SetPos(cur->x, cur->y);
	wprintf(L"%lc", HEAD);
	cur = cur->next;
	//æ‰“å°è›‡èº«
	while (cur)
	{
		SetPos(cur->x, cur->y);
		wprintf(L"%lc", BODY);
		cur = cur->next;
	}

	//è®¡åˆ†
	ps->Score += ps->FoodWeight;

	//é‡Šæ”¾æ—§é£Ÿç‰©
	free(ps->pFood);
	
	//åˆ›å»ºæ–°çš„é£Ÿç‰©
	CreateFoods(ps);
}
```

##### 3.7.2.3Â æ­£å¸¸èµ°ä¸‹ä¸€æ­¥ï¼ˆæ²¡åƒåˆ°é£Ÿç‰©ï¼‰

```cpp
void NotEatFood(pSnake ps, pSnakeNode pnext)
{
	//å¤´æ’
	pnext->next = ps->pSnake;
	ps->pSnake = pnext;
	//åˆ é™¤å°¾å·´
	pSnakeNode cur = pnext;
	//æ‰“å°è›‡å¤´
	color(10);//è›‡çš„é¢œè‰² ç»¿
	SetPos(cur->x, cur->y);
	wprintf(L"%lc", HEAD);
	cur = cur->next;
	//æ‰“å°è›‡èº«
	//æ‰“å°+æ‰¾å°¾
	while (cur->next->next)
	{
		SetPos(cur->x, cur->y);
		wprintf(L"%lc", BODY);
		cur = cur->next;
	}
	//å°†å°¾èŠ‚ç‚¹çš„ä½ç½®æ‰“å°æˆç©ºç™½å­—ç¬¦
	SetPos(cur->next->x, cur->next->y);
	printf("  ");

	free(cur->next);
	cur->next = NULL;

}
```

##### 3.7.2.4Â æ£€æµ‹æ˜¯å¦æ’å¢™

```cpp
//æ£€æµ‹æ˜¯å¦æ’å¢™
void KillByWall(pSnake ps)
{
	if (ps->pSnake->x == 0 ||
		ps->pSnake->x == 56 ||
		ps->pSnake->y == 0 ||
		ps->pSnake->y == 26)
	{
		ps->status = KILL_BY_WALL;
	}
}
```

##### 3.7.2.5Â æ£€æµ‹æ˜¯å¦å’¬åˆ°è‡ªå·±

```cpp
//æ£€æµ‹æ˜¯å¦æ’åˆ°è‡ªå·±
void KillBySelf(pSnake ps)
{
	pSnakeNode cur = ps->pSnake->next;//ä»ç¬¬äºŒä¸ªèŠ‚ç‚¹å¼€å§‹
	while (cur)
	{
		if (cur->x == ps->pSnake->x && cur->y == ps->pSnake->y)
		{
			ps->status = KILL_BY_SELF;
			return;
		}
		cur = cur->next;
	}
}
```

### 3.8 æ¸¸æˆç»“æŸ

```cpp
void  GameEnd(pSnake ps)
{
	SetPos(15, 12);
	color(15);//å­—ä½“é¢œè‰² ç™½
	switch (ps->status)
	{
	case ESC:
		printf("ESCä¸»åŠ¨é€€å‡ºæ¸¸æˆï¼Œæ­£å¸¸é€€å‡º\n");
		break;
	case KILL_BY_WALL:
		printf("è¿™ä½ éƒ½èƒ½æ’å¢™ï¼Ÿï¼Ÿèœå•Š\n");
		break;
	case KILL_BY_SELF:
		printf("ä½ æ˜¯çœŸé¥¿äº†ï¼\n");
		break;
	}

	//ä¿å­˜åˆ†æ•°
	SaveScore(ps);


	//é‡Šæ”¾è´ªåƒè›‡çš„é“¾è¡¨èµ„æº
	pSnakeNode cur = ps->pSnake;
	pSnakeNode del = NULL;

	while (cur)
	{
		del = cur;
		cur = cur->next;
		free(del);
	}
	free(ps->pFood);
	ps->pSnake = NULL;
	ps = NULL;

}
```

#### 3.8.1 ä¿å­˜åˆ†æ•°

```cpp
void SaveScore(pSnake ps)
{

	//å†™å…¥æ•°æ®
	int i = 0;
	if (ps->ScoreSize < 3)
	{
		ps->ScoreMax[ps->ScoreSize] = ps->Score;
		ps->ScoreSize++;
	}
	else
	{
		for (i = 0; i < 3; i++)
		{
			if (ps->Score > ps->ScoreMax[i])
			{
				int j = i;
				for (j = i; j < 3; j++)
				{
					ps->ScoreMax[j + 1] = ps->ScoreMax[j];
				}
				ps->ScoreMax[i] = ps->Score;
				break;
			}
		}

	}
	 i = 0;
	for (i = 0; i < 2; i++)
	{
		int j = 0;
		for (j = 0; j < 2 - i; j++)
		{
			if (ps->ScoreMax[j] < ps->ScoreMax[j + 1])
			{
				int tmp = ps->ScoreMax[j];
				ps->ScoreMax[j] = ps->ScoreMax[j + 1];
				ps->ScoreMax[j + 1] = tmp;
			}
		}
	}
}
```

## å››ã€ç»“è¯­

ä¸çŸ¥ä¸è§‰é—´ï¼Œæˆ‘å·²ç»å­¦ä¹ ä¸‰ä¸ªæœˆçš„ç¼–ç¨‹äº†ï¼Œæ„Ÿè°¢å„ä½åœ¨æˆ‘å­¦ä¹ æ—¶çš„æ”¯æŒä¸é™ªä¼´ï¼Œå¸Œæœ›æœªæ¥æˆ‘ä»¬èƒ½ä¸€ç›´åšæŒå­¦ä¹ ä¸‹å»

â€œ è¯·ä¸è¦ç›¸ä¿¡èƒœåˆ©å°±åƒå±±å¡ä¸Šçš„è’²å…¬è‹±ä¸€æ ·å”¾æ‰‹å¯å¾—ï¼Œä½†æ˜¯è¯·ç›¸ä¿¡ç”Ÿæ´»ä¸­æ€»æœ‰ç¾å¥½å€¼å¾—æˆ‘ä»¬å…¨åŠ›ä»¥èµ´ï¼Œå“ªæ€•ç²‰èº«ç¢éª¨ï¼â€â€”â€”â€”2022å¡å¡”å°”ä¸–ç•Œæ¯è§£è¯´è´ºç‚œ

![](https://i-blog.csdnimg.cn/direct/50f587b85973482e9e8e861a06715a14.png)