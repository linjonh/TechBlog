---
layout: post
title: C语言BOOS篇贪吃蛇-一场代码与逻辑的较量含游戏代码
date: 2024-11-12 11:30:00 +0800
description: "贪吃蛇基本上是我们家喻户晓的小游戏了，在狐狸还在是小"
keywords: c语言编写贪吃蛇小游戏游戏逻辑-百度经验
categories: ['C']
tags: ['链表', '贪吃蛇', '游戏程序', '数据结构', 'C']
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=143610554
    alt: C语言BOOS篇贪吃蛇-一场代码与逻辑的较量含游戏代码
artid: 143610554
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143610554
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143610554
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【C语言BOOS篇】贪吃蛇 一场代码与逻辑的较量（含游戏代码）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/1a55bdd6bce84938a347e9534139b2d2.gif"/>
    </p>
    <p style="text-align:center;">
     🏝️专栏：
     <a class="link-info" href="https://blog.csdn.net/m0_74779094/category_12825145.html?spm=1001.2014.3001.5482" title="【C语言boss篇】">
      【C语言boss篇】
     </a>
    </p>
    <p style="text-align:center;">
     🌅主页：
     <a href="https://blog.csdn.net/m0_74779094?type=blog" title="f狐o狸x">
      f狐o狸x
     </a>
    </p>
    <hr/>
    <p id="main-toc">
     <strong>
      目录
     </strong>
    </p>
    <p id="%E4%B8%80%E3%80%81%20%E6%B8%B8%E6%88%8F%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA-toc" style="margin-left:0px;">
     <a href="#%E4%B8%80%E3%80%81%20%E6%B8%B8%E6%88%8F%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA" rel="nofollow">
      一、 游戏效果展示
     </a>
    </p>
    <p id="%E4%BA%8C%E3%80%81%20%E6%B8%B8%E6%88%8F%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90-toc" style="margin-left:0px;">
     <a href="#%E4%BA%8C%E3%80%81%20%E6%B8%B8%E6%88%8F%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90" rel="nofollow">
      二、 游戏逻辑实现分析
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.1%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E4%BD%93%E9%80%BB%E8%BE%91-toc" style="margin-left:40px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.1%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E4%BD%93%E9%80%BB%E8%BE%91" rel="nofollow">
      2.1 游戏主体逻辑
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.2%20%E6%B8%B8%E6%88%8F%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90-toc" style="margin-left:40px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.2%20%E6%B8%B8%E6%88%8F%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90" rel="nofollow">
      2.2 游戏实现分析
     </a>
    </p>
    <p id="%E4%B8%89%E3%80%81%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1-toc" style="margin-left:0px;">
     <a href="#%E4%B8%89%E3%80%81%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1" rel="nofollow">
      三、贪吃蛇游戏设计
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.1%20%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-toc" style="margin-left:40px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.1%20%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" rel="nofollow">
      3.1 前期准备工作
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.2%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1-toc" style="margin-left:40px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.2%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1" rel="nofollow">
      3.2 数据结构设计
     </a>
    </p>
    <p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.3%20%E5%9C%B0%E5%9B%BE%E3%80%81%E8%9B%87%E8%BA%AB%E3%80%81%E9%A3%9F%E7%89%A9%E8%AE%BE%E8%AE%A1-toc" style="margin-left:40px;">
     <a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.3%20%E5%9C%B0%E5%9B%BE%E3%80%81%E8%9B%87%E8%BA%AB%E3%80%81%E9%A3%9F%E7%89%A9%E8%AE%BE%E8%AE%A1" rel="nofollow">
      3.3 地图、蛇身、食物设计
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.4%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E9%80%BB%E8%BE%91-toc" style="margin-left:40px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.4%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E9%80%BB%E8%BE%91" rel="nofollow">
      3.4 游戏主逻辑
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.5%20%E8%8F%9C%E5%8D%95-toc" style="margin-left:40px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.5%20%E8%8F%9C%E5%8D%95" rel="nofollow">
      3.5 菜单
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6%20%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B-toc" style="margin-left:40px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6%20%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B" rel="nofollow">
      3.6 游戏开始
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6.1%20%E6%89%93%E5%8D%B0%E6%AC%A2%E8%BF%8E%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6.1%20%E6%89%93%E5%8D%B0%E6%AC%A2%E8%BF%8E%E4%BF%A1%E6%81%AF" rel="nofollow">
      3.6.1 打印欢迎信息
     </a>
    </p>
    <p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.2%20%E7%BB%98%E5%88%B6%E5%9C%B0%E5%9B%BE-toc" style="margin-left:80px;">
     <a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.2%20%E7%BB%98%E5%88%B6%E5%9C%B0%E5%9B%BE" rel="nofollow">
      3.6.2 绘制地图
     </a>
    </p>
    <p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.3%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%9B%87-toc" style="margin-left:80px;">
     <a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.3%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%9B%87" rel="nofollow">
      3.6.3 初始化蛇
     </a>
    </p>
    <p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.4%E5%88%9B%E5%BB%BA%E9%A3%9F%E7%89%A9-toc" style="margin-left:80px;">
     <a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.4%E5%88%9B%E5%BB%BA%E9%A3%9F%E7%89%A9" rel="nofollow">
      3.6.4创建食物
     </a>
    </p>
    <p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.7%20%E6%B8%B8%E6%88%8F%E8%BF%90%E8%A1%8C-toc" style="margin-left:40px;">
     <a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.7%20%E6%B8%B8%E6%88%8F%E8%BF%90%E8%A1%8C" rel="nofollow">
      3.7 游戏运行
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.1%20%E6%89%93%E5%8D%B0%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.1%20%E6%89%93%E5%8D%B0%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF" rel="nofollow">
      3.7.1 打印帮助信息
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.2%20%E8%9B%87%E8%BA%AB%E7%A7%BB%E5%8A%A8-toc" style="margin-left:80px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.2%20%E8%9B%87%E8%BA%AB%E7%A7%BB%E5%8A%A8" rel="nofollow">
      3.7.2 蛇身移动
     </a>
    </p>
    <p id="3.7.2.1%20%E5%88%A4%E6%96%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E6%98%AF%E5%90%A6%E6%9C%89%E9%A3%9F%E7%89%A9-toc" style="margin-left:120px;">
     <a href="#3.7.2.1%20%E5%88%A4%E6%96%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E6%98%AF%E5%90%A6%E6%9C%89%E9%A3%9F%E7%89%A9" rel="nofollow">
      3.7.2.1 判断下一步是否有食物
     </a>
    </p>
    <p id="3.7.2.2%20%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9-toc" style="margin-left:120px;">
     <a href="#3.7.2.2%20%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9" rel="nofollow">
      3.7.2.2 吃到食物
     </a>
    </p>
    <p id="3.7.2.3%C2%A0%E6%AD%A3%E5%B8%B8%E8%B5%B0%E4%B8%8B%E4%B8%80%E6%AD%A5%EF%BC%88%E6%B2%A1%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9%EF%BC%89-toc" style="margin-left:120px;">
     <a href="#3.7.2.3%C2%A0%E6%AD%A3%E5%B8%B8%E8%B5%B0%E4%B8%8B%E4%B8%80%E6%AD%A5%EF%BC%88%E6%B2%A1%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9%EF%BC%89" rel="nofollow">
      3.7.2.3 正常走下一步（没吃到食物）
     </a>
    </p>
    <p id="3.7.2.4%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E6%92%9E%E5%A2%99-toc" style="margin-left:120px;">
     <a href="#3.7.2.4%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E6%92%9E%E5%A2%99" rel="nofollow">
      3.7.2.4 检测是否撞墙
     </a>
    </p>
    <p id="3.7.2.5%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E5%92%AC%E5%88%B0%E8%87%AA%E5%B7%B1-toc" style="margin-left:120px;">
     <a href="#3.7.2.5%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E5%92%AC%E5%88%B0%E8%87%AA%E5%B7%B1" rel="nofollow">
      3.7.2.5 检测是否咬到自己
     </a>
    </p>
    <p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.8%20%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F-toc" style="margin-left:40px;">
     <a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.8%20%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F" rel="nofollow">
      3.8 游戏结束
     </a>
    </p>
    <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.8.1%20%E4%BF%9D%E5%AD%98%E5%88%86%E6%95%B0-toc" style="margin-left:80px;">
     <a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.8.1%20%E4%BF%9D%E5%AD%98%E5%88%86%E6%95%B0" rel="nofollow">
      3.8.1 保存分数
     </a>
    </p>
    <p id="%E5%9B%9B%E3%80%81%E7%BB%93%E8%AF%AD%C2%A0-toc" style="margin-left:0px;">
     <a href="#%E5%9B%9B%E3%80%81%E7%BB%93%E8%AF%AD%C2%A0" rel="nofollow">
      四、结语
     </a>
    </p>
    <hr id="hr-toc"/>
    <p>
    </p>
    <p>
     贪吃蛇基本上是我们家喻户晓的小游戏了，在狐狸还在是小学幼儿园时期的时候就经常玩，后来到了初中随着互联网的发展，《贪吃蛇大作战》这个游戏又在众多网游中脱颖而出，因此身为大学生的狐狸，我决定用C语言来实现这个经典的小游戏——贪吃蛇
    </p>
    <h2 id="%E4%B8%80%E3%80%81%20%E6%B8%B8%E6%88%8F%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA">
     一、 游戏效果展示
    </h2>
    <p>
     废话不多说，直接看结果
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/f3177a469d454c7aace17586b9bc7895.gif"/>
    </p>
    <h2 id="%E4%BA%8C%E3%80%81%20%E6%B8%B8%E6%88%8F%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90">
     二、 游戏逻辑实现分析
    </h2>
    <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.1%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E4%BD%93%E9%80%BB%E8%BE%91">
     2.1 游戏主体逻辑
    </h3>
    <p>
     <img alt="" height="956" src="https://i-blog.csdnimg.cn/direct/a348e93cb3bf4f09abe0489ea638b021.png" width="1200"/>
    </p>
    <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202.2%20%E6%B8%B8%E6%88%8F%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90">
     2.2 游戏实现分析
    </h3>
    <p>
     不难看出游戏主逻辑就三个函数，GameStart 、GameRun 、GameEnd。他们分别负责了游戏前的准备工作、游戏运行时贪吃蛇的移动和判断是否结束游戏、游戏结束时的善后工作，那我们话不多说，直接开始
    </p>
    <p style="text-align:center;">
     <img alt="" height="240" src="https://i-blog.csdnimg.cn/direct/dc29a353c204421a9e3a442a5b0d68d2.jpeg" width="244"/>
    </p>
    <h2 id="%E4%B8%89%E3%80%81%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1">
     三、贪吃蛇游戏设计
    </h2>
    <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.1%20%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">
     3.1 前期准备工作
    </h3>
    <p>
     如果我们想把贪吃蛇小游戏弄得好看一些就需要一些调节颜色的函数，并且打印蛇身、墙体都用到了特殊的字符，因此需要先把修改适配器到中文状态，后面我们生成食物的时候需要的坐标也是随机的，因此还要准备生成随机数
    </p>
    <pre><code class="language-cpp">int main()
{
	//修改适配器到中文状态
	setlocale(LC_ALL, "");
	//设置随机数
	srand((unsigned)time(NULL));
	test();
	return 0;
}</code></pre>
    <pre><code class="language-cpp">void color(int c)
{
	SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), c); //颜色设置
}
</code></pre>
    <p>
     这里是颜色的十进制对照表：
    </p>
    <p>
     <img alt="" height="417" src="https://i-blog.csdnimg.cn/direct/ecdec049e9d64c308d0570e8de34cc5f.png" width="956"/>
    </p>
    <p>
     这样我们后面只需要在打印前设置好想要的颜色就行了，想了解的朋友可以去：
     <a href="https://baike.so.com/doc/4657682-4871014.html" rel="nofollow" title="SetConsoleTextAttribute_360百科">
      SetConsoleTextAttribute_360百科
     </a>
    </p>
    <p>
     我们还需要获取案件情况来判断当前蛇运行的状态
    </p>
    <pre><code class="language-cpp">//监测按键
#define KEY_PRESS(VK)  ( (GetAsyncKeyState(VK) &amp; 0x1) ? 1 : 0 )</code></pre>
    <p>
     封装一个设置光标位置的函数方便操作
    </p>
    <pre><code class="language-cpp">void SetPos(int x, int y)
{
	//获得设备句柄
	HANDLE hanlde = GetStdHandle(STD_OUTPUT_HANDLE);
	//根据句柄设置光标的位置
	COORD pos = { x, y };
	SetConsoleCursorPosition(hanlde, pos);
}</code></pre>
    <p>
     准备工作完了之后我们就可以开始设计下面的函数了
    </p>
    <pre><code class="language-cpp">
//颜色设置
void color(int c);

//打印分数
void PrintScore(pSnake ps);

//游戏开始前的初始化
void GameStart(pSnake ps);

//设置光标位置信息
void SetPos(int x, int y);

//打印欢迎信息
void WelcomeToGame();

//绘制地图
void CreateMap();

//初始化蛇
void InitSnake(pSnake ps);

//创建食物
void CreateFoods(pSnake ps);

//游戏运行函数
void GameRun(pSnake ps);

//打印帮助信息
void PrintHelpInfo();

//蛇移动的函数，一次移动一步
void SnakeMove(pSnake ps);

//判断下一步是否有食物
int NextIsFood(pSnake ps, pSnakeNode pnext);

//吃食物
void EatFood(pSnake ps, pSnakeNode pnext);

//没吃到食物正常走一步
void NotEatFood(pSnake ps, pSnakeNode pnext);

//检测是否撞墙
void KillByWall(pSnake ps);

//检测是否撞到自己
void KillBySelf(pSnake ps);

//善后工作
void  GameEnd(pSnake ps);

//保存分数
void SaveScore(pSnake ps);</code></pre>
    <p>
    </p>
    <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.2%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1">
     3.2 数据结构设计
    </h3>
    <p>
     这里我用的是一个链表来管理的蛇身，因为在游戏过程中，贪吃蛇每吃一个食物都会增长一个蛇身节点，正好用链表节点来控制蛇的长度
    </p>
    <pre><code class="language-cpp">//蛇身结构体的定义
typedef struct SnakeNode
{
	int x;
	int y;
	struct SnakeNode* next;
}SnakeNode,* pSnakeNode;</code></pre>
    <p>
     另外我们需要用一个结构体来管理贪吃蛇游戏的信息，包括蛇身、食物、总分、当前分数、当前一个食物的分数、蛇的速度、当前游戏状态和当前蛇运动状态（上、下、左、右）
    </p>
    <pre><code class="language-cpp">//贪吃蛇结构体定义
typedef struct Snake
{
	pSnakeNode pSnake; //维护蛇的指针，指向蛇头
	pSnakeNode pFood; //指向食物的指针
	int Score;//总分
	int ScoreMax[4];//最高分
	int ScoreSize;//最高分有效个数
	int FoodWeight;//每个食物的分数
	int SleepTime;//蛇的速度
	enum GAME_STATUS status;//游戏当前状态
	enum SNAKE_STATUS dir;//蛇当前走的方向
}Snake,* pSnake;</code></pre>
    <p>
     这里蛇的运动状态和游戏当前状态都可以一一列举出来，所以他俩可以使用枚举
    </p>
    <pre><code class="language-cpp">//游戏状态枚举
enum GAME_STATUS
{
	OK = 1, //游戏正常运行状态
	ESC, //按esc键盘退出游戏，正常退出
	KILL_BY_WALL,//撞墙退出游戏
	KILL_BY_SELF,//咬到自己退出游戏
};

//蛇当前走的方向枚举
enum SNAKE_STATUS
{
	UP=1,//向上
	DOWN,//向下
	LEFT,//向左
	RIGHT//向右
};</code></pre>
    <h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.3%20%E5%9C%B0%E5%9B%BE%E3%80%81%E8%9B%87%E8%BA%AB%E3%80%81%E9%A3%9F%E7%89%A9%E8%AE%BE%E8%AE%A1">
     3.3 地图、蛇身、食物设计
    </h3>
    <p>
     用“ ■ ”表示地图边界、“ ★ ”表示一个食物节点、“ ● ”表示蛇头、“ ○ ”表示蛇身
    </p>
    <p>
     <img alt="" height="682" src="https://i-blog.csdnimg.cn/direct/fa27b71cbb574db884d48e2cadda53c5.png" width="759"/>
    </p>
    <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.4%20%E6%B8%B8%E6%88%8F%E4%B8%BB%E9%80%BB%E8%BE%91">
     3.4 游戏主逻辑
    </h3>
    <pre><code class="language-cpp">void test()
{
	//设置控制台信息，窗口大小，窗口名
	system("mode con cols=100 lines=30");
	system("title:贪吃蛇");
	//隐藏光标
	HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);
	CONSOLE_CURSOR_INFO CursorInfo;
	GetConsoleCursorInfo(handle, &amp;CursorInfo);//获取控制台光标信息
	CursorInfo.bVisible = false;
	SetConsoleCursorInfo(handle, &amp;CursorInfo);

	Snake snake = { 0 };
	int input = 0;
	do 
	{

		system("cls");
		menu();
		scanf("%d", &amp;input);
		switch (input)
		{
		case 1:
			game(&amp;snake);
			SetPos(15, 13);
			printf("再来亿吧~");
			SetPos(15, 14);
			system("pause");
			break;
		case 2:
			PrintScore(&amp;snake);
			break;
		case 0:
			system("cls");
			color(15);//字体颜色 白 
			SetPos(40, 13);
			printf("古德拜拜~~");
			SetPos(0, 27);
			break;
		default:
			SetPos(40, 18);
			printf("输入错误请重新输入");
		}
	} while (input);

}

void game(pSnake ps)
{
	GameStart(ps);//游戏开始前的初始化
	GameRun(ps);//游戏运行
	GameEnd(ps);//游戏结束后的善后工作
}
</code></pre>
    <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.5%20%E8%8F%9C%E5%8D%95">
     3.5 菜单
    </h3>
    <pre><code class="language-cpp">void menu()
{
	color(6);//墙体颜色 棕 
	SetPos(36, 11);
	int i = 0;
	//上边框
	for (i = 0; i &lt; 28; i += 2)
	{
		wprintf(L"%lc", WALL);
	}
	//下边框
	SetPos(36, 19);
	for (i = 0; i &lt; 28; i += 2)
	{
		wprintf(L"%lc", WALL);
	}
	//左边框
	for (i = 1; i &lt; 8; i++)
	{
		SetPos(36, i + 11);
		wprintf(L"%lc", WALL);
	}
	//右边框
	for (i = 1; i &lt; 8; i++)
	{
		SetPos(62, i + 11);
		wprintf(L"%lc", WALL);
	}
	SetPos(40, 13);
	color(15);//字体颜色 白 
	printf("欢迎来到贪吃蛇小游戏");
	SetPos(40, 14);
	printf("1. 开始游戏");
	SetPos(40, 15);
	printf("2. 查看最高分");
	SetPos(40, 16);
	printf("0. 退出游戏");
	SetPos(40, 17);
	printf("请选择：");


}</code></pre>
    <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6%20%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B">
     3.6 游戏开始
    </h3>
    <pre><code class="language-cpp">void GameStart(pSnake ps)
{

	//打印欢迎信息
	WelcomeToGame();

	//绘制地图
	CreateMap();

	//初始化蛇
	InitSnake(ps);

	//创建食物
	CreateFoods(ps);

}</code></pre>
    <h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.6.1%20%E6%89%93%E5%8D%B0%E6%AC%A2%E8%BF%8E%E4%BF%A1%E6%81%AF">
     3.6.1 打印欢迎信息
    </h4>
    <p>
     打印一些初始信息方便玩家参考
    </p>
    <pre><code class="language-cpp">void WelcomeToGame()
{
	system("cls");
	SetPos(40, 13);
	printf("欢迎来到贪吃蛇小游戏");
	SetPos(44, 26);
	system("pause");
	system("cls");
	SetPos(20, 13);
	printf("用 ↑ . ↓ . ← . → 来控制蛇的移动，F3是加速，F4是减速");
	SetPos(20, 14);
	printf("加速能得到更高的分数");
	SetPos(44, 26);
	system("pause");
	system("cls");
}</code></pre>
    <h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.2%20%E7%BB%98%E5%88%B6%E5%9C%B0%E5%9B%BE">
     3.6.2 绘制地图
    </h4>
    <pre><code class="language-cpp">void CreateMap()
{
	int i = 0;
	//控制台主机 
	//上边框
	color(6);//墙体颜色 棕 
	SetPos(0, 0);
	for (i = 0; i &lt; 58; i+=2)
	{
		wprintf(L"%lc", WALL);
	}
	//下边框
	SetPos(0, 26);
	for (i = 0; i &lt; 58; i += 2)
	{
		wprintf(L"%lc", WALL);
	}
	//左边框
	for (i = 1; i &lt; 26; i++)
	{
		SetPos(0, i);
		wprintf(L"%lc", WALL);
	}
	//右边框
	for (i = 1; i &lt; 26; i++)
	{
		SetPos(56, i);
		wprintf(L"%lc", WALL);
	}  
}</code></pre>
    <h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.3%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%9B%87">
     3.6.3 初始化蛇
    </h4>
    <pre><code class="language-cpp">//初始化蛇
void InitSnake(pSnake ps)
{
	//创建5个蛇身节点
	pSnakeNode cur = NULL;
	int i = 0;
	for (i = 0; i &lt; 5; i++)
	{
		cur = (pSnakeNode)malloc(sizeof(SnakeNode));
		if (cur == NULL)
		{
			perror("InitSnake::malloc");
			return;
		}
		cur-&gt;x = POS_X + i * 2;
		cur-&gt;y = POS_Y ;
		cur-&gt;next = NULL;
		if (ps-&gt;pSnake == NULL)
		{
			ps-&gt;pSnake = cur;
		}
		else
		{
			cur-&gt;next = ps-&gt;pSnake;
			ps-&gt;pSnake = cur;
		}
	}
	//打印蛇
	cur = ps-&gt;pSnake;
	//打印蛇头
	color(10);//蛇的颜色 绿

	SetPos(cur-&gt;x, cur-&gt;y);
	wprintf(L"%lc", HEAD);
	cur = cur-&gt;next;
	//打印蛇身
	while (cur)
	{
		SetPos(cur-&gt;x, cur-&gt;y);
		wprintf(L"%lc", BODY);
		cur = cur-&gt;next;
	}

	//贪吃蛇其他信息初始化
	ps-&gt;dir = RIGHT;
	ps-&gt;FoodWeight = 10;
	ps-&gt;pFood = NULL;
	ps-&gt;Score = 0;
	ps-&gt;SleepTime = 200;
	ps-&gt;status = OK;

}</code></pre>
    <h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.6.4%E5%88%9B%E5%BB%BA%E9%A3%9F%E7%89%A9">
     3.6.4创建食物
    </h4>
    <p>
     食物其实也可以算为是一个蛇的节点
    </p>
    <pre><code class="language-cpp">//创建食物
void CreateFoods(pSnake ps)
{
	//随机生成食物坐标
	int x = 0;
	int y = 0;

again:
	do
	{
		x = rand() % 53 + 2;
		y = rand() % 24 + 1;
	} while (x % 2 != 0);

	//防止食物创建到蛇身体上
	pSnakeNode cur = ps-&gt;pSnake;
	while (cur)
	{
		if (cur-&gt;x == x &amp;&amp; cur-&gt;y == y)
		{
			goto again;
		}
		cur = cur-&gt;next;
	}

	//创建食物
	pSnakeNode pFood = (pSnakeNode)malloc(sizeof(SnakeNode));
	if (pFood == NULL)
	{
		perror("CreateFoods::malloc");
		return;
	}

	pFood-&gt;x = x;
	pFood-&gt;y = y;

	ps-&gt;pFood = pFood;
	//打印食物
	SetPos(x, y);
	color(12);//食物颜色 红
	wprintf(L"%lc", FOOD);

}
</code></pre>
    <h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.7%20%E6%B8%B8%E6%88%8F%E8%BF%90%E8%A1%8C">
     3.7 游戏运行
    </h3>
    <pre><code class="language-cpp">//游戏运行
void GameRun(pSnake ps)
{
	//打印帮助信息
	PrintHelpInfo();
	do
	{
		//打印当前分数情况
		color(15);//字体的颜色 白
		SetPos(62, 15);
		printf("当前食物分值：%d", ps-&gt;FoodWeight);
		SetPos(62, 16);
		printf("总分：%d", ps-&gt;Score);
		SetPos(62, 17);
		printf("最高分：%d", ps-&gt;ScoreMax[0]);


		//检测按键
		//上，下，左，右，ESC,空格,F3,F4
		if (KEY_PRESS(VK_UP) &amp;&amp; ps-&gt;dir != DOWN)
		{
			ps-&gt;dir = UP;
		}
		else if (KEY_PRESS(VK_DOWN) &amp;&amp; ps-&gt;dir != UP)
		{
			ps-&gt;dir = DOWN;
		}
		else if (KEY_PRESS(VK_LEFT) &amp;&amp; ps-&gt;dir != RIGHT)
		{
			ps-&gt;dir = LEFT;
		}
		else if (KEY_PRESS(VK_RIGHT) &amp;&amp; ps-&gt;dir != LEFT)
		{
			ps-&gt;dir = RIGHT;
		}
		else if (KEY_PRESS(VK_ESCAPE))
		{
			ps-&gt;status = ESC;
			break;
		}
		else if (KEY_PRESS(VK_SPACE))
		{
			//游戏暂停键
			pause();//空格暂停和恢复暂停
		}
		else if (KEY_PRESS(VK_F3))
		{
			if (ps-&gt;SleepTime &gt;= 80)
			{
				ps-&gt;SleepTime -= 30;
				ps-&gt;FoodWeight += 2;
			}
		}
		else if (KEY_PRESS(VK_F4))
		{
			if (ps-&gt;FoodWeight &gt; 2)
			{
				ps-&gt;SleepTime += 30;
				ps-&gt;FoodWeight -= 2;
			}
		}

		//走一步
		SnakeMove(ps);

		//睡眠一下
		Sleep(ps-&gt;SleepTime);

	} while (ps-&gt;status == OK);


}</code></pre>
    <h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.1%20%E6%89%93%E5%8D%B0%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF">
     3.7.1 打印帮助信息
    </h4>
    <pre><code class="language-cpp">//打印帮助信息
void PrintHelpInfo()
{
	color(15);//字体的颜色 白
	SetPos(62, 12);
	printf("1. 不能穿墙，不能咬到自己");
	SetPos(62, 13);
	printf("2. 用 ↑.↓.←.→ 来控制蛇的移动");
	SetPos(62, 14);
	printf("3. F3是加速，F4是减速");
	SetPos(62, 24);
	printf("制作：狐狸");
	SetPos(62, 25);
	printf("祝大家都好运连连~");

}</code></pre>
    <h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.7.2%20%E8%9B%87%E8%BA%AB%E7%A7%BB%E5%8A%A8">
     3.7.2 蛇身移动
    </h4>
    <pre><code class="language-cpp">void SnakeMove(pSnake ps)
{
	//确定下一步的位置
	pSnakeNode pnext = (pSnakeNode)malloc(sizeof(SnakeNode));
	if (pnext == NULL)
	{
		perror("SnakeMove::malloc");
		return;
	}
	pnext-&gt;next = NULL;

	switch (ps-&gt;dir)
	{
	case UP:
		pnext-&gt;x = ps-&gt;pSnake-&gt;x;
		pnext-&gt;y = ps-&gt;pSnake-&gt;y - 1;
		break;
	case DOWN:
		pnext-&gt;x = ps-&gt;pSnake-&gt;x;
		pnext-&gt;y = ps-&gt;pSnake-&gt;y + 1;
		break;
	case LEFT:
		pnext-&gt;x = ps-&gt;pSnake-&gt;x - 2;
		pnext-&gt;y = ps-&gt;pSnake-&gt;y;
		break;
	case RIGHT:
		pnext-&gt;x = ps-&gt;pSnake-&gt;x + 2;
		pnext-&gt;y = ps-&gt;pSnake-&gt;y;
		break;
	}

	//判断下一步是否有食物
	int ret = NextIsFood(ps, pnext);

	if (NextIsFood(ps, pnext))
	{
		EatFood(ps, pnext);
	}
	else
	{
		//正常走一步
		NotEatFood(ps, pnext);
	}

	//检测是否撞墙
	KillByWall(ps);

	//检测是否咬到自己
	KillBySelf(ps);
}</code></pre>
    <h5 id="3.7.2.1%20%E5%88%A4%E6%96%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E6%98%AF%E5%90%A6%E6%9C%89%E9%A3%9F%E7%89%A9">
     3.7.2.1 判断下一步是否有食物
    </h5>
    <pre><code class="language-cpp">//判断是否有食物
int NextIsFood(pSnake ps, pSnakeNode pnext)
{
	if (ps-&gt;pFood-&gt;x == pnext-&gt;x &amp;&amp; ps-&gt;pFood-&gt;y == pnext-&gt;y)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}</code></pre>
    <h5 id="3.7.2.2%20%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9">
     3.7.2.2 吃到食物
    </h5>
    <pre><code class="language-cpp">//吃到食物
void EatFood(pSnake ps, pSnakeNode pnext)
{
	//头插
	pnext-&gt;next = ps-&gt;pSnake;
	ps-&gt;pSnake = pnext;

	//打印蛇
	pSnakeNode cur = ps-&gt;pSnake;
	//打印蛇头
	color(10);//蛇的颜色 绿
	SetPos(cur-&gt;x, cur-&gt;y);
	wprintf(L"%lc", HEAD);
	cur = cur-&gt;next;
	//打印蛇身
	while (cur)
	{
		SetPos(cur-&gt;x, cur-&gt;y);
		wprintf(L"%lc", BODY);
		cur = cur-&gt;next;
	}

	//计分
	ps-&gt;Score += ps-&gt;FoodWeight;

	//释放旧食物
	free(ps-&gt;pFood);
	
	//创建新的食物
	CreateFoods(ps);
}</code></pre>
    <h5 id="3.7.2.3%C2%A0%E6%AD%A3%E5%B8%B8%E8%B5%B0%E4%B8%8B%E4%B8%80%E6%AD%A5%EF%BC%88%E6%B2%A1%E5%90%83%E5%88%B0%E9%A3%9F%E7%89%A9%EF%BC%89">
     3.7.2.3 正常走下一步（没吃到食物）
    </h5>
    <pre><code class="language-cpp">void NotEatFood(pSnake ps, pSnakeNode pnext)
{
	//头插
	pnext-&gt;next = ps-&gt;pSnake;
	ps-&gt;pSnake = pnext;
	//删除尾巴
	pSnakeNode cur = pnext;
	//打印蛇头
	color(10);//蛇的颜色 绿
	SetPos(cur-&gt;x, cur-&gt;y);
	wprintf(L"%lc", HEAD);
	cur = cur-&gt;next;
	//打印蛇身
	//打印+找尾
	while (cur-&gt;next-&gt;next)
	{
		SetPos(cur-&gt;x, cur-&gt;y);
		wprintf(L"%lc", BODY);
		cur = cur-&gt;next;
	}
	//将尾节点的位置打印成空白字符
	SetPos(cur-&gt;next-&gt;x, cur-&gt;next-&gt;y);
	printf("  ");

	free(cur-&gt;next);
	cur-&gt;next = NULL;

}</code></pre>
    <h5 id="3.7.2.4%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E6%92%9E%E5%A2%99">
     3.7.2.4 检测是否撞墙
    </h5>
    <pre><code class="language-cpp">//检测是否撞墙
void KillByWall(pSnake ps)
{
	if (ps-&gt;pSnake-&gt;x == 0 ||
		ps-&gt;pSnake-&gt;x == 56 ||
		ps-&gt;pSnake-&gt;y == 0 ||
		ps-&gt;pSnake-&gt;y == 26)
	{
		ps-&gt;status = KILL_BY_WALL;
	}
}</code></pre>
    <h5 id="3.7.2.5%C2%A0%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E5%92%AC%E5%88%B0%E8%87%AA%E5%B7%B1">
     3.7.2.5 检测是否咬到自己
    </h5>
    <pre><code class="language-cpp">//检测是否撞到自己
void KillBySelf(pSnake ps)
{
	pSnakeNode cur = ps-&gt;pSnake-&gt;next;//从第二个节点开始
	while (cur)
	{
		if (cur-&gt;x == ps-&gt;pSnake-&gt;x &amp;&amp; cur-&gt;y == ps-&gt;pSnake-&gt;y)
		{
			ps-&gt;status = KILL_BY_SELF;
			return;
		}
		cur = cur-&gt;next;
	}
}</code></pre>
    <h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03.8%20%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F">
     3.8 游戏结束
    </h3>
    <pre><code class="language-cpp">void  GameEnd(pSnake ps)
{
	SetPos(15, 12);
	color(15);//字体颜色 白
	switch (ps-&gt;status)
	{
	case ESC:
		printf("ESC主动退出游戏，正常退出\n");
		break;
	case KILL_BY_WALL:
		printf("这你都能撞墙？？菜啊\n");
		break;
	case KILL_BY_SELF:
		printf("你是真饿了！\n");
		break;
	}

	//保存分数
	SaveScore(ps);


	//释放贪吃蛇的链表资源
	pSnakeNode cur = ps-&gt;pSnake;
	pSnakeNode del = NULL;

	while (cur)
	{
		del = cur;
		cur = cur-&gt;next;
		free(del);
	}
	free(ps-&gt;pFood);
	ps-&gt;pSnake = NULL;
	ps = NULL;

}</code></pre>
    <h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203.8.1%20%E4%BF%9D%E5%AD%98%E5%88%86%E6%95%B0">
     3.8.1 保存分数
    </h4>
    <pre><code class="language-cpp">void SaveScore(pSnake ps)
{

	//写入数据
	int i = 0;
	if (ps-&gt;ScoreSize &lt; 3)
	{
		ps-&gt;ScoreMax[ps-&gt;ScoreSize] = ps-&gt;Score;
		ps-&gt;ScoreSize++;
	}
	else
	{
		for (i = 0; i &lt; 3; i++)
		{
			if (ps-&gt;Score &gt; ps-&gt;ScoreMax[i])
			{
				int j = i;
				for (j = i; j &lt; 3; j++)
				{
					ps-&gt;ScoreMax[j + 1] = ps-&gt;ScoreMax[j];
				}
				ps-&gt;ScoreMax[i] = ps-&gt;Score;
				break;
			}
		}

	}
	 i = 0;
	for (i = 0; i &lt; 2; i++)
	{
		int j = 0;
		for (j = 0; j &lt; 2 - i; j++)
		{
			if (ps-&gt;ScoreMax[j] &lt; ps-&gt;ScoreMax[j + 1])
			{
				int tmp = ps-&gt;ScoreMax[j];
				ps-&gt;ScoreMax[j] = ps-&gt;ScoreMax[j + 1];
				ps-&gt;ScoreMax[j + 1] = tmp;
			}
		}
	}
}</code></pre>
    <h2 id="%E5%9B%9B%E3%80%81%E7%BB%93%E8%AF%AD%C2%A0">
     四、结语
    </h2>
    <p>
     不知不觉间，我已经学习三个月的编程了，感谢各位在我学习时的支持与陪伴，希望未来我们能一直坚持学习下去
    </p>
    <p>
     “ 请不要相信胜利就像山坡上的蒲公英一样唾手可得，但是请相信生活中总有美好值得我们全力以赴，哪怕粉身碎骨！”———2022卡塔尔世界杯解说贺炜
    </p>
    <p>
     <img alt="" height="944" src="https://i-blog.csdnimg.cn/direct/50f587b85973482e9e8e861a06715a14.png" width="1080"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37343737393039342f:61727469636c652f64657461696c732f313433363130353534" class_="artid" style="display:none">
 </p>
</div>


