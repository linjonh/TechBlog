---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f6e6968756875693636362f:61727469636c652f64657461696c732f313436303737363235"
layout: post
title: "关于静态IP的总结"
date: 2025-03-06 18:51:35 +08:00
description: "ip route-static 目的网段 下一跳接口IP（下一个经过的路由器的入接口IP）（1）在汇总时，若包含网络内实际不存在的网段时，可能会造成流量有去无回，浪费链路资源。当路由器可以访问多个连续子网时，若均通过相同的下一跳，则可以将这些网段进行汇总计算。（1）是一条不限定目标的路由，在路由表所有路由条目都匹配完毕之后，最后匹配缺省路由。空接口：NULL–如果一条路由的出接口是空接口，匹配这条路由的数据包都将被丢弃。（1）当一个数据包到达路由器时，路由器会基于数据包中的目标IP查看本地路由表。"
keywords: "关于静态IP的总结"
categories: ['未分类']
tags: ['网络', 'Tcp']
artid: "146077625"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146077625
    alt: "关于静态IP的总结"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146077625
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146077625
cover: https://bing.ee123.net/img/rand?artid=146077625
image: https://bing.ee123.net/img/rand?artid=146077625
img: https://bing.ee123.net/img/rand?artid=146077625
---

# 关于静态IP的总结

## 路由器转发原理：

1.路由表
  
（1）当一个数据包到达路由器时，路由器会基于数据包中的目标IP查看本地路由表
  
如果路由器的路由表中存在记录，按照路由表执行转发；如果由表中没有，丢弃
  
该包（路由器作用为隔离、转发，此处体现隔离）
  
（2）dispaly ip routing-table
  
Destination/Mask—目标地址掩码
  
Protocol—协议 Direct-直连路由-直连网段（直接靠网线连接到路由器生成的网段）

```
直连路由默认生成，有两个条件：
1.接口双UP--物理和协议都是UP的
2.接口必须配置IP地址

（3）HextHop--下一跳（路由器转发一次就是一跳）
	下一个经过的路由器的入接口IP
	在直连路由中，因为目的地可以直接到达，不需要其他路由器转发，所以下一跳
	就是出接口的IP
（4）interface--出接口
	到达目标网段从哪个接口发出
（5）pre-preference-优先级
	如果到达相同网段存在多条路由条目时，比较优先级，加载优先级最大的到路由表中
	数值越大，优先级越小（0-255）
	静态路由优先级为60

（6）flags-标志
	RD-递归查找 查找路由表，自动配置出接口

```

路由器一个接口连接一个广播域
  
骨干连路：路由器与路由器之间的链路，骨干连路一般不许加入其他设备
  
数广播域，划网段，配IP，先配置网关的IP

2.获取未知网段路由信息
  
（1）静态路由：由网络管理员手写的条目
  
ip route-static 目的网段 下一跳接口IP（下一个经过的路由器的入接口IP）

```
（2）动态路由：所有路由器运行相同的路由协议，之后通过路由器之间沟通协商计算到达
			 未知网段的路由信息

```

3.路由环路
  
占用路由器资源，ttl可以缓解无法解决。

静态路由的拓展配置
  
1.负载均衡
  
如果到达同一网段存在开销相似的路径时，可以将这些路同时写在静态路由中，形成负载均衡
  
设备将两条路同时发送起到叠加带宽的作用

2.环回接口
  
路由器配置的虚拟接口，用于模拟实验中不收设备限制
  
interface LoopBack 0 创建环回接口
  
然后配地址

3.手工汇总
  
当路由器可以访问多个连续子网时，若均通过相同的下一跳，则可以将这些网段进行汇总计算
  
之后仅编辑到达汇总网段的静态路由即可，可以减少路由条目数目，提高转发效率
  
CIDR—无类域间路由（ “取相同，去不同”）

4.路由黑洞
  
（1）在汇总时，若包含网络内实际不存在的网段时，可能会造成流量有去无回，浪费链路资源
  
（2）路由黑洞与缺省路由相遇，百分百出环路
  
合理的子网划分可以减少路由黑洞的出现

5.缺省路由
  
（1）是一条不限定目标的路由，在路由表所有路由条目都匹配完毕之后，最后匹配缺省路由
  
（2）路由黑洞与缺省路由相遇，百分百出环路
  
ip route-static 0.0.0.0 0 下一跳

6.空接口路由
  
（1）防止路由黑洞和缺省路由相遇成环的问题
  
路由表匹配原则：最长匹配原则（掩码最长）
  
空接口：NULL–如果一条路由的出接口是空接口，匹配这条路由的数据包都将被丢弃
  
（2）在黑洞路由器上配置一条指向汇总网段的空接口路由
  
在其他路由器会形成负载均衡

7.浮动静态路由
  
（1）通过修改默认的优先级实现了静态路由的备份
  
ip route-static 地址 下一跳 preference 数字
  
display ip routing-table protocol static 查看静态协议