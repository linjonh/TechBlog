---
layout: post
title: "i18n的替换处理"
date: 2025-03-13 20:56:03 +0800
description: "i18n的替换处理，适用于i18n替换时出现特定样式的问题。"
keywords: "i18n的替换处理"
categories: ['基础', '前端', 'Vue']
tags: ['服务器', '多语言', '前端', 'Javascript', 'Java', 'I']
artid: "146242133"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146242133
    alt: "i18n的替换处理"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146242133
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146242133
cover: https://bing.ee123.net/img/rand?artid=146242133
image: https://bing.ee123.net/img/rand?artid=146242133
img: https://bing.ee123.net/img/rand?artid=146242133
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     i18n的替换处理
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="i18n_0">
     </a>
     i18n的替换处理
    </h2>
    <h3>
     <a id="_2">
     </a>
     背景描述
    </h3>
    <blockquote>
     <p>
      在开发的过程中，需要对项目文件的中文使用i18n进行多语言处理。在特定的页面，中文会有特定的处理，例如:
      <strong>
       存在5台设备
      </strong>
      ，其中 5 是一个变量，同时具有特定的样式，那么这个时候应该如何加i18n？
     </p>
    </blockquote>
    <h3>
     <a id="_6">
     </a>
     代码示例
    </h3>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>存在 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{deviceNum}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> 台设备<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     假如直接把”存在“存在json中，而后把”台设备“存在json中，随便一想最后得到的翻译会非常混乱，导致语义不符。
    </p>
    <h3>
     <a id="_14">
     </a>
     解决方案
    </h3>
    <blockquote>
     <p>
      首先，我们需要使用i18n的传参机制，使得这一整句话会一起翻译，这样就不会出现翻译语义不符的情况。而后，由于其中的变量存在特定的样式，因此我们需要以变量为切割点，将整个i18n语句拆分成前后两个内容，随后进行拼接即可。（需要注意的是：变量作为切割点，当i18n的变量不传参的情况下，其内容是不会被替换的，
      <em>
       如果不理解请看后续的代码
      </em>
      ，而后进行切割即可）
     </p>
    </blockquote>
    <pre><code class="prism language-javascript"><span class="token comment">// test.json</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"text"</span><span class="token operator">:</span> <span class="token string">"存在{num}台设备"</span>
<span class="token punctuation">}</span>

<span class="token comment">// html(或.vue)</span>
<span class="token comment">// 原先：&lt;span&gt;存在 &lt;span style="color: red;"&gt;{<!-- -->{deviceNum}}&lt;/span&gt; 台设备&lt;/span&gt;</span>
<span class="token comment">// 目前：</span>
<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'test.text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">{\s*num\s*}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token comment">// '存在'</span>
<span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"color: red;"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>deviceNum<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'test.text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">{\s*num\s*}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token comment">// '台设备'</span>
<span class="token comment">// 假如翻译的是exist 5 devices，前面第一项就是"exist"，第二项就是"devices"，大家可以举一反三。</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333732343834382f:61727469636c652f64657461696c732f313436323432313333" class_="artid" style="display:none">
 </p>
</div>


