---
layout: post
title: "使用hutool封装http请求"
date: 2025-03-10 08:20:40 +0800
description: "今天写代码的时候，发现需要使用后台进行http请求的时候，发现自己没有一个请求的封装，这就很不好了，于是乎就要一劳永逸自己写一个工具类进行调用，话不多说开干！"
keywords: "使用hutool封装http请求"
categories: ['Java']
tags: ['网络协议', '网络', 'Java', 'Http']
artid: "146100869"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146100869
    alt: "使用hutool封装http请求"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146100869
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146100869
cover: https://bing.ee123.net/img/rand?artid=146100869
image: https://bing.ee123.net/img/rand?artid=146100869
img: https://bing.ee123.net/img/rand?artid=146100869
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用hutool封装http请求
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     今天写代码的时候，发现需要使用后台进行http请求的时候，发现自己没有一个请求的封装，这就很不好了，于是乎就要一劳永逸自己写一个工具类进行调用，话不多说开干！
    </p>
    <h3>
     1.首先引入pom
    </h3>
    <blockquote>
     <pre>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt; 
&lt;!--JSON--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
            &lt;version&gt;${fastjson.version}&lt;/version&gt;
        &lt;/dependency&gt;
&lt;!--    hutool工具    --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;cn.hutool&lt;/groupId&gt;
            &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;
            &lt;version&gt;5.8.9&lt;/version&gt;
        &lt;/dependency&gt; </pre>
    </blockquote>
    <h3>
     2.封装返回处理
    </h3>
    <p>
     比较简单的写了一下，使用自己项目里的就可以
    </p>
    <pre><code>public enum ResultCode {
    /* 成功 */
    SUCCESS(200, "成功"),

    /* 默认失败 */
    COMMON_FAIL(999, "失败"),

    /* 参数错误：1000～1999 */
    PARAM_NOT_VALID(1001, "参数无效"),
    PARAM_IS_BLANK(1002, "参数为空"),
    PARAM_TYPE_ERROR(1003, "参数类型错误"),
    PARAM_NOT_COMPLETE(1004, "参数缺失"),

    /* 业务错误 */
    NO_PERMISSION(3001, "没有权限");
    private Integer code;
    private String message;

    ResultCode(Integer code, String message) {
        this.code = code;
        this.message = message;
    }

    public Integer getCode() {
        return code;
    }

    public void setCode(Integer code) {
        this.code = code;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    /**
     * 根据code获取message
     *
     * @param code
     * @return
     */
    public static String getMessageByCode(Integer code) {
        for (ResultCode ele : values()) {
            if (ele.getCode().equals(code)) {
                return ele.getMessage();
            }
        }
        return null;
    }
}</code></pre>
    <pre><code>/**
 * @Author: zm
 * @Description: 统一返回实体
 * @Date: 2022/4/24 8:51
 */
public class JsonResult&lt;T&gt; implements Serializable {
    private Boolean success;
    private Integer errorCode;
    private String errorMsg;
    private T data;

    public JsonResult() {
    }

    public JsonResult(boolean success) {
        this.success = success;
        this.errorCode = success ? ResultCode.SUCCESS.getCode() : ResultCode.COMMON_FAIL.getCode();
        this.errorMsg = success ? ResultCode.SUCCESS.getMessage() : ResultCode.COMMON_FAIL.getMessage();
    }

    public JsonResult(boolean success, ResultCode resultEnum) {
        this.success = success;
        this.errorCode = success ? ResultCode.SUCCESS.getCode() : (resultEnum == null ? ResultCode.COMMON_FAIL.getCode() : resultEnum.getCode());
        this.errorMsg = success ? ResultCode.SUCCESS.getMessage() : (resultEnum == null ? ResultCode.COMMON_FAIL.getMessage() : resultEnum.getMessage());
    }

    public JsonResult(boolean success, T data) {
        this.success = success;
        this.errorCode = success ? ResultCode.SUCCESS.getCode() : ResultCode.COMMON_FAIL.getCode();
        this.errorMsg = success ? ResultCode.SUCCESS.getMessage() : ResultCode.COMMON_FAIL.getMessage();
        this.data = data;
    }

    public JsonResult(boolean success, ResultCode resultEnum, T data) {
        this.success = success;
        this.errorCode = success ? ResultCode.SUCCESS.getCode() : (resultEnum == null ? ResultCode.COMMON_FAIL.getCode() : resultEnum.getCode());
        this.errorMsg = success ? ResultCode.SUCCESS.getMessage() : (resultEnum == null ? ResultCode.COMMON_FAIL.getMessage() : resultEnum.getMessage());
        this.data = data;
    }

    public Boolean getSuccess() {
        return success;
    }

    public void setSuccess(Boolean success) {
        this.success = success;
    }

    public Integer getErrorCode() {
        return errorCode;
    }

    public void setErrorCode(Integer errorCode) {
        this.errorCode = errorCode;
    }

    public String getErrorMsg() {
        return errorMsg;
    }

    public void setErrorMsg(String errorMsg) {
        this.errorMsg = errorMsg;
    }

    public T getData() {
        return data;
    }

    public void setData(T data) {
        this.data = data;
    }
}</code></pre>
    <pre><code>
public class ResultTool {
    public static &lt;T&gt; JsonResult&lt;T&gt; success() {
        return new JsonResult&lt;T&gt;(true);
    }

    public static &lt;T&gt; JsonResult&lt;T&gt; success(T data) {
        return new JsonResult&lt;T&gt;(true, data);
    }

    public static &lt;T&gt; JsonResult&lt;T&gt; fail() {
        return new JsonResult&lt;T&gt;(false);
    }

    public static &lt;T&gt; JsonResult&lt;T&gt; fail(ResultCode resultEnum) {
        return new JsonResult&lt;T&gt;(false, resultEnum);
    }
    public static &lt;T&gt; JsonResult&lt;T&gt; fail(boolean success,T data) {
        return new JsonResult&lt;T&gt;(false, data);
    }
}</code></pre>
    <h3>
     3.封装http请求
    </h3>
    <p>
     我们基于hutool的HttpRequest请求进行自己代码的封装
    </p>
    <pre><code>package com.zm.test.utils;

import cn.hutool.core.map.MapUtil;
import cn.hutool.http.*;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.zm.test.commons.result.JsonResult;
import com.zm.test.commons.result.ResultTool;
import lombok.extern.slf4j.Slf4j;

import java.util.HashMap;
import java.util.Map;

/**
 * http请求处理
 * 默认json格式请求
 * @author zm
 * @date 2025/3/7
 */
@Slf4j
public class HttpUtils {

    private static final Map&lt;String,String&gt; initHeaderMap= new HashMap&lt;&gt;();
    static {
        initHeaderMap.put(Header.CONTENT_TYPE.getValue(), ContentType.JSON.getValue());
    }

    /**
     * get请求
     * @param url 路径
     * @param clazz 返回实体
     * @param &lt;T&gt; 自定义实体
     * @return T
     */
    public static &lt;T&gt; JsonResult&lt;T&gt; httpGet(String url, Class&lt;T&gt; clazz){
        try{
            HttpResponse getResponse=HttpRequest.get(url)
                    .headerMap(initHeaderMap,false)
                    .execute();
            String body=getResponse.body();
            if(getResponse.isOk()){
                return ResultTool.success(JSONObject.parseObject(body, clazz));
            }
            log.info("GET请求错误：返回状态码：{}，返回信息：{}",getResponse.getStatus(),body);
            return ResultTool.fail(false,JSONObject.parseObject(body, clazz));
        }catch (HttpException e){
            log.error("GET请求失败：{}",e.getMessage());
            return ResultTool.fail();
        }
    }

    /**
     * get请求
     * @param url 路径
     * @param param 请求参数
     * @param clazz 返回实体
     * @param &lt;T&gt; 自定义实体
     * @return T
     */
    public static &lt;T&gt; JsonResult&lt;T&gt; httpGet(String url, Map&lt;String,Object&gt; param,Class&lt;T&gt; clazz){
        try{
            HttpResponse getResponse=HttpRequest.get(url)
                    .headerMap(initHeaderMap,false)
                    .form(param)
                    .execute();
            String body=getResponse.body();
            if(getResponse.isOk()){
                return ResultTool.success(JSONObject.parseObject(body, clazz));
            }
            log.info("GET请求错误：返回状态码：{}，返回信息：{}",getResponse.getStatus(),body);
            return ResultTool.fail(false,JSONObject.parseObject(body, clazz));
        }catch (HttpException e){
            log.error("GET请求失败：{}",e.getMessage());
            return ResultTool.fail();
        }
    }

    /**
     * get请求自定义header
     * @param url 路径
     * @param param 请求参数
     * @param header 请求头
     * @param clazz 返回实体
     * @param &lt;T&gt; 自定义实体
     * @return T
     */
    public static &lt;T&gt; JsonResult&lt;T&gt; httpGet(String url,Map&lt;String,Object&gt; param,Map&lt;String,String&gt; header, Class&lt;T&gt; clazz){
        try{
            HttpResponse getResponse=HttpRequest.get(url)
                    .headerMap(MapUtil.isEmpty(header)?initHeaderMap:header,false)
                    .form(param)
                    .execute();
            String body=getResponse.body();
            if(getResponse.isOk()){
                return ResultTool.success(JSONObject.parseObject(body, clazz));
            }
            log.info("GET请求错误：返回状态码：{}，返回信息：{}",getResponse.getStatus(),body);
            return ResultTool.fail(false,JSONObject.parseObject(body, clazz));
        }catch (HttpException e){
            log.error("GET请求失败：{}",e.getMessage());
            return ResultTool.fail();
        }
    }

    /**
     * post请求
     * @param url 路径
     * @param clazz 返回实体
     * @param &lt;T&gt; 自定义实体
     * @return T
     */
    public static &lt;T&gt; JsonResult&lt;T&gt; httpPost(String url,Map&lt;String,Object&gt; param, Class&lt;T&gt; clazz){
        try{
            HttpResponse getResponse=HttpRequest.post(url)
                    .headerMap(initHeaderMap,false)
                    .form(param)
                    .execute();
            String body=getResponse.body();
            if(getResponse.isOk()){
                return ResultTool.success(JSONObject.parseObject(body, clazz));
            }
            log.info("POST请求错误：返回状态码：{}，返回信息：{}",getResponse.getStatus(),body);
            return ResultTool.fail(false,JSONObject.parseObject(body, clazz));
        }catch (HttpException e){
            log.error("POST请求失败：{}",e.getMessage());
            return ResultTool.fail();
        }
    }

    /**
     * post请求
     * @param url 路径
     * @param header 请求头
     * @param clazz 返回实体
     * @param &lt;T&gt; 自定义实体
     * @return T
     */
    public static &lt;T&gt; JsonResult&lt;T&gt; httpPost(String url,Map&lt;String,Object&gt; param,Map&lt;String,String&gt; header, Class&lt;T&gt; clazz){
        try{
            HttpResponse getResponse=HttpRequest.post(url)
                    .headerMap(MapUtil.isEmpty(header)?initHeaderMap:header,false)
                    .form(param)
                    .execute();
            String body=getResponse.body();
            if(getResponse.isOk()){
                return ResultTool.success(JSONObject.parseObject(body, clazz));
            }
            log.info("POST请求错误：返回状态码：{}，返回信息：{}",getResponse.getStatus(),body);
            return ResultTool.fail(false,JSONObject.parseObject(body, clazz));
        }catch (HttpException e){
            log.error("POST请求失败：{}",e.getMessage());
            return ResultTool.fail();
        }
    }

    /**
     * post请求
     * @param url 路径
     * @param param 请求传参
     * @param clazz 返回实体
     * @param &lt;T&gt; 自定义实体
     * @return T
     */
    public static &lt;T,E&gt; JsonResult&lt;T&gt; httpPost(String url,E param, Class&lt;T&gt; clazz){
        try{
            HttpResponse getResponse=HttpRequest.post(url)
                    .headerMap(initHeaderMap,false)
                    .body(JSON.toJSONString(param))
                    .execute();
            String body=getResponse.body();
            if(getResponse.isOk()){
                return ResultTool.success(JSONObject.parseObject(body, clazz));
            }
            log.info("POST请求错误：返回状态码：{}，返回信息：{}",getResponse.getStatus(),body);
            return ResultTool.fail(false,JSONObject.parseObject(body, clazz));
        }catch (HttpException e){
            log.error("POST请求失败：{}",e.getMessage());
            return ResultTool.fail();
        }
    }

    /**
     * post请求
     * @param url 路径
     * @param param 请求传参
     * @param header 请求头
     * @param clazz 返回实体
     * @param &lt;T&gt; 自定义实体
     * @return T
     */
    public static &lt;T,E&gt; JsonResult&lt;T&gt; httpPost(String url,E param,Map&lt;String,String&gt; header, Class&lt;T&gt; clazz){
        try{
            HttpResponse getResponse=HttpRequest.post(url)
                    .headerMap(MapUtil.isEmpty(header)?initHeaderMap:header,false)
                    .body(JSON.toJSONString(param))
                    .execute();
            String body=getResponse.body();
            if(getResponse.isOk()){
                return ResultTool.success(JSONObject.parseObject(body, clazz));
            }
            log.info("POST请求错误：返回状态码：{}，返回信息：{}",getResponse.getStatus(),body);
            return ResultTool.fail(false,JSONObject.parseObject(body, clazz));
        }catch (HttpException e){
            log.error("POST请求失败：{}",e.getMessage());
            return ResultTool.fail();
        }
    }
}
</code></pre>
    <p>
     完成收工！！！
    </p>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f7a3133323431312f:61727469636c652f64657461696c732f313436313030383639" class_="artid" style="display:none">
 </p>
</div>


