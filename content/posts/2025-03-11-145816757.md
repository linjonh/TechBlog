---
layout: post
title: "Qt-驾校考试系统项目实现"
date: 2025-03-11 19:50:06 +0800
description: "1.只有自己写的类才需要定义自己的信号，如果调用已有的组件，是不需要自己来写信号的。，以下是查到的区别，对于动态分配内存这一点的理解是：前者调用的时候不需要使用。：如果要控制一个界面A运行完毕，关闭当前界面A然后打开另一个界面B，在。：什么时候需要创建c++类文件，什么时候需要创建Qt设计师界面类，函数里面做如下实现，同时在界面A的相应确认打开界面B的位置添加。，定义指针和不定义指针的情况有什么区别，调用的时候都是通过。：什么时候需要定义信号，当前案例里面，自定义的。按钮实现考试的提交，也是属于Qt按钮。"
keywords: "Qt 驾校考试系统项目实现"
categories: ['Qt']
tags: ['开发语言', 'Qt']
artid: "145816757"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145816757
    alt: "Qt-驾校考试系统项目实现"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145816757
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145816757
cover: https://bing.ee123.net/img/rand?artid=145816757
image: https://bing.ee123.net/img/rand?artid=145816757
img: https://bing.ee123.net/img/rand?artid=145816757
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Qt 驾校考试系统项目实现
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="__0">
     </a>
     一 登录界面
    </h3>
    <ul>
     <li>
      创建项目的时候选择
      <code>
       Dialog
      </code>
     </li>
     <li>
      图片大小和背景框不匹配时，可以勾选
      <code>
       scaledContents
      </code>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2ab992f7f26f4ae78b3a098f40650af3.png#pic_center" width="800">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1f613567b7e4435ab3fed9a4c8219e52.png"/>
      </img>
     </li>
    </ul>
    <h4>
     <a id="1___6">
     </a>
     1 正则表达式 验证用户密码和邮箱
    </h4>
    <pre><code>// \\w 是为了在 C++ 字符串中正确表示正则表达式中的 \w。如果你只写
 \w，C++ 会将其解释为一个转义字符，而不是正则表达式中的 \w
//正则表达式里面表示. ，就需要使用\.，进一步的，当前正则表达式是在字符串里面，需要加一个\来进行转义
//[a-zA-Z0-9\\-]+: 匹配一个字母（a-zA-Z）、数字（0-9）或连字符（-）。连字符 - 被转义为 
\\-，以确保它被当作普通字符而不是范围符号,
//, +表示前面字符出现一次或多次, +不需要转义字符
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ce69816c6f5b4ae781271754c93bde00.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2885b750e59a4ea6b056f8f79986d34e.png">
       []
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f1cd9ac0d27d4dac86036fe3851f0d17.png"/>
      </img>
     </img>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">DialogLogin</span><span class="token double-colon punctuation">::</span><span class="token function">on_pushButtonLogin_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//要求必须以字母开头，6-18个字符,\w表示匹配字母数字或下划线</span>
    <span class="token comment">// \\w 是为了在 C++ 字符串中正确表示正则表达式中的 \w。如果你只写 \w，C++ 会将其解释为一个转义字符，而不是正则表达式中的 \w</span>
    <span class="token comment">//正则表达式里面表示. ，就需要使用\.，进一步的，当前正则表达式是在字符串里面，需要加一个\来进行转义</span>
    <span class="token comment">//[a-zA-Z0-9\\-]+: 匹配一个字母（a-zA-Z）、数字（0-9）或连字符（-）。连字符 - 被转义为 \\-，以确保它被当作普通字符而不是范围符号,</span>
    <span class="token comment">//, +表示前面字符出现一次或多次, +不需要转义字符</span>

    QRegExp <span class="token function">mail</span><span class="token punctuation">(</span><span class="token string">"^[a-zA-Z][\\w]{5,17}@([a-zA-Z0-9\\-]+\\.)+[a-zA-Z]{2,6}$"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">bool</span> res <span class="token operator">=</span> mail<span class="token punctuation">.</span><span class="token function">exactMatch</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//验证邮箱的合法性</span>
        <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"非法邮箱，请重新输入"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">setFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//验证用户和密码的一致性</span>
        QString code <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>lineEditCode<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QString user <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"密码不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//QString filename = FILENAME;</span>
        QString filename <span class="token operator">=</span> <span class="token string">"I:/QT_PRACTICE/myExam22/account.txt"</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//把文本编辑器的内容保存到文本</span>
            QFile <span class="token function">qfile</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> filename<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> qfile<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"文件打开失败"</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QStringList codeList<span class="token punctuation">;</span>
            QStringList userList<span class="token punctuation">;</span>
            QTextStream <span class="token function">stream</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>qfile<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>stream<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    QString line <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 分割邮箱和密码</span>
                    QStringList list <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        QString email <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        QString password <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        codeList<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        userList<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>

            qfile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">bool</span> succeedLabel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> codeList<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                 <span class="token keyword">if</span><span class="token punctuation">(</span>code <span class="token operator">==</span> codeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> user <span class="token operator">==</span> userList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"成功登录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    succeedLabel <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>succeedLabel <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                 <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"用户名或密码错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 ui<span class="token operator">-&gt;</span>lineEditCode<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">setFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="2__91">
     </a>
     2 知识点
    </h4>
    <ul>
     <li>
      <em>
       <strong>
        知识点1
       </strong>
      </em>
      ：只有第一次调用的时候需要设置起始点，之后就不需要了，否则位置坐标不对
      <code>
       m_layout-&gt;addWidget(m_textEdit,0,0,1,10); //起始位置 0行，0列，行宽和列宽分别是1和10
      </code>
      ,后面调用 ``
      <code>
       m_layout-&gt;addWidget(title,1,k);
      </code>
      ,`
     </li>
     <li>
      <em>
       <strong>
        知识点2
       </strong>
      </em>
      ：自定义组件我看有两种方式，一种是在头文件定义指针之后，在函数里面使用的时候，重新new一个对象，另一种是，头文件定义指针之后，cpp文件就直接用，不再new了。啥时候要new新的对象，啥时候不需要new呢？
      <br/>
      （a）头文件定义类对象指针，但是并没有分配内存空间，所以后面用的时候是必须要new
      <code>
       m_textEdit = new QTextEdit(this);
      </code>
      来进行空间的分配的,否则就成页指针了
      <br/>
      （b）至于什么时候new,那取决于是整个程序只有一个组件，还是有多个组件，如果是多个组件，那么在不同地方调用的时候，都需要new一个新的内存空间，但是如果只是一个组件，那就只需要在构造函数里面进行一次空间分配，然后后面函数就可以直接使用了
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ed181e3da69a4cf6a83db9ba2023a149.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/66c10c33285d49b796b8eedec98cb980.png"/>
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7712aeb3f94443ee90eb45ec626edeb5.png"/>
    </p>
    <ul>
     <li>
      <p>
       <em>
        <strong>
         知识点3
        </strong>
       </em>
       ：什么时候需要定义信号，当前案例里面，自定义的
       <code>
        pushButon
       </code>
       按钮实现考试的提交，也是属于Qt按钮
       <br/>
       1.只有自己写的类才需要定义自己的信号，如果调用已有的组件，是不需要自己来写信号的
       <br/>
       2.QT内部组件会自动发送信号，不需要手动发送信号
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/69fbdf86e6404905991abd1d096fba30.png"/>
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/31863a8824a54865b864a9055bf57513.png"/>
      </p>
     </li>
     <li>
      <p>
       <em>
        <strong>
         知识点4
        </strong>
       </em>
       ：什么时候需要创建c++类文件，什么时候需要创建Qt设计师界面类，
       <code>
        .cpp
       </code>
       类文件的情况::
       <code>
        Graphics View组件对应的类对象是QGraphicsView，是标准类对象，无法进行修改，需要自定义一个视图，去重载该类的鼠标事件
       </code>
       <br/>
       ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/a22cd8c5986449eaaa8a8784d0e3b392.png #pic_center =500x)
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f7c30da20bc94c14b0a9e09e26263cff.png#pic_center" width="500"/>
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/680f19fcc6d04e0898cfc8ea7cb0ce44.png#pic_center" width="500"/>
      </p>
     </li>
     <li>
      <p>
       <em>
        <strong>
         知识点5
        </strong>
       </em>
       ：如果要控制一个界面A运行完毕，关闭当前界面A然后打开另一个界面B，在
       <code>
        main
       </code>
       函数里面做如下实现，同时在界面A的相应确认打开界面B的位置添加
       <code>
        done(Accepted);
       </code>
       语句
      </p>
     </li>
     <li>
      <p>
       <em>
        <strong>
         知识点6
        </strong>
       </em>
       ：
       <code>
        QVector&lt;Question&gt; Data; //存放题库
       </code>
       和
       <code>
        QVector&lt;QButtonGroup*&gt; btnGroup;
       </code>
       ，定义指针和不定义指针的情况有什么区别，调用的时候都是通过
       <code>
        .
       </code>
       来调用，而不是
       <code>
        -&gt;
       </code>
       ，以下是查到的区别，对于动态分配内存这一点的理解是：前者调用的时候不需要使用
       <code>
        new
       </code>
       来为对象分配内存空间，后者需要
      </p>
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token keyword">private</span><span class="token operator">:</span>
    QVector<span class="token operator">&lt;</span>Question<span class="token operator">&gt;</span> Data<span class="token punctuation">;</span>  <span class="token comment">//存放题库</span>
    QVector<span class="token operator">&lt;</span>QButtonGroup<span class="token operator">*</span><span class="token operator">&gt;</span> btnGroup<span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-cpp">当前案例使用
         <span class="token comment">//判断是单选还是多选</span>
        QButtonGroup <span class="token operator">*</span>group <span class="token operator">=</span> <span class="token keyword">new</span> QButtonGroup<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isSigleQuestion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//单选</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                QRadioButton <span class="token operator">*</span>btn <span class="token operator">=</span> <span class="token keyword">new</span> QRadioButton<span class="token punctuation">;</span>
                btn<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>quesChoices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
                group<span class="token operator">-&gt;</span><span class="token function">addButton</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>btn<span class="token punctuation">,</span>rwoIndex <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>k<span class="token operator">%</span>eachLineShow_num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//多选</span>
            group<span class="token operator">-&gt;</span><span class="token function">setExclusive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                QCheckBox <span class="token operator">*</span>checkBox <span class="token operator">=</span> <span class="token keyword">new</span> QCheckBox<span class="token punctuation">;</span>
                checkBox<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>quesChoices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
                group<span class="token operator">-&gt;</span><span class="token function">addButton</span><span class="token punctuation">(</span>checkBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>checkBox<span class="token punctuation">,</span>rwoIndex <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>k<span class="token operator">%</span>eachLineShow_num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        btnGroup<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-bash">            <span class="token keyword">case</span> READ_ANSER:
                if<span class="token punctuation">(</span>line.at<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                      line.remove<span class="token punctuation">(</span><span class="token number">0,1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      //qDebug<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"答案:"</span><span class="token operator">&lt;&lt;</span> line<span class="token punctuation">;</span>
                      anse.append<span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>

                      Question ques<span class="token punctuation">(</span>titelLable, anse<span class="token punctuation">)</span><span class="token punctuation">;</span>
                      //qDebug<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"choiceLabel.size():"</span><span class="token operator">&lt;&lt;</span> choiceLabel.size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      for<span class="token punctuation">(</span>int i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> choiceLabel.size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                          QPair<span class="token operator">&lt;</span>QString, int<span class="token operator">&gt;</span> temp<span class="token punctuation">;</span>
                            ques.quesChoices.push_back<span class="token punctuation">(</span>QPair<span class="token operator">&lt;</span>QString, int<span class="token operator">&gt;</span><span class="token punctuation">(</span>choiceLabel<span class="token punctuation">[</span>i<span class="token punctuation">]</span>,0<span class="token punctuation">))</span><span class="token punctuation">;</span>
                      <span class="token punctuation">}</span>
                      Data.append<span class="token punctuation">(</span>ques<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/afb0dc2fdea3489d9bf7b00d41becec3.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d1cac92c031d4587b36472454256e008.png"/>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    DialogLogin w<span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QDialog<span class="token double-colon punctuation">::</span>Accepted<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        QDialogExamUI ed<span class="token punctuation">;</span>
        ed<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
    <h4>
     <a id="3__addnewcppQDialogcpp_184">
     </a>
     3 代码及文件创建
     <code>
      add-&gt;new-&gt;cpp
     </code>
     ，选择或者填入继承
     <code>
      QDialog
     </code>
     类，创建.cpp文件，注意，头文件要做相应的修改
    </h4>
    <ul>
     <li>
      效果
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e05015e18d1d4bfeaae524fd0ce5b7a1.png"/>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7704a7fdfcd44b1d9edbabcc5ae8589e.png"/>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a06c129623554275b3b2e5de65d4f2c3.png"/>
    </p>
    <p>
     <code>
      "dialoglogin.h"
     </code>
    </p>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">DIALOGLOGIN_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DIALOGLOGIN_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDialog&gt;</span></span>

QT_BEGIN_NAMESPACE
<span class="token keyword">namespace</span> Ui <span class="token punctuation">{<!-- --></span> <span class="token keyword">class</span> <span class="token class-name">DialogLogin</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
QT_END_NAMESPACE

<span class="token keyword">class</span> <span class="token class-name">DialogLogin</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QDialog</span></span>
<span class="token punctuation">{<!-- --></span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">DialogLogin</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">DialogLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">on_pushButtonLogin_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pushButtonExit_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    Ui<span class="token double-colon punctuation">::</span>DialogLogin <span class="token operator">*</span>ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// DIALOGLOGIN_H</span></span>

</code></pre>
    <ul>
     <li>
      <code>
       "qdialogexamui.h"
      </code>
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">QDIALOGEXAMUI_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">QDIALOGEXAMUI_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDialog&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTextEdit&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QGridLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"question.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCheckBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QRadioButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QButtonGroup&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QAbstractButton&gt;</span>  <span class="token comment">//是 QRadioButton和 QCheckBox的父类</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token keyword">enum</span> <span class="token class-name">State</span><span class="token punctuation">{<!-- --></span>
    BEGIN<span class="token punctuation">,</span>
    READ_TILTE<span class="token punctuation">,</span>
    READ_CHOICE<span class="token punctuation">,</span>
    READ_ANSER
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">QDialogExamUI</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QDialog</span></span>
<span class="token punctuation">{<!-- --></span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">QDialogExamUI</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">QDialogExamUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">private</span><span class="token operator">:</span>
    QTextEdit <span class="token operator">*</span>m_textEdit<span class="token punctuation">;</span>  <span class="token comment">//显示考试内容</span>
    QGridLayout <span class="token operator">*</span>m_layout<span class="token punctuation">;</span>  <span class="token comment">//布局管理器</span>

    <span class="token keyword">void</span> <span class="token function">initUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//初始化组件</span>
    <span class="token keyword">void</span> <span class="token function">initSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">initContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//解析文本内容</span>
    <span class="token keyword">void</span> <span class="token function">initShowContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> <span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QVector<span class="token operator">&lt;</span>Question<span class="token operator">&gt;</span> Data<span class="token punctuation">;</span>  <span class="token comment">//存放题库</span>
    QVector<span class="token operator">&lt;</span>QButtonGroup<span class="token operator">*</span><span class="token operator">&gt;</span> btnGroup<span class="token punctuation">;</span>
    QPushButton <span class="token operator">*</span>m_submitBtn<span class="token punctuation">;</span>
    <span class="token keyword">int</span> eachLineShow_num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> slots<span class="token operator">:</span> <span class="token comment">//槽函数</span>
    <span class="token keyword">void</span> <span class="token function">on_m_submitBtn_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> clicked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// QDIALOGEXAMUI_H</span></span>
</code></pre>
    <ul>
     <li>
      <code>
       "question.h"
      </code>
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">QUESTION_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">QUESTION_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QString&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStringList&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPair&gt;</span></span>
<span class="token keyword">class</span> <span class="token class-name">Question</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
     <span class="token function">Question</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString quesIndex<span class="token punctuation">,</span> <span class="token keyword">const</span> QString quesAnser<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">Question</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">Question</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">Question</span><span class="token punctuation">(</span><span class="token keyword">const</span> Question <span class="token operator">&amp;</span>ques<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//拷贝构造函数</span>
<span class="token comment">//     QVector&lt;QPair&lt;QString,QString&gt;&gt; quesChoices; // &lt;QPair &lt;选项索引，选项内容&gt;&gt;  考虑到绘制题目的时候不需要选项内容</span>
     QVector<span class="token operator">&lt;</span>QPair<span class="token operator">&lt;</span>QString<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> quesChoices<span class="token punctuation">;</span>  <span class="token comment">// &lt;QPair &lt;选项索引，选项是否被选中&gt;&gt;</span>
     <span class="token keyword">bool</span> <span class="token function">isSigleQuestion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//判断是否是单选</span>
     QString <span class="token function">get_quesIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     QStringList <span class="token function">get_quesAnser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">int</span> <span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    QString quesIndex<span class="token punctuation">;</span>     <span class="token comment">//题目编号</span>
    QString quesAnser<span class="token punctuation">;</span> <span class="token comment">//题目答案</span>
    <span class="token keyword">int</span> choiceNum<span class="token punctuation">;</span>         <span class="token comment">//选项数量</span>
    <span class="token keyword">bool</span> is_single_ques<span class="token punctuation">;</span>   <span class="token comment">//1 单选，0多选</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// QUESTION_H</span></span>

</code></pre>
    <ul>
     <li>
      <code>
       "dialoglogin.cpp"
      </code>
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"dialoglogin.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_dialoglogin.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMessageBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FILENAME</span> <span class="token string">"account.txt"</span></span>
<span class="token class-name">DialogLogin</span><span class="token double-colon punctuation">::</span><span class="token function">DialogLogin</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QDialog</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>DialogLogin<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setWindowFlags</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Dialog <span class="token operator">|</span> Qt<span class="token double-colon punctuation">::</span>WindowCloseButtonHint<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//关掉默认的右上角的叉叉</span>
    <span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"驾校考试系统"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">DialogLogin</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">DialogLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">delete</span> ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">DialogLogin</span><span class="token double-colon punctuation">::</span><span class="token function">on_pushButtonLogin_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//要求必须以字母开头，6-18个字符,\w表示匹配字母数字或下划线</span>
    <span class="token comment">// \\w 是为了在 C++ 字符串中正确表示正则表达式中的 \w。如果你只写 \w，C++ 会将其解释为一个转义字符，而不是正则表达式中的 \w</span>
    <span class="token comment">//正则表达式里面表示. ，就需要使用\.，进一步的，当前正则表达式是在字符串里面，需要加一个\来进行转义</span>
    <span class="token comment">//[a-zA-Z0-9\\-]+: 匹配一个字母（a-zA-Z）、数字（0-9）或连字符（-）。连字符 - 被转义为 \\-，以确保它被当作普通字符而不是范围符号,</span>
    <span class="token comment">//, +表示前面字符出现一次或多次, +不需要转义字符</span>

    QRegExp <span class="token function">mail</span><span class="token punctuation">(</span><span class="token string">"^[a-zA-Z][\\w]{5,17}@([a-zA-Z0-9\\-]+\\.)+[a-zA-Z]{2,6}$"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">bool</span> res <span class="token operator">=</span> mail<span class="token punctuation">.</span><span class="token function">exactMatch</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//验证邮箱的合法性</span>
        <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"非法邮箱，请重新输入"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">setFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//验证用户和密码的一致性</span>
        QString code <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>lineEditCode<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QString user <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"密码不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//QString filename = FILENAME;</span>
        QString filename <span class="token operator">=</span> <span class="token string">"I:/QT_PRACTICE/myExam22/account.txt"</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//把文本编辑器的内容保存到文本</span>
            QFile <span class="token function">qfile</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> filename<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> qfile<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"文件打开失败"</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QStringList codeList<span class="token punctuation">;</span>
            QStringList userList<span class="token punctuation">;</span>
            QTextStream <span class="token function">stream</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>qfile<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>stream<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    QString line <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 分割邮箱和密码</span>
                    QStringList list <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        QString email <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        QString password <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        codeList<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        userList<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>

            qfile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">bool</span> succeedLabel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> codeList<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                 <span class="token keyword">if</span><span class="token punctuation">(</span>code <span class="token operator">==</span> codeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> user <span class="token operator">==</span> userList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"成功登录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    succeedLabel <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token function">done</span><span class="token punctuation">(</span>Accepted<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>succeedLabel <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                 <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"用户名或密码错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 ui<span class="token operator">-&gt;</span>lineEditCode<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 ui<span class="token operator">-&gt;</span>lineEditLogin<span class="token operator">-&gt;</span><span class="token function">setFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">DialogLogin</span><span class="token double-colon punctuation">::</span><span class="token function">on_pushButtonExit_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      <code>
       "qdialogexamui.cpp"
      </code>
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"qdialogexamui.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMessageBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTextStream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFont&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QAbstractButton&gt;</span></span>
<span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token function">QDialogExamUI</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">QDialog</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
      m_textEdit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTextEdit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      m_layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGridLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      m_submitBtn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">initUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">initContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">initShowContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">initSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">QDialogExamUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token function">initUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//-----------------主窗体初始化----------------------------</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置窗体的最小大小为 800x600</span>

    <span class="token comment">//-----------------布局管理器边界设置的初始化----------------------------</span>
    m_layout<span class="token operator">-&gt;</span><span class="token function">setMargin</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_layout<span class="token operator">-&gt;</span><span class="token function">setSpacing</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//-----------------文本编辑器----------------------------</span>
<span class="token comment">//    //显示文本</span>
<span class="token comment">//    m_textEdit-&gt;setMaximumWidth(200);</span>
<span class="token comment">//    m_textEdit-&gt;setMaximumHeight(900);</span>

    <span class="token comment">//设置显示文本的字体和大小</span>
    QFont font <span class="token operator">=</span> m_textEdit<span class="token operator">-&gt;</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//先将字体取出来</span>
    font<span class="token punctuation">.</span><span class="token function">setPointSize</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//字体</span>
    font<span class="token punctuation">.</span><span class="token function">setFamily</span><span class="token punctuation">(</span><span class="token string">"微软雅黑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_textEdit<span class="token operator">-&gt;</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//m_layout-&gt;addWidget(m_textEdit,0,1);</span>
    m_layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>m_textEdit<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//起始位置 0行，0列，行宽和列宽分别是1和10</span>


<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token function">initSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//-----------------考试提交按钮----------------------------</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>m_submitBtn<span class="token punctuation">,</span><span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">on_m_submitBtn_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token function">initShowContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QFont font <span class="token operator">=</span> m_textEdit<span class="token operator">-&gt;</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//先将字体取出来</span>
     font<span class="token punctuation">.</span><span class="token function">setPointSize</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//字体</span>
     font<span class="token punctuation">.</span><span class="token function">setFamily</span><span class="token punctuation">(</span><span class="token string">"微软雅黑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     m_textEdit<span class="token operator">-&gt;</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//-----------------显示题目和选项按钮----------------------------</span>

    <span class="token keyword">int</span> maxChoiceNum <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> rwoIndex <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>eachLineShow_num <span class="token operator">&gt;</span> Data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        eachLineShow_num <span class="token operator">=</span> Data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> Data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">%</span> eachLineShow_num <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            rwoIndex <span class="token operator">+=</span> maxChoiceNum <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token comment">//获取每行显示题目数量的最大题目数</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> eachLineShow_num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> maxChoiceNum<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                maxChoiceNum <span class="token operator">=</span> Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//显示标题</span>
         QLabel <span class="token operator">*</span>title <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         title<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"第"</span> <span class="token operator">+</span> Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_quesIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">"题"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         title<span class="token operator">-&gt;</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//         m_layout-&gt;addWidget(title,0,0,1,k);</span>
         m_layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>rwoIndex<span class="token punctuation">,</span>k<span class="token operator">%</span>eachLineShow_num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>

        <span class="token comment">//显示选项</span>

         <span class="token comment">//判断是单选还是多选</span>
        QButtonGroup <span class="token operator">*</span>group <span class="token operator">=</span> <span class="token keyword">new</span> QButtonGroup<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isSigleQuestion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//单选</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                QRadioButton <span class="token operator">*</span>btn <span class="token operator">=</span> <span class="token keyword">new</span> QRadioButton<span class="token punctuation">;</span>
                btn<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>quesChoices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
                group<span class="token operator">-&gt;</span><span class="token function">addButton</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>btn<span class="token punctuation">,</span>rwoIndex <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>k<span class="token operator">%</span>eachLineShow_num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//多选</span>
            group<span class="token operator">-&gt;</span><span class="token function">setExclusive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                QCheckBox <span class="token operator">*</span>checkBox <span class="token operator">=</span> <span class="token keyword">new</span> QCheckBox<span class="token punctuation">;</span>
                checkBox<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>quesChoices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
                group<span class="token operator">-&gt;</span><span class="token function">addButton</span><span class="token punctuation">(</span>checkBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>checkBox<span class="token punctuation">,</span>rwoIndex <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>k<span class="token operator">%</span>eachLineShow_num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        btnGroup<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>


    <span class="token comment">//-----------------考试提交按钮----------------------------</span>
    m_submitBtn<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"提交"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_submitBtn<span class="token operator">-&gt;</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>m_submitBtn<span class="token punctuation">,</span>rwoIndex<span class="token operator">+</span>maxChoiceNum<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>eachLineShow_num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">double</span> socre <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span>Data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        QList<span class="token operator">&lt;</span>QAbstractButton<span class="token operator">*</span><span class="token operator">&gt;</span> buttons <span class="token operator">=</span> btnGroup<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">buttons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QStringList ans <span class="token operator">=</span> Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get_quesAnser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断是单选还是多选</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isSigleQuestion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span>buttons<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>buttons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> buttons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    socre <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> ans_num <span class="token operator">=</span> ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span>buttons<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token comment">//遍历答案进行对比</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>buttons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span>ans_num<span class="token punctuation">;</span>a <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                      <span class="token comment">//  qDebug() &lt;&lt;"buttons[i]-&gt;text() = " &lt;&lt; buttons[i]-&gt;text() &lt;&lt; ",a = " &lt;&lt; a &lt;&lt; ",ans[a] =  " &lt;&lt; ans[a];</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>buttons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ans<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                            counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                   <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> ans_num<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                socre <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> socre<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token function">on_m_submitBtn_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> clicked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">bool</span> ret <span class="token operator">=</span> <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"是否确认提交"</span><span class="token punctuation">,</span>QMessageBox<span class="token double-colon punctuation">::</span>Ok <span class="token operator">|</span> QMessageBox<span class="token double-colon punctuation">::</span>Cancel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"ret = "</span> <span class="token operator">&lt;&lt;</span> ret<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//判断是否题目没有完成</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span>Data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            QAbstractButton <span class="token operator">*</span>checkedButton <span class="token operator">=</span> btnGroup<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">checkedButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>checkedButton<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"还有选项为完成！"</span><span class="token punctuation">,</span>QMessageBox<span class="token double-colon punctuation">::</span>Ok<span class="token punctuation">)</span><span class="token punctuation">;</span>
                done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">double</span> score <span class="token operator">=</span> <span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">bool</span> ret2 <span class="token operator">=</span><span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"提示"</span><span class="token punctuation">,</span><span class="token string">"您的考试分数是:"</span> <span class="token operator">+</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">number</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">",是否退出考试？"</span><span class="token punctuation">,</span>QMessageBox<span class="token double-colon punctuation">::</span>Ok<span class="token punctuation">,</span>QMessageBox<span class="token double-colon punctuation">::</span>NoButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>ret2<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QDialogExamUI</span><span class="token double-colon punctuation">::</span><span class="token function">initContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//当前函数，读取考题内容</span>
    QString filename <span class="token operator">=</span> <span class="token string">"I:/QT_PRACTICE/myExam22/exam.txt"</span><span class="token punctuation">;</span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span> QIODevice<span class="token double-colon punctuation">::</span>ReadOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"警告"</span><span class="token punctuation">,</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    State currentState <span class="token operator">=</span> State<span class="token double-colon punctuation">::</span>BEGIN<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> readNew <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    QString line<span class="token punctuation">;</span>
    QString titelLable<span class="token punctuation">;</span>
    QStringList choiceLabel<span class="token punctuation">;</span>
    QString anse<span class="token punctuation">;</span>

    QTextStream <span class="token function">stream</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stream<span class="token punctuation">.</span><span class="token function">setCodec</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>readNew<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
             readNew <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>stream<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            line <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"#"</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>

        <span class="token comment">//状态机将题目存储进题库</span>
            <span class="token keyword">switch</span><span class="token punctuation">(</span>currentState<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> BEGIN<span class="token operator">:</span>
                titelLable<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                choiceLabel<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                anse<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//开始状态要求必须是题目</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    currentState <span class="token operator">=</span> State<span class="token double-colon punctuation">::</span>READ_TILTE<span class="token punctuation">;</span>
                    readNew <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"警告"</span><span class="token punctuation">,</span><span class="token string">"BEGIN, 题库格式错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>

            <span class="token keyword">case</span> READ_TILTE<span class="token operator">:</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    line<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    m_textEdit<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>

                    titelLable<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token char">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token comment">// qDebug() &lt;&lt; "题目:" &lt;&lt;line.split('.').first()&lt;&lt; "内容" &lt;&lt; line;</span>

                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    currentState <span class="token operator">=</span> State<span class="token double-colon punctuation">::</span>READ_CHOICE<span class="token punctuation">;</span>
                    readNew <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"警告"</span><span class="token punctuation">,</span><span class="token string">"READ_TILTE, 题库格式错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>

            <span class="token keyword">case</span> READ_CHOICE<span class="token operator">:</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    line<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    m_textEdit<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    choiceLabel<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//qDebug() &lt;&lt; "选项:" &lt;&lt;line.at(0) &lt;&lt; "内容" &lt;&lt; line;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'!'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    currentState <span class="token operator">=</span> State<span class="token double-colon punctuation">::</span>READ_ANSER<span class="token punctuation">;</span>
                    readNew <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"警告"</span><span class="token punctuation">,</span><span class="token string">"READ_CHOICE, 题库格式错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> READ_ANSER<span class="token operator">:</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'!'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                      line<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token comment">//qDebug() &lt;&lt; "答案:"&lt;&lt; line;</span>
                      anse<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>

                      Question <span class="token function">ques</span><span class="token punctuation">(</span>titelLable<span class="token punctuation">,</span> anse<span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token comment">//qDebug() &lt;&lt; "choiceLabel.size():"&lt;&lt; choiceLabel.size();</span>
                      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> choiceLabel<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                          QPair<span class="token operator">&lt;</span>QString<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> temp<span class="token punctuation">;</span>
                            ques<span class="token punctuation">.</span>quesChoices<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">QPair</span><span class="token generic class-name"><span class="token operator">&lt;</span>QString<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>choiceLabel<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">}</span>
                      Data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>ques<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    currentState <span class="token operator">=</span> State<span class="token double-colon punctuation">::</span>BEGIN<span class="token punctuation">;</span>
                    readNew <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                    m_textEdit<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"警告"</span><span class="token punctuation">,</span><span class="token string">"READ_ANSER, 题库格式错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>

    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre>
    <ul>
     <li>
      <code>
       "question.cpp"
      </code>
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"question.h"</span></span>

<span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token function">Question</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString quesIndex<span class="token punctuation">,</span> <span class="token keyword">const</span> QString quesAnser<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>quesIndex <span class="token operator">=</span> quesIndex<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>quesAnser <span class="token operator">=</span> quesAnser<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>choiceNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    quesChoices<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    QStringList list <span class="token operator">=</span> quesAnser<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 移除第一个空字符串</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{<!-- --></span>
        list<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">||</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            list<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>is_single_ques <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
         <span class="token keyword">this</span><span class="token operator">-&gt;</span>is_single_ques <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>

<span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token function">Question</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Question</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token function">Question</span><span class="token punctuation">(</span><span class="token keyword">const</span> Question <span class="token operator">&amp;</span>ques<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>quesIndex <span class="token operator">=</span> ques<span class="token punctuation">.</span>quesIndex<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>quesAnser <span class="token operator">=</span> ques<span class="token punctuation">.</span>quesAnser<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>is_single_ques <span class="token operator">=</span> ques<span class="token punctuation">.</span>is_single_ques<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>choiceNum <span class="token operator">=</span> ques<span class="token punctuation">.</span>choiceNum<span class="token punctuation">;</span>

<span class="token comment">//    // 分配足够的内存空间</span>
<span class="token comment">//    this-&gt;quesChoices.resize(ques.quesChoices.size());</span>
<span class="token comment">//    for(int i =0;i &lt; ques.quesChoices.size(); i++){<!-- --></span>
<span class="token comment">//        this-&gt;quesChoices[i].first = ques.quesChoices[i].first;</span>
<span class="token comment">//        this-&gt;quesChoices[i].second = ques.quesChoices[i].second;</span>
<span class="token comment">//    }</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>quesChoices <span class="token operator">=</span> ques<span class="token punctuation">.</span>quesChoices<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token function">isSigleQuestion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> is_single_ques<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

QString <span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token function">get_quesIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> quesIndex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

QStringList <span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token function">get_quesAnser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QStringList list <span class="token operator">=</span> quesAnser<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 移除第一个空字符串</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{<!-- --></span>
        list<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">||</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            list<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token class-name">Question</span><span class="token double-colon punctuation">::</span><span class="token function">get_choiceNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>choiceNum <span class="token operator">=</span> quesChoices<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>choiceNum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333532383438312f:61727469636c652f64657461696c732f313435383136373537" class_="artid" style="display:none">
 </p>
</div>


