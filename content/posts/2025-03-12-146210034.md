---
layout: post
title: "一维下料之-贪心算法-CAD-c二次开发"
date: 2025-03-12 17:17:44 +0800
description: "用尽可能少的原材料（总根数最少），切割出所有需要的小段，同时尽可能减少浪费（即原材料的剩余长度总和最小）。需要从这些原材料中切割出以下长度的小段：42 米：需要 13 段。我们有一批长度为 180 米 的原材料（例如钢管、木材等）。一维下料之贪心算法，需求如下。70 米：需要 12 段。30 米：需要 12 段。11 米：需要 2 段。86 米：需要 5 段。"
keywords: "一维下料之 *贪心算法* —— CAD c#二次开发"
categories: ['Cad', 'C']
tags: ['开发语言', 'C']
artid: "146210034"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146210034
    alt: "一维下料之-贪心算法-CAD-c二次开发"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146210034
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146210034
cover: https://bing.ee123.net/img/rand?artid=146210034
image: https://bing.ee123.net/img/rand?artid=146210034
img: https://bing.ee123.net/img/rand?artid=146210034
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     一维下料之 *贪心算法* —— CAD c#二次开发
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     一维下料之贪心算法，需求如下
    </p>
    <p>
     已知条件
     <br/>
     我们有一批长度为 380 米 的原材料（例如钢管、木材等）。
     <br/>
     切割需求
     <br/>
     需要从这些原材料中切割出以下长度的小段：42 米：需要 13 段
     <br/>
     140米：需要 23 段
     <br/>
     130 米：需要 12 段
    </p>
    <p>
     120 米：需要 12 段
     <br/>
     11 米：需要 2 段
     <br/>
     234米：需要 12 段
     <br/>
     问题需求
    </p>
    <p>
     我们的目标是：
     <br/>
     用尽可能少的原材料（总根数最少），切割出所有需要的小段，同时尽可能减少浪费（即原材料的剩余长度总和最小）。
    </p>
    <p>
     <img alt="" height="681" src="https://i-blog.csdnimg.cn/direct/6c8b7eded49a45dbb857673a18fedc35.png" width="1409"/>
    </p>
    <p>
     结果如下：
    </p>
    <p>
     贪心算法: 使用原材料 26 个，总剩余 830 米，利用率 91.60%
     <br/>
     <br/>
     原材料 1: [234, 140] 剩余: 6 米
     <br/>
     原材料 2: [234, 140] 剩余: 6 米
     <br/>
     原材料 3: [234, 140] 剩余: 6 米
     <br/>
     原材料 4: [234, 140] 剩余: 6 米
     <br/>
     原材料 5: [234, 140] 剩余: 6 米
     <br/>
     原材料 6: [234, 140] 剩余: 6 米
     <br/>
     原材料 7: [234, 140] 剩余: 6 米
     <br/>
     原材料 8: [234, 140] 剩余: 6 米
     <br/>
     原材料 9: [234, 140] 剩余: 6 米
     <br/>
     原材料 10: [234, 140] 剩余: 6 米
     <br/>
     原材料 11: [234, 140] 剩余: 6 米
     <br/>
     原材料 12: [234, 140] 剩余: 6 米
     <br/>
     原材料 13: [140, 140, 11, 11] 剩余: 78 米
     <br/>
     原材料 14: [140, 140] 剩余: 100 米
     <br/>
     原材料 15: [140, 140] 剩余: 100 米
     <br/>
     原材料 16: [140, 140] 剩余: 100 米
     <br/>
     原材料 17: [140, 140] 剩余: 100 米
     <br/>
     原材料 18: [140, 130] 剩余: 110 米
     <br/>
     原材料 19: [130, 130, 120] 剩余: 0 米
     <br/>
     原材料 20: [130, 130, 120] 剩余: 0 米
     <br/>
     原材料 21: [130, 130, 120] 剩余: 0 米
     <br/>
     原材料 22: [130, 130, 120] 剩余: 0 米
     <br/>
     原材料 23: [130, 130, 120] 剩余: 0 米
     <br/>
     原材料 24: [130, 120, 120] 剩余: 10 米
     <br/>
     原材料 25: [120, 120, 120] 剩余: 20 米
     <br/>
     原材料 26: [120, 120] 剩余: 140 米
    </p>
    <p>
    </p>
    <p>
     部分源代码如下
    </p>
    <p>
    </p>
    <pre><code class="language-cs">public class 一维下料
{
    // 定义原材料长度
    private const int 原材料长度 =380;

    // 定义需要的切割长度及其数量
    private static readonly Dictionary&lt;int, int&gt; 需求长度 = new Dictionary&lt;int, int&gt;
    {
         { 140, 23 }, { 130, 12 }, { 120, 12 }, { 11, 2 }, { 234, 12 }
    };
    [CommandMethod("xx")]
    public static void 一维下料贪心算法()
    {
        // 获取切割方案、剩余长度和利用率
        List&lt;int&gt; 剩余长度s;
        double 利用率;
        List&lt;List&lt;int&gt;&gt; 切割计划s = 计算剩余长度s和利用率(out 剩余长度s, out 利用率);

        // 输出切割方案
        Env.Editor.WriteMessage("切割方案：\n");
        int 最终原材料个数 = 0;
        for (int i = 0; i &lt; 切割计划s.Count; i++)
        {
            Env.Editor.WriteMessage($"原材料 {i + 1}: [{ string.Join(", ", 切割计划s[i]) } ](剩余长度: {剩余长度s[i]} 米)\n");
            最终原材料个数 = i + 1;
        }

        // 输出总剩余长度
        int 总剩余长度 = 剩余长度s.Sum();
        Env.Editor.WriteMessage($"共需要{最终原材料个数}个原材料,总剩余长度: {总剩余长度} 米\n");

        // 输出利用率
        Env.Editor.WriteMessage($"贪心算法利用率: {利用率:F2}%\n");

        // 验证是否所有需要的长度都被切割
        bool allCut = true;
        foreach (var length in 需求长度.Keys)
        {
            if (需求长度[length] &gt; 0)
            {
                allCut = false;
                break;
            }
        }

        Env.Editor.WriteMessage(allCut ? "所有长度都已切割完毕。" : "部分长度未切割完毕。\n");
    }
    // 贪心算法实现
    public static List&lt;List&lt;int&gt;&gt; 计算剩余长度s和利用率(out List&lt;int&gt; 剩余长度s, out double 利用率)
    {
        // 存储最终的切割方案
        List&lt;List&lt;int&gt;&gt; 切割计划s = new List&lt;List&lt;int&gt;&gt;();

        // 存储每根原材料的剩余长度
        剩余长度s = new List&lt;int&gt;();

        // 复制需要的切割长度及其数量，避免修改原始数据
        Dictionary&lt;int, int&gt; requiredLengthsCopy = new Dictionary&lt;int, int&gt;(需求长度);

        // 总使用的材料长度
        int 总使用长度 = 0;

        // 循环直到所有需要的长度都被切割
        while (true)
        {
            // 当前原材料的剩余长度
            int 当前材料剩余长度 = 原材料长度;

            // 当前原材料的切割方案
            List&lt;int&gt; 最终方案 = new List&lt;int&gt;();

            // 从最长的长度开始尝试切割
            foreach (var length in requiredLengthsCopy.Keys.ToList())
            {
               /*****************省略部分源代码***********************/
            }

            // 如果当前原材料没有切割任何长度，则退出循环
            if (最终方案.Count == 0)
                break;

            // 将当前切割方案添加到最终方案中
            切割计划s.Add(最终方案);

            // 记录当前原材料的剩余长度
            剩余长度s.Add(当前材料剩余长度);
        }

        // 计算利用率
        int total原材料长度 = 切割计划s.Count * 原材料长度; // 总原材料长度
        利用率 = (double)总使用长度 / total原材料长度 * 100; // 利用率百分比

        return 切割计划s;
    }

}</code></pre>
    <p>
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f796f6e6773686971712f:61727469636c652f64657461696c732f313436323130303334" class_="artid" style="display:none">
 </p>
</div>


