---
layout: post
title: "Flutteræ¡Œé¢åº”ç”¨å®æˆ˜Windowsç³»ç»Ÿä»£ç†åˆ‡æ¢å·¥å…·å¼€å‘"
date: 2025-08-27T16:01:37+0800
description: "æœ¬æ–‡ä»‹ç»äº†ä¸€æ¬¾åŸºäºFlutterå¼€å‘çš„Windowsä»£ç†åˆ‡æ¢å·¥å…·ï¼Œå¯ä¸€é”®ä¿®æ”¹ç³»ç»Ÿä»£ç†è®¾ç½®ã€‚è¯¥åº”ç”¨é‡‡ç”¨Material Design 3ç•Œé¢è®¾è®¡ï¼Œæ”¯æŒä»£ç†åœ°å€æ ¼å¼éªŒè¯ã€é…ç½®è‡ªåŠ¨ä¿å­˜å’Œå®æ—¶çŠ¶æ€æ£€æµ‹ã€‚æ ¸å¿ƒæŠ€æœ¯åŒ…æ‹¬Flutteræ¡†æ¶ã€Dartè¯­è¨€å’ŒWindowsæ³¨å†Œè¡¨æ“ä½œï¼Œé€šè¿‡win32ç­‰ä¾èµ–åŒ…å®ç°ç³»ç»Ÿçº§åŠŸèƒ½è°ƒç”¨ã€‚ç¨‹åºåˆå§‹åŒ–æ—¶ä¼šæ£€æŸ¥æ³¨å†Œè¡¨è·å–å½“å‰ä»£ç†çŠ¶æ€ï¼Œå¹¶å°†ç”¨æˆ·é…ç½®ä¿å­˜åœ¨JSONæ–‡ä»¶ä¸­ï¼Œå®ç°å¿«é€Ÿåˆ‡æ¢ä»£ç†çš„åŠŸèƒ½ã€‚åº”ç”¨å…·æœ‰çª—å£å¤§å°æ§åˆ¶ã€ä¸­æ–‡æ˜¾ç¤ºä¼˜åŒ–ç­‰ç‰¹æ€§ï¼Œä¸ºå¼€å‘è€…åœ¨ä¸åŒç½‘ç»œç¯å¢ƒä¸‹å·¥ä½œæä¾›äº†ä¾¿æ·å·¥å…·ã€‚"
keywords: "Flutteræ¡Œé¢åº”ç”¨å®æˆ˜ï¼šWindowsç³»ç»Ÿä»£ç†åˆ‡æ¢å·¥å…·å¼€å‘"
categories: ['æœªåˆ†ç±»']
tags: ['Windows', 'Flutter']
artid: "150929353"
arturl: "https://blog.csdn.net/problc/article/details/150929353"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=150929353
    alt: "Flutteræ¡Œé¢åº”ç”¨å®æˆ˜Windowsç³»ç»Ÿä»£ç†åˆ‡æ¢å·¥å…·å¼€å‘"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=150929353
featuredImagePreview: https://bing.ee123.net/img/rand?artid=150929353
cover: https://bing.ee123.net/img/rand?artid=150929353
image: https://bing.ee123.net/img/rand?artid=150929353
img: https://bing.ee123.net/img/rand?artid=150929353
---



# Flutteræ¡Œé¢åº”ç”¨å®æˆ˜ï¼šWindowsç³»ç»Ÿä»£ç†åˆ‡æ¢å·¥å…·å¼€å‘

### å‰è¨€

åœ¨æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ä¸åŒçš„ç½‘ç»œç¯å¢ƒä¸‹åˆ‡æ¢ç³»ç»Ÿä»£ç†è®¾ç½®ã€‚ä¼ ç»Ÿçš„åšæ³•æ˜¯é€šè¿‡Windowsç³»ç»Ÿè®¾ç½®æ‰‹åŠ¨ä¿®æ”¹ï¼Œæ“ä½œç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨Flutterå¼€å‘ä¸€ä¸ªWindowsæ¡Œé¢åº”ç”¨ï¼Œå®ç°å¿«é€Ÿåˆ‡æ¢ç³»ç»Ÿä»£ç†çš„åŠŸèƒ½ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/07d0661ca29a48fd8124febc17632805.png)

### é¡¹ç›®æ¦‚è¿°

è¿™ä¸ªä»£ç†åˆ‡æ¢å·¥å…·å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

* ğŸ–¥ï¸ WindowsåŸç”Ÿæ¡Œé¢åº”ç”¨
* ğŸ”„ ä¸€é”®å¼€å¯/å…³é—­ç³»ç»Ÿä»£ç†
* ğŸ’¾ è‡ªåŠ¨ä¿å­˜ä»£ç†é…ç½®
* ğŸ” å®æ—¶æ£€æµ‹å½“å‰ä»£ç†çŠ¶æ€
* âœ… ä»£ç†åœ°å€æ ¼å¼éªŒè¯
* ğŸ¨ Material Design 3 UIè®¾è®¡

### æŠ€æœ¯æ ˆé€‰æ‹©

#### æ ¸å¿ƒæŠ€æœ¯

* **Flutter**: è·¨å¹³å°UIæ¡†æ¶ï¼Œæ”¯æŒæ¡Œé¢åº”ç”¨å¼€å‘
* **Dart**: Flutterçš„ç¼–ç¨‹è¯­è¨€
* **Windows Registry**: é€šè¿‡æ³¨å†Œè¡¨æ“ä½œç³»ç»Ÿä»£ç†è®¾ç½®

#### ä¸»è¦ä¾èµ–åŒ…

```yaml
dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.8
  win32: ^5.0.0  # Windows APIè°ƒç”¨
  ffi: ^2.1.0    # å¤–éƒ¨å‡½æ•°æ¥å£
  window_size:   # çª—å£å¤§å°æ§åˆ¶
    git:
      url: https://github.com/google/flutter-desktop-embedding.git
      path: plugins/window_size
  path_provider: ^2.1.2  # æ–‡ä»¶è·¯å¾„è·å–

```

### å®Œæ•´ä»£ç å®ç°

#### pubspec.yamlé…ç½®æ–‡ä»¶

```yaml
name: proxy_switch
description: "Windowsç³»ç»Ÿä»£ç†åˆ‡æ¢å·¥å…·"
publish_to: 'none'

version: 1.0.0+1

environment:
  sdk: ^3.5.3

dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.8
  win32: ^5.0.0
  ffi: ^2.1.0
  window_size:
    git:
      url: https://github.com/google/flutter-desktop-embedding.git
      path: plugins/window_size
  path_provider: ^2.1.2

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^4.0.0

flutter:
  uses-material-design: true

```

#### ä¸»ç¨‹åºä»£ç 

```dart
import 'dart:io';
import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:window_size/window_size.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  if (Platform.isWindows) {
    setWindowTitle('ç³»ç»Ÿä»£ç†è®¾ç½®');
    setWindowMinSize(const Size(640, 480));
    setWindowMaxSize(const Size(960, 640));
  }
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'ç³»ç»Ÿä»£ç†è®¾ç½®',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        useMaterial3: true,
        fontFamily: 'Microsoft YaHei',
        textTheme: const TextTheme(
          displayLarge: TextStyle(fontFamily: 'Microsoft YaHei'),
          displayMedium: TextStyle(fontFamily: 'Microsoft YaHei'),
          displaySmall: TextStyle(fontFamily: 'Microsoft YaHei'),
          headlineLarge: TextStyle(fontFamily: 'Microsoft YaHei'),
          headlineMedium: TextStyle(fontFamily: 'Microsoft YaHei'),
          headlineSmall: TextStyle(fontFamily: 'Microsoft YaHei'),
          titleLarge: TextStyle(fontFamily: 'Microsoft YaHei'),
          titleMedium: TextStyle(fontFamily: 'Microsoft YaHei'),
          titleSmall: TextStyle(fontFamily: 'Microsoft YaHei'),
          bodyLarge: TextStyle(fontFamily: 'Microsoft YaHei'),
          bodyMedium: TextStyle(fontFamily: 'Microsoft YaHei'),
          bodySmall: TextStyle(fontFamily: 'Microsoft YaHei'),
          labelLarge: TextStyle(fontFamily: 'Microsoft YaHei'),
          labelMedium: TextStyle(fontFamily: 'Microsoft YaHei'),
          labelSmall: TextStyle(fontFamily: 'Microsoft YaHei'),
        ),
      ),
      home: const ProxySettingsPage(),
    );
  }
}

class ProxySettingsPage extends StatefulWidget {
  const ProxySettingsPage({super.key});

  @override
  State<ProxySettingsPage> createState() => _ProxySettingsPageState();
}

class _ProxySettingsPageState extends State<ProxySettingsPage> {
  final TextEditingController _proxyController = TextEditingController();
  bool _isProxyEnabled = false;
  String? _proxyError;
  late final File _configFile;

  @override
  void initState() {
    super.initState();
    _initializeConfig().then((_) {
      _checkCurrentProxyStatus();
      if (_proxyController.text.isEmpty) {
        _loadConfig();
      }
    });
  }

  Future<void> _initializeConfig() async {
    final exePath = Platform.resolvedExecutable;
    final exeDir = Directory(File(exePath).parent.path);
    _configFile = File('${exeDir.path}\\proxy_config.json');
    
    if (!await _configFile.exists()) {
      await _configFile.create(recursive: true);
      await _saveConfig({'proxyAddress': ''});
    }
  }

  Future<void> _loadConfig() async {
    try {
      if (await _configFile.exists()) {
        final contents = await _configFile.readAsString();
        if (contents.isNotEmpty) {
          final config = json.decode(contents) as Map<String, dynamic>;
          setState(() {
            _proxyController.text = config['proxyAddress'] as String? ?? '';
          });
        }
      }
    } catch (e) {
      debugPrint('åŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥: $e');
    }
  }

  Future<void> _saveConfig(Map<String, dynamic> config) async {
    try {
      await _configFile.writeAsString(json.encode(config));
    } catch (e) {
      debugPrint('ä¿å­˜é…ç½®æ–‡ä»¶å¤±è´¥: $e');
    }
  }

  void _checkCurrentProxyStatus() {
    try {
      // ä»æ³¨å†Œè¡¨è¯»å–å½“å‰ä»£ç†çŠ¶æ€
      final result = Process.runSync('reg', [
        'query',
        'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
        '/v',
        'ProxyEnable'
      ]);

      if (result.exitCode == 0) {
        // è§£ææ³¨å†Œè¡¨è¾“å‡º
        final output = result.stdout.toString();
        final isEnabled = output.contains('0x1');
        
        // å¦‚æœä»£ç†å·²å¯ç”¨ï¼Œè¯»å–ä»£ç†åœ°å€
        if (isEnabled) {
          final proxyResult = Process.runSync('reg', [
            'query',
            'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
            '/v',
            'ProxyServer'
          ]);
          
          if (proxyResult.exitCode == 0) {
            final proxyOutput = proxyResult.stdout.toString();
            final proxyAddress = proxyOutput.split('REG_SZ')[1].trim();
            
            // å¦‚æœè·å–åˆ°æœ‰æ•ˆçš„ä»£ç†åœ°å€ï¼Œæ›´æ–°çŠ¶æ€å¹¶ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
            if (proxyAddress.isNotEmpty) {
              setState(() {
                _proxyController.text = proxyAddress;
                _isProxyEnabled = true;
              });
              // åŒæ—¶æ›´æ–°é…ç½®æ–‡ä»¶
              _saveConfig({'proxyAddress': proxyAddress});
              return;
            }
          }
        }
        
        setState(() {
          _isProxyEnabled = isEnabled;
        });
      }
    } catch (e) {
      debugPrint('æ£€æŸ¥ä»£ç†çŠ¶æ€æ—¶å‡ºé”™: $e');
    }
  }

  bool _validateProxyAddress(String address) {
    if (address.isEmpty) {
      setState(() {
        _proxyError = 'ä»£ç†åœ°å€ä¸èƒ½ä¸ºç©º';
      });
      return false;
    }

    // æ£€æŸ¥æ ¼å¼ï¼šIP:ç«¯å£ æˆ– åŸŸå:ç«¯å£
    final RegExp ipRegex = RegExp(
      r'^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?):\d{1,5}$'
    );
    final RegExp domainRegex = RegExp(
      r'^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}:\d{1,5}$'
    );

    if (!ipRegex.hasMatch(address) && !domainRegex.hasMatch(address)) {
      setState(() {
        _proxyError = 'ä»£ç†åœ°å€æ ¼å¼æ— æ•ˆï¼Œåº”ä¸º IP:ç«¯å£ æˆ– åŸŸå:ç«¯å£';
      });
      return false;
    }

    // æ£€æŸ¥ç«¯å£èŒƒå›´
    final port = int.parse(address.split(':').last);
    if (port < 1 || port > 65535) {
      setState(() {
        _proxyError = 'ç«¯å£å·å¿…é¡»åœ¨ 1-65535 ä¹‹é—´';
      });
      return false;
    }

    setState(() {
      _proxyError = null;
    });
    return true;
  }

  void _toggleProxy(bool value) {
    if (value && !_validateProxyAddress(_proxyController.text)) {
      return;
    }

    setState(() {
      _isProxyEnabled = value;
    });

    if (value) {
      _setWindowsProxy(_proxyController.text);
      // ä¿å­˜æ–°çš„ä»£ç†åœ°å€åˆ°é…ç½®æ–‡ä»¶
      _saveConfig({'proxyAddress': _proxyController.text});
    } else {
      _clearWindowsProxy();
    }
  }

  void _setWindowsProxy(String proxyAddress) {
    // è®¾ç½®ç³»ç»Ÿä»£ç†
    final cmdProcess = Process.runSync('reg', [
      'add',
      'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
      '/v',
      'ProxyEnable',
      '/t',
      'REG_DWORD',
      '/d',
      '1',
      '/f'
    ]);

    if (cmdProcess.exitCode == 0) {
      Process.runSync('reg', [
        'add',
        'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
        '/v',
        'ProxyServer',
        '/t',
        'REG_SZ',
        '/d',
        proxyAddress,
        '/f'
      ]);
    }
  }

  void _clearWindowsProxy() {
    Process.runSync('reg', [
      'add',
      'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
      '/v',
      'ProxyEnable',
      '/t',
      'REG_DWORD',
      '/d',
      '0',
      '/f'
    ]);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
        title: const Text('ç³»ç»Ÿä»£ç†è®¾ç½®'),
        centerTitle: true,
        actions: [
          IconButton(
            icon: const Icon(Icons.refresh),
            onPressed: () {
              _checkCurrentProxyStatus();
              ScaffoldMessenger.of(context).showSnackBar(
                const SnackBar(content: Text('ä»£ç†çŠ¶æ€å·²åˆ·æ–°')),
              );
            },
            tooltip: 'åˆ·æ–°ä»£ç†çŠ¶æ€',
          ),
        ],
      ),
      body: Container(
        padding: const EdgeInsets.all(20.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            Card(
              elevation: 2,
              child: Padding(
                padding: const EdgeInsets.all(16.0),
                child: Column(
                  children: [
                    Row(
                      children: [
                        Expanded(
                          child: TextField(
                            controller: _proxyController,
                            decoration: InputDecoration(
                              labelText: 'ä»£ç†åœ°å€',
                              hintText: 'ä¾‹å¦‚: 127.0.0.1:7890',
                              errorText: _proxyError,
                              border: OutlineInputBorder(
                                borderRadius: BorderRadius.circular(8),
                              ),
                              prefixIcon: const Icon(Icons.computer),
                            ),
                            onChanged: (value) {
                              if (_proxyError != null) {
                                setState(() {
                                  _proxyError = null;
                                });
                              }
                            },
                          ),
                        ),
                        const SizedBox(width: 8),
                        IconButton(
                          icon: const Icon(Icons.save),
                          onPressed: () {
                            if (_validateProxyAddress(_proxyController.text)) {
                              _saveConfig({'proxyAddress': _proxyController.text});
                              // å¦‚æœå½“å‰ä»£ç†æ˜¯å¯ç”¨çŠ¶æ€ï¼Œåˆ™æ›´æ–°ç³»ç»Ÿä»£ç†åœ°å€
                              if (_isProxyEnabled) {
                                _setWindowsProxy(_proxyController.text);
                              }
                              ScaffoldMessenger.of(context).showSnackBar(
                                const SnackBar(content: Text('ä»£ç†åœ°å€å·²ä¿å­˜')),
                              );
                            }
                          },
                          tooltip: 'ä¿å­˜ä»£ç†åœ°å€',
                        ),
                      ],
                    ),
                    const SizedBox(height: 20),
                    Container(
                      padding: const EdgeInsets.symmetric(
                        horizontal: 16,
                        vertical: 8,
                      ),
                      decoration: BoxDecoration(
                        color: Theme.of(context).colorScheme.surfaceContainerHighest,
                        borderRadius: BorderRadius.circular(8),
                      ),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Row(
                            children: [
                              Icon(
                                _isProxyEnabled
                                    ? Icons.cloud_done
                                    : Icons.cloud_off,
                                color: _isProxyEnabled
                                    ? Colors.green
                                    : Colors.grey,
                              ),
                              const SizedBox(width: 8),
                              const Text(
                                'å¯ç”¨ç³»ç»Ÿä»£ç†',
                                style: TextStyle(
                                  fontSize: 16,
                                  fontWeight: FontWeight.w500,
                                ),
                              ),
                            ],
                          ),
                          Switch(
                            value: _isProxyEnabled,
                            onChanged: _toggleProxy,
                          ),
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  @override
  void dispose() {
    _proxyController.dispose();
    super.dispose();
  }
}

```

### æ ¸å¿ƒåŠŸèƒ½è§£æ

#### 1. çª—å£é…ç½®ä¸åˆå§‹åŒ–

åº”ç”¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆé…ç½®äº†çª—å£çš„åŸºæœ¬å±æ€§ï¼š

```dart
void main() {
  WidgetsFlutterBinding.ensureInitialized();
  if (Platform.isWindows) {
    setWindowTitle('ç³»ç»Ÿä»£ç†è®¾ç½®');
    setWindowMinSize(const Size(640, 480));
    setWindowMaxSize(const Size(960, 640));
  }
  runApp(const MyApp());
}

```

è¿™é‡Œä½¿ç”¨äº†`window_size`æ’ä»¶æ¥æ§åˆ¶çª—å£å¤§å°ï¼Œç¡®ä¿åº”ç”¨åœ¨Windowså¹³å°ä¸Šæœ‰åˆé€‚çš„æ˜¾ç¤ºå°ºå¯¸ã€‚

#### 2. é…ç½®æ–‡ä»¶ç®¡ç†

åº”ç”¨éœ€è¦æŒä¹…åŒ–ä¿å­˜ç”¨æˆ·çš„ä»£ç†é…ç½®ï¼Œæˆ‘ä»¬å°†é…ç½®æ–‡ä»¶ä¿å­˜åœ¨å¯æ‰§è¡Œæ–‡ä»¶åŒç›®å½•ä¸‹ï¼š

```dart
Future<void> _initializeConfig() async {
  final exePath = Platform.resolvedExecutable;
  final exeDir = Directory(File(exePath).parent.path);
  _configFile = File('${exeDir.path}\\proxy_config.json');
  
  if (!await _configFile.exists()) {
    await _configFile.create(recursive: true);
    await _saveConfig({'proxyAddress': ''});
  }
}

```

#### 3. Windowsæ³¨å†Œè¡¨æ“ä½œ

è¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œé€šè¿‡æ“ä½œWindowsæ³¨å†Œè¡¨æ¥æ§åˆ¶ç³»ç»Ÿä»£ç†ï¼š

**æ£€æŸ¥å½“å‰ä»£ç†çŠ¶æ€ï¼š**

```dart
void _checkCurrentProxyStatus() {
  try {
    // æŸ¥è¯¢ProxyEnableæ³¨å†Œè¡¨é¡¹
    final result = Process.runSync('reg', [
      'query',
      'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
      '/v',
      'ProxyEnable'
    ]);
    
    if (result.exitCode == 0) {
      final output = result.stdout.toString();
      final isEnabled = output.contains('0x1');
      // ... åç»­å¤„ç†
    }
  } catch (e) {
    debugPrint('æ£€æŸ¥ä»£ç†çŠ¶æ€æ—¶å‡ºé”™: $e');
  }
}

```

**è®¾ç½®ç³»ç»Ÿä»£ç†ï¼š**

```dart
void _setWindowsProxy(String proxyAddress) {
  // å¯ç”¨ä»£ç†
  Process.runSync('reg', [
    'add',
    'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
    '/v', 'ProxyEnable',
    '/t', 'REG_DWORD',
    '/d', '1',
    '/f'
  ]);
  
  // è®¾ç½®ä»£ç†æœåŠ¡å™¨åœ°å€
  Process.runSync('reg', [
    'add',
    'HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings',
    '/v', 'ProxyServer',
    '/t', 'REG_SZ',
    '/d', proxyAddress,
    '/f'
  ]);
}

```

#### 4. è¾“å…¥éªŒè¯

ä¸ºäº†ç¡®ä¿ç”¨æˆ·è¾“å…¥çš„ä»£ç†åœ°å€æ ¼å¼æ­£ç¡®ï¼Œæˆ‘ä»¬å®ç°äº†å®Œå–„çš„éªŒè¯æœºåˆ¶ï¼š

```dart
bool _validateProxyAddress(String address) {
  if (address.isEmpty) {
    setState(() {
      _proxyError = 'ä»£ç†åœ°å€ä¸èƒ½ä¸ºç©º';
    });
    return false;
  }

  // IPåœ°å€æ ¼å¼éªŒè¯
  final RegExp ipRegex = RegExp(
    r'^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?):\d{1,5}$'
  );
  
  // åŸŸåæ ¼å¼éªŒè¯
  final RegExp domainRegex = RegExp(
    r'^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}:\d{1,5}$'
  );

  if (!ipRegex.hasMatch(address) && !domainRegex.hasMatch(address)) {
    setState(() {
      _proxyError = 'ä»£ç†åœ°å€æ ¼å¼æ— æ•ˆï¼Œåº”ä¸º IP:ç«¯å£ æˆ– åŸŸå:ç«¯å£';
    });
    return false;
  }

  return true;
}

```

### è¿è¡Œä¸éƒ¨ç½²

#### å¼€å‘ç¯å¢ƒè¦æ±‚

* Flutter 3.5.3+
* Windows 10/11
* Visual Studio Code æˆ– Android Studio

#### ç¼–è¯‘æ‰“åŒ…

```bash
# æ„å»ºWindowsæ¡Œé¢åº”ç”¨
flutter build windows

# ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä½äº
# build/windows/x64/runner/Release/proxy_switch.exe

```

#### ä½¿ç”¨è¯´æ˜

1. åœ¨ä»£ç†åœ°å€è¾“å…¥æ¡†ä¸­å¡«å…¥ä»£ç†æœåŠ¡å™¨åœ°å€ï¼ˆå¦‚ï¼š127.0.0.1:7890ï¼‰
2. ç‚¹å‡»ä¿å­˜æŒ‰é’®ä¿å­˜é…ç½®
3. ä½¿ç”¨å¼€å…³æ§åˆ¶ä»£ç†çš„å¯ç”¨/ç¦ç”¨
4. ç‚¹å‡»åˆ·æ–°æŒ‰é’®æ£€æŸ¥å½“å‰ç³»ç»Ÿä»£ç†çŠ¶æ€

---

### å®ç”¨å°å·¥å…·

[App Store æˆªå›¾ç”Ÿæˆå™¨](https://tool.tushuoit.com/screenshot)ã€[åº”ç”¨å›¾æ ‡ç”Ÿæˆå™¨](https://tool.tushuoit.com/appiconset) ã€[åœ¨çº¿å›¾ç‰‡å‹ç¼©](https://tool.tushuoit.com/imagecompress)å’Œ [Chromeæ’ä»¶-å¼ºåˆ¶å¼€å¯å¤åˆ¶-æŠ¤çœ¼æ¨¡å¼-ç½‘é¡µä¹±ç è®¾ç½®ç¼–ç ](https://microsoftedge.microsoft.com/addons/detail/stylus/lmhdocknnhdcekdmjpheenofdadnopfg)  
 [ä¹–çŒ«è®°è´¦](https://tushuoit.com/gmjz/)ï¼ŒAIæ™ºèƒ½åˆ†ç±»æœ€å¥½ç”¨çš„èŠå¤©è®°è´¦Appã€‚



