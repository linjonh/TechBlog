---
layout: post
title: "C游戏开发零基础手写完整飞机大战游戏基于EasyX图形库详细注释源码分享"
date: 2025-03-13 10:55:21 +0800
description: "【C++游戏开发】零基础手写完整飞机大战游戏（基于EasyX图形库/详细注释/源码分享）"
keywords: "【C++游戏开发】零基础手写完整飞机大战游戏（基于EasyX图形库/详细注释/源码分享）"
categories: ['未分类']
tags: ['嵌入式硬件', '单片机', 'Stm']
artid: "146225168"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146225168
    alt: "C游戏开发零基础手写完整飞机大战游戏基于EasyX图形库详细注释源码分享"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146225168
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146225168
cover: https://bing.ee123.net/img/rand?artid=146225168
image: https://bing.ee123.net/img/rand?artid=146225168
img: https://bing.ee123.net/img/rand?artid=146225168
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【C++游戏开发】零基础手写完整飞机大战游戏（基于EasyX图形库/详细注释/源码分享）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
     一、开发环境与资源准备
    </h3>
    <h4>
     1.1 环境要求
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        Visual Studio 2019+
       </strong>
       （推荐2022）
      </p>
     </li>
     <li>
      <p>
       <strong>
        EasyX图形库
       </strong>
       （官网下载适配VS版本）
      </p>
     </li>
     <li>
      <p>
       <strong>
        Windows SDK
       </strong>
       （安装VS时勾选）
      </p>
     </li>
    </ul>
    <h4>
     1.2 资源文件
    </h4>
    <p>
     在项目目录创建
     <code>
      res
     </code>
     文件夹，存放以下素材（素材自备）：
    </p>
    <ul>
     <li>
      <p>
       <code>
        plane.png
       </code>
       玩家飞机（50x50）
      </p>
     </li>
     <li>
      <p>
       <code>
        enemy.png
       </code>
       敌机（50x50）
      </p>
     </li>
     <li>
      <p>
       <code>
        bullet.png
       </code>
       子弹（10x20）
      </p>
     </li>
     <li>
      <p>
       <code>
        bg.jpg
       </code>
       滚动背景（600x700）
      </p>
     </li>
     <li>
      <p>
       <code>
        boom.wav
       </code>
       爆炸音效
      </p>
     </li>
    </ul>
    <hr/>
    <h3>
     二、完整游戏代码实现（500行精简化）
    </h3>
    <h4>
     2.1 头文件与常量定义
    </h4>
    <p>
    </p>
    <pre><code class="language-cpp">#include &lt;graphics.h&gt;
#include &lt;conio.h&gt;
#include &lt;Windows.h&gt;
#include &lt;list&gt;
#include &lt;ctime&gt;
using namespace std;

// 窗口尺寸
const int WIDTH = 600;
const int HEIGHT = 700;

// 游戏对象基类
class GameObject {
public:
    int x, y;
    int speed;
    bool alive;
    IMAGE img;
    GameObject(const wchar_t* path, int speed = 0) {
        loadimage(&amp;img, path);
        this-&gt;speed = speed;
        alive = false;
    }
};</code></pre>
    <p>
    </p>
    <h4>
     2.2 游戏管理器类（核心逻辑）
    </h4>
    <p>
    </p>
    <pre><code class="language-cpp">class GameManager {
private:
    GameObject* player;                 // 玩家飞机
    list&lt;GameObject*&gt; enemies;          // 敌机容器
    list&lt;GameObject*&gt; bullets;          // 子弹容器
    int score;                          // 游戏得分
    IMAGE bgImg;                        // 背景图片
    int bgOffset;                       // 背景滚动偏移
    
public:
    GameManager() {
        srand((unsigned)time(NULL));
        loadimage(&amp;bgImg, L"res/bg.jpg");
        initGame();
    }

    // 初始化游戏
    void initGame() {
        score = 0;
        bgOffset = 0;
        
        // 创建玩家对象
        player = new GameObject(L"res/plane.png", 8);
        player-&gt;x = WIDTH/2 - 25;
        player-&gt;y = HEIGHT - 100;
        player-&gt;alive = true;

        // 清空容器
        clearAll();
    }

    // 游戏主循环
    void run() {
        DWORD lastTime = GetTickCount();
        while (true) {
            // 60帧控制
            if (GetTickCount() - lastTime &lt; 16) continue;
            lastTime = GetTickCount();

            processInput();
            update();
            render();
        }
    }

    // 输入处理（详细代码见下文）
    void processInput();
    
    // 游戏逻辑更新（详细代码见下文）
    void update();
    
    // 渲染绘制（详细代码见下文）
    void render();

    // 清空游戏对象
    void clearAll() {
        for (auto&amp; e : enemies) delete e;
        for (auto&amp; b : bullets) delete b;
        enemies.clear();
        bullets.clear();
    }

    ~GameManager() {
        delete player;
        clearAll();
    }
};</code></pre>
    <p>
    </p>
    <h4>
     2.3 输入处理模块
    </h4>
    <p>
    </p>
    <pre><code class="language-cpp">void GameManager::processInput() {
    // 左右移动
    if (GetAsyncKeyState(VK_LEFT) &amp; 0x8000) {
        player-&gt;x = max(0, player-&gt;x - player-&gt;speed);
    }
    if (GetAsyncKeyState(VK_RIGHT) &amp; 0x8000) {
        player-&gt;x = min(WIDTH - 50, player-&gt;x + player-&gt;speed);
    }

    // 空格射击（冷却控制）
    static DWORD lastShoot = 0;
    if (GetAsyncKeyState(VK_SPACE) &amp;&amp; GetTickCount() - lastShoot &gt; 200) {
        GameObject* bullet = new GameObject(L"res/bullet.png", 10);
        bullet-&gt;x = player-&gt;x + 20;
        bullet-&gt;y = player-&gt;y - 20;
        bullet-&gt;alive = true;
        bullets.push_back(bullet);
        lastShoot = GetTickCount();
    }
}</code></pre>
    <p>
    </p>
    <h4>
     2.4 游戏逻辑更新
    </h4>
    <p>
    </p>
    <pre><code class="language-cpp">void GameManager::update() {
    // 背景滚动
    bgOffset += 2;
    if (bgOffset &gt;= HEIGHT) bgOffset = 0;

    // 生成敌机（随机间隔）
    if (rand() % 100 &lt; 3) {
        GameObject* enemy = new GameObject(L"res/enemy.png", 3);
        enemy-&gt;x = rand() % (WIDTH - 50);
        enemy-&gt;y = -50;
        enemy-&gt;alive = true;
        enemies.push_back(enemy);
    }

    // 更新子弹
    auto bit = bullets.begin();
    while (bit != bullets.end()) {
        (*bit)-&gt;y -= (*bit)-&gt;speed;
        if ((*bit)-&gt;y &lt; -20) {
            delete *bit;
            bit = bullets.erase(bit);
        } else {
            ++bit;
        }
    }

    // 更新敌机与碰撞检测
    auto eit = enemies.begin();
    while (eit != enemies.end()) {
        (*eit)-&gt;y += (*eit)-&gt;speed;
        
        // 出界检测
        if ((*eit)-&gt;y &gt; HEIGHT) {
            delete *eit;
            eit = enemies.erase(eit);
            continue;
        }

        // 子弹碰撞检测
        bool hit = false;
        for (auto&amp; bullet : bullets) {
            if (checkCollision(*eit, bullet)) {
                hit = true;
                bullet-&gt;alive = false;
                score += 10;
                // 播放爆炸音效
                PlaySound(L"res/boom.wav", NULL, SND_FILENAME | SND_ASYNC);
                break;
            }
        }

        if (hit) {
            delete *eit;
            eit = enemies.erase(eit);
        } else {
            ++eit;
        }
    }
}

// 碰撞检测（矩形粗略检测）
bool checkCollision(GameObject* a, GameObject* b) {
    return abs(a-&gt;x - b-&gt;x) &lt; 40 &amp;&amp; 
           abs(a-&gt;y - b-&gt;y) &lt; 40;
}</code></pre>
    <p>
    </p>
    <h4>
     2.5 画面渲染模块
    </h4>
    <p>
    </p>
    <pre><code class="language-cpp">void GameManager::render() {
    BeginBatchDraw();

    // 绘制背景（滚动效果）
    putimage(0, bgOffset, &amp;bgImg);
    putimage(0, bgOffset - HEIGHT, &amp;bgImg);

    // 绘制玩家
    if (player-&gt;alive) {
        putimage(player-&gt;x, player-&gt;y, &amp;player-&gt;img);
    }

    // 绘制敌机
    for (auto&amp; e : enemies) {
        putimage(e-&gt;x, e-&gt;y, &amp;e-&gt;img);
    }

    // 绘制子弹
    for (auto&amp; b : bullets) {
        putimage(b-&gt;x, b-&gt;y, &amp;b-&gt;img);
    }

    // 绘制UI
    settextcolor(0x00FF00);
    settextstyle(20, 0, L"Consolas");
    wchar_t text[32];
    swprintf_s(text, L"Score: %d", score);
    outtextxy(10, 10, text);

    EndBatchDraw();
}</code></pre>
    <p>
    </p>
    <h4>
     2.6 主函数入口
    </h4>
    <p>
    </p>
    <pre><code class="language-cpp">int main() {
    initgraph(WIDTH, HEIGHT);  // 创建窗口
    GameManager game;          // 游戏管理器
    game.run();                // 启动游戏
    closegraph();              // 关闭图形
    return 0;
}</code></pre>
    <p>
    </p>
    <hr/>
    <h3>
     三、代码解析与运行效果
    </h3>
    <h4>
     3.1 关键实现技术
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        面向对象设计
       </strong>
       ：使用GameObject基类管理游戏实体
      </p>
     </li>
     <li>
      <p>
       <strong>
        STL容器
       </strong>
       ：list实现动态对象管理
      </p>
     </li>
     <li>
      <p>
       <strong>
        双缓冲绘图
       </strong>
       ：BeginBatchDraw/EndBatchDraw消除闪烁
      </p>
     </li>
     <li>
      <p>
       <strong>
        资源管理
       </strong>
       ：统一加载图片音效资源
      </p>
     </li>
     <li>
      <p>
       <strong>
        帧率控制
       </strong>
       ：GetTickCount实现60FPS稳定
      </p>
     </li>
    </ol>
    <h4>
     3.2 游戏效果演示
    </h4>
    <ul>
     <li>
      <p>
       左右方向键控制飞机移动
      </p>
     </li>
     <li>
      <p>
       空格键发射子弹（200ms冷却）
      </p>
     </li>
     <li>
      <p>
       自动生成随机位置敌机
      </p>
     </li>
     <li>
      <p>
       击中敌机获得分数并播放音效
      </p>
     </li>
     <li>
      <p>
       背景星空持续滚动
      </p>
     </li>
    </ul>
    <hr/>
    <h3>
     四、常见问题解决方案
    </h3>
    <h4>
     Q1：图片加载失败
    </h4>
    <ul>
     <li>
      <p>
       检查
       <code>
        res
       </code>
       文件夹是否在项目根目录
      </p>
     </li>
     <li>
      <p>
       确认图片格式为png/jpg
      </p>
     </li>
     <li>
      <p>
       右键图片文件→属性→取消"阻止"勾选
      </p>
     </li>
    </ul>
    <h4>
     Q2：音效无法播放
    </h4>
    <ul>
     <li>
      <p>
       确认
       <code>
        .wav
       </code>
       文件为PCM格式
      </p>
     </li>
     <li>
      <p>
       使用Audacity等工具转换音频格式
      </p>
     </li>
     <li>
      <p>
       检查PlaySound参数是否正确
      </p>
     </li>
    </ul>
    <h4>
     Q3：游戏运行卡顿
    </h4>
    <ul>
     <li>
      <p>
       关闭杀毒软件实时监控
      </p>
     </li>
     <li>
      <p>
       降低背景图片分辨率
      </p>
     </li>
     <li>
      <p>
       减少同时存在的对象数量
      </p>
     </li>
    </ul>
    <hr/>
    <h3>
     五、项目扩展方向
    </h3>
    <ol>
     <li>
      <p>
       增加玩家生命值系统
      </p>
     </li>
     <li>
      <p>
       实现BOSS战和特殊武器
      </p>
     </li>
     <li>
      <p>
       添加关卡难度递增
      </p>
     </li>
     <li>
      <p>
       集成分数排行榜功能
      </p>
     </li>
     <li>
      <p>
       支持手柄/触摸操作
      </p>
     </li>
    </ol>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36393731383032382f:61727469636c652f64657461696c732f313436323235313638" class_="artid" style="display:none">
 </p>
</div>


