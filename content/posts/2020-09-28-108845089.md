---
layout: post
title: "告别繁琐滑动,微信小程序一键回到顶部功能"
date: 2020-09-28 10:46:12 +0800
description: "告别繁琐滑动，微信小程序一键回到顶部功能_微信小程序回到顶部"
keywords: "微信小程序回到顶部"
categories: ['小程序']
tags: ['小程序', '前端']
artid: "108845089"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=108845089
    alt: "告别繁琐滑动,微信小程序一键回到顶部功能"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=108845089
featuredImagePreview: https://bing.ee123.net/img/rand?artid=108845089
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     告别繁琐滑动，微信小程序一键回到顶部功能
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_2">
     </a>
     前言
    </h3>
    <blockquote>
     <p>
      在日常使用微信小程序时，你是否曾经遇到过翻页疲劳的问题？或者在滑动页面时不断滑动才能回到顶部的尴尬情况？如果是这样，那么你一定不想错过今天的文章。我将为大家介绍一种简单而实用的方法，让你轻松实现
      <strong>
       “一键回到顶部”
      </strong>
      的功能，让你的微信小程序使用更加便捷舒适。
     </p>
    </blockquote>
    <hr/>
    <h3>
     <a id="_9">
     </a>
     实现思路
    </h3>
    <p>
     其实微信小程序跟
     <strong>
      <code>
       vue
      </code>
     </strong>
     实现的原理都大差不差，不同的是微信小程序有自己的方法，通过调用
     <strong>
      <code>
       wx.pageScrollTo(Object object)
      </code>
     </strong>
     方法即可实现该操作。
    </p>
    <hr/>
    <h3>
     <a id="wxpageScrollToObject_object_17">
     </a>
     wx.pageScrollTo(Object object)
    </h3>
    <p>
     该方法可实现将页面滚动到目标位置，支持选择器和滚动距离两种方式定位。
    </p>
    <table>
     <thead>
      <tr>
       <th>
        属性
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        scrollTop
       </td>
       <td>
        滚动到页面的目标位置，单位 px
       </td>
      </tr>
      <tr>
       <td>
        duration
       </td>
       <td>
        滚动动画的时长，单位 ms
       </td>
      </tr>
      <tr>
       <td>
        selector
       </td>
       <td>
        选择器
       </td>
      </tr>
      <tr>
       <td>
        offsetTop
       </td>
       <td>
        偏移距离，需要和 selector 参数搭配使用，可以滚动到 selector 加偏移距离的位置，单位 px
       </td>
      </tr>
      <tr>
       <td>
        success
       </td>
       <td>
        接口调用成功的回调函数
       </td>
      </tr>
      <tr>
       <td>
        fail
       </td>
       <td>
        接口调用失败的回调函数
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     如果你想要更深入的了解该方法，可查看
     <a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/scroll/wx.pageScrollTo.html" rel="nofollow">
      官方文档说明
     </a>
    </p>
    <hr/>
    <p>
     <strong>
      话不多说，下面进入实操。
     </strong>
    </p>
    <hr/>
    <blockquote>
     <p>
      <strong>
       wxml 代码
      </strong>
     </p>
    </blockquote>
    <p>
     <strong>
      <code>
       catchtap是阻止冒泡事件
      </code>
     </strong>
    </p>
    <pre><code class="prism language-kotlin"><span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 占位容器 <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"{<!-- -->{100}}"</span></span><span class="token operator">&gt;</span>内容<span class="token operator">..</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 回到顶部 <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view scroll<span class="token operator">-</span>y scroll<span class="token operator">-</span>top<span class="token operator">=</span>'<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>topNum<span class="token punctuation">}</span><span class="token punctuation">}</span>' bindscroll<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"scrolltoupper"</span></span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"gotopBox"</span></span> hidden<span class="token operator">=</span>'<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token operator">!</span>cangotop<span class="token punctuation">}</span><span class="token punctuation">}</span>' catchtap<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"goTopOn"</span></span><span class="token operator">&gt;</span>⬆️<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       js 代码
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-kotlin"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            topNum<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//默认为0</span>
            cangotop<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//回到顶部控件默认隐藏</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 获取滑动位置</span>
    onPageScroll<span class="token operator">:</span> <span class="token function">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"打印当前页面滚动的距离："</span></span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span>
        <span class="token comment">//当页面滑动距离大于一屏的高度时显示回到顶部控件</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            cangotop<span class="token operator">:</span> e<span class="token punctuation">.</span>scrollTop <span class="token operator">&gt;</span> wx<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>windowHeight <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//回到顶部，内部调用系统API</span>
    goTopOn<span class="token operator">:</span> <span class="token function">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>wx<span class="token punctuation">.</span>pageScrollTo<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            wx<span class="token punctuation">.</span><span class="token function">pageScrollTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                scrollTop<span class="token operator">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                title<span class="token operator">:</span> '提示'<span class="token punctuation">,</span>
                content<span class="token operator">:</span> '当前微信版本过低，暂无法使用该功能，请升级后重试。'
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       css 样式
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-css"><span class="token selector">.gotopBox</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 54rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_105">
     </a>
     实现效果展示
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f14dd61975e0ca1b73d4b3ef2502b9eb.gif#pic_center"/>
    </p>
    <hr/>
    <h3>
     <a id="font_colorcornflowerbluefont_113">
     </a>
     <font color="cornflowerblue">
      <strong>
       相关推荐
      </strong>
     </font>
    </h3>
    <p>
     ⭐
     <a href="https://blog.csdn.net/Shids_/article/details/108404174?spm=1001.2014.3001.5501">
      vue实现一键回到顶部
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f53686964735f2f:61727469636c652f64657461696c732f313038383435303839" class_="artid" style="display:none">
 </p>
</div>


