---
layout: post
title: "Django-REST-Framework-中-ModelViewSet-的接口方法及参数详解,继承的方法和核心类方法,常用查询方法接口"
date: 2025-03-12 16:25:09 +0800
description: "只返回当前用户创建的书籍。"
keywords: "Django REST Framework 中 ModelViewSet 的接口方法及参数详解，继承的方法和核心类方法，常用查询方法接口"
categories: ['未分类']
tags: ['后端', 'Python', 'Django']
artid: "146201505"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146201505
    alt: "Django-REST-Framework-中-ModelViewSet-的接口方法及参数详解,继承的方法和核心类方法,常用查询方法接口"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146201505
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146201505
cover: https://bing.ee123.net/img/rand?artid=146201505
image: https://bing.ee123.net/img/rand?artid=146201505
img: https://bing.ee123.net/img/rand?artid=146201505
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Django REST Framework 中 ModelViewSet 的接口方法及参数详解，继承的方法和核心类方法，常用查询方法接口
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2 style="text-align:center">
     <strong>
      第一部分（ModelViewSet）
     </strong>
    </h2>
    <h4>
     一、ModelViewSet 的继承结构
    </h4>
    <p>
     <code>
      ModelViewSet
     </code>
     继承自以下类：
    </p>
    <pre><code class="language-python">ModelViewSet = (
    CreateModelMixin +    # 创建
    RetrieveModelMixin +  # 检索单个
    UpdateModelMixin +    # 更新
    DestroyModelMixin +   # 删除
    ListModelMixin +      # 列表
    GenericViewSet        # 基础视图集
)
</code></pre>
    <h4>
     二、默认接口方法及参数
    </h4>
    <p>
     以下方法由 ‌
     <strong>
      mixins
     </strong>
     ‌ 提供，支持 RESTful 标准操作：
    </p>
    <table>
     <thead>
      <tr>
       <th style="width: 199px;">
        方法名
       </th>
       <th style="width: 79px;">
        HTTP 方法
       </th>
       <th style="width: 254px;">
        参数说明
       </th>
       <th style="width: 156px;">
        作用
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td style="width:199px">
        ‌
        <strong>
         <code>
          list（ListModelMixin）
         </code>
        </strong>
        ‌
       </td>
       <td style="width:79px">
        <code>
         GET
        </code>
       </td>
       <td style="width:254px">
        <code>
         self, request, *args, **kwargs
        </code>
       </td>
       <td style="width:156px">
        获取资源列表
       </td>
      </tr>
      <tr>
       <td style="width:199px">
        <p>
         ‌
         <strong>
          <code>
           create
          </code>
         </strong>
        </p>
        <p>
         <strong>
          <code>
           （CreateModelMixin）
          </code>
         </strong>
         ‌
        </p>
       </td>
       <td style="width:79px">
        <code>
         POST
        </code>
       </td>
       <td style="width:254px">
        <code>
         self, request, *args, **kwargs
        </code>
       </td>
       <td style="width:156px">
        创建新资源
       </td>
      </tr>
      <tr>
       <td style="width:199px">
        <p>
         ‌
         <strong>
          <code>
           retrieve
          </code>
         </strong>
        </p>
        <p>
         <strong>
          <code>
           （RetrieveModelMixin）
          </code>
         </strong>
         ‌
        </p>
       </td>
       <td style="width:79px">
        <code>
         GET
        </code>
       </td>
       <td style="width:254px">
        <code>
         self, request, *args, **kwargs
        </code>
        (需
        <code>
         pk
        </code>
        或
        <code>
         slug
        </code>
        )
       </td>
       <td style="width:156px">
        获取单个资源
       </td>
      </tr>
      <tr>
       <td style="width:199px">
        <p>
         ‌
         <strong>
          <code>
           update
          </code>
         </strong>
        </p>
        <p>
         <strong>
          <code>
           (UpdateModelMixin)
          </code>
         </strong>
         ‌
        </p>
       </td>
       <td style="width:79px">
        <code>
         PUT
        </code>
        /
        <code>
         PATCH
        </code>
       </td>
       <td style="width:254px">
        <code>
         self, request, *args, **kwargs
        </code>
        (需
        <code>
         pk
        </code>
        或
        <code>
         slug
        </code>
        )
       </td>
       <td style="width:156px">
        全量/部分更新资源
       </td>
      </tr>
      <tr>
       <td style="width:199px">
        <p>
         ‌
         <strong>
          <code>
           destroy
          </code>
         </strong>
        </p>
        <p>
         <strong>
          <code>
           (DestoryModelMixin)
          </code>
         </strong>
         ‌
        </p>
       </td>
       <td style="width:79px">
        <code>
         DELETE
        </code>
       </td>
       <td style="width:254px">
        <code>
         self, request, *args, **kwargs
        </code>
        (需
        <code>
         pk
        </code>
        或
        <code>
         slug
        </code>
        )
       </td>
       <td style="width:156px">
        删除资源
       </td>
      </tr>
     </tbody>
    </table>
    <h5>
     参数统一说明：
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       <code>
        request
       </code>
      </strong>
      ‌: Django 请求对象，包含请求数据 (
      <code>
       request.data
      </code>
      ) 和用户信息 (
      <code>
       request.user
      </code>
      )。
     </li>
     <li>
      ‌
      <strong>
       <code>
        *args
       </code>
      </strong>
      ‌: URL 中捕获的位置参数（如路径参数）。
     </li>
     <li>
      ==‌
      <strong>
       <code>
        **&amp;zwnj;==kwargs
       </code>
      </strong>
      : URL 中捕获的关键字参数（如
      <code>
       pk=1
      </code>
      ）。
     </li>
    </ul>
    <h4>
     三、核心类方法及参数详解
    </h4>
    <p>
     以下方法由
     <code>
      GenericViewSet
     </code>
     和
     <code>
      GenericAPIView
     </code>
     提供，用于控制视图行为：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        方法名
       </th>
       <th>
        参数
       </th>
       <th>
        返回值
       </th>
       <th>
        作用
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          get_queryset()
         </code>
        </strong>
        ‌
       </td>
       <td>
        无参数，但可通过
        <code>
         self.request
        </code>
        访问请求上下文
       </td>
       <td>
        <code>
         QuerySet
        </code>
       </td>
       <td>
        返回默认查询集（可覆盖以实现动态过滤）
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          get_object()
         </code>
        </strong>
        ‌
       </td>
       <td>
        无参数，从 URL 参数中提取
        <code>
         pk
        </code>
        或
        <code>
         slug
        </code>
       </td>
       <td>
        模型实例
       </td>
       <td>
        获取单个对象，支持
        <code>
         lookup_field
        </code>
        自定义查询字段
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          get_serializer()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         instance=None, data=None, many=False, partial=False, **kwargs
        </code>
       </td>
       <td>
        序列化器实例（
        <code>
         serializer
        </code>
        ）
       </td>
       <td>
        初始化序列化器，用于请求数据验证和响应数据生成（对需要更新的数据进行验证并返回验证后的数据）
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          get_serializer_class()
         </code>
        </strong>
        ‌
       </td>
       <td>
        无参数，但可通过
        <code>
         self.action
        </code>
        判断当前动作（如
        <code>
         create
        </code>
        /
        <code>
         update
        </code>
        ）
       </td>
       <td>
        序列化器类
       </td>
       <td>
        动态选择序列化器（例如不同动作使用不同序列化器）
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          perform_create()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         serializer
        </code>
        (序列化器实例)
       </td>
       <td>
        无，直接保存对象到数据库
       </td>
       <td>
        在创建对象前/后执行额外操作（如设置
        <code>
         created_by=request.user
        </code>
        ）
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          perform_update()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         serializer
        </code>
        (序列化器实例)
       </td>
       <td>
        无，直接更新对象到数据库
       </td>
       <td>
        在更新对象前/后执行额外操作（如记录日志）
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          perform_destroy()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         instance
        </code>
        (要删除的模型实例)
       </td>
       <td>
        无，直接删除对象
       </td>
       <td>
        在删除对象前/后执行额外操作（如级联删除关联数据）
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          filter_queryset()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         queryset
        </code>
        (基础查询集)
       </td>
       <td>
        过滤后的
        <code>
         QuerySet
        </code>
       </td>
       <td>
        应用所有已配置的过滤器（如
        <code>
         DjangoFilterBackend
        </code>
        ）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     四、关键参数扩展说明
    </h4>
    <h5>
     1.
     <code>
      get_object()
     </code>
     的底层参数
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       <code>
        lookup_field
       </code>
      </strong>
      ‌: 默认是
      <code>
       'pk'
      </code>
      ，可通过类属性修改为其他字段（如
      <code>
       slug
      </code>
      ）。
     </li>
     <li>
      ‌
      <strong>
       <code>
        lookup_url_kwarg
       </code>
      </strong>
      ‌: 默认与
      <code>
       lookup_field
      </code>
      相同，指定从 URL 中提取参数的名称。
     </li>
    </ul>
    <p>
     示例：
    </p>
    <pre><code class="language-python">class BookViewSet(ModelViewSet):
    lookup_field = 'isbn'  # 模型字段
    lookup_url_kwarg = 'book_isbn'  # URL 参数名
</code></pre>
    <h5>
     2.
     <code>
      get_serializer()
     </code>
     的参数
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       <code>
        instance
       </code>
      </strong>
      ‌: 要更新的模型实例（用于
      <code>
       update
      </code>
      操作）。
     </li>
     <li>
      ‌
      <strong>
       <code>
        data
       </code>
      </strong>
      ‌: 请求数据（
      <code>
       request.data
      </code>
      ）。
     </li>
     <li>
      ‌
      <strong>
       <code>
        partial
       </code>
      </strong>
      ‌: 是否允许部分更新（
      <code>
       True
      </code>
      对应
      <code>
       PATCH
      </code>
      请求）。
      <ul>
       <li>
        从请求参数中获取'partial'标识，当值为True时表示PATCH请求（部分更新字段），False时表示PUT请求（完整更新）。通过控制该参数，DRF的序列化器会决定是否进行全字段验证。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     五、权限与节流相关方法
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        方法名
       </th>
       <th>
        参数
       </th>
       <th>
        作用
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          get_permissions()
         </code>
        </strong>
        ‌
       </td>
       <td>
        无
       </td>
       <td>
        返回权限类列表（如
        <code>
         [IsAuthenticated]
        </code>
        ）
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          get_throttles()
         </code>
        </strong>
        ‌
       </td>
       <td>
        无
       </td>
       <td>
        返回节流类列表（如
        <code>
         [UserRateThrottle]
        </code>
        ）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     六、自定义场景示例
    </h4>
    <h5>
     1. 动态过滤查询集
    </h5>
    <pre><code class="language-python">def get_queryset(self):
    # 只返回当前用户创建的书籍
    return Book.objects.filter(created_by=self.request.user)
</code></pre>
    <h5>
     2. 按动作选择序列化器
    </h5>
    <pre><code class="language-python">def get_serializer_class(self):
    if self.action == 'list':
        return BookListSerializer
    return BookDetailSerializer
</code></pre>
    <h5>
     3. 记录操作日志
    </h5>
    <pre><code class="language-python">def perform_create(self, serializer):
    book = serializer.save(created_by=self.request.user)
    log_action('create', self.request.user, book)</code></pre>
    <hr/>
    <h4>
     七、完整方法调用流程图
    </h4>
    <pre><code class="language-python">sequenceDiagram
    participant Client
    participant ViewSet
    Client-&gt;&gt;ViewSet: HTTP 请求 (如 GET /books/)
    ViewSet-&gt;&gt;ViewSet: determine_action()
    ViewSet-&gt;&gt;ViewSet: get_queryset()
    ViewSet-&gt;&gt;ViewSet: filter_queryset()
    ViewSet-&gt;&gt;ViewSet: get_serializer()
    ViewSet-&gt;&gt;ViewSet: perform_动作()
    ViewSet-&gt;&gt;Client: 返回 Response
</code></pre>
    <p>
    </p>
    <h2 style="text-align:center">
     <strong>
      二部分（查询filter）
     </strong>
    </h2>
    <h4>
     一、模型关系假设
    </h4>
    <pre><code class="language-python"># models.py
class PracticeType(models.Model):
    p_type = models.CharField(max_length=50)  # 练习类型字段
    is_active = models.BooleanField(default=True)

class QuestionGroup(models.Model):
    name = models.CharField(max_length=100)
    g_type = models.ForeignKey(PracticeType, on_delete=models.CASCADE)  # 外键关联
    created_at = models.DateTimeField(auto_now_add=True)

class Question(models.Model):
    group = models.ForeignKey(QuestionGroup, on_delete=models.CASCADE, related_name='questions')
    content = models.TextField()
    score = models.IntegerField()
</code></pre>
    <hr/>
    <h4>
     二、查询方法详解（表格）
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        方法
       </th>
       <th>
        示例代码
       </th>
       <th>
        参数说明
       </th>
       <th>
        作用描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          filter()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         QuestionGroup.objects.filter(g_type__p_type='数学')
        </code>
       </td>
       <td>
        <code>
         g_type__p_type
        </code>
        : 跨模型查询
        <code>
         PracticeType.p_type
        </code>
        字段
       </td>
       <td>
        筛选
        <code>
         p_type
        </code>
        为 "数学" 的题组
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         QuestionGroup.objects.filter(created_at__year=2024)
        </code>
       </td>
       <td>
        <code>
         created_at__year
        </code>
        : 提取日期字段的年份
       </td>
       <td>
        筛选 2024 年创建的题组
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          exclude()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         QuestionGroup.objects.exclude(g_type__is_active=False)
        </code>
       </td>
       <td>
        <code>
         g_type__is_active
        </code>
        : 排除关联模型中
        <code>
         is_active=False
        </code>
        的题组
       </td>
       <td>
        排除关联到非激活练习类型的题组
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          order_by()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         QuestionGroup.objects.order_by('-created_at', 'g_type')
        </code>
       </td>
       <td>
        <code>
         -created_at
        </code>
        : 按创建时间倒序；
        <code>
         g_type
        </code>
        : 按外键的默认排序（如
        <code>
         p_type
        </code>
        ）
       </td>
       <td>
        先按创建时间倒序，再按练习类型排序
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          values()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         QuestionGroup.objects.values('id', 'g_type__p_type')
        </code>
       </td>
       <td>
        <code>
         id
        </code>
        : 返回题组 ID；
        <code>
         g_type__p_type
        </code>
        : 返回关联练习类型的
        <code>
         p_type
        </code>
        字段
       </td>
       <td>
        获取题组 ID 及其关联的练习类型名称
       </td>
      </tr>
      <tr>
       <td>
        ‌
        <strong>
         <code>
          annotate()
         </code>
        </strong>
        ‌
       </td>
       <td>
        <code>
         QuestionGroup.objects.annotate(total_score=Sum('questions__score'))
        </code>
       </td>
       <td>
        <code>
         total_score=Sum('questions__score')
        </code>
        : 计算每个题组下所有题目的总分
       </td>
       <td>
        为每个题组添加总分注解字段
        <code>
         total_score
        </code>
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
        <code>
         QuestionGroup.objects.annotate(avg_score=Avg('questions__score'))
        </code>
       </td>
       <td>
        <code>
         avg_score=Avg('questions__score')
        </code>
        : 计算每个题组下题目的平均分
       </td>
       <td>
        为每个题组添加平均分注解字段
        <code>
         avg_score
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     三、参数详细说明
    </h4>
    <h5>
     1. ==‌
     <strong>
      <code>
       filter(**&amp;zwnj;==kwargs)
      </code>
     </strong>
     - 过滤
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       参数语法
      </strong>
      ‌:
      <code>
       字段__操作符=值
      </code>
      （如
      <code>
       created_at__year=2024
      </code>
      ）
     </li>
     <li>
      ‌
      <strong>
       跨模型查询
      </strong>
      ‌: 使用双下划线
      <code>
       __
      </code>
      跳转关联模型字段（如
      <code>
       g_type__p_type
      </code>
      ）。
     </li>
     <li>
      ‌
      <strong>
       示例
      </strong>
      ‌:
      <pre><code class="language-python">
# 查询 p_type 为 "物理" 的题组
groups = QuestionGroup.objects.filter(g_type__p_type='物理')

# 查询 2023 年之后创建的题组
groups = QuestionGroup.objects.filter(created_at__year__gte=2023)</code></pre>
     </li>
    </ul>
    <h5>
     2. ==‌
     <strong>
      <code>
       exclude(**&amp;zwnj;==kwargs)
      </code>
     </strong>
     - 排除
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       参数语法
      </strong>
      ‌: 同
      <code>
       filter()
      </code>
      ，但排除满足条件的对象。
     </li>
     <li>
      ‌
      <strong>
       示例
      </strong>
      ‌:
      <pre><code class="language-python">
# 排除关联到非激活练习类型的题组
groups = QuestionGroup.objects.exclude(g_type__is_active=False)

# 排除 p_type 为 "化学" 的题组
groups = QuestionGroup.objects.exclude(g_type__p_type='化学')</code></pre>
     </li>
    </ul>
    <h5>
     3. ‌
     <strong>
      <code>
       order_by(*fields)
      </code>
     </strong>
     ‌ - 排序
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       参数语法
      </strong>
      ‌: 字段名前加
      <code>
       -
      </code>
      表示倒序（如
      <code>
       -created_at
      </code>
      ）。
     </li>
     <li>
      ‌
      <strong>
       跨模型排序
      </strong>
      ‌: 支持按关联模型字段排序（如
      <code>
       g_type__p_type
      </code>
      ）。
     </li>
     <li>
      ‌
      <strong>
       示例
      </strong>
      ‌:
      <pre><code class="language-python">
# 按练习类型名称升序，再按创建时间倒序
groups = QuestionGroup.objects.order_by('g_type__p_type', '-created_at')</code></pre>
     </li>
    </ul>
    <h5>
     4. ‌
     <strong>
      <code>
       values(*fields)
      </code>
     </strong>
     ‌ - 取字段
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       参数语法
      </strong>
      ‌: 指定要返回的字段或关联字段（如
      <code>
       g_type__p_type
      </code>
      ）。
     </li>
     <li>
      ‌
      <strong>
       返回结果
      </strong>
      ‌: 字典列表（而非模型对象）。
     </li>
     <li>
      ‌
      <strong>
       示例
      </strong>
      ‌:
      <pre><code class="language-python">
# 获取所有题组的 ID、名称及其关联的练习类型名称
data = QuestionGroup.objects.values('id', 'name', 'g_type__p_type')</code></pre>
     </li>
    </ul>
    <h5>
     5. ‌
     <strong>
      <code>
       annotate(别名=聚合函数)
      </code>
     </strong>
     ‌ - 注解
    </h5>
    <ul>
     <li>
      ‌
      <strong>
       参数语法
      </strong>
      ‌: 使用聚合函数（如
      <code>
       Count
      </code>
      ,
      <code>
       Sum
      </code>
      ,
      <code>
       Avg
      </code>
      ）生成计算字段。
     </li>
     <li>
      ‌
      <strong>
       跨模型聚合
      </strong>
      ‌: 通过关联模型的
      <code>
       related_name
      </code>
      （如
      <code>
       questions
      </code>
      ）访问子对象。
     </li>
     <li>
      ‌
      <strong>
       示例
      </strong>
      ‌:
      <pre><code class="language-python">
from django.db.models import Count, Sum, Avg

# 统计每个题组的问题数量
groups = QuestionGroup.objects.annotate(question_count=Count('questions'))

# 计算每个题组的总分和平均分
groups = QuestionGroup.objects.annotate(
    total_score=Sum('questions__score'),
    avg_score=Avg('questions__score')
)</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     四、高级用法
    </h4>
    <h5>
     1. 链式调用
    </h5>
    <pre><code class="language-python"># 查询 2024 年创建的数学题组，按总分降序排列
groups = QuestionGroup.objects.filter(
    g_type__p_type='数学',
    created_at__year=2024
).annotate(
    total_score=Sum('questions__score')
).order_by('-total_score')</code></pre>
    <h5>
     2. 跨多级模型查询
    </h5>
    <pre><code class="language-python"># 查询所有题目分数大于 80 的题组
groups = QuestionGroup.objects.filter(questions__score__gt=80)</code></pre>
    <h5>
     3. 空值处理
    </h5>
    <pre><code class="language-python"># 查询没有关联任何问题的题组
groups = QuestionGroup.objects.filter(questions__isnull=True)</code></pre>
    <hr/>
    <h4>
     五、性能优化
    </h4>
    <ul>
     <li>
      ‌
      <strong>
       <code>
        select_related
       </code>
      </strong>
      ‌: 用于外键或一对一字段的预加载（减少查询次数）。
      <pre><code class="language-python">
# 预加载 g_type 关联的 PracticeType 对象
groups = QuestionGroup.objects.select_related('g_type').filter(g_type__p_type='数学')</code></pre>
     </li>
     <li>
      ‌
      <strong>
       <code>
        prefetch_related
       </code>
      </strong>
      ‌: 用于多对多或一对多字段的预加载。
      <pre><code class="language-python"># 预加载题组下的所有问题
groups = QuestionGroup.objects.prefetch_related('questions').annotate(total_score=Sum('questions__score'))</code></pre>
      <p>
      </p>
     </li>
    </ul>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34323337323834322f:61727469636c652f64657461696c732f313436323031353035" class_="artid" style="display:none">
 </p>
</div>


