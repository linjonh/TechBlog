---
layout: post
title: "小程序学习day3"
date: 2025-01-17 21:22:09 +0800
description: "指的是页面间的相互跳转，_navigator标签"
keywords: "navigator标签"
categories: ['小程序']
tags: ['小程序', '学习']
artid: "140778160"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=140778160
    alt: "小程序学习day3"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=140778160
featuredImagePreview: https://bing.ee123.net/img/rand?artid=140778160
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     小程序学习——day3
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     页面导航
    </h2>
    <p>
     指的是页面间的相互跳转，小程序实现页面导航有两种方式
    </p>
    <ol>
     <li>
      声明式导航
      <ul>
       <li>
        在页面上声明一个
        <span style="color:#fe2c24;">
         <code>
          &lt;navigator&gt;
         </code>
        </span>
        导航组件
       </li>
       <li>
        通过点击
        <code>
         &lt;navigator&gt;
        </code>
        组件实现页面跳转
       </li>
      </ul>
     </li>
     <li>
      编程式导航
      <ul>
       <li>
        调用小程序的导航API，实现页面的跳转
       </li>
      </ul>
     </li>
    </ol>
    <h3>
     声明式导航
    </h3>
    <p>
     <strong>
      导航到tabBar页面
     </strong>
    </p>
    <p>
     在使用&lt;navigator&gt;组件跳转到指定tabBar页面时，需要指定的
     <span style="color:#fe2c24;">
      url
     </span>
     属性和
     <span style="color:#fe2c24;">
      open-type
     </span>
     属性，其中：
    </p>
    <ul>
     <li>
      url表示要跳转页面地址，以
      <span style="color:#fe2c24;">
       /
      </span>
      开头
     </li>
     <li>
      open-type表示跳转的方式，必须为
      <span style="color:#fe2c24;">
       switchTab
      </span>
     </li>
    </ul>
    <pre><code>&lt;navigator url="/pages/home/home" open-type ="switchTab"&gt;跳转到home&lt;/navigator&gt;</code></pre>
    <p>
     <strong>
      导航到非tabBar页面
     </strong>
    </p>
    <p>
     在使用&lt;navigator&gt;组件跳转到指定非tabBar页面时，需要指定的
     <span style="color:#fe2c24;">
      url
     </span>
     属性和
     <span style="color:#fe2c24;">
      open-type
     </span>
     属性，其中：
    </p>
    <ul>
     <li>
      url表示要跳转页面地址，以
      <span style="color:#fe2c24;">
       /
      </span>
      开头
     </li>
     <li>
      open-type表示跳转的方式，必须为
      <span style="color:#fe2c24;">
       navigate
      </span>
     </li>
    </ul>
    <p>
     <span style="color:#0d0016;">
      <span style="background-color:#f9eda6;">
       在导航到非tabBar页面，open-type="navigate"可以省略
      </span>
     </span>
    </p>
    <p>
     <strong>
      后退导航
     </strong>
    </p>
    <p>
     后退到上一页面或多级页面，需指定open-type和delta属性
    </p>
    <ul>
     <li>
      open-type值必须是navigateBack,表示进行后退导航
     </li>
     <li>
      delta值必须是数字，表示要后退的层级
     </li>
    </ul>
    <pre><code>&lt;navigator open-type="navigateBack" delta="1"&gt;返回上一层&lt;/navigator&gt;</code></pre>
    <h3>
     编程式导航
    </h3>
    <p>
     调用
     <code>
      <span style="color:#fe2c24;">
       wx.switchTab
      </span>
      (Object object)
     </code>
     方法，可以跳转到tabBar页面。其中
     <strong>
      Object参数对象
     </strong>
     的属性列表如下：
    </p>
    <p>
     <img alt="" height="183" src="https://i-blog.csdnimg.cn/direct/43ca9d99b9dc459bb62c3f6b4522952c.png" width="694"/>
    </p>
    <pre><code>&lt;button bindtap="gotoContact" type="default"&gt;跳转到contact页面&lt;/button&gt;


  // 通过编程式导航跳转到Contact页面
  gotoContact() {
  wx.switchTab({
      url: '/pages/contact/contact',
  })
},</code></pre>
    <p>
     <strong>
      导航到非tabBar页面
     </strong>
    </p>
    <p>
     调用
     <span style="color:#fe2c24;">
      <code>
       wx.
      </code>
      navigateTo
     </span>
     <code>
      (Object object)
     </code>
     方法，可以跳转到非tabBar页面。其中
     <strong>
      Object参数对象
     </strong>
     的属性列表如下：
    </p>
    <p>
     <img alt="" height="179" src="https://i-blog.csdnimg.cn/direct/d9846507c26f4befa0aba5d86b04a29d.png" width="692"/>
    </p>
    <pre><code>&lt;button bindtap="gotoinfo"&gt;跳转到info页面&lt;/button&gt;

gotoinfo(){
    wx.navigateTo({
      url: '../info/info',
    })
  },</code></pre>
    <p>
     <strong>
      后退导航
     </strong>
    </p>
    <p>
     调用
     <span style="color:#fe2c24;">
      <code>
       wx.
      </code>
      navigateBack
     </span>
     <code>
      (Object object)
     </code>
     方法，可以后退到上一页面或多级页面
    </p>
    <p>
     <img alt="" height="181" src="https://i-blog.csdnimg.cn/direct/3b7a8dc12692437193bac570fd6d2120.png" width="689"/>
    </p>
    <pre><code>&lt;button bindtap="backlast"&gt;回退到上一层&lt;/button&gt;

// 默认回退到上一层
  backlast(){
    wx.navigateBack()
  },</code></pre>
    <h2>
     导航传参
    </h2>
    <h3>
     声明式导航传参
    </h3>
    <p>
     navigator中的url指定跳转页面，后面可跟参数：
    </p>
    <ul>
     <li>
      参数与路径之间用
      <span style="color:#fe2c24;">
       ?
      </span>
      分隔
     </li>
     <li>
      参数键与参数值用
      <span style="color:#fe2c24;">
       =
      </span>
      相连
     </li>
     <li>
      不同参数用
      <span style="color:#fe2c24;">
       &amp;
      </span>
      分隔
     </li>
    </ul>
    <pre><code>&lt;navigator url="/pages/info/info?name=zhangsan&amp;age=18"&gt;跳转传参&lt;/navigator&gt;</code></pre>
    <h3>
     编程式传参
    </h3>
    <pre><code>&lt;button bindtap="gotoinfo2"&gt;跳转到info页面传参&lt;/button&gt;

gotoinfo2(){
    wx.navigateTo({
      url: '/pages/info/info?name=ge&amp;six=1',
    })
  },</code></pre>
    <h3>
     在onLoad中接受导航参数
    </h3>
    <p>
     通过声明式或编程式传参，可以在onLoad事件直接获取到
    </p>
    <pre><code>data: {
    query: {}

  },

onLoad(options) {
    console.log(options),
    this.setData({
      query: options
    })

  },</code></pre>
    <p>
     一般在data中声明一个
     <span style="color:#fe2c24;">
      query
     </span>
     接收导航传过来的参数
    </p>
    <h2>
     页面事件
    </h2>
    <h3>
     下拉刷新
    </h3>
    <p>
     <strong>
      全局下拉刷新
     </strong>
    </p>
    <p>
     在app.json的window结点，将enablePullDownRefresh设置为true
    </p>
    <p>
     <strong>
      局部下拉刷新
     </strong>
    </p>
    <p>
     在页面的.json配置文件中，将enablePullDownRefresh设置为true
    </p>
    <p>
     在页面.js文件中，通过
     <span style="color:#fe2c24;">
      onPullDownRefresh()
     </span>
     函数监听当前页面下拉刷新事件
    </p>
    <p>
     <span style="background-color:#ffd900;">
      当数据下拉刷新重载后，调用wx.stopPullDownRefresh()停止当前页面的下拉刷新
     </span>
    </p>
    <pre><code class="hljs">&lt;view&gt;当前数值：{<!-- -->{count}}&lt;/view&gt;
&lt;button bindtap="addCount"&gt;+1&lt;/button&gt;



  data: {
    count: 0
  },
  addCount(){
    this.setData({
      count: this.data.count+1
    })
  },
onPullDownRefresh() {
    //下拉刷新后count值变为1
    this.setData({
      count: 0
    })
    wx.stopPullDownRefresh()//停止下拉刷新
  },</code></pre>
    <h3>
     <strong>
      上拉触底
     </strong>
    </h3>
    <p>
     在页面.js文件中，通过
     <span style="color:#fe2c24;">
      onReachBottom()
     </span>
     函数监听当前页面的下拉触底事件
    </p>
    <p>
     在页面的
     <code>
      .json
     </code>
     文件中配置
     <code>
      onReachBottomDistance
     </code>
     属性配置上拉触底的距离（距离底部多少距离开始调用
     <code>
      onReachBottom()
     </code>
     函数）
    </p>
    <h3>
     案例
    </h3>
    <p>
     1.获取随机颜色
    </p>
    <pre><code class="hljs">  data: {
    colorList: []
  },
 getcolors(){
   
    wx.request({
      url: 'https://applet-base-api-t.itheima.net/api/color',
      method: 'GET',
      success: ({data: res})=&gt;{
        console.log(res)
        this.setData({
          colorList: [...this.data.colorList, ...res.data]
        })
      },
   
    })
  },
  onLoad(options) {
    this.getcolors()
  },
</code></pre>
    <p>
     2、渲染美化页面
    </p>
    <pre><code class="hljs">&lt;view wx:for="{<!-- -->{colorList}}" wx:key="index" class="num-item" style="background-color: rgba({<!-- -->{item}});"&gt;{<!-- -->{item}}&lt;/view&gt;</code></pre>
    <pre><code class="hljs">.num-item {
  border: 1rpx solid #efefef;
  border-radius: 8rpx;
  line-height: 200rpx;
  text-align: center;
  margin: 15rpx;
  text-shadow: 0rpx 0rpx 5rpx #fff;
  box-shadow: 1rpx 1rpx 6rpx #aaa;
}</code></pre>
    <p>
     3、上拉触底获取颜色
    </p>
    <pre><code class="hljs">  onReachBottom() {
    this.getcolors()
  },</code></pre>
    <p>
     4、添加Loading提示效果
    </p>
    <pre><code class="hljs">wx.showLoading({
      title: '数据加载中...',
    })

complete: ()=&gt;{
        wx.hideLoading()
      }</code></pre>
    <p>
     <img alt="" height="554" src="https://i-blog.csdnimg.cn/direct/7cd92908ad57407e8f2ab3515ff5147f.png" width="559"/>
    </p>
    <p>
     5、上拉触底节流处理
    </p>
    <ul>
     <li>
      在data中定义isloading节流阀
     </li>
    </ul>
    <blockquote>
     <p>
      false表示当前没有进行任何数据请求
      <br/>
      true表示当前正在进 行数据请求
     </p>
    </blockquote>
    <pre><code class="hljs">isloading:fale
</code></pre>
    <p>
    </p>
    <ul>
     <li>
      在getColor()方法中修改isloading节流阀的值
     </li>
    </ul>
    <blockquote>
     <p>
      在刚调用getColors时将节流阀设置true
      <br/>
      在网络请求的complete回调函数中，将节流阀重置为false
     </p>
    </blockquote>
    <pre><code class="hljs">getColor() {
    this.setData({
        isloading: true
    })
    ......
    wx.request({
        ......
        complete: () =&gt; {
            wx.hideLoading()
            this.setData({
                isloading: false
            })
        ......
</code></pre>
    <p>
    </p>
    <ul>
     <li>
      在onReachBottom中判断节流阀的值，从而对数据请求进行节流控制
     </li>
    </ul>
    <blockquote>
     <p>
      如果节流阀的值为true，则阻止当前请求
      <br/>
      如果节流阀的值为false，则发起数据请求
     </p>
    </blockquote>
    <pre><code class="hljs">onReachBottom () {
    if(this.data.isloading) return
    this.getColor()
},</code></pre>
    <p>
     <strong>
      自定义编译模式
     </strong>
    </p>
    <p>
     <img alt="" height="543" src="https://i-blog.csdnimg.cn/direct/1fcd61bc874d4ee2a796a6cf45930cb2.png" width="1200"/>
    </p>
    <h2>
     生命周期
    </h2>
    <p>
     <strong>
      生命周期分类
     </strong>
    </p>
    <blockquote>
     <ol>
      <li>
       应用生命周期
      </li>
      <li>
       页面生命周期
      </li>
     </ol>
    </blockquote>
    <p>
     <img alt="" height="251" src="https://i-blog.csdnimg.cn/direct/0515b2fec321437c95218c1c863c4ead.png" width="1200"/>
    </p>
    <p>
     生命周期强调时间段，生命周期函数强调时间点
    </p>
    <p>
     <strong>
      生命周期函数分类
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       应用的生命周期函数
      </strong>
     </li>
    </ol>
    <ul>
     <li>
      在app.js中声明
     </li>
    </ul>
    <pre><code class="hljs">App({

  /**
   * 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）
   */
  onLaunch: function () {
    
  },

  /**
   * 当小程序启动，或从后台进入前台显示，会触发 onShow
   */
  onShow: function (options) {
    
  },

  /**
   * 当小程序从前台进入后台，会触发 onHide
   */
  onHide: function () {
    
  },

  /**
   * 当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息
   */
  onError: function (msg) {
    
  }
})</code></pre>
    <p>
     <strong>
      2.页面的生命周期函数
     </strong>
    </p>
    <ul>
     <li>
      在页面的.js中声明
     </li>
    </ul>
    <pre><code class="hljs">Page({

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad(options) {

  },

  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  onReady() {

  },

  /**
   * 生命周期函数--监听页面显示
   */
  onShow() {

  },

  /**
   * 生命周期函数--监听页面隐藏
   */
  onHide() {

  },

  /**
   * 生命周期函数--监听页面卸载
   */
  onUnload() {

  },

})</code></pre>
    <h2>
     WXS
    </h2>
    <p>
     WXS（WeiXin Script）是
     <strong>
      小程序独有的一套脚本语言
     </strong>
     ，结合WXML，可以构建出页面的结构。
    </p>
    <p>
     1、wxs有自己的数据类型
    </p>
    <p>
     <img alt="" height="106" src="https://i-blog.csdnimg.cn/direct/258a644c413e42df93d2f735ecc206a1.png" width="1083"/>
    </p>
    <p>
     2、wxs不支持类似于ES6及以上的语法形式
    </p>
    <p>
     不支持：let、const、解构赋值、展开运算符、箭头函数、对象属性简写、etc……
    </p>
    <p>
     支持：var 定义变量、普通function函数等类似于ES5的语法
    </p>
    <p>
     3、wxs遵循CommonJS规范
    </p>
    <ul>
     <li>
      <span style="color:#fe2c24;">
       module对象
      </span>
     </li>
     <li>
      <span style="color:#fe2c24;">
       require()函数
      </span>
     </li>
     <li>
      <span style="color:#fe2c24;">
       module.exports对象
      </span>
     </li>
    </ul>
    <p>
     <strong>
      内嵌wxs脚本
     </strong>
    </p>
    <p>
     wxs代码可以编写在wxml文件中的
     <span style="color:#fe2c24;">
      <code>
       &lt;wxs&gt;
      </code>
      标签
     </span>
     内，就像
     <code>
      Javascript
     </code>
     代码可以编写在html文件中的
     <code>
      &lt;script&gt;
     </code>
     标签内一样。
    </p>
    <p>
     wxml文件中的每个
     <code>
      &lt;wxs&gt;&lt;/wxs&gt;
     </code>
     标签，
     <span style="color:#fe2c24;">
      必须提供
      <code>
       module
      </code>
      属性
     </span>
     ，用来指定当前WXS的模块名称，方便在wxml中访问模块中的成员：
    </p>
    <p>
     <span style="background-color:#ffd900;">
      m1将文本转为大写: zs-&gt;ZS
     </span>
    </p>
    <pre><code class="hljs"> data: {
    username: 'zs'
  },


&lt;view&gt;{<!-- -->{m1.toUpper(username)}}&lt;/view&gt;
&lt;wxs module="m1"&gt;
    module.exports.toUpper = function (str) {
        return str.toUpperCase()
    }
&lt;/wxs&gt;</code></pre>
    <p>
     <strong>
      外联的wxs脚本
     </strong>
    </p>
    <p>
     <span style="color:#fe2c24;">
      <strong>
       编写在以.wxs为后缀名的文件内  （在utils文件夹下创建）
      </strong>
     </span>
    </p>
    <pre><code class="hljs">//tools.wxs

//转化为小写
function toLower(str){
  return str.toLowerCase()
}
module.exports = {
  toLower: toLower    // 属性 : 具体对应的值
}</code></pre>
    <p>
     <strong>
      使用外联脚本
     </strong>
    </p>
    <p>
     在wxml中引入的wxs脚本时，必须为&lt;wxs&gt;标签添加
     <span style="color:#fe2c24;">
      module和src
     </span>
     属性，其中
    </p>
    <ul>
     <li>
      module指定模块名称
     </li>
     <li>
      src指定要引入的文件路径，必须是相对路径
     </li>
    </ul>
    <pre><code class="hljs">//.js
data: {
    country: 'CHINA'
  },


//.wxml
&lt;view&gt;{<!-- -->{m2.toLower(country)}}&lt;/view&gt;
&lt;wxs src="../../utils/tools.wxs" module="m2"&gt;&lt;/wxs&gt;</code></pre>
    <p>
     <strong>
      特点
     </strong>
    </p>
    <ul>
     <li>
      wxs典型的应用场景就是“过滤器”，经常配合Mustache语法进行使用。但是，在wxs中定义的函数不能作为组件的事件回调函数。例如下面是错误的：
     </li>
    </ul>
    <pre><code class="hljs">&lt;button bindtap="m2.toLower"&gt;按钮&lt;/button&gt;</code></pre>
    <ul>
     <li>
      隔离性：wxs的运行环境和其他JavaScript代码是隔离的。
     </li>
    </ul>
    <p>
     wxs不能调用js中定义的函数
     <br/>
     wxs不能调用小程序提供的API
    </p>
    <ul>
     <li>
      性能好
     </li>
    </ul>
    <p>
     IOS设备中比JavaScript代码块2~20倍
    </p>
    <p>
     但Android设备二者运行效率无差异
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36393338303933382f:61727469636c652f64657461696c732f313430373738313630" class_="artid" style="display:none">
 </p>
</div>


