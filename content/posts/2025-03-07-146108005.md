---
layout: post
title: "golang将大接口传递给小接口以及场景"
date: 2025-03-07 23:47:48 +0800
description: "将大接口传递给小接口是一种非常灵活且强大的设计模式，广泛应用于很多场景中。通过这种方式，软件系统可以实现更好的解耦和可复用性，同时提高了系统的可维护性。理解并应用这一模式，对于提升 Go 语言开发的效率和质量是非常重要的。"
keywords: "golang将大接口传递给小接口以及场景"
categories: ['Go']
tags: ['开发语言', '后端', 'Golang']
artid: "146108005"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146108005
    alt: "golang将大接口传递给小接口以及场景"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146108005
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146108005
cover: https://bing.ee123.net/img/rand?artid=146108005
image: https://bing.ee123.net/img/rand?artid=146108005
img: https://bing.ee123.net/img/rand?artid=146108005
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     golang将大接口传递给小接口以及场景
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="golang_1">
     </a>
     golang将大接口传递给小接口
    </h2>
    <h3>
     <a id="_3">
     </a>
     背景
    </h3>
    <p>
     在 Go 语言中，接口是一种强大的工具，它允许我们定义对象的行为而不关心其具体实现。特别是在复杂的应用程序中，
     <strong>
      将一个实现了较大接口的对象传递给只接收较小接口的函数是一种常见且有效的设计模式
     </strong>
     。
    </p>
    <p>
     Go 语言中接口：
    </p>
    <ul>
     <li>
      动态类型：接口变量可以保存任何类型的值，只要该类型实现了接口的方法。
     </li>
     <li>
      无继承：Go 的接口没有继承的概念，接口之间没有显式的关系。
     </li>
     <li>
      类型安全：Go 编译器会在编译时检查方法的实现，确保安全性。
     </li>
    </ul>
    <h3>
     <a id="_11">
     </a>
     什么是大接口传递给小接口
    </h3>
    <p>
     在编程中，尤其是在使用 Go 语言的情况下，“将大接口传递给小接口”指的是一种设计模式，其中一个类型（或对象）实现了一个包含多种功能和方法的大接口，而在使用时，它可以被传递给需要较小接口的函数。小接口通常包含方法集合的子集，而大接口可能包含更多的功能。
    </p>
    <p>
     这种机制充分利用了多态性和接口的组合特性，具有以下几个关键点：
    </p>
    <ul>
     <li>
      接口的可替换性：任何实现了较大接口的类型，也必然实现了所有的方法，可以被用作较小接口的实现，这是 Go 的类型系统的一部分。
     </li>
     <li>
      灵活性和解耦：通过使用接口，代码的不同部分可以在编译时保持解耦。调用者与实现者之间通过接口交互，而不需要了解具体的实现细节。
     </li>
     <li>
      重用性：开发人员可以在不更改函数的情况下，传递不同的实现，从而提高代码的可重用性和可测试性。
     </li>
    </ul>
    <h3>
     <a id="_20">
     </a>
     使用场景
    </h3>
    <p>
     将大接口传递给小接口的场景在软件开发中非常常见，以下是一些典型的使用场景：
    </p>
    <ol>
     <li>
      中间件设计
      <br/>
      在 web 应用中，您可能需要创建多个中间件来处理 HTTP 请求。每个中间件可能只需访问请求的某些信息，例如请求的路径和方法。那么，您可以定义一个大接口来包含所有中间件需要用到的方法，并定义一个小接口只包含日志记录或鉴权等特定职责的方法。
     </li>
    </ol>
    <pre><code class="prism language-go"><span class="token comment">// 大接口</span>
<span class="token keyword">type</span> MiddlewareContext <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">LogRequest</span><span class="token punctuation">(</span>method <span class="token builtin">string</span><span class="token punctuation">,</span> path <span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token function">ValidateRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
    <span class="token comment">// 其他功能...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 小接口</span>
<span class="token keyword">type</span> Logger <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">LogRequest</span><span class="token punctuation">(</span>method <span class="token builtin">string</span><span class="token punctuation">,</span> path <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      事件处理
      <br/>
      在事件驱动的系统中，您可能定义一个大接口来描述事件处理程序的所有能力（如连接、接收事件、发送事件等）。但是，在某些情况下，只需要处理一些特定类型的事件。本质上，您可以将大接口传递给仅需要对事件进行特定处理的小接口。
     </li>
    </ol>
    <pre><code class="prism language-go"><span class="token comment">// 大接口</span>
<span class="token keyword">type</span> EventHandler <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">HandleEvent</span><span class="token punctuation">(</span>event Event<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 小接口</span>
<span class="token keyword">type</span> SimpleEventHandler <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">HandleEvent</span><span class="token punctuation">(</span>event Event<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="3">
     <li>
      工具库或框架
      <br/>
      当开发工具库或框架时，
      <strong>
       您可能希望提供一个大的接口来封装所有的功能。而使用者只需使用小接口来实现他们的需求。这种设计可以使用户在实现时不需要考虑整个接口的复杂性，只需实现他们所需的方法。
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-go"><span class="token comment">// 大接口</span>
<span class="token keyword">type</span> DataProcessor <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Insert</span><span class="token punctuation">(</span>data Data<span class="token punctuation">)</span>
    <span class="token function">Update</span><span class="token punctuation">(</span>data Data<span class="token punctuation">)</span>
    <span class="token function">Delete</span><span class="token punctuation">(</span>dataID <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 小接口</span>
<span class="token keyword">type</span> Reader <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Get</span><span class="token punctuation">(</span>dataID <span class="token builtin">string</span><span class="token punctuation">)</span> Data
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      将大接口传递给小接口是一种非常灵活且强大的设计模式，广泛应用于很多场景中。通过这种方式，软件系统可以实现更好的解耦和可复用性，同时提高了系统的可维护性。理解并应用这一模式，对于提升 Go 语言开发的效率和质量是非常重要的。
     </p>
    </blockquote>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f696e746861742f:61727469636c652f64657461696c732f313436313038303035" class_="artid" style="display:none">
 </p>
</div>


