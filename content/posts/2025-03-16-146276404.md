---
layout: post
title: "C语言之-条件编译和预处理指令"
date: 2025-03-16 22:59:46 +0800
description: "条件编译在编译⼀个程序的时候我们如果要将⼀条语句（⼀组语句）编译或者放弃是很⽅便的。因为我们有条件编译指令。⽐如说：调试性的代码删除可惜，保留⼜碍事，所以我们可以选择性的编译。"
keywords: "C语言之 条件编译和预处理指令"
categories: ['未分类']
tags: ['算法']
artid: "146276404"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146276404
    alt: "C语言之-条件编译和预处理指令"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146276404
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146276404
cover: https://bing.ee123.net/img/rand?artid=146276404
image: https://bing.ee123.net/img/rand?artid=146276404
img: https://bing.ee123.net/img/rand?artid=146276404
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C语言之 条件编译和预处理指令
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
     <span style="color:#1456f0">
     </span>
    </h3>
    <h3>
     <span style="color:#1f2329">
      条件编译
     </span>
    </h3>
    <div>
    </div>
    <div>
     <span style="color:#1f2329">
      在编译⼀个程序的时候我们如果要将⼀条语句（⼀组语句）编译或者放弃是很⽅便的。因为我们有条件编译指令。
     </span>
    </div>
    <div>
     <span style="color:#1f2329">
      ⽐如说：
     </span>
    </div>
    <div>
     <span style="color:#646a73">
      调试性的代码删除可惜，保留⼜碍事，所以我们可以选择性的编译。
     </span>
    </div>
    <div>
     <pre><code>#define M 1
int main()
{
	int n = 10;
//#if M==1
#if M==0
	printf("%d", n);
#endif
	return 0;
}</code></pre>
     <div>
     </div>
     <h4>
      1.#if 常量表达式
     </h4>
     <div>
     </div>
     <div>
      <pre><code>int main()
{
	int a = 1;//这里为什么不执行呢，这就涉及到条件编译指令的预处理了，而局部变量是在编译之后才开始运行的
#if a == 1//#后面一定要是常量，不能是变量
		printf("你师弟呢");
#endif
	return 0;
}</code></pre>
      <h4>
       <span style="color:#986801">
        2.
       </span>
       <span style="color:#2b2f36">
        多个分⽀的条件编译
       </span>
      </h4>
      <div>
       <pre><code>#define M 5
int main()
{
#if M==1
	printf("hehe\n");
#elif M==2
	printf("haha\n");
#elif M==3
	printf("hihi\n");
#else
	printf("呵呵\n");
#endif
	return 0;
}</code></pre>
       <h4>
        <span style="color:#986801">
         3.
        </span>
        <span style="color:#2b2f36">
         判断是否被定义
        </span>
       </h4>
       <div>
        <pre><code>#define LISI 10
int main()
{
//#ifdef LISI//ifdef代表的是被定义的
#ifndef LISI//ifndef代表的就是未被定义的
	printf("lisi");
#endif
	return 0;
}</code></pre>
        <h4>
         <span style="color:#986801">
          4.
         </span>
         <span style="color:#2b2f36">
          嵌套指令
         </span>
        </h4>
        <div>
         <pre><code>#if defined(OS_UNIX)//如果被定义就往下，未被就删除
     #ifdef OPTION1
         unix_version_option1();//内部内容也一样
     #endif
     #ifdef OPTION2
         unix_version_option2();
     #endif
 #elif defined(OS_MSDOS)//一样看是否被定义
     #ifdef OPTION2
         msdos_version_option2();
     #endif</code></pre>
         <p>
          嵌套指令防止头文件的重复调用，防止浪费时间空间
          <br/>
          #ifndef __TEST_H__
          <br/>
          #define __TEST_H__
          <br/>
          //头⽂件的内容
          <br/>
          #endif //__TEST_H__
          <br/>
          或者用 #pragma once，现在大多数使用这个
         </p>
         <p>
         </p>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div>
     <h3>
      <span style="color:#1f2329">
       头⽂件的包含
      </span>
     </h3>
     <h4>
      <span style="color:#1f2329">
       头⽂件被包含的⽅式：
      </span>
     </h4>
     <div>
      <span style="color:#1456f0">
      </span>
      <span style="color:#1f2329">
       本地⽂件包含
      </span>
     </div>
     <div>
     </div>
     <div>
      <span style="color:#4078f2">
       #
      </span>
      <span style="color:#a626a4">
       include
      </span>
      <span style="color:#50a14f">
       "filename"
      </span>
     </div>
     <div>
     </div>
     <div>
      <div>
       <span style="color:#1f2329">
        查找头⽂件直接去标准路径下去查找，如果找不到就提⽰编译错误。
       </span>
      </div>
      <div>
      </div>
      <div>
       <span style="color:#1f2329">
        使⽤
       </span>
       <span style="color:#1f2329">
        “” 的形式包含库⽂件查找的效率就低些，当然这样也不容易区分是库⽂件还是本地⽂件了。
       </span>
      </div>
      <div>
      </div>
      <div>
       <h4>
        <span style="color:#1f2329">
         嵌套⽂件包含
        </span>
       </h4>
       <div>
       </div>
       <div>
       </div>
       <div>
        <span style="color:#1f2329">
         我们已经知道，
        </span>
        <span style="color:#1f2329">
         #include
        </span>
        <span style="color:#1f2329">
         指令可以使另外⼀个⽂件被编译。就像它实际出现于
        </span>
        <span style="color:#1f2329">
         #include
        </span>
        <span style="color:#1f2329">
         指令的
        </span>
       </div>
       <div>
        <span style="color:#1f2329">
         地⽅⼀样。
        </span>
       </div>
       <div>
        <span style="color:#1f2329">
         这种替换的⽅式很简单：预处理器先删除这条指令，并⽤包含⽂件的内容替换。
        </span>
       </div>
       <div>
        <span style="color:#1f2329">
         ⼀个头⽂件被包含10次，那就实际被编译10次，如果重复包含，对编译的压⼒就⽐较⼤。
        </span>
       </div>
       <div>
       </div>
       <div>
        <span style="color:#1f2329">
         其它预处理指令
        </span>
       </div>
       <div>
       </div>
       <div>
        <pre><code>#if
#include
#ifndef
#ifdef
#elif
#define
#endif
#pragma
#else
#undef</code></pre>
        <p>
        </p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323430315f38353238363033302f:61727469636c652f64657461696c732f313436323736343034" class_="artid" style="display:none">
 </p>
</div>


