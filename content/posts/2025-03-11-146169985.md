---
layout: post
title: "LiveGBS流媒体平台GBT28181常见问题-视频流安全控制HTTP接口鉴权勾选流地址鉴权后401Unauthorized如何播放调用接口流地址校验"
date: 2025-03-11 09:20:20 +0800
description: "勾选时候，这时候在没有登录的时候 调用接口的时候，需要携带登录接口返回的token。调用其它接口或是查看页面的时候需要携带token。调用接口的时候，或播放视频流的时候 ，遇到返回401的状态码，表示没有权限，需要携带token。时候，还可以通过视频流地址播放视频，如果需要更安全的控制，勾选上。后，单独播放流地址没有权限，需要携带token播放。公网使用时候，这里建议勾选。获取接口返回的URLToken的值。当 基础配置->信令服务配置中。如果是内网集成，可以把。选择下面一种方式即可。"
keywords: "LiveGBS流媒体平台GB/T28181常见问题-视频流安全控制HTTP接口鉴权勾选流地址鉴权后401Unauthorized如何播放调用接口流地址校验"
categories: ['Livegbs']
tags: ['携带Token校验', '安防视频流安全', 'Livegbs', 'Gb', '401错误处理']
artid: "146169985"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146169985
    alt: "LiveGBS流媒体平台GBT28181常见问题-视频流安全控制HTTP接口鉴权勾选流地址鉴权后401Unauthorized如何播放调用接口流地址校验"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146169985
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146169985
cover: https://bing.ee123.net/img/rand?artid=146169985
image: https://bing.ee123.net/img/rand?artid=146169985
img: https://bing.ee123.net/img/rand?artid=146169985
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     LiveGBS流媒体平台GB/T28181常见问题-视频流安全控制HTTP接口鉴权勾选流地址鉴权后401Unauthorized如何播放调用接口流地址校验
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="1_1">
     </a>
     1、安全控制
    </h2>
    <h3>
     <a id="11HTTP_2">
     </a>
     1.1、HTTP接口鉴权
    </h3>
    <p>
     如果是内网集成，可以把
     <strong>
      HTTP接口鉴权
     </strong>
     取消勾选保存。公网使用时候，这里建议勾选。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/06ba3b969adcd7a728354d117f431fb3.png"/>
    </p>
    <h3>
     <a id="12_7">
     </a>
     1.2、流地址鉴权
    </h3>
    <p>
     仅仅勾选
     <strong>
      HTTP接口鉴权
     </strong>
     时候，还可以通过视频流地址播放视频，如果需要更安全的控制，勾选上
     <strong>
      流地址鉴权
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b5dad0dc9dba3cb0ae8117aca35e8f72.png"/>
    </p>
    <h2>
     <a id="2401_Unauthorized_11">
     </a>
     2、401 Unauthorized
    </h2>
    <p>
     调用接口的时候，或播放视频流的时候 ，遇到返回401的状态码，表示没有权限，需要携带token。
    </p>
    <h3>
     <a id="21token_13">
     </a>
     2.1、携带token调用接口
    </h3>
    <p>
     当 基础配置-&gt;信令服务配置中
     <strong>
      HTTP接口鉴权
     </strong>
     勾选时候，这时候在没有登录的时候 调用接口的时候，需要携带登录接口返回的token。调用其它接口或是查看页面的时候需要携带token。
    </p>
    <h4>
     <a id="211token_15">
     </a>
     2.1.1、获取鉴权token
    </h4>
    <pre><code>http://192.168.2.153:10000/api/v1/login?username=test&amp;&amp;password=c84258e9c39059a89ab77d846ddab809&amp;&amp;url_token_only=true
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b65bcc5487dc9c2b43437417153722cb.png"/>
    </p>
    <p>
     获取接口返回的URLToken的值
    </p>
    <h4>
     <a id="212_25">
     </a>
     2.1.2、调用其它接口
    </h4>
    <p>
     选择下面一种方式即可
    </p>
    <h5>
     <a id="2121_CookieToken_28">
     </a>
     2.1.2.1、携带 CookieToken
    </h5>
    <pre><code>鉴权方式一：
Set-Cookie: token=mDC4tu-ig; Path=/; Expires=Thu, 15 Nov 2018 03:13:26 GMT; Max-Age=604800; HttpOnly
</code></pre>
    <h5>
     <a id="2122_URLToken_35">
     </a>
     2.1.2.2、携带 URLToken
    </h5>
    <pre><code>鉴权方式二：
接口统一增加入参名 token, 传递值为返回的 URLToken
http://ip:port/api/v1/xxx?otherparam=xxx&amp;&amp;token=2.1.1中获取的URLToken的值
</code></pre>
    <h3>
     <a id="22playtoken_42">
     </a>
     2.2、play页面携带token
    </h3>
    <p>
     如通道1的分享页面
    </p>
    <pre><code>http://ip:port/play.html?channel=1&amp;&amp;token=2.1.1中获取的URLToken的值
</code></pre>
    <h3>
     <a id="23StreamToken_48">
     </a>
     2.3、携带StreamToken播放视频流
    </h3>
    <p>
     勾选
     <strong>
      流地址鉴权
     </strong>
     后，单独播放流地址没有权限，需要携带token播放
    </p>
    <h4>
     <a id="231_53">
     </a>
     2.3.1、获取视频流地址
    </h4>
    <p>
     <a href="https://blog.csdn.net/Marvin1311/article/details/146169694">
      LiveGBS流媒体平台GB/T28181功能-获取接入的海康大华宇视华为摄像头设备视频通道直播流地址HLS/HTTP-FLV/WS-FLV/WebRTC/RTMP/RTSP
     </a>
    </p>
    <h4>
     <a id="232StreamToken_55">
     </a>
     2.3.2、获取StreamToken
    </h4>
    <p>
     用于
     <strong>
      流地址鉴权
     </strong>
     开启时有效
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/61291b36c120fdf12b4a7e991d31b772.png"/>
    </p>
    <h4>
     <a id="232token_60">
     </a>
     2.3.2、播放流时携带token
    </h4>
    <pre><code>http://192.168.2.153:10000/flv/hls/stream_2.flv?token=2.3.1中获取的StreamToken的值
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fec002142b29eb383ac5071634626d28.png"/>
    </p>
    <h2>
     <a id="3GB28181_68">
     </a>
     3、搭建GB28181视频直播平台
    </h2>
    <ul>
     <li>
      支持 Windows Linux 及其它CPU架构（国产、嵌入式…）操作系统
     </li>
     <li>
      <a href="https://www.liveqing.com/docs/download/LiveGBS.html" rel="nofollow">
       安装包下载
      </a>
      、
      <a href="https://www.liveqing.com/docs/manuals/LiveGBS.html" rel="nofollow">
       安装使用说明
      </a>
      、
      <a href="https://github.com/livegbs/GB28181-Server">
       WEB前端源码
      </a>
     </li>
     <li>
      <a href="https://www.liveqing.com/docs/faq/LiveGBS.html" rel="nofollow">
       更多常见问题
      </a>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f4d617276696e313331312f:61727469636c652f64657461696c732f313436313639393835" class_="artid" style="display:none">
 </p>
</div>


