---
layout: post
title: "SQL-Server如何分配数据库角色权限"
date: 2024-12-30 15:53:37 +0800
description: "1 sql server2005安全管理之用户、角色、架构 与 权限   2 2017-17-23 "
keywords: "sqlserver 新建schema 如何分配权限"
categories: ['Sql', 'Server']
tags: ['Sql', 'Server']
artid: "75831019"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=75831019
    alt: "SQL-Server如何分配数据库角色权限"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=75831019
featuredImagePreview: https://bing.ee123.net/img/rand?artid=75831019
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     SQL Server如何分配数据库角色权限
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <pre><span style="color:rgb(0,128,128)">1</span> sql server2005安全管理之用户、角色、架构 与 权限 
<span style="color:rgb(0,128,128)">  2</span> <span style="color:rgb(128,0,0)"><strong>2017</strong></span><span style="color:rgb(128,128,128)">-</span><span style="color:rgb(128,0,0)"><strong>17</strong></span><span style="color:rgb(128,128,128)">-</span><span style="color:#800000"><strong>23</strong></span>
<span style="color:rgb(0,128,128)">  3</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">打开数据库 </span>
<span style="color:rgb(0,128,128)">  4</span> <span style="color:rgb(0,0,255)">Use</span> databaseName 
<span style="color:rgb(0,128,128)">  5</span> 
<span style="color:rgb(0,128,128)">  6</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">创建角色 </span>
<span style="color:rgb(0,128,128)">  7</span> <span style="color:rgb(0,0,255)">create</span> role ProgramerRole 
<span style="color:rgb(0,128,128)">  8</span> 
<span style="color:rgb(0,128,128)">  9</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">用于创建表 存储过程 视图 </span>
<span style="color:rgb(0,128,128)"> 10</span> <span style="color:rgb(0,0,255)">grant</span> <span style="color:rgb(0,0,255)">create</span> <span style="color:rgb(0,0,255)">table</span>,<span style="color:rgb(0,0,255)">create</span> <span style="color:rgb(0,0,255)">procedure</span>,<span style="color:rgb(0,0,255)">create</span> <span style="color:rgb(0,0,255)">view</span> <span style="color:rgb(0,0,255)">to</span> ProgramerRole 
<span style="color:rgb(0,128,128)"> 11</span> 
<span style="color:rgb(0,128,128)"> 12</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">execute用以执行存储过程，alter用以创建、修改存储过程和视图， </span>
<span style="color:rgb(0,128,128)"> 13</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">并可以新建立表，但不能修改表,但也可以删除表和对表改名了 </span>
<span style="color:rgb(0,128,128)"> 14</span> <span style="color:rgb(0,0,255)">grant</span> <span style="color:rgb(0,0,255)">select</span>,<span style="color:rgb(0,0,255)">insert</span>,<span style="color:rgb(0,0,255)">execute</span>,<span style="color:rgb(0,0,255)">alter</span> <span style="color:rgb(0,0,255)">on</span> <span style="color:rgb(0,0,255)">schema</span>::dbo <span style="color:rgb(0,0,255)">to</span> ProgramerRole 
<span style="color:rgb(0,128,128)"> 15</span> 
<span style="color:rgb(0,128,128)"> 16</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">用于允许用户查看 显示估计的执行计划(081205) </span>
<span style="color:rgb(0,128,128)"> 17</span> <span style="color:rgb(0,0,255)">grant</span> showplan <span style="color:rgb(0,0,255)">to</span> ProgramerRole 
<span style="color:rgb(0,128,128)"> 18</span> 
<span style="color:rgb(0,128,128)"> 19</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">创建登录账号 </span>
<span style="color:rgb(0,128,128)"> 20</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">create login username with password='password' </span>
<span style="color:rgb(0,128,128)"> 21</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">创建数据库用户 </span>
<span style="color:rgb(0,128,128)"> 22</span> <span style="color:rgb(0,0,255)">create</span> <span style="color:rgb(255,0,255)">user</span> username <span style="color:rgb(0,0,255)">for</span> login username 
<span style="color:rgb(0,128,128)"> 23</span> 
<span style="color:rgb(0,128,128)"> 24</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">将用户TestUser添加到TestRole角色中 </span>
<span style="color:rgb(0,128,128)"> 25</span> <span style="color:rgb(0,0,255)">exec</span> sp_addrolemember <span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">ProgramerRole</span><span style="color:rgb(255,0,0)">'</span>,<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">username </span><span style="color:rgb(255,0,0)">'</span> 
<span style="color:rgb(0,128,128)"> 26</span> 
<span style="color:rgb(0,128,128)"> 27</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">执行Sql Server Profiler是服务器级权限，所以在master库中授权 </span>
<span style="color:rgb(0,128,128)"> 28</span> <span style="color:rgb(0,0,255)">USE</span> master;<span style="color:rgb(0,0,255)">grant</span> <span style="color:rgb(0,0,255)">alter</span> trace <span style="color:rgb(0,0,255)">to</span> auto; 
<span style="color:rgb(0,128,128)"> 29</span> 
<span style="color:rgb(0,128,128)"> 30</span> 
<span style="color:rgb(0,128,128)"> 31</span> 注：据库引擎优化顾问必须由具有系统管理员权限的用户进行初始化。在具有系统管理员权限的用户对数据库引擎优化顾问进行初始化之后，任何是 db_owner 固定数据库角色成员的用户，都可以使用数据库引擎优化顾问来优化他们拥有的数据库上的表。 
<span style="color:rgb(0,128,128)"> 32</span> 详优化物理数据库设计http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms191531(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)"> 33</span> 
<span style="color:rgb(0,128,128)"> 34</span> 参考资料： 
<span style="color:rgb(0,128,128)"> 35</span> 用户架构分离：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms190387(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)"> 36</span>     数据库架构是一个独立于数据库用户的非重复命名空间。您可以将架构视为对象的容器 
<span style="color:rgb(0,128,128)"> 37</span> 主体：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms181127(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)"> 38</span>       是可以请求 SQL Server 资源的实体 
<span style="color:rgb(0,128,128)"> 39</span>     
<span style="color:rgb(0,128,128)"> 40</span> Windows 级别的主体 
<span style="color:rgb(0,128,128)"> 41</span> 
<span style="color:rgb(0,128,128)"> 42</span> Windows 域登录名 
<span style="color:rgb(0,128,128)"> 43</span> Windows 本地登录名 
<span style="color:rgb(0,128,128)"> 44</span> SQL Server 级的主体 
<span style="color:rgb(0,128,128)"> 45</span> 
<span style="color:rgb(0,128,128)"> 46</span> SQL Server 登录名 
<span style="color:rgb(0,128,128)"> 47</span> 数据库级的主体 
<span style="color:rgb(0,128,128)"> 48</span> 
<span style="color:rgb(0,128,128)"> 49</span> 数据库用户 
<span style="color:rgb(0,128,128)"> 50</span> 数据库角色 
<span style="color:rgb(0,128,128)"> 51</span> 应用程序角色 
<span style="color:rgb(0,128,128)"> 52</span> 安全对象：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms190401(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)"> 53</span> 安全对象是 SQL Server 数据库引擎 授权系统控制对其进行访问的资源    
<span style="color:rgb(0,128,128)"> 54</span> 安全对象范围有服务器、数据库和架构 
<span style="color:rgb(0,128,128)"> 55</span> 安全对象范围：服务器包含以下安全对象： 
<span style="color:rgb(0,128,128)"> 56</span> 端点 
<span style="color:rgb(0,128,128)"> 57</span> 登录帐户 
<span style="color:rgb(0,128,128)"> 58</span> 数据库 
<span style="color:rgb(0,128,128)"> 59</span> 
<span style="color:rgb(0,128,128)"> 60</span> 安全对象范围：数据库包含以下安全对象： 
<span style="color:rgb(0,128,128)"> 61</span> 用户 
<span style="color:rgb(0,128,128)"> 62</span> 角色 
<span style="color:rgb(0,128,128)"> 63</span> 应用程序角色 
<span style="color:rgb(0,128,128)"> 64</span> 程序集 
<span style="color:rgb(0,128,128)"> 65</span> 消息类型 
<span style="color:rgb(0,128,128)"> 66</span> 路由 
<span style="color:rgb(0,128,128)"> 67</span> 服务 
<span style="color:rgb(0,128,128)"> 68</span> 远程服务绑定 
<span style="color:rgb(0,128,128)"> 69</span> 全文目录 
<span style="color:rgb(0,128,128)"> 70</span> 证书 
<span style="color:rgb(0,128,128)"> 71</span> 非对称密钥 
<span style="color:rgb(0,128,128)"> 72</span> 对称密钥 
<span style="color:rgb(0,128,128)"> 73</span> 约定 
<span style="color:rgb(0,128,128)"> 74</span> 架构 
<span style="color:rgb(0,128,128)"> 75</span> 
<span style="color:rgb(0,128,128)"> 76</span> 安全对象范围：架构包含以下安全对象： 
<span style="color:rgb(0,128,128)"> 77</span> 类型 
<span style="color:rgb(0,128,128)"> 78</span> XML 架构集合 
<span style="color:rgb(0,128,128)"> 79</span> 对象 
<span style="color:rgb(0,128,128)"> 80</span> 
<span style="color:rgb(0,128,128)"> 81</span> 对象 下面是对象类的成员： 
<span style="color:rgb(0,128,128)"> 82</span> 聚合 
<span style="color:rgb(0,128,128)"> 83</span> 约束 
<span style="color:rgb(0,128,128)"> 84</span> 函数 
<span style="color:rgb(0,128,128)"> 85</span> 过程 
<span style="color:rgb(0,128,128)"> 86</span> 队列 
<span style="color:rgb(0,128,128)"> 87</span> 统计信息 
<span style="color:rgb(0,128,128)"> 88</span> 同义词 
<span style="color:rgb(0,128,128)"> 89</span> 表 
<span style="color:rgb(0,128,128)"> 90</span> 视图 
<span style="color:rgb(0,128,128)"> 91</span> 
<span style="color:rgb(0,128,128)"> 92</span> 架构：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms365789(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)"> 93</span> 架构是指包含表、视图、过程等的容器。它位于数据库内部，而数据库位于服务器内部 
<span style="color:rgb(0,128,128)"> 94</span> 特定架构中的每个安全对象都必须有唯一的名称。架构中安全对象的完全指定名称包括此安全对象所在的架构的名称。因此，架构也是命名空间 
<span style="color:rgb(0,128,128)"> 95</span> 
<span style="color:rgb(0,128,128)"> 96</span> 权限：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms190387(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)"> 97</span> 每个 SQL Server <span style="color:rgb(128,0,0)"><strong>2005</strong></span> 安全对象都有可以授予主体的关联权限 
<span style="color:rgb(0,128,128)"> 98</span> 
<span style="color:rgb(0,128,128)"> 99</span> 数据库级别的角色：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms189121(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)">100</span> 固定数据库角色是在数据库级别定义的，并且存在于每个数据库中。db_owner 和 db_securityadmin 数据库角色的成员可以管理固定数据库角色成员身份；但是，只有 db_owner 数据库的成员可以向 db_owner 固定数据库角色中添加成员。 
<span style="color:rgb(0,128,128)">101</span> 每个数据库用户都属于 <span style="color:rgb(0,0,255)">public</span> 数据库角色。当尚未对某个用户授予或拒绝对安全对象的特定权限时，则该用户将继承授予该安全对象的 <span style="color:rgb(0,0,255)">public</span> 角色的权限    
<span style="color:rgb(0,128,128)">102</span> 服务器级别角色：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms188659(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)">103</span> 固定服务器角色在其作用域内属于服务器范围。固定服务器角色的每个成员都可以向其所属角色添加其他登录名。 
<span style="color:rgb(0,128,128)">104</span> 
<span style="color:rgb(0,128,128)">105</span> <span style="color:rgb(0,0,255)">GRANT</span> 架构权限：http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms187940(SQL.<span style="color:rgb(128,0,0)"><strong>90</strong></span>).aspx 
<span style="color:rgb(0,128,128)">106</span> 
<span style="color:rgb(0,128,128)">107</span> 如何配置用户以创建和管理 SQL Server 代理作业 http:<span style="color:rgb(128,128,128)">//</span>msdn.microsoft.com<span style="color:rgb(128,128,128)">/</span>zh<span style="color:rgb(128,128,128)">-</span>cn<span style="color:rgb(128,128,128)">/</span>library<span style="color:rgb(128,128,128)">/</span>ms187901.aspx 
<span style="color:rgb(0,128,128)">108</span> 
<span style="color:rgb(0,128,128)">109</span> 若要配置用户以创建或执行 Microsoft SQL Server 代理作业，必须先将某个现有 SQL Server 登录名或 msdb 角色添加到 msdb 数据库中的下列 SQL Server 代理固定数据库角色之一：SQLAgentUserRole、SQLAgentReaderRole 或 SQLAgentOperatorRole。 
<span style="color:rgb(0,128,128)">110</span> 
<span style="color:rgb(0,128,128)">111</span> 默认情况下，这些数据库角色的成员可以创建各自的作业步骤，这些作业步骤不执行其他作业步骤。如果这些非管理用户要运行那些执行其他作业步骤类型（例如，SSIS 包）的作业，它们需要对代理帐户具有访问权限。sysadmin 固定服务器角色的所有成员都有创建、修改和删除代理帐户的权限
<span style="color:rgb(0,128,128)">112</span> 
<span style="color:rgb(0,128,128)">113</span> 
<span style="color:rgb(0,128,128)">114</span> 
<span style="color:rgb(0,128,128)">115</span> 
<span style="color:rgb(0,128,128)">116</span> 
<span style="color:rgb(0,128,128)">117</span> 
<span style="color:rgb(0,128,128)">118</span> 为具体的用户设置具体的访问权限 收藏 
<span style="color:rgb(0,128,128)">119</span> <span style="color:rgb(0,0,255)">use</span> 你的库名
<span style="color:rgb(0,128,128)">120</span> <span style="color:rgb(0,0,255)">go</span>
<span style="color:rgb(0,128,128)">121</span> 
<span style="color:rgb(0,128,128)">122</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">新增用户</span>
<span style="color:rgb(0,128,128)">123</span> <span style="color:rgb(0,0,255)">exec</span> sp_addlogin <span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">test</span><span style="color:rgb(255,0,0)">'</span>            <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">添加登录</span>
<span style="color:rgb(0,128,128)">124</span> <span style="color:rgb(0,0,255)">exec</span> sp_grantdbaccess N<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">test</span><span style="color:rgb(255,0,0)">'</span>            <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">使其成为当前数据库的合法用户</span>
<span style="color:rgb(0,128,128)">125</span> <span style="color:rgb(0,0,255)">exec</span> sp_addrolemember N<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">db_owner</span><span style="color:rgb(255,0,0)">'</span>, N<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">test</span><span style="color:rgb(255,0,0)">'</span>            <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">授予对自己数据库的所有权限</span>
<span style="color:rgb(0,128,128)">126</span> 
<span style="color:rgb(0,128,128)">127</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">这样创建的用户就只能访问自己的数据库,及数据库中包含了guest用户的公共表</span>
<span style="color:rgb(0,128,128)">128</span> <span style="color:rgb(0,0,255)">go</span>
<span style="color:rgb(0,128,128)">129</span> 
<span style="color:rgb(0,128,128)">130</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">删除测试用户</span>
<span style="color:rgb(0,128,128)">131</span> <span style="color:rgb(0,0,255)">exec</span> sp_revokedbaccess N<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">test</span><span style="color:rgb(255,0,0)">'</span>            <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">移除对数据库的访问权限</span>
<span style="color:rgb(0,128,128)">132</span> <span style="color:rgb(0,0,255)">exec</span> sp_droplogin N<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">test</span><span style="color:rgb(255,0,0)">'</span>            <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">删除登录</span>
<span style="color:rgb(0,128,128)">133</span> 
<span style="color:rgb(0,128,128)">134</span> 
<span style="color:rgb(0,128,128)">135</span> 如果在企业管理器中创建的话,就用:
<span style="color:rgb(0,128,128)">136</span> 
<span style="color:rgb(0,128,128)">137</span> 企业管理器<span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">安全性--右键登录--新建登录</span>
<span style="color:rgb(0,128,128)">138</span> 
<span style="color:rgb(0,128,128)">139</span> 常规项
<span style="color:rgb(0,128,128)">140</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">名称中输入用户名</span>
<span style="color:rgb(0,128,128)">141</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">身份验证方式根据你的需要选择(如果是使用windows身份验证,则要先在操作系统的用户中新建用户)</span>
<span style="color:rgb(0,128,128)">142</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">默认设置中,选择你新建的用户要访问的数据库名</span>
<span style="color:rgb(0,128,128)">143</span> 
<span style="color:rgb(0,128,128)">144</span> 服务器角色项
<span style="color:rgb(0,128,128)">145</span> 这个里面不要选择任何东西
<span style="color:rgb(0,128,128)">146</span> 
<span style="color:rgb(0,128,128)">147</span> 数据库访问项
<span style="color:rgb(0,128,128)">148</span> 勾选你创建的用户需要访问的数据库名
<span style="color:rgb(0,128,128)">149</span> 数据库角色中允许,勾选"<span style="color:rgb(0,0,255)">public</span>","db_ownew"
<span style="color:rgb(0,128,128)">150</span> 
<span style="color:rgb(0,128,128)">151</span> 确定,这样建好的用户与上面语句建立的用户一样
<span style="color:rgb(0,128,128)">152</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">-------------------------------------------------------------------------</span>
<span style="color:rgb(0,128,128)">153</span> 
<span style="color:rgb(0,128,128)">154</span> 最后一步,为具体的用户设置具体的访问权限,这个可以参考下面的最简示例:
<span style="color:rgb(0,128,128)">155</span> 
<span style="color:rgb(0,128,128)">156</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">添加只允许访问指定表的用户:</span>
<span style="color:rgb(0,128,128)">157</span> <span style="color:rgb(0,0,255)">exec</span> sp_addlogin <span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">用户名</span><span style="color:rgb(255,0,0)">'</span>,<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">密码</span><span style="color:rgb(255,0,0)">'</span>,<span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">默认数据库名</span><span style="color:rgb(255,0,0)">'</span>
<span style="color:rgb(0,128,128)">158</span> 
<span style="color:rgb(0,128,128)">159</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">添加到数据库</span>
<span style="color:rgb(0,128,128)">160</span> <span style="color:rgb(0,0,255)">exec</span> sp_grantdbaccess <span style="color:rgb(255,0,0)">'</span><span style="color:rgb(255,0,0)">用户名</span><span style="color:rgb(255,0,0)">'</span>
<span style="color:rgb(0,128,128)">161</span> 
<span style="color:rgb(0,128,128)">162</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">分配整表权限</span>
<span style="color:rgb(0,128,128)">163</span> <span style="color:rgb(0,0,255)">GRANT</span> <span style="color:rgb(0,0,255)">SELECT</span> , <span style="color:rgb(0,0,255)">INSERT</span> , <span style="color:rgb(0,0,255)">UPDATE</span> , <span style="color:rgb(0,0,255)">DELETE</span> <span style="color:rgb(0,0,255)">ON</span> table1 <span style="color:rgb(0,0,255)">TO</span> <span style="color:rgb(255,0,0)">[</span><span style="color:rgb(255,0,0)">用户名</span><span style="color:rgb(255,0,0)">]</span>
<span style="color:rgb(0,128,128)">164</span> 
<span style="color:rgb(0,128,128)">165</span> <span style="color:rgb(0,128,128)">--</span><span style="color:rgb(0,128,128)">分配权限到具体的列</span>
<span style="color:rgb(0,128,128)">166</span> <span style="color:rgb(0,0,255)">GRANT</span> <span style="color:rgb(0,0,255)">SELECT</span> , <span style="color:rgb(0,0,255)">UPDATE</span> <span style="color:rgb(0,0,255)">ON</span> table1(id,AA) <span style="color:rgb(0,0,255)">TO</span> <span style="color:rgb(255,0,0)">[</span><span style="color:rgb(255,0,0)">用户名</span><span style="color:rgb(255,0,0)">]</span></pre>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3333343132363130:2f61727469636c652f64657461696c732f3735383331303139" class_="artid" style="display:none">
 </p>
</div>


