---
layout: post
title: "destoon常用数据库操作"
date: 2022-04-13 10:56:47 +0800
description: "初始化系统后系统会自动连接数据库，并将数据库操作对象保存在$db。数据库操作方法请参考include"
keywords: "destoon $db"
categories: ['Destoon']
tags: ['数据库', 'Table', 'Sql', 'Insert', 'Delete']
artid: "7354857"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=7354857
    alt: "destoon常用数据库操作"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=7354857
featuredImagePreview: https://bing.ee123.net/img/rand?artid=7354857
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     destoon常用数据库操作
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <span style="font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px">
     初始化系统后系统会自动连接数据库，并将数据库操作对象保存在$db。数据库操作方法请参考include/db_mysql.class.php函数原型，以下仅对常用操作举例。
    </span>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <span style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px">
     1、执行SQL语句
    </span>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <div class="code" style="word-break:break-all; font-family:Fixedsys,verdana; color:blue; border-top-color:rgb(202,217,234); border-right-color:rgb(202,217,234); border-bottom-color:rgb(202,217,234); border-left-color:rgb(202,217,234); border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dotted; border-right-style:dotted; border-bottom-style:dotted; border-left-style:dotted; padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:10px; background-color:rgb(249,252,255); line-height:21px">
     $db-&gt;query("INSERT INTO `{$DT_PRE}table` (`xxx`) VALUES ('yyy')");
    </div>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <div class="code" style="word-break:break-all; font-family:Fixedsys,verdana; color:blue; border-top-color:rgb(202,217,234); border-right-color:rgb(202,217,234); border-bottom-color:rgb(202,217,234); border-left-color:rgb(202,217,234); border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dotted; border-right-style:dotted; border-bottom-style:dotted; border-left-style:dotted; padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:10px; background-color:rgb(249,252,255); line-height:21px">
     $db-&gt;query("UPDATE `{$DT_PRE}table` SET `xxx`='yyy' WHERE `zzz`=1");
    </div>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <div class="code" style="word-break:break-all; font-family:Fixedsys,verdana; color:blue; border-top-color:rgb(202,217,234); border-right-color:rgb(202,217,234); border-bottom-color:rgb(202,217,234); border-left-color:rgb(202,217,234); border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dotted; border-right-style:dotted; border-bottom-style:dotted; border-left-style:dotted; padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:10px; background-color:rgb(249,252,255); line-height:21px">
     $db-&gt;query("DELETE FROM `{$DT_PRE}table` WHERE `zzz`=1");
    </div>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <span style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px">
     2、读取多条信息
    </span>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <div class="code" style="word-break:break-all; font-family:Fixedsys,verdana; color:blue; border-top-color:rgb(202,217,234); border-right-color:rgb(202,217,234); border-bottom-color:rgb(202,217,234); border-left-color:rgb(202,217,234); border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dotted; border-right-style:dotted; border-bottom-style:dotted; border-left-style:dotted; padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:10px; background-color:rgb(249,252,255); line-height:21px">
     $A = array();
     <br style="word-break:break-all; font-family:arial,宋体,sans-serif"/>
     $result = $db-&gt;query("SELECT * FROM `{$DT_PRE}table` WHERE `xxx`='yyy' ORDER BY `zzz` DESC LIMIT 0,10");
     <br style="word-break:break-all; font-family:arial,宋体,sans-serif"/>
     while($r = $db-&gt;fetch_array($result)) {
     <br style="word-break:break-all; font-family:arial,宋体,sans-serif"/>
     $A[] = $r;
     <br style="word-break:break-all; font-family:arial,宋体,sans-serif"/>
     }
     <br style="word-break:break-all; font-family:arial,宋体,sans-serif"/>
     print_r($A);
    </div>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <span style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px">
     3、读取单条信息
    </span>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <div class="code" style="word-break:break-all; font-family:Fixedsys,verdana; color:blue; border-top-color:rgb(202,217,234); border-right-color:rgb(202,217,234); border-bottom-color:rgb(202,217,234); border-left-color:rgb(202,217,234); border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dotted; border-right-style:dotted; border-bottom-style:dotted; border-left-style:dotted; padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:10px; background-color:rgb(249,252,255); line-height:21px">
     $A = $db-&gt;get_one("SELECT * FROM `{$DT_PRE}table` WHERE `xxx`='yyy'");
     <br style="word-break:break-all; font-family:arial,宋体,sans-serif"/>
     print_r($A);
    </div>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <span style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px">
     4、计算总数
    </span>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <div class="code" style="word-break:break-all; font-family:Fixedsys,verdana; color:blue; border-top-color:rgb(202,217,234); border-right-color:rgb(202,217,234); border-bottom-color:rgb(202,217,234); border-left-color:rgb(202,217,234); border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dotted; border-right-style:dotted; border-bottom-style:dotted; border-left-style:dotted; padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:10px; background-color:rgb(249,252,255); line-height:21px">
     $A = $db-&gt;get_one("SELECT COUNT(*) AS num FROM `{$DT_PRE}table` WHERE `xxx`='yyy'");
     <br style="word-break:break-all; font-family:arial,宋体,sans-serif"/>
     echo $A['num'];
    </div>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <span style="font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px">
     系统的表前缀可以使用变量$DT_PRE(一般在语句中使用)或者$db-&gt;pre(一般在函数中使用)。
    </span>
    <br style="word-break:break-all; font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px"/>
    <span style="font-family:arial,宋体,sans-serif; font-size:14px; line-height:21px">
     如果在函数中使用数据库操作，需要先进行global $db;
    </span>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f626c313938383533:302f61727469636c652f64657461696c732f37333534383537" class_="artid" style="display:none">
 </p>
</div>


