---
layout: post
title: 2024-11-20-数据库课程设计-工资管理系统-MySQL
date: 2024-11-20 09:40:43 +08:00
categories: ['未分类']
tags: ['数据库', 'Mysql']
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=137195145
  alt: 数据库课程设计-工资管理系统-MySQL
artid: 137195145
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=137195145
featuredImagePreview: https://bing.ee123.net/img/rand?artid=137195145
---

# 数据库课程设计-工资管理系统-MySQL

**目录**

[第一节 需求分析](#%E7%AC%AC%E4%B8%80%E8%8A%82%20%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90)

[1.1 需求分析概述](#1.1%20%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E6%A6%82%E8%BF%B0)

[1.2 功能需求分析](#1.2%20%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90)

[1.2.1 人事数据管理模块](#1.2.1%20%E4%BA%BA%E4%BA%8B%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97)

[1.2.2 考勤数据管理模块](#1.2.2%20%E8%80%83%E5%8B%A4%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97)

[1.2.3 工资数据管理模块](#1.2.3%20%E5%B7%A5%E8%B5%84%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97)

[1.2.4 工资计算公式设置模块](#1.2.4%20%E5%B7%A5%E8%B5%84%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F%E8%AE%BE%E7%BD%AE%E6%A8%A1%E5%9D%97)

[1.3 数据需求分析](#1.3%20%E6%95%B0%E6%8D%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90)

[1.3.1 数据项定义](#1.3.1%20%E6%95%B0%E6%8D%AE%E9%A1%B9%E5%AE%9A%E4%B9%89)

[1.3.2 数据结构定义](#1.3.2%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9A%E4%B9%89)

[第二节 概念结构设计](#%E7%AC%AC%E4%BA%8C%E8%8A%82%20%E6%A6%82%E5%BF%B5%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1)

[2.1 分E-R图](#2.1%20%E5%88%86E-R%E5%9B%BE)

[2.2 基本E-R图](#%C2%A02.2%20%E5%9F%BA%E6%9C%ACE-R%E5%9B%BE)

[第三节 逻辑结构设计](#%E7%AC%AC%E4%B8%89%E8%8A%82%20%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1)

[3.1关系模式设计（下划线“ ”表示主码）](#3.1%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F%E8%AE%BE%E8%AE%A1%EF%BC%88%E4%B8%8B%E5%88%92%E7%BA%BF%E2%80%9C%C2%A0%E2%80%9D%E8%A1%A8%E7%A4%BA%E4%B8%BB%E7%A0%81%EF%BC%89)

[3.2存储过程和触发器的设计](#3.2%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1)

[第四节 物理结构设计](#%E7%AC%AC%E5%9B%9B%E8%8A%82%20%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1)

[第五节 数据库实施](#%C2%A0%E7%AC%AC%E4%BA%94%E8%8A%82%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%96%BD)

[5.1 创建基本表](#5.1%20%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E8%A1%A8)

[5.2 插入测试数据](#5.2%20%E6%8F%92%E5%85%A5%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE)

[5.3 创建业务处理的存储过程并测试](#5.3%20%E5%88%9B%E5%BB%BA%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%B9%B6%E6%B5%8B%E8%AF%95)

[5.4 创建业务处理的视图并测试](#5.4%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%9A%84%E8%A7%86%E5%9B%BE%E5%B9%B6%E6%B5%8B%E8%AF%95)

[5.5 创建业务处理的触发器并测试](#5.5%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8%E5%B9%B6%E6%B5%8B%E8%AF%95)

---

## 第一节 需求分析

### **1.1 需求分析** ****概述****

随着当今企业人员数量的不断增加，企业的工资管理工作也就变得越来越复杂。对于一个现代化的企业来说，信息化管理是必须的，而财务管理部门作为事业单位的重点部门，同样需要加强信息化管理。设计工资管理系统的目的就是为了帮助财务部门能更好地管理本单位的职工工资，提高工作效率，实现职工工资信息管理的规范化和自动化。明确查询公司职工某年某月的工资情况，通过职工工资管理系统，也能查询到职工本身的一些基本信息。如何对职工工资进行信息化的管理，减轻财务部门的劳动强度，并且确保相关数据的安全，信息处理的高效，正是本数据库设计目的所在。

### **1.2 功能需求分析**

以我国某国有企业为例设计数据库，通过网上查询资料和询问相关经验人士，了解此国企的职位等级制度和工资分配制度。为此一共总结归纳出使用的四大模块，分别为人事数据管理模块、考勤数据管理模块、工资数据管理模块以及工资计算公式设置模块。

#### ****1.2.1 人事数据管理模块****

人事数据管理模块是
企业基础性资料信息的体现,它主要功能是统计、管理员工个人和相关部门的信息

。员工种类分为在职人员和退休人员。企业内部的人事档案等相关材料都是依靠人事数据管理模块来进行的，每当公司有新招聘的员工入职，都需要对该名新员工进行人事数据的登记与记录，并记录入职日期，每年应自动更新员工工龄。每个员工都应具有唯一员工编号，员工编号由两部分组成，第一部分为入职年份，第二部分为首次入职部门代号，第三部分为顺序号，例如2000010001表示为该员工为2000年入职，首次入职的部门编号为01，是第一位员工。员工的编号保持不变，直到退休。当员工处于离职、退休等工作状态，需要对人事数据做到及时更新、修改、删除等操作，并加以记录。员工的个人信息应真实可靠，只有人事部管理员有修改信息权限。但修改权限不可随意使用，需经过层层审批批准才可使用。当员工从在职状态处于退休状态时，应记录下退休日期，以便工资数据管理使用。该模块功能如图所示：

![](https://i-blog.csdnimg.cn/blog_migrate/79b3c761ba9223c177dd01bb20dd23c8.png)


图 1 人事数据管理模块结构图

#### ****1.2.2 考勤数据管理模块****

考勤数据管理模块是记录员工每日出勤状态，根据签到与签退时间来判断是否为早退、迟到或缺勤等违规状态
****[5]****

。与此同时，也将记录员工的加班时间、请假时间，以此为依据，对员工进行奖罚。本数据库设计只针对月考勤数据做相关分析，以月考勤数据来继续展开设计。其中加班时间以小时为计数单位，请假时间以天为计数单位，其中规定每月可有两天带薪休班机会
****[6]****

。

#### ****1.2.3 工资数据管理模块****

工资数据管理模块是主要包括在职员工与退休员工的工资的数据录入、查询显示和工资打印。由财务部管理员统一统计与录入。在职员工每月工资主要由基本工资、工龄补贴、绩效工资、考勤奖罚、五险一金和个人所得税构成
****[2]****

。工龄补贴主要规则为：

1.在本公司连续工作满一年的员工每月工龄工资为￥50元整。

2.在本公司连续工作满两年的员工每月工龄工资为￥100元整。

3.在本公司连续工作满三年的员工每月工龄工资为￥150元整。

4.在本公司连续工作满四年的员工每月工龄工资为￥180元整。

5.以此类推，之后在本公司工作每增加一年，每月工龄工资相应增加￥30元整。累计十年封顶

，十年及十年以上每月工龄工资为

￥

360

元整。

在扣除项目中五险一金包括基本养老保险、基本医疗保险、失业保险、工伤保险和生育保险，及住房公积金。采取缴纳比例如图所示：

![](https://i-blog.csdnimg.cn/blog_migrate/adaaf74f2d9faa5576ff4869f8b4acad.png)


图 2 五险一金缴纳比例图

个人所得税按月

换算，以5000元为起征点，换算规则如下表所示：

|  |  |  |  |
| --- | --- | --- | --- |
| 级数 | 全月应纳税所得额 | 税率（%） | 速算扣除数 |
| 1 | 不超过  3000  元的 | 3 | 0 |
| 2 | 超过3000元至12000元的部分 | 10 | 210 |
| 3 | 超过12000元至25000元的部分 | 20 | 1410 |
| 4 | 超过25000元至35000元的部分 | 25 | 2660 |
| 5 | 超过35000元至55000元的部分 | 30 | 4410 |

在
考勤奖罚中规定每次迟到早退每次扣25元，无故旷工一天100元，在规定休假次数外，请假一天扣50元，加班每小时奖励20元。根据职位设置基本工资，以三个职称为例部门经理基础工资每月8500元，部门总管基础工资每月7500元，普通员工基础工资每月6500元。

退休员工工资由基础养老金和个人账户养老金构成。住房公积金默认为退休的第一个月已全部领取。根据调查，全省上年度在岗职工月平均工资定为7000元，为了简便计算则退休员工以此标准计算。根据国家延迟退休政策统一规定男女65岁退休，个人账户存储额计发月数统一为120。

所有员工的薪酬都是公司通过银行支付到员工银行卡的方式发放的，并且需要录入到数据库中。在对工资数据管理层面上，相关管理工作人员必须及时将职员的工资数据录入到数据库，系统则会根据员工该月的加班、迟到等实际情况运用固定的公式来对工资展开计算，财务工作人员则需要对工资数据进行审核。保证数据的严谨性。同时财务人员具有对工资数据修改的权限，对发现的错误及时修改，而公司的普通员工只有浏览查询、打印工资明细的权限。该模块功能如图所示：

![](https://i-blog.csdnimg.cn/blog_migrate/00d665929874e17a59d03aeeabb84ef0.png)


图 4 工资数据管理模块结构图

#### ****1.2.4**** ****工资计算公式设置模块****

（1）在职员工工资计算公式：

个人所得税计算公式

个人所得税=全月应纳税所得额*税率-速算扣除数

全月应纳税所得额=税前工资-五险一金-个人专项扣除项目

五险一金计算公式：

五险一金缴纳=税前工资*（8%+0.2%+2%+12%）

其中五险一金中工伤保险和生育保险费率由单位全额缴纳，个人不需要缴费。

考勤奖罚计算公式：

奖罚金额=20a-10b-100c-50b

其中a为加班小时数,b为早退迟到累计小时数，c为旷工天数，d为请假天数（总请假天数-休班天数）。

（2）退休员工工资计算公式：

基础养老金=（全省上年度在岗职工月平均工资+本人指数化月平均缴费工资）/2×缴费年限×1%

本人指数化月平均缴费工资=全省上年度在岗职工月平均工资×本人平均缴费指数

本人平均缴费指数=Σ（在职时月均工资/全省平均工资）/缴费年数

个人账户养老金=个人账户存储额/计发月数

### **1.3 数据需求分析**

#### ****1.3.1 数据项定义****

****表****
****2****
****员工信息表****

|  |  |  |  |
| --- | --- | --- | --- |
| 数据项名 | 别名 | 数据类型 | 取值范围 |
| 员工编号 | eid | varchar(11) | 由入职年份+部门号+顺序号组成 |
| 姓名 | ename | varchar(11) | 汉字 |
| 性别 | sex | varchar(11) | 取值：男或女 |
| 出生日期 | birthday | Date | （1945-01-01，  2003-01-01） |
| 联系方式 | phone | varchar(11) | 规定标准11位且唯一 |
| 入职时间 | intime | Date | （1998-01-01，2023-12-01） |
| 退休时间 | outtime | Date | 默认为空 |
| 任职状态 | state | varchar(11) | 取值：在职或退休 |

****表****
****3****
****个人专项附加扣除项目表****

|  |  |  |  |
| --- | --- | --- | --- |
| 数据项名 | 别名 | 数据类型 | 取值范围 |
| 员工编号 | eid | varchar(11) | 由入职年份+部门号+顺序号组成 |
| 子女教育 | pro1 | double | 0或1000的整数倍 |
| 继续教育 | pro2 | double | 0或400 |
| 贷款利息 | pro3 | double | 0或1000 |
| 租房 | pro4 | double | （0，800，1100，1500） |
| 赡养老人 | pro5 | double | （0，1000，2000，4000） |
| 大病医疗 | pro6 | double | 0到8万 |

****表****
****4****
****部门表****

|  |  |  |  |
| --- | --- | --- | --- |
| 数据项名 | 字段名 | 数据类型 | 长度 |
| 部门编号 | did | varchar(11) | 11 |
| 部门名 | dname | varchar(11) | 11 |
| 部门地址 | address | varchar(11) | 11 |

****表****
****5****
****任职表****

|  |  |  |  |
| --- | --- | --- | --- |
| 数据项名 | 别名 | 数据类型 | 取值范围 |
| 员工编号 | eid | varchar(11) | 由入职年份+部门号+顺序号组成 |
| 部门编号 | did | varchar(11) | 依据部门表 |
| 职称 | zhicheng | varchar | 普通员工或部门经理或部门总管 |
| 任职时间 | rtime | Date |  |

表 6 月考勤表

|  |  |  |  |
| --- | --- | --- | --- |
| 数据项名 | 别名 | 数据类型 | 取值范围 |
| 考勤月份 | k\_month | varchar(11) | 格式“年份-月份” |
| 员工编号 | eid | varchar(11) | 由入职年份+部门号+顺序号组成 |
| 加班时间 | over\_hour | int | 默认为零 |
| 请假天数 | leave\_day | int | 默认为零 |
| 迟到次数 | late\_time | int | 默认为零 |
| 早退次数 | early\_time | int | 默认为零 |
| 缺勤次数 | absent\_time | int | 默认为零 |

****表****
****7****
****在职员工工资表****

|  |  |  |  |
| --- | --- | --- | --- |
| 数据项名 | 别名 | 数据类型 | 取值范围 |
| 员工编号 | eid | varchar(11) | 由入职年份+部门号+顺序号组成 |
| 工资月份 | gmonth | varchar(11) | 格式“年份-月份” |
| 基本工资 | basic\_pay | double | 默认为零 |
| 工龄补贴 | seniority\_pay | double | 默认为零 |
| 绩效工资 | jixiao\_pay | double | 默认为零 |
| 考勤奖惩 | kaoqin\_pay | double | 默认为零 |
| 五险一金 | wuxian | double | 默认为零 |
| 个人所得税 | tax | double | 默认为零 |
| 实发工资 | shifa\_pay | double | 默认为零 |
| 发放状态 | gstate | varchar(11) | 已发或未发 |

****表****
****8****
****退休员工工资表****

|  |  |  |  |
| --- | --- | --- | --- |
| 数据项名 | 别名 | 数据类型 | 说明 |
| 员工编号 | eid | varchar(11) | 由入职年份+部门号+顺序号组成 |
| 工资月份 | tmonth | varchar(11) | 格式“年份-月份” |
| 在职月均工资 | av\_pay | double | 默认为零 |
| 基础养老金 | basic\_yl | double | 默认为零 |
| 个人账户养老金 | person\_yl | double | 默认为零 |
| 实发工资 | shifa\_yl | double | 默认为零 |
| 发放状态 | tstate | varchar(11) | 取值：已发或未发 |

#### ****1.3.2 数据结构定义****

****表****
****9****
****数据结构表****

|  |  |  |
| --- | --- | --- |
| 数据结构名 | 数据结构组成 | 含义说明 |
| 员工信息表 | 员工编号+姓名+性别+出生日期+联系方式+入职时间+退休时间+任职状态 | 存储员工相关的个人信息 |
| 部门表 | 部门编号+部门名+部门地址 | 存储部门相关信息 |
| 任职表 | 员工编号+部门编号+职称+任职时间 | 存储员工的职位信息 |
| 月考勤表 | 考勤月份+员工编号+加班时间+请假天数+迟到次数+早退次数+缺勤次数 | 存储员工的每月的考勤记录 |
| 个人专项附加扣除项目表 | 员工编号+子女教育+继续教育+贷款利息+租房+赡养老人+大病医疗 | 存储员工个人情况 |
| 在职员工工资表 | 员工编号+工资月份+基本工资+工龄补贴+绩效工资+考勤奖惩+个人所得税+五险一金+实发工资+发放状态 | 存储在职员工每月工资状态 |
| 退休员工工资表 | 员工编号+工资月份+在职月均工资+基础养老金+个人账户养老金+实发工资+发放状态 | 存储退休员工工资状态 |

## **第二节 概念结构设计**

### ****2.1 分E-R图****

由需求分析可得共有六个实体，分别是员工、部门、月考勤、在职工资、退休工资和个人专项附加扣除项目。一个员工在一个部门，一个部门可以有多个员工，部门与员工的关系是一对多的关系，每个员工在自己部门担任不同职位。一个员工只有一份月考勤，每份月考勤与每个员工一一对应。职工分为在职职工和退休职工，在职职工与在职工资是一对一关系，退休职工与退休工资也是一对一关系，员工与个人专项扣除项目是一对一关系。

由以上信息得到下面的分E-R图：

![](https://i-blog.csdnimg.cn/blog_migrate/b78f802eb2fdb234dca6773b8e738be7.png)


图 5 员工-部门分E-R图

![](https://i-blog.csdnimg.cn/blog_migrate/505344ceb9151bc6e3e42c2a668a261a.png)


图 6 员工-月考勤分E-R图

![](https://i-blog.csdnimg.cn/blog_migrate/88b547553a12f7ad96ee233bb25875b2.png)


图 7 员工-工资分E-R图

### ****2.2 基本E-R图****

![](https://i-blog.csdnimg.cn/blog_migrate/3804b30a435d27cabfbcaf40f18b9015.png)


图 8 基本E-R图

## **第三节 逻辑结构设计**

### ****3.1关系模式设计（下划线“**** ****”表示主码**** ****）****

员工（

员工编号
，姓名，性别，出生日期，联系方式，入职时间，退休时间，任职状态）                                    无外码

个人专项附加扣除项目（

员工编号
，子女教育，继续教育，贷款利息，租房，赡养老人，大病医疗）                          外码：员工编号

部门（

部门编号
，部门名，部门地址）        无外码

任职（

员工编号
，部门编号，职称，任职时间）外码：员工编号，部门编号

考勤（

考勤月份，员工编号
，加班时间，请假天数，迟到次数，早退次数，缺勤次数）                                        外码：员工编号

在职员工工资（

员工编号，工资月份
，基本工资，工龄补贴，绩效工资，考勤奖惩，个人所得税，五险一金，实发工资，发放状态）外码：员工编号

退休员工工资（

员工编号，工资月份
，在职月均工资，基础养老金，个人账户养老金，实发工资，发放状态）                    外码：员工编号

### ****3.2存储过程和触发器的设计****

在录入员工工资时，应由系统根据考勤表中的考勤情况和考勤奖惩规则自动计算出员工在考勤奖罚方面的工资，从而创建奖惩存储函数。根据入职年份和补贴规则来计算员工的工龄补贴，从而创建工龄补贴的存储函数。根据个人专项附加扣除项目和员工的税前工资来计算员工的个人所得税，从而创建税收存储函数。

在在职员工工资表插入或修改数据前，应根据管理员所输入的员工编号，工资月份，基础工资和绩效工资，分别调用奖惩存储函数来计算员工的考勤奖惩，调用员工工龄的存储函数来计算员工工龄补贴，调用税收存储函数来计算员工的个人所得税，根据公式来计算员工的五险一金，并综合计算出应发工资，从而创建触发器。在退休员工工资表插入或修改数据前，应根据管理员所输入的员工编号，工资月份,在职月均工资来计算出基础养老金、个人账户养老金和实发工资并填入表中，从而创建触发器。

## 第四节 物理结构设计

员工信息表（employee）如下表所示：

****表****
****11****
****员工信息表****

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 字段名 | 数据类型 | 含义 | 是否允许为null | 说明 |
| eid | varchar(11) | 员工编号 | 否 | 主码 |
| ename | varchar(11) | 姓名 | 否 |  |
| sex | varchar(11) | 性别 | 否 | 取值：男或女 |
| birthday | Date | 出生日期 | 否 | （1945-01-01，  2003-01-01） |
| phone | varchar(11) | 联系方式 | 否 | 规定标准11位且唯一 |
| intime | Date | 入职时间 | 否 |  |
| outtime | Date | 退休时间 | 是 | 默认为空 |
| state | varchar(11) | 任职状态 | 否 | 取值：在职或退休 |

个人专项附加扣除项目表(


items

)如下表所示：

****表****
****12****
****个人专项附加扣除项目表****

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 字段名 | 数据类型 | 含义 | 是否允许为null | 说明 |
| eid | varchar(11) | 员工编号 | 否 | 主码 |
| pro1 | double | 子女教育 | 否 | 默认为零 |
| pro2 | double | 继续教育 | 否 | 默认为零 |
| pro3 | double | 贷款利息 | 否 | 默认为零 |
| pro4 | double | 租房 | 否 | 默认为零 |
| pro5 | double | 赡养老人 | 否 | 默认为零 |
| pro6 | double | 大病医疗 | 否 | 默认为零 |

部门表（department）如下表所示：

****表****
****13****
****部门表****

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 字段名 | 数据类型 | 含义 | 是否允许为null | 说明 |
| did | varchar(11) | 部门编号 | 否 | 主码 |
| dname | varchar(11) | 部门名 | 否 |  |
| address | varchar(11) | 部门地址 | 否 |  |

任职表(

job
)如下表所示：

****表****
****14****
****任职表****

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 字段名 | 数据类型 | 含义 | 是否允许为null | 说明 |
| eid | varchar(11) | 员工编号 | 否 | 主码 |
| did | varchar(11) | 部门编号 | 否 |  |
| zhicheng | varchar | 职称 | 否 | 默认：普通员工 |
| rtime | Date | 任职时间 | 是 |  |

月考勤表（attendance）如下表所示：

表 15 月考勤表

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 字段名 | 数据类型 | 含义 | 是否允许为null | 说明 |
| k\_month | varchar(11) | 考勤月份 | 否 | 主码 |
| eid | varchar(11) | 员工编号 | 否 | 主码 |
| over\_hour | int | 加班时间 | 否 | 默认为零 |
| leave\_day | int | 请假天数 | 否 | 默认为零 |
| late\_time | int | 迟到次数 | 否 | 默认为零 |
| early\_time | int | 早退次数 | 否 | 默认为零 |
| absent\_time | int | 缺勤次数 | 否 | 默认为零 |

在职员工工资表(

salary


1
)如下表所示：

****表****
****16****
****在职员工工资表****

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 字段名 | 数据类型 | 含义 | 是否为空 | 说明 |
| eid | varchar(11) | 员工编号 | 否 | 主码 |
| gmonth | varchar(11) | 工资月份 | 否 | 主码 |
| basic\_pay | double | 基本工资 | 否 | 默认为零 |
| seniority\_pay | double | 工龄补贴 | 否 | 默认为零 |
| jixiao\_pay | double | 绩效工资 | 否 | 默认为零 |
| kaoqin\_pay | double | 考勤奖惩 | 否 | 默认为零 |
| tax | double | 个人所得税 | 否 | 默认为零 |
| wuxian | double | 五险一金 | 否 | 默认为零 |
| shifa\_pay | double | 实发工资 | 否 | 默认为零 |
| gstate | varchar(11) | 发放状态 | 否 | 取值：已发或未发 |

退休员工工资表(

salary


2
)如下表所示：

****表****
****17****
****退休员工工资表****

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 字段名 | 数据类型 | 含义 | 是否为空 | 说明 |
| eid | varchar(11) | 员工编号 | 否 | 主码 |
| tmonth | varchar(11) | 工资月份 | 否 | 主码 |
| av\_pay | double | 在职月均工资 | 否 | 默认为零 |
| basic\_yl | double | 基础养老金 | 否 | 默认为零 |
| person\_yl | double | 个人账户养老金 | 否 | 默认为零 |
| shifa\_yl | double | 实发工资 | 否 | 默认为零 |
| tstate | varchar(11) | 发放状态 | 否 | 取值：已发或未发 |

## **第五节 数据库实施**

### ****5.1**** ****创建基本表****

创建工资管理系统数据库（gzgl）：

![](https://i-blog.csdnimg.cn/blog_migrate/c159dc27e1fde4efa0d7fd1d20b7d746.png)


图 9 创建数据库图

创建员工表（employee）：

![](https://i-blog.csdnimg.cn/blog_migrate/65b39abc6cdd4cad5b7583d668cbd6a5.png)


图 10 创建员工表图

创建个人专项附加扣除项目表（items）：

![](https://i-blog.csdnimg.cn/blog_migrate/7321b16fb7a1c2bdf356036ff42c4e38.png)


图 11 创建个人专项附加扣除项目表图

创建部门表（department）：

![](https://i-blog.csdnimg.cn/blog_migrate/8782c303fb93afc0cd4ea645be0b2d12.png)


图 12创建部门表图

创建任职表（job）：

![](https://i-blog.csdnimg.cn/blog_migrate/b2d958104ea73d99fa872e958118aa0e.png)


图 13 创建任职表图

创建月考勤表（attendance）：

![](https://i-blog.csdnimg.cn/blog_migrate/d4aaf515bfa4d9ed31038f6ac6569cc0.png)


图 14 创建任职表图

创建在职员工工资表（salary1）：

![](https://i-blog.csdnimg.cn/blog_migrate/f9ba1eb894936d167a190bd418a65d8e.png)


图 15 创建在职员工工资表图

创建退休员工工资表（salary2）

![](https://i-blog.csdnimg.cn/blog_migrate/46799c0e97cdb8640172389449bf5e31.png)


图 16 创建退休员工工资表图

### **5.2 插入测试数据**

插入数据：

![](https://i-blog.csdnimg.cn/blog_migrate/f0af95c2b4cd403d920efe49e88aa4fd.png)


图 17 员工数据图

![](https://i-blog.csdnimg.cn/blog_migrate/91729113d7e869d24448bf23b6e2c11b.png)


图 18部门数据图

![](https://i-blog.csdnimg.cn/blog_migrate/99073860ae811ee7ba57c839bb23ea85.png)


图 19员工任职数据图

![](https://i-blog.csdnimg.cn/blog_migrate/a4243c41a643898281f8e4734692639b.png)


图 20 月考勤数据图

![](https://i-blog.csdnimg.cn/blog_migrate/509654756e0655e83f40e00a5cf47fd0.png)


图 21 items表数据图

![](https://i-blog.csdnimg.cn/blog_migrate/037897d06d8f08d6640330c3f3b135fe.png)


图 22 salary1表数据图

![](https://i-blog.csdnimg.cn/blog_migrate/c2661671e00ee967c80031bee977915d.png)


图 23 salary2表数据图

### **5.3** **创建业务处理的存储过程并测试**

创建奖惩存储函数jiangcheng（），根据月考勤表考勤情况和考勤奖惩规则来计算员工在考勤奖罚方面的工资。

![](https://i-blog.csdnimg.cn/blog_migrate/6f64b804c47fbb02dba646d80bc9d114.png)


图 24 奖惩存储函数创建图

测试：运用奖惩存储函数来计算员工编号为2000020001日期为2023-11的考勤奖罚方面的工资。

![](https://i-blog.csdnimg.cn/blog_migrate/92935999ed5a271e9ae719d7811c2257.png)


图 25 奖惩存储函数测试图

创建员工工龄的存储函数gongling(),来根据入职年份计算工龄，运用工龄补贴规则来计算员工的工龄方面的工资。

![](https://i-blog.csdnimg.cn/blog_migrate/d429fa35f76d12a324ea66af68d2089e.png)


图 26 员工工龄的存储函数创建图

测试：运用员工工龄的存储函数，来计算员工编号为2000020001今年的工龄补贴方面的工资
**。**

![](https://i-blog.csdnimg.cn/blog_migrate/e1532acfbb215a174af8756be384764d.png)


图 27 员工工龄的存储函数测试图

创建税收存储函数tax（），来计算员工的个人所得税。调用此存储函数需有基本工资等输入，故与下面的触发器tr\_s一同测试。

![](https://i-blog.csdnimg.cn/blog_migrate/884087dc39fc812f8e51cf7b29f2b2f4.png)


图 28 税收存储函数创建图

### **5.** **4** **创建业务处理的视图并测试**

创建视图salary1\_view，用来直观显示出在职员工工资表的信息。

![](https://i-blog.csdnimg.cn/blog_migrate/931e9aad28211d84efcfaa0d938b0540.png)


图 29 salary1\_view视图创建图

测试：用视图salary1\_view查询员工编号为2000020001的工资情况

![](https://i-blog.csdnimg.cn/blog_migrate/97744c14e764e522d63bcfb0d6159902.png)


图 30  视图salary1\_view测试图

创建视图salary2\_view，用来直观显示出退休员工工资表的信息。

![](https://i-blog.csdnimg.cn/blog_migrate/35e020dd17a9486e132b77f91e3b74b6.png)


图 31 视图salary2\_view创建图

测试：用视图salary2\_view查询员工编号为1980010001的工资情况。

![](https://i-blog.csdnimg.cn/blog_migrate/8a04ae4e37e70aeb35c21f168435fa88.png)


图 32 视图salary2\_view测试图

### **5.** **5** **创建业务处理的触发器并测试**

创建触发器tr\_s,在表salary1插入数据前，根据管理员所输入的员工编号，工资月份，基础工资和绩效工资，分别调用奖惩存储函数jiangcheng（）来计算员工的考勤奖惩，调用员工工龄的存储函数gongling()来计算员工工龄补贴，调用税收存储函数tax（）来计算员工的个人所得税，根据公式来计算员工的五险一金，并综合计算出应发工资。

![](https://i-blog.csdnimg.cn/blog_migrate/f427f50ec7644f0ddfd93d711a88b16c.png)


图 33 触发器tr\_s创建图

测试：插入员工工资基本数据：

![](https://i-blog.csdnimg.cn/blog_migrate/67fee8e5ad8d8d4e60e976db26c336ea.png)


图 34 触发器tr\_s数据插入测试图

查看员工工资
**：**

![](https://i-blog.csdnimg.cn/blog_migrate/32e6e93ba453d647ac1c53289862150f.png)


图 35 触发器tr\_s测试图

创建触发器tr\_s1,在表salary2插入数据前，根据管理员所输入的员工编号，工资月份,在职月均工资来计算出基础养老金、个人账户养老金和实发工资并填入表中
**。**

![](https://i-blog.csdnimg.cn/blog_migrate/aea384ded2156545333422fb10df917f.png)


图 36 触发器tr\_s1创建图

![](https://i-blog.csdnimg.cn/blog_migrate/8e034b70eae379a29fc1abb6a062c553.png)


图 37 触发器tr\_s1数据插入图

![](https://i-blog.csdnimg.cn/blog_migrate/3ae832ddc6a1ee34297bf5b0b955fabf.png)


图 38 触发器tr\_s1测试图

68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36363434313131352f:61727469636c652f64657461696c732f313337313935313435