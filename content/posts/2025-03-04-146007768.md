---
layout: post
title: "用DeepSeek-R1-Distill-data-110k蒸馏中文数据集-微调Qwen2.5-7B-Instruct"
date: 2025-03-04 10:46:57 +0800
description: "魔搭社区汇聚各领域最先进的机器学习模型，提供模型探索体验、推理、训练、部署和应用的一站式服务。"
keywords: "deepseek 数据集 110k.jsonl 使用"
categories: ['未分类']
tags: ['人工智能']
artid: "146007768"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146007768
    alt: "用DeepSeek-R1-Distill-data-110k蒸馏中文数据集-微调Qwen2.5-7B-Instruct"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146007768
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146007768
cover: https://bing.ee123.net/img/rand?artid=146007768
image: https://bing.ee123.net/img/rand?artid=146007768
img: https://bing.ee123.net/img/rand?artid=146007768
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     用DeepSeek-R1-Distill-data-110k蒸馏中文数据集 微调Qwen2.5-7B-Instruct！
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <ol>
     <li>
      <h2>
       下载模型与数据
      </h2>
      <p>
       <strong>
        模型下载：
       </strong>
       <br/>
       huggingface：
       <br/>
       <a class="has-card" href="https://hf-mirror.com/Qwen/Qwen2.5-7B-Instruct" rel="nofollow" title="Qwen/Qwen2.5-7B-Instruct · HF Mirror">
        <span class="link-card-box" contenteditable="false">
         <span class="link-title">
          Qwen/Qwen2.5-7B-Instruct · HF Mirror
         </span>
         <span class="link-desc">
          We’re on a journey to advance and democratize artificial intelligence through open source and open science.
         </span>
         <span class="link-link">
          <img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P1C7">
           https://hf-mirror.com/Qwen/Qwen2.5-7B-Instruct
          </img>
         </span>
        </span>
       </a>
       <br/>
       魔搭：
       <br/>
       <a class="has-card" href="https://www.modelscope.cn/models/Qwen/Qwen2.5-7B-Instruct" rel="nofollow" title="魔搭社区">
        <span class="link-card-box" contenteditable="false">
         <span class="link-title">
          魔搭社区
         </span>
         <span class="link-desc">
          汇聚各领域最先进的机器学习模型，提供模型探索体验、推理、训练、部署和应用的一站式服务。
         </span>
         <span class="link-link">
          <img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P1C7">
           https://www.modelscope.cn/models/Qwen/Qwen2.5-7B-Instruct
          </img>
         </span>
        </span>
       </a>
       <br/>
       <strong>
        数据下载：
       </strong>
       <br/>
       <a class="has-card" href="https://huggingface.co/datasets/Congliu/Chinese-DeepSeek-R1-Distill-data-110k" rel="nofollow" title="https://huggingface.co/datasets/Congliu/Chinese-DeepSeek-R1-Distill-data-110k">
        <span class="link-card-box" contenteditable="false">
         <span class="link-title">
          https://huggingface.co/datasets/Congliu/Chinese-DeepSeek-R1-Distill-data-110k
         </span>
         <span class="link-link">
          <img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P1C7">
           https://huggingface.co/datasets/Congliu/Chinese-DeepSeek-R1-Distill-data-110k
          </img>
         </span>
        </span>
       </a>
       <br/>
      </p>
     </li>
     <li>
      <h2>
       安装swift
      </h2>
      <p>
       <strong>
        使用 pip 安装：
       </strong>
      </p>
      <pre><code>pip install ms-swift -U</code></pre>
      <p>
       <strong>
        从源安装：
       </strong>
      </p>
      <pre><code># pip install git+https://github.com/modelscope/ms-swift.git

git clone https://github.com/modelscope/ms-swift.git
cd ms-swift
pip install -e .</code></pre>
     </li>
     <li>
      <h2>
       微调
      </h2>
      <pre><code>CUDA_VISIBLE_DEVICES=0,1 \
swift sft \
    --model /home/models/pretrained_models/llm/Qwen2.5-7B-Instruct \ 
    --train_type lora \
    --dataset  /home/data/Chinese-DeepSeek-R1-Distill-data-110k-SFT/new_distill_r1_110k_sft.json \
    --torch_dtype bfloat16 \
    --num_train_epochs 6 \
    --per_device_train_batch_size 1 \
    --per_device_eval_batch_size 1 \
    --learning_rate 1e-4 \
    --lora_rank 8 \
    --lora_alpha 32 \
    --target_modules all-linear \
    --gradient_accumulation_steps 16 \
    --eval_steps 50 \
    --save_steps 50 \
    --save_total_limit 5 \
    --logging_steps 5 \
    --output_dir output \
    --system 'You are a deep thinking assistant.' \
    --warmup_ratio 0.05 \
    --dataloader_num_workers 4 \
    --model_author Q \                                 
    --model_name Q-AILab-Qwen2.5-7B-Instruct-R1-Distill</code></pre>
     </li>
     <li>
      <h2>
       训练过程
      </h2>
      <p>
       <strong>
        2张A800，训练时长5天，共训练6轮。
       </strong>
      </p>
      <p>
       <img alt="" height="280" src="https://i-blog.csdnimg.cn/direct/78e13e4a7be3473e90dedee240d90bbf.png" width="1221"/>
      </p>
      <p>
       <img alt="" height="542" src="https://i-blog.csdnimg.cn/direct/90b324bf725d495f8ba5473b96d4cb4c.png" width="1339"/>
      </p>
     </li>
     <li>
      <h2>
       推理效果
      </h2>
      <p>
       <strong>
        推理：
       </strong>
      </p>
      <pre><code>CUDA_VISIBLE_DEVICES=0,1 \
swift infer \
    --adapters /home/model/swift/output/v6-20250217-075043/checkpoint-50 \
    --stream true \
    --temperature 0 \
    --max_new_tokens 8192</code></pre>
      <h4>
       推理测试：
       <br/>
       <img alt="" height="1146" src="https://i-blog.csdnimg.cn/direct/791848e8aee44c08a6db9d7b6c1ac561.png" width="2583">
        <br/>
        <img alt="" height="1141" src="https://i-blog.csdnimg.cn/direct/fea6a8689ac9459c9f6fe1b4d247b669.png" width="2542">
         <br/>
         <img alt="" height="1067" src="https://i-blog.csdnimg.cn/direct/47eb0682e2934d30ac8f2eb50b718106.png" width="2503"/>
         <br/>
         <br/>
         <strong>
          Qwen2.5-7B-Instruct-DeepSeek-R1-Distill-data-110K
         </strong>
         <strong>
          训练完成！
         </strong>
        </img>
       </img>
      </h4>
     </li>
     <li>
      <h2>
       后续合并Loar、断点训练、推送模型、可参考Swift github项目地址：
      </h2>
     </li>
    </ol>
    <p>
     <a class="has-card" href="https://github.com/modelscope/ms-swift" title="https://github.com/modelscope/ms-swift">
      <span class="link-card-box" contenteditable="false">
       <span class="link-title">
        https://github.com/modelscope/ms-swift
       </span>
       <span class="link-link">
        <img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P1C7"/>
        https://github.com/modelscope/ms-swift
       </span>
      </span>
     </a>
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f513739343436392f:61727469636c652f64657461696c732f313436303037373638" class_="artid" style="display:none">
 </p>
</div>


