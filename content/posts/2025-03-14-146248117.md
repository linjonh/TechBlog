---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323837383131312f:61727469636c652f64657461696c732f313436323438313137"
layout: post
title: "内网穿透的应用-全流程解析如何通过VNC实现Windows与MacOS远程桌面的无缝连接"
date: 2025-03-14 08:31:23 +0800
description: "在这个网络办公风生水起的时代，远程工作已经成为了职场达人的新宠。无论是程序员、设计师还是企业高管，谁不想拥有这样的超能力，在千里之外也能轻松搞定一切？但当你满怀信心地想要用其他系统设备操控MacOS电脑时，却遭遇了内网这堵‘铜墙铁壁’的阻拦。别急，cpolar这位‘攻城狮’早已为你准备好了破局秘籍。"
keywords: "内网穿透的应用-全流程解析如何通过VNC实现Windows与MacOS远程桌面的无缝连接"
categories: ['未分类']
tags: ['Windows', 'Macos']
artid: "146248117"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146248117
    alt: "内网穿透的应用-全流程解析如何通过VNC实现Windows与MacOS远程桌面的无缝连接"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146248117
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146248117
cover: https://bing.ee123.net/img/rand?artid=146248117
image: https://bing.ee123.net/img/rand?artid=146248117
img: https://bing.ee123.net/img/rand?artid=146248117
---

# 内网穿透的应用-全流程解析如何通过VNC实现Windows与MacOS远程桌面的无缝连接

### 前言

在这个网络办公风生水起的时代，远程工作已经成为了职场达人的新宠。无论是程序员、设计师还是企业高管，谁不想拥有这样的超能力，在千里之外也能轻松搞定一切？但当你满怀信心地想要用其他系统设备操控MacOS电脑时，却遭遇了内网这堵‘铜墙铁壁’的阻拦。别急，cpolar这位‘攻城狮’早已为你准备好了破局秘籍。

### 1. 测试局域网内远程控制

#### 1.1 MacOS打开屏幕共享

打开系统偏好设置，打开
`共享`

![20221230115730](https://i-blog.csdnimg.cn/img_convert/758c3d5f2393fa6258215db2c7333858.png)

勾选打开
`屏幕共享`
，点击右侧的电脑设置

![20221230130308](https://i-blog.csdnimg.cn/img_convert/00c7c7b66e9e57ff13c841b074b8de65.png)

勾选
`VNC显示程序可以使用密码控制屏幕`
，并且设置一个连接密码

![外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传](https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimages.cpolar.com%2Fimg%2F20221230120007.png&pos_id=img-QHvJUviR-1741912222469)

#### 1.2 测试局域网内VNC远程控制

这里测试使用windows系统远程控制MacOS。当然，您也可以用MacOS系统或者手机端进行远程控制，只需要本地安装配置VNC即可。

Windows控制端安装vnc viewer

> vnc viewer下载地址：
>   
> <https://www.realvnc.com/en/connect/download/viewer/>

![外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传](https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimages.cpolar.com%2Fimg%2F20221230112443.png&pos_id=img-3fIWsTWp-1741912222470)

vnc viewer下载并安装完成后打开客户端，在上方地址栏输入MacOS的IP地址

![20221230112526](https://i-blog.csdnimg.cn/img_convert/18f4c7c44897855d535a18f5073633cb.png)

点击continue

![20221230112624](https://i-blog.csdnimg.cn/img_convert/4fffb41bf88f8ba37663775b461fc148.png)

输入MacOS用户名以及vnc登录密码

![20221230112706](https://i-blog.csdnimg.cn/img_convert/6428c8dc4307e71d405590da04801d3c.png)

远程登录成功

![20221230112753](https://i-blog.csdnimg.cn/img_convert/cf43a18bd466f052b75741a46a8cc1fd.png)

### 2. 测试公网远程控制

局域网内测试远程控制成功后，接下来，我们来实现在公网环境下的远程控制，使用cpolar内网穿透创建tcp隧道，映射5900（vnc默认端口号），即可通过所生成的公网地址来进行公网远程控制，无需公网IP，也无需设置路由器。

#### 2.1 MacOS安装配置cpolar内网穿透

在官网下载下载适用于MacOS平台的zip压缩包，解压后得到cpolar，然后通过命令行带参数运行即可。

* 安装homebrew

```shell
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

```

需要注意的是，在安装homebrew时有可能会提示出错，无法链接服务器下载，可以将脚本地址更改为科大的镜像地址，然后再进行安装，具体可以百度教程。

* 检测是否安装homebrew

```shell
brew -v

```

* 安装cpolar内网穿透

```shell
brew tap probezy/core && brew install cpolar

```

* token认证

登录
[cpolar官网后台](https://dashboard.cpolar.com/auth)
，点击左侧的验证，查看自己的认证token，之后将token贴在命令行里

```shell
cpolar authtoken xxxxxxx

```

![外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传](https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimages.cpolar.com%2Fimg%2F20221229152722.png&pos_id=img-jK65ZTUi-1741912222471)

* 安装服务

```shell
sudo cpolar service install

```

* 启动服务

```shell
sudo cpolar service start

```

* 登录cpolar web UI管理界面

在浏览器上访问本地9200端口【
<http://127.0.0.1:9200/>
】，使用cpolar账号登录。

![20221229153018](https://i-blog.csdnimg.cn/img_convert/0b3fd9878552c42becd123fc68c662e0.png)

登录成功后，点击左侧仪表盘的隧道管理——隧道列表，可以看到两条样例隧道（可自行编辑或者删减）

* ssh隧道：指向本地22端口，tcp协议
* website隧道：指向本地8080端口，tcp协议

![20221229173953](https://i-blog.csdnimg.cn/img_convert/7f6f40511aabd87304a5de0f0046517c.png)

#### 2.2 创建tcp隧道，指向5900端口

点击左侧仪表盘的隧道管理——创建隧道：

* 隧道名称：可自定义，注意不要与已有隧道名称重复
* 协议：tcp协议
* 本地地址：5900（vnc默认端口号）
* 端口类型：免费选择随机临时tcp端口
* 地区：选择China VIP

点击
`创建`

![20221230110547](https://i-blog.csdnimg.cn/img_convert/389af6fa138969a920addb4b616eb535.png)

提示隧道创建成功后，页面自动跳转至隧道列表，可以看到刚刚创建成功的vnc隧道，状态
`active`
，表示为正常在线，注意无需再次点击启动。

![20221230110629](https://i-blog.csdnimg.cn/img_convert/890d0c1bf6fdd9e01646f50e587d14d3.png)

点击左侧仪表盘的状态——在线隧道列表，可以看到vnc隧道已经有生成了相应的公网地址，本例为
`2.tcp.vip.cpolar.cn:10208`
，将其复制下来，注意无需复制
`tcp://`
。

![20221230110709](https://i-blog.csdnimg.cn/img_convert/123752fc552fb0d664b364d68b3e3034.png)

### 3. 测试公网远程控制

windows控制端打开vnc viewer，点击上方的地址栏，输入公网地址，并点击连接。

![20221230112958](https://i-blog.csdnimg.cn/img_convert/42c039a50b40c0ffbe12a920a96912e0.png)

测试公网地址远程登录成功！

![20221230113011](https://i-blog.csdnimg.cn/img_convert/0a132ae2e635604925057d90dbe01a5e.png)

### 4. 配置公网固定TCP地址

刚刚所创建的隧道选择的是随机临时端口地址，所生成的公网地址24小时内会发生变化，对于需要长期远程的用户来讲不是很方便。为此，我们可以为其配置一个固定的TCP端口地址，同时提高带宽。

#### 4.1 保留固定TCP地址

登录
[cpolar官网后台](https://dashboard.cpolar.com/reserved)
，点击左侧的预留，找到保留的TCP地址：

* 地区：选择China VIP
* 描述：即备注，可自定义填写

点击
`保留`

![20221230111317](https://i-blog.csdnimg.cn/img_convert/9c1bf240e0adc77c943fe231d41322e3.png)

固定TCP地址保留成功，系统生成相应的公网地址+固定端口号，将其复制下来，本例为
`3.tcp.vip.cpolar.cn:11349`

![20221230111434](https://i-blog.csdnimg.cn/img_convert/f231a13cdf12ea4b51af68cf188c05a5.png)

#### 4.2 配置固定TCP端口地址

浏览器访问
<http://127.0.0.1:9200/>
登录cpolar web UI管理界面，点击左侧仪表盘的隧道管理——隧道列表，找到vnc隧道，点击右侧的
`编辑`

![20221230111514](https://i-blog.csdnimg.cn/img_convert/e76e891f6475078ef791e3fc5cfd246e.png)

修改隧道信息，配置固定TCP端口地址：

* 端口类型：改为选择
  `固定TCP端口`
* 预留的TCP地址：填写刚刚保留成功的固定TCP端口地址

点击
`更新`

![20221230111554](https://i-blog.csdnimg.cn/img_convert/158064c4db63955cebe2dd2816dfa7a8.png)

提示更新隧道成功，点击左侧仪表盘的状态——在线隧道列表，可以看到vnc隧道的公网地址已经更新为固定TCP端口地址，将其复制下来。

![20221230111630](https://i-blog.csdnimg.cn/img_convert/1d13ba117534efa45edd98ad6673a4e9.png)

### 5. 使用固定公网TCP地址远程控制

点击上方的地址栏，输入公网固定TCP端口地址，并点击连接。

![20221230113054](https://i-blog.csdnimg.cn/img_convert/f38589d5938f42a62cdd2f0a3f552d52.png)

远程控制成功！

![20221230113109](https://i-blog.csdnimg.cn/img_convert/47c0b3181a00f0457e107b80064f2cf9.png)

掌握了MacOS自带VNC与cpolar的完美搭配，你不仅能在各种场合下轻松远程操控设备，还能让工作变得游刃有余。无论是家庭办公、团队合作还是技术支持，这套组合技都能让你在同事面前大放异彩。赶紧试试吧，说不定你的领导会因为这项新技能而给你发个大大的红包哦！