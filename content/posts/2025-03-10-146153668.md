---
layout: post
title: "Fedora41安装MySQL8.4.4"
date: 2025-03-10 20:43:41 +0800
description: "以下是MySQL 8.4的详细介绍，重点涵盖其核心特性、改进方向及适用场景：1. 版本定位与支持周期LTS（长期支持版本）MySQL 8.4 是官方指定的长期支持版本，支持周期至2026 年，适合生产环境使用。支持策略：仅 LTS 版本（如 8.4、9.7）提供长期维护，非 LTS 版本（如 8.0）仅短期支持。兼容性与升级限制不支持从 MySQL 5.7 直接升级到 8.4，需先迁移至 8.0。"
keywords: "Fedora41安装MySQL8.4.4"
categories: ['非关系型', '关系型', 'Sql', 'Nosql', 'Database']
tags: ['Mysql', 'Linux']
artid: "146153668"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146153668
    alt: "Fedora41安装MySQL8.4.4"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146153668
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146153668
cover: https://bing.ee123.net/img/rand?artid=146153668
image: https://bing.ee123.net/img/rand?artid=146153668
img: https://bing.ee123.net/img/rand?artid=146153668
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Fedora41安装MySQL8.4.4
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="Fedora41yumMySQL844__250310_9">
     </a>
     Fedora41用yum仓库安装MySQL8.4.4 笔记250310
    </h2>
    <h4>
     <a id="_11">
     </a>
     下载安装
    </h4>
    <p>
     下载页面
    </p>
    <p>
     <a href="https://dev.mysql.com/downloads/" rel="nofollow">
      MySQL Community Downloads 多种社区产品选择
     </a>
    </p>
    <p>
     <a href="https://dev.mysql.com/downloads/mysql/" rel="nofollow">
      MySQL Community 社区版安装包的下载地址—https://dev.mysql.com/downloads/mysql/
     </a>
     ,
    </p>
    <br/>
    <p>
     <strong>
      <a href="https://dev.mysql.com/downloads/repo/yum/" rel="nofollow">
       YUM仓库安装MySQL的yum配置文件的下载地址—https://dev.mysql.com/downloads/repo/yum/
      </a>
     </strong>
    </p>
    <p>
     <a href="https://dev.mysql.com/downloads/repo/yum/" rel="nofollow">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/675d758ab4f946fd8314e143503b3e30.png">
       <br/>
      </img>
     </a>
    </p>
    <p>
     页面会随时间而变化
    </p>
    <p>
     <a href="https://dev.mysql.com/downloads/file/?id=536242" rel="nofollow">
      Fedora41安装MySQL8.4.4对应的链接是
     </a>
    </p>
    <pre><code class="prism language-sh">https://dev.mysql.com/get/mysql84-community-release-fc41-1.noarch.rpm
</code></pre>
    <p>
     可以下载
     <code>
      mysql84-community-release-fc41-1.noarch.rpm
     </code>
     后用
     <code>
      rpm -ivh
     </code>
     或
     <code>
      yum install
     </code>
     安装仓库
    </p>
    <p>
     也可以直接用
     <code>
      rpm -ivh
     </code>
     或
     <code>
      yum install
     </code>
     从网络下载并安装
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> https://dev.mysql.com/get/mysql84-community-release-fc41-1.noarch.rpm
</code></pre>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> https://dev.mysql.com/get/mysql84-community-release-fc41-1.noarch.rpm
</code></pre>
    <p>
     更新yum
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum update
</code></pre>
    <p>
     此时就能用 yum 安装 mysql-server 了, 自动包含 mysql-client
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> mysql-server
</code></pre>
    <p>
     或者
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> mysql-community-server.x86_64
</code></pre>
    <p>
     效果一样
    </p>
    <p>
     <br/>
     <br/>
    </p>
    <h4>
     <a id="mysqld_66">
     </a>
     启动
     <code>
      mysqld
     </code>
     服务
    </h4>
    <p>
     Fedora,CentOS的mysql服务是
     <code>
      mysqld
     </code>
     , Ubuntu是
     <code>
      mysql
     </code>
    </p>
    <ul>
     <li>
      启动CentOS7的MySQL8.0用的是
      <code>
       systemctl start mysqld
      </code>
     </li>
     <li>
      启动Ubuntu20.04的MySQL8.0用的是
      <code>
       systemctl start mysql
      </code>
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysqld <span class="token parameter variable">--now</span>
</code></pre>
    <p>
     或者
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysqld
<span class="token function">sudo</span> systemctl start mysqld
</code></pre>
    <br/>
    <h4>
     <a id="___86">
     </a>
     查看生成的初始密码 , 用初始密码登录
    </h4>
    <p>
     Ubuntu20.04 下用apt安装的mysql8.0.30默认不带
     <code>
      validate_password
     </code>
     组件,可以使用空密码
     <br/>
     Fedora,CentOS7下用yum安装的mysql8.0.30带
     <code>
      validate_password
     </code>
     组件,默认要大小写字母数字特殊符号一起用,还有长度要求,体验很差
     <br/>
     密码可能以括号开头结尾
    </p>
    <p>
     生成的初始密码在
     <code>
      /var/log/mysqld.log
     </code>
     日志文件中
     <br/>
     可能包含冒号,但不会包含冒号加空格, 所以可以用
     <code>
      :
     </code>
     冒号空格进行拆分
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">awk</span> -F<span class="token string">': '</span> <span class="token string">'/A temporary password is generated for/{print $2}'</span> /var/log/mysqld.log
</code></pre>
    <p>
     查看密码所在行
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">grep</span> <span class="token string">'temporary password'</span> /var/log/mysqld.log<span class="token punctuation">;</span>
</code></pre>
    <p>
     本地登录不用开防火墙端口,
     <br/>
     远程登陆开放端口3306:
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sudo</span> firewall-cmd --get-default-zone<span class="token variable">)</span></span> --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp <span class="token parameter variable">--permanent</span> <span class="token punctuation">;</span>
<span class="token function">sudo</span> systemctl restart firewalld <span class="token punctuation">;</span>
</code></pre>
    <p>
     用初始密码登录
    </p>
    <p>
     手动输入密码
    </p>
    <pre><code class="prism language-bash">mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre>
    <p>
     或者直接在
     <code>
      -p
     </code>
     后粘贴密码
     <br/>
     用复制粘贴的话,因为有特殊字符,所以要加上单引号和双引号,最好用
     <strong>
      单引号
     </strong>
     <br/>
     并且
     <code>
      -p
     </code>
     和
     <code>
      单双引号
     </code>
     之间
     <strong>
      不能有空格
     </strong>
    </p>
    <pre><code class="prism language-bash">mysql <span class="token parameter variable">-uroot</span> -p<span class="token string">':id(.aZr&lt;1Tt'</span>
</code></pre>
    <br/>
    <h4>
     <a id="_130">
     </a>
     登录后,必须修改初始密码才能执行其它操作
    </h4>
    <p>
     必须先更改为另一个强密码, 可以不用记住它, 设好后, 降低密码强度, 或者卸载
     <code>
      validate_password
     </code>
     这个组件
     <br/>
     设置密码方法1
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> root<span class="token variable">@localhost</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'ABCDEFGhijklmn1234567!!!'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     设置密码方法2
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SET</span> PASSWORD<span class="token operator">=</span><span class="token string">'ABCDEFGhijklmn1234567!!!'</span><span class="token punctuation">;</span>
</code></pre>
    <br/>
    <h5>
     <a id="__143">
     </a>
     可选设置降低密码强度要求, 使用简单密码
    </h5>
    <p>
     降低密码强度要求的方法有:
    </p>
    <ul>
     <li>
      设置
      <code>
       validate_password
      </code>
      的相关选项来降低密码强度要求
     </li>
     <li>
      卸载
      <code>
       validate_password
      </code>
     </li>
    </ul>
    <h6>
     <a id="_validate_password__147">
     </a>
     降低 validate_password 组件对密码强度的要求
    </h6>
    <p>
     查看原始的 validate_password 各属性默认值
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     结果
    </p>
    <pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------------+--------+</span>
<span class="token operator">|</span> Variable_name                                   <span class="token operator">|</span> <span class="token keyword">Value</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------------+--------+</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>changed_characters_percentage <span class="token operator">|</span> <span class="token number">0</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>check_user_name               <span class="token operator">|</span> <span class="token keyword">ON</span>     <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>dictionary_file               <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>length                        <span class="token operator">|</span> <span class="token number">8</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>mixed_case_count              <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>number_count                  <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>policy                        <span class="token operator">|</span> MEDIUM <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>special_char_count            <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------------+--------+</span>
<span class="token number">8</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>
</code></pre>
    <p>
     其中
    </p>
    <ul>
     <li>
      <code>
       validate_password.changed_characters_percentage
      </code>
      是msqyl8.0.34的新属性, 取值0-100百分比,表示修改密码时,新密码与旧密码的不相同程度要求
     </li>
     <li>
      <code>
       validate_password.check_user_name
      </code>
      检查密码是否包含用户名
     </li>
     <li>
      <code>
       validate_password.dictionary_file
      </code>
      指定自定义弱密码字典文件路径（仅 STRONG 策略生效）。
     </li>
     <li>
      <code>
       validate_password.length
      </code>
      密码的最小长度。
     </li>
     <li>
      <code>
       validate_password.mixed_case_count
      </code>
      密码中至少包含的大写和小写字母总数。（MEDIUM及以上策略生效）。
     </li>
     <li>
      <code>
       validate_password.number_count
      </code>
      密码中至少包含的数字数量。（MEDIUM及以上策略生效）。
     </li>
     <li>
      <code>
       validate_password.policy
      </code>
      策略, 可选:
      <code>
       LOW(0)
      </code>
      ,
      <code>
       MEDIUM(1)
      </code>
      ,
      <code>
       STRONG(2)
      </code>
      <ul>
       <li>
        <code>
         LOW
        </code>
        或
        <code>
         0
        </code>
        ： 仅检查密码长度。
       </li>
       <li>
        <code>
         MEDIUM
        </code>
        或
        <code>
         1
        </code>
        ：（默认）：检查长度、大小写字母、数字和特殊字符。
       </li>
       <li>
        <code>
         STRONG
        </code>
        或
        <code>
         2
        </code>
        ： 在 MEDIUM 基础上，额外检查密码是否包含弱密码字典中的词汇。
       </li>
      </ul>
     </li>
     <li>
      <code>
       validate_password.special_char_count
      </code>
      密码中至少包含的特殊字符数量（MEDIUM及以上策略生效）。
     </li>
    </ul>
    <h5>
     <a id="SET_GLOBAL_188">
     </a>
     用
     <code>
      SET GLOBAL
     </code>
     命令来设置
    </h5>
    <ul>
     <li>
      <code>
       SET GLOBAL validate_password.policy=LOW;
      </code>
      降低密码复杂度要求
     </li>
     <li>
      <code>
       SET GLOBAL validate_password.mixed_case_count=0;
      </code>
      最少大小写字符数
     </li>
     <li>
      <code>
       SET GLOBAL validate_password.number_count=0;
      </code>
      最少数字字符数
     </li>
     <li>
      <code>
       SET GLOBAL validate_password.special_char_count=0;
      </code>
      最少特殊字符数
     </li>
     <li>
      <code>
       SET GLOBAL validate_password.check_user_name=OFF
      </code>
      ; 允许用户名和密码相同
     </li>
     <li>
      <code>
       SET GLOBAL validate_password.length=0;
      </code>
      设置密码最小长度, 要放到最后设置, 否则可能被其它值影响, 使其没法为0, 可能是4或者2
     </li>
    </ul>
    <pre><code class="prism language-sql"><span class="token comment">### 密码策略: 0或LOW是只检查长度  ,  1或MEDIUM是检查长度数字字母特殊字符的个数  ,  2或STRONG是比1多检查字典文件 ;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>policy<span class="token operator">=</span>LOW<span class="token punctuation">;</span>
<span class="token comment">### 最少大小写字母数</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>mixed_case_count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 最少数字字符数</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>number_count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 最少特殊字符数</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>special_char_count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 是否允许密码包含正反用户名 , 取值ON/OFF</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>check_user_name<span class="token operator">=</span><span class="token keyword">OFF</span><span class="token punctuation">;</span>
<span class="token comment">### 密码最小长度, 要放到最后设置,  否则可能被其它值影响, 使其没法为0, 可能是4或者2</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 查看 validate_password 的相关MySQL系统变量</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>

</code></pre>
    <p>
     查看 validate_password 的相关MySQL系统变量
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="__validate_password____221">
     </a>
     可选: 卸载 validate_password 组件, 可将密码设为空, 实现无密码登录
    </h5>
    <p>
     用
     <code>
      INSTALL
     </code>
     和
     <code>
      UNINSTALL
     </code>
     命令
    </p>
    <ul>
     <li>
      <p>
       安装 validate_password 组件
       <br/>
       <code>
        INSTALL COMPONENT 'file://component_validate_password';
       </code>
      </p>
      <pre><code class="prism language-sql">INSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       卸载 validate_password 卸载
       <br/>
       <code>
        UNINSTALL COMPONENT 'file://component_validate_password';
       </code>
      </p>
      <pre><code class="prism language-sql"> UNINSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <p>
     自用的话卸载 validate_password 插件
    </p>
    <pre><code class="prism language-sql">UNINSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     然后就能设为空密码😄
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> root<span class="token variable">@localhost</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     或
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SET</span> PASSWORD<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     操作系统的root输入mysql就能直接登录
    </p>
    <p>
     卸载 validate_password 插件后, 相关变量就没有了
    </p>
    <pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
    <p>
     <br/>
     <br/>
     <br/>
    </p>
    <h4>
     <a id="_266">
     </a>
     创建远程用户
    </h4>
    <p>
     <a href="https://blog.csdn.net/kfepiza/article/details/128976207?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522487cd2e66b844cbb06322296825336fc%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=487cd2e66b844cbb06322296825336fc&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-10-128976207-null-null.nonecase&amp;utm_term=mysql&amp;spm=1018.2226.3001.4450">
      MySQL8 创建用户,设置修改密码,授权
     </a>
    </p>
    <p>
     创建一个名为remote的远程用户,
     <code>
      remote
     </code>
     等效
     <code>
      remote'@'%
     </code>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">###  创建一个名为remote的远程用户, remote等效'remote'@'%'</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> remote IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     创建一个可以用 Navicat11 登录的远程用户
    </p>
    <pre><code class="prism language-sql"><span class="token comment">###   创建一个名为remote的远程用户, remote等效'remote'@'%', 使用mysql5.7旧版密码插件,方便使用Navicat11等登录</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> remote IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     赋予remote所有权限和权力传递的权限,并将root角色授予remote
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'remote'</span><span class="token variable">@'%'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> remote<span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> remote<span class="token punctuation">;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="root_289">
     </a>
     创建远程root的语句模板
    </h5>
    <p>
     纯字母数字的用户名可以不加单引号,
     <br/>
     @及右边省略效果与加上
     <code>
      @'%'
     </code>
     的效果相同,
     <br/>
     <code>
      root
     </code>
     等效
     <code>
      root@'%'
     </code>
     等效
     <code>
      'root'@'%'
     </code>
    </p>
    <p>
     创建
     <code>
      root@'%'
     </code>
     , 并将
     <code>
      root@'localhost'
     </code>
     的权限授予
     <code>
      root@'%'
     </code>
     ,
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'密码'</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     创建
     <code>
      root@'%'
     </code>
     , 并让
     <code>
      root@'%'
     </code>
     扮演
     <code>
      root@'localhost'
     </code>
     的角色 , 并设置为默认角色
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> root IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'密码'</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     权限和角色两者都加持
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'密码'</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <br/>
    <p>
     权限和角色两者都加持, 无密码
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <code>
      GRANT ALL PRIVILEGES ON
     </code>
     等效
     <code>
      GRANT ALL ON
     </code>
     , 效果同上👆
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <code>
      'root'@'%'
     </code>
     可以写成
     <code>
      root@'%'
     </code>
     可以写成
     <code>
      root
     </code>
     , 效果同上👆
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> root IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> root <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> root<span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> root<span class="token punctuation">;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     降低密码强度, 创建用户, 无密码 , 赋予最大权限和root角色, 设置root角色为默认角色, 刷新权限 (注释可以用一个井号#不用加空格,或者两减号加空格(3字符))
    </p>
    <pre><code class="prism language-sql"><span class="token comment">--  ------    两个--后必须有空格 sql注释可以用一个井号#不用加空格,或者两减号加空格(3字符)</span>
<span class="token comment">#---------    降低密码强度,  创建用户, 无密码 , 赋予最大权限和root角色, 设置root角色为默认角色, 刷新权限 --------</span>

<span class="token comment">## 降低密码强度</span>
<span class="token comment">--  --- 新旧密码不同度百分比要求,取值0-100, MySQL8.0.34才有</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>changed_characters_percentage <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">#### 密码策略: 0或LOW是只检查长度  ,  1或MEDIUM是检查长度数字字母特殊字符的个数  ,  2或STRONG是比1多检查字典文件 ;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>policy<span class="token operator">=</span>LOW<span class="token punctuation">;</span>
<span class="token comment">#### 最少大小写字母数</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>mixed_case_count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">#### 最少数字字符数</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>number_count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">#### 最少特殊字符数</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>special_char_count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">#### 是否允许密码包含正反用户名 , 取值ON/OFF</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>check_user_name<span class="token operator">=</span><span class="token keyword">OFF</span><span class="token punctuation">;</span>
<span class="token comment">#### 密码最小长度, 要放到最后设置,  否则可能被其它值影响, 使其没法为0, 可能是4或者2</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">##    创建用户, 无密码 , 赋予最大权限和root角色, 设置root角色为默认角色</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> 
<span class="token comment">--    刷新权限</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>

</code></pre>
    <p>
     卸载 validate_password 组件, 创建用户, 无密码 , 赋予最大权限和root角色, 设置root角色为默认角色, 刷新权限,
    </p>
    <pre><code class="prism language-sql"><span class="token comment">--  ------    两个--后必须有空格 sql注释可以用一个井号#不用加空格,或者两减号加空格(3字符)</span>
<span class="token comment">#---------    降低密码强度,  创建用户, 无密码 , 赋予最大权限和root角色, 设置root角色为默认角色, 刷新权限 --------</span>

<span class="token comment">##    卸载 validate_password 组件</span>
UNINSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
<span class="token comment">##    创建用户, 无密码 , 赋予最大权限和root角色, 设置root角色为默认角色</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span> <span class="token keyword">GRANT</span> root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE root<span class="token variable">@'localhost'</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> 
<span class="token comment">--    刷新权限</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>

</code></pre>
    <p>
     <br/>
     <br/>
     <br/>
    </p>
    <h4>
     <a id="_firewalld_3306_369">
     </a>
     开放 firewalld 防火墙的3306端口
    </h4>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sudo</span> firewall-cmd --get-default-zone<span class="token variable">)</span></span> --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp <span class="token parameter variable">--permanent</span> <span class="token punctuation">;</span> <span class="token function">sudo</span> systemctl restart firewalld <span class="token punctuation">;</span>
</code></pre>
    <p>
     <br/>
     <br/>
     <br/>
    </p>
    <h4>
     <a id="_DROP_USER_uh_375">
     </a>
     删除用户
     <code>
      DROP USER 'u'@'h'
     </code>
    </h4>
    <p>
     <code>
      DROP USER root;
     </code>
     只会删除
     <code>
      'root'@'%'
     </code>
     , 不会删除
     <code>
      'root'@'localhost'
     </code>
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> root<span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> root<span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <code>
      DROP USER IF EXISTS root;
     </code>
     只会删除
     <code>
      'root'@'%'
     </code>
     , 不会删除
     <code>
      'root'@'localhost'
     </code>
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> root<span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> root<span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token string">'root'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <br/>
     <br/>
     <br/>
    </p>
    <h4>
     <a id="_400">
     </a>
     用脚本安装
    </h4>
    <h5>
     <a id="Fedora41MySQL844_401">
     </a>
     Fedora41一步安装MySQL8.4.4并且第一次登录
    </h5>
    <pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> https://dev.mysql.com/get/mysql84-community-release-fc41-1.noarch.rpm
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> mysql-community-server.x86_64
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysqld <span class="token parameter variable">--now</span>
<span class="token assign-left variable">MysqlInitialTemporaryPassword</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">awk</span> -F<span class="token string">': '</span> <span class="token string">'/A temporary password is generated for/{print $2}'</span> /var/log/mysqld.log<span class="token variable">`</span></span>
<span class="token assign-left variable">MysqlFirstLoginCodeCommand</span><span class="token operator">=</span><span class="token string">"mysql -uroot -p"</span><span class="token variable">$MysqlInitialTemporaryPassword</span>
<span class="token variable">$MysqlFirstLoginCodeCommand</span>
</code></pre>
    <h5>
     <a id="Fedora41MySQL844rootlocalhost_remote_3306_413">
     </a>
     Fedora41一步安装MySQL8.4.4并且将root@localhost免密, 创建免密的remote用户, 开放3306端口
    </h5>
    <pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token function">sudo</span> yum remove <span class="token parameter variable">-y</span> mariadb<span class="token punctuation">;</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> https://dev.mysql.com/get/mysql84-community-release-fc41-1.noarch.rpm
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> mysql-community-server.x86_64
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysqld
<span class="token function">sudo</span> systemctl start mysqld
<span class="token assign-left variable">MysqlInitialTemporaryPassword</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">awk</span> -F<span class="token string">': '</span> <span class="token string">'/A temporary password is generated for/{print $2}'</span> /var/log/mysqld.log<span class="token variable">`</span></span>
<span class="token assign-left variable">MysqlFirstLoginCodeCommand</span><span class="token operator">=</span><span class="token string">"mysql -uroot -p"</span><span class="token variable">$MysqlInitialTemporaryPassword</span>
<span class="token variable">$MysqlFirstLoginCodeCommand</span>
ALTER <span class="token environment constant">USER</span> root@localhost IDENTIFIED BY <span class="token string">'ABCDEFGhijklmn1234567!!!'</span><span class="token punctuation">;</span>
<span class="token comment">### 密码策略: 0或LOW是只检查长度  ,  1或MEDIUM是检查长度数字字母特殊字符的个数  ,  2或STRONG是比1多检查字典文件 ;</span>
SET GLOBAL <span class="token assign-left variable">validate_password.policy</span><span class="token operator">=</span>LOW<span class="token punctuation">;</span>
<span class="token comment">### 最少大小写字符数</span>
SET GLOBAL <span class="token assign-left variable">validate_password.mixed_case_count</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 最少数字字符数</span>
SET GLOBAL <span class="token assign-left variable">validate_password.number_count</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 最少特殊字符数</span>
SET GLOBAL <span class="token assign-left variable">validate_password.special_char_count</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 是否允许密码包含正反用户名 , 取值ON/OFF</span>
SET GLOBAL <span class="token assign-left variable">validate_password.check_user_name</span><span class="token operator">=</span>OFF<span class="token punctuation">;</span>
<span class="token comment">### 密码最小长度, 要放到最后设置,  否则可能被其它值影响, 使其没法为0, 可能是4或者2</span>
SET GLOBAL <span class="token assign-left variable">validate_password.length</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">### 查看 validate_password 的相关MySQL系统变量</span>
SHOW VARIABLES LIKE <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
SET <span class="token assign-left variable">PASSWORD</span><span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
CREATE <span class="token environment constant">USER</span> IF NOT EXISTS remote IDENTIFIED WITH mysql_native_password BY <span class="token string">''</span><span class="token punctuation">;</span> 
GRANT ALL ON *.* TO <span class="token string">'remote'</span>@<span class="token string">'%'</span> WITH GRANT OPTION<span class="token punctuation">;</span> GRANT root@<span class="token string">'localhost'</span> TO remote<span class="token punctuation">;</span> SET DEFAULT ROLE root@<span class="token string">'localhost'</span> TO remote<span class="token punctuation">;</span> FLUSH PRIVILEGES<span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sudo</span> firewall-cmd --get-default-zone<span class="token variable">)</span></span> --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp <span class="token parameter variable">--permanent</span> <span class="token punctuation">;</span> <span class="token function">sudo</span> systemctl restart firewalld <span class="token punctuation">;</span>
mysql <span class="token parameter variable">-uremote</span>

</code></pre>
    <p>
     <br/>
     <br/>
     <br/>
    </p>
    <h2>
     <a id="_450">
     </a>
     补充
    </h2>
    <p>
     <br/>
     <br/>
    </p>
    <h4>
     <a id="validate_password__validate_password_455">
     </a>
     validate_password插件 和 validate_password组件
    </h4>
    <p>
     <a href="https://dev.mysql.com/doc/refman/8.4/en/validate-password.html" rel="nofollow">
      MySQL8.4官方参考手册—密码验证组件—8.4.3 The Password Validation Component
     </a>
     <br/>
     <a href="https://dev.mysql.com/doc/refman/8.4/en/validate-password-options-variables.html" rel="nofollow">
      8.4.3.2章节 密码验证选项变量 Password Validation Options and Variables
     </a>
    </p>
    <p>
     <a href="https://dev.mysql.com/doc/refman/8.0/en/validate-password.html" rel="nofollow">
      MySQL8.0官方参考手册—密码验证组件—8.4.3 The Password Validation Component
     </a>
     <br/>
     <a href="https://dev.mysql.com/doc/refman/5.7/en/validate-password.html" rel="nofollow">
      MySQL5.7官方参考手册—密码验证插件—6.4.3 The Password Validation Plugin
     </a>
    </p>
    <p>
     组件和插件
    </p>
    <ul>
     <li>
      MySQL5.7, 用的是 validate_password
      <code>
       插件
      </code>
     </li>
     <li>
      MySQL8.0, 用的是 validate_password
      <code>
       组件
      </code>
     </li>
    </ul>
    <p>
     Ubuntu20.04下用apt安装的MySQL8.0默认没有使用validate_password 插件或组件
     <br/>
     CentOS7下用MySQL官方yum仓库安装的MySQL8.0默认启用validate_password 组件
     <br/>
     MySQL5.7的 validate_password
     <code>
      插件
     </code>
     在MySQL8.0中任然可以使用,但默认不使用,已过时,未来准备移除
    </p>
    <table>
     <caption>
     </caption>
     <colgroup>
      <col/>
      <col/>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th>
        MySQL8.0的 validate_password 组件
       </th>
       <th>
        MySQL5.7 validate_password 插件
       </th>
       <th>
        功能
       </th>
       <th>
        取值
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        validate_password.check_user_name
       </td>
       <td>
        validate_password_check_user_name
       </td>
       <td>
        检查密码与用户名是否相同或相反
       </td>
       <td>
        ON/OFF
       </td>
      </tr>
      <tr>
       <td>
        validate_password.dictionary_file
       </td>
       <td>
        validate_password_dictionary_file
       </td>
       <td>
        检查密码与密码字典
       </td>
       <td>
        字典文件路径
       </td>
      </tr>
      <tr>
       <td>
        validate_password.length
       </td>
       <td>
        validate_password_length
       </td>
       <td>
        检查密码长度
       </td>
       <td>
        0至正整数
       </td>
      </tr>
      <tr>
       <td>
        validate_password.mixed_case_count
       </td>
       <td>
        validate_password_mixed_case_count
       </td>
       <td>
        检查密密码大小写字母总数
       </td>
       <td>
        0至正整数
       </td>
      </tr>
      <tr>
       <td>
        validate_password.number_count
       </td>
       <td>
        validate_password_number_count
       </td>
       <td>
        检查密密码数字字符总数
       </td>
       <td>
        0至正整数
       </td>
      </tr>
      <tr>
       <td>
        validate_password.policy
       </td>
       <td>
        validate_password_policy
       </td>
       <td>
        密码策略,检查密码复杂度
       </td>
       <td>
        0、1、2 对应 LOW、MEDIUM、STRONG
       </td>
      </tr>
      <tr>
       <td>
        validate_password.special_char_count
       </td>
       <td>
        validate_password_special_char_count
       </td>
       <td>
        检查密码特殊字符的个数
       </td>
       <td>
        0至正整数
        <br/>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     可看到插件变量validate_password之后是下划线
     <code>
      _
     </code>
     , 组件变量validate_password之后是点
     <code>
      .
     </code>
     <br/>
     插件的变量是相对独立的, 组件的变量被统一在validate_password之下
    </p>
    <p>
     <code>
      validate_password.policy
     </code>
     和
     <code>
      validate_password_policy
     </code>
     的取值
    </p>
    <table>
     <caption>
      `validate_password.policy` 和 `validate_password_policy` 的取值效果
     </caption>
     <colgroup>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th colspan="2">
        `validate_password.policy` 和 `validate_password_policy` 的取值效果
       </th>
      </tr>
      <tr>
       <th>
        取值
       </th>
       <th>
        效果
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <mark>
         0
        </mark>
        或者
        <mark>
         LOW
        </mark>
       </td>
       <td>
        只检查密码长度
       </td>
      </tr>
      <tr>
       <td>
        <mark>
         1
        </mark>
        或者
        <mark>
         MEDIUM
        </mark>
       </td>
       <td>
        检查长度; 数字、小写/大写和特殊字符
       </td>
      </tr>
      <tr>
       <td>
        <mark>
         2
        </mark>
        或者
        <mark>
         STRONG
        </mark>
       </td>
       <td>
        长度; 数字、小写/大写和特殊字符；字典文件
        <br/>
       </td>
      </tr>
     </tbody>
    </table>
    <table>
     <thead>
      <tr>
       <th>
        取值
       </th>
       <th>
        效果
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         0
        </code>
        或者
        <code>
         LOW
        </code>
       </td>
       <td>
        只检查密码长度
       </td>
      </tr>
      <tr>
       <td>
        <code>
         1
        </code>
        或者
        <code>
         MEDIUM
        </code>
       </td>
       <td>
        检查长度; 数字、小写/大写和特殊字符
       </td>
      </tr>
      <tr>
       <td>
        <code>
         2
        </code>
        或者
        <code>
         STRONG
        </code>
       </td>
       <td>
        长度; 数字、小写/大写和特殊字符；字典文件
       </td>
      </tr>
     </tbody>
    </table>
    <h5>
     <a id="_validate_password_MySQL_516">
     </a>
     查看 validate_password 组件或插件的相关MySQL系统变量
    </h5>
    <pre><code class="prism language-sql"><span class="token comment">### 查看 validate_password 的相关MySQL系统变量</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="_validate_password___523">
     </a>
     安装卸载 validate_password 组件
    </h5>
    <p>
     安装 validate_password 组件
    </p>
    <pre><code class="prism language-sql"><span class="token comment">### 安装 validate_password 组件</span>
INSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     卸载 validate_password 组件
    </p>
    <pre><code class="prism language-sql"><span class="token comment">### 卸载 validate_password 组件</span>
UNINSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="_validate_password___538">
     </a>
     安装卸载 validate_password 插件
    </h5>
    <p>
     安装 validate_password 插件
    </p>
    <pre><code class="prism language-sql"><span class="token comment">### 安装 validate_password  插件</span>
INSTALL PLUGIN validate_password <span class="token keyword">SONAME</span> <span class="token string">'validate_password.so'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     卸载 validate_password 插件
    </p>
    <pre><code class="prism language-sql"><span class="token comment">### 卸载 validate_password  插件</span>
UNINSTALL PLUGIN validate_password<span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="_validate_password____554">
     </a>
     对比 validate_password 插件和组件的系统变量, “_“换成了”.”
    </h5>
    <p>
     在组件和插件都没安装的情况下, 安装组件,查看相关变量, 安装插件,查看相关变量, 卸载组件, 查看相关变量
    </p>
    <pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token comment">### 查看 validate_password 的相关MySQL系统变量</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.03</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token comment">### 安装 validate_password 组件</span>
mysql<span class="token operator">&gt;</span> INSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.08</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token comment">### 查看 validate_password 的相关MySQL系统变量</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> Variable_name                        <span class="token operator">|</span> <span class="token keyword">Value</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>check_user_name    <span class="token operator">|</span> <span class="token keyword">ON</span>     <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>dictionary_file    <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>length             <span class="token operator">|</span> <span class="token number">8</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>mixed_case_count   <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>number_count       <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>policy             <span class="token operator">|</span> MEDIUM <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>special_char_count <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token number">7</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token comment">### 安装 validate_password  插件</span>
mysql<span class="token operator">&gt;</span> INSTALL PLUGIN validate_password <span class="token keyword">SONAME</span> <span class="token string">'validate_password.so'</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.09</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token comment">### 查看 validate_password 的相关MySQL系统变量</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> Variable_name                        <span class="token operator">|</span> <span class="token keyword">Value</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>check_user_name    <span class="token operator">|</span> <span class="token keyword">ON</span>     <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>dictionary_file    <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>length             <span class="token operator">|</span> <span class="token number">8</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>mixed_case_count   <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>number_count       <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>policy             <span class="token operator">|</span> MEDIUM <span class="token operator">|</span>
<span class="token operator">|</span> validate_password<span class="token punctuation">.</span>special_char_count <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_check_user_name    <span class="token operator">|</span> <span class="token keyword">ON</span>     <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_dictionary_file    <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_length             <span class="token operator">|</span> <span class="token number">8</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_mixed_case_count   <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_number_count       <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_policy             <span class="token operator">|</span> MEDIUM <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_special_char_count <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token number">14</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token comment">### 卸载 validate_password 组件</span>
mysql<span class="token operator">&gt;</span> UNINSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.08</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token comment">### 查看 validate_password 的相关MySQL系统变量</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> Variable_name                        <span class="token operator">|</span> <span class="token keyword">Value</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token operator">|</span> validate_password_check_user_name    <span class="token operator">|</span> <span class="token keyword">ON</span>     <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_dictionary_file    <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_length             <span class="token operator">|</span> <span class="token number">8</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_mixed_case_count   <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_number_count       <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_policy             <span class="token operator">|</span> MEDIUM <span class="token operator">|</span>
<span class="token operator">|</span> validate_password_special_char_count <span class="token operator">|</span> <span class="token number">1</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+--------+</span>
<span class="token number">7</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       MySQL
       <code>
        validate_password
       </code>
       组件详解
      </strong>
     </font>
     <br/>
     <code>
      validate_password
     </code>
     是 MySQL 内置的密码策略插件（MySQL 8.0+ 中为组件），用于强制用户设置符合安全要求的密码。以下是其核心功能与配置方法：
    </p>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       1. 核心功能
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       密码复杂度检查
      </strong>
      ：强制密码包含数字、大小写字母、特殊字符。
     </li>
     <li>
      <strong>
       密码长度限制
      </strong>
      ：定义密码最小长度。
     </li>
     <li>
      <strong>
       密码修改限制
      </strong>
      ：限制新旧密码的相似性（如
      <code>
       changed_characters_percentage
      </code>
      ）。
     </li>
     <li>
      <strong>
       防止弱密码
      </strong>
      ：拒绝常见弱密码（如
      <code>
       123456
      </code>
      、
      <code>
       password
      </code>
      ）。
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       2. 安装与启用
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       MySQL 8.0+（组件形式）
      </strong>
     </font>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 安装组件</span>
INSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>

<span class="token comment">-- 验证是否启用</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span>component <span class="token keyword">WHERE</span> component_urn <span class="token operator">LIKE</span> <span class="token string">'%validate_password%'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <font color="#0f0" size="3">
      <strong>
       MySQL 5.7（插件形式）
      </strong>
     </font>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 安装插件</span>
INSTALL PLUGIN validate_password <span class="token keyword">SONAME</span> <span class="token string">'validate_password.so'</span><span class="token punctuation">;</span>

<span class="token comment">-- 验证是否启用</span>
<span class="token keyword">SHOW</span> PLUGINS <span class="token operator">LIKE</span> <span class="token string">'validate_password%'</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       3. 配置参数详解
      </strong>
     </font>
     <br/>
     通过以下系统变量控制密码策略：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        参数名
       </th>
       <th>
        默认值
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         validate_password.policy
        </code>
       </td>
       <td>
        <code>
         MEDIUM
        </code>
       </td>
       <td>
        密码策略等级：
        <code>
         LOW
        </code>
        /
        <code>
         MEDIUM
        </code>
        /
        <code>
         STRONG
        </code>
        。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         validate_password.length
        </code>
       </td>
       <td>
        <code>
         8
        </code>
       </td>
       <td>
        密码最小长度（可覆盖策略等级的长度要求）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         validate_password.mixed_case_count
        </code>
       </td>
       <td>
        <code>
         1
        </code>
       </td>
       <td>
        密码中至少包含的大写和小写字母总数（
        <code>
         MEDIUM
        </code>
        及以上策略生效）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         validate_password.number_count
        </code>
       </td>
       <td>
        <code>
         1
        </code>
       </td>
       <td>
        密码中至少包含的数字数量（
        <code>
         MEDIUM
        </code>
        及以上策略生效）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         validate_password.special_char_count
        </code>
       </td>
       <td>
        <code>
         1
        </code>
       </td>
       <td>
        密码中至少包含的特殊字符数量（
        <code>
         MEDIUM
        </code>
        及以上策略生效）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         validate_password.changed_characters_percentage
        </code>
       </td>
       <td>
        <code>
         0
        </code>
       </td>
       <td>
        mysql8.0.34新属性,修改密码时新旧密码字符差异的最小百分比（需手动启用）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         validate_password.dictionary_file
        </code>
       </td>
       <td>
        <code>
         空
        </code>
       </td>
       <td>
        自定义弱密码字典文件路径（
        <code>
         STRONG
        </code>
        策略生效）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         validate_password.check_user_name
        </code>
       </td>
       <td>
        <code>
         ON
        </code>
       </td>
       <td>
        禁止密码包含用户名。
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       4. 密码策略等级（
       <code>
        validate_password.policy
       </code>
       ）
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        等级
       </th>
       <th>
        规则
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         LOW
        </strong>
       </td>
       <td>
        仅检查密码长度。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         MEDIUM
        </strong>
       </td>
       <td>
        检查长度、大小写字母、数字、特殊字符。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         STRONG
        </strong>
       </td>
       <td>
        在
        <code>
         MEDIUM
        </code>
        基础上，额外检查是否包含字典文件中的弱密码。
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       5. 示例配置
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       场景：高安全环境
      </strong>
     </font>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 设置密码策略为 STRONG</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>policy <span class="token operator">=</span> STRONG<span class="token punctuation">;</span>

<span class="token comment">-- 密码最小长度 12</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>

<span class="token comment">-- 要求至少 2 个数字、2 个特殊字符</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>number_count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>special_char_count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">-- 启用新旧密码差异检查（至少 30% 不同）</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>changed_characters_percentage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token comment">-- 加载自定义弱密码字典</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>dictionary_file <span class="token operator">=</span> <span class="token string">'/path/to/dictionary.txt'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <font color="#0f0" size="3">
      <strong>
       验证密码强度
      </strong>
     </font>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 使用函数检查密码是否符合规则</span>
<span class="token keyword">SELECT</span> VALIDATE_PASSWORD_STRENGTH<span class="token punctuation">(</span><span class="token string">'MyP@ssw0rd!2024'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 返回值：100（最高强度）</span>
</code></pre>
    <hr/>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       MySQL
       <code>
        validate_password
       </code>
       组件属性详解
      </strong>
     </font>
    </p>
    <p>
     MySQL 的
     <code>
      validate_password
     </code>
     组件用于强制实施密码策略，确保用户设置的密码符合安全要求。以下是其核心属性及其配置说明：
    </p>
    <hr/>
    <p>
     <font color="#00f" size="4">
      **1.
      <code>
       validate_password.policy
      </code>
     </font>
     <br/>
     **
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：定义密码策略的强度等级。
     </li>
     <li>
      <strong>
       可选值
      </strong>
      ：
      <ul>
       <li>
        <code>
         LOW
        </code>
        ：仅检查密码长度。
       </li>
       <li>
        <code>
         MEDIUM
        </code>
        （默认）：检查长度、大小写字母、数字和特殊字符。
       </li>
       <li>
        <code>
         STRONG
        </code>
        ：在
        <code>
         MEDIUM
        </code>
        基础上，额外检查密码是否包含弱密码字典中的词汇。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>policy <span class="token operator">=</span> STRONG<span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       2.
       <code>
        validate_password.length
       </code>
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：设置密码的最小长度。
     </li>
     <li>
      <strong>
       默认值
      </strong>
      ：
      <code>
       8
      </code>
      。
     </li>
     <li>
      <strong>
       规则
      </strong>
      ：
      <ul>
       <li>
        若显式设置此参数，会覆盖策略等级中的默认长度（如
        <code>
         STRONG
        </code>
        默认要求更长密码）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>  <span class="token comment">-- 强制密码至少12位</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       3.
       <code>
        validate_password.mixed_case_count
       </code>
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：密码中至少包含的大写和小写字母总数。
     </li>
     <li>
      <strong>
       默认值
      </strong>
      ：
      <code>
       1
      </code>
      （如
      <code>
       Aa
      </code>
      或
      <code>
       aB
      </code>
      ）。
     </li>
     <li>
      <strong>
       生效条件
      </strong>
      ：策略等级为
      <code>
       MEDIUM
      </code>
      或
      <code>
       STRONG
      </code>
      。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>mixed_case_count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">-- 要求至少2个大小写混合字符</span>
</code></pre>
      <ul>
       <li>
        有效密码：
        <code>
         Abc123!
        </code>
        （A 和 b 视为混合）。
       </li>
       <li>
        无效密码：
        <code>
         ABC123!
        </code>
        （全大写，无小写）。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       4.
       <code>
        validate_password.number_count
       </code>
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：密码中至少包含的数字数量。
     </li>
     <li>
      <strong>
       默认值
      </strong>
      ：
      <code>
       1
      </code>
      。
     </li>
     <li>
      <strong>
       生效条件
      </strong>
      ：策略等级为
      <code>
       MEDIUM
      </code>
      或
      <code>
       STRONG
      </code>
      。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>number_count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">-- 要求至少2个数字</span>
</code></pre>
      <ul>
       <li>
        有效密码：
        <code>
         Pass12word!
        </code>
        （包含
        <code>
         1
        </code>
        和
        <code>
         2
        </code>
        ）。
       </li>
       <li>
        无效密码：
        <code>
         Passw0rd!
        </code>
        （仅1个数字）。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       5.
       <code>
        validate_password.special_char_count
       </code>
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：密码中至少包含的特殊字符数量（如
      <code>
       !@#$%^&amp;*
      </code>
      ）。
     </li>
     <li>
      <strong>
       默认值
      </strong>
      ：
      <code>
       1
      </code>
      。
     </li>
     <li>
      <strong>
       生效条件
      </strong>
      ：策略等级为
      <code>
       MEDIUM
      </code>
      或
      <code>
       STRONG
      </code>
      。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>special_char_count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">-- 要求至少2个特殊字符</span>
</code></pre>
      <ul>
       <li>
        有效密码：
        <code>
         P@ssw0rd!
        </code>
        （
        <code>
         @
        </code>
        和
        <code>
         !
        </code>
        ）。
       </li>
       <li>
        无效密码：
        <code>
         Passw0rd#
        </code>
        （仅1个特殊字符）。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       6.
       <code>
        validate_password.changed_characters_percentage
       </code>
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：修改密码时，新旧密码必须不同的字符比例（基于旧密码长度）。
     </li>
     <li>
      <strong>
       默认值
      </strong>
      ：
      <code>
       0
      </code>
      （未启用）。
     </li>
     <li>
      <strong>
       配置
      </strong>
      ：
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>changed_characters_percentage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>  <span class="token comment">-- 至少30%不同</span>
</code></pre>
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <ul>
       <li>
        旧密码：
        <code>
         Abcd1234
        </code>
        （8字符）。
       </li>
       <li>
        新密码：
        <code>
         Xbcd5678
        </code>
        （4个不同字符，占比
        <code>
         4/8=50%
        </code>
        ，通过）。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       7.
       <code>
        validate_password.dictionary_file
       </code>
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：指定自定义弱密码字典文件路径（仅
      <code>
       STRONG
      </code>
      策略生效）。
     </li>
     <li>
      <strong>
       格式
      </strong>
      ：文本文件，每行一个弱密码。
     </li>
     <li>
      <strong>
       配置
      </strong>
      ：
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>dictionary_file <span class="token operator">=</span> <span class="token string">'/path/to/dictionary.txt'</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：
      <ul>
       <li>
        字典文件包含
        <code>
         password
        </code>
        ，则密码
        <code>
         Password123!
        </code>
        会被拒绝。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       8.
       <code>
        validate_password.check_user_name
       </code>
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       功能
      </strong>
      ：禁止密码与用户名相同（默认
      <code>
       ON
      </code>
      ）。
     </li>
     <li>
      <strong>
       示例
      </strong>
      ：用户名为
      <code>
       admin
      </code>
      ，则密码
      <code>
       Admin123!
      </code>
      会被拒绝。
     </li>
    </ul>
    <hr/>
    <p>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
    </p>
    <hr/>
    <hr/>
    <hr/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <p>
    </p>
    <h3>
     <a id="MySql84_828">
     </a>
     MySql8.4介绍
    </h3>
    <p>
     以下是
     <strong>
      MySQL 8.4
     </strong>
     的详细介绍，重点涵盖其核心特性、改进方向及适用场景：
    </p>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       1. 版本定位与支持周期
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        LTS（长期支持版本）
       </strong>
       ：
       <br/>
       MySQL 8.4 是官方指定的
       <strong>
        长期支持版本
       </strong>
       ，支持周期至
       <strong>
        2026 年
       </strong>
       ，适合生产环境使用。
      </p>
      <ul>
       <li>
        <strong>
         支持策略
        </strong>
        ：仅 LTS 版本（如 8.4、9.7）提供长期维护，非 LTS 版本（如 8.0）仅短期支持。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        兼容性与升级限制
       </strong>
       ：
      </p>
      <ul>
       <li>
        不支持从 MySQL 5.7 直接升级到 8.4，需先迁移至 8.0。
       </li>
       <li>
        允许通过复制（Replication）跨 LTS 版本同步数据（如 8.4 → 9.7），但禁止降级（如 9.7 → 8.4）。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       2. 性能优化与存储引擎改进
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       InnoDB 增强
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        参数默认值调整
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         innodb_io_capacity
        </code>
        默认值从
        <strong>
         200
        </strong>
        提升至
        <strong>
         10,000
        </strong>
        ，适配 SSD 高性能存储。
       </li>
       <li>
        <code>
         innodb_log_buffer_size
        </code>
        从 32MB 翻倍至
        <strong>
         64MB
        </strong>
        ，提升大事务处理能力。
       </li>
       <li>
        禁用
        <code>
         innodb_adaptive_hash_index
        </code>
        和
        <code>
         innodb_change_buffering
        </code>
        ，避免混合读写负载下的性能抖动。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        内存管理优化
       </strong>
       ：
      </p>
      <ul>
       <li>
        默认启用
        <code>
         innodb_numa_interleave
        </code>
        ，优化 NUMA 架构服务器的内存分配。
       </li>
       <li>
        简化 Doublewrite 文件结构，全局仅保留 2 个文件，降低管理复杂度。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       3. 安全与权限管理
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       认证与插件变更
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        弃用旧认证方式
       </strong>
       ：
      </p>
      <ul>
       <li>
        默认禁用
        <code>
         mysql_native_password
        </code>
        插件，推荐使用
        <code>
         caching_sha2_password
        </code>
        。
       </li>
       <li>
        需手动启用旧插件（配置
        <code>
         --mysql-native-password=ON
        </code>
        ）。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        新增权限
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         FLUSH_PRIVILEGES
        </code>
        需独立权限（不再依赖
        <code>
         RELOAD
        </code>
        ）。
       </li>
       <li>
        <code>
         OPTIMIZE_LOCAL_TABLE
        </code>
        权限支持本地表优化操作。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       4. 复制与高可用性
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       GTID 与复制增强
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       GTID 标签化
      </strong>
      ：支持为事务附加自定义标签（如
      <code>
       /*!80017 'audit_tag:payment' */
      </code>
      ），便于追踪事务来源。
     </li>
     <li>
      <strong>
       并行复制优化
      </strong>
      ：在
      <code>
       MTS
      </code>
      （多线程复制）模式下支持
      <code>
       SQL_AFTER_GTIDS
      </code>
      ，提升复制效率。
     </li>
    </ul>
    <p>
     <font color="#0f0" size="3">
      <strong>
       克隆与集群改进
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       克隆插件灵活性
      </strong>
      ：允许同大版本内克隆（如 8.4.0 → 8.4.14），简化数据迁移。
     </li>
     <li>
      <strong>
       Group Replication (MGR)
      </strong>
      ：
      <ul>
       <li>
        默认一致性级别调整为
        <code>
         BEFORE_ON_PRIMARY_FAILOVER
        </code>
        ，确保故障切换时数据强一致。
       </li>
       <li>
        支持节点运行不同小版本（如 8.4.0 与 8.4.2 共存）。
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       5. 运维与监控
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       内存与临时表管理
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       临时表默认存储
      </strong>
      ：使用 InnoDB 引擎（
      <code>
       temptable_use_mmap=OFF
      </code>
      ），减少对
      <code>
       tmpdir
      </code>
      的依赖。
     </li>
     <li>
      <strong>
       动态内存分配
      </strong>
      ：
      <code>
       temptable_max_ram
      </code>
      根据系统内存动态调整（默认 3% 内存，上限 4GB）。
     </li>
    </ul>
    <p>
     <font color="#0f0" size="3">
      <strong>
       监控与诊断
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       自动直方图更新
      </strong>
      ：
      <code>
       ANALYZE TABLE
      </code>
      自动更新列的统计直方图。
     </li>
     <li>
      <strong>
       长事务回滚进度
      </strong>
      ：记录 InnoDB 事务回滚进度，避免运维盲区。
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       6. 安装与配置建议
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       平台差异
      </strong>
      ：
      <ul>
       <li>
        <strong>
         Linux
        </strong>
        ：默认
        <code>
         innodb_flush_method=O_DIRECT
        </code>
        （绕过文件系统缓存）。
       </li>
       <li>
        <strong>
         Windows/macOS
        </strong>
        ：仍使用
        <code>
         fsync
        </code>
        作为默认刷盘方式。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       兼容性配置
      </strong>
      ：使用
      <code>
       mysqldump --output-as-version
      </code>
      导出旧版本兼容数据。
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       升级注意事项
      </strong>
     </font>
    </p>
    <ol>
     <li>
      <strong>
       性能验证
      </strong>
      ：
      <ul>
       <li>
        测试
        <code>
         innodb_adaptive_hash_index
        </code>
        禁用后的负载性能。
       </li>
       <li>
        验证 SSD 环境下
        <code>
         innodb_io_capacity=10000
        </code>
        的效果。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       安全审计
      </strong>
      ：
      <ul>
       <li>
        检查是否依赖
        <code>
         mysql_native_password
        </code>
        ，及时迁移认证方式。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       版本兼容性
      </strong>
      ：
      <ul>
       <li>
        使用
        <code>
         mysql-shell
        </code>
        工具检查升级兼容性（
        <code>
         util.checkForServerUpgrade()
        </code>
        ）。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       总结
      </strong>
     </font>
     <br/>
     MySQL 8.4 作为 LTS 版本，聚焦
     <strong>
      安全性
     </strong>
     、
     <strong>
      性能调优
     </strong>
     和
     <strong>
      运维简化
     </strong>
     ，适合需要长期稳定支持的企业级场景。升级前需重点验证旧版本兼容性，并结合监控工具观察新参数对业务负载的影响。
    </p>
    <p>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
    </p>
    <hr/>
    <hr/>
    <hr/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <p>
    </p>
    <h3>
     <a id="Mysql84__Mysql80__928">
     </a>
     Mysql8.4 与 Mysql8.0 对比
    </h3>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       MySQL 8.4 与 MySQL 8.0 对比分析
      </strong>
     </font>
     <br/>
     MySQL 8.4 是 MySQL 8.0 系列的
     <strong>
      长期支持版本（LTS）
     </strong>
     ，继承了 8.0 的核心功能并引入多项改进。以下是关键差异的详细对比：
    </p>
    <hr/>
    <p>
     <font color="#0f0" size="3">
      <strong>
       1. 版本支持与生命周期
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.0
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.4
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         支持类型
        </strong>
       </td>
       <td>
        常规版本（非 LTS）
       </td>
       <td>
        长期支持版本（LTS）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         支持周期
        </strong>
       </td>
       <td>
        官方支持已逐步结束
       </td>
       <td>
        支持至
        <strong>
         2026 年
        </strong>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         升级兼容性
        </strong>
       </td>
       <td>
        支持从 5.7 升级
       </td>
       <td>
        不支持直接从 5.7 升级
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         版本策略
        </strong>
       </td>
       <td>
        每季度发布功能更新
       </td>
       <td>
        仅修复关键漏洞和性能问题
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#0f0" size="3">
      <strong>
       2. 性能优化
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.0
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.4
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         InnoDB 默认参数
        </strong>
       </td>
       <td>
        <code>
         innodb_io_capacity=200
        </code>
       </td>
       <td>
        <code>
         innodb_io_capacity=10000
        </code>
        （适配 SSD）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         NUMA 支持
        </strong>
       </td>
       <td>
        需手动配置
        <code>
         innodb_numa_interleave
        </code>
       </td>
       <td>
        默认启用
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Doublewrite 文件
        </strong>
       </td>
       <td>
        每个表空间独立文件
       </td>
       <td>
        全局仅保留 2 个文件
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         临时表管理
        </strong>
       </td>
       <td>
        默认使用内存映射文件（MMAP）
       </td>
       <td>
        默认使用 InnoDB 磁盘存储
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#0f0" size="3">
      <strong>
       3. 安全增强
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.0
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.4
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         默认认证插件
        </strong>
       </td>
       <td>
        <code>
         caching_sha2_password
        </code>
       </td>
       <td>
        <code>
         caching_sha2_password
        </code>
        （禁用
        <code>
         mysql_native_password
        </code>
        ）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         权限管理
        </strong>
       </td>
       <td>
        <code>
         RELOAD
        </code>
        权限控制
        <code>
         FLUSH
        </code>
       </td>
       <td>
        新增独立权限
        <code>
         FLUSH_PRIVILEGES
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         密码策略
        </strong>
       </td>
       <td>
        支持
        <code>
         validate_password
        </code>
       </td>
       <td>
        默认优化策略（如
        <code>
         changed_characters_percentage
        </code>
        ）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         SSL/TLS
        </strong>
       </td>
       <td>
        支持 TLS 1.2
       </td>
       <td>
        默认禁用 TLS 1.0/1.1
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#0f0" size="3">
      <strong>
       4. 复制与高可用性
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.0
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.4
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         Group Replication
        </strong>
       </td>
       <td>
        默认一致性级别
        <code>
         EVENTUAL
        </code>
       </td>
       <td>
        默认
        <code>
         BEFORE_ON_PRIMARY_FAILOVER
        </code>
        （强一致）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         GTID 管理
        </strong>
       </td>
       <td>
        支持基础 GTID
       </td>
       <td>
        支持 GTID 标签化（标记事务来源）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         克隆插件
        </strong>
       </td>
       <td>
        允许跨大版本克隆
       </td>
       <td>
        仅允许同大版本克隆（如 8.4.x）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#0f0" size="3">
      <strong>
       5. 运维与监控
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.0
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.4
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         临时表内存分配
        </strong>
       </td>
       <td>
        固定
        <code>
         temptable_max_ram=1GB
        </code>
       </td>
       <td>
        动态分配（3% 系统内存，上限 4GB）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         直方图统计
        </strong>
       </td>
       <td>
        需手动更新
       </td>
       <td>
        <code>
         ANALYZE TABLE
        </code>
        自动更新
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         长事务回滚监控
        </strong>
       </td>
       <td>
        无进度提示
       </td>
       <td>
        记录回滚进度日志
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#0f0" size="3">
      <strong>
       6. 安装与平台适配
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.0
        </strong>
       </th>
       <th>
        <strong>
         MySQL 8.4
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         Linux 刷盘模式
        </strong>
       </td>
       <td>
        默认
        <code>
         fsync
        </code>
       </td>
       <td>
        默认
        <code>
         O_DIRECT
        </code>
        （绕过缓存）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Windows/macOS 兼容性
        </strong>
       </td>
       <td>
        支持基础功能
       </td>
       <td>
        优化 NUMA 和内存管理
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       升级注意事项
      </strong>
     </font>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        性能影响
       </strong>
       ：
      </p>
      <ul>
       <li>
        8.4 的
        <code>
         innodb_io_capacity=10000
        </code>
        可能对机械硬盘负载过高，需根据存储类型调整。
       </li>
       <li>
        禁用
        <code>
         innodb_adaptive_hash_index
        </code>
        可能影响高频查询性能，需测试验证。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        安全兼容性
       </strong>
       ：
      </p>
      <ul>
       <li>
        若应用依赖
        <code>
         mysql_native_password
        </code>
        ，需在 8.4 中手动启用（配置
        <code>
         --mysql-native-password=ON
        </code>
        ）。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        复制集群升级
       </strong>
       ：
      </p>
      <ul>
       <li>
        Group Replication 集群需统一版本（8.4 允许混合小版本，如 8.4.0 和 8.4.2）。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        配置迁移
       </strong>
       ：
      </p>
      <ul>
       <li>
        使用
        <code>
         mysqldump --output-as-version=8.0
        </code>
        导出旧版本兼容数据。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       总结
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       选择 MySQL 8.4
      </strong>
      ：
      <br/>
      适合需要
      <strong>
       长期稳定支持
      </strong>
      的生产环境，尤其是对安全性、复制一致性和现代硬件适配要求高的场景。
     </li>
     <li>
      <strong>
       保留 MySQL 8.0
      </strong>
      ：
      <br/>
      适用于短期项目或已深度定制且不愿立即调整配置的旧系统。
     </li>
    </ul>
    <p>
     升级前务必进行
     <strong>
      性能压测
     </strong>
     和
     <strong>
      安全审计
     </strong>
     ，并参考官方升级指南（
     <a href="https://dev.mysql.com/doc/relnotes/mysql/8.4/en/" rel="nofollow">
      MySQL 8.4 Release Notes
     </a>
     ）。
    </p>
    <p>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
    </p>
    <hr/>
    <hr/>
    <hr/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <p>
    </p>
    <h3>
     <a id="validate_passwordchanged_characters_percentage_1035">
     </a>
     validate_password.changed_characters_percentage
    </h3>
    <p>
     从
     <strong>
      MySQL 8.0.34
     </strong>
     版本开始引入的。
     <br/>
     <code>
      validate_password.changed_characters_percentage
     </code>
     是 MySQL 中 validate_password 插件的一个参数，用于控制密码强度策略，不过该参数是从
     <strong>
      MySQL 8.0.34
     </strong>
     版本开始引入的。
     <br/>
     <a href="https://dev.mysql.com/doc/refman/8.0/en/validate-password-options-variables.html" rel="nofollow">
      可参考官文 8.4.3.2章节 密码验证选项变量 Password Validation Options and Variables
     </a>
    </p>
    <p>
     <font color="#00f" size="4">
      <strong>
       1. 参数功能
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       核心目的
      </strong>
      ：
      <br/>
      强制要求用户修改密码时，新密码必须与旧密码在字符层面有
      <strong>
       最低比例的不同
      </strong>
      ，防止仅做微小改动（如末尾加数字、大小写替换）。
     </li>
     <li>
      <strong>
       适用场景
      </strong>
      ：
      <br/>
      适用于高安全要求的系统（如金融、政务），防止密码重复利用或简单迭代。
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       2. 规则细节
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       计算方式
      </strong>
     </font>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        字符对比范围
       </strong>
       ：
      </p>
      <ul>
       <li>
        仅对比新旧密码的
        <strong>
         重叠部分
        </strong>
        （取旧密码的长度为基准）。
       </li>
       <li>
        若新密码比旧密码长，超出的字符不参与对比；若更短，仅对比到新密码长度为止。
       </li>
       <li>
        <strong>
         示例
        </strong>
        ：
        <ul>
         <li>
          旧密码：
          <code>
           Abcd1234
          </code>
          （长度8）
         </li>
         <li>
          新密码：
          <code>
           Xbcd5678
          </code>
          （长度8）
         </li>
         <li>
          对比所有8个字符，差异为第1位（
          <code>
           A→X
          </code>
          ）、第5-8位（
          <code>
           1→5
          </code>
          ,
          <code>
           2→6
          </code>
          ,
          <code>
           3→7
          </code>
          ,
          <code>
           4→8
          </code>
          ），总计
          <strong>
           4个不同字符
          </strong>
          ，占比
          <code>
           4/8 = 50%
          </code>
          。
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        公式
       </strong>
       ：
       <br/>
       [
       <br/>
       \text{修改比例} = \frac{\text{新旧密码不同字符数}}{\text{旧密码长度}} \times 100%
       <br/>
       ]
      </p>
     </li>
     <li>
      <p>
       <strong>
        阈值要求
       </strong>
       ：
      </p>
      <ul>
       <li>
        若计算结果
        <strong>
         ≥
        </strong>
        设定阈值（如30%），允许修改；否则拒绝。
       </li>
       <li>
        默认值：MySQL 8.4 中
        <strong>
         默认未启用此参数
        </strong>
        ，需手动配置。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       3. 配置方法
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       启用与设置
      </strong>
     </font>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        激活插件
       </strong>
       ：
       <br/>
       确保
       <code>
        validate_password
       </code>
       组件已启用：
      </p>
      <pre><code class="prism language-sql">INSTALL COMPONENT <span class="token string">'file://component_validate_password'</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        设置阈值
       </strong>
       ：
      </p>
      <pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> validate_password<span class="token punctuation">.</span>changed_characters_percentage <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">-- 要求至少30%的字符不同</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        持久化配置
       </strong>
       （修改配置文件
       <code>
        my.cnf
       </code>
       ）：
      </p>
      <pre><code class="prism language-ini">[mysqld]
validate_password.changed_characters_percentage = 30
</code></pre>
     </li>
    </ol>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       4. 示例验证
      </strong>
     </font>
    </p>
    <table>
     <thead>
      <tr>
       <th>
        旧密码
       </th>
       <th>
        新密码
       </th>
       <th>
        对比长度
       </th>
       <th>
        不同字符数
       </th>
       <th>
        修改比例
       </th>
       <th>
        是否通过（阈值30%）
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         P@ssw0rd
        </code>
       </td>
       <td>
        <code>
         P@ssw1rd
        </code>
       </td>
       <td>
        8
       </td>
       <td>
        1
       </td>
       <td>
        12.5%
       </td>
       <td>
        ❌
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Hello2023
        </code>
       </td>
       <td>
        <code>
         H3llo!2024
        </code>
       </td>
       <td>
        9
       </td>
       <td>
        3（
        <code>
         e→3
        </code>
        ,
        <code>
         !
        </code>
        ,
        <code>
         4
        </code>
        ）
       </td>
       <td>
        33.3%
       </td>
       <td>
        ✔️
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Qwer1234
        </code>
       </td>
       <td>
        <code>
         Qw#r5678
        </code>
       </td>
       <td>
        8
       </td>
       <td>
        4（
        <code>
         e→#
        </code>
        ,
        <code>
         1→5
        </code>
        ,
        <code>
         2→6
        </code>
        ,
        <code>
         3→7
        </code>
        ,
        <code>
         4→8
        </code>
        ）
       </td>
       <td>
        50%
       </td>
       <td>
        ✔️
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Short1
        </code>
       </td>
       <td>
        <code>
         Sh0rt1!
        </code>
       </td>
       <td>
        6
       </td>
       <td>
        2（
        <code>
         o→0
        </code>
        , 新增
        <code>
         !
        </code>
        不计入对比）
       </td>
       <td>
        33.3%
       </td>
       <td>
        ✔️
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       5. 注意事项
      </strong>
     </font>
     <br/>
     <font color="#0f0" size="3">
      <strong>
       边界情况
      </strong>
     </font>
    </p>
    <ul>
     <li>
      <strong>
       旧密码为空
      </strong>
      ：若用户首次设置密码（无旧密码），此策略不生效。
     </li>
     <li>
      <strong>
       密码长度差异
      </strong>
      ：新增字符不参与计算，仅对比旧密码长度内的部分。
      <pre><code class="prism language-sql"><span class="token comment">-- 旧密码：'Secur3'（6字符）</span>
<span class="token comment">-- 新密码：'S3cur3!X'（7字符，仅对比前6位）</span>
<span class="token comment">-- 不同字符数：1（'e'→'3'），占比 16.6%</span>
</code></pre>
     </li>
    </ul>
    <p>
     <font color="#0f0" size="3">
      <strong>
       兼容性
      </strong>
     </font>
    </p>
    <ul>
     <li>
      需与
      <code>
       validate_password
      </code>
      其他策略协同使用（如最小长度、特殊字符要求）。
     </li>
     <li>
      若启用
      <code>
       changed_characters_percentage
      </code>
      ，建议同时设置
      <code>
       validate_password.length
      </code>
      防止用户通过缩短密码绕过规则。
     </li>
    </ul>
    <hr/>
    <p>
     <font color="#00f" size="4">
      <strong>
       6. 安全建议
      </strong>
     </font>
    </p>
    <ol>
     <li>
      <strong>
       合理阈值
      </strong>
      ：
      <ul>
       <li>
        推荐值：
        <strong>
         30%~50%
        </strong>
        ，过低易被绕过，过高可能导致用户频繁忘记密码。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       组合策略
      </strong>
      ：
      <ul>
       <li>
        启用复杂度检查（
        <code>
         validate_password.policy=STRONG
        </code>
        ）。
       </li>
       <li>
        设置密码最短有效期（
        <code>
         password_reuse_interval
        </code>
        ）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       监控日志
      </strong>
      ：
      <ul>
       <li>
        审计失败修改事件（
        <code>
         error.log
        </code>
        中记录密码策略违规）。
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <p>
     通过配置
     <code>
      validate_password.changed_characters_percentage
     </code>
     ，可显著提升密码更新的安全性，减少因简单修改导致的账户风险。
    </p>
    <p>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
     <br/>
    </p>
    <hr/>
    <hr/>
    <hr/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <p>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f6b666570697a612f:61727469636c652f64657461696c732f313436313533363638" class_="artid" style="display:none">
 </p>
</div>


