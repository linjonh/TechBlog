---
arturl_encode: "68747470733a:2f2f626c6f672e6373646e2e6e65742f63616f70656e673236:2f61727469636c652f64657461696c732f3532313836383136"
layout: post
title: "架构师之路-服务器集群搭建管理与快速部署"
date: 2025-01-13 15:00:57 +08:00
description: "今天的目标是有4台Linux的服务器架设一个小规模的集群  1、我们可以随时的扩展我们的服务器集群，"
keywords: "组建服务器集群"
categories: ['Linux']
tags: ['集群', '管理', '架构师', '服务器']
artid: "52186816"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=52186816
    alt: "架构师之路-服务器集群搭建管理与快速部署"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=52186816
featuredImagePreview: https://bing.ee123.net/img/rand?artid=52186816
---

# 架构师之路--服务器集群搭建、管理、与快速部署

#### 今天的目标是有4台Linux的服务器架设一个小规模的集群

> 1、我们可以随时的扩展我们的服务器集群，就像牲口干活一样，一匹马拉不动，可以由多匹马来拉
>
> 2、在Linux中有一个hosts 文件 ，每一台机器都会有IP地址，搭建集群的第一个工作，得知道每台机器的名字，也就是给每台机器起名字
>
> 3、在每台机器，把这台机器的主机名改掉在etc下有一个hostsname 修改服务器名字
>
> 现在把4个主机名都修改之后，现在就可以识别自己登陆的哪一台
>
> 第二，我们现在需要每台服务器之间可以认识，把每台机器的hosts配置一下
>
> 使用ipconfig 命令查询每一台机器的IP地址

### 一、修改每台机器名称

> 现在把每台机器的hosts文件来修改一下
>   
> 修改路径
>   
> 1、>sudo su 切换到管理员权限，只有管理员权限才可以更改主机名
>   
> 2、修改文件路径 ubuntu 文件路径 /etc/hostname >vim /etc/hostname
>   
> 3、修改hosts文件 /etc/hosts/
>   
> 按（图1）步骤 编辑修改hosts文件下的机器名称改成当前机器名称，IP地址 改成127.0.0.1
>   
> ![这里写图片描述](https://img-blog.csdn.net/20160812141730118)
> （图1）

![这里写图片描述](https://img-blog.csdn.net/20160812141834026)
（图2）

4台机器依法都按照（图2）步骤操作,配好之后四台机器都每个测试ping通,4个服务器间互相通了后，接下来我们测试远程复制文件

> 127.0.0.1 localhost
>   
> 127.0.0.1 MS
>   
> 192.168.38.129 MS
>   
> 192.168.38.130 DB1
>   
> 192.168.38.131 T1
>   
> 192.168.38.132 P1
>
> 4、修改了之后 我们ping T1 可以PING通的话，说明现在这台机器认识T1这台机器了
>   
> 5、其他的4台都可以实验，也可以ping自己，现在只修改了一个，剩下的把每台机器都同上依次修改，让他们相互之间都可以认识(ping
>   
> 通)

scp 本地用户名 @IP 地址 : 文件名 1 远程用户名 @IP 地址 : 文件名 2

> 6、当我们所有的主机相互都认识之后，现在进到第一台机器中，（MS） 我们在MS机器上使用scp命令可以把新建的文件aa 传到T1 中 就可以scp T1 然后输入密码就可以传送了
>
> 7、现在我们在T1 中去查看aa文件就已经传输过来了

### 二、关闭其它服务器密码登录

先创密钥，确保密钥能登录，在关闭密码登录，先关闭密码登录会连不上。

> 8、产品服务器的IP是直接暴露在外的，不安全，为了安全就要把密码登陆关闭掉（T1 P1 DB1）但是我们关闭密码登陆了，我们又是如何登陆呢？我们如何管理呢？我们自己必须可以登陆啊，openssh(我们现在使用的是XSHEEL)我们就必须使用公钥和私钥来登陆
>
> 9、我们现在必须在外网上只能MS登陆，T1 P1 DB1 只能在内网登陆，我们可以把T1 P1 DB 1 上只有公钥 私钥只在MS上，只要登陆了MS 就可以登陆其他的服务器，进行管理了(通过ssh隧道)
>
> 10、ssh –keygen –t rsa 创建秘钥
>   
> ![这里写图片描述](https://img-blog.csdn.net/20160812161511701)

![这里写图片描述](https://img-blog.csdn.net/20160812161522698)

> 11、我们看到 .ssh 的隐藏文件 我们cd进入.ssh 执行命令
>   
> .ssh$ ls 会出现id\_rsa 还有一个id\_rsa pub
>   
> ![这里写图片描述](https://img-blog.csdn.net/20160812161913814)
>   
> 12、我们使用scp 命令把私钥传输给 T1 P1 DB1
>   
> ![这里写图片描述](https://img-blog.csdn.net/20160812161810421)
>   
> 在其他服务器中依次都要创建公钥私钥
>
> 13、我们把id \_rsa.pub 这个文件>> 重定向到 authorized\_keys
>   
> 然后执行cat .ssh 就可以看到秘钥了
>
> 14、然后把服务器重新启动，登陆到MS服务器中
>   
> 通过ssh 可以登陆到其他服务器中(如果传输文件的话密码都不用输入了哦)
>   
> ssh caoyuan@DB1
>   
> 15、接着把其他服务器的密码登陆关闭(T1 P1 DB1),在etc 下面的 sshd\_config 文件 我们去配置这个文件 找到一个52行的yes 该为 no 然后重启 使用远程登陆，然后连接不上我们就成功了
>   
> cd /etc/ssh/
>   
> ![这里写图片描述](https://img-blog.csdn.net/20160812165259811)

![这里写图片描述](https://img-blog.csdn.net/20160812165406452)

> 16、如果MS服务器挂了的话，就没有办法登陆其他服务器了，可以把MS做一个备份，也可以在其他服务器上做防火墙，让其他服务器只能局域网访问，这样的话，我们一个基本的环境OK了。