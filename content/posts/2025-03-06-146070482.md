---
layout: post
title: "å‰ç«¯å®ç°ç‰ˆæœ¬æ›´æ–°è‡ªåŠ¨æ£€æµ‹"
date: 2025-03-06 17:01:11 +0800
description: "æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ç°ä»£Webåº”ç”¨ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•å®ç°å‰ç«¯ç‰ˆæœ¬æ›´æ–°çš„è‡ªåŠ¨æ£€æµ‹å’Œæç¤ºç”¨æˆ·åˆ·æ–°çš„åŠŸèƒ½ã€‚é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…ç”¨æˆ·å› ä½¿ç”¨æ—§ç‰ˆä»£ç è€Œé‡åˆ°çš„é—®é¢˜ï¼Œç¡®ä¿åŠŸèƒ½ä¸€è‡´æ€§ã€å‡å°‘æ¥å£å…¼å®¹æ€§é—®é¢˜å¹¶æé«˜åº”ç”¨çš„å¯é æ€§ã€‚"
keywords: "å‰ç«¯å®ç°ç‰ˆæœ¬æ›´æ–°è‡ªåŠ¨æ£€æµ‹âœ…"
categories: ['å‰ç«¯', 'Vue', 'Javascript']
tags: ['å‰ç«¯', 'Vue', 'Javascript']
artid: "146070482"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146070482
    alt: "å‰ç«¯å®ç°ç‰ˆæœ¬æ›´æ–°è‡ªåŠ¨æ£€æµ‹"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146070482
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146070482
cover: https://bing.ee123.net/img/rand?artid=146070482
image: https://bing.ee123.net/img/rand?artid=146070482
img: https://bing.ee123.net/img/rand?artid=146070482
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     å‰ç«¯å®ç°ç‰ˆæœ¬æ›´æ–°è‡ªåŠ¨æ£€æµ‹âœ…
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/0d39c3a024a643c2a5bbef84b47b8b23.gif#pic_center"/>
    </p>
    <blockquote>
     <p>
      ğŸ¤– ä½œè€…ç®€ä»‹ï¼šæ°´ç…®ç™½èœç‹ï¼Œä¸€ä½èµ„æ·±å‰ç«¯åŠé€€å¸ˆ ğŸ‘»
      <br/>
      ğŸ‘€ æ–‡ç« ä¸“æ ï¼š
      <a href="https://blog.csdn.net/weixin_45511682/category_12694415.html">
       å‰ç«¯ä¸“æ 
      </a>
      ï¼Œè®°å½•ä¸€ä¸‹å¹³æ—¶åœ¨åšå®¢å†™ä½œä¸­ï¼Œæ€»ç»“å‡ºçš„ä¸€äº›å¼€å‘æŠ€å·§å’ŒçŸ¥è¯†å½’çº³æ€»ç»“âœã€‚
      <br/>
      æ„Ÿè°¢æ”¯æŒğŸ’•ğŸ’•ğŸ’•
     </p>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_7">
     </a>
     ä¸€ã€èƒŒæ™¯
    </h2>
    <p>
     åœ¨ç°ä»£Webåº”ç”¨ä¸­ï¼Œéƒ¨ç½²å‰ç«¯ç‰ˆæœ¬æ›´æ–°ååŠæ—¶æé†’ç”¨æˆ·è¿›è¡Œé¡µé¢åˆ·æ–°æ˜¯å¿…è¦çš„ã€‚ç”±äºå•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰çš„è·¯ç”±ç‰¹æ€§å’Œæµè§ˆå™¨ç¼“å­˜æœºåˆ¶ï¼Œç”¨æˆ·æµè§ˆå™¨å¯èƒ½ä¸ä¼šè‡ªåŠ¨åŠ è½½æœ€æ–°çš„ä»£ç èµ„æºã€‚è¿™ä¼šå¯¼è‡´ç”¨æˆ·æœªèƒ½ä½“éªŒåˆ°æœ€æ–°çš„åŠŸèƒ½å˜åŒ–ï¼Œç”šè‡³é‡Bugæˆ–ä¸ä¸€è‡´çš„è¡Œä¸ºã€‚é€šè¿‡å®ç°ä¸€ç§è‡ªåŠ¨æ£€æµ‹æœºåˆ¶æ¥æé†’ç”¨æˆ·æœ‰æ–°çš„ç‰ˆæœ¬ï¼Œå¹¶å¼•å¯¼å…¶åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥æœ‰æ•ˆåœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¿è¯æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½åŠæ—¶ä½¿ç”¨æœ€æ–°ç‰ˆåº”ç”¨çš„åŠŸèƒ½ã€‚
    </p>
    <h2>
     <a id="_10">
     </a>
     äºŒã€å®ç°åŸç†
    </h2>
    <h3>
     <a id="21__11">
     </a>
     2.1 é€»è¾‘
    </h3>
    <div class="mermaid">
     <svg class="mermaid-svg" height="330.359375" id="mermaid-svg-8VF9tFbcTztfdV5P" viewbox="0 -0.000003814697265625 1881.9312744140625 330.359375" width="1881.9312744140625" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-8VF9tFbcTztfdV5P {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-8VF9tFbcTztfdV5P .error-icon{fill:#552222;}#mermaid-svg-8VF9tFbcTztfdV5P .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-8VF9tFbcTztfdV5P .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-8VF9tFbcTztfdV5P .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-8VF9tFbcTztfdV5P .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-8VF9tFbcTztfdV5P .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-8VF9tFbcTztfdV5P .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-8VF9tFbcTztfdV5P .marker{fill:#333333;stroke:#333333;}#mermaid-svg-8VF9tFbcTztfdV5P .marker.cross{stroke:#333333;}#mermaid-svg-8VF9tFbcTztfdV5P svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-8VF9tFbcTztfdV5P .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-8VF9tFbcTztfdV5P .cluster-label text{fill:#333;}#mermaid-svg-8VF9tFbcTztfdV5P .cluster-label span{color:#333;}#mermaid-svg-8VF9tFbcTztfdV5P .label text,#mermaid-svg-8VF9tFbcTztfdV5P span{fill:#333;color:#333;}#mermaid-svg-8VF9tFbcTztfdV5P .node rect,#mermaid-svg-8VF9tFbcTztfdV5P .node circle,#mermaid-svg-8VF9tFbcTztfdV5P .node ellipse,#mermaid-svg-8VF9tFbcTztfdV5P .node polygon,#mermaid-svg-8VF9tFbcTztfdV5P .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-8VF9tFbcTztfdV5P .node .label{text-align:center;}#mermaid-svg-8VF9tFbcTztfdV5P .node.clickable{cursor:pointer;}#mermaid-svg-8VF9tFbcTztfdV5P .arrowheadPath{fill:#333333;}#mermaid-svg-8VF9tFbcTztfdV5P .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-8VF9tFbcTztfdV5P .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-8VF9tFbcTztfdV5P .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-8VF9tFbcTztfdV5P .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-8VF9tFbcTztfdV5P .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-8VF9tFbcTztfdV5P .cluster text{fill:#333;}#mermaid-svg-8VF9tFbcTztfdV5P .cluster span{color:#333;}#mermaid-svg-8VF9tFbcTztfdV5P div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-8VF9tFbcTztfdV5P :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
       <g class="output">
        <g class="clusters">
        </g>
        <g class="edgePaths">
         <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;">
          <path class="path" d="M92,213.2874984741211L96.16666666666667,213.2874984741211C100.33333333333333,213.2874984741211,108.66666666666667,213.2874984741211,117.08333346048992,213.37083180745444C125.50000025431318,213.45416514078775,134.00000050862636,213.62083180745444,138.25000063578292,213.70416514078775L142.50000076293952,213.7874984741211" marker-end="url(#arrowhead253)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead253" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-B LE-C" id="L-B-C" style="opacity: 1;">
          <path class="path" d="M244.14009113256978,193.14009036963026L252.9979923561617,188.49799172037874C261.8558935797535,183.85589307112718,279.57169602693733,174.57169577262414,293.9295972505292,169.92959712337262C308.2874984741211,165.2874984741211,319.2874984741211,165.2874984741211,324.7874984741211,165.2874984741211L330.2874984741211,165.2874984741211" marker-end="url(#arrowhead254)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead254" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-B LE-Z" id="L-B-Z" style="opacity: 1;">
          <path class="path" d="M244.14009214318025,234.43490709388044L252.99799319833707,238.9103389905872C261.8558942534939,243.385770887294,279.57169636380746,252.33663468070753,295.2629307522976,256.8120665774143C310.9541651407878,261.2874984741211,324.6208318074544,261.2874984741211,331.4541651407878,261.2874984741211L338.2874984741211,261.2874984741211" marker-end="url(#arrowhead255)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead255" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-C LE-D" id="L-C-D" style="opacity: 1;">
          <path class="path" d="M430.2874984741211,165.2874984741211L434.4541651407878,165.2874984741211C438.6208318074544,165.2874984741211,446.9541651407878,165.2874984741211,455.2874984741211,165.2874984741211C463.6208318074544,165.2874984741211,471.9541651407878,165.2874984741211,476.1208318074544,165.2874984741211L480.2874984741211,165.2874984741211" marker-end="url(#arrowhead256)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead256" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-D LE-E" id="L-D-E" style="opacity: 1;">
          <path class="path" d="M538.7996538627293,142.2874984741211L547.344502964628,130.09687360127768C555.8893520665266,117.90624872843425,572.9790502703239,93.52499898274739,585.6905660388892,81.33437410990398C598.4020818074545,69.14374923706055,606.7354151407877,69.14374923706055,610.9020818074545,69.14374923706055L615.0687484741211,69.14374923706055" marker-end="url(#arrowhead257)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead257" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-E LE-F" id="L-E-F" style="opacity: 1;">
          <path class="path" d="M763.0687484741211,69.14374923706055L771.2354151407877,69.14374923706055C779.4020818074545,69.14374923706055,795.7354151407877,69.14374923706055,812.152081934611,69.22708257039388C828.5687487284343,69.31041590372722,845.0687489827474,69.47708257039388,853.3187491099039,69.56041590372722L861.5687492370605,69.64374923706055" marker-end="url(#arrowhead258)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead258" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-F LE-G" id="L-F-G" style="opacity: 1;">
          <path class="path" d="M983.8562477111816,69.64374923706055L989.2729142506918,69.56041590372722C994.6895807902018,69.47708257039388,1005.5229138692221,69.31041590372722,1016.9635386149089,69.23168159796204C1028.4041633605957,69.15294729219687,1040.4520797729492,69.1621453473332,1046.476037979126,69.16674437490136L1052.4999961853027,69.17134340246952" marker-end="url(#arrowhead259)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead259" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-F LE-H" id="L-F-H" style="opacity: 1;">
          <path class="path" d="M948.2068322069653,105.29316626715568L959.5650679971781,121.2088883016499C970.923303787391,137.12461033614417,993.6397753678166,168.95605440513262,1010.8523350550751,185.11276510615937C1028.0648947423335,201.26947580718615,1039.773542536425,201.7514531402512,1045.6278664334707,201.99244180678372L1051.4821903305165,202.23343047331622" marker-end="url(#arrowhead260)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead260" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-G LE-D" id="L-G-D" style="opacity: 1;">
          <path class="path" d="M1087.9615972933261,92.21562385559082L1076.0273722358122,104.39426962534587C1064.093147178298,116.5729153951009,1040.2246970632702,140.930206934611,1012.5998471329127,153.10885270436606C984.9749972025553,165.2874984741211,953.5937474568685,165.2874984741211,919.545831044515,165.2874984741211C885.4979146321615,165.2874984741211,848.7833315531412,165.2874984741211,809.9260400136312,165.2874984741211C771.0687484741211,165.2874984741211,730.0687484741211,165.2874984741211,693.0687484741211,165.2874984741211C656.0687484741211,165.2874984741211,623.0687484741211,165.2874984741211,602.4020818074545,165.2874984741211C581.7354151407877,165.2874984741211,573.4020818074545,165.2874984741211,569.2354151407877,165.2874984741211L565.0687484741211,165.2874984741211" marker-end="url(#arrowhead261)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead261" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-H LE-I" id="L-H-I" style="opacity: 1;">
          <path class="path" d="M1172.1437461853025,203.8593730926516L1178.8937460581458,203.77603975931822C1185.6437459309893,203.69270642598485,1199.1437456766764,203.5260397593181,1212.727078882853,203.44270642598474C1226.31041208903,203.35937309265137,1239.9770787556965,203.35937309265137,1246.81041208903,203.35937309265137L1253.6437454223633,203.35937309265137" marker-end="url(#arrowhead262)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead262" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-I LE-J" id="L-I-J" style="opacity: 1;">
          <path class="path" d="M1353.6437454223633,203.35937309265137L1357.81041208903,203.35937309265137C1361.9770787556965,203.35937309265137,1370.31041208903,203.35937309265137,1378.6437454223633,203.35937309265137C1386.9770787556965,203.35937309265137,1395.31041208903,203.35937309265137,1399.4770787556965,203.35937309265137L1403.6437454223633,203.35937309265137" marker-end="url(#arrowhead263)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead263" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-J LE-K" id="L-J-K" style="opacity: 1;">
          <path class="path" d="M1519.6437454223633,203.35937309265137L1523.81041208903,203.35937309265137C1527.9770787556965,203.35937309265137,1536.31041208903,203.35937309265137,1544.727078882853,203.44270642598462C1553.1437456766764,203.52603975931788,1561.6437459309898,203.6927064259844,1565.8937460581462,203.77603975931768L1570.143746185303,203.85937309265094" marker-end="url(#arrowhead264)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead264" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-K LE-L" id="L-K-L" style="opacity: 1;">
          <path class="path" d="M1692.4312446594236,203.8593730926516L1697.8479111989336,203.77603975931822C1703.264577738444,203.69270642598485,1714.097910817464,203.5260397593181,1727.6812440236408,203.44270642598474C1741.2645772298176,203.35937309265137,1757.5979105631511,203.35937309265137,1765.7645772298176,203.35937309265137L1773.9312438964844,203.35937309265137" marker-end="url(#arrowhead265)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead265" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-K LE-M" id="L-K-M" style="opacity: 1;">
          <path class="path" d="M1661.5609169210666,234.72970235688743L1672.122638083636,245.50131414618144C1682.6843592462058,256.27292593547537,1703.8078015713452,277.8161495140634,1719.8695227339147,288.58776130335735C1735.9312438964844,299.35937309265137,1746.9312438964844,299.35937309265137,1752.4312438964844,299.35937309265137L1757.9312438964844,299.35937309265137" marker-end="url(#arrowhead266)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead266" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-H LE-D" id="L-H-D" style="opacity: 1;">
          <path class="path" d="M1065.7260294983453,219.72915640569414L1057.4977324066615,222.50085918685366C1049.2694353149775,225.2725619680132,1032.81284113161,230.81596753033227,1008.8939191670826,233.58767031149182C984.9749972025553,236.35937309265137,953.5937474568685,236.35937309265137,919.545831044515,236.35937309265137C885.4979146321615,236.35937309265137,848.7833315531412,236.35937309265137,809.9260400136312,236.35937309265137C771.0687484741211,236.35937309265137,730.0687484741211,236.35937309265137,693.0687484741211,236.35937309265137C656.0687484741211,236.35937309265137,623.0687484741211,236.35937309265137,598.9717590582363,228.347393989563C574.8747696423516,220.3354148864746,559.6807908105819,204.31145668029785,552.0838013946972,196.29947757720947L544.4868119788124,188.2874984741211" marker-end="url(#arrowhead267)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead267" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
        </g>
        <g class="edgeLabels">
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-A' L-LE-B" id="L-L-A-B">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(297.2874984741211,165.2874984741211)">
          <g class="label" transform="translate(-8,-13)">
           <rect height="26" rx="0" ry="0" width="16">
           </rect>
           <foreignobject height="26" width="16">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-B' L-LE-C" id="L-L-B-C">
              æ˜¯
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(297.2874984741211,261.2874984741211)">
          <g class="label" transform="translate(-8,-13)">
           <rect height="26" rx="0" ry="0" width="16">
           </rect>
           <foreignobject height="26" width="16">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-B' L-LE-Z" id="L-L-B-Z">
              å¦
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-C' L-LE-D" id="L-L-C-D">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-D' L-LE-E" id="L-L-D-E">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-E' L-LE-F" id="L-L-E-F">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(1016.3562469482422,69.14374923706055)">
          <g class="label" transform="translate(-8,-13)">
           <rect height="26" rx="0" ry="0" width="16">
           </rect>
           <foreignobject height="26" width="16">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-F' L-LE-G" id="L-L-F-G">
              æ˜¯
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(1016.3562469482422,200.7874984741211)">
          <g class="label" transform="translate(-8,-13)">
           <rect height="26" rx="0" ry="0" width="16">
           </rect>
           <foreignobject height="26" width="16">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-F' L-LE-H" id="L-L-F-H">
              å¦
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-G' L-LE-D" id="L-L-G-D">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(1212.6437454223633,203.35937309265137)">
          <g class="label" transform="translate(-16,-13)">
           <rect height="26" rx="0" ry="0" width="32">
           </rect>
           <foreignobject height="26" width="32">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-H' L-LE-I" id="L-L-H-I">
              å˜åŒ–
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-I' L-LE-J" id="L-L-I-J">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-J' L-LE-K" id="L-L-J-K">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(1724.9312438964844,203.35937309265137)">
          <g class="label" transform="translate(-8,-13)">
           <rect height="26" rx="0" ry="0" width="16">
           </rect>
           <foreignobject height="26" width="16">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-K' L-LE-L" id="L-L-K-L">
              æ˜¯
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(1724.9312438964844,299.35937309265137)">
          <g class="label" transform="translate(-8,-13)">
           <rect height="26" rx="0" ry="0" width="16">
           </rect>
           <foreignobject height="26" width="16">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-K' L-LE-M" id="L-L-K-M">
              å¦
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(812.0687484741211,236.35937309265137)">
          <g class="label" transform="translate(-24,-13)">
           <rect height="26" rx="0" ry="0" width="48">
           </rect>
           <foreignobject height="26" width="48">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-H' L-LE-D" id="L-L-H-D">
              æœªå˜åŒ–
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
        </g>
        <g class="nodes">
         <g class="node default" id="flowchart-A-150" style="opacity: 1;" transform="translate(50,213.2874984741211)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              åº”ç”¨å¯åŠ¨
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-B-151" style="opacity: 1;" transform="translate(203.14374923706055,213.2874984741211)">
          <polygon class="label-container" points="61.143750000000004,0 122.28750000000001,-61.143750000000004 61.143750000000004,-122.28750000000001 0,-61.143750000000004" transform="translate(-61.143750000000004,61.143750000000004)">
          </polygon>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-34.9375,-13)">
            <foreignobject height="26" width="69.875">
             <div style="display: inline-block; white-space: nowrap;">
              ç”Ÿäº§ç¯å¢ƒ?
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-C-153" style="opacity: 1;" transform="translate(380.2874984741211,165.2874984741211)">
          <rect class="label-container" height="46" rx="0" ry="0" width="100" x="-50" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-40,-13)">
            <foreignobject height="26" width="80">
             <div style="display: inline-block; white-space: nowrap;">
              å¯åŠ¨å®šæ—¶å™¨
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-Z-155" style="opacity: 1;" transform="translate(380.2874984741211,261.2874984741211)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              ç»“æŸæµç¨‹
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-D-157" style="opacity: 1;" transform="translate(522.6781234741211,165.2874984741211)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84.78125" x="-42.390625" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32.390625,-13)">
            <foreignobject height="26" width="64.78125">
             <div style="display: inline-block; white-space: nowrap;">
              ç­‰å¾…60ç§’
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-E-159" style="opacity: 1;" transform="translate(689.0687484741211,69.14374923706055)">
          <rect class="label-container" height="46" rx="0" ry="0" width="148" x="-74" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-64,-13)">
            <foreignobject height="26" width="128">
             <div style="display: inline-block; white-space: nowrap;">
              è·å–å½“å‰è„šæœ¬å“ˆå¸Œ
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-F-161" style="opacity: 1;" transform="translate(922.2124977111816,69.14374923706055)">
          <polygon class="label-container" points="61.143750000000004,0 122.28750000000001,-61.143750000000004 61.143750000000004,-122.28750000000001 0,-61.143750000000004" transform="translate(-61.143750000000004,61.143750000000004)">
          </polygon>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-34.9375,-13)">
            <foreignobject height="26" width="69.875">
             <div style="display: inline-block; white-space: nowrap;">
              é¦–æ¬¡è¿è¡Œ?
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-G-163" style="opacity: 1;" transform="translate(1110.4999961853027,69.21562385559082)">
          <rect class="label-container" height="46" rx="0" ry="0" width="116" x="-58" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-48,-13)">
            <foreignobject height="26" width="96">
             <div style="display: inline-block; white-space: nowrap;">
              ä¿å­˜åˆå§‹å“ˆå¸Œ
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-H-165" style="opacity: 1;" transform="translate(1110.4999961853027,203.35937309265137)">
          <polygon class="label-container" points="61.143750000000004,0 122.28750000000001,-61.143750000000004 61.143750000000004,-122.28750000000001 0,-61.143750000000004" transform="translate(-61.143750000000004,61.143750000000004)">
          </polygon>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-34.9375,-13)">
            <foreignobject height="26" width="69.875">
             <div style="display: inline-block; white-space: nowrap;">
              å“ˆå¸Œå˜åŒ–?
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-I-169" style="opacity: 1;" transform="translate(1303.6437454223633,203.35937309265137)">
          <rect class="label-container" height="46" rx="0" ry="0" width="100" x="-50" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-40,-13)">
            <foreignobject height="26" width="80">
             <div style="display: inline-block; white-space: nowrap;">
              åœæ­¢å®šæ—¶å™¨
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-J-171" style="opacity: 1;" transform="translate(1461.6437454223633,203.35937309265137)">
          <rect class="label-container" height="46" rx="0" ry="0" width="116" x="-58" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-48,-13)">
            <foreignobject height="26" width="96">
             <div style="display: inline-block; white-space: nowrap;">
              æ˜¾ç¤ºæ›´æ–°æç¤º
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-K-173" style="opacity: 1;" transform="translate(1630.7874946594238,203.35937309265137)">
          <polygon class="label-container" points="61.143750000000004,0 122.28750000000001,-61.143750000000004 61.143750000000004,-122.28750000000001 0,-61.143750000000004" transform="translate(-61.143750000000004,61.143750000000004)">
          </polygon>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-34.9375,-13)">
            <foreignobject height="26" width="69.875">
             <div style="display: inline-block; white-space: nowrap;">
              ç”¨æˆ·ç¡®è®¤?
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-L-175" style="opacity: 1;" transform="translate(1815.9312438964844,203.35937309265137)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              åˆ·æ–°é¡µé¢
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-M-177" style="opacity: 1;" transform="translate(1815.9312438964844,299.35937309265137)">
          <rect class="label-container" height="46" rx="0" ry="0" width="116" x="-58" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-48,-13)">
            <foreignobject height="26" width="96">
             <div style="display: inline-block; white-space: nowrap;">
              è®°å½•å–æ¶ˆæ“ä½œ
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
        </g>
       </g>
      </g>
     </svg>
    </div>
    <p>
     é€šè¿‡å¯¹æ¯”æ„å»ºæ‰“åŒ…å‡ºæ–‡ä»¶çš„å“ˆå¸Œå€¼å˜åŒ–å®ç°ç‰ˆæœ¬æ£€æµ‹ï¼š
    </p>
    <ol>
     <li>
      å®šæ—¶è½®è¯¢ï¼šæ¯åˆ†é’Ÿæ£€æŸ¥é™æ€èµ„æºå˜åŒ–
     </li>
     <li>
      å“ˆå¸Œå¯¹æ¯”ï¼šé€šè¿‡è§£æHTMLä¸­scriptæ ‡ç­¾æŒ‡çº¹åˆ¤æ–­æ›´æ–°
     </li>
     <li>
      å¼ºåˆ¶åˆ·æ–°ï¼šæ£€æµ‹åˆ°æ›´æ–°åæç¤ºç”¨æˆ·åˆ·æ–°é¡µé¢
     </li>
    </ol>
    <pre><code class="prism language-javascript"><span class="token comment">// æ ¸å¿ƒå¯¹æ¯”é€»è¾‘</span>
<span class="token keyword">const</span> <span class="token function-variable function">isChanged</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">oldSet<span class="token punctuation">,</span> newSet</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> oldSet<span class="token punctuation">.</span>size <span class="token operator">!==</span> newSet<span class="token punctuation">.</span>size <span class="token operator">||</span> 
         <span class="token operator">!</span><span class="token punctuation">[</span><span class="token operator">...</span>oldSet<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">hash</span> <span class="token operator">=&gt;</span> newSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="22__46">
     </a>
     2.2 ä¸€äº›å¥½å¤„
    </h3>
    <ul>
     <li>
      é€šç”¨æ€§å¼ºï¼šé€‚ç”¨äºä»»æ„å‰ç«¯æ¡†æ¶
     </li>
     <li>
      æ— ä¾µå…¥å¼æ£€æµ‹ï¼šä¸ä¾èµ–æ„å»ºå·¥å…·é…ç½®
     </li>
     <li>
      ç”¨æˆ·å¯æ§ï¼šæç¤ºæ¡†è®©ç”¨æˆ·é€‰æ‹©åˆ·æ–°æ—¶æœº
     </li>
     <li>
      ç²¾å‡†æ£€æµ‹ï¼šé€šè¿‡å¯¹æ¯”scriptæ ‡ç­¾å†…å®¹å“ˆå¸Œå€¼
     </li>
     <li>
      ä½èµ„æºæ¶ˆè€—ï¼šæ¯åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡ï¼Œå•æ¬¡è¯·æ±‚æ€§èƒ½æ¶ˆè€—ä½
     </li>
    </ul>
    <h2>
     <a id="__54">
     </a>
     ä¸‰ ã€å…·ä½“å®ç°
    </h2>
    <h3>
     <a id="31__55">
     </a>
     3.1 å·¥ç¨‹åŒ–å°è£…
    </h3>
    <pre><code class="prism language-javascript"><span class="token comment">// useVersionHash.js æ ¸å¿ƒå®ç°</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useVersionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// çŠ¶æ€ç®¡ç†</span>
  <span class="token keyword">const</span> timerUpdate <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> scriptHashes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// ç”Ÿå‘½å‘¨æœŸ</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">stopTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// ä¸šåŠ¡æ–¹æ³•</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fetchScriptHashes</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">compareScriptHashes</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> compareScriptHashes <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="32__75">
     </a>
     3.2 å…³é”®æ–¹æ³•è§£æ
    </h3>
    <h4>
     <a id="_76">
     </a>
     è„šæœ¬å“ˆå¸Œè·å–ï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">fetchScriptHashes</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> scriptRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script(?:\s+[^&gt;]*)?&gt;(.*?)&lt;\/script\s*&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>html<span class="token operator">?.</span><span class="token function">match</span><span class="token punctuation">(</span>scriptRegex<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_85">
     </a>
     å¯¹æ¯”é€»è¾‘ï¼š
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>scriptHashes<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// åˆå§‹åŒ–åŸºå‡†å€¼</span>
  scriptHashes <span class="token operator">=</span> newScriptHashes  
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
  scriptHashes<span class="token punctuation">.</span>size <span class="token operator">!==</span> newScriptHashes<span class="token punctuation">.</span>size <span class="token operator">||</span>
  <span class="token operator">!</span><span class="token punctuation">[</span><span class="token operator">...</span>scriptHashes<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">hash</span> <span class="token operator">=&gt;</span> newScriptHashes<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// è§¦å‘æ›´æ–°æµç¨‹</span>
  <span class="token function">stopTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">showUpdateDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="_101">
     </a>
     å››ã€å…¨éƒ¨ä»£ç ğŸš€ğŸš€ğŸš€
    </h2>
    <h3>
     <a id="41_vue3_102">
     </a>
     4.1 vue3
    </h3>
    <p>
     1ã€use-version-update.jså…·ä½“é€»è¾‘
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// @/utils/use-version-update.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onBeforeUnmount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ElMessageBox <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-plus'</span>

<span class="token keyword">let</span> scriptHashes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> timerUpdate <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useVersionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> isProduction <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MODE</span> <span class="token operator">===</span> <span class="token string">'production'</span>

  <span class="token keyword">const</span> <span class="token function-variable function">fetchScriptHashes</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> scriptRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script(?:\s+[^&gt;]*)?&gt;(.*?)&lt;\/script\s*&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>html<span class="token operator">?.</span><span class="token function">match</span><span class="token punctuation">(</span>scriptRegex<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'è·å–è„šæœ¬å“ˆå¸Œå¤±è´¥:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">compareScriptHashes</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> newScriptHashes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchScriptHashes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>scriptHashes<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        scriptHashes <span class="token operator">=</span> newScriptHashes
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
        scriptHashes<span class="token punctuation">.</span>size <span class="token operator">!==</span> newScriptHashes<span class="token punctuation">.</span>size <span class="token operator">||</span>
        <span class="token operator">!</span><span class="token punctuation">[</span><span class="token operator">...</span>scriptHashes<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">hash</span> <span class="token operator">=&gt;</span> newScriptHashes<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">stopTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">updateNotice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'ç‰ˆæœ¬æ£€æŸ¥å¤±è´¥:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">updateNotice</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    ElMessageBox<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>
      <span class="token string">'æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬ï¼Œå»ºè®®ç«‹å³æ›´æ–°ä»¥ç¡®ä¿å¹³å°æ­£å¸¸ä½¿ç”¨'</span><span class="token punctuation">,</span>
      <span class="token string">'æ›´æ–°æç¤º'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'ç¡®å®š'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cancelButtonText</span><span class="token operator">:</span> <span class="token string">'å–æ¶ˆ'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'warning'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">startTimer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isProduction<span class="token punctuation">)</span> <span class="token keyword">return</span>
    timerUpdate<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>compareScriptHashes<span class="token punctuation">,</span> <span class="token number">60000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">stopTimer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    timerUpdate<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerUpdate<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span>startTimer<span class="token punctuation">)</span>
  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span>stopTimer<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> compareScriptHashes<span class="token punctuation">,</span> updateNotice <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     2ã€å¼•å…¥use-version-update.js
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// App.vue</span>
<span class="token keyword">import</span> versionUpdatefrom <span class="token string">'@/utils/use-version-update.js'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> updateNotice <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">versionUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> updateNotice <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     3ã€Vite ç›¸å…³é…ç½®
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">rollupOptions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
         <span class="token comment">// ä¸»å…¥å£æ–‡ä»¶å‘½åè§„åˆ™</span>
        <span class="token literal-property property">entryFileNames</span><span class="token operator">:</span> <span class="token string">'js/[name]-[hash:8].js'</span><span class="token punctuation">,</span>
        
        <span class="token comment">// ä»£ç åˆ†å‰²å—å‘½åè§„åˆ™</span>
        <span class="token literal-property property">chunkFileNames</span><span class="token operator">:</span> <span class="token string">'js/[name]-[hash:8].js'</span><span class="token punctuation">,</span>
        
        <span class="token comment">// é™æ€èµ„æºæ–‡ä»¶å‘½åè§„åˆ™</span>
        <span class="token function-variable function">assetFileNames</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">const</span> ext <span class="token operator">=</span> name<span class="token operator">?.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">assets/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>ext<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/[name]-[hash:8].[ext]</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å¯ç”¨æ–‡ä»¶å“ˆå¸Œçš„manifestç”Ÿæˆ</span>
    <span class="token literal-property property">manifest</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     ä¹Ÿå¯ä»¥å°†use-version-updateå†™æˆä»¥JSã€TSæ¨¡å—åŒ–å°è£…ï¼Œåœ¨å…¥å£æ–‡ä»¶ä¸­main.tså¼•å…¥
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// use-version-update.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">versionUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token operator">...</span> å…·ä½“å¤„ç†é€»è¾‘
<span class="token punctuation">}</span>

<span class="token comment">// main.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> versionUpdate<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/use-version-update"</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MODE</span> <span class="token operator">==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">versionUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="42_vue2_225">
     </a>
     4.2 vue2
    </h3>
    <p>
     1ã€use-version-update.jså…·ä½“é€»è¾‘
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">/*
 * @Author: baicaiKing
 * @Date: 2025-01-02 13:50:33
 * @LastEditors: Do not edit
 * @LastEditTime: 2025-01-03 09:40:36
 * @FilePath: \code\src\utils\use-version-update.js
 */</span>
<span class="token comment">// å­˜å‚¨å½“å‰è„šæœ¬æ ‡ç­¾çš„å“ˆå¸Œå€¼é›†åˆ</span>
<span class="token keyword">let</span> scriptHashes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> timerUpdate <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// æ¯60ç§’æ£€æŸ¥ä¸€æ¬¡æ˜¯å¦æœ‰æ–°çš„è„šæœ¬æ ‡ç­¾æ›´æ–°</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// åªé’ˆå¯¹ç”Ÿäº§ç¯å¢ƒ</span>
            timerUpdate<span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compareScriptHashes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">60000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timerUpdate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">/**
         * ä»é¦–é¡µè·å–è„šæœ¬æ ‡ç­¾çš„å“ˆå¸Œå€¼é›†åˆ
         * @returns {Promise&lt;Set&lt;string&gt;&gt;} è¿”å›åŒ…å«è„šæœ¬æ ‡ç­¾çš„å“ˆå¸Œå€¼çš„é›†åˆ
         */</span>
        <span class="token keyword">async</span> <span class="token function">fetchScriptHashes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// è·å–é¦–é¡µHTMLå†…å®¹</span>
            <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰&lt;script&gt;æ ‡ç­¾</span>
            <span class="token keyword">const</span> scriptRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script(?:\s+[^&gt;]*)?&gt;(.*?)&lt;\/script\s*&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
            <span class="token comment">// è·å–åŒ¹é…åˆ°çš„æ‰€æœ‰&lt;script&gt;æ ‡ç­¾å†…å®¹</span>
            <span class="token comment">// const scripts = html.match(scriptRegex) ?? [];</span>
            <span class="token keyword">const</span> scripts <span class="token operator">=</span> html <span class="token operator">?</span> html<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>scriptRegex<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// å°†è„šæœ¬æ ‡ç­¾å†…å®¹å­˜å…¥é›†åˆå¹¶è¿”å›</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>scripts<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * æ¯”è¾ƒå½“å‰è„šæœ¬æ ‡ç­¾çš„å“ˆå¸Œå€¼é›†åˆä¸æ–°è·å–çš„é›†åˆï¼Œæ£€æµ‹æ˜¯å¦æœ‰æ›´æ–°
         */</span>
        <span class="token keyword">async</span> <span class="token function">compareScriptHashes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// è·å–æ–°çš„è„šæœ¬æ ‡ç­¾å“ˆå¸Œå€¼é›†åˆ</span>
            <span class="token keyword">const</span> newScriptHashes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchScriptHashes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>scriptHashes<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// åˆæ¬¡è¿è¡Œæ—¶ï¼Œå­˜å‚¨å½“å‰è„šæœ¬æ ‡ç­¾å“ˆå¸Œå€¼</span>
                scriptHashes <span class="token operator">=</span> newScriptHashes<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
                scriptHashes<span class="token punctuation">.</span>size <span class="token operator">!==</span> newScriptHashes<span class="token punctuation">.</span>size <span class="token operator">||</span>
                <span class="token operator">!</span><span class="token punctuation">[</span><span class="token operator">...</span>scriptHashes<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">hash</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newScriptHashes<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// å¦‚æœè„šæœ¬æ ‡ç­¾æ•°é‡æˆ–å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œåˆ™è®¤ä¸ºæœ‰æ›´æ–°</span>
                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'å·²æ£€æµ‹åˆ°æ›´æ–°æ–‡ä»¶'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">oldScript</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>scriptHashes<span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">newScript</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>newScriptHashes<span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// æ¸…é™¤å®šæ—¶å™¨</span>
                <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// æç¤ºç”¨æˆ·æ›´æ–°</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNotice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// æ²¡æœ‰æ›´æ–°</span>
                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'æœªæ£€æµ‹åˆ°æ›´æ–°æ—¶æœº'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">oldScript</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>scriptHashes<span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">updateNotice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token string">'æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬ï¼Œå»ºè®®ç«‹å³æ›´æ–°ä»¥ç¡®ä¿å¹³å°æ­£å¸¸ä½¿ç”¨'</span><span class="token punctuation">,</span> <span class="token string">'æ›´æ–°æç¤º'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'ç¡®å®š'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">cancelButtonText</span><span class="token operator">:</span> <span class="token string">'å–æ¶ˆï¼ˆè‡ªè¡Œåˆ·æ–°ï¼‰'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'warning'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">eror</span><span class="token punctuation">(</span><span class="token string">'ç”¨æˆ·å–æ¶ˆåˆ·æ–°ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     2ã€å¼•å…¥use-version-update.js
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// App.vue</span>
<span class="token keyword">import</span> versionUpdate <span class="token keyword">from</span> <span class="token string">"@/util/use-version-update.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mixins</span><span class="token operator">:</span> <span class="token punctuation">[</span>versionUpdate<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     3ã€Webpack ç›¸å…³é…ç½®
    </p>
    <pre><code class="prism language-javascript">
<span class="token comment">// vue.config</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">configureWebpack</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name].[hash].js'</span><span class="token punctuation">,</span>
      <span class="token comment">// filename: 'js/[name].[contenthash].js',</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre>
    <h2>
     <a id="_352">
     </a>
     äº”ã€æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜
    </h2>
    <h3>
     <a id="51__353">
     </a>
     5.1 å¯èƒ½å‡ºç°çš„é—®é¢˜
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        é—®é¢˜ç°è±¡
       </th>
       <th>
        å¯èƒ½åŸå› 
       </th>
       <th>
        è§£å†³æ–¹æ¡ˆ
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        æ£€æµ‹ä¸å‡†ç¡®
       </td>
       <td>
        æ­£åˆ™åŒ¹é…å¤±æ•ˆ
       </td>
       <td>
        æ›´æ–°æ­£åˆ™è¡¨è¾¾å¼
       </td>
      </tr>
      <tr>
       <td>
        ç”Ÿäº§ç¯å¢ƒæœªç”Ÿæ•ˆ
       </td>
       <td>
        ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯
       </td>
       <td>
        æ£€æŸ¥æ„å»ºé…ç½®
       </td>
      </tr>
      <tr>
       <td>
        è·¨åŸŸè¯·æ±‚å¤±è´¥
       </td>
       <td>
        éƒ¨ç½²è·¯å¾„ä¸åŒ¹é…
       </td>
       <td>
        è°ƒæ•´fetchè¯·æ±‚è·¯å¾„
       </td>
      </tr>
      <tr>
       <td>
        å†…å­˜æ³„æ¼
       </td>
       <td>
        å®šæ—¶å™¨æœªæ­£ç¡®æ¸…é™¤
       </td>
       <td>
        ä½¿ç”¨
        <code>
         WeakRef
        </code>
        ä¼˜åŒ–
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="52__362">
     </a>
     5.2 æµè§ˆå™¨å…¼å®¹æ–¹æ¡ˆ
    </h3>
    <p>
     å¯ç»“åˆService Workerå®ç°æ— ç¼æ›´æ–°
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// æ”¯æŒService Workerçš„æ¸è¿›å¢å¼ºæ–¹æ¡ˆ</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'/sw.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">reg</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      reg<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'updatefound'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">showUpdateNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      åŒæ—¶è¦ç¡®ä¿æœåŠ¡å™¨é…ç½®æ­£ç¡®ç¼“å­˜ç­–ç•¥ï¼Œé€šå¸¸Nginxç¼“å­˜ç­–ç•¥é»˜è®¤ä¸ç”¨æ‰“ç†
     </p>
    </blockquote>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/dd89a0e5fb7e4127bfc8f5845cd5b1a8.gif#pic_center">
      <br/>
      å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµ ğŸ‘ã€æ”¶è— ğŸ‘ å¹¶å…³æ³¨æˆ‘ï¼ğŸ‘€
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/8c3262cc0cbb4faa8d255526766834ae.gif#pic_center"/>
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353531313638322f:61727469636c652f64657461696c732f313436303730343832" class_="artid" style="display:none">
 </p>
</div>


