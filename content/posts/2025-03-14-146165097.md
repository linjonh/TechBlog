---
layout: post
title: "OpenCV计算机视觉的基石与应用"
date: 2025-03-14 11:13:09 +0800
description: "OpenCV（Open Source Computer Vision Library）是一个开源的计算机视觉库，自 1999 年由英特尔公司首次发布以来，已成为计算机视觉领域的基石工具。它支持多个操作系统，包括 Windows、Linux、macOS、Android 和 iOS，具有跨平台特性。OpenCV 提供了 Python、Java 和 MATLAB 等多种编程语言的接口，使得不同编程语言的开发者都能轻松使用。"
keywords: "opencv应用"
categories: ['未分类']
tags: ['计算机视觉', '人工智能', 'Opencv']
artid: "146165097"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146165097
    alt: "OpenCV计算机视觉的基石与应用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146165097
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146165097
cover: https://bing.ee123.net/img/rand?artid=146165097
image: https://bing.ee123.net/img/rand?artid=146165097
img: https://bing.ee123.net/img/rand?artid=146165097
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     OpenCV：计算机视觉的基石与应用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="OpenCV__2">
     </a>
     一、OpenCV 简介
    </h3>
    <p>
     OpenCV（Open Source Computer Vision Library）是一个开源的计算机视觉库，自 1999 年由英特尔公司首次发布以来，已成为计算机视觉领域的基石工具。它支持多个操作系统，包括 Windows、Linux、macOS、Android 和 iOS，具有跨平台特性。OpenCV 提供了 Python、Java 和 MATLAB 等多种编程语言的接口，使得不同编程语言的开发者都能轻松使用。它包含超过 2500 个优化的算法，涵盖从基本的图像处理到复杂的机器学习模型，广泛应用于计算机视觉、视频分析、机器学习、医学影像处理、自动驾驶、工业检测、游戏开发等领域。
    </p>
    <h3>
     <a id="_6">
     </a>
     二、安装与配置
    </h3>
    <p>
     在 Python 中，直接通过 pip 安装 OpenCV：
    </p>
    <pre><code class="prism language-bash">pip <span class="token function">install</span> opencv-python
</code></pre>
    <p>
     安装完成后，在代码中导入 OpenCV：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> cv2
</code></pre>
    <p>
     注意：安装的是 opencv-python，但在导入时是 import cv2。此外，OpenCV 依赖一些库，比如 NumPy 和 matplotlib，先安装上。
    </p>
    <h3>
     <a id="_22">
     </a>
     三、图像处理基础
    </h3>
    <h4>
     <a id="_24">
     </a>
     图像读取、显示与保存
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">import</span> cv2

<span class="token comment"># 读取图像</span>
img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'image.jpg'</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>

<span class="token comment"># 显示图像</span>
cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Image'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 保存图像</span>
cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">'output.jpg'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_41">
     </a>
     图像基本操作
    </h4>
    <p>
     对图片进行截取：
    </p>
    <pre><code class="prism language-python">img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'cat.jpg'</span><span class="token punctuation">)</span>
cat <span class="token operator">=</span> img<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">200</span><span class="token punctuation">]</span>
</code></pre>
    <p>
     对图片进行颜色通道提取与合并：
    </p>
    <pre><code class="prism language-python">b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r <span class="token operator">=</span> cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     对图片进行边界填充：
    </p>
    <pre><code class="prism language-python">top_size<span class="token punctuation">,</span> bottom_size<span class="token punctuation">,</span> left_size<span class="token punctuation">,</span> right_size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
replicate <span class="token operator">=</span> cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>img<span class="token punctuation">,</span> top_size<span class="token punctuation">,</span> bottom_size<span class="token punctuation">,</span> left_size<span class="token punctuation">,</span> right_size<span class="token punctuation">,</span> borderType<span class="token operator">=</span>cv2<span class="token punctuation">.</span>BORDER_REPLICATE<span class="token punctuation">)</span>
</code></pre>
    <p>
     图像融合：
    </p>
    <pre><code class="prism language-python">img_cat <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'cat.jpg'</span><span class="token punctuation">)</span>
img_dog <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'dog.jpg'</span><span class="token punctuation">)</span>
img_dog <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img_dog<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">414</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 将两个图片改为同样大小</span>
res <span class="token operator">=</span> cv2<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>img_cat<span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">,</span> img_dog<span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 猫占0.4权重，狗占0.6权重</span>
</code></pre>
    <h3>
     <a id="_73">
     </a>
     四、计算机视觉核心功能
    </h3>
    <h4>
     <a id="_75">
     </a>
     图像增强技术
    </h4>
    <h5>
     <a id="_77">
     </a>
     直方图均衡化
    </h5>
    <pre><code class="prism language-python">clahe <span class="token operator">=</span> cv2<span class="token punctuation">.</span>createCLAHE<span class="token punctuation">(</span>clipLimit<span class="token operator">=</span><span class="token number">2.0</span><span class="token punctuation">,</span> tileGridSize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
enhanced_img <span class="token operator">=</span> clahe<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>gray_img<span class="token punctuation">)</span>
</code></pre>
    <h5>
     <a id="_84">
     </a>
     形态学操作
    </h5>
    <pre><code class="prism language-python">kernel <span class="token operator">=</span> cv2<span class="token punctuation">.</span>getStructuringElement<span class="token punctuation">(</span>shape<span class="token operator">=</span>cv2<span class="token punctuation">.</span>MORPH_ELLIPSE<span class="token punctuation">,</span> ksize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
closed_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>morphologyEx<span class="token punctuation">(</span>src<span class="token operator">=</span>img<span class="token punctuation">,</span> op<span class="token operator">=</span>cv2<span class="token punctuation">.</span>MORPH_CLOSE<span class="token punctuation">,</span> kernel<span class="token operator">=</span>kernel<span class="token punctuation">,</span> iterations<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_91">
     </a>
     特征检测与描述
    </h4>
    <p>
     OpenCV 提供了 SIFT、SURF、ORB 等算法用于特征检测和描述。以下是以 ORB 为例的特征检测与匹配：
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 初始化 ORB 检测器</span>
orb <span class="token operator">=</span> cv2<span class="token punctuation">.</span>ORB_create<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 找到关键点和描述符</span>
kp1<span class="token punctuation">,</span> des1 <span class="token operator">=</span> orb<span class="token punctuation">.</span>detectAndCompute<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
kp2<span class="token punctuation">,</span> des2 <span class="token operator">=</span> orb<span class="token punctuation">.</span>detectAndCompute<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>

<span class="token comment"># 使用 BFMatcher 进行暴力匹配</span>
bf <span class="token operator">=</span> cv2<span class="token punctuation">.</span>BFMatcher<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>NORM_HAMMING<span class="token punctuation">,</span> crossCheck<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
matches <span class="token operator">=</span> bf<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span>des1<span class="token punctuation">,</span> des2<span class="token punctuation">)</span>

<span class="token comment"># 按距离排序</span>
matches <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>matches<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>distance<span class="token punctuation">)</span>

<span class="token comment"># 绘制匹配结果</span>
img3 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>drawMatches<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> kp1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_114">
     </a>
     目标检测
    </h4>
    <p>
     使用 Haar 级联分类器进行人脸检测：
    </p>
    <pre><code class="prism language-python">face_cascade <span class="token operator">=</span> cv2<span class="token punctuation">.</span>CascadeClassifier<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>data<span class="token punctuation">.</span>haarcascades <span class="token operator">+</span> <span class="token string">'haarcascade_frontalface_default.xml'</span><span class="token punctuation">)</span>
gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>
faces <span class="token operator">=</span> face_cascade<span class="token punctuation">.</span>detectMultiScale<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">)</span> <span class="token keyword">in</span> faces<span class="token punctuation">:</span>
    cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token operator">+</span>w<span class="token punctuation">,</span> y<span class="token operator">+</span>h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="_126">
     </a>
     五、高级应用与优化
    </h3>
    <h4>
     <a id="_128">
     </a>
     视频分析
    </h4>
    <pre><code class="prism language-python">cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token string">'video.mp4'</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> ret<span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    <span class="token comment"># 处理每一帧视频</span>
    gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Frame'</span><span class="token punctuation">,</span> gray<span class="token punctuation">)</span>
    <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span> <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>

cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="_147">
     </a>
     深度学习集成
    </h4>
    <p>
     OpenCV 支持与深度学习框架的集成，例如使用 TensorFlow 或 PyTorch 构建的模型进行目标检测或图像分类：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf
<span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>applications <span class="token keyword">import</span> MobileNetV2
<span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> image
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

model <span class="token operator">=</span> MobileNetV2<span class="token punctuation">(</span>weights<span class="token operator">=</span><span class="token string">'imagenet'</span><span class="token punctuation">)</span>

img <span class="token operator">=</span> image<span class="token punctuation">.</span>load_img<span class="token punctuation">(</span><span class="token string">'image.jpg'</span><span class="token punctuation">,</span> target_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> image<span class="token punctuation">.</span>img_to_array<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>expand_dims<span class="token punctuation">(</span>x<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>applications<span class="token punctuation">.</span>mobilenet_v2<span class="token punctuation">.</span>preprocess_input<span class="token punctuation">(</span>x<span class="token punctuation">)</span>

preds <span class="token operator">=</span> model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Predicted:'</span><span class="token punctuation">,</span> tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>applications<span class="token punctuation">.</span>mobilenet_v2<span class="token punctuation">.</span>decode_predictions<span class="token punctuation">(</span>preds<span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="_168">
     </a>
     六、总结
    </h3>
    <p>
     OpenCV 作为强大的计算机视觉库，提供了丰富的功能和灵活的操作方式。通过本文的介绍，读者可以对 OpenCV 的基础有更深入的了解，为进一步的学习和应用打下坚实的基础。在实际项目中，OpenCV 可以与深度学习框架结合，实现更复杂和高效的计算机视觉任务。
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5de5474f68074a67afc39a183c75ddbf.png#pic_center"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37323638363139362f:61727469636c652f64657461696c732f313436313635303937" class_="artid" style="display:none">
 </p>
</div>


