---
layout: post
title: "sysbench工具测试达梦数据库"
date: 2024-12-04 15:04:47 +0800
description: "1、简单介绍   sysbench是一个开源，模块化的多线程性能测试工具，可以用来进行硬件环境性能测"
keywords: "stmt handle to the limit the number of statements or system of memory"
categories: ['测试工具']
tags: ['数据库']
artid: "119938472"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=119938472
    alt: "sysbench工具测试达梦数据库"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=119938472
featuredImagePreview: https://bing.ee123.net/img/rand?artid=119938472
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     sysbench工具测试达梦数据库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       1、简单介绍
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       s
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ysbench是一个开源，模块化的多线程性能测试工具，可以用来进行硬件环境性能测试，也可进行数据库的性能测试。但是由于需要支持DM测试，所以我们一般使用源码进行编译。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       2、运行方法
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       sysbench通过运行lua脚本进行数据库测试。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       而
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       每次测试都分为prepare
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       run
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       cleanup
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       这三
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       个步骤，分别对应数据准备，运行测试，数据清理。每一次测试都是一个闭环，必须严格按照这三步来进行
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       操作
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       不然会报错
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       使用
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       s
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ysbench源码进行编译测试时
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       由于lua脚本
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       存在
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       依赖关系
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       防止出现找不到调用lua脚本的错误
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       需要
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       将src目录下生成的可执行文件sysbench拷贝至
      </span>
     </span>
     <a href="https://github.com/akopytov/sysbench/tree/master/src" title="src">
      src
     </a>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       /lua/目录下运行
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       3、
      </span>
     </span>
     测试场景
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       s
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ysbench自带
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       的
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       oltp测试脚本，模拟了单个表的查询、更新、删除、插入操作，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       并
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       以主键为过滤条件。表名以sbtest为前缀，后面加上数字
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       来
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       区分。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       自带的
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       测试表结构不复杂，事务简单，过滤条件是主键查询。一般常见的测试时单表数据量以十万数量级。所以sysbench的性能测试主要压力在CPU上。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       虽然自带的
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       测试表结构不复杂
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       但是不建议随意修改测试场景中的列类型。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       4、编译安装
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       4.1、检查系统环境
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        操作系统中需要安装
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        gcc、automake、libtool
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        等
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        基本的编译工具
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        来
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        需要先解决环境问题
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        ，
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        不然在
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        生成
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        配置
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        文件
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        （
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        autogen.sh
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        ）
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        的时候会报错，
       </span>
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       4.2、生成
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       配置
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       文件
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       在解压程序包后，例如目录为/opt/sysbench-master，在该目录中执行./autogen.sh脚本来生成对应的
      </span>
     </span>
     configure
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       配置文件。如
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       此步骤出错，说明该系统缺少基本的编译工具
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       解决
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       检查并解决
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       环境问题
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           cd /opt/sysbench-master
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./autogen.sh
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       4.3、设置环境变量
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       如果安装
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       了DM数据库，安装路径
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       在/
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       home/dmdba
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       /dmdbms目录，那么
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       就会
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       自动增加一个环境变量DM_HOME=/
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       home/dmdba
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       /dmdbms
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       如果该机器没有安装
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       DM数据库
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，那么需要
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       在/etc/profile配置文件
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       设置环境变量DM_HOME
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/home/dmdba/dmdbms/bin"
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           export DM_HOME="/home/dmdba/dmdbms"
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           PATH=$PATH:$HOME/.local/bin:$HOME/bin:$DM_HOME/bin
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           export PATH
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       4.4、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       执行
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       配置
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       文件
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       默认是
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       以
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       编译
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       的方式
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       支持测试
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       MySQL
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       和
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       DM数据库
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       在编译的过程中
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       需要
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       MySQL
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       的动态库和头文件，此时会进行检查。如果仅测试
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       DM数据库
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，命令如下：
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           cd /opt/sysbench-master
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./configure --without-mysql --with-dm
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       4.5、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       编译
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       并且安装
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       在
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       编译成功后，在src目录下生成可执行文件sysbench
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       测试方便将sysbench拷贝到src/lua目录下，然后进入src/lua目录运行sysbench
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       。
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           cd /opt/sysbench-master
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           make
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       5、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       测试
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       说明
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ：
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       s
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ysbench的数据库测试脚本在src/lua目录下，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       都是
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       以oltp为前缀。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       其中
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       oltp_common.lua脚本是最基础的测试脚本，定义了表结构，事务的基本操作。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       剩余
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       oltp脚本都是引用oltp_common
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       脚本
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，将其中query进行组合，实现各种测试场景。最常使用的3个脚本如下：
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:119.2pt;">
        <p style="margin-left:.0001pt;text-align:center;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           脚本名称
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:306.9pt;">
        <p style="margin-left:.0001pt;text-align:center;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           说明
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:119.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         oltp_read_write.lua
        </p>
       </td>
       <td style="vertical-align:top;width:306.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         读写混合性能测试，包含查询，更新，删除，插入操作。
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:119.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         oltp_read_only.lua
        </p>
       </td>
       <td style="vertical-align:top;width:306.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         读性能测试，包含查询操作。
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:119.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         oltp_write_only.lua
        </p>
       </td>
       <td style="vertical-align:top;width:306.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         包含更新，删除，插入操作。
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       5.1、数据准备：
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./sysbench oltp_read_write.lua --tables=25 --table-size=250000 --db-driver=dm --dm-db=localhost:5236 --dm-user=SYSDBA --dm-password=SYSDBA --auto-inc=1 --threads=64 --time=180 --report-interval=10 prepare
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       5.2、运行测试
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./sysbench oltp_read_write.lua --tables=25 --table-size=250000 --db-driver=dm --dm-db=localhost:5236 --dm-user=SYSDBA --dm-password=SYSDBA --auto-inc=1 --threads=64 --time=180 --report-interval=10 run
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       5.3、清理数据
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./sysbench oltp_read_write.lua --tables=25 --table-size=250000 --db-driver=dm --dm-db=localhost:5236 --dm-user=SYSDBA --dm-password=SYSDBA --auto-inc=1 --threads=64 --time=180 --report-interval=10 cleanup
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       5.4、参数说明：
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:center;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           参数
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:center;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           说明
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --db-driver=dm
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示使用dm驱动
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --dm-db=localhost:5236
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示dm的连接信息
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --dm-user=SYSDBA
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示dm的登录用户名
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --dm-password=SYSDBA
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示dm的登录密码
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --table-size=250000
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示每个测试表填充数据量为 250000
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --tables=25
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示25张表
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --threads=64
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示发起64个并发连接
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --report-interval=10
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示每10秒输出一次测试进度报告
          </span>
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="vertical-align:top;width:149.2pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --time=180
          </span>
         </span>
        </p>
       </td>
       <td style="vertical-align:top;width:276.9pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           表示最大执行时长为180秒
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       6、测试验证
      </span>
     </span>
     <br/>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       测试的内容主要
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       分为
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       三
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       类，分别是
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       read_only
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       （select操作）、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       write_only
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       （update、delete和insert操作）、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       read_write
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       （select
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       update、delete和insert操作）。
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       下面针对这三种情况分别测试验证：
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       6.1、纯读测试：
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       准备数据
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./sysbench --db-driver=dm --dm-db=192.168.10.30:5236 --dm-user=SYSDBA --dm-password=ROOT123456
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --table_size=25000 --tables=25 --events=0 --time=600 oltp_read_only prepare
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       运行测试
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./sysbench --db-driver=dm --dm-db=192.168.10.30:5236 --dm-user=SYSDBA --dm-password=ROOT123456
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --table_size=25000 --tables=25 --events=0 --time=600 --threads=32 --percentile=95 --range-selects=0
          </span>
         </span>
        </p>
        <p style="margin-left:.0001pt;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           --skip-trx=1 --report-interval=1 oltp_read_only run
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <img alt="" height="458" src="https://i-blog.csdnimg.cn/blog_migrate/24141072ef734bd5c95ac28480bd381b.png" width="692"/>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       数据清理：
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:.0001pt;text-align:justify;">
         <span style="background-color:#ffffff;">
          <span style="color:#111111;">
           ./sysbench --db-driver=dm --dm-db=192.168.10.30:5236 --dm-user=SYSDBA --dm-password=ROOT123456 --table_size=25000 --tables=25 --events=0 --time=600 --threads=32 --percentile=95 --range-selects=0 oltp_read_only cleanup
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        6.2、纯写测试：
       </span>
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        准备数据
       </span>
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            ./sysbench --db-driver=dm --dm-db=192.168.10.
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            30
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            :5236 --dm-user=SYSDBA --dm-password=ROOT123456 --table_size=25000 --tables=25--events=0 --time=600 oltp_write_only prepare
           </span>
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        运行
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        测试
       </span>
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            ./sysbench --db-driver=dm --dm-db=192.168.10.
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            30
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            :5236 --dm-user=SYSDBA --dm-password=ROOT123456 --table_size=25000 --tables=25 --events=0 --time=600 --threads=32 --percentile=95 --report-interval=1 oltp_write_only run
           </span>
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <img alt="" height="489" src="https://i-blog.csdnimg.cn/blog_migrate/bae79a3be62154b91d3fbbdf7ce6103d.png" width="693"/>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        数据
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        清理
       </span>
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            ./sysbench --db-driver=dm --dm-db=192.168.10.
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            30
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            :5236 --dm-user=SYSDBA --dm-password=ROOT123456 --table_size=25000 --tables=25 --events=0 --time=600 --threads=32 --percentile=95 oltp_write_only cleanup
           </span>
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        6.3、读写测试：
       </span>
      </span>
     </span>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        准备数据
       </span>
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            .
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            /sysbench --db-driver=dm --dm-db=192.168.10.
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            30
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            :5236 --dm-user=SYSDBA --dm-password=ROOT123456
           </span>
          </span>
         </span>
        </p>
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            --table_size=250000 --tables=25 --events=0 --time=600 oltp_read_write prepare
           </span>
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        运行
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        测试
       </span>
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            .
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            /sysbench --db-driver=dm --dm-db=192.168.10.
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            30
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            :5236 --dm-user=SYSDBA --dm-password=ROOT123456
           </span>
          </span>
         </span>
        </p>
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            --table_size=250000 --tables=25 --events=0 --time=600 --threads=32 --percentile=95 --report-interval=1 oltp_read_write run
           </span>
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <img alt="" height="458" src="https://i-blog.csdnimg.cn/blog_migrate/943813b5ac898d1209d9c472ad531cba.png" width="692"/>
    </p>
    <p style="margin-left:0;text-align:left;">
     <span style="background-color:#ffffff;">
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        数据
       </span>
      </span>
      <span style="background-color:#ffffff;">
       <span style="color:#111111;">
        清理
       </span>
      </span>
     </span>
    </p>
    <table border="1" cellspacing="0">
     <tbody>
      <tr>
       <td style="vertical-align:top;width:426.1pt;">
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            .
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            /sysbench --db-driver=dm --dm-db=192.168.10.
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            30
           </span>
          </span>
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            :5236 --dm-user=SYSDBA --dm-password=ROOT123456
           </span>
          </span>
         </span>
        </p>
        <p style="margin-left:0;text-align:left;">
         <span style="background-color:#ffffff;">
          <span style="background-color:#ffffff;">
           <span style="color:#111111;">
            --table_size=250000 --tables=25 --events=0 --time=600 --threads=32 --percentile=95 oltp_read_write cleanup
           </span>
          </span>
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       7、测试结果
      </span>
     </span>
     <br/>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       在s
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ysbench测试数据库性能
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       的
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       测试结果中，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       一般关注的参数有
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       平均响应时间
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       TPS和QPS，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       其中
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       TPS
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       表示
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       每秒的事务数
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       ，
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       QPS
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       表示
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       每秒的查询数。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       (1)、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       response time avg：平均响应时间（后面的95%的大小通过–percentile=98的方式更改）。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       (2)、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       transactions：精确的说是这一项后面的TPS，但如果使用了–skip-trx=on，这项事务数为0，需要用total number of events去除以总时间，得到tps（其实还可以分为读tps和写tps）。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       7.3、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       queries：用它除以总时间，得到吞吐量QPS。
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       8、
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       问题
      </span>
     </span>
     <span style="background-color:#ffffff;">
      <span style="color:#111111;">
       解决
      </span>
     </span>
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     1、错误信息为：ALERT: Error - DM_-70089_Encryption module failed to load
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     sysbench测试DM数据库时，没有找到所依赖的dm动态库。可以在运行sysbench的终端，设置LD_LIBRARY_PATH，添加dm的bin目录，或将dm的bin目录下的动态库拷贝到系统库目录。
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     运行sysbench测试DM数据库时，缺少动态库导致运行失败，在src/lib64里面包含centos7下运行sysbench可能需要的动态库，因此设置环境变量LD_LIBRARY_PATH可以解决这个问题。
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     2、错误信息：DM_-606_Stmt handle to the limit the number of statements or system of memory
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     修改dm.ini配置文件，增加MAX_SESSION_STATEMENT=1000。该值表示一个session上的句柄限制。由于sysbench测试的时候是先进行stmt prepare操作，然后进行执行。
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     3、错误信息：DM_-7120_Undo record version too old
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     配置文件dm.ini中UNDO_RETENTION配置的太小导致。增加UNDO_RETENTION。一般情况下，为了提高性能，在进行优化配置时，会将UNDO_RETENTION配置的尽可能小。但是在实际性能慢的情况下，这种配置可能导致sql执行失败，此时测试无法继续。所以测试能够正常进行，需要增加UNDO_RETENTION。
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
    </p>
    <p style="margin-left:.0001pt;text-align:justify;">
     <a href="http://xn--http-zf5ftu567g63oq56frtaz7ipt27b//eco.dameng.com" rel="nofollow" title="达梦云适配中心：http://eco.dameng.com">
      达梦云适配中心：http://eco.dameng.com
     </a>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33343735373838312f:61727469636c652f64657461696c732f313139393338343732" class_="artid" style="display:none">
 </p>
</div>


