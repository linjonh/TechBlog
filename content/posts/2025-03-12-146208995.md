---
layout: post
title: "UI自动化poium测试库"
date: 2025-03-12 17:55:32 +0800
description: "基于 Selenium 的。"
keywords: "UI自动化：poium测试库"
categories: ['未分类']
tags: ['自动化', 'Ui']
artid: "146208995"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146208995
    alt: "UI自动化poium测试库"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146208995
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146208995
cover: https://bing.ee123.net/img/rand?artid=146208995
image: https://bing.ee123.net/img/rand?artid=146208995
img: https://bing.ee123.net/img/rand?artid=146208995
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     UI自动化：poium测试库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     以下是关于
     <strong>
      poium 测试库
     </strong>
     的详细介绍，涵盖其核心功能、使用方法及与原生 Selenium 的对比，帮助快速掌握这一工具：
    </p>
    <hr/>
    <h3>
     <strong>
      1. poium 简介
     </strong>
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        定位
       </strong>
       ：基于 Selenium 的
       <strong>
        Page Object 模式增强库
       </strong>
       ，专注于简化元素定位和页面操作。
      </p>
     </li>
     <li>
      <p>
       <strong>
        核心目标
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         通过简洁的 API 提升代码可读性。
        </p>
       </li>
       <li>
        <p>
         减少样板代码，提升测试脚本开发效率。
        </p>
       </li>
       <li>
        <p>
         内置智能等待、链式调用等实用功能。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        适用场景
       </strong>
       ：Web 自动化测试（尤其适合中大型项目需要维护 Page Object 的场景）。
      </p>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      2. 安装 poium
     </strong>
    </h3>
    <p>
     bash
    </p>
    <p>
     复制
    </p>
    <pre><code class="language-bash">pip install poium</code></pre>
    <hr/>
    <h3>
     <strong>
      3. 核心功能与使用
     </strong>
    </h3>
    <h4>
     <strong>
      3.1 元素定位
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        支持多种定位方式
       </strong>
       （语法更简洁）：
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python">from poium import Page, Element

class LoginPage(Page):
    username = Element(id_="username", describe="用户名输入框")  # id定位
    password = Element(css=".password", describe="密码输入框")  # CSS选择器
    submit = Element(xpath="//button[@type='submit']", describe="提交按钮")</code></pre>
     </li>
    </ul>
    <h4>
     <strong>
      3.2 链式操作
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        流式调用
       </strong>
       提升代码可读性：
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python">LoginPage().username.input("admin").password.input("123456").submit.click()</code></pre>
     </li>
    </ul>
    <h4>
     <strong>
      3.3 智能等待
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        自动处理元素加载等待
       </strong>
       ，无需手动编写
       <code>
        WebDriverWait
       </code>
       ：
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python"># 元素默认等待时间（全局配置）
from poium import config
config.timeout = 10  # 设置全局等待时间为10秒

# 单个元素自定义等待
error_msg = Element(css=".error", timeout=5)</code></pre>
     </li>
    </ul>
    <h4>
     <strong>
      3.4 元素操作扩展
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        内置丰富操作方法
       </strong>
       ：
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python">element.input("text")     # 输入文本
element.click()           # 点击
element.clear()           # 清空内容
element.get_text()        # 获取文本
element.is_displayed()    # 判断元素是否可见</code></pre>
     </li>
    </ul>
    <h4>
     <strong>
      3.5 断言增强
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        集成常用断言方法
       </strong>
       ：
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python">from poium import asserts

asserts.assert_title("首页")                     # 断言页面标题
asserts.assert_element_text(login.submit, "登录") # 断言元素文本</code></pre>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      4. 完整示例
     </strong>
    </h3>
    <h4>
     <strong>
      Page Object 定义
     </strong>
    </h4>
    <p>
     python
    </p>
    <p>
     复制
    </p>
    <pre><code class="language-python">from poium import Page, Element

class BaiduSearchPage(Page):
    search_input = Element(id_="kw", describe="搜索框")
    search_button = Element(id_="su", describe="搜索按钮")

    def search(self, keyword):
        self.search_input.input(keyword)
        self.search_button.click()</code></pre>
    <h4>
     <strong>
      测试用例（结合 pytest）
     </strong>
    </h4>
    <p>
     python
    </p>
    <p>
     复制
    </p>
    <pre><code class="language-python">def test_baidu_search():
    page = BaiduSearchPage()
    page.open("https://www.baidu.com")
    page.search("poium")
    asserts.assert_title_contains("poium")</code></pre>
    <hr/>
    <h3>
     <strong>
      5. 与原生 Selenium 对比
     </strong>
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         功能
        </strong>
       </th>
       <th>
        <strong>
         原生 Selenium
        </strong>
       </th>
       <th>
        <strong>
         poium
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         元素定位
        </strong>
       </td>
       <td>
        <code>
         driver.find_element(By.ID, "kw")
        </code>
       </td>
       <td>
        <code>
         Element(id_="kw")
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         元素操作
        </strong>
       </td>
       <td>
        <code>
         element.send_keys("text")
        </code>
       </td>
       <td>
        <code>
         element.input("text")
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         等待处理
        </strong>
       </td>
       <td>
        需手动编写
        <code>
         WebDriverWait
        </code>
       </td>
       <td>
        自动智能等待（可配置超时）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         代码结构
        </strong>
       </td>
       <td>
        需自行封装 Page Object
       </td>
       <td>
        内置 Page 类，直接继承即可
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         断言
        </strong>
       </td>
       <td>
        结合
        <code>
         unittest
        </code>
        或
        <code>
         pytest
        </code>
        断言
       </td>
       <td>
        内置
        <code>
         asserts
        </code>
        模块提供专用断言方法
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h3>
     <strong>
      6. 实践
     </strong>
    </h3>
    <h4>
     poium + pytest + Allure
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        目录结构
       </strong>
       ：
      </p>
      <p>
       复制
      </p>
      <pre>project/
  ├── pages/          # 存放Page Object类
  ├── tests/          # 测试用例
  ├── conftest.py     # pytest配置（如driver初始化）
  └── utils/          # 工具函数（如数据生成）</pre>
     </li>
     <li>
      <p>
       <strong>
        Driver 管理
       </strong>
       ：
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python"># conftest.py
import pytest
from selenium import webdriver
from poium import Browser

@pytest.fixture(scope="session")
def driver():
    driver = webdriver.Chrome()
    yield Browser(driver)  # 将原生driver封装为poium的Browser对象
    driver.quit()</code></pre>
     </li>
     <li>
      <strong>
       数据驱动
      </strong>
      （结合
      <code>
       pytest.mark.parametrize
      </code>
      ）：
     </li>
    </ol>
    <p>
     python
    </p>
    <p>
     复制
    </p>
    <pre><code class="language-python">import pytest

@pytest.mark.parametrize("keyword", ["selenium", "poium", "pytest"])
def test_search(driver, keyword):
    page = BaiduSearchPage(driver)
    page.open("https://www.baidu.com")
    page.search(keyword)
    asserts.assert_title_contains(keyword)</code></pre>
    <hr/>
    <h4>
     seldom + poium
    </h4>
    <pre><code class="language-python">import seldom
from poium import Page, Element


class BaiduPage(Page):
    """baidu page"""
    search_input = Element(id_="kw")
    search_button = Element(id_="su")


class BaiduTest(seldom.TestCase):
    """Baidu search test case"""

    def test_case(self):
        """
        A simple test
        """
        page = BaiduPage(self.driver, print_log=True)
        page.open("https://www.baidu.com")
        page.search_input.send_keys("seldom")
        page.search_button.click()
        self.assertTitle("seldom_百度搜索")


if __name__ == '__main__':
    seldom.main(browser="chrome")</code></pre>
    <hr/>
    <h3>
     <strong>
      7. 常见问题
     </strong>
    </h3>
    <h4>
     <strong>
      Q1：如何处理动态元素（如弹窗）？
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        方案
       </strong>
       ：通过
       <code>
        Element
       </code>
       的
       <code>
        timeout
       </code>
       参数调整等待时间，或结合
       <code>
        is_displayed()
       </code>
       判断。
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python">class PopupPage(Page):
    confirm_btn = Element(css=".confirm", timeout=5)

def test_handle_popup():
    if PopupPage().confirm_btn.is_displayed():
        PopupPage().confirm_btn.click()</code></pre>
     </li>
    </ul>
    <h4>
     <strong>
      Q2：如何与 Allure 报告集成？
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        步骤
       </strong>
       ：
      </p>
      <ol>
       <li>
        <p>
         安装
         <code>
          pytest-allure
         </code>
         ：
        </p>
        <p>
         bash
        </p>
        <p>
         复制
        </p>
        <pre><code class="language-bash">pip install allure-pytest</code></pre>
       </li>
       <li>
        <p>
         运行测试并生成报告：
        </p>
        <p>
         bash
        </p>
        <p>
         复制
        </p>
        <pre><code class="language-bash">pytest --alluredir=./allure-results
allure serve ./allure-results</code></pre>
       </li>
      </ol>
     </li>
    </ul>
    <h4>
     <strong>
      Q3：如何复用公共页面组件？
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        方案
       </strong>
       ：通过类继承或 Mixin 模式复用组件。
      </p>
      <p>
       python
      </p>
      <p>
       复制
      </p>
      <pre><code class="language-python">class HeaderComponent(Page):
    home_link = Element(link_text="首页")

class HomePage(HeaderComponent):
    search_input = Element(id_="search")</code></pre>
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      8.总结
     </strong>
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        poium 优势
       </strong>
       ：简化元素操作、内置智能等待、提升代码可维护性，适合中大型项目。
      </p>
     </li>
     <li>
      <p>
       <strong>
        适用项目
       </strong>
       ：需要长期维护的 Web 自动化测试，尤其是遵循 Page Object 模式的项目。
      </p>
     </li>
    </ul>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33333539343537392f:61727469636c652f64657461696c732f313436323038393935" class_="artid" style="display:none">
 </p>
</div>


