---
layout: post
title: "如何在服务器上运行python文件"
date: 2024-12-25 07:46:32 +0800
description: "如何在个人服务器上运行python文件，首先我们需要准备的一些东西：1,有自己的云服务器，可以在腾讯"
keywords: "服务器运行python文件"
categories: ['未分类']
tags: ['运维', '服务器', 'Linux', 'Anaconda']
artid: "134709192"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=134709192
  alt: "如何在服务器上运行python文件"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=134709192
featuredImagePreview: https://bing.ee123.net/img/rand?artid=134709192
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     如何在服务器上运行python文件
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p id="main-toc">
     <strong>
      目录
     </strong>
    </p>
    <p id="-toc" style="margin-left:40px;">
    </p>
    <p id="%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87-toc" style="margin-left:40px;">
     <a href="#%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87" rel="nofollow">
      前置准备
     </a>
    </p>
    <p id="%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4-toc" style="margin-left:40px;">
     <a href="#%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4" rel="nofollow">
      详细步骤
     </a>
    </p>
    <p id="%E4%B8%80%EF%BC%8C%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85Anaconda-toc" style="margin-left:80px;">
     <a href="#%E4%B8%80%EF%BC%8C%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85Anaconda" rel="nofollow">
      一，在服务器安装Anaconda
     </a>
    </p>
    <p id="%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85-toc" style="margin-left:120px;">
     <a href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85" rel="nofollow">
      下载安装包
     </a>
    </p>
    <p id="%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8-toc" style="margin-left:120px;">
     <a href="#%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">
      上传文件到服务器
     </a>
    </p>
    <p id="%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83-toc" style="margin-left:120px;">
     <a href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83" rel="nofollow">
      安装环境
     </a>
    </p>
    <p id="%E4%BA%8C%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83-toc" style="margin-left:80px;">
     <a href="#%E4%BA%8C%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83" rel="nofollow">
      二，创建虚拟环境
     </a>
    </p>
    <p id="%E5%88%9B%E5%BB%BA%E7%8E%AF%E5%A2%83-toc" style="margin-left:120px;">
     <a href="#%E5%88%9B%E5%BB%BA%E7%8E%AF%E5%A2%83" rel="nofollow">
      创建环境
     </a>
    </p>
    <p id="%E4%B8%89%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%89%A7%E8%A1%8Cpython%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;">
     <a href="#%E4%B8%89%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%89%A7%E8%A1%8Cpython%E6%96%87%E4%BB%B6" rel="nofollow">
      三，测试执行python文件
     </a>
    </p>
    <p id="%E6%89%A7%E8%A1%8Cpython%E6%96%87%E4%BB%B6-toc" style="margin-left:120px;">
     <a href="#%E6%89%A7%E8%A1%8Cpython%E6%96%87%E4%BB%B6" rel="nofollow">
      执行python文件
     </a>
    </p>
    <p id="%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81-toc" style="margin-left:120px;">
     <a href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81" rel="nofollow">
      查看进程状态
     </a>
    </p>
    <p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:40px;">
     <a href="#%E6%80%BB%E7%BB%93" rel="nofollow">
      总结
     </a>
    </p>
    <hr id="hr-toc"/>
    <p>
    </p>
    <h3 id="%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87">
     前置准备
    </h3>
    <p>
     如何在个人服务器上运行python文件，首先我们需要准备的一些东西：
    </p>
    <ul>
     <li>
      有自己的云服务器，可以在腾讯云或者阿里云等商户租借服务器
     </li>
     <li>
      能够使用xshell等ssh连接工具软件连接到自己的服务器
     </li>
     <li>
      下载Linux版本的Anaconda用来运行python文件的安装环境
     </li>
    </ul>
    <p>
    </p>
    <h3 id="%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4">
     详细步骤
    </h3>
    <h4 id="%E4%B8%80%EF%BC%8C%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85Anaconda">
     一，在服务器安装Anaconda
    </h4>
    <h5 id="%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85">
     下载安装包
    </h5>
    <p>
     首先我们先下载Anaconda安装包，下载地址
     <a class="link-info" href="https://repo.anaconda.com/archive/" rel="nofollow" title="https://repo.anaconda.com/archive/">
      https://repo.anaconda.com/archive/
     </a>
    </p>
    <p>
     第二，找到我们要下载的安装包，注意是Linux版本，可以根据自己需求安装所需版本
    </p>
    <p class="img-center">
     <img alt="" height="244" src="https://i-blog.csdnimg.cn/blog_migrate/2879fe4254e92f7b88a036c60cc38ffc.png" width="414"/>
    </p>
    <p>
     下载可能有点慢，建议使用迅雷下载。
    </p>
    <h5 id="%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8">
     上传文件到服务器
    </h5>
    <p>
     下载完安装包后打开Xshell，连接自己的服务器。
    </p>
    <p>
     可以跳转到指定文件夹下安装（cd /test），也可以新建文件夹用来安装(mkdir test)
    </p>
    <p>
     <img alt="" height="66" src="https://i-blog.csdnimg.cn/blog_migrate/37edb561cf4b5fbdf8e7a052000f713c.png" width="277"/>
    </p>
    <p>
     <img alt="" height="49" src="https://i-blog.csdnimg.cn/blog_migrate/5d537d05cb0086a68cad043838c8841e.png" width="284"/>
    </p>
    <p>
     跳转到安装文件夹下后输入命令rz，找到安装包上传文件。
    </p>
    <p>
     上传成功后输入命令ls,可以看到当前文件是白色的，没有执行权限，输入命令修改权限
    </p>
    <pre><code class="hljs">chmod u+x Anaconda3-2022.05-Linux-x86_64.sh</code></pre>
    <p>
     输入ls查看，安装包显示绿色就ok。
    </p>
    <p>
     <img alt="" height="68" src="https://i-blog.csdnimg.cn/blog_migrate/85709b255636d856a003bcdb3c9e7f57.png" width="525"/>
    </p>
    <h5 id="%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83">
     安装环境
    </h5>
    <p>
     上传完成后就可以执行安装命令
    </p>
    <pre><code class="hljs">sh Anaconda3-2022.05-Linux-x86_64.sh</code></pre>
    <p>
     输入python进行测试是否安装完成。出现如下即为成功安装。
    </p>
    <p>
     <img alt="" height="125" src="https://i-blog.csdnimg.cn/blog_migrate/0305ae94fb33f495f2f574b5f8e7d42b.png" width="749"/>
    </p>
    <p>
     然后退出python，输入exit();
    </p>
    <p>
     接下来我们需进行以下环境配置
    </p>
    <pre><code class="hljs">vim ~/.bashrc</code></pre>
    <p class="img-center">
     <img alt="" height="309" src="https://i-blog.csdnimg.cn/blog_migrate/2b715975f1e981da21822ad0ddc404dc.png" width="499"/>
    </p>
    <p>
     输入O；
    </p>
    <p>
     在配置文件空白处添加如下配置，按“i”进入编辑模式：
    </p>
    <pre><code class="hljs">#为了避免与其他服务器用户产生命令冲突,使用自己的英文名+Python替代python 
alias namePython='/root/anaconda3/bin/python'   
#这里写anaconda的安装路径
export PATH="/root/anaconda3/bin:$PATH"</code></pre>
    <p class="img-center">
     <img alt="" height="298" src="https://i-blog.csdnimg.cn/blog_migrate/620f5408d5cf4a3fc3a83fadc9b4f117.png" width="463"/>
    </p>
    <p>
     完成后按“Esc”,退出编辑模式；紧接着按“：”，输入“wq!”保存退出。
    </p>
    <p>
     激活文件
    </p>
    <pre><code class="hljs">source ~/.bashrc</code></pre>
    <p>
     再次验证
    </p>
    <pre><code class="hljs">conda</code></pre>
    <p>
     conda命令可以使用，这样我们就安装完成了。
    </p>
    <h4 id="%E4%BA%8C%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83">
     <strong>
      二，创建虚拟环境
     </strong>
    </h4>
    <h5 id="%E5%88%9B%E5%BB%BA%E7%8E%AF%E5%A2%83">
     <strong>
      创建环境
     </strong>
    </h5>
    <pre><code class="hljs">conda create -n py39 python=3.9.12</code></pre>
    <p>
     创建完成后查看当前存在哪些虚拟环境
    </p>
    <pre><code class="hljs">conda env list</code></pre>
    <p>
     <img alt="" height="106" src="https://i-blog.csdnimg.cn/blog_migrate/b63a375d7dcd4c5c88fa0c15d0088cfe.png" width="409"/>
    </p>
    <p>
     激活虚拟环境，这里是你自己的环境名字
    </p>
    <pre><code class="hljs">source activate your_env_name</code></pre>
    <p>
     <img alt="" height="93" src="https://i-blog.csdnimg.cn/blog_migrate/c1144531f03d50716e0022aa05bdb238.png" width="520"/>
    </p>
    <p>
     查看安装了哪些包。自带的包较少，有些程序需要的包需要自己额外导入。
    </p>
    <pre><code class="hljs">conda list</code></pre>
    <pre><code class="hljs">conda install package_name(包名)</code></pre>
    <p>
     一些其他命令:
    </p>
    <pre><code class="hljs">conda update conda：               检查更新当前conda
conda search XXX                   搜索包，查看可安装版本
conda remove -n py36 --all         删除环境
conda deactivate                   退出虚拟环境，conda4之前版本：source deactivate
 
pip install --upgrade &lt;包的名字&gt;     更新包
pip install python_igraph          （import igraph包）</code></pre>
    <h4 id="%E4%B8%89%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%89%A7%E8%A1%8Cpython%E6%96%87%E4%BB%B6">
     三，测试执行python文件
    </h4>
    <h5 id="%E6%89%A7%E8%A1%8Cpython%E6%96%87%E4%BB%B6">
     执行python文件
    </h5>
    <ul>
     <li>
      我们在当前环境下输入rz命令上传.py文件。
     </li>
     <li>
      上传成功后输入执行python文件命令:
     </li>
    </ul>
    <pre><code class="hljs">nohup python3 -u main.py &gt;&gt; my.log 2&gt;&amp;1 &amp;
</code></pre>
    <h5 id="%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81">
     查看进程状态
    </h5>
    <ul>
     <li>
      在使用nohup启动python时，会生成一个进程ID
     </li>
     <li>
      可以使用 jobs -l 来查看当前终端的全部进程（该命令只适用于该终端窗口，若再开一个窗口需适用ps命令查看全局进程，如下命令）
     </li>
    </ul>
    <p>
     <img alt="" height="93" src="https://i-blog.csdnimg.cn/blog_migrate/1a969e52156a5dc2d954d664028e898d.png" width="828"/>
    </p>
    <p>
     Running说明程序正在成功运行。
    </p>
    <p>
     <img alt="" height="159" src="https://i-blog.csdnimg.cn/blog_migrate/3b13043bf38c1ed7495f2ade5f6c319b.png" width="814"/>
    </p>
    <ul>
     <li>
      还可以对改python程序进行暂停、恢复、杀死等操作
      <pre><code class="hljs">jobs -l 		     （当前终端查看全部进程）
ps -aux|grep 进程号  （全局各个新终端查看指定进程）
ps -ef 		        （全局全部进程）
kill -STOP 	进程号	（命令可以直接暂停一个后台任务）
kill -CONT 进程号	（命令可以直接恢复一个后台任务）
kill -9 进程号 	    （杀死进程）</code></pre>
      <p>
      </p>
     </li>
    </ul>
    <h3 id="%E6%80%BB%E7%BB%93">
     总结
    </h3>
    <p>
     做完这些我们已经能够在服务器上成功运行python文件，要注意的是脚本文件不依赖于图形界面，并且根据你的服务器环境和脚本需要的库，可能会需要安装额外的依赖项。
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35323634353133342f:61727469636c652f64657461696c732f313334373039313932" class_="artid" style="display:none">
 </p>
</div>
