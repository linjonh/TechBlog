---
layout: post
title: "Linux-硬件时间RTC-time系统时间UTC时间Universal-time本地时间Local-time时区Time-zone与夏令时DST解析"
date: 2023-10-22 17:40:46 +0800
description: "硬件时间，也被称为实时时钟（RTC），是指计算机主板上的一个独立于操作系统的设备，它在电源关闭甚至断"
keywords: "rtc time"
categories: ['Ubuntu', 'Linux']
tags: ['Ubuntu', 'Linux']
artid: "133975639"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=133975639
    alt: "Linux-硬件时间RTC-time系统时间UTC时间Universal-time本地时间Local-time时区Time-zone与夏令时DST解析"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=133975639
featuredImagePreview: https://bing.ee123.net/img/rand?artid=133975639
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Linux 硬件时间（RTC time）、系统时间（UTC时间、Universal time）、本地时间（Local time）、时区（Time zone）与夏令时（DST）解析
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#UTC_1" rel="nofollow">
        理解时间：硬件时间、系统时间（UTC时间）、本地时间、时区与夏令时
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1_RTC_time_5" rel="nofollow">
          1. 硬件时间（RTC time）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#11__7" rel="nofollow">
            1.1 硬件时间简介
           </a>
          </li>
          <li>
           <a href="#12__11" rel="nofollow">
            1.2 如何使用硬件时间
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#2_UTCUniversal_time_30" rel="nofollow">
          2. 系统时间（UTC时间）（Universal time）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#21__32" rel="nofollow">
            2.1 系统时间简介
           </a>
          </li>
          <li>
           <a href="#22_UTC_36" rel="nofollow">
            2.2 UTC时间
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#3_Local_time_58" rel="nofollow">
          3. 本地时间（Local time）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#31__60" rel="nofollow">
            3.1 本地时间简介
           </a>
          </li>
          <li>
           <a href="#32__64" rel="nofollow">
            3.2 如何使用本地时间
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#4_Time_zone_75" rel="nofollow">
          4. 时区（Time zone）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#41__77" rel="nofollow">
            4.1 时区简介
           </a>
          </li>
          <li>
           <a href="#42__81" rel="nofollow">
            4.2 如何设置时区
           </a>
          </li>
          <li>
           <a href="#43_docker_95" rel="nofollow">
            4.3 docker容器中的时区（与宿主机日期时间同步）
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#5_Daylight_Saving_TimeDST_122" rel="nofollow">
          5. 夏令时（Daylight Saving Time）（DST）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#51__124" rel="nofollow">
            5.1 夏令时简介
           </a>
          </li>
          <li>
           <a href="#52__128" rel="nofollow">
            5.2 夏令时地区
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_131" rel="nofollow">
              采用夏令时的地区
             </a>
            </li>
            <li>
             <a href="#_139" rel="nofollow">
              不采用夏令时的地区：
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#53__153" rel="nofollow">
            5.3 如何处理夏令时
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#6_ubuntu_timedatectl_173" rel="nofollow">
          6. ubuntu timedatectl命令示例：查看时间相关信息
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="UTC_1">
     </a>
     理解时间：硬件时间、系统时间（UTC时间）、本地时间、时区与夏令时
    </h2>
    <p>
     处理和管理时间是计算机科学的重要方面，但也是最复杂和容易混淆的方面之一。本文将详细介绍硬件时间、系统时间（UTC时间）、本地时间、时区和夏令时，希望能帮助读者更好地理解这些概念。
    </p>
    <h3>
     <a id="1_RTC_time_5">
     </a>
     1. 硬件时间（RTC time）
    </h3>
    <h4>
     <a id="11__7">
     </a>
     1.1 硬件时间简介
    </h4>
    <p>
     硬件时间，也被称为实时时钟（RTC），是指计算机主板上的一个独立于操作系统的设备，它在电源关闭甚至断电情况下也能保持运行。其功能是记录当前的日期和时间。
    </p>
    <h4>
     <a id="12__11">
     </a>
     1.2 如何使用硬件时间
    </h4>
    <p>
     大部分操作系统在启动时会从RTC读取时间，然后设置系统时间。同样，操作系统也可以将系统时间写回到RTC中。
    </p>
    <p>
     在Unix和类Unix系统中，
     <code>
      hwclock
     </code>
     命令可以用来查询和设置RTC时间。例如：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 查询硬件时间</span>
hwclock <span class="token parameter variable">--show</span>

<span class="token comment"># 将系统时间设置为硬件时间</span>
hwclock <span class="token parameter variable">--systohc</span>

<span class="token comment"># 将硬件时间设置为系统时间</span>
hwclock <span class="token parameter variable">--hctosys</span>
</code></pre>
    <p>
     在Windows系统中，可以通过日期和时间设置对话框或
     <code>
      time
     </code>
     命令查询和设置RTC时间。
    </p>
    <h3>
     <a id="2_UTCUniversal_time_30">
     </a>
     2. 系统时间（UTC时间）（Universal time）
    </h3>
    <h4>
     <a id="21__32">
     </a>
     2.1 系统时间简介
    </h4>
    <p>
     系统时间是计算机内部使用的时间，它通常在启动时从RTC设置，然后由系统时钟进行跟踪。系统时钟是操作系统内核的一部分，可以以毫秒或纳秒级别提供精确时间。
    </p>
    <h4>
     <a id="22_UTC_36">
     </a>
     2.2 UTC时间
    </h4>
    <p>
     系统时间通常使用协调世界时（UTC）表示。UTC是一种基于原子时钟的时间标准，全球各地的科学家通过精密测量来维护它。它与格林尼治标准时间（GMT）非常接近，但不受地球自转速度变化的影响。
    </p>
    <p>
     在Unix和类Unix系统中，
     <code>
      date
     </code>
     命令可以用来查询和设置系统时间：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 查询系统时间（UTC）</span>
<span class="token function">date</span> <span class="token parameter variable">-u</span>

<span class="token comment"># 查询本地时间（由系统时间UTC和时区共同决定）</span>
<span class="token function">date</span>

<span class="token comment"># 设置本地时间（后面那串是本地时间）（设置本地时间会同样设置系统时间，只不过会自动帮你做时区转换）</span>
<span class="token function">date</span> <span class="token parameter variable">-s</span> <span class="token string">"2022-01-01 00:00:00"</span>

<span class="token comment"># 直接设置系统时间（不推荐，一般通过设置本地时间来设置系统时间，因为这样设置你还得把后面那串时间计算一下时区）</span>
<span class="token function">date</span> <span class="token parameter variable">-u</span> <span class="token parameter variable">-s</span> <span class="token string">"2022-01-01 00:00:00"</span>
</code></pre>
    <p>
     在Windows系统中，可以通过日期和时间设置对话框或
     <code>
      time
     </code>
     命令查询和设置系统时间。
    </p>
    <h3>
     <a id="3_Local_time_58">
     </a>
     3. 本地时间（Local time）
    </h3>
    <h4>
     <a id="31__60">
     </a>
     3.1 本地时间简介
    </h4>
    <p>
     本地时间是系统时间经过时区转换后的时间。时区是根据地理位置确定的，全球分为24个时区，每个时区大约代表15度的经度。例如，北京时间是UTC+8，而伦敦时间是UTC+0。
    </p>
    <h4>
     <a id="32__64">
     </a>
     3.2 如何使用本地时间
    </h4>
    <p>
     在Unix和类Unix系统中，
     <code>
      date
     </code>
     命令默认显示的是本地时间：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 查询本地时间</span>
<span class="token function">date</span>
</code></pre>
    <p>
     在Windows系统中，日期和时间设置对话框或
     <code>
      time
     </code>
     命令默认显示的也是本地时间。
    </p>
    <h3>
     <a id="4_Time_zone_75">
     </a>
     4. 时区（Time zone）
    </h3>
    <h4>
     <a id="41__77">
     </a>
     4.1 时区简介
    </h4>
    <p>
     时区是为了方便统一时间而划分的地理区域。全球被划分为24个时区，每个时区大约代表15度的经度。各时区的时间以UTC（协调世界时）为基准，东边的时区比UTC时间晚，西边的时区比UTC时间早。
    </p>
    <h4>
     <a id="42__81">
     </a>
     4.2 如何设置时区
    </h4>
    <p>
     在Unix和类Unix系统中，可以使用
     <code>
      tzselect
     </code>
     命令选择时区，然后将选定的时区链接到
     <code>
      /etc/localtime
     </code>
     ：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 选择时区</span>
tzselect

<span class="token comment"># 设置时区</span>
<span class="token function">ln</span> <span class="token parameter variable">-sf</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</code></pre>
    <p>
     在Windows系统中，可以通过日期和时间设置对话框更改时区。
    </p>
    <h4>
     <a id="43_docker_95">
     </a>
     4.3 docker容器中的时区（与宿主机日期时间同步）
    </h4>
    <p>
     Docker容器的默认时区取决于使用的基础镜像。许多常见的基础镜像（例如Debian，Ubuntu等）的默认时区通常是UTC（协调世界时）。这意味着如果没有在创建或运行Docker容器时显式设置一个特定的时区，那么容器内部的时间将按照UTC来显示。
    </p>
    <p>
     如果希望docker容器中的时区与宿主机保持一致，可以在容器docker run的时候增加以下挂载：
    </p>
    <pre><code class="prism language-go"><span class="token operator">-</span>v <span class="token operator">/</span>etc<span class="token operator">/</span>localtime<span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>localtime<span class="token punctuation">:</span>ro \
<span class="token operator">-</span>v <span class="token operator">/</span>etc<span class="token operator">/</span>timezone<span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>timezone<span class="token punctuation">:</span>ro\
</code></pre>
    <ul>
     <li>
      <p>
       <code>
        /etc/timezone
       </code>
       : 这个文件包含了当前设置的时区信息。比如，如果系统设置为美国东部时区，这个文件的内容可能会是
       <code>
        America/New_York
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       <code>
        /etc/localtime
       </code>
       : 这个文件是当前设定的时区对应的数据文件的复制品或者软链接。这个文件用于提供本地化的日期和时间显示。
      </p>
     </li>
    </ul>
    <p>
     这两个文件在系统中扮演着不同的角色，而且都是影响系统时间表现的重要因素。如果希望让Docker容器的时间与宿主机完全一致，那么在运行容器时需要同时挂载这两个文件：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-v</span> /etc/timezone:/etc/timezone:ro <span class="token parameter variable">-v</span> /etc/localtime:/etc/localtime:ro your_image
</code></pre>
    <p>
     只挂载
     <code>
      /etc/timezone
     </code>
     或
     <code>
      /etc/localtime
     </code>
     可能会导致一些问题，比如在处理跨时区的日期和时间时可能出现错误。
    </p>
    <p>
     默认情况下，Docker容器并不会自动挂载
     <code>
      /etc/localtime
     </code>
     文件。容器是通过宿主机的内核获取物理时间的。
    </p>
    <p>
     Docker容器虽然在很多方面都与宿主机隔离，但它们共享同一个内核。这意味着，当容器需要获取当前的物理时间（例如，调用
     <code>
      time()
     </code>
     系统调用）时，它会直接从宿主机的内核获取这个信息。这就是为什么即使不挂载
     <code>
      /etc/localtime
     </code>
     ，容器中的程序仍然能够获取到正确的物理时间。
    </p>
    <p>
     然而，时区信息并不只是物理时间，它还涉及到逻辑时间的处理，包括日历计算、夏令时调整等等。这些信息是存储在
     <code>
      /etc/timezone
     </code>
     和
     <code>
      /etc/localtime
     </code>
     这两个文件中的。如果希望容器中的程序能够正确地处理这些时区相关的问题，那么需要将这两个文件同时挂载到容器中，缺一不可。
    </p>
    <h3>
     <a id="5_Daylight_Saving_TimeDST_122">
     </a>
     5. 夏令时（Daylight Saving Time）（DST）
    </h3>
    <h4>
     <a id="51__124">
     </a>
     5.1 夏令时简介
    </h4>
    <p>
     夏令时是为了利用日照时间而在夏季调整时间的做法。通常情况下，夏令时会在春末将时间提前一小时，然后在秋初再把时间延后一小时。这样可以使人们在夜晚有更多的日光，从而节省电力。
    </p>
    <h4>
     <a id="52__128">
     </a>
     5.2 夏令时地区
    </h4>
    <p>
     夏令时在全球范围内的采用情况并不统一，很多国家或地区都有自己特定的规定。
    </p>
    <h5>
     <a id="_131">
     </a>
     采用夏令时的地区
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        欧洲
       </strong>
       ：大部分欧洲国家在每年3月的最后一个星期日开始夏令时，到10月的最后一个星期日结束。这包括英国、法国、德国、西班牙等国。
      </p>
     </li>
     <li>
      <p>
       <strong>
        北美
       </strong>
       ：包括美国（除了亚利桑那州和夏威夷）、加拿大（除了萨斯喀彻温省和一些地方）和墨西哥的一些地区。北美的夏令时从每年3月的第二个星期日开始，到11月的第一个星期日结束。
      </p>
     </li>
     <li>
      <p>
       <strong>
        澳大利亚
       </strong>
       ：只有南澳大利亚州、新南威尔士州、塔斯马尼亚州和维多利亚州实行夏令时，从每年10月的第一个星期日开始，到次年4月的第一个星期日结束。
      </p>
     </li>
    </ol>
    <h5>
     <a id="_139">
     </a>
     不采用夏令时的地区：
    </h5>
    <ol>
     <li>
      <p>
       <strong>
        中国
       </strong>
       ：中国自1991年起就未再实行夏令时。
      </p>
     </li>
     <li>
      <p>
       <strong>
        日本
       </strong>
       ：日本自1952年以来就没有实行夏令时。
      </p>
     </li>
     <li>
      <p>
       <strong>
        印度
       </strong>
       ：印度没有实行夏令时。
      </p>
     </li>
     <li>
      <p>
       <strong>
        亚利桑那州和夏威夷
       </strong>
       ：这两个美国的地区不采用夏令时。
      </p>
     </li>
     <li>
      <p>
       <strong>
        大部分非洲和南美洲国家
       </strong>
       ：除了一些特定的国家或地区，大部分非洲和南美洲的国家都不实行夏令时。
      </p>
     </li>
    </ol>
    <h4>
     <a id="53__153">
     </a>
     5.3 如何处理夏令时
    </h4>
    <p>
     大多数现代操作系统和编程语言的时间库都可以自动处理夏令时。例如，在Python中，
     <code>
      pytz
     </code>
     库提供了世界各地的时区数据，并可以自动处理夏令时：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token keyword">import</span> pytz

<span class="token comment"># 获取当前的UTC时间</span>
now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span>pytz<span class="token punctuation">.</span>utc<span class="token punctuation">)</span>

<span class="token comment"># 转换为纽约时间（自动处理夏令时）</span>
ny_time <span class="token operator">=</span> now<span class="token punctuation">.</span>astimezone<span class="token punctuation">(</span>pytz<span class="token punctuation">.</span>timezone<span class="token punctuation">(</span><span class="token string">'America/New_York'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>ny_time<span class="token punctuation">)</span>
</code></pre>
    <p>
     同样，在Unix和类Unix系统中，只要正确设置了时区，系统就会自动处理夏令时。
    </p>
    <h3>
     <a id="6_ubuntu_timedatectl_173">
     </a>
     6. ubuntu timedatectl命令示例：查看时间相关信息
    </h3>
    <p>
     在ubuntu里，可使用
     <code>
      timedatectl
     </code>
     查看以上相应概念：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1f03276ccf7c58416e9f77126b896f72.png"/>
    </p>
    <p>
     如图，命令结果展示了本地时间（Local time）、系统时间（Universal time）、硬件时间（RTC time）、时区（Time zone）等信息。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f446f6e746c612f:61727469636c652f64657461696c732f313333393735363339" class_="artid" style="display:none">
 </p>
</div>


