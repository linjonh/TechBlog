---
layout: post
title: "详细介绍c中的文件处理"
date: 2025-03-09 20:21:54 +0800
description: "C++ 的文件处理功能非常强大，能够满足大多数文件操作需求。通过ifstreamofstream和fstream，可以轻松实现文件的读取、写入和追加操作。对于二进制文件，可以使用read()和write()函数进行高效的数据处理。文件指针操作则提供了对文件内容的精确控制。"
keywords: "详细介绍c++中的文件处理"
categories: ['未分类']
tags: ['算法', '开发语言', 'C']
artid: "146137959"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146137959
    alt: "详细介绍c中的文件处理"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146137959
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146137959
cover: https://bing.ee123.net/img/rand?artid=146137959
image: https://bing.ee123.net/img/rand?artid=146137959
img: https://bing.ee123.net/img/rand?artid=146137959
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     详细介绍c++中的文件处理
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     C++ 中的文件处理是通过标准库中的
     <code>
      &lt;fstream&gt;
     </code>
     头文件提供的类来实现的。文件处理主要包括文件的打开、读取、写入和关闭等操作。C++ 提供了三个主要的类来处理文件：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        <code>
         std::ifstream
        </code>
       </strong>
       ：用于从文件中读取数据（输入文件流）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         std::ofstream
        </code>
       </strong>
       ：用于向文件中写入数据（输出文件流）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        <code>
         std::fstream
        </code>
       </strong>
       ：既可以用于读取文件，也可以用于写入文件（输入输出文件流）。
      </p>
     </li>
    </ol>
    <p>
     这些类都继承自
     <code>
      std::istream
     </code>
     和
     <code>
      std::ostream
     </code>
     ，因此可以使用类似于
     <code>
      std::cin
     </code>
     和
     <code>
      std::cout
     </code>
     的操作来处理文件。
    </p>
    <hr/>
    <h3>
     文件处理的基本步骤
    </h3>
    <ol>
     <li>
      <p>
       <strong>
        打开文件
       </strong>
       ：使用
       <code>
        open()
       </code>
       函数或构造函数打开文件。
      </p>
     </li>
     <li>
      <p>
       <strong>
        检查文件是否成功打开
       </strong>
       ：使用
       <code>
        is_open()
       </code>
       函数检查文件是否成功打开。
      </p>
     </li>
     <li>
      <p>
       <strong>
        读取或写入文件
       </strong>
       ：使用流操作符（
       <code>
        &gt;&gt;
       </code>
       、
       <code>
        &lt;&lt;
       </code>
       ）或成员函数（如
       <code>
        get()
       </code>
       、
       <code>
        getline()
       </code>
       、
       <code>
        read()
       </code>
       、
       <code>
        write()
       </code>
       ）进行文件操作。
      </p>
     </li>
     <li>
      <p>
       <strong>
        关闭文件
       </strong>
       ：使用
       <code>
        close()
       </code>
       函数关闭文件。
      </p>
     </li>
    </ol>
    <h3>
     文件打开模式
    </h3>
    <p>
     在打开文件时，可以指定文件的打开模式。常用的文件打开模式如下：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        模式标志
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         std::ios::in
        </code>
       </td>
       <td>
        打开文件用于读取（默认模式，适用于
        <code>
         ifstream
        </code>
        ）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         std::ios::out
        </code>
       </td>
       <td>
        打开文件用于写入（默认模式，适用于
        <code>
         ofstream
        </code>
        ）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         std::ios::app
        </code>
       </td>
       <td>
        追加模式，所有写入操作都在文件末尾进行。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         std::ios::ate
        </code>
       </td>
       <td>
        打开文件后，将文件指针定位到文件末尾。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         std::ios::trunc
        </code>
       </td>
       <td>
        如果文件已存在，则清空文件内容（默认模式，适用于
        <code>
         ofstream
        </code>
        ）。
       </td>
      </tr>
      <tr>
       <td>
        <code>
         std::ios::binary
        </code>
       </td>
       <td>
        以二进制模式打开文件（默认是文本模式）。
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     这些模式可以通过按位或操作符
     <code>
      |
     </code>
     组合使用。
    </p>
    <p>
    </p>
    <h3>
     文件读取和写入
    </h3>
    <h4>
     1. 使用
     <code>
      std::ifstream
     </code>
     读取文件
    </h4>
    <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;string&gt;

int main() {
    std::ifstream inputFile("example.txt"); // 打开文件
    if (!inputFile.is_open()) {
        std::cerr &lt;&lt; "Failed to open the file!" &lt;&lt; std::endl;
        return 1;
    }

    std::string line;
    while (std::getline(inputFile, line)) { // 逐行读取文件
        std::cout &lt;&lt; line &lt;&lt; std::endl;
    }

    inputFile.close(); // 关闭文件
    return 0;
}</code></pre>
    <h4>
     2. 使用
     <code>
      std::ofstream
     </code>
     写入文件
    </h4>
    <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;

int main() {
    std::ofstream outputFile("example.txt", std::ios::out | std::ios::trunc); // 打开文件并清空内容
    if (!outputFile.is_open()) {
        std::cerr &lt;&lt; "Failed to open the file!" &lt;&lt; std::endl;
        return 1;
    }

    outputFile &lt;&lt; "Hello, World!" &lt;&lt; std::endl; // 写入数据
    outputFile &lt;&lt; "This is a test file." &lt;&lt; std::endl;

    outputFile.close(); // 关闭文件
    return 0;
}</code></pre>
    <h4>
     3. 使用
     <code>
      std::fstream
     </code>
     进行读写
    </h4>
    <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;string&gt;

int main() {
    std::fstream file("example.txt", std::ios::in | std::ios::out | std::ios::app); // 打开文件并追加
    if (!file.is_open()) {
        std::cerr &lt;&lt; "Failed to open the file!" &lt;&lt; std::endl;
        return 1;
    }

    // 写入数据
    file &lt;&lt; "Appending a new line." &lt;&lt; std::endl;

    // 读取数据
    file.seekg(0); // 将文件指针移动到文件开头
    std::string line;
    while (std::getline(file, line)) {
        std::cout &lt;&lt; line &lt;&lt; std::endl;
    }

    file.close(); // 关闭文件
    return 0;
}</code></pre>
    <h3>
     二进制文件处理
    </h3>
    <p>
     二进制文件处理与文本文件处理类似，但需要使用
     <code>
      std::ios::binary
     </code>
     模式打开文件，并使用
     <code>
      read()
     </code>
     和
     <code>
      write()
     </code>
     函数进行读写。
    </p>
    <h4>
     1. 写入二进制文件
    </h4>
    <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;

struct Data {
    int id;
    char name[20];
};

int main() {
    std::ofstream outputFile("data.bin", std::ios::out | std::ios::binary);
    if (!outputFile.is_open()) {
        std::cerr &lt;&lt; "Failed to open the file!" &lt;&lt; std::endl;
        return 1;
    }

    Data data = {1, "John Doe"};
    outputFile.write(reinterpret_cast&lt;char*&gt;(&amp;data), sizeof(data)); // 写入二进制数据

    outputFile.close();
    return 0;
}</code></pre>
    <h4>
     2. 读取二进制文件
    </h4>
    <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;

struct Data {
    int id;
    char name[20];
};

int main() {
    std::ifstream inputFile("data.bin", std::ios::in | std::ios::binary);
    if (!inputFile.is_open()) {
        std::cerr &lt;&lt; "Failed to open the file!" &lt;&lt; std::endl;
        return 1;
    }

    Data data;
    inputFile.read(reinterpret_cast&lt;char*&gt;(&amp;data), sizeof(data)); // 读取二进制数据

    std::cout &lt;&lt; "ID: " &lt;&lt; data.id &lt;&lt; ", Name: " &lt;&lt; data.name &lt;&lt; std::endl;

    inputFile.close();
    return 0;
}</code></pre>
    <p>
    </p>
    <h3>
     文件指针操作
    </h3>
    <p>
     文件指针用于定位文件中的读写位置。C++ 提供了以下函数来操作文件指针：
    </p>
    <p>
     <code>
      1.tellg()
     </code>
     ：返回输入文件指针的当前位置。
    </p>
    <p>
     <code>
      2.tellp()
     </code>
     ：返回输出文件指针的当前位置。
    </p>
    <p>
     <code>
      3.seekg(offset, direction)
     </code>
     ：移动输入文件指针。
    </p>
    <p>
     <code>
      4.seekp(offset, direction)
     </code>
     ：移动输出文件指针。
    </p>
    <p>
     其中，
     <code>
      direction
     </code>
     可以是：
    </p>
    <p>
     <code>
      1.std::ios::beg
     </code>
     ：文件开头。
    </p>
    <p>
     <code>
      2.std::ios::cur
     </code>
     ：当前位置。
    </p>
    <p>
     <code>
      3.std::ios::end
     </code>
     ：文件末尾。
    </p>
    <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;

int main() {
    std::fstream file("example.txt", std::ios::in | std::ios::out);
    if (!file.is_open()) {
        std::cerr &lt;&lt; "Failed to open the file!" &lt;&lt; std::endl;
        return 1;
    }

    file &lt;&lt; "Hello, World!" &lt;&lt; std::endl;

    file.seekg(0); // 将文件指针移动到开头
    std::string line;
    std::getline(file, line);
    std::cout &lt;&lt; "First line: " &lt;&lt; line &lt;&lt; std::endl;

    file.close();
    return 0;
}</code></pre>
    <p>
    </p>
    <h3>
     总结
    </h3>
    <p>
     C++ 的文件处理功能非常强大，能够满足大多数文件操作需求。通过
     <code>
      ifstream
     </code>
     、
     <code>
      ofstream
     </code>
     和
     <code>
      fstream
     </code>
     ，可以轻松实现文件的读取、写入和追加操作。对于二进制文件，可以使用
     <code>
      read()
     </code>
     和
     <code>
      write()
     </code>
     函数进行高效的数据处理。文件指针操作则提供了对文件内容的精确控制。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36333734333630372f:61727469636c652f64657461696c732f313436313337393539" class_="artid" style="display:none">
 </p>
</div>


