---
layout: post
title: "java代码中获取full-gcyoung-gc情况"
date: 2024-12-21 20:32:27 +0800
description: "对于大型的高并发服务，我们可能需要定时或实时获取进程的gc情况，很荣幸，java给我们提供了现成的方"
keywords: "java 获取young"
categories: ['理解Java']
tags: ['无标签']
artid: "90297453"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=90297453
    alt: "java代码中获取full-gcyoung-gc情况"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=90297453
featuredImagePreview: https://bing.ee123.net/img/rand?artid=90297453
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     java代码中获取full gc、young gc情况
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      对于大型的高并发服务，我们可能需要定时或实时获取进程的gc情况，很荣幸，java给我们提供了现成的方法。
     </p>
    </blockquote>
    <pre><code>    private static void reportGC(ReportAPI reporter) {
        long fullCount = 0, fullTime = 0, youngCount = 0, youngTime = 0;
        List&lt;GarbageCollectorMXBean&gt; gcs = ManagementFactory.getGarbageCollectorMXBeans();
        for (GarbageCollectorMXBean gc : gcs) {
            switch (GarbageCollectorName.of(gc.getName())) {
                case MarkSweepCompact:
                case PSMarkSweep:
                case ConcurrentMarkSweep:
                    fullCount += gc.getCollectionCount();
                    fullTime += gc.getCollectionTime();
                    break;
                case Copy:
                case ParNew:
                case PSScavenge:
                    youngCount += gc.getCollectionCount();
                    youngTime += gc.getCollectionTime();
                    break;
            }
            //todo your deal code， perfcounter report or write log here
        }
</code></pre>
    <blockquote>
     <p>
      getGarbageCollectorMXBeans可以获取JVM中不同的对象列表，从中找出我们的jvm.properties中配置使用的gc方法，分别进行统计次数及时间即可。
     </p>
    </blockquote>
    <pre><code>    /**
     * Returns a list of {@link GarbageCollectorMXBean} objects
     * in the Java virtual machine.
     * The Java virtual machine may have one or more
     * &lt;tt&gt;GarbageCollectorMXBean&lt;/tt&gt; objects.
     * It may add or remove &lt;tt&gt;GarbageCollectorMXBean&lt;/tt&gt;
     * during execution.
     *
     * @return a list of &lt;tt&gt;GarbageCollectorMXBean&lt;/tt&gt; objects.
     *
     */
    public static List&lt;GarbageCollectorMXBean&gt; getGarbageCollectorMXBeans() {
        return ManagementFactoryHelper.getGarbageCollectorMXBeans();
    }
</code></pre>
    <p>
     拿到full gc时间、次数及young gc时间及次数，进行后续的具体分析就可以了。
    </p>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6368616e6c6c656e6765:2f61727469636c652f64657461696c732f3930323937343533" class_="artid" style="display:none">
 </p>
</div>


