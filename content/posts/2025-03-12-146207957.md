---
layout: post
title: "vue-仿deepseek前端开发一个对话界面"
date: 2025-03-12 19:03:22 +0800
description: "后端：调用deepseek的api，所以返回数据格式和deepseek相同这只是初步的项目，仅支持文本输入懒得分步写了，直接贴完整代码吧。"
keywords: "vue 仿deepseek"
categories: ['前端']
tags: ['前端', 'Vue', 'Javascript']
artid: "146207957"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146207957
    alt: "vue-仿deepseek前端开发一个对话界面"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146207957
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146207957
cover: https://bing.ee123.net/img/rand?artid=146207957
image: https://bing.ee123.net/img/rand?artid=146207957
img: https://bing.ee123.net/img/rand?artid=146207957
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     vue 仿deepseek前端开发一个对话界面
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     后端：调用deepseek的api，所以返回数据格式和deepseek相同
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span><span class="token string-property property">"model"</span><span class="token operator">:</span> <span class="token string">"DeepSeek-R1-Distill-Qwen-1.5B"</span><span class="token punctuation">,</span> <span class="token string-property property">"choices"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string-property property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"，有什么"</span><span class="token punctuation">,</span> <span class="token string-property property">"tool_calls"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string-property property">"finish_reason"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string-property property">"logprobs"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">"prompt_tokens"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string-property property">"completion_tokens"</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string-property property">"total_tokens"</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string-property property">"id"</span><span class="token operator">:</span> <span class="token string">"chatcmpl-203a3024a36e4c02b02200ca47d8901e"</span><span class="token punctuation">,</span> <span class="token string-property property">"object"</span><span class="token operator">:</span> <span class="token string">"chat.completion.chunk"</span><span class="token punctuation">,</span> <span class="token string-property property">"created"</span><span class="token operator">:</span> <span class="token number">1741766893</span><span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1396805a19fd4636a5efead6d16c7beb.png">
      <br/>
      前端开发的几个注意点：
     </img>
    </p>
    <ol>
     <li>
      将后端返回的文本转换为html展示在页面上，注意调整样式
     </li>
     <li>
      模拟打字形式，页面随之滚动
     </li>
     <li>
      撑开的输入框和对话内容部分样式调整
     </li>
     <li>
      测试多种文本输入，例如含有html标签的
     </li>
     <li>
      记录思考时间，思考内容模仿deepseek做收起
     </li>
    </ol>
    <p>
     这只是初步的项目，仅支持文本输入
     <br/>
     懒得分步写了，直接贴完整代码吧
    </p>
    <p>
     <strong>
     </strong>
    </p>
    <h2>
     有些地方可能写得比较繁琐
     <br/>
     比如判断思考内容那段，只能通过think标签判断吗？
     <br/>
     请各位多多指点，欢迎交流！！
    </h2>
    <br/>
    <br/>
    <p>
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-window"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-title"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> answerTitle <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"choicedTasks.name"</span> placeholder<span class="token operator">=</span><span class="token string">"请选择任务"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"sangedianBtn"</span> readonly<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>template #append<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ec-font icon-sangedian"</span> @click<span class="token operator">=</span><span class="token string">"isShowTask = true"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-container"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-welcome"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"contentList.length == 0"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> welcome<span class="token punctuation">.</span>title <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> welcome<span class="token punctuation">.</span>desc <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-box"</span> v<span class="token operator">-</span><span class="token keyword">else</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"{ height: answerContHeight }"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">"logContainer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-content"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>row v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, i) in contentList"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"i"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"chat-assistant"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>transition name<span class="token operator">=</span><span class="token string">"fade"</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>div <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"['answer-cont', item.type === 'send' ? 'end' : 'start']"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>img v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"item.type == 'answer'"</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"welcome.icon"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item.type === 'send' ? 'send-item' : 'answer-item'"</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"item.type == 'answer'"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hashrate-markdown"</span> v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">"item.message"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> item<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 增加复制 <span class="token operator">--</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"item.type == 'answer' &amp;&amp; !isTalking"</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>tooltip centent<span class="token operator">=</span><span class="token string">"复制"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ec-font icon-ticket"</span> @click<span class="token operator">=</span><span class="token string">"copyMsg(item.message)"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tooltip<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"text-align: center; margin-top: 10px"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"chat-add"</span> @click<span class="token operator">=</span><span class="token string">"newChat"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ec-font icon-tianjia1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            新建对话
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-send"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>textarea
          @keydown<span class="token punctuation">.</span>enter<span class="token operator">=</span><span class="token string">"enterMessage"</span>
          ref<span class="token operator">=</span><span class="token string">"input"</span>
          v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"inputMessage"</span>
          @input<span class="token operator">=</span><span class="token string">"adjustInputHeight"</span>
          placeholder<span class="token operator">=</span><span class="token string">"输入消息..."</span>
          <span class="token operator">:</span>rows<span class="token operator">=</span><span class="token string">"2"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
          v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"inputMessage"</span>
          <span class="token operator">:</span>autosize<span class="token operator">=</span><span class="token string">"{ minRows: 2, maxRows: 5 }"</span>
          type<span class="token operator">=</span><span class="token string">"textarea"</span>
          @keyup<span class="token punctuation">.</span>enter<span class="token operator">=</span><span class="token string">"enterMessage"</span>
          placeholder<span class="token operator">=</span><span class="token string">"Please input"</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"talk-btn-cont"</span> style<span class="token operator">=</span><span class="token string">"text-align: right"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img @click<span class="token operator">=</span><span class="token string">"sendMessage"</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"iconImg"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>copyrightContent <span class="token operator">:</span>systemNameOption<span class="token operator">=</span><span class="token string">"systemNameOption"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>taskDialog v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"isShowTask"</span> <span class="token operator">:</span>choicedTasks<span class="token operator">=</span><span class="token string">"choicedTasks"</span> v<span class="token operator">-</span>model<span class="token operator">:</span>isShow<span class="token operator">=</span><span class="token string">"isShowTask"</span> @confirm<span class="token operator">=</span><span class="token string">"confirmTask"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> taskDialog <span class="token keyword">from</span> <span class="token string">'@/views/chat/task/taskDialog.vue'</span>
<span class="token keyword">import</span> copyrightContent <span class="token keyword">from</span> <span class="token string">'@/views/chat/talking/components/copyright.vue'</span>
<span class="token keyword">import</span> hljs <span class="token keyword">from</span> <span class="token string">'highlight.js'</span>
<span class="token keyword">import</span> <span class="token string">'highlight.js/styles/a11y-dark.css'</span>
<span class="token keyword">import</span> MarkdownIt <span class="token keyword">from</span> <span class="token string">'markdown-it'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> VSConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/config/envConfig'</span>

window<span class="token punctuation">.</span><span class="token function-variable function">hiddenThink</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 隐藏思考内容</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">think_content_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">==</span> <span class="token string">'none'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">think_content_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">think_icon_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'icon-a-xiangshang3'</span><span class="token punctuation">,</span> <span class="token string">'icon-a-xiangxia3'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">think_content_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">think_icon_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'icon-a-xiangxia3'</span><span class="token punctuation">,</span> <span class="token string">'icon-a-xiangshang3'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">isCollapsed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">activeChat</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">activeTitle</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">chat_style_setting</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">systemNameOption</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> taskDialog<span class="token punctuation">,</span> copyrightContent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">inputMessage</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">choicedTasks</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">uuid</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">isShowTask</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">contentList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">eventSourceChat</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">markdownIt</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">startAnwer</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">startTime</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">endTime</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">thinkTime</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">answerTitle</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">talkUUID</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">refreshHistoryFlag</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否已经生成了对话uuid,生成了的话就刷新历史列表</span>
      <span class="token literal-property property">msgHight</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">isTalking</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否在对话中,处于对话中则展示休止按钮</span>
      <span class="token literal-property property">welcome</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'很高兴见到你！'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">'我可以帮你写代码、读文件、写作各种创意内容，请把你的任务交给我吧～'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/image/AI.png'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">store</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">activeTitle</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 重命名了对话</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>answerTitle <span class="token operator">=</span> val
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">activeChat</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>answerTitle <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>talkUUID <span class="token operator">=</span> val <span class="token operator">||</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>refreshHistoryFlag <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isTalking <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 滚动回到顶部</span>
        <span class="token keyword">const</span> logContainer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>logContainer
        <span class="token keyword">if</span> <span class="token punctuation">(</span>logContainer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          logContainer<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTalkDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>contentList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">chat_style_setting</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>welcome<span class="token punctuation">.</span>title <span class="token operator">=</span> val<span class="token punctuation">.</span>welcome_speech_style <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>welcome<span class="token punctuation">.</span>title
      <span class="token keyword">this</span><span class="token punctuation">.</span>welcome<span class="token punctuation">.</span>desc <span class="token operator">=</span> val<span class="token punctuation">.</span>description_style <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>welcome<span class="token punctuation">.</span>desc
      <span class="token keyword">this</span><span class="token punctuation">.</span>welcome<span class="token punctuation">.</span>icon <span class="token operator">=</span> val<span class="token punctuation">.</span>icon_image <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>welcome<span class="token punctuation">.</span>icon
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">iconImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 对话中可能有输入</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isTalking<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'/src/assets/image/chat/stop.png'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
          <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token operator">||</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r?\n</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'/src/assets/image/chat/unsend.png'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'/src/assets/image/chat/send.png'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">answerContHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 回到初始值</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msgHight <span class="token operator">==</span> <span class="token string">'56px'</span> <span class="token operator">?</span> <span class="token string">'calc(100% - 140px)'</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">calc(100% - 140px - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>msgHight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> + 56px)</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>store <span class="token operator">=</span> <span class="token function">mainStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>markdownIt <span class="token operator">=</span> <span class="token function">MarkdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">linkify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function-variable function">highlight</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>lang <span class="token operator">&amp;&amp;</span> hljs<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span>lang<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> hljs<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">language</span><span class="token operator">:</span> lang <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>__<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">''</span> <span class="token comment">// use external default escaping</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">getTalkDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      chat
        <span class="token punctuation">.</span><span class="token function">historyDetail</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">uuid</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>activeChat
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>contentList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            res<span class="token punctuation">.</span>info<span class="token punctuation">.</span>history_meta <span class="token operator">&amp;&amp;</span>
              res<span class="token punctuation">.</span>info<span class="token punctuation">.</span>history_meta<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>conversation_type <span class="token operator">==</span> <span class="token string">'Answer'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  <span class="token comment">// 增加一个历史思考记录收起吧</span>
                  item<span class="token punctuation">.</span>context <span class="token operator">=</span> item<span class="token punctuation">.</span>context
                    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;think&gt;\n\n&lt;\/think&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>
                      <span class="token string">'&lt;think&gt;'</span><span class="token punctuation">,</span>
                      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="think-time"&gt;历史思考&lt;i id="think_icon_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" onclick="hiddenThink(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)" class="ec-font icon-a-xiangxia3"&gt;&lt;/i&gt;&lt;/div&gt;&lt;section id="think_content_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"&gt;</span><span class="token template-punctuation string">`</span></span>
                    <span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'&lt;/think&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;/section&gt;'</span><span class="token punctuation">)</span>
                  item<span class="token punctuation">.</span>context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>markdownIt<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>context<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                  <span class="token literal-property property">type</span><span class="token operator">:</span> item<span class="token punctuation">.</span>conversation_type <span class="token operator">==</span> <span class="token string">'Question'</span> <span class="token operator">?</span> <span class="token string">'send'</span> <span class="token operator">:</span> <span class="token string">'answer'</span><span class="token punctuation">,</span>
                  <span class="token literal-property property">message</span><span class="token operator">:</span> item<span class="token punctuation">.</span>context
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>answerTitle <span class="token operator">=</span> res<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">enterMessage</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Enter'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 终止当前对话</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isTalking<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 关闭后,处理正在对话的"思考中"</span>
        <span class="token keyword">let</span> curAnswer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message
        curAnswer <span class="token operator">=</span> curAnswer<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="think-time"&gt;思考中……&lt;/div&gt;'</span><span class="token punctuation">,</span> <span class="token string">'对话中止'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message <span class="token operator">=</span> curAnswer
        <span class="token keyword">this</span><span class="token punctuation">.</span>isTalking <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token comment">// 再获取一下历史记录</span>
        <span class="token comment">// 暂时不获取历史记录,因为中止对话时,历史UUID可能还没返回</span>
        <span class="token comment">// this.$emit('getHistoryList')</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token operator">||</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r?\n</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>choicedTasks<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请选择推理任务'</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'warning'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 回到初始高度</span>
      <span class="token keyword">const</span> textarea <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>input
      textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'56px'</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>msgHight <span class="token operator">=</span> <span class="token string">'56px'</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// let markedText = this.markdownIt.render(this.inputMessage)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'send'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'answer'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="think-time"&gt;思考中……&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>answerTitle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>answerTitle <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollToBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initSSEChat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">initSSEChat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>VSConfig<span class="token punctuation">.</span>isHttps <span class="token operator">?</span> <span class="token string">'https'</span> <span class="token operator">:</span> <span class="token string">'http'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span>leader
      <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/v1/intelligent_computing/task/chat/stream?uuid=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>choicedTasks<span class="token punctuation">.</span>uuid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;message=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage
      <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;token=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;conversation_uuid=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>talkUUID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
      <span class="token keyword">let</span> buffer <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>thinkTime <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">.</span>length
      <span class="token keyword">let</span> index <span class="token operator">=</span> len <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> len <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> len
      <span class="token keyword">this</span><span class="token punctuation">.</span>isTalking <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data <span class="token operator">==</span> <span class="token string">'[DONE]'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 接收 Delta 数据</span>
        <span class="token comment">// 最后一条是UUID，第二次发对话的时候要传参</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">var</span> <span class="token punctuation">{<!-- --></span> choices<span class="token punctuation">,</span> created <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 新对话在历史列表补充数据</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>talkUUID <span class="token operator">=</span> event<span class="token punctuation">.</span>data
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>refreshHistoryFlag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>refreshHistoryFlag <span class="token operator">=</span> event<span class="token punctuation">.</span>data
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'refreshHistory'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refreshHistoryFlag<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// const { choices, created } = JSON.parse(event.data)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>choices <span class="token operator">&amp;&amp;</span> choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token operator">?.</span>content<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          buffer <span class="token operator">+=</span> choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token punctuation">.</span>content
          <span class="token comment">// think标签内是思考内容，单独记录思考时间</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'&lt;think&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="think-time"&gt;思考中……&lt;/div&gt;&lt;section id="think_content_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"&gt;</span><span class="token template-punctuation string">`</span></span>
            buffer <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'&lt;think&gt;'</span><span class="token punctuation">,</span> choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'&lt;/think&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// console.log("结束时间赋值的判断")</span>
            choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;/section&gt;</span><span class="token template-punctuation string">`</span></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token comment">// 获取到结束时间后,直接展示收起按钮</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>thinkTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime
            buffer <span class="token operator">=</span> buffer
              <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>
                <span class="token string">'&lt;div class="think-time"&gt;思考中……&lt;/div&gt;'</span><span class="token punctuation">,</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="think-time"&gt;已深度思考(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>thinkTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">S)&lt;i id="think_icon_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" onclick="hiddenThink(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)" class="ec-font icon-a-xiangxia3"&gt;&lt;/i&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
              <span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'&lt;/think&gt;'</span><span class="token punctuation">,</span> choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delta<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;section id="think_content_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"&gt;&lt;/section&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">let</span> markedText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>markdownIt<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'answer'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> markedText <span class="token punctuation">}</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollToBottomIfAtBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'错误触发===》'</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'answer'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="think-time"&gt;对话服务连接失败&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isTalking <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 关闭事件</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'关闭事件---&gt;'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isTalking <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">scrollToBottomIfAtBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> logContainer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>logContainer
        <span class="token keyword">if</span> <span class="token punctuation">(</span>logContainer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">const</span> threshold <span class="token operator">=</span> <span class="token number">100</span>
          <span class="token keyword">const</span> distanceToBottom <span class="token operator">=</span> logContainer<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> logContainer<span class="token punctuation">.</span>scrollTop <span class="token operator">-</span> logContainer<span class="token punctuation">.</span>clientHeight
          <span class="token keyword">if</span> <span class="token punctuation">(</span>distanceToBottom <span class="token operator">&lt;=</span> threshold<span class="token punctuation">)</span> logContainer<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> logContainer<span class="token punctuation">.</span>scrollHeight
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">scrollToBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> logContainer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>logContainer
        <span class="token keyword">if</span> <span class="token punctuation">(</span>logContainer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          logContainer<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> logContainer<span class="token punctuation">.</span>scrollHeight
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">confirmTask</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>choicedTasks <span class="token operator">=</span> val
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">clearWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>contentList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>answerTitle <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>talkUUID <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>refreshHistoryFlag <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isTalking <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">const</span> textarea <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>input
      textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'56px'</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>msgHight <span class="token operator">=</span> <span class="token string">'56px'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">newChat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'clearChat'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">adjustInputHeight</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// enter键盘按下的换行赋值为空</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Enter'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>inputMessage <span class="token operator">=</span> <span class="token string">''</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> textarea <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>input
        textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'auto'</span>
        <span class="token comment">// 最高200px</span>
        textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>textarea<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msgHight <span class="token operator">=</span> textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">copyMsg</span><span class="token punctuation">(</span><span class="token parameter">txt</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 复制功能</span>
      <span class="token comment">// 创建一个临时的 textarea 元素</span>
      <span class="token keyword">const</span> textarea <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'textarea'</span><span class="token punctuation">)</span>
      textarea<span class="token punctuation">.</span>value <span class="token operator">=</span> txt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;[^&gt;]+&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// 去掉html标签</span>
      textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'fixed'</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textarea<span class="token punctuation">)</span>
      textarea<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 选中文本</span>

      <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">)</span> <span class="token comment">// 执行复制</span>
        <span class="token function">ElMessage</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'复制成功'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">ElMessage</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'复制失败'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>textarea<span class="token punctuation">)</span> <span class="token comment">// 移除临时元素</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventSourceChat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped lang<span class="token operator">=</span><span class="token string">"scss"</span><span class="token operator">&gt;</span>
<span class="token punctuation">.</span>talk<span class="token operator">-</span>window <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span> margin <span class="token number">0</span><span class="token punctuation">.</span>2s ease<span class="token punctuation">;</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>talk<span class="token operator">-</span>container <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">%</span> <span class="token operator">-</span> 58px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>talk<span class="token operator">-</span>welcome <span class="token punctuation">{<!-- --></span>
  text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
  <span class="token comment">// margin-bottom: 25px;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">10</span><span class="token operator">%</span> <span class="token number">20</span><span class="token operator">%</span> 25px<span class="token punctuation">;</span>
  box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span>
  h1 <span class="token punctuation">{<!-- --></span>
    margin<span class="token operator">-</span>bottom<span class="token operator">:</span> 30px<span class="token punctuation">;</span>
    font<span class="token operator">-</span>size<span class="token operator">:</span> 21px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  p <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> #8f9aad<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>messages <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>
  overflow<span class="token operator">-</span>y<span class="token operator">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>message <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  <span class="token literal-property property">margin</span><span class="token operator">:</span> 12px <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>message<span class="token punctuation">.</span>user <span class="token punctuation">{<!-- --></span>
  justify<span class="token operator">-</span>content<span class="token operator">:</span> flex<span class="token operator">-</span>end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>bubble <span class="token punctuation">{<!-- --></span>
  max<span class="token operator">-</span>width<span class="token operator">:</span> <span class="token number">70</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 12px 16px<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 12px<span class="token punctuation">;</span>
  <span class="token literal-property property">background</span><span class="token operator">:</span> #fff<span class="token punctuation">;</span>
  box<span class="token operator">-</span>shadow<span class="token operator">:</span> <span class="token number">0</span> 2px 4px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>message<span class="token punctuation">.</span>user <span class="token punctuation">.</span>bubble <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">background</span><span class="token operator">:</span> #e8f4ff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>time <span class="token punctuation">{<!-- --></span>
  font<span class="token operator">-</span>size<span class="token operator">:</span> 12px<span class="token punctuation">;</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">666</span><span class="token punctuation">;</span>
  margin<span class="token operator">-</span>top<span class="token operator">:</span> 4px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>talk<span class="token operator">-</span>send <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">background</span><span class="token operator">:</span> #f1f2f7<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid #e9e9eb<span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 5px 10px<span class="token punctuation">;</span>

  <span class="token literal-property property">margin</span><span class="token operator">:</span> 0px <span class="token number">20</span><span class="token operator">%</span><span class="token punctuation">;</span>
  img <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  textarea <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> 10px<span class="token punctuation">;</span>
    <span class="token literal-property property">resize</span><span class="token operator">:</span> none<span class="token punctuation">;</span>
    <span class="token literal-property property">overflow</span><span class="token operator">:</span> auto<span class="token punctuation">;</span>
    <span class="token comment">// min-height: 48px;</span>
    max<span class="token operator">-</span>height<span class="token operator">:</span> 200px<span class="token punctuation">;</span>
    line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">1.5</span><span class="token punctuation">;</span>
    box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span>
    font<span class="token operator">-</span>family<span class="token operator">:</span> inherit<span class="token punctuation">;</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> 0px<span class="token punctuation">;</span>
    <span class="token literal-property property">background</span><span class="token operator">:</span> #f1f2f7<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token literal-property property">textarea</span><span class="token operator">:</span>focus <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">outline</span><span class="token operator">:</span> none <span class="token operator">!</span>important<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

input <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 12px<span class="token punctuation">;</span>
  <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid #ddd<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 8px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>talk<span class="token operator">-</span>title <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 56px<span class="token punctuation">;</span>
  line<span class="token operator">-</span>height<span class="token operator">:</span> 56px<span class="token punctuation">;</span>
  p <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">000000</span><span class="token punctuation">;</span>
    font<span class="token operator">-</span>size<span class="token operator">:</span> 15px<span class="token punctuation">;</span>
    font<span class="token operator">-</span>weight<span class="token operator">:</span> <span class="token number">550</span><span class="token punctuation">;</span>
    text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>sangedianBtn <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> 225px<span class="token punctuation">;</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 32px<span class="token punctuation">;</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>
    <span class="token literal-property property">top</span><span class="token operator">:</span> 15px<span class="token punctuation">;</span>
    <span class="token literal-property property">right</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>send<span class="token operator">-</span>item <span class="token punctuation">{<!-- --></span>
  max<span class="token operator">-</span>width<span class="token operator">:</span> <span class="token number">60</span><span class="token operator">%</span><span class="token punctuation">;</span>
  word<span class="token operator">-</span><span class="token keyword">break</span><span class="token operator">:</span> <span class="token keyword">break</span><span class="token operator">-</span>all<span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  <span class="token literal-property property">background</span><span class="token operator">:</span> #eef6ff<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">000000</span><span class="token punctuation">;</span>
  white<span class="token operator">-</span>space<span class="token operator">:</span> pre<span class="token operator">-</span>wrap<span class="token punctuation">;</span>
  font<span class="token operator">-</span>size<span class="token operator">:</span> 13px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>msg<span class="token operator">-</span>row <span class="token punctuation">{<!-- --></span>
  margin<span class="token operator">-</span>bottom<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>talk<span class="token operator">-</span>box <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">%</span> <span class="token operator">-</span> 140px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span>talk<span class="token operator">-</span>content <span class="token punctuation">{<!-- --></span>
    background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">324659</span><span class="token punctuation">;</span>
    overflow<span class="token operator">-</span>y<span class="token operator">:</span> auto<span class="token punctuation">;</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">%</span> <span class="token operator">-</span> 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
    box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> 0px <span class="token number">20</span><span class="token operator">%</span><span class="token punctuation">;</span>
    <span class="token comment">// &amp;:hover {<!-- --></span>
    <span class="token comment">//   overflow-y: auto;</span>
    <span class="token comment">// }</span>
    <span class="token punctuation">.</span>chat<span class="token operator">-</span>assistant <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
      margin<span class="token operator">-</span>bottom<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
      <span class="token punctuation">.</span>answer<span class="token operator">-</span>item <span class="token punctuation">{<!-- --></span>
        line<span class="token operator">-</span>height<span class="token operator">:</span> 30px<span class="token punctuation">;</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">324659</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>answer<span class="token operator">-</span>cont <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
      <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
      <span class="token operator">&gt;</span> img <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
        margin<span class="token operator">-</span>right<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token operator">&amp;</span><span class="token punctuation">.</span>end <span class="token punctuation">{<!-- --></span>
        justify<span class="token operator">-</span>content<span class="token operator">:</span> flex<span class="token operator">-</span>end<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token operator">&amp;</span><span class="token punctuation">.</span>start <span class="token punctuation">{<!-- --></span>
        justify<span class="token operator">-</span>content<span class="token operator">:</span> flex<span class="token operator">-</span>start<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>chat<span class="token operator">-</span>sse <span class="token punctuation">{<!-- --></span>
    min<span class="token operator">-</span>height<span class="token operator">:</span> 100px<span class="token punctuation">;</span>
    max<span class="token operator">-</span>height<span class="token operator">:</span> 460px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>chat<span class="token operator">-</span>message <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh <span class="token operator">-</span> 276px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>thinking<span class="token operator">-</span>bubble <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh <span class="token operator">-</span> 296px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>chat<span class="token operator">-</span>add <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 111px<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 33px<span class="token punctuation">;</span>
  <span class="token literal-property property">background</span><span class="token operator">:</span> #dbeafe<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 6px <span class="token operator">!</span>important<span class="token punctuation">;</span>
  font<span class="token operator">-</span>size<span class="token operator">:</span> 14px <span class="token operator">!</span>important<span class="token punctuation">;</span>
  <span class="token literal-property property">border</span><span class="token operator">:</span> 0px<span class="token punctuation">;</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> #516ffe <span class="token operator">!</span>important<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span><span class="token operator">:</span>hover <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">background</span><span class="token operator">:</span> #ebf0f7<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>icon<span class="token operator">-</span>tianjia1 <span class="token punctuation">{<!-- --></span>
    margin<span class="token operator">-</span>right<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
    font<span class="token operator">-</span>size<span class="token operator">:</span> 14px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>talk<span class="token operator">-</span>btn<span class="token operator">-</span>cont <span class="token punctuation">{<!-- --></span>
  text<span class="token operator">-</span>align<span class="token operator">:</span> right<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>top<span class="token operator">:</span> 5px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span><span class="token operator">&gt;</span>
@use <span class="token string">'./markdown.scss'</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre>
    <p>
     最终页面：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/87fcd7b9b9ff42e78d78ea2512947e19.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323035303430362f:61727469636c652f64657461696c732f313436323037393537" class_="artid" style="display:none">
 </p>
</div>


