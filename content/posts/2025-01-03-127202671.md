---
layout: post
title: "音视频ffmpegffmpeg-命令大全"
date: 2025-01-03 14:19:05 +0800
description: "音视频ffmpeg——ffmpeg 命令大全_ffmpeg -b:a"
keywords: "ffmpeg -b:a"
categories: ['音视频']
tags: ['音视频']
artid: "127202671"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=127202671
    alt: "音视频ffmpegffmpeg-命令大全"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=127202671
featuredImagePreview: https://bing.ee123.net/img/rand?artid=127202671
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     音视频ffmpeg——ffmpeg 命令大全
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4 id="FAODA">
     ffmpeg 命令参数
    </h4>
    <p>
     ffmpeg信息查询命令
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/e1333cb5c04b4d35f1f68cb407486d47.png"/>
    </p>
    <p>
     ffmpeg 控制命令
    </p>
    <p>
     主要参数：
    </p>
    <p id="u0a98b301">
     ◼ -i 设定输入流
    </p>
    <p id="udb1a33da">
     ◼ -f 设定输出格式(format)
    </p>
    <p id="u16822e88">
     ◼ -ss 开始时间
    </p>
    <p id="ueccff2d4">
     ◼ -t 时间长度
    </p>
    <p id="u34529f38">
    </p>
    <p>
     音频参数：
    </p>
    <p id="u8553a6e5">
     ◼ -aframes 设置要输出的音频帧数
    </p>
    <p id="u4988601c">
     ◼ -b:a 音频码率
    </p>
    <p id="u002d344e">
     ◼ -ar 设定采样率
    </p>
    <p id="u7ce02209">
     ◼ -ac 设定声音的Channel数
    </p>
    <p id="u0eab2e4e">
     ◼ -acodec 设定声音编解码器，如果用copy表示原始编解码数据必须被拷贝。
    </p>
    <p id="u8700f080">
     ◼ -an 不处理音频
    </p>
    <p id="ucc538213">
     ◼ -af 音频过滤器
    </p>
    <p id="u7a622e34">
     ffmpeg -i test.mp4 -b:a 192k -ar 48000 -ac 2 -acodec libmp3lame -aframes 200 out2.mp3
    </p>
    <p id="ua0dff74b">
    </p>
    <p id="u3b653e02">
     视频参数：
    </p>
    <p id="u0318ff58">
     ◼ -vframes 设置要输出的视频帧数
    </p>
    <p id="ubae61e79">
     ◼ -b 设定视频码率
    </p>
    <p id="uac933ae4">
     ◼ -b:v 视频码率
    </p>
    <p id="u765a4203">
     ◼ -r 设定帧速率
    </p>
    <p id="u4e54f96e">
     ◼ -s 设定画面的宽与高
    </p>
    <p id="u69023bf8">
     ◼ -vn 不处理视频
    </p>
    <p id="ud436f305">
     ◼ -aspect aspect 设置横纵比 4:3 16:9 或 1.3333 1.7777
    </p>
    <p id="u45fc1468">
     ◼ -vcodec 设定视频编解码器，如果用copy表示原始编解码数据必
    </p>
    <p id="u97b8d1c7">
     须被拷贝。
    </p>
    <p id="u2b5823b1">
     ◼ -vf 视频过滤器
    </p>
    <p id="u61210dca">
     样例：
    </p>
    <p id="u3fdce890">
     ffmpeg -i test.mp4 -vframes 300 -b:v 300k -r 30 -s 640x480 -aspect 16:9 -vcodec libx265
    </p>
    <p id="u0202448b">
    </p>
    <p>
     常见的使用场景
    </p>
    <p>
     使用ffmpeg 提取音视频
    </p>
    <ol>
     <li id="u02ebb221">
      保留封装格式
     </li>
    </ol>
    <p id="u21c80f3c">
     ffmpeg -i test.mp4 -acodec copy -vn audio.mp4 （这里的copy就是代表使用原本的格式）
    </p>
    <p id="u13dda278">
     ffmpeg -i test.mp4 -vcodec copy -an video.mp4
    </p>
    <ol>
     <li id="u11a29f20">
      提取视频
     </li>
    </ol>
    <p id="u444df13b">
     保留编码格式：ffmpeg -i test.mp4 -vcodec copy -an test_copy.h264
    </p>
    <p id="u4df745b6">
     强制格式：ffmpeg -i test.mp4 -vcodec libx264 -an test.h264
    </p>
    <ol>
     <li id="u55eb5bb4">
      提取音频
     </li>
    </ol>
    <p id="u0684785f">
     保留编码格式：ffmpeg -i test.mp4 -acodec copy -vn test.aac
    </p>
    <p id="u7a8eb301">
     强制格式：ffmpeg -i test.mp4 -acodec libmp3lame -vn test.mp3
    </p>
    <p>
     使用ffmpeg 命令提取像素格式
    </p>
    <ol>
     <li id="u04797896">
      提取YUV
     </li>
    </ol>
    <p id="uafefb2d7">
     提取3秒数据，分辨率和源视频一致
    </p>
    <p id="u65f6fd23">
     ffmpeg -i test_1280x720.mp4 -t 3 -pix_fmt yuv420p yuv420p_orig.yuv
    </p>
    <p id="u9d72fe08">
     提取3秒数据，分辨率转为320x240
    </p>
    <p id="u5dcd3501">
     ffmpeg -i test_1280x720.mp4 -t 3 -pix_fmt yuv420p -s 320x240 yuv420p_320x240.yuv
    </p>
    <ol>
     <li id="u45195e4c">
      提取RGB
     </li>
    </ol>
    <p id="u67a5f0e5">
     提取3秒数据，分辨率转为320x240
    </p>
    <p id="u4d6d15ba">
     ffmpeg -i test.mp4 -t 3 -pix_fmt rgb24 -s 320x240 rgb24_320x240.rgb
    </p>
    <ol>
     <li id="u31eb5fd9">
      RGB和YUV之间的转换
     </li>
    </ol>
    <p id="u2e9f0ca4">
     ffmpeg -s 320x240 -pix_fmt yuv420p -i yuv420p_320x240.yuv -pix_fmt rgb24 rgb24_320x240_2.rgb
    </p>
    <p id="u1608e76b">
    </p>
    <p>
     使用ffmpeg 提取PCM数据
    </p>
    <p id="uf67daf0a">
     ffmpeg -i buweishui.mp3 -ar 48000 -ac 2 -sample_fmt s16 out_s16.wav
    </p>
    <p id="u083d45e0">
     ffmpeg -i buweishui.mp3 -ar 48000 -ac 2 -codec:a pcm_s16le out2_s16le.wav
    </p>
    <p id="u98beeb49">
    </p>
    <p>
     使用ffmpeg 转化封装格式
    </p>
    <ol>
     <li id="u6bab3e17">
      保持编码格式：
     </li>
    </ol>
    <p id="u5edeca0b">
     ffmpeg -i test.mp4 -vcodec copy -acodec copy test_copy.ts
    </p>
    <p id="u31059f7a">
     ffmpeg -i test.mp4 -codec copy test_copy2.ts
    </p>
    <ol>
     <li id="ufe429f6d">
      改变编码格式：
     </li>
    </ol>
    <p id="u7596bcf0">
     ffmpeg -i test.mp4 -vcodec libx265 -acodec libmp3lame out_h265_mp3.mkv
    </p>
    <ol>
     <li id="ubdccd665">
      修改帧率：
     </li>
    </ol>
    <p id="u8fa0df0a">
     ffmpeg -i test.mp4 -r 15 output2.mp4
    </p>
    <ol>
     <li id="u2e7672ce">
      修改视频码率：
     </li>
    </ol>
    <p id="u2df07250">
     ffmpeg -i test.mp4 -b 400k output_b.mkv （此时音频也被重新编码）
    </p>
    <ol>
     <li id="u10e008fe">
      只修改视频码率：
     </li>
    </ol>
    <p id="u688fe017">
     ffmpeg -i test.mp4 -b:v 400k output_bv.mkv
    </p>
    <ol>
     <li id="ud472c985">
      修改音频码率：
     </li>
    </ol>
    <p id="u029937c6">
     ffmpeg -i test.mp4 -b:a 192k output_ba.mp4
    </p>
    <p id="ub0e3b035">
     如果不想重新编码video，需要加上-vcodec copy
    </p>
    <ol>
     <li id="ue343d66b">
      修改音视频码率：
     </li>
    </ol>
    <p id="uda1ba7df">
     ffmpeg -i test.mp4 -b:v 400k -b:a 192k output_bva.mp4
    </p>
    <ol>
     <li id="ua9a6f0c5">
      修改视频分辨率：
     </li>
    </ol>
    <p id="u87c5e830">
     ffmpeg -i test.mp4 -s 480x270 output_480x270.mp4
    </p>
    <ol>
     <li id="u42306283">
      修改音频采样率:
     </li>
    </ol>
    <p id="u1befdf6a">
     ffmpeg -i test.mp4 -ar 44100 output_44100hz.mp4
    </p>
    <p>
     使用ffmpeg 合并视频
    </p>
    <ol>
     <li id="u96594773">
      将mp4 转化为ts格式（便于后续合并）
     </li>
    </ol>
    <p id="u8c46dfd6">
     ffmpeg -i 1.mp4 -codec copy -vbsf h264_mp4toannexb 1.ts
    </p>
    <p id="u198cb49d">
     ffmpeg -i 2.mp4 -codec copy -vbsf h264_mp4toannexb 2.ts
    </p>
    <p id="u45e58371">
     ffmpeg -i 3.mp4 -codec copy -vbsf h264_mp4toannexb 3.ts
    </p>
    <ol>
     <li id="u58b21ebb">
      以TS格式进行拼接
     </li>
    </ol>
    <p id="u70b63010">
     方法1：ffmpeg -i "concat:1.ts|2.ts|3.ts" -codec copy out_ts.mp4
    </p>
    <p id="u5108a33d">
     方法2：ffmpeg -f concat -i tslist.txt -codec copy out_ts2.mp4
    </p>
    <p>
     使用ffmpeg 将图像与视频互转
    </p>
    <ol>
     <li id="u93c51266">
      截取一张图片
     </li>
    </ol>
    <p id="ub2b099d3">
     ffmpeg -i test.mp4 -y -f image2 -ss 00:00:02 -vframes 1 -s 640x360 test.jpg
    </p>
    <p id="u9417d689">
     ffmpeg -i test.mp4 -y -f image2 -ss 00:00:02 -vframes 1 -s 640x360 test.bmp
    </p>
    <p id="u293bfb7d">
     -i 输入
    </p>
    <p id="ub099b91f">
     -y 覆盖
    </p>
    <p id="ufe28d465">
     -f 格式
    </p>
    <p id="u33bfeb09">
     image2 一种格式
    </p>
    <p id="u695e830e">
     -ss 起始值
    </p>
    <p id="u05cd4e82">
     -vframes 帧 如果大于1 那么 输出加%03d test%03d.jpg
    </p>
    <p id="ub8cbda38">
     -s 格式大小size
    </p>
    <p id="u026d16f1">
    </p>
    <ol>
     <li id="u3190a8ad">
      转换视频为图片（每帧一张图):
     </li>
    </ol>
    <p id="u2fbcb67c">
     ffmpeg -i test.mp4 -t 5 -s 640x360 -r 15 frame%03d.jpg
    </p>
    <p id="u60aa5444">
    </p>
    <ol>
     <li id="u681e1d8f">
      图片转换为视频:
     </li>
    </ol>
    <p id="u8d53e0dd">
     ffmpeg -f image2 -i frame%03d.jpg -r 25 video.mp4
    </p>
    <p>
     使用ffmpeg 将视频与GIF 互转
    </p>
    <ol>
     <li id="uf476fbb8">
      从视频中生成GIF图片
     </li>
    </ol>
    <p id="u8769380e">
     ffmpeg -i test.mp4 -t 5 -r 1 image1.gif
    </p>
    <p id="ufbf230ba">
     ffmpeg -i test.mp4 -t 5 -r 25 -s 640x360 image2.gif
    </p>
    <ol>
     <li id="ucdd8fc10">
      将 GIF 转化为 视频
     </li>
    </ol>
    <p id="ub1340ee1">
     ffmpeg -f gif -i image2.gif image2.mp4
    </p>
    <p id="u7eba8d8a">
    </p>
    <p>
     使用ffmpeg 进行屏幕录像
    </p>
    <p id="u45065d13">
    </p>
    <ol>
     <li id="u3dfd8974">
      先安装dshow软件 Screen Capturer Recorder，
     </li>
    </ol>
    <p id="ued7374f5">
     项目地址：https://sourceforge.net/projects/screencapturer/files/
    </p>
    <p id="u7773058b">
     然后查看可用设备名字：ffmpeg -list_devices true -f dshow -i dummy
    </p>
    <p id="u672ed428">
    </p>
    <ol>
     <li id="u2bc0131f">
      录制视频（默认参数）
     </li>
    </ol>
    <p id="u9b9e0659">
     桌面：ffmpeg -f dshow -i video="screen-capture-recorder" v-out.mp4
    </p>
    <p id="u715c2b0f">
     摄像头： ffmpeg -f dshow -i video="Integrated Webcam" -y v-out2.flv (要根据自
    </p>
    <p id="u02530fa7">
     己摄像头名称)
    </p>
    <ol>
     <li id="u7dd57339">
      录制声音（默认参数）
     </li>
    </ol>
    <p id="ufc2dd8aa">
     系统声音：ffmpeg -f dshow -i audio="virtual-audio-capturer" a-out.aac
    </p>
    <p id="ue9df9102">
     系统+麦克风声音：ffmpeg -f dshow -i audio="麦克风 (Realtek Audio)" -f dshow -i audio="virtual-audio-capturer" -filter_complex amix=inputs=2:duration=first:dropout_transition=2 a-out2.aac
    </p>
    <ol>
     <li id="u51962966">
      同时录制声音和视频（默认参数）
     </li>
    </ol>
    <p id="u15d367f1">
     ffmpeg -f dshow -i audio="麦克风 (Realtek Audio)" -f dshow -i audio="virtual-audio-capturer" -filter_complex amix=inputs=2:duration=first:dropout_transition=2 -f dshow -i video="screen-capture-recorder" -y av-out.flv
    </p>
    <p>
     使用ffmpeg 进行直播拉流
    </p>
    <p id="uaf92ffac">
     ffplay rtmp://server/live/streamName
    </p>
    <p id="u3e436d92">
     ffmpeg -i rtmp://server/live/streamName -c copy dump.flv
    </p>
    <p id="uef10e91f">
     对于不是rtmp的协议 -c copy要谨慎使用
    </p>
    <p>
     使用ffmpeg 进行直播推流
    </p>
    <p id="ub7e92597">
     ffmpeg -re -i out.mp4 -c copy flv rtmp://server/live/streamName
    </p>
    <p id="u7f860b8e">
     -re,表示按时间戳读取文件
    </p>
    <p id="u127f60d4">
     参考：Nginx搭建rtmp流媒体服务器(Ubuntu 16.04)
    </p>
    <p id="u6df4eaf1">
     https://www.jianshu.com/p/16741e363a77
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33323337383731332f:61727469636c652f64657461696c732f313237323032363731" class_="artid" style="display:none">
 </p>
</div>


