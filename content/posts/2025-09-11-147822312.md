---
layout: post
title: "在centOS源码编译方式安装MySQL5.7"
date: 2025-09-11T18:34:52+0800
description: "在生产环境中部署数据库时，很多人会选择直接使用安装 MySQL，这样简单快速，但缺点是版本受限，灵活性不足。对于需要指定版本、启用特定编译参数或优化的场景，就显得非常必要。本文将以为例，演示如何从源码编译安装，包括环境准备、依赖安装、源码编译、初始化配置以及服务启动等完整流程。"
keywords: "在centOS源码编译方式安装MySQL5.7"
categories: ['未分类']
tags: ['运维', 'Linux', 'Centos']
artid: "147822312"
arturl: "https://blog.csdn.net/ts977/article/details/147822312"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=147822312
    alt: "在centOS源码编译方式安装MySQL5.7"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=147822312
featuredImagePreview: https://bing.ee123.net/img/rand?artid=147822312
cover: https://bing.ee123.net/img/rand?artid=147822312
image: https://bing.ee123.net/img/rand?artid=147822312
img: https://bing.ee123.net/img/rand?artid=147822312
---



# 在centOS源码编译方式安装MySQL5.7

## 一、前言

在生产环境中部署数据库时，很多人会选择直接使用 **yum/apt 包管理器** 安装 MySQL，这样简单快速，但缺点是版本受限，灵活性不足。对于需要指定版本、启用特定编译参数或优化的场景，**源码编译安装 MySQL** 就显得非常必要。

本文将以 **CentOS 7** 为例，演示如何从源码编译安装 **MySQL 5.7**，包括环境准备、依赖安装、源码编译、初始化配置以及服务启动等完整流程。

## 二、安装准备

安装包自行到官网下载或其他网站下载。

安装包上传路径我们选择/usr/local，如图：

![](https://i-blog.csdnimg.cn/direct/ff83e3497bd7404dac170c064fca3f98.png)

### （1）解压安装包

将mysql解压到/usr/local/，执行如下命令：

```
tar -zxvf mysql-5.7.44-el7-x86_64.tar.gz
```

![](https://i-blog.csdnimg.cn/direct/02b167c4ae7941be8a271ab532414e0b.png)

将mysql-5.7.44-el7-x86_64目录改名为mysql

```
mv mysql-5.7.44-el7-x86_64 mysql
```

### （2）安装流程/步骤

**由于MySQL 服务进程一般不会用 root 用户直接运行**，而是以一个专门的 `mysql` 用户来管理，保证安全性。

```
cat /etc/group | grep mysql  -- 出现 mysql : x : 490 : 即为存在组
cat /etc/passwd | grep mysql -- 出现mysql:x:496:490::/home/mysql:/bin/bash 即为存在用户
```

不存在则添加

```
groupadd mysql
useradd -r -g mysql mysql
```

创建文件夹：**软件放 `/usr/local/mysql`**，**数据放 `/data/mysql，`**

**`local下创建mysql（已有可不创建），根目录创建data/mysql`**

```
sudo mkdir -p /usr/local/mysql
sudo chown -R mysql:mysql /usr/local/mysql

# 在根目录下新建 data 目录（如果还没有）
sudo mkdir -p /data/mysql

# 修改权限为 mysql 用户
sudo chown -R mysql:mysql /data/mysql
```

准备就绪后，执行初始化mysql，会随机生成mysql的root密码。**及时复制保存随机密码。**

```
/usr/local/mysql/bin/mysqld --initialize --user=mysql \
  --basedir=/usr/local/mysql \
  --datadir=/data/mysql
```

如果不想随机生成密码，则执行以下命令，后续需要自行设置密码。建议直接随机密码后续修改即可。

```
/usr/local/mysql/bin/mysqld --initialize-insecure --user=mysql \
  --basedir=/usr/local/mysql \
  --datadir=/data/mysql
```

至此，安装算是完成了，但还需要做各种配置。

### （3）系统设置和配置文件修改

初始化启动脚本开机初始化目录

```
cp ./support-files/mysql.server /etc/init.d/mysqld

chmod +x /etc/init.d/mysqld
```

修改配置文件,配置文件默认在/etc/my.cnf，如果没有则创建。

```
vim /etc/my.cnf

```

配置文件内容：

```
[mysqld]
basedir=/usr/local/mysql
datadir=/data/mysql
socket=/tmp/mysql.sock
log-error=/data/mysql/mysql-error.log
pid-file=/data/mysql/mysql.pid

```

如图：

![](https://i-blog.csdnimg.cn/direct/019d835ba4864f93af68334e9458679d.png)

再次确保目录权限正确：

```
chown -R mysql:mysql /data/mysql
```

启动mysql：

```
service mysqld start
```

![](https://i-blog.csdnimg.cn/direct/36aeeeeb7bf44633bbf741b34fbc1a69.png)

如出现以上图中内容，则表示mysql已经启动成功。

进一步验证：

```
ps -ef | grep mysqld
```

![](https://i-blog.csdnimg.cn/direct/5ac83c7abec847b69d666c236bce4992.png)

测试开机自启动：

```
# 重启服务测试
service mysqld restart

# 或者查看是否开机自启
chkconfig --list mysqld

```

如图则表示可以开机自启动了

![](https://i-blog.csdnimg.cn/direct/eb7311137d2a4b74a5a94e311b0e9d59.png)

### （4）其他注意事项或配置

登录mysql

```
# 如果使用 --initialize
/usr/local/mysql/bin/mysql -u root -p

# 使用 --initialize-insecure 不需要密码
/usr/local/mysql/bin/mysql -u root

```

登录后如图：

![](https://i-blog.csdnimg.cn/direct/6b9681296b2a432ea3cfce47d9faac03.png)

到这里，安装就完成了。需要修改随机密码，则执行下面命令：

```
ALTER USER 'root'@'localhost' IDENTIFIED BY '你的新密码';
```

开放远程访问和连接请参考：

[https://blog.csdn.net/ts977/article/details/145884849?spm=1001.2014.3001.5501](https://blog.csdn.net/ts977/article/details/145884849?spm=1001.2014.3001.5501 "https://blog.csdn.net/ts977/article/details/145884849?spm=1001.2014.3001.5501")

设置自动备份请参考：

[https://blog.csdn.net/ts977/article/details/144748311?spm=1001.2014.3001.5501](https://blog.csdn.net/ts977/article/details/144748311?spm=1001.2014.3001.5501 "https://blog.csdn.net/ts977/article/details/144748311?spm=1001.2014.3001.5501")



