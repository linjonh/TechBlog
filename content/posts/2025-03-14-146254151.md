---
layout: post
title: "CentOS7-服务器安装-Hadoop-和-Hive"
date: 2025-03-14 12:08:32 +0800
description: "在/opt/CJY/hive/conf目录下创建创建。，或者从本地maven仓库拉一个。如果返回预期结果，说明 Hive 配置成功！也可以使用navicate手动创建。从 MySQL 官方网站下载。比如：10.9.6.8。"
keywords: "CentOS7 服务器安装 Hadoop 和 Hive"
categories: ['大数据']
tags: ['服务器', 'Hive', 'Hadoop']
artid: "146254151"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146254151
    alt: "CentOS7-服务器安装-Hadoop-和-Hive"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146254151
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146254151
cover: https://bing.ee123.net/img/rand?artid=146254151
image: https://bing.ee123.net/img/rand?artid=146254151
img: https://bing.ee123.net/img/rand?artid=146254151
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     CentOS7 服务器安装 Hadoop 和 Hive
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="CentOS__Hadoop__Hive_0">
     </a>
     CentOS 服务器安装 Hadoop 和 Hive流程
    </h2>
    <p>
     <mark>
      请将以下的路径更换为自己的路径
     </mark>
    </p>
    <h3>
     <a id="1__2">
     </a>
     1. 环境准备
    </h3>
    <h4>
     <a id="11__JDK_3">
     </a>
     1.1 安装 JDK
    </h4>
    <p>
     Hadoop 和 Hive 需要 Java 运行环境，这里安装 OpenJDK 1.8：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 查看 Java 版本</span>
<span class="token function">java</span> <span class="token parameter variable">-version</span>
</code></pre>
    <h4>
     <a id="12__Hadoop__11">
     </a>
     1.2 创建 Hadoop 用户（可选）
    </h4>
    <pre><code class="prism language-bash"><span class="token function">useradd</span> hadoop
<span class="token function">passwd</span> hadoop
</code></pre>
    <h3>
     <a id="2__Hadoop_18">
     </a>
     2. 安装 Hadoop
    </h3>
    <h4>
     <a id="21__Hadoop_336_19">
     </a>
     2.1 下载 Hadoop 3.3.6
    </h4>
    <pre><code class="prism language-bash"><span class="token function">wget</span> https://dlcdn.apache.org/hadoop/common/hadoop-3.3.6/hadoop-3.3.6.tar.gz
</code></pre>
    <h4>
     <a id="22__25">
     </a>
     2.2 解压并移动到目标目录
    </h4>
    <pre><code class="prism language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> hadoop-3.3.6.tar.gz
<span class="token function">mv</span> hadoop-3.3.6 /opt/CJY/hadoop
</code></pre>
    <h4>
     <a id="23__32">
     </a>
     2.3 配置环境变量
    </h4>
    <p>
     编辑
     <code>
      /etc/profile
     </code>
     或
     <code>
      ~/.bashrc
     </code>
     ，添加以下内容：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/opt/CJY/hadoop
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin
</code></pre>
    <p>
     然后执行：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre>
    <h4>
     <a id="24__Hadoop__46">
     </a>
     2.4 修改 Hadoop 配置
    </h4>
    <p>
     进入 Hadoop 配置目录：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> <span class="token variable">$HADOOP_HOME</span>/etc/hadoop
</code></pre>
    <h5>
     <a id="241__hadoopenvsh_53">
     </a>
     2.4.1 修改
     <code>
      hadoop-env.sh
     </code>
    </h5>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr  自己的javahome
</code></pre>
    <h5>
     <a id="242__coresitexml_59">
     </a>
     2.4.2 配置
     <code>
      core-site.xml
     </code>
    </h5>
    <p>
     自己的地址，
     <code>
      localhost使用服务器的内网地址
     </code>
     比如：10.9.6.8
    </p>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://localhost:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="243__hdfssitexml_70">
     </a>
     2.4.3 配置
     <code>
      hdfs-site.xml
     </code>
    </h5>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h4>
     <a id="25__HDFS_81">
     </a>
     2.5 初始化 HDFS
    </h4>
    <pre><code class="prism language-bash">hdfs namenode <span class="token parameter variable">-format</span>
</code></pre>
    <h4>
     <a id="26__Hadoop_87">
     </a>
     2.6 启动 Hadoop
    </h4>
    <pre><code class="prism language-bash">start-dfs.sh
</code></pre>
    <p>
     访问 Web UI 进行验证：
    </p>
    <ul>
     <li>
      NameNode WebUI:
      <code>
       http://&lt;服务器IP&gt;:9870
      </code>
     </li>
    </ul>
    <h3>
     <a id="3__Hive_96">
     </a>
     3. 安装 Hive
    </h3>
    <h4>
     <a id="31__Hive_313_98">
     </a>
     3.1 下载 Hive 3.1.3
    </h4>
    <pre><code class="prism language-bash"><span class="token function">wget</span> https://dlcdn.apache.org/hive/hive-3.1.3/apache-hive-3.1.3-bin.tar.gz
</code></pre>
    <h4>
     <a id="32__104">
     </a>
     3.2 解压并移动到目标目录
    </h4>
    <pre><code class="prism language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> apache-hive-3.1.3-bin.tar.gz
<span class="token function">mv</span> apache-hive-3.1.3-bin /opt/CJY/hive
</code></pre>
    <h4>
     <a id="33__111">
     </a>
     3.3 配置环境变量
    </h4>
    <p>
     编辑
     <code>
      /etc/profile
     </code>
     或
     <code>
      ~/.bashrc
     </code>
     ，添加以下内容：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HIVE_HOME</span><span class="token operator">=</span>/opt/CJY/hive
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HIVE_HOME</span>/bin
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/opt/CJY/hadoop
</code></pre>
    <p>
     然后执行：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre>
    <h4>
     <a id="34__Hive__MySQL__126">
     </a>
     3.4 配置 Hive 使用 MySQL 作为元数据库
    </h4>
    <h5>
     <a id="341__Hive__128">
     </a>
     3.4.1 创建 Hive 元数据库和用户
    </h5>
    <p>
     也可以使用navicate手动创建
    </p>
    <pre><code class="prism language-bash">mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre>
    <p>
     在 MySQL 中执行：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> hive_metastore <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'hiveuser'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hivepassword'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> hive_metastore<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'hiveuser'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
<span class="token keyword">EXIT</span><span class="token punctuation">;</span>
</code></pre>
    <h5>
     <a id="342__MySQL_JDBC__144">
     </a>
     3.4.2 安装 MySQL JDBC 驱动
    </h5>
    <p>
     从 MySQL 官方网站下载
     <code>
      mysql-connector-java-8.0.26.jar
     </code>
     ，或者从本地maven仓库拉一个。然后执行：
    </p>
    <pre><code class="prism language-bash"><span class="token function">cp</span> mysql-connector-java-8.0.26.jar /opt/CJY/hive/lib/
</code></pre>
    <h5>
     <a id="343__hivesitexml_152">
     </a>
     3.4.3 创建
     <code>
      hive-site.xml
     </code>
    </h5>
    <p>
     在/opt/CJY/hive/conf目录下创建创建
     <code>
      hive-site.xml
     </code>
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /opt/CJY/hive/conf
<span class="token function">vim</span> hive-site.xml
</code></pre>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/hive_metastore?createDatabaseIfNotExist=true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.cj.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hiveuser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hivepassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/opt/CJY/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h4>
     <a id="35__Hive__185">
     </a>
     3.5 初始化 Hive 元数据库
    </h4>
    <pre><code class="prism language-bash">/opt/CJY/hive/bin/schematool <span class="token parameter variable">-initSchema</span> <span class="token parameter variable">-dbType</span> mysql <span class="token parameter variable">-driver</span> com.mysql.cj.jdbc.Driver
</code></pre>
    <h4>
     <a id="36__Hive_191">
     </a>
     3.6 测试 Hive
    </h4>
    <pre><code class="prism language-bash">/opt/CJY/hive/bin/hive
</code></pre>
    <p>
     在 Hive CLI 中执行：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test_table <span class="token punctuation">(</span>id <span class="token keyword">INT</span><span class="token punctuation">,</span> name STRING<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test_table <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Spark'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> test_table<span class="token punctuation">;</span>
</code></pre>
    <p>
     如果返回预期结果，说明 Hive 配置成功！
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c535db2182b34fb9a3b668c79fb336c4.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ede77dbdc7f44ff5ab67df49c5705460.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34303435343133362f:61727469636c652f64657461696c732f313436323534313531" class_="artid" style="display:none">
 </p>
</div>


