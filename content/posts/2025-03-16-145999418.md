---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38313531303337342f:61727469636c652f64657461696c732f313435393939343138"
layout: post
title: "JavaEEè¿›é˜¶Springäº‹åŠ¡"
date: 2025-03-16 22:12:22 +0800
description: "æœ¬ç¯‡æ–‡ç« ä¸»è¦å†…å®¹ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢å¯¹äº‹åŠ¡è¿›è¡Œä¸€ä¸ªç®€å•çš„ä»‹ç»Springä¸­äº‹åŠ¡å¦‚ä½•å®ç°äº‹åŠ¡çš„æ¦‚å¿µï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººåœ¨æ•°æ®åº“çš„æ—¶å€™å·²ç»å¬è¿‡å’Œäº†è§£äº†ï¼Œæ‰€ä»¥è¿™é‡Œåªè¿›è¡Œç®€å•çš„ä»‹ç»äº‹åŠ¡æ˜¯â¼€ç»„æ“ä½œçš„é›†åˆï¼Œæ˜¯â¼€ä¸ªä¸å¯åˆ†å‰²çš„æ“ä½œã€‚äº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºâ¼€ä¸ªæ•´ä½“ï¼Œâ¼€èµ·å‘æ•°æ®åº“æäº¤æˆ–è€…æ˜¯æ’¤é”€æ“ä½œè¯·æ±‚ã€‚æ‰€ä»¥è¿™ç»„æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚"
keywords: "ã€JavaEEè¿›é˜¶ã€‘Springäº‹åŠ¡"
categories: ['æœªåˆ†ç±»']
tags: ['Spring', 'Mybatis', 'Ee']
artid: "145999418"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145999418
    alt: "JavaEEè¿›é˜¶Springäº‹åŠ¡"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145999418
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145999418
cover: https://bing.ee123.net/img/rand?artid=145999418
image: https://bing.ee123.net/img/rand?artid=145999418
img: https://bing.ee123.net/img/rand?artid=145999418
---

# ã€JavaEEè¿›é˜¶ã€‘Springäº‹åŠ¡

---

## ğŸƒå‰è¨€

æœ¬ç¯‡æ–‡ç« ä¸»è¦å†…å®¹ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢

1. å¯¹äº‹åŠ¡è¿›è¡Œä¸€ä¸ªç®€å•çš„ä»‹ç»
2. Springä¸­äº‹åŠ¡å¦‚ä½•å®ç°

## ğŸŒ´äº‹åŠ¡ç®€ä»‹

äº‹åŠ¡çš„æ¦‚å¿µï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººåœ¨æ•°æ®åº“çš„æ—¶å€™å·²ç»å¬è¿‡å’Œäº†è§£äº†ï¼Œæ‰€ä»¥è¿™é‡Œåªè¿›è¡Œç®€å•çš„ä»‹ç»

### ğŸš© ä»€ä¹ˆæ˜¯äº‹åŠ¡?

äº‹åŠ¡æ˜¯â¼€ç»„æ“ä½œçš„é›†åˆï¼Œæ˜¯â¼€ä¸ªä¸å¯åˆ†å‰²çš„æ“ä½œã€‚

äº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºâ¼€ä¸ªæ•´ä½“ï¼Œâ¼€èµ·å‘æ•°æ®åº“æäº¤æˆ–è€…æ˜¯æ’¤é”€æ“ä½œè¯·æ±‚ã€‚

æ‰€ä»¥è¿™ç»„æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚

### ğŸš©ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡?

æˆ‘ä»¬åœ¨è¿›è¡Œç¨‹åºå¼€å‘æ—¶,ä¹Ÿä¼šæœ‰äº‹åŠ¡çš„éœ€æ±‚.

ä¸¾ä¸ªä¾‹å­å§

æ¯”å¦‚è½¬è´¦æ“ä½œï¼ŒAå‘Bè½¬è´¦

* ç¬¬â¼€æ­¥ï¼šAè´¦â¼¾-100å…ƒ.
* ç¬¬â¼†æ­¥ï¼šBè´¦â¼¾+100å…ƒ.

å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œç¬¬â¼€æ­¥æ‰§â¾æˆåŠŸäº†,ç¬¬â¼†æ­¥æ‰§â¾å¤±è´¥äº†,é‚£ä¹ˆAè´¦â¼¾çš„100å…ƒå°±å¹³â½©â½†æ•…æ¶ˆå¤±äº†.

å¦‚æœä½¿â½¤äº‹åŠ¡å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜,è®©è¿™â¼€ç»„æ“ä½œè¦ä¹ˆâ¼€èµ·æˆåŠŸ,è¦ä¹ˆâ¼€èµ·å¤±è´¥.

### ğŸš©äº‹åŠ¡çš„æ“ä½œ

äº‹åŠ¡çš„æ“ä½œä¸»è¦æœ‰ä¸‰æ­¥:

1. å¼€å¯äº‹start transaction/begin(â¼€ç»„æ“ä½œå‰å¼€å¯äº‹åŠ¡)
2. æäº¤äº‹åŠ¡:commit(è¿™ç»„æ“ä½œå…¨éƒ¨æˆåŠŸ,æäº¤äº‹åŠ¡)
3. å›æ»šäº‹åŠ¡:rollback(è¿™ç»„æ“ä½œä¸­é—´ä»»ä½•â¼€ä¸ªæ“ä½œå‡ºç°å¼‚å¸¸,å›æ»šäº‹åŠ¡)

![](https://i-blog.csdnimg.cn/direct/0f2f5f08ae55442c9b6a7e6956ad583d.png)

## ğŸ€Spring ä¸­äº‹åŠ¡çš„å®ç°

å‰â¾¯è¯¾ç¨‹æˆ‘ä»¬è®²äº†MySQLçš„äº‹åŠ¡æ“ä½œ,Springå¯¹äº‹åŠ¡ä¹Ÿè¿›â¾äº†å®ç°.

Spring ä¸­çš„äº‹åŠ¡æ“ä½œåˆ†ä¸ºä¸¤ç±»ï¼š

1. ç¼–ç¨‹å¼äº‹åŠ¡(â¼¿åŠ¨å†™ä»£ç æ“ä½œäº‹åŠ¡).
2. å£°æ˜å¼äº‹åŠ¡(åˆ©â½¤æ³¨è§£â¾ƒåŠ¨å¼€å¯å’Œæäº¤äº‹åŠ¡).

åœ¨å­¦ä¹ äº‹åŠ¡ä¹‹å‰,æˆ‘ä»¬å…ˆå‡†å¤‡æ•°æ®å’Œæ•°æ®çš„è®¿é—®ä»£ç 

éœ€æ±‚: â½¤â¼¾æ³¨å†Œ,æ³¨å†Œæ—¶åœ¨â½‡å¿—è¡¨ä¸­æ’â¼Šâ¼€æ¡æ“ä½œè®°å½•

**æ•°æ®å‡†å¤‡ï¼š**
![](https://i-blog.csdnimg.cn/direct/9661d6e3536b4ccda578f11676a9f9ee.png)

**ä»£ç å‡†å¤‡ï¼š**

* 1. åˆ›å»ºé¡¹â½¬spring-trans,å¼•â¼ŠSpringWeb,Mybatis,mysqlç­‰ä¾èµ–
  ![](https://i-blog.csdnimg.cn/direct/b7ef85878a64492092d758aa01b758b7.png)
* 2. applicant.ymlÂ æ–‡ä»¶é…ç½®ï¼š
  ![](https://i-blog.csdnimg.cn/direct/0c6a2dab74624f568c1e6f59d6ca78a0.png)
* 3. model(å®ä½“ç±»)
  ![](https://i-blog.csdnimg.cn/direct/59b01be8c8d3467ebc3c15b12b1b663e.png)
* 4. controller
  ![](https://i-blog.csdnimg.cn/direct/3c7a0a9e610c4184accfe36a18ae322a.png)
* 5. service
  ![](https://i-blog.csdnimg.cn/direct/22665ed131284186aa8f89eda77caeb0.png)
* 6. model
  ![](https://i-blog.csdnimg.cn/direct/9f48813d73ec4929866744f52e572c48.png)
* 7. mapper
  ![](https://i-blog.csdnimg.cn/direct/f381dec6c0394396996edd30a8de884d.png)
* æµ‹è¯•
  ![](https://i-blog.csdnimg.cn/direct/c0e5d87db4034551a2f984a71c27160d.png)

### ğŸš©Spring ç¼–ç¨‹å¼äº‹åŠ¡

Spring â¼¿åŠ¨æ“ä½œäº‹åŠ¡å’Œä¸Šâ¾¯MySQLæ“ä½œäº‹åŠ¡ç±»ä¼¼,æœ‰3ä¸ªé‡è¦æ“ä½œæ­¥éª¤ï¼š

* å¼€å¯äº‹åŠ¡(è·å–äº‹åŠ¡)
* æäº¤äº‹åŠ¡
* å›æ»šäº‹åŠ¡

SpringBoot å†…ç½®äº†ä¸¤ä¸ªå¯¹è±¡:

1. DataSourceTransactionManager äº‹åŠ¡ç®¡ç†å™¨.ç”¨æ¥è·å–äº‹åŠ¡(å¼€å¯äº‹åŠ¡),æäº¤æˆ–å›æ»šäº‹åŠ¡çš„
2. TransactionDefinition æ˜¯äº‹åŠ¡çš„å±æ€§,åœ¨è·å–äº‹åŠ¡çš„æ—¶å€™éœ€è¦å°†TransactionDefinition ä¼ é€’è¿›å»ä»è€Œè·å¾—â¼€ä¸ªäº‹åŠ¡TransactionStatus

æˆ‘ä»¬å…ˆæ¥å®ç°ä¸€ä¸ªå¢åŠ ç”¨æˆ·ï¼Œæäº¤äº‹åŠ¡çš„æ¡ˆä¾‹ï¼Œæ“ä½œä»£ç å¦‚ä¸‹ï¼š
![](https://i-blog.csdnimg.cn/direct/065b7c38ade14445a3781eeb70d5b28c.png)

é¦–å…ˆæŸ¥çœ‹å½“å‰è¡¨ä¸­æ•°æ®ï¼š
![](https://i-blog.csdnimg.cn/direct/13181ec2b2664d1699162c6ce94cb7a4.png)

é€šè¿‡Postmanè¿›è¡Œè®¿é—®ï¼š
![](https://i-blog.csdnimg.cn/direct/68fd99838a2b4e00a350423cf67769b1.png)

å†æ¬¡æŸ¥çœ‹è¡¨ä¸­æ•°æ®ï¼š
![](https://i-blog.csdnimg.cn/direct/2f1624e8f1794f49912671206b2c935e.png)

æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼ŒæˆåŠŸè¿›è¡Œäº†å›æ»šæ“ä½œã€‚

æˆ‘ä»¬å†æ¥æŸ¥çœ‹äº‹åŠ¡çš„æäº¤ï¼š

ä»£ç ï¼š
![](https://i-blog.csdnimg.cn/direct/90f5407f614a46ca87a2cb385b8d1283.png)

é¦–å…ˆæŸ¥çœ‹å½“å‰è¡¨ä¸­æ•°æ®ï¼š
![](https://i-blog.csdnimg.cn/direct/1c19b0929a7e4b4abfcc730924c2632b.png)

é€šè¿‡Postmanè¿›è¡Œè®¿é—®ï¼š
![](https://i-blog.csdnimg.cn/direct/84550f4d5a9f478fafd9e34940cd2b64.png)

å†æ¬¡æŸ¥çœ‹è¡¨ä¸­æ•°æ®ï¼š
![](https://i-blog.csdnimg.cn/direct/708083ad555547a29f9ed3b2887afc9a.png)

å¯ä»¥çœ‹åˆ°å½“å‰è¡¨ä¸­å¹¶æ²¡æœ‰idä¸º4çš„å­—æ®µï¼Œé‚£ä¹ˆå¯ä»¥çœ‹å‡ºæˆåŠŸçš„è¿›è¡Œäº†å›æ»š

ä»¥ä¸Šä»£ç è™½ç„¶å¯ä»¥å®ç°äº‹åŠ¡,ä½†æ“ä½œä¹Ÿå¾ˆç¹ç,æœ‰æ²¡æœ‰æ›´ç®€å•çš„å®ç°â½…æ³•å‘¢?

æ˜¯æœ‰çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å£°å‘½å¼äº‹åŠ¡

### ğŸš©Springå£°æ˜å¼äº‹åŠ¡@Transactional

å£°æ˜å¼äº‹åŠ¡çš„å®ç°å¾ˆç®€å•

ä¸¤æ­¥æ“ä½œ:

1. æ·»åŠ ä¾èµ–
![](https://i-blog.csdnimg.cn/direct/4df7c03ebe124d2d888515e26a869668.png)

![](https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhAQABAPABAP%2F%2F%2FwAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D&pos_id=tOhTymLo)

â€‹ç¼–è¾‘

2. åœ¨éœ€è¦äº‹åŠ¡çš„â½…æ³•ä¸Šæ·»åŠ  @Transactional æ³¨è§£å°±å¯ä»¥å®ç°äº†.â½†éœ€â¼¿åŠ¨å¼€å¯äº‹åŠ¡å’Œæäº¤äº‹ åŠ¡,è¿›â¼Šâ½…æ³•æ—¶â¾ƒåŠ¨å¼€å¯äº‹åŠ¡,â½…æ³•æ‰§â¾å®Œä¼šâ¾ƒåŠ¨æäº¤äº‹åŠ¡,å¦‚æœä¸­é€”å‘â½£äº†æ²¡æœ‰å¤„ç†çš„å¼‚å¸¸ä¼šâ¾ƒåŠ¨ å›æ»šäº‹åŠ¡.

ä»£ç ï¼š
![](https://i-blog.csdnimg.cn/direct/cb5e87adb61d4691a4eea6dcec13c355.png)

è¿›è¡Œè®¿é—®ï¼š
![](https://i-blog.csdnimg.cn/direct/90f854e7a151404380174053d2a1642c.png)

æŸ¥çœ‹æ•°æ®åº“ï¼Œæ·»åŠ æˆåŠŸï¼š
![](https://i-blog.csdnimg.cn/direct/d420ab8116934ae8a2efee275031e9ac.png)

ä½¿ç”¨æ­¤æ³¨è§£åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»æ—¥å¿—ä¸­è§‚å¯Ÿåˆ°committingè¡¨ç¤ºäº‹åŠ¡æäº¤æˆåŠŸ
![](https://i-blog.csdnimg.cn/direct/0a1e32e651594da0af37767b71ffa4e3.png)

æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œä½¿è¯¥ç¨‹åºå‡ºç°å¼‚å¸¸ï¼Œç„¶åå†çœ‹çœ‹æ•ˆæœ
![](https://i-blog.csdnimg.cn/direct/cf0ec251ad5643a18618d6b89258495c.png)

æ­¤æ—¶ï¼Œæˆ‘ä»¬å†è¿›è¡Œè®¿é—®æ—¶ï¼Œä¼šå‡ºç°å¼‚å¸¸
![](https://i-blog.csdnimg.cn/direct/7523161737d74fcb91fbfe488af6107d.png)

æ•°æ®åº“æ•°æ®ä¹Ÿæ²¡æœ‰è¿›è¡Œæ·»åŠ 
![](https://i-blog.csdnimg.cn/direct/b814c2af7bff4608b724302ea768d441.png)

è§‚å¯Ÿæ—¥å¿—ï¼Œä¹Ÿæ²¡æœ‰å‡ºç°committingï¼Œè¯´æ˜äº‹åŠ¡è¿›è¡Œäº†å›æ»š
![](https://i-blog.csdnimg.cn/direct/e730880bc83f496a9dd55b40b6ef5fb3.png)

å°ç»“ï¼šè‹¥åŠ äº†Â @Transactionalæ³¨è§£ï¼Œå‡ºç°å¼‚å¸¸ä¼šè‡ªåŠ¨çš„æŠŠæ•°æ®è¿›è¡Œå›æ»šï¼›è‹¥æ²¡æœ‰åŠ @Transactionalæ³¨è§£ï¼Œæ•°æ®ä¼šæ‰§è¡ŒæˆåŠŸï¼Œä¸ä¼šè¿›è¡Œå›æ»š(äº‹åŠ¡æ²¡æœ‰å¼€å¯)ï¼Œåœ¨è¡¨ä¸­æ˜¾ç¤ºã€‚

### ğŸš©@Transactionalçš„ä½œç”¨

@Transactional å¯ä»¥ç”¨æ¥ä¿®é¥°â½…æ³•æˆ–ç±»:

* ä¿®é¥°â½…æ³•æ—¶:åªæœ‰ä¿®é¥°publicâ½…æ³•æ—¶æ‰ç”Ÿæ•ˆ(ä¿®é¥°å…¶ä»–â½…æ³•æ—¶ä¸ä¼šæŠ¥é”™,ä¹Ÿä¸ç”Ÿæ•ˆ)[æ¨è]
* ä¿®é¥°ç±»æ—¶:å¯¹ @Transactional ä¿®é¥°çš„ç±»ä¸­æ‰€æœ‰çš„publicâ½…æ³•éƒ½â½£æ•ˆ

æ–¹æ³•/ç±»è¢« @Transactional æ³¨è§£ä¿®é¥°æ—¶,åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå¼€å§‹ä¹‹å‰,ä¼šè‡ªåŠ¨å¼€å¯äº‹åŠ¡,æ–¹æ³•æ‰§è¡Œç»“æŸä¹‹å,è‡ªåŠ¨æäº¤äº‹åŠ¡.

* å¦‚æœåœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­,å‡ºç°å¼‚å¸¸,ä¸”å¼‚å¸¸æœªè¢«æ•è·,å°±è¿›è¡Œäº‹åŠ¡å›æ»šæ“ä½œ.
* å¦‚æœå¼‚å¸¸è¢«ç¨‹åºæ•è·,â½…æ³•å°±è¢«è®¤ä¸ºæ˜¯æˆåŠŸæ‰§è¡Œ,ä¾ç„¶ä¼šæäº¤äº‹åŠ¡.

æ¯”å¦‚æˆ‘ä»¬å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œå¯¹å¼‚å¸¸è¿›è¡Œæ•è·
![](https://i-blog.csdnimg.cn/direct/691fab148b1d4cda967b2567499d1271.png)

å‘é€è¯·æ±‚åï¼Œå†æ¬¡è®¿é—®æŸ¥çœ‹æ•°æ®åº“ï¼Œå‘ç°æ•°æ®æ·»åŠ æˆåŠŸ
![](https://i-blog.csdnimg.cn/direct/db85ce093bd94a6696e26e97c2ef15af.png)

è§‚å¯Ÿæ—¥å¿—ï¼šè¿™äº›æŠ¥çº¢çš„ä¿¡æ¯æ˜¯e.printStackTraceæ‰“å°çš„
![](https://i-blog.csdnimg.cn/direct/9d42a1ee32bd440bba9d5884589d223c.png)

è¿â¾ç¨‹åº,å‘ç°è™½ç„¶ç¨‹åºå‡ºé”™äº†,ä½†æ˜¯ç”±äºå¼‚å¸¸è¢«æ•è·äº†,æ‰€ä»¥äº‹åŠ¡ä¾ç„¶å¾—åˆ°äº†æäº¤.

å¦‚æœæƒ³è¿›è¡Œå›æ»šï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°

* 1. é‡æ–°æŠ›å‡ºå¼‚å¸¸
  ![](https://i-blog.csdnimg.cn/direct/8e26c8cb60874a4aa92ddebc9e7df0e7.png)
  ![](https://i-blog.csdnimg.cn/direct/0fe17bc9aa284ebe927dd49bfdf69fa9.png)
* 2. è®¾ç½®æ‰‹åŠ¨å›æ»š
  ![](https://i-blog.csdnimg.cn/direct/a179ae7f7cd5434abdafbd93a2dd5d06.png)
  ![](https://i-blog.csdnimg.cn/direct/38abd6abbcef495fbd86f45159791245.png)