---
layout: post
title: "写了一个QT的定时器"
date: 2025-03-14 17:18:47 +0800
description: "QCoreApplication不依赖于任何 GUI 相关的库和功能。关闭定时器，在程序结束的时候，再stop。声明了槽函数，是必须要去定义的。"
keywords: "写了一个QT的定时器"
categories: ['未分类']
tags: ['开发语言', 'Qt']
artid: "146261669"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146261669
    alt: "写了一个QT的定时器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146261669
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146261669
cover: https://bing.ee123.net/img/rand?artid=146261669
image: https://bing.ee123.net/img/rand?artid=146261669
img: https://bing.ee123.net/img/rand?artid=146261669
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     写了一个QT的定时器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     主程序
    </h2>
    <pre><code class="language-cpp">#include &lt;QCoreApplication&gt;
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    MainWindow w;
    return a.exec();
}
</code></pre>
    <h2>
     mainwindow.cpp程序
    </h2>
    <pre><code class="language-cpp">#include "mainwindow.h"

#include &lt;QDateTime&gt;

MainWindow::MainWindow(QObject *parent)
    :QObject(parent)
{
    pTimer = new QTimer(this);
    pTimer-&gt;setInterval(10000);
    connect(pTimer, &amp;QTimer::timeout, this, &amp;MainWindow::slot10000msTimeOut);
    pTimer-&gt;start();
    qDebug() &lt;&lt; "Start constructing MainWindow at:" &lt;&lt; QDateTime::currentDateTime();

    if (pTimer-&gt;isActive()) {
        qDebug() &lt;&lt; "Timer started successfully.";
    } else {
        qDebug() &lt;&lt; "Timer failed to start.";
    }
}
MainWindow::~MainWindow()
{
    if(pTimer-&gt;isActive()){
        pTimer-&gt;stop();
    }
}

void MainWindow::slot10000msTimeOut()
{
    qDebug() &lt;&lt; "End constructing MainWindow at:" &lt;&lt; QDateTime::currentDateTime();
}

</code></pre>
    <h2>
     mainwindow.h头文件
    </h2>
    <pre><code class="language-cpp">#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include &lt;QMainWindow&gt;
#include &lt;QTimer&gt;
#include &lt;QDebug&gt;
class MainWindow : public QObject
{
    Q_OBJECT

public:
    MainWindow(QObject *parent = nullptr);
    ~MainWindow();

private:
    QTimer *pTimer;



private slots:
    void slot10000msTimeOut();
};
#endif // MAINWINDOW_H
</code></pre>
    <p>
     总结了注意点：
    </p>
    <p>
     关闭定时器，在程序结束的时候，再stop
    </p>
    <p>
     声明了槽函数，是必须要去定义的。否则报错
    </p>
    <pre>QCoreApplication不依赖于任何 GUI 相关的库和功能</pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36323133303737332f:61727469636c652f64657461696c732f313436323631363639" class_="artid" style="display:none">
 </p>
</div>


