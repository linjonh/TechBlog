---
layout: post
title: "OSPF-3-1类LSA-Router-LSA"
date: 2025-03-14 22:12:19 +0800
description: "这个LSA描述了一台RID为2.2.2.2的路由器连接了一个RID为1.1.1.1的邻居与它相连的自己的接口IP为192.168.1.2并且描述了这条链路的网段为192.168.1.0/24。通过这条LSA我们可以知道产生这条LSA的路由器的RID为2.2.2.2,DR的接口IP地址为192.168.1.2自己的接口IP地址为192.168.1.2。这章我们来说说OSPF是如何通过不同的LSA去描述拓扑的信息以及路由信息。1类LSA描述TransNet。1类LSA的链路信息。1类LSA描述P2P。"
keywords: "OSPF-3 1类LSA Router LSA"
categories: ['未分类']
tags: ['链路状态数据库', '路由器', '网络', '华为', 'Ospf', 'Lsa', 'Ensp']
artid: "146267374"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146267374
    alt: "OSPF-3-1类LSA-Router-LSA"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146267374
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146267374
cover: https://bing.ee123.net/img/rand?artid=146267374
image: https://bing.ee123.net/img/rand?artid=146267374
img: https://bing.ee123.net/img/rand?artid=146267374
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     OSPF-3 1类LSA Router LSA
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     前面两期我们介绍了OSPF的邻居与邻接建立的关系及失败因素和原因
    </p>
    <p>
     这章我们来说说OSPF是如何通过不同的LSA去描述拓扑的信息以及路由信息
    </p>
    <h2>
     <strong>
      <span style="color:#fe2c24">
       一、概述
      </span>
     </strong>
    </h2>
    <p>
     OSPF通过不同的LSA来构成LSDB链路状态数据库,再通过SPF算法来计算出最优的最短路径
    </p>
    <h2>
     <strong>
      <span style="color:#fe2c24">
       二、LSA的分类
      </span>
     </strong>
    </h2>
    <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
     <tbody>
      <tr>
       <td>
        类型
       </td>
       <td>
        名称
       </td>
       <td>
        描述
       </td>
       <td>
        传播范围
       </td>
      </tr>
      <tr>
       <td>
        1类LSA
       </td>
       <td>
        Router LSA
       </td>
       <td>
        运行了OSPF协议的每台设备都会产生描述了设备的拓扑信息以及网段信息(链路状态和开销)
       </td>
       <td>
        只在接口所属的区域内泛洪
       </td>
      </tr>
      <tr>
       <td>
        2类LSA
       </td>
       <td>
        Network LSA
       </td>
       <td>
        由DR产生,描述DR所接入的MA网络中所有与之形成邻接关系的路由器,以及DR自己
       </td>
       <td>
        只在接口所属的区域内泛洪
       </td>
      </tr>
      <tr>
       <td>
        3类LSA
       </td>
       <td>
        Summary LSA
       </td>
       <td>
        由ABR(区域边界路由器)产生,描述区域内某个网段的路由或区域间的路由信息
       </td>
       <td>
        只在接口所属的区域内泛洪
       </td>
      </tr>
      <tr>
       <td>
        4类LSA
       </td>
       <td>
        ASBR Summary LSA
       </td>
       <td>
        由ABR产生,描述到达ASBR的路由
       </td>
       <td>
        通告给除了ASBR所在区域的其他相关区域
       </td>
      </tr>
      <tr>
       <td>
        5类LSA
       </td>
       <td>
        AS外部LSA
       </td>
       <td>
        由ASBR(自治系统边界路由器)产生,用于描述到达OSPF域外的路由或到达别的路由协议的路由,在传递的过程中下一跳不会被中间设备所修改
       </td>
       <td>
        domain
       </td>
      </tr>
      <tr>
       <td>
        7类LSA
       </td>
       <td>
        NSSA LSA
       </td>
       <td>
        由ASBR产生,用于描述到达OSPF域外的路由。NSSA LSA与AS外部LSA的功能类似,但是泛洪范围不同。NSSA LSA只能在始发的NSSA内泛洪,并且不能直接进入Area0。NSSA的ABR会将7类LSA转换成5类LSA注入到Area0
       </td>
       <td>
        NSSA区域内
       </td>
      </tr>
     </tbody>
    </table>
    <h2>
     <span style="color:#fe2c24">
      三、LSA介绍
     </span>
    </h2>
    <h3 style="text-align:center">
     <strong>
      <span style="color:#ff9900">
       <u>
        1、Router LSA
       </u>
      </span>
     </strong>
    </h3>
    <ul>
     <li>
      Router LSA使用Link来承载路由器直连接口的信息
     </li>
     <li>
      每条Link均包含"链路类型"、"链路ID"、"链路数据"以及度量值这几个关键信息。
     </li>
     <li>
      路由器可能会采用一个或者多个Link来描述某个接口
     </li>
    </ul>
    <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
     <tbody>
      <tr>
       <td>
        Link Type
       </td>
       <td>
        Link ID
       </td>
       <td>
        Link data
       </td>
      </tr>
      <tr>
       <td>
        P2P:描述一个从本路由器到邻居路由器之间的点到点链路,属于拓扑信息,由于P2P网络类型没有DR所以P2P也使用1类LSA来描述网段信息
       </td>
       <td>
        邻居路由器的Router ID
       </td>
       <td>
        宣告该Router LSA的路由器接口的IP地址
       </td>
      </tr>
      <tr>
       <td>
        TransNet:描述一个本路由器到一个Transit网段(例如MA或者NBMA网段)的连接,属于拓扑信息
       </td>
       <td>
        DR的接口IP地址
       </td>
       <td>
        宣告该Router LSA的路由器接口的IP地址
       </td>
      </tr>
      <tr>
       <td>
        StubNet:描述一个从本路由器到一个Stub网段(例如Loopback接口)的连接末梢网段,属于网段信息
       </td>
       <td>
        宣告该Router LSA的路由器接口的网络IP地址
       </td>
       <td>
        该Stub网络的网络掩码
       </td>
      </tr>
     </tbody>
    </table>
    <p style="text-align:center">
     <strong>
      <span style="color:#ff9900">
       <u>
        1类LSA的链路信息
       </u>
      </span>
     </strong>
    </p>
    <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
     <tbody>
      <tr>
       <td>
        Link Type
       </td>
       <td>
        Link ID
       </td>
       <td>
        Link Data
       </td>
      </tr>
      <tr>
       <td>
        P2P(拓扑)
       </td>
       <td>
        邻居的RID
       </td>
       <td>
        自己接口的IP地址
       </td>
      </tr>
      <tr>
       <td>
        Transnet(拓扑)
       </td>
       <td>
        DR的接口IP地址
       </td>
       <td>
        自己接口的IP地址
       </td>
      </tr>
      <tr>
       <td>
        Stubnet(网段)
       </td>
       <td>
        网络地址
       </td>
       <td>
        子网掩码
       </td>
      </tr>
      <tr>
       <td>
        Vlink(虚链路)
       </td>
       <td>
        邻居的RID
       </td>
       <td>
        自己接口的IP地址
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <h3 style="text-align:center">
     <strong>
      <span style="color:#ff9900">
       <u>
        1类LSA描述P2P
       </u>
      </span>
     </strong>
    </h3>
    <p>
     拓扑
    </p>
    <p>
     <img alt="" height="332" src="https://i-blog.csdnimg.cn/direct/86341e1566f141cd9b990d51ffff38ae.png" width="699"/>
    </p>
    <p>
     (1)基础配置
    </p>
    <pre><code>AR1
system
sysname AR1
interface g0/0/0
ip add 192.168.1.1 24

AR2
system
sysname AR2
interface g0/0/0
ip add 192.168.1.2 24</code></pre>
    <p>
     (2)OSPF配置
    </p>
    <pre><code>AR1
ospf 1 router-id 1.1.1.1
area 0
netw 0.0.0.0 255.255.255.255
q
q
interface g0/0/0
ospf network-type p2p

AR2
ospf 1 router-id 2.2.2.2
area 0
netw 0.0.0.0 255.255.255.255
q
q
interface g0/0/0
ospf network-type p2p
</code></pre>
    <p>
     查看1类LSA信息
    </p>
    <p>
     <img alt="" height="712" src="https://i-blog.csdnimg.cn/direct/ada611f28a0d4378a3d85f91d2c9e206.png" width="406"/>
    </p>
    <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
     <tbody>
      <tr>
       <td>
        Type:Router
       </td>
       <td>
        LSA类型为1类LSA
       </td>
      </tr>
      <tr>
       <td>
        Ls id:2.2.2.2
       </td>
       <td>
        自己的RID
       </td>
      </tr>
      <tr>
       <td>
        Adv rtr:2.2.2.2
       </td>
       <td>
        产生这条LSA的路由器的RID
       </td>
      </tr>
      <tr>
       <td>
        Ls age:8
       </td>
       <td>
        生存周期
       </td>
      </tr>
      <tr>
       <td>
        seq:80000002
       </td>
       <td>
        序列号
       </td>
      </tr>
      <tr>
       <td>
        Link ID:1.1.1.1
       </td>
       <td>
        邻居的RID
       </td>
      </tr>
      <tr>
       <td>
        Data:192.168.1.2
       </td>
       <td>
        自己接口的IP地址
       </td>
      </tr>
      <tr>
       <td>
        Link Type:p-2-p
       </td>
       <td>
        P2P为拓扑信息
       </td>
      </tr>
      <tr>
       <td>
        Metric:1
       </td>
       <td>
        开销值
       </td>
      </tr>
      <tr>
       <td>
        Link ID:192.168.1.0
       </td>
       <td>
        网络号
       </td>
      </tr>
      <tr>
       <td>
        Data:255.255.255.0
       </td>
       <td>
        子网掩码
       </td>
      </tr>
      <tr>
       <td>
        Link Type:Stubnet
       </td>
       <td>
        Stubnet为网段信息
       </td>
      </tr>
      <tr>
       <td>
        Metric:1
       </td>
       <td>
        开销值
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     这个LSA描述了一台RID为2.2.2.2的路由器连接了一个RID为1.1.1.1的邻居与它相连的自己的接口IP为192.168.1.2并且描述了这条链路的网段为192.168.1.0/24
    </p>
    <p>
     我们可以通过这些信息简单画出一张拓扑图
    </p>
    <p class="img-center">
     <img alt="" height="186" src="https://i-blog.csdnimg.cn/direct/f32b9c75f0c043ec8115be6f2a6a384b.png" width="556"/>
    </p>
    <h3 style="text-align:center">
     <strong>
      <span style="color:#ff9900">
       <u>
        1类LSA描述TransNet
       </u>
      </span>
     </strong>
    </h3>
    <p>
     拓扑
    </p>
    <p class="img-center">
     <img alt="" height="326" src="https://i-blog.csdnimg.cn/direct/b139ac7480e04701abab57ba44f21b5e.png" width="727"/>
    </p>
    <p>
     (1)基础配置
    </p>
    <p>
    </p>
    <pre><code>AR1
system
sysname AR1
interface g0/0/0
ip add 192.168.1.1 24

AR2
system
sysname AR2
interface g0/0/0
ip add 192.168.1.2 24</code></pre>
    <p>
     (2)OSPF配置
    </p>
    <pre><code>AR1
ospf 1 router-id 1.1.1.1
area 0
netw 0.0.0.0 255.255.255.255

AR2
ospf 1 router-id 2.2.2.2
area 0
netw 0.0.0.0 255.255.255.255
</code></pre>
    <p>
     查看1类LSA信息
    </p>
    <p>
     <img alt="" height="550" src="https://i-blog.csdnimg.cn/direct/612b27b4b75349d3af97591a6930067d.png" width="394"/>
    </p>
    <p>
    </p>
    <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
     <tbody>
      <tr>
       <td>
        Type:Router
       </td>
       <td>
        LSA类型为1类LSA
       </td>
      </tr>
      <tr>
       <td>
        Ls id:2.2.2.2
       </td>
       <td>
        自己的RID
       </td>
      </tr>
      <tr>
       <td>
        Adv rtr:2.2.2.2
       </td>
       <td>
        产生这条LSA的路由器的RID
       </td>
      </tr>
      <tr>
       <td>
        Ls age:18
       </td>
       <td>
        生存周期
       </td>
      </tr>
      <tr>
       <td>
        seq:80000004
       </td>
       <td>
        序列号
       </td>
      </tr>
      <tr>
       <td>
        Link ID:192.168.1.2
       </td>
       <td>
        DR的接口IP地址
       </td>
      </tr>
      <tr>
       <td>
        Data:192.168.1.2
       </td>
       <td>
        自己的接口IP地址与DR最近的接口
       </td>
      </tr>
      <tr>
       <td>
        Link Type:TransNet
       </td>
       <td>
        Transnet(拓扑信息)
       </td>
      </tr>
      <tr>
       <td>
        Metric:1
       </td>
       <td>
        开销值
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     通过这条LSA我们可以知道产生这条LSA的路由器的RID为2.2.2.2,DR的接口IP地址为192.168.1.2自己的接口IP地址为192.168.1.2
    </p>
    <p>
     通过这些信息我们可以简单画出一张拓扑
    </p>
    <p class="img-center">
     <img alt="" height="137" src="https://i-blog.csdnimg.cn/direct/114a13a8f39346ccafa301885c20ffb8.png" width="433"/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f46616e6d65616e672f:61727469636c652f64657461696c732f313436323637333734" class_="artid" style="display:none">
 </p>
</div>


