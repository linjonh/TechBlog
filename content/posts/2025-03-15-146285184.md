---
layout: post
title: "面试系列蚂蚁金服技术面2"
date: 2025-03-15 21:25:15 +0800
description: "今天继续分享一下蚂蚁金服的 Java 后端开发岗位真实社招面经，复盘面试过程中踩过的坑，整理面试过程中提到的知识点，希望能给正在准备面试的你一些参考和启发，希望对你有帮助，愿你能够获得心仪的 offer ! "
keywords: "面试系列｜蚂蚁金服技术面【2】"
categories: ['面试笔试']
tags: ['面试', '职场和发展']
artid: "146285184"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146285184
    alt: "面试系列蚂蚁金服技术面2"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146285184
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146285184
cover: https://bing.ee123.net/img/rand?artid=146285184
image: https://bing.ee123.net/img/rand?artid=146285184
img: https://bing.ee123.net/img/rand?artid=146285184
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     面试系列｜蚂蚁金服技术面【2】
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     今天继续分享一下蚂蚁金服的 Java 后端开发岗位真实社招面经，复盘面试过程中踩过的坑，整理面试过程中提到的知识点，希望能给正在准备面试的你一些参考和启发，希望对你有帮助，愿你能够获得心仪的 offer !
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1f74585c89a448efb53dce7f5ddbce3a.png#pic_center">
      <br/>
      第一轮面试完成后的第二天收到电话通知简历面过了，是另外一位面试官打的，通知进行下一轮面试。还是约的是晚上 8 点，不过这次的面试官应该是在忙事情，通过电话沟通，应该还在加班，大概推迟了半个小时，这一次是视频远程面试，需要开摄像头，并且有笔试环节，下面是面试时语音实录复盘。
     </img>
    </p>
    <p>
     <strong>
      面试官
     </strong>
     ：
     <strong>
      首先简单自我介绍一下。
     </strong>
    </p>
    <p>
     <strong>
      候选者
     </strong>
     ：好的，balabala…（按照提前准备的进行答复）。
    </p>
    <hr/>
    <p>
     <strong>
      面试官
     </strong>
     ：
     <strong>
      讲一下自己现在所负责的项目。
     </strong>
    </p>
    <p>
     <strong>
      候选者
     </strong>
     ：好的，balabala…（按照提前准备的进行答复）。
    </p>
    <hr/>
    <p>
     <strong>
      面试官
     </strong>
     ：
     <strong>
      说一下你负责这个项目模块的架构设计及原因？
     </strong>
    </p>
    <p>
     <strong>
      候选者
     </strong>
     ：嗯，自己负责的这个项目的架构设计主要考虑以下几个方面。
    </p>
    <p>
     <strong>
      候选者
     </strong>
     ：首先考虑
     <strong>
      微服务架构
     </strong>
     ，各模块
     <strong>
      职责单一、独立部署、独立扩容。
     </strong>
    </p>
    <p>
     <strong>
      候选者
     </strong>
     ：其次考虑
     <strong>
      高可用性
     </strong>
     <strong>
      ，
     </strong>
     用户登录状态和数据存储在 Redis 中。这样服务可以在任意节点处理请求实现负载均衡。通过 Nginx 进行
     <strong>
      负载均衡
     </strong>
     ，并集成 Sentinel 做
     <strong>
      熔断降级
     </strong>
     ，保证服务在高峰期稳定运行。
    </p>
    <p>
     <strong>
      候选者
     </strong>
     ：还考虑了
     <strong>
      可扩展性
     </strong>
     ，支持
     <strong>
      横向扩容，
     </strong>
     服务节点可以
     <strong>
      动态增加或减少
     </strong>
     ，并通过
     <strong>
      Nacos +
     </strong>
     <strong>
      Spring Cloud
     </strong>
     <strong>
      <strong>
       <strong>
        Gateway
       </strong>
       实现
      </strong>
      自动注册与发现
     </strong>
     ，从而支持
     <strong>
      弹性伸缩。
     </strong>
    </p>
    <hr/>
    <p>
     <strong>
      面试官
     </strong>
     ：
     <strong>
      你有没有处理过
     </strong>
     <strong>
      CPU
     </strong>
     <strong>
      高和
     </strong>
     <strong>
      内存
     </strong>
     <strong>
      高的问题，如何排查的？
     </strong>
    </p>
    <p>
     <strong>
      候选者
     </strong>
     ：有遇到过，首先要排查定位到具体原因。
     <strong>
      CPU
     </strong>
     <strong>
      高的排查方法可以使用 top 命令检查占用 CPU 较高的进程，再使用
     </strong>
     <strong>
      jstack
     </strong>
     <strong>
      查看线程堆栈，分析是否有死循环或锁竞争
     </strong>
     。
     <strong>
      内存高排查方法可以使用 jmap 分析内存快照，查找内存泄漏。
     </strong>
    </p>
    <hr/>
    <p>
     <strong>
      面试官：
     </strong>
     <strong>
      如何解决项目中锁竞争比较频繁的情况？
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     嗯…（思考中）有的，主要是通过几个方式应对。
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     使用
     <strong>
      读写锁
     </strong>
     （如
     <strong>
      ReentrantReadWriteLock
     </strong>
     ）降低写锁的竞争；使用
     <strong>
      分段锁
     </strong>
     （如
     <strong>
      ConcurrentHashMap
     </strong>
     ）；使用
     <strong>
      CAS
     </strong>
     <strong>
      操作
     </strong>
     （如
     <strong>
      AtomicInteger
     </strong>
     ,
     <strong>
      AtomicReference
     </strong>
     等）；
     <strong>
      缩小锁的粒度，避免锁住大块代码。
     </strong>
    </p>
    <hr/>
    <p>
     <strong>
      面试官：
     </strong>
     <strong>
      就项目中遇到过什么比较有挑战性的问题，说说如何分析与解决？
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     第一个挑战是项目中遇到的
     <strong>
      高并发环境下的性能瓶颈分析与优化
     </strong>
     ，通过查看系统的资源消耗情况（
     <strong>
      CPU
     </strong>
     <strong>
      、
     </strong>
     <strong>
      内存
     </strong>
     <strong>
      、磁盘
     </strong>
     <strong>
      IO
     </strong>
     <strong>
      、网络
     </strong>
     等）定位到具体的性能瓶颈，分析
     <strong>
      数据库、缓存、
     </strong>
     <strong>
      消息队列
     </strong>
     等是否是瓶颈。查看
     <strong>
      是否有锁竞争、
     </strong>
     <strong>
      死锁
     </strong>
     等问题。进行缓存优化、数据库优化、SQL查询优化、异步处理、线程池调优等操作提升性能。持续监控确保优化操作后避免新的瓶颈再次出现。
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     第二个挑战是系统的
     <strong>
      高可用性
     </strong>
     <strong>
      与系统容灾设计
     </strong>
     ，系统在遭遇数据中心故障时，如何
     <strong>
      确保高可用性
     </strong>
     。主要考虑进行
     <strong>
      多数据中心部署
     </strong>
     ：分析当前系统是否仅部署在单一数据中心，是否存在单点故障问题。负载均衡与流量切换：确认流量切换策略是否合理，是否能在发生故障时迅速切换到备用数据中心。
     <strong>
      备份与恢复
     </strong>
     ：检查数据的备份策略是否能满足灾难恢复的要求，尤其是实时备份和快速恢复。
    </p>
    <hr/>
    <p>
     <strong>
      面试官：
     </strong>
     <strong>
      死锁问题的分析与具体解决办法（具体排查思路与实践过程）？
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     排查步骤可以使用
     <strong>
      jstack
     </strong>
     检查线程堆栈，分析死锁状态，分析日志，找到涉及的锁对象，使用死锁检测工具，如
     <strong>
      Arthas 进行排查。发现死锁分析
     </strong>
     解决办法，可以通过
     <strong>
      避免嵌套锁
     </strong>
     ，使用
     <strong>
      tryLock
     </strong>
     尝试获取锁，避免阻塞。
    </p>
    <hr/>
    <p>
     <strong>
      面试官：解释一下
     </strong>
     <strong>
      MySQL
     </strong>
     <strong>
      中的幻读？
     </strong>
    </p>
    <p>
     <strong>
      候选者:
     </strong>
     （八股文来了，这题我熟）幻读指的是在同一事务内，多次执行相同查询，结果集却发生了变化，比如事务 A 先查询 WHERE age &gt; 18，事务 B 插入一条 age = 20 的数据，事务 A 再次查询时，结果发生了变化。这种现象通常出现在 REPEATABLE READ 隔离级别下。
    </p>
    <p>
     <strong>
      面试官：那么
      <strong>
       <strong>
        幻读
       </strong>
      </strong>
      问题如何解决?
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     (开始继续追问，稳住）MySQL 主要通过
     <strong>
      间隙锁（Gap Lock）
     </strong>
     解决幻读问题，它会锁住查询范围内的间隙，防止其他事务插入新数据。例如 SELECT … FOR UPDATE 在可重复读级别下会锁住查询范围，避免新数据插入导致幻读。此外，升级到 Serializable 隔离级别 也能彻底避免幻读，但代价较高，会影响并发性能。
    </p>
    <p>
     <strong>
      面试官：你提到间隙锁，那么说一下间隙锁死锁原因与排查思路，如何预防？
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     嗯…（三连问，GG，要思考一下，当时没有答好）首先形成死锁的情况主要有
     <strong>
      （1）事务锁定范围重叠，相互等待。(2）索引未命中，触发不必要的间隙锁。(3）并发插入，多个事务尝试插入相同区间数据。
     </strong>
     <br/>
     <strong>
      候选者：
     </strong>
     排查思路：可以通过 SHOW ENGINE INNODB STATUS\G 查死锁详情。以及 SHOW PROCESSLIST 查看等待锁的事务。
     <br/>
     <strong>
      候选者：
     </strong>
     可以使用唯一索引，减少间隙锁。避免大范围 FOR UPDATE，改用主键锁定。降低隔离级别（如 READ COMMITTED）。固定事务顺序，避免交叉锁。
    </p>
    <hr/>
    <p>
     <strong>
      面试官：好的，我们继续， redolog 日志在磁盘上的存储方式？落盘的策略有哪些？
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     存储方式是通过 Redo Log 循环写的固定大小日志文件；落盘策略是 innodb_flush_log_at_trx_commit 控制落盘频率参数：
     <code>
      0
     </code>
     : 每秒刷新到磁盘、
     <code>
      1
     </code>
     : 每次事务提交时刷新
     <code>
      2
     </code>
     : 每次提交时写入系统缓存，每秒刷新到磁盘。
    </p>
    <hr/>
    <p>
     <strong>
      面试官：
     </strong>
     RabbitMQ的镜像集群与普通集群有什么区别，如何保证高可用，消息的持久化机制？
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     嗯…（当时不知道，思考片段后还是直说不知道）这个自己不熟悉。(下来看了下复盘知识点镜像集群所有节点都存储完整的队列，避免单点故障，
     <strong>
      缺点
     </strong>
     : 性能下降，带来更高的同步开销；普通集群: 只有主节点存储队列数据：
     <strong>
      高可用
     </strong>
     : 使用 Quorum Queues 或者 镜像队列策略 ）。
    </p>
    <hr/>
    <p>
     <strong>
      面试官：
     </strong>
     <strong>
      ThreadLocal 原理，以及在线程池中使用需要注意什么问题，或者说有没有遇到 ThreadLocal 的坑？
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     <strong>
      ThreadLocal 原理为每个线程单独存储变量，避免线程间数据共享
     </strong>
     。线程池中的问题主要是线程复用导致 ThreadLocal 数据未清理，可能引起内存泄漏。可以使用
     <code>
      ThreadLocal.remove()
     </code>
     手动清理；
     <strong>
      还有一个问题是ThreadLocal无法跨线程传递变量，这个时候可以使用阿里的 TransmittableThreadLocal (TTL) 来传递变量。
     </strong>
    </p>
    <hr/>
    <p>
     <strong>
      面试官：下面我们做两道题，可以先说一下你的思路
     </strong>
    </p>
    <p>
     <strong>
      1、算法题：最靠近目标数的和
     </strong>
    </p>
    <p>
     <strong>
      题目描述
     </strong>
     : 给定一个整数数组
     <code>
      nums
     </code>
     和一个目标值
     <code>
      target
     </code>
     ，请从数组中找到三个整数，使得它们的和最接近
     <code>
      target
     </code>
     ，并返回这个和。
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     思路：
     <strong>
      排序 +
     </strong>
     <strong>
      双指针
     </strong>
     : 1）先对数组进行排序。2）固定一个数
     <code>
      nums[i]
     </code>
     ，使用双指针
     <code>
      left
     </code>
     和
     <code>
      right
     </code>
     查找最接近
     <code>
      target
     </code>
     的两个数
    </p>
    <p>
     <strong>
      面试官：说一下时间复杂度和空间复杂度
     </strong>
    </p>
    <p>
     <strong>
      候选者：
     </strong>
     <strong>
      时间复杂度
     </strong>
     :
     <code>
      O(n^2)
     </code>
     ，
     <strong>
      空间复杂度
     </strong>
     :
     <code>
      O(1)
     </code>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">threeSumClosest</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> closestSum <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> left <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> sum <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>target <span class="token operator">-</span> sum<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>target <span class="token operator">-</span> closestSum<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                closestSum <span class="token operator">=</span> sum<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                left<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                right<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> closestSum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      2、考察多线程的熟悉程度：有两个线程，一个打印奇数，一个打印偶数，调度两个线程，升序打印1到100的数字
     </strong>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintOddEven</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MAX</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Thread</span> oddThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> <span class="token constant">MAX</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 判断是否是奇数</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        count<span class="token operator">++</span><span class="token punctuation">;</span>
                        <span class="token comment">// 唤醒偶数线程</span>
                        lock<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token comment">// 等待偶数线程打印</span>
                            lock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"奇数线程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> evenThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> <span class="token constant">MAX</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 判断是否是偶数</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        count<span class="token operator">++</span><span class="token punctuation">;</span>
                        <span class="token comment">// 唤醒奇数线程</span>
                        lock<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token comment">// 等待奇数线程打印</span>
                            lock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"偶数线程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        oddThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        evenThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      面试官：还有没有其他写法？
     </strong>
     <br/>
     <strong>
      候选者：还有可以通过信号量 Semaphore 来进行线程之间的协作。
     </strong>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Semaphore</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintOddEvenWithSemaphore</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MAX</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Semaphore</span> semaphore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Semaphore</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Thread</span> oddThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> <span class="token constant">MAX</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 奇数线程等待信号量</span>
                    semaphore<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 判断当前是否是奇数</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> count <span class="token operator">&lt;=</span> <span class="token constant">MAX</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        count<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 释放信号量，唤醒偶数线程</span>
                    semaphore<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"奇数线程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> evenThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> <span class="token constant">MAX</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 偶数线程等待信号量</span>
                    semaphore<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 判断当前是否是偶数</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> count <span class="token operator">&lt;=</span> <span class="token constant">MAX</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        count<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 释放信号量，唤醒奇数线程</span>
                    semaphore<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"偶数线程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        oddThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        evenThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     <strong>
      面试官：那么还有没有其他的？
     </strong>
    </p>
    <p>
     其实这里还有写法是通过 Condition 来做，当时没有想到，这道题还是比较经典，是面试官常考的一道题。
    </p>
    <p>
     <strong>
      面试官：还有没有想问我的？
     </strong>
     <br/>
     还是照例问了技术栈和团队的主要方向是什么。
    </p>
    <p>
     <strong>
      面试官： 后续有结果会邮件通知你这边，感谢你参与今天的面试。
     </strong>
    </p>
    <hr/>
    <p>
     第二轮面试大概持续将近有一个小时，由于面试官迟到了一会，面试流程完成后他还主动聊了一会，当然第二轮面试完成后还是照样等通知。
    </p>
    <p>
     📢 如果对你有帮助的话，还请帮忙点赞 + 收藏！！！（谢谢！！！）
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f427261645f50695474372f:61727469636c652f64657461696c732f313436323835313834" class_="artid" style="display:none">
 </p>
</div>


