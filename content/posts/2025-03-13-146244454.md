---
layout: post
title: "Linux-Not-enough-free-space-to-extract-.zip-or-file"
date: 2025-03-13 23:01:14 +0800
description: "ZIP 文件在解压过程中会产生比压缩包本身更大的临时数据，一旦超出 1.6 GB 的限制，就会报“空间不足”的错误，即使主分区空间还很充裕也无济于事。导致该错误的主要原因是，虽然你的主分区确实有足够的可用空间，但很多图形解压工具在解压时会默认先把文件写到一个较小的临时文件系统（命令直接解压到磁盘上的某个文件夹，不再依赖小容量的临时文件系统。是 GNOME 的图形解压工具，你可以根据自己的软件更换命令。这样会直接把解压后的文件放到指定目录，跳过小容量的。如果只是想顺利解压，最简单的方法就是使用命令行的。"
keywords: "[Linux] Not enough free space to extract *.zip or file"
categories: ['未分类']
tags: ['运维', '服务器', 'Linux']
artid: "146244454"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146244454
    alt: "Linux-Not-enough-free-space-to-extract-.zip-or-file"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146244454
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146244454
cover: https://bing.ee123.net/img/rand?artid=146244454
image: https://bing.ee123.net/img/rand?artid=146244454
img: https://bing.ee123.net/img/rand?artid=146244454
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     [Linux] Not enough free space to extract *.zip or file
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     原因分析：
    </p>
    <p>
     导致该错误的主要原因是，虽然你的主分区确实有足够的可用空间，但很多图形解压工具在解压时会默认先把文件写到一个较小的临时文件系统（
     <code>
      tmpfs
     </code>
     ），比如这里只显示 1.6 GB。ZIP 文件在解压过程中会产生比压缩包本身更大的临时数据，一旦超出 1.6 GB 的限制，就会报“空间不足”的错误，即使主分区空间还很充裕也无济于事。
    </p>
    <p>
     <strong>
      原因简要：
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       图形解压工具使用小容量的
       <code>
        tmpfs
       </code>
       做临时目录
      </strong>
      <ul>
       <li>
        <code>
         tmpfs
        </code>
        一般是驻留在内存或交换空间中，容量相对较小。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       ZIP 解压时需要更多的临时空间
      </strong>
      <ul>
       <li>
        解压时，文件会先解到临时目录，最后再写到目标路径。
       </li>
       <li>
        若解压后文件总大小超过临时目录容量，就会出现“空间不足”的错误。
       </li>
      </ul>
     </li>
    </ol>
    <p>
    </p>
    <p>
    </p>
    <p>
     <strong>
      解决方法：
     </strong>
    </p>
    <ol>
     <li>
      <strong>
       使用命令行解压
      </strong>
      <ul>
       <li>
        例如
       </li>
       <li>
        <pre><code>unzip par.zip -d /目标目录
</code></pre>
        <p>
         这样会直接把解压后的文件放到指定目录，跳过小容量的
         <code>
          tmpfs
         </code>
         。
        </p>
       </li>
      </ul>
     </li>
    </ol>
    <p>
     2.
     <strong>
      设置自定义临时目录
     </strong>
    </p>
    <ul>
     <li>
      有些图形解压软件可以在“设置”或“偏好”中指定临时目录。
     </li>
     <li>
      或者在命令行里先设置
      <code>
       TMPDIR
      </code>
      环境变量，再启动图形解压程序
     </li>
     <li>
      <pre><code>export TMPDIR="/主分区上更大的目录"
file-roller par.zip
</code></pre>
      <p>
       <code>
        file-roller
       </code>
       是 GNOME 的图形解压工具，你可以根据自己的软件更换命令
      </p>
     </li>
    </ul>
    <p>
    </p>
    <p>
     <strong>
      3. 增大
      <code>
       tmpfs
      </code>
      容量
     </strong>
     （一般不推荐，除非你非常确定自己的内存/交换空间够用）
    </p>
    <pre><code>sudo mount -o remount,size=8G /tmp
</code></pre>
    <ol>
     <li>
      <ul>
       <li>
        但要谨慎使用，可能会导致系统内存占用过多。
       </li>
      </ul>
     </li>
    </ol>
    <p>
     如果只是想顺利解压，最简单的方法就是使用命令行的
     <code>
      unzip
     </code>
     命令直接解压到磁盘上的某个文件夹，不再依赖小容量的临时文件系统。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34303833373534322f:61727469636c652f64657461696c732f313436323434343534" class_="artid" style="display:none">
 </p>
</div>


