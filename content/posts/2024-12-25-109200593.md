---
layout: post
title: "前端发送POST请求,后端数据收到为null解决方案RequestBody注解的详细使用content-type决定了发送什么类型的数据"
date: 2024-12-25 23:47:50 +0800
description: "本文探讨了前端通过POST请求发送JSON数据至后端时，后端如何正确接收及处理这些数据的方法。重点介"
keywords: "通过接口传递给后端的数据为null"
categories: ['Springboot']
tags: ['Ajax']
artid: "109200593"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=109200593
    alt: "前端发送POST请求,后端数据收到为null解决方案RequestBody注解的详细使用content-type决定了发送什么类型的数据"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=109200593
featuredImagePreview: https://bing.ee123.net/img/rand?artid=109200593
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端发送POST请求，后端数据收到为null解决方案、@RequestBody注解的详细使用、content-type决定了发送什么类型的数据
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="POSTF12null_0">
     </a>
     前端通过POST请求发送数据，并且通过F12也可查看到具体数据，但后端数据接收到为null的情况。
    </h4>
    <p>
     前端是这样发送的数据
    </p>
    <pre><code class="prism language-java"><span class="token keyword">this</span><span class="token punctuation">.</span>$axios
          <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
            id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            cover<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>cover<span class="token punctuation">,</span>
            title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
            author<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>author<span class="token punctuation">,</span>
            date<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>date<span class="token punctuation">,</span>
            press<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>press<span class="token punctuation">,</span>
            abs<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>abs<span class="token punctuation">,</span>
            cid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>cid
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resp <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>resp <span class="token operator">&amp;&amp;</span> resp<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>dialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     打开开发者工具F12NetWork界面查看请求数据
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dee70a8be779c419584f7aa5ff1633c5.png#pic_center">
      <br/>
      请求发送成功并且数据也没问题，数据的发送类型：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0c014f07f848085489437975b91b32cd.png#pic_center">
       <br/>
       以JSON形式发送，查看后端的数据接收情况：
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/aae2f2b10fd7fa3fc0bb65165b16fc21.png#pic_center">
        <br/>
        查看我们后端mvc的controller配置
       </img>
      </img>
     </img>
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/books"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookService<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <p>
     很明显，我是以Book实体类来接收JSON数据，JSON数据是放在post请求body(请求体）当中的，而我们以实体类来接收当然不会接收数据。
     <br/>
     **解决方式：**加@RequestBody注解来将JSON数据封装给JAVABean类型
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/books"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateBook</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> Book book<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookService<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <p>
     这样后端便可以接收到数据了
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/edc4c29812cfb7e4ad6b667b712ee6e7.png#pic_center"/>
    </p>
    <p>
     不使用@RequestBody注解，如果是以post请求将数据放在请求头的参数中情况会是怎么样呢？
     <br/>
     打开PostMan工具，将数据放在请求头当中
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/615e4c193cedef1e1de48e0a428ebf32.png#pic_center">
      <br/>
      后端接收到了数据：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/56d8484785535071ab3b13735f38e1dd.png#pic_center">
       <br/>
       这种情况
       <strong>
        总结
       </strong>
       ：
       <br/>
       1、以POST请求将数据放在请求体当中，后端需要使用@RequestBody注解来对JAVABean类型数据进行封装。
       <br/>
       2、将参数放在请求头中，会自动对数据封装，不使用@RequestBody注解也可以。
       <br/>
       <strong>
        原因
       </strong>
       : 后端根据不同的Content-Type等情况,Spring-MVC会采取不同的HttpMessageConverter实现来进行信息转换解析，数据放在请求体中，Content-Type类型为
       <strong>
        application/json
       </strong>
       ，数据放在请求头中，Content-Type类型为
       <strong>
        application/x-www-form-urlencoded
       </strong>
       。
      </img>
     </img>
    </p>
    <p>
     谷歌浏览器也会根据
     <code>
      Content-Type
     </code>
     的类型不同将数据在开发者工具中显示不同，如果是json类型就会显示Request Payload，如果是form，就会显示Form Data。
    </p>
    <p>
     上述情况分析完了，接下来看下什么情况该使用@RequestBody注解，什么情况不该使用。
    </p>
    <h3>
     <a id="ReqestBody_62">
     </a>
     @ReqestBody注解
    </h3>
    <h4>
     <a id="1jsonRequestBody_63">
     </a>
     1、第一种情况就是上面这种，前端发送数据类型为json数据，后端使用@RequestBody注解来自动对数据封装。
    </h4>
    <p>
     对于这种情况有点需要注意一下，如果是String类型而不是JAVABean类型，使用了该注解，则接受到的json数据转换为String类型，并且数据内容是json形式的字符串，看：
     <br/>
     通过PostMan发送json数据，首先设置请求头将Content-Type类型设置为application/json类型
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/86d85c31578a93bbd0b5a05475157d09.png#pic_center">
      <br/>
      发送请求体
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/924b4c9913dd8b9d21ea74adb94ae2c8.png#pic_center">
       <br/>
       看下后端的数据：json形式的字符串
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/42a93271349c4e12aaf01913410480b1.png#pic_center">
        <br/>
        我们要使用还得把这个数据给提取出来。
        <br/>
        首先导入对应jar包
       </img>
      </img>
     </img>
    </p>
    <pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> JSONObject对象依赖的jar包 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>beanutils<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>beanutils<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.9</span><span class="token number">.3</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>collections<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>collections<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.2</span><span class="token number">.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>lang<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>lang<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.6</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>logging<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>logging<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.1</span><span class="token number">.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>ezmorph<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>ezmorph<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.0</span><span class="token number">.6</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>json<span class="token operator">-</span>lib<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>json<span class="token operator">-</span>lib<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.2</span><span class="token number">.3</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>classifier<span class="token punctuation">&gt;</span></span>jdk15<span class="token operator">&lt;</span><span class="token operator">/</span>classifier<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 指定jdk版本 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Json依赖架包下载 <span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre>
    <p>
     进行数据提取
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testJson"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">testJson3</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> String string<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">// 将string类型转换为json数据</span>
        JSONObject json <span class="token operator">=</span> JSONObject<span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 使用JSONObject类的get方法提取属性</span>
        Object string1 <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 再转换为string类型</span>
        String s <span class="token operator">=</span> string1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"object:string1:"</span><span class="token operator">+</span>string1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> string<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <p>
     很明显，繁琐，所以这种一个数据我们还是使用get方式将参数放在url中合适。
    </p>
    <h4>
     <a id="2formdataRequestBody_127">
     </a>
     2、前端发送数据类型为form-data类型，后端不使用@RequestBody注解。
    </h4>
    <p>
     使用ajax发送post请求时数据都默认为json类型，如果是表单设置post请求，发送到后端，默认为form-data类型，前面说的数据放在请求头中，就是该情况，后端会自动对数据进行封装，无论是JAVABean类型还是基本类型，当然如果数据较多还是放在请求体中比较好。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bd08f846eca14b33259fd7cce7c3409b.png#pic_center"/>
     <br/>
     参考文章：
     <br/>
     1、
     <a href="https://segmentfault.com/a/1190000018774494" rel="nofollow">
      Form-data与Request-Payload
     </a>
     <br/>
     2、
     <a href="https://blog.csdn.net/justry_deng/article/details/80972817">
      RequestBody的使用
     </a>
     <br/>
     3、
     <a href="https://blog.csdn.net/weixin_42424720/article/details/84642999">
      JSON与String类型相互转换
     </a>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34343636303336372f:61727469636c652f64657461696c732f313039323030353933" class_="artid" style="display:none">
 </p>
</div>


