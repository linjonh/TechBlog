---
layout: post
title: "æ·±å…¥è§£æ-TensorFlow-å…¼å®¹æ€§é—®é¢˜åŠæ„å»ºè¾“å‡ºæ–‡ä»¶ç»“æ„"
date: 2025-03-16 16:58:37 +0800
description: "å®ƒçš„æ–‡ä»¶ç»“æ„å†³å®šäº†æœ€ç»ˆéƒ¨ç½²çš„ç»„ä»¶ï¼Œç†è§£è¿™äº›æ–‡ä»¶çš„ä½œç”¨ï¼Œæœ‰åŠ©äºå¼€å‘è€…æŒæ¡ TensorFlow åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„è¿è¡Œæœºåˆ¶ã€‚ï¼Œå¸®åŠ©å¼€å‘è€…æ›´ç³»ç»Ÿåœ°æŒæ¡ TensorFlow åœ¨å®é™…åº”ç”¨ä¸­çš„æ„å»ºå’Œä¼˜åŒ–æ–¹æ³•ã€‚è®²è§£äº† TensorFlow Lite çš„æ ¸å¿ƒç»„ä»¶ï¼Œè®©ä½ èƒ½å¤Ÿæ›´ç³»ç»Ÿåœ°ç†è§£ã€‚ç„¶è€Œï¼Œåœ¨å®é™…éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…ç»å¸¸é‡åˆ°ã€‚TensorFlow æ˜¯å½“å‰ä¸»æµçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹ä¸€ï¼Œåœ¨ã€‚ä¸‹ï¼ŒTensorFlow çš„æ„å»ºå’Œé€‚é…å¾€å¾€å……æ»¡æŒ‘æˆ˜ã€‚ï¼Œå¦‚æœ Bazel ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œä¼šå¯¼è‡´ã€‚åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šï¼Œä½ å¯ä»¥ç›´æ¥æµ‹è¯•ã€‚"
keywords: "æ·±å…¥è§£æ TensorFlow å…¼å®¹æ€§é—®é¢˜åŠæ„å»ºè¾“å‡ºæ–‡ä»¶ç»“æ„*"
categories: ['Ai']
tags: ['äººå·¥æ™ºèƒ½', 'Tensorflow', 'Neo']
artid: "146297608"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146297608
    alt: "æ·±å…¥è§£æ-TensorFlow-å…¼å®¹æ€§é—®é¢˜åŠæ„å»ºè¾“å‡ºæ–‡ä»¶ç»“æ„"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146297608
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146297608
cover: https://bing.ee123.net/img/rand?artid=146297608
image: https://bing.ee123.net/img/rand?artid=146297608
img: https://bing.ee123.net/img/rand?artid=146297608
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     æ·±å…¥è§£æ TensorFlow å…¼å®¹æ€§é—®é¢˜åŠæ„å»ºè¾“å‡ºæ–‡ä»¶ç»“æ„*
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="__2">
     </a>
     <strong>
      ğŸ“Œ å¼•è¨€
     </strong>
    </h3>
    <p>
     TensorFlow æ˜¯å½“å‰ä¸»æµçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹ä¸€ï¼Œåœ¨
     <strong>
      è®¡ç®—æœºè§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€å¼ºåŒ–å­¦ä¹ 
     </strong>
     ç­‰é¢†åŸŸè¢«å¹¿æ³›åº”ç”¨ã€‚ç„¶è€Œï¼Œåœ¨å®é™…éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…ç»å¸¸é‡åˆ°
     <strong>
      ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
     </strong>
     ï¼Œç‰¹åˆ«æ˜¯åœ¨
     <strong>
      åµŒå…¥å¼å¹³å°ã€Yocto é¡¹ç›®ã€æ ‘è“æ´¾ç­‰ç¯å¢ƒ
     </strong>
     ä¸‹ï¼ŒTensorFlow çš„æ„å»ºå’Œé€‚é…å¾€å¾€å……æ»¡æŒ‘æˆ˜ã€‚
    </p>
    <p>
     æœ¬ç¯‡æ–‡ç« å°†æ·±å…¥è§£æ
     <strong>
      TensorFlow å…¼å®¹æ€§é—®é¢˜çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹
     </strong>
     ï¼Œå¹¶ç»“åˆ
     <strong>
      TensorFlow åœ¨ Yocto ä¸­çš„æ„å»ºè¾“å‡ºæ–‡ä»¶ç»“æ„
     </strong>
     ï¼Œä»æœ€ç»ˆçš„æ–‡ä»¶ç”Ÿæˆè§’åº¦æ¥ç†è§£
     <strong>
      TensorFlow çš„å…³é”®ç»„ä»¶
     </strong>
     ï¼Œå¸®åŠ©å¼€å‘è€…æ›´ç³»ç»Ÿåœ°æŒæ¡ TensorFlow åœ¨å®é™…åº”ç”¨ä¸­çš„æ„å»ºå’Œä¼˜åŒ–æ–¹æ³•ã€‚
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/d78966a30cf34d97a62a0fad588390a9.png"/>
    </p>
    <hr/>
    <h3>
     <a id="_1_TensorFlow__10">
     </a>
     <strong>
      ğŸ“Œ 1. TensorFlow å…¼å®¹æ€§é—®é¢˜çš„æ ¸å¿ƒè¦ç‚¹
     </strong>
    </h3>
    <p>
     åœ¨ä¸åŒå¹³å°ä¸Šæ„å»º TensorFlow æ—¶ï¼Œå¸¸è§çš„å…¼å®¹æ€§é—®é¢˜åŒ…æ‹¬ï¼š
    </p>
    <ol>
     <li>
      <strong>
       Python ç‰ˆæœ¬ä¸å…¼å®¹
      </strong>
     </li>
     <li>
      <strong>
       Bazel ç‰ˆæœ¬ä¸å…¼å®¹
      </strong>
     </li>
     <li>
      <strong>
       ç¡¬ä»¶æ¶æ„æ”¯æŒé—®é¢˜
      </strong>
     </li>
     <li>
      <strong>
       ç³»ç»Ÿå…±äº«åº“ä¾èµ–å†²çª
      </strong>
     </li>
     <li>
      <strong>
       TensorFlow Lite è¿è¡Œåº“ (
       <code>
        tflite_runtime
       </code>
       ) ä¸¢å¤±
      </strong>
     </li>
    </ol>
    <h4>
     <a id="_11_Python__18">
     </a>
     <strong>
      ğŸš© 1.1 Python ç‰ˆæœ¬ä¸å…¼å®¹
     </strong>
    </h4>
    <p>
     TensorFlow çš„ä¸åŒç‰ˆæœ¬å¯¹
     <strong>
      Python ç‰ˆæœ¬æœ‰ä¸¥æ ¼è¦æ±‚
     </strong>
     ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ— æ³•å®‰è£…æˆ–è¿è¡Œï¼š
    </p>
    <pre><code class="prism language-sh">ImportError: Python version mismatch: module was compiled <span class="token keyword">for</span> Python <span class="token number">3.11</span>, but is <span class="token number">3.12</span>.6
</code></pre>
    <h5>
     <a id="__24">
     </a>
     <strong>
      âœ… è§£å†³æ–¹æ¡ˆ
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       æŸ¥è¯¢ TensorFlow å…¼å®¹çš„ Python ç‰ˆæœ¬
      </strong>
      <pre><code class="prism language-sh">pip <span class="token function">install</span> <span class="token assign-left variable">tensorflow</span><span class="token operator">==</span><span class="token number">2</span>.x.x --no-deps
</code></pre>
     </li>
     <li>
      <strong>
       åœ¨ Yocto ä¸­æŒ‡å®š Python ç‰ˆæœ¬
      </strong>
      <br/>
      åœ¨
      <code>
       local.conf
      </code>
      æ·»åŠ ï¼š
      <pre><code class="prism language-ini">PREFERRED_VERSION_python3 = "3.11%"
</code></pre>
      ç„¶åé‡æ–°ç¼–è¯‘ï¼š
      <pre><code class="prism language-sh">bitbake <span class="token parameter variable">-c</span> cleansstate python3
bitbake python3
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_12_Bazel__42">
     </a>
     <strong>
      ğŸš© 1.2 Bazel ç‰ˆæœ¬ä¸å…¼å®¹
     </strong>
    </h4>
    <p>
     TensorFlow
     <strong>
      ä¾èµ– Bazel è¿›è¡Œç¼–è¯‘
     </strong>
     ï¼Œå¦‚æœ Bazel ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œä¼šå¯¼è‡´
     <code>
      tensorflow-lite
     </code>
     å¤±è´¥ï¼š
    </p>
    <pre><code class="prism language-sh">ERROR: The <span class="token string">'build'</span> <span class="token builtin class-name">command</span> is only supported <span class="token keyword">in</span> Bazel versions <span class="token number">6.0</span>.0 to <span class="token number">6.9</span>.0.
</code></pre>
    <h5>
     <a id="__48">
     </a>
     <strong>
      âœ… è§£å†³æ–¹æ¡ˆ
     </strong>
    </h5>
    <ol>
     <li>
      <strong>
       æ£€æŸ¥ TensorFlow éœ€è¦çš„ Bazel ç‰ˆæœ¬
      </strong>
      <pre><code class="prism language-sh"><span class="token function">cat</span> tensorflow/.bazelversion
</code></pre>
     </li>
     <li>
      <strong>
       åœ¨ Yocto ä¸­å¼ºåˆ¶æŒ‡å®š
       <code>
        bazel-native
       </code>
       ç‰ˆæœ¬
      </strong>
      <br/>
      åœ¨
      <code>
       local.conf
      </code>
      é‡Œæ·»åŠ ï¼š
      <pre><code class="prism language-ini">PREFERRED_VERSION_bazel-native = "6.1.1"
</code></pre>
     </li>
     <li>
      <strong>
       é‡æ–°ç¼–è¯‘
      </strong>
      <pre><code class="prism language-sh">bitbake <span class="token parameter variable">-c</span> cleansstate bazel-native
bitbake bazel-native
</code></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_13__66">
     </a>
     <strong>
      ğŸš© 1.3 ç¡¬ä»¶æ¶æ„æ”¯æŒ
     </strong>
    </h4>
    <p>
     TensorFlow
     <strong>
      é»˜è®¤æä¾› x86_64 å’Œ arm64 é¢„ç¼–è¯‘åŒ…
     </strong>
     ï¼Œå¦‚æœä½ åœ¨
     <strong>
      æ ‘è“æ´¾ (ARMv7) æˆ– i.MX 8M (Cortex-A53)
     </strong>
     ç­‰å¹³å°è¿è¡Œï¼Œå¯èƒ½ä¼šé‡åˆ°ï¼š
    </p>
    <pre><code class="prism language-sh">Illegal instruction <span class="token punctuation">(</span>core dumped<span class="token punctuation">)</span>
</code></pre>
    <h5>
     <a id="__72">
     </a>
     <strong>
      âœ… è§£å†³æ–¹æ¡ˆ
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       æ£€æŸ¥ CPU æŒ‡ä»¤é›†
      </strong>
      <pre><code class="prism language-sh"><span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> flags
</code></pre>
     </li>
     <li>
      <strong>
       äº¤å‰ç¼–è¯‘ TensorFlow Lite
      </strong>
      <pre><code class="prism language-sh">bitbake tensorflow-lite
</code></pre>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="_2_TensorFlow__Yocto__84">
     </a>
     <strong>
      ğŸ“Œ 2. TensorFlow åœ¨ Yocto çš„æ„å»ºè¾“å‡ºæ–‡ä»¶ç»“æ„è§£æ
     </strong>
    </h3>
    <p>
     TensorFlow åœ¨ Yocto ä¸­çš„ç¼–è¯‘è¾“å‡ºæ–‡ä»¶
     <strong>
      å­˜æ”¾åœ¨
      <code>
       image/
      </code>
      ç›®å½•ä¸‹
     </strong>
     ï¼Œå®ƒçš„æ–‡ä»¶ç»“æ„å†³å®šäº†æœ€ç»ˆéƒ¨ç½²çš„ç»„ä»¶ï¼Œç†è§£è¿™äº›æ–‡ä»¶çš„ä½œç”¨ï¼Œæœ‰åŠ©äºå¼€å‘è€…æŒæ¡ TensorFlow åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„è¿è¡Œæœºåˆ¶ã€‚
    </p>
    <pre><code class="prism language-sh">tree tmp/work/cortexa72-poky-linux/tensorflow-lite/2.16.9/image/
</code></pre>
    <h4>
     <a id="__90">
     </a>
     <strong>
      ğŸš€ è¾“å‡ºæ–‡ä»¶ç›®å½•ç»“æ„
     </strong>
    </h4>
    <pre><code class="prism language-sh"><span class="token builtin class-name">.</span>
â”œâ”€â”€ lib
â”‚   â”œâ”€â”€ libtensorflowlite.so
â”‚   â””â”€â”€ python3.12
â”‚       â””â”€â”€ site-packages
â”‚           â”œâ”€â”€ tflite_runtime
â”‚           â”‚   â”œâ”€â”€ __init__.py
â”‚           â”‚   â”œâ”€â”€ interpreter.py
â”‚           â”‚   â”œâ”€â”€ metrics_interface.py
â”‚           â”‚   â”œâ”€â”€ _pywrap_tensorflow_interpreter_wrapper.so
â”‚           â””â”€â”€ tflite_runtime-2.16.9.dist-info
â”œâ”€â”€ sbin
â”‚   â”œâ”€â”€ benchmark_model
â”‚   â””â”€â”€ label_image
â””â”€â”€ share
    â””â”€â”€ label_image
        â”œâ”€â”€ mobilenet_v1_1.0_224_quant.tflite
</code></pre>
    <h4>
     <a id="__111">
     </a>
     <strong>
      ğŸ“ å…³é”®æ–‡ä»¶è§£æ
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        ç»„ä»¶
       </th>
       <th>
        ç›®å½•
       </th>
       <th>
        ä½œç”¨
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         TensorFlow Lite è¿è¡Œæ—¶åº“
        </strong>
       </td>
       <td>
        <code>
         lib/libtensorflowlite.so
        </code>
       </td>
       <td>
        <code>
         libtensorflowlite.so
        </code>
        æ˜¯ TensorFlow Lite çš„æ ¸å¿ƒåŠ¨æ€é“¾æ¥åº“ï¼Œæ‰€æœ‰çš„æ¨ç†è°ƒç”¨éƒ½éœ€è¦è¿™ä¸ªåº“ã€‚
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Python TensorFlow Lite è¿è¡Œæ—¶
        </strong>
       </td>
       <td>
        <code>
         lib/python3.12/site-packages/tflite_runtime
        </code>
       </td>
       <td>
        è¿™æ˜¯ TensorFlow Lite åœ¨ Python è¿è¡Œæ—¶çš„ç»‘å®šï¼Œ
        <code>
         interpreter.py
        </code>
        æ˜¯ TensorFlow Lite è§£æ
        <code>
         .tflite
        </code>
        æ¨¡å‹çš„å…¥å£ã€‚
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         TensorFlow Lite Benchmark å·¥å…·
        </strong>
       </td>
       <td>
        <code>
         sbin/benchmark_model
        </code>
       </td>
       <td>
        è¯¥å·¥å…·ç”¨äºæµ‹è¯• TFLite æ¨¡å‹çš„æ¨ç†æ€§èƒ½ï¼Œä¾‹å¦‚åœ¨
        <strong>
         æ ‘è“æ´¾
        </strong>
        æˆ–
        <strong>
         i.MX 8M
        </strong>
        ä¸Šæµ‹ç®— FPSã€‚
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         TensorFlow Lite é¢„è®­ç»ƒæ¨¡å‹
        </strong>
       </td>
       <td>
        <code>
         share/label_image/mobilenet_v1_1.0_224_quant.tflite
        </code>
       </td>
       <td>
        è¿™æ˜¯ä¸€ä¸ª
        <strong>
         MobileNet V1 é‡åŒ–æ¨¡å‹
        </strong>
        ï¼Œå¯ä»¥ç›´æ¥ç”¨äºç›®æ ‡æ£€æµ‹æˆ–åˆ†ç±»ä»»åŠ¡ã€‚
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h3>
     <a id="_3_TensorFlow_Lite__121">
     </a>
     <strong>
      ğŸ“Œ 3. TensorFlow Lite çš„å®é™…è¿è¡Œ
     </strong>
    </h3>
    <p>
     åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šï¼Œä½ å¯ä»¥ç›´æ¥æµ‹è¯•
     <strong>
      TensorFlow Lite è¿è¡Œæ—¶åº“
     </strong>
     ï¼š
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> tflite_runtime<span class="token punctuation">.</span>interpreter <span class="token keyword">as</span> tflite

<span class="token comment"># åŠ è½½æ¨¡å‹</span>
interpreter <span class="token operator">=</span> tflite<span class="token punctuation">.</span>Interpreter<span class="token punctuation">(</span>model_path<span class="token operator">=</span><span class="token string">"/usr/share/label_image/mobilenet_v1_1.0_224_quant.tflite"</span><span class="token punctuation">)</span>
interpreter<span class="token punctuation">.</span>allocate_tensors<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"TensorFlow Lite æ¨¡å‹åŠ è½½æˆåŠŸï¼"</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     å¦‚æœæŠ¥é”™ï¼š
    </p>
    <pre><code class="prism language-sh">ModuleNotFoundError: No module named <span class="token string">'tflite_runtime'</span>
</code></pre>
    <p>
     è¯´æ˜
     <code>
      PYTHONPATH
     </code>
     æ²¡æœ‰æ­£ç¡®è®¾ç½®ï¼š
    </p>
    <pre><code class="prism language-sh"><span class="token builtin class-name">export</span> <span class="token assign-left variable">PYTHONPATH</span><span class="token operator">=</span>/usr/lib/python3.12/site-packages:<span class="token variable">$PYTHONPATH</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_4__144">
     </a>
     <strong>
      ğŸ“Œ 4. ç»“è®º
     </strong>
    </h3>
    <p>
     âœ…
     <strong>
      TensorFlow å…¼å®¹æ€§é—®é¢˜ä¸»è¦æ¶‰åŠï¼šPython ç‰ˆæœ¬ã€Bazel ç‰ˆæœ¬ã€ç¡¬ä»¶æ¶æ„ã€ç³»ç»Ÿå…±äº«åº“ç­‰
     </strong>
     ã€‚
     <br/>
     âœ…
     <strong>
      åœ¨ Yocto ä¸­ï¼Œå¯ä»¥é€šè¿‡
      <code>
       PREFERRED_VERSION_python3
      </code>
      å’Œ
      <code>
       bitbake tensorflow-lite
      </code>
      é‡æ–°ç¼–è¯‘é€‚é…ç‰ˆæœ¬
     </strong>
     ã€‚
     <br/>
     âœ…
     <strong>
      TensorFlow Lite çš„æ„å»ºè¾“å‡ºæ–‡ä»¶ä¸»è¦åŒ…æ‹¬
      <code>
       libtensorflowlite.so
      </code>
      è¿è¡Œæ—¶åº“ã€Python ç»‘å®šã€Benchmark å·¥å…·ã€é¢„è®­ç»ƒæ¨¡å‹ç­‰
     </strong>
     ã€‚
     <br/>
     âœ…
     <strong>
      ç†è§£
      <code>
       image/
      </code>
      ç›®å½•ä¸‹çš„æ–‡ä»¶ç»“æ„ï¼Œæœ‰åŠ©äºæ·±å…¥æŒæ¡ TensorFlow åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šçš„è¿è¡Œæ–¹å¼
     </strong>
     ã€‚
    </p>
    <p>
     è¿™ç¯‡æ–‡ç« ä¸ä»…å¸®åŠ©ä½ è§£å†³
     <strong>
      TensorFlow åœ¨ Yocto ä¸­çš„å…¼å®¹æ€§é—®é¢˜
     </strong>
     ï¼Œè¿˜ä»
     <strong>
      æœ€ç»ˆçš„æ„å»ºè¾“å‡ºè§’åº¦
     </strong>
     è®²è§£äº† TensorFlow Lite çš„æ ¸å¿ƒç»„ä»¶ï¼Œè®©ä½ èƒ½å¤Ÿæ›´ç³»ç»Ÿåœ°ç†è§£
     <strong>
      TensorFlow çš„å·¥ä½œåŸç†
     </strong>
     ï¼Œå¹¶æˆåŠŸéƒ¨ç½²åˆ°åµŒå…¥å¼è®¾å¤‡ä¸­ ğŸš€ï¼
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f496e746572766965775f54432f:61727469636c652f64657461696c732f313436323937363038" class_="artid" style="display:none">
 </p>
</div>


