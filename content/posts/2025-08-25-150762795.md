---
layout: post
title: "SQLæŸ¥è¯¢-è®¾ç½®å±€éƒ¨å˜é‡PostgreSQLMySQL"
date: 2025-08-25T17:34:53+0800
description: "åœ¨å·¥ä½œä¸­ç¼–å†™å¤æ‚SQLè¯­å¥æ—¶ï¼Œç»å¸¸éœ€è¦æ›¿æ¢æŸ¥è¯¢å€¼è¿›è¡Œæµ‹è¯•ã€‚æ‰€ä»¥éœ€è¦ç”¨åˆ°å±€éƒ¨å˜é‡è®¾ç½®ï¼Œå¯ä»¥å‡è½»æµ‹è¯•æ—¶çš„å‹åŠ›ã€‚"
keywords: "SQLæŸ¥è¯¢-è®¾ç½®å±€éƒ¨å˜é‡ï¼ˆPostgreSQLã€MySQLï¼‰"
categories: ['æœªåˆ†ç±»']
tags: ['Sql', 'Postgresql', 'Mysql']
artid: "150762795"
arturl: "https://blog.csdn.net/qq_36782325/article/details/150762795"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=150762795
    alt: "SQLæŸ¥è¯¢-è®¾ç½®å±€éƒ¨å˜é‡PostgreSQLMySQL"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=150762795
featuredImagePreview: https://bing.ee123.net/img/rand?artid=150762795
cover: https://bing.ee123.net/img/rand?artid=150762795
image: https://bing.ee123.net/img/rand?artid=150762795
img: https://bing.ee123.net/img/rand?artid=150762795
---



# SQLæŸ¥è¯¢-è®¾ç½®å±€éƒ¨å˜é‡ï¼ˆPostgreSQLã€MySQLï¼‰



ğŸ˜‹åšä¸»åœ¨å·¥ä½œä¸­ç¼–å†™å¤æ‚SQLè¯­å¥æ—¶ï¼Œç»å¸¸éœ€è¦æ›¿æ¢æŸ¥è¯¢å€¼è¿›è¡Œæµ‹è¯•ã€‚æ‰€ä»¥éœ€è¦ç”¨åˆ°å±€éƒ¨å˜é‡è®¾ç½®ï¼Œå¯ä»¥å‡è½»æµ‹è¯•æ—¶çš„å‹åŠ›ã€‚

## ä½¿ç”¨åœºæ™¯

ğŸ¤”åœ¨user_infoè¡¨ã€user_info_exè¡¨ã€user_info_inè¡¨ï¼Œä¸‰ä¸ªè¡¨ä¸­æŸ¥è¯¢å·¥å·ä¸ºâ€™STAF0306â€™çš„è®°å½•å¹¶è¿”å›ï¼ŒSQLç¤ºä¾‹å¦‚ä¸‹ã€‚

### 1.å¸¸è§„å†™æ³•

```javascript
select 
	user_id, user_name, user_code
from user_info
where
	user_code = 'STAF0306'
	
union 

select 
	user_id, user_name, user_code
from user_info_ex
where
	user_code = 'STAF0306'

union 

select 
	user_id, user_name, user_code
from user_info_in
where
	user_code = 'STAF0306'

```

### 2.å±€éƒ¨å˜é‡å†™æ³•

å¦‚æœéœ€è¦æ”¹ä¸ºæŸ¥è¯¢â€™STAF0308â€™çš„å·¥å·æ—¶ï¼Œéœ€è¦æ›¿æ¢ä¸‰ä¸ªä½ç½®ã€‚åœ¨ç®€å•çš„è¯­å¥ä¸­æ›¿æ¢æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œä½†å¦‚æœåœ¨å¤æ‚çš„SQLä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°æ¼æ”¹çš„æƒ…å†µğŸ˜¥ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¶éƒ¨æ˜¾çœ¼ä½ç½®è®¾ç½®**å±€éƒ¨å‚æ•°**ï¼Œç›´æ¥ä¿®æ”¹æ‰€éœ€çš„å…¥å‚ï¼Œå¯æ— è§†å¤æ‚çš„SQLè¯­å¥ğŸ‘ã€‚

#### ï¼ˆ1ï¼‰PostgreSQLç¤ºä¾‹

ğŸ™†â€â™‚ï¸ä½¿ç”¨current_setting(â€˜parameter_nameâ€™) æ¥è·å–å‚æ•°å€¼ï¼Œå¹¶æ³¨æ„è®¾ç½®å¯¹åº”çš„å‚æ•°ç±»å‹

```javascript
SET my.user_code TO 'STAF0308';

select 
	user_id, user_name, user_code
from user_info
where
	user_code = current_setting('my.user_code')::VARCHAR
	
union 

select 
	user_id, user_name, user_code
from user_info_external
where
	user_code = current_setting('my.user_code')::VARCHAR

```

##### æ³¨æ„äº‹é¡¹

```
1ï¼‰SET LOCAL éœ€è¦åœ¨äº‹åŠ¡å—ä¸­ä½¿ç”¨ï¼ˆBEGIN...COMMITï¼‰
2ï¼‰ä½¿ç”¨ SET å¯ä»¥åœ¨äº‹åŠ¡å¤–ä½¿ç”¨
3ï¼‰å‚æ•°å€¼æ€»æ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦æ ¹æ®éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢

```

#### ï¼ˆ2ï¼‰MySQLç¤ºä¾‹

ğŸ™†â€â™€ï¸ç”¨æˆ·å˜é‡ä»¥ @ å¼€å¤´ï¼Œåœ¨ä¼šè¯å†…æœ‰æ•ˆï¼Œæ³¨æ„å¤§å°å†™ã€‚

```javascript

SET @user_code = 'STAF0308';

select 
	user_id, user_name, user_code
from user_info
where
	user_code = @user_code
	
union 

select 
	user_id, user_name, user_code
from user_info_external
where
	user_code = @user_code

union 

select 
	user_id, user_name, user_code
from user_info_in
where
	user_code = @user_code

```

##### æ³¨æ„äº‹é¡¹

```
1ï¼‰ç”¨æˆ·å˜é‡ä»¥ @ å¼€å¤´ï¼Œåœ¨ä¼šè¯å†…æœ‰æ•ˆ
2ï¼‰å±€éƒ¨å˜é‡åœ¨å­˜å‚¨è¿‡ç¨‹å†…ä½¿ç”¨ DECLARE å®šä¹‰ï¼Œä¸ä»¥ @ å¼€å¤´
3ï¼‰å˜é‡ååŒºåˆ†å¤§å°å†™
4ï¼‰ç”¨æˆ·å˜é‡ä¼šåœ¨ä¼šè¯ç»“æŸåè‡ªåŠ¨æ¸…é™¤

```

## ç»“è¯­

ğŸˆä»¥ä¸Šåšä¸»ä»…åˆ—å‡ºäº†ä¸¤ç§è¾ƒä¸ºç®€å•çš„è®¾ç½®å±€éƒ¨å˜é‡æ–¹å¼ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–çš„è®¾ç½®æ–¹å¼å°±ä¸åšæ‰©å±•è¯´æ˜äº†ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚



