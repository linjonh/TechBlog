---
arturl_encode: "6874747073:3a2f2f626c6f672e6373646e2e6e65742f7a687567656c652f:61727469636c652f64657461696c732f313231363335303130"
layout: post
title: "计算机网络前三章笔记"
date: 2022-04-26 17:37:42 +08:00
description: "计算机网络一、概述1.2、因特网的概述互联网是网络的网络网络把许多计算机连接在一起，而互联网则把许多"
keywords: "什么是指主机或路由器将整个分组的比特"
categories: ['未分类']
tags: ['计算机网络', '网络协议', '网络', 'Http']
artid: "121635010"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=121635010
  alt: "计算机网络前三章笔记"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=121635010
featuredImagePreview: https://bing.ee123.net/img/rand?artid=121635010
---

# 计算机网络前三章笔记

## 计算机网络

### 一、概述

#### 1.2、因特网的概述

互联网是
**网络的网络**

**网络**
把许多
**计算机**
连接在一起，而
**互联网**
则把许多
**网络**
连接接

> 因特网是世界上最大的互联网

三个阶段

* 第一阶段：从单个网络
  **ARPANET**
  向互联网发展

  > 注意两个相差很大的名词：internet和Internet
  >
  > + **internet**
  >   （
  >   **互联网**
  >   或
  >   **互连网**
  >   ）是一个通用名词，他泛指多个计算机网络互联而成的网络 这些网络之间的通信协议可以是任意的。
  > + **Internet**
  >   （
  >   **因特网**
  >   ） 是一个专用名词，他只当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用TCP/IP协议簇作为通信规则，且其前身是美国的
  >   **ARPANET**
* 第二阶段：逐步建成了三级结构的因特网
* 第三阶段：逐渐形成了多层次ISP结构的因特网

#### 1.3、因特网的组成

##### 因特网的边缘部分

**客户机（Client**
）和
**服务器（Server）**
在计算机网络软件上下文中指的是一种网络应用程序的工作方式（简称
**C/S**
方式）

**C/S**
方式是因特网网络应用最常用的方式。

对等（
**Peer-to-Peer,P2P**
）方式。在P2P方式网络应用中，通常没有固定的服务请求者和服务提供者，分布在网络中的应用进程是对等的，被称为对等方。

##### 因特网的核心部分

**路由器**
是实现
**分组交换**
的关键构建，其任务是转发收到的分组 是网络核心部分最重要的部分

###### 电路交换

> 必须经过：
> **建立连接**
> （分配通信资源）——
> **通话**
> （一直占用资源）——
> **释放连接**
> （归还通信资源）桑格步骤的交换方式叫做
> **电路交换。**

* 使用
  **电路交换**
  来传送计算机数据时，其线路的传输效率往往很低。
* 电路交换的一个重要特点就是在通话的全部时间内，通话的两个用户始终占用端到端的通信资源。已被占用的通信线路资源在绝大部分时间里是空闲的，这造成传输效率往往很低。

###### 分组交换

通常我们把要发送的整块数据成为一个
**报文**
。发送报文之前，先把教程的报文划分成为一个个发更小的等长的数据段，在每一个数据段前面，加上一些由必要的控制信息组成的
**首部(header)**
，就构成了一个
**分组(packet)**
。

> 分组中的首部包含了诸如目的地址和源地址等重要控制信息，每一个分组才能在互联网中独立地选择传送路径，并被正确地交付到分组传输的终点。

最重要的分组交换机是
**路由器**
。

位于网络边缘的主机和位于网络核心部分的路由器都是计算机，但它们的作用很不一样。**主机的用途是为用户进行信息处理的，**并且可以和其他主机通过网络交换信息。
**路由器的用途则是用来转发分组的，即进行分组交换的**

> 路由器暂时存储的是一个个短的分组，而不是整个报文。段分组在路由器的内存中而不是在磁盘中。这就保证了较高的交换效率。

分组交换的
**优点**
：

> 1.高效：动态分配传输带宽，对通信链路是逐段占用
>   
> 2.灵活：分组独立选择合适的路由
>   
> 3.迅速：可以不建立连接就能向其他主机发送数据
>   
> 4.可靠：保证可靠的网络协议；分布式多路由的分组交换网，使网络有很好的生存性

分组交换
**带来的问题**

> 1.分组在各结点存储转发时需要排队，这就会造成一定的
> **时延。**
>   
> 2.由于分组交换不像电路交换那样通过建立连接来保证通信时所需要的各种资源，因此无法确保通信时端到端所需要的带宽，在通信量较大时可能造成
> **网络拥塞。**
>   
> 2.分组必须携带的首部（里面有必不可少的控制信息）也造成了一定的
> **开销。**

#### 1.5、计算机网络的主要性能指标

* **速率**
* **带宽**
* **吞吐量**
* **时延**

  > **1.发送时延**
  >
  > 是主机或路由器将分组发送到通信线路上所需要的时间，
  > **也就是从发送分组的第一个比特算起，到该分组的最后一个比特发送到线路上所需要的时间**
  > ，也叫
  > **传输时延**
  > 。
  >
  > **发送时延 = 分组长度 / 发送速率**

> **2.传播时延**
>
> 电磁波在信道中传播一定距离需要花费的时间。
>
> **传播时延 = 信道长度/电磁波在信道上的传播塑速率**

> **3.处理时延**
>
> 主机或路由器在收到分组时要花费一定的时间处理。

> **4.排队时延：**
>
> 分组在进入路由器后再输入队列中的等待处理的时间。

* **丢包率**

> 即分组丢失率，是指在一定的时间范围内，分组在传输过程中丢失的分组数量与总的分组数量的比率。

* **利用率**

#### 1.6、层次模型与计算机网络体系结构

具有五层协议的原理体系结构

![img](https://i-blog.csdnimg.cn/blog_migrate/7d9715920f17452c3f891cb6ffd600ab.jpeg)

##### 应用层(application layer)

> 应用层是体系结构中的最高层。应用层的任务是
> **通过应用进程间的交互来完成特定网络应用**
> 。应用层协议定义的是
> **应用进程间通信和交互的规则**
> 。这里的
> **进程**
> 就是主机中
> **正在运行的程序**
> 。对于不同的网络应用需要不有不同的应用层协议。在互联网的应用层协议很多，如域名DNS，支持万维网应用的HTTP协议，支持电子邮件的SMTP协议，等等。我们把应用层的数据单元称为
> **报文(messgae)**
> 。

##### 运输层(transport layer)

> 运输层的任务就是负责向
> **两台主机中进程之间的通信提供通用的数据传输服务**
> 。应用进程利用该服务穿上那个应用层报文。所谓通用的，是指并不针对某个特定网路应用，而是多种应用可以使用同一个运输层服务。由于一台主机可以同时运行多个进程，因此运输层有复用和分用的功能。复用就是多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付给上面应用层的相关进程。

运输层主要有下面两种协议：

* **传输控制协议TCP**
  (Transmission Control Protocol)-提供面向连接的、可靠的数据传输服务，其数据传输的单位是
  **报文段**
  (segment)。
* **用户数据报协议 UDP**
  (User Datagram)。 Protocol)-提供无连接的、
  **尽最大努力(best-effort)
  **的数据传输服务(不保证数据传输的可靠性),其数据传输的单位是**
  用户数据报**
  。

##### 网络层(network layer)

> **网络层负责为分组交换网上的不同主机提供通信服务**
> 。
>   
> 在发送数据时，网络层吧运输层产生的报文段或者用户数据报封装成
> **分组**
> 或者
> **包**
> 进行传送。在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫作
> **IP数据报**
> ，或简称
> **数据报**
> 。
>   
> 请注意：不要将运输层的"用户数据报UDP"和网络层的"IP数据报"弄混，此外，无论哪一层传输的数据单元，都可以笼统的用"分组"来表示。
>   
> 网络层的另一个任务就是选择合适的路由，是源主机运输层所传下来的分组，能够通过网络中的路由器来找到目的主机。
>
> 互联网是有大量的
> **异构(heterogeneous)
> **网络来通过**
> 路由器(Router)
> **相互连接起来的。互联网使用的网络层协议是无连接的**
> 网际协议IP**
> (Internet Protocol)和许多
> **路由选择协议**
> , 因此互联网的网络层也叫作
> **网际层**
> 或
> **IP层**
> 。

##### 数据链路层(data link layer)

> 数据链路层通常简称为
> **链路层**
> 。我们知道，两台主机之间的数据传输，总是在一段一段的链路上传送的, 这就需要使用专门的链路层的协议。在两个相邻结点之间传送数据时，数据链路层量网络层交下来的
> **IP数据报封装成帧(frameing)**
> ,在两个相邻节点间的链路上传送帧, 每一帧包括数据和必要的
> **控制信息**
> (如同步信息、地址信息、差错信息等)。
>
> 在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始到哪个比特结束，这样数据链路层在收到一个帧后，就可从中提取数据部分，上交到网络层。
>
> 控制信息还能使接收端能够检测到所收到的帧中有无差错。如发现有差错，数据链路层就简单的丢弃了这个出了差错的帧，以免继续在网络传输下去白白的浪费资源。如果需要改正数据在数据链路层传输时出现的差错(这就是说,数据链路层不仅要检错,还要纠错)， 那么就可以采用可靠数据传输协议来纠正出现的差错。这种方法会使数据链路层的协议复杂些。

##### 物理层(physical layer)

> 在物理层上所传数据的单位是
> **比特(bit)**
> 。发送方发送1或者0时，接收方应该接收相同的1或者0，因此物理层要考虑用多大的电压代表"1"或者"0", 以及接收方如何识别发送方所发出的比特。物理层还要确定连接电缆的插头应当有多少根引脚以及各引脚如何连接。当然解释比特代表的意思，就不是物理层的任务。请注意，传递信息所利用的一些物理媒体，如双绞线、同轴电缆、光缆、无线信道等，并不是物理层协议之内而是在物理层协议的下面。因此也有人把物理层当做第0层。

**应用进程的数据在各层之间的传递过程所经理的变化**

![img](https://i-blog.csdnimg.cn/blog_migrate/6fd07b26fcdc32a672dea765fec19d69.jpeg)

![img](https://i-blog.csdnimg.cn/blog_migrate/4ff3a69c7410ffe417eca2b8030bcbc3.jpeg)

**IP协议在因特网中的核心作用**

> 协议是**“水平”
> **的，服务是**
> “垂直”**的

### 二、物理层

#### 2.1、物理层的协议

物理层的主要任务描述为确定与传输媒体的接口的一些特性，即：

* **机械特性**
  指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等等。
* **电气特性**
  指明在接口电缆的各条线上出现的电压的范围。
* **功能特性**
  指明某条线上出现的某一电平的电压表示何种意义。
* **规程特性**
  指明对于不同功能的各种可能事件的出现顺序。

#### 2.2、数据通信的基础知识

一个数据通信系统分为三大部分：

**源系统**
（
**发送端**
、
**发送方**
）、
**传输系统**
（
**或传输网络**
）、
**和目的系统（接收端、接收方）**

源系统一般包含以下两个部分

**源点（Source）**
：源点设备产生要传输的数据，例如，从PC的键盘输入汉字，PC产生输出的数字币特列流。

源点又称为
**源站**
或
**信源**

> **发送器：**
> 源点生成的数字比特流要通过发送器编码后才能够在传输系统中进行传输。典型的发送器就是
> **调制器**

> **接收器：**
> 接收传输系统传送过来的信号，并把它转换为能够被目的设备处理的信息。典型的接收器就是
> **解调器**

**终点（Destination）：**
重点设备从接收器获取传送来的数字比特流，然后进行信息输出。例如把汉字在PC屏幕上显示出来。终点又称为
**目的站**
或
**信宿**

一些术语：

**消息：**例如语音，文字，图像等都是消息。

**数据：**是运送消息的实体。

**信号：**是数据的电气或电磁的表现

##### 编码与调制

信道可以分成传送模拟信号的
**模拟信道**
和传送数字信号的
**数字信道**
两大类

调制：将
**数字信号**
转换成
**模拟信号**
的过程称为调制

###### 常用的编码方式

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-De68g4QC-1638258808608)(F:\markdown\java笔记\计算机网络.assets\20201220121327548.png)]

> 归零制：正脉冲代表1，负脉冲代表0
>
> 不归零制：以高电平表示“0”，低电平表示“1”
>
> 曼彻斯特编码：位周期中心的上跳代表0，位周期中心的下跳代表1
>
> 差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始便捷有跳变代表0，而位开始边界没有跳变代表1

###### 基本的调制方法

用
**载波**
进行调制，把基带信号的频率范围搬移导较高的频段以便在信道中传输。

经过载波调制后的信号称为
**带通信号**

使用载波的调制称为
**带通调制**

最基本的带通调制方法有3种：

* 调幅
* 调频
* 调相

数字通信中，条幅、调频、调相相应的称为
**幅移键控、频移键控、和相移键控**

实现调制和解调功能的设备称为
**调制解调器**

##### 信道的极限容量

**码元**
是承载信息的基本信号单位。

###### 限制码元在信道上的传输速率的因素

1、信道能够通过的频率范围

**奈氏准则**
：

> 理想低通信道的最高码元传输速率 = 2W Baud
>
> 理想带通信道的最高码元传输速率 = W Baud

W是信道带宽，单位是Hz， Baud 是波特，是码元传输速率的单位，1波特为每秒传送1个码元

奈氏准则的另一种表达方法是：
**每赫兹带宽的理想低通信道的最高码元传输速率是每秒2个码元，每赫兹带宽的理想带通信道的最高码元传输速率是每秒1个码元**

**波特和比特是两个不同的概念**

> **波特**
> 是
> **码元传输的速率单位**
> ，它说明每秒传多少个码元。码元传输速率也成为
> **调制速率、波形速率**
> 、或
> **符号速率**
>
> 比特是
> **信息量的单位**

2、信噪比

信道的极限信息传输速率C：
**香农公式**

> C = Wlog2(1+S/N) bit/s

W为信道的带宽，S为信道内所传信号的平均功率；N为信道内不的高斯噪声功率

香浓公式表明：信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高

##### 传输方式

###### 1、并行传输和串行传输

> **并行传输**
> ：是指一次发送n个比特而不是一个比特，为此，在发送端和接收端之间需要有n条传输线路
>
> **串行传输**
> ：是指数据是一个比特一个比特依次发送的，因此在发送端和接收端之间需要有1条传输线路即可

并行传输的优点是速度为串行传输的n倍，计算机内部经常用并行传输，在将数据发送到传输线路时候，要进行并/串转换

###### 2、异步传输和同步传输

**异步传输**
：

> * 以字节为独立的传输单位，字节之间的时间间隔不是固定
> * 接收端仅在每个字节的起始处对字节内的比特实现同步
> * 通常在每个字节前后分别加上起始位和结束位

**同步传输：**

> * 数据块以稳定的比特流的形式传输。字节之间没有间隔
> * 接收端在每个比特信号的中间时刻进行检测，以判别接收到的是比特0还是比特1
> * 由于不同设备的时钟频率存在一定差异，不可能做到完全相同，在传输大量数据的过程中，所产生的判别时刻的累计误差，会导致接收端对比特信号的判别错位

3、单工、半双工和全双工

**单向通信(单工)**

> 即只能有一个方向的通信而没有反方向的交互。无线电广播或有线电以及电视广播就属于这种类型

**双向交替通信(半双工)**

> 即通信的双方可以发送信息，但不能双方同时发送（当然也就不能同时接收）。这种通信方式使一方发送另一方接收，过一段时间后可以再反过来

**双向同时通信(全双工)**

> 通信的双发可以同时发送和接收信息。

单向通信只需要一条信道，而双向交替通信或双向同时通信则需要两条信道（每个方向各一条），双向同时通信的传输效率最高

#### 2.3、物理层下面的传输媒体

分为：

* 导引型传输媒体
* 非导引型传输媒体

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-yFD7zEgF-1638258808613)(F:\markdown\java笔记\计算机网络.assets\aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTgwMTA1MjIyNDMxNjU2)]

###### **一、导引型传输媒体**

> **1.1. 双绞线**
>
> 双绞线已成为局域网中的主流传输媒体
>   
> 屏蔽双绞线 STP (Shielded Twisted Pair)
>   
> 无屏蔽双绞线 UTP (Unshielded Twisted Pair)

> **1.2. 同轴电缆**
>
> 细缆（适合短距离，安装容易，造价低）
>   
> 粗缆（适合较大局域网，布线距离长，可靠性好）

> **1.3. 光纤**
>
> 光纤有很好的抗电磁干扰特性和很宽的频带，主要用在环形网中
>
> 多模光纤（用发光二极管，便宜，定向性较差）
>
> 单模光纤（注入激光二极管，定向性好）

###### 二、非引导型传输媒体

> 微波、红外线、激光、卫星通信

#### 2.4、信道复用技术

### 三、数据链路层

#### 3.1、数据链路层的概述

* **链路**
  ：就是从一个节点到相邻节点的一段物理线路，而中间没有任何其他的交换结点
* **数据链路**
  ：是指把实现通信协议的硬件和软件加到链路上，就构成了数据链路。
* 数据链路层以
  **帧**
  为单位传输和处理数据

使用点对点信道的数据链路层

```
三个重要问题：封装成帧，差错检测，可靠传输

```

使用广播信道的数据链路层

```
共享式以太网的媒体介入控制协议CSMA/CD协议
802.11局域网的媒体介入控制协议CSMA/CA协议

```

#### 3.2、封装成帧

* 帧头和帧尾中包含有重要的控制信息
* 帧头和帧尾的作用之一就是
  **帧定界**

> （帧头何帧尾中含有帧定界标志，并不是每一种数据链路层协议的帧都包含有帧定界标志，比如MAC帧不需要帧定界符，物理层会在MAC帧前面添加8字节的前导码，前7个为前同步码，后1个字节为帧开始定界符，MAC帧规定了96比特的帧结束间时间，所以不需要帧结束界定符）

##### 透明传输

* 是指数据链路层对上层交付的传输数据没有任何限制，就好像数据链路层不存在一样

> 面向字节的物理链路施用字节填充（或称字符填充）的方法实现透明传输。

> 面向比特的物理链路使用比特填充的方法实现透明传输

```
例如：在发送前，用零比特填充发，对数据部分进行扫描，每5个连续的比特1后面就插入1个比特0，这样就确保了帧定界在整个帧中的唯一性，从而实现透明传输。接收方的数据链路层从物理层交付的比特流中提取帧时，将帧的数据部分中的每5个连续的比特1后面的那个比特0剔除即可。

```

**为了提高帧的传输效率，应当使帧的数据部分的长度尽可能大些**

考虑到差错控制等多种因素，每一种数据链层协议都规定了帧的数据部分的长度上限，即
**最大传送单元MTU**

#### 3.3、差错检测

```
比特在传输过程中可能会产生差错：1可能会变成0，0也可能变成1，这成为比特差错

```

误码率：传输错误的比特占所传输比特总数的比率。

使用
**差错检测码**
来检测数据在传输过程中是否产生了比特差错

**奇偶校验**

```
在待发送的数据后面 添加1位奇偶校验位 ，使整个数据（包括所添加的校验位在内）中“1”的个数为奇数（奇校验）或（偶校验）

```

如果有
**奇数个位发生误码**
，则奇偶性发生变化，可以检查出误码：

如果有
**偶数个位发生误码**
，则奇偶性不发生变化，不可以检查出误码：

**循环冗余校验CRC**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-MoimhxxU-1638258808615)(F:\markdown\java笔记\计算机网络.assets\image-20211124201301126.png)]

* **检错码**
  只能检测出帧在传输过程中出现了差错，但不能定位错误，无法纠正错误。
* 要想纠正传输中的差错，可以使用冗余信息更多的
  **纠错码**
  进行
  **前向纠错**
  。但纠错码的开销较大，计算机网络中较少使用。
* 循环冗余校验
  **CRC**
  有很好的检错能力（
  **漏检率非常低**
  ），虽然计算比较复杂，但非常易于用硬件实现，因此被广泛应用于数据链路层。
* 在计算机网中通常采用我们后续课程中见要讨论的
  **检错重传方式来纠正传输中的差错**
  ，或者是
  **仅仅丢弃检测到差错的帧**
  ，这却决于数据链路层向其上层提供的是可靠传输服务还是不可靠传输服务。

#### 3.4、可靠传输

##### 3.4.1可靠传输的基本概念

数据链路层向上层提供的服务类型

```
不可靠传输服务：仅仅丢弃有误码的帧，其他什么也不做；
不可靠传输服务： 想办法实现 发送端发送什么，接收端就收到什么。

```

* 一般情况下，
  **有线链路**
  的误码率比较低，为了减小开销，并
  **不要求数据链路层向上提供可靠传输服务**
  。即使出现了误码，可靠传输的问题由其上层解决。
* **无线链路**
  易受干扰 ，误码率较高，因此要求数据链路层必须向上层提供可靠传输服务。
* **比特差错**
  只是传输差错中的一种
* 传输差错还包括
  **分组丢失、分组失序、分组重复**
* 分组丢失、分组失序、分组重复这些传输差错，一般不会出现在数据链路层，而是出现在其上层
* **可靠传输服务并不仅局限于数据链路层**
  ，其他层均可选择实现可靠传输

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-HVzwxFO6-1638258808617)(F:\markdown\java笔记\计算机网络.assets\image-20211125090645039.png)]

##### 3.4.2、可靠传输的实现

###### 停止等待协议SW

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-cUyNRfVv-1638258808619)(F:\markdown\java笔记\计算机网络.assets\image-20211125095317474.png)]

停止等待协议的信道利用率

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jmLmNPIC-1638258808620)(F:\markdown\java笔记\计算机网络.assets\image-20211125153325874.png)]

* **当往返时延RTT远大于数据帧发送时延Td时候（例如用卫星链路），信道利用率非常低**
* 若出现重传，则对于传送有用的数据信息来说，信道利用率还要降低
* 为了克服停止等待协议信道利用率很低的缺点，产生了另外两种协议，即回退N帧协议GBN和选择重传协议SR

例题：

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-3pPY5CRV-1638258808620)(F:\markdown\java笔记\计算机网络.assets\image-20211125153916471.png)]

###### 回退N帧协议GBN

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-0SG009uJ-1638258808621)(F:\markdown\java笔记\计算机网络.assets\image-20211125161517696.png)]

例题：

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-fLTMJJMK-1638258808622)(F:\markdown\java笔记\计算机网络.assets\image-20211125161550470.png)]

###### 选择重传协议SR

```
接收窗口的尺寸Wr不应再等于1，而应该大于1，以便接收方先收下失序到达但无误误码并且序号落在接收窗口内的那些数据分组，等到所缺分组收齐后再一并送交上层。这就是选择重传协议。

```

注意：

​
**选择重传协议**
为了使发送方仅重传出现差错的分组，接收方
**不能再采用累积确认**
，而需要对每个正确接收到的数据分组进行
**逐一确认！**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ahSsF1yi-1638258808627)(F:\markdown\java笔记\计算机网络.assets\image-20211126215824026.png)]

#### 3.5、点对点协议PPP

PPP协议为再点对点链路传输各种协议数据报提供了一个标准方法，主要由以下三个部分构成：

* 对各种协议数据报的封装方法（封装成帧）
* 链路控制协议LCP　　用于建立、配置以及测试数据链路的连接
* 一套网络控制协议NCPｓ　　其中的每一个协议支持不同的网络层协议

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-6rooFcaG-1638258808632)(F:\markdown\java笔记\计算机网络.assets\image-20211126222819637.png)]

#### 3.6、使用广播信道的数据链路层

##### 3.6.1、媒体介入控制的基本概念

共享信道要着重考虑的一个问题就是如何协调多个发送和接收站点对一个共享传输媒体的占用，即
**媒体介入控制MAC**

```
随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对点链路和链路层交换机的交换式局域网在优先领域已经完全取代了共享式就局域网，但由于无线信道的广播天性，无线局域网仍然使用的使共享媒体技术

```

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-maik6O3U-1638258808633)(F:\markdown\java笔记\计算机网络.assets\image-20211128134653272.png)]

##### 3.6.2、媒体介入控制——静态划分信道

**频分复用FDM**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-p8xablsW-1638258808635)(F:\markdown\java笔记\计算机网络.assets\image-20211127191012492.png)]

**时分复用TDM**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-BleWEePR-1638258808635)(F:\markdown\java笔记\计算机网络.assets\image-20211127193249144.png)]

**波分复用WDM**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-0hJv6A1Q-1638258808637)(F:\markdown\java笔记\计算机网络.assets\image-20211127193429158.png)]

**码分复用CDM**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-NvUtaxMg-1638258808638)(F:\markdown\java笔记\计算机网络.assets\image-20211127193639836.png)]

与FDM和TDM不同，CDM的每一个用户可以
**在同样的时间使用同样的频带进行通信。**

由于各用户使用经过特殊挑选的不同码型，因此各用户之间
**不会造成干扰**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mmUXv43X-1638258808639)(F:\markdown\java笔记\计算机网络.assets\image-20211127194156533.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-o59SdiEO-1638258808643)(F:\markdown\java笔记\计算机网络.assets\image-20211127194801380.png)]

例题：[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-3KncHkLr-1638258808648)(F:\markdown\java笔记\计算机网络.assets\image-20211127194914146.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-EYaqQai9-1638258808650)(F:\markdown\java笔记\计算机网络.assets\image-20211127195757414.png)]

##### 3.6.3、动态接入控制——随机接入CSMA/CD

总线局域网使用协议：CSMA/CD

载波监听多址接入/碰撞检测
**CSMA/CD协议**

**多址接入MA：**多个站连接在一条宗信啊上，竞争使用总线

**载波监听CS：**每一站在发送帧之前先要检测一下总线上是否有其他站点在发送帧（先听后说）

* 若检测到总线空闲96比特时间，则发送这个帧
* 若检测到总线忙，则继续检测并等待总线转为空闲96比特时间，然后发送这个帧

**碰撞检测CD：**每一个正在发送帧的站边发送边检测碰撞（边说边听）

* 一旦发现总线上出现碰撞，则立即停止发送，退避一段随机时间后再次发送（”一旦冲突，立即停说，等待时机，重新再说“）

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-PXrkUhfY-1638258808651)(F:\markdown\java笔记\计算机网络.assets\image-20211127202716021.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-x0pFCknY-1638258808653)(F:\markdown\java笔记\计算机网络.assets\image-20211127202904132.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-TotU8C05-1638258808654)(F:\markdown\java笔记\计算机网络.assets\image-20211127203740938.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-W1rRbOSe-1638258808656)(F:\markdown\java笔记\计算机网络.assets\image-20211127204153388.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wqOV6jho-1638258808658)(F:\markdown\java笔记\计算机网络.assets\image-20211127204340277.png)]

例题：

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-3PGQXt9z-1638258808666)(F:\markdown\java笔记\计算机网络.assets\image-20211127205001997.png)]

CSMA/CD协议曾经用于各种总线结构以太网和双绞线以太网的早期版本中。

现在的以太网基于交换机和全双工连接不会有碰撞，因此没有必要使用CSMA／CD协议

##### 3.6.4、动态接入控制——随机接入CSMA/CA

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-IfVmqcIe-1638258808668)(F:\markdown\java笔记\计算机网络.assets\image-20211128142545860.png)]

无线局域网使用的协议：CSMA／CA

载波监听多址接入/碰撞避免 CSMA/CA

**在无线局域网中，仍然可以使用载波监听多址接入CSMA**
，即在发送帧之前对传输媒体进行载波监听。若发现有其他站在发送帧，就推迟发送以免发生碰撞。

**在无线局域网中，不能使用碰撞检测CD**
，原因如下：

* 由于无线信道的传输条件特殊，其信号强度的动态范围非常大，无线网卡上接收到的信号强度往往会远远咸鱼发送信号的强度。
  **如果要在无线网卡上实现碰撞检测CD**
  ，对硬件的要求非常高。
* 即使能够在硬件上实现无线局域网的碰撞检测功能，由于无线电波传播的特殊性（
  **存在隐蔽站问题**
  ），
  **进行碰撞检测的意义也不大**
  。

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-9PS38sS2-1638258808669)(F:\markdown\java笔记\计算机网络.assets\image-20211128140359427.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-YQMMRVeC-1638258808670)(F:\markdown\java笔记\计算机网络.assets\image-20211128140450338.png)]

**源站为什么在检测到信道空闲后还要再等待一段时间DIFS？**

```
考虑到可能有其他的站有高优先级的帧要发送。若有，就要让高优先级帧先发送

```

**目的站为什么正确接收数据帧后还要等待一段时间SIFS才能发送ACK帧？**

SIFS是最短的帧间间隔，用来分隔开属于一次对话的各帧。在这段时间内，一个站点应当能够从发送方式切换到接收方式

**信道又忙转为空闲且经过DIFS时间后为什么还要退避一段随机时间才能使用信道？**

防止多个站点同时发送数据而产生碰撞

**当站点检测到信道空闲，并且所发送的数据帧不是成功发送完上一个数据帧之后立即连续发送数据帧，则不适用退避算法。**

**以下情况必须使用退避算法：**

* 再发送数据帧之前检测到信道处于忙状态时；
* 在每一次重传一个数据帧时；
* 在每一次成功发送后要连续发送下一个帧时（这是为了避免一个站点长时间占用信道）

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-XZbLTkK9-1638258808672)(F:\markdown\java笔记\计算机网络.assets\image-20211128143041564.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-nljR1yC3-1638258808674)(F:\markdown\java笔记\计算机网络.assets\image-20211128144827358.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-C0EmFN8t-1638258808679)(F:\markdown\java笔记\计算机网络.assets\image-20211128145402577.png)]

例题：

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-U5mums7A-1638258808683)(F:\markdown\java笔记\计算机网络.assets\image-20211128145647329.png)]

#### 3.7、MAC地址，IP地址以及ARP协议

##### MAC地址

当多个多个主机连接在同一个广播信道上，想实现俩个个主机之间的通信，则每个主机都必须要有一个唯一的标识，即一个数据链路层地址；

在每个主机发送的
**帧中必须携带标识发送主机和接收主机的地址**
。由于这类地址是用于媒体介入控制MAC，因此被称为
**MAC地址**
：

* MAC地址一般被固化在网卡（网络适配器）的点可擦可编程只读存储器EEPROM中，因此MAC地址也被称为
  **硬件地址**
  。
* MAC地址有时也被称为物理地址。
  **这并不意味着MAC地址属于网络体系结构中的物理层**

> ```
> 一般情况下，用户主机会包含两个网络适配器：有线局域网适配器（有线网卡）和无线局域网适配器（无线
> 网卡）。每个网络适配器都有一个全球唯一的MAC地址。而交换机和路由器往往拥有更多的网络接口，所以
> 会拥有更多的MAC地址。
>
> ```

**综上所述，严格来说，MAC地址是对网络上各接口的唯一标识，而不是对网络上各设备的唯一标识。**

MAC地址格式

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-05pgwnxB-1638258808685)(F:\markdown\java笔记\计算机网络.assets\image-20211129114841665.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-OL7RA9x0-1638258808685)(F:\markdown\java笔记\计算机网络.assets\image-20211129115154835.png)]

##### ip地址

IP地址是因特网上的主机和路由器所使用的地址，用于标识两部分信息：

* **网络编号**
  ：标识因特网上数以百万计的网络
* **主机编号**
  ：标识同一网络上不同主机（或路由器接口）

很显然，之前介绍的MAC地址不具备区分不同网络的功能。

* 如果只是一个单独的网络，不接入因特网,可以只使用MAC地址（这不是一般用户的应用方式）
* 如果主机所在的网络要接入因特网,则IP地址和MAC地址都需要使用。

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-QaaX1aEY-1638258808686)(F:\markdown\java笔记\计算机网络.assets\image-20211129162734257.png)]

数据包转发过程中IP地址与MAC地址的变化情况

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-uptW0zt0-1638258808687)(F:\markdown\java笔记\计算机网络.assets\image-20211129163158321.png)]

数据包转发过程中
**源IP地址和目的IP地址保持不变；**
  
数据包转发过程中
**源MAC地址和目的MAC地址逐个链路（或逐个网络）改变**

##### ARP协议

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-zVYSbWPJ-1638258808688)(F:\markdown\java笔记\计算机网络.assets\image-20211129164558765.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rQcKLUey-1638258808689)(F:\markdown\java笔记\计算机网络.assets\image-20211129164517291.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JsGuicoq-1638258808696)(F:\markdown\java笔记\计算机网络.assets\image-20211129164620460.png)]

**ARP协议只能在一段链路或一个网络上使用，不能跨网络使用！**

```
除ARP请求和响应外，ARP还有其他类型的报文（例如用于检查IP地址冲突的“无故ARP、免费ARP(Gratuitous ARP)”）;
ARP没有安全验证机制，存在ARP欺骗（攻击）问题。1

```

#### 3.8、集线器与交换机的区别

**双绞线和集线器HUB的星型以太网**

* **使用集线器的以太网在逻辑上仍是一个总线网**
  ，各站共享总线资源**,使用的还是CSMA/CD协议**；
* **集线器只工作在物理层**
  ，它的每个接口仅简单地转发比特，不进行碰撞检测(由各站的网卡检测)
* **集线器一般都有少量的容错能力和网络管理功能**
  。例如，若网络中某个网卡出了故障，不停地发送帧。此时，集线器可以检测到这个问题，在内部断开与出故障网卡的连线，使整个以太网仍然能正常工作。

**以太网交换机**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-aOzKhcB2-1638258808699)(F:\markdown\java笔记\计算机网络.assets\image-20211129171729028.png)]

**区别**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Szyf2NzJ-1638258808701)(F:\markdown\java笔记\计算机网络.assets\image-20211129173016060.png)]

#### 3.9、以太网交换机自学习和转发帧的流程

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-LFziUfaq-1638258808702)(F:\markdown\java笔记\计算机网络.assets\image-20211129195638323.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-PLbz8J4m-1638258808703)(F:\markdown\java笔记\计算机网络.assets\image-20211129201716711.png)]

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-QYqFEBw4-1638258808704)(F:\markdown\java笔记\计算机网络.assets\image-20211129202119777.png)]

#### 3.10、以太网交换机的生成树协议STP

* 如何提高以太网的可靠性？
* 添加冗余链路可以提高以太网的可靠性
* 但是，冗余链路也会带来负面效应——形成
  **网络环路**

网络环路会带来以下问题:

* **广播风暴**
    
  大量消耗网络资源，使得网络无法正常转发其他数据帧
* **主机收到重复的广播帧**
    
  大量消耗主机资源大量消耗主机资源
* **交换机的帧交换表震荡（漂移）**

以太网交换机使用
**生成树协议STP**
(SpanningTree Protocol),可以在增加冗余链路来提高网络可靠性的同时又
**避免网络环路带来的各种问题**
。

* 不论交换机之间采用怎样的物理连接，交换机都能够
  **自动计算并构建一个逻辑上没有环路的网络**
  ，其逻辑拓扑结必须是树型的（无逻辑环路）
* 最终生成的树型逻辑拓扑要
  **确保连通整个网络**
  ;
* 当首次连接交换机或网络
  **物理拓扑发生变化**
  时（有可能是人为改变或故障)交换机都将进行生成树的重新计算。

#### 3.11、虚拟网络VLAN概述

使用一个或多个以太网交换机互连起来的交换式以太网,其所有站点都属于
**同一个广播域。**

随着交换式以太网规模的扩大，广播域相应扩大，会有很多弊端：

* 广播风暴
* 难以维护管理
* 潜在的安全问题

分割广播域的方法：

* 使用路由器可以隔离广播域
* 虚拟局域网VLAN技术

**虚拟局域网VLAN**
(Virtual Local Area Network)：

是一种将局域网内的设备划分成与物理位置无关的逻辑组的技术,这些逻辑组具有某些共同的需求。

**虚拟局域网VLAN实在交换机上实现的，需要交换机能够实现一下两种功能**

* 能够处理带有VLAN标记的帧，也就是IEEE 802.1Q帧
* 交换机的个端口可以支持不同的端口类型

**IEEE 802.1Q帧**

对以太网的MAC帧格式进行了扩展，插入了
**4字节的VLAN标记。**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mrdvDUtU-1638258808705)(F:\markdown\java笔记\计算机网络.assets\image-20211130104328113.png)]

**交换机的端口类型**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ChSNzaHY-1638258808707)(F:\markdown\java笔记\计算机网络.assets\image-20211130105058717.png)]

**Access**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-zT0zQ87v-1638258808710)(F:\markdown\java笔记\计算机网络.assets\image-20211130105135455.png)]

**Trunk**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-gyhCD0kl-1638258808711)(F:\markdown\java笔记\计算机网络.assets\image-20211130105840225.png)]

在由多个交换机互连而成的交换式以太网中划分VLAN时，
**连接主机的交换机端口应设置为Access类型，交换机之间互连的端口应设这位Trunk类型。**

**Hybrid**

[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-NGq5YI2o-1638258808712)(F:\markdown\java笔记\计算机网络.assets\image-20211130112017409.png)]
  
使用一个或多个以太网交换机互连起来的交换式以太网,其所有站点都属于
**同一个广播域。**

随着交换式以太网规模的扩大，广播域相应扩大，会有很多弊端：

* 广播风暴
* 难以维护管理
* 潜在的安全问题

分割广播域的方法：

* 使用路由器可以隔离广播域
* 虚拟局域网VLAN技术

**虚拟局域网VLAN**
(Virtual Local Area Network)：

是一种将局域网内的设备划分成与物理位置无关的逻辑组的技术,这些逻辑组具有某些共同的需求。

**虚拟局域网VLAN实在交换机上实现的，需要交换机能够实现一下两种功能**

* 能够处理带有VLAN标记的帧，也就是IEEE 802.1Q帧
* 交换机的个端口可以支持不同的端口类型

**IEEE 802.1Q帧**

对以太网的MAC帧格式进行了扩展，插入了
**4字节的VLAN标记。**

[外链图片转存中…(img-mrdvDUtU-1638258808705)]

**交换机的端口类型**

[外链图片转存中…(img-ChSNzaHY-1638258808707)]

**Access**

[外链图片转存中…(img-zT0zQ87v-1638258808710)]

**Trunk**

[外链图片转存中…(img-gyhCD0kl-1638258808711)]

在由多个交换机互连而成的交换式以太网中划分VLAN时，
**连接主机的交换机端口应设置为Access类型，交换机之间互连的端口应设这位Trunk类型。**

**Hybrid**

[外链图片转存中…(img-NGq5YI2o-1638258808712)]