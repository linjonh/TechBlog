---
layout: post
title: "人工智能-一种现代方法-第6章-约束满足问题"
date: 2024-05-26 11:02:17 +0800
description: "文章目录定义约束满足问题约束传播：CSP中的推理结点相容弧相容路径相容k-相容全局约束CSP形式化为"
keywords: "人工智能一种现代的方法第三版答案中文"
categories: ['人工智能']
tags: ['人工智能']
artid: "95308201"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=95308201
    alt: "人工智能-一种现代方法-第6章-约束满足问题"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=95308201
featuredImagePreview: https://bing.ee123.net/img/rand?artid=95308201
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     人工智能 一种现代方法 第6章 约束满足问题
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-github-gist" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <ul>
          <li>
           <a href="#_1" rel="nofollow">
            定义约束满足问题
           </a>
          </li>
          <li>
           <a href="#CSP_42" rel="nofollow">
            约束传播：CSP中的推理
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_57" rel="nofollow">
              结点相容
             </a>
            </li>
            <li>
             <a href="#_62" rel="nofollow">
              弧相容
             </a>
            </li>
            <li>
             <a href="#_68" rel="nofollow">
              路径相容
             </a>
            </li>
            <li>
             <a href="#k_71" rel="nofollow">
              k-相容
             </a>
            </li>
            <li>
             <a href="#_75" rel="nofollow">
              全局约束
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#CSPCSP_80" rel="nofollow">
            CSP形式化为一个搜索问题(CSP的回溯搜索)
           </a>
          </li>
          <li>
           <a href="#_92" rel="nofollow">
            如何提高回溯搜索的效率
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#_97" rel="nofollow">
              变量顺序
             </a>
            </li>
            <li>
             <a href="#_107" rel="nofollow">
              取值顺序
             </a>
            </li>
            <li>
             <a href="#_113" rel="nofollow">
              如何提前检查失败（搜索与推理交错进行）
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#CSP_132" rel="nofollow">
            CSP局部搜索
           </a>
          </li>
          <li>
           <a href="#_135" rel="nofollow">
            问题的结构
           </a>
          </li>
          <li>
           <a href="#_145" rel="nofollow">
            资源分享
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h4>
     <a id="_1">
     </a>
     定义约束满足问题
    </h4>
    <p>
     使用要素化来描述状态：一组变量，每个变量有自己的值。当每个变量都有自己的赋值同时满足所有关于变量的约束时，问题就得到了解决。这类问题就叫做
     <strong>
      约束满足问题（CSP）
     </strong>
     ，全称Constraint Satisfaction Problem。
    </p>
    <p>
     CSP利用了状态结构的优势，使用的是通用策略而不是问题专业启发式来求解复杂问题。
    </p>
    <p>
     主要思想：通过识别违反约束的变量/值的组合迅速消除大规模的搜索空间。
    </p>
    <p>
     赋值：问题的状态由对部分或者全部变量的一个赋值来定义，{X_i=v_i,…}。
     <br/>
     <strong>
      相容赋值、合法赋值
     </strong>
     ：一个不违反约束条件的赋值。
     <br/>
     完整赋值：每个变量都已经赋值。
     <br/>
     部分赋值:只有部分变量赋值。
     <br/>
     <strong>
      CSP的解是相容的、完整的赋值。
     </strong>
    </p>
    <p>
     CSP包含三个成分X,D,C：
    </p>
    <ul>
     <li>
      X：变量集合 （variables）
     </li>
     <li>
      D：值域集合，每个变量有自己的值域 （domain）
     </li>
     <li>
      C：描述变量取值的约束集合 （constraint）
     </li>
    </ul>
    <p>
     <strong>
      八皇后问题的CSP形式
     </strong>
    </p>
    <ul>
     <li>
      Variables: X={X1,X2,X3,…,X8}
     </li>
     <li>
      Domain: D={D1,D2,D3,…,D8},Di={1,2,3,4,5,6,7,8}
     </li>
     <li>
      Constraints:C={&lt;{Xi,Xj}, Xi≠Xj &amp; |Xi-Xj|≠|i-j|, 1 ≤ i ≤ 8,1 ≤ j ≤ 8}
      <br/>
      a solution {5,2,4,6,8,3,1,7}
     </li>
    </ul>
    <p>
     地图着色问题
     <br/>
     任务：对澳大利亚地图的每个州进行着色，每个区域可以涂上红色、绿色或者蓝色，要求是相邻的区域颜色不能相同。
     <br/>
     下图中的右图就是左图所示的罗马尼亚问题的
     <strong>
      约束图
     </strong>
     <br/>
     <img align="middle" height="230" src="https://note.youdao.com/yws/api/personal/file/WEB21a473643ea3b16cbe69e9aa5ffe95bc?method=download&amp;shareKey=445a0f5a38a8c455e08ead594bf9386c"/>
    </p>
    <img align="middle" height="280" src="https://note.youdao.com/yws/api/personal/file/WEB6623af413c4ddd9f6b40b843b4b74b2a?method=download&amp;shareKey=e3bc9497a23bb7939d9e29210feac2e8">
     <p>
      <strong>
       地图着色问题的CSP形式化
      </strong>
     </p>
     <ul>
      <li>
       Variables: X={WA, NT, Q, NSW, V, SA, T}
      </li>
      <li>
       Domain: D={D 1 ,…,D 7 }, D i ={red, green, blue}
      </li>
      <li>
       Constraints: adjacent regions must have different colors：C={WA≠NT, WA≠SA, NT≠SA, NT≠Q, SA≠Q,SA≠W, SA≠V,Q≠NSW, NSW≠V}
       <br/>
       SA≠WA是&lt; (SA, WA),SA≠WA&gt;的简洁表示
      </li>
     </ul>
     <p>
      Solutions are assignments satisfying all constraints：
      <br/>
      {WA=red, NT=green, Q=red,NSW=green, V= red, SA=blue,T= green}
     </p>
     <h4>
      <a id="CSP_42">
      </a>
      约束传播：CSP中的推理
     </h4>
     <p>
      CSP中的推理:
      <strong>
       约束传播
      </strong>
      。约束传播使用约束减小一个变量的合法取值范围,从而影响到跟此变量有约束关系的另一变量的取值。
      <br/>
      局部搜索(local search)：全部赋值full assignment
      <br/>
      约束传播(constraint propagation)：部分赋值partial assignment
     </p>
     <ul>
      <li>
       给一个变量赋值后,则通过约束传播可缩小与其有约束关系的其他变量的值域。
      </li>
     </ul>
     <p>
      例如
      <br/>
      <img align="middle" height="250" src="https://note.youdao.com/yws/api/personal/file/WEB94deb004a9cd0e516092171d1b3ae794?method=download&amp;shareKey=22cb4588829b6d48f8723f1a3c74aba6"/>
     </p>
     <ul>
      <li>
       <strong>
        在CSP中,算法可以进行约束传播,也可以搜索
       </strong>
       (从几种可能性中选择新的变量赋值)。约束传播与搜索可以交替进行,或者也可以将约束传播作为搜索前的预处理步骤。
      </li>
      <li>
       <strong>
        约束传播的核心思想是局部相容性
       </strong>
       。
      </li>
      <li>
       增强约束图中各部分局部相容性会导致不相容的结点取值被删除。
      </li>
     </ul>
     <h5>
      <a id="_57">
      </a>
      结点相容
     </h5>
     <p>
      如果单个变量(对应于CSP网络中的结点)值域中的所有取值满足它的一元约束,就称此变量是
      <strong>
       结点相容
      </strong>
      的。
      <br/>
      例如,如果地图着色问题中南澳洲人不喜欢绿色,变量SA原来值域为{red, green, blue},删除green此结点即为结点相容的,此时SA的值域为{red, blue}。
      <br/>
      如果网络中每个变量都是结点相容的,则此网络是结点相容的。
     </p>
     <h5>
      <a id="_62">
      </a>
      弧相容
     </h5>
     <p>
      对于变量Xi，Xj ,若对Xi的
      <strong>
       每个赋值
      </strong>
      在Xj都存在某个取值满足弧(Xi, Xj)的二元约束,则称Xi对于Xj是弧相容的。
      <br/>
      如果每个变量对于其它变量都是弧相容的,则称该
      <strong>
       网络是弧相容
      </strong>
      的。
     </p>
     <img align="middle" height="200" src="https://note.youdao.com/yws/api/personal/file/WEB3c9f4f1da646c50968057beae331ab50?method=download&amp;shareKey=47d0a2bb2eabae75ac05c96b9845d179">
      <h5>
       <a id="_68">
       </a>
       路径相容
      </h5>
      <p>
       对{Xi , Xj}的每一个相容赋值{Xi =a, Xj =b},Xm都有合适的取值同时使得{Xi , Xm }和{Xm , Xj }是相容的,则称
       <strong>
        集合{Xi , Xj }对于Xm 是(路径)相容的
       </strong>
       。被称为路径相容,是因为这很像是一条从Xi途经Xm，再到Xj的路径。
      </p>
      <h5>
       <a id="k_71">
       </a>
       k-相容
      </h5>
      <p>
       如果对于任何k-1个变量的任何相容赋值,任何第k个变量总能被赋予一个和前k-个变量相容的值,那么这个CSP是k相容的。
       <br/>
       <strong>
        1-相容是节点相容。2-相容即为弧相容。对二元约束网络,3-相容是路径相容。
       </strong>
      </p>
      <h5>
       <a id="_75">
       </a>
       全局约束
      </h5>
      <p>
       <strong>
        全局约束可涉及任意个约束变量(此处说的全局约束不一定是所有变量
       </strong>
       )。例如,Alldiff约束表示所有相关变量必须取不同的值。Alldiff约束的不相容检测的一种简单形式:如果约束涉及m个变量,可能的不同取值有n个,且m&gt;n,那么约束不可能满足。
      </p>
      <p>
       另一个重要的高阶约束是资源约束,有时称为atmost约束。例如在调度问题中,用P1 ,…,P4 表示执行四项任务的人数。总人数不超过10人的约束记为atmost(10, P1 , P2 , P3 , P4)。
      </p>
      <h4>
       <a id="CSPCSP_80">
       </a>
       CSP形式化为一个搜索问题(CSP的回溯搜索)
      </h4>
      <p>
       在CSP中,算法可以进行约束传播,也可以搜索(从几种可能性中选择新的变量赋值)。
       <br/>
       <strong>
        很多CSP只用推理是无法求解的，还需要通过搜索来求解。
       </strong>
       <br/>
       <strong>
        部分赋值的回溯搜索算法
       </strong>
       ：可以用标准的深度优先搜索，状态可能是部分赋值，行动是将var=value加入到赋值中。
       <br/>
       CSP的一个性质：变量赋值是
       <strong>
        可交换
       </strong>
       的，
       <strong>
        不用考虑变量赋值的顺序
       </strong>
       。
      </p>
      <p>
       例子：澳大利亚地图着色的一个部分搜索树如下
       <br/>
       <img align="middle" height="320" src="https://note.youdao.com/yws/api/personal/file/WEB315eaebce5236eb333558dd193811b0c?method=download&amp;shareKey=47405f418179da1136144a400dc3ee85"/>
      </p>
      <p>
       <strong>
        回溯搜索，深度优先搜索的一种形式，经常用于求解CSP问题
       </strong>
       。每次为一个变量选一个赋值，没有合法的值的时候就回溯。
       <strong>
        推理和搜索可以交错进行（如前向检验、弧相容检验）
       </strong>
       。
       <br/>
       <img align="middle" height="250" src="https://note.youdao.com/yws/api/personal/file/WEB3a4504d177663282cbab2df61bf43e1b?method=download&amp;shareKey=37da326ba623cea9b09e553bad3cfe0a"/>
      </p>
      <h4>
       <a id="_92">
       </a>
       如何提高回溯搜索的效率
      </h4>
      <p>
       变量顺序(最少剩余值、最大度)、值的顺序(最少约束值)、提前检查失败(前向检验、维护弧相容)、利用树形结构
       <br/>
       还是以澳大利亚地图着色为例：
       <br/>
       <img align="middle" height="150" src="https://note.youdao.com/yws/api/personal/file/WEB078343b8f55305d464ff87d1fdbfacf5?method=download&amp;shareKey=6dc7af9726f1075e5e45cb2d704e9b56"/>
      </p>
      <h5>
       <a id="_97">
       </a>
       变量顺序
      </h5>
      <p>
       1）选择“合法”取值最少或
       <strong>
        失败优先
       </strong>
       的变量——称为
       <strong>
        最少剩余值（MRV）
       </strong>
       启发式。（做一个强有力的引导，方便提早遇到失败，从而剪枝）
      </p>
      <img align="middle" height="100" src="https://note.youdao.com/yws/api/personal/file/WEBc3527b2dcd002f722d47eae24fc806ba?method=download&amp;shareKey=e70a773b7146f1bfb488922d00985a22">
       <p>
        如果变量都有同样的最少剩余值，该怎么选呢？
        <br/>
        2）度启发式：通过选择
        <strong>
         与其他未赋值变量约束最多的变量
        </strong>
        来试图降低未来的分支因子。（用来打破僵局，如选择第一个着色区域）
       </p>
       <img align="middle" height="100" src="https://note.youdao.com/yws/api/personal/file/WEB349985fe5e6d4717a806347607ae87f9?method=download&amp;shareKey=424c678a109c6fc69d8e23f90fbc5e3f">
        <h5>
         <a id="_107">
         </a>
         取值顺序
        </h5>
        <p>
         上面讲了怎么选取变量，一旦变量选好了，变量的值应该怎么选呢？
         <br/>
         <strong>
          最少约束值
         </strong>
         ：优先选择的赋值是给邻居变量留下更多的选择
         <br/>
         下图中，右上角的Q应选择红色，若选择蓝色，则SA没有可选的颜色了
         <br/>
         <img align="middle" height="150" src="https://note.youdao.com/yws/api/personal/file/WEB3b373203c3ec11a4aa957337389fa92b?method=download&amp;shareKey=d6dd9e437fc7e8e9edbb2c8591966289"/>
        </p>
        <h5>
         <a id="_113">
         </a>
         如何提前检查失败（搜索与推理交错进行）
        </h5>
        <p>
         <strong>
          前向检验(Forward Checking)
         </strong>
         ：检查未分配变量的合法剩余值，当任何变量没有合法值时终止。
        </p>
        <img align="middle" height="250" src="https://note.youdao.com/yws/api/personal/file/WEB090e80c9a12e83513a983f59f85e0901?method=download&amp;shareKey=cb601847fefd5b9aaf9331138b9f0066"/>
        <p>
         上图中，长条形颜色表示给对应地图上色，正方形颜色表示未上色，但是可以选择的颜色，按顺序对WA，Q，V赋值后，SA值域为空，故算法立刻回溯。
        </p>
        <p>
         <strong>
          前向检验能检测出很多不相容，但是它无法检测所有不相容
         </strong>
         。它使当前变量弧相容，但是并不向前看使其他变量弧相容。上图中第三行，当WA，Q都赋值后，NT和SA都是能是蓝色了。前向检验向前看得不够远，不足以观察出这种不相容；NT和SA邻接所以不能取相同的值。
        </p>
        <p>
         如何更早地比前向检验检查失败呢？
        </p>
        <p>
         <strong>
          弧相容(Arc consistency)检验
         </strong>
         ：当变量X赋值后，弧相容从与X相邻的弧中所有其他没有赋值的变量出发，若一旦某个变量的值域变为空，则算法立刻回溯。
        </p>
        <img align="middle" height="150" src="https://note.youdao.com/yws/api/personal/file/WEB08086e2ab62c26cc8deea53e2321b026?method=download&amp;shareKey=ed72a232fb10baed7ff840119ff8dcb7"/>
        <p>
         上图中，当WA，Q都赋值后，弧相容算法可以检测和SA邻接的NT的取值。若NT没有可取的值，则回溯。
         <br/>
         <strong>
          弧相容检测故障早于前向检查
         </strong>
        </p>
        <h4>
         <a id="CSP_132">
         </a>
         CSP局部搜索
        </h4>
        <p>
         局部搜索算法对求解许多CSP都是很有效的。它们使用完整状态的形式化：
         <strong>
          初始状态是给每个变量都赋一个值，搜索过程是一次改变一个变量的取值。
         </strong>
        </p>
        <h4>
         <a id="_135">
         </a>
         问题的结构
        </h4>
        <p>
         Theorem: if the constraint graph has no loops,the CSP can be solved in O(nd^2 ) time.
         <br/>
         Compare to general CSPs, where worst-casetime is O(d^n)
        </p>
        <p>
         求解树结构CSP时，首先任意选择一个变量为树的根，选择变量顺序，这样每个变量在树中出现在父节点之后。这样的排序称为
         <strong>
          拓扑排序
         </strong>
         。
        </p>
        <img align="middle" height="70" src="https://note.youdao.com/yws/api/personal/file/WEBcc9051b599abb5b3855b03b6e8e24a19?method=download&amp;shareKey=7bda7a7516f99a44df8316f16504d156"/>
        <img align="middle" height="30" src="https://note.youdao.com/yws/api/personal/file/WEBc90f76d5514f1c5486c4baa7f74f8af6?method=download&amp;shareKey=0a9025eaf46661b9ed0539cb63b8f456"/>
        <h4>
         <a id="_145">
         </a>
         资源分享
        </h4>
        <p>
         实验代码下载：
         <br/>
         <a href="https://github.com/yyl424525/AI_Homework">
          https://github.com/yyl424525/AI_Homework
         </a>
         <br/>
         人工智能-一种现代方法中文第三版pdf、课件、作业及解答、课后习题答案、实验代码和报告、历年考博题下载：
         <a href="https://download.csdn.net/download/yyl424525/11310392">
          https://download.csdn.net/download/yyl424525/11310392
         </a>
        </p>
       </img>
      </img>
     </img>
    </img>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f79796c343234353235:2f61727469636c652f64657461696c732f3935333038323031" class_="artid" style="display:none">
 </p>
</div>


