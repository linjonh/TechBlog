---
layout: post
title: "前端for循环遍历foreachmap使用"
date: 2025-01-06 09:36:30 +0800
description: "场景：很多时候后端发来的数据是不能够完全契合前端的需求的，比如你要一个数据对象中的值，但是这个值却作为了key出现；比如你要通过一个数组中的对象的某个属性来确定到底取哪个对象。"
keywords: "foreach map"
categories: ['前端企业应用']
tags: ['前端', 'Map', 'Javascript', 'Foreach', 'For']
artid: "144956199"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=144956199
    alt: "前端for循环遍历foreachmap使用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=144956199
featuredImagePreview: https://bing.ee123.net/img/rand?artid=144956199
cover: https://bing.ee123.net/img/rand?artid=144956199
image: https://bing.ee123.net/img/rand?artid=144956199
img: https://bing.ee123.net/img/rand?artid=144956199
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     前端for循环遍历——foreach、map使用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <hr/>
    <h3>
     <a id="title_forforeachmap%0Adate_20250104_110217%0Atags_javascript_1">
     </a>
     title: 前端不同类型的for循环遍历——foreach、map
     <br/>
     date: 2025-01-04 11:02:17
     <br/>
     tags: javascript
    </h3>
    <h2>
     <a id="for_6">
     </a>
     前端不同类型的for循环遍历
    </h2>
    <p>
     场景：很多时候后端发来的数据是不能够完全契合前端的需求的，比如你要一个数据对象中的值，但是这个值却作为了key出现；比如你要通过一个数组中的对象的某个属性来确定到底取哪个对象。
    </p>
    <h3>
     <a id="forforeach_10">
     </a>
     一、for与foreach
    </h3>
    <pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// 计算for循环遍历所需要的相关的时间的长短</span>
        <span class="token keyword">let</span> arrs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">99999999</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">let</span> starTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arrs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
           total<span class="token operator">++</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> endTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        time <span class="token operator">=</span> endTime<span class="token operator">-</span>starTime<span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"for循环遍历共计消耗时间："</span><span class="token operator">+</span> time<span class="token operator">+</span><span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        total <span class="token operator">=</span> <span class="token number">0</span>
        starTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        arrs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
             total<span class="token operator">++</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        endTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        time <span class="token operator">=</span> endTime<span class="token operator">-</span>starTime<span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"foreach循环遍历共计消耗时间："</span><span class="token operator">+</span> time<span class="token operator">+</span><span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     发现两种遍历的效率还是差距挺大的，具体如下测试结果。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/eeadb97c56931c771da0fa0005765a76.png"/>
    </p>
    <p>
     <strong>
      注意：
     </strong>
    </p>
    <p>
     .forEach()方法是不支持break这种结束方法，但是他
     <strong>
      支持return进行结束
     </strong>
     。
    </p>
    <p>
     .forEach()方法不支持异步等待，他会
     <strong>
      直接跳过当中的异步同步化
     </strong>
     （async、await）请求操作。
    </p>
    <h3>
     <a id="map_64">
     </a>
     二、map
    </h3>
    <h4>
     <a id="1_66">
     </a>
     1.基础遍历
    </h4>
    <p>
     使用.map方法可以帮助遍历数组，同时可以得到数组的元素、下标、还有当前数组本身
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/b9276cd76c1569ffdc28d0929b8ce732.png"/>
    </p>
    <h4>
     <a id="2_79">
     </a>
     2.简单生成新数组
    </h4>
    <p>
     return是每次返回一个子元素（假如只有一行简单的代码，也可以去掉return），就不用复杂push操作。
    </p>
    <pre><code class="prism language-javascript"> <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token comment">//item表示当前的元素，index表示下标，arr当前数组的的相关数据</span>
 <span class="token keyword">let</span>  newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> item<span class="token operator">*</span><span class="token number">2</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">//2,4,6,8,10,12</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="3_93">
     </a>
     3.清洗对象数组数据
    </h4>
    <p>
     操作
     <strong>
      数组对象
     </strong>
     中的相关数据，可用于清洗数据
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"王五"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
       <span class="token keyword">return</span> item<span class="token punctuation">.</span>name
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">//可以仅遍历出了自己想要的属性的数组</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['张三', '李四', '王五']</span>
</code></pre>
    <h4>
     <a id="4_106">
     </a>
     4.在数组对象中追加属性、更改属性值
    </h4>
    <p>
     …三个点属于es6新特性，就是用来展开对象中的所有属性的简写，我们是可以复写相关的属性的，不影响使用。
    </p>
    <pre><code class="prism language-javascript"> <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"王五"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
 <span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
 <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token operator">...</span>item<span class="token punctuation">,</span><span class="token comment">//es6新语法添加所有属性</span>
   		<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>item<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">岁</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token comment">//更改值</span>
      <span class="token keyword">class</span><span class="token operator">:</span><span class="token number">1</span> <span class="token comment">//添加新属性方法</span>
      <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     简写方法 ，不写return的时候的加上一个小括号来包裹相关的属性。
    </p>
    <pre><code class="prism language-javascript"> <span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token operator">...</span>item<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>item<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">岁</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token keyword">class</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     相关的结果如下所示
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/205d3b76816d9d5e54de66efa7ba930d.png"/>
    </p>
    <h4>
     <a id="5_132">
     </a>
     5.进行属性名称的解构替换
    </h4>
    <p>
     假如说我们要将name这个属性名称改成uname，可以使用map进行相关的解构替换。这样直接使用一个{属性}，可以直接使用，不用再使用item进行相关的调用。
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"王五"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span>name<span class="token punctuation">,</span>age<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">uname</span><span class="token operator">:</span>name<span class="token punctuation">,</span><span class="token literal-property property">ages</span><span class="token operator">:</span>age<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/8dfa2abe927816deff524a111546d60c.png"/>
    </p>
    <h4>
     <a id="6_144">
     </a>
     6.异步请求，同时展示优化
    </h4>
    <p>
     很多时候起哦们去要请求后端接口拿到数据，但是请求接口是异步请求，但是又有相关的需求要同时展示，这个时候就可以利用map添加参数进行异步请求同步化，再使用promise.all一次处理相关的所有数据。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/fde282d29ed0cc30f1d74fea2738e7fe.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35353039373434302f:61727469636c652f64657461696c732f313434393536313939" class_="artid" style="display:none">
 </p>
</div>


