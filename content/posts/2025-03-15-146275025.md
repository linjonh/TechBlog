---
layout: post
title: "Three.js-阴影-Shadow-知识点整理"
date: 2025-03-15 10:02:12 +0800
description: "🚀 通过合理调整这些参数，可以让 Three.js 的阴影更加逼真、柔和，同时兼顾性能优化！我们将系统地整理与阴影相关的知识点。控制，并通过不同类型的光源 ("
keywords: "Three.js 阴影 (Shadow) 知识点整理"
categories: ['未分类']
tags: ['前端', 'Three', 'Npm', 'Javascript']
artid: "146275025"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146275025
    alt: "Three.js-阴影-Shadow-知识点整理"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146275025
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146275025
cover: https://bing.ee123.net/img/rand?artid=146275025
image: https://bing.ee123.net/img/rand?artid=146275025
img: https://bing.ee123.net/img/rand?artid=146275025
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Three.js 阴影 (Shadow) 知识点整理
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p id="ufb9ff69e">
     阴影主要由
     <code>
      castShadow
     </code>
     和
     <code>
      receiveShadow
     </code>
     控制，并通过不同类型的光源 (
     <code>
      DirectionalLight
     </code>
     、
     <code>
      SpotLight
     </code>
     、
     <code>
      PointLight
     </code>
     ) 生成。我们将系统地整理与阴影相关的知识点。
    </p>
    <hr id="oRl50"/>
    <h3 id="b051bc9c">
     <strong>
      1️⃣
     </strong>
     <strong>
      基础概念
     </strong>
    </h3>
    <ul>
     <li id="u1a05aac3">
      <code>
       <strong>
        castShadow
       </strong>
      </code>
      🎭：物体是否投射阴影。
     </li>
     <li id="ubf61a383">
      <code>
       <strong>
        receiveShadow
       </strong>
      </code>
      🏞️：物体是否接收阴影。
     </li>
     <li id="u9bfd63c7">
      <code>
       <strong>
        renderer.shadowMap.enabled = true
       </strong>
      </code>
      ✅：全局开启阴影渲染。
     </li>
     <li id="u865db0aa">
      <code>
       <strong>
        renderer.shadowMap.type
       </strong>
      </code>
      📦：设置阴影质量，常见类型：
     </li>
    </ul>
    <ul>
     <li>
      <ul>
       <li id="udb1fb3c6">
        <code>
         THREE.BasicShadowMap
        </code>
        （性能高但质量低）
       </li>
       <li id="u8c491a72">
        <code>
         THREE.PCFShadowMap
        </code>
        （平滑阴影，默认值）
       </li>
       <li id="u61a8edbf">
        <code>
         THREE.PCFSoftShadowMap
        </code>
        （更柔和的阴影）
       </li>
       <li id="ue48dd9a9">
        <code>
         THREE.VSMShadowMap
        </code>
        （高级阴影，适用于柔和阴影）
       </li>
      </ul>
     </li>
    </ul>
    <hr id="Pdxs6"/>
    <h3 id="f23b5e48">
     <strong>
      2️⃣
     </strong>
     <strong>
      各类光源的阴影设置
     </strong>
    </h3>
    <p id="u787424c9">
     在 Three.js 中，不是所有的光源都能投射阴影：
    </p>
    <table id="PBn7a">
     <tbody>
      <tr>
       <td>
        <p id="u7e8bc3ce">
         光源类型
        </p>
       </td>
       <td>
        <p id="u35afbefb">
         支持阴影
        </p>
       </td>
       <td>
        <p id="u113bf570">
         代码示例
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="uebf12bd6">
         <code>
          DirectionalLight
         </code>
        </p>
       </td>
       <td>
        <p id="u926d46e1">
         ✅ 支持
        </p>
       </td>
       <td>
        <p id="ub88eaae3">
         <code>
          directionalLight.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u7f396348">
         <code>
          SpotLight
         </code>
        </p>
       </td>
       <td>
        <p id="u71245a51">
         ✅ 支持
        </p>
       </td>
       <td>
        <p id="u59c263de">
         <code>
          spotLight.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ue45486f3">
         <code>
          PointLight
         </code>
        </p>
       </td>
       <td>
        <p id="u3a7b2eeb">
         ✅ 支持
        </p>
       </td>
       <td>
        <p id="ufd89a4f9">
         <code>
          pointLight.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u0b98e07c">
         <code>
          AmbientLight
         </code>
        </p>
       </td>
       <td>
        <p id="u04995555">
         ❌ 不支持
        </p>
       </td>
       <td>
        <p id="u86ddfffd">
         无
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u14143214">
         <code>
          HemisphereLight
         </code>
        </p>
       </td>
       <td>
        <p id="u9a448218">
         ❌ 不支持
        </p>
       </td>
       <td>
        <p id="u73e9b020">
         无
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ue11d783f">
         <code>
          RectAreaLight
         </code>
        </p>
       </td>
       <td>
        <p id="u988f136a">
         ❌ 不支持
        </p>
       </td>
       <td>
        <p id="u3e67566c">
         无
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <hr id="eNcgR"/>
    <h3 id="97755317">
     <strong>
      3️⃣
     </strong>
     <strong>
      代码分析：Directional Light 阴影
     </strong>
    </h3>
    <pre id="cCZop"><code>const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
directionalLight.position.set(2, 2, -1);
scene.add(directionalLight);

directionalLight.castShadow = true; // ✅ 允许投射阴影

// 调整阴影贴图大小，影响阴影清晰度
directionalLight.shadow.mapSize.width = 1024;
directionalLight.shadow.mapSize.height = 1024;

// 调整阴影相机视锥体，决定阴影投射区域
directionalLight.shadow.camera.top = 2;
directionalLight.shadow.camera.bottom = -2;
directionalLight.shadow.camera.right = 2;
directionalLight.shadow.camera.left = -2;

// 调整相机的远近平面，影响阴影范围
directionalLight.shadow.camera.near = 1;
directionalLight.shadow.camera.far = 6;

// 创建 CameraHelper 可视化阴影相机
const directionalLightHelper = new THREE.CameraHelper(directionalLight.shadow.camera);
scene.add(directionalLightHelper);</code></pre>
    <p id="u78260bdc">
     📌
     <strong>
      重点知识
     </strong>
    </p>
    <ul>
     <li id="udb2c12fc">
      <code>
       <strong>
        shadow.mapSize
       </strong>
      </code>
      ：控制阴影贴图分辨率，越大阴影越清晰，但影响性能。
     </li>
     <li id="u1c6c5ebe">
      <code>
       <strong>
        shadow.camera.top/bottom/left/right
       </strong>
      </code>
      ：控制阴影的投影区域，过大会导致阴影模糊，过小会裁剪阴影。
     </li>
     <li id="u41f592d9">
      <code>
       <strong>
        shadow.camera.near/far
       </strong>
      </code>
      ：控制阴影投射的最近和最远范围，合理调整可优化阴影效果。
     </li>
    </ul>
    <hr id="bE5EI"/>
    <h3 id="2385bd05">
     <strong>
      4️⃣
     </strong>
     <strong>
      代码分析：Spot Light 阴影
     </strong>
    </h3>
    <pre id="tIomT"><code>const spotLight = new THREE.SpotLight(0xffffff, 20, 5, Math.PI * 0.3);
spotLight.position.set(0, 2, 2);
spotLight.castShadow = true; // ✅ 允许投射阴影

// 调整阴影质量
spotLight.shadow.mapSize.width = 1024;
spotLight.shadow.mapSize.height = 1024;

// 控制阴影相机的远近平面
spotLight.shadow.camera.fov = 30;
spotLight.shadow.camera.near = 1;
spotLight.shadow.camera.far = 6;

scene.add(spotLight);
scene.add(spotLight.target);

// 创建 CameraHelper 可视化阴影相机
const spotLightHelper = new THREE.CameraHelper(spotLight.shadow.camera);
scene.add(spotLightHelper);</code></pre>
    <p id="u9493ca2d">
     📌
     <strong>
      重点知识
     </strong>
    </p>
    <ul>
     <li id="ud277b279">
      <code>
       <strong>
        shadow.camera.fov
       </strong>
      </code>
      ：影响光锥大小，控制阴影范围。
     </li>
     <li id="ueeb33c0e">
      <code>
       <strong>
        shadow.camera.near/far
       </strong>
      </code>
      ：控制阴影渲染范围，避免不必要的计算。
     </li>
     <li id="u0a8bcb62">
      <code>
       <strong>
        spotLight.target
       </strong>
      </code>
      ：聚光灯照射的目标点，影响阴影方向。
     </li>
    </ul>
    <hr id="ETkTP"/>
    <h3 id="0058fae1">
     <strong>
      5️⃣
     </strong>
     <strong>
      代码分析：Point Light 阴影
     </strong>
    </h3>
    <pre id="AOFJl"><code>const pointLight = new THREE.PointLight(0xffffff, 3);
pointLight.position.set(-1, 1, 0);
pointLight.castShadow = true; // ✅ 允许投射阴影

// 调整阴影质量
pointLight.shadow.mapSize.width = 1024;
pointLight.shadow.mapSize.height = 1024;

// 控制阴影相机的远近平面
pointLight.shadow.camera.near = 0.1;
pointLight.shadow.camera.far = 6;

scene.add(pointLight);

// 创建 CameraHelper 可视化阴影相机
const pointLightHelper = new THREE.CameraHelper(pointLight.shadow.camera);
scene.add(pointLightHelper);</code></pre>
    <p id="u1aaa553d">
     📌
     <strong>
      重点知识
     </strong>
    </p>
    <ul>
     <li id="u691ed8e8">
      <code>
       <strong>
        PointLight
       </strong>
      </code>
      <strong>
       采用
      </strong>
      <code>
       <strong>
        cubeShadowMap
       </strong>
      </code>
      ：需要渲染 6 个方向的阴影，性能开销较大。
     </li>
     <li id="u95726403">
      <code>
       <strong>
        shadow.camera.near/far
       </strong>
      </code>
      ：优化阴影投射范围，避免性能浪费。
     </li>
    </ul>
    <hr id="DGZ6V"/>
    <h3 id="f8e8972c">
     <strong>
      6️⃣
     </strong>
     <strong>
      代码分析：阴影贴图
     </strong>
    </h3>
    <pre id="Lxrla"><code>const textureLoader = new THREE.TextureLoader();
const bakedShadow = textureLoader.load('texture/shadow/bakedShadow.jpg');
const simpleShadow = textureLoader.load('texture/shadow/simpleShadow.jpg');</code></pre>
    <p id="u9b69c553">
     📌
     <strong>
      重点知识
     </strong>
    </p>
    <ul>
     <li id="ua68f96aa">
      <strong>
       预渲染阴影贴图（Baked Shadow）
      </strong>
      ：避免实时计算阴影，提高性能。
     </li>
     <li id="u7b6e568e">
      <strong>
       透明阴影（Simple Shadow）
      </strong>
      ：
     </li>
    </ul>
    <pre id="Q5oa4"><code>new THREE.MeshBasicMaterial({
    color: 0x000000,
    transparent: true,
    alphaMap: simpleShadow
})</code></pre>
    <ul>
     <li>
      <ul>
       <li id="u27fa4532">
        <code>
         transparent: true
        </code>
        让黑色区域可见，白色区域透明。
       </li>
       <li id="uddd08279">
        <code>
         alphaMap
        </code>
        让阴影贴图应用到
        <code>
         PlaneGeometry
        </code>
        。
       </li>
      </ul>
     </li>
    </ul>
    <hr id="nupD4"/>
    <h3 id="3cd9c259">
     <strong>
      7️⃣
     </strong>
     <strong>
      代码分析：球体阴影
     </strong>
    </h3>
    <pre id="U0U7j"><code>sphereshadow.rotation.x = -Math.PI * 0.5;
sphereshadow.position.y = plane.position.y + 0.01;
scene.add(sphere, plane, sphereshadow);</code></pre>
    <p id="ue9c3f5d0">
     📌
     <strong>
      重点知识
     </strong>
    </p>
    <ul>
     <li id="u3802e5b1">
      <strong>
       手动调整阴影位置
      </strong>
      避免阴影和地面重叠导致视觉错误。
     </li>
     <li id="u4411a651">
      <strong>
       动态改变阴影透明度
      </strong>
      ：
     </li>
    </ul>
    <pre id="J0ywz"><code>sphereshadow.material.opacity = 1 - sphere.position.y * 0.3;</code></pre>
    <ul>
     <li>
      <ul>
       <li id="u0fd59ac5">
        球体越高，阴影越淡，实现“动态阴影”效果。
       </li>
      </ul>
     </li>
    </ul>
    <hr id="vTvup"/>
    <h3 id="e910358a">
     <strong>
      8️⃣
     </strong>
     <strong>
      代码分析：阴影优化
     </strong>
    </h3>
    <pre id="djfXo"><code>renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;</code></pre>
    <p id="u2f60e36d">
     📌
     <strong>
      重点知识
     </strong>
    </p>
    <ul>
     <li id="u70aa99ac">
      <code>
       <strong>
        PCFSoftShadowMap
       </strong>
      </code>
      ：提供平滑柔和的阴影。
     </li>
     <li id="u5acdd93a">
      <code>
       <strong>
        setPixelRatio(Math.min(window.devicePixelRatio, 2))
       </strong>
      </code>
      ：限制像素比，平衡清晰度和性能。
     </li>
    </ul>
    <hr id="YLxUe"/>
    <h3 id="1700040e">
     <strong>
      🔚
     </strong>
     <strong>
      总结
     </strong>
    </h3>
    <table id="fnuYV">
     <tbody>
      <tr>
       <td>
        <p id="u0cea7f22">
         知识点
        </p>
       </td>
       <td>
        <p id="u607f7fec">
         关键参数
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u85568503">
         <strong>
          开启阴影
         </strong>
        </p>
       </td>
       <td>
        <p id="udd428138">
         <code>
          renderer.shadowMap.enabled = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ua9fa543c">
         <strong>
          光源投射阴影
         </strong>
        </p>
       </td>
       <td>
        <p id="u549656b1">
         <code>
          light.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u69dcc27f">
         <strong>
          物体投射阴影
         </strong>
        </p>
       </td>
       <td>
        <p id="u39ff6ab6">
         <code>
          mesh.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u223e8794">
         <strong>
          物体接收阴影
         </strong>
        </p>
       </td>
       <td>
        <p id="ud5f43eda">
         <code>
          mesh.receiveShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ud74981bc">
         <strong>
          优化阴影
         </strong>
        </p>
       </td>
       <td>
        <p id="u33047f14">
         <code>
          shadow.mapSize
         </code>
        </p>
        <p id="u3ff231ed">
         ,
         <code>
          shadow.camera.near/far
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u3ccd06bb">
         <strong>
          手动优化阴影效果
         </strong>
        </p>
       </td>
       <td>
        <p id="u739ea499">
         预渲染贴图 (
         <code>
          bakedShadow
         </code>
        </p>
        <p id="u3b4c2d4c">
         ),
         <code>
          PCFSoftShadowMap
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p id="ub5d83063">
     🚀 通过合理调整这些参数，可以让 Three.js 的阴影更加逼真、柔和，同时兼顾性能优化！
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f37393433363033392f:61727469636c652f64657461696c732f313436323735303235" class_="artid" style="display:none">
 </p>
</div>


