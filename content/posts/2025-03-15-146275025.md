---
layout: post
title: "Three.js-é˜´å½±-Shadow-çŸ¥è¯†ç‚¹æ•´ç†"
date: 2025-03-15 10:02:12 +0800
description: "ğŸš€ é€šè¿‡åˆç†è°ƒæ•´è¿™äº›å‚æ•°ï¼Œå¯ä»¥è®© Three.js çš„é˜´å½±æ›´åŠ é€¼çœŸã€æŸ”å’Œï¼ŒåŒæ—¶å…¼é¡¾æ€§èƒ½ä¼˜åŒ–ï¼æˆ‘ä»¬å°†ç³»ç»Ÿåœ°æ•´ç†ä¸é˜´å½±ç›¸å…³çš„çŸ¥è¯†ç‚¹ã€‚æ§åˆ¶ï¼Œå¹¶é€šè¿‡ä¸åŒç±»å‹çš„å…‰æº ("
keywords: "Three.js é˜´å½± (Shadow) çŸ¥è¯†ç‚¹æ•´ç†"
categories: ['æœªåˆ†ç±»']
tags: ['å‰ç«¯', 'Three', 'Npm', 'Javascript']
artid: "146275025"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146275025
    alt: "Three.js-é˜´å½±-Shadow-çŸ¥è¯†ç‚¹æ•´ç†"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146275025
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146275025
cover: https://bing.ee123.net/img/rand?artid=146275025
image: https://bing.ee123.net/img/rand?artid=146275025
img: https://bing.ee123.net/img/rand?artid=146275025
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Three.js é˜´å½± (Shadow) çŸ¥è¯†ç‚¹æ•´ç†
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p id="ufb9ff69e">
     é˜´å½±ä¸»è¦ç”±
     <code>
      castShadow
     </code>
     å’Œ
     <code>
      receiveShadow
     </code>
     æ§åˆ¶ï¼Œå¹¶é€šè¿‡ä¸åŒç±»å‹çš„å…‰æº (
     <code>
      DirectionalLight
     </code>
     ã€
     <code>
      SpotLight
     </code>
     ã€
     <code>
      PointLight
     </code>
     ) ç”Ÿæˆã€‚æˆ‘ä»¬å°†ç³»ç»Ÿåœ°æ•´ç†ä¸é˜´å½±ç›¸å…³çš„çŸ¥è¯†ç‚¹ã€‚
    </p>
    <hr id="oRl50"/>
    <h3 id="b051bc9c">
     <strong>
      1ï¸âƒ£
     </strong>
     <strong>
      åŸºç¡€æ¦‚å¿µ
     </strong>
    </h3>
    <ul>
     <li id="u1a05aac3">
      <code>
       <strong>
        castShadow
       </strong>
      </code>
      ğŸ­ï¼šç‰©ä½“æ˜¯å¦æŠ•å°„é˜´å½±ã€‚
     </li>
     <li id="ubf61a383">
      <code>
       <strong>
        receiveShadow
       </strong>
      </code>
      ğŸï¸ï¼šç‰©ä½“æ˜¯å¦æ¥æ”¶é˜´å½±ã€‚
     </li>
     <li id="u9bfd63c7">
      <code>
       <strong>
        renderer.shadowMap.enabled = true
       </strong>
      </code>
      âœ…ï¼šå…¨å±€å¼€å¯é˜´å½±æ¸²æŸ“ã€‚
     </li>
     <li id="u865db0aa">
      <code>
       <strong>
        renderer.shadowMap.type
       </strong>
      </code>
      ğŸ“¦ï¼šè®¾ç½®é˜´å½±è´¨é‡ï¼Œå¸¸è§ç±»å‹ï¼š
     </li>
    </ul>
    <ul>
     <li>
      <ul>
       <li id="udb1fb3c6">
        <code>
         THREE.BasicShadowMap
        </code>
        ï¼ˆæ€§èƒ½é«˜ä½†è´¨é‡ä½ï¼‰
       </li>
       <li id="u8c491a72">
        <code>
         THREE.PCFShadowMap
        </code>
        ï¼ˆå¹³æ»‘é˜´å½±ï¼Œé»˜è®¤å€¼ï¼‰
       </li>
       <li id="u61a8edbf">
        <code>
         THREE.PCFSoftShadowMap
        </code>
        ï¼ˆæ›´æŸ”å’Œçš„é˜´å½±ï¼‰
       </li>
       <li id="ue48dd9a9">
        <code>
         THREE.VSMShadowMap
        </code>
        ï¼ˆé«˜çº§é˜´å½±ï¼Œé€‚ç”¨äºæŸ”å’Œé˜´å½±ï¼‰
       </li>
      </ul>
     </li>
    </ul>
    <hr id="Pdxs6"/>
    <h3 id="f23b5e48">
     <strong>
      2ï¸âƒ£
     </strong>
     <strong>
      å„ç±»å…‰æºçš„é˜´å½±è®¾ç½®
     </strong>
    </h3>
    <p id="u787424c9">
     åœ¨ Three.js ä¸­ï¼Œä¸æ˜¯æ‰€æœ‰çš„å…‰æºéƒ½èƒ½æŠ•å°„é˜´å½±ï¼š
    </p>
    <table id="PBn7a">
     <tbody>
      <tr>
       <td>
        <p id="u7e8bc3ce">
         å…‰æºç±»å‹
        </p>
       </td>
       <td>
        <p id="u35afbefb">
         æ”¯æŒé˜´å½±
        </p>
       </td>
       <td>
        <p id="u113bf570">
         ä»£ç ç¤ºä¾‹
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="uebf12bd6">
         <code>
          DirectionalLight
         </code>
        </p>
       </td>
       <td>
        <p id="u926d46e1">
         âœ… æ”¯æŒ
        </p>
       </td>
       <td>
        <p id="ub88eaae3">
         <code>
          directionalLight.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u7f396348">
         <code>
          SpotLight
         </code>
        </p>
       </td>
       <td>
        <p id="u71245a51">
         âœ… æ”¯æŒ
        </p>
       </td>
       <td>
        <p id="u59c263de">
         <code>
          spotLight.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ue45486f3">
         <code>
          PointLight
         </code>
        </p>
       </td>
       <td>
        <p id="u3a7b2eeb">
         âœ… æ”¯æŒ
        </p>
       </td>
       <td>
        <p id="ufd89a4f9">
         <code>
          pointLight.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u0b98e07c">
         <code>
          AmbientLight
         </code>
        </p>
       </td>
       <td>
        <p id="u04995555">
         âŒ ä¸æ”¯æŒ
        </p>
       </td>
       <td>
        <p id="u86ddfffd">
         æ— 
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u14143214">
         <code>
          HemisphereLight
         </code>
        </p>
       </td>
       <td>
        <p id="u9a448218">
         âŒ ä¸æ”¯æŒ
        </p>
       </td>
       <td>
        <p id="u73e9b020">
         æ— 
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ue11d783f">
         <code>
          RectAreaLight
         </code>
        </p>
       </td>
       <td>
        <p id="u988f136a">
         âŒ ä¸æ”¯æŒ
        </p>
       </td>
       <td>
        <p id="u3e67566c">
         æ— 
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <hr id="eNcgR"/>
    <h3 id="97755317">
     <strong>
      3ï¸âƒ£
     </strong>
     <strong>
      ä»£ç åˆ†æï¼šDirectional Light é˜´å½±
     </strong>
    </h3>
    <pre id="cCZop"><code>const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
directionalLight.position.set(2, 2, -1);
scene.add(directionalLight);

directionalLight.castShadow = true; // âœ… å…è®¸æŠ•å°„é˜´å½±

// è°ƒæ•´é˜´å½±è´´å›¾å¤§å°ï¼Œå½±å“é˜´å½±æ¸…æ™°åº¦
directionalLight.shadow.mapSize.width = 1024;
directionalLight.shadow.mapSize.height = 1024;

// è°ƒæ•´é˜´å½±ç›¸æœºè§†é”¥ä½“ï¼Œå†³å®šé˜´å½±æŠ•å°„åŒºåŸŸ
directionalLight.shadow.camera.top = 2;
directionalLight.shadow.camera.bottom = -2;
directionalLight.shadow.camera.right = 2;
directionalLight.shadow.camera.left = -2;

// è°ƒæ•´ç›¸æœºçš„è¿œè¿‘å¹³é¢ï¼Œå½±å“é˜´å½±èŒƒå›´
directionalLight.shadow.camera.near = 1;
directionalLight.shadow.camera.far = 6;

// åˆ›å»º CameraHelper å¯è§†åŒ–é˜´å½±ç›¸æœº
const directionalLightHelper = new THREE.CameraHelper(directionalLight.shadow.camera);
scene.add(directionalLightHelper);</code></pre>
    <p id="u78260bdc">
     ğŸ“Œ
     <strong>
      é‡ç‚¹çŸ¥è¯†
     </strong>
    </p>
    <ul>
     <li id="udb2c12fc">
      <code>
       <strong>
        shadow.mapSize
       </strong>
      </code>
      ï¼šæ§åˆ¶é˜´å½±è´´å›¾åˆ†è¾¨ç‡ï¼Œè¶Šå¤§é˜´å½±è¶Šæ¸…æ™°ï¼Œä½†å½±å“æ€§èƒ½ã€‚
     </li>
     <li id="u1c6c5ebe">
      <code>
       <strong>
        shadow.camera.top/bottom/left/right
       </strong>
      </code>
      ï¼šæ§åˆ¶é˜´å½±çš„æŠ•å½±åŒºåŸŸï¼Œè¿‡å¤§ä¼šå¯¼è‡´é˜´å½±æ¨¡ç³Šï¼Œè¿‡å°ä¼šè£å‰ªé˜´å½±ã€‚
     </li>
     <li id="u41f592d9">
      <code>
       <strong>
        shadow.camera.near/far
       </strong>
      </code>
      ï¼šæ§åˆ¶é˜´å½±æŠ•å°„çš„æœ€è¿‘å’Œæœ€è¿œèŒƒå›´ï¼Œåˆç†è°ƒæ•´å¯ä¼˜åŒ–é˜´å½±æ•ˆæœã€‚
     </li>
    </ul>
    <hr id="bE5EI"/>
    <h3 id="2385bd05">
     <strong>
      4ï¸âƒ£
     </strong>
     <strong>
      ä»£ç åˆ†æï¼šSpot Light é˜´å½±
     </strong>
    </h3>
    <pre id="tIomT"><code>const spotLight = new THREE.SpotLight(0xffffff, 20, 5, Math.PI * 0.3);
spotLight.position.set(0, 2, 2);
spotLight.castShadow = true; // âœ… å…è®¸æŠ•å°„é˜´å½±

// è°ƒæ•´é˜´å½±è´¨é‡
spotLight.shadow.mapSize.width = 1024;
spotLight.shadow.mapSize.height = 1024;

// æ§åˆ¶é˜´å½±ç›¸æœºçš„è¿œè¿‘å¹³é¢
spotLight.shadow.camera.fov = 30;
spotLight.shadow.camera.near = 1;
spotLight.shadow.camera.far = 6;

scene.add(spotLight);
scene.add(spotLight.target);

// åˆ›å»º CameraHelper å¯è§†åŒ–é˜´å½±ç›¸æœº
const spotLightHelper = new THREE.CameraHelper(spotLight.shadow.camera);
scene.add(spotLightHelper);</code></pre>
    <p id="u9493ca2d">
     ğŸ“Œ
     <strong>
      é‡ç‚¹çŸ¥è¯†
     </strong>
    </p>
    <ul>
     <li id="ud277b279">
      <code>
       <strong>
        shadow.camera.fov
       </strong>
      </code>
      ï¼šå½±å“å…‰é”¥å¤§å°ï¼Œæ§åˆ¶é˜´å½±èŒƒå›´ã€‚
     </li>
     <li id="ueeb33c0e">
      <code>
       <strong>
        shadow.camera.near/far
       </strong>
      </code>
      ï¼šæ§åˆ¶é˜´å½±æ¸²æŸ“èŒƒå›´ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—ã€‚
     </li>
     <li id="u0a8bcb62">
      <code>
       <strong>
        spotLight.target
       </strong>
      </code>
      ï¼šèšå…‰ç¯ç…§å°„çš„ç›®æ ‡ç‚¹ï¼Œå½±å“é˜´å½±æ–¹å‘ã€‚
     </li>
    </ul>
    <hr id="ETkTP"/>
    <h3 id="0058fae1">
     <strong>
      5ï¸âƒ£
     </strong>
     <strong>
      ä»£ç åˆ†æï¼šPoint Light é˜´å½±
     </strong>
    </h3>
    <pre id="AOFJl"><code>const pointLight = new THREE.PointLight(0xffffff, 3);
pointLight.position.set(-1, 1, 0);
pointLight.castShadow = true; // âœ… å…è®¸æŠ•å°„é˜´å½±

// è°ƒæ•´é˜´å½±è´¨é‡
pointLight.shadow.mapSize.width = 1024;
pointLight.shadow.mapSize.height = 1024;

// æ§åˆ¶é˜´å½±ç›¸æœºçš„è¿œè¿‘å¹³é¢
pointLight.shadow.camera.near = 0.1;
pointLight.shadow.camera.far = 6;

scene.add(pointLight);

// åˆ›å»º CameraHelper å¯è§†åŒ–é˜´å½±ç›¸æœº
const pointLightHelper = new THREE.CameraHelper(pointLight.shadow.camera);
scene.add(pointLightHelper);</code></pre>
    <p id="u1aaa553d">
     ğŸ“Œ
     <strong>
      é‡ç‚¹çŸ¥è¯†
     </strong>
    </p>
    <ul>
     <li id="u691ed8e8">
      <code>
       <strong>
        PointLight
       </strong>
      </code>
      <strong>
       é‡‡ç”¨
      </strong>
      <code>
       <strong>
        cubeShadowMap
       </strong>
      </code>
      ï¼šéœ€è¦æ¸²æŸ“ 6 ä¸ªæ–¹å‘çš„é˜´å½±ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ã€‚
     </li>
     <li id="u95726403">
      <code>
       <strong>
        shadow.camera.near/far
       </strong>
      </code>
      ï¼šä¼˜åŒ–é˜´å½±æŠ•å°„èŒƒå›´ï¼Œé¿å…æ€§èƒ½æµªè´¹ã€‚
     </li>
    </ul>
    <hr id="DGZ6V"/>
    <h3 id="f8e8972c">
     <strong>
      6ï¸âƒ£
     </strong>
     <strong>
      ä»£ç åˆ†æï¼šé˜´å½±è´´å›¾
     </strong>
    </h3>
    <pre id="Lxrla"><code>const textureLoader = new THREE.TextureLoader();
const bakedShadow = textureLoader.load('texture/shadow/bakedShadow.jpg');
const simpleShadow = textureLoader.load('texture/shadow/simpleShadow.jpg');</code></pre>
    <p id="u9b69c553">
     ğŸ“Œ
     <strong>
      é‡ç‚¹çŸ¥è¯†
     </strong>
    </p>
    <ul>
     <li id="ua68f96aa">
      <strong>
       é¢„æ¸²æŸ“é˜´å½±è´´å›¾ï¼ˆBaked Shadowï¼‰
      </strong>
      ï¼šé¿å…å®æ—¶è®¡ç®—é˜´å½±ï¼Œæé«˜æ€§èƒ½ã€‚
     </li>
     <li id="u7b6e568e">
      <strong>
       é€æ˜é˜´å½±ï¼ˆSimple Shadowï¼‰
      </strong>
      ï¼š
     </li>
    </ul>
    <pre id="Q5oa4"><code>new THREE.MeshBasicMaterial({
    color: 0x000000,
    transparent: true,
    alphaMap: simpleShadow
})</code></pre>
    <ul>
     <li>
      <ul>
       <li id="u27fa4532">
        <code>
         transparent: true
        </code>
        è®©é»‘è‰²åŒºåŸŸå¯è§ï¼Œç™½è‰²åŒºåŸŸé€æ˜ã€‚
       </li>
       <li id="uddd08279">
        <code>
         alphaMap
        </code>
        è®©é˜´å½±è´´å›¾åº”ç”¨åˆ°
        <code>
         PlaneGeometry
        </code>
        ã€‚
       </li>
      </ul>
     </li>
    </ul>
    <hr id="nupD4"/>
    <h3 id="3cd9c259">
     <strong>
      7ï¸âƒ£
     </strong>
     <strong>
      ä»£ç åˆ†æï¼šçƒä½“é˜´å½±
     </strong>
    </h3>
    <pre id="U0U7j"><code>sphereshadow.rotation.x = -Math.PI * 0.5;
sphereshadow.position.y = plane.position.y + 0.01;
scene.add(sphere, plane, sphereshadow);</code></pre>
    <p id="ue9c3f5d0">
     ğŸ“Œ
     <strong>
      é‡ç‚¹çŸ¥è¯†
     </strong>
    </p>
    <ul>
     <li id="u3802e5b1">
      <strong>
       æ‰‹åŠ¨è°ƒæ•´é˜´å½±ä½ç½®
      </strong>
      é¿å…é˜´å½±å’Œåœ°é¢é‡å å¯¼è‡´è§†è§‰é”™è¯¯ã€‚
     </li>
     <li id="u4411a651">
      <strong>
       åŠ¨æ€æ”¹å˜é˜´å½±é€æ˜åº¦
      </strong>
      ï¼š
     </li>
    </ul>
    <pre id="J0ywz"><code>sphereshadow.material.opacity = 1 - sphere.position.y * 0.3;</code></pre>
    <ul>
     <li>
      <ul>
       <li id="u0fd59ac5">
        çƒä½“è¶Šé«˜ï¼Œé˜´å½±è¶Šæ·¡ï¼Œå®ç°â€œåŠ¨æ€é˜´å½±â€æ•ˆæœã€‚
       </li>
      </ul>
     </li>
    </ul>
    <hr id="vTvup"/>
    <h3 id="e910358a">
     <strong>
      8ï¸âƒ£
     </strong>
     <strong>
      ä»£ç åˆ†æï¼šé˜´å½±ä¼˜åŒ–
     </strong>
    </h3>
    <pre id="djfXo"><code>renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;</code></pre>
    <p id="u2f60e36d">
     ğŸ“Œ
     <strong>
      é‡ç‚¹çŸ¥è¯†
     </strong>
    </p>
    <ul>
     <li id="u70aa99ac">
      <code>
       <strong>
        PCFSoftShadowMap
       </strong>
      </code>
      ï¼šæä¾›å¹³æ»‘æŸ”å’Œçš„é˜´å½±ã€‚
     </li>
     <li id="u5acdd93a">
      <code>
       <strong>
        setPixelRatio(Math.min(window.devicePixelRatio, 2))
       </strong>
      </code>
      ï¼šé™åˆ¶åƒç´ æ¯”ï¼Œå¹³è¡¡æ¸…æ™°åº¦å’Œæ€§èƒ½ã€‚
     </li>
    </ul>
    <hr id="YLxUe"/>
    <h3 id="1700040e">
     <strong>
      ğŸ”š
     </strong>
     <strong>
      æ€»ç»“
     </strong>
    </h3>
    <table id="fnuYV">
     <tbody>
      <tr>
       <td>
        <p id="u0cea7f22">
         çŸ¥è¯†ç‚¹
        </p>
       </td>
       <td>
        <p id="u607f7fec">
         å…³é”®å‚æ•°
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u85568503">
         <strong>
          å¼€å¯é˜´å½±
         </strong>
        </p>
       </td>
       <td>
        <p id="udd428138">
         <code>
          renderer.shadowMap.enabled = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ua9fa543c">
         <strong>
          å…‰æºæŠ•å°„é˜´å½±
         </strong>
        </p>
       </td>
       <td>
        <p id="u549656b1">
         <code>
          light.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u69dcc27f">
         <strong>
          ç‰©ä½“æŠ•å°„é˜´å½±
         </strong>
        </p>
       </td>
       <td>
        <p id="u39ff6ab6">
         <code>
          mesh.castShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u223e8794">
         <strong>
          ç‰©ä½“æ¥æ”¶é˜´å½±
         </strong>
        </p>
       </td>
       <td>
        <p id="ud5f43eda">
         <code>
          mesh.receiveShadow = true
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="ud74981bc">
         <strong>
          ä¼˜åŒ–é˜´å½±
         </strong>
        </p>
       </td>
       <td>
        <p id="u33047f14">
         <code>
          shadow.mapSize
         </code>
        </p>
        <p id="u3ff231ed">
         ,
         <code>
          shadow.camera.near/far
         </code>
        </p>
       </td>
      </tr>
      <tr>
       <td>
        <p id="u3ccd06bb">
         <strong>
          æ‰‹åŠ¨ä¼˜åŒ–é˜´å½±æ•ˆæœ
         </strong>
        </p>
       </td>
       <td>
        <p id="u739ea499">
         é¢„æ¸²æŸ“è´´å›¾ (
         <code>
          bakedShadow
         </code>
        </p>
        <p id="u3b4c2d4c">
         ),
         <code>
          PCFSoftShadowMap
         </code>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p id="ub5d83063">
     ğŸš€ é€šè¿‡åˆç†è°ƒæ•´è¿™äº›å‚æ•°ï¼Œå¯ä»¥è®© Three.js çš„é˜´å½±æ›´åŠ é€¼çœŸã€æŸ”å’Œï¼ŒåŒæ—¶å…¼é¡¾æ€§èƒ½ä¼˜åŒ–ï¼
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f37393433363033392f:61727469636c652f64657461696c732f313436323735303235" class_="artid" style="display:none">
 </p>
</div>


