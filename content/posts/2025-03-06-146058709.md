---
layout: post
title: "Unity网络开发基础-2-网络协议基础"
date: 2025-03-06 09:26:09 +0800
description: "仅作框架认识"
keywords: "Unity网络开发基础 (2) 网络协议基础"
categories: ['网络开发基础', 'Unity']
tags: ['网络', 'Unity', 'C']
artid: "146058709"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146058709
    alt: "Unity网络开发基础-2-网络协议基础"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146058709
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146058709
cover: https://bing.ee123.net/img/rand?artid=146058709
image: https://bing.ee123.net/img/rand?artid=146058709
img: https://bing.ee123.net/img/rand?artid=146058709
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Unity网络开发基础 (2) 网络协议基础
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <blockquote>
     <p>
      本文章不作任何商业用途 仅作学习与交流 部分图片来自Unity唐老师
     </p>
    </blockquote>
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <h2 id="1.%E8%99%9A%E6%8B%9F%E6%A8%A1%E5%9E%8B" name="1.%E8%99%9A%E6%8B%9F%E6%A8%A1%E5%9E%8B" style="background-color:transparent">
     1.虚拟模型
    </h2>
    <p>
     OSI 模型是理论框架
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         层次
        </strong>
       </th>
       <th>
        <strong>
         功能
        </strong>
       </th>
       <th>
        <strong>
         协议 / 技术示例
        </strong>
       </th>
       <th>
        <strong>
         数据单元
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         应用层
        </strong>
       </td>
       <td>
        为用户提供直接服务（如文件传输、电子邮件、Web 浏览）。
       </td>
       <td>
        HTTP、FTP、SMTP、DNS
       </td>
       <td>
        数据（Data）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         表示层
        </strong>
       </td>
       <td>
        处理数据格式转换、加密解密、压缩解压缩。
       </td>
       <td>
        SSL/TLS、ASCII、JPEG
       </td>
       <td>
        数据（Data）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         会话层
        </strong>
       </td>
       <td>
        管理通信会话的建立、维护和终止。
       </td>
       <td>
        NetBIOS、RPC
       </td>
       <td>
        数据（Data）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         传输层
        </strong>
       </td>
       <td>
        提供端到端的可靠或不可靠传输，确保数据完整性。
       </td>
       <td>
        TCP、UDP
       </td>
       <td>
        段（Segment）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         网络层
        </strong>
       </td>
       <td>
        负责路由选择和数据包转发，实现不同网络之间的通信。
       </td>
       <td>
        IP、ICMP、ARP
       </td>
       <td>
        数据包（Packet）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         数据链路层
        </strong>
       </td>
       <td>
        处理相邻节点间的数据帧传输，提供错误检测和纠正。
       </td>
       <td>
        Ethernet、PPP、MAC 地址
       </td>
       <td>
        帧（Frame）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         物理层
        </strong>
       </td>
       <td>
        定义物理介质（如电缆、光纤）的电气、机械特性，传输比特流。
       </td>
       <td>
        RJ45、IEEE 802.3
       </td>
       <td>
        比特（Bit）
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     大概做了什么
     <img alt="" height="832" src="https://i-blog.csdnimg.cn/direct/f9b8f2fcd8a5478691b82a03f28267bd.png" width="1639">
     </img>
    </p>
    <h2 id="2.%E5%AE%9E%E9%99%85%E6%A8%A1%E5%9E%8B%20TCP%2FIP" name="2.%E5%AE%9E%E9%99%85%E6%A8%A1%E5%9E%8B%20TCP%2FIP">
     2.实际模型 TCP/IP
    </h2>
    <p>
     TCP/IP 模型是实际网络通信中广泛使用的协议栈
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         TCP/IP 模型
        </strong>
       </th>
       <th>
        <strong>
         OSI 模型
        </strong>
       </th>
       <th>
        <strong>
         功能
        </strong>
       </th>
       <th>
        <strong>
         协议 / 技术示例
        </strong>
       </th>
       <th>
        <strong>
         数据单元
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         应用层
        </strong>
       </td>
       <td>
        应用层、表示层、会话层
       </td>
       <td>
        提供用户服务（如 Web 浏览、邮件）、数据格式处理、会话管理。
       </td>
       <td>
        HTTP、FTP、SMTP、DNS
       </td>
       <td>
        数据（Data）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         传输层
        </strong>
       </td>
       <td>
        传输层
       </td>
       <td>
        端到端的数据传输，确保可靠性或效率。
       </td>
       <td>
        TCP、UDP
       </td>
       <td>
        段（Segment）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         网络层
        </strong>
       </td>
       <td>
        网络层
       </td>
       <td>
        路由选择和数据包转发，实现跨网络通信。
       </td>
       <td>
        IP、ICMP、ARP
       </td>
       <td>
        数据包（Packet）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         网络接口层
        </strong>
       </td>
       <td>
        数据链路层、物理层
       </td>
       <td>
        物理介质的比特流传输，数据帧的组帧与传输。
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     每层职能
     <img alt="" height="1012" src="https://i-blog.csdnimg.cn/direct/09371607cbf748b48489c5ec46ede410.png" width="2217"/>
    </p>
    <p>
     其协议
    </p>
    <p>
     <img alt="" height="966" src="https://i-blog.csdnimg.cn/direct/f5c168fb52b245c4aacba4561c625be9.png" width="1624">
     </img>
    </p>
    <h2 id="3.%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%20TCP%2FUDP" name="3.%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%20TCP%2FUDP">
     3.传输层协议 TCP/UDP
    </h2>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特性
        </strong>
       </th>
       <th>
        <strong>
         TCP（传输控制协议）
        </strong>
       </th>
       <th>
        <strong>
         UDP（用户数据报协议）
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         连接性
        </strong>
       </td>
       <td>
        面向连接（需三次握手建立连接）
       </td>
       <td>
        无连接（无需建立连接）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         可靠性
        </strong>
       </td>
       <td>
        可靠传输（保证顺序、无丢失、无重复）
       </td>
       <td>
        不可靠传输（不保证到达或顺序）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         传输方式
        </strong>
       </td>
       <td>
        流式传输（按字节流处理）
       </td>
       <td>
        数据报传输（按独立数据包处理）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         头部大小
        </strong>
       </td>
       <td>
        固定 20 字节（最小）
       </td>
       <td>
        固定 8 字节
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         流量控制
        </strong>
       </td>
       <td>
        支持（通过滑动窗口）
       </td>
       <td>
        不支持
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         拥塞控制
        </strong>
       </td>
       <td>
        支持（避免网络拥塞）
       </td>
       <td>
        不支持
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         端口号
        </strong>
       </td>
       <td>
        使用 16 位端口号区分应用
       </td>
       <td>
        同样使用 16 位端口号
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         典型应用
        </strong>
       </td>
       <td>
        HTTP、HTTPS、SMTP、FTP、SSH
       </td>
       <td>
        DNS、视频流、实时游戏、语音通话（VoI
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
    <h3 id="TCP%20%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3" name="TCP%20%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3" style="background-color:transparent">
     <strong>
      TCP 协议详解
     </strong>
    </h3>
    <h5 id="1.%20%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6" name="1.%20%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6">
     <strong>
      1. 核心机制
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       三次握手
      </strong>
      ：
      <br/>
      建立连接时，客户端和服务器通过
      <code>
       SYN
      </code>
      、
      <code>
       SYN-ACK
      </code>
      、
      <code>
       ACK
      </code>
      三个报文确认连接
     </li>
     <li>
      <img alt="" height="977" src="https://i-blog.csdnimg.cn/direct/5f1bd1dd7d584c019d3ff20da79f3777.png" width="2036"/>
     </li>
     <li>
      <strong>
       四次挥手
      </strong>
      ：
      <br/>
      关闭连接时，双方通过
      <code>
       FIN
      </code>
      、
      <code>
       ACK
      </code>
      、
      <code>
       FIN
      </code>
      、
      <code>
       ACK
      </code>
      四个报文释放资源
     </li>
     <li>
      <img alt="" height="1006" src="https://i-blog.csdnimg.cn/direct/3dc3afa7654d41bbaff0471195af82ad.png" width="1966"/>
     </li>
     <li>
      <strong>
       滑动窗口
      </strong>
      ：
      <br/>
      通过动态调整发送窗口大小实现流量控制，避免接收方过载。
     </li>
     <li>
      <strong>
       重传机制
      </strong>
      ：
      <br/>
      超时未收到确认时，重传丢失的数据包。
     </li>
    </ul>
    <h5 id="2.%20%E5%A4%B4%E9%83%A8%E6%A0%BC%E5%BC%8F%EF%BC%8820%20%E5%AD%97%E8%8A%82%E6%9C%80%E5%B0%8F%EF%BC%89" name="2.%20%E5%A4%B4%E9%83%A8%E6%A0%BC%E5%BC%8F%EF%BC%8820%20%E5%AD%97%E8%8A%82%E6%9C%80%E5%B0%8F%EF%BC%89">
     <strong>
      2. 头部格式（20 字节最小）
     </strong>
    </h5>
    <table>
     <thead>
      <tr>
       <th>
        字段
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        源端口号
       </td>
       <td>
        发送方端口（16 位）
       </td>
      </tr>
      <tr>
       <td>
        目标端口号
       </td>
       <td>
        接收方端口（16 位）
       </td>
      </tr>
      <tr>
       <td>
        序号
       </td>
       <td>
        数据字节流编号（32 位）
       </td>
      </tr>
      <tr>
       <td>
        确认号
       </td>
       <td>
        期望接收的下一个字节编号（32 位）
       </td>
      </tr>
      <tr>
       <td>
        数据偏移
       </td>
       <td>
        头部长度（4 位）
       </td>
      </tr>
      <tr>
       <td>
        标志位
       </td>
       <td>
        SYN、ACK、FIN、RST 等控制位（9 位）
       </td>
      </tr>
      <tr>
       <td>
        窗口大小
       </td>
       <td>
        接收方允许的最大数据量（16 位）
       </td>
      </tr>
      <tr>
       <td>
        校验和
       </td>
       <td>
        检测数据传输错误（16 位）
       </td>
      </tr>
      <tr>
       <td>
        紧急指针
       </td>
       <td>
        紧急数据位置（16 位，可选）
       </td>
      </tr>
     </tbody>
    </table>
    <h3 id="UDP%20%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3" name="UDP%20%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3" style="background-color:transparent">
     <strong>
      UDP 协议详解
     </strong>
    </h3>
    <h5 id="1.%20%E6%A0%B8%E5%BF%83%E7%89%B9%E7%82%B9" name="1.%20%E6%A0%B8%E5%BF%83%E7%89%B9%E7%82%B9">
     <strong>
      1. 核心特点
     </strong>
    </h5>
    <ul>
     <li>
      <strong>
       简单高效
      </strong>
      ：无连接、无确认、无重传，适合实时性要求高的场景。
     </li>
     <li>
      <strong>
       资源消耗低
      </strong>
      ：头部仅 8 字节，处理速度快。
     </li>
     <li>
      <strong>
       尽最大努力交付
      </strong>
      ：不保证可靠性，但可通过上层协议（如 RTP）补充可靠性。
     </li>
    </ul>
    <h5 id="2.%20%E5%A4%B4%E9%83%A8%E6%A0%BC%E5%BC%8F%EF%BC%88%E5%9B%BA%E5%AE%9A%208%20%E5%AD%97%E8%8A%82%EF%BC%89" name="2.%20%E5%A4%B4%E9%83%A8%E6%A0%BC%E5%BC%8F%EF%BC%88%E5%9B%BA%E5%AE%9A%208%20%E5%AD%97%E8%8A%82%EF%BC%89">
     <strong>
      2. 头部格式（固定 8 字节）
     </strong>
    </h5>
    <table>
     <thead>
      <tr>
       <th>
        字段
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        源端口号
       </td>
       <td>
        发送方端口（16 位）
       </td>
      </tr>
      <tr>
       <td>
        目标端口号
       </td>
       <td>
        接收方端口（16 位）
       </td>
      </tr>
      <tr>
       <td>
        长度
       </td>
       <td>
        UDP 数据报总长度（16 位）
       </td>
      </tr>
      <tr>
       <td>
        校验和
       </td>
       <td>
        可选的错误检测（16 位）
       </td>
      </tr>
     </tbody>
    </table>
    <h3 id="%E9%80%89%E6%8B%A9%20TCP%20%E6%88%96%20UDP%20%E7%9A%84%E4%BE%9D%E6%8D%AE" name="%E9%80%89%E6%8B%A9%20TCP%20%E6%88%96%20UDP%20%E7%9A%84%E4%BE%9D%E6%8D%AE" style="background-color:transparent">
     <strong>
      选择 TCP 或 UDP 的依据
     </strong>
    </h3>
    <ul>
     <li>
      <strong>
       选 TCP
      </strong>
      ：
      <ul>
       <li>
        需要可靠性（如文件传输、Web 浏览）。
       </li>
       <li>
        对延迟不敏感（如邮件发送）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       选 UDP
      </strong>
      ：
      <ul>
       <li>
        实时性优先（如视频会议、在线游戏）。
       </li>
       <li>
        数据量小或可接受少量丢失（如 DNS 查询）。
       </li>
      </ul>
     </li>
    </ul>
    <h3 id="%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B" name="%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B" style="background-color:transparent">
     <strong>
      实际应用示例
     </strong>
    </h3>
    <ol>
     <li>
      <strong>
       视频通话
      </strong>
      ：
      <ul>
       <li>
        <strong>
         UDP
        </strong>
        ：低延迟，允许部分数据包丢失（丢包可通过画面模糊补偿）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       文件下载
      </strong>
      ：
      <ul>
       <li>
        <strong>
         TCP
        </strong>
        ：确保文件完整无误。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       DNS 查询
      </strong>
      ：
      <ul>
       <li>
        <strong>
         UDP
        </strong>
        ：单次查询无需建立连接，快速响应。
       </li>
      </ul>
     </li>
    </ol>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f37373934373530392f:61727469636c652f64657461696c732f313436303538373039" class_="artid" style="display:none">
 </p>
</div>


