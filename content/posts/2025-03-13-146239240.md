---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f616263313135323032383933362f:61727469636c652f64657461696c732f313436323339323430"
layout: post
title: "ArrayListåº•å±‚ç»“æ„å’Œæºç åˆ†æç¬”è®°"
date: 2025-03-13 18:27:35 +0800
description: "å¦‚æœä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œéœ€è¦æ‰©å®¹çš„è¯ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 10ï¼Œå¦‚æœéœ€è¦å†æ¬¡æ‰©å®¹çš„è¯ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 1.5 å€ã€‚å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸º 0 (jdk7æ˜¯10)å¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå®¹é‡å¤§å°çš„æ„é€ å™¨ï¼Œå¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™ç›´æ¥æ‰©å®¹ elementData ä¸º 1.5 å€ã€‚å½“æ·»åŠ å…ƒç´ æ—¶ï¼šå…ˆåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™è°ƒç”¨ grow æ–¹æ³•ï¼Œå¦åˆ™ç›´æ¥æ·»åŠ å…ƒç´ åˆ°åˆé€‚ä½ç½®ã€‚è¡¨ç¤ºè¯¥å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚"
keywords: "ArrayListåº•å±‚ç»“æ„å’Œæºç åˆ†æç¬”è®°"
categories: ['æœªåˆ†ç±»']
tags: ['ç¬”è®°', 'å¼€å‘è¯­è¨€', 'Java']
artid: "146239240"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146239240
    alt: "ArrayListåº•å±‚ç»“æ„å’Œæºç åˆ†æç¬”è®°"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146239240
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146239240
cover: https://bing.ee123.net/img/rand?artid=146239240
image: https://bing.ee123.net/img/rand?artid=146239240
img: https://bing.ee123.net/img/rand?artid=146239240
---

# ArrayListåº•å±‚ç»“æ„å’Œæºç åˆ†æç¬”è®°

å‚è€ƒè§†é¢‘ï¼š
[éŸ©é¡ºå¹³Javaé›†åˆ](https://www.bilibili.com/video/BV1YA411T76k?spm_id_from=333.788.videopod.episodes&vd_source=4dfc8cb4522320b273b785a2db6e20b3&p=13)

![image.png](https://i-blog.csdnimg.cn/img_convert/8ae5956844e8bafce6e89155f3ff3b01.png)

### ArrayListç‰¹ç‚¹

* ArrayList å¯ä»¥åŠ å…¥ nullï¼ŒåŒ…æ‹¬å¤šä¸ªã€‚
* ArrayList æ˜¯ç”±æ•°ç»„æ¥å®ç°æ•°æ®å­˜å‚¨çš„
* ArrayList åŸºæœ¬ç­‰åŒäº Vectorï¼Œé™¤äº† ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨ï¼ˆæ‰§è¡Œæ•ˆç‡é«˜ï¼‰ã€‚åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨ ArrayList

  + ä¾‹å¦‚ ArrayList çš„ add() çš„æºç ï¼šå¯ä»¥å‘ç°æ²¡æœ‰ synchronized å…³é”®è¯ä¿®é¥°

  ```java
  public boolean add(E e) {  
      modCount++;  
      add(e, elementData, size);  
      return true;  
  }

  ```

### ArrayList æºç åˆ†æï¼ˆé‡éš¾ç‚¹ğŸš©ï¼‰

1. ArrayList ä¸­ç»´æŠ¤äº†ä¸€ä¸ª Object ç±»å‹çš„æ•°ç»„ elementData
     
   `transient`
   æ„ä¸ºçŸ­æš‚çš„ï¼›è¡¨ç¤ºè¯¥å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–

   ```java
   transient Object[] elementData;

   ```
2. å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸º 0 (jdk7æ˜¯10)
3. å½“æ·»åŠ å…ƒç´ æ—¶ï¼šå…ˆåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™è°ƒç”¨ grow æ–¹æ³•ï¼Œå¦åˆ™ç›´æ¥æ·»åŠ å…ƒç´ åˆ°åˆé€‚ä½ç½®
4. å¦‚æœä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œéœ€è¦æ‰©å®¹çš„è¯ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 10ï¼Œå¦‚æœéœ€è¦å†æ¬¡æ‰©å®¹çš„è¯ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 1.5 å€ã€‚
5. å¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå®¹é‡å¤§å°çš„æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸ºæŒ‡å®šå¤§å°
6. å¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå®¹é‡å¤§å°çš„æ„é€ å™¨ï¼Œå¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™ç›´æ¥æ‰©å®¹ elementData ä¸º 1.5 å€ã€‚
     
   [[ArrayListæºç åˆ†æ]]

### æºç ç¤ºä¾‹

#### æœªæŒ‡å®šåˆå§‹å®¹é‡

æ³¨æ„å°† idea çš„è°ƒå¼å·¥å…·è®¾ç½®ä¸€ä¸‹ï¼Œä»¥ä¾¿æ›´å¥½çš„è§‚å¯Ÿæ•°æ®ï¼š
  
![image.png|575](https://i-blog.csdnimg.cn/img_convert/792282a562b37eee01c6a37b7e7e104e.png)

* æµ‹è¯•æºç ï¼š

  + è§‚å¯Ÿè°ƒç”¨æ„é€ å™¨ï¼Œåˆ›å»º ArrayList çš„å®ä¾‹çš„ç»†èŠ‚
  + è§‚å¯Ÿç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ ï¼ˆåˆæ¬¡æ‰©å®¹ï¼‰
  + è§‚å¯Ÿç¬¬äºŒæ¬¡æ·»åŠ å…ƒç´ ï¼ˆä¸ç”¨æ‰©å®¹ï¼‰
  + è§‚å¯Ÿç¬¬åä¸€æ¬¡æ·»åŠ å…ƒç´ ï¼ˆç¬¬äºŒæ¬¡æ‰©å®¹ï¼‰
  + è§‚å¯Ÿç¬¬åå…­æ¬¡æ·»åŠ å…ƒç´ ï¼ˆç¬¬ä¸‰æ¬¡æ‰©å®¹ï¼‰

  ```java
  @Test  
  public void test1(){  
      ArrayList list = new ArrayList();  
    
      for (int i = 11; i <= 20; i++) {  
          list.add(i);  
      }  
    
      for (int i = 21; i < 26; i++) {  
          list.add(i);  
      }  
    
      list.add(100);  
      list.add(200);  
      list.add(null);  
      System.out.println(list);  
  }

  ```

> åˆ›å»º ArrayList å®ä¾‹

* åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 0 çš„ç©ºæ•°ç»„ï¼Œå¹¶èµ‹ç»™ elementDataï¼ŒelementData å°±æ˜¯é›†åˆåº•å±‚å­˜å‚¨æ•°æ®çš„æ•°ç»„ã€‚
    
  ![image.png|650](https://i-blog.csdnimg.cn/img_convert/375bf135a0bd3bbbba1ab402375c01e5.png)

> ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ â€œ11â€

* å°† int æ•°æ®è¿›è¡Œè£…ç®±
* æ·»åŠ è¿™ä¸ªæ•°æ®â€œ11â€ï¼Œè¦ä¿è¯æ•°ç»„çš„é•¿åº¦è‡³å°‘ä¸ºå½“å‰å…ƒç´ æ•°+1ã€‚
  ï¼ˆsize+1=1ï¼‰
* `ensureCapacityInternal()`
  çš„ä½œç”¨å°±æ˜¯æ£€æŸ¥æ•°ç»„å¤Ÿä¸å¤Ÿæ­¤æ¬¡æ·»åŠ æ‰€éœ€çš„å®¹é‡ï¼Œå¦‚æœä¸å¤Ÿï¼Œåˆ™æ‰©å®¹ï¼Œæ›´æ”¹ elementData ï¼Œå°†å…¶ç”¨æ‰©å®¹åçš„æ•°ç»„æ›¿ä»£ã€‚
    
  ![image.png|600](https://i-blog.csdnimg.cn/img_convert/114a90c89d6b1034cdf6046bf2e006ea.png)
* `calculateCapacity()`
  çš„ä½œç”¨ä»…ä»…åœ¨äºï¼Œæ£€æŸ¥å½“å‰æ“ä½œæ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ æ•°æ®ã€‚å› ä¸ºç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ ï¼Œæ‰©å®¹æœºåˆ¶åº”è¯¥å°†å…¶æ‰©å®¹åˆ° 10ï¼ˆé™¤éè¦æ·»åŠ çš„å…ƒç´ æœ¬èº«éœ€è¦çš„å®¹é‡å¤§äº 10ï¼‰ã€‚
* è€Œå¯¹äºéç¬¬ä¸€æ¬¡æ·»åŠ çš„å…ƒç´ ï¼Œå…¶æ‰€éœ€å®¹é‡ä¾æ—§æ˜¯ä¼ è¿›æ¥çš„å‚æ•°
    
  ![image.png|650](https://i-blog.csdnimg.cn/img_convert/080fa0adaf82c6698fa74987539343fa.png)
    
  ![image.png|700](https://i-blog.csdnimg.cn/img_convert/7a517def90de8ef15f15026a720ddd39.png)
* é‚£ä¹ˆæ ¹æ®åˆ¤æ–­ï¼Œæ­¤æ¬¡æ˜¾ç„¶æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ ï¼Œæ•°ç»„ä¸ºç©ºæ•°ç»„ï¼Œä¸”æ‰€éœ€å®¹é‡ var1=1ï¼Œ<10ã€‚é‚£ä¹ˆæ­¤æ—¶
  var0=10
  ï¼Œè¿™å°±ç¡®å®šäº†æœ€ç»ˆæ•°ç»„æ‰€éœ€è¦çš„å®¹é‡å¤§å°ã€‚ä½œä¸ºå‚æ•°ä¼ é€’ç»™
  `ensureExplicitCapacity()`
  ä¸­ã€‚
    
  ![image.png|650](https://i-blog.csdnimg.cn/img_convert/165c39c374995b7c76fd20336c76f11d.png)
* modCount ä¸ºå½“å‰é›†åˆè¢«ä¿®æ”¹çš„æ¬¡æ•°ã€‚éœ€è¦è‡ªå¢ã€‚
* æœ€åè¿›è¡Œæ£€æŸ¥ï¼šç›®å‰æ•°ç»„çš„å®¹é‡ï¼ˆ
  `elementData.length`
  ï¼‰æ˜¯å¦æ»¡è¶³æ‰€éœ€è¦çš„å®¹é‡å¤§å°ï¼ˆ
  `var1`
  ï¼‰å‘¢ï¼Ÿ
* æ˜¾ç„¶ï¼Œç›®å‰çš„æ•°ç»„å¤§å°ä¸º 0ï¼Œè€Œæˆ‘ä»¬æ‰€éœ€è¦çš„å®¹é‡ä¸º 10ã€‚æ‰€ä»¥éœ€è¦æ‰©å®¹ã€‚è¿›å…¥åˆ°
  `grow()`
  ä¸­ï¼Œè¿›è¡ŒçœŸæ­£çš„æ‰©å®¹æ“ä½œã€‚
    
  ![image.png|600](https://i-blog.csdnimg.cn/img_convert/99aa758687fbb07a50146d5b336d7027.png)
* æ‰€éœ€çš„å®¹é‡å¤§å°ä¸º var1=10ï¼Œä½œä¸ºå‚æ•°ä¼ é€’è¿›æ¥ã€‚
* var2=æ•°ç»„ç›®å‰çš„å®¹é‡==ï¼ˆvar2=0ï¼‰==
* var3=æ‰©å®¹ä¸ºå½“å‰æ•°ç»„å®¹é‡çš„ 1.5 å€ï¼Œä¸è¿‡åœ¨åˆæ¬¡æ‰©å®¹ä¸­ï¼Œæ­¤æ¬¡æ“ä½œä¸èµ·ä½œç”¨==ï¼ˆvar3=0ï¼‰==
* åˆ¤æ–­æ‰©å®¹åçš„å®¹é‡å¤§å° var3 æ˜¯å¦æ»¡è¶³ï¼Œæ‰€éœ€çš„å¤§å° var1ï¼Œä¸æ»¡è¶³åˆ™ä¾ç…§ var1ã€‚
  ï¼ˆvar3=10ï¼‰
* åˆ¤æ–­æ‰©å®¹åçš„å®¹é‡æ˜¯å¦åœ¨æ•°ç»„çš„å–å€¼èŒƒå›´å†…ã€‚
* `Arrays.copyOf()`
  ï¼šåˆ›å»ºä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„==ï¼ˆ10ï¼‰==çš„æ•°ç»„ï¼Œå¹¶å°†åŸæ•°ç»„ä¸­çš„æ•°æ®æ‹·è´è‡³è¯¥æ•°ç»„ï¼Œå¹¶èµ‹å€¼ç»™
  `elementData`
  ã€‚
* è‡³æ­¤ï¼Œæ•°ç»„çš„æ‰©å®¹å®Œæˆï¼ˆelementData.length ä» 0 æ‰©å®¹åˆ° 10ï¼‰å›åˆ° add çš„ä¸»é€»è¾‘ä¸­ï¼š
    
  ![image.png|600](https://i-blog.csdnimg.cn/img_convert/114a90c89d6b1034cdf6046bf2e006ea.png)
* æ·»åŠ å…ƒç´ â€œ11â€æ·»åŠ åˆ°æ•°ç»„ elementData[0]ä¸­ï¼Œå¹¶ä¸” size=1ï¼›

> ç¬¬äºŒæ¬¡æ·»åŠ å…ƒç´ â€œ12â€ï¼ˆä¸ç”¨æ‰©å®¹ï¼‰

* å°† int æ•°æ®è¿›è¡Œè£…ç®±
* æ·»åŠ è¿™ä¸ªæ•°æ®â€œ12â€ï¼Œè¦ä¿è¯æ•°ç»„çš„é•¿åº¦è‡³å°‘ä¸ºå½“å‰å…ƒç´ æ•°+1ã€‚
  ï¼ˆsize+1=2ï¼‰
* `ensureCapacityInternal()`
  çš„ä½œç”¨å°±æ˜¯æ£€æŸ¥æ•°ç»„æ˜¯å¦å¤§äºç­‰äº 2ï¼ˆå¤Ÿä¸å¤Ÿæ­¤æ¬¡æ·»åŠ æ‰€éœ€çš„å®¹é‡ï¼‰ã€‚å¦‚æœä¸å¤Ÿï¼Œåˆ™æ‰©å®¹ï¼Œæ›´æ”¹ elementData ï¼Œå°†å…¶ç”¨æ‰©å®¹åçš„æ•°ç»„æ›¿ä»£ã€‚
    
  ![image.png|600](https://i-blog.csdnimg.cn/img_convert/d2e55f5f285ad12d363ac782656a7a4a.png)
* æ­¤æ—¶ç”±äºä¸æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ ï¼Œæ•°ç»„é•¿åº¦ä¸ä¸º 0ï¼Œæ‰€ä»¥
  `calculateCapacity()`
  æ‰§è¡Œåè¿”å›
  2
  ã€‚
    
  ![image.png|600](https://i-blog.csdnimg.cn/img_convert/2f3b51a461a5fddb738860b232d4cf66.png)
    
  ![image.png|700](https://i-blog.csdnimg.cn/img_convert/7a517def90de8ef15f15026a720ddd39.png)
* é›†åˆä¿®æ”¹æ¬¡æ•°+1
* å½“å‰æ•°ç»„é•¿åº¦==ï¼ˆelementData.length=10ï¼‰
  æ»¡è¶³æ‰€éœ€é•¿åº¦
  (var1=2)==ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰©å®¹ã€‚
    
  ![image.png|550](https://i-blog.csdnimg.cn/img_convert/190cbd701453a98127e73b6fede707cc.png)
* å›åˆ°ä¸»é€»è¾‘ä¸­ï¼š
    
  ![image.png|600](https://i-blog.csdnimg.cn/img_convert/d2e55f5f285ad12d363ac782656a7a4a.png)
* elementData[1]å­˜æ”¾ var1ã€‚size å˜ä¸º 2ã€‚

> è§‚å¯Ÿç¬¬åä¸€æ¬¡æ·»åŠ å…ƒç´ ï¼ˆç¬¬äºŒæ¬¡æ‰©å®¹ï¼‰

* æ­¤æ—¶æ•°ç»„å®¹é‡ä¸º
  elementData.length=10
  ï¼Œæ‰€éœ€å®¹é‡å¤§å°ä¸º
  var1=11
  ï¼Œåœ¨è¿™ä¸€æ­¥æ—¶ï¼Œå®¹é‡ä¸å¤Ÿï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œæ‰©å®¹ï¼Œè¿›å…¥
  `grow()`
  ã€‚
    
  ![image.png|650](https://i-blog.csdnimg.cn/img_convert/165c39c374995b7c76fd20336c76f11d.png)
* var2=10ï¼Œvar3=15ï¼ˆæ‰©å®¹ 1.5 å€ï¼‰
    
  ![image.png|600](https://i-blog.csdnimg.cn/img_convert/99aa758687fbb07a50146d5b336d7027.png)

> åŒç†ï¼Œåé¢æ¯ä¸€æ¬¡æ·»åŠ å’Œæ‰©å®¹éƒ½ä¸ä»¥ä¸Šçš„æ­¥éª¤ä¸€è‡´ã€‚

#### æŒ‡å®šåˆå§‹å®¹é‡

* ä¸æœªæŒ‡å®šçš„åŒºåˆ«åœ¨äºï¼Œè°ƒç”¨çš„æ˜¯å¸¦å‚çš„æ„é€ å™¨ã€‚
* æŒ‡å®šäº†åˆå§‹å®¹é‡ var1ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªåˆå§‹å®¹é‡ä¸º var1 çš„æ•°ç»„ã€‚å¦‚æœæœ¬èº«ä¸º 0ï¼Œå°±ä»æ—§èµ‹å€¼ä¸ºç©ºæ•°ç»„ï¼ˆä¸æ— å‚çš„ä¸€è‡´ï¼‰
* åœ¨ä¹‹åçš„æ‰©å®¹ä¸­ï¼Œä¾æ—§æ˜¯æŒ‰ç…§ 1.5 å€æ‰©å®¹ã€‚
* ä¾‹å¦‚æŒ‡å®šåˆå§‹å®¹é‡ä¸º 8ï¼Œåˆ™åˆæ¬¡æ‰©å®¹ä¸º 8->12
    
  ![image.png](https://i-blog.csdnimg.cn/img_convert/6721fa71f64c5c1681dbc17b890ca42a.png)