---
layout: post
title: "苍穹外卖SpringBoot后端开发项目重点知识整理DAY1-to-DAY3"
date: 2025-03-09 23:01:06 +0800
description: "《苍穹外卖》SpringBoot后端开发项目重点知识整理"
keywords: "《苍穹外卖》SpringBoot后端开发项目重点知识整理（DAY1 to DAY3）"
categories: ['Java']
tags: ['苍穹外卖', '后端', 'Spring', 'Java', 'Boot']
artid: "146137835"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146137835
    alt: "苍穹外卖SpringBoot后端开发项目重点知识整理DAY1-to-DAY3"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146137835
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146137835
cover: https://bing.ee123.net/img/rand?artid=146137835
image: https://bing.ee123.net/img/rand?artid=146137835
img: https://bing.ee123.net/img/rand?artid=146137835
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     《苍穹外卖》SpringBoot后端开发项目重点知识整理（DAY1 to DAY3）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <p>
     视频链接：
     <a href="https://www.bilibili.com/video/BV1TP411v7v6?p=48&amp;vd_source=a0d3c012b65051968bea79dec15d50cd" rel="nofollow">
      黑马程序员Java项目实战《苍穹外卖》，最适合新手的SpringBoot+SSM的企业级Java项目实战
     </a>
     <br/>
     网盘资料：
     <a href="https://pan.baidu.com/s/1MNDzXyVlr3mtmLgBjcPJVw&amp;pwd=6633" rel="nofollow">
      苍穹外卖讲义&amp;前后端源码
     </a>
    </p>
    <hr/>
    <h2>
     <a id="Nginx_7">
     </a>
     一、在本地部署并启动Nginx服务
    </h2>
    <p>
     在开发过程中，我们经常需要使用Nginx来部署前端项目或作为反向代理服务器。
    </p>
    <h3>
     <a id="1_Nginx_13">
     </a>
     1. 解压Nginx压缩包
    </h3>
    <p>
     首先，确保你已经从黑马程序员资料中下载了Nginx的压缩包。接下来，按照以下步骤解压：
    </p>
    <p>
     <strong>
      选择解压路径
     </strong>
     ：
    </p>
    <ul>
     <li>
      将Nginx压缩包解压到一个
      <strong>
       全英文路径
      </strong>
      中。例如：
      <pre><code>D:\nginx
</code></pre>
     </li>
     <li>
      <strong>
       注意
      </strong>
      ：路径中不要包含中文或特殊字符，否则可能会导致Nginx无法正常运行。
     </li>
    </ul>
    <h3>
     <a id="2_Nginx_25">
     </a>
     2. 启动Nginx服务
    </h3>
    <p>
     解压完成后，按照以下步骤启动Nginx：
    </p>
    <p>
     <strong>
      进入Nginx目录
     </strong>
     ：
    </p>
    <ul>
     <li>
      打开解压后的Nginx文件夹，找到
      <code>
       nginx.exe
      </code>
      文件。路径通常为：
      <pre><code>C:\nginx\nginx.exe
</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      启动Nginx
     </strong>
     ：
    </p>
    <ul>
     <li>
      双击
      <code>
       nginx.exe
      </code>
      文件，启动Nginx服务。
     </li>
     <li>
      启动后，Nginx会在后台运行，你可以在任务管理器中看到
      <code>
       nginx.exe
      </code>
      进程。
     </li>
    </ul>
    <h3>
     <a id="3_Nginx_39">
     </a>
     3. 验证Nginx是否启动成功：
    </h3>
    <ul>
     <li>
      打开浏览器，访问以下地址（其中80是默认端口可省略不写）：
      <pre><code>http://localhost:80
</code></pre>
     </li>
     <li>
      如果看到此页面，说明Nginx已成功启动。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a11402df086645969bdfb4cf1927e63c.png"/>
     </li>
     <li>
      <strong>
       注意
      </strong>
      ：Nginx默认不会随系统自动启动，因此每次重启电脑后，都需要手动启动Nginx
     </li>
    </ul>
    <hr/>
    <h2>
     <a id="_49">
     </a>
     二、导入接口文档
    </h2>
    <p>
     在开发过程中，接口管理平台是团队协作和项目管理的重要工具。以下是几个常用平台的对比：
    </p>
    <h3>
     <a id="1_YApi_52">
     </a>
     1. 黑马程序员提供的YApi平台
    </h3>
    <ul>
     <li>
      地址：
      <a href="http://yapi.smart-xwork.cn/" rel="nofollow">
       http://yapi.smart-xwork.cn/
      </a>
     </li>
     <li>
      状态：已弃用
     </li>
     <li>
      功能：适合用于接口管理和文档生成。
     </li>
    </ul>
    <h3>
     <a id="2_YApi_Pro_57">
     </a>
     2. YApi Pro平台
    </h3>
    <ul>
     <li>
      地址：
      <a href="https://yapi.pro/" rel="nofollow">
       https://yapi.pro/
      </a>
     </li>
     <li>
      问题：需要挂梯子才能访问，且极易卡顿，使用体验不佳。
     </li>
    </ul>
    <h3>
     <a id="3_Apifox_61">
     </a>
     3. 推荐工具：Apifox
    </h3>
    <ul>
     <li>
      地址：
      <a href="https://apifox.com/" rel="nofollow">
       https://apifox.com/
      </a>
     </li>
     <li>
      优势：
      <ul>
       <li>
        无需梯子即可访问。
       </li>
       <li>
        性能流畅，支持接口文档、Mock数据、自动化测试等功能。
       </li>
       <li>
        支持导入YApi数据格式的接口文档，方便无缝迁移现有项目。
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d94462821de6467ea21e9edb65f15bef.png"/>
    </p>
    <hr/>
    <h2>
     <a id="Swagger_72">
     </a>
     三、Swagger
    </h2>
    <p>
     Swagger 是一种用于设计、构建、记录和使用 RESTful Web 服务的开源框架。它提供了一套工具，帮助开发者设计、构建、文档化和测试 API。
    </p>
    <p>
     启动服务：访问
     <a href="http://localhost:8080/doc.html" rel="nofollow">
      http://localhost:8080/doc.html
     </a>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0af8c9415f5b48b0a93d6cd04d73e796.png"/>
    </p>
    <h3>
     <a id="1__77">
     </a>
     1. 常用注解
    </h3>
    <p>
     通过注解可以控制生成的接口文档，使接口文档拥有更好的可读性，常用注解如下：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         注解
        </strong>
       </th>
       <th>
        <strong>
         说明
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        @Api
       </td>
       <td>
        用在类上，例如Controller，表示对类的说明
       </td>
      </tr>
      <tr>
       <td>
        @ApiModel
       </td>
       <td>
        用在类上，例如entity、DTO、VO
       </td>
      </tr>
      <tr>
       <td>
        @ApiModelProperty
       </td>
       <td>
        用在属性上，描述属性信息
       </td>
      </tr>
      <tr>
       <td>
        @ApiOperation
       </td>
       <td>
        用在方法上，例如Controller的方法，说明方法的用途、作用
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="11_ApiApiModel_86">
     </a>
     1.1 @Api与@ApiModel
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9016b31a050a43409ba7d9248a65f765.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6f83686e90d3458196293a2d712d5de8.png"/>
    </p>
    <h4>
     <a id="12_ApiModelPropertyApiOperation_90">
     </a>
     1.2 @ApiModelProperty与@ApiOperation
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cfcd97055695493891f9b03a50a28fd5.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/514e516f68184e97ae6a2c77402cab8a.png"/>
     </img>
    </p>
    <hr/>
    <h2>
     <a id="JWTThreadLocalID_96">
     </a>
     四、基于JWT和ThreadLocal动态获取员工ID
    </h2>
    <p>
     在开发员工管理系统时，新增员工时需要记录创建人和修改人的ID。如果直接使用固定值，会导致数据不准确。本文将介绍如何通过JWT和ThreadLocal动态获取当前登录员工的ID，并实现数据的准确记录。
    </p>
    <p>
     在新增员工时，创建人和修改人的ID被硬编码为固定值（如10），这会导致数据不准确，无法真实反映操作者。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">EmployeeDTO</span> employeeDTO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    employee<span class="token punctuation">.</span><span class="token function">setCreateUser</span><span class="token punctuation">(</span><span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 固定值</span>
    employee<span class="token punctuation">.</span><span class="token function">setUpdateUser</span><span class="token punctuation">(</span><span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 固定值</span>
    employeeMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="1_JWTID_113">
     </a>
     1. 使用JWT获取当前登录员工ID
    </h3>
    <p>
     员工登录成功后，系统会生成JWT令牌并返回给前端。JWT中包含了当前登录员工的ID信息。
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EmployeeLoginVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">EmployeeLoginDTO</span> employeeLoginDTO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 登录成功后生成JWT</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">JwtClaimsConstant</span><span class="token punctuation">.</span><span class="token constant">EMP_ID</span><span class="token punctuation">,</span> employee<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">createJWT</span><span class="token punctuation">(</span>jwtProperties<span class="token punctuation">.</span><span class="token function">getAdminSecretKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> jwtProperties<span class="token punctuation">.</span><span class="token function">getAdminTtl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> claims<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>employeeLoginVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="2_JWT_128">
     </a>
     2. 通过拦截器解析JWT
    </h3>
    <p>
     在每次请求时，前端会携带JWT令牌。通过拦截器解析JWT，获取当前登录员工的ID。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span>jwtProperties<span class="token punctuation">.</span><span class="token function">getAdminTokenName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Claims</span> claims <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">parseJWT</span><span class="token punctuation">(</span>jwtProperties<span class="token punctuation">.</span><span class="token function">getAdminSecretKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Long</span> empId <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>claims<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">JwtClaimsConstant</span><span class="token punctuation">.</span><span class="token constant">EMP_ID</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BaseContext</span><span class="token punctuation">.</span><span class="token function">setCurrentId</span><span class="token punctuation">(</span>empId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将ID存入ThreadLocal</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="3_ThreadLocalID_147">
     </a>
     3. 使用ThreadLocal传递员工ID
    </h3>
    <p>
     通过ThreadLocal实现线程隔离，将当前登录员工的ID传递给Service层。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaseContext</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> threadLocal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setCurrentId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        threadLocal<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Long</span> <span class="token function">getCurrentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> threadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">removeCurrentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        threadLocal<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="4_ServiceID_169">
     </a>
     4. 在Service中获取员工ID
    </h3>
    <p>
     在Service层中，从ThreadLocal中获取当前登录员工的ID，并设置为创建人和修改人。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">EmployeeDTO</span> employeeDTO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    employee<span class="token punctuation">.</span><span class="token function">setCreateUser</span><span class="token punctuation">(</span><span class="token class-name">BaseContext</span><span class="token punctuation">.</span><span class="token function">getCurrentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 动态获取当前登录员工ID</span>
    employee<span class="token punctuation">.</span><span class="token function">setUpdateUser</span><span class="token punctuation">(</span><span class="token class-name">BaseContext</span><span class="token punctuation">.</span><span class="token function">getCurrentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 动态获取当前登录员工ID</span>
    employeeMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="DTO_182">
     </a>
     五、DTO的使用原因
    </h2>
    <p>
     在项目中，
     <code>
      Employee
     </code>
     是实体类（Entity），用于表示数据库中的员工记录，而
     <code>
      EmployeeDTO
     </code>
     是数据传输对象（DTO），用于在不同层之间传递数据。以下是使用 DTO 的主要原因和优势：
    </p>
    <h3>
     <a id="1__Employee_185">
     </a>
     1. 实体类 Employee
    </h3>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Builder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>           <span class="token comment">// 员工ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>   <span class="token comment">// 用户名</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>       <span class="token comment">// 姓名</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>   <span class="token comment">// 密码（敏感字段）</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>      <span class="token comment">// 手机号</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>        <span class="token comment">// 性别</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> idNumber<span class="token punctuation">;</span>   <span class="token comment">// 身份证号</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> status<span class="token punctuation">;</span>    <span class="token comment">// 状态</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span> <span class="token comment">// 创建时间（内部字段）</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> updateTime<span class="token punctuation">;</span> <span class="token comment">// 更新时间（内部字段）</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> createUser<span class="token punctuation">;</span>   <span class="token comment">// 创建人（内部字段）</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> updateUser<span class="token punctuation">;</span>   <span class="token comment">// 更新人（内部字段）</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="2_DTO_EmployeeDTO_220">
     </a>
     2. DTO EmployeeDTO
    </h3>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeDTO</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>           <span class="token comment">// 员工ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>   <span class="token comment">// 用户名</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>       <span class="token comment">// 姓名</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>      <span class="token comment">// 手机号</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>        <span class="token comment">// 性别</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> idNumber<span class="token punctuation">;</span>   <span class="token comment">// 身份证号</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="3__DTO__239">
     </a>
     3. 使用 DTO 的场景
    </h3>
    <h4>
     <a id="31__241">
     </a>
     3.1 查询员工信息
    </h4>
    <ul>
     <li>
      前端只需要员工的基本信息（如
      <code>
       id
      </code>
      、
      <code>
       username
      </code>
      、
      <code>
       name
      </code>
      、
      <code>
       phone
      </code>
      、
      <code>
       sex
      </code>
      、
      <code>
       idNumber
      </code>
      ）。
     </li>
     <li>
      后端返回
      <code>
       EmployeeDTO
      </code>
      ，过滤掉敏感字段（如
      <code>
       password
      </code>
      ）和内部字段（如
      <code>
       createTime
      </code>
      ）。
     </li>
    </ul>
    <h4>
     <a id="32__245">
     </a>
     3.2 更新员工信息
    </h4>
    <ul>
     <li>
      前端传递
      <code>
       EmployeeDTO
      </code>
      作为请求体，后端根据 DTO 更新员工信息。
     </li>
     <li>
      避免前端传递不必要的字段（如
      <code>
       password
      </code>
      、
      <code>
       createTime
      </code>
      ）。
     </li>
    </ul>
    <h4>
     <a id="33__249">
     </a>
     3.3 新增员工
    </h4>
    <ul>
     <li>
      前端传递
      <code>
       EmployeeDTO
      </code>
      作为请求体，后端将 DTO 转换为实体类并保存到数据库。
     </li>
     <li>
      避免前端传递内部字段（如
      <code>
       createTime
      </code>
      、
      <code>
       updateTime
      </code>
      ）。
     </li>
     <li>
     </li>
    </ul>
    <h3>
     <a id="4_DTOVO_253">
     </a>
     4. DTO、VO和实体类的区别
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        特性
       </th>
       <th>
        DTO
       </th>
       <th>
        VO
       </th>
       <th>
        Entity
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        目的
       </td>
       <td>
        数据传输
       </td>
       <td>
        数据展示或封装值
       </td>
       <td>
        表示数据库中的数据结构
       </td>
      </tr>
      <tr>
       <td>
        使用场景
       </td>
       <td>
        跨层数据传输（如Controller-Service）
       </td>
       <td>
        展示层或领域模型
       </td>
       <td>
        数据库操作、业务逻辑
       </td>
      </tr>
      <tr>
       <td>
        可变性
       </td>
       <td>
        可变（通常有setter）
       </td>
       <td>
        通常不可变（无setter）
       </td>
       <td>
        可变（用于持久化和业务逻辑）
       </td>
      </tr>
      <tr>
       <td>
        字段
       </td>
       <td>
        与传输需求相关
       </td>
       <td>
        与展示或业务逻辑相关
       </td>
       <td>
        与数据库表字段严格对应
       </td>
      </tr>
      <tr>
       <td>
        行为
       </td>
       <td>
        通常无行为
       </td>
       <td>
        可能包含简单行为（如格式化）
       </td>
       <td>
        包含业务逻辑和验证规则
       </td>
      </tr>
      <tr>
       <td>
        示例
       </td>
       <td>
        UserDTO
       </td>
       <td>
        UserVO
       </td>
       <td>
        UserEntity
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h2>
     <a id="_XML__MyBatis__266">
     </a>
     六、为什么使用 XML 注解而不是 MyBatis 注解
    </h2>
    <h3>
     <a id="1__XML__268">
     </a>
     1. 使用 XML 注解的原因
    </h3>
    <h4>
     <a id="11__SQL__269">
     </a>
     1.1 动态 SQL 支持
    </h4>
    <ul>
     <li>
      XML 提供了强大的动态 SQL 支持，例如
      <code>
       &lt;if&gt;
      </code>
      、
      <code>
       &lt;foreach&gt;
      </code>
      、
      <code>
       &lt;choose&gt;
      </code>
      等标签。
     </li>
     <li>
      在复杂的查询场景中，动态 SQL 可以更灵活地构建 SQL 语句。
     </li>
    </ul>
    <h4>
     <a id="12_SQL__273">
     </a>
     1.2 SQL 与代码分离
    </h4>
    <ul>
     <li>
      将 SQL 语句写在 XML 文件中，可以使 SQL 与 Java 代码分离，便于维护和管理。
     </li>
     <li>
      对于复杂的 SQL 语句，XML 文件的可读性更高。
     </li>
    </ul>
    <h4>
     <a id="13__276">
     </a>
     1.3 复用性
    </h4>
    <ul>
     <li>
      XML 文件中的 SQL 语句可以在多个 Mapper 接口中复用。
     </li>
     <li>
      例如，可以在不同的 Mapper 接口中引用同一个 SQL 片段。
     </li>
    </ul>
    <h4>
     <a id="14__280">
     </a>
     1.4 工具支持
    </h4>
    <ul>
     <li>
      MyBatis 提供了丰富的工具支持 XML 文件的编写和调试。
     </li>
     <li>
      例如，MyBatis Generator 可以自动生成 XML 映射文件。
     </li>
    </ul>
    <h3>
     <a id="2_MyBatis__283">
     </a>
     2. MyBatis 注解的局限性
    </h3>
    <h4>
     <a id="21__SQL__284">
     </a>
     2.1 动态 SQL 支持有限
    </h4>
    <ul>
     <li>
      MyBatis 注解对动态 SQL 的支持较弱，复杂的 SQL 语句难以用注解实现。
     </li>
     <li>
      例如，
      <code>
       @Select
      </code>
      注解无法直接实现
      <code>
       &lt;foreach&gt;
      </code>
      这样的动态 SQL。
     </li>
    </ul>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getSetmealIdsByDishIds<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>java.lang.Long<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  select setmeal_id from setmeal_dish where dish_id in
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dishIds<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dishId<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      #{dishId}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h4>
     <a id="22__296">
     </a>
     2.2 可读性差
    </h4>
    <ul>
     <li>
      复杂的 SQL 语句写在注解中会导致代码冗长，可读性差。
     </li>
     <li>
      例如，一个包含多个条件的查询语句会显得非常混乱。
     </li>
    </ul>
    <h4>
     <a id="23__300">
     </a>
     2.3 维护困难
    </h4>
    <ul>
     <li>
      SQL 语句与 Java 代码混合在一起，维护起来不如 XML 文件方便。
     </li>
     <li>
      修改 SQL 语句时需要重新编译 Java 代码。
     </li>
    </ul>
    <p>
     你提到的代码中有两个
     <code>
      @PutMapping
     </code>
     注解没有指定路径，这意味着它们默认映射到类级别的路径
     <code>
      /admin/dish
     </code>
     。以下是对这个问题的详细解释：
    </p>
    <hr/>
    <h2>
     <a id="Spring_Boot__308">
     </a>
     七、Spring Boot 的请求映射规则
    </h2>
    <p>
     在 Spring Boot 中，请求的映射是通过
     <strong>
      类级别的
      <code>
       @RequestMapping
      </code>
     </strong>
     和
     <strong>
      方法级别的
      <code>
       @PutMapping
      </code>
      、
      <code>
       @GetMapping
      </code>
      等注解
     </strong>
     共同决定的。
    </p>
    <ul>
     <li>
      <strong>
       类级别的
       <code>
        @RequestMapping
       </code>
      </strong>
      ：
      <ul>
       <li>
        定义了该类中所有方法的公共路径前缀。
       </li>
       <li>
        例如，
        <code>
         @RequestMapping("/admin/dish")
        </code>
        表示该类中的所有方法都映射到
        <code>
         /admin/dish
        </code>
        路径下。
       </li>
       <li>
        <strong>
         管理端
        </strong>
        发出的请求，统一使用
        <code>
         /admin
        </code>
        作为前缀。
       </li>
       <li>
        <strong>
         用户端
        </strong>
        发出的请求，统一使用
        <code>
         /user
        </code>
        作为前缀。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       方法级别的
       <code>
        @PutMapping
       </code>
       、
       <code>
        @GetMapping
       </code>
       等
      </strong>
      ：
      <ul>
       <li>
        定义了具体的 HTTP 方法和路径。
       </li>
       <li>
        如果方法级别的注解没有指定路径，则默认使用类级别的路径。
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="1__321">
     </a>
     1. 类级别路径
    </h3>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/admin/dish"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DishController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 方法定义...</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      所有方法的公共路径前缀是
      <code>
       /admin/dish
      </code>
      。
     </li>
    </ul>
    <h3>
     <a id="2__331">
     </a>
     2. 方法级别路径
    </h3>
    <h4>
     <a id="21__332">
     </a>
     2.1 分页查询
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/page"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PageResult</span><span class="token punctuation">&gt;</span></span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">DishPageQueryDTO</span> dishPageQueryDTO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 方法实现...</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      完整路径是
      <code>
       /admin/dish/page
      </code>
      。
     </li>
    </ul>
    <h4>
     <a id="22__ID__341">
     </a>
     2.2 根据 ID 查询菜品
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 方法实现...</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      完整路径是
      <code>
       /admin/dish/{id}
      </code>
      。
     </li>
    </ul>
    <h4>
     <a id="23__349">
     </a>
     2.3 修改菜品
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PutMapping</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">DishDTO</span> dishDTO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 方法实现...</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      由于
      <code>
       @PutMapping
      </code>
      没有指定路径，默认使用类级别的路径
      <code>
       /admin/dish
      </code>
      。
     </li>
    </ul>
    <h4>
     <a id="24__358">
     </a>
     2.4 新增菜品
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">DishDTO</span> dishDTO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 方法实现...</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      由于
      <code>
       @PostMapping
      </code>
      没有指定路径，默认使用类级别的路径
      <code>
       /admin/dish
      </code>
      。
     </li>
    </ul>
    <h4>
     <a id="25__367">
     </a>
     2.5 批量删除菜品
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@DeleteMapping</span>
<span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 方法实现...</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      由于
      <code>
       @DeleteMapping
      </code>
      没有指定路径，默认使用类级别的路径
      <code>
       /admin/dish
      </code>
      。
     </li>
    </ul>
    <h3>
     <a id="3__376">
     </a>
     3. 如何区分不同的功能
    </h3>
    <p>
     Spring Boot 通过
     <strong>
      HTTP 方法
     </strong>
     来区分不同的功能。例如：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        HTTP 方法
       </th>
       <th>
        路径
       </th>
       <th>
        功能
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         POST
        </code>
       </td>
       <td>
        <code>
         /admin/dish
        </code>
       </td>
       <td>
        新增菜品
       </td>
      </tr>
      <tr>
       <td>
        <code>
         PUT
        </code>
       </td>
       <td>
        <code>
         /admin/dish
        </code>
       </td>
       <td>
        修改菜品
       </td>
      </tr>
      <tr>
       <td>
        <code>
         DELETE
        </code>
       </td>
       <td>
        <code>
         /admin/dish
        </code>
       </td>
       <td>
        批量删除菜品
       </td>
      </tr>
      <tr>
       <td>
        <code>
         GET
        </code>
       </td>
       <td>
        <code>
         /admin/dish/page
        </code>
       </td>
       <td>
        分页查询菜品
       </td>
      </tr>
      <tr>
       <td>
        <code>
         GET
        </code>
       </td>
       <td>
        <code>
         /admin/dish/{id}
        </code>
       </td>
       <td>
        根据 ID 查询菜品
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="4__390">
     </a>
     4. 示例请求
    </h3>
    <h4>
     <a id="41__392">
     </a>
     4.1 新增菜品
    </h4>
    <ul>
     <li>
      <strong>
       HTTP 方法
      </strong>
      ：
      <code>
       POST
      </code>
     </li>
     <li>
      <strong>
       URL
      </strong>
      ：
      <code>
       /admin/dish
      </code>
     </li>
     <li>
      <strong>
       请求体
      </strong>
      ：
      <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"宫保鸡丁"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"price"</span><span class="token operator">:</span> <span class="token number">38.0</span><span class="token punctuation">,</span>
  <span class="token string-property property">"flavors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"微辣"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token string">"少辣"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="42__409">
     </a>
     4.2 修改菜品
    </h4>
    <ul>
     <li>
      <strong>
       HTTP 方法
      </strong>
      ：
      <code>
       PUT
      </code>
     </li>
     <li>
      <strong>
       URL
      </strong>
      ：
      <code>
       /admin/dish
      </code>
     </li>
     <li>
      <strong>
       请求体
      </strong>
      ：
      <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"宫保鸡丁"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"price"</span><span class="token operator">:</span> <span class="token number">40.0</span><span class="token punctuation">,</span>
  <span class="token string-property property">"flavors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"微辣"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token string">"少辣"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="43__427">
     </a>
     4.3 批量删除菜品
    </h4>
    <ul>
     <li>
      <strong>
       HTTP 方法
      </strong>
      ：
      <code>
       DELETE
      </code>
     </li>
     <li>
      <strong>
       URL
      </strong>
      ：
      <code>
       /admin/dish?ids=1,2,3
      </code>
     </li>
     <li>
      <strong>
       请求参数
      </strong>
      ：
      <code>
       ids=1,2,3
      </code>
     </li>
    </ul>
    <h4>
     <a id="44__432">
     </a>
     4.4 分页查询菜品
    </h4>
    <ul>
     <li>
      <strong>
       HTTP 方法
      </strong>
      ：
      <code>
       GET
      </code>
     </li>
     <li>
      <strong>
       URL
      </strong>
      ：
      <code>
       /admin/dish/page?page=1&amp;pageSize=10
      </code>
     </li>
     <li>
      <strong>
       请求参数
      </strong>
      ：
      <code>
       page=1&amp;pageSize=10
      </code>
     </li>
    </ul>
    <h4>
     <a id="45__ID__437">
     </a>
     4.5 根据 ID 查询菜品
    </h4>
    <ul>
     <li>
      <strong>
       HTTP 方法
      </strong>
      ：
      <code>
       GET
      </code>
     </li>
     <li>
      <strong>
       URL
      </strong>
      ：
      <code>
       /admin/dish/1
      </code>
     </li>
     <li>
      <strong>
       路径参数
      </strong>
      ：
      <code>
       id=1
      </code>
     </li>
    </ul>
    <hr/>
    <h2>
     <a id="_443">
     </a>
     八、接口设计中的是否必须原则
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/15cd7566d9b44e9a8b9e3fae49e6c005.png"/>
    </p>
    <p>
     参数的必需与非必需性是通过不同的方式来体现的，以下是具体案例
    </p>
    <h3>
     <a id="1__450">
     </a>
     1. 请求参数说明
    </h3>
    <p>
     从接口文档中可以看到，请求参数包括以下几项：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        参数名
       </th>
       <th>
        类型
       </th>
       <th>
        说明
       </th>
       <th>
        必需性
       </th>
       <th>
        示例值
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         categoryId
        </code>
       </td>
       <td>
        <code>
         string
        </code>
       </td>
       <td>
        分类id
       </td>
       <td>
        可选
       </td>
       <td>
        <code>
         101
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         name
        </code>
       </td>
       <td>
        <code>
         string
        </code>
       </td>
       <td>
        菜品名称
       </td>
       <td>
        可选
       </td>
       <td>
        <code>
         官保鸡丁
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         page
        </code>
       </td>
       <td>
        <code>
         string
        </code>
       </td>
       <td>
        页码
       </td>
       <td>
        必需
       </td>
       <td>
        <code>
         1
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         pageSize
        </code>
       </td>
       <td>
        <code>
         string
        </code>
       </td>
       <td>
        每页记录数
       </td>
       <td>
        必需
       </td>
       <td>
        <code>
         10
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         status
        </code>
       </td>
       <td>
        <code>
         string
        </code>
       </td>
       <td>
        分类状态
       </td>
       <td>
        可选
       </td>
       <td>
        <code>
         1
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <ul>
     <li>
      <p>
       <strong>
        必需参数
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         page
        </code>
        和
        <code>
         pageSize
        </code>
        是分页查询的必需参数，用于指定查询的页码和每页的记录数。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        可选参数
       </strong>
       ：
      </p>
      <ul>
       <li>
        <code>
         categoryId
        </code>
        、
        <code>
         name
        </code>
        和
        <code>
         status
        </code>
        是可选参数，用于过滤查询结果。
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="2_Java_470">
     </a>
     2. Java代码片段分析
    </h3>
    <p>
     在此 Java 代码中，
     <code>
      DishPageQueryDTO
     </code>
     是一个数据传输对象（DTO），用于封装分页查询的参数。以下是代码的详细分析：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">PageResult</span> <span class="token function">pageQuery</span><span class="token punctuation">(</span><span class="token class-name">DishPageQueryDTO</span> dishPageQueryDTO<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. 使用 PageHelper 进行分页</span>
    <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>dishPageQueryDTO<span class="token punctuation">.</span><span class="token function">getPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dishPageQueryDTO<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2. 调用 Mapper 进行查询</span>
    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishVO</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> dishMapper<span class="token punctuation">.</span><span class="token function">pageQuery</span><span class="token punctuation">(</span>dishPageQueryDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. 返回分页结果</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageResult</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      <strong>
       必需参数
      </strong>
      ：
      <ul>
       <li>
        <code>
         dishPageQueryDTO.getPage()
        </code>
        和
        <code>
         dishPageQueryDTO.getPageSize()
        </code>
        是分页查询的必需参数。
       </li>
       <li>
        如果这两个参数为空或未提供，分页功能将无法正常工作。
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="3_XML_493">
     </a>
     3. XML映射文件分析
    </h3>
    <p>
     在 SQL 代码中，动态 SQL 语句根据传入的参数生成查询条件。以下是代码的详细分析：
    </p>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pageQuery<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.sky.vo.DishVO<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    select d.* , c.name as categoryName 
    from dish d 
    left outer join category c on d.category_id = c.id
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            and d.name like concat('%',#{name},'%')
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>categoryId != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            and d.category_id = #{categoryId}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            and d.status = #{status}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
    order by d.create_time desc
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <ul>
     <li>
      <strong>
       可选参数
      </strong>
      ：
      <ul>
       <li>
        <code>
         name
        </code>
        、
        <code>
         categoryId
        </code>
        和
        <code>
         status
        </code>
        是可选参数，通过
        <code>
         &lt;if&gt;
        </code>
        标签动态生成查询条件。
       </li>
       <li>
        如果某个参数为
        <code>
         null
        </code>
        ，则对应的条件不会添加到 SQL 查询中。
       </li>
      </ul>
     </li>
    </ul>
    <p>
     通过这种设计，分页查询接口既满足了基本的查询需求，又提供了灵活的过滤选项，适用于不同的业务场景。
    </p>
    <hr/>
    <h2>
     <a id="OSS_529">
     </a>
     九、阿里云OSS配置指南
    </h2>
    <p>
     在使用对象存储服务时，可能会遇到Bucket失效的情况，从而导致服务无法正常运行。为了解决这个问题，我们需要重新配置一个新的Bucket，并更新相关配置文件。参考教程：
     <a href="https://blog.csdn.net/qq_60735796/article/details/136075603?spm=1001.2014.3001.5506">
      Java利用阿里云OSS/本地存储实现文件上传功能
     </a>
    </p>
    <h3>
     <a id="1_OSS_533">
     </a>
     1. 注册阿里云OSS账号
    </h3>
    <p>
     首先，访问
     <a href="https://cn.aliyun.com/product/oss" rel="nofollow">
      阿里云-对象存储OSS官网
     </a>
     注册账号。新用户可免费试用20GB存储空间，有效期为3个月。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c2dea1de671e41ec944d9d98abfe37f2.png"/>
    </p>
    <h3>
     <a id="2__538">
     </a>
     2. 获取关键信息
    </h3>
    <p>
     注册完成后，获取以下四个关键信息：
    </p>
    <ol>
     <li>
      <strong>
       <code>
        Endpoint
       </code>
      </strong>
      ：OSS服务的访问地址。
     </li>
     <li>
      <strong>
       <code>
        Access Key ID
       </code>
      </strong>
      ：用于身份验证的访问密钥ID。
     </li>
     <li>
      <strong>
       <code>
        Access Key Secret
       </code>
      </strong>
      ：用于身份验证的访问密钥。
     </li>
     <li>
      <strong>
       <code>
        Bucket Name
       </code>
      </strong>
      ：新创建的Bucket名称。
     </li>
    </ol>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/537adc3562df4a3492a8b17a8bbc1a46.png"/>
    </p>
    <h3>
     <a id="3__550">
     </a>
     3. 更新配置文件
    </h3>
    <p>
     将上述获取的信息填写到对应的YAML配置文件
     <code>
      sky-server/src/main/resources/application-dev.yml
     </code>
     目录下
    </p>
    <pre><code class="prism language-yaml"><span class="token key atrule">sky</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3306</span>
    <span class="token key atrule">database</span><span class="token punctuation">:</span> sky_take_out
    <span class="token key atrule">username</span><span class="token punctuation">:</span> your_username
    <span class="token key atrule">password</span><span class="token punctuation">:</span> your_password
  <span class="token key atrule">alioss</span><span class="token punctuation">:</span>
    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> your_endpoint
    <span class="token key atrule">access-key-id</span><span class="token punctuation">:</span> your_accessKeyId
    <span class="token key atrule">access-key-secret</span><span class="token punctuation">:</span> your_keySecret
    <span class="token key atrule">bucket-name</span><span class="token punctuation">:</span> your_bucketName
    
<span class="token comment">#    endpoint: oss-cn-hangzhou.aliyuncs.com</span>
<span class="token comment">#    access-key-id: LTAI5tPeFLzsPPT8gG3LPW64</span>
<span class="token comment">#    access-key-secret: U6k1brOZ8gaOIXv3nXbulGTUzy6Pd7</span>
<span class="token comment">#    bucket-name: sky-take-out</span>
</code></pre>
    <h3>
     <a id="4__574">
     </a>
     4, 重新运行服务
    </h3>
    <p>
     保存配置文件后，重新运行服务并打开前端页面，发现图片能够正常上传了。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/19d45171a55e43638384562e4ca61a67.png"/>
     <br/>
     并且我们可以在自己的对象存储OSS文件管理中监控到从前端页面上传的图片文件
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/af2849bd74d5493ea09355cea2b0e59e.png"/>
    </p>
    <hr/>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36353535323530392f:61727469636c652f64657461696c732f313436313337383335" class_="artid" style="display:none">
 </p>
</div>


