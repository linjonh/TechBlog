---
layout: post
title: 2025-01-18-微信小程序开发之Vant组件库
date: 2025-01-18 09:32:07 +0800
categories: ['微信小程序']
tags: ['微信小程序', 'Vant']
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=136131991
  alt: 微信小程序开发之Vant组件库
artid: 136131991
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=136131991
featuredImagePreview: https://bing.ee123.net/img/rand?artid=136131991
---
</p>
<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     微信小程序开发之Vant组件库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <a href="#_2" rel="nofollow">
        环境
       </a>
      </li>
      <li>
       <a href="#Vant_10" rel="nofollow">
        Vant介绍
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_15" rel="nofollow">
          示例
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#npm_177" rel="nofollow">
        微信小程序的npm支持
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#npm_182" rel="nofollow">
          安装npm包
         </a>
        </li>
        <li>
         <a href="#npm_195" rel="nofollow">
          构建npm
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#Vant_258" rel="nofollow">
        在微信小程序开发中使用Vant
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_259" rel="nofollow">
          准备
         </a>
        </li>
        <li>
         <a href="#_287" rel="nofollow">
          安装和配置
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#_288" rel="nofollow">
            一：安装
           </a>
          </li>
          <li>
           <a href="#appjson_315" rel="nofollow">
            二：修改app.json
           </a>
          </li>
          <li>
           <a href="#projectconfigjson_330" rel="nofollow">
            三：修改project.config.json
           </a>
          </li>
          <li>
           <a href="#npm_389" rel="nofollow">
            四：构建npm包
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_399" rel="nofollow">
          使用
         </a>
        </li>
        <li>
         <a href="#Button_402" rel="nofollow">
          Button组件
         </a>
        </li>
        <li>
         <a href="#Calendar_425" rel="nofollow">
          Calendar组件
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_492" rel="nofollow">
        参考
       </a>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_2">
     </a>
     环境
    </h2>
    <ul>
     <li>
      Windows 11 家庭中文版
     </li>
     <li>
      微信开发者工具 Stable 1.06.2401020
     </li>
     <li>
      调试基础库 3.3.4
     </li>
     <li>
      node v18.19.0
     </li>
     <li>
      npm 10.2.3
     </li>
     <li>
      Vant 1.11.3
     </li>
    </ul>
    <h2>
     <a id="Vant_10">
     </a>
     Vant介绍
    </h2>
    <p>
     Vant 是一个轻量、可靠的移动端组件库，于 2017 年开源。
    </p>
    <p>
     目前 Vant 官方提供了 Vue 2 版本、Vue 3 版本和微信小程序版本，并由社区团队维护 React 版本和支付宝小程序版本。
    </p>
    <h3>
     <a id="_15">
     </a>
     示例
    </h3>
    <p>
     参见
     <code>
      https://github.com/vant-ui/vant-demo
     </code>
     。
    </p>
    <p>
     首先，把git repo克隆到本地：
    </p>
    <pre><code class="prism language-powershell">git clone git@github<span class="token punctuation">.</span>com:vant-ui/vant-demo<span class="token punctuation">.</span>git
</code></pre>
    <p>
     注：需要public key。
    </p>
    <p>
     源码结构如下：
    </p>
    <pre><code class="prism language-powershell">├── vant                <span class="token comment"># Examples related to Vant</span>
│   ├── rsbuild         Building applications <span class="token keyword">using</span> Vue 3<span class="token punctuation">,</span> Vant 4<span class="token punctuation">,</span> and Rsbuild
│   ├── vite            Building applications <span class="token keyword">using</span> Vue 3<span class="token punctuation">,</span> Vant 4<span class="token punctuation">,</span> and Vite
│   ├── nuxt3           Building applications <span class="token keyword">using</span> Nuxt 3 and Vant 4
│   ├── vue3            Building applications <span class="token keyword">using</span> Vue 3<span class="token punctuation">,</span> Vant 4<span class="token punctuation">,</span> and Vue <span class="token function">Cli</span>
│   ├── vue3-ts         Building applications <span class="token keyword">using</span> Vue 3<span class="token punctuation">,</span> Vant 4<span class="token punctuation">,</span> TypeScript<span class="token punctuation">,</span> Vite
│   ├── cdn             Importing Vant through CDN
│   ├── rem             Configuring rem adaptation
│   ├── viewport        Configuring viewport settings
│   └── typescript      Configuring TypeScript and importing on demand
│
├── vant-weapp          <span class="token comment"># Examples related to Vant Weapp</span>
│   └── base            Building mini-programs <span class="token keyword">using</span> Vant Weapp
│
├── react-vant          <span class="token comment"># Examples related to React Vant</span>
│   └── rsbuild         Building applications <span class="token keyword">using</span> React Vant and Rsbuild
│   └── modern-js       Building applications <span class="token keyword">using</span> React Vant<span class="token punctuation">,</span> Modern<span class="token punctuation">.</span>js<span class="token punctuation">,</span> and Rspack
│
└── vant-<span class="token function">cli</span>            <span class="token comment"># Examples related to Vant Cli</span>
    └── base            Building component libraries <span class="token keyword">using</span> Vant <span class="token function">Cli</span>
</code></pre>
    <p>
     注：在Windows下，
     <code>
      tree
     </code>
     命令无法指定级别的深度，估计得用第三方工具才行。该结构是从网站上直接复制的。
    </p>
    <p>
     到
     <code>
      vant/vite
     </code>
     目录下，查看目录内容：
    </p>
    <pre><code class="prism language-powershell">c:\temp\test0216\vant-demo\vant\vite&gt;<span class="token function">dir</span>
 驱动器 C 中的卷是 OS
 卷的序列号是 F238-D5CC

 c:\temp\test0216\vant-demo\vant\vite 的目录

2024-02-16  20:36    &lt;<span class="token function">DIR</span>&gt;          <span class="token punctuation">.</span>
2024-02-16  20:36    &lt;<span class="token function">DIR</span>&gt;          <span class="token punctuation">.</span><span class="token punctuation">.</span>
2024-02-16  20:36                48 <span class="token punctuation">.</span>gitignore
2024-02-16  20:36               283 index<span class="token punctuation">.</span>html
2024-02-16  20:36               408 package<span class="token punctuation">.</span>json
2024-02-16  20:36    &lt;<span class="token function">DIR</span>&gt;          src
2024-02-16  20:36               274 vite<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
               4 个文件          1<span class="token punctuation">,</span>013 字节
               3 个目录 47<span class="token punctuation">,</span>527<span class="token punctuation">,</span>333<span class="token punctuation">,</span>888 可用字节
</code></pre>
    <p>
     其中，
     <code>
      package.json
     </code>
     文件内容如下：
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"vite"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"dev"</span><span class="token operator">:</span> <span class="token string">"vite"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"build"</span><span class="token operator">:</span> <span class="token string">"vite build"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"vant"</span><span class="token operator">:</span> <span class="token string">"^4.0.0"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"vue"</span><span class="token operator">:</span> <span class="token string">"^3.2.45"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"@vant/auto-import-resolver"</span><span class="token operator">:</span> <span class="token string">"^1.0.1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"@vitejs/plugin-vue"</span><span class="token operator">:</span> <span class="token string">"^4.3.4"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"less"</span><span class="token operator">:</span> <span class="token string">"^4.1.3"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"unplugin-vue-components"</span><span class="token operator">:</span> <span class="token string">"^0.25.2"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"vite"</span><span class="token operator">:</span> <span class="token string">"^4.4.9"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在此目录下，安装依赖包：
    </p>
    <pre><code class="prism language-powershell">c:\temp\test0216\vant-demo\vant\vite&gt;npm i

added 91 packages<span class="token punctuation">,</span> and audited 92 packages in 43s

17 packages are looking <span class="token keyword">for</span> funding
  run `npm fund` <span class="token keyword">for</span> details

found 0 vulnerabilities
</code></pre>
    <p>
     大约一两分钟，就安装好了。
    </p>
    <p>
     再次查看目录：
    </p>
    <pre><code class="prism language-powershell">c:\temp\test0216\vant-demo\vant\vite&gt;<span class="token function">dir</span>
 驱动器 C 中的卷是 OS
 卷的序列号是 F238-D5CC

 c:\temp\test0216\vant-demo\vant\vite 的目录

2024-02-16  20:37    &lt;<span class="token function">DIR</span>&gt;          <span class="token punctuation">.</span>
2024-02-16  20:36    &lt;<span class="token function">DIR</span>&gt;          <span class="token punctuation">.</span><span class="token punctuation">.</span>
2024-02-16  20:36                48 <span class="token punctuation">.</span>gitignore
2024-02-16  20:36               283 index<span class="token punctuation">.</span>html
2024-02-16  20:37    &lt;<span class="token function">DIR</span>&gt;          node_modules
2024-02-16  20:37            52<span class="token punctuation">,</span>038 package-lock<span class="token punctuation">.</span>json
2024-02-16  20:36               408 package<span class="token punctuation">.</span>json
2024-02-16  20:36    &lt;<span class="token function">DIR</span>&gt;          src
2024-02-16  20:36               274 vite<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
               5 个文件         53<span class="token punctuation">,</span>051 字节
               4 个目录 47<span class="token punctuation">,</span>468<span class="token punctuation">,</span>183<span class="token punctuation">,</span>552 可用字节
</code></pre>
    <p>
     可见，多了
     <code>
      node_modules
     </code>
     目录和
     <code>
      package-lock.json
     </code>
     文件。
    </p>
    <p>
     运行：
    </p>
    <pre><code class="prism language-powershell">npm run dev
</code></pre>
    <p>
     界面如下：
    </p>
    <pre><code class="prism language-powershell">  VITE v4<span class="token punctuation">.</span>5<span class="token punctuation">.</span>2  ready in 562 ms

  ➜  Local:   http:<span class="token operator">/</span><span class="token operator">/</span>localhost:5173/
  ➜  Network: use <span class="token operator">--</span>host to expose
  ➜  press h to show help
</code></pre>
    <p>
     输入
     <code>
      h
     </code>
     ，查看帮助：
    </p>
    <pre><code class="prism language-powershell">  Shortcuts
  press r to restart the server
  press u to show server url
  press o to open in browser
  press c to clear console
  press q to quit
</code></pre>
    <p>
     输入
     <code>
      u
     </code>
     ，显示URL：
    </p>
    <pre><code class="prism language-powershell">  ➜  Local:   http:<span class="token operator">/</span><span class="token operator">/</span>localhost:5173/
  ➜  Network: use <span class="token operator">--</span>host to expose
</code></pre>
    <p>
     可以打开浏览器，访问该URL，也可以直接输入
     <code>
      o
     </code>
     ，会自动打开浏览器，访问
     <code>
      http://localhost:5173/
     </code>
     ，如下：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1637de85fddf67674dfa2447f4496d96.png"/>
    </p>
    <p>
     最后，按
     <code>
      q
     </code>
     退出应用。
    </p>
    <h2>
     <a id="npm_177">
     </a>
     微信小程序的npm支持
    </h2>
    <p>
     参见
     <code>
      https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html
     </code>
     。
    </p>
    <p>
     从小程序基础库版本 2.2.1 或以上、及开发者工具 1.02.1808300 或以上开始，小程序支持使用 npm 安装第三方包。
    </p>
    <h3>
     <a id="npm_182">
     </a>
     安装npm包
    </h3>
    <p>
     在小程序
     <code>
      package.json
     </code>
     所在的目录中执行命令安装npm包：
    </p>
    <pre><code class="prism language-powershell">npm install
</code></pre>
    <p>
     注意：此处要求参与构建npm的
     <code>
      package.json
     </code>
     需要在
     <code>
      project.config.json
     </code>
     定义的
     <code>
      miniprogramRoot
     </code>
     之内。
    </p>
    <p>
     开发者工具 v1.02.1811150 版本开始，调整为根据
     <code>
      package.json
     </code>
     的
     <code>
      dependencies
     </code>
     字段构建，所以声明在
     <code>
      devDependencies
     </code>
     里的包也可以在开发过程中被安装使用而不会参与到构建中。如果是这之前的版本，则建议使用
     <code>
      --production
     </code>
     选项，可以减少安装一些业务无关的 npm 包，从而减少整个小程序包的大小。
    </p>
    <p>
     <code>
      miniprogramRoot
     </code>
     字段不存在时，
     <code>
      miniprogramRoot
     </code>
     就是
     <code>
      project.config.js
     </code>
     所在的目录。
    </p>
    <h3>
     <a id="npm_195">
     </a>
     构建npm
    </h3>
    <p>
     在微信开发者工具中，工具 -&gt; 构建 npm：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/44004adcd74526872faeea0acee68bd8.png"/>
    </p>
    <p>
     为何要构建npm？
    </p>
    <p>
     首先
     <code>
      node_modules
     </code>
     目录不会参与编译、上传和打包中，所以小程序想要使用 npm 包必须走一遍“构建 npm”的过程，在每一份
     <code>
      miniprogramRoot
     </code>
     内开发者声明的
     <code>
      package.json
     </code>
     的最外层的
     <code>
      node_modules
     </code>
     的同级目录下会生成一个
     <code>
      miniprogram_npm
     </code>
     目录，里面会存放构建打包后的 npm 包，也就是小程序真正使用的 npm 包。
    </p>
    <p>
     构建打包分为两种：小程序 npm 包会直接拷贝构建文件生成目录下的所有文件到
     <code>
      miniprogram_npm
     </code>
     中；其他 npm 包则会从入口 js 文件开始走一遍依赖分析和打包过程（类似 webpack）。
    </p>
    <p>
     寻找 npm 包的过程和 npm 的实现类似，从依赖 npm 包的文件所在目录开始逐层往外找，直到找到可用的 npm 包或是小程序根目录为止。 下面简单介绍下构建打包前后的目录情况，构建之前的结构：
    </p>
    <pre><code class="prism language-powershell"><span class="token punctuation">|</span><span class="token operator">--</span>node_modules
<span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>testComp <span class="token operator">/</span><span class="token operator">/</span> 小程序 npm 包
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>package<span class="token punctuation">.</span>json
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>src
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>miniprogram_dist
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>js
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>json
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>wxss
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>wxml
<span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>testa <span class="token operator">/</span><span class="token operator">/</span> 其他 npm 包
<span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">--</span>package<span class="token punctuation">.</span>json
<span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">--</span>lib
<span class="token punctuation">|</span>         <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>entry<span class="token punctuation">.</span>js
<span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">--</span>node_modules
<span class="token punctuation">|</span>              <span class="token punctuation">|</span><span class="token operator">--</span>testb
<span class="token punctuation">|</span>                   <span class="token punctuation">|</span><span class="token operator">--</span>package<span class="token punctuation">.</span>json
<span class="token punctuation">|</span>                   <span class="token punctuation">|</span><span class="token operator">--</span>main<span class="token punctuation">.</span>js
<span class="token punctuation">|</span><span class="token operator">--</span>pages
<span class="token punctuation">|</span><span class="token operator">--</span>app<span class="token punctuation">.</span>js
<span class="token punctuation">|</span><span class="token operator">--</span>app<span class="token punctuation">.</span>wxss
<span class="token punctuation">|</span><span class="token operator">--</span>app<span class="token punctuation">.</span>json
<span class="token punctuation">|</span><span class="token operator">--</span>project<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre>
    <p>
     构建之后的结构：
    </p>
    <pre><code class="prism language-powershell"><span class="token punctuation">|</span><span class="token operator">--</span>node_modules
<span class="token punctuation">|</span><span class="token operator">--</span>miniprogram_npm
<span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>testComp <span class="token operator">/</span><span class="token operator">/</span> 小程序 npm 包
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>js
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>json
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>wxss
<span class="token punctuation">|</span>    <span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>wxml
<span class="token punctuation">|</span>    <span class="token punctuation">|</span><span class="token operator">--</span>testa <span class="token operator">/</span><span class="token operator">/</span> 其他 npm 包
<span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">--</span>index<span class="token punctuation">.</span>js <span class="token operator">/</span><span class="token operator">/</span> 打包后的文件
<span class="token punctuation">|</span>         <span class="token punctuation">|</span><span class="token operator">--</span>miniprogram_npm
<span class="token punctuation">|</span>              <span class="token punctuation">|</span><span class="token operator">--</span>testb
<span class="token punctuation">|</span>                   <span class="token punctuation">|</span><span class="token operator">--</span>index<span class="token punctuation">.</span>js <span class="token operator">/</span><span class="token operator">/</span> 打包后的文件
<span class="token punctuation">|</span>                   <span class="token punctuation">|</span><span class="token operator">--</span>index<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map
<span class="token punctuation">|</span><span class="token operator">--</span>pages
<span class="token punctuation">|</span><span class="token operator">--</span>app<span class="token punctuation">.</span>js
<span class="token punctuation">|</span><span class="token operator">--</span>app<span class="token punctuation">.</span>wxss
<span class="token punctuation">|</span><span class="token operator">--</span>app<span class="token punctuation">.</span>json
<span class="token punctuation">|</span><span class="token operator">--</span>project<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre>
    <p>
     注意：打包生成的代码在同级目录下会生成 source map 文件，方便进行逆向调试。
    </p>
    <h2>
     <a id="Vant_258">
     </a>
     在微信小程序开发中使用Vant
    </h2>
    <h3>
     <a id="_259">
     </a>
     准备
    </h3>
    <p>
     在微信开发者工具中，新建项目
     <code>
      test0216
     </code>
     ：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/944e55ffedf946749d35c6cb44638e69.png">
      <br/>
      点击右上角“详情” -&gt; “本地设置” -&gt; “基础调试库”，选择使用率最多的版本，本例中为“3.3.4”：
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e173fd6229557d721ce7d561749a626b.png"/>
    </p>
    <p>
     从导航条可以看到，源码中并没有
     <code>
      package.json
     </code>
     文件：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/06217f045da2cb85756842d77686a60b.png"/>
    </p>
    <p>
     在项目根目录下运行
     <code>
      npm init
     </code>
     ，生成
     <code>
      package.json
     </code>
     文件：
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"test0216"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"这是云开发的快速启动指引，其中演示了如何上手使用云开发的三大基础能力："</span><span class="token punctuation">,</span>
  <span class="token string-property property">"main"</span><span class="token operator">:</span> <span class="token string">".eslintrc.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token string-property property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_287">
     </a>
     安装和配置
    </h3>
    <h4>
     <a id="_288">
     </a>
     一：安装
    </h4>
    <p>
     在项目根目录下运行
     <code>
      npm i @vant/weapp -S --production
     </code>
     ：
    </p>
    <pre><code class="prism language-powershell">c:\Users\duke_\WeChatProjects\test0216&gt;npm i @vant/weapp <span class="token operator">-</span>S <span class="token operator">--</span>production
npm WARN config production Use `<span class="token operator">--</span>omit=dev` instead<span class="token punctuation">.</span>

added 1 package<span class="token punctuation">,</span> and audited 2 packages in 5s

found 0 vulnerabilities
</code></pre>
    <p>
     注：
    </p>
    <ul>
     <li>
      <code>
       -S
      </code>
      ：即
      <code>
       --save
      </code>
      ，把package信息写入
      <code>
       package.json
      </code>
      的
      <code>
       dependencies
      </code>
      里（如果是
      <code>
       -D
      </code>
      ，则是把package信息写入
      <code>
       package.json
      </code>
      的
      <code>
       devDependencies
      </code>
      里）
     </li>
     <li>
      <code>
       --production
      </code>
      ：只安装
      <code>
       dependencies
      </code>
      里的package，不安装
      <code>
       devDependencies
      </code>
      里的package
     </li>
    </ul>
    <p>
     安装好以后，在
     <code>
      package.json
     </code>
     文件里多出以下内容：
    </p>
    <pre><code class="prism language-javascript">  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"@vant/weapp"</span><span class="token operator">:</span> <span class="token string">"^1.11.4"</span>
  <span class="token punctuation">}</span>
</code></pre>
    <p>
     同时，多了
     <code>
      node_modules
     </code>
     目录，其中有
     <code>
      @vant
     </code>
     目录。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4de0045f611777f88b95b7afcb9a2f6a.png"/>
    </p>
    <h4>
     <a id="appjson_315">
     </a>
     二：修改app.json
    </h4>
    <p>
     接下来，修改
     <code>
      app.json
     </code>
     文件，把其中的
     <code>
      "style": "v2",
     </code>
     删掉：
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">...</span><span class="token operator">...</span>
  <span class="token string-property property">"sitemapLocation"</span><span class="token operator">:</span> <span class="token string">"sitemap.json"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"style"</span><span class="token operator">:</span> <span class="token string">"v2"</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token operator">--</span> 把这一行删掉
  <span class="token string-property property">"lazyCodeLoading"</span><span class="token operator">:</span> <span class="token string">"requiredComponents"</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     注：JSON文件没法注释，只能删掉。
    </p>
    <p>
     文档上说，小程序的新版基础组件强行加上了许多样式，难以覆盖，不关闭将造成部分组件样式混乱。
    </p>
    <h4>
     <a id="projectconfigjson_330">
     </a>
     三：修改project.config.json
    </h4>
    <p>
     接下来，修改
     <code>
      project.config.json
     </code>
     文件。
    </p>
    <p>
     在该文件中，有如下设置：
    </p>
    <pre><code class="prism language-javascript">  <span class="token string-property property">"miniprogramRoot"</span><span class="token operator">:</span> <span class="token string">"miniprogram/"</span><span class="token punctuation">,</span>
</code></pre>
    <p>
     而
     <code>
      package.json
     </code>
     文件在项目根目录里，不在
     <code>
      miniprogramRoot
     </code>
     里。
    </p>
    <p>
     前面提到，参与构建 npm 的
     <code>
      package.json
     </code>
     需要在
     <code>
      project.config.json
     </code>
     定义的
     <code>
      miniprogramRoot
     </code>
     之内。
    </p>
    <p>
     所以需要修改
     <code>
      project.config.json
     </code>
     文件。把：
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token operator">...</span>
  <span class="token string-property property">"setting"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
    <span class="token string-property property">"packNpmManually"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">"packNpmRelationList"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     修改为：
    </p>
    <pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token operator">...</span>
  <span class="token string-property property">"setting"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
    <span class="token string-property property">"packNpmManually"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">"packNpmRelationList"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"packageJsonPath"</span><span class="token operator">:</span> <span class="token string">"./package.json"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"miniprogramNpmDistDir"</span><span class="token operator">:</span> <span class="token string">"./miniprogram/"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     如果不这么设置，则构建npm会报错：
    </p>
    <pre><code class="prism language-powershell">message： 没有找到可以构建的 NPM 包，请确认需要参与构建的 npm 都在 `miniprogramRoot` 目录内，或配置 project<span class="token punctuation">.</span>config<span class="token punctuation">.</span>json 的 packNpmManually 和 packNpmRelationList 进行构建
appid: wxb6b7b29f5024c210
openid: o6zAJs-qiQCqPQ3F31epIHxEDy1A
ideVersion: 1<span class="token punctuation">.</span>06<span class="token punctuation">.</span>2401020
osType: win32-x64
time: 2024-02-16 23:17:09
</code></pre>
    <p>
     注意： 由于目前新版开发者工具创建的小程序目录文件结构问题，npm构建的文件目录为
     <code>
      miniprogram_npm
     </code>
     ，并且开发工具会默认在当前目录下创建
     <code>
      miniprogram_npm
     </code>
     的文件名，所以新版本的
     <code>
      miniprogramNpmDistDir
     </code>
     配置为
     <code>
      ./
     </code>
     即可。
    </p>
    <h4>
     <a id="npm_389">
     </a>
     四：构建npm包
    </h4>
    <p>
     现在，就可以构建npm包了。
    </p>
    <p>
     在微信开发者工具里，“工具” -&gt; “构建 npm”，弹出对话框，显示构建完成：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/39376da733cd16024ff120a041c17ec1.png"/>
    </p>
    <p>
     可见，多了
     <code>
      miniprogram_npm
     </code>
     目录，这里存放了小程序真正使用的npm包：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0f6734ae591998ae18547c143e5f578b.png"/>
    </p>
    <h3>
     <a id="_399">
     </a>
     使用
    </h3>
    <p>
     在使用组件前，还需要在项目的
     <code>
      app.json
     </code>
     （全局）或者页面的
     <code>
      xxx.json
     </code>
     （局部）文件中配置一下。声明要用的组件和路径。
    </p>
    <h3>
     <a id="Button_402">
     </a>
     Button组件
    </h3>
    <p>
     本例使用局部设置。在
     <code>
      index.json
     </code>
     中，添加如下代码：
    </p>
    <pre><code class="prism language-javascript"><span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"van-button"</span><span class="token operator">:</span> <span class="token string">"@vant/weapp/button/index"</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     在
     <code>
      index.wxml
     </code>
     中，添加如下代码：
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">block</span> <span class="token attr-name">round</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>star-o<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>btn1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <ul>
     <li>
      <code>
       block
      </code>
      ：块级元素，每行只有一个元素，且居中对齐。若不设置，默认是行级元素，每行可有多个元素，且靠左对齐。
     </li>
     <li>
      <code>
       round
      </code>
      ：圆角按钮。
     </li>
     <li>
      <code>
       type="info"
      </code>
      ：蓝底白字，此外还有
      <code>
       primary
      </code>
      、
      <code>
       warning
      </code>
      、
      <code>
       danger
      </code>
      等选项。
     </li>
     <li>
      <code>
       icon="star-o"
      </code>
      ：在按钮上显示指定的图标。
     </li>
    </ul>
    <p>
     效果如下：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6401715b024de90a6206add7d5621006.png"/>
    </p>
    <h3>
     <a id="Calendar_425">
     </a>
     Calendar组件
    </h3>
    <p>
     本例使用全局设置。在
     <code>
      app.json
     </code>
     中，添加如下代码：
    </p>
    <pre><code class="prism language-javascript">  <span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"van-calendar"</span><span class="token operator">:</span> <span class="token string">"@vant/weapp/calendar/index"</span>
  <span class="token punctuation">}</span>
</code></pre>
    <p>
     在
     <code>
      index.wxml
     </code>
     中，添加/修改如下代码：
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">block</span> <span class="token attr-name">round</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>star-o<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onDisplay<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>btn1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>日期：{<!-- -->{ dateString }}，时间戳：{<!-- -->{ dateInt }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-calendar</span> <span class="token attr-name">show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ show }}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onClose<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onConfirm<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
    <p>
     在
     <code>
      index.js
     </code>
     中，添加如下代码：
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">...</span><span class="token operator">...</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
<span class="token operator">...</span><span class="token operator">...</span>
    <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">dateString</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">dateInt</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
<span class="token operator">...</span><span class="token operator">...</span>
  <span class="token function">onDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">async</span> <span class="token function">onConfirm</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span>
    <span class="token keyword">let</span> dateString <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> dateInt <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dateInt = '</span> <span class="token operator">+</span> dateInt<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dateString</span><span class="token operator">:</span> dateString<span class="token punctuation">,</span>
      <span class="token literal-property property">dateInt</span><span class="token operator">:</span> dateInt<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span><span class="token operator">...</span>
</code></pre>
    <p>
     页面效果如下：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7948c5ecdab2c91066881b33a743d37a.png"/>
    </p>
    <p>
     默认日历是隐藏的。点击
     <code>
      btn1
     </code>
     按钮，弹出日历：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/42204748dca13c0a52ec8c3631ea1658.png"/>
    </p>
    <p>
     选择日历中的某一天，然后点击“确定”：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f336afa1dd733d29cb3e8add4c141924.png"/>
    </p>
    <p>
     可见，已经把从日历控件上选择的日期记录下来了。
    </p>
    <h2>
     <a id="_492">
     </a>
     参考
    </h2>
    <ul>
     <li>
      <code>
       https://vant-contrib.gitee.io/vant-weapp
      </code>
     </li>
     <li>
      <code>
       https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html
      </code>
     </li>
     <li>
      <code>
       https://github.com/vant-ui/vant-demo
      </code>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
</div>


<p class="artid" style="display:none">68747470733a2f2f:626c6f672e6373646e2e6e65742f64756b655f64696e67322f:61727469636c652f64657461696c732f313336313331393931
