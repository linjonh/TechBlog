---
layout: post
title: "VSCode通过SSH免密远程登录Windows服务器"
date: 2025-03-15 11:07:36 +0800
description: "VSCode通过SSH免密登录Windows服务器，免密的配置方法。"
keywords: "VSCode通过SSH免密远程登录Windows服务器"
categories: ['Ssh']
tags: ['服务器', 'Vscode', 'Ssh']
artid: "145817276"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145817276
    alt: "VSCode通过SSH免密远程登录Windows服务器"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145817276
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145817276
cover: https://bing.ee123.net/img/rand?artid=145817276
image: https://bing.ee123.net/img/rand?artid=145817276
img: https://bing.ee123.net/img/rand?artid=145817276
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     VSCode通过SSH免密远程登录Windows服务器
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     系列
    </h2>
    <p>
     1.1
     <a href="https://blog.csdn.net/qq_30595441/article/details/145696857">
      VSCode通过SSH远程登录Windows服务器
     </a>
     <br/>
     1.2
     <a href="https://blog.csdn.net/qq_30595441/article/details/145817276">
      VSCode通过SSH免密远程登录Windows服务器
     </a>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="1__5">
     </a>
     1 准备工作
    </h2>
    <ul>
     <li>
      已经配置好VS Code通过SSH登陆服务器。
      <ul>
       <li>
        还没配置的查看
        <a href="https://blog.csdn.net/qq_30595441/article/details/145696857">
         VSCode通过SSH远程登录Windows服务器
        </a>
       </li>
      </ul>
     </li>
     <li>
      演示环境
      <ul>
       <li>
        本地电脑Windows 11，已安装VS Code。
       </li>
       <li>
        服务器Windows Server 2019。
       </li>
      </ul>
     </li>
    </ul>
    <h2>
     <a id="2__11">
     </a>
     2 本地电脑配置
    </h2>
    <p>
     在
     <code>
      本地电脑Win11
     </code>
     操作。
    </p>
    <h3>
     <a id="21__13">
     </a>
     2.1 生成密钥
    </h3>
    <p>
     CMD运行命令
     <code>
      ssh-keygen -t rsa
     </code>
     ，一路默认，按三次回车就可以。
     <br/>
     如下图所示，会有两个文件，第一个
     <code>
      C:\Users\Administrator/.ssh/id_ras
     </code>
     是私钥（放在本机）；第二个
     <code>
      C:\Users\Administrator/.ssh/id_ras.pub
     </code>
     是公钥（放在远程主机）。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/43990511e10d4403a98a2bbd9124179d.png"/>
    </p>
    <h3>
     <a id="22_VS_Code_17">
     </a>
     2.2 VS Code配置密钥
    </h3>
    <p>
     在SSH配置文件中添加
     <code>
      IdentityFile C:\Users\administrator\.ssh\id_rsa
     </code>
     ，路径改成自己电脑的路径。
     <br/>
     <img alt="ssh配置" src="https://i-blog.csdnimg.cn/direct/58e7bf4e74ea4fca9b983d1fa3cde68a.png"/>
    </p>
    <h2>
     <a id="3__20">
     </a>
     3. 服务端配置
    </h2>
    <p>
     在
     <code>
      服务器Windows Server 2019
     </code>
     操作。
    </p>
    <h3>
     <a id="31_SSHsshd_config_22">
     </a>
     3.1 配置SSH服务器sshd_config
    </h3>
    <p>
     用记事本打开配置文件
     <code>
      C:\ProgramData\ssh\sshd_config
     </code>
     修改下面的内容。
    </p>
    <pre><code class="prism language-config">#  取消注释
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys

# 注释
#Match Group administrators
#       AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys
</code></pre>
    <p>
     <img alt="ssh配置" src="https://i-blog.csdnimg.cn/direct/47fffecee5f44bf89eb9451769e1c693.png"/>
    </p>
    <p>
     <img alt="ssh配置" src="https://i-blog.csdnimg.cn/direct/7f583156a9c24e01902cfda2b0bbf451.png"/>
    </p>
    <h3>
     <a id="32__36">
     </a>
     3.2 复制公钥
    </h3>
    <p>
     把2.1章节本地电脑生成的
     <code>
      C:\Users\Administrator/.ssh/id_ras.pub
     </code>
     公钥的内容全部复制到服务器的
     <code>
      C:\Users\Administrator\.ssh\authorized_keys
     </code>
     文件中。
     <br/>
     （如果你的服务器上没有
     <code>
      authorized_keys
     </code>
     这个文件，就把2.1章节的公钥文件直接复制进来，然后改成这个文件名）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a2166274ec0b4e27bb92eabb4eaa3ff7.png"/>
    </p>
    <h3>
     <a id="33__40">
     </a>
     3.3 配置权限（常见问题）
    </h3>
    <p>
     （这一章节有些电脑需要配置有些不需要）
     <br/>
     找到3.2章节的文件
     <code>
      C:\Users\Administrator\.ssh\authorized_keys
     </code>
     。
    </p>
    <ol>
     <li>
      右键-属性-安全-高级。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1d600c9203e047b1afdb3e7917678c0f.png"/>
     </li>
     <li>
      禁用继承（如果有弹窗，选择将已经继承的权限转换为此对象的显示权限）
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4fea42f2066a4085a0f6ad64a6ac270f.png"/>
     </li>
     <li>
      只保留system和登录账号Administrator的权限。其他例如Administrators组，全部删除。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/258ad2ae93644cd18231a4f5dc039f3a.png"/>
     </li>
     <li>
      最终结果，点击应用-确定。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6e9b9e037aaf4acca60117416ccd07f3.png"/>
     </li>
    </ol>
    <h3>
     <a id="34_OpenSSH_51">
     </a>
     3.4 重启OpenSSH服务
    </h3>
    <p>
     重启下面两个服务
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8cb4c816936c4b65a21e79d817f68710.png"/>
    </p>
    <h2>
     <a id="4_VS_Code_54">
     </a>
     4. VS Code登录服务器
    </h2>
    <p>
     重启VS Code软件，登录Windows服务器。免密登录成功。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33303539353434312f:61727469636c652f64657461696c732f313435383137323736" class_="artid" style="display:none">
 </p>
</div>


