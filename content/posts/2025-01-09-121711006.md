---
layout: post
title: "计算机网络实验虚拟局域网VLAN的配置"
date: 2025-01-09 11:55:44 +0800
description: "本文详述了一次计算机网络实验，涉及基于端口划分的VLAN配置，包括同一子网、同一VLAN内的跨交换机"
keywords: "虚拟局域网的配置,四台pc机,两台交换机,计算机网络基础实验七"
categories: ['网络']
tags: ['网络', '华为']
artid: "121711006"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=121711006
    alt: "计算机网络实验虚拟局域网VLAN的配置"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=121711006
featuredImagePreview: https://bing.ee123.net/img/rand?artid=121711006
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     计算机网络实验：虚拟局域网VLAN的配置
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="VLAN_2">
     </a>
     计算机网络实验：虚拟局域网VLAN的配置（基于端口划分）
    </h3>
    <p>
    </p>
    <div class="toc">
     <h4>
      文章目录
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#VLAN_2" rel="nofollow">
          计算机网络实验：虚拟局域网VLAN的配置（基于端口划分）
         </a>
        </li>
        <li>
         <a href="#1__5" rel="nofollow">
          1. 实验目的
         </a>
        </li>
        <li>
         <a href="#2__8" rel="nofollow">
          2. 实验内容
         </a>
        </li>
        <li>
         <a href="#3__11" rel="nofollow">
          3. 实验设备
         </a>
        </li>
        <li>
         <a href="#4__13" rel="nofollow">
          4. 实验原理
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#Part1VLAN_14" rel="nofollow">
            Part1：实现跨交换机上同一子网、同一VLAN内成员之间通信
           </a>
          </li>
          <li>
           <a href="#Part2VLAN_20" rel="nofollow">
            Part2：实现跨交换机上不同子网、不同VLAN成员之间通信
           </a>
          </li>
         </ul>
        </li>
        <li>
         <a href="#5__28" rel="nofollow">
          5. 实验操作步骤（傻瓜式操作步骤）
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#Part1VLAN_29" rel="nofollow">
            Part1:跨交换机的同一子网、同一VLAN内通信
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#1_30" rel="nofollow">
              第1步，连连看（按图接线）
             </a>
            </li>
            <li>
             <a href="#2IPIP_33" rel="nofollow">
              第2步，将四台电脑IP分别配置如下（IP这玩意可不能随便改嗷😎）
             </a>
            </li>
            <li>
             <a href="#3SW1SW2_46" rel="nofollow">
              第3步，配置二层交换机SW1和SW2
             </a>
            </li>
            <li>
             <ul>
              <li>
               <a href="#Step1_47" rel="nofollow">
                Step1.进入命令行终端
               </a>
              </li>
              <li>
               <a href="#Step2_70" rel="nofollow">
                Step2.输入配置命令（啊？又要输命令？？别担心，直接复制就完事）
               </a>
              </li>
             </ul>
            </li>
            <li>
             <a href="#4pingWindowsYYDS_149" rel="nofollow">
              第4步，ping连通性（Windows黑框框YYDS！！）
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#Part2VLAN_153" rel="nofollow">
            Part2：实现跨交换机上不同子网、不同VLAN成员之间通信
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#1__155" rel="nofollow">
              第1步. 接线（连连看？？这不有手就行😏）
             </a>
            </li>
            <li>
             <a href="#2_IPdoge_157" rel="nofollow">
              第2步. 改IP、改网关（这就不用再放图了吧？？doge）
             </a>
            </li>
            <li>
             <a href="#3___177" rel="nofollow">
              第3步. 进入三层交换机的命令行终端 输入以下命令
             </a>
            </li>
            <li>
             <a href="#4_ping_225" rel="nofollow">
              第4步. 有点小激动，赶紧ping一下
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
        <li>
         <a href="#6_229" rel="nofollow">
          6.问题与思考
         </a>
        </li>
        <li>
         <ul>
          <li>
           <ul>
            <li>
             <a href="#1VLAN_230" rel="nofollow">
              1.子网与VLAN有何不同？
             </a>
            </li>
            <li>
             <a href="#231PC1PC2PC3PC4IP1721610024VLAN_10VLAN_20VLAN_30VLAN_40_240" rel="nofollow">
              2.在图3-1中，如果PC1、PC2、PC3和PC4的IP地址不变（即仍属于同一子网172.16.10.0/24），但分别属于VLAN 10、VLAN 20、VLAN 30、VLAN 40，它们之间还能互相通信吗？要想通信，应该怎么办？
             </a>
            </li>
            <li>
             <a href="#3VLAN_242" rel="nofollow">
              3.不同子网、不同VLAN之间的通信，可以通过哪几种方法来实现？
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h3>
     <a id="1__5">
     </a>
     1. 实验目的
    </h3>
    <p>
     1．深入理解虚拟局域网（VLAN）的作用，并体会VLAN与子网之间的关系；
     <br/>
     2．熟练掌握在H3C交换机上进行VLAN配置、实现各VLAN成员之间通信的方法。
    </p>
    <h3>
     <a id="2__8">
     </a>
     2. 实验内容
    </h3>
    <p>
     1．每4人一组，实现跨交换机上同一子网、同一VLAN内成员之间的通信；
     <br/>
     2．每4人一组，实现跨交换机上不同子网、不同VLAN内成员之间的通信。
    </p>
    <h3>
     <a id="3__11">
     </a>
     3. 实验设备
    </h3>
    <p>
     每组实验需要：H3C E126交换机（二层交换机）2台，H3C S3610-28TP交换机（三层交换机）1台，PC 4台，UTP跳线6条（每个机柜为一组）。
    </p>
    <h3>
     <a id="4__13">
     </a>
     4. 实验原理
    </h3>
    <h4>
     <a id="Part1VLAN_14">
     </a>
     Part1：实现跨交换机上同一子网、同一VLAN内成员之间通信
    </h4>
    <p>
     网络拓扑结构如图3-1所示。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ccf6fbd18fd9705d15727c376af6c149.png"/>
    </p>
    <p>
     <strong>
      PC1、PC2、PC3、PC4在同一子网
     </strong>
     172.16.10.0/24内，
     <strong>
      PC1、PC2连接在交换机SW1
     </strong>
     上，
     <strong>
      PC3、PC4连接在交换机SW2
     </strong>
     上。SW1和SW2选用H3C E126交换机，它们的
     <strong>
      13
     </strong>
     ～16端口
     <strong>
      加入VLAN 10
     </strong>
     ，
     <strong>
      17
     </strong>
     ～20端口
     <strong>
      加入VLAN 20
     </strong>
     ；它们的
     <strong>
      24端口设置为Trunk
     </strong>
     类型。
     <strong>
      PC1、PC3属于VLAN 10
     </strong>
     ，
     <strong>
      PC2、PC4属于VLAN 20
     </strong>
     。
     <br/>
     <font color="RED">
      <strong>
       组网要求
      </strong>
     </font>
     ：PC1与PC3连通；PC2与PC4连通。
    </p>
    <h4>
     <a id="Part2VLAN_20">
     </a>
     Part2：实现跨交换机上不同子网、不同VLAN成员之间通信
    </h4>
    <p>
     网络拓扑结构如图3-2所示。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5c2d23e097e2724018321bf2474ffa38.png"/>
    </p>
    <p>
     <strong>
      PC1和PC3
     </strong>
     同属VLAN
     <strong>
      10
     </strong>
     ，
     <strong>
      网关地址为172.16.10.254
     </strong>
     /24；
     <br/>
     <strong>
      PC2和PC4
     </strong>
     同属VLAN
     <strong>
      20
     </strong>
     ，
     <strong>
      网关地址为172.16.20.254
     </strong>
     /24；
     <br/>
     SW3使用S3610-28TP交换机，其Trunk端口分别使用端口1和2。
     <br/>
     <font color="RED">
      <strong>
       组网要求
      </strong>
     </font>
     ：4个PC之间两两互通。
    </p>
    <h3>
     <a id="5__28">
     </a>
     5. 实验操作步骤（傻瓜式操作步骤）
    </h3>
    <h4>
     <a id="Part1VLAN_29">
     </a>
     Part1:跨交换机的同一子网、同一VLAN内通信
    </h4>
    <h5>
     <a id="1_30">
     </a>
     第1步，连连看（按图接线）
    </h5>
    <p>
     为了方便读者食用，我画了一张理解拓扑图与实物图的对应关系图，如下👇
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/58a9b414e8c12c2b77cc6e7458ea3be2.png#pic_center"/>
    </p>
    <h5>
     <a id="2IPIP_33">
     </a>
     第2步，将四台电脑IP分别配置如下（IP这玩意可不能随便改嗷😎）
    </h5>
    <p>
     ①PC_1
     <br/>
     IP：172.16.10.1 掩码：255.255.255.0
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/82ed4971fae0a9002410157396a4e7ea.png">
      <br/>
      ②PC_2
      <br/>
      IP：172.16.10.2 掩码：255.255.255.0
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f9b58354257e8f9e82ff9bea66bd8f20.png">
       <br/>
       ③PC_3
       <br/>
       IP：172.16.10.3 掩码：255.255.255.0
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1529143b856d278146b7233a42546c9e.png">
        <br/>
        ④PC_4
        <br/>
        IP：172.16.10.4 掩码：255.255.255.0
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/02000241d3115de8131d104ea865e5f3.png"/>
       </img>
      </img>
     </img>
    </p>
    <h5>
     <a id="3SW1SW2_46">
     </a>
     第3步，配置二层交换机SW1和SW2
    </h5>
    <h6>
     <a id="Step1_47">
     </a>
     Step1.进入命令行终端
    </h6>
    <p>
     <strong>
      <font color="red">
       分情况，如果是旧设备：
      </font>
     </strong>
     <br/>
     <strong>
      ①打开浏览器，在地址栏中输入自己小组对应设备的IP地址
     </strong>
     （不会吧，不会还有人不知道URL和IP地址是什么吧？？🤔）
     <br/>
     A组和B组学生输入“http://192.168.0.1:8888/”
     <br/>
     C组和D组学生输入“http://192.168.0.2:8888/”
     <br/>
     E组和F组学生输入“http://192.168.0.3:8888/”
     <br/>
     G组和H组学生输入“http://192.168.0.4:8888/”
     <br/>
     进入到“H3C设备管理控制台－用户登录”界面，如图所示
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/11d8c77572cf8fa7b0ecafa52c232e0d.jpeg#pic_center"/>
    </p>
    <p>
     <strong>
      ②用户名输入“stu”，密码输入“stu”，按“登录”按扭或回车键，如图所示
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/624c500d138cec26823e524c28ee2e5f.jpeg#pic_center"/>
    </p>
    <p>
     <strong>
      ③进入设备管理控制界面。横向第一排为A、C、E、G组设备，第二排为B、D、F、H组设备。防火墙设备SecPathF100-S为两组共用设备，如图所示。
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/6b639350982e5f898214db45e4436093.jpeg#pic_center"/>
     <br/>
     打开的令行终端如下图（跟Window黑框框有的一拼😉）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/03abf84e560abf52c6bc77e0df1e71bd.png"/>
     <br/>
     <strong>
      <font color="red">
       如果是新设备：
      </font>
     </strong>
     <br/>
     <strong>
      直接找到SecureCRT软件
     </strong>
     👇
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e401528422bb88bee36c29b526f05f04.png"/>
    </p>
    <p>
     <strong>
      双击打开，就可以看到所有的设备，双击对应设备即可进入对应命令行终端
     </strong>
     。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5d8ce0b92f71310ba0f16969fe359886.png"/>
    </p>
    <h6>
     <a id="Step2_70">
     </a>
     Step2.输入配置命令（啊？又要输命令？？别担心，直接复制就完事）
    </h6>
    <p>
     <strong>
      注意
     </strong>
     ：
     <br/>
     本次实验用的是H3C命令，非Cisico命令，请注意区分；
     <br/>
     尖括号和方括号后的内容是命令，命令不区分大小写，可以输入缩写命令，通常是输入每个命令单词的前三个字母；忘记命令时，可以输入命令的前几个字母然后按下Tab键，会自动补全命令。
    </p>
    <p>
     （如果报错且
     <strong>
      定位为GigabitEthernet
     </strong>
     如图：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/4daa5a68a53b3ae7c8d08ea369f9148b.png"/>
     <br/>
     说明是
     <strong>
      老设备
     </strong>
     （老设备？都啥年代了？？？[狗头]），把所有
     <strong>
      GigabitEthernet
     </strong>
     改为
     <strong>
      Ethernet
     </strong>
     再重新输入））
    </p>
    <p>
     <strong>
      ①在
      <font color="red">
       二层交换机1
      </font>
      的命令行终端中 输入以下配置命令
     </strong>
     <br/>
     <strong>
      &lt; &gt;和[ ]后边的是命令，//后的内容为注释
     </strong>
    </p>
    <pre><code class="prism language-clike"><span class="token operator">&lt;</span>H3C<span class="token operator">&gt;</span>sys  <span class="token comment">//进入系统视图</span>
<span class="token punctuation">[</span>H3C<span class="token punctuation">]</span>sysname SW1  <span class="token comment">//命名为SW1</span>
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>vlan <span class="token number">10</span>  <span class="token comment">//创建vlan10</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>vlan10<span class="token punctuation">]</span>port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">13</span>  <span class="token comment">//老设备输入port Ethernet 1/0/13，将1/0/13端口，也就是pc_1连到的二层1交换机的13端口划入vlan10 </span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>vlan10<span class="token punctuation">]</span>quit  <span class="token comment">//退到上一级</span>
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>vlan <span class="token number">20</span>  <span class="token comment">//创建vlan20</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>vlan20<span class="token punctuation">]</span> port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">17</span>  <span class="token comment">//老设备输入port Ethernet 1/0/17，将1/0/17端口，也就是pc_2连到的二层1交换机的17端口划入vlan10 </span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>vlan20<span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>interface <span class="token class-name">GigabitEthernet</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span>  <span class="token comment">//老设备输入interface Ethernet 1/0/24，进入1/0/24端口，就是俩二层交换机相连的二层1交换机的24端口</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">]</span>port link<span class="token operator">-</span>type trunk  <span class="token comment">//端口设为trunk类型</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">]</span>port trunk permit vlan all  <span class="token comment">//将trunk端口设为允许所有vlan通过</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f6d850126783d7b20c15816afa4b5644.png#pic_center"/>
    </p>
    <p>
     (你可能用到的其他命令：
     <br/>
     查看所有配置信息：dis cur或display current-configuration
     <br/>
     查看ip配置信息：dis ip int bre或display ip interface brief
     <br/>
     删除配置：undo + 要删的内容，比如[SW1-vlan10]undo vlan 10 ）
    </p>
    <p>
     <strong>
      配置二层交换机1也可以直接复制下边的命令（懒人必备！！！），跟上边的命令作用完全一样，方便一次性粘贴到二层交换机1命令行窗口中
     </strong>
     快速配置（出错说明是老设备，把所有GigabitEthernet改为Ethernet再重新粘贴到命令行窗口中）
    </p>
    <pre><code class="prism language-clike">sys
sysname SW1
vlan <span class="token number">10</span>
port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">13</span>
quit
vlan <span class="token number">20</span>
port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">17</span>
quit
interface <span class="token class-name">GigabitEthernet</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span>
port link<span class="token operator">-</span>type trunk
port trunk permit vlan all
</code></pre>
    <p>
     <strong>
      ②在二层交换机2的命令行窗口 输入 以下配置命令（&lt; &gt;和[ ]后边的是命令，// 后内容为注释）
     </strong>
    </p>
    <pre><code class="prism language-c"><span class="token operator">&lt;</span>H3C<span class="token operator">&gt;</span>sys
<span class="token punctuation">[</span>H3C<span class="token punctuation">]</span>sysname SW2
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>vlan <span class="token number">10</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>vlan10<span class="token punctuation">]</span>port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">13</span>  <span class="token comment">//老设备用port Ethernet 1/0/13，将pc_3所连的13号端口划到vlan10</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>vlan10<span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>vlan <span class="token number">20</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>vlan20<span class="token punctuation">]</span>port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">17</span>  <span class="token comment">//老设备用port Ethernet 1/0/17，将pc_4所连的17号端口划到vlan20</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>vlan20<span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>interface GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span>  <span class="token comment">//老设备用port Ethernet 1/0/24，进入二层2交换机的24端口</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">]</span>port link<span class="token operator">-</span>type trunk
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">]</span>port trunk permit vlan all
</code></pre>
    <p>
     同样，
     <strong>
      不想敲二层交换机2的配置命令的话，可以直接 复制粘贴 下面的命令，跟上边的等效
     </strong>
     （如果是老设备请先把所有GigabitEthernet改为Ethernet再尝试）
    </p>
    <pre><code class="prism language-c">sys
sysname SW2
vlan <span class="token number">10</span>
port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">13</span>
quit
vlan <span class="token number">20</span>
port GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">17</span>
quit
interface GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span>
port link<span class="token operator">-</span>type trunk
port trunk permit vlan all
</code></pre>
    <h5>
     <a id="4pingWindowsYYDS_149">
     </a>
     第4步，ping连通性（Windows黑框框YYDS！！）
    </h5>
    <p>
     至此，Part1部分的实验已经完成，将PC_1、PC_3划到了VLAN10，PC_2、PC_4划到了VLAN20，在Windows控制台ping连通性时结果是1、3通，2、4通，其余不连通则为正确结果。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/55f12e53af4b88684c14ab1da1783eca.png#pic_center"/>
     <br/>
     没问题的话，可以找老师验证一下这部分。
    </p>
    <h4>
     <a id="Part2VLAN_153">
     </a>
     Part2：实现跨交换机上不同子网、不同VLAN成员之间通信
    </h4>
    <p>
     步骤：
    </p>
    <h5>
     <a id="1__155">
     </a>
     第1步. 接线（连连看？？这不有手就行😏）
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ffeaff3e5bf49ce0f66f392e83e01c08.png#pic_center"/>
    </p>
    <h5>
     <a id="2_IPdoge_157">
     </a>
     第2步. 改IP、改网关（这就不用再放图了吧？？doge）
    </h5>
    <p>
     保持
     <strong>
      PC_1、PC_3
     </strong>
     的
     <strong>
      IP不变
     </strong>
     <br/>
     把
     <strong>
      PC_2、PC_4
     </strong>
     的
     <strong>
      IP分别改为
     </strong>
    </p>
    <pre><code class="prism language-c"><span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.2</span>和<span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.4</span>
</code></pre>
    <p>
     把
     <strong>
      PC_1、PC_3
     </strong>
     的
     <strong>
      网关
     </strong>
     设置为
    </p>
    <pre><code class="prism language-c"><span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.254</span>
</code></pre>
    <p>
     把
     <strong>
      PC_2、PC_4
     </strong>
     的网关设为
    </p>
    <pre><code class="prism language-c"><span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.254</span>
</code></pre>
    <h5>
     <a id="3___177">
     </a>
     第3步. 进入三层交换机的命令行终端 输入以下命令
    </h5>
    <p>
     （同样，不能运行GigabitEthernet就换成Ethernet）
    </p>
    <pre><code class="prism language-c"><span class="token operator">&lt;</span>H3C<span class="token operator">&gt;</span>sys
<span class="token punctuation">[</span>H3C<span class="token punctuation">]</span>sysname SW3
<span class="token punctuation">[</span>SW3<span class="token punctuation">]</span>vlan <span class="token number">10</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>vlan10<span class="token punctuation">]</span>interface vlan <span class="token number">10</span>  <span class="token comment">//进入vlan10</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>Vlan<span class="token operator">-</span>interface10<span class="token punctuation">]</span>ip address <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.254</span> <span class="token number">24</span>  <span class="token comment">//设置网关，要与pc_1、pc_3的网关一致</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>Vlan<span class="token operator">-</span>interface10<span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW3<span class="token punctuation">]</span>vlan <span class="token number">20</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>vlan20<span class="token punctuation">]</span>interface vlan <span class="token number">20</span>  <span class="token comment">//进入vlan20</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>Vlan<span class="token operator">-</span>interface20<span class="token punctuation">]</span>ip address <span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.254</span> <span class="token number">24</span>  <span class="token comment">//设置网关，要与pc_2、pc_4的网关一致</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>Vlan<span class="token operator">-</span>interface20<span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW3<span class="token punctuation">]</span>interface GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>  <span class="token comment">//进入端口1/0/1，就是二层交换机1连到三层交换机上的1号端口</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>port link<span class="token operator">-</span>type trunk  <span class="token comment">//设为trunk类型</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>port trunk permit vlan all  <span class="token comment">//允许所有vlan通过</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW3<span class="token punctuation">]</span>interface GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>  <span class="token comment">//进入端口1/0/2，就是二层交换机2连到三层交换机上的2号端口</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>port link<span class="token operator">-</span>type trunk  <span class="token comment">//设为trunk </span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>port trunk permit vlan all  <span class="token comment">//允许所有vlan</span>
<span class="token punctuation">[</span>SW3<span class="token operator">-</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>quit
</code></pre>
    <p>
     <strong>
      同样，下面是可直接复制粘贴使用的纯命令，与上边的等效
     </strong>
    </p>
    <pre><code class="prism language-c">sys
sysname SW3
vlan <span class="token number">10</span>
interface vlan <span class="token number">10</span>
ip address <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.254</span> <span class="token number">24</span>
quit
vlan <span class="token number">20</span>
interface vlan <span class="token number">20</span>
ip address <span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.254</span> <span class="token number">24</span>
quit
interface GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
port link<span class="token operator">-</span>type trunk
port trunk permit vlan all
quit
interface GigabitEthernet <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
port link<span class="token operator">-</span>type trunk
port trunk permit vlan all
quit
</code></pre>
    <h5>
     <a id="4_ping_225">
     </a>
     第4步. 有点小激动，赶紧ping一下
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d1d1294ce04415957931f0f8a5849e32.png#pic_center"/>
    </p>
    <p>
     至此，part2部分的实验完成，结果是
     <strong>
      四台机器全部能ping通
     </strong>
     ，没有问题可以找老师验收了！！
    </p>
    <h3>
     <a id="6_229">
     </a>
     6.问题与思考
    </h3>
    <h5>
     <a id="1VLAN_230">
     </a>
     1.子网与VLAN有何不同？
    </h5>
    <p>
     ①
     <strong>
      作用不同
     </strong>
     <br/>
     <em>
      子网其实就是IP地址段的划分。严谨地说就是网络地址+子网掩码这两个因素确定的IP地址范围。比如子网掩码是255.255.255.0（简单的说也就是 /24），而网络地址是172.16.10.0，那么它定义了一个IP地址范围：从172.16.10.0到172.16.10.255。
      <br/>
      VLAN比较容易理解的就是“交换分区”，作用是将流量进行隔离。正如上边一台交换机上划分的VLAN10和VLAN20，它们之间互相看不到对方的流量，逻辑上相当于把一台交换机变成了两台交换机。
     </em>
     <br/>
     ②
     <strong>
      所处的网络层不同
     </strong>
     <br/>
     子网工作在网络第3层。比如个人电脑、服务器、以及打印机等都适用第三层（IP）寻址。
     <br/>
     VLAN工作在网络第2层。类似于也在2层的以太网交换机的功能。举个例子来说，如果没有VLAN，你可能需要更多的交换机来完成同样的隔离。VLAN使得1个第2层设备达到多个第2层设备的效果。
     <br/>
     ③
     <strong>
      隔离效果不同
     </strong>
     <br/>
     子网只不过是一个IP地址范围，可以帮助主机通过第3层进行通信。实现了三层的隔离。
     <br/>
     VLAN基于二层沙箱实现隔离，隔离的更彻底。
    </p>
    <h5>
     <a id="231PC1PC2PC3PC4IP1721610024VLAN_10VLAN_20VLAN_30VLAN_40_240">
     </a>
     2.在图3-1中，如果PC1、PC2、PC3和PC4的IP地址不变（即仍属于同一子网172.16.10.0/24），但分别属于VLAN 10、VLAN 20、VLAN 30、VLAN 40，它们之间还能互相通信吗？要想通信，应该怎么办？
    </h5>
    <p>
     不能，想要通信就需要使用单臂路由或者配置trunk接口。
    </p>
    <h5>
     <a id="3VLAN_242">
     </a>
     3.不同子网、不同VLAN之间的通信，可以通过哪几种方法来实现？
    </h5>
    <p>
     ①路由器
     <br/>
     ②三层交换机
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f34363333323832302f:61727469636c652f64657461696c732f313231373131303036" class_="artid" style="display:none">
 </p>
</div>


