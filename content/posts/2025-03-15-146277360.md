---
layout: post
title: "MyBatis框架操作数据库一xml和动态Sql"
date: 2025-03-15 13:56:15 +0800
description: "### if 标签和trim标签：> **trim标签需要搭配一些属性使用，如下：**> **prefix：表示整个语句块，以prefix的值作为前缀**> **suffix：表示整个语句块，以suffix的值作为后缀**> **prefixOverrides：表示整个语句块要去除掉的前缀**> **suffixOverrides：表示整个语句块要去除掉的后缀**"
keywords: "MyBatis框架操作数据库一＞xml和动态Sql"
categories: ['Javaee']
tags: ['数据库', 'Xml', 'Mybatis']
artid: "146277360"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146277360
    alt: "MyBatis框架操作数据库一xml和动态Sql"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146277360
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146277360
cover: https://bing.ee123.net/img/rand?artid=146277360
image: https://bing.ee123.net/img/rand?artid=146277360
img: https://bing.ee123.net/img/rand?artid=146277360
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     MyBatis框架操作数据库一＞xml和动态Sql
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <blockquote>
     <p>
      <strong>
       Mybatis的开发有两种方式：
      </strong>
      ：
      <br/>
      <strong>
       注解和XML，这里我们讲解XML的方式和基于XML实现动态Sql
      </strong>
     </p>
    </blockquote>
    <h2>
     <a id="MyBatis_4">
     </a>
     配置连接字符串和MyBatis:
    </h2>
    <blockquote>
     <p>
      <strong>
       这里要做两项：
      </strong>
      <br/>
      <strong>
       1.数据库的连接配置
      </strong>
      <br/>
      <strong>
       2.XML的配置
      </strong>
      <br/>
      <strong>
       以上配置我们都是用yml的配置文件格式
      </strong>
     </p>
    </blockquote>
    <h4>
     <a id="_10">
     </a>
     数据库的连接配置：
    </h4>
    <pre><code class="prism language-java">spring<span class="token operator">:</span>
  application<span class="token operator">:</span>
     name<span class="token operator">:</span> <span class="token class-name">Spring</span><span class="token operator">-</span>mybaties
  datasource<span class="token operator">:</span>
    url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>mybatis_test<span class="token operator">?</span>characterEncoding<span class="token operator">=</span>utf8<span class="token operator">&amp;</span>useSSL<span class="token operator">=</span><span class="token boolean">false</span><span class="token operator">&amp;</span>allowPublicKeyRetrieval<span class="token operator">=</span><span class="token boolean">true</span>
    username<span class="token operator">:</span> root
    password<span class="token operator">:</span> <span class="token number">123456</span>
    driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       这里注意：自己连接数据库的密码，和数据库名
      </strong>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/76b22020473f48b58bd4ac9365629b8a.png"/>
     </p>
    </blockquote>
    <h4>
     <a id="XML_27">
     </a>
     XML的配置：
    </h4>
    <pre><code class="prism language-java">mybatis<span class="token operator">:</span>
  configuration<span class="token operator">:</span>
    log<span class="token operator">-</span>impl<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>logging<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span></span>StdOutImpl</span> # 打印mybatis日志
    map<span class="token operator">-</span>underscore<span class="token operator">-</span><span class="token keyword">to</span><span class="token operator">-</span>camel<span class="token operator">-</span><span class="token keyword">case</span><span class="token operator">:</span> <span class="token boolean">true</span> # 配置数据库和<span class="token class-name">Java</span>字段的驼峰转换
  mapper—locations<span class="token operator">:</span> classpath<span class="token operator">:</span>mapper<span class="token comment">/*.xml # XML配置
</span></code></pre>
    <blockquote>
     <p>
      <strong>
       注意：xml文件配置要与resource/mapper目录下的xml文件对应
      </strong>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/06e6c55ebfc04c01be6b7d5e28334cbd.png"/>
     </p>
    </blockquote>
    <h2>
     <a id="XMLSql_41">
     </a>
     XML编写Sql:
    </h2>
    <h4>
     <a id="model_42">
     </a>
     model层：
    </h4>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>suli<span class="token punctuation">.</span>springmybaties<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deleteFlag<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>

</code></pre>
    <blockquote>
     <p>
      <strong>
       注意Java字段大驼峰数据库的字段蛇形命名，要记得加上驼峰转换配置，或者自己用标签来绑定
      </strong>
     </p>
     <hr/>
     <p>
      <strong>
       标签绑定代码：
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">"BaseMap"</span> type<span class="token operator">=</span><span class="token string">"com.suli.springmybaties.model.UserInfo"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">"id"</span> column<span class="token operator">=</span><span class="token string">"id"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"deleteFlag"</span> column<span class="token operator">=</span><span class="token string">"delete_flag"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"createTime"</span> column<span class="token operator">=</span><span class="token string">"create_time"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"updateTime"</span> column<span class="token operator">=</span><span class="token string">"update_time"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       注意：
      </strong>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d854e27c417a4a469d3cef85eee59073.png"/>
     </p>
    </blockquote>
    <h4>
     <a id="mapper_82">
     </a>
     mapper层：
    </h4>
    <blockquote>
     <p>
      <strong>
       演示一个查询：
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>suli<span class="token punctuation">.</span>springmybaties<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>suli<span class="token punctuation">.</span>springmybaties<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">UserInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserInfoMapperXML</span> <span class="token punctuation">{<!-- --></span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       对应的XML文件：
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> mapper <span class="token constant">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"com.suli.springmybaties.mapper.UserInfoMapperXML"</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">"BaseMap"</span> type<span class="token operator">=</span><span class="token string">"com.suli.springmybaties.model.UserInfo"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">"id"</span> column<span class="token operator">=</span><span class="token string">"id"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"deleteFlag"</span> column<span class="token operator">=</span><span class="token string">"delete_flag"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"createTime"</span> column<span class="token operator">=</span><span class="token string">"create_time"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"updateTime"</span> column<span class="token operator">=</span><span class="token string">"update_time"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"selectAll"</span> resultType<span class="token operator">=</span><span class="token string">"com.suli.springmybaties.model.UserInfo"</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> from user_info
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"selectAll2"</span> resultMap<span class="token operator">=</span><span class="token string">"BaseMap"</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> from user_info
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre>
    <h2>
     <a id="Sql_124">
     </a>
     动态Sql:
    </h2>
    <blockquote>
     <p>
      <strong>
       动态SQL是Mybatis的强大特性之一，能够完成不同条件下不同的sql拼接
      </strong>
     </p>
     <hr/>
     <p>
      <strong>
       在特定的业务场景下可能，有的字段为非必须字段，不需要用户填，有的字段为必须字段，需要用户填写，这个时候我们的动态Sql就发挥作用，这个时候就可以使用 if标签
      </strong>
     </p>
    </blockquote>
    <h4>
     <a id="if_trim_131">
     </a>
     if 标签和trim标签：
    </h4>
    <blockquote>
     <p>
      <strong>
       trim标签需要搭配一些属性使用，如下：
      </strong>
      <br/>
      <strong>
       prefix：表示整个语句块，以prefix的值作为前缀
      </strong>
      <br/>
      <strong>
       suffix：表示整个语句块，以suffix的值作为后缀
      </strong>
      <br/>
      <strong>
       prefixOverrides：表示整个语句块要去除掉的前缀
      </strong>
      <br/>
      <strong>
       suffixOverrides：表示整个语句块要去除掉的后缀
      </strong>
     </p>
     <hr/>
     <p>
      <strong>
       插入sql演示：INSERT INTO user_info （username,
       <code>
        password
       </code>
       ，gender, age）values()
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token operator">&lt;</span>insert id<span class="token operator">=</span><span class="token string">"insertUser3"</span><span class="token operator">&gt;</span>

        <span class="token constant">INSERT</span> <span class="token constant">INTO</span> user_info

    <span class="token operator">&lt;</span>trim prefix<span class="token operator">=</span><span class="token string">"("</span> suffix<span class="token operator">=</span><span class="token string">")"</span> suffixOverrides<span class="token operator">=</span><span class="token string">","</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"username != null"</span><span class="token operator">&gt;</span>
            username<span class="token punctuation">,</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"password != null"</span><span class="token operator">&gt;</span>
            `password`<span class="token punctuation">,</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"gender != null"</span><span class="token operator">&gt;</span>
            gender<span class="token punctuation">,</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"age != null"</span><span class="token operator">&gt;</span>
            age
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>trim<span class="token operator">&gt;</span>
    <span class="token constant">VALUES</span>
    <span class="token operator">&lt;</span>trim prefix<span class="token operator">=</span><span class="token string">"("</span> suffix<span class="token operator">=</span><span class="token string">")"</span> suffixOverrides<span class="token operator">=</span><span class="token string">","</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"username != null"</span><span class="token operator">&gt;</span>
            #<span class="token punctuation">{<!-- --></span>username<span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"password != null"</span><span class="token operator">&gt;</span>
           #<span class="token punctuation">{<!-- --></span>password<span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"gender != null"</span><span class="token operator">&gt;</span>
            #<span class="token punctuation">{<!-- --></span>gender<span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"age != null"</span><span class="token operator">&gt;</span>
            #<span class="token punctuation">{<!-- --></span>age<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>trim<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="where_186">
     </a>
     where标签:
    </h4>
    <blockquote>
     <p>
      <strong>
       当有业务需要写条件时一定需要where条件筛选：
      </strong>
      <br/>
      <strong>
       比如：SELECT * FROM user_info WHERE phone = ? and delete_flag = ?
      </strong>
     </p>
     <hr/>
     <p>
      <strong>
       方法一：直接拼不使用where
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> user_info <span class="token constant">WHERE</span>
            <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"phone != null"</span><span class="token operator">&gt;</span>
                 phone <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>phone<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
            
            <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"deleteFlag != null"</span><span class="token operator">&gt;</span>
                and delete_flag <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>deleteFlag<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       方法二：也是拼接，这里不用去掉两个and
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> user_info where <span class="token number">1</span><span class="token operator">=</span> <span class="token number">1</span>
            <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"phone != null"</span><span class="token operator">&gt;</span>
                and phone <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>phone<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"deleteFlag != null"</span><span class="token operator">&gt;</span>
                and delete_flag <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>deleteFlag<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       方法三：使用where标签：
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> user_info 
        <span class="token generics"><span class="token punctuation">&lt;</span>where<span class="token punctuation">&gt;</span></span>
            <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"phone != null"</span><span class="token operator">&gt;</span>
                and phone <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>phone<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"deleteFlag != null"</span><span class="token operator">&gt;</span>
                and delete_flag <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>deleteFlag<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>where<span class="token operator">&gt;</span>
</code></pre>
    <blockquote>
     <hr/>
     <p>
      <strong>
       where标签总结：
      </strong>
      <br/>
      <strong>
       1.当where标签内没有内容时，会自己去除where关键字
      </strong>
      <br/>
      <strong>
       2.当where标签内有条件时，会添加where关键字，还会去除前面的“and”
      </strong>
     </p>
    </blockquote>
    <h4>
     <a id="Set_239">
     </a>
     Set标签:
    </h4>
    <blockquote>
     <p>
      <strong>
       当需要根据传入的用户对象属性来更新用户数据，可以使用set标签来指定动态内容
      </strong>
     </p>
     <hr/>
     <p>
      <strong>
       要实现：UPDATE user_info SET gender = ?, password = ?, age = ? WHERE id = ?
      </strong>
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token operator">&lt;</span>update id<span class="token operator">=</span><span class="token string">"updateByConfition"</span><span class="token operator">&gt;</span>
        <span class="token constant">UPDATE</span> user_info
            <span class="token generics"><span class="token punctuation">&lt;</span>set<span class="token punctuation">&gt;</span></span>
                <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"gender != null"</span><span class="token operator">&gt;</span>
                    gender <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>gender<span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"password != null"</span><span class="token operator">&gt;</span>
                    password <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>password<span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"age != null"</span><span class="token operator">&gt;</span>
                    age <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>age<span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>set<span class="token operator">&gt;</span>
        <span class="token class-name">WHERE</span> id <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>update<span class="token operator">&gt;</span>
</code></pre>
    <h4>
     <a id="Foreach_267">
     </a>
     Foreach标签:
    </h4>
    <blockquote>
     <p>
      <strong>
       有时会使用到 in关键来指定集合可以使用这个标签
      </strong>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dc0ade47410f4d3386460a452fbfd66d.png"/>
     </p>
    </blockquote>
    <blockquote>
     <hr/>
     <p>
      ** 例如：DELETE FROM user_info WHERE id in ( ? , ? )**
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/62012fead0014fb6a393d4745e17f23e.png"/>
     </p>
    </blockquote>
    <pre><code class="prism language-java"> <span class="token operator">&lt;</span>delete id<span class="token operator">=</span><span class="token string">"batchDelete"</span><span class="token operator">&gt;</span>

        <span class="token constant">DELETE</span> <span class="token constant">FROM</span> user_info <span class="token constant">WHERE</span> id in
        <span class="token operator">&lt;</span>foreach collection<span class="token operator">=</span><span class="token string">"ids"</span> <span class="token keyword">open</span><span class="token operator">=</span><span class="token string">"("</span> close<span class="token operator">=</span><span class="token string">")"</span> separator<span class="token operator">=</span><span class="token string">","</span> item<span class="token operator">=</span><span class="token string">"id"</span><span class="token operator">&gt;</span>
                #<span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>foreach<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>delete<span class="token operator">&gt;</span>
</code></pre>
    <hr/>
    <blockquote>
     <p>
      <strong>
       当每个元素是一个对象，要插入多个：INSERT INTO user_info(username,
       <code>
        password
       </code>
       ,age) VALUES (?,?,?) , (?,?,?)
      </strong>
      <br/>
      <img alt="这里是引用" src="https://i-blog.csdnimg.cn/direct/0a2a254ec679471aa72181e23bbb7ac7.png"/>
     </p>
    </blockquote>
    <pre><code class="prism language-java"> <span class="token operator">&lt;</span>insert id<span class="token operator">=</span><span class="token string">"insertUser4"</span><span class="token operator">&gt;</span>

        <span class="token constant">INSERT</span> <span class="token class-name">INTO</span> <span class="token function">user_info</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>`password`<span class="token punctuation">,</span>age<span class="token punctuation">)</span> <span class="token constant">VALUES</span>
        <span class="token operator">&lt;</span>foreach collection<span class="token operator">=</span><span class="token string">"userInfos"</span> item<span class="token operator">=</span><span class="token string">"userInfo"</span> separator<span class="token operator">=</span><span class="token string">","</span><span class="token operator">&gt;</span>
            <span class="token punctuation">(</span>#<span class="token punctuation">{<!-- --></span>userInfo<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{<!-- --></span>userInfo<span class="token punctuation">.</span>password<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{<!-- --></span>userInfo<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>foreach<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f726f62696e5f73756c692f:61727469636c652f64657461696c732f313436323737333630" class_="artid" style="display:none">
 </p>
</div>


