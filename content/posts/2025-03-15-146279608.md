---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f323330325f37393533313034312f:61727469636c652f64657461696c732f313436323739363038"
layout: post
title: "C入门基础二引用const引用内联函数inlinenullptr"
date: 2025-03-15 16:43:54 +0800
description: "C++11中引入nullptr，nullptr是一个特殊的关键字，nullptr是一种特殊类型的字面量，它可以转换成任意其他类型的指针类型。上图中，a、b原本的值为2（其中b为a的引用），当执行a++ 时，a、b的值均加1，变为3；引用不是新定义一个变量，而是给已存在变量取了一个别名，编译器不会为引用变量开辟内存空间，它和它引用的变量共用同一块内存空间。C++中指针和引用就像两个性格迴异的亲兄弟，在实践中他们相辅相成，功能有重叠性，但是各有自己的特点，互相不可替代。现在令ra为a的别名，权限被放大。"
keywords: "【C++】入门基础（二）引用、const引用、内联函数inline、nullptr"
categories: ['未分类']
tags: ['青少年编程', '编辑器', '数据结构', '开发语言', 'C', 'C']
artid: "146279608"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146279608
    alt: "C入门基础二引用const引用内联函数inlinenullptr"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146279608
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146279608
cover: https://bing.ee123.net/img/rand?artid=146279608
image: https://bing.ee123.net/img/rand?artid=146279608
img: https://bing.ee123.net/img/rand?artid=146279608
---

# 【C++】入门基础（二）引用、const引用、内联函数inline、nullptr

## 一、引用

### 1、概念

引用不是新定义一个变量，而是给已存在变量取了一个别名，编译器不会为引用变量开辟内存空间，它和它引用的变量共用同一块内存空间。
  
以下段代码为例：

```cpp
int a = 2;
int& b = a;

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/587e3ef09f00435ebd749f56251acf3e.png)
  
a,b地址相同：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/b26449f76d304d9ca79a050b45ab9175.png)

### 2、特性

* 引用在定义时必须初始化。
* 一个变量可以有多个引用。
* 引用一旦引用一个实体，再不能引用其他实体。
* 引用的改变，会影响原变量
    
  ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/82415267f261426b9d1ce257cd5396fa.png)

> 上图中，a、b原本的值为2（其中b为a的引用），当执行a++ 时，a、b的值均加1，变为3；接着执行b++ 时，a、b的值均加1，变为4

### 3、引用的使用

* 引用在实践中主要是于引用传参和引用做返回值中减少拷贝提高效率和改变引用对象时同时改变被引用对象。
* 引用传参跟指针传参功能是类似的，引用传参相对更方便一些。
* 引用和指针在实践中相辅相成，功能有重叠性，但是各有特点，互相不可替代。C++的引用跟其他语言的引用(如Java)是有很大的区别的，除了用法，最大的点，C++引用定义后不能改变指向,Java的引用可以改变指向。

### 4、实践：方便函数传址

之前在C语言中，调用函数实现两数交换需要传变量地址：

```c
//传址
void Swap1(int* x, int* y)
{
	int tmp = *x;
	*x = *y;
	*y = tmp;
}

```

而C++使用引用后，可以使代码更加轻便：

```cpp
//引用，形参的改变影响实参
void Swap2(int& x, int& y)
{
	int tmp = x;
	x = y;
	y = tmp;
}

```

两段程序均能实现两数交换，本质均是通过形参来改变实参。

## 二、const引用

可以引用一个const对象，但是必须用const引用。
  
const引用也可以引用普通对象，因为对象的访问权限在引用过程中可以缩小，但是不能放大。
  
**注意：权限可以缩小，但不能放大（只针对引用和指针）**

## 1、权限放大

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/7d9b5a212ee14c119f2922e3a3ccdc3d.png)

> 报错分析：
>   
> a被const修饰后，其权限变为：只能读，不能写（改）
>   
> 别名ra的权限为：可读可写
>   
> 现在令ra为a的别名，权限被放大

解决：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/84b09b697e0c4dfc88428c0e5b0fedf2.png)

## 2、权限缩小

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/5aa5322b3acc43018fe368fd356da5ef.png)
  
引用rb的权限被缩小了，但不改变原本b的权限。也就是说：
**同一块空间，当使用b的名字的时候，它是可读可写的，当使用rb的名字的时候，它只能读，不可写。**
  
b可以被修改，但rb不能被修改：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/da4d2ce988f8404e8700fc3f311dab78.png)

## 三、指针与引用的关系

C++中指针和引用就像两个性格迴异的亲兄弟，在实践中他们相辅相成，功能有重叠性，但是各有自己的特点，互相不可替代。

* 语法概念上引用是一个变量的取别名不开空间，指针是存储一个变量地址，要开空间。
* 引用在定义时必须初始化，指针建议初始化，但是语法上不是必须的。引用在初始化时引用一个对象后，就不能再引用其他对象;而指针可以在不断地改变指向对象。
* 引用可以直接访问指向对象，指针需要解引用才是访问指向对象。
* sizeof中含义不同，引用结果为引用类型的大小，但指针始终是地址空间所占字节个数(32位平台下占4个字节，64位下是8byte)
* 指针很容易出现空指针和野指针的问题，引用很少出现，引用使用起来相对更安全一些。

## 四、inline

* 用inline修饰的函数叫做内联函数，编译时C++编译器会在调用的地方展开内联函数，这样调用内联函数就不需要建立栈帧，提高效率。
* inline对于编译器而言只是一个建议，也就是说，加了inline编译器也可以选择在调用的地方不展开，不同编译器关于inline什么情况展开各不相同，因为C++标准没有规定。inline适用于频繁调用的短小函数，对于递归函数，代码相对多一些的函数，加上inline也会被编译器忽略。
* C语言实现宏函数也会在预处理时替换展开，但是宏函数实现很复杂很容易出错的，且不方便调试，C++设计了inline目的就是替代C的宏函数。
* vs编译器 debug版本下面默认是不展开inline的，这样方便调试。
* inline不建议将声明和定义分离到两个文件中，分离会导致链接错误。因为inline被展开，就没有函数地址，链接时会出现报错。

## 五、nullptr

C++11中引入nullptr，nullptr是一个特殊的关键字，nullptr是一种特殊类型的字面量，它可以转换成任意其他类型的指针类型。使用nullptr定义空指针可以避免类型转换的问题，因为nullptr只能被隐式地转换为指针类型，而不能被转换为整数类型。

## 六、谢谢观看！