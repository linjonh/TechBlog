---
layout: post
title: "ThinkPHP-模型-model-数据库操作"
date: 2023-09-25 20:42:27 +0800
description: "//数据库配置信息'DB_TYPE' => 'mysql',// 数据库类型'DB_HOST' =>"
keywords: "thinkphp model->select()"
categories: ['Thinkphp']
tags: ['无标签']
artid: "50937417"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=50937417
    alt: "ThinkPHP-模型-model-数据库操作"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=50937417
featuredImagePreview: https://bing.ee123.net/img/rand?artid=50937417
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ThinkPHP 模型  model  数据库操作
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <ol class="linenums">
     <li class="L0">
      <code>
       //数据库配置信息
      </code>
     </li>
     <li class="L1">
      <code>
       <span class="str">
        'DB_TYPE'
       </span>
       <span class="pln">
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="str">
        'mysql'
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 数据库类型
       </span>
      </code>
     </li>
     <li class="L2">
      <code>
       <span class="str">
        'DB_HOST'
       </span>
       <span class="pln">
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="str">
        'localhost'
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 服务器地址
       </span>
      </code>
     </li>
     <li class="L3">
      <code>
       <span class="str">
        'DB_NAME'
       </span>
       <span class="pln">
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="str">
        'thinkphp'
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 数据库名
       </span>
      </code>
     </li>
     <li class="L4">
      <code>
       <span class="str">
        'DB_USER'
       </span>
       <span class="pln">
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="str">
        'root'
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 用户名
       </span>
      </code>
     </li>
     <li class="L5">
      <code>
       <span class="str">
        'DB_PWD'
       </span>
       <span class="pln">
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="str">
        '123456'
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 密码
       </span>
      </code>
     </li>
     <li class="L6">
      <code>
       <span class="str">
        'DB_PORT'
       </span>
       <span class="pln">
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="lit">
        3306
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 端口
       </span>
      </code>
     </li>
     <li class="L7">
      <code>
       <span class="str">
        'DB_PREFIX'
       </span>
       <span class="pln">
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="str">
        'think_'
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 数据库表前缀
       </span>
      </code>
     </li>
     <li class="L8">
      <code>
       <span class="str">
        'DB_CHARSET'
       </span>
       <span class="pun">
        =&gt;
       </span>
       <span class="pln">
       </span>
       <span class="str">
        'utf8'
       </span>
       <span class="pun">
        ,
       </span>
       <span class="pln">
       </span>
       <span class="com">
        // 字符集
       </span>
      </code>
     </li>
    </ol>
    <div>
     <span style="font-family:monospace">
     </span>
     <ol class="linenums">
      <li class="L0">
       <code>
        <span class="pln">
         $User
        </span>
        <span class="pun">
         =
        </span>
        <span class="pln">
         M
        </span>
        <span class="pun">
         (
        </span>
        <span class="str">
         "User"
        </span>
        <span class="pun">
         );
        </span>
        <span class="pln">
        </span>
        <span class="com">
         // 实例化User对象
        </span>
       </code>
      </li>
      <li class="L1">
       <code>
        <span class="pln">
         $User
        </span>
        <span class="pun">
         -&gt;
        </span>
        <span class="kwd">
         <span style="color:#ff0000">
          where
         </span>
        </span>
        <span class="pun">
         (
        </span>
        <span class="str">
         'type=1 AND status=1'
        </span>
        <span class="pun">
         )-&gt;
        </span>
        <span class="kwd">
         select
        </span>
        <span class="pun">
         ();
        </span>
        <span class="pln">
        </span>
       </code>
      </li>
     </ol>
     <div>
      等价于
     </div>
     <ol class="linenums">
      <li class="L0">
       <code>
        <span class="pln">
         SELECT
        </span>
        <span class="pun">
         *
        </span>
        <span class="pln">
         FROM think_user WHERE type
        </span>
        <span class="pun">
         =
        </span>
        <span class="lit">
         1
        </span>
        <span class="pln">
         AND status
        </span>
        <span class="pun">
         =
        </span>
        <span class="lit">
         1
        </span>
       </code>
      </li>
     </ol>
     <p>
     </p>
     <ol class="linenums">
      <li class="L0">
       <code>
        <span class="pln">
         $Model
        </span>
        <span class="pun">
         -&gt;
        </span>
        <span class="pln">
         <span style="color:#ff0000">
          field
         </span>
        </span>
        <span class="pun">
         (
        </span>
        <span class="str">
         'id,title,content'
        </span>
        <span class="pun">
         )-&gt;
        </span>
        <span class="kwd">
         select
        </span>
        <span class="pun">
         ();
        </span>
       </code>
      </li>
     </ol>
     等价于
     <p>
     </p>
     <p>
     </p>
     <ol class="linenums">
      <li class="L0">
       <code>
        <span class="pln">
         SELECT id
        </span>
        <span class="pun">
         ,
        </span>
        <span class="pln">
         title
        </span>
        <span class="pun">
         ,
        </span>
        <span class="pln">
         content FROM table
        </span>
       </code>
      </li>
     </ol>
     <p>
     </p>
     <p>
      如果需要对多表进行操作，可以这样使用：
     </p>
     <pre class="prettyprint linenums prettyprinted">  
  <ol class="linenums"><li class="L0"><code><span class="pln">$Model</span><span class="pun">-&gt;</span><span class="pln">field</span><span class="pun">(</span><span class="str">'user.name,role.title'</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pun">-&gt;</span><span class="pln"><span style="color:#ff0000">table</span></span><span class="pun">(</span><span class="str">'think_user user,think_role role'</span><span class="pun">)</span></code></li><li class="L2"><code><span class="pun">-&gt;</span><span class="pln">limit</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)-&gt;</span><span class="kwd">select</span><span class="pun">();</span></code></li></ol></pre>
     <p>
      除了查询操作之外，field方法还有一个非常重要的安全功能--字段合法性检测（注意：该功能3.1版本开始才能支持）。field方法结合create方法使用就可以完成表单提交的字段合法性检测，如果我们在表单提交的处理方法中使用了：
     </p>
     <pre class="prettyprint linenums prettyprinted">  
  <ol class="linenums"><li class="L0"><code><span class="pln">$Model</span><span class="pun">-&gt;</span><span class="pln"><span style="color:#ff0000">field</span></span><span class="pun">(</span><span class="str">'title,email,content'</span><span class="pun">)-&gt;</span><span class="pln">create</span><span class="pun">();</span></code></li></ol></pre>
     <p>
      即表示表单中的合法字段只有
      <code>
       title
      </code>
      ,
      <code>
       email
      </code>
      和
      <code>
       content
      </code>
      字段，无论用户通过什么手段更改或者添加了浏览器的提交字段，都会直接屏蔽。因为，其他是所有字段我们都不希望由用户提交来决定，你可以通过自动完成功能定义额外的字段写入
     </p>
     <ol class="linenums">
      <li class="L0">
       <code>
        <span class="pln">
         $Model
        </span>
        <span class="pun">
         -&gt;
        </span>
        <span class="kwd">
         where
        </span>
        <span class="pun">
         (
        </span>
        <span class="str">
         'status=1'
        </span>
        <span class="pun">
         )-&gt;
        </span>
        <span class="pln">
         <span style="color:#ff0000">
          order
         </span>
        </span>
        <span class="pun">
         (
        </span>
        <span class="str">
         'id desc'
        </span>
        <span class="pun">
         )-&gt;
        </span>
        <span class="pln">
         limit
        </span>
        <span class="pun">
         (
        </span>
        <span class="lit">
         5
        </span>
        <span class="pun">
         )-&gt;
        </span>
        <span class="kwd">
         select
        </span>
        <span class="pun">
         ();
        </span>
       </code>
      </li>
     </ol>
     <br/>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f75303134373135393734:2f61727469636c652f64657461696c732f3530393337343137" class_="artid" style="display:none">
 </p>
</div>


