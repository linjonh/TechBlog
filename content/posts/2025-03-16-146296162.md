---
layout: post
title: "VUEday04-组件的生命周期组件之间的数据共享ref引用购物车案例"
date: 2025-03-16 23:41:01 +0800
description: "props的值赋值给cout。"
keywords: "【VUE】day04-组件的生命周期、组件之间的数据共享、ref引用、购物车案例"
categories: ['Vue']
tags: ['前端', 'Vue', 'Javascript']
artid: "146296162"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146296162
    alt: "VUEday04-组件的生命周期组件之间的数据共享ref引用购物车案例"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146296162
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146296162
cover: https://bing.ee123.net/img/rand?artid=146296162
image: https://bing.ee123.net/img/rand?artid=146296162
img: https://bing.ee123.net/img/rand?artid=146296162
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【VUE】day04-组件的生命周期、组件之间的数据共享、ref引用、购物车案例
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="1__1">
     </a>
     1. 组件之间的关系
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/af1c7b892d1a48ecb25c02adb835cebb.png"/>
    </p>
    <h2>
     <a id="2__3">
     </a>
     2. 使用组件的三个步骤
    </h2>
    <p>
     <strong>
      步骤一：使用import语法导入需要的组件
     </strong>
     <br/>
     <code>
      import Left from '@/components/Left.vue'
     </code>
    </p>
    <p>
     <strong>
      步骤二：使用component节点注册组件
     </strong>
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 1. 导入需要使用的 .vue 组件</span>
<span class="token keyword">import</span> Left <span class="token keyword">from</span> <span class="token string">'@/components/Left.vue'</span>
<span class="token keyword">import</span> Right <span class="token keyword">from</span> <span class="token string">'@/components/Right.vue'</span>
<span class="token keyword">import</span> Test <span class="token keyword">from</span> <span class="token string">'@/components/Test.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">flag</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 2. 注册组件</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    Left<span class="token punctuation">,</span>
    Right<span class="token punctuation">,</span>
    Test
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
    <p>
     <strong>
      步骤三： 以标签的形式使用刚才注册的组件
     </strong>
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"app-container"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App 根组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"flag = !flag"</span><span class="token operator">&gt;</span>Toggle Flag<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Test info<span class="token operator">=</span><span class="token string">"你好"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"flag"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Test<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 渲染 Left 组件和 Right 组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">3.</span> 以标签形式，使用注册好的组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Left<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Left<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Right<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Right<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre>
    <p>
     <mark>
      <strong>
       @路径提示的插件
      </strong>
     </mark>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4c2afd1f3d65491ab79bd92c9f034a6b.png"/>
    </p>
    <h2>
     <a id="3_vuecomponents_57">
     </a>
     3. vue.components全局注册组件
    </h2>
    <br/>
    <p>
     <strong>
      通过components注册的是私有子组件
     </strong>
     <br/>
     例如：
     <br/>
     在组件A的components节点下，注册了组件F。
     <br/>
     则组件F只能用在组件A中，不能用在组件C中。
    </p>
    <hr/>
    <p>
     <strong>
      注册全局组件
     </strong>
     <br/>
     在vue项目的main.js入口文件中，通过vue.component()方法，可以注册全局组件。示例代码如下
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7afe4ce1630c47f4a1e7ffeccafdea54.png"/>
    </p>
    <h2>
     <a id="4__73">
     </a>
     4. 自动生成右边标签插件
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f1bad07f873c4327af3580ae9f7da638.png"/>
    </p>
    <h2>
     <a id="5_props_77">
     </a>
     5. 组件的props
    </h2>
    <p>
     props是组件的自定义属性，在封装通用组件的时候，合理地使用props可以极大的提高组件的复用性！
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1d19f9b4318a4f49b9ff893601a429d8.png"/>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e08009c8126a408094c185e4018a84ea.png"/>
    </p>
    <h2>
     <a id="6_vbind_85">
     </a>
     6. 结合v-bind使用自定义属性
    </h2>
    <p>
     <img alt="请添加图片描述" src="https://i-blog.csdnimg.cn/direct/9282513fb5a4469380af86b4e23fd108.png"/>
    </p>
    <p>
     props的值赋值给cout
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/df9505433e6c4e8ea9208009d9747698.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/91429d349e7447229e88b0b503ab0a66.png"/>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9f79e420169547aab47e3e1312335683.png"/>
     </img>
    </p>
    <h2>
     <a id="7_propsdefault_93">
     </a>
     7. props的默认default值
    </h2>
    <p>
     在生命自定义属性时，可以通过default来定义属性的默认值，示例代码如下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/66951ddd6749407db1e12740d82bc71d.png"/>
    </p>
    <h2>
     <a id="8__type_97">
     </a>
     8. type值类型
    </h2>
    <p>
     在声明自定义属性时，可以通过type来定义属性值的值类型。代码如下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/363284fdc22d412c8710212c50e95ed4.png"/>
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h5<span class="token operator">&gt;</span>Count 组件<span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>count 的值是：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"count += 1"</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"show"</span><span class="token operator">&gt;</span>打印 <span class="token keyword">this</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// props 是"自定义属性"，允许使用者通过自定义属性，为当前组件指定初始值</span>
  <span class="token comment">// 自定义属性的名字，是封装者自定义的（只要名称合法即可）</span>
  <span class="token comment">// props 中的数据，可以直接在模板结构中被使用</span>
  <span class="token comment">// 注意：props 是只读的，不要直接修改 props 的值，否则终端会报错！</span>
  <span class="token comment">// props: ['init'],</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 自定义属性A : { /* 配置选项 */ },</span>
    <span class="token comment">// 自定义属性B : { /* 配置选项 */ },</span>
    <span class="token comment">// 自定义属性C : { /* 配置选项 */ },</span>
    <span class="token literal-property property">init</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 如果外界使用 Count 组件的时候，没有传递 init 属性，则默认值生效</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token comment">// init 的值类型必须是 Number 数字</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token comment">// 必填项校验</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 把 props 中的 init 值，转存到 count 上</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>init
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"less"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre>
    <h2>
     <a id="9__152">
     </a>
     9. 组件之间的样式冲突问题
    </h2>
    <p>
     默认情况下，写在.vue组件中的样式会全局生效，因此很容易造成多个组件之间的样式冲突问题。
    </p>
    <p>
     导致组件之间样式冲突的根本原因是：
     <br/>
     ① 单页面应用程序中，所有组件的DOM结构，都是基于唯一的index.html页面呈现的。
     <br/>
     ② 每个组件中的样式，都会影响整个index.html页面中的DOM元素。
    </p>
    <p>
     <strong>
      解决办法：
     </strong>
    </p>
    <p>
     <strong>
      方法1：
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/59263baa11204d1cb388ca2a301b3d02.png"/>
     <br/>
     <strong>
      方法二：加上scoped
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/79a828a4f715452db3bfecced0dde15b.png"/>
    </p>
    <p>
     <strong>
      方法三：deep
     </strong>
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"left-container"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>Left 组件<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>MyCount <span class="token operator">:</span>init<span class="token operator">=</span><span class="token string">"9"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>MyCount<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"less"</span> scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>left<span class="token operator">-</span>container <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span> 20px 20px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> orange<span class="token punctuation">;</span>
  min<span class="token operator">-</span>height<span class="token operator">:</span> 250px<span class="token punctuation">;</span>
  <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

h3 <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// h5[data-v-3c83f0b7]</span>
<span class="token comment">// [data-v-3c83f0b7] h5</span>

<span class="token comment">// 当使用第三方组件库的时候，如果有修改第三方组件默认样式的需求，需要用到 /deep/</span>
<span class="token operator">/</span>deep<span class="token operator">/</span> h5 <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> pink<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/169e4c77ce734d59a66cf2eab2fc7754.png"/>
    </p>
    <h2>
     <a id="10__208">
     </a>
     10. 组件的生命周期
    </h2>
    <p>
     生命周期(Life Cycle)是指一个组件从创建-&gt;运行-&gt;销毁的整个阶段，强调的是一个时间段。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/786ffef1a71d4c08b0919d3edfd22bce.png"/>
    </p>
    <h3>
     <a id="101_beforeCreatecreated_212">
     </a>
     10.1 了解beforeCreate和created生命周期函数的特点
    </h3>
    <p>
     文档地址：
     <a href="https://v2.cn.vuejs.org/v2/guide/instance.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE%E7%A4%BA" rel="nofollow">
      https://v2.cn.vuejs.org/v2/guide/instance.html#生命周期图示
     </a>
    </p>
    <p>
     下图展示了实例的生命周期。你不需要立马弄明白所有的东西，不过随着你的不断学习和使用，它的参考价值会越来越高。
    </p>
    <p>
     <img alt="请添加图片描述" src="https://i-blog.csdnimg.cn/direct/3d6694d4d0bb411380fc22040fbc7764.png"/>
    </p>
    <p>
     P18 TODO
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f426c75655f50657073695f436f6c612f:61727469636c652f64657461696c732f313436323936313632" class_="artid" style="display:none">
 </p>
</div>


