---
layout: post
title: "linux安装Kafka以及windows安装Kafka和常见问题解决"
date: 2025-03-05 22:51:33 +0800
description: "/bin/kafka-server-start.sh -daemon config/server.properties（最好用这个）分发完后，记得进入两个从节点的 server.properties文件，将broker.id改为1和2。# broker 的编号，如果集群中有多个broker，则每个broker的编号需要设置的不同。修改完后，切换到/export/server存放kafka的目录下，分发给两个从节点。./bin/kafka-server-start.sh或。"
keywords: "linux安装Kafka以及windows安装Kafka和常见问题解决"
categories: ['大数据平台组件搭建']
tags: ['环境搭建', '大数据', '分布式', 'Windows', 'Linux', 'Kafka']
artid: "146055080"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146055080
    alt: "linux安装Kafka以及windows安装Kafka和常见问题解决"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146055080
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146055080
cover: https://bing.ee123.net/img/rand?artid=146055080
image: https://bing.ee123.net/img/rand?artid=146055080
img: https://bing.ee123.net/img/rand?artid=146055080
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     linux安装Kafka以及windows安装Kafka和常见问题解决
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p name="Linux%E4%B8%8A%E5%AE%89%E8%A3%85Kafka">
     <span style="color:#fe2c24">
      安装Kafka需要有Zookeeper，或者也可以使用kafka自带的zookeeper
     </span>
    </p>
    <h3 id="Linux%E4%B8%8A%E5%AE%89%E8%A3%85Kafka" name="Linux%E4%B8%8A%E5%AE%89%E8%A3%85Kafka">
     Linux上安装Kafka
    </h3>
    <p>
     将kafka的安装包上传到/export/server目录并解压，重命名：
    </p>
    <p>
     tar -zxvf kafka压缩包名
    </p>
    <p>
     mv kafka压缩包 kafka
    </p>
    <p>
     1、进入 Kafka 解压目录的 config 目录中
    </p>
    <p>
     cd /export/server/kafka_2.11-2.0.0/config/
    </p>
    <p>
     2、利用 vi 或 vim 打开 server.properties 文件
    </p>
    <p>
     修改：vi server.properties
    </p>
    <p>
     找到 "broker.id=0"这一行，一般主节点设置为0
    </p>
    <p>
     找到log.dirs这一行，修改日志存放路径
    </p>
    <blockquote>
     <p>
      # broker 的编号，如果集群中有多个broker，则每个broker的编号需要设置的不同
      <br/>
      broker.id=0
      <br/>
      # broker 对外提供的服务入口地址
      <br/>
      listeners=PLAINTEXT://master:9092
      <br/>
      # 存放消息日志文件的地址
      <br/>
      log.dirs=/opt/kafka_2.12-2.8.1/logs
      <br/>
      # Kafka 所需的 ZooKeeper 集群地址
      <br/>
      zookeeper.connect=master:2181,slave1:2181,slave2:2181
     </p>
    </blockquote>
    <p>
     修改完后，切换到/export/server存放kafka的目录下，分发给两个从节点
    </p>
    <p>
     scp -r /export/server/kafka/ slave1:/export/server/
    </p>
    <p>
     scp -r /export/server/kafka/ slave2:/export/server/
    </p>
    <p>
     分发完后，记得进入两个从节点的 server.properties文件，将broker.id改为1和2
    </p>
    <blockquote>
     <p>
      borker.id=1
      <br/>
      listeners=PLAINTEXT://slave1:9092
      <br/>
      host.name=slave1
     </p>
     <p>
      borker.id=2
      <br/>
      listeners=PLAINTEXT://slave2:9092
      <br/>
      host.name=slave2
     </p>
    </blockquote>
    <p>
     配置环境变量：vi /etc/profile
    </p>
    <blockquote>
     <p>
      export KAFKA_HOME=/export/server/kafka
      <br/>
      export PATH=$PATH:$KAFKA_HOME/bin
     </p>
    </blockquote>
    <p>
     刷新文件：source /etc/profile
    </p>
    <p>
     分发给两个从节点：
    </p>
    <p>
     scp -r /etc/profile slave1:/etc
    </p>
    <p>
     scp -r /etc/profile slave2:/etc
    </p>
    <p>
     先启动三台zookeeper： zkServer.sh start 再分别启动三台服务器上的kafka(后台启动命令):
    </p>
    <p>
     kafka-server-start.sh -daemon config/server.properties
    </p>
    <p>
     jps查看进程是否有kafka节点
    </p>
    <p>
     经过以上步骤Kafka则安装完成
    </p>
    <p>
     启动kafka命令：
    </p>
    <p>
     ./bin/kafka-server-start.sh或
    </p>
    <p>
     ./bin/kafka-server-start.sh -daemon config/server.properties（最好用这个）
    </p>
    <p>
     创建topic，其中toipic名称为installtopic，分区数为2，副本数为2：
    </p>
    <p>
     ./bin/kafka-topics.sh --zookeeper master:2181 --create --replication-factor 2 --partitions 2 --topic installtopic
    </p>
    <p>
     查看主题：
    </p>
    <p>
     bin/kafka-topics.sh --list --zookeeper master:2181
    </p>
    <h3 id="%E5%BD%93%E4%B8%BB%E9%A2%98%E5%88%A0%E9%99%A4%E4%B8%8D%E4%BA%86%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%BF%9B%E5%85%A5zookeeper%EF%BC%9A" name="%E5%BD%93%E4%B8%BB%E9%A2%98%E5%88%A0%E9%99%A4%E4%B8%8D%E4%BA%86%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%BF%9B%E5%85%A5zookeeper%EF%BC%9A">
     当主题删除不了时，可以进入zookeeper：
    </h3>
    <blockquote>
     <p>
      //进入Cli端
      <br/>
      bin/zkCli.sh -server master:2181
      <br/>
      //查看主题
      <br/>
      ls /brokers/topics3
      <br/>
      //删除主题installtopic
      <br/>
      deleteall /brokers/topics/installtopic
      <br/>
      //退出Cli端
      <br/>
      quit
     </p>
    </blockquote>
    <h3 id="windows%E4%B8%8A%E5%AE%89%E8%A3%85kafka" name="windows%E4%B8%8A%E5%AE%89%E8%A3%85kafka">
     windows上安装kafka
    </h3>
    <p>
     先在kafka目录下新建一个logs文件夹
    </p>
    <p>
     修改config\server.properties
    </p>
    <p>
     listeners=PLAINTEXT://localhost:9092
    </p>
    <p>
     logs改为自己的路径
    </p>
    <p>
     .\bin\windows\kafka-server-start.bat .\config\server.properties
    </p>
    <p>
     <strong>
      Windows下启动单机kafka出现：系统找不到指定路径
     </strong>
    </p>
    <p>
     解决方法：
    </p>
    <p>
     修改bin\windows\kafka-run-class.bat
    </p>
    <p>
     rem Which java to use这行下面的
    </p>
    <p>
     ELSE(
    </p>
    <p>
     set JAVA="你自己的jdk路径"
    </p>
    <p>
     ）
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36323733313133332f:61727469636c652f64657461696c732f313436303535303830" class_="artid" style="display:none">
 </p>
</div>


