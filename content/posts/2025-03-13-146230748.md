---
layout: post
title: "Cinitializer_list在实际开发中的应用"
date: 2025-03-13 14:46:50 +0800
description: "(=^･ω･^)= 喵～initializer_list就像给喵星人准备的一盒排列整齐的小鱼干！让猫娘用肉球敲代码给你演示它的妙用喵～下次写C++时，记得用initializer_list给代码加点猫薄荷般的清香吧～ฅ^•ﻌ•^ฅ。（实际会编译错误，需要所有元素类型一致喵～）：像玻璃罐头一样不能修改内容。：可能抢走其他构造函数的鱼干。"
keywords: "【C++】initializer_list在实际开发中的应用"
categories: ['未分类']
tags: ['开发语言', 'C']
artid: "146230748"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146230748
    alt: "Cinitializer_list在实际开发中的应用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146230748
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146230748
cover: https://bing.ee123.net/img/rand?artid=146230748
image: https://bing.ee123.net/img/rand?artid=146230748
img: https://bing.ee123.net/img/rand?artid=146230748
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【C++】initializer_list在实际开发中的应用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     (=^･ω･^)= 喵～initializer_list就像给喵星人准备的一盒排列整齐的小鱼干！让猫娘用肉球敲代码给你演示它的妙用喵～
    </p>
    <p>
     <strong>
      🐾 实战场景1：容器初始化の艺术
     </strong>
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// 传统喂猫法</span>
std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> vec<span class="token punctuation">;</span>
vec<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 小鱼干投喂法</span>
std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> elegant_vec <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 喵呜～瞬间装满！</span>
</code></pre>
    <p>
     <strong>
      ✨ 应用场景：
     </strong>
    </p>
    <ul>
     <li>
      快速初始化自定义容器
     </li>
     <li>
      给喵星人配置多参数（比如猫粮配方）
     </li>
     <li>
      数学计算中的矩阵/向量定义
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      📦 实战场景2：猫猫工厂模式
     </strong>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">CatFoodBox</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">CatFoodBox</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>initializer_list<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span> ingredients<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> item <span class="token operator">:</span> ingredients<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">mixBowl</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 搅拌猫粮盆</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 使用示例</span>
CatFoodBox premium_box <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"金枪鱼"</span><span class="token punctuation">,</span> <span class="token string">"鸡胸肉"</span><span class="token punctuation">,</span> <span class="token string">"猫草"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 喵嗷～豪华套餐！</span>
</code></pre>
    <hr/>
    <p>
     <strong>
      🔧 实战场景3：智能类型转换
     </strong>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">feedCat</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>initializer_list<span class="token operator">&lt;</span>CatFood<span class="token operator">&gt;</span> foods<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 自动转换符合构造规则的参数</span>
<span class="token punctuation">}</span>

<span class="token function">feedCat</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"小鱼干"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3会自动转成CatFood(3)喵～</span>
</code></pre>
    <hr/>
    <p>
     <strong>
      ⚠️ 使用注意事项：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        只读特性
       </strong>
       ：像玻璃罐头一样不能修改内容
      </p>
      <pre><code class="prism language-cpp"><span class="token keyword">auto</span> list <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
list<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>  <span class="token comment">// 编译错误！喵爪禁止改写</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        拷贝陷阱
       </strong>
       ：大对象要小心喵！
      </p>
      <pre><code class="prism language-cpp"><span class="token comment">// 每个元素都会被拷贝构造</span>
std<span class="token double-colon punctuation">::</span>initializer_list<span class="token operator">&lt;</span>HeavyObject<span class="token operator">&gt;</span> heavyList <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        重载优先级
       </strong>
       ：可能抢走其他构造函数的鱼干
      </p>
      <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">ConfusingCat</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ConfusingCat</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 普通构造</span>
    <span class="token function">ConfusingCat</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>initializer_list<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 贪婪的喵！</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ConfusingCat c<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 会调用initializer_list版本！</span>
</code></pre>
     </li>
    </ol>
    <hr/>
    <p>
     <strong>
      💡 高级技巧：
     </strong>
    </p>
    <ul>
     <li>
      <p>
       配合auto类型推导：
      </p>
      <pre><code class="prism language-cpp"><span class="token keyword">auto</span> magicList <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 喵？这里会推导成initializer_list&lt;double&gt;吗？</span>
</code></pre>
      <p>
       （实际会编译错误，需要所有元素类型一致喵～）
      </p>
     </li>
     <li>
      <p>
       模拟Python风格初始化：
      </p>
      <pre><code class="prism language-cpp">Matrix mat <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 二维矩阵喵喵拳！</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      ✨ 总结优点：
     </strong>
    </p>
    <ol>
     <li>
      让类拥有std容器的初始化体验
     </li>
     <li>
      提升API的简洁性和可读性
     </li>
     <li>
      编译期类型安全检查（像猫鼻子一样灵敏）
     </li>
    </ol>
    <p>
     下次写C++时，记得用initializer_list给代码加点猫薄荷般的清香吧～ฅ^•ﻌ•^ฅ
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f796f6e677a686f756368656e2f:61727469636c652f64657461696c732f313436323330373438" class_="artid" style="display:none">
 </p>
</div>


