---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36393438343535372f:61727469636c652f64657461696c732f313436323338343830"
layout: post
title: "什么是SWAP虚拟内存使用服务器如何开启SWAP虚拟内存"
date: 2025-03-13 17:51:39 +0800
description: "通过上述操作，您可以在莱卡云服务器上快速启用 SWAP 虚拟内存，平衡内存资源与成本，确保服务稳定运行。建议根据实际负载动态调整 SWAP 大小及 swappiness 参数。SWAP（交换分区）是磁盘上的一块空间，用于在物理内存（RAM）不足时，将部分不活跃的内存数据临时存储到磁盘中，避免系统因内存耗尽而崩溃。分配 1GB 的 SWAP 文件（根据需求调整大小）控制内存换出频率，值越低越少使用 SWAP。删除 /etc/fstab 中相关行。编辑 /etc/fstab。调整 swappiness。"
keywords: "什么是SWAP虚拟内存?使用服务器如何开启SWAP虚拟内存"
categories: ['未分类']
tags: ['服务器', '数据库', '云计算', 'Linux', 'Github', 'Ddos']
artid: "146238480"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146238480
    alt: "什么是SWAP虚拟内存使用服务器如何开启SWAP虚拟内存"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146238480
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146238480
cover: https://bing.ee123.net/img/rand?artid=146238480
image: https://bing.ee123.net/img/rand?artid=146238480
img: https://bing.ee123.net/img/rand?artid=146238480
---

# 什么是SWAP虚拟内存?使用服务器如何开启SWAP虚拟内存

**一、SWAP 虚拟内存是什么？**
**‌**

**‌**
**定义**
**‌**
**：
  
SWAP（交换分区）是磁盘上的一块空间，用于在物理内存（RAM）不足时，将部分不活跃的内存数据临时存储到磁盘中，避免系统因内存耗尽而崩溃。**

**‌**
**核心作用**
**‌**
**：**

1. **‌**
   **扩展可用内存**
   **‌**
   **：防止应用程序因内存不足（OOM）被强制终止**
   **‌**
   **12**
   **。**
2. **‌**
   **提升系统稳定性**
   **‌**
   **：缓解突发高负载下的内存压力，降低宕机风险**
   **‌**
   **34**
   **。**
3. **‌**
   **优化资源利用**
   **‌**
   **：允许系统将长期未使用的内存页移至 SWAP，释放物理内存供急需进程使用**
   **‌**
   **56**
   **。**

**‌**
**适用场景**
**‌**
**：**

* **物理内存较小（如 1-2GB 的轻量级服务器）。**
* **运行内存密集型应用（如数据库、Java 服务）。**

---

**\*\***
**二、莱卡云服务器开启 SWAP 的步骤**

**![](https://i-blog.csdnimg.cn/direct/26a8480c195e4cb1a3c0e36d845a4cda.png)**

**‌**
**1.**
**创建 SWAP 文件**
**‌**

**bashCopy Code**

***#***
***分配 1GB 的 SWAP 文件（根据需求调整大小）***

**sudo fallocate -l 1G /swapfile**

***#***
***若 fallocate 不可用，改用 dd 命令***

**sudo dd if=/dev/zero of=/swapfile bs=1M count=1024**

***#***
***设置权限***

**sudo chmod 600 /swapfile**

**‌**
**2.**
**格式化为 SWAP 分区**
**‌**

**bashCopy Code**

**sudo mkswap /swapfile**

**‌**
**3.**
**激活 SWAP**
**‌**

**bashCopy Code**

**sudo swapon /swapfile**

**‌**
**4.**
**永久生效配置**
**‌**

**bashCopy Code**

***#***
***编辑 /etc/fstab***

**sudo nano /etc/fstab**

***#***
***添加以下行***

**/swapfile none swap sw 0 0**

**‌**
**5.**
**验证 SWAP 状态**
**‌**

**bashCopy Code**

**free -h**

***#***
***输出示例：***

***#               total   used    free***

***# Swap:         1.0G    0B      1.0G***

---

**‌**
**三、SWAP 配置优化建议**
**‌**

| **‌** **参数** **‌** | **‌** **推荐值** **‌** | **‌** **说明** **‌** |
| --- | --- | --- |
| **‌** **SWAP** **大小** **‌** | **1-2** **倍物理内存（≤8GB）** | **内存≤4GB 时建议 2 倍；内存≥8GB 时 1 倍** **‌** **35** |
| **‌** **swappiness** **‌** | **10-30** **（默认 60）** | **控制内存换出频率，值越低越少使用 SWAP** **‌** **46** |

**‌**
**调整 swappiness**
**‌**
**：**

**bashCopy Code**

***#***
***临时生效***

**sudo sysctl vm.swappiness=10**

***#***
***永久生效***

**sudo nano /etc/sysctl.conf**

***#***
***添加或修改：***

**vm.swappiness=10**

---

**‌**
**四、注意事项**
**‌**

1. **‌**
   **性能影响**
   **‌**
   **：**
   * **SWAP**
     **依赖磁盘 I/O，频繁读写可能降低性能（尤其是 HDD 磁盘）**
     **‌**
     **56**
     **。**
   * **莱卡云服务器建议搭配 SSD 云盘使用，减少延迟**
     **‌**
     **6**
     **。**
2. **‌**
   **监控与维护**
   **‌**
   **：**
   * **使用 htop 或 vmstat 1 监控 SWAP 使用率。**
   * **内存长期不足时，优先考虑升级莱卡云实例内存配置。**
3. **‌**
   **禁用 SWAP**
   **‌**
   **：**

**bashCopy Code**

**sudo swapoff /swapfile**

**sudo rm -f /swapfile**

***#***
***删除 /etc/fstab 中相关行***

---

**通过上述操作，您可以在莱卡云服务器上快速启用 SWAP 虚拟内存，平衡内存资源与成本，确保服务稳定运行。建议根据实际负载动态调整 SWAP 大小及 swappiness 参数**
**‌**