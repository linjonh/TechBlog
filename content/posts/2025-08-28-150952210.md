---
layout: post
title: "åœ¨-macOS-ç³»ç»Ÿä¸Šä½¿ç”¨-Docker-å¯åŠ¨-Kafka-çš„å®Œæ•´æŒ‡å—"
date: 2025-08-28T14:57:37+0800
description: "æœ¬æ–‡ä»‹ç»äº†åœ¨Macä¸Šä½¿ç”¨Dockeréƒ¨ç½²Kafkaçš„ä¸¤ç§æ–¹æ³•ã€‚æ¨èä½¿ç”¨Docker Composeæ–¹å¼ï¼Œé€šè¿‡é…ç½®docker-compose.ymlæ–‡ä»¶ä¸€é”®å¯åŠ¨Zookeeperå’ŒKafkaæœåŠ¡ï¼Œå¹¶æä¾›äº†éªŒè¯æœåŠ¡ã€æµ‹è¯•æ¶ˆæ¯æ”¶å‘çš„æ–¹æ³•ã€‚åŒæ—¶ä»‹ç»äº†å•ç‹¬ä½¿ç”¨Dockerå‘½ä»¤çš„éƒ¨ç½²æ–¹å¼ï¼Œä»¥åŠå¸¸ç”¨çš„Kafkaç®¡ç†å‘½ä»¤ã€‚æœ€åè¿˜åŒ…å«Spring Bootè¿æ¥é…ç½®ã€æœåŠ¡åœæ­¢æ¸…ç†ç­‰å®ç”¨å†…å®¹ã€‚æ–‡ç« ç»“æ„æ¸…æ™°ï¼Œé…æœ‰ä»£ç ç¤ºä¾‹ï¼Œé€‚åˆå¼€å‘è€…å¿«é€Ÿæ­å»ºæœ¬åœ°Kafkaç¯å¢ƒã€‚"
keywords: "ã€åœ¨ macOS ç³»ç»Ÿä¸Šä½¿ç”¨ Docker å¯åŠ¨ Kafka çš„å®Œæ•´æŒ‡å—ã€‘"
categories: ['æœªåˆ†ç±»']
tags: ['Macos', 'Kafka', 'Docker']
artid: "150952210"
arturl: "https://blog.csdn.net/qq_21202769/article/details/150952210"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=150952210
    alt: "åœ¨-macOS-ç³»ç»Ÿä¸Šä½¿ç”¨-Docker-å¯åŠ¨-Kafka-çš„å®Œæ•´æŒ‡å—"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=150952210
featuredImagePreview: https://bing.ee123.net/img/rand?artid=150952210
cover: https://bing.ee123.net/img/rand?artid=150952210
image: https://bing.ee123.net/img/rand?artid=150952210
img: https://bing.ee123.net/img/rand?artid=150952210
---



# ã€åœ¨ macOS ç³»ç»Ÿä¸Šä½¿ç”¨ Docker å¯åŠ¨ Kafka çš„å®Œæ•´æŒ‡å—ã€‘



### ğŸ³ ä¸€ã€å‰ææ¡ä»¶

1. **å®‰è£… Docker Desktop for Mac**

   * ä¸‹è½½åœ°å€ï¼šhttps://www.docker.com/products/docker-desktop
   * å®‰è£…å¹¶å¯åŠ¨ Docker
2. **ç¡®è®¤ Docker æ­£å¸¸è¿è¡Œ**

```bash
docker --version
docker-compose --version

```

---

### ğŸš€ äºŒã€æ–¹å¼ä¸€ï¼šä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

#### 1. åˆ›å»º `docker-compose.yml` æ–‡ä»¶

```yaml
version: '3.8'

services:
  zookeeper:
    image: confluentinc/cp-zookeeper:latest
    container_name: zookeeper
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
      ZOOKEEPER_TICK_TIME: 2000
    ports:
      - "2181:2181"

  kafka:
    image: confluentinc/cp-kafka:latest
    container_name: kafka
    depends_on:
      - zookeeper
    ports:
      - "9092:9092"
      - "9093:9093"
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: INTERNAL://kafka:9093,EXTERNAL://localhost:9092
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT
      KAFKA_INTER_BROKER_LISTENER_NAME: INTERNAL
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
      KAFKA_AUTO_CREATE_TOPICS_ENABLE: true

```

#### 2. å¯åŠ¨æœåŠ¡

```bash
# åœ¨ docker-compose.yml æ‰€åœ¨ç›®å½•æ‰§è¡Œ
docker-compose up -d

```

#### 3. éªŒè¯ Kafka æ˜¯å¦å¯åŠ¨æˆåŠŸ

```bash
# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps

# è¿›å…¥ Kafka å®¹å™¨
docker exec -it kafka bash

# åˆ›å»ºæµ‹è¯• topic
kafka-topics --create --topic test-topic --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1

# åˆ—å‡ºæ‰€æœ‰ topic
kafka-topics --list --bootstrap-server localhost:9092

```

---

### ğŸ§ª ä¸‰ã€æµ‹è¯• Kafka è¿é€šæ€§

#### 1. å¯åŠ¨æ¶ˆè´¹è€…

```bash
docker exec -it kafka kafka-console-consumer --topic test-topic --bootstrap-server localhost:9092

```

#### 2. å¯åŠ¨ç”Ÿäº§è€…å¹¶å‘é€æ¶ˆæ¯

```bash
docker exec -it kafka kafka-console-producer --topic test-topic --bootstrap-server localhost:9092

```

ç„¶åè¾“å…¥æ¶ˆæ¯ï¼ŒæŒ‰å›è½¦å‘é€ï¼Œè§‚å¯Ÿæ¶ˆè´¹è€…ç«¯æ˜¯å¦æ”¶åˆ°ã€‚

---

### ğŸ› ï¸ å››ã€æ–¹å¼äºŒï¼šå•ç‹¬ä½¿ç”¨ Docker å‘½ä»¤

å¦‚æœä½ ä¸æƒ³ç”¨ docker-composeï¼Œä¹Ÿå¯ä»¥åˆ†åˆ«å¯åŠ¨ Zookeeper å’Œ Kafkaï¼š

#### 1. å¯åŠ¨ Zookeeper

```bash
docker run -d \
  --name zookeeper \
  -p 2181:2181 \
  confluentinc/cp-zookeeper:latest \
  bash -c "echo 'clientPort=2181' > zookeeper.properties && echo 'dataDir=/var/lib/zookeeper/data' >> zookeeper.properties && echo 'dataLogDir=/var/lib/zookeeper/log' >> zookeeper.properties && zookeeper-server-start zookeeper.properties"

```

æˆ–è€…æ›´ç®€å•çš„æ–¹å¼ï¼š

```bash
docker run -d \
  --name zookeeper \
  -p 2181:2181 \
  confluentinc/cp-zookeeper:latest

```

#### 2. å¯åŠ¨ Kafka

```bash
docker run -d \
  --name kafka \
  --link zookeeper \
  -p 9092:9092 \
  -e KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 \
  -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092 \
  -e KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1 \
  confluentinc/cp-kafka:latest

```

---

### ğŸ”§ äº”ã€å¸¸ç”¨ Kafka å‘½ä»¤ï¼ˆåœ¨å®¹å™¨å†…æ‰§è¡Œï¼‰

```bash
# è¿›å…¥å®¹å™¨
docker exec -it kafka bash

# åˆ›å»º topic
kafka-topics --create --topic my-topic --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1

# æŸ¥çœ‹æ‰€æœ‰ topics
kafka-topics --list --bootstrap-server localhost:9092

# æŸ¥çœ‹ topic è¯¦æƒ…
kafka-topics --describe --topic my-topic --bootstrap-server localhost:9092

# å‘é€æ¶ˆæ¯
kafka-console-producer --topic my-topic --bootstrap-server localhost:9092

# æ¶ˆè´¹æ¶ˆæ¯
kafka-console-consumer --topic my-topic --bootstrap-server localhost:9092 --from-beginning

# æŸ¥çœ‹æ¶ˆè´¹è€…ç»„
kafka-consumer-groups --bootstrap-server localhost:9092 --list

```

---

### ğŸ›‘ å…­ã€åœæ­¢å’Œæ¸…ç†

#### åœæ­¢æœåŠ¡

```bash
# docker-compose æ–¹å¼
docker-compose down

# å•ç‹¬å®¹å™¨æ–¹å¼
docker stop kafka zookeeper
docker rm kafka zookeeper

```

#### æ¸…ç†æ•°æ®ï¼ˆå¯é€‰ï¼‰

```bash
docker volume prune

```

---

### ğŸ“ ä¸ƒã€Spring Boot é…ç½®å¯¹åº”çš„ Kafka åœ°å€

åœ¨ä½ çš„ `application.yml` ä¸­ï¼š

```yaml
spring:
  kafka:
    bootstrap-servers: localhost:9092
    # å…¶ä»–é…ç½®...

```

---

### âœ… å…«ã€éªŒè¯è¿æ¥

å¯åŠ¨ä½ çš„ Spring Boot åº”ç”¨åï¼Œå¯ä»¥é€šè¿‡ Swagger UI æµ‹è¯• Kafka æ¶ˆæ¯å‘é€ï¼š

```
http://localhost:8080/swagger-ui.html

```

---

å¯è¿›ä¸€æ­¥æ‰©å±•å†…å®¹ï¼š

* Kafka Manager (Confluent Control Center) éƒ¨ç½²
* å¤š Broker Kafka é›†ç¾¤éƒ¨ç½²
* Kafka æ•°æ®æŒä¹…åŒ–é…ç½®
* Kafka ç›‘æ§å’Œæ—¥å¿—é…ç½®



