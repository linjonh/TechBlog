---
layout: post
title: "原生iOS集成react-native-react-native-0.65"
date: 2025-03-07 19:01:02 +0800
description: "由于官方文档比较老，很多配置都不能用，集成的时候遇到很多坑，简单的整理一下本文主要提供一些配置信息以及错误信息解决方案，具体步骤可以参照官方文档。"
keywords: "原生iOS集成react-native (react-native 0.65+)"
categories: ['面试题汇总与解析']
tags: ['课程设计', '毕业设计', 'Vue', 'Spring', 'Layui', 'Boot']
artid: "146102936"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146102936
    alt: "原生iOS集成react-native-react-native-0.65"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146102936
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146102936
cover: https://bing.ee123.net/img/rand?artid=146102936
image: https://bing.ee123.net/img/rand?artid=146102936
img: https://bing.ee123.net/img/rand?artid=146102936
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     原生iOS集成react-native (react-native 0.65+)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <div>
     <div class="note-content">
      <p>
       由于官方文档比较老，很多配置都不能用，集成的时候遇到很多坑，简单的整理一下
       <br/>
       <strong>
        时间节点:2021年9月1日
       </strong>
       <br/>
       本文主要提供一些配置信息以及错误信息解决方案，具体步骤可以参照官方文档
       <br/>
       原版文档：
       <a href="https://links.jianshu.com/go?to=https%3A%2F%2Freactnative.dev%2Fdocs%2Fintegration-with-existing-apps" rel="nofollow noopener noreferrer" target="_blank">
        https://reactnative.dev/docs/integration-with-existing-apps
       </a>
       <br/>
       中文文档：
       <a href="https://links.jianshu.com/go?to=https%3A%2F%2Freactnative.cn%2Fdocs%2Fintegration-with-existing-apps" rel="nofollow noopener noreferrer" target="_blank">
        https://reactnative.cn/docs/integration-with-existing-apps
       </a>
      </p>
      <p>
       <strong>
        PS：官方文档黄色提示部分作用非常大，一定要仔细看，很多报错看了黄色提示都能解决
       </strong>
      </p>
      <h3>
       1. 配置项目目录结构
      </h3>
      <p>
       首先创建一个空目录用于存放 React Native 项目，然后在其中创建一个/ios子目录，把你现有的 iOS 项目拷贝到/ios子目录中。
      </p>
      <h3>
       2. 安装 JavaScript 依赖包
      </h3>
      <p>
       在项目根目录下创建一个名为package.json的空文本文件，然后填入以下内容：
      </p>
      <pre><code class="json">{
  "name": "MyReactNativeApp",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "yarn react-native start"
  }
}
</code></pre>
      <p>
       接下来我们使用 yarn 或 npm（两者都是 node 的包管理器）来安装 React 和 React Native 模块。请打开一个终端/命令提示行，进入到项目目录中（即包含有 package.json 文件的目录），然后运行下列命令来安装：
      </p>
      <pre><code class="sh">$ yarn add react-native
</code></pre>
      <p>
       这样默认会安装最新版本的 React Native，同时会打印出类似下面的警告信息（你可能需要滚动屏幕才能注意到）：
      </p>
      <blockquote>
       <p>
        warning " &gt; react-native@0.65.1" has unmet peer dependency "react@17.0.2".
        <br/>
        这是正常现象，意味着我们还需要安装指定版本的 React：
       </p>
      </blockquote>
      <pre><code>$ yarn add react@17.0.2
</code></pre>
      <p>
       <strong>
        注意必须严格匹配警告信息中所列出的版本，高了或者低了都不可以。
       </strong>
      </p>
      <h3>
       3. 安装 CocoaPods
      </h3>
      <p>
       安装方式参照官方文档，不做赘述
       <br/>
       此处提供下Podfile的内容，当时因为Podfile的问题遇到很多坑
      </p>
      <pre><code>require_relative '../node_modules/react-native/scripts/react_native_pods'
require_relative '../node_modules/@react-native-community/cli-platform-ios/native_modules'

platform :ios, '11.0'
//use_frameworks!是否使用依照原生项目
use_frameworks!
target 'RNTest' do
//这里放置原生使用的pods
pod 'SVProgressHUD'
pod 'Masonry'

//这里是react-native使用的pods（react-native 0.64+）
  config = use_native_modules!

  use_react_native!(
    :path =&gt; config[:reactNativePath],
    # to enable hermes on iOS, change `false` to `true` and then install pods
    :hermes_enabled =&gt; false
  )

  target 'RNTestTests' do
    inherit! :complete
    # Pods for testing
  end

  # Enables Flipper.
  #
  # Note that if you have use_frameworks! enabled, Flipper will not work and
  # you should disable the next line.
#   use_flipper!()

  post_install do |installer|
    react_native_post_install(installer)
  end
  //如果使用use_frameworks!需要添加这一部分，如果不使用则不需要（非常重要）
  pre_install do |installer|
    Pod::Installer::Xcode::TargetValidator.send(:define_method,
     :verify_no_static_framework_transitive_dependencies) {}
  end
end

</code></pre>
      <p>
       安装完成后到ios文件夹下
      </p>
      <pre><code>$ pod install
</code></pre>
      <p>
       如果出现以下错误
      </p>
      <pre><code>The following build commands failed:
    PhaseScriptExecution [CP-User]\ Generate\ Specs /Users/goodwe/Library/Developer/Xcode/DerivedData/PVMaster-fmlxwaebkuhxpwfecwezdewdswsi/Build/Intermediates.noindex/Pods.build/Debug-iphonesimulator/FBReactNativeSpec.build/Script-85194FC3D0122935CF3BE54D1926EC14.sh
(1 failure)

info Run CLI with --verbose flag for more details.
error Command failed with exit code 1.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
</code></pre>
      <p>
       并且用Xcode运行项目会出现以下错误：
      </p>
      <pre><code>Error: Could not determine react-native-codegen location. Try running 'yarn install' or 'npm install' in your project root.
Command /bin/sh failed with exit code 1
</code></pre>
      <p>
       解决方法：
       <br/>
       在项目根目录
       <code>
        yarn add react-native-codegen
       </code>
      </p>
      <p>
       接下来的代码集成参照官方文档，不做赘述
      </p>
      <blockquote>
       <p>
        PS: localhost最好改成本机的ip地址
       </p>
      </blockquote>
     </div>
     <div class="note-meta-time">
      最后编辑于：2025-02-24 21:39:51
     </div>
     <div class="copyright">
      © 
   著作权归作者所有,转载或内容合作请联系作者
     </div>
    </div>
    <br/>
    <img src="https://img-blog.csdnimg.cn/direct/67c64049147741939b85489caefbb597.png" width="800px">
     <br/>
     <p style="font-weight: 700;">
      喜欢的朋友记得点赞、收藏、关注哦！！！
     </p>
    </img>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f32343432383835312f:61727469636c652f64657461696c732f313436313032393336" class_="artid" style="display:none">
 </p>
</div>


