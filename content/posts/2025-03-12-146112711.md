---
layout: post
title: "neo4j中常用cql命令汇总基础版"
date: 2025-03-12 17:33:57 +0800
description: "neo4j中常用cql命令汇总(基础版)"
keywords: "neo4j中常用cql命令汇总(基础版)"
categories: ['Neo']
tags: ['Neo', 'Java']
artid: "146112711"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146112711
    alt: "neo4j中常用cql命令汇总基础版"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146112711
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146112711
cover: https://bing.ee123.net/img/rand?artid=146112711
image: https://bing.ee123.net/img/rand?artid=146112711
img: https://bing.ee123.net/img/rand?artid=146112711
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     neo4j中常用cql命令汇总(基础版)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     @
     <a href="neo4j%E4%B8%AD%E5%B8%B8%E7%94%A8cql%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB%28%E5%9F%BA%E7%A1%80%E7%89%88%29" rel="nofollow">
      TOC
     </a>
    </p>
    <h2>
     <a id="1_1">
     </a>
     1.节点
    </h2>
    <h3>
     <a id="11_2">
     </a>
     1.1.添加节点
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token punctuation">(</span>n:<span class="token keyword">user</span> {id: <span class="token string">"1898914289469677570"</span><span class="token punctuation">,</span> username: <span class="token string">"张三"</span><span class="token punctuation">,</span> age: <span class="token string">"22"</span><span class="token punctuation">,</span> phoneNumber: <span class="token string">"13355536547"</span>}<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="12_7">
     </a>
     1.2.修改节点
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:<span class="token keyword">user</span> {id: <span class="token string">"1898914289469677570"</span>}<span class="token punctuation">)</span> <span class="token keyword">SET</span> n<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">"张三66"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">"66"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>phoneNumber <span class="token operator">=</span> <span class="token string">"13355536547"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token string">"***街道"</span> <span class="token keyword">RETURN</span> n
</code></pre>
    <h2>
     <a id="2_12">
     </a>
     2.关系
    </h2>
    <h3>
     <a id="21_13">
     </a>
     2.1.添加关系
    </h3>
    <ol>
     <li>
      根据已有节点的id属性来创建无属性关系
     </li>
    </ol>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>a:<span class="token keyword">user</span> {id: <span class="token string">"1897185063343259650"</span>}<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>b:school {id: <span class="token string">"1897210602850418689"</span>}<span class="token punctuation">)</span> <span class="token keyword">CREATE</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:study<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre>
    <ol start="2">
     <li>
      根据已有节点的id属性来创建有属性关系
     </li>
    </ol>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>a:<span class="token keyword">user</span> {id: <span class="token string">"1897185063343259650"</span>}<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>b:school {id: <span class="token string">"1897210602850418689"</span>}<span class="token punctuation">)</span> <span class="token keyword">CREATE</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:study{name:<span class="token string">"学习"</span><span class="token punctuation">,</span>startDate:<span class="token string">"2020-01-01"</span><span class="token punctuation">,</span>endDate:<span class="token string">"2024-05-01"</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre>
    <ol start="3">
     <li>
      使用新节点来创建有属性关系
     </li>
    </ol>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token punctuation">(</span>video1:YoutubeVideo1{title:<span class="token string">"Action Movie1"</span><span class="token punctuation">,</span>updated_by:<span class="token string">"Abc"</span><span class="token punctuation">,</span>uploaded_date:<span class="token string">"10/10/2010"</span>}<span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token punctuation">[</span>r:ACTION_MOVIES{rating:<span class="token number">1</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span>
<span class="token punctuation">(</span>video2:YoutubeVideo2{title:<span class="token string">"Action Movie2"</span><span class="token punctuation">,</span>updated_by:<span class="token string">"Xyz"</span><span class="token punctuation">,</span>uploaded_date:<span class="token string">"12/12/2012"</span>}<span class="token punctuation">)</span> 
</code></pre>
    <h3>
     <a id="22_30">
     </a>
     2.2.修改关系
    </h3>
    <h2>
     <a id="3_32">
     </a>
     3.删除
    </h2>
    <h3>
     <a id="31_33">
     </a>
     3.1.删除节点的某个属性
    </h3>
    <p>
     删除学校中id为9的数据的address属性
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:school<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> n<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"9"</span> REMOVE n<span class="token punctuation">.</span>address <span class="token keyword">RETURN</span> n<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="32_38">
     </a>
     3.2.删除节点的所有关系
    </h3>
    <ul>
     <li>
      (n:school {id: “1”})-[r]-() 所有关系
     </li>
     <li>
      (n:school {id: “1”})-[r]-&gt;() 节点指出去的关系
     </li>
     <li>
      (n:school {id: “1”})&lt;-[r]-() 指向节点的关系
     </li>
    </ul>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:school {id: <span class="token string">"1"</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">DELETE</span> r<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="33_47">
     </a>
     3.3.删除节点的某个关系
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:teacher {id: <span class="token string">"1002"</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:teach<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">DELETE</span> r<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="34_53">
     </a>
     3.4.删除节点以及关系
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:school<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> n<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"4"</span> DETACH <span class="token keyword">DELETE</span> n<span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="4_58">
     </a>
     4.查询
    </h2>
    <h3>
     <a id="41id_59">
     </a>
     4.1.根据节点内部id查询节点
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:school<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> id<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">22</span> <span class="token keyword">RETURN</span> n<span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b2f067a6fd8e47c5a5a74ca9152838bf.png"/>
    </p>
    <hr/>
    <p>
     注：前面的cql查询，id都是指内部id；后面的cql中，id都是指自定义的id属性。
    </p>
    <h3>
     <a id="42a_69">
     </a>
     4.2.查询从a节点指出去的所有关系节点
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>a:school {id: <span class="token string">'7'</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> b<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="43a_74">
     </a>
     4.3.查询指向a节点的所有关系节点
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>a:student {id: <span class="token string">'7'</span>}<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> b<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="44a1_78">
     </a>
     4.4.查询与a节点存在关系、且距离为1的所有节点
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>a:student {id: <span class="token string">'7'</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> a<span class="token punctuation">,</span> r<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="45a3_83">
     </a>
     4.5.查询与a节点存在关系、且距离小于等于3的所有节点
    </h3>
    <pre><code class="prism language-sql"><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>a:student {id: <span class="token string">'7'</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token operator">*</span><span class="token number">1.</span><span class="token number">.3</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> a<span class="token punctuation">,</span> r<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34373837343233302f:61727469636c652f64657461696c732f313436313132373131" class_="artid" style="display:none">
 </p>
</div>


