---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34373132343131322f:61727469636c652f64657461696c732f313239363833383634"
layout: post
title: "å¾®ä¿¡å°ç¨‹åºå®ç°å¤šè¯­è¨€æ–¹æ¡ˆä¸­è‹±äº’è¯‘"
date: 2024-11-06 14:50:44 +08:00
description: "æœ¬æ–‡ä»‹ç»äº†å®ç°å¤šè¯­è¨€æ”¯æŒçš„é€šç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å»ºç«‹è¯­è¨€æ˜ å°„åº“ï¼Œå­˜å‚¨ç”¨æˆ·è¯­è¨€é€‰æ‹©ï¼ŒåŠ¨æ€åŠ è½½ç›¸åº”è¯­è¨€ç‰ˆæœ¬ã€‚æä¾›"
keywords: "å¾®ä¿¡å°ç¨‹åºå¤šè¯­è¨€"
categories: ['å°ç¨‹åº']
tags: ['å¾®ä¿¡å°ç¨‹åº', 'å°ç¨‹åº', 'å‰ç«¯']
artid: "129683864"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=129683864
    alt: "å¾®ä¿¡å°ç¨‹åºå®ç°å¤šè¯­è¨€æ–¹æ¡ˆä¸­è‹±äº’è¯‘"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=129683864
featuredImagePreview: https://bing.ee123.net/img/rand?artid=129683864
---

# å¾®ä¿¡å°ç¨‹åºå®ç°å¤šè¯­è¨€æ–¹æ¡ˆ|ä¸­è‹±äº’è¯‘

## ä¸ç®¡å“ªä¸ªç³»ç»Ÿï¼Œå¤šè¯­è¨€æ–¹æ¡ˆå¥—è·¯éƒ½æ˜¯ä¸€æ ·çš„

---

**1ã€å»ºç«‹å¤šè¯­è¨€æ˜ å°„åº“
  
2ã€è®°å½•å¹¶å­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ç‰ˆæœ¬ï¼Œä¸‹æ¬¡è¿›å…¥ç›´æ¥è¿›å…¥å¯¹åº”è¯­è¨€ç‰ˆæœ¬
  
3ã€æ ¹æ®ç”¨æˆ·è®¾ç½®åŠ¨æ€åŠ è½½è¯­è¨€ç‰ˆæœ¬
  
4ã€å‰å°è°ƒç”¨**

#### æ•ˆæœå›¾ ğŸ¤

![](https://i-blog.csdnimg.cn/blog_migrate/24bc532013206409e1fc7bf2f059e412.png)
![](https://i-blog.csdnimg.cn/blog_migrate/0ffd6ddc726a8b9a26d8f90013c7ce3d.png)

å°ç¨‹åºä»£ç ç‰‡æ®µ
ï¼ˆå»ºè®®çœ‹ä»£ç ç‰‡æ®µï¼Œæ–‡ç« ç›¸å¯¹äºå•°å—¦ç‚¹ï¼‰

```xml
https://developers.weixin.qq.com/s/ByeaUSmE71Gg

```

#### ç›®å½•ç»“æ„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/970633a4c99801065c94d028100d8979.png)

#### ä¸Šä»£ç  ğŸ¤ ğŸ¤

##### é¡¹ç›®æ ¹ç›®å½•æ–°å»ºi18nç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹å­˜æ”¾ä¸åŒç‰ˆæœ¬çš„è¯­è¨€åº“ ğŸ¤

zh\_CN.js

```js
const languageMap = {
  ç®€ä½“ä¸­æ–‡: 'ç®€ä½“ä¸­æ–‡',
  ç¹ä½“ä¸­æ–‡: 'ç¹ä½“ä¸­æ–‡',
  è‹±æ–‡: 'è‹±æ–‡',
  å¤šè¯­è¨€: 'å¤šè¯­è¨€',
  è®¾å¤‡çŠ¶æ€å¯è§†å›¾: 'è®¾å¤‡çŠ¶æ€å¯è§†å›¾',
  å½“å‰ç­æ¬¡: 'å½“å‰ç­æ¬¡',
  è¿‘ä¸€å‘¨: 'è¿‘ä¸€å‘¨',
  è¿‘ä¸€æœˆ: 'è¿‘ä¸€æœˆ',
  è¿‘ä¸‰æœˆ: 'è¿‘ä¸‰æœˆ',
}
module.exports = {
  languageMap: languageMap
}

```

en.js

```js
const languageMap = {
  ç®€ä½“ä¸­æ–‡: 'Simplified Chinese',
  ç¹ä½“ä¸­æ–‡: 'Traditional Chinese',
  è‹±æ–‡: 'English',
  å¤šè¯­è¨€: 'multi language',
  è®¾å¤‡çŠ¶æ€å¯è§†å›¾: 'equipment status chart',
  å½“å‰ç­æ¬¡: 'current class',
  è¿‘ä¸€å‘¨: 'last week',
  è¿‘ä¸€æœˆ: 'last month',
  è¿‘ä¸‰æœˆ: 'last three month',
}

module.exports = {
  languageMap: languageMap
}

```

> keyä»¥ä¸­æ–‡åšæ ‡è¯†ï¼Œå‰å°ä¹¦å†™çš„æ—¶å€™å¯ä»¥ç›´æ¥å†™ä¸­æ–‡ï¼Œå¯¹è‹±è¯­ä¸å¥½çš„æ¯”è¾ƒæ–¹ä¾¿

##### é¡¹ç›®æ ¹ç›®å½•æ–°å»ºutilsç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºlanguage.js ğŸ¤

```js
function getLanguage() {
  //  è·å–æœ¬æ¬¡å­˜å‚¨çš„è¯­è¨€ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸­æ–‡
  return wx.getStorageSync('language') || 'zh_CN'
}
function translate() {
  //  è¿”å›ç¿»è¯‘å¯¹ç…§æ˜ å°„è¡¨
  return require('../i18n/' + getLanguage() + '.js').languageMap
}
function translateText(desc) {
  //  ç¿»è¯‘
  return translate()[desc] || desc
}

module.exports = {
  getLanguage: getLanguage,
  _t: translate, // JSONæ˜ å°„è¡¨
  _: translateText // ç¿»è¯‘å‡½æ•°
}


```

> ä¸ºä»€ä¹ˆè¦æœ‰translateå’ŒtranslateTextä¸¤ä¸ªæ–¹æ³•ï¼Ÿ
>   
> å› ä¸ºå°ç¨‹åºwxmlæ–‡ä»¶ä¸­åªèƒ½ä½¿ç”¨å¯¹è±¡ï¼Œjsæ–‡ä»¶ä¸­åªèƒ½ä½¿ç”¨å‡½æ•°ï¼Œæ— æ³•é€šç”¨

##### é¡¹ç›®æ ¹ç›®å½•æ–°å»ºcomponentsç›®å½•ï¼Œåœ¨è¯¥ç›®å½•æ–°å»ºswitchLanguageç›®å½•ï¼Œå­˜æ”¾è¯­è¨€åˆ‡æ¢ç»„ä»¶ ğŸ¤

wxmlæ–‡ä»¶

```html
<view class="switch-language-box">
    <picker bindchange="bindPickerChange" value="{{index}}" range="{{array}}" range-key="name">
        <view class="picker">
            {{language}}
            {{array[index].name}}
        </view>
    </picker>
</view>

```

jsæ–‡ä»¶

```js
const base = require('../../utils/language.js')
const _ = base._

Component({
    data: {
        index: 0,
        language: 'zh_CN',
        array: [
            {
                value: 'zh_CN',
                name: _('ç®€ä½“ä¸­æ–‡')
            },
            {
                value: 'en',
                name: _('è‹±æ–‡')
            }
        ]
    },
    lifetimes: {
        attached() {
            const language = base.getLanguage()
            let index = 0
            switch (language) {
                case 'zh_CN':
                    index = 0
                    break
                case 'en':
                    index = 1
                    break
                default:
                    break
            }
            this.setData({
                index: index,
                language: language,
                array: [
                    {
                        value: 'zh_CN',
                        name: _('ç®€ä½“ä¸­æ–‡')
                    },
                    {
                        value: 'en',
                        name: _('è‹±æ–‡')
                    }
                ]
            })
        }
    },
    methods: {
        bindPickerChange: function (e) {
            this.setData({
                index: e.detail.value,
                language: this.data.array[e.detail.value].value
            })
            this.switchLanguage()
        },
        switchLanguage() {
            wx.setStorageSync('language', this.data.language)
            // é‡æ–°åŠ è½½ä¸€æ¬¡é¡µé¢
            // wx.navigateTo({
            //     url: 'index'
            // })
            this.setData({
                array: [
                    {
                        value: 'zh_CN',
                        name: _('ç®€ä½“ä¸­æ–‡')
                    },
                    {
                        value: 'en',
                        name: _('è‹±æ–‡')
                    }
                ]
            })

            // è§¦å‘é¡µé¢åˆ·æ–°ï¼Œå¦åˆ™å½“å‰é¡µè¯­è¨€ç‰ˆæœ¬æ— æ³•æ›´æ–°
            this.triggerEvent('refleshevent')
        }
    }
})

```

wxssæ–‡ä»¶å¯ä»¥è‡ªå·±å®šä¹‰

```css
.switch-language-box{
	position: fixed;
	top: 10px;
	right: 10px;
	border: 1px solid gray;
}

```

#### åº”ç”¨ ğŸ¤

jsonæ–‡ä»¶ï¼ˆå¼•ç”¨è¯­è¨€åˆ‡æ¢ç»„ä»¶ï¼‰

```js
    "usingComponents": {
        "switchLanguage": "./components/switchLanguage/index"
    }

```

wxmlæ–‡ä»¶

```html
<switchLanguage bindrefleshevent="reflesh"></switchLanguage>

```

jsæ–‡ä»¶

```js
const base = require('../../utils/language.js')
const _ = base._

Page({
  data: {
    _t: ''
  },
  onLoad(option) {
    this.mixinFn()
    wx.setNavigationBarTitle({
      title: _('è®¾å¤‡çŠ¶æ€å¯è§†å›¾')
    })
  },
  reflesh() {
    this.onLoad()
  },
  mixinFn() {
    this.setData({
      _t: base._t()
    })
  }
})


```

##### å‰å°é¡µé¢ä½¿ç”¨

```html
<switchLanguage bindrefleshevent="reflesh"></switchLanguage>
<text>{{_t['å¤šè¯­è¨€']}}</text>
<view>{{_t['è¿‘ä¸€æœˆ']}}</view>
<view>{{_t['è¿‘ä¸‰æœˆ']}}</view>
<view>{{_t['å½“å‰ç­æ¬¡']}}</view>

```

##### æ•ˆæœå›¾

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/0cb0eec608eee537a2f14dad46e0a907.png)

## çŸ¥æ— ä¸è¨€ ğŸ¤

[å‚è€ƒé“¾æ¥ï¼Œåœ¨è¯¥é“¾æ¥çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ä¼˜åŒ–](https://www.likecs.com/show-205137807.html#sc=2837)