---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3431373931323331:2f61727469636c652f64657461696c732f3839383533343530"
layout: post
title: "IBM-X3650-M3服务器上RAID配置实战"
date: 2019-05-05 19:21:58 +0800
description: "背景知识：RAID就是一种由多块廉价磁盘构成的冗余阵列，在操作系统下是作为一个独立的大型存储设备出现"
keywords: "x3650m3 raid配置图解"
categories: ['系统运维']
tags: ['硬件', 'Raid']
artid: "89853450"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=89853450
    alt: "IBM-X3650-M3服务器上RAID配置实战"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=89853450
featuredImagePreview: https://bing.ee123.net/img/rand?artid=89853450
---

# IBM X3650 M3服务器上RAID配置实战

背景知识：RAID就是一种由多块廉价磁盘构成的冗余阵列，在操作系统下是作为一个独立的大型存储设备出现的。RAID可以充分发挥出多块硬盘的优势，可以提升硬盘速度，增大容量，提供容错功能确保数据安全性，在任何一块硬盘出现问题的情况下都可以继续工作，不会受到损坏硬盘的影响。RAID可以分为软raid和硬raid，一般中高档的服务器多使用硬件raid控制器，硬件Raid基于Raid卡，软件Raid基于操作系统。
  
单位新到一台IBM X3650 M3服务器准备做测试用，有一段时间没有亲自做RAID了，所以自己动手实践一下。看一下机器配置参数单，可以发现RAID卡支持RAID 0, 1, 5, 10。一般当硬盘连接到阵列卡(RAID)上时，操作系统将不能直接看到物理的硬盘，因此需要创建RAID，这样系统才能够正确识别它，然后进行安装系统。根据需要准备对这台机器做RAID10 ，具体步骤如下：
  
一、启动机器，自检过程中会有+的提示，同时按下这两个键再点击START，就可以进入WEBBIOS的图形设置界面。如图示：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f64a260115fd52963efa344864ed3972.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/121ca4cac013c6ce85f8dc37ce18971f.png)
  
二、点击Configuration Wizard，进入阵列设置向导。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b24d353c1314e32ce14e909c0510a502.png)
  
Clear Configuration（清除配置）：清除已有的配置信息，注意会丢失所有的数据。
  
New Configuration（全新配置）：清除已有的配置信息，并且全新创建新的配置。
  
Add Configuration（添加配置）：保留原有配置信息，并且添加新的硬盘到原有的配置中。（该配置通常不会引起数据丢失，但该操作有风险，建议先备份数据！）
  
注意：如果选择前两个选项（Clear Configuration 和New Configuration），会丢失所有数据！请先备份所有数据！如果是新机，就不用担心此项了。
  
接下来，我们选择 New Configuration，在左侧单击选中磁盘，然后选择addtoarray把它添加到右侧diskgroups中，一个组中添加两块磁盘，创建完第一组后点击accept dg。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3b2e171bc4715faa8aa0badf924abc39.png)
  
配置raid10 需要创建两个物理硬盘数量相同的Disk Group，如下图所示。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3533a3d252a2b7cd0d20dd9cde48315c.png)
  
选择相应硬盘，配置完Disk Group 之后，点击Accept 按钮。然后点击Next 按钮进入配置Span 的界面，选择已有的Disk Group 点击Add to SPAN 按钮加入到Span 中。然后再点击Next 按钮。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5cd6da405f1bcd13cc87619165389451.png)

进入配置RAID10 参数界面，根据需求修改相应参数。如Strip Size 和RAID Level 等参数。（通常建议选择默认设置。）配置完成之后，点击Accept 按钮。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/0cbab72d1b7351ba2b608cb0c729b12d.png)
  
进入Virtual Disk 预览界面，确认无误后，点击Accept 按钮。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/efc325189e2667d6bd3cdee6d62547a0.png)
  
提示保存配置信息。点击Yes 按钮。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f2f40eb6308f9f2408a01855d6d8d469.png)
  
提示会丢失所有数据，确认后，点击Yes 按钮。

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/15cad5f34de161bedc136768e87db06e.png)
  
配置完成后进入的界面。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/82ff47dbe9405df15cf4f14418f13032.png)

点击Home 按钮返回主界面时，可以看到目前所有硬盘的状态。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d7f630878f62849bb387b341261e009e.png)
  
点击Exit，保存退出。重启机器，放入系统引导盘就可以正常安装系统了。
  
补充：

RAID的几种工作模式
  
1、RAID0
  
即Data Stripping数据分条技术。RAID 0可以把多块硬盘连成一个容量更大的硬盘群，可以提高磁盘的性能和吞吐量。RAID 0没有冗余或错误修复能力，成本低，要求至少两个磁盘，一般只是在那些对数据安全性要求不高的情况下才被使用。
  
（1）、RAID 0最简单方式
  
就是把x块同样的硬盘用硬件的形式通过智能磁盘控制器或用操作系统中的磁盘驱动程序以软件的方式串联在一起，形成一个独立的逻辑驱动器，容量是单独硬盘的x倍,在电脑数据写时被依次写入到各磁盘中，当一块磁盘的空间用尽时，数据就会被自动写入到下一块磁盘中，它的好处是可以增加磁盘的容量。速度与其中任何一块磁盘的速度相同，如果其中的任何一块磁盘出现故障，整个系统将会受到破坏，可靠性是单独使用一块硬盘的1/n。
  
（2）、RAID 0的另一方式
  
是用n块硬盘选择合理的带区大小创建带区集，最好是为每一块硬盘都配备一个专门的磁盘控制器,在电脑数据读写时同时向n块磁盘读写数据,速度提升n倍。提高系统的性能。
  
2、RAID 1
  
RAID 1称为磁盘镜像：把一个磁盘的数据镜像到另一个磁盘上，在不影响性能情况下最大限度的保证系统的可靠性和可修复性上，具有很高的数据冗余能力，但磁盘利用率为50%，故成本最高，多用在保存关键性的重要数据的场合。RAID 1有以下特点：
  
（1）、RAID 1的每一个磁盘都具有一个对应的镜像盘，任何时候数据都同步镜像，系统可以从一组镜像盘中的任何一个磁盘读取数据。
  
（2）、磁盘所能使用的空间只有磁盘容量总和的一半，系统成本高。
  
（3）、只要系统中任何一对镜像盘中至少有一块磁盘可以使用，甚至可以在一半数量的硬盘出现问题时系统都可以正常运行。
  
（4）、出现硬盘故障的RAID系统不再可靠，应当及时的更换损坏的硬盘，否则剩余的镜像盘也出现问题，那么整个系统就会崩溃。
  
（5）、更换新盘后原有数据会需要很长时间同步镜像，外界对数据的访问不会受到影响，只是这时整个系统的性能有所下降。
  
（6）、RAID 1磁盘控制器的负载相当大，用多个磁盘控制器可以提高数据的安全性和可用性。
  
3、RAID0+1
  
把RAID0和RAID1技术结合起来，数据除分布在多个盘上外，每个盘都有其物理镜像盘，提供全冗余能力，允许一个以下磁盘故障，而不影响数据可用性，并具有快速读/写能力。RAID0+1要在磁盘镜像中建立带区集至少4个硬盘。
  
4、RAID2
  
电脑在写入数据时在一个磁盘上保存数据的各个位，同时把一个数据不同的位运算得到的海明校验码保存另一组磁盘上，由于海明码可以在数据发生错误的情况下将错误校正，以保证输出的正确。但海明码使用数据冗余技术，使得输出数据的速率取决于驱动器组中速度最慢的磁盘。RAID2控制器的设计简单。
  
5、RAID3：带奇偶校验码的并行传送
  
RAID 3使用一个专门的磁盘存放所有的校验数据，而在剩余的磁盘中创建带区集分散数据的读写操作。当一个完好的RAID 3系统中读取数据，只需要在数据存储盘中找到相应的数据块进行读取操作即可。但当向RAID 3写入数据时，必须计算与该数据块同处一个带区的所有数据块的校验值，并将新值重新写入到校验块中，这样无形虽增加系统开销。当一块磁盘失效时，该磁盘上的所有数据块必须使用校验信息重新建立，如果所要读取的数据块正好位于已经损坏的磁盘，则必须同时读取同一带区中的所有其它数据块，并根据校验值重建丢失的数据，这使系统减慢。当更换了损坏的磁盘后，系统必须一个数据块一个数据块的重建坏盘中的数据，整个系统的性能会受到严重的影响。RAID 3最大不足是校验盘很容易成为整个系统的瓶颈，对于经常大量写入操作的应用会导致整个RAID系统性能的下降。RAID 3适合用于数据库和WEB服务器等。
  
6、 RAID4
  
RAID4即带奇偶校验码的独立磁盘结构，RAID4和RAID3很象，它对数据的访问是按数据块进行的，也就是按磁盘进行的，每次是一个盘，RAID4的特点和RAID3也挺象，不过在失败恢复时，它的难度可要比RAID3大得多了，控制器的设计难度也要大许多，而且访问数据的效率不怎么好。
  
7、 RAID5
  
RAID 5把校验块分散到所有的数据盘中。RAID 5使用了一种特殊的算法，可以计算出任何一个带区校验块的存放位置。这样就可以确保任何对校验块进行的读写操作都会在所有的RAID磁盘中进行均衡，从而消除了产生瓶颈的可能。RAID5的读出效率很高，写入效率一般，块式的集体访问效率不错。RAID 5提高了系统可靠性，但对数据传输的并行性解决不好，而且控制器的设计也相当困难。
  
8、RAID6
  
RAID6即带有两种分布存储的奇偶校验码的独立磁盘结构，它是对RAID5的扩展，主要是用于要求数据绝对不能出错的场合，使用了二种奇偶校验值，所以需要N+2个磁盘，同时对控制器的设计变得十分复杂，写入速度也不好，用于计算奇偶校验值和验证数据正确性所花费的时间比较多，造成了不必须的负载，很少人用。
  
9、 RAID7
  
RAID7即优化的高速数据传送磁盘结构，它所有的I/O传送均是同步进行的，可以分别控制，这样提高了系统的并行性和系统访问数据的速度；每个磁盘都带有高速缓冲存储器，实时操作系统可以使用任何实时操作芯片，达到不同实时系统的需要。允许使用SNMP协议进行管理和监视，可以对校验区指定独立的传送信道以提高效率。可以连接多台主机，当多用户访问系统时，访问时间几乎接近于0。但如果系统断电，在高速缓冲存储器内的数据就会全部丢失，因此需要和UPS一起工作，RAID7系统成本很高。
  
10、 RAID10
  
RAID10即高可靠性与高效磁盘结构它是一个带区结构加一个镜象结构，可以达到既高效又高速的目的。