---
layout: post
title: "MySQL复习笔记"
date: 2025-03-08 22:25:32 +0800
description: "MySQL是一个关系型数据库管理系统前世：瑞典MySQL AB 公司今生：属于Oracle旗下产品MySQL是最好的RDBMS（关系型数据库）应用软件之一开源的数据库软件体积小、速度快、总体拥有成本低中小型网站、或者大型网站，集群。"
keywords: "MySQL复习笔记"
categories: ['未分类']
tags: ['笔记', '数据库', 'Mysql']
artid: "146123345"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146123345
    alt: "MySQL复习笔记"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146123345
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146123345
cover: https://bing.ee123.net/img/rand?artid=146123345
image: https://bing.ee123.net/img/rand?artid=146123345
img: https://bing.ee123.net/img/rand?artid=146123345
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     MySQL复习笔记
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="1MySQL_2">
     </a>
     1.MySQL
    </h3>
    <hr/>
    <h4>
     <a id="11_4">
     </a>
     1.1什么是数据库
    </h4>
    <p>
     数据库(DB, DataBase)
     <br/>
     概念：数据仓库，软件，安装在操作系统（window、linux、mac…）之上
     <br/>
     作用：存储数据，管理数据
    </p>
    <h4>
     <a id="12__9">
     </a>
     1.2 数据库分类
    </h4>
    <p>
     关系型数据库：（SQL）
    </p>
    <ul>
     <li>
      MySQL，Oracle，Sql Server，DB2…
     </li>
     <li>
      通过表和表之间，行和列之间的关系进行数据的存储
     </li>
    </ul>
    <p>
     非关系型数据库：（Not Only SQL）
    </p>
    <ul>
     <li>
      Redis，MongDB
     </li>
     <li>
      非关系型数据库，对象存储，通过对象自身的属性来决定
     </li>
    </ul>
    <p>
     DBMS(数据库关系系统)
    </p>
    <ul>
     <li>
      数据库的管理软件，科学有效地管理数据
     </li>
    </ul>
    <h4>
     <a id="13_MySQL_22">
     </a>
     1.3 MySQL简介
    </h4>
    <p>
     MySQL是一个关系型数据库管理系统
    </p>
    <p>
     前世：瑞典MySQL AB 公司
    </p>
    <p>
     今生：属于Oracle旗下产品
    </p>
    <p>
     MySQL是最好的RDBMS（关系型数据库）应用软件之一
    </p>
    <p>
     开源的数据库软件
    </p>
    <p>
     体积小、速度快、总体拥有成本低
    </p>
    <p>
     中小型网站、或者大型网站，集群
    </p>
    <p>
     version：5.7、8.0
    </p>
    <h4>
     <a id="14_39">
     </a>
     1.4连接数据库
    </h4>
    <pre><code class="prism language-sql">所有语句使用；结尾
<span class="token keyword">show</span> <span class="token keyword">databases</span>；<span class="token comment">-- 查看所有数据库</span>

mysql<span class="token operator">&gt;</span><span class="token keyword">use</span> school <span class="token comment">-- 切换数据库 use 数据库名</span>
<span class="token keyword">Database</span> changed

<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span> <span class="token comment">-- 查看数据库中所有的表</span>
<span class="token keyword">describe</span> student<span class="token punctuation">;</span> <span class="token comment">-- 显示数据库中所有的表的信息</span>

<span class="token keyword">create</span> <span class="token keyword">database</span> westos<span class="token punctuation">;</span> <span class="token comment">-- 创建一个数据库</span>

<span class="token keyword">exit</span><span class="token punctuation">;</span> <span class="token comment">--退出连接</span>

<span class="token comment">-- 单行注释</span>
<span class="token comment">/*（多行注释）
*/</span>
</code></pre>
    <p>
     <strong>
      数据库语言 CRUD CV API
     </strong>
    </p>
    <p>
     DDL - 定义
    </p>
    <p>
     DML - 操作
    </p>
    <p>
     DQL - 查询
    </p>
    <p>
     DCL - 控制
    </p>
    <h3>
     <a id="2__70">
     </a>
     2. 操作数据库
    </h3>
    <hr/>
    <h4>
     <a id="21__72">
     </a>
     2.1 操作数据库
    </h4>
    <p>
     操作数据库 &gt; 操作数据库中的表 &gt; 操作数据库中表的数据
     <br/>
     1、创建数据库
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> musichouse
</code></pre>
    <p>
     2、删除数据库
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> musichouse
</code></pre>
    <p>
     3、使用数据库
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 如果表名或字段名是个特殊字符需要加上`name`</span>
<span class="token keyword">USE</span> <span class="token identifier"><span class="token punctuation">`</span>musichouse<span class="token punctuation">`</span></span>
<span class="token keyword">USE</span> musichouse

<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> student
</code></pre>
    <p>
     关键字不区分大小写
    </p>
    <h4>
     <a id="22__93">
     </a>
     2.2 数据库的列类型
    </h4>
    <blockquote>
     <p>
      数值
     </p>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
       </th>
       <th>
       </th>
       <th>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        tinyint
       </td>
       <td>
        十分小的数据
       </td>
       <td>
        1个字节
       </td>
      </tr>
      <tr>
       <td>
        smallint
       </td>
       <td>
        较小的数据
       </td>
       <td>
        2个字节
       </td>
      </tr>
      <tr>
       <td>
        mediumint
       </td>
       <td>
        中等的数据
       </td>
       <td>
        3个字节
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         int
        </strong>
       </td>
       <td>
        <strong>
         标准的整数
        </strong>
       </td>
       <td>
        <strong>
         4个字节（常用）
        </strong>
       </td>
      </tr>
      <tr>
       <td>
        bigint
       </td>
       <td>
        较大的数据
       </td>
       <td>
        8个字节
       </td>
      </tr>
      <tr>
       <td>
        float
       </td>
       <td>
        浮点数
       </td>
       <td>
        4个字节
       </td>
      </tr>
      <tr>
       <td>
        double
       </td>
       <td>
        浮点数
       </td>
       <td>
        8个字节
       </td>
      </tr>
      <tr>
       <td>
        decimal(金融计算)
       </td>
       <td>
        字符串形式的浮点数
       </td>
       <td>
        精度问题
       </td>
      </tr>
      <tr>
       <td>
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <blockquote>
     <p>
      字符串
     </p>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
       </th>
       <th>
       </th>
       <th>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        char
       </td>
       <td>
        字符串固定大小
       </td>
       <td>
        0~255
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         varchar
        </strong>
       </td>
       <td>
        <strong>
         可变字符串
        </strong>
       </td>
       <td>
        <strong>
         0~65535（常用 - String）
        </strong>
       </td>
      </tr>
      <tr>
       <td>
        tinytext
       </td>
       <td>
        微型文本
       </td>
       <td>
        2^8 -1
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         text
        </strong>
       </td>
       <td>
        <strong>
         文本串
        </strong>
       </td>
       <td>
        <strong>
         2^16 - 1（保存大文本）
        </strong>
       </td>
      </tr>
     </tbody>
    </table>
    <blockquote>
     <p>
      时间日期
     </p>
    </blockquote>
    <p>
     java.util.Data
    </p>
    <table>
     <thead>
      <tr>
       <th>
       </th>
       <th>
       </th>
       <th>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        date
       </td>
       <td>
        YYYY-MM-DD
       </td>
       <td>
        日期格式
       </td>
      </tr>
      <tr>
       <td>
        time
       </td>
       <td>
        HH : mm : ss
       </td>
       <td>
        时间格式
       </td>
      </tr>
      <tr>
       <td>
        dataime
       </td>
       <td>
        YYYY-MM-DD HH : mm : ss
       </td>
       <td>
        最常用的时间格式
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         timestamp
        </strong>
       </td>
       <td>
        <strong>
         时间戳
        </strong>
       </td>
       <td>
        <strong>
         1970.1.1到现在的毫秒数
        </strong>
       </td>
      </tr>
      <tr>
       <td>
        year
       </td>
       <td>
        年份表示
       </td>
       <td>
       </td>
      </tr>
     </tbody>
    </table>
    <blockquote>
     <p>
      null
     </p>
    </blockquote>
    <ul>
     <li>
      没有值，位置
     </li>
     <li>
      <mark>
       注意，不要使用NULL进行运算，结果为NULL
      </mark>
     </li>
    </ul>
    <h4>
     <a id="23__139">
     </a>
     2.3 数据库的字段属性（重点）
    </h4>
    <hr/>
    <p>
     <mark>
      Unsigned:
     </mark>
    </p>
    <ul>
     <li>
      无符号的整数
     </li>
     <li>
      声明了该列 不能声明为负数
     </li>
    </ul>
    <p>
     <mark>
      zerofill：
     </mark>
    </p>
    <ul>
     <li>
      0填充
     </li>
     <li>
      不足的位数，使用0填充，int(3) 5 - &gt; 005
     </li>
    </ul>
    <p>
     <mark>
      自增：
     </mark>
    </p>
    <ul>
     <li>
      通常理解为自增，自动在上一条记录的基础上+1（默认）
     </li>
     <li>
      通常用来设计唯一的主键 - index，必须是整数类型
     </li>
     <li>
      可以自定义设计主键自增的起始值和步长
     </li>
    </ul>
    <p>
     <mark>
      非空：NULL not null
     </mark>
    </p>
    <ul>
     <li>
      假设设置为 not null，如果不赋值，就会报错！
     </li>
     <li>
      NULL，如果不填写值，默认就是null！
     </li>
    </ul>
    <p>
     <mark>
      默认：
     </mark>
    </p>
    <ul>
     <li>
      设置默认的值
     </li>
     <li>
      gender 默认为男，如果不指定该列的值，则会有默认的值
     </li>
    </ul>
    <p>
     扩展：
    </p>
    <pre><code class="prism language-sql"><span class="token comment">/* 每一个表，都必须存在以下五个字段！未来做项目用的，表示一个记录存在意义
id 主键
`version` 乐观锁
is_delete 伪删除
gmt_create 创建时间
gmt_update 修改时间
*/</span>
</code></pre>
    <h4>
     <a id="24__173">
     </a>
     2.4 创建数据库表（重点）
    </h4>
    <hr/>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>studnet<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'学号'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'匿名'</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'123456'</span> <span class="token keyword">COMMENT</span> <span class="token string">'密码'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'女'</span> <span class="token keyword">COMMENT</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>birthday<span class="token punctuation">`</span></span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'出生日期'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'家庭住址'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'邮箱'</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

</code></pre>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> <span class="token identifier"><span class="token punctuation">`</span>表名<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
	<span class="token identifier"><span class="token punctuation">`</span>字段名<span class="token punctuation">`</span></span> 列类型<span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token identifier"><span class="token punctuation">`</span>字段名<span class="token punctuation">`</span></span> 列类型<span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">[</span>表类型<span class="token punctuation">]</span><span class="token punctuation">[</span>字符集设置<span class="token punctuation">]</span><span class="token punctuation">[</span>注释<span class="token punctuation">]</span>
</code></pre>
    <p>
     常用命令
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> school <span class="token comment">-- 查看创建数据库的语句</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student <span class="token comment">-- 查看student数据表的定义语句</span>
<span class="token keyword">DESC</span> student <span class="token comment">-- 显是表的结构</span>
</code></pre>
    <h4>
     <a id="25__204">
     </a>
     2.5 数据表的类型
    </h4>
    <hr/>
    <pre><code class="prism language-sql"><span class="token comment">-- 关于数据库引擎</span>
<span class="token comment">/*
INNODB 默认使用
MYISAM 早些年使用的
*/</span>
</code></pre>
    <table>
     <thead>
      <tr>
       <th>
       </th>
       <th>
        MYISAM
       </th>
       <th>
        INNODB
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        事务支持
       </td>
       <td>
        不支持
       </td>
       <td>
        支持
       </td>
      </tr>
      <tr>
       <td>
        数据行锁定
       </td>
       <td>
        不支持
       </td>
       <td>
        支持
       </td>
      </tr>
      <tr>
       <td>
        外键
       </td>
       <td>
        不支持
       </td>
       <td>
        支持
       </td>
      </tr>
      <tr>
       <td>
        全文索引
       </td>
       <td>
        支持
       </td>
       <td>
        不支持
       </td>
      </tr>
      <tr>
       <td>
        表空间大小
       </td>
       <td>
        较小
       </td>
       <td>
        较大，约为MYSIAM的 2 倍
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     常规使用操作：
    </p>
    <ul>
     <li>
      MYISAM：节约空间，速度较快
     </li>
     <li>
      INNODB：安全性高，支持事务的处理，多表多用户操作
     </li>
    </ul>
    <blockquote>
     <p>
      在物理空间存在的位置
     </p>
    </blockquote>
    <p>
     所有的数据库文件都存在 data 目录下，一个文件夹就对应一个数据库
     <br/>
     本质还是文件的存储
    </p>
    <p>
     MySQL 引擎在物理文件上的区别
    </p>
    <ul>
     <li>
      InnoDB 在数据库表中只有一个 *.frm 文件，以及上级目录下的ibdata1文件
     </li>
     <li>
      MYISAM 对应文件
      <ul>
       <li>
        *.frm 表结构的对应文件
       </li>
       <li>
        *.MYD 数据文件（data）
       </li>
       <li>
        *.MYI 索引文件（index）
       </li>
      </ul>
     </li>
    </ul>
    <blockquote>
     <p>
      设置数据库表的字符集编码
     </p>
    </blockquote>
    <p>
     CHARSET = utf8
    </p>
    <p>
     不设置的话，会是mysql默认的字符集编码（不支持中文）
     <br/>
     MySQL的默认编码是Latin1，不支持中文
     <br/>
     在my.ini 中配置默认的编码
    </p>
    <p>
     character-set-server=utf8
    </p>
    <h4>
     <a id="26__250">
     </a>
     2.6 修改数据表
    </h4>
    <hr/>
    <blockquote>
     <p>
      修改
     </p>
    </blockquote>
    <pre><code class="prism language-sql"><span class="token comment">-- 修改表名alter table 旧表名 rename as 新表明</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> teacher <span class="token keyword">RENAME</span> <span class="token keyword">AS</span> teacher1

<span class="token comment">-- 增加表的字段 alter table 表名 add 字段名 列属性</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> teacher <span class="token keyword">ADD</span> age <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>

<span class="token comment">-- 修改表的字段（重命名，修改约束！）</span>
<span class="token comment">-- alter table 表名 modify 字段名 列属性[]</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> teacher1 <span class="token keyword">MODIFY</span> age <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token comment">-- 修改约束</span>
<span class="token comment">-- ALTER TABLE 表名 change 旧名字 新名字 列属性[]</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> teacher1 CHANGE age age1 <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">-- 修改字段名</span>

<span class="token comment">-- 删除表的字段 alter table 表名 drop 字段名</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> teacher1 <span class="token keyword">DROP</span> age1

</code></pre>
    <blockquote>
     <p>
      删除
     </p>
    </blockquote>
    <pre><code class="prism language-sql"><span class="token comment">-- 删除表(如果表存在再删除表)</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> teacher1

</code></pre>
    <p>
     <mark>
      创建和删除操作尽量加上判断，以免报错
     </mark>
    </p>
    <p>
     注意点
    </p>
    <ul>
     <li>
      `` 字段名使用`字段名`包裹
     </li>
     <li>
      注释 – /* */
     </li>
     <li>
      sql关键字大小写不敏感
     </li>
    </ul>
    <h3>
     <a id="3_MySQL__287">
     </a>
     3. MySQL 数据管理
    </h3>
    <h4>
     <a id="31__288">
     </a>
     3.1 外键
    </h4>
    <blockquote>
     <p>
      方式一、创建表的时候添加约束，比较复杂
     </p>
    </blockquote>
    <pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'年纪id'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>gradename<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'年级名称'</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

<span class="token comment">-- 学生表的 gradeid 字段，要去引用年纪表的gradeid</span>
<span class="token comment">-- 1.定义外键key</span>
<span class="token comment">-- 2. 给这个外键添加约束（执行引用） references 引用</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'学号'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'匿名'</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'123456'</span> <span class="token keyword">COMMENT</span> <span class="token string">'密码'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'女'</span> <span class="token keyword">COMMENT</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'学生年级id'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>birthday<span class="token punctuation">`</span></span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'出生日期'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'家庭住址'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'邮箱'</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>FK_gradeid<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> <span class="token identifier"><span class="token punctuation">`</span>FK_gradeid<span class="token punctuation">`</span></span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

</code></pre>
    <p>
     删除有外键关系的表时，必须要先删除引用别人的（(从表），才能删除被引用的表（主表）
    </p>
    <blockquote>
     <p>
      方式二、创建表后增加约束
     </p>
    </blockquote>
    <pre><code class="prism language-sql"><span class="token comment">-- 创建表的时候没有外键关系</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>studnet<span class="token punctuation">`</span></span>
<span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> <span class="token identifier"><span class="token punctuation">`</span>FK_gradeid<span class="token punctuation">`</span></span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- alter table 表名 add constraint 约束名 foreign key(作为外键的列) references (哪个表)(表的字段)</span>
</code></pre>
    <p>
     以上操作都是物理外键，数据库级别的外键，不建议使用（避免数据库过多造成困扰）
     <br/>
     <mark>
      最佳实践
     </mark>
    </p>
    <ul>
     <li>
      数据库就是单纯的表，只用来存数据，只有行（数据）和列（字段）
     </li>
     <li>
      想使用多张表外键（用程序实现）
     </li>
    </ul>
    <h4>
     <a id="32_DML_333">
     </a>
     3.2 DML语言（全部记住）
    </h4>
    <p>
     <strong>
      数据库的意义
     </strong>
     ：数据存储，数据管理
     <br/>
     DML语言：数据操作语言
    </p>
    <ul>
     <li>
      Insert
     </li>
     <li>
      update
     </li>
     <li>
      delete
     </li>
    </ul>
    <h4>
     <a id="33__insert_340">
     </a>
     3.3 添加 insert
    </h4>
    <pre><code class="prism language-sql"><span class="token comment">-- 插入语句（添加）</span>
<span class="token comment">-- insert into 表名(字段名1,字段名2,字段3)values('值1','值2','值3')</span>
<span class="token comment">-- 由于主键自增，我们可以省略（如果不写表的字段，它会一一匹配）</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradename<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'大一'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradename<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'大二'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradename<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'大三'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>gradename<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'大四'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 一般写插入语句，要保证数据和字段一一对应</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>studnet<span class="token punctuation">`</span></span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'frank'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'LA'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'sean'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'NY'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'JOHN'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'CA'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     insert into 表名(字段名1,字段名2,字段3)values(‘值1’,‘值2’,‘值3’)
     <br/>
     注意事项：
    </p>
    <ol>
     <li>
      字段和字段之间使用 , 隔开
     </li>
     <li>
      字段可以省略，但是值要一一对应
     </li>
     <li>
      可以同时插入多条数据，values后面的值要用,隔开
     </li>
    </ol>
    <h4>
     <a id="34__update_359">
     </a>
     3.4 修改 update
    </h4>
    <blockquote>
     <p>
      update 修改谁 (条件) set 原来的值 = 新值
     </p>
    </blockquote>
    <pre><code class="prism language-sql"><span class="token comment">-- 修改名字</span>
<span class="token keyword">UPDATE</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span> <span class="token keyword">SET</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'steve'</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">-- 如果不指定条件，会改动所有表</span>
<span class="token keyword">UPDATE</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span> <span class="token keyword">SET</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'steve'</span><span class="token punctuation">;</span>、

<span class="token comment">-- 语法</span>
<span class="token comment">-- update 表名 set colnum_name = value where 条件;</span>

<span class="token comment">-- 修改多个属性，用,隔开</span>
<span class="token keyword">UPDATE</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span> <span class="token keyword">SET</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">'john'</span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token number">3</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre>
    <table>
     <thead>
      <tr>
       <th>
        操作符
       </th>
       <th>
        含义
       </th>
       <th>
        范围
       </th>
       <th>
        结果
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        =
       </td>
       <td>
        等于
       </td>
       <td>
        5-6
       </td>
       <td>
        false
       </td>
      </tr>
      <tr>
       <td>
        &lt;&gt; 或 !=
       </td>
       <td>
        不等于
       </td>
       <td>
        5&lt;&gt;6
       </td>
       <td>
        true
       </td>
      </tr>
      <tr>
       <td>
        &gt;
       </td>
       <td>
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        &lt;
       </td>
       <td>
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        &lt;=
       </td>
       <td>
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        &gt;=
       </td>
       <td>
       </td>
       <td>
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        BETWEEN… AND …
       </td>
       <td>
        在某个范围内
       </td>
       <td>
        [2,5] WHERE id BETWEEN 2 AND 5
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        AND
       </td>
       <td>
        我和你&amp;&amp;
       </td>
       <td>
        5&gt;1 AND 1&gt;2
       </td>
       <td>
        flase
       </td>
      </tr>
      <tr>
       <td>
        OR
       </td>
       <td>
        我或你
       </td>
       <td>
        5&gt;1 OR 1&gt;2
       </td>
       <td>
        true
       </td>
      </tr>
     </tbody>
    </table>
    <blockquote>
     <p>
      语法：update 表名 set colnum_name = value.[colnum_name = value] where 条件；
      <br/>
      注意：
     </p>
    </blockquote>
    <ul>
     <li>
      colnum_name 是数据库的列，尽量带``
     </li>
     <li>
      条件，筛选的条件，如果没有指定，则会修改所有的列
     </li>
     <li>
      value，是一个具体的值，也可以是一个变量
     </li>
    </ul>
    <h4>
     <a id="35__delete_393">
     </a>
     3.5 删除 delete
    </h4>
    <blockquote>
     <p>
      delete 命令
     </p>
    </blockquote>
    <p>
     语法：delete from 表明 where 条件;
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 删除数据</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre>
    <blockquote>
     <p>
      TRUNCATE 命令
     </p>
    </blockquote>
    <p>
     作用：完全清空一个数据库表，表的结构和索引约束不会变
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 清空 student 表</span>
<span class="token keyword">TRUNCATE</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
</code></pre>
    <blockquote>
     <p>
      delete和TRUNCATE区别
     </p>
    </blockquote>
    <ul>
     <li>
      相同点：都能删除数据，并且不会删除表结构
     </li>
     <li>
      不同点：
      <ul>
       <li>
        TRUNCATE 重新设置 自增列 计数器会归零
       </li>
       <li>
        TRUNCATE 不会影响事务
       </li>
       <li>
        TRUNCATE 自增会归零，DELETE不会影响自增
       </li>
      </ul>
     </li>
    </ul>
    <blockquote>
     <p>
      DELETE删除的问题，重启数据库
     </p>
    </blockquote>
    <ul>
     <li>
      InnDB 自增列会从1开始（存在内存中的，断电即失）
     </li>
     <li>
      MyISAM 继续从上一个自增量开始（存在文件中的，不会丢失）
     </li>
    </ul>
    <h3>
     <a id="4_DQL_428">
     </a>
     4. DQL查询数据（重点）
    </h3>
    <hr/>
    <h4>
     <a id="41_DQL_430">
     </a>
     4.1 DQL
    </h4>
    <p>
     (Data Query LANGUAGE：数据查询语言)
    </p>
    <ul>
     <li>
      所有的查询操作都用它 Select
     </li>
     <li>
      简单的查询，复杂的查询都能做
     </li>
     <li>
      <mark>
       数据库中最核心的语言
      </mark>
     </li>
     <li>
      使用频率最高的语句
     </li>
    </ul>
    <h4>
     <a id="42__437">
     </a>
     4.2 指定查询某个字段
    </h4>
    <pre><code class="prism language-sql"><span class="token comment">-- SELECT 字段 FROM 表</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student

<span class="token comment">-- 查询指定字段</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> student

<span class="token comment">-- 别名，给结果起一个名字 AS 也可以给字段起别名，也可以给表起别名</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> 学号<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> 学生姓名 <span class="token keyword">FROM</span> student <span class="token keyword">AS</span> s

<span class="token comment">-- 函数 拼接字符串Concat(a,b)</span>
<span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token string">'姓名:'</span><span class="token punctuation">,</span>StudentName<span class="token punctuation">)</span> <span class="token keyword">AS</span> 新名字 <span class="token keyword">FROM</span> student
</code></pre>
    <blockquote>
     <p>
      有时，列名意思不清晰需要用别名，AS 别名
     </p>
    </blockquote>
    <blockquote>
     <p>
      去重 distinct
     </p>
    </blockquote>
    <p>
     作用：去除 select 查询结果中重复的数据，重复数据只显示一条
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 查询哪些同学参加了考试，成绩</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> result 

<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> result <span class="token comment">-- 重复数据</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> result
</code></pre>
    <p>
     数据库的列
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- 查询系统版本(函数)</span>
<span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">AS</span> 计算结果 <span class="token comment">-- 用来计算(表达式)</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@auto_increment_increment</span> <span class="token comment">-- 查询自增的步长</span>

<span class="token comment">-- 学生考试成绩 + 1分查看</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token keyword">AS</span> <span class="token string">'提分后'</span> <span class="token keyword">FROM</span> result
</code></pre>
    <p>
     数据库中的表达式：文本值，列，null，函数，计算表达式，系统变量…（select选则的就是表达式）
    </p>
    <h4>
     <a id="43_Where_480">
     </a>
     4.3 Where条件句
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        运算符
       </th>
       <th>
        语法
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        and &amp;&amp;
       </td>
       <td>
        a and b
       </td>
       <td>
        逻辑与
       </td>
      </tr>
      <tr>
       <td>
        or || a or b
       </td>
       <td>
        逻辑或
       </td>
       <td>
       </td>
      </tr>
      <tr>
       <td>
        not !
       </td>
       <td>
        not a ! a
       </td>
       <td>
        逻辑非
       </td>
      </tr>
     </tbody>
    </table>
    <blockquote>
     <p>
      模糊查询：比较运算符
     </p>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
        运算符
       </th>
       <th>
        语法
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        IS NULL
       </td>
       <td>
        a is null
       </td>
       <td>
        如果操作符为null，结果为真
       </td>
      </tr>
      <tr>
       <td>
        IS NOT NULL
       </td>
       <td>
        a is not null
       </td>
       <td>
        如果操作符不为 null，结果为真
       </td>
      </tr>
      <tr>
       <td>
        between
       </td>
       <td>
        a between b and c
       </td>
       <td>
        若a在b和c之间，结果为真
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Like
        </strong>
       </td>
       <td>
        a like b
       </td>
       <td>
        SQL匹配，如果a匹配b，结果为真
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         In
        </strong>
       </td>
       <td>
        a in (a1,a2,a3…)
       </td>
       <td>
        假设a在a1，或者a2…其中的某一个值中，结果为真
       </td>
      </tr>
     </tbody>
    </table>
    <pre><code class="prism language-sql"><span class="token comment">-- 模糊查询</span>
<span class="token comment">-- 查询姓刘的同学</span>
<span class="token comment">-- like 结合 %（代表0到任意个字符） _（一个字符）</span>

<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> StudentName <span class="token operator">LIKE</span> <span class="token string">'刘%'</span><span class="token punctuation">;</span>
<span class="token comment">-- 刘某 刘_ 刘某某 刘__</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> StudentName <span class="token operator">LIKE</span> <span class="token string">'刘_'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询名字中有嘉</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> StudentName <span class="token operator">LIKE</span> <span class="token string">'%嘉%'</span><span class="token punctuation">;</span>

<span class="token comment">-- in</span>
<span class="token comment">-- 查询 1001，1002，1003号学生</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> studentNo <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span><span class="token number">1002</span><span class="token punctuation">,</span><span class="token number">1003</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询在北京的学生</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'北京'</span><span class="token punctuation">,</span><span class="token string">'河南'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- null、not null</span>
<span class="token comment">-- 查询地址为空的学生</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>address<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">OR</span> address <span class="token operator">IS</span> <span class="token boolean">NULL</span>

<span class="token comment">-- 查询有出生日期的同学 -&gt; 不为空</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>bornDate<span class="token punctuation">`</span></span> <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
</code></pre>
    <h4>
     <a id="44__531">
     </a>
     4.4 联表查询
    </h4>
    <blockquote>
     <p>
      JOIN 对比
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/84b289a5017d4369b814d41a2e18f16d.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/253f32d5cd1045fb9cb1e7984d7ce783.png"/>
     </img>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 联表查询 join</span>

<span class="token comment">-- 查询参加了考试的同学（学号，姓名，科目编号，分数）</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student

<span class="token comment">/*
思路
1.分析需求，分析用查询的字段来自哪些表（连接查询）
2.确定使用哪种连接查询？7种
确定交叉点（这两个表种哪个数据是相同的）
判断的条件：学生表的StudentNo = 成绩表的StudentNo
*/</span>
<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>studentNo<span class="token punctuation">,</span>studentName<span class="token punctuation">,</span>subjectNo<span class="token punctuation">,</span>studentResult
<span class="token keyword">FROM</span> student <span class="token keyword">AS</span> s
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> result <span class="token keyword">AS</span> r
<span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>studentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>studentNo

<span class="token comment">-- RIGHT join</span>
<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>studentNo<span class="token punctuation">,</span>studentName<span class="token punctuation">,</span>subjectNo<span class="token punctuation">,</span>studentResult
<span class="token keyword">FROM</span> student <span class="token keyword">AS</span> s
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> result <span class="token keyword">AS</span> r
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>studentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>studentNo

<span class="token comment">-- LEFT join</span>
<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>studentNo<span class="token punctuation">,</span>studentName<span class="token punctuation">,</span>subjectNo<span class="token punctuation">,</span>studentResult
<span class="token keyword">FROM</span> student <span class="token keyword">AS</span> s
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> result <span class="token keyword">AS</span> r
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>studentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>studentNo

<span class="token comment">-- join(连接的表) on(判断的条件) 连接查询</span>
<span class="token comment">-- where 等值查询</span>

<span class="token comment">-- 查询缺考的同学</span>
<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>studentNo<span class="token punctuation">,</span>studentName<span class="token punctuation">,</span>subjectNo<span class="token punctuation">,</span>studentResult
<span class="token keyword">FROM</span> student <span class="token keyword">AS</span> s
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> result <span class="token keyword">AS</span> r
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>studentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>studentNo
<span class="token keyword">WHERE</span> studentResult <span class="token operator">IS</span> <span class="token boolean">NULL</span>

<span class="token comment">-- join on 连接查询</span>
<span class="token comment">-- where 等值查询</span>

<span class="token comment">-- 查询参加考试的同学信息：学号、姓名、科目名、分数（三个表</span>

<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>studentNo<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>studentName<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>subjectName<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span> student <span class="token keyword">AS</span> s
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> result <span class="token keyword">AS</span> r
<span class="token keyword">ON</span> r<span class="token punctuation">.</span>studentNo <span class="token operator">=</span> s<span class="token punctuation">.</span>studentNo
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>subject<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> sub
<span class="token keyword">ON</span> r<span class="token punctuation">.</span>subjectNo <span class="token operator">=</span> sub<span class="token punctuation">.</span>subjectNo


<span class="token comment">/*核心
查哪些数据 select ...
从哪几个表中查 from 表 xxx join 连接的表 on 交叉条件
假设存在一种多张表查询，慢慢来，先查询两张表，然后再慢慢增加

FROM a LEFT JOIN b
FROM a RIGHT JOIN b
*/</span>

</code></pre>
    <table>
     <thead>
      <tr>
       <th>
        操作
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        inner join
       </td>
       <td>
        如果表种至少有一个匹配，就返回行
       </td>
      </tr>
      <tr>
       <td>
        left join
       </td>
       <td>
        即使右表没有匹配，也会从左表中返回所有的值
       </td>
      </tr>
      <tr>
       <td>
        right join
       </td>
       <td>
        即使左表没有匹配，也会从右表中返回所有的值
       </td>
      </tr>
     </tbody>
    </table>
    <blockquote>
     <p>
      自连接
     </p>
    </blockquote>
    <p>
     <mark>
      自己的表和自己的表连接，核心：一张表拆成两张一样的表即可
     </mark>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2a06f612f2ed446b9e59f93a030226d0.png">
      <br/>
      操作：查询父类对应的子类关系
     </img>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 查询父子信息:把一张表看为两张一模一样的表</span>
<span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>categoryName<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> <span class="token string">'父栏目'</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>categoryName<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> <span class="token string">'子栏目'</span>
<span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>category<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> a<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>category<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> b
<span class="token keyword">WHERE</span> a<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>categoryid<span class="token punctuation">`</span></span> <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>pid<span class="token punctuation">`</span></span>

<span class="token comment">-- 查询学号所属的年纪（学号，学生姓名，年纪名称）</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>GradeName<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>student<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> s
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> g
<span class="token keyword">ON</span> s<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>GradeID<span class="token punctuation">`</span></span> <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>gradeID<span class="token punctuation">`</span></span>
</code></pre>
    <h4>
     <a id="45__628">
     </a>
     4.5 分页查询和排序
    </h4>
    <pre><code class="prism language-sql"><span class="token comment">-- 分页 limit 排序 order by</span>
<span class="token comment">-- 排序：升序 asc(ascending，降序 desc(descending</span>

<span class="token keyword">SELECT</span> s<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>studentName<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>subjectName<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>studentresult<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span> student s
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>result<span class="token punctuation">`</span></span> r
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>studentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>studentNo
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>subject<span class="token punctuation">`</span></span> sub
<span class="token keyword">ON</span> r<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span> <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> subjectName<span class="token operator">=</span> <span class="token string">'数据库结构-1'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> studentResult <span class="token keyword">ASC</span>
</code></pre>
    <h4>
     <a id="46__644">
     </a>
     4.6 子查询
    </h4>
    <p>
     where (这个值是计算出来的)
    </p>
    <p>
     本质: 在where 语句中嵌套一个子查询语句
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- where</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span>r<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>result<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> r
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>subject<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> sub
<span class="token keyword">ON</span> r<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>studentno<span class="token punctuation">`</span></span> <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>subjectno<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>subjectName<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">'数据库结构-1'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> studentResult <span class="token keyword">DESC</span>

<span class="token comment">-- 方式二: 子查询()</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>result<span class="token punctuation">`</span></span> 
<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span>
    <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>subject<span class="token punctuation">`</span></span>
    <span class="token keyword">WHERE</span> subjectName <span class="token operator">=</span> <span class="token string">'数据库结构-1'</span>
<span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> studentResult <span class="token keyword">DESC</span>

<span class="token comment">-- 分数不小于80分的学生的学号和姓名 + 科目:高等数学-2</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> s<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>studentNo<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>studentName<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span> student <span class="token keyword">AS</span> s
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> result <span class="token keyword">AS</span> r
<span class="token keyword">ON</span> r<span class="token punctuation">.</span>studentno <span class="token operator">=</span> s<span class="token punctuation">.</span>StudentNo
<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span> <span class="token operator">&gt;=</span> <span class="token number">80</span> <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> subjectNo <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>subject<span class="token punctuation">`</span></span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>subjectName<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">'高等数学-2'</span>
<span class="token punctuation">)</span>

</code></pre>
    <h4>
     <a id="47__678">
     </a>
     4.7 分组和过滤
    </h4>
    <pre><code class="prism language-sql"><span class="token comment">-- 查询不同课程的avg、max、min,平均分&gt;80</span>
<span class="token comment">-- 核心: 根据不同课程分组</span>
<span class="token keyword">SELECT</span> subjectName<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>studentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 平均分<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>studentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 最高分<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>studentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 最低分
<span class="token keyword">FROM</span> result <span class="token keyword">AS</span> r
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>subject<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> sub
<span class="token keyword">ON</span> r<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span> <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> r<span class="token punctuation">.</span>subjectno <span class="token comment">-- 通过xx字段分组</span>
<span class="token keyword">HAVING</span> 平均分<span class="token operator">&gt;</span><span class="token number">80</span>
</code></pre>
    <h3>
     <a id="5_MySQL_690">
     </a>
     5. MySQL函数
    </h3>
    <h4>
     <a id="51_MySQL_692">
     </a>
     5.1 MySQL常用函数
    </h4>
    <hr/>
    <pre><code class="prism language-sql"><span class="token comment">-- 常用函数</span>

<span class="token comment">-- 数血运算</span>
<span class="token keyword">SELECT</span> ABS<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">-- 绝对值</span>
<span class="token keyword">SELECT</span> CEILING<span class="token punctuation">(</span><span class="token number">9.4</span><span class="token punctuation">)</span> <span class="token comment">-- 向上取整 10</span>
<span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token number">9.4</span><span class="token punctuation">)</span> <span class="token comment">-- 向下取整 9</span>
<span class="token keyword">SELECT</span> RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- 返回一个0-1之间的随机数</span>
<span class="token keyword">SELECT</span> SIGN<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">-- 判断一个数的符号 负数返回-1 整数返回1</span>

<span class="token comment">-- 字符串</span>
<span class="token keyword">SELECT</span> CHAR_LENGTH<span class="token punctuation">(</span><span class="token string">'啊啊啊啊啊啊啊'</span><span class="token punctuation">)</span> <span class="token comment">-- 字符串长度 7</span>
<span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token string">'大'</span><span class="token punctuation">,</span><span class="token string">'菠'</span><span class="token punctuation">,</span><span class="token string">'萝'</span><span class="token punctuation">)</span> <span class="token comment">-- 拼接字符串</span>
<span class="token keyword">SELECT</span> <span class="token keyword">INSERT</span><span class="token punctuation">(</span><span class="token string">'我爱遍程'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'超级爱'</span><span class="token punctuation">)</span> <span class="token comment">-- 查询，替换，从某个位置开始替换某个长度</span>
<span class="token keyword">SELECT</span> LOWER<span class="token punctuation">(</span><span class="token string">'FrankOcean'</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> UPPER<span class="token punctuation">(</span><span class="token string">'SteveLacy'</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">INSERT</span><span class="token punctuation">(</span><span class="token string">'TylerTheCreator'</span><span class="token punctuation">,</span><span class="token string">'o'</span><span class="token punctuation">)</span> <span class="token comment">-- 返回第一次出现子串的索引</span>
<span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">'坚持就能成功'</span><span class="token punctuation">,</span><span class="token string">'坚持'</span><span class="token punctuation">,</span><span class="token string">'努力'</span><span class="token punctuation">)</span> <span class="token comment">-- 替换指定的字符串</span>
<span class="token keyword">SELECT</span> SUBSTR<span class="token punctuation">(</span><span class="token string">'坚持一定能成功'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">-- 返回指定子字符串的指定长度</span>
<span class="token keyword">SELECT</span> REVERSE<span class="token punctuation">(</span><span class="token string">'坚持一定能成功'</span><span class="token punctuation">)</span> <span class="token comment">-- 反转</span>

<span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span>studentname<span class="token punctuation">,</span><span class="token string">'周'</span><span class="token punctuation">,</span><span class="token string">'州'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
<span class="token keyword">WHERE</span> studentName <span class="token operator">LIKE</span> <span class="token string">'周%'</span>

<span class="token comment">-- 时间和日期函数(*)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_DATE</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- 获取当前日期</span>
<span class="token keyword">SELECT</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- 获取当前日期</span>
<span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- 获取当前的时间</span>
<span class="token keyword">SELECT</span> LOCALTIME<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- 本地时间</span>
<span class="token keyword">SELECT</span> SYSDATE<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- 系统时间</span>

<span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DAY</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">HOUR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">MINUTE</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">SECOND</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- 系统</span>
<span class="token keyword">SELECT</span> <span class="token keyword">SYSTEM_USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="52__739">
     </a>
     5.2 聚合函数(常用)
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        函数名称
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        COUNT()
       </td>
       <td>
        计数
       </td>
      </tr>
      <tr>
       <td>
        SUM()
       </td>
       <td>
        求和
       </td>
      </tr>
      <tr>
       <td>
        AVG()
       </td>
       <td>
        平均值
       </td>
      </tr>
      <tr>
       <td>
        MAX()
       </td>
       <td>
        最大值
       </td>
      </tr>
      <tr>
       <td>
        MIN()
       </td>
       <td>
        最小值
       </td>
      </tr>
     </tbody>
    </table>
    <pre><code class="prism language-sql">
<span class="token comment">-- 聚合函数</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>studentName<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> result<span class="token punctuation">;</span>
<span class="token comment">/* 
三个有什么区别？
第一种，会忽略所有null值
第二种，不会忽略null值，本质 计算行数
第三种，不会忽略所有null值

效率:
如果列名是主键count(列名)最快
如果不是，count(1)快
表只有一个字段，count(*)最优
*/</span>

<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 总和 <span class="token keyword">FROM</span> result<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 平均分 <span class="token keyword">FROM</span> result<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 最高分 <span class="token keyword">FROM</span> result<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>studentResult<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 最低分 <span class="token keyword">FROM</span> result<span class="token punctuation">;</span>

<span class="token comment">-- 查询不同课程的avg、max、min,平均分&gt;80</span>
<span class="token comment">-- 核心: 根据不同课程分组</span>
<span class="token keyword">SELECT</span> subjectName<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>studentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 平均分<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>studentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 最高分<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>studentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 最低分
<span class="token keyword">FROM</span> result <span class="token keyword">AS</span> r
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>subject<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> sub
<span class="token keyword">ON</span> r<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span> <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>subjectNo<span class="token punctuation">`</span></span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> r<span class="token punctuation">.</span>subjectno <span class="token comment">-- 通过xx字段分组</span>
<span class="token keyword">HAVING</span> 平均分<span class="token operator">&gt;</span><span class="token number">80</span>

</code></pre>
    <h4>
     <a id="53_MD5_786">
     </a>
     5.3 数据库级别的MD5加密
    </h4>
    <p>
     主要增强算法复杂度和不可逆性
    </p>
    <p>
     MD5不可逆，具体的值 md5 是一样的
    </p>
    <p>
     MD5破解网站的原理，背后有一个字典，存有MD5加密后的值-加密前的值
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 测试MD5加密</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>pwd<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span></span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'frank'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'lee'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'andy'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'travis'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span>

<span class="token comment">-- 加密</span>
<span class="token keyword">UPDATE</span> testmd5 <span class="token keyword">SET</span> pwd <span class="token operator">=</span> MD5<span class="token punctuation">(</span>pwd<span class="token punctuation">)</span>
<span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">-- 插入时加密</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span></span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'lilbaby'</span><span class="token punctuation">,</span>MD5<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'weeknd'</span><span class="token punctuation">,</span>MD5<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- 如何校验</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> testmd5 <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'frank'</span> <span class="token operator">and</span> pwd <span class="token operator">=</span> MD5<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="54_select_824">
     </a>
     5.4 select小结
    </h4>
    <ul>
     <li>
      Select 去重 要查询的字段
     </li>
     <li>
      From 表 (as 表和字段名取别名
     </li>
     <li>
      xxx join 要连接的表 on 等值判断
     </li>
     <li>
      Where 具体条件/子查询语句
     </li>
     <li>
      Group By 通过哪个字段分组
     </li>
     <li>
      Having 分组后的过滤信息，条件和where相同，位置不同
     </li>
     <li>
      Rrder By … 通过 哪个字段排序 升序/降序
     </li>
     <li>
      Limit startIndex,pageSize
     </li>
    </ul>
    <p>
     业务层面：
     <br/>
     查询：跨表，跨数据库
    </p>
    <h3>
     <a id="6__839">
     </a>
     6. 事务
    </h3>
    <hr/>
    <h4>
     <a id="61__841">
     </a>
     6.1 什么是事务?
    </h4>
    <p>
     要么都成功，要么都失败
    </p>
    <ol>
     <li>
      SQL执行。A 给 B 转账 A:1000 B:200,A-200-&gt;B
     </li>
     <li>
      SQL执行。B 收到 A 的钱 B:400 A:800
     </li>
    </ol>
    <p>
     将一组 SQL 放在一个批次中去执行
    </p>
    <blockquote>
     <p>
      事务（Transaction）原则: ACID原则，原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability） （脏读，幻读…）
     </p>
    </blockquote>
    <h6>
     <a id="Atomicity_852">
     </a>
     原子性(Atomicity）
    </h6>
    <p>
     针对同一个事务
    </p>
    <p>
     A:1000 - 200 = 800
     <br/>
     B:200 + 200 = 400
     <br/>
     <mark>
      这两个动作，要么一起成功，要么一起失败，不能只发生其中一个动作。
     </mark>
    </p>
    <h6>
     <a id="Consistency_859">
     </a>
     一致性(Consistency)
    </h6>
    <p>
     <strong>
      最终一致性
     </strong>
    </p>
    <p>
     <mark>
      事务前后的数据完整性要保持一致
     </mark>
    </p>
    <p>
     无论怎么转，最后的值一定是１０００＋２００＝１２００
    </p>
    <h6>
     <a id="Isolation_866">
     </a>
     隔离性（Isolation）
    </h6>
    <p>
     <mark>
      多个用户并发访问数据库时，数据库为每一个用户开启事务，互不干扰
     </mark>
    </p>
    <p>
     A给B转钱时，C给B转，互不影响
    </p>
    <h6>
     <a id="Durability_872">
     </a>
     持久性(Durability)
    </h6>
    <p>
     <mark>
      事务一旦提交则不可逆转，被持久化到数据库中
     </mark>
    </p>
    <p>
     事务结束后的数据不会因为外界原因导致数据丢失，数据一旦提交就不可逆
    </p>
    <p>
     事务没有提交，恢复到原状
     <br/>
     事务已经提交，持久化到数据库
    </p>
    <p>
     操作前Ａ：１０００，Ｂ：２００
     <br/>
     操作后Ａ：８００，Ｂ：４００
    </p>
    <p>
     如果在操作前（事务还没有提交）服务器宕机／断电，重启后的服务器数据状态应为
     <br/>
     操作前Ａ：１０００，Ｂ：２００
    </p>
    <p>
     如果在操作后（事务已经提交）服务器宕机／断电，重启后的服务器数据状态应为
     <br/>
     操作后Ａ：８００，Ｂ：４００
    </p>
    <h6>
     <a id="_891">
     </a>
     事务隔离级别
    </h6>
    <p>
     <strong>
      脏读:
     </strong>
     <br/>
     <mark>
      一个事务读取了另外一个未提交事务的数据
     </mark>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8ef491313e824784959772a5f50194c4.png">
      <br/>
      <strong>
       不可重复读
      </strong>
      <br/>
      <mark>
       在一个事务内读取表中的某一行数据，多次读取结果不同(不一定是错误，可能是某些场合不对)
      </mark>
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cff8fa0fb4e04b128cb6d2f7435f481c.png">
      <br/>
      <strong>
       虚度(幻读)
      </strong>
     </img>
    </p>
    <p>
     在一个事务内，读取到了别的事务插入的数据，导致前后读取不一致(一般是行影响，多了一行)
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/77c7238f47da4354ad6622d775c21a27.png"/>
    </p>
    <p>
     执行事务
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 事务</span>
<span class="token comment">-- mysql默认开启事务自动提交</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">-- 关闭</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">-- 开启(默认)</span>

<span class="token comment">-- 手动处理事务</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">-- 关闭自动提交</span>
<span class="token comment">-- 事务开启</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span> <span class="token comment">-- 标记一个事务的开启，从这个之后的SQL，都在同一个事务内</span>

<span class="token keyword">INSERT</span> xxx
<span class="token keyword">INSERT</span> xxx

<span class="token comment">-- 提交:持久化(成功)</span>
<span class="token keyword">COMMIT</span>
<span class="token comment">-- 回滚:回到原来的样子(失败)</span>
<span class="token keyword">ROLLBACK</span>
<span class="token comment">-- 事务结束</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">-- 开启自动提交</span>

<span class="token keyword">SAVEPOINT</span> <span class="token comment">-- 设置一个事务的保存点</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> <span class="token keyword">SAVEPOINT</span> <span class="token comment">-- 回滚到保存点</span>
<span class="token keyword">RELEASE</span> <span class="token keyword">SAVEPOINT</span> <span class="token comment">-- 撤销保存点</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/98e626e0972f4ff2ba35ad1a7db4bec3.png">
      <br/>
      模拟场景
     </img>
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 转账</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> store <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci
<span class="token keyword">USE</span> store

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>account<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>balance<span class="token punctuation">`</span></span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span>  <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> account<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>balance<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'Carti'</span><span class="token punctuation">,</span><span class="token number">2000.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'Ocean'</span><span class="token punctuation">,</span><span class="token number">10000.00</span><span class="token punctuation">)</span>


<span class="token comment">-- 模拟转账:事务</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">-- 关闭自动提交</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span> <span class="token comment">-- 开启一个事务(一组事务)</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> balacne <span class="token operator">-</span> <span class="token number">500</span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">'Carti'</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> balacne <span class="token operator">+</span> <span class="token number">500</span> <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">'Ocean'</span>

<span class="token keyword">COMMIT</span><span class="token punctuation">;</span> <span class="token comment">-- 提交事务,一旦提交就被持久化了</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span> <span class="token comment">-- 回滚</span>

<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="7__966">
     </a>
     7. 索引
    </h3>
    <hr/>
    <blockquote>
     <p>
      索引(Index)是
      <strong>
       帮助MySQL高效获取数据
      </strong>
      的数据结构。
      <strong>
       提取句子主干
      </strong>
      ，就可以得到索引的本质:
      <strong>
       索引就是数据结构
      </strong>
      。
     </p>
    </blockquote>
    <h4>
     <a id="71__969">
     </a>
     7.1 索引的分类
    </h4>
    <blockquote>
     <p>
      一个表中，主键索引只能有一个，唯一索引可以有多个
     </p>
    </blockquote>
    <ul>
     <li>
      主键索引 (PRIMARY KEY)
      <ul>
       <li>
        唯一表示，主键不可重复，只能有一个列作为主键
       </li>
      </ul>
     </li>
     <li>
      唯一索引 (UNIQUE KEY)
      <ul>
       <li>
        避免重复的列出现，唯一索引可以重复，多个列都能是 唯一索引
       </li>
      </ul>
     </li>
     <li>
      常规索引 (KEY/INDEX)
      <ul>
       <li>
        默认的，index，key
       </li>
      </ul>
     </li>
     <li>
      全文索引 (FullText)
      <ul>
       <li>
        特定的数据库引擎下才有，MyISAM
       </li>
       <li>
        快速定位数据
       </li>
      </ul>
     </li>
    </ul>
    <pre><code class="prism language-sql"><span class="token comment">-- 索引的使用</span>
<span class="token comment">-- 1. 在创建表时给字段加索引</span>
<span class="token comment">-- 2. 创建完毕后,增加索引</span>
<span class="token comment">-- 显示所有索引信息</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> student

<span class="token comment">-- 增加一个全文索引</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> school<span class="token punctuation">.</span>student <span class="token keyword">ADD</span> FULLTEXT <span class="token keyword">INDEX</span> <span class="token identifier"><span class="token punctuation">`</span>studentName<span class="token punctuation">`</span></span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>studentName<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- explain 分析sql执行的状况</span>
<span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> account<span class="token punctuation">;</span>
<span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> <span class="token keyword">MATCH</span><span class="token punctuation">(</span>studentName<span class="token punctuation">)</span> AGAINST<span class="token punctuation">(</span><span class="token string">'李'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     索引在小数据量时,用处不大,但在大数据时,区别十分明显
    </p>
    <h4>
     <a id="72__1000">
     </a>
     7.2 索引原则
    </h4>
    <ul>
     <li>
      索引不是越多越好
     </li>
     <li>
      不要对进程变动数据加索引
     </li>
     <li>
      小数据量的表不需要加索引
     </li>
     <li>
      索引一般加在常查字段上
     </li>
    </ul>
    <blockquote>
     <p>
      索引的数据结构
     </p>
    </blockquote>
    <p>
     Hash类型的索引
    </p>
    <p>
     Btree: InnoDB的默认数据结构
    </p>
    <h3>
     <a id="8__1013">
     </a>
     8. 权限管理和备份
    </h3>
    <hr/>
    <h4>
     <a id="81__1017">
     </a>
     8.1 用户管理
    </h4>
    <blockquote>
     <p>
      SQL yog可视化管理 - 主机
     </p>
    </blockquote>
    <blockquote>
     <p>
      SQL 命令操作
     </p>
    </blockquote>
    <p>
     用户表：mysql.user
     <br/>
     本质：对这张表进行增删改查
    </p>
    <pre><code class="prism language-sql"><span class="token comment">-- 创建用户 create user 用户名 identified by '密码'</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> frank IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'密码'</span>

<span class="token comment">-- 修改当前用户密码</span>
<span class="token keyword">SET</span> PASSWORD <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span>

<span class="token keyword">SET</span> PASSWORD <span class="token keyword">FOR</span> frank <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'111111'</span><span class="token punctuation">)</span>

<span class="token comment">-- 重命名</span>
<span class="token keyword">RENAME</span> <span class="token keyword">USER</span> frank <span class="token keyword">TO</span> frankocean

<span class="token comment">-- 授予全部权限(ALL PRIVILEGES),库,表, 最高权限也没有root高</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span>

<span class="token comment">-- 查看权限</span>
<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> frank

<span class="token comment">-- 撤销权限,revoke 哪些权限，哪个库，给谁撤销</span>
<span class="token keyword">REVOKE</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> frank
</code></pre>
    <h4>
     <a id="82_MySQL__1049">
     </a>
     8.2 MySQL 备份
    </h4>
    <p>
     为什么要备份：
    </p>
    <ul>
     <li>
      保证数据库不丢失
     </li>
     <li>
      数据转移 A -&gt; B
     </li>
    </ul>
    <p>
     MySQL 数据备份方式：
    </p>
    <ul>
     <li>
      直接拷贝物理文件data
     </li>
     <li>
      在SQLyog可视化工具中手动导出
     </li>
     <li>
      在命令行 mysqldump 导出 p34
     </li>
    </ul>
    <h3>
     <a id="9__1059">
     </a>
     9. 数据库规范设计
    </h3>
    <hr/>
    <p>
     保证数据库的完整性，方便开发系统
    </p>
    <p>
     <strong>
      关于数据库的设计
     </strong>
    </p>
    <ul>
     <li>
      分析需求：分析业务和需要处理的数据库需求
     </li>
     <li>
      概要设计：设计关系 E-R 图
     </li>
    </ul>
    <p>
     <strong>
      设计数据库步骤：
     </strong>
    </p>
    <ul>
     <li>
      收集信息，分析需求
      <ul>
       <li>
        列出表
       </li>
      </ul>
     </li>
     <li>
      标识实体（把需求落实到每个字段）
     </li>
     <li>
      标识实体之间的关系
     </li>
    </ul>
    <p>
     <strong>
      为什么要数据规范化？
     </strong>
    </p>
    <ul>
     <li>
      信息重复
     </li>
     <li>
      更新异常
     </li>
     <li>
      插入异常
      <ul>
       <li>
        无法正常显示信息
       </li>
      </ul>
     </li>
     <li>
      删除异常
      <ul>
       <li>
        丢失有效信息
       </li>
      </ul>
     </li>
    </ul>
    <blockquote>
     <p>
      三大范式
     </p>
    </blockquote>
    <p>
     <strong>
      1NF
     </strong>
     <br/>
     原子性：每一个不可再分
    </p>
    <p>
     <strong>
      2NF
     </strong>
     <br/>
     前提：满足第一范式
     <br/>
     每张表只描述一件事
    </p>
    <p>
     <strong>
      3NF
     </strong>
     <br/>
     前提：满足第一、二范式
     <br/>
     数据表中的每一列数据都和主键直接相关，而不能间接相关。
    </p>
    <p>
     规范数据库的设计
    </p>
    <p>
     <strong>
      规范性 和 性能的问题
     </strong>
     <br/>
     关联查询的表不得超过三张表
    </p>
    <ul>
     <li>
      考虑商业化的需求和目标（成本，用户体验）数据库的性能更加重要
     </li>
     <li>
      规范性能时，需要适当考虑规范性。
     </li>
     <li>
      故意给某些表增加一些冗余字段（从夺标查询中变为单表查询）
     </li>
     <li>
      故意增加一些计算列（从大数据量降低为小数据量的查询：索引）
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f537761654c6565556b6e6f772f:61727469636c652f64657461696c732f313436313233333435" class_="artid" style="display:none">
 </p>
</div>


