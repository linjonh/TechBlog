---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f323430315f38373138393731372f:61727469636c652f64657461696c732f313436313233363234"
layout: post
title: "Javaé«˜é¢‘é¢è¯•ä¹‹é›†åˆ-07"
date: 2025-03-08 21:57:18 +08:00
description: "helloå•Šï¼Œå„ä½è§‚ä¼—å§¥çˆ·ä»¬ï¼ï¼ï¼æœ¬babyä»Šå¤©æ¥æŠ¥é“äº†ï¼å“ˆå“ˆå“ˆå“ˆå“ˆå—ğŸ¶ã€‚"
keywords: "Javaé«˜é¢‘é¢è¯•ä¹‹é›†åˆ-07"
categories: ['æœªåˆ†ç±»']
tags: ['é¢è¯•', 'å¼€å‘è¯­è¨€', 'Java']
artid: "146123624"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146123624
    alt: "Javaé«˜é¢‘é¢è¯•ä¹‹é›†åˆ-07"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146123624
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146123624
cover: https://bing.ee123.net/img/rand?artid=146123624
image: https://bing.ee123.net/img/rand?artid=146123624
img: https://bing.ee123.net/img/rand?artid=146123624
---

# Javaé«˜é¢‘é¢è¯•ä¹‹é›†åˆ-07

helloå•Šï¼Œå„ä½è§‚ä¼—å§¥çˆ·ä»¬ï¼ï¼ï¼æœ¬babyä»Šå¤©æ¥æŠ¥é“äº†ï¼å“ˆå“ˆå“ˆå“ˆå“ˆå—ğŸ¶

### é¢è¯•å®˜ï¼šArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

---

#### ArrayList ä¸ Vector çš„åŒºåˆ«è¯¦è§£

**ArrayList**
å’Œ
**Vector**
éƒ½æ˜¯ Java ä¸­åŸºäºåŠ¨æ€æ•°ç»„å®ç°çš„
`List`
æ¥å£çš„å®ç°ç±»ï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡ã€æ€§èƒ½å’Œçº¿ç¨‹å®‰å…¨æ€§ä¸Šæœ‰æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹æ˜¯ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ï¼š

---

##### **1. çº¿ç¨‹å®‰å…¨æ€§**

| **ç‰¹æ€§** | **ArrayList** | **Vector** |
| --- | --- | --- |
| **çº¿ç¨‹å®‰å…¨** | **éçº¿ç¨‹å®‰å…¨** ï¼ˆæ–¹æ³•æœªåŒæ­¥ï¼‰ | **çº¿ç¨‹å®‰å…¨** ï¼ˆæ–¹æ³•é€šè¿‡ `synchronized` åŒæ­¥ï¼‰ |
| **é€‚ç”¨åœºæ™¯** | å•çº¿ç¨‹ç¯å¢ƒï¼Œæ€§èƒ½ä¼˜å…ˆ | å¤šçº¿ç¨‹ç¯å¢ƒï¼ˆä½†å®é™…å¼€å‘ä¸­ä¸æ¨èï¼‰ |

**ç¤ºä¾‹å¯¹æ¯”**
ï¼š

```java
// ArrayListï¼ˆéçº¿ç¨‹å®‰å…¨ï¼‰
List<String> arrayList = new ArrayList<>();
arrayList.add("A"); // å¤šçº¿ç¨‹å¹¶å‘ add() å¯èƒ½å¯¼è‡´æ•°æ®è¦†ç›–æˆ–å¼‚å¸¸

// Vectorï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
List<String> vector = new Vector<>();
vector.add("A");    // å†…éƒ¨ä½¿ç”¨ synchronized åŒæ­¥ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨

```

---

##### **2. æ‰©å®¹æœºåˆ¶**

| **ç‰¹æ€§** | **ArrayList** | **Vector** |
| --- | --- | --- |
| **é»˜è®¤å®¹é‡** | 10 | 10 |
| **æ‰©å®¹å…¬å¼** | **1.5 å€** ï¼ˆ `newCapacity = oldCapacity + (oldCapacity >> 1)` ï¼‰ | **2 å€** ï¼ˆ `newCapacity = oldCapacity * 2` ï¼‰ |
| **æ€§èƒ½å½±å“** | å†…å­˜åˆ©ç”¨ç‡è¾ƒé«˜ï¼Œä½†æ‰©å®¹æ¬¡æ•°å¯èƒ½è¾ƒå¤š | æ‰©å®¹æ¬¡æ•°è¾ƒå°‘ï¼Œä½†å†…å­˜æµªè´¹è¾ƒå¤š |

**ä»£ç ç¤ºä¾‹**
ï¼š

```java
// ArrayList æ‰©å®¹é€»è¾‘
int newCapacity = oldCapacity + (oldCapacity >> 1);

// Vector æ‰©å®¹é€»è¾‘ï¼ˆå¯è‡ªå®šä¹‰å¢é•¿å› å­ï¼‰
int newCapacity = oldCapacity + ((capacityIncrement > 0) ? capacityIncrement : oldCapacity);

```

---

##### **3. æ€§èƒ½å·®å¼‚**

| **æ“ä½œ** | **ArrayList** | **Vector** |
| --- | --- | --- |
| **å•çº¿ç¨‹è¯»å†™** | **æ›´å¿«** ï¼ˆæ— åŒæ­¥å¼€é”€ï¼‰ | **è¾ƒæ…¢** ï¼ˆåŒæ­¥æ–¹æ³•å¯¼è‡´æ€§èƒ½æŸè€—ï¼‰ |
| **å¤šçº¿ç¨‹è¯»å†™** | éœ€æ‰‹åŠ¨åŒæ­¥ï¼ˆå¦‚ä½¿ç”¨ `Collections.synchronizedList` ï¼‰ | è‡ªåŠ¨åŒæ­¥ï¼Œä½†é”ç«äº‰å¯èƒ½æˆä¸ºç“¶é¢ˆ |

**åŸºå‡†æµ‹è¯•ç¤ºä¾‹**
ï¼ˆå•çº¿ç¨‹æ·»åŠ  100 ä¸‡å…ƒç´ ï¼‰ï¼š

```java
// ArrayList è€—æ—¶ â‰ˆ 50ms
List<Integer> list = new ArrayList<>();
for (int i = 0; i < 1_000_000; i++) {
    list.add(i);
}

// Vector è€—æ—¶ â‰ˆ 150msï¼ˆå› åŒæ­¥å¼€é”€ï¼‰
List<Integer> vector = new Vector<>();
for (int i = 0; i < 1_000_000; i++) {
    vector.add(i);
}

```

---

##### **4. å†å²ä¸è®¾è®¡**

| **ç‰¹æ€§** | **ArrayList** | **Vector** |
| --- | --- | --- |
| **å¼•å…¥ç‰ˆæœ¬** | JDK 1.2ï¼ˆé›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼‰ | JDK 1.0ï¼ˆé—ç•™ç±»ï¼‰ |
| **è®¾è®¡ç›®æ ‡** | æ›¿ä»£ Vectorï¼Œä¼˜åŒ–å•çº¿ç¨‹æ€§èƒ½ | æ—©æœŸå¤šçº¿ç¨‹æ”¯æŒ |
| **æ–¹æ³•æ‰©å±•** | æ”¯æŒç°ä»£é›†åˆæ“ä½œï¼ˆå¦‚ `forEach` ï¼‰ | ä¿ç•™æ—§æ–¹æ³•ï¼ˆå¦‚ `addElement` ï¼‰ |

---

##### **5. è¿­ä»£å™¨è¡Œä¸º**

| **ç‰¹æ€§** | **ArrayList** | **Vector** |
| --- | --- | --- |
| **è¿­ä»£å™¨** | **å¿«é€Ÿå¤±è´¥ï¼ˆFail-Fastï¼‰** | **å¿«é€Ÿå¤±è´¥ï¼ˆFail-Fastï¼‰** |
| **åŒæ­¥è¦æ±‚** | å¤šçº¿ç¨‹è¿­ä»£éœ€æ‰‹åŠ¨åŒæ­¥ | è‡ªåŠ¨åŒæ­¥ï¼ˆä½†è¿­ä»£ä»éœ€å¤–éƒ¨åŒæ­¥ï¼‰ |

**ç¤ºä¾‹**
ï¼š

```java
// ArrayList è¿­ä»£éœ€æ‰‹åŠ¨åŒæ­¥
List<String> list = Collections.synchronizedList(new ArrayList<>());
synchronized (list) {
    Iterator<String> it = list.iterator();
    while (it.hasNext()) {
        System.out.println(it.next());
    }
}

// Vector è¿­ä»£ä»éœ€åŒæ­¥ï¼ˆé¿å… ConcurrentModificationExceptionï¼‰
Vector<String> vector = new Vector<>();
synchronized (vector) {
    Iterator<String> it = vector.iterator();
    while (it.hasNext()) {
        System.out.println(it.next());
    }
}

```

---

#### **æ€»ç»“ä¸é€‰å‹å»ºè®®**

1. **å•çº¿ç¨‹ç¯å¢ƒ**
   ï¼š
   * ä¼˜å…ˆä½¿ç”¨
     **ArrayList**
     ï¼ˆæ€§èƒ½æ›´é«˜ï¼Œå†…å­˜æ›´ä¼˜ï¼‰ã€‚
2. **å¤šçº¿ç¨‹ç¯å¢ƒ**
   ï¼š
   * **é¿å…ä½¿ç”¨ Vector**
     ï¼ˆæ€§èƒ½å·®ï¼Œé”ç²’åº¦ç²—ï¼‰ã€‚
   * æ›¿ä»£æ–¹æ¡ˆï¼š
     + **`Collections.synchronizedList(new ArrayList<>())`**
       ï¼ˆçµæ´»æ§åˆ¶åŒæ­¥èŒƒå›´ï¼‰ã€‚
     + **`CopyOnWriteArrayList`**
       ï¼ˆè¯»å¤šå†™å°‘åœºæ™¯ï¼‰ã€‚
3. **å†å²ä»£ç å…¼å®¹**
   ï¼š
   * ä»…åœ¨ç»´æŠ¤æ—§ç³»ç»Ÿæ—¶ä½¿ç”¨ Vectorã€‚

---

#### **ä¸ºä»€ä¹ˆ Vector å·²è¢«å¼ƒç”¨ï¼Ÿ**

* **é”ç²’åº¦è¿‡å¤§**
  ï¼šæ‰€æœ‰æ–¹æ³•åŒæ­¥å¯¼è‡´é«˜å¹¶å‘æ—¶æ€§èƒ½å·®ã€‚
* **åŠŸèƒ½å†—ä½™**
  ï¼šç°ä»£é›†åˆæ¡†æ¶ï¼ˆå¦‚
  `java.util.concurrent`
  ï¼‰æä¾›æ›´é«˜æ•ˆçš„çº¿ç¨‹å®‰å…¨ç±»ã€‚
* **è®¾è®¡é™ˆæ—§**
  ï¼šæœªå……åˆ†åˆ©ç”¨ç°ä»£ JVM ä¼˜åŒ–ï¼ˆå¦‚ CAS æ“ä½œï¼‰ã€‚

---

#### **ä»£ç ç¤ºä¾‹ï¼šæ›¿ä»£ Vector çš„æ–¹æ¡ˆ**

```java
// æ–¹æ¡ˆ1ï¼šä½¿ç”¨åŒæ­¥åŒ…è£…ç±»
List<String> syncList = Collections.synchronizedList(new ArrayList<>());

// æ–¹æ¡ˆ2ï¼šä½¿ç”¨å¹¶å‘é›†åˆç±»
CopyOnWriteArrayList<String> cowList = new CopyOnWriteArrayList<>();

```

**ç»“è®º**
ï¼š
**ArrayList æ˜¯æ›´ç°ä»£ã€æ›´é«˜æ•ˆçš„é€‰æ‹©**
ï¼ŒVector ä»…ç”¨äºå…¼å®¹æ—§ä»£ç æˆ–ç‰¹å®šåœºæ™¯çš„ç®€å•å¤šçº¿ç¨‹éœ€æ±‚ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/552d866cc32343809e1ecfa4c823e91d.png)