---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36323932323034322f:61727469636c652f64657461696c732f313436323438313237"
layout: post
title: "NPMç‰ˆæœ¬ç®¡ç†ç»ˆæžæŒ‡å—æŽŒæ¡ä¾èµ–æŽ§åˆ¶ä¸Žæœ€ä½³å®žè·µ"
date: 2025-03-14 08:34:00 +08:00
description: "è‰¯å¥½çš„ç‰ˆæœ¬ç®¡ç†èƒ½å‡å°‘30%ä»¥ä¸Šçš„ä¾èµ–ç›¸å…³é—®é¢˜ï¼ˆæ ¹æ®2023å¹´JSçŽ°çŠ¶è°ƒæŸ¥æŠ¥å‘Šï¼‰ã€‚å°æ­¥å¿«è·‘ï¼Œå®šæœŸæ›´æ–°ä¸¥æ ¼åŒºåˆ†çŽ¯å¢ƒå–„ç”¨è‡ªåŠ¨åŒ–å·¥å…·npmå®˜æ–¹ç‰ˆæœ¬ç®¡ç†æ–‡æ¡£SemVerè§„èŒƒå…¨æ–‡å¸Œæœ›è¿™ç¯‡æŠ€æœ¯åšå®¢èƒ½å¸®åŠ©æ‚¨ç³»ç»ŸæŽŒæ¡npmç‰ˆæœ¬ç®¡ç†ï¼å¦‚æžœæœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚ä¸‹æœŸæˆ‘ä»¬å°†æ·±å…¥æŽ¢è®¨ã€ŠMonorepoæž¶æž„ä¸‹çš„ä¾èµ–ç®¡ç†å®žè·µã€‹ï¼Œæ•¬è¯·æœŸå¾…ï¼ðŸ’¡TIPè¿™ç¯‡æ–‡ç« ä»ŽåŸºç¡€åˆ°è¿›é˜¶å…¨é¢è¦†ç›–äº†npmç‰ˆæœ¬ç®¡ç†çš„æ ¸å¿ƒçŸ¥è¯†ï¼Œæ—¢é€‚åˆæ–°æ‰‹å­¦ä¹ ï¼Œä¹Ÿèƒ½å¸®åŠ©æœ‰ç»éªŒçš„å¼€å‘è€…å®Œå–„çŸ¥è¯†ä½“ç³»ã€‚éœ€è¦è°ƒæ•´æˆ–è¡¥å……ä»»ä½•å†…å®¹è¯·éšæ—¶å‘ŠçŸ¥ï¼"
keywords: "NPMç‰ˆæœ¬ç®¡ç†ç»ˆæžæŒ‡å—ï¼šæŽŒæ¡ä¾èµ–æŽ§åˆ¶ä¸Žæœ€ä½³å®žè·µ"
categories: ['æœªåˆ†ç±»']
tags: ['å‰ç«¯', 'Spring', 'Npm', 'Node', 'Java']
artid: "146248127"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146248127
    alt: "NPMç‰ˆæœ¬ç®¡ç†ç»ˆæžæŒ‡å—æŽŒæ¡ä¾èµ–æŽ§åˆ¶ä¸Žæœ€ä½³å®žè·µ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146248127
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146248127
cover: https://bing.ee123.net/img/rand?artid=146248127
image: https://bing.ee123.net/img/rand?artid=146248127
img: https://bing.ee123.net/img/rand?artid=146248127
---

# NPMç‰ˆæœ¬ç®¡ç†ç»ˆæžæŒ‡å—ï¼šæŽŒæ¡ä¾èµ–æŽ§åˆ¶ä¸Žæœ€ä½³å®žè·µ

### ç›®å½•

1. ä¸ºä»€ä¹ˆç‰ˆæœ¬ç®¡ç†è‡³å…³é‡è¦
2. è¯­ä¹‰åŒ–ç‰ˆæœ¬æŽ§åˆ¶ï¼ˆSemVerï¼‰è§£æž
3. NPMç‰ˆæœ¬ç®¡ç†æ ¸å¿ƒå‘½ä»¤
4. ç‰ˆæœ¬é”å®šä¸Žæ›´æ–°ç­–ç•¥
5. æœ€ä½³å®žè·µä¸Žå¸¸è§é—®é¢˜
6. é«˜çº§æŠ€å·§ä¸Žå·¥å…·æŽ¨è

---

### ä¸€ã€ä¸ºä»€ä¹ˆç‰ˆæœ¬ç®¡ç†è‡³å…³é‡è¦

åœ¨çŽ°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œä¸€ä¸ªä¸­åž‹é¡¹ç›®å¹³å‡ä¾èµ–143ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼ˆæ ¹æ®2023å¹´OpenSourceè°ƒæŸ¥ï¼‰ã€‚ç‰ˆæœ¬ç®¡ç†ç›´æŽ¥å½±å“ç€ï¼š

* å›¢é˜Ÿåä½œä¸€è‡´æ€§
* ç”Ÿäº§çŽ¯å¢ƒç¨³å®šæ€§
* ä¾èµ–å®‰å…¨æ€§
* CI/CDæµç¨‹å¯é æ€§

å…¸åž‹çš„ç‰ˆæœ¬ç®¡ç†é—®é¢˜ï¼š

```bash
# å¼€å‘çŽ¯å¢ƒæ­£å¸¸ä½†ç”Ÿäº§æž„å»ºå¤±è´¥
ERR! Error: Module not found: can't resolve 'lodash@4.17.21-deadbeef'

```

---

### äºŒã€è¯­ä¹‰åŒ–ç‰ˆæœ¬æŽ§åˆ¶ï¼ˆSemVerï¼‰æ·±åº¦è§£æž

#### 2.1 ç‰ˆæœ¬å·ç»„æˆ

`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·[-é¢„å‘ç‰ˆæœ¬]`

ç¤ºä¾‹ï¼š
`3.12.4-beta.0`

| éƒ¨åˆ† | è§„åˆ™ |
| --- | --- |
| ä¸»ç‰ˆæœ¬ | ä¸å…¼å®¹çš„APIä¿®æ”¹ |
| æ¬¡ç‰ˆæœ¬ | å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢ž |
| ä¿®è®¢å· | å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®å¤ |
| é¢„å‘ç‰ˆæœ¬ | alpha/beta/rcç­‰æµ‹è¯•ç‰ˆæœ¬ |

#### 2.2 ç‰ˆæœ¬èŒƒå›´è¯­æ³•

| è¯­æ³• | ç¤ºä¾‹ | è¯´æ˜Ž |
| --- | --- | --- |
| ç²¾ç¡®ç‰ˆæœ¬ | `1.2.3` | ä¸¥æ ¼åŒ¹é…æŒ‡å®šç‰ˆæœ¬ |
| å…¼å®¹ç‰ˆæœ¬ | `^1.2.3` | æ›´æ–°æ¬¡ç‰ˆæœ¬å’Œä¿®è®¢å·ï¼ˆé»˜è®¤ï¼‰ |
| æ¬¡è¦æ›´æ–° | `~1.2.3` | ä»…æ›´æ–°ä¿®è®¢å· |
| ç‰ˆæœ¬èŒƒå›´ | `>1.0.0 <=2.5.0` | æŒ‡å®šç‰ˆæœ¬åŒºé—´ |
| é¢„å‘ç‰ˆæœ¬ | `next` | ä½¿ç”¨dist-tagæ ‡è¯†çš„ç‰ˆæœ¬ |

---

### ä¸‰ã€NPMç‰ˆæœ¬ç®¡ç†æ ¸å¿ƒå‘½ä»¤

#### 3.1 å®‰è£…æŒ‡å®šç‰ˆæœ¬

```bash
# å®‰è£…ç²¾ç¡®ç‰ˆæœ¬
npm install lodash@4.17.21

# å®‰è£…æ¬¡ç‰ˆæœ¬æœ€æ–°
npm install react@^18

# å®‰è£…é¢„å‘ç‰ˆæœ¬
npm install vue@next

```

#### 3.2 ç‰ˆæœ¬æŸ¥è¯¢ä¸Žæ›´æ–°

```bash
# æŸ¥çœ‹è¿‡æ—¶ä¾èµ–
npm outdated

# æ›´æ–°å•ä¸ªåŒ…
npm update lodash

# æ›´æ–°å…¨éƒ¨ä¾èµ–
npm update

```

#### 3.3 ç‰ˆæœ¬é”å®š

```bash
# ç”Ÿæˆpackage-lock.json
npm install --package-lock-only

# å¼ºåˆ¶ä½¿ç”¨lockfileå®‰è£…
npm ci

```

---

### å››ã€ç‰ˆæœ¬æŽ§åˆ¶ç­–ç•¥

#### 4.1 package.json vs package-lock.json

| æ–‡ä»¶ | ä½œç”¨ | æ˜¯å¦åº”æäº¤ä»“åº“ |
| --- | --- | --- |
| package.json | å£°æ˜Žä¾èµ–ç‰ˆæœ¬èŒƒå›´ | âœ”ï¸ å¿…é¡» |
| package-lock.json | è®°å½•ç¡®åˆ‡ä¾èµ–æ ‘ | âœ”ï¸ å¿…é¡» |

#### 4.2 æ›´æ–°ç­–ç•¥çŸ©é˜µ

| çŽ¯å¢ƒ | ç­–ç•¥ | ç¤ºä¾‹å‘½ä»¤ |
| --- | --- | --- |
| å¼€å‘çŽ¯å¢ƒ | å…è®¸æ¬¡ç‰ˆæœ¬æ›´æ–° | `npm update --save` |
| æµ‹è¯•çŽ¯å¢ƒ | ä»…å®‰å…¨æ›´æ–° | `npm audit fix` |
| ç”Ÿäº§çŽ¯å¢ƒ | é”å®šç²¾ç¡®ç‰ˆæœ¬ | `npm ci` |

---

### äº”ã€æœ€ä½³å®žè·µä¸Žå¸¸è§é—®é¢˜

#### 5.1 é»„é‡‘æ³•åˆ™

1. å§‹ç»ˆæäº¤lockæ–‡ä»¶
2. å®šæœŸæ‰§è¡Œ
   `npm audit`
3. é¢„å‘çŽ¯å¢ƒéªŒè¯åŽæ‰æ›´æ–°lock
4. ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼ˆå¦‚nvmï¼‰

#### 5.2 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

**é—®é¢˜1ï¼šä¾èµ–å†²çª**

```bash
# ä½¿ç”¨npm-force-resolutions
npm install npm-force-resolutions

```

**é—®é¢˜2ï¼šç‰ˆæœ¬å›žé€€**

```bash
# é€šè¿‡lockæ–‡ä»¶æ¢å¤
git checkout HEAD -- package-lock.json
npm ci

```

**é—®é¢˜3ï¼šè·¨ç‰ˆæœ¬å‡çº§**

```bash
# ä½¿ç”¨npm-check-updates
npx npm-check-updates -u
npm install

```

---

### å…­ã€é«˜çº§å·¥å…·æŽ¨è

1. **nvm**
   ï¼šNodeç‰ˆæœ¬ç®¡ç†
2. **npm-check-updates**
   ï¼šæ™ºèƒ½ä¾èµ–æ›´æ–°
3. **Dependabot**
   ï¼šè‡ªåŠ¨åŒ–ä¾èµ–æ›´æ–°
4. **Renovate**
   ï¼šä¼ä¸šçº§ä¾èµ–ç®¡ç†

```bash
# ä½¿ç”¨nvmç®¡ç†Nodeç‰ˆæœ¬
nvm install 18.16.0
nvm use 18.16.0

```

---

### ç»“è¯­

è‰¯å¥½çš„ç‰ˆæœ¬ç®¡ç†èƒ½å‡å°‘30%ä»¥ä¸Šçš„ä¾èµ–ç›¸å…³é—®é¢˜ï¼ˆæ ¹æ®2023å¹´JSçŽ°çŠ¶è°ƒæŸ¥æŠ¥å‘Šï¼‰ã€‚è®°ä½ï¼š

1. å°æ­¥å¿«è·‘ï¼Œå®šæœŸæ›´æ–°
2. ä¸¥æ ¼åŒºåˆ†çŽ¯å¢ƒ
3. å–„ç”¨è‡ªåŠ¨åŒ–å·¥å…·

**å»¶ä¼¸é˜…è¯»ï¼š**

* [npmå®˜æ–¹ç‰ˆæœ¬ç®¡ç†æ–‡æ¡£](https://docs.npmjs.com/about-semantic-versioning)
* [SemVerè§„èŒƒå…¨æ–‡](https://semver.org/)

---

å¸Œæœ›è¿™ç¯‡æŠ€æœ¯åšå®¢èƒ½å¸®åŠ©æ‚¨ç³»ç»ŸæŽŒæ¡npmç‰ˆæœ¬ç®¡ç†ï¼å¦‚æžœæœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚ä¸‹æœŸæˆ‘ä»¬å°†æ·±å…¥æŽ¢è®¨ã€ŠMonorepoæž¶æž„ä¸‹çš„ä¾èµ–ç®¡ç†å®žè·µã€‹ï¼Œæ•¬è¯·æœŸå¾…ï¼

ðŸ’¡
**TIP**
ï¼šç‚¹èµžæ”¶è—ï¼Œæ–¹ä¾¿å›žçœ‹å“¦

---

è¿™ç¯‡æ–‡ç« ä»ŽåŸºç¡€åˆ°è¿›é˜¶å…¨é¢è¦†ç›–äº†npmç‰ˆæœ¬ç®¡ç†çš„æ ¸å¿ƒçŸ¥è¯†ï¼Œæ—¢é€‚åˆæ–°æ‰‹å­¦ä¹ ï¼Œä¹Ÿèƒ½å¸®åŠ©æœ‰ç»éªŒçš„å¼€å‘è€…å®Œå–„çŸ¥è¯†ä½“ç³»ã€‚éœ€è¦è°ƒæ•´æˆ–è¡¥å……ä»»ä½•å†…å®¹è¯·éšæ—¶å‘ŠçŸ¥ï¼