---
layout: post
title: "uni_app实现下拉刷新"
date: 2025-03-07 16:26:51 +0800
description: "uniapp实现下拉刷新"
keywords: "uni_app实现下拉刷新"
categories: ['未分类']
tags: ['App']
artid: "146095914"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146095914
    alt: "uni_app实现下拉刷新"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146095914
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146095914
cover: https://bing.ee123.net/img/rand?artid=146095914
image: https://bing.ee123.net/img/rand?artid=146095914
img: https://bing.ee123.net/img/rand?artid=146095914
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     uni_app实现下拉刷新
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     1. 在页面配置中启用下拉刷新
    </h4>
    <p>
     首先，你需要在页面的
     <code>
      pages.json
     </code>
     文件中启用下拉刷新功能。
    </p>
    <pre><code class="language-javascript">{
  "pages": [
    {
      "path": "pages/index/index",
      "style": {
          "navigationBarTitleText": "首页",
          "enablePullDownRefresh": true // 启用下拉刷新
      }
    }
  ]
}</code></pre>
    <h4>
     2. 在页面中监听下拉刷新事件
    </h4>
    <p>
     在页面的
     <code>
      .vue
     </code>
     文件中，你可以通过
     <code>
      onPullDownRefresh
     </code>
     生命周期函数来监听下拉刷新事件。
    </p>
    <p>
     vue
    </p>
    <pre><code class="language-javascript">&lt;template&gt;
  &lt;view&gt;
    &lt;view v-for="(item, index) in list" :key="index"&gt;{<!-- -->{ item }}&lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      list: ['Item 1', 'Item 2', 'Item 3']
    };
  },
  onPullDownRefresh() {
    console.log('下拉刷新触发');
    // 模拟数据加载
    setTimeout(() =&gt; {
      this.list = ['New Item 1', 'New Item 2', 'New Item 3'];
      uni.stopPullDownRefresh(); // 停止下拉刷新
    }, 2000);
  }
};
&lt;/script&gt;

&lt;style&gt;</code></pre>
    <h4>
     3. 停止下拉刷新
    </h4>
    <p>
     在数据加载完成后，你需要调用
     <code>
      uni.stopPullDownRefresh()
     </code>
     来停止下拉刷新的动画。
    </p>
    <h4>
     4. 自定义下拉刷新样式（可选）
    </h4>
    <p>
     如果你想要自定义下拉刷新的样式，可以使用
     <code>
      uni.setBackgroundTextStyle
     </code>
     和
     <code>
      uni.setBackgroundColor
     </code>
     来设置下拉刷新时的背景颜色和文字样式。
    </p>
    <pre><code class="language-javascript">uni.setBackgroundTextStyle({
  textStyle: 'dark' // 下拉刷新时的文字样式，可选值：dark, light
});

uni.setBackgroundColor({
  backgroundColor: '#f8f8f8', // 下拉刷新时的背景颜色
  backgroundColorTop: '#f8f8f8', // 顶部背景颜色
  backgroundColorBottom: '#ffffff' // 底部背景颜色
});</code></pre>
    <h4>
     5. 处理下拉刷新时的网络请求
    </h4>
    <p>
     通常，下拉刷新时会触发网络请求来获取最新数据。你可以在
     <code>
      onPullDownRefresh
     </code>
     中进行网络请求，并在请求完成后停止下拉刷新。
    </p>
    <pre><code class="language-javascript">onPullDownRefresh() {
  this.fetchData().then(() =&gt; {
    uni.stopPullDownRefresh();
  });
},
methods: {
  fetchData() {
    return new Promise((resolve) =&gt; {
      setTimeout(() =&gt; {
        this.list = ['New Item 1', 'New Item 2', 'New Item 3'];
        resolve();
      }, 2000);
    });
  }
}</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36313831313932362f:61727469636c652f64657461696c732f313436303935393134" class_="artid" style="display:none">
 </p>
</div>


