---
layout: post
title: "Vue项目实战"
date: 2025-03-06 09:34:26 +0800
description: "4.直接查找对应的子组件选择器,进行修改:deep(子组件中元素的选择器)进行修改直接修改CSS。在vue中需要直接访问底层 DOM 元素时，不仅仅可以使用ref字符串作为名字，还可以使用函数。当绑定的元素被卸载时，函数也会被调用一次，此时的。1.用插槽,插入自己的元素那么在自己的作用域中直接修改这个元素。2.全局定义一个变量,覆盖它默认变量的值  *缺点: 全局修改。3.局部定义一个变量,覆盖它默认变量的值!2.打开控制台>应用管理>我的应用，点击创建应用。4.复制访问应用的ak用于后续的接口调用。"
keywords: "vue项目实践项目"
categories: ['Vue']
tags: ['前端', 'Vue', 'Javascript']
artid: "146059443"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146059443
    alt: "Vue项目实战"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146059443
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146059443
cover: https://bing.ee123.net/img/rand?artid=146059443
image: https://bing.ee123.net/img/rand?artid=146059443
img: https://bing.ee123.net/img/rand?artid=146059443
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Vue项目实战
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     一、项目介绍
    </h2>
    <ul>
     <li>
      优选商城pc端
     </li>
     <li>
      旅途移动端web项目（H5）
     </li>
     <li>
      后台管理系统 ts + vue3
     </li>
    </ul>
    <h3>
     <a id="UI_6">
     </a>
     常见前端项目的UI库
    </h3>
    <p>
     后台管理系统：element UI 、Ant-Design
    </p>
    <p>
     小程序：vant
    </p>
    <p>
     移动端web：vant
    </p>
    <p>
     门户网站：局部引入UI库
    </p>
    <p>
     海外：Material UI 规范 react\mui，vue\vuetify
    </p>
    <h2>
     <a id="_20">
     </a>
     二、项目实战
    </h2>
    <h3>
     <a id="1_22">
     </a>
     1.创建项目
    </h3>
    <h4>
     <a id="Vue_CLI_24">
     </a>
     方式一：Vue CLI
    </h4>
    <ul>
     <li>
      基于webpack工具
     </li>
     <li>
      命令: vue create
     </li>
    </ul>
    <h4>
     <a id="_createvue_29">
     </a>
     方式二: create-vue
    </h4>
    <ul>
     <li>
      基于vite工具
     </li>
     <li>
      命令：npm init vue@latest
     </li>
    </ul>
    <h4>
     <a id="_36">
     </a>
     项目配置
    </h4>
    <ul>
     <li>
      配置项目的icon
     </li>
     <li>
      配置项目的标题
     </li>
     <li>
      配置jsconfig.json
     </li>
    </ul>
    <h3>
     <a id="2_44">
     </a>
     2.项目目录结构划分
    </h3>
    <pre><code class="prism language-toml">src
 |-assets -- 存放静态资源，比如css/images/font等
 |-components -- 存放公共组件
 |-composables -- 组合式函数
 |-mock -- 模拟测试数据
 |-router -- 路由
 |-services -- 接口
 |-stores -- 状态管理，比如pinia、vuex
 |-utils -- 工具包
 |-views -- 页面
 |-App.vue
 |-main.js
 |-gitignore
 |-index.html
 |-jsconfig.json
 |-package-lock.json
 |-package.json
 |-README.md
 |-vite.config.js
</code></pre>
    <h3>
     <a id="3CSS_68">
     </a>
     3.CSS样式重置
    </h3>
    <p>
     对默认CSS样式进行重置:
    </p>
    <ul>
     <li>
      normalize.css
     </li>
     <li>
      reset.css
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token function">npm</span> i normalize.css <span class="token parameter variable">--save</span>
</code></pre>
    <p>
     main.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token string">'normalize.css'</span>
</code></pre>
    <p>
     assets/css/reset.css
    </p>
    <pre><code class="prism language-css"><span class="token comment">/* 自定义的css */</span>
<span class="token selector">a</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     assets/css/index.css
    </p>
    <pre><code class="prism language-css"><span class="token comment">/* 作为css文件的入口统一导入 */</span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'./reset.css'</span><span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'./common.css'</span><span class="token punctuation">;</span></span>    
</code></pre>
    <h3>
     <a id="4_103">
     </a>
     4.路由配置
    </h3>
    <p>
     router/index.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/home/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre>
    <p>
     main.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> pinia <span class="token keyword">from</span> <span class="token string">'./stores'</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>

<span class="token keyword">import</span> <span class="token string">'normalize.css'</span>

<span class="token keyword">import</span> <span class="token string">'@/assets/css/index.css'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="5_148">
     </a>
     5.状态管理配置
    </h3>
    <p>
     stores/index.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>createPinia<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> pinia
</code></pre>
    <p>
     stores/modules/counter.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useCounterStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 也可以这样定义</span>
  <span class="token comment">// state: () =&gt; ({ count: 0 })</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="_181">
     </a>
     三、开发中会遇到的问题
    </h2>
    <h3>
     <a id="1UI_183">
     </a>
     1.修改第三方UI组件库的样式
    </h3>
    <p>
     1.用插槽,插入自己的元素那么在自己的作用域中直接修改这个元素
    </p>
    <p>
     2.全局定义一个变量,覆盖它默认变量的值 *缺点: 全局修改
    </p>
    <p>
     3.局部定义一个变量,覆盖它默认变量的值 !优点: 局部修改
    </p>
    <p>
     4.直接查找对应的子组件选择器,进行修改:deep(子组件中元素的选择器)进行修改直接修改CSS
    </p>
    <h3>
     <a id="2vite_195">
     </a>
     2.vite中动态加载图片
    </h3>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">getAssetUrl</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 参数一： 相对路径</span>
    <span class="token comment">// 参数二： 当前路径的url</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../assets/images/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>image<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>href<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="3tabs_208">
     </a>
     3.tabs选项与滚动内容匹配算法
    </h3>
    <p>
     该算法同样适用于歌词匹配
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> titlePositionMap <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">'设施'</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token string-property property">'房东'</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token string-property property">'评论'</span><span class="token operator">:</span> <span class="token number">700</span><span class="token punctuation">,</span>
    <span class="token string-property property">'须知'</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 当前滚动高度</span>
<span class="token keyword">let</span> newValue <span class="token operator">=</span> <span class="token number">424</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> offsetTopArr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>titlePositionMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> currentIndex <span class="token operator">=</span> offsetTopArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历tabs每个选项的高度，找到当前高度所在的选项索引值</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> offsetTopArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">+</span> <span class="token number">44</span> <span class="token operator">&lt;</span> offsetTopArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        currentIndex <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
tabRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> currentIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> currentIndex<span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="4SDK_233">
     </a>
     4.集成百度地图SDK
    </h3>
    <p>
     1.注册百度账号，登录
     <a href="https://lbsyun.baidu.com/" rel="nofollow">
      百度地图开发平台
     </a>
    </p>
    <p>
     2.打开控制台&gt;应用管理&gt;我的应用，点击创建应用
    </p>
    <p>
     3.输入应用名称，选择浏览器端，点击确认
    </p>
    <p>
     4.复制访问应用的ak用于后续的接口调用
    </p>
    <p>
     index.html
    </p>
    <pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/favicon.ico<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Vite App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://api.map.baidu.com/getscript?v=3.0&amp;&amp;type=webgl&amp;ak=[输入复制的ak]<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/main.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     map.vue
    </p>
    <pre><code class="prism language-vue">&lt;template&gt;
	&lt;div class="baidu" ref="mapRef"&gt;&lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
const mapRef = ref()
const position = {
    longitude: 112.333,
    latitude: 52.343
}

onMounted(() =&gt; {
  const map = new BMapGL.Map(mapRef.value); // 创建地图实例 
  const point = new BMapGL.Point(position.longitude, position.latitude); // 创建点坐标 
  map.centerAndZoom(point, 15); // 初始化地图，设置中心点坐标和地图级别
  const marker = new BMapGL.Marker(point);  
  map.addOverlay(marker)
})
&lt;/script&gt;
</code></pre>
    <h3>
     <a id="5_285">
     </a>
     5.组合式函数
    </h3>
    <p>
     在项目中一些公共人物的逻辑可以封装成一个组合式函数进行复用，比如监听页面滚动函数：
    </p>
    <p>
     useScroll.js
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> throttle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'underscore'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useScroll</span> <span class="token punctuation">(</span><span class="token parameter">elRef</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> el <span class="token operator">=</span> window<span class="token punctuation">;</span>

  <span class="token keyword">const</span> reachBottom <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> clientHeight <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> scrollTop <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> scrollHeight <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token comment">// 节流操作</span>
  <span class="token keyword">const</span> loadMoreHandler <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>el <span class="token operator">===</span> window<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      clientHeight<span class="token punctuation">.</span>value <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
      scrollTop<span class="token punctuation">.</span>value <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
      scrollHeight<span class="token punctuation">.</span>value <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      clientHeight<span class="token punctuation">.</span>value <span class="token operator">=</span> el<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
      scrollTop<span class="token punctuation">.</span>value <span class="token operator">=</span> el<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
      scrollHeight<span class="token punctuation">.</span>value <span class="token operator">=</span> el<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollHeight<span class="token punctuation">.</span>value <span class="token operator">-</span> scrollTop<span class="token punctuation">.</span>value <span class="token operator">&lt;=</span> clientHeight<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      reachBottom<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elRef<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      el <span class="token operator">=</span> elRef<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> loadMoreHandler<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">onActivated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> loadMoreHandler<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> loadMoreHandler<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">onDeactivated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> loadMoreHandler<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    reachBottom<span class="token punctuation">,</span>
    clientHeight<span class="token punctuation">,</span>
    scrollTop<span class="token punctuation">,</span>
    scrollHeight<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="6vue_346">
     </a>
     6.vue中的函数模板引用
    </h3>
    <p>
     在vue中需要直接访问底层 DOM 元素时，不仅仅可以使用ref字符串作为名字，还可以使用函数
    </p>
    <pre><code class="prism language-vue">&lt;script setup&gt;
    const bindRef = (el) =&gt; {
        console.log(el);
        el.addEventListener('click', () =&gt; {})
    }
&lt;/script&gt;
&lt;template&gt;
&lt;input :ref="bindRef" /&gt;
&lt;/template&gt;
</code></pre>
    <blockquote>
     <p>
      注意我们这里需要使用动态的
      <code>
       :ref
      </code>
      绑定才能够传入一个函数。当绑定的元素被卸载时，函数也会被调用一次，此时的
      <code>
       el
      </code>
      参数会是
      <code>
       null
      </code>
      。
     </p>
    </blockquote>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f57656c697473692f:61727469636c652f64657461696c732f313436303539343433" class_="artid" style="display:none">
 </p>
</div>


