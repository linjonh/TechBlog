---
layout: post
title: "使用Ajax完成与后台服务器的数据交互"
date: 2025-03-05 17:29:56 +0800
description: "使用axios完成Ajax的异步请求"
keywords: "js ajax与php后端的交互代码"
categories: ['未分类']
tags: ['服务器', '交互', 'Edge', 'Ajax']
artid: "146048569"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146048569
    alt: "使用Ajax完成与后台服务器的数据交互"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146048569
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146048569
cover: https://bing.ee123.net/img/rand?artid=146048569
image: https://bing.ee123.net/img/rand?artid=146048569
img: https://bing.ee123.net/img/rand?artid=146048569
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用Ajax完成与后台服务器的数据交互
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="Ajax_0">
     </a>
     <strong>
      使用Ajax实现与后台服务器的数据交互
     </strong>
    </h3>
    <hr/>
    <h3>
     <a id="AjaxJavaScriptXML_4">
     </a>
     <strong>
      Ajax（异步的JavaScript和XML）
     </strong>
    </h3>
    <p>
     ##注意
     <code>
      Ajax为异步
     </code>
     的
    </p>
    <p>
     <strong>
      异步：即为不同步，同步相当于是我们在向后台发送请求的时候，必须返回一个响应数据才可以在浏览器下一步操作
     </strong>
    </p>
    <p>
     <em>
      （形象描述：一次聊天，两者进行一问一答）–》这就叫做同步
     </em>
    </p>
    <p>
     <em>
      异步就是一者向另外一者发送信息，但是不等对方回复，可以继续向其发送信息
     </em>
    </p>
    <hr/>
    <p>
     **Ajax与服务器之间进行交换数据，更新的是部分网页的信息，而不是将整个网页进行更新操作。**
     <em>
      相当于在注册界面的时候，用户名，密码校验就算有一方未通过但是另外一方任然保留信息，而不需要像同步的那样去更新整个网页
     </em>
    </p>
    <hr/>
    <p>
     Ajax的交互原理：
    </p>
    <p>
     <strong>
      Ajax支持异步访问，网页局部刷新，主要依赖于核心对象：XMLHttpRequest，Ajax就是通过XMLHttpRequest对象发送异步请求的
     </strong>
    </p>
    <hr/>
    <h3>
     <a id="axiosAjax_26">
     </a>
     <strong>
      通过axios事项Ajax的异步操作：
     </strong>
    </h3>
    <p>
     axios为链式编程，每调用一个方法返回一个对象
    </p>
    <p>
     <code>
      axios.get().then().catch().finally();
     </code>
    </p>
    <p>
     then方法执行在后台响应成功的时候
    </p>
    <p>
     catch方法执行在出现Ajax请求异常的时候
    </p>
    <p>
     finally方法不论请求响应成功与否都要执行的方法
    </p>
    <p>
     <strong>
      导入axios：
     </strong>
    </p>
    <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/axios-0.18.0.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <hr/>
    <p>
     <code>
      使用axios对象调用函数向后台服务器发送ajax的get异步请求
     </code>
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">/*整体： axios.get().then().catch().finally();*/</span>
          <span class="token number">1</span><span class="token function">）get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数表示两后台服务器发送<span class="token keyword">get</span>请求，格式：
              <span class="token function">get</span><span class="token punctuation">(</span>url<span class="token operator">?</span>key<span class="token operator">=</span>value<span class="token operator">&amp;</span>key<span class="token operator">=</span>value<span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">===</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/axiosDemo01Servlet?username=axios&amp;password=1234"</span><span class="token punctuation">)</span>
          <span class="token number">2</span><span class="token punctuation">)</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 处理后台服务器响应的，格式：
                <span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">接收响应数据的对象名</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    处理响应的代码
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span>
             后台响应数据：
                resp<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
                        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">'axios实现ajax异步get请求,username=锁哥'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">statusText</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>…<span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>…<span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>

                resp<span class="token punctuation">.</span>data就可以获取 数据： axios实现ajax异步<span class="token keyword">get</span>请求<span class="token punctuation">,</span>username<span class="token operator">=</span>锁哥

          <span class="token number">3</span><span class="token punctuation">)</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>处理异常
                <span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>

                <span class="token keyword">let</span> person <span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">"锁哥"</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
                <span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <p>
     <code>
      使用axios对象调用函数向后台服务器发送ajax的post异步请求
     </code>
    </p>
    <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">&gt;</span>
    <span class="token comment">//1.使用axios对象调用函数向后台服务器发送ajax异步请求</span>
    <span class="token comment">/*
        整体： axios.post().then().catch().finally();
          1）post()函数表示向后台服务器发送post请求，格式：
              post(url,key=value&amp;key=value...);===axios.post("/axiosDemo01Servlet","username=锁哥&amp;password=1234")
          2)then() 处理后台服务器响应的，格式：
                then(function(接收响应数据的对象名){
                    处理响应的代码
                });
            其实在then函数中的回调函数我们可以使用es6的新语法，箭头函数：
                (参数)=&gt;{函数体}
            格式：
            then(resp=&gt;{
                    函数体
            });
     */</span>
    <span class="token comment">/*
             说明：
                1.http://localhost:8080/axiosDemo03Servlet 表示后台服务器地址
                2.username=锁哥&amp;password=1234：表示向后台携带的参数
    */</span>
    <span class="token comment">//使用es6的箭头函数简化上述回调函数的写法</span>
    <span class="token comment">// TODO：post方法的URL和请求参数之间用逗号分隔</span>
    axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/axiosDemo03Servlet"</span><span class="token punctuation">,</span><span class="token string">"username=Java&amp;password=1234"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">Response</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//后台响应成功相应数据</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//后台响应失败相应数据</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"响应失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//无论响应成功还是失败都要执行的代码</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"无论响应成功还是失败都要执行的代码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
    <hr/>
    <p>
     综合案例：
    </p>
    <pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh-CN<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>请输入用户名<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usernameSpan<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>请输入密码<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--  导入axios类库  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/axios-0.18.0.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">/*
        说明：
            1.后台地址url："http://localhost:8080/registerServlet"
            2.后台需要根据key即参数名是username来获取前端提交的用户名数据
            3.后台已经存在的用户名是："岩岩"
     */</span>
    <span class="token comment">//1、给用户名输入框绑定离焦事件</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onblur</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//2、获取用户名输入框中的数据</span>
        <span class="token comment">//this表示当前事件onblur的标签对象document.getElementById("username")</span>
        <span class="token keyword">let</span> usernameValue<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token comment">// let usernameValue=this.value;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>usernameValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断是否输入数据</span>
        <span class="token comment">//trim() 方法用于删除字符串的头尾空白符再返回字符串</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>usernameValue<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
           <span class="token comment">//此逻辑表示用户名输入框中有数据</span>
            <span class="token comment">//3、向后台发送ajax请求</span>
            axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/registerServlet"</span><span class="token punctuation">,</span><span class="token string">"username="</span><span class="token operator">+</span>usernameValue<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resp</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//4、处理响应数据</span>
                <span class="token comment">// console.log(resp);</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"usernameSpan"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"用户名可用"</span><span class="token punctuation">;</span>
                    <span class="token comment">//通过JS代码实现css样式设置字体颜色为绿色</span>
                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"usernameSpan"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">"green"</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"usernameSpan"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"用户名不可用"</span><span class="token punctuation">;</span>
                    <span class="token comment">//通过JS代码实现css样式设置字体颜色为红色</span>
                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"usernameSpan"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">"red"</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f37333539353034332f:61727469636c652f64657461696c732f313436303438353639" class_="artid" style="display:none">
 </p>
</div>


