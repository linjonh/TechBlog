---
layout: post
title: "电路研究9.3.1合宙Air780EP中的AT开发指南TCP-使用-SSL-示例"
date: 2025-03-09 13:45:15 +0800
description: "At指令、TCP 使用 SSL 示例"
keywords: "合宙 at ssl"
categories: ['未分类']
tags: ['网络', '示例', '使用', 'Tcp', 'Ssl', 'At']
artid: "145398346"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145398346
    alt: "电路研究9.3.1合宙Air780EP中的AT开发指南TCP-使用-SSL-示例"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145398346
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145398346
cover: https://bing.ee123.net/img/rand?artid=145398346
image: https://bing.ee123.net/img/rand?artid=145398346
img: https://bing.ee123.net/img/rand?artid=145398346
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     电路研究9.3.1——合宙Air780EP中的AT开发指南:TCP 使用 SSL 示例
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     之前的是TCP 示例，这里再继续是
     <span style="color:#000000">
      TCP
     </span>
     <span style="color:#000000">
      使用
     </span>
     <span style="color:#000000">
      SSL
     </span>
     <span style="color:#000000">
      示例，下面的开机等之前多次介绍，这里因为用到，所以就再次贴出来。
     </span>
    </p>
    <p>
     <span style="color:#000000">
     </span>
     <strong>
      开机：
     </strong>
     这个之前也讲过怎么开机，这里再列出来：通过拉低 powerkey2 秒进行开机，开机以后通过串口循环发送 AT 直到收到 OK，如果 90 秒没有收到 OK 请拉低 RESET_IN_N 引脚 150ms 以上。
    </p>
    <p>
     <span style="color:#000000">
      <strong>
       查询卡状态
      </strong>
     </span>
     <span style="color:#333333">
      **AT+CPIN?**查询卡状态，直到收到
     </span>
     <span style="color:#333333">
      +CPIN: READY
     </span>
     <span style="color:#333333">
      ，如果
     </span>
     <span style="color:#333333">
      10s
     </span>
     <span style="color:#333333">
      内没有收到建议重启模块。
     </span>
    </p>
    <p>
     <span style="color:#333333">
     </span>
     <span style="color:#000000">
      <strong>
       查询网络注册情况：
      </strong>
     </span>
     <span style="color:#333333">
      **AT+CGATT?**查询是否注册网络收到
     </span>
     <span style="color:#333333">
      +CGATT: 1
     </span>
     <span style="color:#333333">
      值是
     </span>
     <span style="color:#333333">
      1
     </span>
     <span style="color:#333333">
      即为注册成功，正常情况下注册时间不会超过两分钟，如果超过两分钟没有注册可以进入飞行模式五秒后退出再查询，或者直接重启模块。这个就是还是附着分离的情况了，也就不在贴出来，毕竟实际上也没太大难度，就是知道代码就好了。
     </span>
    </p>
    <p>
     <span style="color:#333333">
     </span>
     <span style="color:#000000">
      <strong>
       配置连接：
      </strong>
     </span>
     <span style="color:#333333">
      <strong>
       AT+CIPMUX=0
      </strong>
     </span>
     <span style="color:#333333">
      设置为单链接模式 ；
     </span>
     <span style="color:#333333">
      <strong>
       AT+CIPQSEND=1
      </strong>
     </span>
     <span style="color:#333333">
      设置为快发
     </span>
     <span style="color:#fe2c24">
      <strong>
       注意：这两条一定要在启用网络之前配置，不然会失败。
      </strong>
     </span>
    </p>
    <p>
     <span style="color:#000000">
      12.1
     </span>
     <span style="color:#000000">
      启动多
     </span>
     <span style="color:#000000">
      IP
     </span>
     <span style="color:#000000">
      连接：
     </span>
     <span style="color:#000000">
      AT+CIPMUX
     </span>
    </p>
    <p>
     <span style="color:#000000">
      之前在嵌入式TCPIP中也研究过了，这里再贴出一下，便于应用到实际中去。
     </span>
    </p>
    <p>
     <span style="color:#000000">
     </span>
     <img alt="" height="263" src="https://i-blog.csdnimg.cn/direct/cafcb938668942339b3e7ed432af18dd.png" width="679"/>
    </p>
    <p>
     <img alt="" height="108" src="https://i-blog.csdnimg.cn/direct/a66c3d155cf6415c97e5ac59cc4571b3.png" width="672"/>
    </p>
    <p>
     这个看起来还是比较重要呢，毕竟
     <span style="color:#000000">
      TCP例子里面没强调这个呢。
     </span>
    </p>
    <p>
     <span style="color:#000000">
     </span>
     <span style="color:#000000">
      <strong>
       激活网络 ：
      </strong>
     </span>
    </p>
    <p>
     <span style="color:#000000">
      <strong>
      </strong>
     </span>
     <span style="color:#333333">
      <strong>
       AT+CSTT
      </strong>
     </span>
     <span style="color:#333333">
      配置网络，非私有
     </span>
     <span style="color:#333333">
      APN
     </span>
     <span style="color:#333333">
      以外
     </span>
     <span style="color:#333333">
      Cat1
     </span>
     <span style="color:#333333">
      的固件支持根据卡自动配置
     </span>
     <span style="color:#333333">
      APN
     </span>
     <span style="color:#333333">
      ，直接输入 AT+CSTT 即可，模块会按照自动获取的
     </span>
     <span style="color:#333333">
      APN
     </span>
     <span style="color:#333333">
      设置
     </span>
     <span style="color:#333333">
      CSTT
     </span>
     <span style="color:#333333">
      的
     </span>
     <span style="color:#333333">
      APN
     </span>
     <span style="color:#333333">
      。
     </span>
     <span style="color:#333333">
      <strong>
       AT+CIICR
      </strong>
     </span>
     <span style="color:#333333">
      激活网络，在
     </span>
     <span style="color:#333333">
      IP START
     </span>
     <span style="color:#333333">
      的状态使用
     </span>
     <span style="color:#333333">
      AT+CIICR
     </span>
     <span style="color:#333333">
      激活网络，激活以后通过
     </span>
     <span style="color:#333333">
      <strong>
       AT+CIFSR
      </strong>
      查询是否获取 IP
     </span>
     <span style="color:#333333">
      ，如果成功就可以开始配置
     </span>
     <span style="color:#333333">
      TCP
     </span>
     <span style="color:#333333">
      连接了，如果不成功使用
     </span>
     <span style="color:#333333">
      AT+CIPSHUT
     </span>
     <span style="color:#333333">
      关闭移动网络，从 AT+CSTT
     </span>
     <span style="color:#333333">
      重新进行。
     </span>
    </p>
    <p>
     <span style="color:#000000">
      <strong>
       配置连接：
      </strong>
     </span>
    </p>
    <p>
     <span style="color:#333333">
      <strong>
       AT+CIPSSL=1
      </strong>
     </span>
     <span style="color:#333333">
      开启
     </span>
     <span style="color:#333333">
      SSL
     </span>
     <span style="color:#333333">
      功能开关为开
     </span>
    </p>
    <p>
     <span style="color:#333333">
      <strong>
       AT+FSCREATE=”server.crt”
      </strong>
      创建
     </span>
     <span style="color:#333333">
      CA
     </span>
     <span style="color:#333333">
      证书文件
     </span>
    </p>
    <p>
     <span style="color:#333333">
      **AT+FSCREATE=”client.crt”**创建客户端证书文件
     </span>
    </p>
    <p>
     <span style="color:#333333">
      **AT+FSCREATE=”client.key”**创建客户端密钥文件
     </span>
    </p>
    <p>
     <span style="color:#333333">
      <strong>
       AT+FSWRITE=”server.crt”,0,2080,15
      </strong>
      文件长度
     </span>
     <span style="color:#333333">
      2080
     </span>
     <span style="color:#333333">
      只是举例，要根据实际填写。下同。
     </span>
    </p>
    <p>
     <span style="color:#333333">
      <strong>
       AT+FSWRITE=”client.crt”, 0,128,10
      </strong>
      输入客户端证书文件
     </span>
    </p>
    <p>
     <span style="color:#333333">
      <strong>
       AT+FSWRITE=”client.key”,0,188,10
      </strong>
      输入客户端密钥文件
     </span>
    </p>
    <div>
     <p>
     </p>
     <p>
      <span style="color:#333333">
       **AT+SSLCFG=”cacert”,0, ”server.crt”**设置服务器
      </span>
      <span style="color:#333333">
       CA
      </span>
      <span style="color:#333333">
       证书
      </span>
      <span style="color:#333333">
       SSL
      </span>
      <span style="color:#333333">
       上下文
      </span>
      <span style="color:#333333">
       id
      </span>
      <span style="color:#333333">
       ，在单链接的情况 下缺省为 0
      </span>
     </p>
     <p>
      <span style="color:#333333">
       **AT+SSLCFG=”clientcert”,0, ”client.crt”**设置客户端证书
      </span>
     </p>
     <p>
      <span style="color:#333333">
       **AT+SSLCFG=”clientkey”, 0,”client.key”**设置客户端
      </span>
      <span style="color:#333333">
       KEY
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        AT+SSLCFG=”seclevel”,0,2
       </strong>
       设置安全等级
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        AT+SSLCFG=”ciphersuite”,0,0X0035
       </strong>
       设置加密套件
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        AT+SSLCFG=”clientrandom”,0,101B12C3141516171F19202122232425262728293031
       </strong>
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        323334353637
       </strong>
      </span>
      <span style="color:#333333">
       设置随机数
      </span>
     </p>
     <p>
      <span style="color:#333333">
       这个之前的TCP例子里面确实没有，不过这里却加上了，这就是区别吧。
      </span>
     </p>
     <p>
      <span style="color:#000000">
       <strong>
        连接服务器
       </strong>
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        AT+CIPSTART=TCP,
       </strong>
      </span>
      <span style="color:#0052d9">
       <strong>
        tcplab.openluat.com
       </strong>
      </span>
      <span style="color:#333333">
       <strong>
        ,57513
       </strong>
      </span>
      <span style="color:#333333">
       连接服务器，请使用自己服务器测试
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        AT+CIPSEND=10
       </strong>
       发送数据（确定长度）
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        AT+CIPSHUT
       </strong>
       关闭连接
      </span>
     </p>
     <p>
      <span style="color:#333333">
       <strong>
        AT+CIPSSL=0
       </strong>
       关闭
      </span>
      <span style="color:#333333">
       SSL
      </span>
     </p>
     <p>
      <span style="color:#333333">
       这里也是需要连接服务器了，可能以后用到的应该是这种模式了。
      </span>
     </p>
     <p>
      <span style="color:#333333">
       举例说明：
      </span>
      <span style="color:#000000">
       指令报错的异常处理及示例说明(这些直接贴的例子呢，我还没模块，也没研究透，就是作为一个参考）
      </span>
     </p>
     <p>
      <span style="color:#333333">
       ^MODE: 17,17
      </span>
     </p>
     <p>
      <span style="color:#333333">
       +E_UTRAN Service
      </span>
     </p>
     <p>
      <span style="color:#333333">
       +CGEV: ME PDN ACT 1
      </span>
     </p>
     <p>
      <span style="color:#333333">
       +NITZ: 22/10/26,07:37:55+32,0
      </span>
     </p>
     <p>
      <span style="color:#333333">
       //
      </span>
      <span style="color:#333333">
       以上是模块开机后主动上报的数据
      </span>
     </p>
     <p>
      <span style="color:#333333">
       [16:25:26.408]
      </span>
      <span style="color:#333333">
       发
      </span>
      <span style="color:#333333">
       →
      </span>
      <span style="color:#333333">
       ◇
      </span>
      <span style="color:#333333">
       AT
      </span>
     </p>
     <p>
      <span style="color:#333333">
       [16:25:26.410]
      </span>
      <span style="color:#333333">
       收
      </span>
      <span style="color:#333333">
       ←
      </span>
      <span style="color:#333333">
       ◆
      </span>
      <span style="color:#333333">
       AT
      </span>
     </p>
     <p>
      <span style="color:#333333">
       OK
      </span>
     </p>
     <p>
      <span style="color:#333333">
       [16:25:29.710]
      </span>
      <span style="color:#333333">
       发
      </span>
      <span style="color:#333333">
       →
      </span>
      <span style="color:#333333">
       ◇
      </span>
      <span style="color:#333333">
       ATI
      </span>
     </p>
     <p>
      <span style="color:#333333">
       [16:25:29.715]
      </span>
      <span style="color:#333333">
       收
      </span>
      <span style="color:#333333">
       ←
      </span>
      <span style="color:#333333">
       ◆
      </span>
      <span style="color:#333333">
       ATI
      </span>
     </p>
     <p>
      <span style="color:#333333">
       AirM2M_780E_V1021_LTE_AT
      </span>
     </p>
     <p>
      <span style="color:#333333">
       OK
      </span>
     </p>
     <p>
      <span style="color:#333333">
       [16:25:30.205]
      </span>
      <span style="color:#333333">
       发
      </span>
      <span style="color:#333333">
       →
      </span>
      <span style="color:#333333">
       ◇
      </span>
      <span style="color:#333333">
       AT+CPIN?
      </span>
     </p>
     <p>
      <span style="color:#333333">
       [16:25:31.205]
      </span>
      <span style="color:#333333">
       收
      </span>
      <span style="color:#333333">
       ←
      </span>
      <span style="color:#333333">
       ◆
      </span>
      <span style="color:#333333">
       AT+CPIN?
      </span>
     </p>
     <p>
      <span style="color:#333333">
       +CME ERROR: 10 //
      </span>
      <span style="color:#333333">
       未检测到
      </span>
      <span style="color:#333333">
       SIM
      </span>
      <span style="color:#333333">
       卡，重新安装
      </span>
      <span style="color:#333333">
       sim
      </span>
      <span style="color:#333333">
       卡后，需要给模块复位重启才能识别到
      </span>
     </p>
     <p>
      <span style="color:#333333">
       卡
      </span>
     </p>
     <p>
      <span style="color:#333333">
       [16:25:33.202]
      </span>
      <span style="color:#333333">
       发
      </span>
      <span style="color:#333333">
       →
      </span>
      <span style="color:#333333">
       ◇
      </span>
      <span style="color:#333333">
       AT+CPIN?
      </span>
     </p>
     <div>
      <p>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:33.205]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CPIN?
       </span>
      </p>
      <p>
       <span style="color:#333333">
        +CPIN: READY
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:35.646]
       </span>
       <span style="color:#333333">
        发
       </span>
       <span style="color:#333333">
        →
       </span>
       <span style="color:#333333">
        ◇
       </span>
       <span style="color:#333333">
        AT+CSQ
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:35.650]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CSQ
       </span>
      </p>
      <p>
       <span style="color:#333333">
        +CSQ: 23,0
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:38.032]
       </span>
       <span style="color:#333333">
        发
       </span>
       <span style="color:#333333">
        →
       </span>
       <span style="color:#333333">
        ◇
       </span>
       <span style="color:#333333">
        AT+CGATT?
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:38.034]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CGATT?
       </span>
      </p>
      <p>
       <span style="color:#333333">
        +CGATT: 1
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:39.490]
       </span>
       <span style="color:#333333">
        发
       </span>
       <span style="color:#333333">
        →
       </span>
       <span style="color:#333333">
        ◇
       </span>
       <span style="color:#333333">
        AT+CEREG?
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:39.492]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CEREG?
       </span>
      </p>
      <p>
       <span style="color:#333333">
        +CEREG: 0,1
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK
       </span>
      </p>
      <p>
       <span style="color:#333333">
        //
       </span>
       <span style="color:#333333">
        以上为主动查询模块的联网情况， 模块已经附着网络成功
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:55.169]
       </span>
       <span style="color:#333333">
        发
       </span>
       <span style="color:#333333">
        →
       </span>
       <span style="color:#333333">
        ◇
       </span>
       <span style="color:#333333">
        AT+CIPMODE=0
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:55.176]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CIPMODE=0
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK //
       </span>
       <span style="color:#333333">
        设置
       </span>
       <span style="color:#333333">
        TCPIP
       </span>
       <span style="color:#333333">
        应用模式为非透明传输模式
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:55.908]
       </span>
       <span style="color:#333333">
        发
       </span>
       <span style="color:#333333">
        →
       </span>
       <span style="color:#333333">
        ◇
       </span>
       <span style="color:#333333">
        AT+CIPMUX=0
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:55.911]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CIPMUX=0
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK //
       </span>
       <span style="color:#333333">
        设置为单链接模式
       </span>
       <span style="color:#333333">
        (
       </span>
       <span style="color:#333333">
        默认是单路链接
       </span>
       <span style="color:#333333">
        )
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:56.610]
       </span>
       <span style="color:#333333">
        发
       </span>
       <span style="color:#333333">
        →
       </span>
       <span style="color:#333333">
        ◇
       </span>
       <span style="color:#333333">
        AT+CIPQSEND=1
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:25:56.612]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CIPQSEND=1
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK //
       </span>
       <span style="color:#333333">
        设置非透传数据为快发送模式
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:26:00.198]
       </span>
       <span style="color:#333333">
        发
       </span>
       <span style="color:#333333">
        →
       </span>
       <span style="color:#333333">
        ◇
       </span>
       <span style="color:#333333">
        AT+CSTT
       </span>
      </p>
      <p>
       <span style="color:#333333">
        [16:26:00.201]
       </span>
       <span style="color:#333333">
        收
       </span>
       <span style="color:#333333">
        ←
       </span>
       <span style="color:#333333">
        ◆
       </span>
       <span style="color:#333333">
        AT+CSTT
       </span>
      </p>
      <p>
       <span style="color:#333333">
        OK //
       </span>
       <span style="color:#333333">
        启动任务并设置接入点
       </span>
       <span style="color:#333333">
        APN
       </span>
       <span style="color:#333333">
        、用户名、密码
       </span>
       <span style="color:#333333">
        (cat1
       </span>
       <span style="color:#333333">
        模块内部有写
       </span>
       <span style="color:#333333">
        APN
       </span>
       <span style="color:#333333">
        ，可以不需要设置，
       </span>
      </p>
      <p>
       <span style="color:#333333">
        默认为空，专网卡、定向卡除外
       </span>
       <span style="color:#333333">
        )
       </span>
      </p>
      <div>
       <p>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:04.469]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CSTT
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:04.472]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
        <span style="color:#333333">
         AT+CSTT
        </span>
       </p>
       <p>
        <span style="color:#333333">
         +CME ERROR: 3 //
        </span>
        <span style="color:#333333">
         提示操作错误，相同的指令连续输入
        </span>
        <span style="color:#333333">
         2
        </span>
        <span style="color:#333333">
         次，会报这个错误，可以通过发
        </span>
       </p>
       <p>
        <span style="color:#333333">
         AT+CIPSHUT
        </span>
        <span style="color:#333333">
         关闭移动场景后，在输入此命令
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:04.479]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CIICRR
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:04.621]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
        <span style="color:#333333">
         AT+CIICRR
        </span>
       </p>
       <p>
        <span style="color:#333333">
         ERROR //
        </span>
        <span style="color:#333333">
         激活移动场景 （出现这个指令错误，一般都是模块内部没有写这条指令或者指令
        </span>
       </p>
       <p>
        <span style="color:#333333">
         输入错误）
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [17:27:53.099]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CIICR
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [17:27:53.100]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
        <span style="color:#333333">
         AT+CIICR
        </span>
       </p>
       <p>
        <span style="color:#333333">
         +PDP: DEACT
        </span>
       </p>
       <p>
        <span style="color:#333333">
         +CME ERROR: 65535 //
        </span>
        <span style="color:#333333">
         查询本地
        </span>
        <span style="color:#333333">
         IP
        </span>
        <span style="color:#333333">
         地址 （在模块附着网络失败后会出现此错误，可以通
        </span>
       </p>
       <p>
        <span style="color:#333333">
         过
        </span>
        <span style="color:#333333">
         AT+CGATT?
        </span>
        <span style="color:#333333">
         来查询，可以走断网异常流程来处理
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:07.030]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CIFSR
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:07.034]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
        <span style="color:#333333">
         AT+CIFSR
        </span>
       </p>
       <p>
        <span style="color:#333333">
         10.17.70.180
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:08.509]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CIPSTART=1,“TCP”,”112.125.89.8“,37076
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:08.516]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
        <span style="color:#333333">
         AT+CIPSTART=1,“TCP”,”112.125.89.8“,37076
        </span>
       </p>
       <p>
        <span style="color:#333333">
         +CME ERROR: 3 //
        </span>
        <span style="color:#333333">
         在单路链接的情况下，使用多路链接的指令会出现此错误
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:30.509]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CIPSTART=“TCP”,”112.125.89.8“,37076
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:30.516]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
        <span style="color:#333333">
         AT+CIPSTART=“TCP”,”112.125.89.8“,37076
        </span>
       </p>
       <p>
        <span style="color:#333333">
         OK
        </span>
       </p>
       <p>
        <span style="color:#333333">
         STATE: IP STATUS
        </span>
       </p>
       <p>
        <span style="color:#333333">
         CONNECT FAIL //
        </span>
        <span style="color:#333333">
         在联网正常的情况下，一直无法链接服务器，可以检查一下指令的符号是
        </span>
       </p>
       <p>
        <span style="color:#333333">
         否有输入错误，使用中文的符号会导致异常
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:41:31.516]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CIPSTART=“TCP”,“112.125.89.8”,37076
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:31.980]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
        <span style="color:#333333">
         AT+CIPSTART=“TCP”,“112.125.89.8”,37076
        </span>
       </p>
       <p>
        <span style="color:#333333">
         OK
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [18:00:01.142]
        </span>
        <span style="color:#333333">
         收
        </span>
        <span style="color:#333333">
         ←
        </span>
        <span style="color:#333333">
         ◆
        </span>
       </p>
       <p>
        <span style="color:#333333">
         CONNECT OK //
        </span>
        <span style="color:#333333">
         链接成功
        </span>
       </p>
       <p>
        <span style="color:#333333">
         [16:26:38.667]
        </span>
        <span style="color:#333333">
         发
        </span>
        <span style="color:#333333">
         →
        </span>
        <span style="color:#333333">
         ◇
        </span>
        <span style="color:#333333">
         AT+CIPSEND
        </span>
       </p>
       <div>
        <p>
        </p>
        <p>
         <span style="color:#333333">
          [16:26:38.675]
         </span>
         <span style="color:#333333">
          收
         </span>
         <span style="color:#333333">
          ←
         </span>
         <span style="color:#333333">
          ◆
         </span>
         <span style="color:#333333">
          AT+CIPSEND
         </span>
        </p>
        <p>
         <span style="color:#333333">
          &gt;
         </span>
        </p>
        <p>
         <span style="color:#333333">
          //
         </span>
         <span style="color:#333333">
          出现此符号后才能发送数据，没有出现时发送数据会异常
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [16:26:43.648]
         </span>
         <span style="color:#333333">
          发
         </span>
         <span style="color:#333333">
          →
         </span>
         <span style="color:#333333">
          ◇
         </span>
         <span style="color:#333333">
          666888
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [16:26:43.651]
         </span>
         <span style="color:#333333">
          收
         </span>
         <span style="color:#333333">
          ←
         </span>
         <span style="color:#333333">
          ◆
         </span>
         <span style="color:#333333">
          666888
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [16:26:46.292]
         </span>
         <span style="color:#333333">
          发
         </span>
         <span style="color:#333333">
          →
         </span>
         <span style="color:#333333">
          ◇
         </span>
         <span style="color:#333333">
          □ //HEX
         </span>
         <span style="color:#333333">
          格式的大写
         </span>
         <span style="color:#333333">
          1A
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [16:26:46.306]
         </span>
         <span style="color:#333333">
          收
         </span>
         <span style="color:#333333">
          ←
         </span>
         <span style="color:#333333">
          ◆
         </span>
        </p>
        <p>
         <span style="color:#333333">
          DATA ACCEPT:8
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [16:26:48.597]
         </span>
         <span style="color:#333333">
          发
         </span>
         <span style="color:#333333">
          →
         </span>
         <span style="color:#333333">
          ◇
         </span>
         <span style="color:#333333">
          AT+CIPSTATUS
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [16:26:48.604]
         </span>
         <span style="color:#333333">
          收
         </span>
         <span style="color:#333333">
          ←
         </span>
         <span style="color:#333333">
          ◆
         </span>
         <span style="color:#333333">
          AT+CIPSTATUS
         </span>
        </p>
        <p>
         <span style="color:#333333">
          OK
         </span>
        </p>
        <p>
         <span style="color:#333333">
          STATE: CONNECT OK //
         </span>
         <span style="color:#333333">
          查询链路状态
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [18:07:05.517]
         </span>
         <span style="color:#333333">
          发
         </span>
         <span style="color:#333333">
          →
         </span>
         <span style="color:#333333">
          ◇
         </span>
         <span style="color:#333333">
          AT+CIPSHUT
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [18:07:05.521]
         </span>
         <span style="color:#333333">
          收
         </span>
         <span style="color:#333333">
          ←
         </span>
         <span style="color:#333333">
          ◆
         </span>
         <span style="color:#333333">
          AT+CIPSHUT
         </span>
        </p>
        <p>
         <span style="color:#333333">
          [18:07:07.521]
         </span>
         <span style="color:#333333">
          收
         </span>
         <span style="color:#333333">
          ←
         </span>
         <span style="color:#333333">
          ◆
         </span>
        </p>
        <p>
         <span style="color:#333333">
          SHUT OK //
         </span>
         <span style="color:#333333">
          关闭移动场景
         </span>
        </p>
        <p>
         <span style="color:#000000">
          常见问题
         </span>
        </p>
        <p>
         <span style="color:#333333">
          (1)
          <strong>
           连接服务器失败
          </strong>
         </span>
        </p>
        <p>
         <span style="color:#333333">
          1. 服务器必须是公网地址
         </span>
        </p>
        <p>
         <span style="color:#333333">
          2. 使用
         </span>
         <span style="color:#333333">
          PC
         </span>
         <span style="color:#333333">
          上的
         </span>
         <span style="color:#333333">
          TCP UDP
         </span>
         <span style="color:#333333">
          测试工具客户端、或者
         </span>
         <span style="color:#333333">
          mqtt.fx
         </span>
         <span style="color:#333333">
          ，连接服务器确认一下是否可以连接成功，排除服务器故障
         </span>
        </p>
        <p>
         <span style="color:#333333">
          3. 检查下模块信号、网络注册、网络附着、
         </span>
         <span style="color:#333333">
          PDP
         </span>
         <span style="color:#333333">
          激活状态
         </span>
        </p>
        <p>
         <span style="color:#333333">
          4. 检查下
         </span>
         <span style="color:#333333">
          SIM
         </span>
         <span style="color:#333333">
          卡是否欠费【
         </span>
         <span style="color:#333333">
          4G
         </span>
         <span style="color:#333333">
          模块有一种欠费表现：无法注册
         </span>
         <span style="color:#333333">
          4G
         </span>
         <span style="color:#333333">
          网络，可以注册 2G
         </span>
         <span style="color:#333333">
          网络】
         </span>
        </p>
        <p>
         <span style="color:#333333">
          (2)
          <strong>
           最多同时支持多少个连接
          </strong>
         </span>
        </p>
        <p>
         <span style="color:#333333">
          AT 版本最多
         </span>
         <span style="color:#333333">
          8
         </span>
         <span style="color:#333333">
          个连接
         </span>
        </p>
        <div>
         <p>
         </p>
         <p>
          <span style="color:#333333">
           (3) 关于
          </span>
          <span style="color:#333333">
           "TCP
          </span>
          <span style="color:#333333">
           单
          </span>
          <span style="color:#333333">
           /
          </span>
          <span style="color:#333333">
           多链接时，刚开始发送数据成功，服务器能收到
          </span>
          <span style="color:#333333">
           ,
          </span>
          <span style="color:#333333">
           <strong>
            间隔十几分钟，模
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            块端
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            AT+CIPSTATUS
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            查询链接存在，
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            AT+CIPSEND
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            数据发送成功，但服务器却没
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            收到数据
           </strong>
          </span>
          <span style="color:#333333">
           "
          </span>
          <span style="color:#333333">
           问题
          </span>
         </p>
         <p>
          <span style="color:#333333">
           用
          </span>
          <span style="background-color:#ffffff">
           保活探针(CIPTKA)的方法或者
          </span>
          <span style="color:#333333">
           心跳包(HEARTCONFIG)来解决，我直接把链接那面的文章贴过来了，就不给网址了。
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <strong>
            <span style="background-color:#ffffff">
             <strong>
              ①、问题点
             </strong>
            </span>
           </strong>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            在测试合宙CAT1模块AT版本固件的时候,经常会遇到这样的问题: CIPSTART,命令建立了TCP单链接或多链接了, 开始发送数据正常,十几分钟不发任何数据,再发数据的时候提示SEND OK,但是服务器侧未收到任何数据.
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            ②
           </span>
           <strong>
            <span style="background-color:#ffffff">
             <strong>
              、问题原因
             </strong>
            </span>
           </strong>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <strong>
            <span style="background-color:#ffffff">
             <strong>
             </strong>
            </span>
           </strong>
          </span>
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            cat1模块不是直接跟服务器连接的，而是通过NAT（即网络地址转换）与服务器连接，NAT就是网络地址转换。NAT会维护一个映射表，这个映射表会定时检查，如果10分钟内这路socket跟服务器没任何数据往来，就会回收这路的地址，10分钟后应用上再发数据就找不到路由地址了；如果10分钟内有数据更新，计时器会重新置为10分钟。
           </span>
          </span>
         </p>
         <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
          <span style="background-color:#ffffff">
           如果10分钟内这路socket跟服务器没任何数据往来，就会回收这路的地址，10分钟后应用上再发数据就找不到路由地址了—— 这个就是发送数据提示SEND OK，服务器却收不到任何数据的原因。
          </span>
         </p>
         <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
          <span style="background-color:#ffffff">
           ③
           <strong>
            <span style="background-color:#ffffff">
             <strong>
              、解决之道
             </strong>
            </span>
           </strong>
          </span>
         </p>
         <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
          <span style="background-color:#ffffff">
           <strong>
            <span style="background-color:#ffffff">
             <strong>
              a、
             </strong>
            </span>
           </strong>
          </span>
          <strong>
           <span style="background-color:#ffffff">
            <strong>
             用保活探针(CIPTKA)的方法来解决
            </strong>
           </span>
          </strong>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            以多链接示例如下：
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <strong>
            <span style="background-color:#ffffff">
             <strong>
              AT+CIPTKA=1,180,75,6
             </strong>
            </span>
           </strong>
           <span style="background-color:#ffffff">
            // 打开保活探针,时间间隔为180秒
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            OK
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            AT+CIPMUX=1
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            OK
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            AT+CIPSTART=1,TCP,domain.aaa.bbb,12345
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            OK
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            1, CONNECT OK
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            AT+CIPSTART=5,TCP,domain.aaa.bbb,12345
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            OK
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            5, CONNECT OK
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:55:49.974]发→◇AT+CIPSEND=1,10
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:55:49.983]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            &gt;
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:55:53.599]发→◇0123456789
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:55:53.604]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            1, SEND OK // 此时服务器收到数据
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:56:22.742]发→◇AT+CIPSEND=5,10
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:56:22.748]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            &gt;
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:56:24.646]发→◇9876543210
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [13:56:24.653]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            5, SEND OK // 此时服务器收到数据
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:17:59.969]发→◇AT+CIPSEND=1,10 // 1,5 这两个链接时隔21分钟再次发送数据,仍然能收到数据.
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:17:59.975]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            &gt;
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:18:01.410]发→◇0123456789
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:18:01.416]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            1, SEND OK // 此时服务器收到数据
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:18:08.897]发→◇AT+CIPSEND=5,10
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:18:08.903]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            &gt;
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:18:11.138]发→◇9876543210
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            [14:18:11.146]收←◆
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            5, SEND OK // 此时服务器收到数据
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <strong>
            <span style="background-color:#ffffff">
             <span style="color:#003ba5">
              <strong>
               注：保活探针在模块休眠(AT+CSCLK=2)情况下同样有效
              </strong>
             </span>
            </span>
           </strong>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <strong>
            <span style="background-color:#ffffff">
             <span style="color:#003ba5">
              <strong>
               b、
              </strong>
             </span>
            </span>
           </strong>
          </span>
          <strong>
           <span style="background-color:#ffffff">
            <strong>
             用心跳包(
            </strong>
           </span>
          </strong>
          <strong>
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             <strong>
              HEARTCONFIG
             </strong>
            </span>
           </span>
          </strong>
          <strong>
           <span style="background-color:#ffffff">
            <strong>
             )来解决
            </strong>
           </span>
          </strong>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <strong>
           <span style="background-color:#ffffff">
            <strong>
            </strong>
           </span>
          </strong>
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:02.477]发→◇AT^HEARTCONFIG=1,0,180
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:02.484]收←◆
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             OK
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:26.720]发→◇AT^HEARTBEAT=0,tcp---test
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:26.727]收←◆
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             OK
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:45.196]发→◇AT+CIPMUX=1
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:45.201]收←◆
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             OK
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:52.571]发→◇AT+CIPSTART=0,TCP,
            </span>
            domain.aaa.bbb,12345
           </span>
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             //此服务器是个回环服务器,收到数据原样回送到对端
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:52.579]收←◆
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             OK
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:30:52.735]收←◆
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             0, CONNECT OK
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             [15:33:02.643]收←◆ //3分钟后收到数据,说明服务器收到了模块发的心跳数据
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="background-color:#ffffff">
           <span style="background-color:#ffffff">
            <span style="color:#000000">
             +RECEIVE,0,10:
            </span>
           </span>
          </span>
         </p>
         <p style="margin-left:0; margin-right:0; text-align:left">
          <span style="color:#333333">
           (4)
           <strong>
            780E
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            模块
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            tcp
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            联网成功 每次开机都需要重新下发
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            AT
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            指令连接吗？
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#333333">
           是的，模块不保存已输入 AT
          </span>
          <span style="color:#333333">
           指令
          </span>
         </p>
         <p>
          <span style="color:#333333">
           (5)
           <strong>
            模块上报
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            PDP: DEACT
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            ， 这个要怎么处理
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#333333">
           4G 模块会产生一个
          </span>
          <span style="color:#333333">
           +PDP: DEACT
          </span>
          <span style="color:#333333">
           的
          </span>
          <span style="color:#333333">
           URC
          </span>
          <span style="color:#333333">
           提示，出现此提示说明已经激活的
          </span>
          <span style="color:#333333">
           PDP
          </span>
          <span style="color:#333333">
           承 载被网络端去激活了，此时仍然需要向4G
          </span>
          <span style="color:#333333">
           模块发送
          </span>
          <span style="color:#333333">
           AT+CIPSHUT
          </span>
          <span style="color:#333333">
           命令主动关闭
          </span>
          <span style="color:#333333">
           PDP
          </span>
          <span style="color:#333333">
           ，然后再重新激活，再重新连接 TCP
          </span>
          <span style="color:#333333">
           服务器。
          </span>
         </p>
         <p>
          <span style="color:#333333">
           (6)
           <strong>
            重试多次
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            PDP
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            一直激活失败
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#333333">
           如果重试多次，PDP
          </span>
          <span style="color:#333333">
           一直激活失败，则尝试使用如下手段恢复：
          </span>
         </p>
         <p>
          <span style="color:#333333">
           1、使用
          </span>
          <span style="color:#333333">
           RESET
          </span>
          <span style="color:#333333">
           引脚复位模块
          </span>
         </p>
         <p>
          <span style="color:#333333">
           2、极端情况下，直接给模块断电，再上电，
          </span>
          <span style="color:#333333">
           POWER KEY
          </span>
          <span style="color:#333333">
           引脚拉低开机
          </span>
         </p>
         <p>
          <span style="color:#333333">
           (7)
           <strong>
            如何发送心跳包
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#333333">
           cat1 模块如何发送心跳包
          </span>
          <span style="color:#0052d9">
           cat1
          </span>
          <span style="color:#0052d9">
           模块如何发送心跳包
          </span>
         </p>
         <p>
          <span style="color:#333333">
           (8)
           <strong>
            由数据透传状态转向命令状态，发
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            +++
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            切换不了
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#333333">
           发送时不要勾选回车换行
          </span>
         </p>
         <p>
          <span style="color:#333333">
           (9)
           <strong>
            TCP
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            调试网址
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#0052d9">
           https://netlab.luatos.com/
          </span>
         </p>
         <p>
          <span style="color:#333333">
           (10)
           <strong>
            当我连续发送几百个字节的数据的时候，在里面会夹杂
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            0x0a0x0d
           </strong>
          </span>
          <span style="color:#333333">
           <strong>
            这种，如何
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#333333">
           <strong>
            避免这个呢
           </strong>
          </span>
         </p>
         <p>
          <span style="color:#333333">
           通过 AT+CIPRXF
          </span>
          <span style="color:#333333">
           设置接收的数据末尾是否自动添加回车换行（网络连接前设置）
          </span>
         </p>
         <p>
          <span style="color:#333333">
          </span>
          <span style="color:#000000">
           12.12
          </span>
          <span style="color:#000000">
           设置接收的数据末尾是否自动添加回车换行：
          </span>
          <span style="color:#000000">
           AT+CIPRXF
          </span>
         </p>
         <p>
          <span style="color:#000000">
          </span>
          <img alt="" height="153" src="https://i-blog.csdnimg.cn/direct/01d3a1926c4745959d93f935f8383435.png" width="673"/>
         </p>
         <p>
          <img alt="" height="81" src="https://i-blog.csdnimg.cn/direct/8226880653cf4375bc72a6294406388a.png" width="688"/>
         </p>
         <p>
          <img alt="" height="108" src="https://i-blog.csdnimg.cn/direct/2eafb04557504b74b74d8c9da3b427b4.png" width="690"/>
         </p>
         <p>
          这个根据需要设置，如果防止会出现这种数据可以考虑选择1不添加这个后缀。当然根据需求来看，开始可以尝试添加，测试时候遇到问题再去掉防止使用之中出现丢失数据的意外。当然因为是收到的数据，可以考虑加CRC等校验，进而去掉回车换行，这个需要正式使用过程的问题。
         </p>
         <p>
          <span style="color:#333333">
           (11)
           <strong>
            支持什么加密证书
           </strong>
          </span>
         </p>
         <div>
          <span style="color:#333333">
           支持证书配置，支持单向认证和双向认证
          </span>
         </div>
         <div>
          <span style="color:#333333">
           支持如下六种加密套件：
          </span>
         </div>
         <div>
          <span style="color:#333333">
           0X0035 TLS_RSA_WITH_AES_256_CBC_SHA
          </span>
         </div>
         <div>
          <span style="color:#333333">
           0X002F TLS_RSA_WITH_AES_128_CBC_SHA
          </span>
         </div>
         <div>
          <span style="color:#333333">
           0X0005 TLS_RSA_WITH_RC4_128_SHA
          </span>
         </div>
         <div>
          <span style="color:#333333">
           0X0004 TLS_RSA_WITH_RC4_128_MD5
          </span>
         </div>
         <div>
          <span style="color:#333333">
           0X000A TLS_RSA_WITH_3DES_EDE_CBC_SHA
          </span>
         </div>
         <div>
          <span style="color:#333333">
           0X003D TLS_RSA_WITH_AES_256_CBC_SHA256
          </span>
         </div>
         <div>
          <span style="color:#000000">
          </span>
          <span style="color:#333333">
           (12)
          </span>
          <span style="color:#333333">
           <strong>
            数据发送接收缓存问题
           </strong>
          </span>
         </div>
         <div>
          <span style="color:#333333">
           使用 CIPSTART 建立的
          </span>
          <span style="color:#333333">
           socket
          </span>
          <span style="color:#333333">
           连接，接收数据没有缓存机制，收到数据后，立即通过AT 口输出，每包最多
          </span>
          <span style="color:#333333">
           1460
          </span>
          <span style="color:#333333">
           字节；例如服务器下发一个
          </span>
          <span style="color:#333333">
           70KB
          </span>
          <span style="color:#333333">
           的文件，模块会连续收到多个包，通过 AT
          </span>
          <span style="color:#333333">
           口连续多次输出，发送每包最多也为
          </span>
          <span style="color:#333333">
           1460
          </span>
          <span style="color:#333333">
           字节。
          </span>
         </div>
         <p>
          <span style="color:#000000">
           补：现在找到工作了，之前的清闲也就没了，加上最近工作有些忙，有时候晚上加班，不过还好可以调休，所以只有在空闲时间继续研究呢。
          </span>
         </p>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f65736d656d6265722f:61727469636c652f64657461696c732f313435333938333436" class_="artid" style="display:none">
 </p>
</div>


