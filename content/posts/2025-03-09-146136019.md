---
layout: post
title: "Unity-DOTS从入门到精通之-自定义Authoring类"
date: 2025-03-09 18:11:48 +0800
description: "DOTS（面向数据的技术堆栈）是一套由 Unity 提供支持的技术，用于提供高性能游戏开发解决方案，特别适合需要处理大量数据的游戏，例如大型开放世界游戏。我们今天来讲一下，Dots框架中，Authoring类的创建和使用。Authoring 类通常用于定义和管理实体和组件的元数据以及如何进行编辑和创建。这一类主要的功能包括：1.实体和组件定义：Authoring 类可以用于声明或定义在游戏中使用的不同实体和组件。这使得开发者可以方便地创建和配置其对应的数据结构。"
keywords: "Unity DOTS从入门到精通之 自定义Authoring类"
categories: ['Unity', 'Dots']
tags: ['Unity', 'Jobsystem', 'Entities', 'Ecs', 'Dots', 'Burst', 'Authoring']
artid: "146136019"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146136019
    alt: "Unity-DOTS从入门到精通之-自定义Authoring类"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146136019
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146136019
cover: https://bing.ee123.net/img/rand?artid=146136019
image: https://bing.ee123.net/img/rand?artid=146136019
img: https://bing.ee123.net/img/rand?artid=146136019
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Unity DOTS从入门到精通之 自定义Authoring类
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="_1">
     </a>
     前言
    </h3>
    <p>
     DOTS（面向数据的技术堆栈）是一套由 Unity 提供支持的技术，用于提供高性能游戏开发解决方案，特别适合需要处理大量数据的游戏，例如大型开放世界游戏。
     <br/>
     我们今天来讲一下，Dots框架中，Authoring类的创建和使用。
    </p>
    <ul>
     <li>
      Unity 2022.3.52f1
     </li>
     <li>
      Entities 1.3.10
     </li>
    </ul>
    <h3>
     <a id="_DOTS__7">
     </a>
     安装 DOTS 包
    </h3>
    <p>
     要安装 DOTS 包，请按照以下步骤操作：
    </p>
    <p>
     （1）从菜单“窗口 → 包管理器”打开包管理器。
     <br/>
     （2）搜索“ Entities” 并安装 Entities和Entities Graphics。
     <br/>
     （3）搜索“ Universal RP” 并安装 Universal RP，并设置Graphics/Scriptable Render Pipeline Settings。
    </p>
    <p>
     这会添加“实体”作为依赖项，并递归添加它所依赖的关联包（ Burst、Collections、Jobs、Mathematics等）。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2a076017e0c04b73a80fd45c8a7931c5.png"/>
    </p>
    <h3>
     <a id="Authoring_17">
     </a>
     什么是Authoring
    </h3>
    <p>
     Authoring 类通常用于定义和管理实体和组件的元数据以及如何进行编辑和创建。
     <br/>
     这一类主要的功能包括：
    </p>
    <p>
     1.实体和组件定义：Authoring 类可以用于声明或定义在游戏中使用的不同实体和组件。这使得开发者可以方便地创建和配置其对应的数据结构。
    </p>
    <p>
     2.编辑器集成：这些类通常与 Unity 编辑器相结合，使开发者可以在编辑模式下直观地创建和配置游戏实体。它们提供了可视化的工具，以便非程序员也可以参与设计游戏内容。
    </p>
    <p>
     3.数据管理：Authoring 类帮助管理数据的加载、保存和版本控制。它们可以帮助开发者组织复杂的数据结构，使得资源管理更加高效。
    </p>
    <p>
     4.转换为运行时组件：这些类通常还包括逻辑，将数据在编辑器中设置的状态转换为运行时可以使用的实体和组件。这一转化通常伴随着实体的创建和初始化过程。
    </p>
    <h3>
     <a id="1__29">
     </a>
     1. 实体组件
    </h3>
    <p>
     新建一个Rotator的ComponentData组件
    </p>
    <pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">Unity<span class="token punctuation">.</span>Entities</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">struct</span> <span class="token class-name">Rotator</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IComponentData</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> speed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="2_Authoring_39">
     </a>
     2. Authoring类
    </h3>
    <pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Unity<span class="token punctuation">.</span>Entities</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RotatorAuthoring</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> Speed<span class="token punctuation">;</span>

    <span class="token comment">//将 MonoBehaviour 的 RotatorAuthoring 组件数据（如 Speed）</span>
    <span class="token comment">//转换为 ECS 的 Rotator 组件数据（IComponentData）</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RotatorBaker</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Baker<span class="token punctuation">&lt;</span>RotatorAuthoring<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Bake</span><span class="token punctuation">(</span><span class="token class-name">RotatorAuthoring</span> authoring<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//通过Bake方式，把当前游戏对象转换为Entity</span>
            <span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token operator">=</span> <span class="token function">GetEntity</span><span class="token punctuation">(</span>TransformUsageFlags<span class="token punctuation">.</span>Dynamic<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//给Entity添加数据组件</span>
            <span class="token function">AddComponent</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rotator</span> <span class="token punctuation">{<!-- --></span> speed <span class="token operator">=</span> authoring<span class="token punctuation">.</span>Speed <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8c55f05e23014e1d833666b03cabd6c8.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71713536333132393538322f:61727469636c652f64657461696c732f313436313336303139" class_="artid" style="display:none">
 </p>
</div>


