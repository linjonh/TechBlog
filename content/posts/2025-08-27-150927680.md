---
layout: post
title: "Proxmox-VE-中启用-CentOS-虚拟机的串口终端xterm.js-控制台"
date: 2025-08-27T15:42:21+0800
description: "本教程适用于 CentOS 7 虚拟机，目标是启用 Proxmox 的 Shell 控制台（xterm.js），实现无需图形界面的复制粘贴功能。使用自带的noVNC没有粘贴复制功能，非常不方便，安装xterm.js就可以复制粘贴，也可以使用ssh终端连接，那也是一种办法。"
keywords: "Proxmox VE 中启用 CentOS 虚拟机的串口终端（xterm.js 控制台）"
categories: ['未分类']
tags: ['运维', 'Pve', 'Linux', 'Centos']
artid: "150927680"
arturl: "https://blog.csdn.net/qq_38634504/article/details/150927680"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=150927680
    alt: "Proxmox-VE-中启用-CentOS-虚拟机的串口终端xterm.js-控制台"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=150927680
featuredImagePreview: https://bing.ee123.net/img/rand?artid=150927680
cover: https://bing.ee123.net/img/rand?artid=150927680
image: https://bing.ee123.net/img/rand?artid=150927680
img: https://bing.ee123.net/img/rand?artid=150927680
---



# Proxmox VE 中启用 CentOS 虚拟机的串口终端（xterm.js 控制台）

## 在 Proxmox VE 中启用 CentOS 虚拟机的串口终端（xterm.js 控制台）

> 本教程适用于 CentOS 7 虚拟机，目标是启用 Proxmox 的 Shell 控制台（xterm.js），实现无需图形界面的复制粘贴功能。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/5a6c0132af7942ea8727f52b6be9a5ae.png)

### 🧩 前提条件

* 虚拟机已安装 CentOS 7.9
* Proxmox VE 主机已创建该虚拟机
* 虚拟机使用 LVM 或标准分区均可

### 1️⃣ 添加串口设备

在 Proxmox 主机上执行：

```bash
qm set <VMID> -serial0 socket

```

将 `<VMID>` 替换为你的虚拟机编号，例如 `101`

### 2️⃣ 修改 GRUB 配置（在centos里面修改）

编辑 `/etc/default/grub`：

```bash
vi /etc/default/grub

```

找到：

```bash
GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet"

```

修改为：

```bash
GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet console=tty0 console=ttyS0,115200"

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6603d5324010414d8755b4db3c2aebc8.png)

### 3️⃣ 生成新的 GRUB 配置文件

安装 GRUB 工具（如未安装）：

```bash
yum install grub2-tools -y

```

生成配置：

```bash
grub2-mkconfig -o /boot/grub2/grub.cfg

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/03967a14f9084381a6cf909ab27c6c27.png)

### 4️⃣重启虚拟机

```bash
reboot

```

### ✅ 验证效果

* 打开 Proxmox Web UI → 虚拟机 → Console → Shell（xterm.js）
* 如果是黑屏，按回车即可唤醒终端
* 现在可以在浏览器中复制粘贴命令，无需图形界面  
  ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ba9ca012a36442c88a483e9403efada2.png)

**

## 有bug有bug有bug：：：

**  
问题概述  
你在Proxmox的Web控制台（基于xterm.js）中使用vim编辑文件时，遇到以下异常行  
为：  
当光标在当前行右移时，该行的内容会突然变成上一行的文字  
不是传统意义上的乱码，而是终端渲染错乱  
已尝试设置TERM=xterm-256coLor和LANG=zh_CN.UTF-8，问题依旧  
使用tmux作为中间层也无法缓解该错乱现象  
技术分析  
说明  
可能原因  
在vim的复杂重绘场景下（如水平滚动），DOM渲染器可能误判  
xxterm.jsDoM渲染器兼容性差行缓存，导致错行  
×tmux版本问题  
某些版本（如2.6-2.7）在xterm.js中表现不稳定，可能动加剧错乱  
Xvimbuffer重绘频率高  
vim在水平滚动时频繁刷新当前行，终端无法正确同步  
xterm.js的canvas渲染器在处理复杂布局时更稳定，但Proxmox  
canvas渲染器未启用

没解决，不折腾了，用SSH（mobaxterm了）



