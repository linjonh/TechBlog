---
layout: post
title: "大数据学习62-Hadoop-yarn"
date: 2025-03-12 17:41:44 +0800
description: "1. YARN简介Hadoop-YARN是Apache Hadoop生态系统中的一个集群资源管理器。它作为Hadoop的第二代资源管理框架，负责管理和分配集群中的计算资源。YARN的设计目标是提供一个通用的资源管理框架，使得Hadoop集群可以同时运行多个计算框架，如等。通过将集群资源和计算任务分离，YARN实现了更高的资源利用率和更好的集群资源管理。2. YARN架构Hadoop-YARN的架构包括以下组件：(1) ResourceManager（资源管理器）"
keywords: "大数据学习（62）- Hadoop-yarn"
categories: ['未分类']
tags: ['大数据', 'Yarn']
artid: "146207045"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146207045
    alt: "大数据学习62-Hadoop-yarn"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146207045
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146207045
cover: https://bing.ee123.net/img/rand?artid=146207045
image: https://bing.ee123.net/img/rand?artid=146207045
img: https://bing.ee123.net/img/rand?artid=146207045
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     大数据学习（62）- Hadoop-yarn
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h6 id="%26%26%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0%26%26" name="%26%26%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0%26%26">
     &amp;&amp;大数据学习&amp;&amp;
    </h6>
    <h6 id="%F0%9F%94%A5%E7%B3%BB%E5%88%97%E4%B8%93%E6%A0%8F%EF%BC%9A%20%F0%9F%91%91%E5%93%B2%E5%AD%A6%E8%AF%AD%E5%BD%95%3A%20%E6%89%BF%E8%AE%A4%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A0%E7%9F%A5%EF%BC%8C%E4%B9%83%E6%98%AF%E5%BC%80%E5%90%AF%E6%99%BA%E6%85%A7%E7%9A%84%E5%A4%A7%E9%97%A8%F0%9F%92%96%E5%A6%82%E6%9E%9C%E8%A7%89%E5%BE%97%E5%8D%9A%E4%B8%BB%E7%9A%84%E6%96%87%E7%AB%A0%E8%BF%98%E4%B8%8D%E9%94%99%E7%9A%84%E8%AF%9D%EF%BC%8C%E8%AF%B7%E7%82%B9%E8%B5%9E%F0%9F%91%8D%2B%E6%94%B6%E8%97%8F%E2%AD%90%EF%B8%8F%2B%E7%95%99%E8%A8%80%F0%9F%93%9D%E6%94%AF%E6%8C%81%E4%B8%80%E4%B8%8B%E5%8D%9A%E4%B8%BB%E5%93%A6%F0%9F%A4%9E" name="%F0%9F%94%A5%E7%B3%BB%E5%88%97%E4%B8%93%E6%A0%8F%EF%BC%9A%20%F0%9F%91%91%E5%93%B2%E5%AD%A6%E8%AF%AD%E5%BD%95%3A%20%E6%89%BF%E8%AE%A4%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A0%E7%9F%A5%EF%BC%8C%E4%B9%83%E6%98%AF%E5%BC%80%E5%90%AF%E6%99%BA%E6%85%A7%E7%9A%84%E5%A4%A7%E9%97%A8%F0%9F%92%96%E5%A6%82%E6%9E%9C%E8%A7%89%E5%BE%97%E5%8D%9A%E4%B8%BB%E7%9A%84%E6%96%87%E7%AB%A0%E8%BF%98%E4%B8%8D%E9%94%99%E7%9A%84%E8%AF%9D%EF%BC%8C%E8%AF%B7%E7%82%B9%E8%B5%9E%F0%9F%91%8D%2B%E6%94%B6%E8%97%8F%E2%AD%90%EF%B8%8F%2B%E7%95%99%E8%A8%80%F0%9F%93%9D%E6%94%AF%E6%8C%81%E4%B8%80%E4%B8%8B%E5%8D%9A%E4%B8%BB%E5%93%A6%F0%9F%A4%9E">
     <a name="t1">
     </a>
     🔥系列专栏： 👑哲学语录: 承认自己的无知，乃是开启智慧的大门
     <br/>
     💖如果觉得博主的文章还不错的话，请点赞👍+收藏⭐️+留言📝支持一下博主哦🤞
    </h6>
    <hr/>
    <h3>
     一、YARN概述
    </h3>
    <p>
     <br/>
     <strong>
      1. YARN简介
     </strong>
     <br/>
     Hadoop-YARN是Apache Hadoop生态系统中的一个集群资源管理器。它作为Hadoop的第二代资源管理框架，负责管理和分配集群中的计算资源。YARN的设计目标是提供一个通用的资源管理框架，使得Hadoop集群可以同时运行多个计算框架，如
     <strong>
      MapReduce、Apache Spark、Apache Flink
     </strong>
     等。通过将集群资源和计算任务分离，YARN实现了更高的资源利用率和更好的集群资源管理。
    </p>
    <p>
     <img alt="" height="348" src="https://i-blog.csdnimg.cn/direct/4ac8e9561cde44f29ec189d1c028c963.png" width="625"/>
    </p>
    <p>
     <strong>
      2. YARN架构
     </strong>
     <br/>
     Hadoop-YARN的架构包括以下组件：
    </p>
    <p>
     (1) ResourceManager（资源管理器）
     <br/>
     ResourceManager是YARN集群的主要组件，负责整个集群的资源管理和分配。它有两个关键角色：调度器（Scheduler）和应用程序管理器（ApplicationManager）。
    </p>
    <p>
     调度器负责将集群中的资源分配给不同的应用程序。它根据资源请求、优先级和调度策略来决定如何分配资源。调度器可以使用不同的调度算法，如容量调度器（Capacity Scheduler）或公平调度器（Fair Scheduler）。
    </p>
    <p>
     应用程序管理器负责接收来自客户端的作业提交请求，并与调度器协商资源。一旦应用程序被接受，应用程序管理器会为该应用程序分配一个ApplicationMaster。
    </p>
    <p>
     (2) NodeManager（节点管理器）
     <br/>
     NodeManager是每个集群节点上的代理，负责管理该节点上的资源。它接收来自ResourceManager的指令，并执行以下任务：
    </p>
    <p>
     启动和监控容器（Container）：容器是YARN中的一个抽象概念，它是一组资源（如内存、CPU等）的封装。NodeManager根据ResourceManager的指令启动和监控容器，为应用程序提供所需的资源。
    </p>
    <p>
     报告节点的资源使用情况：
     <strong>
      NodeManager定期向ResourceManager报告节点的资源使用情况，包括可用资源和已使用资源。
     </strong>
    </p>
    <p>
     (3)
     <strong>
      ApplicationMaster（应用程序管理器）
     </strong>
     <br/>
     <span style="color:#be191c">
      <strong>
       每个应用程序在YARN中都有一个ApplicationMaster，它负责与ResourceManager协商资源，并与NodeManager一起管理应用程序的执行。
      </strong>
     </span>
    </p>
    <p>
     向ResourceManager请求资源：
     <span style="color:#be191c">
      ApplicationMaster根据应用程序的需求向ResourceManager请求资源
     </span>
     。它可以动态地请求和释放资源，根据应用程序的需求进行灵活的资源调整。
    </p>
    <p>
     与NodeManager协调任务执行：一旦资源被分配给应用程序，ApplicationMaster与NodeManager协调任务的执行。它可以启动、监控和管理任务容器，并与NodeManager通信以获取任务的执行状态。
    </p>
    <p>
     <strong>
      3. YARN特点
     </strong>
     <br/>
     Hadoop-YARN具有以下特点：
    </p>
    <p>
     (1) 分布式资源管理
     <br/>
     YARN提供了分布式资源管理的能力，可以有效地管理和分配集群中的计算资源。它将集群资源（如内存、CPU等）与计算任务（如MapReduce作业）分离，实现了更高的资源利用率和更好的集群资源管理。
    </p>
    <p>
     (2) 多框架支持
     <br/>
     YARN设计为通用的资源管理框架，可以同时运行多个计算框架，如MapReduce、Apache Spark、Apache Flink等。这意味着在同一个集群上可以运行不同的计算框架，根据不同的需求选择最适合的框架进行数据处理和分析。
    </p>
    <p>
     (3) 灵活的资源调度
     <br/>
     YARN提供了灵活的资源调度机制，可以根据应用程序的需求动态分配和调整资源。它支持不同的调度算法，如
     <span style="color:#be191c">
      <strong>
       容量调度器（Capacity Scheduler）和公平调度器（Fair Scheduler）
      </strong>
     </span>
     ，可以根据优先级、资源请求和调度策略来决定资源的分配。
    </p>
    <p>
     (4) 高可靠性和容错性
     <br/>
     YARN具有高可靠性和容错性的特点。它通过监控和管理应用程序的执行，可以检测和处理节点故障、任务失败等情况。当节点或任务发生故障时，YARN可以自动重新分配资源和重新执行任务，确保作业的完成和数据的一致性。
    </p>
    <p>
     (5) 可扩展性
     <br/>
     YARN的设计目标之一是可扩展性，它可以适应不断增长的数据规模和计算需求。通过添加更多的节点和资源，YARN可以扩展到大规模的集群，处理更多的数据和作业。
    </p>
    <p>
     (6) 安全性
     <br/>
     YARN提供了安全性机制，可以保护集群中的数据和应用程序免受未经授权的访问和恶意操作。它支持身份验证、授权和审计等安全功能，确保集群的安全性和数据的保护。
    </p>
    <h3>
     二、YARN的核心思想
    </h3>
    <p>
     <br/>
     YARN的核心思想是将资源管理和作业调度从特定的计算框架（如MapReduce）中分离出来使其成为单独的
     <span style="color:#be191c">
      <strong>
       守护进程
      </strong>
     </span>
     ，使得Hadoop集群能够更通用地支持多种类型的应用程序和工作负载。
     <br/>
     这个想法是拥有一个全局的
     <span style="color:#be191c">
      ResourceManager ( RM )
     </span>
     和
     <span style="color:#be191c">
      <strong>
       每个应用程序
      </strong>
      的
      <strong>
       ApplicationMaster ( AM )
      </strong>
     </span>
     。应用程序可以是单个作业，也可以是作业的 DAG。ResourceManager 和 NodeManager 构成了数据计算框架。
     <span style="color:#be191c">
      ResourceManager是系统中所有应用程序之间资源仲裁的最终权威。
     </span>
     <span style="color:#be191c">
      <strong>
       NodeManager
      </strong>
     </span>
     是每台机器的框架代理，负责容器、监视其资源使用情况（CPU、内存、磁盘、网络）并将其报告给
     <strong>
      <span style="color:#be191c">
       ResourceManager/Scheduler
      </span>
     </strong>
     。
     <strong>
      每个应用程序的 ApplicationMaster 实际上是一个特定于框架的库，其任务是与 ResourceManager 协商资源并与 NodeManager 一起执行和监视任务。
     </strong>
     （
     <span style="color:#be191c">
      ApplicationMaster 是由应用程序框架（如 MapReduce、Spark、Impala 等）提供的。每个框架都会根据自己的需求和特点来实现 ApplicationMaster。这也意味着，不同的应用程序框架会有不同的 ApplicationMaster 实现，它们负责处理与框架相关的特定逻辑。
     </span>
     ）
    </p>
    <p>
     为了将 YARN 扩展至数千个节点以上，YARN通过YARN Federation功能支持联合概念。联合允许透明地将多个纱线（子）集群连接在一起，并使它们显示为单个大型集群。这可用于实现更大的规模，和/或允许多个独立集群一起用于非常大的作业，或用于具有跨所有集群的容量的租户。
    </p>
    <p>
     <span style="color:#be191c">
      <strong>
       （YARN Federation通过逻辑统一资源池、智能请求路由、全局资源调度等机制，显著提高了大型Hadoop集群的资源管理和调度能力。）
      </strong>
     </span>
    </p>
    <p>
     在 YARN 上运行的应用程序
    </p>
    <p>
     <img alt="" height="563" src="https://i-blog.csdnimg.cn/direct/b1b47bf35e3c47569ab2721d92c1256d.png" width="1009"/>
    </p>
    <h3>
     三、yarn的适配程序
    </h3>
    <p>
     1.批处理应用程序：
     <br/>
     批处理作业是Hadoop最常见的用例之一，它们通常涉及对大规模数据集进行分析和处理。使用YARN，批处理作业可以通过MapReduce框架或其他批处理引擎（如Apache Spark、Apache Flink等）来运行。
     <br/>
     2.
     <strong>
      交互式查询
     </strong>
     ：
     <br/>
     交互式查询通常用于对数据进行即席查询和分析。
     <span style="color:#be191c">
      <strong>
       通过YARN，可以在集群上运行诸如Apache Hive、Apache Impala、Apache Drill等交互式查询引擎，这些引擎能够实时响应用户的查询请求。
      </strong>
     </span>
     <br/>
     3.
     <span style="color:#fe2c24">
      <strong>
       流处理应用程序：
      </strong>
     </span>
     <br/>
     <strong>
      流处理应用程序用于对实时数据流进行处理和分析。通过YARN，可以在集群上运行流处理引擎，如Apache Storm、Apache Flink、Apache Kafka Streams等，以实时处理数据流并生成相应的输出。
     </strong>
     <br/>
     4.机器学习和数据挖掘：
     <br/>
     YARN也可以支持运行机器学习和数据挖掘算法。例如，可以使用Apache Spark的机器学习库（MLlib）或Apache Flink的机器学习库来在集群上训练和部署机器学习模型。
     <br/>
     5.图计算：
     <br/>
     图计算应用程序用于在图结构数据上执行复杂的分析和计算。通过YARN，可以在集群上运行图计算引擎，如Apache Giraph、Apache Spark GraphX等，来处理大规模的图数据。
     <br/>
     6.其他类型的应用程序：
     <br/>
     此外，
     <strong>
      YARN还可以支持各种其他类型的应用程序，包括ETL（Extract-Transform-Load）作业、数据流处理、实时分析等。
     </strong>
     YARN的通用性和灵活性使得它能够满足不同类型应用程序的运行需求。
    </p>
    <h3>
     <br/>
     四、应用程序如何在 YARN 上运行？
    </h3>
    <p>
     <img alt="" height="416" src="https://i-blog.csdnimg.cn/direct/f17939df8530424795769dd13bd102cb.png" width="595"/>
    </p>
    <h4>
     1、应用程序提交
    </h4>
    <ul>
     <li>
      <strong>
       提交信息
      </strong>
      ：用户通过YARN客户端提交应用程序时，确实需要指定应用程序的资源需求、启动命令、应用程序类型等信息。这些信息通常以配置文件或命令行参数的形式提供。
     </li>
     <li>
      <strong>
       启动命令
      </strong>
      ：对于Java应用程序，启动命令通常会包括指定应用程序的jar包、主类名以及任何必要的命令行参数。对于其他类型的应用程序（如Python脚本、Shell脚本等），启动命令也会有相应的调整。
     </li>
    </ul>
    <h4>
     2、ResourceManager分配资源
    </h4>
    <ul>
     <li>
      <strong>
       资源需求
      </strong>
      ：ResourceManager在分配资源时，会考虑应用程序的资源需求以及集群中的资源情况。资源需求通常包括CPU、内存、磁盘空间等。
     </li>
     <li>
      <strong>
       资源分配策略
      </strong>
      ：ResourceManager会根据配置的调度策略（如FIFO、Capacity Scheduler、Fair Scheduler等）来分配资源。这些策略决定了资源的分配方式和优先级。
     </li>
    </ul>
    <h4>
     3、NodeManager启动容器
    </h4>
    <ul>
     <li>
      <strong>
       容器启动
      </strong>
      ：一旦ResourceManager完成资源分配，它会通知相应的NodeManager启动容器。容器是YARN中的基本执行单位，它封装了运行应用程序所需的计算资源、环境变量等信息。
     </li>
     <li>
      <strong>
       资源隔离
      </strong>
      ：NodeManager通过资源隔离机制（如cgroups）确保容器内的任务不会互相干扰，并且每个容器都只能访问其分配到的资源。
     </li>
    </ul>
    <h4>
     4、应用程序启动
    </h4>
    <ul>
     <li>
      <strong>
       启动命令执行
      </strong>
      ：在容器启动完成后，NodeManager会执行应用程序的启动命令。这可能涉及启动应用程序的主进程，例如执行Java的main()方法、运行Python脚本或Shell脚本等。
     </li>
    </ul>
    <h4>
     4、ApplicationMaster启动
    </h4>
    <ul>
     <li>
      <strong>
       ApplicationMaster角色
      </strong>
      ：ApplicationMaster是一个特殊的组件，它负责与ResourceManager通信，协商资源、监控作业进度，并向ResourceManager请求更多资源或报告作业完成情况。
     </li>
     <li>
      <strong>
       启动与监控
      </strong>
      ：ApplicationMaster运行在集群中的一个容器中，并由ResourceManager负责启动和监控。一旦ApplicationMaster启动，它就会开始与ResourceManager进行交互，以确保应用程序能够顺利执行。
     </li>
    </ul>
    <h4>
     5、作业执行
    </h4>
    <ul>
     <li>
      <strong>
       执行过程
      </strong>
      ：一旦ApplicationMaster启动，应用程序就可以开始在容器中执行。根据应用程序的类型和逻辑，它可能会涉及到数据的读取、处理、计算以及生成结果等过程。
     </li>
     <li>
      <strong>
       任务调度
      </strong>
      ：ApplicationMaster会根据应用程序的需求和集群中的资源情况，调度任务在相应的容器上执行。
     </li>
    </ul>
    <h4>
     6、作业完成
    </h4>
    <ul>
     <li>
      <strong>
       完成报告
      </strong>
      ：一旦应用程序执行完成，ApplicationMaster会向ResourceManager报告作业完成情况，并请求释放所占用的资源。
     </li>
     <li>
      <strong>
       资源释放
      </strong>
      ：ResourceManager会相应地释放容器所占用的资源，并通知NodeManager停止相应的容器。至此，应用程序的执行过程结束，集群资源被释放，可以被其他应用程序使用。
     </li>
    </ul>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36313030363236322f:61727469636c652f64657461696c732f313436323037303435" class_="artid" style="display:none">
 </p>
</div>


