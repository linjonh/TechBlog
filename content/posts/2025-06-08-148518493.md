---
layout: post
title: "-Windows-ä¸‹-Kafka-å®‰è£…æ•™ç¨‹ä¿å§†çº§"
date: 2025-06-08T21:40:25+0800
description: "Kafka æ˜¯åŸºäº Java çš„ï¼Œå¿…é¡»å…ˆå®‰è£… JDKã€‚ä¸€èˆ¬å­¦åˆ°kafkaçš„åŒå­¦è‚¯å®šå·²ç»å®‰è£…å¥½äº†JDKäº†ï¼Œè¿™ä¸€æ­¥æˆ‘å°±ä¸å†™äº†ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå…¶ä»–æ–‡ç« ã€‚âš ï¸ ä¸è¦ç›´æ¥å…³é—­ CMD çª—å£ä¹Ÿä¸è¦ctrl + cï¼Œéƒ½æ˜¯å¼ºåˆ¶å…³æœºï¼è™½ç„¶ Kafka æ˜¯ä¸º Linux è®¾è®¡çš„ï¼Œä½†å®˜æ–¹æä¾›äº†éƒ¨åˆ† Windows å…¼å®¹è„šæœ¬ï¼ˆä½äºã€‚ç¬¬ä¸€æ­¥ï¼šä¸€å®šè¦éœ€è¦å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹kafka-logsåœ¨binã€configåŒçº§ï¼è¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯å­˜æ”¾åˆ†åŒºçš„offersetï¼Œå…ƒæ–‡ä»¶ï¼Œè®°å½•æ¶ˆè´¹åˆ°å“ªé‡Œç­‰ç­‰ã€‚ä¸€å®šè¦ä½¿ç”¨å®˜æ–¹çš„å¯åŠ¨å’Œå…³é—­è„šæœ¬ï¼"
keywords: "windowså®‰è£…kafka"
categories: ['æœªåˆ†ç±»']
tags: ['åˆ†å¸ƒå¼', 'Windows', 'Kafka']
artid: "148518493"
arturl: "https://blog.csdn.net/KeyandL/article/details/148518493"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=148518493
    alt: "-Windows-ä¸‹-Kafka-å®‰è£…æ•™ç¨‹ä¿å§†çº§"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=148518493
featuredImagePreview: https://bing.ee123.net/img/rand?artid=148518493
cover: https://bing.ee123.net/img/rand?artid=148518493
image: https://bing.ee123.net/img/rand?artid=148518493
img: https://bing.ee123.net/img/rand?artid=148518493
---



# Windows ä¸‹ Kafka å®‰è£…æ•™ç¨‹ï¼ˆä¿å§†çº§ï¼‰

æœ¬æ–‡ç« å·²ç»ç”Ÿæˆå¯è¿è¡Œé¡¹ç›®ï¼Œä¸€é”®è¿è¡Œ

### ä¸€ã€å‡†å¤‡å·¥ä½œ

#### âœ… 1. å®‰è£… Java JDKï¼ˆKafka ä¾èµ– Java è¿è¡Œç¯å¢ƒï¼‰

Kafka æ˜¯åŸºäº Java çš„ï¼Œå¿…é¡»å…ˆå®‰è£… JDKã€‚ä¸€èˆ¬å­¦åˆ°kafkaçš„åŒå­¦è‚¯å®šå·²ç»å®‰è£…å¥½äº†JDKäº†ï¼Œè¿™ä¸€æ­¥æˆ‘å°±ä¸å†™äº†ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå…¶ä»–æ–‡ç« ã€‚

âš ï¸ æ³¨æ„ï¼šKafka 3.9.0 è¦æ±‚æœ¬åœ°å¿…é¡»å®‰è£… JDK 17 æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚JDK 8 å’Œ 11 å·²ä¸å†è¢«å®˜æ–¹æ”¯æŒã€‚

##### æ­¥éª¤ï¼š

1. è®¿é—®å®˜ç½‘ä¸‹è½½ [OpenJDK](https://adoptium.net/ "OpenJDK") æˆ– Oracle JDKã€‚
2. æ¨èç‰ˆæœ¬ï¼šJDK 8 ~ JDK 17ï¼ˆKafka 3.x æ”¯æŒåˆ° JDK 17ï¼‰

   ![](https://i-blog.csdnimg.cn/direct/a4fc229519524deba1995b24f6c6eb53.png)
3. å®‰è£…å®Œæˆåè®¾ç½®ç¯å¢ƒå˜é‡ï¼š

   * `JAVA_HOME`ï¼šæŒ‡å‘ JDK å®‰è£…ç›®å½•ï¼Œä¾‹å¦‚ `C:\Program Files\Java\jdk-17.0.1`
   * `Path` ä¸­æ·»åŠ  `%JAVA_HOME%\bin`

##### éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```
java -version
javac -version
```

![](https://i-blog.csdnimg.cn/direct/b1da93c4349f40c7af7c8cdca7204828.png)

---

### äºŒã€ä¸‹è½½ Kafka

è®¿é—® Apache Kafka å®˜ç½‘ä¸‹è½½é¡µé¢ï¼š

ğŸ”— [https://kafka.apache.org/downloads](https://kafka.apache.org/downloads "https://kafka.apache.org/downloads")

é€‰æ‹©æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š

![](https://i-blog.csdnimg.cn/direct/c36284b3c6f04772949c492a94223dfa.png)

```
Latest release: kafka_2.13-3.9.0.tgz
```

**Windows ç”¨æˆ·é€‰æ‹© `kafka_2.13-3.9.0.tgz` å³å¯ï¼ŒScala ç‰ˆæœ¬ä¸å½±å“ä½ åœ¨ Windows ä¸Šè¿è¡Œ Kafkaã€‚é™¤éä½ è‡ªå·±ç”¨ Scala ç¼–å†™å®¢æˆ·ç«¯ç¨‹åºï¼Œå¦åˆ™ä»»æ„ç‰ˆæœ¬éƒ½å¯ä»¥ã€‚ç¤¾åŒºæ¨èä½¿ç”¨ 2.13ï¼Œå› æ­¤å»ºè®®ä½ å°±é€‰è¿™ä¸ªç‰ˆæœ¬ã€‚**

> âœ… æ³¨æ„ï¼šWindows ä¸Šä½¿ç”¨çš„æ˜¯ Kafka è‡ªå¸¦çš„ `windows` è„šæœ¬ï¼Œä¸éœ€è¦ Linux å·¥å…·æ”¯æŒã€‚

---

### ä¸‰ã€è§£å‹ Kafka

è™½ç„¶ Kafka æ˜¯ä¸º Linux è®¾è®¡çš„ï¼Œä½†å®˜æ–¹æä¾›äº†éƒ¨åˆ† Windows å…¼å®¹è„šæœ¬ï¼ˆä½äº `bin/windows/` ç›®å½•ä¸‹ï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ”¾å¿ƒåœ°ï¼š

* ä½¿ç”¨Â `zookeeper-server-start.bat`
* ä½¿ç”¨Â `kafka-server-start.bat`
* åˆ›å»º Topicã€å‘é€å’Œæ¶ˆè´¹æ¶ˆæ¯ç­‰æ“ä½œéƒ½æ­£å¸¸è¿è¡Œ

åªæ˜¯è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

| æ³¨æ„äº‹é¡¹ | è¯´æ˜ |
| --- | --- |
| è·¯å¾„**ä¸è¦æœ‰ç©ºæ ¼æˆ–ä¸­æ–‡** | æ¨èå®‰è£…è·¯å¾„å¦‚Â `F:\kafka_2.13-3.9.0` |
| æ—¥å¿—æ–‡ä»¶ä½ç½® | é»˜è®¤åœ¨Â `logs/`Â ç›®å½•ä¸‹ |
| æ€§èƒ½ç•¥å·®äº Linux | æœ¬åœ°å¼€å‘æ²¡é—®é¢˜ï¼Œç”Ÿäº§å»ºè®®ç”¨ Linux |
| ä¸æ”¯æŒæŸäº›é«˜çº§åŠŸèƒ½ | å¦‚Â `log.dirs`Â ä¸­ä½¿ç”¨å¤šä¸ªç£ç›˜è·¯å¾„ï¼ˆWindows ä¸‹å¯èƒ½å‡ºé”™ï¼‰ |

#### Kafkaé…ç½®ï¼ˆkafka-logsçš„æ–°å»ºå¿…è¦ï¼ï¼ï¼‰

è¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯å­˜æ”¾åˆ†åŒºçš„offersetï¼Œå…ƒæ–‡ä»¶ï¼Œè®°å½•æ¶ˆè´¹åˆ°å“ªé‡Œç­‰ç­‰ã€‚

| ç±»å‹ | å­˜æ”¾å†…å®¹ |
| --- | --- |
| Topic æ•°æ® | æ¯ä¸ª Topic çš„åˆ†åŒºæ•°æ®éƒ½å­˜åœ¨è¿™é‡Œ |
| Offset ä¿¡æ¯ | è®°å½•æ¶ˆè´¹è€…ç»„æ¶ˆè´¹åˆ°çš„ä½ç½® |
| å…ƒæ•°æ® | åˆ†åŒºçŠ¶æ€ã€ISRï¼ˆIn-Sync Replicasï¼‰ç­‰ |
| æ—¥å¿—æ–‡ä»¶ | controller.logã€kafka-request.log ç­‰ |

ç¬¬ä¸€æ­¥ï¼šä¸€å®šè¦éœ€è¦å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹kafka-logsåœ¨binã€configåŒçº§ï¼ï¼

```
F:\kafka_2.13-3.9.0\
â”œâ”€â”€ bin/
â”œâ”€â”€ config/
â”œâ”€â”€ logs/
â””â”€â”€ kafka-logs/    â† æ–°å»ºè¿™ä¸ªæ–‡ä»¶å¤¹
```

![](https://i-blog.csdnimg.cn/direct/cc0a4784348f4d82ad1c560822d3f9e3.png)

ç¬¬äºŒæ­¥ï¼šç¼–è¾‘\kafka_2.13-3.9.0\configä¸‹çš„server.propertiesæ–‡ä»¶

```
log.dirs=/kafka-logs
```

é™¤äº† `log.dirs`ï¼Œè¿˜æœ‰å‡ ä¸ªå¸¸ç”¨é…ç½®é¡¹ä¹Ÿå»ºè®®äº†è§£ä¸€ä¸‹ï¼Œå…¶ä»–æ”¹ä¸æ”¹ä¸å½±å“åŸºæœ¬ä½¿ç”¨ï¼š

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- |
| `broker.id` | 0 | Kafka å®ä¾‹çš„å”¯ä¸€ IDï¼Œå•æœºç‰ˆä¿æŒé»˜è®¤å³å¯ |
| `listeners` | PLAINTEXT://:9092 | Kafka ç›‘å¬åœ°å€ï¼Œé»˜è®¤æœ¬åœ°è®¿é—® |
| `num.partitions` | 1 | é»˜è®¤æ¯ä¸ª topic åˆ›å»ºçš„åˆ†åŒºæ•° |
| `log.retention.hours` | 168 (7å¤©) | æ¶ˆæ¯ä¿ç•™æ—¶é—´ |
| `log.segment.bytes` | 1GB | å•ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°ä¸Šé™ |
| `message.max.bytes` | 1MB | æœ€å¤§æ¶ˆæ¯ä½“å¤§å°ï¼ˆç”Ÿäº§ç¯å¢ƒå¯è°ƒå¤§ï¼‰ |

#### å®Œæ•´é…ç½®æ ·ä¾‹ï¼ˆé€‚åˆ Windows å•èŠ‚ç‚¹å¼€å‘ï¼Œä¸å¿…è¦ï¼Œé»˜è®¤ä¹Ÿå¯ï¼‰

```
broker.id=0
listeners=PLAINTEXT://:9092
advertised.listeners=PLAINTEXT://localhost:9092
log.dirs=F:/kafka_2.13-3.9.0/kafka-logs
num.partitions=1
log.retention.hours=168
log.segment.bytes=1073741824
message.max.bytes=10485880
replica.lag.time.ms=10000
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1
```

### å››ã€å¯åŠ¨ Kafkaä¸å…³é—­Kafkaï¼ˆæ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦æ‰“å¼€å¤šçª—å£æ‰§è¡Œï¼‰

#### âœ… 1. å¯åŠ¨ ZooKeeper

Kafka ä¾èµ– ZooKeeper å­˜å‚¨å…ƒæ•°æ®ä¿¡æ¯ã€‚

æ‰“å¼€ CMDï¼Œè¿›å…¥ Kafka ç›®å½•ï¼š

```
cd F:\kafka_2.13-3.9.0
```

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ ZooKeeperï¼š

```
.\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties
```

âœ… æˆåŠŸæ ‡å¿—ï¼šçœ‹åˆ°ç±»ä¼¼ `INFO ... Starting zookeeper version...` çš„æ—¥å¿—è¾“å‡ºã€‚

---

#### âœ… 2. å¯åŠ¨ Kafka

ä¿æŒä¸Šä¸€ä¸ªçª—å£ä¸è¦å…³é—­ï¼Œ**å†æ‰“å¼€ä¸€ä¸ªæ–°çš„ CMD çª—å£**ï¼ŒåŒæ ·è¿›å…¥ Kafka ç›®å½•ï¼š

æ‰§è¡Œï¼š

```
.\bin\windows\kafka-server-start.bat .\config\server.properties
```

âœ… æˆåŠŸæ ‡å¿—ï¼šçœ‹åˆ° `INFO [KafkaServer id=0] started (kafka.server.KafkaServer)`

![](https://i-blog.csdnimg.cn/direct/b7365692676f4492b5890423ef5ad042.png)


---

#### âœ… æ­¥éª¤ 3ï¼šå…³é—­ Kafka

è¿›å…¥ Kafka ç›®å½•ï¼š

```
.\bin\windows\kafka-server-stop.bat
```

ä½ ä¼šçœ‹åˆ° Kafka å¼€å§‹å®‰å…¨é€€å‡ºï¼Œç­‰å¾…å‡ ç§’åè‡ªåŠ¨ç»“æŸã€‚

---

#### âœ… æ­¥éª¤ 4ï¼šå…³é—­ ZooKeeper

ç»§ç»­åœ¨å½“å‰ CMD çª—å£ä¸­æ‰§è¡Œï¼š

```
.\bin\windows\zookeeper-server-stop.bat
```

ZooKeeper ä¹Ÿä¼šä¼˜é›…é€€å‡ºã€‚

### äº”ã€åˆ›å»º Topic

æ–°æ‰“å¼€ä¸€ä¸ª CMD çª—å£ï¼Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„ Topicï¼š

```
.\bin\windows\kafka-topics.bat --create --topic test-topic --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1
```

å‚æ•°è¯´æ˜ï¼š

* `--topic`ï¼šTopic åç§°
* `--partitions`ï¼šåˆ†åŒºæ•°
* `--replication-factor`ï¼šå‰¯æœ¬æ•°ï¼ˆæœ¬åœ°å¼€å‘è®¾ä¸º 1 å³å¯ï¼‰

æŸ¥çœ‹å·²åˆ›å»ºçš„ Topicï¼š

```
.\bin\windows\kafka-topics.bat --list --bootstrap-server localhost:9092
```

---

### å…­ã€å‘é€æ¶ˆæ¯ï¼ˆProducerï¼‰

æ‰“å¼€ä¸€ä¸ªæ–° CMD çª—å£ï¼Œè¿è¡Œç”Ÿäº§è€…æ§åˆ¶å°ï¼š

```
.\bin\windows\kafka-console-producer.bat --topic test-topic --bootstrap-server localhost:9092
```

è¾“å…¥ä»»æ„æ–‡å­—åæŒ‰å›è½¦å³å¯å‘é€æ¶ˆæ¯ï¼Œæ¯”å¦‚ï¼š

```
Hello Kafka!
This is a test message.
```

---

### ä¸ƒã€æ¶ˆè´¹æ¶ˆæ¯ï¼ˆConsumerï¼‰

å†æ–°å¼€ä¸€ä¸ª CMD çª—å£ï¼Œè¿è¡Œæ¶ˆè´¹è€…æ§åˆ¶å°ï¼š

```
.\bin\windows\kafka-console-consumer.bat --topic test-topic --from-beginning --bootstrap-server localhost:9092
```

ä½ ä¼šçœ‹åˆ°åˆšåˆšå‘é€çš„æ¶ˆæ¯è¢«æ‰“å°å‡ºæ¥ï¼

---

### å…«ã€**Windows ä¸‹å¦‚ä½•æ­£ç¡®å¯åŠ¨å’Œå…³é—­ Kafkaï¼Ÿ**

**âš ï¸ ä¸è¦ç›´æ¥å…³é—­ CMD çª—å£ä¹Ÿä¸è¦ctrl + cï¼Œéƒ½æ˜¯å¼ºåˆ¶å…³æœºï¼å†æ¬¡å¯åŠ¨å¯èƒ½ä¼šæœ‰å¾ˆå¤šbugï¼**

**ä¸€å®šè¦ä½¿ç”¨å®˜æ–¹çš„å¯åŠ¨å’Œå…³é—­è„šæœ¬ï¼ï¼ï¼bugè¡€æ³ªï¼**

å› ä¸ºï¼š

* `Ctrl + C`Â æ˜¯å‘é€Â `SIGINT`Â ä¿¡å·ï¼ŒKafka å’Œ ZooKeeper ä¼šå°è¯•ä¼˜é›…å…³é—­ï¼Œä½†**ä¸ä¸€å®šèƒ½å®Œæˆå…¨éƒ¨æ¸…ç†å·¥ä½œ**
* å¦‚æœç”¨æˆ·è¯¯æ“ä½œã€çª—å£è¢«æ„å¤–å…³é—­ã€æˆ–è„šæœ¬ä¸­æ–­ï¼Œä¼šå¯¼è‡´ï¼š

  + `.lock`Â æ–‡ä»¶æ®‹ç•™
  + `controller.log`Â é‡å‘½åå¤±è´¥
  + ZooKeeper èŠ‚ç‚¹æœªæ¸…é™¤
  + Kafka Broker çŠ¶æ€æœªæ›´æ–°

---

### ä¹ã€æ¨èè„šæœ¬ï¼ˆè‡ªåŠ¨åŒ–å¯åœï¼‰

ä¸ºäº†æ–¹ä¾¿ä½ ä»¥åå¿«é€Ÿæ“ä½œï¼Œæˆ‘ä¸ºä½ å†™å¥½äº†ä¸¤ä¸ªæ‰¹å¤„ç†è„šæœ¬ï¼š

**æ”¾åœ¨åŒçº§ç›®å½•ä¸‹å³å¯ï¼**

![](https://i-blog.csdnimg.cn/direct/c49b688d70cd4defb3b76b8a17e2036e.png)

---

#### âœ… å¯åŠ¨è„šæœ¬ï¼š`start-kafka.bat`

```
@echo off
chcp 65001 > nul
TITLE Kafka å¯åŠ¨å™¨ - kafka_2.13-3.9.0
â€‹
SETLOCAL
â€‹
set KAFKA_HOME=F:\kafka_2.13-3.9.0
â€‹
if not exist "%KAFKA_HOME%" (
 Â  Â echo âŒ é”™è¯¯ï¼šKAFKA_HOME è·¯å¾„ä¸å­˜åœ¨: %KAFKA_HOME%
 Â  Â pause
 Â  Â exit /b 1
)
â€‹
cd /d %KAFKA_HOME%
â€‹
:: æ¸…ç†é”æ–‡ä»¶ï¼ˆé˜²æ­¢ä¸Šæ¬¡å¼‚å¸¸é€€å‡ºå¯¼è‡´å†²çªï¼‰
if exist "logs\*.lock" del /Q "logs\*.lock"
if exist "logs\*.pid" del /Q "logs\*.pid"
â€‹
:: å¯åŠ¨ ZooKeeper
echo â–¶ï¸ æ­£åœ¨å¯åŠ¨ ZooKeeper...
start "ZooKeeper" /D "%KAFKA_HOME%" call bin\windows\zookeeper-server-start.bat config\zookeeper.properties
â€‹
:: ç­‰å¾…åˆå§‹åŒ–å®Œæˆ
timeout /t 7 > NUL
â€‹
:: å¯åŠ¨ Kafka
echo â–¶ï¸ æ­£åœ¨å¯åŠ¨ Kafka Server...
call bin\windows\kafka-server-start.bat config\server.properties
â€‹
echo âœ… Kafka å·²æˆåŠŸå¯åŠ¨ï¼
pause
```

---

#### âœ… å…³é—­è„šæœ¬ï¼š`stop-kafka.bat`

```
@echo off
chcp 65001 > nul
TITLE Kafka å…³é—­å™¨ - kafka_2.13-3.9.0
â€‹
SETLOCAL
â€‹
set KAFKA_HOME=F:\kafka_2.13-3.9.0
â€‹
if not exist "%KAFKA_HOME%" (
 Â  Â echo âŒ é”™è¯¯ï¼šKAFKA_HOME è·¯å¾„ä¸å­˜åœ¨: %KAFKA_HOME%
 Â  Â pause
 Â  Â exit /b 1
)
â€‹
cd /d %KAFKA_HOME%
â€‹
:: åœæ­¢ Kafka
echo â¹ï¸ æ­£åœ¨å°è¯•ä¼˜é›…åœ°åœæ­¢ Kafka...
call "%KAFKA_HOME%\bin\windows\kafka-server-stop.bat"
â€‹
:: ç­‰å¾… Kafka è¿›ç¨‹ç»“æŸ
call :wait_for_process_exit "kafka" 30
if errorlevel 1 (
 Â  Â echo âš ï¸ Kafka è¿›ç¨‹æœªèƒ½åœ¨æŒ‡å®šæ—¶é—´å†…é€€å‡ºï¼Œè¯·æ£€æŸ¥æ—¥å¿—æˆ–æ‰‹åŠ¨ç»ˆæ­¢ã€‚
)
â€‹
:: åœæ­¢ ZooKeeper
echo â¹ï¸ æ­£åœ¨å°è¯•ä¼˜é›…åœ°åœæ­¢ ZooKeeper...
call "%KAFKA_HOME%\bin\windows\zookeeper-server-stop.bat"
â€‹
:: ç­‰å¾… ZooKeeper è¿›ç¨‹ç»“æŸ
call :wait_for_process_exit "zookeeper" 30
if errorlevel 1 (
 Â  Â echo âš ï¸ ZooKeeper è¿›ç¨‹æœªèƒ½åœ¨æŒ‡å®šæ—¶é—´å†…é€€å‡ºï¼Œè¯·æ£€æŸ¥æ—¥å¿—æˆ–æ‰‹åŠ¨ç»ˆæ­¢ã€‚
)
â€‹
echo âœ… Kafka å’Œ ZooKeeper å·²å°è¯•ä¼˜é›…å…³é—­ã€‚
pause
exit /b 0
â€‹
â€‹
:: ============ å‡½æ•°åŒº ============
â€‹
:: ç­‰å¾…æŒ‡å®šå…³é”®å­—çš„ Java è¿›ç¨‹é€€å‡º
:wait_for_process_exit
setlocal
set keyword=%~1
set timeout=%~2
set count=0
â€‹
echo ğŸ” æ­£åœ¨ç­‰å¾… [%keyword%] è¿›ç¨‹é€€å‡ºï¼Œæœ€å¤šç­‰å¾… %timeout% ç§’...
â€‹
:loop
tasklist | findstr /i java >nul && (
 Â  Â tasklist | findstr /i %keyword% >nul && (
 Â  Â  Â  Â if %count% lss %timeout% (
 Â  Â  Â  Â  Â  Â timeout /t 1 >nul
 Â  Â  Â  Â  Â  Â set /a count+=1
 Â  Â  Â  Â  Â  Â goto loop
 Â  Â  Â  Â ) else (
 Â  Â  Â  Â  Â  Â endlocal
 Â  Â  Â  Â  Â  Â exit /b 1
 Â  Â  Â  Â )
 Â  Â )
)
â€‹
endlocal
exit /b 0
```

![](https://i-blog.csdnimg.cn/direct/e82ade6a847d4f24ac98841c85b92b04.png)

### åã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
| --- | --- | --- |
| **`Address already in use`** | ä¸Šæ¬¡æœªæ­£å¸¸å…³é—­ Kafka æˆ– ZooKeeper | ä½¿ç”¨ `stop-kafka.bat` å…³é—­æœåŠ¡ï¼Œæˆ–é‡å¯ç”µè„‘ |
| **`Node does not exist`** | ZooKeeper æ²¡æœ‰æ­£ç¡®å¯åŠ¨ | ç¡®ä¿ ZooKeeper å¯åŠ¨åå†å¯åŠ¨ Kafka |
| **`Class 'kafka.Kafka' could not be found`** | è·¯å¾„é”™è¯¯æˆ– JDK ç‰ˆæœ¬ä¸å¯¹ | æ£€æŸ¥ `JAVA_HOME` æ˜¯å¦è®¾ç½®æ­£ç¡® |
| **`æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»`** | Kafka è·¯å¾„åŒ…å«ä¸­æ–‡æˆ–ç©ºæ ¼ | å°† Kafka å®‰è£…åˆ°è‹±æ–‡è·¯å¾„ä¸‹ |

---

æœ¬æ–‡ç« å·²ç»ç”Ÿæˆå¯è¿è¡Œé¡¹ç›® ä¸€é”®è¿è¡Œ



