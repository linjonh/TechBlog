---
layout: post
title: "OSPF的各种LSA类型,多区域及特殊区域"
date: 2025-03-08 22:24:16 +0800
description: "LSA类型名称生成者传播范围核心功能Type 1路由器LSA所有OSPF路由器本区域描述路由器的直连链路和邻居，构建拓扑。Type 2网络LSADR（指定路由器）本区域描述广播/NBMA网络上的所有路由器。Type 3汇总LSA（网络汇总）ABR（区域边界路由器）跨区域（源区域外）通告区域间的网络路由（如子网信息）。Type 4ASBR汇总LSAABR跨区域（源区域外）通告ASBR的位置，帮助其他区域找到外部路由。Type 5外部LSAASBR全自治系统（除特殊区域）"
keywords: "OSPF的各种LSA类型，多区域及特殊区域"
categories: ['Hcip']
tags: ['网络', '智能路由器', 'Hcip', 'Ensp']
artid: "146114771"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146114771
    alt: "OSPF的各种LSA类型,多区域及特殊区域"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146114771
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146114771
cover: https://bing.ee123.net/img/rand?artid=146114771
image: https://bing.ee123.net/img/rand?artid=146114771
img: https://bing.ee123.net/img/rand?artid=146114771
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     OSPF的各种LSA类型，多区域及特殊区域
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
     一、OSPF的LSA类型
    </h3>
    <p>
     OSPF（开放最短路径优先）协议使用多种LSA（链路状态通告）类型来交换网络拓扑信息。以下是主要LSA类型的详细分类及其作用：
    </p>
    <h4>
     <strong>
      1. Type 1 LSA（路由器LSA
     </strong>
     Router LSA
     <strong>
      ）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        生成者
       </strong>
       ：每个OSPF路由器。
      </p>
     </li>
     <li>
      <p>
       <strong>
        传播范围
       </strong>
       ：仅在
       <strong>
        本区域内
       </strong>
       泛洪。
      </p>
     </li>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：描述路由器的直连链路状态和邻居信息，构建区域内的拓扑结构。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      2. Type 2 LSA（网络LSA
     </strong>
     Network LSA
     <strong>
      ）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        生成者
       </strong>
       ：广播网络或NBMA网络中的
       <strong>
        DR（指定路由器）
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        传播范围
       </strong>
       ：仅在
       <strong>
        本区域内
       </strong>
       泛洪。
      </p>
     </li>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：列出连接在同一网络上的所有路由器，辅助构建多路访问网络的拓扑。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      3. Type 3 LSA（汇总LSA
     </strong>
     Network Summary LSA
     <strong>
      ）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        生成者
       </strong>
       ：
       <strong>
        ABR（区域边界路由器）
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        传播范围
       </strong>
       ：跨区域泛洪（源区域外）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：汇总某个区域的网络前缀，通告到其他区域，用于
       <strong>
        区域间路由
       </strong>
       。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      4. Type 4 LSA（ASBR汇总LSA
     </strong>
     ASBR Summary LSA
     <strong>
      ）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        生成者
       </strong>
       ：
       <strong>
        ABR
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        传播范围
       </strong>
       ：跨区域泛洪（源区域外）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：通告**ASBR（自治系统边界路由器）**的位置，帮助其他区域的路由器计算到达外部路由的路径。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      5. Type 5 LSA（外部LSA）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        生成者
       </strong>
       ：
       <strong>
        ASBR
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        传播范围
       </strong>
       ：整个OSPF自治系统（
       <strong>
        除特殊区域外
       </strong>
       ，如Stub、Totally Stubby、NSSA）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：携带外部路由（如静态路由、RIP路由）信息，实现
       <strong>
        跨自治系统的路由
       </strong>
       。
      </p>
     </li>
    </ul>
    <h4>
     <strong>
      6. Type 7 LSA（NSSA外部LSA
     </strong>
     NSSA LSA
     <strong>
      ）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        生成者
       </strong>
       ：
       <strong>
        NSSA区域内的ASBR
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        传播范围
       </strong>
       ：仅在**NSSA（非纯末梢区域）**内泛洪。
      </p>
     </li>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：在NSSA中引入外部路由。ABR会将其转换为Type 5 LSA后转发到其他区域。
      </p>
     </li>
    </ul>
    <h3>
     二、OSPF的多区域
    </h3>
    <p>
     拓扑：
    </p>
    <p>
     <img alt="" height="901" src="https://i-blog.csdnimg.cn/direct/9464d56b4c2a4486871edfe771758fcf.png" width="1401"/>
    </p>
    <h4>
     IP及OSPF配置
    </h4>
    <blockquote>
     <p>
      [R1]int g0/0/0
      <br/>
      [R1-GigabitEthernet0/0/0]ip add 10.1.1.1 24
      <br/>
      [R1]int LoopBack 0
      <br/>
      [R1-LoopBack0]ip add 1.1.1.1 32
      <br/>
      [R1]ospf router-id 1.1.1.1
      <br/>
      [R1-ospf-1]area 2
      <br/>
      [R1-ospf-1-area-0.0.0.2]network 10.1.1.0 0.0.0.255
      <br/>
      [R1-ospf-1-area-0.0.0.2]network 1.1.1.1 0.0.0.0
     </p>
     <p>
     </p>
     <p>
      [R2]int g0/0/0
     </p>
     <p>
      [R2-GigabitEthernet0/0/0lip add 10.1.1.2 24
     </p>
     <p>
      [R2-GigabitEthernet0/0/0lint s1/0/1
     </p>
     <p>
      [R2-Serial1/0/1ip add 23.1.1.2 24
     </p>
     <p>
      [R2-Seria11/0/1lint loopback 0
     </p>
     <p>
      [R2-LoopBack0]ip add 2.2.2.2 32
     </p>
     <p>
      [R2]ospf router-id 2.2.2.2
      <br/>
      [R2-ospf-1larea 2
     </p>
     <p>
      [R2-ospf-1-area-0.0.0.2]network 10.1.1.0 0.0.0.255
     </p>
     <p>
      [R2-ospf-1larea 0
     </p>
     <p>
      [R2-ospf-1-area-0.0.0.0]network 23.1.1.0 0.0.0.255
     </p>
     <p>
      [R2-ospf-1-area-0.0.0.0]network 2.2.2.2 0.0.0.0
     </p>
     <p>
     </p>
     <p>
      [R3]int s1/0/1
     </p>
     <p>
      [R3-Serial1/0/1lip add 23.1.1.3 24
     </p>
     <p>
      [R3-serial1/0/1lint s1/0/0
     </p>
     <p>
      [R3-Serial1/0/0lip add 34.1.1.3 24
     </p>
     <p>
      [R3-serial1/0/0lint loopback
     </p>
     <p>
      [R3-LoopBack0]ip add 3.3.3.3 32
     </p>
     <p>
      [R3]ospf router-id 3.3.3.3
      <br/>
      [R3-ospf-1larea 0
     </p>
     <p>
      [R3-ospf-1-area-0.0.0.0]network 23.1.1.0 0.0.0.255
     </p>
     <p>
      [R3-ospf-1larea 1
      <br/>
      R3-ospf-1-area-0.0.0.1]network 34.1.1.0 0.0.0.255
     </p>
     <p>
      [R3-ospf-1-area-0.0.0.1]network 3.3.3.3 0.0.0.0
     </p>
     <p>
     </p>
     <p>
      [R4lint s1/0/1
     </p>
     <p>
      [R4-Serial1/0/1lip add 34.1.1.4 24
     </p>
     <p>
      [R4-Serial1/0/1lint s1/0/0
     </p>
     <p>
      [R4-Serial1/0/0]ip add 45.1.1.4 24
     </p>
     <p>
      [R4-Serial1/0/0lint loopback 0
     </p>
     <p>
      [R4-LoopBack0lip add 4.4.4.4 32
     </p>
     <p>
      [R4lospf router-id 4.4.4.4
     </p>
     <p>
      [R4-ospf-1larea 1
     </p>
     <p>
      [R4-ospf-1-area-0.0.0.1]network 34.1.1.0 0.0.0.255
     </p>
     <p>
      [R4-ospf-1-area-0.0.0.1]network 45.1.1.0 0.0.0.255
     </p>
     <p>
      [R4-ospf-1-area-0.0.0.1]network 4.4.4.4 0.0.0.0
     </p>
     <p>
     </p>
     <p>
      [R5lint s1/0/0
     </p>
     <p>
      [R5-Serial1/0/0]ip add 45.1.1.5 24
     </p>
     <p>
      [R5-Serial1/0/0]int loopback 0
     </p>
     <p>
      [R5-LoopBack0]ip add 5.5.5.5 32
     </p>
     <p>
      [R5]ospf router-id 5.5.5.5
     </p>
     <p>
      [R5-ospf-1]area 1
      <br/>
      [R5-ospf-1-area-0.0.0.1]network 45.1.1.0 0.0.0.255
     </p>
     <p>
      [R5-ospf-1-area-0.0.0.1]network 5.5.5.5 0.0.0.0
     </p>
     <p>
     </p>
     <p>
      [R6lint g0/0/0
     </p>
     <p>
      [R6-GigabitEthernet0/0/0]ip add 10.1.1.6 24
     </p>
     <p>
      [R6-GigabitEthernet0/0/0lint loopback 0
     </p>
     <p>
      [R6-LoopBack0]ip add 6.6.6.6 32
     </p>
     <p>
      [R6]ospf router-id 6.6.6.6
     </p>
     <p>
      [R6-ospf-1]area 2
     </p>
     <p>
      [R6-ospf-1-area-0.0.0.2]network 10.1.1.0 0.0.0.255
     </p>
     <p>
      [R6-ospf-1-area-0.0.0.2network 6.6.6.6 0.0.0.0
     </p>
    </blockquote>
    <p>
     在R1上查看一类LSA
    </p>
    <p class="img-center">
     <img alt="" height="383" src="https://i-blog.csdnimg.cn/direct/26f4a83d81744048bc3d051f61578c89.png" width="478"/>
    </p>
    <p>
    </p>
    <p>
     在R1上查看2类LSA
    </p>
    <p class="img-center">
     <img alt="" height="369" src="https://i-blog.csdnimg.cn/direct/49bfe38a5a88475ab3c184aa2b1286d0.png" width="588"/>
    </p>
    <p>
     在R3上查看3类LSA
    </p>
    <p class="img-center">
     <img alt="" height="501" src="https://i-blog.csdnimg.cn/direct/3a4c0b79323a4334817daec8285980a1.png" width="614"/>
    </p>
    <p>
    </p>
    <p>
     在R5上创建回环口并引入OSPF中
    </p>
    <p>
     [R5]int LoopBack 100
     <br/>
     [R5-LoopBack100]ip add 100.100.100.100 32
     <br/>
     [R5]ospf
     <br/>
     [R5-ospf-1]import-route direct     //引入直连路由
    </p>
    <p>
     在R5上查看5类LSA
    </p>
    <p class="img-center">
     <img alt="" height="360" src="https://i-blog.csdnimg.cn/direct/06cefc77ce7d4625801b2516c3011e1d.png" width="508"/>
    </p>
    <p>
    </p>
    <p>
     在R3上查看4类LSA
    </p>
    <p class="img-center">
     <img alt="" height="357" src="https://i-blog.csdnimg.cn/direct/c9f06f0339cb49ccbb56481a4fbf43d4.png" width="528"/>
    </p>
    <p>
    </p>
    <p>
     在R1查看LSDB
    </p>
    <p class="img-center">
     <img alt="" height="323" src="https://i-blog.csdnimg.cn/direct/6b13bdd8edaa4c3fb1931703358765d0.png" width="554"/>
    </p>
    <h3>
     三、OSPF的特殊区域
    </h3>
    <p style="margin-left:.0001pt; margin-right:0; text-align:justify">
     OSPF 特殊区域 是为了优化 OSPF（开放最短 Path First）网络的性能和简化路由表而设计的一种区域类型。特殊区域通过限制某些类型的链路状态通告（LSA）的传播，减少链路状态数据库（LSDB）的大小，从而降低路由器的内存和 CPU 消耗。
    </p>
    <p>
     <img alt="" height="883" src="https://i-blog.csdnimg.cn/direct/d9bd7062f6b3461d97a68cbd1fe53a57.png" width="1426"/>
    </p>
    <p>
     <strong>
      特殊区域的IP配置与OSPF配置与多区域实验一样
     </strong>
    </p>
    <p>
     在R5上创建一个回环口，并引入ospf
    </p>
    <p>
     [R5]int LoopBack 100
     <br/>
     [R5-LoopBack100]ip add 100.100.100.100 32
     <br/>
     [R5-LoopBack100]q
     <br/>
     [R5]ospf
     <br/>
     [R5-ospf-1]import-route direct
    </p>
    <p>
     在R1上查看ospf路由表
    </p>
    <p>
     <img alt="" height="703" src="https://i-blog.csdnimg.cn/direct/8429e5db11654b8f87d9c46261c5875a.png" width="1284"/>
    </p>
    <p>
     从上面可以看出区域2有域内路由、域间路由和外部路由
    </p>
    <p>
     把区域2设置成Stub区域
    </p>
    <blockquote>
     <p>
      [R1]ospf
      <br/>
      [R1-ospf-1]area 2
      <br/>
      [R1-ospf-1-area-0.0.0.2]stub
     </p>
     <p>
      [R2]ospf
      <br/>
      [R2-ospf-1]area 2
      <br/>
      [R2-ospf-1-area-0.0.0.2]stub
     </p>
     <p>
      [R6]ospf
      <br/>
      [R6-ospf-1]area 2
      <br/>
      [R6-ospf-1-area-0.0.0.2]stub
     </p>
    </blockquote>
    <p>
     再查看R1的ospf路由表
    </p>
    <p>
     <img alt="" height="411" src="https://i-blog.csdnimg.cn/direct/ac6e4013103e4c9a85ba7bbbcc22b9d0.png" width="910"/>
    </p>
    <p>
    </p>
    <p>
     可以看到区域2的外部路由消失了但是R2产生了一条3类的默认路由
    </p>
    <p>
     把区域2设置成Totally Stub
    </p>
    <blockquote>
     <p>
      [R2]ospf
      <br/>
      [R2-ospf-1]area 2
      <br/>
      [R2-ospf-1-area-0.0.0.2]stub no-summary
     </p>
    </blockquote>
    <p>
     再来查看R1的OSPF路由表
    </p>
    <p>
     <img alt="" height="283" src="https://i-blog.csdnimg.cn/direct/3c6576ce94594a3b8808579570296d6c.png" width="916"/>
    </p>
    <p>
    </p>
    <p>
     可以看见区域2内只有域内路由，R2下发了一条3类LSA
    </p>
    <p>
     将区域2设置成NSSA区域
    </p>
    <blockquote>
     <p>
      [R1]ospf
      <br/>
      [R1-ospf-1]area 2
      <br/>
      [R1-ospf-1-area-0.0.0.2]undo stub
      <br/>
      [R1-ospf-1-area-0.0.0.2]nssa
     </p>
     <p>
      [R2]ospf
      <br/>
      [R2-ospf-1]area 2
      <br/>
      [R2-ospf-1-area-0.0.0.2]undo stub
      <br/>
      [R2-ospf-1-area-0.0.0.2]nssa
     </p>
     <p>
      [R6]ospf
      <br/>
      [R6-ospf-1]area 2
      <br/>
      [R6-ospf-1-area-0.0.0.2]undo stub
      <br/>
      [R6-ospf-1-area-0.0.0.2]nssa
     </p>
    </blockquote>
    <p>
     查看ospf路由表
    </p>
    <p>
     <img alt="" height="489" src="https://i-blog.csdnimg.cn/direct/13b60d74db694320a9bb4cf499eaba05.png" width="937"/>
    </p>
    <p>
     可以看到区域2没有外部路由，但是R2下发了一条7类的默认路由
    </p>
    <p>
     接下来在R1上引入外部路由200.200.200.200
    </p>
    <blockquote>
     <p>
      [R1]int LoopBack 200
      <br/>
      [R1-LoopBack200]ip add 200.200.200.200 32
      <br/>
      [R1]ospf
      <br/>
      [R1-ospf-1]import-route direct
     </p>
     <p>
     </p>
    </blockquote>
    <p>
     然后再R2上查看OSPF的路由表
    </p>
    <p>
     <img alt="" height="530" src="https://i-blog.csdnimg.cn/direct/8b70c5001ff84bc0a8cc4d7c1ac2aa57.png" width="884"/>
    </p>
    <p>
    </p>
    <p>
     可以看到NSSA区域引入了外部路由
    </p>
    <p>
     <img alt="" height="548" src="https://i-blog.csdnimg.cn/direct/f97e2a4d39e544cc982847af2eee6507.png" width="743"/>
    </p>
    <p>
     在R2上查看7类LSA200.200.200.200
    </p>
    <p>
    </p>
    <h3>
     四、总结
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         LSA类型
        </strong>
       </th>
       <th>
        <strong>
         名称
        </strong>
       </th>
       <th>
        <strong>
         生成者
        </strong>
       </th>
       <th>
        <strong>
         传播范围
        </strong>
       </th>
       <th>
        <strong>
         核心功能
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         Type 1
        </strong>
       </td>
       <td>
        路由器LSA
       </td>
       <td>
        所有OSPF路由器
       </td>
       <td>
        本区域
       </td>
       <td>
        描述路由器的直连链路和邻居，构建拓扑。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Type 2
        </strong>
       </td>
       <td>
        网络LSA
       </td>
       <td>
        DR（指定路由器）
       </td>
       <td>
        本区域
       </td>
       <td>
        描述广播/NBMA网络上的所有路由器。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Type 3
        </strong>
       </td>
       <td>
        汇总LSA（网络汇总）
       </td>
       <td>
        ABR（区域边界路由器）
       </td>
       <td>
        跨区域（源区域外）
       </td>
       <td>
        通告区域间的网络路由（如子网信息）。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Type 4
        </strong>
       </td>
       <td>
        ASBR汇总LSA
       </td>
       <td>
        ABR
       </td>
       <td>
        跨区域（源区域外）
       </td>
       <td>
        通告ASBR的位置，帮助其他区域找到外部路由。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Type 5
        </strong>
       </td>
       <td>
        外部LSA
       </td>
       <td>
        ASBR
       </td>
       <td>
        全自治系统（除特殊区域）
       </td>
       <td>
        携带外部路由（如静态路由、RIP）。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Type 7
        </strong>
       </td>
       <td>
        NSSA外部LSA
       </td>
       <td>
        NSSA区域内的ASBR
       </td>
       <td>
        仅NSSA区域
       </td>
       <td>
        在NSSA中引入外部路由，ABR将其转为Type 5。
       </td>
      </tr>
     </tbody>
    </table>
    <table>
     <thead>
      <tr>
       <th>
        <strong>
         特殊区域
        </strong>
       </th>
       <th>
        <strong>
         允许的LSA
        </strong>
       </th>
       <th>
        <strong>
         禁止的LSA
        </strong>
       </th>
       <th>
        <strong>
         特点
        </strong>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         Stub区域
        </strong>
       </td>
       <td>
        Type 1/2/3 +
        <strong>
         默认路由
        </strong>
        （Type 3生成）
       </td>
       <td>
        Type 4/5
       </td>
       <td>
        禁止外部路由（Type 5），用默认路由替代。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Totally Stubby
        </strong>
       </td>
       <td>
        Type 1/2 +
        <strong>
         默认路由
        </strong>
        （仅ABR生成）
       </td>
       <td>
        Type 3/4/5
       </td>
       <td>
        进一步禁止区域间路由（Type 3），仅留默认。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         NSSA
        </strong>
       </td>
       <td>
        Type 1/2/3 +
        <strong>
         Type 7
        </strong>
        （本地外部路由）
       </td>
       <td>
        Type 4/5（外部路由用Type 7替代）
       </td>
       <td>
        允许本区域引入外部路由（Type 7），ABR将Type 7转为Type 5。
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Totally NSSA
        </strong>
       </td>
       <td>
        Type 1/2 +
        <strong>
         默认路由
        </strong>
        + Type 7
       </td>
       <td>
        Type 3/4/5
       </td>
       <td>
        类似Totally Stubby，但允许本地Type 7。
       </td>
      </tr>
     </tbody>
    </table>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f66616e7368697a686972656e2f:61727469636c652f64657461696c732f313436313134373731" class_="artid" style="display:none">
 </p>
</div>


