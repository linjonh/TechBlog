---
layout: post
title: "flask实现mvc模式"
date: 2025-03-06 21:15:26 +0800
description: "Flask 默认是一个轻量级框架，并不强制使用 MVC 模式，但我们可以按照 MVC 结构来组织代码，使项目更加清晰和可维护。这样组织代码后，Flask 也能遵循 MVC 模式，使代码结构清晰、易维护！充当 Controller，使其符合 MVC 模式。数据库模型（使用 Flask-SQLAlchemy）前端 HTML 模板（使用 Jinja2）Flask 本身并没有严格的。控制器（定义路由和业务逻辑）"
keywords: "flask实现mvc模式"
categories: ['Python']
tags: ['Python', 'Mvc', 'Flask']
artid: "146080042"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146080042
    alt: "flask实现mvc模式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146080042
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146080042
cover: https://bing.ee123.net/img/rand?artid=146080042
image: https://bing.ee123.net/img/rand?artid=146080042
img: https://bing.ee123.net/img/rand?artid=146080042
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     flask实现mvc模式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     Flask 默认是一个轻量级框架，并不强制使用 MVC 模式，但我们可以按照 MVC 结构来组织代码，使项目更加清晰和可维护。
    </p>
    <hr/>
    <h3>
     <a id="Flask__MVC__4">
     </a>
     <strong>
      Flask 实现 MVC 模式
     </strong>
    </h3>
    <p>
     Flask 本身并没有严格的
     <code>
      Controller
     </code>
     层，但我们可以通过
     <strong>
      视图函数（View Functions）
     </strong>
     充当 Controller，使其符合 MVC 模式。
    </p>
    <h4>
     <a id="_7">
     </a>
     <strong>
      目录结构
     </strong>
    </h4>
    <pre><code class="prism language-plaintext">flask_mvc_app/
│── app/
│   ├── models.py        # Model (数据库模型)
│   ├── views.py         # View (视图逻辑)
│   ├── controllers.py   # Controller (路由 &amp; 业务逻辑)
│   ├── templates/       # HTML 模板 (Jinja2)
│   │   ├── index.html
│   ├── static/          # 静态文件 (CSS, JS, images)
│── app.py               # 入口文件
│── config.py            # 配置文件
│── requirements.txt     # 依赖库
</code></pre>
    <hr/>
    <h3>
     <a id="1_Model_24">
     </a>
     <strong>
      1. Model（模型层）
     </strong>
    </h3>
    <p>
     数据库模型（使用 Flask-SQLAlchemy）
    </p>
    <pre><code class="prism language-python"><span class="token comment"># app/models.py</span>
<span class="token keyword">from</span> flask_sqlalchemy <span class="token keyword">import</span> SQLAlchemy

db <span class="token operator">=</span> SQLAlchemy<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>String<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    price <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    stock <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"&lt;Product </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">&gt;"</span></span>
</code></pre>
    <hr/>
    <h3>
     <a id="2_Controller_44">
     </a>
     <strong>
      2. Controller（控制器层）
     </strong>
    </h3>
    <p>
     控制器（定义路由和业务逻辑）
    </p>
    <pre><code class="prism language-python"><span class="token comment"># app/controllers.py</span>
<span class="token keyword">from</span> flask <span class="token keyword">import</span> render_template
<span class="token keyword">from</span> app<span class="token punctuation">.</span>models <span class="token keyword">import</span> Product

<span class="token keyword">def</span> <span class="token function">get_products</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    products <span class="token operator">=</span> Product<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">"index.html"</span><span class="token punctuation">,</span> products<span class="token operator">=</span>products<span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="3_View_58">
     </a>
     <strong>
      3. View（视图层）
     </strong>
    </h3>
    <p>
     前端 HTML 模板（使用 Jinja2）
    </p>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- app/templates/index.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>商品列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>商品列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        {% for product in products %}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ product.name }} - ¥{<!-- -->{ product.price }} (库存: {<!-- -->{ product.stock }})<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        {% endfor %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <hr/>
    <h3>
     <a id="4_Flask__81">
     </a>
     <strong>
      4. Flask 入口文件
     </strong>
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># app.py</span>
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">from</span> app<span class="token punctuation">.</span>models <span class="token keyword">import</span> db
<span class="token keyword">from</span> app<span class="token punctuation">.</span>controllers <span class="token keyword">import</span> get_products

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"SQLALCHEMY_DATABASE_URI"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"sqlite:///products.db"</span>
db<span class="token punctuation">.</span>init_app<span class="token punctuation">(</span>app<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> get_products<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> app<span class="token punctuation">.</span>app_context<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        db<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 创建数据库表</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="_Flask_MVC__104">
     </a>
     <strong>
      运行 Flask MVC 项目
     </strong>
    </h3>
    <ol>
     <li>
      安装 Flask 及其扩展：
      <pre><code class="prism language-bash">pip <span class="token function">install</span> flask flask-sqlalchemy
</code></pre>
     </li>
     <li>
      运行应用：
      <pre><code class="prism language-bash">python app.py
</code></pre>
     </li>
     <li>
      打开浏览器访问
      <code>
       http://127.0.0.1:5000/
      </code>
      ，即可看到商品列表。
     </li>
    </ol>
    <hr/>
    <h3>
     <a id="_117">
     </a>
     <strong>
      总结
     </strong>
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        层次
       </th>
       <th>
        Flask 实现方式
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         Model（模型）
        </strong>
       </td>
       <td>
        <code>
         models.py
        </code>
        里定义数据库模型（使用 Flask-SQLAlchemy）
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         View（视图）
        </strong>
       </td>
       <td>
        <code>
         templates/
        </code>
        目录中的 HTML 模板
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         Controller（控制器）
        </strong>
       </td>
       <td>
        <code>
         controllers.py
        </code>
        处理路由逻辑，调用 Model 并返回 View
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     这样组织代码后，Flask 也能遵循 MVC 模式，使代码结构清晰、易维护！ 🚀
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6c79637768752f:61727469636c652f64657461696c732f313436303830303432" class_="artid" style="display:none">
 </p>
</div>


